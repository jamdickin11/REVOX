const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./style.DvPQugNg.css","./style.D_Zp81Ia.css","./BkApbOUb.js","./B2f2A3Ac.js","./error-404.D9L6d5rG.css","./EsbXx8Wj.js","./error-500.xjnCocKP.css"])))=>i.map(i=>d[i]);
/**
* @vue/shared v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**//*! #__NO_SIDE_EFFECTS__ */function sB(e){const t=Object.create(null);for(const r of e.split(","))t[r]=1;return r=>r in t}const vi={},t1=[],bu=()=>{},O2e=()=>!1,e4=e=>e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&(e.charCodeAt(2)>122||e.charCodeAt(2)<97),lB=e=>e.startsWith("onUpdate:"),Ca=Object.assign,uB=(e,t)=>{const r=e.indexOf(t);r>-1&&e.splice(r,1)},B2e=Object.prototype.hasOwnProperty,wi=(e,t)=>B2e.call(e,t),dr=Array.isArray,r1=e=>F6(e)==="[object Map]",kne=e=>F6(e)==="[object Set]",lr=e=>typeof e=="function",Ki=e=>typeof e=="string",Ld=e=>typeof e=="symbol",Zi=e=>e!==null&&typeof e=="object",Rne=e=>(Zi(e)||lr(e))&&lr(e.then)&&lr(e.catch),One=Object.prototype.toString,F6=e=>One.call(e),N2e=e=>F6(e).slice(8,-1),Bne=e=>F6(e)==="[object Object]",cB=e=>Ki(e)&&e!=="NaN"&&e[0]!=="-"&&""+parseInt(e,10)===e,i1=sB(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),z6=e=>{const t=Object.create(null);return r=>t[r]||(t[r]=e(r))},V2e=/-(\w)/g,Ys=z6(e=>e.replace(V2e,(t,r)=>r?r.toUpperCase():"")),F2e=/\B([A-Z])/g,Ap=z6(e=>e.replace(F2e,"-$1").toLowerCase()),H6=z6(e=>e.charAt(0).toUpperCase()+e.slice(1)),X7=z6(e=>e?`on${H6(e)}`:""),ss=(e,t)=>!Object.is(e,t),$5=(e,...t)=>{for(let r=0;r<e.length;r++)e[r](...t)},Nne=(e,t,r,i=!1)=>{Object.defineProperty(e,t,{configurable:!0,enumerable:!1,writable:i,value:r})},$D=e=>{const t=parseFloat(e);return isNaN(t)?e:t},z2e=e=>{const t=Ki(e)?Number(e):NaN;return isNaN(t)?e:t};let OH;const U6=()=>OH||(OH=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function sp(e){if(dr(e)){const t={};for(let r=0;r<e.length;r++){const i=e[r],n=Ki(i)?j2e(i):sp(i);if(n)for(const a in n)t[a]=n[a]}return t}else if(Ki(e)||Zi(e))return e}const H2e=/;(?![^(]*\))/g,U2e=/:([^]+)/,G2e=/\/\*[^]*?\*\//g;function j2e(e){const t={};return e.replace(G2e,"").split(H2e).forEach(r=>{if(r){const i=r.split(U2e);i.length>1&&(t[i[0].trim()]=i[1].trim())}}),t}function Tt(e){let t="";if(Ki(e))t=e;else if(dr(e))for(let r=0;r<e.length;r++){const i=Tt(e[r]);i&&(t+=i+" ")}else if(Zi(e))for(const r in e)e[r]&&(t+=r+" ");return t.trim()}function W2e(e){if(!e)return null;let{class:t,style:r}=e;return t&&!Ki(t)&&(e.class=Tt(t)),r&&(e.style=sp(r)),e}const q2e="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",Y2e=sB(q2e);function Vne(e){return!!e||e===""}const Fne=e=>!!(e&&e.__v_isRef===!0),Br=e=>Ki(e)?e:e==null?"":dr(e)||Zi(e)&&(e.toString===One||!lr(e.toString))?Fne(e)?Br(e.value):JSON.stringify(e,zne,2):String(e),zne=(e,t)=>Fne(t)?zne(e,t.value):r1(t)?{[`Map(${t.size})`]:[...t.entries()].reduce((r,[i,n],a)=>(r[Z7(i,a)+" =>"]=n,r),{})}:kne(t)?{[`Set(${t.size})`]:[...t.values()].map(r=>Z7(r))}:Ld(t)?Z7(t):Zi(t)&&!dr(t)&&!Bne(t)?String(t):t,Z7=(e,t="")=>{var r;return Ld(e)?`Symbol(${(r=e.description)!=null?r:t})`:e};/**
* @vue/reactivity v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let Rs;class Hne{constructor(t=!1){this.detached=t,this._active=!0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=Rs,!t&&Rs&&(this.index=(Rs.scopes||(Rs.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let t,r;if(this.scopes)for(t=0,r=this.scopes.length;t<r;t++)this.scopes[t].pause();for(t=0,r=this.effects.length;t<r;t++)this.effects[t].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let t,r;if(this.scopes)for(t=0,r=this.scopes.length;t<r;t++)this.scopes[t].resume();for(t=0,r=this.effects.length;t<r;t++)this.effects[t].resume()}}run(t){if(this._active){const r=Rs;try{return Rs=this,t()}finally{Rs=r}}}on(){Rs=this}off(){Rs=this.parent}stop(t){if(this._active){this._active=!1;let r,i;for(r=0,i=this.effects.length;r<i;r++)this.effects[r].stop();for(this.effects.length=0,r=0,i=this.cleanups.length;r<i;r++)this.cleanups[r]();if(this.cleanups.length=0,this.scopes){for(r=0,i=this.scopes.length;r<i;r++)this.scopes[r].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!t){const n=this.parent.scopes.pop();n&&n!==this&&(this.parent.scopes[this.index]=n,n.index=this.index)}this.parent=void 0}}}function X2e(e){return new Hne(e)}function Une(){return Rs}let zi;const Q7=new WeakSet;class Gne{constructor(t){this.fn=t,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,Rs&&Rs.active&&Rs.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,Q7.has(this)&&(Q7.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||Wne(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,BH(this),qne(this);const t=zi,r=wu;zi=this,wu=!0;try{return this.fn()}finally{Yne(this),zi=t,wu=r,this.flags&=-3}}stop(){if(this.flags&1){for(let t=this.deps;t;t=t.nextDep)fB(t);this.deps=this.depsTail=void 0,BH(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?Q7.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){eI(this)&&this.run()}get dirty(){return eI(this)}}let jne=0,Kx,Jx;function Wne(e,t=!1){if(e.flags|=8,t){e.next=Jx,Jx=e;return}e.next=Kx,Kx=e}function hB(){jne++}function dB(){if(--jne>0)return;if(Jx){let t=Jx;for(Jx=void 0;t;){const r=t.next;t.next=void 0,t.flags&=-9,t=r}}let e;for(;Kx;){let t=Kx;for(Kx=void 0;t;){const r=t.next;if(t.next=void 0,t.flags&=-9,t.flags&1)try{t.trigger()}catch(i){e||(e=i)}t=r}}if(e)throw e}function qne(e){for(let t=e.deps;t;t=t.nextDep)t.version=-1,t.prevActiveLink=t.dep.activeLink,t.dep.activeLink=t}function Yne(e){let t,r=e.depsTail,i=r;for(;i;){const n=i.prevDep;i.version===-1?(i===r&&(r=n),fB(i),Z2e(i)):t=i,i.dep.activeLink=i.prevActiveLink,i.prevActiveLink=void 0,i=n}e.deps=t,e.depsTail=r}function eI(e){for(let t=e.deps;t;t=t.nextDep)if(t.dep.version!==t.version||t.dep.computed&&(Xne(t.dep.computed)||t.dep.version!==t.version))return!0;return!!e._dirty}function Xne(e){if(e.flags&4&&!(e.flags&16)||(e.flags&=-17,e.globalVersion===Fb))return;e.globalVersion=Fb;const t=e.dep;if(e.flags|=2,t.version>0&&!e.isSSR&&e.deps&&!eI(e)){e.flags&=-3;return}const r=zi,i=wu;zi=e,wu=!0;try{qne(e);const n=e.fn(e._value);(t.version===0||ss(n,e._value))&&(e._value=n,t.version++)}catch(n){throw t.version++,n}finally{zi=r,wu=i,Yne(e),e.flags&=-3}}function fB(e,t=!1){const{dep:r,prevSub:i,nextSub:n}=e;if(i&&(i.nextSub=n,e.prevSub=void 0),n&&(n.prevSub=i,e.nextSub=void 0),r.subs===e&&(r.subs=i,!i&&r.computed)){r.computed.flags&=-5;for(let a=r.computed.deps;a;a=a.nextDep)fB(a,!0)}!t&&!--r.sc&&r.map&&r.map.delete(r.key)}function Z2e(e){const{prevDep:t,nextDep:r}=e;t&&(t.nextDep=r,e.prevDep=void 0),r&&(r.prevDep=t,e.nextDep=void 0)}let wu=!0;const Zne=[];function Sp(){Zne.push(wu),wu=!1}function Cp(){const e=Zne.pop();wu=e===void 0?!0:e}function BH(e){const{cleanup:t}=e;if(e.cleanup=void 0,t){const r=zi;zi=void 0;try{t()}finally{zi=r}}}let Fb=0;class Q2e{constructor(t,r){this.sub=t,this.dep=r,this.version=r.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class G6{constructor(t){this.computed=t,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0}track(t){if(!zi||!wu||zi===this.computed)return;let r=this.activeLink;if(r===void 0||r.sub!==zi)r=this.activeLink=new Q2e(zi,this),zi.deps?(r.prevDep=zi.depsTail,zi.depsTail.nextDep=r,zi.depsTail=r):zi.deps=zi.depsTail=r,Qne(r);else if(r.version===-1&&(r.version=this.version,r.nextDep)){const i=r.nextDep;i.prevDep=r.prevDep,r.prevDep&&(r.prevDep.nextDep=i),r.prevDep=zi.depsTail,r.nextDep=void 0,zi.depsTail.nextDep=r,zi.depsTail=r,zi.deps===r&&(zi.deps=i)}return r}trigger(t){this.version++,Fb++,this.notify(t)}notify(t){hB();try{for(let r=this.subs;r;r=r.prevSub)r.sub.notify()&&r.sub.dep.notify()}finally{dB()}}}function Qne(e){if(e.dep.sc++,e.sub.flags&4){const t=e.dep.computed;if(t&&!e.dep.subs){t.flags|=20;for(let i=t.deps;i;i=i.nextDep)Qne(i)}const r=e.dep.subs;r!==e&&(e.prevSub=r,r&&(r.nextSub=e)),e.dep.subs=e}}const r8=new WeakMap,sv=Symbol(""),tI=Symbol(""),zb=Symbol("");function uo(e,t,r){if(wu&&zi){let i=r8.get(e);i||r8.set(e,i=new Map);let n=i.get(r);n||(i.set(r,n=new G6),n.map=i,n.key=r),n.track()}}function Wh(e,t,r,i,n,a){const o=r8.get(e);if(!o){Fb++;return}const s=l=>{l&&l.trigger()};if(hB(),t==="clear")o.forEach(s);else{const l=dr(e),u=l&&cB(r);if(l&&r==="length"){const c=Number(i);o.forEach((h,d)=>{(d==="length"||d===zb||!Ld(d)&&d>=c)&&s(h)})}else switch((r!==void 0||o.has(void 0))&&s(o.get(r)),u&&s(o.get(zb)),t){case"add":l?u&&s(o.get("length")):(s(o.get(sv)),r1(e)&&s(o.get(tI)));break;case"delete":l||(s(o.get(sv)),r1(e)&&s(o.get(tI)));break;case"set":r1(e)&&s(o.get(sv));break}}dB()}function K2e(e,t){const r=r8.get(e);return r&&r.get(t)}function mm(e){const t=pi(e);return t===e?t:(uo(t,"iterate",zb),Pl(e)?t:t.map(co))}function j6(e){return uo(e=pi(e),"iterate",zb),e}const J2e={__proto__:null,[Symbol.iterator](){return K7(this,Symbol.iterator,co)},concat(...e){return mm(this).concat(...e.map(t=>dr(t)?mm(t):t))},entries(){return K7(this,"entries",e=>(e[1]=co(e[1]),e))},every(e,t){return mh(this,"every",e,t,void 0,arguments)},filter(e,t){return mh(this,"filter",e,t,r=>r.map(co),arguments)},find(e,t){return mh(this,"find",e,t,co,arguments)},findIndex(e,t){return mh(this,"findIndex",e,t,void 0,arguments)},findLast(e,t){return mh(this,"findLast",e,t,co,arguments)},findLastIndex(e,t){return mh(this,"findLastIndex",e,t,void 0,arguments)},forEach(e,t){return mh(this,"forEach",e,t,void 0,arguments)},includes(...e){return J7(this,"includes",e)},indexOf(...e){return J7(this,"indexOf",e)},join(e){return mm(this).join(e)},lastIndexOf(...e){return J7(this,"lastIndexOf",e)},map(e,t){return mh(this,"map",e,t,void 0,arguments)},pop(){return l2(this,"pop")},push(...e){return l2(this,"push",e)},reduce(e,...t){return NH(this,"reduce",e,t)},reduceRight(e,...t){return NH(this,"reduceRight",e,t)},shift(){return l2(this,"shift")},some(e,t){return mh(this,"some",e,t,void 0,arguments)},splice(...e){return l2(this,"splice",e)},toReversed(){return mm(this).toReversed()},toSorted(e){return mm(this).toSorted(e)},toSpliced(...e){return mm(this).toSpliced(...e)},unshift(...e){return l2(this,"unshift",e)},values(){return K7(this,"values",co)}};function K7(e,t,r){const i=j6(e),n=i[t]();return i!==e&&!Pl(e)&&(n._next=n.next,n.next=()=>{const a=n._next();return a.value&&(a.value=r(a.value)),a}),n}const $2e=Array.prototype;function mh(e,t,r,i,n,a){const o=j6(e),s=o!==e&&!Pl(e),l=o[t];if(l!==$2e[t]){const h=l.apply(e,a);return s?co(h):h}let u=r;o!==e&&(s?u=function(h,d){return r.call(this,co(h),d,e)}:r.length>2&&(u=function(h,d){return r.call(this,h,d,e)}));const c=l.call(o,u,i);return s&&n?n(c):c}function NH(e,t,r,i){const n=j6(e);let a=r;return n!==e&&(Pl(e)?r.length>3&&(a=function(o,s,l){return r.call(this,o,s,l,e)}):a=function(o,s,l){return r.call(this,o,co(s),l,e)}),n[t](a,...i)}function J7(e,t,r){const i=pi(e);uo(i,"iterate",zb);const n=i[t](...r);return(n===-1||n===!1)&&mB(r[0])?(r[0]=pi(r[0]),i[t](...r)):n}function l2(e,t,r=[]){Sp(),hB();const i=pi(e)[t].apply(e,r);return dB(),Cp(),i}const exe=sB("__proto__,__v_isRef,__isVue"),Kne=new Set(Object.getOwnPropertyNames(Symbol).filter(e=>e!=="arguments"&&e!=="caller").map(e=>Symbol[e]).filter(Ld));function txe(e){Ld(e)||(e=String(e));const t=pi(this);return uo(t,"has",e),t.hasOwnProperty(e)}class Jne{constructor(t=!1,r=!1){this._isReadonly=t,this._isShallow=r}get(t,r,i){if(r==="__v_skip")return t.__v_skip;const n=this._isReadonly,a=this._isShallow;if(r==="__v_isReactive")return!n;if(r==="__v_isReadonly")return n;if(r==="__v_isShallow")return a;if(r==="__v_raw")return i===(n?a?hxe:rae:a?tae:eae).get(t)||Object.getPrototypeOf(t)===Object.getPrototypeOf(i)?t:void 0;const o=dr(t);if(!n){let l;if(o&&(l=J2e[r]))return l;if(r==="hasOwnProperty")return txe}const s=Reflect.get(t,r,Aa(t)?t:i);return(Ld(r)?Kne.has(r):exe(r))||(n||uo(t,"get",r),a)?s:Aa(s)?o&&cB(r)?s:s.value:Zi(s)?n?iae(s):lp(s):s}}class $ne extends Jne{constructor(t=!1){super(!1,t)}set(t,r,i,n){let a=t[r];if(!this._isShallow){const l=up(a);if(!Pl(i)&&!up(i)&&(a=pi(a),i=pi(i)),!dr(t)&&Aa(a)&&!Aa(i))return l?!1:(a.value=i,!0)}const o=dr(t)&&cB(r)?Number(r)<t.length:wi(t,r),s=Reflect.set(t,r,i,Aa(t)?t:n);return t===pi(n)&&(o?ss(i,a)&&Wh(t,"set",r,i):Wh(t,"add",r,i)),s}deleteProperty(t,r){const i=wi(t,r);t[r];const n=Reflect.deleteProperty(t,r);return n&&i&&Wh(t,"delete",r,void 0),n}has(t,r){const i=Reflect.has(t,r);return(!Ld(r)||!Kne.has(r))&&uo(t,"has",r),i}ownKeys(t){return uo(t,"iterate",dr(t)?"length":sv),Reflect.ownKeys(t)}}class rxe extends Jne{constructor(t=!1){super(!0,t)}set(t,r){return!0}deleteProperty(t,r){return!0}}const ixe=new $ne,nxe=new rxe,axe=new $ne(!0);const rI=e=>e,i3=e=>Reflect.getPrototypeOf(e);function oxe(e,t,r){return function(...i){const n=this.__v_raw,a=pi(n),o=r1(a),s=e==="entries"||e===Symbol.iterator&&o,l=e==="keys"&&o,u=n[e](...i),c=r?rI:t?iI:co;return!t&&uo(a,"iterate",l?tI:sv),{next(){const{value:h,done:d}=u.next();return d?{value:h,done:d}:{value:s?[c(h[0]),c(h[1])]:c(h),done:d}},[Symbol.iterator](){return this}}}}function n3(e){return function(...t){return e==="delete"?!1:e==="clear"?void 0:this}}function sxe(e,t){const r={get(n){const a=this.__v_raw,o=pi(a),s=pi(n);e||(ss(n,s)&&uo(o,"get",n),uo(o,"get",s));const{has:l}=i3(o),u=t?rI:e?iI:co;if(l.call(o,n))return u(a.get(n));if(l.call(o,s))return u(a.get(s));a!==o&&a.get(n)},get size(){const n=this.__v_raw;return!e&&uo(pi(n),"iterate",sv),Reflect.get(n,"size",n)},has(n){const a=this.__v_raw,o=pi(a),s=pi(n);return e||(ss(n,s)&&uo(o,"has",n),uo(o,"has",s)),n===s?a.has(n):a.has(n)||a.has(s)},forEach(n,a){const o=this,s=o.__v_raw,l=pi(s),u=t?rI:e?iI:co;return!e&&uo(l,"iterate",sv),s.forEach((c,h)=>n.call(a,u(c),u(h),o))}};return Ca(r,e?{add:n3("add"),set:n3("set"),delete:n3("delete"),clear:n3("clear")}:{add(n){!t&&!Pl(n)&&!up(n)&&(n=pi(n));const a=pi(this);return i3(a).has.call(a,n)||(a.add(n),Wh(a,"add",n,n)),this},set(n,a){!t&&!Pl(a)&&!up(a)&&(a=pi(a));const o=pi(this),{has:s,get:l}=i3(o);let u=s.call(o,n);u||(n=pi(n),u=s.call(o,n));const c=l.call(o,n);return o.set(n,a),u?ss(a,c)&&Wh(o,"set",n,a):Wh(o,"add",n,a),this},delete(n){const a=pi(this),{has:o,get:s}=i3(a);let l=o.call(a,n);l||(n=pi(n),l=o.call(a,n)),s&&s.call(a,n);const u=a.delete(n);return l&&Wh(a,"delete",n,void 0),u},clear(){const n=pi(this),a=n.size!==0,o=n.clear();return a&&Wh(n,"clear",void 0,void 0),o}}),["keys","values","entries",Symbol.iterator].forEach(n=>{r[n]=oxe(n,e,t)}),r}function pB(e,t){const r=sxe(e,t);return(i,n,a)=>n==="__v_isReactive"?!e:n==="__v_isReadonly"?e:n==="__v_raw"?i:Reflect.get(wi(r,n)&&n in i?r:i,n,a)}const lxe={get:pB(!1,!1)},uxe={get:pB(!1,!0)},cxe={get:pB(!0,!1)};const eae=new WeakMap,tae=new WeakMap,rae=new WeakMap,hxe=new WeakMap;function dxe(e){switch(e){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function fxe(e){return e.__v_skip||!Object.isExtensible(e)?0:dxe(N2e(e))}function lp(e){return up(e)?e:vB(e,!1,ixe,lxe,eae)}function Vg(e){return vB(e,!1,axe,uxe,tae)}function iae(e){return vB(e,!0,nxe,cxe,rae)}function vB(e,t,r,i,n){if(!Zi(e)||e.__v_raw&&!(t&&e.__v_isReactive))return e;const a=n.get(e);if(a)return a;const o=fxe(e);if(o===0)return e;const s=new Proxy(e,o===2?i:r);return n.set(e,s),s}function lv(e){return up(e)?lv(e.__v_raw):!!(e&&e.__v_isReactive)}function up(e){return!!(e&&e.__v_isReadonly)}function Pl(e){return!!(e&&e.__v_isShallow)}function mB(e){return e?!!e.__v_raw:!1}function pi(e){const t=e&&e.__v_raw;return t?pi(t):e}function pxe(e){return!wi(e,"__v_skip")&&Object.isExtensible(e)&&Nne(e,"__v_skip",!0),e}const co=e=>Zi(e)?lp(e):e,iI=e=>Zi(e)?iae(e):e;function Aa(e){return e?e.__v_isRef===!0:!1}function Fe(e){return nae(e,!1)}function VH(e){return nae(e,!0)}function nae(e,t){return Aa(e)?e:new vxe(e,t)}class vxe{constructor(t,r){this.dep=new G6,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=r?t:pi(t),this._value=r?t:co(t),this.__v_isShallow=r}get value(){return this.dep.track(),this._value}set value(t){const r=this._rawValue,i=this.__v_isShallow||Pl(t)||up(t);t=i?t:pi(t),ss(t,r)&&(this._rawValue=t,this._value=i?t:co(t),this.dep.trigger())}}function ue(e){return Aa(e)?e.value:e}const mxe={get:(e,t,r)=>t==="__v_raw"?e:ue(Reflect.get(e,t,r)),set:(e,t,r,i)=>{const n=e[t];return Aa(n)&&!Aa(r)?(n.value=r,!0):Reflect.set(e,t,r,i)}};function aae(e){return lv(e)?e:new Proxy(e,mxe)}class gxe{constructor(t){this.__v_isRef=!0,this._value=void 0;const r=this.dep=new G6,{get:i,set:n}=t(r.track.bind(r),r.trigger.bind(r));this._get=i,this._set=n}get value(){return this._value=this._get()}set value(t){this._set(t)}}function yxe(e){return new gxe(e)}class xxe{constructor(t,r,i){this._object=t,this._key=r,this._defaultValue=i,this.__v_isRef=!0,this._value=void 0}get value(){const t=this._object[this._key];return this._value=t===void 0?this._defaultValue:t}set value(t){this._object[this._key]=t}get dep(){return K2e(pi(this._object),this._key)}}class bxe{constructor(t){this._getter=t,this.__v_isRef=!0,this.__v_isReadonly=!0,this._value=void 0}get value(){return this._value=this._getter()}}function wxe(e,t,r){return Aa(e)?e:lr(e)?new bxe(e):Zi(e)&&arguments.length>1?_xe(e,t,r):Fe(e)}function _xe(e,t,r){const i=e[t];return Aa(i)?i:new xxe(e,t,r)}class Axe{constructor(t,r,i){this.fn=t,this.setter=r,this._value=void 0,this.dep=new G6(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=Fb-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!r,this.isSSR=i}notify(){if(this.flags|=16,!(this.flags&8)&&zi!==this)return Wne(this,!0),!0}get value(){const t=this.dep.track();return Xne(this),t&&(t.version=this.dep.version),this._value}set value(t){this.setter&&this.setter(t)}}function Sxe(e,t,r=!1){let i,n;return lr(e)?i=e:(i=e.get,n=e.set),new Axe(i,n,r)}const a3={},i8=new WeakMap;let x0;function Cxe(e,t=!1,r=x0){if(r){let i=i8.get(r);i||i8.set(r,i=[]),i.push(e)}}function Exe(e,t,r=vi){const{immediate:i,deep:n,once:a,scheduler:o,augmentJob:s,call:l}=r,u=b=>n?b:Pl(b)||n===!1||n===0?qh(b,1):qh(b);let c,h,d,f,p=!1,v=!1;if(Aa(e)?(h=()=>e.value,p=Pl(e)):lv(e)?(h=()=>u(e),p=!0):dr(e)?(v=!0,p=e.some(b=>lv(b)||Pl(b)),h=()=>e.map(b=>{if(Aa(b))return b.value;if(lv(b))return u(b);if(lr(b))return l?l(b,2):b()})):lr(e)?t?h=l?()=>l(e,2):e:h=()=>{if(d){Sp();try{d()}finally{Cp()}}const b=x0;x0=c;try{return l?l(e,3,[f]):e(f)}finally{x0=b}}:h=bu,t&&n){const b=h,_=n===!0?1/0:n;h=()=>qh(b(),_)}const m=Une(),g=()=>{c.stop(),m&&m.active&&uB(m.effects,c)};if(a&&t){const b=t;t=(..._)=>{b(..._),g()}}let y=v?new Array(e.length).fill(a3):a3;const x=b=>{if(!(!(c.flags&1)||!c.dirty&&!b))if(t){const _=c.run();if(n||p||(v?_.some((w,S)=>ss(w,y[S])):ss(_,y))){d&&d();const w=x0;x0=c;try{const S=[_,y===a3?void 0:v&&y[0]===a3?[]:y,f];l?l(t,3,S):t(...S),y=_}finally{x0=w}}}else c.run()};return s&&s(x),c=new Gne(h),c.scheduler=o?()=>o(x,!1):x,f=b=>Cxe(b,!1,c),d=c.onStop=()=>{const b=i8.get(c);if(b){if(l)l(b,4);else for(const _ of b)_();i8.delete(c)}},t?i?x(!0):y=c.run():o?o(x.bind(null,!0),!0):c.run(),g.pause=c.pause.bind(c),g.resume=c.resume.bind(c),g.stop=g,g}function qh(e,t=1/0,r){if(t<=0||!Zi(e)||e.__v_skip||(r=r||new Set,r.has(e)))return e;if(r.add(e),t--,Aa(e))qh(e.value,t,r);else if(dr(e))for(let i=0;i<e.length;i++)qh(e[i],t,r);else if(kne(e)||r1(e))e.forEach(i=>{qh(i,t,r)});else if(Bne(e)){for(const i in e)qh(e[i],t,r);for(const i of Object.getOwnPropertySymbols(e))Object.prototype.propertyIsEnumerable.call(e,i)&&qh(e[i],t,r)}return e}/**
* @vue/runtime-core v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function t4(e,t,r,i){try{return i?e(...i):e()}catch(n){fy(n,t,r)}}function Xc(e,t,r,i){if(lr(e)){const n=t4(e,t,r,i);return n&&Rne(n)&&n.catch(a=>{fy(a,t,r)}),n}if(dr(e)){const n=[];for(let a=0;a<e.length;a++)n.push(Xc(e[a],t,r,i));return n}}function fy(e,t,r,i=!0){const n=t?t.vnode:null,{errorHandler:a,throwUnhandledErrorInProduction:o}=t&&t.appContext.config||vi;if(t){let s=t.parent;const l=t.proxy,u=`https://vuejs.org/error-reference/#runtime-${r}`;for(;s;){const c=s.ec;if(c){for(let h=0;h<c.length;h++)if(c[h](e,l,u)===!1)return}s=s.parent}if(a){Sp(),t4(a,null,10,[e,l,u]),Cp();return}}Mxe(e,r,n,i,o)}function Mxe(e,t,r,i=!0,n=!1){if(n)throw e;console.error(e)}const zo=[];let cc=-1;const n1=[];let xf=null,_g=0;const oae=Promise.resolve();let n8=null;function gB(e){const t=n8||oae;return e?t.then(this?e.bind(this):e):t}function Txe(e){let t=cc+1,r=zo.length;for(;t<r;){const i=t+r>>>1,n=zo[i],a=Hb(n);a<e||a===e&&n.flags&2?t=i+1:r=i}return t}function yB(e){if(!(e.flags&1)){const t=Hb(e),r=zo[zo.length-1];!r||!(e.flags&2)&&t>=Hb(r)?zo.push(e):zo.splice(Txe(t),0,e),e.flags|=1,sae()}}function sae(){n8||(n8=oae.then(lae))}function a8(e){dr(e)?n1.push(...e):xf&&e.id===-1?xf.splice(_g+1,0,e):e.flags&1||(n1.push(e),e.flags|=1),sae()}function FH(e,t,r=cc+1){for(;r<zo.length;r++){const i=zo[r];if(i&&i.flags&2){if(e&&i.id!==e.uid)continue;zo.splice(r,1),r--,i.flags&4&&(i.flags&=-2),i(),i.flags&4||(i.flags&=-2)}}}function o8(e){if(n1.length){const t=[...new Set(n1)].sort((r,i)=>Hb(r)-Hb(i));if(n1.length=0,xf){xf.push(...t);return}for(xf=t,_g=0;_g<xf.length;_g++){const r=xf[_g];r.flags&4&&(r.flags&=-2),r.flags&8||r(),r.flags&=-2}xf=null,_g=0}}const Hb=e=>e.id==null?e.flags&2?-1:1/0:e.id;function lae(e){try{for(cc=0;cc<zo.length;cc++){const t=zo[cc];t&&!(t.flags&8)&&(t.flags&4&&(t.flags&=-2),t4(t,t.i,t.i?15:14),t.flags&4||(t.flags&=-2))}}finally{for(;cc<zo.length;cc++){const t=zo[cc];t&&(t.flags&=-2)}cc=-1,zo.length=0,o8(),n8=null,(zo.length||n1.length)&&lae()}}let Jn=null,uae=null;function s8(e){const t=Jn;return Jn=e,uae=e&&e.type.__scopeId||null,t}function Er(e,t=Jn,r){if(!t||e._n)return e;const i=(...n)=>{i._d&&tU(-1);const a=s8(t);let o;try{o=e(...n)}finally{s8(a),i._d&&tU(1)}return o};return i._n=!0,i._c=!0,i._d=!0,i}function py(e,t){if(Jn===null)return e;const r=Z6(Jn),i=e.dirs||(e.dirs=[]);for(let n=0;n<t.length;n++){let[a,o,s,l=vi]=t[n];a&&(lr(a)&&(a={mounted:a,updated:a}),a.deep&&qh(o),i.push({dir:a,instance:r,value:o,oldValue:void 0,arg:s,modifiers:l}))}return e}function pc(e,t,r,i){const n=e.dirs,a=t&&t.dirs;for(let o=0;o<n.length;o++){const s=n[o];a&&(s.oldValue=a[o].value);let l=s.dir[i];l&&(Sp(),Xc(l,r,8,[e.el,s,e,t]),Cp())}}const cae=Symbol("_vte"),Pxe=e=>e.__isTeleport,$x=e=>e&&(e.disabled||e.disabled===""),zH=e=>e&&(e.defer||e.defer===""),HH=e=>typeof SVGElement<"u"&&e instanceof SVGElement,UH=e=>typeof MathMLElement=="function"&&e instanceof MathMLElement,nI=(e,t)=>{const r=e&&e.to;return Ki(r)?t?t(r):null:r},hae={name:"Teleport",__isTeleport:!0,process(e,t,r,i,n,a,o,s,l,u){const{mc:c,pc:h,pbc:d,o:{insert:f,querySelector:p,createText:v,createComment:m}}=u,g=$x(t.props);let{shapeFlag:y,children:x,dynamicChildren:b}=t;if(e==null){const _=t.el=v(""),w=t.anchor=v("");f(_,r,i),f(w,r,i);const S=(M,E)=>{y&16&&(n&&n.isCE&&(n.ce._teleportTarget=M),c(x,M,E,n,a,o,s,l))},A=()=>{const M=t.target=nI(t.props,p),E=fae(M,t,v,f);M&&(o!=="svg"&&HH(M)?o="svg":o!=="mathml"&&UH(M)&&(o="mathml"),g||(S(M,E),eA(t,!1)))};g&&(S(r,w),eA(t,!0)),zH(t.props)?Oo(()=>{A(),t.el.__isMounted=!0},a):A()}else{if(zH(t.props)&&!e.el.__isMounted){Oo(()=>{hae.process(e,t,r,i,n,a,o,s,l,u),delete e.el.__isMounted},a);return}t.el=e.el,t.targetStart=e.targetStart;const _=t.anchor=e.anchor,w=t.target=e.target,S=t.targetAnchor=e.targetAnchor,A=$x(e.props),M=A?r:w,E=A?_:S;if(o==="svg"||HH(w)?o="svg":(o==="mathml"||UH(w))&&(o="mathml"),b?(d(e.dynamicChildren,b,M,n,a,o,s),EB(e,t,!0)):l||h(e,t,M,E,n,a,o,s,!1),g)A?t.props&&e.props&&t.props.to!==e.props.to&&(t.props.to=e.props.to):o3(t,r,_,u,1);else if((t.props&&t.props.to)!==(e.props&&e.props.to)){const T=t.target=nI(t.props,p);T&&o3(t,T,null,u,0)}else A&&o3(t,w,S,u,1);eA(t,g)}},remove(e,t,r,{um:i,o:{remove:n}},a){const{shapeFlag:o,children:s,anchor:l,targetStart:u,targetAnchor:c,target:h,props:d}=e;if(h&&(n(u),n(c)),a&&n(l),o&16){const f=a||!$x(d);for(let p=0;p<s.length;p++){const v=s[p];i(v,t,r,f,!!v.dynamicChildren)}}},move:o3,hydrate:Dxe};function o3(e,t,r,{o:{insert:i},m:n},a=2){a===0&&i(e.targetAnchor,t,r);const{el:o,anchor:s,shapeFlag:l,children:u,props:c}=e,h=a===2;if(h&&i(o,t,r),(!h||$x(c))&&l&16)for(let d=0;d<u.length;d++)n(u[d],t,r,2);h&&i(s,t,r)}function Dxe(e,t,r,i,n,a,{o:{nextSibling:o,parentNode:s,querySelector:l,insert:u,createText:c}},h){const d=t.target=nI(t.props,l);if(d){const f=$x(t.props),p=d._lpa||d.firstChild;if(t.shapeFlag&16)if(f)t.anchor=h(o(e),t,s(e),r,i,n,a),t.targetStart=p,t.targetAnchor=p&&o(p);else{t.anchor=o(e);let v=p;for(;v;){if(v&&v.nodeType===8){if(v.data==="teleport start anchor")t.targetStart=v;else if(v.data==="teleport anchor"){t.targetAnchor=v,d._lpa=t.targetAnchor&&o(t.targetAnchor);break}}v=o(v)}t.targetAnchor||fae(d,t,c,u),h(p&&o(p),t,d,r,i,n,a)}eA(t,f)}return t.anchor&&o(t.anchor)}const dae=hae;function eA(e,t){const r=e.ctx;if(r&&r.ut){let i,n;for(t?(i=e.el,n=e.anchor):(i=e.targetStart,n=e.targetAnchor);i&&i!==n;)i.nodeType===1&&i.setAttribute("data-v-owner",r.uid),i=i.nextSibling;r.ut()}}function fae(e,t,r,i){const n=t.targetStart=r(""),a=t.targetAnchor=r("");return n[cae]=a,e&&(i(n,e),i(a,e)),a}function xB(e,t){e.shapeFlag&6&&e.component?(e.transition=t,xB(e.component.subTree,t)):e.shapeFlag&128?(e.ssContent.transition=t.clone(e.ssContent),e.ssFallback.transition=t.clone(e.ssFallback)):e.transition=t}/*! #__NO_SIDE_EFFECTS__ */function sr(e,t){return lr(e)?Ca({name:e.name},t,{setup:e}):e}function bB(e){e.ids=[e.ids[0]+e.ids[2]+++"-",0,0]}function Ub(e,t,r,i,n=!1){if(dr(e)){e.forEach((p,v)=>Ub(p,t&&(dr(t)?t[v]:t),r,i,n));return}if(uv(i)&&!n){i.shapeFlag&512&&i.type.__asyncResolved&&i.component.subTree.component&&Ub(e,t,r,i.component.subTree);return}const a=i.shapeFlag&4?Z6(i.component):i.el,o=n?null:a,{i:s,r:l}=e,u=t&&t.r,c=s.refs===vi?s.refs={}:s.refs,h=s.setupState,d=pi(h),f=h===vi?()=>!1:p=>wi(d,p);if(u!=null&&u!==l&&(Ki(u)?(c[u]=null,f(u)&&(h[u]=null)):Aa(u)&&(u.value=null)),lr(l))t4(l,s,12,[o,c]);else{const p=Ki(l),v=Aa(l);if(p||v){const m=()=>{if(e.f){const g=p?f(l)?h[l]:c[l]:l.value;n?dr(g)&&uB(g,a):dr(g)?g.includes(a)||g.push(a):p?(c[l]=[a],f(l)&&(h[l]=c[l])):(l.value=[a],e.k&&(c[e.k]=l.value))}else p?(c[l]=o,f(l)&&(h[l]=o)):v&&(l.value=o,e.k&&(c[e.k]=o))};o?(m.id=-1,Oo(m,r)):m()}}}let GH=!1;const gm=()=>{GH||(console.error("Hydration completed but contains mismatches."),GH=!0)},Ixe=e=>e.namespaceURI.includes("svg")&&e.tagName!=="foreignObject",Lxe=e=>e.namespaceURI.includes("MathML"),s3=e=>{if(e.nodeType===1){if(Ixe(e))return"svg";if(Lxe(e))return"mathml"}},Fg=e=>e.nodeType===8;function kxe(e){const{mt:t,p:r,o:{patchProp:i,createText:n,nextSibling:a,parentNode:o,remove:s,insert:l,createComment:u}}=e,c=(x,b)=>{if(!b.hasChildNodes()){r(null,x,b),o8(),b._vnode=x;return}h(b.firstChild,x,null,null,null),o8(),b._vnode=x},h=(x,b,_,w,S,A=!1)=>{A=A||!!b.dynamicChildren;const M=Fg(x)&&x.data==="[",E=()=>v(x,b,_,w,S,M),{type:T,ref:L,shapeFlag:P,patchFlag:C}=b;let D=x.nodeType;b.el=x,C===-2&&(A=!1,b.dynamicChildren=null);let I=null;switch(T){case hv:D!==3?b.children===""?(l(b.el=n(""),o(x),x),I=x):I=E():(x.data!==b.children&&(gm(),x.data=b.children),I=a(x));break;case Eu:y(x)?(I=a(x),g(b.el=x.content.firstChild,x,_)):D!==8||M?I=E():I=a(x);break;case s1:if(M&&(x=a(x),D=x.nodeType),D===1||D===3){I=x;const O=!b.children.length;for(let R=0;R<b.staticCount;R++)O&&(b.children+=I.nodeType===1?I.outerHTML:I.data),R===b.staticCount-1&&(b.anchor=I),I=a(I);return M?a(I):I}else E();break;case ri:M?I=p(x,b,_,w,S,A):I=E();break;default:if(P&1)(D!==1||b.type.toLowerCase()!==x.tagName.toLowerCase())&&!y(x)?I=E():I=d(x,b,_,w,S,A);else if(P&6){b.slotScopeIds=S;const O=o(x);if(M?I=m(x):Fg(x)&&x.data==="teleport start"?I=m(x,x.data,"teleport end"):I=a(x),t(b,O,null,_,w,s3(O),A),uv(b)&&!b.type.__asyncResolved){let R;M?(R=Ie(ri),R.anchor=I?I.previousSibling:O.lastChild):R=x.nodeType===3?jo(""):Ie("div"),R.el=x,b.component.subTree=R}}else P&64?D!==8?I=E():I=b.type.hydrate(x,b,_,w,S,A,e,f):P&128&&(I=b.type.hydrate(x,b,_,w,s3(o(x)),S,A,e,h))}return L!=null&&Ub(L,null,w,b),I},d=(x,b,_,w,S,A)=>{A=A||!!b.dynamicChildren;const{type:M,props:E,patchFlag:T,shapeFlag:L,dirs:P,transition:C}=b,D=M==="input"||M==="option";if(D||T!==-1){P&&pc(b,null,_,"created");let I=!1;if(y(x)){I=Oae(null,C)&&_&&_.vnode.props&&_.vnode.props.appear;const R=x.content.firstChild;I&&C.beforeEnter(R),g(R,x,_),b.el=x=R}if(L&16&&!(E&&(E.innerHTML||E.textContent))){let R=f(x.firstChild,b,x,_,w,S,A);for(;R;){l3(x,1)||gm();const H=R;R=R.nextSibling,s(H)}}else if(L&8){let R=b.children;R[0]===`
`&&(x.tagName==="PRE"||x.tagName==="TEXTAREA")&&(R=R.slice(1)),x.textContent!==R&&(l3(x,0)||gm(),x.textContent=b.children)}if(E){if(D||!A||T&48){const R=x.tagName.includes("-");for(const H in E)(D&&(H.endsWith("value")||H==="indeterminate")||e4(H)&&!i1(H)||H[0]==="."||R)&&i(x,H,null,E[H],void 0,_)}else if(E.onClick)i(x,"onClick",null,E.onClick,void 0,_);else if(T&4&&lv(E.style))for(const R in E.style)E.style[R]}let O;(O=E&&E.onVnodeBeforeMount)&&hl(O,_,b),P&&pc(b,null,_,"beforeMount"),((O=E&&E.onVnodeMounted)||P||I)&&Gae(()=>{O&&hl(O,_,b),I&&C.enter(x),P&&pc(b,null,_,"mounted")},w)}return x.nextSibling},f=(x,b,_,w,S,A,M)=>{M=M||!!b.dynamicChildren;const E=b.children,T=E.length;for(let L=0;L<T;L++){const P=M?E[L]:E[L]=Vs(E[L]),C=P.type===hv;x?(C&&!M&&L+1<T&&Vs(E[L+1]).type===hv&&(l(n(x.data.slice(P.children.length)),_,a(x)),x.data=P.children),x=h(x,P,w,S,A,M)):C&&!P.children?l(P.el=n(""),_):(l3(_,1)||gm(),r(null,P,_,null,w,S,s3(_),A))}return x},p=(x,b,_,w,S,A)=>{const{slotScopeIds:M}=b;M&&(S=S?S.concat(M):M);const E=o(x),T=f(a(x),b,E,_,w,S,A);return T&&Fg(T)&&T.data==="]"?a(b.anchor=T):(gm(),l(b.anchor=u("]"),E,T),T)},v=(x,b,_,w,S,A)=>{if(l3(x.parentElement,1)||gm(),b.el=null,A){const T=m(x);for(;;){const L=a(x);if(L&&L!==T)s(L);else break}}const M=a(x),E=o(x);return s(x),r(null,b,E,M,_,w,s3(E),S),_&&(_.vnode.el=b.el,X6(_,b.el)),M},m=(x,b="[",_="]")=>{let w=0;for(;x;)if(x=a(x),x&&Fg(x)&&(x.data===b&&w++,x.data===_)){if(w===0)return a(x);w--}return x},g=(x,b,_)=>{const w=b.parentNode;w&&w.replaceChild(x,b);let S=_;for(;S;)S.vnode.el===b&&(S.vnode.el=S.subTree.el=x),S=S.parent},y=x=>x.nodeType===1&&x.tagName==="TEMPLATE";return[c,h]}const jH="data-allow-mismatch",Rxe={0:"text",1:"children",2:"class",3:"style",4:"attribute"};function l3(e,t){if(t===0||t===1)for(;e&&!e.hasAttribute(jH);)e=e.parentElement;const r=e&&e.getAttribute(jH);if(r==null)return!1;if(r==="")return!0;{const i=r.split(",");return t===0&&i.includes("children")?!0:r.split(",").includes(Rxe[t])}}U6().requestIdleCallback;U6().cancelIdleCallback;function Oxe(e,t){if(Fg(e)&&e.data==="["){let r=1,i=e.nextSibling;for(;i;){if(i.nodeType===1){if(t(i)===!1)break}else if(Fg(i))if(i.data==="]"){if(--r===0)break}else i.data==="["&&r++;i=i.nextSibling}}else t(e)}const uv=e=>!!e.type.__asyncLoader;/*! #__NO_SIDE_EFFECTS__ */function WH(e){lr(e)&&(e={loader:e});const{loader:t,loadingComponent:r,errorComponent:i,delay:n=200,hydrate:a,timeout:o,suspensible:s=!0,onError:l}=e;let u=null,c,h=0;const d=()=>(h++,u=null,f()),f=()=>{let p;return u||(p=u=t().catch(v=>{if(v=v instanceof Error?v:new Error(String(v)),l)return new Promise((m,g)=>{l(v,()=>m(d()),()=>g(v),h+1)});throw v}).then(v=>p!==u&&u?u:(v&&(v.__esModule||v[Symbol.toStringTag]==="Module")&&(v=v.default),c=v,v)))};return sr({name:"AsyncComponentWrapper",__asyncLoader:f,__asyncHydrate(p,v,m){const g=a?()=>{const y=a(m,x=>Oxe(p,x));y&&(v.bum||(v.bum=[])).push(y)}:m;c?g():f().then(()=>!v.isUnmounted&&g())},get __asyncResolved(){return c},setup(){const p=Xn;if(bB(p),c)return()=>$7(c,p);const v=x=>{u=null,fy(x,p,13,!i)};if(s&&p.suspense||R1)return f().then(x=>()=>$7(x,p)).catch(x=>(v(x),()=>i?Ie(i,{error:x}):null));const m=Fe(!1),g=Fe(),y=Fe(!!n);return n&&setTimeout(()=>{y.value=!1},n),o!=null&&setTimeout(()=>{if(!m.value&&!g.value){const x=new Error(`Async component timed out after ${o}ms.`);v(x),g.value=x}},o),f().then(()=>{m.value=!0,p.parent&&wB(p.parent.vnode)&&p.parent.update()}).catch(x=>{v(x),g.value=x}),()=>{if(m.value&&c)return $7(c,p);if(g.value&&i)return Ie(i,{error:g.value});if(r&&!y.value)return Ie(r)}}})}function $7(e,t){const{ref:r,props:i,children:n,ce:a}=t.vnode,o=Ie(e,i,n);return o.ref=r,o.ce=a,delete t.vnode.ce,o}const wB=e=>e.type.__isKeepAlive;function Bxe(e,t){pae(e,"a",t)}function Nxe(e,t){pae(e,"da",t)}function pae(e,t,r=Xn){const i=e.__wdc||(e.__wdc=()=>{let n=r;for(;n;){if(n.isDeactivated)return;n=n.parent}return e()});if(W6(t,i,r),r){let n=r.parent;for(;n&&n.parent;)wB(n.parent.vnode)&&Vxe(i,t,r,n),n=n.parent}}function Vxe(e,t,r,i){const n=W6(t,e,i,!0);_B(()=>{uB(i[t],n)},r)}function W6(e,t,r=Xn,i=!1){if(r){const n=r[e]||(r[e]=[]),a=t.__weh||(t.__weh=(...o)=>{Sp();const s=i4(r),l=Xc(t,r,e,o);return s(),Cp(),l});return i?n.unshift(a):n.push(a),a}}const kd=e=>(t,r=Xn)=>{(!R1||e==="sp")&&W6(e,(...i)=>t(...i),r)},vae=kd("bm"),Zs=kd("m"),mae=kd("bu"),Fxe=kd("u"),zxe=kd("bum"),_B=kd("um"),Hxe=kd("sp"),Uxe=kd("rtg"),Gxe=kd("rtc");function gae(e,t=Xn){W6("ec",e,t)}const yae="components";function jxe(e,t){return bae(yae,e,!0,t)||e}const xae=Symbol.for("v-ndc");function Wxe(e){return Ki(e)?bae(yae,e,!1)||e:e||xae}function bae(e,t,r=!0,i=!1){const n=Jn||Xn;if(n){const a=n.type;{const s=kbe(a,!1);if(s&&(s===t||s===Ys(t)||s===H6(Ys(t))))return a}const o=qH(n[e]||a[e],t)||qH(n.appContext[e],t);return!o&&i?a:o}}function qH(e,t){return e&&(e[t]||e[Ys(t)]||e[H6(Ys(t))])}function fd(e,t,r,i){let n;const a=r,o=dr(e);if(o||Ki(e)){const s=o&&lv(e);let l=!1;s&&(l=!Pl(e),e=j6(e)),n=new Array(e.length);for(let u=0,c=e.length;u<c;u++)n[u]=t(l?co(e[u]):e[u],u,void 0,a)}else if(typeof e=="number"){n=new Array(e);for(let s=0;s<e;s++)n[s]=t(s+1,s,void 0,a)}else if(Zi(e))if(e[Symbol.iterator])n=Array.from(e,(s,l)=>t(s,l,void 0,a));else{const s=Object.keys(e);n=new Array(s.length);for(let l=0,u=s.length;l<u;l++){const c=s[l];n[l]=t(e[c],c,l,a)}}else n=[];return n}function fs(e,t,r={},i,n){if(Jn.ce||Jn.parent&&uv(Jn.parent)&&Jn.parent.ce)return t!=="default"&&(r.name=t),We(),ii(ri,null,[Ie("slot",r,i)],64);let a=e[t];a&&a._c&&(a._d=!1),We();const o=a&&wae(a(r)),s=r.key||o&&o.key,l=ii(ri,{key:(s&&!Ld(s)?s:`_${t}`)+(!o&&i?"_fb":"")},o||[],o&&e._===1?64:-2);return a&&a._c&&(a._d=!0),l}function wae(e){return e.some(t=>L1(t)?!(t.type===Eu||t.type===ri&&!wae(t.children)):!0)?e:null}const aI=e=>e?Xae(e)?Z6(e):aI(e.parent):null,eb=Ca(Object.create(null),{$:e=>e,$el:e=>e.vnode.el,$data:e=>e.data,$props:e=>e.props,$attrs:e=>e.attrs,$slots:e=>e.slots,$refs:e=>e.refs,$parent:e=>aI(e.parent),$root:e=>aI(e.root),$host:e=>e.ce,$emit:e=>e.emit,$options:e=>AB(e),$forceUpdate:e=>e.f||(e.f=()=>{yB(e.update)}),$nextTick:e=>e.n||(e.n=gB.bind(e.proxy)),$watch:e=>dbe.bind(e)}),eE=(e,t)=>e!==vi&&!e.__isScriptSetup&&wi(e,t),qxe={get({_:e},t){if(t==="__v_skip")return!0;const{ctx:r,setupState:i,data:n,props:a,accessCache:o,type:s,appContext:l}=e;let u;if(t[0]!=="$"){const f=o[t];if(f!==void 0)switch(f){case 1:return i[t];case 2:return n[t];case 4:return r[t];case 3:return a[t]}else{if(eE(i,t))return o[t]=1,i[t];if(n!==vi&&wi(n,t))return o[t]=2,n[t];if((u=e.propsOptions[0])&&wi(u,t))return o[t]=3,a[t];if(r!==vi&&wi(r,t))return o[t]=4,r[t];oI&&(o[t]=0)}}const c=eb[t];let h,d;if(c)return t==="$attrs"&&uo(e.attrs,"get",""),c(e);if((h=s.__cssModules)&&(h=h[t]))return h;if(r!==vi&&wi(r,t))return o[t]=4,r[t];if(d=l.config.globalProperties,wi(d,t))return d[t]},set({_:e},t,r){const{data:i,setupState:n,ctx:a}=e;return eE(n,t)?(n[t]=r,!0):i!==vi&&wi(i,t)?(i[t]=r,!0):wi(e.props,t)||t[0]==="$"&&t.slice(1)in e?!1:(a[t]=r,!0)},has({_:{data:e,setupState:t,accessCache:r,ctx:i,appContext:n,propsOptions:a}},o){let s;return!!r[o]||e!==vi&&wi(e,o)||eE(t,o)||(s=a[0])&&wi(s,o)||wi(i,o)||wi(eb,o)||wi(n.config.globalProperties,o)},defineProperty(e,t,r){return r.get!=null?e._.accessCache[t]=0:wi(r,"value")&&this.set(e,t,r.value,null),Reflect.defineProperty(e,t,r)}};function YH(e){return dr(e)?e.reduce((t,r)=>(t[r]=null,t),{}):e}let oI=!0;function Yxe(e){const t=AB(e),r=e.proxy,i=e.ctx;oI=!1,t.beforeCreate&&XH(t.beforeCreate,e,"bc");const{data:n,computed:a,methods:o,watch:s,provide:l,inject:u,created:c,beforeMount:h,mounted:d,beforeUpdate:f,updated:p,activated:v,deactivated:m,beforeDestroy:g,beforeUnmount:y,destroyed:x,unmounted:b,render:_,renderTracked:w,renderTriggered:S,errorCaptured:A,serverPrefetch:M,expose:E,inheritAttrs:T,components:L,directives:P,filters:C}=t;if(u&&Xxe(u,i,null),o)for(const O in o){const R=o[O];lr(R)&&(i[O]=R.bind(r))}if(n){const O=n.call(r,r);Zi(O)&&(e.data=lp(O))}if(oI=!0,a)for(const O in a){const R=a[O],H=lr(R)?R.bind(r,r):lr(R.get)?R.get.bind(r,r):bu,j=!lr(R)&&lr(R.set)?R.set.bind(r):bu,N=_s({get:H,set:j});Object.defineProperty(i,O,{enumerable:!0,configurable:!0,get:()=>N.value,set:k=>N.value=k})}if(s)for(const O in s)_ae(s[O],i,r,O);if(l){const O=lr(l)?l.call(r):l;Reflect.ownKeys(O).forEach(R=>{SB(R,O[R])})}c&&XH(c,e,"c");function I(O,R){dr(R)?R.forEach(H=>O(H.bind(r))):R&&O(R.bind(r))}if(I(vae,h),I(Zs,d),I(mae,f),I(Fxe,p),I(Bxe,v),I(Nxe,m),I(gae,A),I(Gxe,w),I(Uxe,S),I(zxe,y),I(_B,b),I(Hxe,M),dr(E))if(E.length){const O=e.exposed||(e.exposed={});E.forEach(R=>{Object.defineProperty(O,R,{get:()=>r[R],set:H=>r[R]=H})})}else e.exposed||(e.exposed={});_&&e.render===bu&&(e.render=_),T!=null&&(e.inheritAttrs=T),L&&(e.components=L),P&&(e.directives=P),M&&bB(e)}function Xxe(e,t,r=bu){dr(e)&&(e=sI(e));for(const i in e){const n=e[i];let a;Zi(n)?"default"in n?a=a1(n.from||i,n.default,!0):a=a1(n.from||i):a=a1(n),Aa(a)?Object.defineProperty(t,i,{enumerable:!0,configurable:!0,get:()=>a.value,set:o=>a.value=o}):t[i]=a}}function XH(e,t,r){Xc(dr(e)?e.map(i=>i.bind(t.proxy)):e.bind(t.proxy),t,r)}function _ae(e,t,r,i){let n=i.includes(".")?Nae(r,i):()=>r[i];if(Ki(e)){const a=t[e];lr(a)&&ja(n,a)}else if(lr(e))ja(n,e.bind(r));else if(Zi(e))if(dr(e))e.forEach(a=>_ae(a,t,r,i));else{const a=lr(e.handler)?e.handler.bind(r):t[e.handler];lr(a)&&ja(n,a,e)}}function AB(e){const t=e.type,{mixins:r,extends:i}=t,{mixins:n,optionsCache:a,config:{optionMergeStrategies:o}}=e.appContext,s=a.get(t);let l;return s?l=s:!n.length&&!r&&!i?l=t:(l={},n.length&&n.forEach(u=>l8(l,u,o,!0)),l8(l,t,o)),Zi(t)&&a.set(t,l),l}function l8(e,t,r,i=!1){const{mixins:n,extends:a}=t;a&&l8(e,a,r,!0),n&&n.forEach(o=>l8(e,o,r,!0));for(const o in t)if(!(i&&o==="expose")){const s=Zxe[o]||r&&r[o];e[o]=s?s(e[o],t[o]):t[o]}return e}const Zxe={data:ZH,props:QH,emits:QH,methods:Mx,computed:Mx,beforeCreate:Lo,created:Lo,beforeMount:Lo,mounted:Lo,beforeUpdate:Lo,updated:Lo,beforeDestroy:Lo,beforeUnmount:Lo,destroyed:Lo,unmounted:Lo,activated:Lo,deactivated:Lo,errorCaptured:Lo,serverPrefetch:Lo,components:Mx,directives:Mx,watch:Kxe,provide:ZH,inject:Qxe};function ZH(e,t){return t?e?function(){return Ca(lr(e)?e.call(this,this):e,lr(t)?t.call(this,this):t)}:t:e}function Qxe(e,t){return Mx(sI(e),sI(t))}function sI(e){if(dr(e)){const t={};for(let r=0;r<e.length;r++)t[e[r]]=e[r];return t}return e}function Lo(e,t){return e?[...new Set([].concat(e,t))]:t}function Mx(e,t){return e?Ca(Object.create(null),e,t):t}function QH(e,t){return e?dr(e)&&dr(t)?[...new Set([...e,...t])]:Ca(Object.create(null),YH(e),YH(t??{})):t}function Kxe(e,t){if(!e)return t;if(!t)return e;const r=Ca(Object.create(null),e);for(const i in t)r[i]=Lo(e[i],t[i]);return r}function Aae(){return{app:null,config:{isNativeTag:O2e,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let Jxe=0;function $xe(e,t){return function(i,n=null){lr(i)||(i=Ca({},i)),n!=null&&!Zi(n)&&(n=null);const a=Aae(),o=new WeakSet,s=[];let l=!1;const u=a.app={_uid:Jxe++,_component:i,_props:n,_container:null,_context:a,_instance:null,version:Qae,get config(){return a.config},set config(c){},use(c,...h){return o.has(c)||(c&&lr(c.install)?(o.add(c),c.install(u,...h)):lr(c)&&(o.add(c),c(u,...h))),u},mixin(c){return a.mixins.includes(c)||a.mixins.push(c),u},component(c,h){return h?(a.components[c]=h,u):a.components[c]},directive(c,h){return h?(a.directives[c]=h,u):a.directives[c]},mount(c,h,d){if(!l){const f=u._ceVNode||Ie(i,n);return f.appContext=a,d===!0?d="svg":d===!1&&(d=void 0),h&&t?t(f,c):e(f,c,d),l=!0,u._container=c,c.__vue_app__=u,Z6(f.component)}},onUnmount(c){s.push(c)},unmount(){l&&(Xc(s,u._instance,16),e(null,u._container),delete u._container.__vue_app__)},provide(c,h){return a.provides[c]=h,u},runWithContext(c){const h=cv;cv=u;try{return c()}finally{cv=h}}};return u}}let cv=null;function SB(e,t){if(Xn){let r=Xn.provides;const i=Xn.parent&&Xn.parent.provides;i===r&&(r=Xn.provides=Object.create(i)),r[e]=t}}function a1(e,t,r=!1){const i=Xn||Jn;if(i||cv){const n=cv?cv._context.provides:i?i.parent==null?i.vnode.appContext&&i.vnode.appContext.provides:i.parent.provides:void 0;if(n&&e in n)return n[e];if(arguments.length>1)return r&&lr(t)?t.call(i&&i.proxy):t}}function Sae(){return!!(Xn||Jn||cv)}const Cae={},Eae=()=>Object.create(Cae),Mae=e=>Object.getPrototypeOf(e)===Cae;function ebe(e,t,r,i=!1){const n={},a=Eae();e.propsDefaults=Object.create(null),Tae(e,t,n,a);for(const o in e.propsOptions[0])o in n||(n[o]=void 0);r?e.props=i?n:Vg(n):e.type.props?e.props=n:e.props=a,e.attrs=a}function tbe(e,t,r,i){const{props:n,attrs:a,vnode:{patchFlag:o}}=e,s=pi(n),[l]=e.propsOptions;let u=!1;if((i||o>0)&&!(o&16)){if(o&8){const c=e.vnode.dynamicProps;for(let h=0;h<c.length;h++){let d=c[h];if(Y6(e.emitsOptions,d))continue;const f=t[d];if(l)if(wi(a,d))f!==a[d]&&(a[d]=f,u=!0);else{const p=Ys(d);n[p]=lI(l,s,p,f,e,!1)}else f!==a[d]&&(a[d]=f,u=!0)}}}else{Tae(e,t,n,a)&&(u=!0);let c;for(const h in s)(!t||!wi(t,h)&&((c=Ap(h))===h||!wi(t,c)))&&(l?r&&(r[h]!==void 0||r[c]!==void 0)&&(n[h]=lI(l,s,h,void 0,e,!0)):delete n[h]);if(a!==s)for(const h in a)(!t||!wi(t,h))&&(delete a[h],u=!0)}u&&Wh(e.attrs,"set","")}function Tae(e,t,r,i){const[n,a]=e.propsOptions;let o=!1,s;if(t)for(let l in t){if(i1(l))continue;const u=t[l];let c;n&&wi(n,c=Ys(l))?!a||!a.includes(c)?r[c]=u:(s||(s={}))[c]=u:Y6(e.emitsOptions,l)||(!(l in i)||u!==i[l])&&(i[l]=u,o=!0)}if(a){const l=pi(r),u=s||vi;for(let c=0;c<a.length;c++){const h=a[c];r[h]=lI(n,l,h,u[h],e,!wi(u,h))}}return o}function lI(e,t,r,i,n,a){const o=e[r];if(o!=null){const s=wi(o,"default");if(s&&i===void 0){const l=o.default;if(o.type!==Function&&!o.skipFactory&&lr(l)){const{propsDefaults:u}=n;if(r in u)i=u[r];else{const c=i4(n);i=u[r]=l.call(null,t),c()}}else i=l;n.ce&&n.ce._setProp(r,i)}o[0]&&(a&&!s?i=!1:o[1]&&(i===""||i===Ap(r))&&(i=!0))}return i}const rbe=new WeakMap;function Pae(e,t,r=!1){const i=r?rbe:t.propsCache,n=i.get(e);if(n)return n;const a=e.props,o={},s=[];let l=!1;if(!lr(e)){const c=h=>{l=!0;const[d,f]=Pae(h,t,!0);Ca(o,d),f&&s.push(...f)};!r&&t.mixins.length&&t.mixins.forEach(c),e.extends&&c(e.extends),e.mixins&&e.mixins.forEach(c)}if(!a&&!l)return Zi(e)&&i.set(e,t1),t1;if(dr(a))for(let c=0;c<a.length;c++){const h=Ys(a[c]);KH(h)&&(o[h]=vi)}else if(a)for(const c in a){const h=Ys(c);if(KH(h)){const d=a[c],f=o[h]=dr(d)||lr(d)?{type:d}:Ca({},d),p=f.type;let v=!1,m=!0;if(dr(p))for(let g=0;g<p.length;++g){const y=p[g],x=lr(y)&&y.name;if(x==="Boolean"){v=!0;break}else x==="String"&&(m=!1)}else v=lr(p)&&p.name==="Boolean";f[0]=v,f[1]=m,(v||wi(f,"default"))&&s.push(h)}}const u=[o,s];return Zi(e)&&i.set(e,u),u}function KH(e){return e[0]!=="$"&&!i1(e)}const Dae=e=>e[0]==="_"||e==="$stable",CB=e=>dr(e)?e.map(Vs):[Vs(e)],ibe=(e,t,r)=>{if(t._n)return t;const i=Er((...n)=>CB(t(...n)),r);return i._c=!1,i},Iae=(e,t,r)=>{const i=e._ctx;for(const n in e){if(Dae(n))continue;const a=e[n];if(lr(a))t[n]=ibe(n,a,i);else if(a!=null){const o=CB(a);t[n]=()=>o}}},Lae=(e,t)=>{const r=CB(t);e.slots.default=()=>r},kae=(e,t,r)=>{for(const i in t)(r||i!=="_")&&(e[i]=t[i])},nbe=(e,t,r)=>{const i=e.slots=Eae();if(e.vnode.shapeFlag&32){const n=t._;n?(kae(i,t,r),r&&Nne(i,"_",n,!0)):Iae(t,i)}else t&&Lae(e,t)},abe=(e,t,r)=>{const{vnode:i,slots:n}=e;let a=!0,o=vi;if(i.shapeFlag&32){const s=t._;s?r&&s===1?a=!1:kae(n,t,r):(a=!t.$stable,Iae(t,n)),o=t}else t&&(Lae(e,t),o={default:1});if(a)for(const s in n)!Dae(s)&&o[s]==null&&delete n[s]},Oo=Gae;function obe(e){return Rae(e)}function sbe(e){return Rae(e,kxe)}function Rae(e,t){const r=U6();r.__VUE__=!0;const{insert:i,remove:n,patchProp:a,createElement:o,createText:s,createComment:l,setText:u,setElementText:c,parentNode:h,nextSibling:d,setScopeId:f=bu,insertStaticContent:p}=e,v=(J,te,le,Ae=null,xe=null,ye=null,Se=void 0,Pe=null,Ce=!!te.dynamicChildren)=>{if(J===te)return;J&&!Mf(J,te)&&(Ae=ne(J),k(J,xe,ye,!0),J=null),te.patchFlag===-2&&(Ce=!1,te.dynamicChildren=null);const{type:ee,ref:K,shapeFlag:ve}=te;switch(ee){case hv:m(J,te,le,Ae);break;case Eu:g(J,te,le,Ae);break;case s1:J==null&&y(te,le,Ae,Se);break;case ri:L(J,te,le,Ae,xe,ye,Se,Pe,Ce);break;default:ve&1?_(J,te,le,Ae,xe,ye,Se,Pe,Ce):ve&6?P(J,te,le,Ae,xe,ye,Se,Pe,Ce):(ve&64||ve&128)&&ee.process(J,te,le,Ae,xe,ye,Se,Pe,Ce,he)}K!=null&&xe&&Ub(K,J&&J.ref,ye,te||J,!te)},m=(J,te,le,Ae)=>{if(J==null)i(te.el=s(te.children),le,Ae);else{const xe=te.el=J.el;te.children!==J.children&&u(xe,te.children)}},g=(J,te,le,Ae)=>{J==null?i(te.el=l(te.children||""),le,Ae):te.el=J.el},y=(J,te,le,Ae)=>{[J.el,J.anchor]=p(J.children,te,le,Ae,J.el,J.anchor)},x=({el:J,anchor:te},le,Ae)=>{let xe;for(;J&&J!==te;)xe=d(J),i(J,le,Ae),J=xe;i(te,le,Ae)},b=({el:J,anchor:te})=>{let le;for(;J&&J!==te;)le=d(J),n(J),J=le;n(te)},_=(J,te,le,Ae,xe,ye,Se,Pe,Ce)=>{te.type==="svg"?Se="svg":te.type==="math"&&(Se="mathml"),J==null?w(te,le,Ae,xe,ye,Se,Pe,Ce):M(J,te,xe,ye,Se,Pe,Ce)},w=(J,te,le,Ae,xe,ye,Se,Pe)=>{let Ce,ee;const{props:K,shapeFlag:ve,transition:Me,dirs:Q}=J;if(Ce=J.el=o(J.type,ye,K&&K.is,K),ve&8?c(Ce,J.children):ve&16&&A(J.children,Ce,null,Ae,xe,tE(J,ye),Se,Pe),Q&&pc(J,null,Ae,"created"),S(Ce,J,J.scopeId,Se,Ae),K){for(const V in K)V!=="value"&&!i1(V)&&a(Ce,V,null,K[V],ye,Ae);"value"in K&&a(Ce,"value",null,K.value,ye),(ee=K.onVnodeBeforeMount)&&hl(ee,Ae,J)}Q&&pc(J,null,Ae,"beforeMount");const W=Oae(xe,Me);W&&Me.beforeEnter(Ce),i(Ce,te,le),((ee=K&&K.onVnodeMounted)||W||Q)&&Oo(()=>{ee&&hl(ee,Ae,J),W&&Me.enter(Ce),Q&&pc(J,null,Ae,"mounted")},xe)},S=(J,te,le,Ae,xe)=>{if(le&&f(J,le),Ae)for(let ye=0;ye<Ae.length;ye++)f(J,Ae[ye]);if(xe){let ye=xe.subTree;if(te===ye||Hae(ye.type)&&(ye.ssContent===te||ye.ssFallback===te)){const Se=xe.vnode;S(J,Se,Se.scopeId,Se.slotScopeIds,xe.parent)}}},A=(J,te,le,Ae,xe,ye,Se,Pe,Ce=0)=>{for(let ee=Ce;ee<J.length;ee++){const K=J[ee]=Pe?bf(J[ee]):Vs(J[ee]);v(null,K,te,le,Ae,xe,ye,Se,Pe)}},M=(J,te,le,Ae,xe,ye,Se)=>{const Pe=te.el=J.el;let{patchFlag:Ce,dynamicChildren:ee,dirs:K}=te;Ce|=J.patchFlag&16;const ve=J.props||vi,Me=te.props||vi;let Q;if(le&&kp(le,!1),(Q=Me.onVnodeBeforeUpdate)&&hl(Q,le,te,J),K&&pc(te,J,le,"beforeUpdate"),le&&kp(le,!0),(ve.innerHTML&&Me.innerHTML==null||ve.textContent&&Me.textContent==null)&&c(Pe,""),ee?E(J.dynamicChildren,ee,Pe,le,Ae,tE(te,xe),ye):Se||R(J,te,Pe,null,le,Ae,tE(te,xe),ye,!1),Ce>0){if(Ce&16)T(Pe,ve,Me,le,xe);else if(Ce&2&&ve.class!==Me.class&&a(Pe,"class",null,Me.class,xe),Ce&4&&a(Pe,"style",ve.style,Me.style,xe),Ce&8){const W=te.dynamicProps;for(let V=0;V<W.length;V++){const z=W[V],X=ve[z],de=Me[z];(de!==X||z==="value")&&a(Pe,z,X,de,xe,le)}}Ce&1&&J.children!==te.children&&c(Pe,te.children)}else!Se&&ee==null&&T(Pe,ve,Me,le,xe);((Q=Me.onVnodeUpdated)||K)&&Oo(()=>{Q&&hl(Q,le,te,J),K&&pc(te,J,le,"updated")},Ae)},E=(J,te,le,Ae,xe,ye,Se)=>{for(let Pe=0;Pe<te.length;Pe++){const Ce=J[Pe],ee=te[Pe],K=Ce.el&&(Ce.type===ri||!Mf(Ce,ee)||Ce.shapeFlag&70)?h(Ce.el):le;v(Ce,ee,K,null,Ae,xe,ye,Se,!0)}},T=(J,te,le,Ae,xe)=>{if(te!==le){if(te!==vi)for(const ye in te)!i1(ye)&&!(ye in le)&&a(J,ye,te[ye],null,xe,Ae);for(const ye in le){if(i1(ye))continue;const Se=le[ye],Pe=te[ye];Se!==Pe&&ye!=="value"&&a(J,ye,Pe,Se,xe,Ae)}"value"in le&&a(J,"value",te.value,le.value,xe)}},L=(J,te,le,Ae,xe,ye,Se,Pe,Ce)=>{const ee=te.el=J?J.el:s(""),K=te.anchor=J?J.anchor:s("");let{patchFlag:ve,dynamicChildren:Me,slotScopeIds:Q}=te;Q&&(Pe=Pe?Pe.concat(Q):Q),J==null?(i(ee,le,Ae),i(K,le,Ae),A(te.children||[],le,K,xe,ye,Se,Pe,Ce)):ve>0&&ve&64&&Me&&J.dynamicChildren?(E(J.dynamicChildren,Me,le,xe,ye,Se,Pe),(te.key!=null||xe&&te===xe.subTree)&&EB(J,te,!0)):R(J,te,le,K,xe,ye,Se,Pe,Ce)},P=(J,te,le,Ae,xe,ye,Se,Pe,Ce)=>{te.slotScopeIds=Pe,J==null?te.shapeFlag&512?xe.ctx.activate(te,le,Ae,Se,Ce):C(te,le,Ae,xe,ye,Se,Ce):D(J,te,Ce)},C=(J,te,le,Ae,xe,ye,Se)=>{const Pe=J.component=Tbe(J,Ae,xe);if(wB(J)&&(Pe.ctx.renderer=he),Pbe(Pe,!1,Se),Pe.asyncDep){if(xe&&xe.registerDep(Pe,I,Se),!J.el){const Ce=Pe.subTree=Ie(Eu);g(null,Ce,te,le)}}else I(Pe,J,te,le,xe,ye,Se)},D=(J,te,le)=>{const Ae=te.component=J.component;if(gbe(J,te,le))if(Ae.asyncDep&&!Ae.asyncResolved){O(Ae,te,le);return}else Ae.next=te,Ae.update();else te.el=J.el,Ae.vnode=te},I=(J,te,le,Ae,xe,ye,Se)=>{const Pe=()=>{if(J.isMounted){let{next:ve,bu:Me,u:Q,parent:W,vnode:V}=J;{const we=Bae(J);if(we){ve&&(ve.el=V.el,O(J,ve,Se)),we.asyncDep.then(()=>{J.isUnmounted||Pe()});return}}let z=ve,X;kp(J,!1),ve?(ve.el=V.el,O(J,ve,Se)):ve=V,Me&&$5(Me),(X=ve.props&&ve.props.onVnodeBeforeUpdate)&&hl(X,W,ve,V),kp(J,!0);const de=rE(J),pe=J.subTree;J.subTree=de,v(pe,de,h(pe.el),ne(pe),J,xe,ye),ve.el=de.el,z===null&&X6(J,de.el),Q&&Oo(Q,xe),(X=ve.props&&ve.props.onVnodeUpdated)&&Oo(()=>hl(X,W,ve,V),xe)}else{let ve;const{el:Me,props:Q}=te,{bm:W,m:V,parent:z,root:X,type:de}=J,pe=uv(te);if(kp(J,!1),W&&$5(W),!pe&&(ve=Q&&Q.onVnodeBeforeMount)&&hl(ve,z,te),kp(J,!0),Me&&fe){const we=()=>{J.subTree=rE(J),fe(Me,J.subTree,J,xe,null)};pe&&de.__asyncHydrate?de.__asyncHydrate(Me,J,we):we()}else{X.ce&&X.ce._injectChildStyle(de);const we=J.subTree=rE(J);v(null,we,le,Ae,J,xe,ye),te.el=we.el}if(V&&Oo(V,xe),!pe&&(ve=Q&&Q.onVnodeMounted)){const we=te;Oo(()=>hl(ve,z,we),xe)}(te.shapeFlag&256||z&&uv(z.vnode)&&z.vnode.shapeFlag&256)&&J.a&&Oo(J.a,xe),J.isMounted=!0,te=le=Ae=null}};J.scope.on();const Ce=J.effect=new Gne(Pe);J.scope.off();const ee=J.update=Ce.run.bind(Ce),K=J.job=Ce.runIfDirty.bind(Ce);K.i=J,K.id=J.uid,Ce.scheduler=()=>yB(K),kp(J,!0),ee()},O=(J,te,le)=>{te.component=J;const Ae=J.vnode.props;J.vnode=te,J.next=null,tbe(J,te.props,Ae,le),abe(J,te.children,le),Sp(),FH(J),Cp()},R=(J,te,le,Ae,xe,ye,Se,Pe,Ce=!1)=>{const ee=J&&J.children,K=J?J.shapeFlag:0,ve=te.children,{patchFlag:Me,shapeFlag:Q}=te;if(Me>0){if(Me&128){j(ee,ve,le,Ae,xe,ye,Se,Pe,Ce);return}else if(Me&256){H(ee,ve,le,Ae,xe,ye,Se,Pe,Ce);return}}Q&8?(K&16&&Z(ee,xe,ye),ve!==ee&&c(le,ve)):K&16?Q&16?j(ee,ve,le,Ae,xe,ye,Se,Pe,Ce):Z(ee,xe,ye,!0):(K&8&&c(le,""),Q&16&&A(ve,le,Ae,xe,ye,Se,Pe,Ce))},H=(J,te,le,Ae,xe,ye,Se,Pe,Ce)=>{J=J||t1,te=te||t1;const ee=J.length,K=te.length,ve=Math.min(ee,K);let Me;for(Me=0;Me<ve;Me++){const Q=te[Me]=Ce?bf(te[Me]):Vs(te[Me]);v(J[Me],Q,le,null,xe,ye,Se,Pe,Ce)}ee>K?Z(J,xe,ye,!0,!1,ve):A(te,le,Ae,xe,ye,Se,Pe,Ce,ve)},j=(J,te,le,Ae,xe,ye,Se,Pe,Ce)=>{let ee=0;const K=te.length;let ve=J.length-1,Me=K-1;for(;ee<=ve&&ee<=Me;){const Q=J[ee],W=te[ee]=Ce?bf(te[ee]):Vs(te[ee]);if(Mf(Q,W))v(Q,W,le,null,xe,ye,Se,Pe,Ce);else break;ee++}for(;ee<=ve&&ee<=Me;){const Q=J[ve],W=te[Me]=Ce?bf(te[Me]):Vs(te[Me]);if(Mf(Q,W))v(Q,W,le,null,xe,ye,Se,Pe,Ce);else break;ve--,Me--}if(ee>ve){if(ee<=Me){const Q=Me+1,W=Q<K?te[Q].el:Ae;for(;ee<=Me;)v(null,te[ee]=Ce?bf(te[ee]):Vs(te[ee]),le,W,xe,ye,Se,Pe,Ce),ee++}}else if(ee>Me)for(;ee<=ve;)k(J[ee],xe,ye,!0),ee++;else{const Q=ee,W=ee,V=new Map;for(ee=W;ee<=Me;ee++){const Ye=te[ee]=Ce?bf(te[ee]):Vs(te[ee]);Ye.key!=null&&V.set(Ye.key,ee)}let z,X=0;const de=Me-W+1;let pe=!1,we=0;const Je=new Array(de);for(ee=0;ee<de;ee++)Je[ee]=0;for(ee=Q;ee<=ve;ee++){const Ye=J[ee];if(X>=de){k(Ye,xe,ye,!0);continue}let gt;if(Ye.key!=null)gt=V.get(Ye.key);else for(z=W;z<=Me;z++)if(Je[z-W]===0&&Mf(Ye,te[z])){gt=z;break}gt===void 0?k(Ye,xe,ye,!0):(Je[gt-W]=ee+1,gt>=we?we=gt:pe=!0,v(Ye,te[gt],le,null,xe,ye,Se,Pe,Ce),X++)}const Qe=pe?lbe(Je):t1;for(z=Qe.length-1,ee=de-1;ee>=0;ee--){const Ye=W+ee,gt=te[Ye],ct=Ye+1<K?te[Ye+1].el:Ae;Je[ee]===0?v(null,gt,le,ct,xe,ye,Se,Pe,Ce):pe&&(z<0||ee!==Qe[z]?N(gt,le,ct,2):z--)}}},N=(J,te,le,Ae,xe=null)=>{const{el:ye,type:Se,transition:Pe,children:Ce,shapeFlag:ee}=J;if(ee&6){N(J.component.subTree,te,le,Ae);return}if(ee&128){J.suspense.move(te,le,Ae);return}if(ee&64){Se.move(J,te,le,he);return}if(Se===ri){i(ye,te,le);for(let ve=0;ve<Ce.length;ve++)N(Ce[ve],te,le,Ae);i(J.anchor,te,le);return}if(Se===s1){x(J,te,le);return}if(Ae!==2&&ee&1&&Pe)if(Ae===0)Pe.beforeEnter(ye),i(ye,te,le),Oo(()=>Pe.enter(ye),xe);else{const{leave:ve,delayLeave:Me,afterLeave:Q}=Pe,W=()=>i(ye,te,le),V=()=>{ve(ye,()=>{W(),Q&&Q()})};Me?Me(ye,W,V):V()}else i(ye,te,le)},k=(J,te,le,Ae=!1,xe=!1)=>{const{type:ye,props:Se,ref:Pe,children:Ce,dynamicChildren:ee,shapeFlag:K,patchFlag:ve,dirs:Me,cacheIndex:Q}=J;if(ve===-2&&(xe=!1),Pe!=null&&Ub(Pe,null,le,J,!0),Q!=null&&(te.renderCache[Q]=void 0),K&256){te.ctx.deactivate(J);return}const W=K&1&&Me,V=!uv(J);let z;if(V&&(z=Se&&Se.onVnodeBeforeUnmount)&&hl(z,te,J),K&6)F(J.component,le,Ae);else{if(K&128){J.suspense.unmount(le,Ae);return}W&&pc(J,null,te,"beforeUnmount"),K&64?J.type.remove(J,te,le,he,Ae):ee&&!ee.hasOnce&&(ye!==ri||ve>0&&ve&64)?Z(ee,te,le,!1,!0):(ye===ri&&ve&384||!xe&&K&16)&&Z(Ce,te,le),Ae&&G(J)}(V&&(z=Se&&Se.onVnodeUnmounted)||W)&&Oo(()=>{z&&hl(z,te,J),W&&pc(J,null,te,"unmounted")},le)},G=J=>{const{type:te,el:le,anchor:Ae,transition:xe}=J;if(te===ri){Y(le,Ae);return}if(te===s1){b(J);return}const ye=()=>{n(le),xe&&!xe.persisted&&xe.afterLeave&&xe.afterLeave()};if(J.shapeFlag&1&&xe&&!xe.persisted){const{leave:Se,delayLeave:Pe}=xe,Ce=()=>Se(le,ye);Pe?Pe(J.el,ye,Ce):Ce()}else ye()},Y=(J,te)=>{let le;for(;J!==te;)le=d(J),n(J),J=le;n(te)},F=(J,te,le)=>{const{bum:Ae,scope:xe,job:ye,subTree:Se,um:Pe,m:Ce,a:ee}=J;JH(Ce),JH(ee),Ae&&$5(Ae),xe.stop(),ye&&(ye.flags|=8,k(Se,J,te,le)),Pe&&Oo(Pe,te),Oo(()=>{J.isUnmounted=!0},te),te&&te.pendingBranch&&!te.isUnmounted&&J.asyncDep&&!J.asyncResolved&&J.suspenseId===te.pendingId&&(te.deps--,te.deps===0&&te.resolve())},Z=(J,te,le,Ae=!1,xe=!1,ye=0)=>{for(let Se=ye;Se<J.length;Se++)k(J[Se],te,le,Ae,xe)},ne=J=>{if(J.shapeFlag&6)return ne(J.component.subTree);if(J.shapeFlag&128)return J.suspense.next();const te=d(J.anchor||J.el),le=te&&te[cae];return le?d(le):te};let re=!1;const ae=(J,te,le)=>{J==null?te._vnode&&k(te._vnode,null,null,!0):v(te._vnode||null,J,te,null,null,null,le),te._vnode=J,re||(re=!0,FH(),o8(),re=!1)},he={p:v,um:k,m:N,r:G,mt:C,mc:A,pc:R,pbc:E,n:ne,o:e};let se,fe;return t&&([se,fe]=t(he)),{render:ae,hydrate:se,createApp:$xe(ae,se)}}function tE({type:e,props:t},r){return r==="svg"&&e==="foreignObject"||r==="mathml"&&e==="annotation-xml"&&t&&t.encoding&&t.encoding.includes("html")?void 0:r}function kp({effect:e,job:t},r){r?(e.flags|=32,t.flags|=4):(e.flags&=-33,t.flags&=-5)}function Oae(e,t){return(!e||e&&!e.pendingBranch)&&t&&!t.persisted}function EB(e,t,r=!1){const i=e.children,n=t.children;if(dr(i)&&dr(n))for(let a=0;a<i.length;a++){const o=i[a];let s=n[a];s.shapeFlag&1&&!s.dynamicChildren&&((s.patchFlag<=0||s.patchFlag===32)&&(s=n[a]=bf(n[a]),s.el=o.el),!r&&s.patchFlag!==-2&&EB(o,s)),s.type===hv&&(s.el=o.el)}}function lbe(e){const t=e.slice(),r=[0];let i,n,a,o,s;const l=e.length;for(i=0;i<l;i++){const u=e[i];if(u!==0){if(n=r[r.length-1],e[n]<u){t[i]=n,r.push(i);continue}for(a=0,o=r.length-1;a<o;)s=a+o>>1,e[r[s]]<u?a=s+1:o=s;u<e[r[a]]&&(a>0&&(t[i]=r[a-1]),r[a]=i)}}for(a=r.length,o=r[a-1];a-- >0;)r[a]=o,o=t[o];return r}function Bae(e){const t=e.subTree.component;if(t)return t.asyncDep&&!t.asyncResolved?t:Bae(t)}function JH(e){if(e)for(let t=0;t<e.length;t++)e[t].flags|=8}const ube=Symbol.for("v-scx"),cbe=()=>a1(ube);function IPt(e,t){return q6(e,null,t)}function hbe(e,t){return q6(e,null,{flush:"sync"})}function ja(e,t,r){return q6(e,t,r)}function q6(e,t,r=vi){const{immediate:i,deep:n,flush:a,once:o}=r,s=Ca({},r),l=t&&i||!t&&a!=="post";let u;if(R1){if(a==="sync"){const f=cbe();u=f.__watcherHandles||(f.__watcherHandles=[])}else if(!l){const f=()=>{};return f.stop=bu,f.resume=bu,f.pause=bu,f}}const c=Xn;s.call=(f,p,v)=>Xc(f,c,p,v);let h=!1;a==="post"?s.scheduler=f=>{Oo(f,c&&c.suspense)}:a!=="sync"&&(h=!0,s.scheduler=(f,p)=>{p?f():yB(f)}),s.augmentJob=f=>{t&&(f.flags|=4),h&&(f.flags|=2,c&&(f.id=c.uid,f.i=c))};const d=Exe(e,t,s);return R1&&(u?u.push(d):l&&d()),d}function dbe(e,t,r){const i=this.proxy,n=Ki(e)?e.includes(".")?Nae(i,e):()=>i[e]:e.bind(i,i);let a;lr(t)?a=t:(a=t.handler,r=t);const o=i4(this),s=q6(n,a.bind(i),r);return o(),s}function Nae(e,t){const r=t.split(".");return()=>{let i=e;for(let n=0;n<r.length&&i;n++)i=i[r[n]];return i}}function Vae(e,t,r=vi){const i=TB(),n=Ys(t),a=Ap(t),o=Fae(e,n),s=yxe((l,u)=>{let c,h=vi,d;return hbe(()=>{const f=e[n];ss(c,f)&&(c=f,u())}),{get(){return l(),r.get?r.get(c):c},set(f){const p=r.set?r.set(f):f;if(!ss(p,c)&&!(h!==vi&&ss(f,h)))return;const v=i.vnode.props;v&&(t in v||n in v||a in v)&&(`onUpdate:${t}`in v||`onUpdate:${n}`in v||`onUpdate:${a}`in v)||(c=f,u()),i.emit(`update:${t}`,p),ss(f,p)&&ss(f,h)&&!ss(p,d)&&u(),h=f,d=p}}});return s[Symbol.iterator]=()=>{let l=0;return{next(){return l<2?{value:l++?o||vi:s,done:!1}:{done:!0}}}},s}const Fae=(e,t)=>t==="modelValue"||t==="model-value"?e.modelModifiers:e[`${t}Modifiers`]||e[`${Ys(t)}Modifiers`]||e[`${Ap(t)}Modifiers`];function fbe(e,t,...r){if(e.isUnmounted)return;const i=e.vnode.props||vi;let n=r;const a=t.startsWith("update:"),o=a&&Fae(i,t.slice(7));o&&(o.trim&&(n=r.map(c=>Ki(c)?c.trim():c)),o.number&&(n=r.map($D)));let s,l=i[s=X7(t)]||i[s=X7(Ys(t))];!l&&a&&(l=i[s=X7(Ap(t))]),l&&Xc(l,e,6,n);const u=i[s+"Once"];if(u){if(!e.emitted)e.emitted={};else if(e.emitted[s])return;e.emitted[s]=!0,Xc(u,e,6,n)}}function zae(e,t,r=!1){const i=t.emitsCache,n=i.get(e);if(n!==void 0)return n;const a=e.emits;let o={},s=!1;if(!lr(e)){const l=u=>{const c=zae(u,t,!0);c&&(s=!0,Ca(o,c))};!r&&t.mixins.length&&t.mixins.forEach(l),e.extends&&l(e.extends),e.mixins&&e.mixins.forEach(l)}return!a&&!s?(Zi(e)&&i.set(e,null),null):(dr(a)?a.forEach(l=>o[l]=null):Ca(o,a),Zi(e)&&i.set(e,o),o)}function Y6(e,t){return!e||!e4(t)?!1:(t=t.slice(2).replace(/Once$/,""),wi(e,t[0].toLowerCase()+t.slice(1))||wi(e,Ap(t))||wi(e,t))}function rE(e){const{type:t,vnode:r,proxy:i,withProxy:n,propsOptions:[a],slots:o,attrs:s,emit:l,render:u,renderCache:c,props:h,data:d,setupState:f,ctx:p,inheritAttrs:v}=e,m=s8(e);let g,y;try{if(r.shapeFlag&4){const b=n||i,_=b;g=Vs(u.call(_,b,c,h,f,d,p)),y=s}else{const b=t;g=Vs(b.length>1?b(h,{attrs:s,slots:o,emit:l}):b(h,null)),y=t.props?s:vbe(s)}}catch(b){tb.length=0,fy(b,e,1),g=Ie(Eu)}let x=g;if(y&&v!==!1){const b=Object.keys(y),{shapeFlag:_}=x;b.length&&_&7&&(a&&b.some(lB)&&(y=mbe(y,a)),x=k1(x,y,!1,!0))}return r.dirs&&(x=k1(x,null,!1,!0),x.dirs=x.dirs?x.dirs.concat(r.dirs):r.dirs),r.transition&&xB(x,r.transition),g=x,s8(m),g}function pbe(e,t=!0){let r;for(let i=0;i<e.length;i++){const n=e[i];if(L1(n)){if(n.type!==Eu||n.children==="v-if"){if(r)return;r=n}}else return}return r}const vbe=e=>{let t;for(const r in e)(r==="class"||r==="style"||e4(r))&&((t||(t={}))[r]=e[r]);return t},mbe=(e,t)=>{const r={};for(const i in e)(!lB(i)||!(i.slice(9)in t))&&(r[i]=e[i]);return r};function gbe(e,t,r){const{props:i,children:n,component:a}=e,{props:o,children:s,patchFlag:l}=t,u=a.emitsOptions;if(t.dirs||t.transition)return!0;if(r&&l>=0){if(l&1024)return!0;if(l&16)return i?$H(i,o,u):!!o;if(l&8){const c=t.dynamicProps;for(let h=0;h<c.length;h++){const d=c[h];if(o[d]!==i[d]&&!Y6(u,d))return!0}}}else return(n||s)&&(!s||!s.$stable)?!0:i===o?!1:i?o?$H(i,o,u):!0:!!o;return!1}function $H(e,t,r){const i=Object.keys(t);if(i.length!==Object.keys(e).length)return!0;for(let n=0;n<i.length;n++){const a=i[n];if(t[a]!==e[a]&&!Y6(r,a))return!0}return!1}function X6({vnode:e,parent:t},r){for(;t;){const i=t.subTree;if(i.suspense&&i.suspense.activeBranch===e&&(i.el=e.el),i===e)(e=t.vnode).el=r,t=t.parent;else break}}const Hae=e=>e.__isSuspense;let uI=0;const ybe={name:"Suspense",__isSuspense:!0,process(e,t,r,i,n,a,o,s,l,u){if(e==null)bbe(t,r,i,n,a,o,s,l,u);else{if(a&&a.deps>0&&!e.suspense.isInFallback){t.suspense=e.suspense,t.suspense.vnode=t,t.el=e.el;return}wbe(e,t,r,i,n,o,s,l,u)}},hydrate:_be,normalize:Abe},xbe=ybe;function Gb(e,t){const r=e.props&&e.props[t];lr(r)&&r()}function bbe(e,t,r,i,n,a,o,s,l){const{p:u,o:{createElement:c}}=l,h=c("div"),d=e.suspense=Uae(e,n,i,t,h,r,a,o,s,l);u(null,d.pendingBranch=e.ssContent,h,null,i,d,a,o),d.deps>0?(Gb(e,"onPending"),Gb(e,"onFallback"),u(null,e.ssFallback,t,r,i,null,a,o),o1(d,e.ssFallback)):d.resolve(!1,!0)}function wbe(e,t,r,i,n,a,o,s,{p:l,um:u,o:{createElement:c}}){const h=t.suspense=e.suspense;h.vnode=t,t.el=e.el;const d=t.ssContent,f=t.ssFallback,{activeBranch:p,pendingBranch:v,isInFallback:m,isHydrating:g}=h;if(v)h.pendingBranch=d,Mf(d,v)?(l(v,d,h.hiddenContainer,null,n,h,a,o,s),h.deps<=0?h.resolve():m&&(g||(l(p,f,r,i,n,null,a,o,s),o1(h,f)))):(h.pendingId=uI++,g?(h.isHydrating=!1,h.activeBranch=v):u(v,n,h),h.deps=0,h.effects.length=0,h.hiddenContainer=c("div"),m?(l(null,d,h.hiddenContainer,null,n,h,a,o,s),h.deps<=0?h.resolve():(l(p,f,r,i,n,null,a,o,s),o1(h,f))):p&&Mf(d,p)?(l(p,d,r,i,n,h,a,o,s),h.resolve(!0)):(l(null,d,h.hiddenContainer,null,n,h,a,o,s),h.deps<=0&&h.resolve()));else if(p&&Mf(d,p))l(p,d,r,i,n,h,a,o,s),o1(h,d);else if(Gb(t,"onPending"),h.pendingBranch=d,d.shapeFlag&512?h.pendingId=d.component.suspenseId:h.pendingId=uI++,l(null,d,h.hiddenContainer,null,n,h,a,o,s),h.deps<=0)h.resolve();else{const{timeout:y,pendingId:x}=h;y>0?setTimeout(()=>{h.pendingId===x&&h.fallback(f)},y):y===0&&h.fallback(f)}}function Uae(e,t,r,i,n,a,o,s,l,u,c=!1){const{p:h,m:d,um:f,n:p,o:{parentNode:v,remove:m}}=u;let g;const y=Sbe(e);y&&t&&t.pendingBranch&&(g=t.pendingId,t.deps++);const x=e.props?z2e(e.props.timeout):void 0,b=a,_={vnode:e,parent:t,parentComponent:r,namespace:o,container:i,hiddenContainer:n,deps:0,pendingId:uI++,timeout:typeof x=="number"?x:-1,activeBranch:null,pendingBranch:null,isInFallback:!c,isHydrating:c,isUnmounted:!1,effects:[],resolve(w=!1,S=!1){const{vnode:A,activeBranch:M,pendingBranch:E,pendingId:T,effects:L,parentComponent:P,container:C}=_;let D=!1;_.isHydrating?_.isHydrating=!1:w||(D=M&&E.transition&&E.transition.mode==="out-in",D&&(M.transition.afterLeave=()=>{T===_.pendingId&&(d(E,C,a===b?p(M):a,0),a8(L))}),M&&(v(M.el)===C&&(a=p(M)),f(M,P,_,!0)),D||d(E,C,a,0)),o1(_,E),_.pendingBranch=null,_.isInFallback=!1;let I=_.parent,O=!1;for(;I;){if(I.pendingBranch){I.effects.push(...L),O=!0;break}I=I.parent}!O&&!D&&a8(L),_.effects=[],y&&t&&t.pendingBranch&&g===t.pendingId&&(t.deps--,t.deps===0&&!S&&t.resolve()),Gb(A,"onResolve")},fallback(w){if(!_.pendingBranch)return;const{vnode:S,activeBranch:A,parentComponent:M,container:E,namespace:T}=_;Gb(S,"onFallback");const L=p(A),P=()=>{_.isInFallback&&(h(null,w,E,L,M,null,T,s,l),o1(_,w))},C=w.transition&&w.transition.mode==="out-in";C&&(A.transition.afterLeave=P),_.isInFallback=!0,f(A,M,null,!0),C||P()},move(w,S,A){_.activeBranch&&d(_.activeBranch,w,S,A),_.container=w},next(){return _.activeBranch&&p(_.activeBranch)},registerDep(w,S,A){const M=!!_.pendingBranch;M&&_.deps++;const E=w.vnode.el;w.asyncDep.catch(T=>{fy(T,w,0)}).then(T=>{if(w.isUnmounted||_.isUnmounted||_.pendingId!==w.suspenseId)return;w.asyncResolved=!0;const{vnode:L}=w;hI(w,T,!1),E&&(L.el=E);const P=!E&&w.subTree.el;S(w,L,v(E||w.subTree.el),E?null:p(w.subTree),_,o,A),P&&m(P),X6(w,L.el),M&&--_.deps===0&&_.resolve()})},unmount(w,S){_.isUnmounted=!0,_.activeBranch&&f(_.activeBranch,r,w,S),_.pendingBranch&&f(_.pendingBranch,r,w,S)}};return _}function _be(e,t,r,i,n,a,o,s,l){const u=t.suspense=Uae(t,i,r,e.parentNode,document.createElement("div"),null,n,a,o,s,!0),c=l(e,u.pendingBranch=t.ssContent,r,u,a,o);return u.deps===0&&u.resolve(!1,!0),c}function Abe(e){const{shapeFlag:t,children:r}=e,i=t&32;e.ssContent=eU(i?r.default:r),e.ssFallback=i?eU(r.fallback):Ie(Eu)}function eU(e){let t;if(lr(e)){const r=I1&&e._c;r&&(e._d=!1,We()),e=e(),r&&(e._d=!0,t=ys,jae())}return dr(e)&&(e=pbe(e)),e=Vs(e),t&&!e.dynamicChildren&&(e.dynamicChildren=t.filter(r=>r!==e)),e}function Gae(e,t){t&&t.pendingBranch?dr(e)?t.effects.push(...e):t.effects.push(e):a8(e)}function o1(e,t){e.activeBranch=t;const{vnode:r,parentComponent:i}=e;let n=t.el;for(;!n&&t.component;)t=t.component.subTree,n=t.el;r.el=n,i&&i.subTree===r&&(i.vnode.el=n,X6(i,n))}function Sbe(e){const t=e.props&&e.props.suspensible;return t!=null&&t!==!1}const ri=Symbol.for("v-fgt"),hv=Symbol.for("v-txt"),Eu=Symbol.for("v-cmt"),s1=Symbol.for("v-stc"),tb=[];let ys=null;function We(e=!1){tb.push(ys=e?null:[])}function jae(){tb.pop(),ys=tb[tb.length-1]||null}let I1=1;function tU(e,t=!1){I1+=e,e<0&&ys&&t&&(ys.hasOnce=!0)}function Wae(e){return e.dynamicChildren=I1>0?ys||t1:null,jae(),I1>0&&ys&&ys.push(e),e}function tt(e,t,r,i,n,a){return Wae(B(e,t,r,i,n,a,!0))}function ii(e,t,r,i,n){return Wae(Ie(e,t,r,i,n,!0))}function L1(e){return e?e.__v_isVNode===!0:!1}function Mf(e,t){return e.type===t.type&&e.key===t.key}const qae=({key:e})=>e??null,tA=({ref:e,ref_key:t,ref_for:r})=>(typeof e=="number"&&(e=""+e),e!=null?Ki(e)||Aa(e)||lr(e)?{i:Jn,r:e,k:t,f:!!r}:e:null);function B(e,t=null,r=null,i=0,n=null,a=e===ri?0:1,o=!1,s=!1){const l={__v_isVNode:!0,__v_skip:!0,type:e,props:t,key:t&&qae(t),ref:t&&tA(t),scopeId:uae,slotScopeIds:null,children:r,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:a,patchFlag:i,dynamicProps:n,dynamicChildren:null,appContext:null,ctx:Jn};return s?(MB(l,r),a&128&&e.normalize(l)):r&&(l.shapeFlag|=Ki(r)?8:16),I1>0&&!o&&ys&&(l.patchFlag>0||a&6)&&l.patchFlag!==32&&ys.push(l),l}const Ie=Cbe;function Cbe(e,t=null,r=null,i=0,n=null,a=!1){if((!e||e===xae)&&(e=Eu),L1(e)){const s=k1(e,t,!0);return r&&MB(s,r),I1>0&&!a&&ys&&(s.shapeFlag&6?ys[ys.indexOf(e)]=s:ys.push(s)),s.patchFlag=-2,s}if(Rbe(e)&&(e=e.__vccOpts),t){t=Yae(t);let{class:s,style:l}=t;s&&!Ki(s)&&(t.class=Tt(s)),Zi(l)&&(mB(l)&&!dr(l)&&(l=Ca({},l)),t.style=sp(l))}const o=Ki(e)?1:Hae(e)?128:Pxe(e)?64:Zi(e)?4:lr(e)?2:0;return B(e,t,r,i,n,o,a,!0)}function Yae(e){return e?mB(e)||Mae(e)?Ca({},e):e:null}function k1(e,t,r=!1,i=!1){const{props:n,ref:a,patchFlag:o,children:s,transition:l}=e,u=t?r4(n||{},t):n,c={__v_isVNode:!0,__v_skip:!0,type:e.type,props:u,key:u&&qae(u),ref:t&&t.ref?r&&a?dr(a)?a.concat(tA(t)):[a,tA(t)]:tA(t):a,scopeId:e.scopeId,slotScopeIds:e.slotScopeIds,children:s,target:e.target,targetStart:e.targetStart,targetAnchor:e.targetAnchor,staticCount:e.staticCount,shapeFlag:e.shapeFlag,patchFlag:t&&e.type!==ri?o===-1?16:o|16:o,dynamicProps:e.dynamicProps,dynamicChildren:e.dynamicChildren,appContext:e.appContext,dirs:e.dirs,transition:l,component:e.component,suspense:e.suspense,ssContent:e.ssContent&&k1(e.ssContent),ssFallback:e.ssFallback&&k1(e.ssFallback),el:e.el,anchor:e.anchor,ctx:e.ctx,ce:e.ce};return l&&i&&xB(c,l.clone(c)),c}function jo(e=" ",t=0){return Ie(hv,null,e,t)}function Mu(e,t){const r=Ie(s1,null,e);return r.staticCount=t,r}function Kt(e="",t=!1){return t?(We(),ii(Eu,null,e)):Ie(Eu,null,e)}function Vs(e){return e==null||typeof e=="boolean"?Ie(Eu):dr(e)?Ie(ri,null,e.slice()):L1(e)?bf(e):Ie(hv,null,String(e))}function bf(e){return e.el===null&&e.patchFlag!==-1||e.memo?e:k1(e)}function MB(e,t){let r=0;const{shapeFlag:i}=e;if(t==null)t=null;else if(dr(t))r=16;else if(typeof t=="object")if(i&65){const n=t.default;n&&(n._c&&(n._d=!1),MB(e,n()),n._c&&(n._d=!0));return}else{r=32;const n=t._;!n&&!Mae(t)?t._ctx=Jn:n===3&&Jn&&(Jn.slots._===1?t._=1:(t._=2,e.patchFlag|=1024))}else lr(t)?(t={default:t,_ctx:Jn},r=32):(t=String(t),i&64?(r=16,t=[jo(t)]):r=8);e.children=t,e.shapeFlag|=r}function r4(...e){const t={};for(let r=0;r<e.length;r++){const i=e[r];for(const n in i)if(n==="class")t.class!==i.class&&(t.class=Tt([t.class,i.class]));else if(n==="style")t.style=sp([t.style,i.style]);else if(e4(n)){const a=t[n],o=i[n];o&&a!==o&&!(dr(a)&&a.includes(o))&&(t[n]=a?[].concat(a,o):o)}else n!==""&&(t[n]=i[n])}return t}function hl(e,t,r,i=null){Xc(e,t,7,[r,i])}const Ebe=Aae();let Mbe=0;function Tbe(e,t,r){const i=e.type,n=(t?t.appContext:e.appContext)||Ebe,a={uid:Mbe++,vnode:e,type:i,parent:t,appContext:n,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new Hne(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:t?t.provides:Object.create(n.provides),ids:t?t.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:Pae(i,n),emitsOptions:zae(i,n),emit:null,emitted:null,propsDefaults:vi,inheritAttrs:i.inheritAttrs,ctx:vi,data:vi,props:vi,attrs:vi,slots:vi,refs:vi,setupState:vi,setupContext:null,suspense:r,suspenseId:r?r.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return a.ctx={_:a},a.root=t?t.root:a,a.emit=fbe.bind(null,a),e.ce&&e.ce(a),a}let Xn=null;const TB=()=>Xn||Jn;let u8,cI;{const e=U6(),t=(r,i)=>{let n;return(n=e[r])||(n=e[r]=[]),n.push(i),a=>{n.length>1?n.forEach(o=>o(a)):n[0](a)}};u8=t("__VUE_INSTANCE_SETTERS__",r=>Xn=r),cI=t("__VUE_SSR_SETTERS__",r=>R1=r)}const i4=e=>{const t=Xn;return u8(e),e.scope.on(),()=>{e.scope.off(),u8(t)}},rU=()=>{Xn&&Xn.scope.off(),u8(null)};function Xae(e){return e.vnode.shapeFlag&4}let R1=!1;function Pbe(e,t=!1,r=!1){t&&cI(t);const{props:i,children:n}=e.vnode,a=Xae(e);ebe(e,i,a,t),nbe(e,n,r);const o=a?Dbe(e,t):void 0;return t&&cI(!1),o}function Dbe(e,t){const r=e.type;e.accessCache=Object.create(null),e.proxy=new Proxy(e.ctx,qxe);const{setup:i}=r;if(i){Sp();const n=e.setupContext=i.length>1?Lbe(e):null,a=i4(e),o=t4(i,e,0,[e.props,n]),s=Rne(o);if(Cp(),a(),(s||e.sp)&&!uv(e)&&bB(e),s){if(o.then(rU,rU),t)return o.then(l=>{hI(e,l,t)}).catch(l=>{fy(l,e,0)});e.asyncDep=o}else hI(e,o,t)}else Zae(e,t)}function hI(e,t,r){lr(t)?e.type.__ssrInlineRender?e.ssrRender=t:e.render=t:Zi(t)&&(e.setupState=aae(t)),Zae(e,r)}let iU;function Zae(e,t,r){const i=e.type;if(!e.render){if(!t&&iU&&!i.render){const n=i.template||AB(e).template;if(n){const{isCustomElement:a,compilerOptions:o}=e.appContext.config,{delimiters:s,compilerOptions:l}=i,u=Ca(Ca({isCustomElement:a,delimiters:s},o),l);i.render=iU(n,u)}}e.render=i.render||bu}{const n=i4(e);Sp();try{Yxe(e)}finally{Cp(),n()}}}const Ibe={get(e,t){return uo(e,"get",""),e[t]}};function Lbe(e){const t=r=>{e.exposed=r||{}};return{attrs:new Proxy(e.attrs,Ibe),slots:e.slots,emit:e.emit,expose:t}}function Z6(e){return e.exposed?e.exposeProxy||(e.exposeProxy=new Proxy(aae(pxe(e.exposed)),{get(t,r){if(r in t)return t[r];if(r in eb)return eb[r](e)},has(t,r){return r in t||r in eb}})):e.proxy}function kbe(e,t=!0){return lr(e)?e.displayName||e.name:e.name||t&&e.__name}function Rbe(e){return lr(e)&&"__vccOpts"in e}const _s=(e,t)=>Sxe(e,t,R1);function Obe(e,t,r){const i=arguments.length;return i===2?Zi(t)&&!dr(t)?L1(t)?Ie(e,null,[t]):Ie(e,t):Ie(e,null,t):(i>3?r=Array.prototype.slice.call(arguments,2):i===3&&L1(r)&&(r=[r]),Ie(e,t,r))}const Qae="3.5.13";/**
* @vue/runtime-dom v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let dI;const nU=typeof window<"u"&&window.trustedTypes;if(nU)try{dI=nU.createPolicy("vue",{createHTML:e=>e})}catch{}const Kae=dI?e=>dI.createHTML(e):e=>e,Bbe="http://www.w3.org/2000/svg",Nbe="http://www.w3.org/1998/Math/MathML",kh=typeof document<"u"?document:null,aU=kh&&kh.createElement("template"),Vbe={insert:(e,t,r)=>{t.insertBefore(e,r||null)},remove:e=>{const t=e.parentNode;t&&t.removeChild(e)},createElement:(e,t,r,i)=>{const n=t==="svg"?kh.createElementNS(Bbe,e):t==="mathml"?kh.createElementNS(Nbe,e):r?kh.createElement(e,{is:r}):kh.createElement(e);return e==="select"&&i&&i.multiple!=null&&n.setAttribute("multiple",i.multiple),n},createText:e=>kh.createTextNode(e),createComment:e=>kh.createComment(e),setText:(e,t)=>{e.nodeValue=t},setElementText:(e,t)=>{e.textContent=t},parentNode:e=>e.parentNode,nextSibling:e=>e.nextSibling,querySelector:e=>kh.querySelector(e),setScopeId(e,t){e.setAttribute(t,"")},insertStaticContent(e,t,r,i,n,a){const o=r?r.previousSibling:t.lastChild;if(n&&(n===a||n.nextSibling))for(;t.insertBefore(n.cloneNode(!0),r),!(n===a||!(n=n.nextSibling)););else{aU.innerHTML=Kae(i==="svg"?`<svg>${e}</svg>`:i==="mathml"?`<math>${e}</math>`:e);const s=aU.content;if(i==="svg"||i==="mathml"){const l=s.firstChild;for(;l.firstChild;)s.appendChild(l.firstChild);s.removeChild(l)}t.insertBefore(s,r)}return[o?o.nextSibling:t.firstChild,r?r.previousSibling:t.lastChild]}},Fbe=Symbol("_vtc");function zbe(e,t,r){const i=e[Fbe];i&&(t=(t?[t,...i]:[...i]).join(" ")),t==null?e.removeAttribute("class"):r?e.setAttribute("class",t):e.className=t}const c8=Symbol("_vod"),Jae=Symbol("_vsh"),Q6={beforeMount(e,{value:t},{transition:r}){e[c8]=e.style.display==="none"?"":e.style.display,r&&t?r.beforeEnter(e):u2(e,t)},mounted(e,{value:t},{transition:r}){r&&t&&r.enter(e)},updated(e,{value:t,oldValue:r},{transition:i}){!t!=!r&&(i?t?(i.beforeEnter(e),u2(e,!0),i.enter(e)):i.leave(e,()=>{u2(e,!1)}):u2(e,t))},beforeUnmount(e,{value:t}){u2(e,t)}};function u2(e,t){e.style.display=t?e[c8]:"none",e[Jae]=!t}const $ae=Symbol("");function vy(e){const t=TB();if(!t)return;const r=t.ut=(n=e(t.proxy))=>{Array.from(document.querySelectorAll(`[data-v-owner="${t.uid}"]`)).forEach(a=>h8(a,n))},i=()=>{const n=e(t.proxy);t.ce?h8(t.ce,n):fI(t.subTree,n),r(n)};mae(()=>{a8(i)}),Zs(()=>{ja(i,bu,{flush:"post"});const n=new MutationObserver(i);n.observe(t.subTree.el.parentNode,{childList:!0}),_B(()=>n.disconnect())})}function fI(e,t){if(e.shapeFlag&128){const r=e.suspense;e=r.activeBranch,r.pendingBranch&&!r.isHydrating&&r.effects.push(()=>{fI(r.activeBranch,t)})}for(;e.component;)e=e.component.subTree;if(e.shapeFlag&1&&e.el)h8(e.el,t);else if(e.type===ri)e.children.forEach(r=>fI(r,t));else if(e.type===s1){let{el:r,anchor:i}=e;for(;r&&(h8(r,t),r!==i);)r=r.nextSibling}}function h8(e,t){if(e.nodeType===1){const r=e.style;let i="";for(const n in t)r.setProperty(`--${n}`,t[n]),i+=`--${n}: ${t[n]};`;r[$ae]=i}}const Hbe=/(^|;)\s*display\s*:/;function Ube(e,t,r){const i=e.style,n=Ki(r);let a=!1;if(r&&!n){if(t)if(Ki(t))for(const o of t.split(";")){const s=o.slice(0,o.indexOf(":")).trim();r[s]==null&&rA(i,s,"")}else for(const o in t)r[o]==null&&rA(i,o,"");for(const o in r)o==="display"&&(a=!0),rA(i,o,r[o])}else if(n){if(t!==r){const o=i[$ae];o&&(r+=";"+o),i.cssText=r,a=Hbe.test(r)}}else t&&e.removeAttribute("style");c8 in e&&(e[c8]=a?i.display:"",e[Jae]&&(i.display="none"))}const oU=/\s*!important$/;function rA(e,t,r){if(dr(r))r.forEach(i=>rA(e,t,i));else if(r==null&&(r=""),t.startsWith("--"))e.setProperty(t,r);else{const i=Gbe(e,t);oU.test(r)?e.setProperty(Ap(i),r.replace(oU,""),"important"):e[i]=r}}const sU=["Webkit","Moz","ms"],iE={};function Gbe(e,t){const r=iE[t];if(r)return r;let i=Ys(t);if(i!=="filter"&&i in e)return iE[t]=i;i=H6(i);for(let n=0;n<sU.length;n++){const a=sU[n]+i;if(a in e)return iE[t]=a}return t}const lU="http://www.w3.org/1999/xlink";function uU(e,t,r,i,n,a=Y2e(t)){i&&t.startsWith("xlink:")?r==null?e.removeAttributeNS(lU,t.slice(6,t.length)):e.setAttributeNS(lU,t,r):r==null||a&&!Vne(r)?e.removeAttribute(t):e.setAttribute(t,a?"":Ld(r)?String(r):r)}function cU(e,t,r,i,n){if(t==="innerHTML"||t==="textContent"){r!=null&&(e[t]=t==="innerHTML"?Kae(r):r);return}const a=e.tagName;if(t==="value"&&a!=="PROGRESS"&&!a.includes("-")){const s=a==="OPTION"?e.getAttribute("value")||"":e.value,l=r==null?e.type==="checkbox"?"on":"":String(r);(s!==l||!("_value"in e))&&(e.value=l),r==null&&e.removeAttribute(t),e._value=r;return}let o=!1;if(r===""||r==null){const s=typeof e[t];s==="boolean"?r=Vne(r):r==null&&s==="string"?(r="",o=!0):s==="number"&&(r=0,o=!0)}try{e[t]=r}catch{}o&&e.removeAttribute(n||t)}function Ag(e,t,r,i){e.addEventListener(t,r,i)}function jbe(e,t,r,i){e.removeEventListener(t,r,i)}const hU=Symbol("_vei");function Wbe(e,t,r,i,n=null){const a=e[hU]||(e[hU]={}),o=a[t];if(i&&o)o.value=i;else{const[s,l]=qbe(t);if(i){const u=a[t]=Zbe(i,n);Ag(e,s,u,l)}else o&&(jbe(e,s,o,l),a[t]=void 0)}}const dU=/(?:Once|Passive|Capture)$/;function qbe(e){let t;if(dU.test(e)){t={};let i;for(;i=e.match(dU);)e=e.slice(0,e.length-i[0].length),t[i[0].toLowerCase()]=!0}return[e[2]===":"?e.slice(3):Ap(e.slice(2)),t]}let nE=0;const Ybe=Promise.resolve(),Xbe=()=>nE||(Ybe.then(()=>nE=0),nE=Date.now());function Zbe(e,t){const r=i=>{if(!i._vts)i._vts=Date.now();else if(i._vts<=r.attached)return;Xc(Qbe(i,r.value),t,5,[i])};return r.value=e,r.attached=Xbe(),r}function Qbe(e,t){if(dr(t)){const r=e.stopImmediatePropagation;return e.stopImmediatePropagation=()=>{r.call(e),e._stopped=!0},t.map(i=>n=>!n._stopped&&i&&i(n))}else return t}const fU=e=>e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&e.charCodeAt(2)>96&&e.charCodeAt(2)<123,Kbe=(e,t,r,i,n,a)=>{const o=n==="svg";t==="class"?zbe(e,i,o):t==="style"?Ube(e,r,i):e4(t)?lB(t)||Wbe(e,t,r,i,a):(t[0]==="."?(t=t.slice(1),!0):t[0]==="^"?(t=t.slice(1),!1):Jbe(e,t,i,o))?(cU(e,t,i),!e.tagName.includes("-")&&(t==="value"||t==="checked"||t==="selected")&&uU(e,t,i,o,a,t!=="value")):e._isVueCE&&(/[A-Z]/.test(t)||!Ki(i))?cU(e,Ys(t),i,a,t):(t==="true-value"?e._trueValue=i:t==="false-value"&&(e._falseValue=i),uU(e,t,i,o))};function Jbe(e,t,r,i){if(i)return!!(t==="innerHTML"||t==="textContent"||t in e&&fU(t)&&lr(r));if(t==="spellcheck"||t==="draggable"||t==="translate"||t==="form"||t==="list"&&e.tagName==="INPUT"||t==="type"&&e.tagName==="TEXTAREA")return!1;if(t==="width"||t==="height"){const n=e.tagName;if(n==="IMG"||n==="VIDEO"||n==="CANVAS"||n==="SOURCE")return!1}return fU(t)&&Ki(r)?!1:t in e}const pU=e=>{const t=e.props["onUpdate:modelValue"]||!1;return dr(t)?r=>$5(t,r):t};function $be(e){e.target.composing=!0}function vU(e){const t=e.target;t.composing&&(t.composing=!1,t.dispatchEvent(new Event("input")))}const aE=Symbol("_assign"),eoe={created(e,{modifiers:{lazy:t,trim:r,number:i}},n){e[aE]=pU(n);const a=i||n.props&&n.props.type==="number";Ag(e,t?"change":"input",o=>{if(o.target.composing)return;let s=e.value;r&&(s=s.trim()),a&&(s=$D(s)),e[aE](s)}),r&&Ag(e,"change",()=>{e.value=e.value.trim()}),t||(Ag(e,"compositionstart",$be),Ag(e,"compositionend",vU),Ag(e,"change",vU))},mounted(e,{value:t}){e.value=t??""},beforeUpdate(e,{value:t,oldValue:r,modifiers:{lazy:i,trim:n,number:a}},o){if(e[aE]=pU(o),e.composing)return;const s=(a||e.type==="number")&&!/^0\d/.test(e.value)?$D(e.value):e.value,l=t??"";s!==l&&(document.activeElement===e&&e.type!=="range"&&(i&&t===r||n&&e.value.trim()===l)||(e.value=l))}},ewe=["ctrl","shift","alt","meta"],twe={stop:e=>e.stopPropagation(),prevent:e=>e.preventDefault(),self:e=>e.target!==e.currentTarget,ctrl:e=>!e.ctrlKey,shift:e=>!e.shiftKey,alt:e=>!e.altKey,meta:e=>!e.metaKey,left:e=>"button"in e&&e.button!==0,middle:e=>"button"in e&&e.button!==1,right:e=>"button"in e&&e.button!==2,exact:(e,t)=>ewe.some(r=>e[`${r}Key`]&&!t.includes(r))},PB=(e,t)=>{const r=e._withMods||(e._withMods={}),i=t.join(".");return r[i]||(r[i]=(n,...a)=>{for(let o=0;o<t.length;o++){const s=twe[t[o]];if(s&&s(n,t))return}return e(n,...a)})},toe=Ca({patchProp:Kbe},Vbe);let rb,mU=!1;function rwe(){return rb||(rb=obe(toe))}function iwe(){return rb=mU?rb:sbe(toe),mU=!0,rb}const nwe=(...e)=>{const t=rwe().createApp(...e),{mount:r}=t;return t.mount=i=>{const n=ioe(i);if(!n)return;const a=t._component;!lr(a)&&!a.render&&!a.template&&(a.template=n.innerHTML),n.nodeType===1&&(n.textContent="");const o=r(n,!1,roe(n));return n instanceof Element&&(n.removeAttribute("v-cloak"),n.setAttribute("data-v-app","")),o},t},awe=(...e)=>{const t=iwe().createApp(...e),{mount:r}=t;return t.mount=i=>{const n=ioe(i);if(n)return r(n,!0,roe(n))},t};function roe(e){if(e instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&e instanceof MathMLElement)return"mathml"}function ioe(e){return Ki(e)?document.querySelector(e):e}const owe=/"(?:_|\\u0{2}5[Ff]){2}(?:p|\\u0{2}70)(?:r|\\u0{2}72)(?:o|\\u0{2}6[Ff])(?:t|\\u0{2}74)(?:o|\\u0{2}6[Ff])(?:_|\\u0{2}5[Ff]){2}"\s*:/,swe=/"(?:c|\\u0063)(?:o|\\u006[Ff])(?:n|\\u006[Ee])(?:s|\\u0073)(?:t|\\u0074)(?:r|\\u0072)(?:u|\\u0075)(?:c|\\u0063)(?:t|\\u0074)(?:o|\\u006[Ff])(?:r|\\u0072)"\s*:/,lwe=/^\s*["[{]|^\s*-?\d{1,16}(\.\d{1,17})?([Ee][+-]?\d+)?\s*$/;function uwe(e,t){if(e==="__proto__"||e==="constructor"&&t&&typeof t=="object"&&"prototype"in t){cwe(e);return}return t}function cwe(e){console.warn(`[destr] Dropping "${e}" key to prevent prototype pollution.`)}function d8(e,t={}){if(typeof e!="string")return e;const r=e.trim();if(e[0]==='"'&&e.endsWith('"')&&!e.includes("\\"))return r.slice(1,-1);if(r.length<=9){const i=r.toLowerCase();if(i==="true")return!0;if(i==="false")return!1;if(i==="undefined")return;if(i==="null")return null;if(i==="nan")return Number.NaN;if(i==="infinity")return Number.POSITIVE_INFINITY;if(i==="-infinity")return Number.NEGATIVE_INFINITY}if(!lwe.test(e)){if(t.strict)throw new SyntaxError("[destr] Invalid JSON");return e}try{if(owe.test(e)||swe.test(e)){if(t.strict)throw new Error("[destr] Possible prototype pollution");return JSON.parse(e,uwe)}return JSON.parse(e)}catch(i){if(t.strict)throw i;return e}}const hwe=/#/g,dwe=/&/g,fwe=/\//g,pwe=/=/g,DB=/\+/g,vwe=/%5e/gi,mwe=/%60/gi,gwe=/%7c/gi,ywe=/%20/gi;function xwe(e){return encodeURI(""+e).replace(gwe,"|")}function pI(e){return xwe(typeof e=="string"?e:JSON.stringify(e)).replace(DB,"%2B").replace(ywe,"+").replace(hwe,"%23").replace(dwe,"%26").replace(mwe,"`").replace(vwe,"^").replace(fwe,"%2F")}function oE(e){return pI(e).replace(pwe,"%3D")}function f8(e=""){try{return decodeURIComponent(""+e)}catch{return""+e}}function bwe(e){return f8(e.replace(DB," "))}function wwe(e){return f8(e.replace(DB," "))}function noe(e=""){const t={};e[0]==="?"&&(e=e.slice(1));for(const r of e.split("&")){const i=r.match(/([^=]+)=?(.*)/)||[];if(i.length<2)continue;const n=bwe(i[1]);if(n==="__proto__"||n==="constructor")continue;const a=wwe(i[2]||"");t[n]===void 0?t[n]=a:Array.isArray(t[n])?t[n].push(a):t[n]=[t[n],a]}return t}function _we(e,t){return(typeof t=="number"||typeof t=="boolean")&&(t=String(t)),t?Array.isArray(t)?t.map(r=>`${oE(e)}=${pI(r)}`).join("&"):`${oE(e)}=${pI(t)}`:oE(e)}function aoe(e){return Object.keys(e).filter(t=>e[t]!==void 0).map(t=>_we(t,e[t])).filter(Boolean).join("&")}const Awe=/^[\s\w\0+.-]{2,}:([/\\]{1,2})/,Swe=/^[\s\w\0+.-]{2,}:([/\\]{2})?/,Cwe=/^([/\\]\s*){2,}[^/\\]/,Ewe=/^[\s\0]*(blob|data|javascript|vbscript):$/i,Mwe=/\/$|\/\?|\/#/,Twe=/^\.?\//;function my(e,t={}){return typeof t=="boolean"&&(t={acceptRelative:t}),t.strict?Awe.test(e):Swe.test(e)||(t.acceptRelative?Cwe.test(e):!1)}function Pwe(e){return!!e&&Ewe.test(e)}function vI(e="",t){return t?Mwe.test(e):e.endsWith("/")}function IB(e="",t){if(!t)return(vI(e)?e.slice(0,-1):e)||"/";if(!vI(e,!0))return e||"/";let r=e,i="";const n=e.indexOf("#");n>=0&&(r=e.slice(0,n),i=e.slice(n));const[a,...o]=r.split("?");return((a.endsWith("/")?a.slice(0,-1):a)||"/")+(o.length>0?`?${o.join("?")}`:"")+i}function mI(e="",t){if(!t)return e.endsWith("/")?e:e+"/";if(vI(e,!0))return e||"/";let r=e,i="";const n=e.indexOf("#");if(n>=0&&(r=e.slice(0,n),i=e.slice(n),!r))return i;const[a,...o]=r.split("?");return a+"/"+(o.length>0?`?${o.join("?")}`:"")+i}function Dwe(e=""){return e.startsWith("/")}function gU(e=""){return Dwe(e)?e:"/"+e}function Iwe(e,t){if(soe(t)||my(e))return e;const r=IB(t);return e.startsWith(r)?e:K6(r,e)}function Lwe(e,t){if(soe(t))return e;const r=IB(t);if(!e.startsWith(r))return e;const i=e.slice(r.length);return i[0]==="/"?i:"/"+i}function ooe(e,t){const r=Owe(e),i={...noe(r.search),...t};return r.search=aoe(i),coe(r)}function soe(e){return!e||e==="/"}function kwe(e){return e&&e!=="/"}function K6(e,...t){let r=e||"";for(const i of t.filter(n=>kwe(n)))if(r){const n=i.replace(Twe,"");r=mI(r)+n}else r=i;return r}function loe(...e){var o,s,l,u;const t=/\/(?!\/)/,r=e.filter(Boolean),i=[];let n=0;for(const c of r)if(!(!c||c==="/")){for(const[h,d]of c.split(t).entries())if(!(!d||d===".")){if(d===".."){if(i.length===1&&my(i[0]))continue;i.pop(),n--;continue}if(h===1&&((o=i[i.length-1])!=null&&o.endsWith(":/"))){i[i.length-1]+="/"+d;continue}i.push(d),n++}}let a=i.join("/");return n>=0?(s=r[0])!=null&&s.startsWith("/")&&!a.startsWith("/")?a="/"+a:(l=r[0])!=null&&l.startsWith("./")&&!a.startsWith("./")&&(a="./"+a):a="../".repeat(-1*n)+a,(u=r[r.length-1])!=null&&u.endsWith("/")&&!a.endsWith("/")&&(a+="/"),a}function Rwe(e,t,r={}){return r.trailingSlash||(e=mI(e),t=mI(t)),r.leadingSlash||(e=gU(e),t=gU(t)),r.encoding||(e=f8(e),t=f8(t)),e===t}const uoe=Symbol.for("ufo:protocolRelative");function Owe(e="",t){const r=e.match(/^[\s\0]*(blob:|data:|javascript:|vbscript:)(.*)/i);if(r){const[,h,d=""]=r;return{protocol:h.toLowerCase(),pathname:d,href:h+d,auth:"",host:"",search:"",hash:""}}if(!my(e,{acceptRelative:!0}))return yU(e);const[,i="",n,a=""]=e.replace(/\\/g,"/").match(/^[\s\0]*([\w+.-]{2,}:)?\/\/([^/@]+@)?(.*)/)||[];let[,o="",s=""]=a.match(/([^#/?]*)(.*)?/)||[];i==="file:"&&(s=s.replace(/\/(?=[A-Za-z]:)/,""));const{pathname:l,search:u,hash:c}=yU(s);return{protocol:i.toLowerCase(),auth:n?n.slice(0,Math.max(0,n.length-1)):"",host:o,pathname:l,search:u,hash:c,[uoe]:!i}}function yU(e=""){const[t="",r="",i=""]=(e.match(/([^#?]*)(\?[^#]*)?(#.*)?/)||[]).splice(1);return{pathname:t,search:r,hash:i}}function coe(e){const t=e.pathname||"",r=e.search?(e.search.startsWith("?")?"":"?")+e.search:"",i=e.hash||"",n=e.auth?e.auth+"@":"",a=e.host||"";return(e.protocol||e[uoe]?(e.protocol||"")+"//":"")+n+a+t+r+i}class Bwe extends Error{constructor(t,r){super(t,r),this.name="FetchError",r!=null&&r.cause&&!this.cause&&(this.cause=r.cause)}}function Nwe(e){var l,u,c,h,d;const t=((l=e.error)==null?void 0:l.message)||((u=e.error)==null?void 0:u.toString())||"",r=((c=e.request)==null?void 0:c.method)||((h=e.options)==null?void 0:h.method)||"GET",i=((d=e.request)==null?void 0:d.url)||String(e.request)||"/",n=`[${r}] ${JSON.stringify(i)}`,a=e.response?`${e.response.status} ${e.response.statusText}`:"<no response>",o=`${n}: ${a}${t?` ${t}`:""}`,s=new Bwe(o,e.error?{cause:e.error}:void 0);for(const f of["request","options","response"])Object.defineProperty(s,f,{get(){return e[f]}});for(const[f,p]of[["data","_data"],["status","status"],["statusCode","status"],["statusText","statusText"],["statusMessage","statusText"]])Object.defineProperty(s,f,{get(){return e.response&&e.response[p]}});return s}const Vwe=new Set(Object.freeze(["PATCH","POST","PUT","DELETE"]));function xU(e="GET"){return Vwe.has(e.toUpperCase())}function Fwe(e){if(e===void 0)return!1;const t=typeof e;return t==="string"||t==="number"||t==="boolean"||t===null?!0:t!=="object"?!1:Array.isArray(e)?!0:e.buffer?!1:e.constructor&&e.constructor.name==="Object"||typeof e.toJSON=="function"}const zwe=new Set(["image/svg","application/xml","application/xhtml","application/html"]),Hwe=/^application\/(?:[\w!#$%&*.^`~-]*\+)?json(;.+)?$/i;function Uwe(e=""){if(!e)return"json";const t=e.split(";").shift()||"";return Hwe.test(t)?"json":zwe.has(t)||t.startsWith("text/")?"text":"blob"}function Gwe(e,t,r,i){const n=jwe((t==null?void 0:t.headers)??(e==null?void 0:e.headers),r==null?void 0:r.headers,i);let a;return(r!=null&&r.query||r!=null&&r.params||t!=null&&t.params||t!=null&&t.query)&&(a={...r==null?void 0:r.params,...r==null?void 0:r.query,...t==null?void 0:t.params,...t==null?void 0:t.query}),{...r,...t,query:a,params:a,headers:n}}function jwe(e,t,r){if(!t)return new r(e);const i=new r(t);if(e)for(const[n,a]of Symbol.iterator in e||Array.isArray(e)?e:new r(e))i.set(n,a);return i}async function u3(e,t){if(t)if(Array.isArray(t))for(const r of t)await r(e);else await t(e)}const Wwe=new Set([408,409,425,429,500,502,503,504]),qwe=new Set([101,204,205,304]);function hoe(e={}){const{fetch:t=globalThis.fetch,Headers:r=globalThis.Headers,AbortController:i=globalThis.AbortController}=e;async function n(s){const l=s.error&&s.error.name==="AbortError"&&!s.options.timeout||!1;if(s.options.retry!==!1&&!l){let c;typeof s.options.retry=="number"?c=s.options.retry:c=xU(s.options.method)?0:1;const h=s.response&&s.response.status||500;if(c>0&&(Array.isArray(s.options.retryStatusCodes)?s.options.retryStatusCodes.includes(h):Wwe.has(h))){const d=typeof s.options.retryDelay=="function"?s.options.retryDelay(s):s.options.retryDelay||0;return d>0&&await new Promise(f=>setTimeout(f,d)),a(s.request,{...s.options,retry:c-1})}}const u=Nwe(s);throw Error.captureStackTrace&&Error.captureStackTrace(u,a),u}const a=async function(l,u={}){const c={request:l,options:Gwe(l,u,e.defaults,r),response:void 0,error:void 0};c.options.method&&(c.options.method=c.options.method.toUpperCase()),c.options.onRequest&&await u3(c,c.options.onRequest),typeof c.request=="string"&&(c.options.baseURL&&(c.request=Iwe(c.request,c.options.baseURL)),c.options.query&&(c.request=ooe(c.request,c.options.query),delete c.options.query),"query"in c.options&&delete c.options.query,"params"in c.options&&delete c.options.params),c.options.body&&xU(c.options.method)&&(Fwe(c.options.body)?(c.options.body=typeof c.options.body=="string"?c.options.body:JSON.stringify(c.options.body),c.options.headers=new r(c.options.headers||{}),c.options.headers.has("content-type")||c.options.headers.set("content-type","application/json"),c.options.headers.has("accept")||c.options.headers.set("accept","application/json")):("pipeTo"in c.options.body&&typeof c.options.body.pipeTo=="function"||typeof c.options.body.pipe=="function")&&("duplex"in c.options||(c.options.duplex="half")));let h;if(!c.options.signal&&c.options.timeout){const f=new i;h=setTimeout(()=>{const p=new Error("[TimeoutError]: The operation was aborted due to timeout");p.name="TimeoutError",p.code=23,f.abort(p)},c.options.timeout),c.options.signal=f.signal}try{c.response=await t(c.request,c.options)}catch(f){return c.error=f,c.options.onRequestError&&await u3(c,c.options.onRequestError),await n(c)}finally{h&&clearTimeout(h)}if((c.response.body||c.response._bodyInit)&&!qwe.has(c.response.status)&&c.options.method!=="HEAD"){const f=(c.options.parseResponse?"json":c.options.responseType)||Uwe(c.response.headers.get("content-type")||"");switch(f){case"json":{const p=await c.response.text(),v=c.options.parseResponse||d8;c.response._data=v(p);break}case"stream":{c.response._data=c.response.body||c.response._bodyInit;break}default:c.response._data=await c.response[f]()}}return c.options.onResponse&&await u3(c,c.options.onResponse),!c.options.ignoreResponseError&&c.response.status>=400&&c.response.status<600?(c.options.onResponseError&&await u3(c,c.options.onResponseError),await n(c)):c.response},o=async function(l,u){return(await a(l,u))._data};return o.raw=a,o.native=(...s)=>t(...s),o.create=(s={},l={})=>hoe({...e,...l,defaults:{...e.defaults,...l.defaults,...s}}),o}const p8=function(){if(typeof globalThis<"u")return globalThis;if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")}(),Ywe=p8.fetch?(...e)=>p8.fetch(...e):()=>Promise.reject(new Error("[ofetch] global.fetch is not supported!")),Xwe=p8.Headers,Zwe=p8.AbortController,Qwe=hoe({fetch:Ywe,Headers:Xwe,AbortController:Zwe}),Kwe=Qwe,Jwe=()=>{var e;return((e=window==null?void 0:window.__NUXT__)==null?void 0:e.config)||{}},v8=Jwe().app,$we=()=>v8.baseURL,e4e=()=>v8.buildAssetsDir,LB=(...e)=>loe(doe(),e4e(),...e),doe=(...e)=>{const t=v8.cdnURL||v8.baseURL;return e.length?loe(t,...e):t};globalThis.__buildAssetsURL=LB,globalThis.__publicAssetsURL=doe;globalThis.$fetch||(globalThis.$fetch=Kwe.create({baseURL:$we()}));function gI(e,t={},r){for(const i in e){const n=e[i],a=r?`${r}:${i}`:i;typeof n=="object"&&n!==null?gI(n,t,a):typeof n=="function"&&(t[a]=n)}return t}const t4e={run:e=>e()},r4e=()=>t4e,foe=typeof console.createTask<"u"?console.createTask:r4e;function i4e(e,t){const r=t.shift(),i=foe(r);return e.reduce((n,a)=>n.then(()=>i.run(()=>a(...t))),Promise.resolve())}function n4e(e,t){const r=t.shift(),i=foe(r);return Promise.all(e.map(n=>i.run(()=>n(...t))))}function sE(e,t){for(const r of[...e])r(t)}class a4e{constructor(){this._hooks={},this._before=void 0,this._after=void 0,this._deprecatedMessages=void 0,this._deprecatedHooks={},this.hook=this.hook.bind(this),this.callHook=this.callHook.bind(this),this.callHookWith=this.callHookWith.bind(this)}hook(t,r,i={}){if(!t||typeof r!="function")return()=>{};const n=t;let a;for(;this._deprecatedHooks[t];)a=this._deprecatedHooks[t],t=a.to;if(a&&!i.allowDeprecated){let o=a.message;o||(o=`${n} hook has been deprecated`+(a.to?`, please use ${a.to}`:"")),this._deprecatedMessages||(this._deprecatedMessages=new Set),this._deprecatedMessages.has(o)||(console.warn(o),this._deprecatedMessages.add(o))}if(!r.name)try{Object.defineProperty(r,"name",{get:()=>"_"+t.replace(/\W+/g,"_")+"_hook_cb",configurable:!0})}catch{}return this._hooks[t]=this._hooks[t]||[],this._hooks[t].push(r),()=>{r&&(this.removeHook(t,r),r=void 0)}}hookOnce(t,r){let i,n=(...a)=>(typeof i=="function"&&i(),i=void 0,n=void 0,r(...a));return i=this.hook(t,n),i}removeHook(t,r){if(this._hooks[t]){const i=this._hooks[t].indexOf(r);i!==-1&&this._hooks[t].splice(i,1),this._hooks[t].length===0&&delete this._hooks[t]}}deprecateHook(t,r){this._deprecatedHooks[t]=typeof r=="string"?{to:r}:r;const i=this._hooks[t]||[];delete this._hooks[t];for(const n of i)this.hook(t,n)}deprecateHooks(t){Object.assign(this._deprecatedHooks,t);for(const r in t)this.deprecateHook(r,t[r])}addHooks(t){const r=gI(t),i=Object.keys(r).map(n=>this.hook(n,r[n]));return()=>{for(const n of i.splice(0,i.length))n()}}removeHooks(t){const r=gI(t);for(const i in r)this.removeHook(i,r[i])}removeAllHooks(){for(const t in this._hooks)delete this._hooks[t]}callHook(t,...r){return r.unshift(t),this.callHookWith(i4e,t,...r)}callHookParallel(t,...r){return r.unshift(t),this.callHookWith(n4e,t,...r)}callHookWith(t,r,...i){const n=this._before||this._after?{name:r,args:i,context:{}}:void 0;this._before&&sE(this._before,n);const a=t(r in this._hooks?[...this._hooks[r]]:[],i);return a instanceof Promise?a.finally(()=>{this._after&&n&&sE(this._after,n)}):(this._after&&n&&sE(this._after,n),a)}beforeEach(t){return this._before=this._before||[],this._before.push(t),()=>{if(this._before!==void 0){const r=this._before.indexOf(t);r!==-1&&this._before.splice(r,1)}}}afterEach(t){return this._after=this._after||[],this._after.push(t),()=>{if(this._after!==void 0){const r=this._after.indexOf(t);r!==-1&&this._after.splice(r,1)}}}}function poe(){return new a4e}function o4e(e={}){let t,r=!1;const i=o=>{if(t&&t!==o)throw new Error("Context conflict")};let n;if(e.asyncContext){const o=e.AsyncLocalStorage||globalThis.AsyncLocalStorage;o?n=new o:console.warn("[unctx] `AsyncLocalStorage` is not provided.")}const a=()=>{if(n&&t===void 0){const o=n.getStore();if(o!==void 0)return o}return t};return{use:()=>{const o=a();if(o===void 0)throw new Error("Context is not available");return o},tryUse:()=>a(),set:(o,s)=>{s||i(o),t=o,r=!0},unset:()=>{t=void 0,r=!1},call:(o,s)=>{i(o),t=o;try{return n?n.run(o,s):s()}finally{r||(t=void 0)}},async callAsync(o,s){t=o;const l=()=>{t=o},u=()=>t===o?l:void 0;yI.add(u);try{const c=n?n.run(o,s):s();return r||(t=void 0),await c}finally{yI.delete(u)}}}}function s4e(e={}){const t={};return{get(r,i={}){return t[r]||(t[r]=o4e({...e,...i})),t[r],t[r]}}}const m8=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof global<"u"?global:typeof window<"u"?window:{},bU="__unctx__",l4e=m8[bU]||(m8[bU]=s4e()),u4e=(e,t={})=>l4e.get(e,t),wU="__unctx_async_handlers__",yI=m8[wU]||(m8[wU]=new Set);function voe(e){const t=[];for(const n of yI){const a=n();a&&t.push(a)}const r=()=>{for(const n of t)n()};let i=e();return i&&typeof i=="object"&&"catch"in i&&(i=i.catch(n=>{throw r(),n})),[i,r]}const LPt={componentName:"NuxtLink",prefetch:!0,prefetchOn:{visibility:!0}},c4e=null,h4e="#__nuxt",moe="nuxt-app",_U=36e5,d4e="vite:preloadError";function goe(e=moe){return u4e(e,{asyncContext:!1})}const f4e="__nuxt_plugin";function p4e(e){var n;let t=0;const r={_id:e.id||moe||"nuxt-app",_scope:X2e(),provide:void 0,globalName:"nuxt",versions:{get nuxt(){return"3.14.1592"},get vue(){return r.vueApp.version}},payload:Vg({...((n=e.ssrContext)==null?void 0:n.payload)||{},data:Vg({}),state:lp({}),once:new Set,_errors:Vg({})}),static:{data:{}},runWithContext(a){return r._scope.active&&!Une()?r._scope.run(()=>AU(r,a)):AU(r,a)},isHydrating:!0,deferHydration(){if(!r.isHydrating)return()=>{};t++;let a=!1;return()=>{if(!a&&(a=!0,t--,t===0))return r.isHydrating=!1,r.callHook("app:suspense:resolve")}},_asyncDataPromises:{},_asyncData:Vg({}),_payloadRevivers:{},...e};{const a=window.__NUXT__;if(a)for(const o in a)switch(o){case"data":case"state":case"_errors":Object.assign(r.payload[o],a[o]);break;default:r.payload[o]=a[o]}}r.hooks=poe(),r.hook=r.hooks.hook,r.callHook=r.hooks.callHook,r.provide=(a,o)=>{const s="$"+a;c3(r,s,o),c3(r.vueApp.config.globalProperties,s,o)},c3(r.vueApp,"$nuxt",r),c3(r.vueApp.config.globalProperties,"$nuxt",r);{window.addEventListener(d4e,o=>{r.callHook("app:chunkError",{error:o.payload}),(r.isHydrating||o.payload.message.includes("Unable to preload CSS"))&&o.preventDefault()}),window.useNuxtApp=window.useNuxtApp||Ea;const a=r.hook("app:error",(...o)=>{console.error("[nuxt] error caught during app initialization",...o)});r.hook("app:mounted",a)}const i=r.payload.config;return r.provide("config",i),r}function v4e(e,t){t.hooks&&e.hooks.addHooks(t.hooks)}async function m4e(e,t){if(typeof t=="function"){const{provide:r}=await e.runWithContext(()=>t(e))||{};if(r&&typeof r=="object")for(const i in r)e.provide(i,r[i])}}async function g4e(e,t){const r=[],i=[],n=[],a=[];let o=0;async function s(l){var c;const u=((c=l.dependsOn)==null?void 0:c.filter(h=>t.some(d=>d._name===h)&&!r.includes(h)))??[];if(u.length>0)i.push([new Set(u),l]);else{const h=m4e(e,l).then(async()=>{l._name&&(r.push(l._name),await Promise.all(i.map(async([d,f])=>{d.has(l._name)&&(d.delete(l._name),d.size===0&&(o++,await s(f)))})))});l.parallel?n.push(h.catch(d=>a.push(d))):await h}}for(const l of t)v4e(e,l);for(const l of t)await s(l);if(await Promise.all(n),o)for(let l=0;l<o;l++)await Promise.all(n);if(a.length)throw a[0]}function sh(e){if(typeof e=="function")return e;const t=e._name||e.name;return delete e.name,Object.assign(e.setup||(()=>{}),e,{[f4e]:!0,_name:t})}function AU(e,t,r){const i=()=>t();return goe(e._id).set(e),e.vueApp.runWithContext(i)}function y4e(e){var r;let t;return Sae()&&(t=(r=TB())==null?void 0:r.appContext.app.$nuxt),t=t||goe(e).tryUse(),t||null}function Ea(e){const t=y4e(e);if(!t)throw new Error("[nuxt] instance unavailable");return t}function O1(e){return Ea().$config}function c3(e,t,r){Object.defineProperty(e,t,{get:()=>r})}function x4e(e,t){return{ctx:{table:e},matchAll:r=>xoe(r,e)}}function yoe(e){const t={};for(const r in e)t[r]=r==="dynamic"?new Map(Object.entries(e[r]).map(([i,n])=>[i,yoe(n)])):new Map(Object.entries(e[r]));return t}function b4e(e){return x4e(yoe(e))}function xoe(e,t,r){e.endsWith("/")&&(e=e.slice(0,-1)||"/");const i=[];for(const[a,o]of SU(t.wildcard))(e===a||e.startsWith(a+"/"))&&i.push(o);for(const[a,o]of SU(t.dynamic))if(e.startsWith(a+"/")){const s="/"+e.slice(a.length).split("/").splice(2).join("/");i.push(...xoe(s,o))}const n=t.static.get(e);return n&&i.push(n),i.filter(Boolean)}function SU(e){return[...e.entries()].sort((t,r)=>t[0].length-r[0].length)}function lE(e){if(e===null||typeof e!="object")return!1;const t=Object.getPrototypeOf(e);return t!==null&&t!==Object.prototype&&Object.getPrototypeOf(t)!==null||Symbol.iterator in e?!1:Symbol.toStringTag in e?Object.prototype.toString.call(e)==="[object Module]":!0}function xI(e,t,r=".",i){if(!lE(t))return xI(e,{},r,i);const n=Object.assign({},t);for(const a in e){if(a==="__proto__"||a==="constructor")continue;const o=e[a];o!=null&&(i&&i(n,a,o,r)||(Array.isArray(o)&&Array.isArray(n[a])?n[a]=[...o,...n[a]]:lE(o)&&lE(n[a])?n[a]=xI(o,n[a],(r?`${r}.`:"")+a.toString(),i):n[a]=o))}return n}function w4e(e){return(...t)=>t.reduce((r,i)=>xI(r,i,"",e),{})}const _4e=w4e();function A4e(e,t){try{return t in e}catch{return!1}}var S4e=Object.defineProperty,C4e=(e,t,r)=>t in e?S4e(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,b0=(e,t,r)=>(C4e(e,typeof t!="symbol"?t+"":t,r),r);class bI extends Error{constructor(t,r={}){super(t,r),b0(this,"statusCode",500),b0(this,"fatal",!1),b0(this,"unhandled",!1),b0(this,"statusMessage"),b0(this,"data"),b0(this,"cause"),r.cause&&!this.cause&&(this.cause=r.cause)}toJSON(){const t={message:this.message,statusCode:wI(this.statusCode,500)};return this.statusMessage&&(t.statusMessage=boe(this.statusMessage)),this.data!==void 0&&(t.data=this.data),t}}b0(bI,"__h3_error__",!0);function E4e(e){if(typeof e=="string")return new bI(e);if(M4e(e))return e;const t=new bI(e.message??e.statusMessage??"",{cause:e.cause||e});if(A4e(e,"stack"))try{Object.defineProperty(t,"stack",{get(){return e.stack}})}catch{try{t.stack=e.stack}catch{}}if(e.data&&(t.data=e.data),e.statusCode?t.statusCode=wI(e.statusCode,t.statusCode):e.status&&(t.statusCode=wI(e.status,t.statusCode)),e.statusMessage?t.statusMessage=e.statusMessage:e.statusText&&(t.statusMessage=e.statusText),t.statusMessage){const r=t.statusMessage;boe(t.statusMessage)!==r&&console.warn("[h3] Please prefer using `message` for longer error messages instead of `statusMessage`. In the future, `statusMessage` will be sanitized by default.")}return e.fatal!==void 0&&(t.fatal=e.fatal),e.unhandled!==void 0&&(t.unhandled=e.unhandled),t}function M4e(e){var t;return((t=e==null?void 0:e.constructor)==null?void 0:t.__h3_error__)===!0}const T4e=/[^\u0009\u0020-\u007E]/g;function boe(e=""){return e.replace(T4e,"")}function wI(e,t=200){return!e||(typeof e=="string"&&(e=Number.parseInt(e,10)),e<100||e>999)?t:e}const woe=Symbol("route"),Pv=()=>{var e;return(e=Ea())==null?void 0:e.$router},kB=()=>Sae()?a1(woe,Ea()._route):Ea()._route;const P4e=()=>{try{if(Ea()._processingMiddleware)return!0}catch{return!1}return!1},D4e=(e,t)=>{e||(e="/");const r=typeof e=="string"?e:"path"in e?I4e(e):Pv().resolve(e).href;if(t!=null&&t.open){const{target:l="_blank",windowFeatures:u={}}=t.open,c=Object.entries(u).filter(([h,d])=>d!==void 0).map(([h,d])=>`${h.toLowerCase()}=${d}`).join(", ");return open(r,l,c),Promise.resolve()}const i=my(r,{acceptRelative:!0}),n=(t==null?void 0:t.external)||i;if(n){if(!(t!=null&&t.external))throw new Error("Navigating to an external URL is not allowed by default. Use `navigateTo(url, { external: true })`.");const{protocol:l}=new URL(r,window.location.href);if(l&&Pwe(l))throw new Error(`Cannot navigate to a URL with '${l}' protocol.`)}const a=P4e();if(!n&&a)return e;const o=Pv(),s=Ea();return n?(s._scope.stop(),t!=null&&t.replace?location.replace(r):location.href=r,a?s.isHydrating?new Promise(()=>{}):!1:Promise.resolve()):t!=null&&t.replace?o.replace(e):o.push(e)};function I4e(e){return ooe(e.path||"",e.query||{})+(e.hash||"")}const _oe="__nuxt_error",RB=()=>wxe(Ea().payload,"error"),L4e=e=>{const t=OB(e);try{const r=Ea(),i=RB();r.hooks.callHook("app:error",t),i.value=i.value||t}catch{throw t}return t},k4e=async(e={})=>{const t=Ea(),r=RB();t.callHook("app:error:cleared",e),e.redirect&&await Pv().replace(e.redirect),r.value=c4e},R4e=e=>!!e&&typeof e=="object"&&_oe in e,OB=e=>{const t=E4e(e);return Object.defineProperty(t,_oe,{value:!0,configurable:!1,writable:!1}),t};function CU(e){const t=B4e(e),r=new ArrayBuffer(t.length),i=new DataView(r);for(let n=0;n<r.byteLength;n++)i.setUint8(n,t.charCodeAt(n));return r}const O4e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";function B4e(e){e.length%4===0&&(e=e.replace(/==?$/,""));let t="",r=0,i=0;for(let n=0;n<e.length;n++)r<<=6,r|=O4e.indexOf(e[n]),i+=6,i===24&&(t+=String.fromCharCode((r&16711680)>>16),t+=String.fromCharCode((r&65280)>>8),t+=String.fromCharCode(r&255),r=i=0);return i===12?(r>>=4,t+=String.fromCharCode(r)):i===18&&(r>>=2,t+=String.fromCharCode((r&65280)>>8),t+=String.fromCharCode(r&255)),t}const N4e=-1,V4e=-2,F4e=-3,z4e=-4,H4e=-5,U4e=-6;function G4e(e,t){return j4e(JSON.parse(e),t)}function j4e(e,t){if(typeof e=="number")return n(e,!0);if(!Array.isArray(e)||e.length===0)throw new Error("Invalid input");const r=e,i=Array(r.length);function n(a,o=!1){if(a===N4e)return;if(a===F4e)return NaN;if(a===z4e)return 1/0;if(a===H4e)return-1/0;if(a===U4e)return-0;if(o)throw new Error("Invalid input");if(a in i)return i[a];const s=r[a];if(!s||typeof s!="object")i[a]=s;else if(Array.isArray(s))if(typeof s[0]=="string"){const l=s[0],u=t==null?void 0:t[l];if(u)return i[a]=u(n(s[1]));switch(l){case"Date":i[a]=new Date(s[1]);break;case"Set":const c=new Set;i[a]=c;for(let f=1;f<s.length;f+=1)c.add(n(s[f]));break;case"Map":const h=new Map;i[a]=h;for(let f=1;f<s.length;f+=2)h.set(n(s[f]),n(s[f+1]));break;case"RegExp":i[a]=new RegExp(s[1],s[2]);break;case"Object":i[a]=Object(s[1]);break;case"BigInt":i[a]=BigInt(s[1]);break;case"null":const d=Object.create(null);i[a]=d;for(let f=1;f<s.length;f+=2)d[s[f]]=n(s[f+1]);break;case"Int8Array":case"Uint8Array":case"Uint8ClampedArray":case"Int16Array":case"Uint16Array":case"Int32Array":case"Uint32Array":case"Float32Array":case"Float64Array":case"BigInt64Array":case"BigUint64Array":{const f=globalThis[l],p=s[1],v=CU(p),m=new f(v);i[a]=m;break}case"ArrayBuffer":{const f=s[1],p=CU(f);i[a]=p;break}default:throw new Error(`Unknown type ${l}`)}}else{const l=new Array(s.length);i[a]=l;for(let u=0;u<s.length;u+=1){const c=s[u];c!==V4e&&(l[u]=n(c))}}else{const l={};i[a]=l;for(const u in s){const c=s[u];l[u]=n(c)}}return i[a]}return n(0)}const W4e=new Set(["title","titleTemplate","script","style","noscript"]),iA=new Set(["base","meta","link","style","script","noscript"]),q4e=new Set(["title","titleTemplate","templateParams","base","htmlAttrs","bodyAttrs","meta","link","style","script","noscript"]),Y4e=new Set(["base","title","titleTemplate","bodyAttrs","htmlAttrs","templateParams"]),Aoe=new Set(["tagPosition","tagPriority","tagDuplicateStrategy","children","innerHTML","textContent","processTemplateParams"]),X4e=typeof window<"u";function g8(e){let t=9;for(let r=0;r<e.length;)t=Math.imul(t^e.charCodeAt(r++),9**9);return((t^t>>>9)+65536).toString(16).substring(1,8).toLowerCase()}function _I(e){if(e._h)return e._h;if(e._d)return g8(e._d);let t=`${e.tag}:${e.textContent||e.innerHTML||""}:`;for(const r in e.props)t+=`${r}:${String(e.props[r])},`;return g8(t)}function Z4e(e,t){return e instanceof Promise?e.then(t):t(e)}function AI(e,t,r,i){const n=i||Coe(typeof t=="object"&&typeof t!="function"&&!(t instanceof Promise)?{...t}:{[e==="script"||e==="noscript"||e==="style"?"innerHTML":"textContent"]:t},e==="templateParams"||e==="titleTemplate");if(n instanceof Promise)return n.then(o=>AI(e,t,r,o));const a={tag:e,props:n};for(const o of Aoe){const s=a.props[o]!==void 0?a.props[o]:r[o];s!==void 0&&((!(o==="innerHTML"||o==="textContent"||o==="children")||W4e.has(a.tag))&&(a[o==="children"?"innerHTML":o]=s),delete a.props[o])}return a.props.body&&(a.tagPosition="bodyClose",delete a.props.body),a.tag==="script"&&typeof a.innerHTML=="object"&&(a.innerHTML=JSON.stringify(a.innerHTML),a.props.type=a.props.type||"application/json"),Array.isArray(a.props.content)?a.props.content.map(o=>({...a,props:{...a.props,content:o}})):a}function Q4e(e,t){var i;const r=e==="class"?" ":";";return t&&typeof t=="object"&&!Array.isArray(t)&&(t=Object.entries(t).filter(([,n])=>n).map(([n,a])=>e==="style"?`${n}:${a}`:n)),(i=String(Array.isArray(t)?t.join(r):t))==null?void 0:i.split(r).filter(n=>!!n.trim()).join(r)}function Soe(e,t,r,i){for(let n=i;n<r.length;n+=1){const a=r[n];if(a==="class"||a==="style"){e[a]=Q4e(a,e[a]);continue}if(e[a]instanceof Promise)return e[a].then(o=>(e[a]=o,Soe(e,t,r,n)));if(!t&&!Aoe.has(a)){const o=String(e[a]),s=a.startsWith("data-");o==="true"||o===""?e[a]=s?"true":!0:e[a]||(s&&o==="false"?e[a]="false":delete e[a])}}}function Coe(e,t=!1){const r=Soe(e,t,Object.keys(e),0);return r instanceof Promise?r.then(()=>e):e}const K4e=10;function Eoe(e,t,r){for(let i=r;i<t.length;i+=1){const n=t[i];if(n instanceof Promise)return n.then(a=>(t[i]=a,Eoe(e,t,i)));Array.isArray(n)?e.push(...n):e.push(n)}}function J4e(e){const t=[],r=e.resolvedInput;for(const n in r){if(!Object.prototype.hasOwnProperty.call(r,n))continue;const a=r[n];if(!(a===void 0||!q4e.has(n))){if(Array.isArray(a)){for(const o of a)t.push(AI(n,o,e));continue}t.push(AI(n,a,e))}}if(t.length===0)return[];const i=[];return Z4e(Eoe(i,t,0),()=>i.map((n,a)=>(n._e=e._i,e.mode&&(n._m=e.mode),n._p=(e._i<<K4e)+a,n)))}const EU=new Set(["onload","onerror","onabort","onprogress","onloadstart"]),MU={base:-10,title:10},TU={critical:-80,high:-10,low:20};function y8(e){const t=e.tagPriority;if(typeof t=="number")return t;let r=100;return e.tag==="meta"?e.props["http-equiv"]==="content-security-policy"?r=-30:e.props.charset?r=-20:e.props.name==="viewport"&&(r=-15):e.tag==="link"&&e.props.rel==="preconnect"?r=20:e.tag in MU&&(r=MU[e.tag]),t&&t in TU?r+TU[t]:r}const $4e=[{prefix:"before:",offset:-1},{prefix:"after:",offset:1}],e3e=["name","property","http-equiv"];function Moe(e){const{props:t,tag:r}=e;if(Y4e.has(r))return r;if(r==="link"&&t.rel==="canonical")return"canonical";if(t.charset)return"charset";if(t.id)return`${r}:id:${t.id}`;for(const i of e3e)if(t[i]!==void 0)return`${r}:${i}:${t[i]}`;return!1}const wf="%separator";function t3e(e,t,r=!1){var n;let i;if(t==="s"||t==="pageTitle")i=e.pageTitle;else if(t.includes(".")){const a=t.indexOf(".");i=(n=e[t.substring(0,a)])==null?void 0:n[t.substring(a+1)]}else i=e[t];if(i!==void 0)return r?(i||"").replace(/"/g,'\\"'):i||""}const r3e=new RegExp(`${wf}(?:\\s*${wf})*`,"g");function h3(e,t,r,i=!1){if(typeof e!="string"||!e.includes("%"))return e;let n=e;try{n=decodeURI(e)}catch{}const a=n.match(/%\w+(?:\.\w+)?/g);if(!a)return e;const o=e.includes(wf);return e=e.replace(/%\w+(?:\.\w+)?/g,s=>{if(s===wf||!a.includes(s))return s;const l=t3e(t,s.slice(1),i);return l!==void 0?l:s}).trim(),o&&(e.endsWith(wf)&&(e=e.slice(0,-wf.length)),e.startsWith(wf)&&(e=e.slice(wf.length)),e=e.replace(r3e,r).trim()),e}function PU(e,t){return e==null?t||null:typeof e=="function"?e(t):e}async function Toe(e,t={}){const r=t.document||e.resolvedOptions.document;if(!r||!e.dirty)return;const i={shouldRender:!0,tags:[]};if(await e.hooks.callHook("dom:beforeRender",i),!!i.shouldRender)return e._domUpdatePromise||(e._domUpdatePromise=new Promise(async n=>{var h;const a=(await e.resolveTags()).map(d=>({tag:d,id:iA.has(d.tag)?_I(d):d.tag,shouldRender:!0}));let o=e._dom;if(!o){o={elMap:{htmlAttrs:r.documentElement,bodyAttrs:r.body}};const d=new Set;for(const f of["body","head"]){const p=(h=r[f])==null?void 0:h.children;for(const v of p){const m=v.tagName.toLowerCase();if(!iA.has(m))continue;const g={tag:m,props:await Coe(v.getAttributeNames().reduce((_,w)=>({..._,[w]:v.getAttribute(w)}),{})),innerHTML:v.innerHTML},y=Moe(g);let x=y,b=1;for(;x&&d.has(x);)x=`${y}:${b++}`;x&&(g._d=x,d.add(x)),o.elMap[v.getAttribute("data-hid")||_I(g)]=v}}}o.pendingSideEffects={...o.sideEffects},o.sideEffects={};function s(d,f,p){const v=`${d}:${f}`;o.sideEffects[v]=p,delete o.pendingSideEffects[v]}function l({id:d,$el:f,tag:p}){const v=p.tag.endsWith("Attrs");if(o.elMap[d]=f,v||(p.textContent&&p.textContent!==f.textContent&&(f.textContent=p.textContent),p.innerHTML&&p.innerHTML!==f.innerHTML&&(f.innerHTML=p.innerHTML),s(d,"el",()=>{var m;(m=o.elMap[d])==null||m.remove(),delete o.elMap[d]})),p._eventHandlers)for(const m in p._eventHandlers)Object.prototype.hasOwnProperty.call(p._eventHandlers,m)&&f.getAttribute(`data-${m}`)!==""&&((p.tag==="bodyAttrs"?r.defaultView:f).addEventListener(m.substring(2),p._eventHandlers[m].bind(f)),f.setAttribute(`data-${m}`,""));for(const m in p.props){if(!Object.prototype.hasOwnProperty.call(p.props,m))continue;const g=p.props[m],y=`attr:${m}`;if(m==="class"){if(!g)continue;for(const x of g.split(" "))v&&s(d,`${y}:${x}`,()=>f.classList.remove(x)),!f.classList.contains(x)&&f.classList.add(x)}else if(m==="style"){if(!g)continue;for(const x of g.split(";")){const b=x.indexOf(":"),_=x.substring(0,b).trim(),w=x.substring(b+1).trim();s(d,`${y}:${_}`,()=>{f.style.removeProperty(_)}),f.style.setProperty(_,w)}}else f.getAttribute(m)!==g&&f.setAttribute(m,g===!0?"":String(g)),v&&s(d,y,()=>f.removeAttribute(m))}}const u=[],c={bodyClose:void 0,bodyOpen:void 0,head:void 0};for(const d of a){const{tag:f,shouldRender:p,id:v}=d;if(p){if(f.tag==="title"){r.title=f.textContent;continue}d.$el=d.$el||o.elMap[v],d.$el?l(d):iA.has(f.tag)&&u.push(d)}}for(const d of u){const f=d.tag.tagPosition||"head";d.$el=r.createElement(d.tag.tag),l(d),c[f]=c[f]||r.createDocumentFragment(),c[f].appendChild(d.$el)}for(const d of a)await e.hooks.callHook("dom:renderTag",d,r,s);c.head&&r.head.appendChild(c.head),c.bodyOpen&&r.body.insertBefore(c.bodyOpen,r.body.firstChild),c.bodyClose&&r.body.appendChild(c.bodyClose);for(const d in o.pendingSideEffects)o.pendingSideEffects[d]();e._dom=o,await e.hooks.callHook("dom:rendered",{renders:a}),n()}).finally(()=>{e._domUpdatePromise=void 0,e.dirty=!1})),e._domUpdatePromise}function i3e(e,t={}){const r=t.delayFn||(i=>setTimeout(i,10));return e._domDebouncedUpdatePromise=e._domDebouncedUpdatePromise||new Promise(i=>r(()=>Toe(e,t).then(()=>{delete e._domDebouncedUpdatePromise,i()})))}function n3e(e){return t=>{var i,n;const r=((n=(i=t.resolvedOptions.document)==null?void 0:i.head.querySelector('script[id="unhead:payload"]'))==null?void 0:n.innerHTML)||!1;return r&&t.push(JSON.parse(r)),{mode:"client",hooks:{"entries:updated":a=>{i3e(a,e)}}}}}const a3e=new Set(["templateParams","htmlAttrs","bodyAttrs"]),o3e={hooks:{"tag:normalise":({tag:e})=>{e.props.hid&&(e.key=e.props.hid,delete e.props.hid),e.props.vmid&&(e.key=e.props.vmid,delete e.props.vmid),e.props.key&&(e.key=e.props.key,delete e.props.key);const t=Moe(e);t&&!t.startsWith("meta:og:")&&!t.startsWith("meta:twitter:")&&delete e.key;const r=t||(e.key?`${e.tag}:${e.key}`:!1);r&&(e._d=r)},"tags:resolve":e=>{const t=Object.create(null);for(const i of e.tags){const n=(i.key?`${i.tag}:${i.key}`:i._d)||_I(i),a=t[n];if(a){let s=i==null?void 0:i.tagDuplicateStrategy;if(!s&&a3e.has(i.tag)&&(s="merge"),s==="merge"){const l=a.props;l.style&&i.props.style&&(l.style[l.style.length-1]!==";"&&(l.style+=";"),i.props.style=`${l.style} ${i.props.style}`),l.class&&i.props.class?i.props.class=`${l.class} ${i.props.class}`:l.class&&(i.props.class=l.class),t[n].props={...l,...i.props};continue}else if(i._e===a._e){a._duped=a._duped||[],i._d=`${a._d}:${a._duped.length+1}`,a._duped.push(i);continue}else if(y8(i)>y8(a))continue}if(!(i.innerHTML||i.textContent||Object.keys(i.props).length!==0)&&iA.has(i.tag)){delete t[n];continue}t[n]=i}const r=[];for(const i in t){const n=t[i],a=n._duped;r.push(n),a&&(delete n._duped,r.push(...a))}e.tags=r,e.tags=e.tags.filter(i=>!(i.tag==="meta"&&(i.props.name||i.props.property)&&!i.props.content))}}},s3e=new Set(["script","link","bodyAttrs"]),l3e=e=>({hooks:{"tags:resolve":t=>{for(const r of t.tags){if(!s3e.has(r.tag))continue;const i=r.props;for(const n in i){if(n[0]!=="o"||n[1]!=="n"||!Object.prototype.hasOwnProperty.call(i,n))continue;const a=i[n];typeof a=="function"&&(e.ssr&&EU.has(n)?i[n]=`this.dataset.${n}fired = true`:delete i[n],r._eventHandlers=r._eventHandlers||{},r._eventHandlers[n]=a)}e.ssr&&r._eventHandlers&&(r.props.src||r.props.href)&&(r.key=r.key||g8(r.props.src||r.props.href))}},"dom:renderTag":({$el:t,tag:r})=>{var n,a;const i=t==null?void 0:t.dataset;if(i)for(const o in i){if(!o.endsWith("fired"))continue;const s=o.slice(0,-5);EU.has(s)&&((a=(n=r._eventHandlers)==null?void 0:n[s])==null||a.call(t,new Event(s.substring(2))))}}}}),u3e=new Set(["link","style","script","noscript"]),c3e={hooks:{"tag:normalise":({tag:e})=>{e.key&&u3e.has(e.tag)&&(e.props["data-hid"]=e._h=g8(e.key))}}},h3e={mode:"server",hooks:{"tags:beforeResolve":e=>{const t={};let r=!1;for(const i of e.tags)i._m!=="server"||i.tag!=="titleTemplate"&&i.tag!=="templateParams"&&i.tag!=="title"||(t[i.tag]=i.tag==="title"||i.tag==="titleTemplate"?i.textContent:i.props,r=!0);r&&e.tags.push({tag:"script",innerHTML:JSON.stringify(t),props:{id:"unhead:payload",type:"application/json"}})}}},d3e={hooks:{"tags:resolve":e=>{var t;for(const r of e.tags)if(typeof r.tagPriority=="string")for(const{prefix:i,offset:n}of $4e){if(!r.tagPriority.startsWith(i))continue;const a=r.tagPriority.substring(i.length),o=(t=e.tags.find(s=>s._d===a))==null?void 0:t._p;if(o!==void 0){r._p=o+n;break}}e.tags.sort((r,i)=>{const n=y8(r),a=y8(i);return n<a?-1:n>a?1:r._p-i._p})}}},f3e={meta:"content",link:"href",htmlAttrs:"lang"},p3e=["innerHTML","textContent"],v3e=e=>({hooks:{"tags:resolve":t=>{var o;const{tags:r}=t;let i;for(let s=0;s<r.length;s+=1)r[s].tag==="templateParams"&&(i=t.tags.splice(s,1)[0].props,s-=1);const n=i||{},a=n.separator||"|";delete n.separator,n.pageTitle=h3(n.pageTitle||((o=r.find(s=>s.tag==="title"))==null?void 0:o.textContent)||"",n,a);for(const s of r){if(s.processTemplateParams===!1)continue;const l=f3e[s.tag];if(l&&typeof s.props[l]=="string")s.props[l]=h3(s.props[l],n,a);else if(s.processTemplateParams||s.tag==="titleTemplate"||s.tag==="title")for(const u of p3e)typeof s[u]=="string"&&(s[u]=h3(s[u],n,a,s.tag==="script"&&s.props.type.endsWith("json")))}e._templateParams=n,e._separator=a},"tags:afterResolve":({tags:t})=>{let r;for(let i=0;i<t.length;i+=1){const n=t[i];n.tag==="title"&&n.processTemplateParams!==!1&&(r=n)}r!=null&&r.textContent&&(r.textContent=h3(r.textContent,e._templateParams,e._separator))}}}),m3e={hooks:{"tags:resolve":e=>{const{tags:t}=e;let r,i;for(let n=0;n<t.length;n+=1){const a=t[n];a.tag==="title"?r=a:a.tag==="titleTemplate"&&(i=a)}if(i&&r){const n=PU(i.textContent,r.textContent);n!==null?r.textContent=n||r.textContent:e.tags.splice(e.tags.indexOf(r),1)}else if(i){const n=PU(i.textContent);n!==null&&(i.textContent=n,i.tag="title",i=void 0)}i&&e.tags.splice(e.tags.indexOf(i),1)}}},g3e={hooks:{"tags:afterResolve":e=>{for(const t of e.tags)typeof t.innerHTML=="string"&&(t.innerHTML&&(t.props.type==="application/ld+json"||t.props.type==="application/json")?t.innerHTML=t.innerHTML.replace(/</g,"\\u003C"):t.innerHTML=t.innerHTML.replace(new RegExp(`</${t.tag}`,"g"),`<\\/${t.tag}`))}}};let Poe;function y3e(e={}){const t=x3e(e);return t.use(n3e()),Poe=t}function DU(e,t){return!e||e==="server"&&t||e==="client"&&!t}function x3e(e={}){const t=poe();t.addHooks(e.hooks||{}),e.document=e.document||(X4e?document:void 0);const r=!e.document,i=()=>{s.dirty=!0,t.callHook("entries:updated",s)};let n=0,a=[];const o=[],s={plugins:o,dirty:!1,resolvedOptions:e,hooks:t,headEntries(){return a},use(l){const u=typeof l=="function"?l(s):l;(!u.key||!o.some(c=>c.key===u.key))&&(o.push(u),DU(u.mode,r)&&t.addHooks(u.hooks||{}))},push(l,u){u==null||delete u.head;const c={_i:n++,input:l,...u};return DU(c.mode,r)&&(a.push(c),i()),{dispose(){a=a.filter(h=>h._i!==c._i),i()},patch(h){for(const d of a)d._i===c._i&&(d.input=c.input=h);i()}}},async resolveTags(){const l={tags:[],entries:[...a]};await t.callHook("entries:resolve",l);for(const u of l.entries){const c=u.resolvedInput||u.input;if(u.resolvedInput=await(u.transform?u.transform(c):c),u.resolvedInput)for(const h of await J4e(u)){const d={tag:h,entry:u,resolvedOptions:s.resolvedOptions};await t.callHook("tag:normalise",d),l.tags.push(d.tag)}}return await t.callHook("tags:beforeResolve",l),await t.callHook("tags:resolve",l),await t.callHook("tags:afterResolve",l),l.tags},ssr:r};return[o3e,h3e,l3e,c3e,d3e,v3e,m3e,g3e,...(e==null?void 0:e.plugins)||[]].forEach(l=>s.use(l)),s.hooks.callHook("init",s),s}function b3e(){return Poe}const w3e=Qae[0]==="3";function _3e(e){return typeof e=="function"?e():ue(e)}function SI(e){if(e instanceof Promise||e instanceof Date||e instanceof RegExp)return e;const t=_3e(e);if(!e||!t)return t;if(Array.isArray(t))return t.map(r=>SI(r));if(typeof t=="object"){const r={};for(const i in t)if(Object.prototype.hasOwnProperty.call(t,i)){if(i==="titleTemplate"||i[0]==="o"&&i[1]==="n"){r[i]=ue(t[i]);continue}r[i]=SI(t[i])}return r}return t}const A3e={hooks:{"entries:resolve":e=>{for(const t of e.entries)t.resolvedInput=SI(t.input)}}},Doe="usehead";function S3e(e){return{install(r){w3e&&(r.config.globalProperties.$unhead=e,r.config.globalProperties.$head=e,r.provide(Doe,e))}}.install}function C3e(e={}){e.domDelayFn=e.domDelayFn||(r=>gB(()=>setTimeout(()=>r(),0)));const t=y3e(e);return t.use(A3e),t.install=S3e(t),t}const CI=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},EI="__unhead_injection_handler__";function E3e(e){CI[EI]=e}function kPt(){if(EI in CI)return CI[EI]();const e=a1(Doe);return e||b3e()}let nA,aA;function M3e(){return nA=$fetch(LB(`builds/meta/${O1().app.buildId}.json`),{responseType:"json"}),nA.then(e=>{aA=b4e(e.matcher)}).catch(e=>{console.error("[nuxt] Error fetching app manifest.",e)}),nA}function J6(){return nA||M3e()}async function BB(e){if(await J6(),!aA)return console.error("[nuxt] Error creating app manifest matcher.",aA),{};try{return _4e({},...aA.matchAll(e).reverse())}catch(t){return console.error("[nuxt] Error matching route rules.",t),{}}}async function IU(e,t={}){const r=await P3e(e,t),i=Ea(),n=i._payloadCache=i._payloadCache||{};return r in n?n[r]||null:(n[r]=Loe(e).then(a=>a?Ioe(r).then(o=>o||(delete n[r],null)):(n[r]=null,null)),n[r])}const T3e="_payload.json";async function P3e(e,t={}){const r=new URL(e,"http://localhost");if(r.host!=="localhost"||my(r.pathname,{acceptRelative:!0}))throw new Error("Payload URL must not include hostname: "+e);const i=O1(),n=t.hash||(t.fresh?Date.now():i.app.buildId),a=i.app.cdnURL,o=a&&await Loe(e)?a:i.app.baseURL;return K6(o,r.pathname,T3e+(n?`?${n}`:""))}async function Ioe(e){const t=fetch(e).then(r=>r.text().then(koe));try{return await t}catch(r){console.warn("[nuxt] Cannot load payload ",e,r)}return null}async function Loe(e=kB().path){if(e=IB(e),(await J6()).prerendered.includes(e))return!0;const r=await BB(e);return!!r.prerender&&!r.redirect}let Rp=null;async function D3e(){var i;if(Rp)return Rp;const e=document.getElementById("__NUXT_DATA__");if(!e)return{};const t=await koe(e.textContent||""),r=e.dataset.src?await Ioe(e.dataset.src):void 0;return Rp={...t,...r,...window.__NUXT__},(i=Rp.config)!=null&&i.public&&(Rp.config.public=lp(Rp.config.public)),Rp}async function koe(e){return await G4e(e,Ea()._payloadRevivers)}function I3e(e,t){Ea()._payloadRevivers[e]=t}const L3e=[["NuxtError",e=>OB(e)],["EmptyShallowRef",e=>VH(e==="_"?void 0:e==="0n"?BigInt(0):d8(e))],["EmptyRef",e=>Fe(e==="_"?void 0:e==="0n"?BigInt(0):d8(e))],["ShallowRef",e=>VH(e)],["ShallowReactive",e=>Vg(e)],["Ref",e=>Fe(e)],["Reactive",e=>lp(e)]],k3e=sh({name:"nuxt:revive-payload:client",order:-30,async setup(e){let t,r;for(const[i,n]of L3e)I3e(i,n);Object.assign(e.payload,([t,r]=voe(()=>e.runWithContext(D3e)),t=await t,r(),t)),window.__NUXT__=e.payload}}),R3e=[],O3e=sh({name:"nuxt:head",enforce:"pre",setup(e){const t=C3e({plugins:R3e});E3e(()=>Ea().vueApp._context.provides.usehead),e.vueApp.use(t);{let r=!0;const i=async()=>{r=!1,await Toe(t)};t.hooks.hook("dom:beforeRender",n=>{n.shouldRender=!r}),e.hooks.hook("page:start",()=>{r=!0}),e.hooks.hook("page:finish",()=>{e.isHydrating||i()}),e.hooks.hook("app:error",i),e.hooks.hook("app:suspense:resolve",i)}}}),B3e=async e=>{let t,r;const i=([t,r]=voe(()=>BB(e.path)),t=await t,r(),t);if(i.redirect)return my(i.redirect,{acceptRelative:!0})?(window.location.href=i.redirect,!1):i.redirect},N3e=[B3e];function uE(e){typeof e=="object"&&(e=coe({pathname:e.path||"",search:aoe(e.query||{}),hash:e.hash||""}));const t=new URL(e.toString(),window.location.href);return{path:t.pathname,fullPath:e,query:noe(t.search),hash:t.hash,params:{},name:void 0,matched:[],redirectedFrom:void 0,meta:{},href:e}}const V3e=sh({name:"nuxt:router",enforce:"pre",setup(e){const t=Lwe(window.location.pathname,O1().app.baseURL)+window.location.search+window.location.hash,r=[],i={"navigate:before":[],"resolve:before":[],"navigate:after":[],error:[]},n=(h,d)=>(i[h].push(d),()=>i[h].splice(i[h].indexOf(d),1)),a=O1().app.baseURL,o=lp(uE(t));async function s(h,d){try{const f=uE(h);for(const p of i["navigate:before"]){const v=await p(f,o);if(v===!1||v instanceof Error)return;if(typeof v=="string"&&v.length)return s(v,!0)}for(const p of i["resolve:before"])await p(f,o);Object.assign(o,f),window.history[d?"replaceState":"pushState"]({},"",K6(a,f.fullPath)),e.isHydrating||await e.runWithContext(k4e);for(const p of i["navigate:after"])await p(f,o)}catch(f){for(const p of i.error)await p(f)}}const u={currentRoute:_s(()=>o),isReady:()=>Promise.resolve(),options:{},install:()=>Promise.resolve(),push:h=>s(h,!1),replace:h=>s(h,!0),back:()=>window.history.go(-1),go:h=>window.history.go(h),forward:()=>window.history.go(1),beforeResolve:h=>n("resolve:before",h),beforeEach:h=>n("navigate:before",h),afterEach:h=>n("navigate:after",h),onError:h=>n("error",h),resolve:uE,addRoute:(h,d)=>{r.push(d)},getRoutes:()=>r,hasRoute:h=>r.some(d=>d.name===h),removeRoute:h=>{const d=r.findIndex(f=>f.name===h);d!==-1&&r.splice(d,1)}};e.vueApp.component("RouterLink",sr({functional:!0,props:{to:{type:String,required:!0},custom:Boolean,replace:Boolean,activeClass:String,exactActiveClass:String,ariaCurrentValue:String},setup:(h,{slots:d})=>{const f=()=>s(h.to,h.replace);return()=>{var v;const p=u.resolve(h.to);return h.custom?(v=d.default)==null?void 0:v.call(d,{href:h.to,navigate:f,route:p}):Obe("a",{href:h.to,onClick:m=>(m.preventDefault(),f())},d)}}})),window.addEventListener("popstate",h=>{const d=h.target.location;u.replace(d.href.replace(d.origin,""))}),e._route=o,e._middleware=e._middleware||{global:[],named:{}};const c=e.payload.state._layout;return e.hooks.hookOnce("app:created",async()=>{u.beforeEach(async(h,d)=>{h.meta=lp(h.meta||{}),e.isHydrating&&c&&!up(h.meta.layout)&&(h.meta.layout=c),e._processingMiddleware=!0;{const f=new Set([...N3e,...e._middleware.global]);{const p=await e.runWithContext(()=>BB(h.path));if(p.appMiddleware)for(const v in p.appMiddleware){const m=e._middleware.named[v];if(!m)return;p.appMiddleware[v]?f.add(m):f.delete(m)}}for(const p of f){const v=await e.runWithContext(()=>p(h,d));if(v!==!0&&(v||v===!1))return v}}}),u.afterEach(()=>{delete e._processingMiddleware}),await u.replace(t),Rwe(o.fullPath,t)||await e.runWithContext(()=>D4e(o.fullPath))}),{provide:{route:o,router:u}}}}),LU=globalThis.requestIdleCallback||(e=>{const t=Date.now(),r={didTimeout:!1,timeRemaining:()=>Math.max(0,50-(Date.now()-t))};return setTimeout(()=>{e(r)},1)}),RPt=globalThis.cancelIdleCallback||(e=>{clearTimeout(e)}),NB=e=>{const t=Ea();t.isHydrating?t.hooks.hookOnce("app:suspense:resolve",()=>{LU(()=>e())}):LU(()=>e())},F3e=sh({name:"nuxt:payload",setup(e){Pv().beforeResolve(async(t,r)=>{if(t.path===r.path)return;const i=await IU(t.path);i&&Object.assign(e.static.data,i.data)}),NB(()=>{var t;e.hooks.hook("link:prefetch",async r=>{const{hostname:i}=new URL(r,window.location.href);i===window.location.hostname&&await IU(r)}),((t=navigator.connection)==null?void 0:t.effectiveType)!=="slow-2g"&&setTimeout(J6,1e3)})}}),z3e=sh(()=>{const e=Pv();NB(()=>{e.beforeResolve(async()=>{await new Promise(t=>{setTimeout(t,100),requestAnimationFrame(()=>{setTimeout(t,0)})})})})}),H3e=sh(e=>{let t;async function r(){const i=await J6();t&&clearTimeout(t),t=setTimeout(r,_U);try{const n=await $fetch(LB("builds/latest.json")+`?${Date.now()}`);n.id!==i.id&&e.hooks.callHook("app:manifest:update",n)}catch{}}NB(()=>{t=setTimeout(r,_U)})});function U3e(e={}){const t=e.path||window.location.pathname;let r={};try{r=d8(sessionStorage.getItem("nuxt:reload")||"{}")}catch{}if(e.force||(r==null?void 0:r.path)!==t||(r==null?void 0:r.expires)<Date.now()){try{sessionStorage.setItem("nuxt:reload",JSON.stringify({path:t,expires:Date.now()+(e.ttl??1e4)}))}catch{}if(e.persistState)try{sessionStorage.setItem("nuxt:reload:state",JSON.stringify({state:Ea().payload.state}))}catch{}window.location.pathname!==t?window.location.href=t:window.location.reload()}}const G3e=sh({name:"nuxt:chunk-reload",setup(e){const t=Pv(),r=O1(),i=new Set;t.beforeEach(()=>{i.clear()}),e.hook("app:chunkError",({error:a})=>{i.add(a)});function n(a){const s="href"in a&&a.href[0]==="#"?r.app.baseURL+a.href:K6(r.app.baseURL,a.fullPath);U3e({path:s,persistState:!0})}e.hook("app:manifest:update",()=>{t.beforeResolve(n)}),t.onError((a,o)=>{i.has(a)&&n(o)})}}),j3e=sh({name:"nuxt:global-components"}),Roe={get(e){try{return JSON.parse(localStorage.getItem(e))}catch{return localStorage.getItem(e)}},set(e,t){return localStorage.setItem(e,JSON.stringify(t))},remove(e){localStorage.removeItem(e)}};function Ooe(e,t){return function(){return e.apply(t,arguments)}}const{toString:W3e}=Object.prototype,{getPrototypeOf:VB}=Object,$6=(e=>t=>{const r=W3e.call(t);return e[r]||(e[r]=r.slice(8,-1).toLowerCase())})(Object.create(null)),Bu=e=>(e=e.toLowerCase(),t=>$6(t)===e),eC=e=>t=>typeof t===e,{isArray:gy}=Array,jb=eC("undefined");function q3e(e){return e!==null&&!jb(e)&&e.constructor!==null&&!jb(e.constructor)&&Gs(e.constructor.isBuffer)&&e.constructor.isBuffer(e)}const Boe=Bu("ArrayBuffer");function Y3e(e){let t;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?t=ArrayBuffer.isView(e):t=e&&e.buffer&&Boe(e.buffer),t}const X3e=eC("string"),Gs=eC("function"),Noe=eC("number"),tC=e=>e!==null&&typeof e=="object",Z3e=e=>e===!0||e===!1,oA=e=>{if($6(e)!=="object")return!1;const t=VB(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)},Q3e=Bu("Date"),K3e=Bu("File"),J3e=Bu("Blob"),$3e=Bu("FileList"),e_e=e=>tC(e)&&Gs(e.pipe),t_e=e=>{let t;return e&&(typeof FormData=="function"&&e instanceof FormData||Gs(e.append)&&((t=$6(e))==="formdata"||t==="object"&&Gs(e.toString)&&e.toString()==="[object FormData]"))},r_e=Bu("URLSearchParams"),[i_e,n_e,a_e,o_e]=["ReadableStream","Request","Response","Headers"].map(Bu),s_e=e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function n4(e,t,{allOwnKeys:r=!1}={}){if(e===null||typeof e>"u")return;let i,n;if(typeof e!="object"&&(e=[e]),gy(e))for(i=0,n=e.length;i<n;i++)t.call(null,e[i],i,e);else{const a=r?Object.getOwnPropertyNames(e):Object.keys(e),o=a.length;let s;for(i=0;i<o;i++)s=a[i],t.call(null,e[s],s,e)}}function Voe(e,t){t=t.toLowerCase();const r=Object.keys(e);let i=r.length,n;for(;i-- >0;)if(n=r[i],t===n.toLowerCase())return n;return null}const H0=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,Foe=e=>!jb(e)&&e!==H0;function MI(){const{caseless:e}=Foe(this)&&this||{},t={},r=(i,n)=>{const a=e&&Voe(t,n)||n;oA(t[a])&&oA(i)?t[a]=MI(t[a],i):oA(i)?t[a]=MI({},i):gy(i)?t[a]=i.slice():t[a]=i};for(let i=0,n=arguments.length;i<n;i++)arguments[i]&&n4(arguments[i],r);return t}const l_e=(e,t,r,{allOwnKeys:i}={})=>(n4(t,(n,a)=>{r&&Gs(n)?e[a]=Ooe(n,r):e[a]=n},{allOwnKeys:i}),e),u_e=e=>(e.charCodeAt(0)===65279&&(e=e.slice(1)),e),c_e=(e,t,r,i)=>{e.prototype=Object.create(t.prototype,i),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:t.prototype}),r&&Object.assign(e.prototype,r)},h_e=(e,t,r,i)=>{let n,a,o;const s={};if(t=t||{},e==null)return t;do{for(n=Object.getOwnPropertyNames(e),a=n.length;a-- >0;)o=n[a],(!i||i(o,e,t))&&!s[o]&&(t[o]=e[o],s[o]=!0);e=r!==!1&&VB(e)}while(e&&(!r||r(e,t))&&e!==Object.prototype);return t},d_e=(e,t,r)=>{e=String(e),(r===void 0||r>e.length)&&(r=e.length),r-=t.length;const i=e.indexOf(t,r);return i!==-1&&i===r},f_e=e=>{if(!e)return null;if(gy(e))return e;let t=e.length;if(!Noe(t))return null;const r=new Array(t);for(;t-- >0;)r[t]=e[t];return r},p_e=(e=>t=>e&&t instanceof e)(typeof Uint8Array<"u"&&VB(Uint8Array)),v_e=(e,t)=>{const i=(e&&e[Symbol.iterator]).call(e);let n;for(;(n=i.next())&&!n.done;){const a=n.value;t.call(e,a[0],a[1])}},m_e=(e,t)=>{let r;const i=[];for(;(r=e.exec(t))!==null;)i.push(r);return i},g_e=Bu("HTMLFormElement"),y_e=e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(r,i,n){return i.toUpperCase()+n}),kU=(({hasOwnProperty:e})=>(t,r)=>e.call(t,r))(Object.prototype),x_e=Bu("RegExp"),zoe=(e,t)=>{const r=Object.getOwnPropertyDescriptors(e),i={};n4(r,(n,a)=>{let o;(o=t(n,a,e))!==!1&&(i[a]=o||n)}),Object.defineProperties(e,i)},b_e=e=>{zoe(e,(t,r)=>{if(Gs(e)&&["arguments","caller","callee"].indexOf(r)!==-1)return!1;const i=e[r];if(Gs(i)){if(t.enumerable=!1,"writable"in t){t.writable=!1;return}t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+r+"'")})}})},w_e=(e,t)=>{const r={},i=n=>{n.forEach(a=>{r[a]=!0})};return gy(e)?i(e):i(String(e).split(t)),r},__e=()=>{},A_e=(e,t)=>e!=null&&Number.isFinite(e=+e)?e:t,cE="abcdefghijklmnopqrstuvwxyz",RU="0123456789",Hoe={DIGIT:RU,ALPHA:cE,ALPHA_DIGIT:cE+cE.toUpperCase()+RU},S_e=(e=16,t=Hoe.ALPHA_DIGIT)=>{let r="";const{length:i}=t;for(;e--;)r+=t[Math.random()*i|0];return r};function C_e(e){return!!(e&&Gs(e.append)&&e[Symbol.toStringTag]==="FormData"&&e[Symbol.iterator])}const E_e=e=>{const t=new Array(10),r=(i,n)=>{if(tC(i)){if(t.indexOf(i)>=0)return;if(!("toJSON"in i)){t[n]=i;const a=gy(i)?[]:{};return n4(i,(o,s)=>{const l=r(o,n+1);!jb(l)&&(a[s]=l)}),t[n]=void 0,a}}return i};return r(e,0)},M_e=Bu("AsyncFunction"),T_e=e=>e&&(tC(e)||Gs(e))&&Gs(e.then)&&Gs(e.catch),Uoe=((e,t)=>e?setImmediate:t?((r,i)=>(H0.addEventListener("message",({source:n,data:a})=>{n===H0&&a===r&&i.length&&i.shift()()},!1),n=>{i.push(n),H0.postMessage(r,"*")}))(`axios@${Math.random()}`,[]):r=>setTimeout(r))(typeof setImmediate=="function",Gs(H0.postMessage)),P_e=typeof queueMicrotask<"u"?queueMicrotask.bind(H0):typeof process<"u"&&process.nextTick||Uoe,je={isArray:gy,isArrayBuffer:Boe,isBuffer:q3e,isFormData:t_e,isArrayBufferView:Y3e,isString:X3e,isNumber:Noe,isBoolean:Z3e,isObject:tC,isPlainObject:oA,isReadableStream:i_e,isRequest:n_e,isResponse:a_e,isHeaders:o_e,isUndefined:jb,isDate:Q3e,isFile:K3e,isBlob:J3e,isRegExp:x_e,isFunction:Gs,isStream:e_e,isURLSearchParams:r_e,isTypedArray:p_e,isFileList:$3e,forEach:n4,merge:MI,extend:l_e,trim:s_e,stripBOM:u_e,inherits:c_e,toFlatObject:h_e,kindOf:$6,kindOfTest:Bu,endsWith:d_e,toArray:f_e,forEachEntry:v_e,matchAll:m_e,isHTMLForm:g_e,hasOwnProperty:kU,hasOwnProp:kU,reduceDescriptors:zoe,freezeMethods:b_e,toObjectSet:w_e,toCamelCase:y_e,noop:__e,toFiniteNumber:A_e,findKey:Voe,global:H0,isContextDefined:Foe,ALPHABET:Hoe,generateString:S_e,isSpecCompliantForm:C_e,toJSONObject:E_e,isAsyncFn:M_e,isThenable:T_e,setImmediate:Uoe,asap:P_e};function Mr(e,t,r,i,n){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=e,this.name="AxiosError",t&&(this.code=t),r&&(this.config=r),i&&(this.request=i),n&&(this.response=n,this.status=n.status?n.status:null)}je.inherits(Mr,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:je.toJSONObject(this.config),code:this.code,status:this.status}}});const Goe=Mr.prototype,joe={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(e=>{joe[e]={value:e}});Object.defineProperties(Mr,joe);Object.defineProperty(Goe,"isAxiosError",{value:!0});Mr.from=(e,t,r,i,n,a)=>{const o=Object.create(Goe);return je.toFlatObject(e,o,function(l){return l!==Error.prototype},s=>s!=="isAxiosError"),Mr.call(o,e.message,t,r,i,n),o.cause=e,o.name=e.name,a&&Object.assign(o,a),o};const D_e=null;function TI(e){return je.isPlainObject(e)||je.isArray(e)}function Woe(e){return je.endsWith(e,"[]")?e.slice(0,-2):e}function OU(e,t,r){return e?e.concat(t).map(function(n,a){return n=Woe(n),!r&&a?"["+n+"]":n}).join(r?".":""):t}function I_e(e){return je.isArray(e)&&!e.some(TI)}const L_e=je.toFlatObject(je,{},null,function(t){return/^is[A-Z]/.test(t)});function rC(e,t,r){if(!je.isObject(e))throw new TypeError("target must be an object");t=t||new FormData,r=je.toFlatObject(r,{metaTokens:!0,dots:!1,indexes:!1},!1,function(v,m){return!je.isUndefined(m[v])});const i=r.metaTokens,n=r.visitor||c,a=r.dots,o=r.indexes,l=(r.Blob||typeof Blob<"u"&&Blob)&&je.isSpecCompliantForm(t);if(!je.isFunction(n))throw new TypeError("visitor must be a function");function u(p){if(p===null)return"";if(je.isDate(p))return p.toISOString();if(!l&&je.isBlob(p))throw new Mr("Blob is not supported. Use a Buffer instead.");return je.isArrayBuffer(p)||je.isTypedArray(p)?l&&typeof Blob=="function"?new Blob([p]):Buffer.from(p):p}function c(p,v,m){let g=p;if(p&&!m&&typeof p=="object"){if(je.endsWith(v,"{}"))v=i?v:v.slice(0,-2),p=JSON.stringify(p);else if(je.isArray(p)&&I_e(p)||(je.isFileList(p)||je.endsWith(v,"[]"))&&(g=je.toArray(p)))return v=Woe(v),g.forEach(function(x,b){!(je.isUndefined(x)||x===null)&&t.append(o===!0?OU([v],b,a):o===null?v:v+"[]",u(x))}),!1}return TI(p)?!0:(t.append(OU(m,v,a),u(p)),!1)}const h=[],d=Object.assign(L_e,{defaultVisitor:c,convertValue:u,isVisitable:TI});function f(p,v){if(!je.isUndefined(p)){if(h.indexOf(p)!==-1)throw Error("Circular reference detected in "+v.join("."));h.push(p),je.forEach(p,function(g,y){(!(je.isUndefined(g)||g===null)&&n.call(t,g,je.isString(y)?y.trim():y,v,d))===!0&&f(g,v?v.concat(y):[y])}),h.pop()}}if(!je.isObject(e))throw new TypeError("data must be an object");return f(e),t}function BU(e){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,function(i){return t[i]})}function FB(e,t){this._pairs=[],e&&rC(e,this,t)}const qoe=FB.prototype;qoe.append=function(t,r){this._pairs.push([t,r])};qoe.toString=function(t){const r=t?function(i){return t.call(this,i,BU)}:BU;return this._pairs.map(function(n){return r(n[0])+"="+r(n[1])},"").join("&")};function k_e(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function Yoe(e,t,r){if(!t)return e;const i=r&&r.encode||k_e;je.isFunction(r)&&(r={serialize:r});const n=r&&r.serialize;let a;if(n?a=n(t,r):a=je.isURLSearchParams(t)?t.toString():new FB(t,r).toString(i),a){const o=e.indexOf("#");o!==-1&&(e=e.slice(0,o)),e+=(e.indexOf("?")===-1?"?":"&")+a}return e}class NU{constructor(){this.handlers=[]}use(t,r,i){return this.handlers.push({fulfilled:t,rejected:r,synchronous:i?i.synchronous:!1,runWhen:i?i.runWhen:null}),this.handlers.length-1}eject(t){this.handlers[t]&&(this.handlers[t]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(t){je.forEach(this.handlers,function(i){i!==null&&t(i)})}}const Xoe={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},R_e=typeof URLSearchParams<"u"?URLSearchParams:FB,O_e=typeof FormData<"u"?FormData:null,B_e=typeof Blob<"u"?Blob:null,N_e={isBrowser:!0,classes:{URLSearchParams:R_e,FormData:O_e,Blob:B_e},protocols:["http","https","file","blob","url","data"]},zB=typeof window<"u"&&typeof document<"u",PI=typeof navigator=="object"&&navigator||void 0,V_e=zB&&(!PI||["ReactNative","NativeScript","NS"].indexOf(PI.product)<0),F_e=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",z_e=zB&&window.location.href||"http://localhost",H_e=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:zB,hasStandardBrowserEnv:V_e,hasStandardBrowserWebWorkerEnv:F_e,navigator:PI,origin:z_e},Symbol.toStringTag,{value:"Module"})),po={...H_e,...N_e};function U_e(e,t){return rC(e,new po.classes.URLSearchParams,Object.assign({visitor:function(r,i,n,a){return po.isNode&&je.isBuffer(r)?(this.append(i,r.toString("base64")),!1):a.defaultVisitor.apply(this,arguments)}},t))}function G_e(e){return je.matchAll(/\w+|\[(\w*)]/g,e).map(t=>t[0]==="[]"?"":t[1]||t[0])}function j_e(e){const t={},r=Object.keys(e);let i;const n=r.length;let a;for(i=0;i<n;i++)a=r[i],t[a]=e[a];return t}function Zoe(e){function t(r,i,n,a){let o=r[a++];if(o==="__proto__")return!0;const s=Number.isFinite(+o),l=a>=r.length;return o=!o&&je.isArray(n)?n.length:o,l?(je.hasOwnProp(n,o)?n[o]=[n[o],i]:n[o]=i,!s):((!n[o]||!je.isObject(n[o]))&&(n[o]=[]),t(r,i,n[o],a)&&je.isArray(n[o])&&(n[o]=j_e(n[o])),!s)}if(je.isFormData(e)&&je.isFunction(e.entries)){const r={};return je.forEachEntry(e,(i,n)=>{t(G_e(i),n,r,0)}),r}return null}function W_e(e,t,r){if(je.isString(e))try{return(t||JSON.parse)(e),je.trim(e)}catch(i){if(i.name!=="SyntaxError")throw i}return(0,JSON.stringify)(e)}const a4={transitional:Xoe,adapter:["xhr","http","fetch"],transformRequest:[function(t,r){const i=r.getContentType()||"",n=i.indexOf("application/json")>-1,a=je.isObject(t);if(a&&je.isHTMLForm(t)&&(t=new FormData(t)),je.isFormData(t))return n?JSON.stringify(Zoe(t)):t;if(je.isArrayBuffer(t)||je.isBuffer(t)||je.isStream(t)||je.isFile(t)||je.isBlob(t)||je.isReadableStream(t))return t;if(je.isArrayBufferView(t))return t.buffer;if(je.isURLSearchParams(t))return r.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),t.toString();let s;if(a){if(i.indexOf("application/x-www-form-urlencoded")>-1)return U_e(t,this.formSerializer).toString();if((s=je.isFileList(t))||i.indexOf("multipart/form-data")>-1){const l=this.env&&this.env.FormData;return rC(s?{"files[]":t}:t,l&&new l,this.formSerializer)}}return a||n?(r.setContentType("application/json",!1),W_e(t)):t}],transformResponse:[function(t){const r=this.transitional||a4.transitional,i=r&&r.forcedJSONParsing,n=this.responseType==="json";if(je.isResponse(t)||je.isReadableStream(t))return t;if(t&&je.isString(t)&&(i&&!this.responseType||n)){const o=!(r&&r.silentJSONParsing)&&n;try{return JSON.parse(t)}catch(s){if(o)throw s.name==="SyntaxError"?Mr.from(s,Mr.ERR_BAD_RESPONSE,this,null,this.response):s}}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:po.classes.FormData,Blob:po.classes.Blob},validateStatus:function(t){return t>=200&&t<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};je.forEach(["delete","get","head","post","put","patch"],e=>{a4.headers[e]={}});const q_e=je.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),Y_e=e=>{const t={};let r,i,n;return e&&e.split(`
`).forEach(function(o){n=o.indexOf(":"),r=o.substring(0,n).trim().toLowerCase(),i=o.substring(n+1).trim(),!(!r||t[r]&&q_e[r])&&(r==="set-cookie"?t[r]?t[r].push(i):t[r]=[i]:t[r]=t[r]?t[r]+", "+i:i)}),t},VU=Symbol("internals");function c2(e){return e&&String(e).trim().toLowerCase()}function sA(e){return e===!1||e==null?e:je.isArray(e)?e.map(sA):String(e)}function X_e(e){const t=Object.create(null),r=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let i;for(;i=r.exec(e);)t[i[1]]=i[2];return t}const Z_e=e=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim());function hE(e,t,r,i,n){if(je.isFunction(i))return i.call(this,t,r);if(n&&(t=r),!!je.isString(t)){if(je.isString(i))return t.indexOf(i)!==-1;if(je.isRegExp(i))return i.test(t)}}function Q_e(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(t,r,i)=>r.toUpperCase()+i)}function K_e(e,t){const r=je.toCamelCase(" "+t);["get","set","has"].forEach(i=>{Object.defineProperty(e,i+r,{value:function(n,a,o){return this[i].call(this,t,n,a,o)},configurable:!0})})}class As{constructor(t){t&&this.set(t)}set(t,r,i){const n=this;function a(s,l,u){const c=c2(l);if(!c)throw new Error("header name must be a non-empty string");const h=je.findKey(n,c);(!h||n[h]===void 0||u===!0||u===void 0&&n[h]!==!1)&&(n[h||l]=sA(s))}const o=(s,l)=>je.forEach(s,(u,c)=>a(u,c,l));if(je.isPlainObject(t)||t instanceof this.constructor)o(t,r);else if(je.isString(t)&&(t=t.trim())&&!Z_e(t))o(Y_e(t),r);else if(je.isHeaders(t))for(const[s,l]of t.entries())a(l,s,i);else t!=null&&a(r,t,i);return this}get(t,r){if(t=c2(t),t){const i=je.findKey(this,t);if(i){const n=this[i];if(!r)return n;if(r===!0)return X_e(n);if(je.isFunction(r))return r.call(this,n,i);if(je.isRegExp(r))return r.exec(n);throw new TypeError("parser must be boolean|regexp|function")}}}has(t,r){if(t=c2(t),t){const i=je.findKey(this,t);return!!(i&&this[i]!==void 0&&(!r||hE(this,this[i],i,r)))}return!1}delete(t,r){const i=this;let n=!1;function a(o){if(o=c2(o),o){const s=je.findKey(i,o);s&&(!r||hE(i,i[s],s,r))&&(delete i[s],n=!0)}}return je.isArray(t)?t.forEach(a):a(t),n}clear(t){const r=Object.keys(this);let i=r.length,n=!1;for(;i--;){const a=r[i];(!t||hE(this,this[a],a,t,!0))&&(delete this[a],n=!0)}return n}normalize(t){const r=this,i={};return je.forEach(this,(n,a)=>{const o=je.findKey(i,a);if(o){r[o]=sA(n),delete r[a];return}const s=t?Q_e(a):String(a).trim();s!==a&&delete r[a],r[s]=sA(n),i[s]=!0}),this}concat(...t){return this.constructor.concat(this,...t)}toJSON(t){const r=Object.create(null);return je.forEach(this,(i,n)=>{i!=null&&i!==!1&&(r[n]=t&&je.isArray(i)?i.join(", "):i)}),r}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([t,r])=>t+": "+r).join(`
`)}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(t){return t instanceof this?t:new this(t)}static concat(t,...r){const i=new this(t);return r.forEach(n=>i.set(n)),i}static accessor(t){const i=(this[VU]=this[VU]={accessors:{}}).accessors,n=this.prototype;function a(o){const s=c2(o);i[s]||(K_e(n,o),i[s]=!0)}return je.isArray(t)?t.forEach(a):a(t),this}}As.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);je.reduceDescriptors(As.prototype,({value:e},t)=>{let r=t[0].toUpperCase()+t.slice(1);return{get:()=>e,set(i){this[r]=i}}});je.freezeMethods(As);function dE(e,t){const r=this||a4,i=t||r,n=As.from(i.headers);let a=i.data;return je.forEach(e,function(s){a=s.call(r,a,n.normalize(),t?t.status:void 0)}),n.normalize(),a}function Qoe(e){return!!(e&&e.__CANCEL__)}function yy(e,t,r){Mr.call(this,e??"canceled",Mr.ERR_CANCELED,t,r),this.name="CanceledError"}je.inherits(yy,Mr,{__CANCEL__:!0});function Koe(e,t,r){const i=r.config.validateStatus;!r.status||!i||i(r.status)?e(r):t(new Mr("Request failed with status code "+r.status,[Mr.ERR_BAD_REQUEST,Mr.ERR_BAD_RESPONSE][Math.floor(r.status/100)-4],r.config,r.request,r))}function J_e(e){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}function $_e(e,t){e=e||10;const r=new Array(e),i=new Array(e);let n=0,a=0,o;return t=t!==void 0?t:1e3,function(l){const u=Date.now(),c=i[a];o||(o=u),r[n]=l,i[n]=u;let h=a,d=0;for(;h!==n;)d+=r[h++],h=h%e;if(n=(n+1)%e,n===a&&(a=(a+1)%e),u-o<t)return;const f=c&&u-c;return f?Math.round(d*1e3/f):void 0}}function e5e(e,t){let r=0,i=1e3/t,n,a;const o=(u,c=Date.now())=>{r=c,n=null,a&&(clearTimeout(a),a=null),e.apply(null,u)};return[(...u)=>{const c=Date.now(),h=c-r;h>=i?o(u,c):(n=u,a||(a=setTimeout(()=>{a=null,o(n)},i-h)))},()=>n&&o(n)]}const x8=(e,t,r=3)=>{let i=0;const n=$_e(50,250);return e5e(a=>{const o=a.loaded,s=a.lengthComputable?a.total:void 0,l=o-i,u=n(l),c=o<=s;i=o;const h={loaded:o,total:s,progress:s?o/s:void 0,bytes:l,rate:u||void 0,estimated:u&&s&&c?(s-o)/u:void 0,event:a,lengthComputable:s!=null,[t?"download":"upload"]:!0};e(h)},r)},FU=(e,t)=>{const r=e!=null;return[i=>t[0]({lengthComputable:r,total:e,loaded:i}),t[1]]},zU=e=>(...t)=>je.asap(()=>e(...t)),t5e=po.hasStandardBrowserEnv?((e,t)=>r=>(r=new URL(r,po.origin),e.protocol===r.protocol&&e.host===r.host&&(t||e.port===r.port)))(new URL(po.origin),po.navigator&&/(msie|trident)/i.test(po.navigator.userAgent)):()=>!0,r5e=po.hasStandardBrowserEnv?{write(e,t,r,i,n,a){const o=[e+"="+encodeURIComponent(t)];je.isNumber(r)&&o.push("expires="+new Date(r).toGMTString()),je.isString(i)&&o.push("path="+i),je.isString(n)&&o.push("domain="+n),a===!0&&o.push("secure"),document.cookie=o.join("; ")},read(e){const t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove(e){this.write(e,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function i5e(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)}function n5e(e,t){return t?e.replace(/\/?\/$/,"")+"/"+t.replace(/^\/+/,""):e}function Joe(e,t){return e&&!i5e(t)?n5e(e,t):t}const HU=e=>e instanceof As?{...e}:e;function Dv(e,t){t=t||{};const r={};function i(u,c,h,d){return je.isPlainObject(u)&&je.isPlainObject(c)?je.merge.call({caseless:d},u,c):je.isPlainObject(c)?je.merge({},c):je.isArray(c)?c.slice():c}function n(u,c,h,d){if(je.isUndefined(c)){if(!je.isUndefined(u))return i(void 0,u,h,d)}else return i(u,c,h,d)}function a(u,c){if(!je.isUndefined(c))return i(void 0,c)}function o(u,c){if(je.isUndefined(c)){if(!je.isUndefined(u))return i(void 0,u)}else return i(void 0,c)}function s(u,c,h){if(h in t)return i(u,c);if(h in e)return i(void 0,u)}const l={url:a,method:a,data:a,baseURL:o,transformRequest:o,transformResponse:o,paramsSerializer:o,timeout:o,timeoutMessage:o,withCredentials:o,withXSRFToken:o,adapter:o,responseType:o,xsrfCookieName:o,xsrfHeaderName:o,onUploadProgress:o,onDownloadProgress:o,decompress:o,maxContentLength:o,maxBodyLength:o,beforeRedirect:o,transport:o,httpAgent:o,httpsAgent:o,cancelToken:o,socketPath:o,responseEncoding:o,validateStatus:s,headers:(u,c,h)=>n(HU(u),HU(c),h,!0)};return je.forEach(Object.keys(Object.assign({},e,t)),function(c){const h=l[c]||n,d=h(e[c],t[c],c);je.isUndefined(d)&&h!==s||(r[c]=d)}),r}const $oe=e=>{const t=Dv({},e);let{data:r,withXSRFToken:i,xsrfHeaderName:n,xsrfCookieName:a,headers:o,auth:s}=t;t.headers=o=As.from(o),t.url=Yoe(Joe(t.baseURL,t.url),e.params,e.paramsSerializer),s&&o.set("Authorization","Basic "+btoa((s.username||"")+":"+(s.password?unescape(encodeURIComponent(s.password)):"")));let l;if(je.isFormData(r)){if(po.hasStandardBrowserEnv||po.hasStandardBrowserWebWorkerEnv)o.setContentType(void 0);else if((l=o.getContentType())!==!1){const[u,...c]=l?l.split(";").map(h=>h.trim()).filter(Boolean):[];o.setContentType([u||"multipart/form-data",...c].join("; "))}}if(po.hasStandardBrowserEnv&&(i&&je.isFunction(i)&&(i=i(t)),i||i!==!1&&t5e(t.url))){const u=n&&a&&r5e.read(a);u&&o.set(n,u)}return t},a5e=typeof XMLHttpRequest<"u",o5e=a5e&&function(e){return new Promise(function(r,i){const n=$oe(e);let a=n.data;const o=As.from(n.headers).normalize();let{responseType:s,onUploadProgress:l,onDownloadProgress:u}=n,c,h,d,f,p;function v(){f&&f(),p&&p(),n.cancelToken&&n.cancelToken.unsubscribe(c),n.signal&&n.signal.removeEventListener("abort",c)}let m=new XMLHttpRequest;m.open(n.method.toUpperCase(),n.url,!0),m.timeout=n.timeout;function g(){if(!m)return;const x=As.from("getAllResponseHeaders"in m&&m.getAllResponseHeaders()),_={data:!s||s==="text"||s==="json"?m.responseText:m.response,status:m.status,statusText:m.statusText,headers:x,config:e,request:m};Koe(function(S){r(S),v()},function(S){i(S),v()},_),m=null}"onloadend"in m?m.onloadend=g:m.onreadystatechange=function(){!m||m.readyState!==4||m.status===0&&!(m.responseURL&&m.responseURL.indexOf("file:")===0)||setTimeout(g)},m.onabort=function(){m&&(i(new Mr("Request aborted",Mr.ECONNABORTED,e,m)),m=null)},m.onerror=function(){i(new Mr("Network Error",Mr.ERR_NETWORK,e,m)),m=null},m.ontimeout=function(){let b=n.timeout?"timeout of "+n.timeout+"ms exceeded":"timeout exceeded";const _=n.transitional||Xoe;n.timeoutErrorMessage&&(b=n.timeoutErrorMessage),i(new Mr(b,_.clarifyTimeoutError?Mr.ETIMEDOUT:Mr.ECONNABORTED,e,m)),m=null},a===void 0&&o.setContentType(null),"setRequestHeader"in m&&je.forEach(o.toJSON(),function(b,_){m.setRequestHeader(_,b)}),je.isUndefined(n.withCredentials)||(m.withCredentials=!!n.withCredentials),s&&s!=="json"&&(m.responseType=n.responseType),u&&([d,p]=x8(u,!0),m.addEventListener("progress",d)),l&&m.upload&&([h,f]=x8(l),m.upload.addEventListener("progress",h),m.upload.addEventListener("loadend",f)),(n.cancelToken||n.signal)&&(c=x=>{m&&(i(!x||x.type?new yy(null,e,m):x),m.abort(),m=null)},n.cancelToken&&n.cancelToken.subscribe(c),n.signal&&(n.signal.aborted?c():n.signal.addEventListener("abort",c)));const y=J_e(n.url);if(y&&po.protocols.indexOf(y)===-1){i(new Mr("Unsupported protocol "+y+":",Mr.ERR_BAD_REQUEST,e));return}m.send(a||null)})},s5e=(e,t)=>{const{length:r}=e=e?e.filter(Boolean):[];if(t||r){let i=new AbortController,n;const a=function(u){if(!n){n=!0,s();const c=u instanceof Error?u:this.reason;i.abort(c instanceof Mr?c:new yy(c instanceof Error?c.message:c))}};let o=t&&setTimeout(()=>{o=null,a(new Mr(`timeout ${t} of ms exceeded`,Mr.ETIMEDOUT))},t);const s=()=>{e&&(o&&clearTimeout(o),o=null,e.forEach(u=>{u.unsubscribe?u.unsubscribe(a):u.removeEventListener("abort",a)}),e=null)};e.forEach(u=>u.addEventListener("abort",a));const{signal:l}=i;return l.unsubscribe=()=>je.asap(s),l}},l5e=function*(e,t){let r=e.byteLength;if(r<t){yield e;return}let i=0,n;for(;i<r;)n=i+t,yield e.slice(i,n),i=n},u5e=async function*(e,t){for await(const r of c5e(e))yield*l5e(r,t)},c5e=async function*(e){if(e[Symbol.asyncIterator]){yield*e;return}const t=e.getReader();try{for(;;){const{done:r,value:i}=await t.read();if(r)break;yield i}}finally{await t.cancel()}},UU=(e,t,r,i)=>{const n=u5e(e,t);let a=0,o,s=l=>{o||(o=!0,i&&i(l))};return new ReadableStream({async pull(l){try{const{done:u,value:c}=await n.next();if(u){s(),l.close();return}let h=c.byteLength;if(r){let d=a+=h;r(d)}l.enqueue(new Uint8Array(c))}catch(u){throw s(u),u}},cancel(l){return s(l),n.return()}},{highWaterMark:2})},iC=typeof fetch=="function"&&typeof Request=="function"&&typeof Response=="function",ese=iC&&typeof ReadableStream=="function",h5e=iC&&(typeof TextEncoder=="function"?(e=>t=>e.encode(t))(new TextEncoder):async e=>new Uint8Array(await new Response(e).arrayBuffer())),tse=(e,...t)=>{try{return!!e(...t)}catch{return!1}},d5e=ese&&tse(()=>{let e=!1;const t=new Request(po.origin,{body:new ReadableStream,method:"POST",get duplex(){return e=!0,"half"}}).headers.has("Content-Type");return e&&!t}),GU=64*1024,DI=ese&&tse(()=>je.isReadableStream(new Response("").body)),b8={stream:DI&&(e=>e.body)};iC&&(e=>{["text","arrayBuffer","blob","formData","stream"].forEach(t=>{!b8[t]&&(b8[t]=je.isFunction(e[t])?r=>r[t]():(r,i)=>{throw new Mr(`Response type '${t}' is not supported`,Mr.ERR_NOT_SUPPORT,i)})})})(new Response);const f5e=async e=>{if(e==null)return 0;if(je.isBlob(e))return e.size;if(je.isSpecCompliantForm(e))return(await new Request(po.origin,{method:"POST",body:e}).arrayBuffer()).byteLength;if(je.isArrayBufferView(e)||je.isArrayBuffer(e))return e.byteLength;if(je.isURLSearchParams(e)&&(e=e+""),je.isString(e))return(await h5e(e)).byteLength},p5e=async(e,t)=>{const r=je.toFiniteNumber(e.getContentLength());return r??f5e(t)},v5e=iC&&(async e=>{let{url:t,method:r,data:i,signal:n,cancelToken:a,timeout:o,onDownloadProgress:s,onUploadProgress:l,responseType:u,headers:c,withCredentials:h="same-origin",fetchOptions:d}=$oe(e);u=u?(u+"").toLowerCase():"text";let f=s5e([n,a&&a.toAbortSignal()],o),p;const v=f&&f.unsubscribe&&(()=>{f.unsubscribe()});let m;try{if(l&&d5e&&r!=="get"&&r!=="head"&&(m=await p5e(c,i))!==0){let _=new Request(t,{method:"POST",body:i,duplex:"half"}),w;if(je.isFormData(i)&&(w=_.headers.get("content-type"))&&c.setContentType(w),_.body){const[S,A]=FU(m,x8(zU(l)));i=UU(_.body,GU,S,A)}}je.isString(h)||(h=h?"include":"omit");const g="credentials"in Request.prototype;p=new Request(t,{...d,signal:f,method:r.toUpperCase(),headers:c.normalize().toJSON(),body:i,duplex:"half",credentials:g?h:void 0});let y=await fetch(p);const x=DI&&(u==="stream"||u==="response");if(DI&&(s||x&&v)){const _={};["status","statusText","headers"].forEach(M=>{_[M]=y[M]});const w=je.toFiniteNumber(y.headers.get("content-length")),[S,A]=s&&FU(w,x8(zU(s),!0))||[];y=new Response(UU(y.body,GU,S,()=>{A&&A(),v&&v()}),_)}u=u||"text";let b=await b8[je.findKey(b8,u)||"text"](y,e);return!x&&v&&v(),await new Promise((_,w)=>{Koe(_,w,{data:b,headers:As.from(y.headers),status:y.status,statusText:y.statusText,config:e,request:p})})}catch(g){throw v&&v(),g&&g.name==="TypeError"&&/fetch/i.test(g.message)?Object.assign(new Mr("Network Error",Mr.ERR_NETWORK,e,p),{cause:g.cause||g}):Mr.from(g,g&&g.code,e,p)}}),II={http:D_e,xhr:o5e,fetch:v5e};je.forEach(II,(e,t)=>{if(e){try{Object.defineProperty(e,"name",{value:t})}catch{}Object.defineProperty(e,"adapterName",{value:t})}});const jU=e=>`- ${e}`,m5e=e=>je.isFunction(e)||e===null||e===!1,rse={getAdapter:e=>{e=je.isArray(e)?e:[e];const{length:t}=e;let r,i;const n={};for(let a=0;a<t;a++){r=e[a];let o;if(i=r,!m5e(r)&&(i=II[(o=String(r)).toLowerCase()],i===void 0))throw new Mr(`Unknown adapter '${o}'`);if(i)break;n[o||"#"+a]=i}if(!i){const a=Object.entries(n).map(([s,l])=>`adapter ${s} `+(l===!1?"is not supported by the environment":"is not available in the build"));let o=t?a.length>1?`since :
`+a.map(jU).join(`
`):" "+jU(a[0]):"as no adapter specified";throw new Mr("There is no suitable adapter to dispatch the request "+o,"ERR_NOT_SUPPORT")}return i},adapters:II};function fE(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new yy(null,e)}function WU(e){return fE(e),e.headers=As.from(e.headers),e.data=dE.call(e,e.transformRequest),["post","put","patch"].indexOf(e.method)!==-1&&e.headers.setContentType("application/x-www-form-urlencoded",!1),rse.getAdapter(e.adapter||a4.adapter)(e).then(function(i){return fE(e),i.data=dE.call(e,e.transformResponse,i),i.headers=As.from(i.headers),i},function(i){return Qoe(i)||(fE(e),i&&i.response&&(i.response.data=dE.call(e,e.transformResponse,i.response),i.response.headers=As.from(i.response.headers))),Promise.reject(i)})}const ise="1.7.8",nC={};["object","boolean","number","function","string","symbol"].forEach((e,t)=>{nC[e]=function(i){return typeof i===e||"a"+(t<1?"n ":" ")+e}});const qU={};nC.transitional=function(t,r,i){function n(a,o){return"[Axios v"+ise+"] Transitional option '"+a+"'"+o+(i?". "+i:"")}return(a,o,s)=>{if(t===!1)throw new Mr(n(o," has been removed"+(r?" in "+r:"")),Mr.ERR_DEPRECATED);return r&&!qU[o]&&(qU[o]=!0,console.warn(n(o," has been deprecated since v"+r+" and will be removed in the near future"))),t?t(a,o,s):!0}};nC.spelling=function(t){return(r,i)=>(console.warn(`${i} is likely a misspelling of ${t}`),!0)};function g5e(e,t,r){if(typeof e!="object")throw new Mr("options must be an object",Mr.ERR_BAD_OPTION_VALUE);const i=Object.keys(e);let n=i.length;for(;n-- >0;){const a=i[n],o=t[a];if(o){const s=e[a],l=s===void 0||o(s,a,e);if(l!==!0)throw new Mr("option "+a+" must be "+l,Mr.ERR_BAD_OPTION_VALUE);continue}if(r!==!0)throw new Mr("Unknown option "+a,Mr.ERR_BAD_OPTION)}}const lA={assertOptions:g5e,validators:nC},Uu=lA.validators;class dv{constructor(t){this.defaults=t,this.interceptors={request:new NU,response:new NU}}async request(t,r){try{return await this._request(t,r)}catch(i){if(i instanceof Error){let n={};Error.captureStackTrace?Error.captureStackTrace(n):n=new Error;const a=n.stack?n.stack.replace(/^.+\n/,""):"";try{i.stack?a&&!String(i.stack).endsWith(a.replace(/^.+\n.+\n/,""))&&(i.stack+=`
`+a):i.stack=a}catch{}}throw i}}_request(t,r){typeof t=="string"?(r=r||{},r.url=t):r=t||{},r=Dv(this.defaults,r);const{transitional:i,paramsSerializer:n,headers:a}=r;i!==void 0&&lA.assertOptions(i,{silentJSONParsing:Uu.transitional(Uu.boolean),forcedJSONParsing:Uu.transitional(Uu.boolean),clarifyTimeoutError:Uu.transitional(Uu.boolean)},!1),n!=null&&(je.isFunction(n)?r.paramsSerializer={serialize:n}:lA.assertOptions(n,{encode:Uu.function,serialize:Uu.function},!0)),lA.assertOptions(r,{baseUrl:Uu.spelling("baseURL"),withXsrfToken:Uu.spelling("withXSRFToken")},!0),r.method=(r.method||this.defaults.method||"get").toLowerCase();let o=a&&je.merge(a.common,a[r.method]);a&&je.forEach(["delete","get","head","post","put","patch","common"],p=>{delete a[p]}),r.headers=As.concat(o,a);const s=[];let l=!0;this.interceptors.request.forEach(function(v){typeof v.runWhen=="function"&&v.runWhen(r)===!1||(l=l&&v.synchronous,s.unshift(v.fulfilled,v.rejected))});const u=[];this.interceptors.response.forEach(function(v){u.push(v.fulfilled,v.rejected)});let c,h=0,d;if(!l){const p=[WU.bind(this),void 0];for(p.unshift.apply(p,s),p.push.apply(p,u),d=p.length,c=Promise.resolve(r);h<d;)c=c.then(p[h++],p[h++]);return c}d=s.length;let f=r;for(h=0;h<d;){const p=s[h++],v=s[h++];try{f=p(f)}catch(m){v.call(this,m);break}}try{c=WU.call(this,f)}catch(p){return Promise.reject(p)}for(h=0,d=u.length;h<d;)c=c.then(u[h++],u[h++]);return c}getUri(t){t=Dv(this.defaults,t);const r=Joe(t.baseURL,t.url);return Yoe(r,t.params,t.paramsSerializer)}}je.forEach(["delete","get","head","options"],function(t){dv.prototype[t]=function(r,i){return this.request(Dv(i||{},{method:t,url:r,data:(i||{}).data}))}});je.forEach(["post","put","patch"],function(t){function r(i){return function(a,o,s){return this.request(Dv(s||{},{method:t,headers:i?{"Content-Type":"multipart/form-data"}:{},url:a,data:o}))}}dv.prototype[t]=r(),dv.prototype[t+"Form"]=r(!0)});class HB{constructor(t){if(typeof t!="function")throw new TypeError("executor must be a function.");let r;this.promise=new Promise(function(a){r=a});const i=this;this.promise.then(n=>{if(!i._listeners)return;let a=i._listeners.length;for(;a-- >0;)i._listeners[a](n);i._listeners=null}),this.promise.then=n=>{let a;const o=new Promise(s=>{i.subscribe(s),a=s}).then(n);return o.cancel=function(){i.unsubscribe(a)},o},t(function(a,o,s){i.reason||(i.reason=new yy(a,o,s),r(i.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(t){if(this.reason){t(this.reason);return}this._listeners?this._listeners.push(t):this._listeners=[t]}unsubscribe(t){if(!this._listeners)return;const r=this._listeners.indexOf(t);r!==-1&&this._listeners.splice(r,1)}toAbortSignal(){const t=new AbortController,r=i=>{t.abort(i)};return this.subscribe(r),t.signal.unsubscribe=()=>this.unsubscribe(r),t.signal}static source(){let t;return{token:new HB(function(n){t=n}),cancel:t}}}function y5e(e){return function(r){return e.apply(null,r)}}function x5e(e){return je.isObject(e)&&e.isAxiosError===!0}const LI={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(LI).forEach(([e,t])=>{LI[t]=e});function nse(e){const t=new dv(e),r=Ooe(dv.prototype.request,t);return je.extend(r,dv.prototype,t,{allOwnKeys:!0}),je.extend(r,t,null,{allOwnKeys:!0}),r.create=function(n){return nse(Dv(e,n))},r}const Fn=nse(a4);Fn.Axios=dv;Fn.CanceledError=yy;Fn.CancelToken=HB;Fn.isCancel=Qoe;Fn.VERSION=ise;Fn.toFormData=rC;Fn.AxiosError=Mr;Fn.Cancel=Fn.CanceledError;Fn.all=function(t){return Promise.all(t)};Fn.spread=y5e;Fn.isAxiosError=x5e;Fn.mergeConfig=Dv;Fn.AxiosHeaders=As;Fn.formToJSON=e=>Zoe(je.isHTMLForm(e)?new FormData(e):e);Fn.getAdapter=rse.getAdapter;Fn.HttpStatusCode=LI;Fn.default=Fn;const b5e={dev:"https://app.readonup.com",prod:"https://readon-api.readon.me"},kI=Fe(),ase=_s(()=>{if(kI.value)return Fn.create({withCredentials:!0,baseURL:b5e[kI.value]})}),w5e=new Promise(e=>{ja(ase,e)});async function ose(e,t){return await w5e,new Promise((r,i)=>{ase.value({...e,data:e.method==="post"?e.params:void 0,params:e.method==="get"?e.params:void 0,headers:{authorization:Roe.get("token")}}).then(n=>r(n.data)).catch(n=>i(n))})}function _5e({method:e="post",mockData:t,url:r}){return i=>ose({...i,url:r,method:e})}function o4({method:e="get",mockData:t,url:r}){return i=>{const n=Fe(),a=Fe(),o=Fe(!1),s=l=>{o.value=!0,ose({...i,params:{...l,...i==null?void 0:i.params},url:r,method:e}).then(u=>a.value=u).catch(u=>n.value=u).finally(()=>o.value=!1)};return(i==null?void 0:i.skip)!==!0&&s(),{data:a,error:n,loading:o,refetch:s}}}const A5e=sh(()=>{const e=O1();kI.value=e.public.MODE}),S5e=sh(()=>{let e;return e=navigator.userAgent,{provide:{isMobile:["Android","iPhone","Windows Phone","iPod"].some(i=>e.includes(i))}}}),C5e=[k3e,O3e,V3e,F3e,z3e,H3e,G3e,j3e,A5e,S5e],E5e="modulepreload",M5e=function(e,t){return new URL(e,t).href},YU={},Te=function(t,r,i){let n=Promise.resolve();if(r&&r.length>0){const o=document.getElementsByTagName("link"),s=document.querySelector("meta[property=csp-nonce]"),l=(s==null?void 0:s.nonce)||(s==null?void 0:s.getAttribute("nonce"));n=Promise.allSettled(r.map(u=>{if(u=M5e(u,i),u in YU)return;YU[u]=!0;const c=u.endsWith(".css"),h=c?'[rel="stylesheet"]':"";if(!!i)for(let p=o.length-1;p>=0;p--){const v=o[p];if(v.href===u&&(!c||v.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${u}"]${h}`))return;const f=document.createElement("link");if(f.rel=c?"stylesheet":E5e,c||(f.as="script"),f.crossOrigin="",f.href=u,l&&f.setAttribute("nonce",l),document.head.appendChild(f),c)return new Promise((p,v)=>{f.addEventListener("load",p),f.addEventListener("error",()=>v(new Error(`Unable to preload CSS for ${u}`)))})}))}function a(o){const s=new Event("vite:preloadError",{cancelable:!0});if(s.payload=o,window.dispatchEvent(s),!s.defaultPrevented)throw o}return n.then(o=>{for(const s of o||[])s.status==="rejected"&&a(s.reason);return t().catch(a)})},T5e=Symbol.for("nuxt:client-only"),P5e=sr({name:"ClientOnly",inheritAttrs:!1,props:["fallback","placeholder","placeholderTag","fallbackTag"],setup(e,{slots:t,attrs:r}){const i=Fe(!1);return Zs(()=>{i.value=!0}),SB(T5e,!0),n=>{var l;if(i.value)return(l=t.default)==null?void 0:l.call(t);const a=t.fallback||t.placeholder;if(a)return a();const o=n.fallback||n.placeholder||"",s=n.fallbackTag||n.placeholderTag||"span";return tt(s,r,o)}}}),sse=""+new URL("stats_logo.BdT9yoQb.png",import.meta.url).href,D5e=Object.freeze(Object.defineProperty({__proto__:null,default:sse},Symbol.toStringTag,{value:"Module"})),I5e=o4({method:"post",url:"/v1/stats/blockchain",mockData:{code:0,data:{revox_txs_total:81534076,revox_txs_by_date:[{date:"2024-07-04",volume:2251081},{date:"2024-07-05",volume:2224321}],revox_txs_uaw_by_date:[{date:"2024-07-04",volume:2086175},{date:"2024-07-05",volume:2059540}],sbt_owners:[{date:"2023-04-26T00:00:00Z",volume:472}],content_interaction:null,content_interaction_uaw:null,loki_data:{active_wallet_count:1260302,total_transaction:11022761,txs_30_day:[{date:"2024-07-09",number_of_transactions:150729},{date:"2024-07-08",number_of_transactions:136525}]},nft_data:{nft_total:1119,nft_holders:870,nft_3_star:1072,nft_4_star:47}},message:"success"}}),L5e=o4({url:"/lab/v1/stats",mockData:{code:0,data:{read_on_reg_total:781,share_on_reg_total:184,revox_uaw_total:1572,total_content:4661981,total_creator:567543,total_project:10471,total_read:76627734,total_lense_message:3271300,user_engagements:[{key:"comment_count",day_stats:[{day:"20240710",count:11640},{day:"20240704",count:47656}]},{key:"like_count",day_stats:[{day:"20240710",count:27712},{day:"20240704",count:109542}]}],total_curate:6495213,lense_uaw:4980626,content_hub_uaw:1459973,lense_clime_times:48410862,share_on_dau:[{day:"20240708",dau:811,mau:7400},{day:"20240707",dau:825,mau:7479}],lense_dau:[{day:"20240708",dau:1616180,mau:3592271},{day:"20240707",dau:1536415,mau:3520159}],read_on_dau:[{day:"20240708",dau:40193,mau:214782},{day:"20240707",dau:38859,mau:218471}]},message:"success"}}),k5e=o4({url:"/lab/v1/cf_stats",mockData:{code:0,data:{http_requests_stats:[{date:"2024-07-09T04:00:00Z",name:"Jul 2024",value:6361811},{date:"2024-07-09T05:00:00Z",name:"Jul 2024",value:6297334}]},message:"success"}}),R5e=_5e({url:"/web/wallet_login",method:"post",mockData:{code:0,message:"success",data:{token:"12345"}}}),O5e=o4({method:"post",url:"/lab/v1/ai_resp",mockData:{code:0,data:{request_id:"7",type:1,prompt:"tell me about btc",response:`Bitcoin (BTC) is a decentralized digital currency, created in 2009 by an unidentified person or group of people using the pseudonym Satoshi Nakamoto. Bitcoin is operated on a peer-to-peer network and transactions take place directly between users, without the need for an intermediary such as a bank or financial institution.

Bitcoin transactions are recorded on a public ledger called the blockchain, which is maintained by a network of computers known as miners. These miners verify and process transactions, in exchange for newly minted bitcoins and transaction fees.

Bitcoin has gained popularity as a form of digital currency and medium of exchange, due to its security, transparency, and decentralized nature. It can be used to buy goods and services online, or as an investment asset.

The supply of Bitcoin is limited to 21 million coins, with new coins being mined at a decreasing rate over time. This scarcity is one of the factors that has contributed to Bitcoin's increasing value and widespread adoption.

However, Bitcoin is also known for its price volatility, with its value fluctuating rapidly in response to market demand and sentiment. As with any investment, it is important to exercise caution and do thorough research before investing in Bitcoin or any other cryptocurrency.`,status:2},message:"success"}}),B5e=o4({method:"get",url:"/lab/v1/suggest_prompt",mockData:{code:0,data:["What are the key differences between Web2 and Web3 architectures, and how does Web3 enhance user sovereignty and data privacy?","Can you explain the concept of decentralized identity (DID) and its role in Web3 applications? How can I create and manage my DID?","What are the challenges and potential solutions for scaling blockchain networks to handle high transaction volumes and improve scalability in Web3?","How does Web3 enable programmable money, and what are some real-world use cases for smart contracts and decentralized finance (DeFi) applications?","Can you compare and contrast different consensus algorithms used in Web3 blockchain networks, such as Proof of Work (PoW), Proof of Stake (PoS), and Delegated Proof of Stake (DPoS)? What are the advantages and trade-offs of each?"],message:"success"}}),lse=B5e();var w8=function(){return w8=Object.assign||function(e){for(var t,r=1,i=arguments.length;r<i;r++)for(var n in t=arguments[r])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e},w8.apply(this,arguments)},N5e=function(){function e(t,r,i){var n=this;this.endVal=r,this.options=i,this.version="2.8.0",this.defaults={startVal:0,decimalPlaces:0,duration:2,useEasing:!0,useGrouping:!0,useIndianSeparators:!1,smartEasingThreshold:999,smartEasingAmount:333,separator:",",decimal:".",prefix:"",suffix:"",enableScrollSpy:!1,scrollSpyDelay:200,scrollSpyOnce:!1},this.finalEndVal=null,this.useEasing=!0,this.countDown=!1,this.error="",this.startVal=0,this.paused=!0,this.once=!1,this.count=function(a){n.startTime||(n.startTime=a);var o=a-n.startTime;n.remaining=n.duration-o,n.useEasing?n.countDown?n.frameVal=n.startVal-n.easingFn(o,0,n.startVal-n.endVal,n.duration):n.frameVal=n.easingFn(o,n.startVal,n.endVal-n.startVal,n.duration):n.frameVal=n.startVal+(n.endVal-n.startVal)*(o/n.duration);var s=n.countDown?n.frameVal<n.endVal:n.frameVal>n.endVal;n.frameVal=s?n.endVal:n.frameVal,n.frameVal=Number(n.frameVal.toFixed(n.options.decimalPlaces)),n.printValue(n.frameVal),o<n.duration?n.rAF=requestAnimationFrame(n.count):n.finalEndVal!==null?n.update(n.finalEndVal):n.options.onCompleteCallback&&n.options.onCompleteCallback()},this.formatNumber=function(a){var o,s,l,u,c=a<0?"-":"";o=Math.abs(a).toFixed(n.options.decimalPlaces);var h=(o+="").split(".");if(s=h[0],l=h.length>1?n.options.decimal+h[1]:"",n.options.useGrouping){u="";for(var d=3,f=0,p=0,v=s.length;p<v;++p)n.options.useIndianSeparators&&p===4&&(d=2,f=1),p!==0&&f%d==0&&(u=n.options.separator+u),f++,u=s[v-p-1]+u;s=u}return n.options.numerals&&n.options.numerals.length&&(s=s.replace(/[0-9]/g,function(m){return n.options.numerals[+m]}),l=l.replace(/[0-9]/g,function(m){return n.options.numerals[+m]})),c+n.options.prefix+s+l+n.options.suffix},this.easeOutExpo=function(a,o,s,l){return s*(1-Math.pow(2,-10*a/l))*1024/1023+o},this.options=w8(w8({},this.defaults),i),this.formattingFn=this.options.formattingFn?this.options.formattingFn:this.formatNumber,this.easingFn=this.options.easingFn?this.options.easingFn:this.easeOutExpo,this.startVal=this.validateValue(this.options.startVal),this.frameVal=this.startVal,this.endVal=this.validateValue(r),this.options.decimalPlaces=Math.max(this.options.decimalPlaces),this.resetDuration(),this.options.separator=String(this.options.separator),this.useEasing=this.options.useEasing,this.options.separator===""&&(this.options.useGrouping=!1),this.el=typeof t=="string"?document.getElementById(t):t,this.el?this.printValue(this.startVal):this.error="[CountUp] target is null or undefined",typeof window<"u"&&this.options.enableScrollSpy&&(this.error?console.error(this.error,t):(window.onScrollFns=window.onScrollFns||[],window.onScrollFns.push(function(){return n.handleScroll(n)}),window.onscroll=function(){window.onScrollFns.forEach(function(a){return a()})},this.handleScroll(this)))}return e.prototype.handleScroll=function(t){if(t&&window&&!t.once){var r=window.innerHeight+window.scrollY,i=t.el.getBoundingClientRect(),n=i.top+window.pageYOffset,a=i.top+i.height+window.pageYOffset;a<r&&a>window.scrollY&&t.paused?(t.paused=!1,setTimeout(function(){return t.start()},t.options.scrollSpyDelay),t.options.scrollSpyOnce&&(t.once=!0)):(window.scrollY>a||n>r)&&!t.paused&&t.reset()}},e.prototype.determineDirectionAndSmartEasing=function(){var t=this.finalEndVal?this.finalEndVal:this.endVal;this.countDown=this.startVal>t;var r=t-this.startVal;if(Math.abs(r)>this.options.smartEasingThreshold&&this.options.useEasing){this.finalEndVal=t;var i=this.countDown?1:-1;this.endVal=t+i*this.options.smartEasingAmount,this.duration=this.duration/2}else this.endVal=t,this.finalEndVal=null;this.finalEndVal!==null?this.useEasing=!1:this.useEasing=this.options.useEasing},e.prototype.start=function(t){this.error||(this.options.onStartCallback&&this.options.onStartCallback(),t&&(this.options.onCompleteCallback=t),this.duration>0?(this.determineDirectionAndSmartEasing(),this.paused=!1,this.rAF=requestAnimationFrame(this.count)):this.printValue(this.endVal))},e.prototype.pauseResume=function(){this.paused?(this.startTime=null,this.duration=this.remaining,this.startVal=this.frameVal,this.determineDirectionAndSmartEasing(),this.rAF=requestAnimationFrame(this.count)):cancelAnimationFrame(this.rAF),this.paused=!this.paused},e.prototype.reset=function(){cancelAnimationFrame(this.rAF),this.paused=!0,this.resetDuration(),this.startVal=this.validateValue(this.options.startVal),this.frameVal=this.startVal,this.printValue(this.startVal)},e.prototype.update=function(t){cancelAnimationFrame(this.rAF),this.startTime=null,this.endVal=this.validateValue(t),this.endVal!==this.frameVal&&(this.startVal=this.frameVal,this.finalEndVal==null&&this.resetDuration(),this.finalEndVal=null,this.determineDirectionAndSmartEasing(),this.rAF=requestAnimationFrame(this.count))},e.prototype.printValue=function(t){var r;if(this.el){var i=this.formattingFn(t);!((r=this.options.plugin)===null||r===void 0)&&r.render?this.options.plugin.render(this.el,i):this.el.tagName==="INPUT"?this.el.value=i:this.el.tagName==="text"||this.el.tagName==="tspan"?this.el.textContent=i:this.el.innerHTML=i}},e.prototype.ensureNumber=function(t){return typeof t=="number"&&!isNaN(t)},e.prototype.validateValue=function(t){var r=Number(t);return this.ensureNumber(r)?r:(this.error="[CountUp] invalid start or end value: ".concat(t),null)},e.prototype.resetDuration=function(){this.startTime=null,this.duration=1e3*Number(this.options.duration),this.remaining=this.duration},e}();function Nu(e){const t=Object.prototype.toString.call(e);return e instanceof Date||typeof e=="object"&&t==="[object Date]"?new e.constructor(+e):typeof e=="number"||t==="[object Number]"||typeof e=="string"||t==="[object String]"?new Date(e):new Date(NaN)}function Iv(e,t){return e instanceof Date?new e.constructor(t):new Date(t)}const use=6048e5,V5e=864e5;let F5e={};function aC(){return F5e}function Wb(e,t){var s,l,u,c;const r=aC(),i=(t==null?void 0:t.weekStartsOn)??((l=(s=t==null?void 0:t.locale)==null?void 0:s.options)==null?void 0:l.weekStartsOn)??r.weekStartsOn??((c=(u=r.locale)==null?void 0:u.options)==null?void 0:c.weekStartsOn)??0,n=Nu(e),a=n.getDay(),o=(a<i?7:0)+a-i;return n.setDate(n.getDate()-o),n.setHours(0,0,0,0),n}function _8(e){return Wb(e,{weekStartsOn:1})}function cse(e){const t=Nu(e),r=t.getFullYear(),i=Iv(e,0);i.setFullYear(r+1,0,4),i.setHours(0,0,0,0);const n=_8(i),a=Iv(e,0);a.setFullYear(r,0,4),a.setHours(0,0,0,0);const o=_8(a);return t.getTime()>=n.getTime()?r+1:t.getTime()>=o.getTime()?r:r-1}function XU(e){const t=Nu(e);return t.setHours(0,0,0,0),t}function ZU(e){const t=Nu(e),r=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()));return r.setUTCFullYear(t.getFullYear()),+e-+r}function z5e(e,t){const r=XU(e),i=XU(t),n=+r-ZU(r),a=+i-ZU(i);return Math.round((n-a)/V5e)}function H5e(e){const t=cse(e),r=Iv(e,0);return r.setFullYear(t,0,4),r.setHours(0,0,0,0),_8(r)}function U5e(e){return e instanceof Date||typeof e=="object"&&Object.prototype.toString.call(e)==="[object Date]"}function G5e(e){if(!U5e(e)&&typeof e!="number")return!1;const t=Nu(e);return!isNaN(Number(t))}function j5e(e){const t=Nu(e),r=Iv(e,0);return r.setFullYear(t.getFullYear(),0,1),r.setHours(0,0,0,0),r}const W5e={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},q5e=(e,t,r)=>{let i;const n=W5e[e];return typeof n=="string"?i=n:t===1?i=n.one:i=n.other.replace("{{count}}",t.toString()),r!=null&&r.addSuffix?r.comparison&&r.comparison>0?"in "+i:i+" ago":i};function pE(e){return(t={})=>{const r=t.width?String(t.width):e.defaultWidth;return e.formats[r]||e.formats[e.defaultWidth]}}const Y5e={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},X5e={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},Z5e={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},Q5e={date:pE({formats:Y5e,defaultWidth:"full"}),time:pE({formats:X5e,defaultWidth:"full"}),dateTime:pE({formats:Z5e,defaultWidth:"full"})},K5e={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},J5e=(e,t,r,i)=>K5e[e];function h2(e){return(t,r)=>{const i=r!=null&&r.context?String(r.context):"standalone";let n;if(i==="formatting"&&e.formattingValues){const o=e.defaultFormattingWidth||e.defaultWidth,s=r!=null&&r.width?String(r.width):o;n=e.formattingValues[s]||e.formattingValues[o]}else{const o=e.defaultWidth,s=r!=null&&r.width?String(r.width):e.defaultWidth;n=e.values[s]||e.values[o]}const a=e.argumentCallback?e.argumentCallback(t):t;return n[a]}}const $5e={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},eAe={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},tAe={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},rAe={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},iAe={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},nAe={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},aAe=(e,t)=>{const r=Number(e),i=r%100;if(i>20||i<10)switch(i%10){case 1:return r+"st";case 2:return r+"nd";case 3:return r+"rd"}return r+"th"},oAe={ordinalNumber:aAe,era:h2({values:$5e,defaultWidth:"wide"}),quarter:h2({values:eAe,defaultWidth:"wide",argumentCallback:e=>e-1}),month:h2({values:tAe,defaultWidth:"wide"}),day:h2({values:rAe,defaultWidth:"wide"}),dayPeriod:h2({values:iAe,defaultWidth:"wide",formattingValues:nAe,defaultFormattingWidth:"wide"})};function d2(e){return(t,r={})=>{const i=r.width,n=i&&e.matchPatterns[i]||e.matchPatterns[e.defaultMatchWidth],a=t.match(n);if(!a)return null;const o=a[0],s=i&&e.parsePatterns[i]||e.parsePatterns[e.defaultParseWidth],l=Array.isArray(s)?lAe(s,h=>h.test(o)):sAe(s,h=>h.test(o));let u;u=e.valueCallback?e.valueCallback(l):l,u=r.valueCallback?r.valueCallback(u):u;const c=t.slice(o.length);return{value:u,rest:c}}}function sAe(e,t){for(const r in e)if(Object.prototype.hasOwnProperty.call(e,r)&&t(e[r]))return r}function lAe(e,t){for(let r=0;r<e.length;r++)if(t(e[r]))return r}function uAe(e){return(t,r={})=>{const i=t.match(e.matchPattern);if(!i)return null;const n=i[0],a=t.match(e.parsePattern);if(!a)return null;let o=e.valueCallback?e.valueCallback(a[0]):a[0];o=r.valueCallback?r.valueCallback(o):o;const s=t.slice(n.length);return{value:o,rest:s}}}const cAe=/^(\d+)(th|st|nd|rd)?/i,hAe=/\d+/i,dAe={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},fAe={any:[/^b/i,/^(a|c)/i]},pAe={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},vAe={any:[/1/i,/2/i,/3/i,/4/i]},mAe={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},gAe={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},yAe={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},xAe={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},bAe={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},wAe={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},_Ae={ordinalNumber:uAe({matchPattern:cAe,parsePattern:hAe,valueCallback:e=>parseInt(e,10)}),era:d2({matchPatterns:dAe,defaultMatchWidth:"wide",parsePatterns:fAe,defaultParseWidth:"any"}),quarter:d2({matchPatterns:pAe,defaultMatchWidth:"wide",parsePatterns:vAe,defaultParseWidth:"any",valueCallback:e=>e+1}),month:d2({matchPatterns:mAe,defaultMatchWidth:"wide",parsePatterns:gAe,defaultParseWidth:"any"}),day:d2({matchPatterns:yAe,defaultMatchWidth:"wide",parsePatterns:xAe,defaultParseWidth:"any"}),dayPeriod:d2({matchPatterns:bAe,defaultMatchWidth:"any",parsePatterns:wAe,defaultParseWidth:"any"})},AAe={code:"en-US",formatDistance:q5e,formatLong:Q5e,formatRelative:J5e,localize:oAe,match:_Ae,options:{weekStartsOn:0,firstWeekContainsDate:1}};function SAe(e){const t=Nu(e);return z5e(t,j5e(t))+1}function CAe(e){const t=Nu(e),r=+_8(t)-+H5e(t);return Math.round(r/use)+1}function hse(e,t){var c,h,d,f;const r=Nu(e),i=r.getFullYear(),n=aC(),a=(t==null?void 0:t.firstWeekContainsDate)??((h=(c=t==null?void 0:t.locale)==null?void 0:c.options)==null?void 0:h.firstWeekContainsDate)??n.firstWeekContainsDate??((f=(d=n.locale)==null?void 0:d.options)==null?void 0:f.firstWeekContainsDate)??1,o=Iv(e,0);o.setFullYear(i+1,0,a),o.setHours(0,0,0,0);const s=Wb(o,t),l=Iv(e,0);l.setFullYear(i,0,a),l.setHours(0,0,0,0);const u=Wb(l,t);return r.getTime()>=s.getTime()?i+1:r.getTime()>=u.getTime()?i:i-1}function EAe(e,t){var s,l,u,c;const r=aC(),i=(t==null?void 0:t.firstWeekContainsDate)??((l=(s=t==null?void 0:t.locale)==null?void 0:s.options)==null?void 0:l.firstWeekContainsDate)??r.firstWeekContainsDate??((c=(u=r.locale)==null?void 0:u.options)==null?void 0:c.firstWeekContainsDate)??1,n=hse(e,t),a=Iv(e,0);return a.setFullYear(n,0,i),a.setHours(0,0,0,0),Wb(a,t)}function MAe(e,t){const r=Nu(e),i=+Wb(r,t)-+EAe(r,t);return Math.round(i/use)+1}function Ci(e,t){const r=e<0?"-":"",i=Math.abs(e).toString().padStart(t,"0");return r+i}const Gd={y(e,t){const r=e.getFullYear(),i=r>0?r:1-r;return Ci(t==="yy"?i%100:i,t.length)},M(e,t){const r=e.getMonth();return t==="M"?String(r+1):Ci(r+1,2)},d(e,t){return Ci(e.getDate(),t.length)},a(e,t){const r=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return r.toUpperCase();case"aaa":return r;case"aaaaa":return r[0];case"aaaa":default:return r==="am"?"a.m.":"p.m."}},h(e,t){return Ci(e.getHours()%12||12,t.length)},H(e,t){return Ci(e.getHours(),t.length)},m(e,t){return Ci(e.getMinutes(),t.length)},s(e,t){return Ci(e.getSeconds(),t.length)},S(e,t){const r=t.length,i=e.getMilliseconds(),n=Math.trunc(i*Math.pow(10,r-3));return Ci(n,t.length)}},ym={am:"am",pm:"pm",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},QU={G:function(e,t,r){const i=e.getFullYear()>0?1:0;switch(t){case"G":case"GG":case"GGG":return r.era(i,{width:"abbreviated"});case"GGGGG":return r.era(i,{width:"narrow"});case"GGGG":default:return r.era(i,{width:"wide"})}},y:function(e,t,r){if(t==="yo"){const i=e.getFullYear(),n=i>0?i:1-i;return r.ordinalNumber(n,{unit:"year"})}return Gd.y(e,t)},Y:function(e,t,r,i){const n=hse(e,i),a=n>0?n:1-n;if(t==="YY"){const o=a%100;return Ci(o,2)}return t==="Yo"?r.ordinalNumber(a,{unit:"year"}):Ci(a,t.length)},R:function(e,t){const r=cse(e);return Ci(r,t.length)},u:function(e,t){const r=e.getFullYear();return Ci(r,t.length)},Q:function(e,t,r){const i=Math.ceil((e.getMonth()+1)/3);switch(t){case"Q":return String(i);case"QQ":return Ci(i,2);case"Qo":return r.ordinalNumber(i,{unit:"quarter"});case"QQQ":return r.quarter(i,{width:"abbreviated",context:"formatting"});case"QQQQQ":return r.quarter(i,{width:"narrow",context:"formatting"});case"QQQQ":default:return r.quarter(i,{width:"wide",context:"formatting"})}},q:function(e,t,r){const i=Math.ceil((e.getMonth()+1)/3);switch(t){case"q":return String(i);case"qq":return Ci(i,2);case"qo":return r.ordinalNumber(i,{unit:"quarter"});case"qqq":return r.quarter(i,{width:"abbreviated",context:"standalone"});case"qqqqq":return r.quarter(i,{width:"narrow",context:"standalone"});case"qqqq":default:return r.quarter(i,{width:"wide",context:"standalone"})}},M:function(e,t,r){const i=e.getMonth();switch(t){case"M":case"MM":return Gd.M(e,t);case"Mo":return r.ordinalNumber(i+1,{unit:"month"});case"MMM":return r.month(i,{width:"abbreviated",context:"formatting"});case"MMMMM":return r.month(i,{width:"narrow",context:"formatting"});case"MMMM":default:return r.month(i,{width:"wide",context:"formatting"})}},L:function(e,t,r){const i=e.getMonth();switch(t){case"L":return String(i+1);case"LL":return Ci(i+1,2);case"Lo":return r.ordinalNumber(i+1,{unit:"month"});case"LLL":return r.month(i,{width:"abbreviated",context:"standalone"});case"LLLLL":return r.month(i,{width:"narrow",context:"standalone"});case"LLLL":default:return r.month(i,{width:"wide",context:"standalone"})}},w:function(e,t,r,i){const n=MAe(e,i);return t==="wo"?r.ordinalNumber(n,{unit:"week"}):Ci(n,t.length)},I:function(e,t,r){const i=CAe(e);return t==="Io"?r.ordinalNumber(i,{unit:"week"}):Ci(i,t.length)},d:function(e,t,r){return t==="do"?r.ordinalNumber(e.getDate(),{unit:"date"}):Gd.d(e,t)},D:function(e,t,r){const i=SAe(e);return t==="Do"?r.ordinalNumber(i,{unit:"dayOfYear"}):Ci(i,t.length)},E:function(e,t,r){const i=e.getDay();switch(t){case"E":case"EE":case"EEE":return r.day(i,{width:"abbreviated",context:"formatting"});case"EEEEE":return r.day(i,{width:"narrow",context:"formatting"});case"EEEEEE":return r.day(i,{width:"short",context:"formatting"});case"EEEE":default:return r.day(i,{width:"wide",context:"formatting"})}},e:function(e,t,r,i){const n=e.getDay(),a=(n-i.weekStartsOn+8)%7||7;switch(t){case"e":return String(a);case"ee":return Ci(a,2);case"eo":return r.ordinalNumber(a,{unit:"day"});case"eee":return r.day(n,{width:"abbreviated",context:"formatting"});case"eeeee":return r.day(n,{width:"narrow",context:"formatting"});case"eeeeee":return r.day(n,{width:"short",context:"formatting"});case"eeee":default:return r.day(n,{width:"wide",context:"formatting"})}},c:function(e,t,r,i){const n=e.getDay(),a=(n-i.weekStartsOn+8)%7||7;switch(t){case"c":return String(a);case"cc":return Ci(a,t.length);case"co":return r.ordinalNumber(a,{unit:"day"});case"ccc":return r.day(n,{width:"abbreviated",context:"standalone"});case"ccccc":return r.day(n,{width:"narrow",context:"standalone"});case"cccccc":return r.day(n,{width:"short",context:"standalone"});case"cccc":default:return r.day(n,{width:"wide",context:"standalone"})}},i:function(e,t,r){const i=e.getDay(),n=i===0?7:i;switch(t){case"i":return String(n);case"ii":return Ci(n,t.length);case"io":return r.ordinalNumber(n,{unit:"day"});case"iii":return r.day(i,{width:"abbreviated",context:"formatting"});case"iiiii":return r.day(i,{width:"narrow",context:"formatting"});case"iiiiii":return r.day(i,{width:"short",context:"formatting"});case"iiii":default:return r.day(i,{width:"wide",context:"formatting"})}},a:function(e,t,r){const n=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return r.dayPeriod(n,{width:"abbreviated",context:"formatting"});case"aaa":return r.dayPeriod(n,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return r.dayPeriod(n,{width:"narrow",context:"formatting"});case"aaaa":default:return r.dayPeriod(n,{width:"wide",context:"formatting"})}},b:function(e,t,r){const i=e.getHours();let n;switch(i===12?n=ym.noon:i===0?n=ym.midnight:n=i/12>=1?"pm":"am",t){case"b":case"bb":return r.dayPeriod(n,{width:"abbreviated",context:"formatting"});case"bbb":return r.dayPeriod(n,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return r.dayPeriod(n,{width:"narrow",context:"formatting"});case"bbbb":default:return r.dayPeriod(n,{width:"wide",context:"formatting"})}},B:function(e,t,r){const i=e.getHours();let n;switch(i>=17?n=ym.evening:i>=12?n=ym.afternoon:i>=4?n=ym.morning:n=ym.night,t){case"B":case"BB":case"BBB":return r.dayPeriod(n,{width:"abbreviated",context:"formatting"});case"BBBBB":return r.dayPeriod(n,{width:"narrow",context:"formatting"});case"BBBB":default:return r.dayPeriod(n,{width:"wide",context:"formatting"})}},h:function(e,t,r){if(t==="ho"){let i=e.getHours()%12;return i===0&&(i=12),r.ordinalNumber(i,{unit:"hour"})}return Gd.h(e,t)},H:function(e,t,r){return t==="Ho"?r.ordinalNumber(e.getHours(),{unit:"hour"}):Gd.H(e,t)},K:function(e,t,r){const i=e.getHours()%12;return t==="Ko"?r.ordinalNumber(i,{unit:"hour"}):Ci(i,t.length)},k:function(e,t,r){let i=e.getHours();return i===0&&(i=24),t==="ko"?r.ordinalNumber(i,{unit:"hour"}):Ci(i,t.length)},m:function(e,t,r){return t==="mo"?r.ordinalNumber(e.getMinutes(),{unit:"minute"}):Gd.m(e,t)},s:function(e,t,r){return t==="so"?r.ordinalNumber(e.getSeconds(),{unit:"second"}):Gd.s(e,t)},S:function(e,t){return Gd.S(e,t)},X:function(e,t,r){const i=e.getTimezoneOffset();if(i===0)return"Z";switch(t){case"X":return JU(i);case"XXXX":case"XX":return w0(i);case"XXXXX":case"XXX":default:return w0(i,":")}},x:function(e,t,r){const i=e.getTimezoneOffset();switch(t){case"x":return JU(i);case"xxxx":case"xx":return w0(i);case"xxxxx":case"xxx":default:return w0(i,":")}},O:function(e,t,r){const i=e.getTimezoneOffset();switch(t){case"O":case"OO":case"OOO":return"GMT"+KU(i,":");case"OOOO":default:return"GMT"+w0(i,":")}},z:function(e,t,r){const i=e.getTimezoneOffset();switch(t){case"z":case"zz":case"zzz":return"GMT"+KU(i,":");case"zzzz":default:return"GMT"+w0(i,":")}},t:function(e,t,r){const i=Math.trunc(e.getTime()/1e3);return Ci(i,t.length)},T:function(e,t,r){const i=e.getTime();return Ci(i,t.length)}};function KU(e,t=""){const r=e>0?"-":"+",i=Math.abs(e),n=Math.trunc(i/60),a=i%60;return a===0?r+String(n):r+String(n)+t+Ci(a,2)}function JU(e,t){return e%60===0?(e>0?"-":"+")+Ci(Math.abs(e)/60,2):w0(e,t)}function w0(e,t=""){const r=e>0?"-":"+",i=Math.abs(e),n=Ci(Math.trunc(i/60),2),a=Ci(i%60,2);return r+n+t+a}const $U=(e,t)=>{switch(e){case"P":return t.date({width:"short"});case"PP":return t.date({width:"medium"});case"PPP":return t.date({width:"long"});case"PPPP":default:return t.date({width:"full"})}},dse=(e,t)=>{switch(e){case"p":return t.time({width:"short"});case"pp":return t.time({width:"medium"});case"ppp":return t.time({width:"long"});case"pppp":default:return t.time({width:"full"})}},TAe=(e,t)=>{const r=e.match(/(P+)(p+)?/)||[],i=r[1],n=r[2];if(!n)return $U(e,t);let a;switch(i){case"P":a=t.dateTime({width:"short"});break;case"PP":a=t.dateTime({width:"medium"});break;case"PPP":a=t.dateTime({width:"long"});break;case"PPPP":default:a=t.dateTime({width:"full"});break}return a.replace("{{date}}",$U(i,t)).replace("{{time}}",dse(n,t))},PAe={p:dse,P:TAe},DAe=/^D+$/,IAe=/^Y+$/,LAe=["D","DD","YY","YYYY"];function kAe(e){return DAe.test(e)}function RAe(e){return IAe.test(e)}function OAe(e,t,r){const i=BAe(e,t,r);if(console.warn(i),LAe.includes(e))throw new RangeError(i)}function BAe(e,t,r){const i=e[0]==="Y"?"years":"days of the month";return`Use \`${e.toLowerCase()}\` instead of \`${e}\` (in \`${t}\`) for formatting ${i} to the input \`${r}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const NAe=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,VAe=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,FAe=/^'([^]*?)'?$/,zAe=/''/g,HAe=/[a-zA-Z]/;function eG(e,t,r){var c,h,d,f;const i=aC(),n=i.locale??AAe,a=i.firstWeekContainsDate??((h=(c=i.locale)==null?void 0:c.options)==null?void 0:h.firstWeekContainsDate)??1,o=i.weekStartsOn??((f=(d=i.locale)==null?void 0:d.options)==null?void 0:f.weekStartsOn)??0,s=Nu(e);if(!G5e(s))throw new RangeError("Invalid time value");let l=t.match(VAe).map(p=>{const v=p[0];if(v==="p"||v==="P"){const m=PAe[v];return m(p,n.formatLong)}return p}).join("").match(NAe).map(p=>{if(p==="''")return{isToken:!1,value:"'"};const v=p[0];if(v==="'")return{isToken:!1,value:UAe(p)};if(QU[v])return{isToken:!0,value:p};if(v.match(HAe))throw new RangeError("Format string contains an unescaped latin alphabet character `"+v+"`");return{isToken:!1,value:p}});n.localize.preprocessor&&(l=n.localize.preprocessor(s,l));const u={firstWeekContainsDate:a,weekStartsOn:o,locale:n};return l.map(p=>{if(!p.isToken)return p.value;const v=p.value;(RAe(v)||kAe(v))&&OAe(v,t,String(e));const m=QU[v[0]];return m(s,v,n.localize,u)}).join("")}function UAe(e){const t=e.match(FAe);return t?t[1].replace(zAe,"'"):e}/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var RI=function(e,t){return RI=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(r[n]=i[n])},RI(e,t)};function _e(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");RI(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}var GAe=function(){function e(){this.firefox=!1,this.ie=!1,this.edge=!1,this.newEdge=!1,this.weChat=!1}return e}(),jAe=function(){function e(){this.browser=new GAe,this.node=!1,this.wxa=!1,this.worker=!1,this.svgSupported=!1,this.touchEventsSupported=!1,this.pointerEventsSupported=!1,this.domSupported=!1,this.transformSupported=!1,this.transform3dSupported=!1,this.hasGlobalWindow=typeof window<"u"}return e}(),hr=new jAe;typeof wx=="object"&&typeof wx.getSystemInfoSync=="function"?(hr.wxa=!0,hr.touchEventsSupported=!0):typeof document>"u"&&typeof self<"u"?hr.worker=!0:typeof navigator>"u"||navigator.userAgent.indexOf("Node.js")===0?(hr.node=!0,hr.svgSupported=!0):WAe(navigator.userAgent,hr);function WAe(e,t){var r=t.browser,i=e.match(/Firefox\/([\d.]+)/),n=e.match(/MSIE\s([\d.]+)/)||e.match(/Trident\/.+?rv:(([\d.]+))/),a=e.match(/Edge?\/([\d.]+)/),o=/micromessenger/i.test(e);i&&(r.firefox=!0,r.version=i[1]),n&&(r.ie=!0,r.version=n[1]),a&&(r.edge=!0,r.version=a[1],r.newEdge=+a[1].split(".")[0]>18),o&&(r.weChat=!0),t.svgSupported=typeof SVGRect<"u",t.touchEventsSupported="ontouchstart"in window&&!r.ie&&!r.edge,t.pointerEventsSupported="onpointerdown"in window&&(r.edge||r.ie&&+r.version>=11),t.domSupported=typeof document<"u";var s=document.documentElement.style;t.transform3dSupported=(r.ie&&"transition"in s||r.edge||"WebKitCSSMatrix"in window&&"m11"in new WebKitCSSMatrix||"MozPerspective"in s)&&!("OTransition"in s),t.transformSupported=t.transform3dSupported||r.ie&&+r.version>=9}var UB=12,fse="sans-serif",cp=UB+"px "+fse,qAe=20,YAe=100,XAe="007LLmW'55;N0500LLLLLLLLLL00NNNLzWW\\\\WQb\\0FWLg\\bWb\\WQ\\WrWWQ000CL5LLFLL0LL**F*gLLLL5F0LF\\FFF5.5N";function ZAe(e){var t={};if(typeof JSON>"u")return t;for(var r=0;r<e.length;r++){var i=String.fromCharCode(r+32),n=(e.charCodeAt(r)-qAe)/YAe;t[i]=n}return t}var QAe=ZAe(XAe),hp={createCanvas:function(){return typeof document<"u"&&document.createElement("canvas")},measureText:function(){var e,t;return function(r,i){if(!e){var n=hp.createCanvas();e=n&&n.getContext("2d")}if(e)return t!==i&&(t=e.font=i||cp),e.measureText(r);r=r||"",i=i||cp;var a=/((?:\d+)?\.?\d*)px/.exec(i),o=a&&+a[1]||UB,s=0;if(i.indexOf("mono")>=0)s=o*r.length;else for(var l=0;l<r.length;l++){var u=QAe[r[l]];s+=u==null?o:u*o}return{width:s}}}(),loadImage:function(e,t,r){var i=new Image;return i.onload=t,i.onerror=r,i.src=e,i}},pse=Zc(["Function","RegExp","Date","Error","CanvasGradient","CanvasPattern","Image","Canvas"],function(e,t){return e["[object "+t+"]"]=!0,e},{}),vse=Zc(["Int8","Uint8","Uint8Clamped","Int16","Uint16","Int32","Uint32","Float32","Float64"],function(e,t){return e["[object "+t+"Array]"]=!0,e},{}),xy=Object.prototype.toString,oC=Array.prototype,KAe=oC.forEach,JAe=oC.filter,GB=oC.slice,$Ae=oC.map,tG=(function(){}).constructor,d3=tG?tG.prototype:null,jB="__proto__",e8e=2311;function mse(){return e8e++}function WB(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];typeof console<"u"&&console.error.apply(console,e)}function At(e){if(e==null||typeof e!="object")return e;var t=e,r=xy.call(e);if(r==="[object Array]"){if(!ib(e)){t=[];for(var i=0,n=e.length;i<n;i++)t[i]=At(e[i])}}else if(vse[r]){if(!ib(e)){var a=e.constructor;if(a.from)t=a.from(e);else{t=new a(e.length);for(var i=0,n=e.length;i<n;i++)t[i]=e[i]}}}else if(!pse[r]&&!ib(e)&&!B1(e)){t={};for(var o in e)e.hasOwnProperty(o)&&o!==jB&&(t[o]=At(e[o]))}return t}function Wt(e,t,r){if(!_t(t)||!_t(e))return r?At(t):e;for(var i in t)if(t.hasOwnProperty(i)&&i!==jB){var n=e[i],a=t[i];_t(a)&&_t(n)&&!Ue(a)&&!Ue(n)&&!B1(a)&&!B1(n)&&!rG(a)&&!rG(n)&&!ib(a)&&!ib(n)?Wt(n,a,r):(r||!(i in e))&&(e[i]=At(t[i]))}return e}function qB(e,t){for(var r=e[0],i=1,n=e.length;i<n;i++)r=Wt(r,e[i],t);return r}function Be(e,t){if(Object.assign)Object.assign(e,t);else for(var r in t)t.hasOwnProperty(r)&&r!==jB&&(e[r]=t[r]);return e}function bt(e,t,r){for(var i=mr(t),n=0;n<i.length;n++){var a=i[n];(r?t[a]!=null:e[a]==null)&&(e[a]=t[a])}return e}function tr(e,t){if(e){if(e.indexOf)return e.indexOf(t);for(var r=0,i=e.length;r<i;r++)if(e[r]===t)return r}return-1}function t8e(e,t){var r=e.prototype;function i(){}i.prototype=t.prototype,e.prototype=new i;for(var n in r)r.hasOwnProperty(n)&&(e.prototype[n]=r[n]);e.prototype.constructor=e,e.superClass=t}function Mn(e,t,r){if(e="prototype"in e?e.prototype:e,t="prototype"in t?t.prototype:t,Object.getOwnPropertyNames)for(var i=Object.getOwnPropertyNames(t),n=0;n<i.length;n++){var a=i[n];a!=="constructor"&&(r?t[a]!=null:e[a]==null)&&(e[a]=t[a])}else bt(e,t,r)}function _o(e){return!e||typeof e=="string"?!1:typeof e.length=="number"}function q(e,t,r){if(e&&t)if(e.forEach&&e.forEach===KAe)e.forEach(t,r);else if(e.length===+e.length)for(var i=0,n=e.length;i<n;i++)t.call(r,e[i],i,e);else for(var a in e)e.hasOwnProperty(a)&&t.call(r,e[a],a,e)}function qe(e,t,r){if(!e)return[];if(!t)return YB(e);if(e.map&&e.map===$Ae)return e.map(t,r);for(var i=[],n=0,a=e.length;n<a;n++)i.push(t.call(r,e[n],n,e));return i}function Zc(e,t,r,i){if(e&&t){for(var n=0,a=e.length;n<a;n++)r=t.call(i,r,e[n],n,e);return r}}function ni(e,t,r){if(!e)return[];if(!t)return YB(e);if(e.filter&&e.filter===JAe)return e.filter(t,r);for(var i=[],n=0,a=e.length;n<a;n++)t.call(r,e[n],n,e)&&i.push(e[n]);return i}function r8e(e,t,r){if(e&&t){for(var i=0,n=e.length;i<n;i++)if(t.call(r,e[i],i,e))return e[i]}}function mr(e){if(!e)return[];if(Object.keys)return Object.keys(e);var t=[];for(var r in e)e.hasOwnProperty(r)&&t.push(r);return t}function i8e(e,t){for(var r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];return function(){return e.apply(t,r.concat(GB.call(arguments)))}}var at=d3&&xt(d3.bind)?d3.call.bind(d3.bind):i8e;function kt(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];return function(){return e.apply(this,t.concat(GB.call(arguments)))}}function Ue(e){return Array.isArray?Array.isArray(e):xy.call(e)==="[object Array]"}function xt(e){return typeof e=="function"}function it(e){return typeof e=="string"}function OI(e){return xy.call(e)==="[object String]"}function kr(e){return typeof e=="number"}function _t(e){var t=typeof e;return t==="function"||!!e&&t==="object"}function rG(e){return!!pse[xy.call(e)]}function Ss(e){return!!vse[xy.call(e)]}function B1(e){return typeof e=="object"&&typeof e.nodeType=="number"&&typeof e.ownerDocument=="object"}function sC(e){return e.colorStops!=null}function n8e(e){return e.image!=null}function a8e(e){return xy.call(e)==="[object RegExp]"}function qb(e){return e!==e}function xa(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];for(var r=0,i=e.length;r<i;r++)if(e[r]!=null)return e[r]}function Lt(e,t){return e??t}function Vc(e,t,r){return e??t??r}function YB(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];return GB.apply(e,t)}function XB(e){if(typeof e=="number")return[e,e,e,e];var t=e.length;return t===2?[e[0],e[1],e[0],e[1]]:t===3?[e[0],e[1],e[2],e[1]]:e}function Yo(e,t){if(!e)throw new Error(t)}function fu(e){return e==null?null:typeof e.trim=="function"?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")}var gse="__ec_primitive__";function A8(e){e[gse]=!0}function ib(e){return e[gse]}var o8e=function(){function e(){this.data={}}return e.prototype.delete=function(t){var r=this.has(t);return r&&delete this.data[t],r},e.prototype.has=function(t){return this.data.hasOwnProperty(t)},e.prototype.get=function(t){return this.data[t]},e.prototype.set=function(t,r){return this.data[t]=r,this},e.prototype.keys=function(){return mr(this.data)},e.prototype.forEach=function(t){var r=this.data;for(var i in r)r.hasOwnProperty(i)&&t(r[i],i)},e}(),yse=typeof Map=="function";function s8e(){return yse?new Map:new o8e}var l8e=function(){function e(t){var r=Ue(t);this.data=s8e();var i=this;t instanceof e?t.each(n):t&&q(t,n);function n(a,o){r?i.set(a,o):i.set(o,a)}}return e.prototype.hasKey=function(t){return this.data.has(t)},e.prototype.get=function(t){return this.data.get(t)},e.prototype.set=function(t,r){return this.data.set(t,r),r},e.prototype.each=function(t,r){this.data.forEach(function(i,n){t.call(r,i,n)})},e.prototype.keys=function(){var t=this.data.keys();return yse?Array.from(t):t},e.prototype.removeKey=function(t){this.data.delete(t)},e}();function dt(e){return new l8e(e)}function S8(e,t){for(var r=new e.constructor(e.length+t.length),i=0;i<e.length;i++)r[i]=e[i];for(var n=e.length,i=0;i<t.length;i++)r[i+n]=t[i];return r}function lC(e,t){var r;if(Object.create)r=Object.create(e);else{var i=function(){};i.prototype=e,r=new i}return t&&Be(r,t),r}function xse(e){var t=e.style;t.webkitUserSelect="none",t.userSelect="none",t.webkitTapHighlightColor="rgba(0,0,0,0)",t["-webkit-touch-callout"]="none"}function lt(e,t){return e.hasOwnProperty(t)}function pn(){}var uA=180/Math.PI;function Kv(e,t){return e==null&&(e=0),t==null&&(t=0),[e,t]}function Bo(e,t){return e[0]=t[0],e[1]=t[1],e}function ad(e){return[e[0],e[1]]}function u8e(e,t,r){return e[0]=t,e[1]=r,e}function iG(e,t,r){return e[0]=t[0]+r[0],e[1]=t[1]+r[1],e}function BI(e,t,r,i){return e[0]=t[0]+r[0]*i,e[1]=t[1]+r[1]*i,e}function U0(e,t,r){return e[0]=t[0]-r[0],e[1]=t[1]-r[1],e}function NI(e){return Math.sqrt(c8e(e))}function c8e(e){return e[0]*e[0]+e[1]*e[1]}function cA(e,t,r){return e[0]=t[0]*r,e[1]=t[1]*r,e}function by(e,t){var r=NI(t);return r===0?(e[0]=0,e[1]=0):(e[0]=t[0]/r,e[1]=t[1]/r),e}function VI(e,t){return Math.sqrt((e[0]-t[0])*(e[0]-t[0])+(e[1]-t[1])*(e[1]-t[1]))}var kf=VI;function h8e(e,t){return(e[0]-t[0])*(e[0]-t[0])+(e[1]-t[1])*(e[1]-t[1])}var fv=h8e;function hA(e,t,r,i){return e[0]=t[0]+i*(r[0]-t[0]),e[1]=t[1]+i*(r[1]-t[1]),e}function Wa(e,t,r){var i=t[0],n=t[1];return e[0]=r[0]*i+r[2]*n+r[4],e[1]=r[1]*i+r[3]*n+r[5],e}function Rf(e,t,r){return e[0]=Math.min(t[0],r[0]),e[1]=Math.min(t[1],r[1]),e}function Of(e,t,r){return e[0]=Math.max(t[0],r[0]),e[1]=Math.max(t[1],r[1]),e}var xm=function(){function e(t,r){this.target=t,this.topTarget=r&&r.topTarget}return e}(),d8e=function(){function e(t){this.handler=t,t.on("mousedown",this._dragStart,this),t.on("mousemove",this._drag,this),t.on("mouseup",this._dragEnd,this)}return e.prototype._dragStart=function(t){for(var r=t.target;r&&!r.draggable;)r=r.parent||r.__hostTarget;r&&(this._draggingTarget=r,r.dragging=!0,this._x=t.offsetX,this._y=t.offsetY,this.handler.dispatchToElement(new xm(r,t),"dragstart",t.event))},e.prototype._drag=function(t){var r=this._draggingTarget;if(r){var i=t.offsetX,n=t.offsetY,a=i-this._x,o=n-this._y;this._x=i,this._y=n,r.drift(a,o,t),this.handler.dispatchToElement(new xm(r,t),"drag",t.event);var s=this.handler.findHover(i,n,r).target,l=this._dropTarget;this._dropTarget=s,r!==s&&(l&&s!==l&&this.handler.dispatchToElement(new xm(l,t),"dragleave",t.event),s&&s!==l&&this.handler.dispatchToElement(new xm(s,t),"dragenter",t.event))}},e.prototype._dragEnd=function(t){var r=this._draggingTarget;r&&(r.dragging=!1),this.handler.dispatchToElement(new xm(r,t),"dragend",t.event),this._dropTarget&&this.handler.dispatchToElement(new xm(this._dropTarget,t),"drop",t.event),this._draggingTarget=null,this._dropTarget=null},e}(),Vl=function(){function e(t){t&&(this._$eventProcessor=t)}return e.prototype.on=function(t,r,i,n){this._$handlers||(this._$handlers={});var a=this._$handlers;if(typeof r=="function"&&(n=i,i=r,r=null),!i||!t)return this;var o=this._$eventProcessor;r!=null&&o&&o.normalizeQuery&&(r=o.normalizeQuery(r)),a[t]||(a[t]=[]);for(var s=0;s<a[t].length;s++)if(a[t][s].h===i)return this;var l={h:i,query:r,ctx:n||this,callAtLast:i.zrEventfulCallAtLast},u=a[t].length-1,c=a[t][u];return c&&c.callAtLast?a[t].splice(u,0,l):a[t].push(l),this},e.prototype.isSilent=function(t){var r=this._$handlers;return!r||!r[t]||!r[t].length},e.prototype.off=function(t,r){var i=this._$handlers;if(!i)return this;if(!t)return this._$handlers={},this;if(r){if(i[t]){for(var n=[],a=0,o=i[t].length;a<o;a++)i[t][a].h!==r&&n.push(i[t][a]);i[t]=n}i[t]&&i[t].length===0&&delete i[t]}else delete i[t];return this},e.prototype.trigger=function(t){for(var r=[],i=1;i<arguments.length;i++)r[i-1]=arguments[i];if(!this._$handlers)return this;var n=this._$handlers[t],a=this._$eventProcessor;if(n)for(var o=r.length,s=n.length,l=0;l<s;l++){var u=n[l];if(!(a&&a.filter&&u.query!=null&&!a.filter(t,u.query)))switch(o){case 0:u.h.call(u.ctx);break;case 1:u.h.call(u.ctx,r[0]);break;case 2:u.h.call(u.ctx,r[0],r[1]);break;default:u.h.apply(u.ctx,r);break}}return a&&a.afterTrigger&&a.afterTrigger(t),this},e.prototype.triggerWithContext=function(t){for(var r=[],i=1;i<arguments.length;i++)r[i-1]=arguments[i];if(!this._$handlers)return this;var n=this._$handlers[t],a=this._$eventProcessor;if(n)for(var o=r.length,s=r[o-1],l=n.length,u=0;u<l;u++){var c=n[u];if(!(a&&a.filter&&c.query!=null&&!a.filter(t,c.query)))switch(o){case 0:c.h.call(s);break;case 1:c.h.call(s,r[0]);break;case 2:c.h.call(s,r[0],r[1]);break;default:c.h.apply(s,r.slice(1,o-1));break}}return a&&a.afterTrigger&&a.afterTrigger(t),this},e}(),f8e=Math.log(2);function FI(e,t,r,i,n,a){var o=i+"-"+n,s=e.length;if(a.hasOwnProperty(o))return a[o];if(t===1){var l=Math.round(Math.log((1<<s)-1&~n)/f8e);return e[r][l]}for(var u=i|1<<r,c=r+1;i&1<<c;)c++;for(var h=0,d=0,f=0;d<s;d++){var p=1<<d;p&n||(h+=(f%2?-1:1)*e[r][d]*FI(e,t-1,c,u,n|p,a),f++)}return a[o]=h,h}function nG(e,t){var r=[[e[0],e[1],1,0,0,0,-t[0]*e[0],-t[0]*e[1]],[0,0,0,e[0],e[1],1,-t[1]*e[0],-t[1]*e[1]],[e[2],e[3],1,0,0,0,-t[2]*e[2],-t[2]*e[3]],[0,0,0,e[2],e[3],1,-t[3]*e[2],-t[3]*e[3]],[e[4],e[5],1,0,0,0,-t[4]*e[4],-t[4]*e[5]],[0,0,0,e[4],e[5],1,-t[5]*e[4],-t[5]*e[5]],[e[6],e[7],1,0,0,0,-t[6]*e[6],-t[6]*e[7]],[0,0,0,e[6],e[7],1,-t[7]*e[6],-t[7]*e[7]]],i={},n=FI(r,8,0,0,0,i);if(n!==0){for(var a=[],o=0;o<8;o++)for(var s=0;s<8;s++)a[s]==null&&(a[s]=0),a[s]+=((o+s)%2?-1:1)*FI(r,7,o===0?1:0,1<<o,1<<s,i)/n*t[o];return function(l,u,c){var h=u*a[6]+c*a[7]+1;l[0]=(u*a[0]+c*a[1]+a[2])/h,l[1]=(u*a[3]+c*a[4]+a[5])/h}}}var aG="___zrEVENTSAVED",vE=[];function p8e(e,t,r,i,n){return zI(vE,t,i,n,!0)&&zI(e,r,vE[0],vE[1])}function zI(e,t,r,i,n){if(t.getBoundingClientRect&&hr.domSupported&&!bse(t)){var a=t[aG]||(t[aG]={}),o=v8e(t,a),s=m8e(o,a,n);if(s)return s(e,r,i),!0}return!1}function v8e(e,t){var r=t.markers;if(r)return r;r=t.markers=[];for(var i=["left","right"],n=["top","bottom"],a=0;a<4;a++){var o=document.createElement("div"),s=o.style,l=a%2,u=(a>>1)%2;s.cssText=["position: absolute","visibility: hidden","padding: 0","margin: 0","border-width: 0","user-select: none","width:0","height:0",i[l]+":0",n[u]+":0",i[1-l]+":auto",n[1-u]+":auto",""].join("!important;"),e.appendChild(o),r.push(o)}return r}function m8e(e,t,r){for(var i=r?"invTrans":"trans",n=t[i],a=t.srcCoords,o=[],s=[],l=!0,u=0;u<4;u++){var c=e[u].getBoundingClientRect(),h=2*u,d=c.left,f=c.top;o.push(d,f),l=l&&a&&d===a[h]&&f===a[h+1],s.push(e[u].offsetLeft,e[u].offsetTop)}return l&&n?n:(t.srcCoords=o,t[i]=r?nG(s,o):nG(o,s))}function bse(e){return e.nodeName.toUpperCase()==="CANVAS"}var g8e=/([&<>"'])/g,y8e={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"};function ls(e){return e==null?"":(e+"").replace(g8e,function(t,r){return y8e[r]})}var x8e=/^(?:mouse|pointer|contextmenu|drag|drop)|click/,mE=[],b8e=hr.browser.firefox&&+hr.browser.version.split(".")[0]<39;function HI(e,t,r,i){return r=r||{},i?oG(e,t,r):b8e&&t.layerX!=null&&t.layerX!==t.offsetX?(r.zrX=t.layerX,r.zrY=t.layerY):t.offsetX!=null?(r.zrX=t.offsetX,r.zrY=t.offsetY):oG(e,t,r),r}function oG(e,t,r){if(hr.domSupported&&e.getBoundingClientRect){var i=t.clientX,n=t.clientY;if(bse(e)){var a=e.getBoundingClientRect();r.zrX=i-a.left,r.zrY=n-a.top;return}else if(zI(mE,e,i,n)){r.zrX=mE[0],r.zrY=mE[1];return}}r.zrX=r.zrY=0}function ZB(e){return e||window.event}function dl(e,t,r){if(t=ZB(t),t.zrX!=null)return t;var i=t.type,n=i&&i.indexOf("touch")>=0;if(n){var o=i!=="touchend"?t.targetTouches[0]:t.changedTouches[0];o&&HI(e,o,t,r)}else{HI(e,t,t,r);var a=w8e(t);t.zrDelta=a?a/120:-(t.detail||0)/3}var s=t.button;return t.which==null&&s!==void 0&&x8e.test(t.type)&&(t.which=s&1?1:s&2?3:s&4?2:0),t}function w8e(e){var t=e.wheelDelta;if(t)return t;var r=e.deltaX,i=e.deltaY;if(r==null||i==null)return t;var n=Math.abs(i!==0?i:r),a=i>0?-1:i<0?1:r>0?-1:1;return 3*n*a}function UI(e,t,r,i){e.addEventListener(t,r,i)}function _8e(e,t,r,i){e.removeEventListener(t,r,i)}var pd=function(e){e.preventDefault(),e.stopPropagation(),e.cancelBubble=!0};function sG(e){return e.which===2||e.which===3}var A8e=function(){function e(){this._track=[]}return e.prototype.recognize=function(t,r,i){return this._doTrack(t,r,i),this._recognize(t)},e.prototype.clear=function(){return this._track.length=0,this},e.prototype._doTrack=function(t,r,i){var n=t.touches;if(n){for(var a={points:[],touches:[],target:r,event:t},o=0,s=n.length;o<s;o++){var l=n[o],u=HI(i,l,{});a.points.push([u.zrX,u.zrY]),a.touches.push(l)}this._track.push(a)}},e.prototype._recognize=function(t){for(var r in gE)if(gE.hasOwnProperty(r)){var i=gE[r](this._track,t);if(i)return i}},e}();function lG(e){var t=e[1][0]-e[0][0],r=e[1][1]-e[0][1];return Math.sqrt(t*t+r*r)}function S8e(e){return[(e[0][0]+e[1][0])/2,(e[0][1]+e[1][1])/2]}var gE={pinch:function(e,t){var r=e.length;if(r){var i=(e[r-1]||{}).points,n=(e[r-2]||{}).points||i;if(n&&n.length>1&&i&&i.length>1){var a=lG(i)/lG(n);!isFinite(a)&&(a=1),t.pinchScale=a;var o=S8e(i);return t.pinchX=o[0],t.pinchY=o[1],{type:"pinch",target:e[0].target,event:t}}}}};function js(){return[1,0,0,1,0,0]}function uC(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=1,e[4]=0,e[5]=0,e}function QB(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e}function od(e,t,r){var i=t[0]*r[0]+t[2]*r[1],n=t[1]*r[0]+t[3]*r[1],a=t[0]*r[2]+t[2]*r[3],o=t[1]*r[2]+t[3]*r[3],s=t[0]*r[4]+t[2]*r[5]+t[4],l=t[1]*r[4]+t[3]*r[5]+t[5];return e[0]=i,e[1]=n,e[2]=a,e[3]=o,e[4]=s,e[5]=l,e}function Qc(e,t,r){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4]+r[0],e[5]=t[5]+r[1],e}function Jv(e,t,r,i){i===void 0&&(i=[0,0]);var n=t[0],a=t[2],o=t[4],s=t[1],l=t[3],u=t[5],c=Math.sin(r),h=Math.cos(r);return e[0]=n*h+s*c,e[1]=-n*c+s*h,e[2]=a*h+l*c,e[3]=-a*c+h*l,e[4]=h*(o-i[0])+c*(u-i[1])+i[0],e[5]=h*(u-i[1])-c*(o-i[0])+i[1],e}function KB(e,t,r){var i=r[0],n=r[1];return e[0]=t[0]*i,e[1]=t[1]*n,e[2]=t[2]*i,e[3]=t[3]*n,e[4]=t[4]*i,e[5]=t[5]*n,e}function wy(e,t){var r=t[0],i=t[2],n=t[4],a=t[1],o=t[3],s=t[5],l=r*o-a*i;return l?(l=1/l,e[0]=o*l,e[1]=-a*l,e[2]=-i*l,e[3]=r*l,e[4]=(i*s-o*n)*l,e[5]=(a*n-r*s)*l,e):null}function C8e(e){var t=js();return QB(t,e),t}var Ut=function(){function e(t,r){this.x=t||0,this.y=r||0}return e.prototype.copy=function(t){return this.x=t.x,this.y=t.y,this},e.prototype.clone=function(){return new e(this.x,this.y)},e.prototype.set=function(t,r){return this.x=t,this.y=r,this},e.prototype.equal=function(t){return t.x===this.x&&t.y===this.y},e.prototype.add=function(t){return this.x+=t.x,this.y+=t.y,this},e.prototype.scale=function(t){this.x*=t,this.y*=t},e.prototype.scaleAndAdd=function(t,r){this.x+=t.x*r,this.y+=t.y*r},e.prototype.sub=function(t){return this.x-=t.x,this.y-=t.y,this},e.prototype.dot=function(t){return this.x*t.x+this.y*t.y},e.prototype.len=function(){return Math.sqrt(this.x*this.x+this.y*this.y)},e.prototype.lenSquare=function(){return this.x*this.x+this.y*this.y},e.prototype.normalize=function(){var t=this.len();return this.x/=t,this.y/=t,this},e.prototype.distance=function(t){var r=this.x-t.x,i=this.y-t.y;return Math.sqrt(r*r+i*i)},e.prototype.distanceSquare=function(t){var r=this.x-t.x,i=this.y-t.y;return r*r+i*i},e.prototype.negate=function(){return this.x=-this.x,this.y=-this.y,this},e.prototype.transform=function(t){if(t){var r=this.x,i=this.y;return this.x=t[0]*r+t[2]*i+t[4],this.y=t[1]*r+t[3]*i+t[5],this}},e.prototype.toArray=function(t){return t[0]=this.x,t[1]=this.y,t},e.prototype.fromArray=function(t){this.x=t[0],this.y=t[1]},e.set=function(t,r,i){t.x=r,t.y=i},e.copy=function(t,r){t.x=r.x,t.y=r.y},e.len=function(t){return Math.sqrt(t.x*t.x+t.y*t.y)},e.lenSquare=function(t){return t.x*t.x+t.y*t.y},e.dot=function(t,r){return t.x*r.x+t.y*r.y},e.add=function(t,r,i){t.x=r.x+i.x,t.y=r.y+i.y},e.sub=function(t,r,i){t.x=r.x-i.x,t.y=r.y-i.y},e.scale=function(t,r,i){t.x=r.x*i,t.y=r.y*i},e.scaleAndAdd=function(t,r,i,n){t.x=r.x+i.x*n,t.y=r.y+i.y*n},e.lerp=function(t,r,i,n){var a=1-n;t.x=a*r.x+n*i.x,t.y=a*r.y+n*i.y},e}(),f3=Math.min,p3=Math.max,Op=new Ut,Bp=new Ut,Np=new Ut,Vp=new Ut,f2=new Ut,p2=new Ut,qt=function(){function e(t,r,i,n){i<0&&(t=t+i,i=-i),n<0&&(r=r+n,n=-n),this.x=t,this.y=r,this.width=i,this.height=n}return e.prototype.union=function(t){var r=f3(t.x,this.x),i=f3(t.y,this.y);isFinite(this.x)&&isFinite(this.width)?this.width=p3(t.x+t.width,this.x+this.width)-r:this.width=t.width,isFinite(this.y)&&isFinite(this.height)?this.height=p3(t.y+t.height,this.y+this.height)-i:this.height=t.height,this.x=r,this.y=i},e.prototype.applyTransform=function(t){e.applyTransform(this,this,t)},e.prototype.calculateTransform=function(t){var r=this,i=t.width/r.width,n=t.height/r.height,a=js();return Qc(a,a,[-r.x,-r.y]),KB(a,a,[i,n]),Qc(a,a,[t.x,t.y]),a},e.prototype.intersect=function(t,r){if(!t)return!1;t instanceof e||(t=e.create(t));var i=this,n=i.x,a=i.x+i.width,o=i.y,s=i.y+i.height,l=t.x,u=t.x+t.width,c=t.y,h=t.y+t.height,d=!(a<l||u<n||s<c||h<o);if(r){var f=1/0,p=0,v=Math.abs(a-l),m=Math.abs(u-n),g=Math.abs(s-c),y=Math.abs(h-o),x=Math.min(v,m),b=Math.min(g,y);a<l||u<n?x>p&&(p=x,v<m?Ut.set(p2,-v,0):Ut.set(p2,m,0)):x<f&&(f=x,v<m?Ut.set(f2,v,0):Ut.set(f2,-m,0)),s<c||h<o?b>p&&(p=b,g<y?Ut.set(p2,0,-g):Ut.set(p2,0,y)):x<f&&(f=x,g<y?Ut.set(f2,0,g):Ut.set(f2,0,-y))}return r&&Ut.copy(r,d?f2:p2),d},e.prototype.contain=function(t,r){var i=this;return t>=i.x&&t<=i.x+i.width&&r>=i.y&&r<=i.y+i.height},e.prototype.clone=function(){return new e(this.x,this.y,this.width,this.height)},e.prototype.copy=function(t){e.copy(this,t)},e.prototype.plain=function(){return{x:this.x,y:this.y,width:this.width,height:this.height}},e.prototype.isFinite=function(){return isFinite(this.x)&&isFinite(this.y)&&isFinite(this.width)&&isFinite(this.height)},e.prototype.isZero=function(){return this.width===0||this.height===0},e.create=function(t){return new e(t.x,t.y,t.width,t.height)},e.copy=function(t,r){t.x=r.x,t.y=r.y,t.width=r.width,t.height=r.height},e.applyTransform=function(t,r,i){if(!i){t!==r&&e.copy(t,r);return}if(i[1]<1e-5&&i[1]>-1e-5&&i[2]<1e-5&&i[2]>-1e-5){var n=i[0],a=i[3],o=i[4],s=i[5];t.x=r.x*n+o,t.y=r.y*a+s,t.width=r.width*n,t.height=r.height*a,t.width<0&&(t.x+=t.width,t.width=-t.width),t.height<0&&(t.y+=t.height,t.height=-t.height);return}Op.x=Np.x=r.x,Op.y=Vp.y=r.y,Bp.x=Vp.x=r.x+r.width,Bp.y=Np.y=r.y+r.height,Op.transform(i),Vp.transform(i),Bp.transform(i),Np.transform(i),t.x=f3(Op.x,Bp.x,Np.x,Vp.x),t.y=f3(Op.y,Bp.y,Np.y,Vp.y);var l=p3(Op.x,Bp.x,Np.x,Vp.x),u=p3(Op.y,Bp.y,Np.y,Vp.y);t.width=l-t.x,t.height=u-t.y},e}(),wse="silent";function E8e(e,t,r){return{type:e,event:r,target:t.target,topTarget:t.topTarget,cancelBubble:!1,offsetX:r.zrX,offsetY:r.zrY,gestureEvent:r.gestureEvent,pinchX:r.pinchX,pinchY:r.pinchY,pinchScale:r.pinchScale,wheelDelta:r.zrDelta,zrByTouch:r.zrByTouch,which:r.which,stop:M8e}}function M8e(){pd(this.event)}var T8e=function(e){_e(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.handler=null,r}return t.prototype.dispose=function(){},t.prototype.setCursor=function(){},t}(Vl),v2=function(){function e(t,r){this.x=t,this.y=r}return e}(),P8e=["click","dblclick","mousewheel","mouseout","mouseup","mousedown","mousemove","contextmenu"],yE=new qt(0,0,0,0),_se=function(e){_e(t,e);function t(r,i,n,a,o){var s=e.call(this)||this;return s._hovered=new v2(0,0),s.storage=r,s.painter=i,s.painterRoot=a,s._pointerSize=o,n=n||new T8e,s.proxy=null,s.setHandlerProxy(n),s._draggingMgr=new d8e(s),s}return t.prototype.setHandlerProxy=function(r){this.proxy&&this.proxy.dispose(),r&&(q(P8e,function(i){r.on&&r.on(i,this[i],this)},this),r.handler=this),this.proxy=r},t.prototype.mousemove=function(r){var i=r.zrX,n=r.zrY,a=Ase(this,i,n),o=this._hovered,s=o.target;s&&!s.__zr&&(o=this.findHover(o.x,o.y),s=o.target);var l=this._hovered=a?new v2(i,n):this.findHover(i,n),u=l.target,c=this.proxy;c.setCursor&&c.setCursor(u?u.cursor:"default"),s&&u!==s&&this.dispatchToElement(o,"mouseout",r),this.dispatchToElement(l,"mousemove",r),u&&u!==s&&this.dispatchToElement(l,"mouseover",r)},t.prototype.mouseout=function(r){var i=r.zrEventControl;i!=="only_globalout"&&this.dispatchToElement(this._hovered,"mouseout",r),i!=="no_globalout"&&this.trigger("globalout",{type:"globalout",event:r})},t.prototype.resize=function(){this._hovered=new v2(0,0)},t.prototype.dispatch=function(r,i){var n=this[r];n&&n.call(this,i)},t.prototype.dispose=function(){this.proxy.dispose(),this.storage=null,this.proxy=null,this.painter=null},t.prototype.setCursorStyle=function(r){var i=this.proxy;i.setCursor&&i.setCursor(r)},t.prototype.dispatchToElement=function(r,i,n){r=r||{};var a=r.target;if(!(a&&a.silent)){for(var o="on"+i,s=E8e(i,r,n);a&&(a[o]&&(s.cancelBubble=!!a[o].call(a,s)),a.trigger(i,s),a=a.__hostTarget?a.__hostTarget:a.parent,!s.cancelBubble););s.cancelBubble||(this.trigger(i,s),this.painter&&this.painter.eachOtherLayer&&this.painter.eachOtherLayer(function(l){typeof l[o]=="function"&&l[o].call(l,s),l.trigger&&l.trigger(i,s)}))}},t.prototype.findHover=function(r,i,n){var a=this.storage.getDisplayList(),o=new v2(r,i);if(uG(a,o,r,i,n),this._pointerSize&&!o.target){for(var s=[],l=this._pointerSize,u=l/2,c=new qt(r-u,i-u,l,l),h=a.length-1;h>=0;h--){var d=a[h];d!==n&&!d.ignore&&!d.ignoreCoarsePointer&&(!d.parent||!d.parent.ignoreCoarsePointer)&&(yE.copy(d.getBoundingRect()),d.transform&&yE.applyTransform(d.transform),yE.intersect(c)&&s.push(d))}if(s.length)for(var f=4,p=Math.PI/12,v=Math.PI*2,m=0;m<u;m+=f)for(var g=0;g<v;g+=p){var y=r+m*Math.cos(g),x=i+m*Math.sin(g);if(uG(s,o,y,x,n),o.target)return o}}return o},t.prototype.processGesture=function(r,i){this._gestureMgr||(this._gestureMgr=new A8e);var n=this._gestureMgr;i==="start"&&n.clear();var a=n.recognize(r,this.findHover(r.zrX,r.zrY,null).target,this.proxy.dom);if(i==="end"&&n.clear(),a){var o=a.type;r.gestureEvent=o;var s=new v2;s.target=a.target,this.dispatchToElement(s,o,a.event)}},t}(Vl);q(["click","mousedown","mouseup","mousewheel","dblclick","contextmenu"],function(e){_se.prototype[e]=function(t){var r=t.zrX,i=t.zrY,n=Ase(this,r,i),a,o;if((e!=="mouseup"||!n)&&(a=this.findHover(r,i),o=a.target),e==="mousedown")this._downEl=o,this._downPoint=[t.zrX,t.zrY],this._upEl=o;else if(e==="mouseup")this._upEl=o;else if(e==="click"){if(this._downEl!==this._upEl||!this._downPoint||kf(this._downPoint,[t.zrX,t.zrY])>4)return;this._downPoint=null}this.dispatchToElement(a,e,t)}});function D8e(e,t,r){if(e[e.rectHover?"rectContain":"contain"](t,r)){for(var i=e,n=void 0,a=!1;i;){if(i.ignoreClip&&(a=!0),!a){var o=i.getClipPath();if(o&&!o.contain(t,r))return!1}i.silent&&(n=!0);var s=i.__hostTarget;i=s||i.parent}return n?wse:!0}return!1}function uG(e,t,r,i,n){for(var a=e.length-1;a>=0;a--){var o=e[a],s=void 0;if(o!==n&&!o.ignore&&(s=D8e(o,r,i))&&(!t.topTarget&&(t.topTarget=o),s!==wse)){t.target=o;break}}}function Ase(e,t,r){var i=e.painter;return t<0||t>i.getWidth()||r<0||r>i.getHeight()}var Sse=32,m2=7;function I8e(e){for(var t=0;e>=Sse;)t|=e&1,e>>=1;return e+t}function cG(e,t,r,i){var n=t+1;if(n===r)return 1;if(i(e[n++],e[t])<0){for(;n<r&&i(e[n],e[n-1])<0;)n++;L8e(e,t,n)}else for(;n<r&&i(e[n],e[n-1])>=0;)n++;return n-t}function L8e(e,t,r){for(r--;t<r;){var i=e[t];e[t++]=e[r],e[r--]=i}}function hG(e,t,r,i,n){for(i===t&&i++;i<r;i++){for(var a=e[i],o=t,s=i,l;o<s;)l=o+s>>>1,n(a,e[l])<0?s=l:o=l+1;var u=i-o;switch(u){case 3:e[o+3]=e[o+2];case 2:e[o+2]=e[o+1];case 1:e[o+1]=e[o];break;default:for(;u>0;)e[o+u]=e[o+u-1],u--}e[o]=a}}function xE(e,t,r,i,n,a){var o=0,s=0,l=1;if(a(e,t[r+n])>0){for(s=i-n;l<s&&a(e,t[r+n+l])>0;)o=l,l=(l<<1)+1,l<=0&&(l=s);l>s&&(l=s),o+=n,l+=n}else{for(s=n+1;l<s&&a(e,t[r+n-l])<=0;)o=l,l=(l<<1)+1,l<=0&&(l=s);l>s&&(l=s);var u=o;o=n-l,l=n-u}for(o++;o<l;){var c=o+(l-o>>>1);a(e,t[r+c])>0?o=c+1:l=c}return l}function bE(e,t,r,i,n,a){var o=0,s=0,l=1;if(a(e,t[r+n])<0){for(s=n+1;l<s&&a(e,t[r+n-l])<0;)o=l,l=(l<<1)+1,l<=0&&(l=s);l>s&&(l=s);var u=o;o=n-l,l=n-u}else{for(s=i-n;l<s&&a(e,t[r+n+l])>=0;)o=l,l=(l<<1)+1,l<=0&&(l=s);l>s&&(l=s),o+=n,l+=n}for(o++;o<l;){var c=o+(l-o>>>1);a(e,t[r+c])<0?l=c:o=c+1}return l}function k8e(e,t){var r=m2,i,n,a=0,o=[];i=[],n=[];function s(f,p){i[a]=f,n[a]=p,a+=1}function l(){for(;a>1;){var f=a-2;if(f>=1&&n[f-1]<=n[f]+n[f+1]||f>=2&&n[f-2]<=n[f]+n[f-1])n[f-1]<n[f+1]&&f--;else if(n[f]>n[f+1])break;c(f)}}function u(){for(;a>1;){var f=a-2;f>0&&n[f-1]<n[f+1]&&f--,c(f)}}function c(f){var p=i[f],v=n[f],m=i[f+1],g=n[f+1];n[f]=v+g,f===a-3&&(i[f+1]=i[f+2],n[f+1]=n[f+2]),a--;var y=bE(e[m],e,p,v,0,t);p+=y,v-=y,v!==0&&(g=xE(e[p+v-1],e,m,g,g-1,t),g!==0&&(v<=g?h(p,v,m,g):d(p,v,m,g)))}function h(f,p,v,m){var g=0;for(g=0;g<p;g++)o[g]=e[f+g];var y=0,x=v,b=f;if(e[b++]=e[x++],--m===0){for(g=0;g<p;g++)e[b+g]=o[y+g];return}if(p===1){for(g=0;g<m;g++)e[b+g]=e[x+g];e[b+m]=o[y];return}for(var _=r,w,S,A;;){w=0,S=0,A=!1;do if(t(e[x],o[y])<0){if(e[b++]=e[x++],S++,w=0,--m===0){A=!0;break}}else if(e[b++]=o[y++],w++,S=0,--p===1){A=!0;break}while((w|S)<_);if(A)break;do{if(w=bE(e[x],o,y,p,0,t),w!==0){for(g=0;g<w;g++)e[b+g]=o[y+g];if(b+=w,y+=w,p-=w,p<=1){A=!0;break}}if(e[b++]=e[x++],--m===0){A=!0;break}if(S=xE(o[y],e,x,m,0,t),S!==0){for(g=0;g<S;g++)e[b+g]=e[x+g];if(b+=S,x+=S,m-=S,m===0){A=!0;break}}if(e[b++]=o[y++],--p===1){A=!0;break}_--}while(w>=m2||S>=m2);if(A)break;_<0&&(_=0),_+=2}if(r=_,r<1&&(r=1),p===1){for(g=0;g<m;g++)e[b+g]=e[x+g];e[b+m]=o[y]}else{if(p===0)throw new Error;for(g=0;g<p;g++)e[b+g]=o[y+g]}}function d(f,p,v,m){var g=0;for(g=0;g<m;g++)o[g]=e[v+g];var y=f+p-1,x=m-1,b=v+m-1,_=0,w=0;if(e[b--]=e[y--],--p===0){for(_=b-(m-1),g=0;g<m;g++)e[_+g]=o[g];return}if(m===1){for(b-=p,y-=p,w=b+1,_=y+1,g=p-1;g>=0;g--)e[w+g]=e[_+g];e[b]=o[x];return}for(var S=r;;){var A=0,M=0,E=!1;do if(t(o[x],e[y])<0){if(e[b--]=e[y--],A++,M=0,--p===0){E=!0;break}}else if(e[b--]=o[x--],M++,A=0,--m===1){E=!0;break}while((A|M)<S);if(E)break;do{if(A=p-bE(o[x],e,f,p,p-1,t),A!==0){for(b-=A,y-=A,p-=A,w=b+1,_=y+1,g=A-1;g>=0;g--)e[w+g]=e[_+g];if(p===0){E=!0;break}}if(e[b--]=o[x--],--m===1){E=!0;break}if(M=m-xE(e[y],o,0,m,m-1,t),M!==0){for(b-=M,x-=M,m-=M,w=b+1,_=x+1,g=0;g<M;g++)e[w+g]=o[_+g];if(m<=1){E=!0;break}}if(e[b--]=e[y--],--p===0){E=!0;break}S--}while(A>=m2||M>=m2);if(E)break;S<0&&(S=0),S+=2}if(r=S,r<1&&(r=1),m===1){for(b-=p,y-=p,w=b+1,_=y+1,g=p-1;g>=0;g--)e[w+g]=e[_+g];e[b]=o[x]}else{if(m===0)throw new Error;for(_=b-(m-1),g=0;g<m;g++)e[_+g]=o[g]}}return{mergeRuns:l,forceMergeRuns:u,pushRun:s}}function dA(e,t,r,i){r||(r=0),i||(i=e.length);var n=i-r;if(!(n<2)){var a=0;if(n<Sse){a=cG(e,r,i,t),hG(e,r,i,r+a,t);return}var o=k8e(e,t),s=I8e(n);do{if(a=cG(e,r,i,t),a<s){var l=n;l>s&&(l=s),hG(e,r,r+l,r+a,t),a=l}o.pushRun(r,a),o.mergeRuns(),n-=a,r+=a}while(n!==0);o.forceMergeRuns()}}var Fs=1,Tx=2,Sg=4,dG=!1;function wE(){dG||(dG=!0,console.warn("z / z2 / zlevel of displayable is invalid, which may cause unexpected errors"))}function fG(e,t){return e.zlevel===t.zlevel?e.z===t.z?e.z2-t.z2:e.z-t.z:e.zlevel-t.zlevel}var R8e=function(){function e(){this._roots=[],this._displayList=[],this._displayListLen=0,this.displayableSortFunc=fG}return e.prototype.traverse=function(t,r){for(var i=0;i<this._roots.length;i++)this._roots[i].traverse(t,r)},e.prototype.getDisplayList=function(t,r){r=r||!1;var i=this._displayList;return(t||!i.length)&&this.updateDisplayList(r),i},e.prototype.updateDisplayList=function(t){this._displayListLen=0;for(var r=this._roots,i=this._displayList,n=0,a=r.length;n<a;n++)this._updateAndAddDisplayable(r[n],null,t);i.length=this._displayListLen,dA(i,fG)},e.prototype._updateAndAddDisplayable=function(t,r,i){if(!(t.ignore&&!i)){t.beforeUpdate(),t.update(),t.afterUpdate();var n=t.getClipPath();if(t.ignoreClip)r=null;else if(n){r?r=r.slice():r=[];for(var a=n,o=t;a;)a.parent=o,a.updateTransform(),r.push(a),o=a,a=a.getClipPath()}if(t.childrenRef){for(var s=t.childrenRef(),l=0;l<s.length;l++){var u=s[l];t.__dirty&&(u.__dirty|=Fs),this._updateAndAddDisplayable(u,r,i)}t.__dirty=0}else{var c=t;r&&r.length?c.__clipPaths=r:c.__clipPaths&&c.__clipPaths.length>0&&(c.__clipPaths=[]),isNaN(c.z)&&(wE(),c.z=0),isNaN(c.z2)&&(wE(),c.z2=0),isNaN(c.zlevel)&&(wE(),c.zlevel=0),this._displayList[this._displayListLen++]=c}var h=t.getDecalElement&&t.getDecalElement();h&&this._updateAndAddDisplayable(h,r,i);var d=t.getTextGuideLine();d&&this._updateAndAddDisplayable(d,r,i);var f=t.getTextContent();f&&this._updateAndAddDisplayable(f,r,i)}},e.prototype.addRoot=function(t){t.__zr&&t.__zr.storage===this||this._roots.push(t)},e.prototype.delRoot=function(t){if(t instanceof Array){for(var r=0,i=t.length;r<i;r++)this.delRoot(t[r]);return}var n=tr(this._roots,t);n>=0&&this._roots.splice(n,1)},e.prototype.delAllRoots=function(){this._roots=[],this._displayList=[],this._displayListLen=0},e.prototype.getRoots=function(){return this._roots},e.prototype.dispose=function(){this._displayList=null,this._roots=null},e}(),C8;C8=hr.hasGlobalWindow&&(window.requestAnimationFrame&&window.requestAnimationFrame.bind(window)||window.msRequestAnimationFrame&&window.msRequestAnimationFrame.bind(window)||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame)||function(e){return setTimeout(e,16)};var nb={linear:function(e){return e},quadraticIn:function(e){return e*e},quadraticOut:function(e){return e*(2-e)},quadraticInOut:function(e){return(e*=2)<1?.5*e*e:-.5*(--e*(e-2)-1)},cubicIn:function(e){return e*e*e},cubicOut:function(e){return--e*e*e+1},cubicInOut:function(e){return(e*=2)<1?.5*e*e*e:.5*((e-=2)*e*e+2)},quarticIn:function(e){return e*e*e*e},quarticOut:function(e){return 1- --e*e*e*e},quarticInOut:function(e){return(e*=2)<1?.5*e*e*e*e:-.5*((e-=2)*e*e*e-2)},quinticIn:function(e){return e*e*e*e*e},quinticOut:function(e){return--e*e*e*e*e+1},quinticInOut:function(e){return(e*=2)<1?.5*e*e*e*e*e:.5*((e-=2)*e*e*e*e+2)},sinusoidalIn:function(e){return 1-Math.cos(e*Math.PI/2)},sinusoidalOut:function(e){return Math.sin(e*Math.PI/2)},sinusoidalInOut:function(e){return .5*(1-Math.cos(Math.PI*e))},exponentialIn:function(e){return e===0?0:Math.pow(1024,e-1)},exponentialOut:function(e){return e===1?1:1-Math.pow(2,-10*e)},exponentialInOut:function(e){return e===0?0:e===1?1:(e*=2)<1?.5*Math.pow(1024,e-1):.5*(-Math.pow(2,-10*(e-1))+2)},circularIn:function(e){return 1-Math.sqrt(1-e*e)},circularOut:function(e){return Math.sqrt(1- --e*e)},circularInOut:function(e){return(e*=2)<1?-.5*(Math.sqrt(1-e*e)-1):.5*(Math.sqrt(1-(e-=2)*e)+1)},elasticIn:function(e){var t,r=.1,i=.4;return e===0?0:e===1?1:(!r||r<1?(r=1,t=i/4):t=i*Math.asin(1/r)/(2*Math.PI),-(r*Math.pow(2,10*(e-=1))*Math.sin((e-t)*(2*Math.PI)/i)))},elasticOut:function(e){var t,r=.1,i=.4;return e===0?0:e===1?1:(!r||r<1?(r=1,t=i/4):t=i*Math.asin(1/r)/(2*Math.PI),r*Math.pow(2,-10*e)*Math.sin((e-t)*(2*Math.PI)/i)+1)},elasticInOut:function(e){var t,r=.1,i=.4;return e===0?0:e===1?1:(!r||r<1?(r=1,t=i/4):t=i*Math.asin(1/r)/(2*Math.PI),(e*=2)<1?-.5*(r*Math.pow(2,10*(e-=1))*Math.sin((e-t)*(2*Math.PI)/i)):r*Math.pow(2,-10*(e-=1))*Math.sin((e-t)*(2*Math.PI)/i)*.5+1)},backIn:function(e){var t=1.70158;return e*e*((t+1)*e-t)},backOut:function(e){var t=1.70158;return--e*e*((t+1)*e+t)+1},backInOut:function(e){var t=2.5949095;return(e*=2)<1?.5*(e*e*((t+1)*e-t)):.5*((e-=2)*e*((t+1)*e+t)+2)},bounceIn:function(e){return 1-nb.bounceOut(1-e)},bounceOut:function(e){return e<1/2.75?7.5625*e*e:e<2/2.75?7.5625*(e-=1.5/2.75)*e+.75:e<2.5/2.75?7.5625*(e-=2.25/2.75)*e+.9375:7.5625*(e-=2.625/2.75)*e+.984375},bounceInOut:function(e){return e<.5?nb.bounceIn(e*2)*.5:nb.bounceOut(e*2-1)*.5+.5}},v3=Math.pow,Jf=Math.sqrt,E8=1e-8,Cse=1e-4,pG=Jf(3),m3=1/3,wc=Kv(),wl=Kv(),l1=Kv();function Bf(e){return e>-E8&&e<E8}function Ese(e){return e>E8||e<-E8}function qn(e,t,r,i,n){var a=1-n;return a*a*(a*e+3*n*t)+n*n*(n*i+3*a*r)}function vG(e,t,r,i,n){var a=1-n;return 3*(((t-e)*a+2*(r-t)*n)*a+(i-r)*n*n)}function M8(e,t,r,i,n,a){var o=i+3*(t-r)-e,s=3*(r-t*2+e),l=3*(t-e),u=e-n,c=s*s-3*o*l,h=s*l-9*o*u,d=l*l-3*s*u,f=0;if(Bf(c)&&Bf(h))if(Bf(s))a[0]=0;else{var p=-l/s;p>=0&&p<=1&&(a[f++]=p)}else{var v=h*h-4*c*d;if(Bf(v)){var m=h/c,p=-s/o+m,g=-m/2;p>=0&&p<=1&&(a[f++]=p),g>=0&&g<=1&&(a[f++]=g)}else if(v>0){var y=Jf(v),x=c*s+1.5*o*(-h+y),b=c*s+1.5*o*(-h-y);x<0?x=-v3(-x,m3):x=v3(x,m3),b<0?b=-v3(-b,m3):b=v3(b,m3);var p=(-s-(x+b))/(3*o);p>=0&&p<=1&&(a[f++]=p)}else{var _=(2*c*s-3*o*h)/(2*Jf(c*c*c)),w=Math.acos(_)/3,S=Jf(c),A=Math.cos(w),p=(-s-2*S*A)/(3*o),g=(-s+S*(A+pG*Math.sin(w)))/(3*o),M=(-s+S*(A-pG*Math.sin(w)))/(3*o);p>=0&&p<=1&&(a[f++]=p),g>=0&&g<=1&&(a[f++]=g),M>=0&&M<=1&&(a[f++]=M)}}return f}function Mse(e,t,r,i,n){var a=6*r-12*t+6*e,o=9*t+3*i-3*e-9*r,s=3*t-3*e,l=0;if(Bf(o)){if(Ese(a)){var u=-s/a;u>=0&&u<=1&&(n[l++]=u)}}else{var c=a*a-4*o*s;if(Bf(c))n[0]=-a/(2*o);else if(c>0){var h=Jf(c),u=(-a+h)/(2*o),d=(-a-h)/(2*o);u>=0&&u<=1&&(n[l++]=u),d>=0&&d<=1&&(n[l++]=d)}}return l}function dp(e,t,r,i,n,a){var o=(t-e)*n+e,s=(r-t)*n+t,l=(i-r)*n+r,u=(s-o)*n+o,c=(l-s)*n+s,h=(c-u)*n+u;a[0]=e,a[1]=o,a[2]=u,a[3]=h,a[4]=h,a[5]=c,a[6]=l,a[7]=i}function Tse(e,t,r,i,n,a,o,s,l,u,c){var h,d=.005,f=1/0,p,v,m,g;wc[0]=l,wc[1]=u;for(var y=0;y<1;y+=.05)wl[0]=qn(e,r,n,o,y),wl[1]=qn(t,i,a,s,y),m=fv(wc,wl),m<f&&(h=y,f=m);f=1/0;for(var x=0;x<32&&!(d<Cse);x++)p=h-d,v=h+d,wl[0]=qn(e,r,n,o,p),wl[1]=qn(t,i,a,s,p),m=fv(wl,wc),p>=0&&m<f?(h=p,f=m):(l1[0]=qn(e,r,n,o,v),l1[1]=qn(t,i,a,s,v),g=fv(l1,wc),v<=1&&g<f?(h=v,f=g):d*=.5);return c&&(c[0]=qn(e,r,n,o,h),c[1]=qn(t,i,a,s,h)),Jf(f)}function O8e(e,t,r,i,n,a,o,s,l){for(var u=e,c=t,h=0,d=1/l,f=1;f<=l;f++){var p=f*d,v=qn(e,r,n,o,p),m=qn(t,i,a,s,p),g=v-u,y=m-c;h+=Math.sqrt(g*g+y*y),u=v,c=m}return h}function fa(e,t,r,i){var n=1-i;return n*(n*e+2*i*t)+i*i*r}function GI(e,t,r,i){return 2*((1-i)*(t-e)+i*(r-t))}function B8e(e,t,r,i,n){var a=e-2*t+r,o=2*(t-e),s=e-i,l=0;if(Bf(a)){if(Ese(o)){var u=-s/o;u>=0&&u<=1&&(n[l++]=u)}}else{var c=o*o-4*a*s;if(Bf(c)){var u=-o/(2*a);u>=0&&u<=1&&(n[l++]=u)}else if(c>0){var h=Jf(c),u=(-o+h)/(2*a),d=(-o-h)/(2*a);u>=0&&u<=1&&(n[l++]=u),d>=0&&d<=1&&(n[l++]=d)}}return l}function Pse(e,t,r){var i=e+r-2*t;return i===0?.5:(e-t)/i}function Yb(e,t,r,i,n){var a=(t-e)*i+e,o=(r-t)*i+t,s=(o-a)*i+a;n[0]=e,n[1]=a,n[2]=s,n[3]=s,n[4]=o,n[5]=r}function Dse(e,t,r,i,n,a,o,s,l){var u,c=.005,h=1/0;wc[0]=o,wc[1]=s;for(var d=0;d<1;d+=.05){wl[0]=fa(e,r,n,d),wl[1]=fa(t,i,a,d);var f=fv(wc,wl);f<h&&(u=d,h=f)}h=1/0;for(var p=0;p<32&&!(c<Cse);p++){var v=u-c,m=u+c;wl[0]=fa(e,r,n,v),wl[1]=fa(t,i,a,v);var f=fv(wl,wc);if(v>=0&&f<h)u=v,h=f;else{l1[0]=fa(e,r,n,m),l1[1]=fa(t,i,a,m);var g=fv(l1,wc);m<=1&&g<h?(u=m,h=g):c*=.5}}return l&&(l[0]=fa(e,r,n,u),l[1]=fa(t,i,a,u)),Jf(h)}function N8e(e,t,r,i,n,a,o){for(var s=e,l=t,u=0,c=1/o,h=1;h<=o;h++){var d=h*c,f=fa(e,r,n,d),p=fa(t,i,a,d),v=f-s,m=p-l;u+=Math.sqrt(v*v+m*m),s=f,l=p}return u}var V8e=/cubic-bezier\(([0-9,\.e ]+)\)/;function JB(e){var t=e&&V8e.exec(e);if(t){var r=t[1].split(","),i=+fu(r[0]),n=+fu(r[1]),a=+fu(r[2]),o=+fu(r[3]);if(isNaN(i+n+a+o))return;var s=[];return function(l){return l<=0?0:l>=1?1:M8(0,i,a,1,l,s)&&qn(0,n,o,1,s[0])}}}var F8e=function(){function e(t){this._inited=!1,this._startTime=0,this._pausedTime=0,this._paused=!1,this._life=t.life||1e3,this._delay=t.delay||0,this.loop=t.loop||!1,this.onframe=t.onframe||pn,this.ondestroy=t.ondestroy||pn,this.onrestart=t.onrestart||pn,t.easing&&this.setEasing(t.easing)}return e.prototype.step=function(t,r){if(this._inited||(this._startTime=t+this._delay,this._inited=!0),this._paused){this._pausedTime+=r;return}var i=this._life,n=t-this._startTime-this._pausedTime,a=n/i;a<0&&(a=0),a=Math.min(a,1);var o=this.easingFunc,s=o?o(a):a;if(this.onframe(s),a===1)if(this.loop){var l=n%i;this._startTime=t-l,this._pausedTime=0,this.onrestart()}else return!0;return!1},e.prototype.pause=function(){this._paused=!0},e.prototype.resume=function(){this._paused=!1},e.prototype.setEasing=function(t){this.easing=t,this.easingFunc=xt(t)?t:nb[t]||JB(t)},e}(),Ise=function(){function e(t){this.value=t}return e}(),z8e=function(){function e(){this._len=0}return e.prototype.insert=function(t){var r=new Ise(t);return this.insertEntry(r),r},e.prototype.insertEntry=function(t){this.head?(this.tail.next=t,t.prev=this.tail,t.next=null,this.tail=t):this.head=this.tail=t,this._len++},e.prototype.remove=function(t){var r=t.prev,i=t.next;r?r.next=i:this.head=i,i?i.prev=r:this.tail=r,t.next=t.prev=null,this._len--},e.prototype.len=function(){return this._len},e.prototype.clear=function(){this.head=this.tail=null,this._len=0},e}(),s4=function(){function e(t){this._list=new z8e,this._maxSize=10,this._map={},this._maxSize=t}return e.prototype.put=function(t,r){var i=this._list,n=this._map,a=null;if(n[t]==null){var o=i.len(),s=this._lastRemovedEntry;if(o>=this._maxSize&&o>0){var l=i.head;i.remove(l),delete n[l.key],a=l.value,this._lastRemovedEntry=l}s?s.value=r:s=new Ise(r),s.key=t,i.insertEntry(s),n[t]=s}return a},e.prototype.get=function(t){var r=this._map[t],i=this._list;if(r!=null)return r!==i.tail&&(i.remove(r),i.insertEntry(r)),r.value},e.prototype.clear=function(){this._list.clear(),this._map={}},e.prototype.len=function(){return this._list.len()},e}(),mG={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function _u(e){return e=Math.round(e),e<0?0:e>255?255:e}function H8e(e){return e=Math.round(e),e<0?0:e>360?360:e}function Xb(e){return e<0?0:e>1?1:e}function _E(e){var t=e;return t.length&&t.charAt(t.length-1)==="%"?_u(parseFloat(t)/100*255):_u(parseInt(t,10))}function pv(e){var t=e;return t.length&&t.charAt(t.length-1)==="%"?Xb(parseFloat(t)/100):Xb(parseFloat(t))}function AE(e,t,r){return r<0?r+=1:r>1&&(r-=1),r*6<1?e+(t-e)*r*6:r*2<1?t:r*3<2?e+(t-e)*(2/3-r)*6:e}function Nf(e,t,r){return e+(t-e)*r}function ul(e,t,r,i,n){return e[0]=t,e[1]=r,e[2]=i,e[3]=n,e}function jI(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e}var Lse=new s4(20),g3=null;function bm(e,t){g3&&jI(g3,t),g3=Lse.put(e,g3||t.slice())}function Ws(e,t){if(e){t=t||[];var r=Lse.get(e);if(r)return jI(t,r);e=e+"";var i=e.replace(/ /g,"").toLowerCase();if(i in mG)return jI(t,mG[i]),bm(e,t),t;var n=i.length;if(i.charAt(0)==="#"){if(n===4||n===5){var a=parseInt(i.slice(1,4),16);if(!(a>=0&&a<=4095)){ul(t,0,0,0,1);return}return ul(t,(a&3840)>>4|(a&3840)>>8,a&240|(a&240)>>4,a&15|(a&15)<<4,n===5?parseInt(i.slice(4),16)/15:1),bm(e,t),t}else if(n===7||n===9){var a=parseInt(i.slice(1,7),16);if(!(a>=0&&a<=16777215)){ul(t,0,0,0,1);return}return ul(t,(a&16711680)>>16,(a&65280)>>8,a&255,n===9?parseInt(i.slice(7),16)/255:1),bm(e,t),t}return}var o=i.indexOf("("),s=i.indexOf(")");if(o!==-1&&s+1===n){var l=i.substr(0,o),u=i.substr(o+1,s-(o+1)).split(","),c=1;switch(l){case"rgba":if(u.length!==4)return u.length===3?ul(t,+u[0],+u[1],+u[2],1):ul(t,0,0,0,1);c=pv(u.pop());case"rgb":if(u.length>=3)return ul(t,_E(u[0]),_E(u[1]),_E(u[2]),u.length===3?c:pv(u[3])),bm(e,t),t;ul(t,0,0,0,1);return;case"hsla":if(u.length!==4){ul(t,0,0,0,1);return}return u[3]=pv(u[3]),WI(u,t),bm(e,t),t;case"hsl":if(u.length!==3){ul(t,0,0,0,1);return}return WI(u,t),bm(e,t),t;default:return}}ul(t,0,0,0,1)}}function WI(e,t){var r=(parseFloat(e[0])%360+360)%360/360,i=pv(e[1]),n=pv(e[2]),a=n<=.5?n*(i+1):n+i-n*i,o=n*2-a;return t=t||[],ul(t,_u(AE(o,a,r+1/3)*255),_u(AE(o,a,r)*255),_u(AE(o,a,r-1/3)*255),1),e.length===4&&(t[3]=e[3]),t}function U8e(e){if(e){var t=e[0]/255,r=e[1]/255,i=e[2]/255,n=Math.min(t,r,i),a=Math.max(t,r,i),o=a-n,s=(a+n)/2,l,u;if(o===0)l=0,u=0;else{s<.5?u=o/(a+n):u=o/(2-a-n);var c=((a-t)/6+o/2)/o,h=((a-r)/6+o/2)/o,d=((a-i)/6+o/2)/o;t===a?l=d-h:r===a?l=1/3+c-d:i===a&&(l=2/3+h-c),l<0&&(l+=1),l>1&&(l-=1)}var f=[l*360,u,s];return e[3]!=null&&f.push(e[3]),f}}function qI(e,t){var r=Ws(e);if(r){for(var i=0;i<3;i++)t<0?r[i]=r[i]*(1-t)|0:r[i]=(255-r[i])*t+r[i]|0,r[i]>255?r[i]=255:r[i]<0&&(r[i]=0);return sd(r,r.length===4?"rgba":"rgb")}}function SE(e,t,r){if(!(!(t&&t.length)||!(e>=0&&e<=1))){r=r||[];var i=e*(t.length-1),n=Math.floor(i),a=Math.ceil(i),o=t[n],s=t[a],l=i-n;return r[0]=_u(Nf(o[0],s[0],l)),r[1]=_u(Nf(o[1],s[1],l)),r[2]=_u(Nf(o[2],s[2],l)),r[3]=Xb(Nf(o[3],s[3],l)),r}}function G8e(e,t,r){if(!(!(t&&t.length)||!(e>=0&&e<=1))){var i=e*(t.length-1),n=Math.floor(i),a=Math.ceil(i),o=Ws(t[n]),s=Ws(t[a]),l=i-n,u=sd([_u(Nf(o[0],s[0],l)),_u(Nf(o[1],s[1],l)),_u(Nf(o[2],s[2],l)),Xb(Nf(o[3],s[3],l))],"rgba");return r?{color:u,leftIndex:n,rightIndex:a,value:i}:u}}function ab(e,t,r,i){var n=Ws(e);if(e)return n=U8e(n),t!=null&&(n[0]=H8e(t)),r!=null&&(n[1]=pv(r)),i!=null&&(n[2]=pv(i)),sd(WI(n),"rgba")}function T8(e,t){var r=Ws(e);if(r&&t!=null)return r[3]=Xb(t),sd(r,"rgba")}function sd(e,t){if(!(!e||!e.length)){var r=e[0]+","+e[1]+","+e[2];return(t==="rgba"||t==="hsva"||t==="hsla")&&(r+=","+e[3]),t+"("+r+")"}}function P8(e,t){var r=Ws(e);return r?(.299*r[0]+.587*r[1]+.114*r[2])*r[3]/255+(1-r[3])*t:0}var gG=new s4(100);function YI(e){if(it(e)){var t=gG.get(e);return t||(t=qI(e,-.1),gG.put(e,t)),t}else if(sC(e)){var r=Be({},e);return r.colorStops=qe(e.colorStops,function(i){return{offset:i.offset,color:qI(i.color,-.1)}}),r}return e}var D8=Math.round;function Zb(e){var t;if(!e||e==="transparent")e="none";else if(typeof e=="string"&&e.indexOf("rgba")>-1){var r=Ws(e);r&&(e="rgb("+r[0]+","+r[1]+","+r[2]+")",t=r[3])}return{color:e,opacity:t??1}}var yG=1e-4;function Vf(e){return e<yG&&e>-yG}function y3(e){return D8(e*1e3)/1e3}function XI(e){return D8(e*1e4)/1e4}function j8e(e){return"matrix("+y3(e[0])+","+y3(e[1])+","+y3(e[2])+","+y3(e[3])+","+XI(e[4])+","+XI(e[5])+")"}var W8e={left:"start",right:"end",center:"middle",middle:"middle"};function q8e(e,t,r){return r==="top"?e+=t/2:r==="bottom"&&(e-=t/2),e}function Y8e(e){return e&&(e.shadowBlur||e.shadowOffsetX||e.shadowOffsetY)}function X8e(e){var t=e.style,r=e.getGlobalScale();return[t.shadowColor,(t.shadowBlur||0).toFixed(2),(t.shadowOffsetX||0).toFixed(2),(t.shadowOffsetY||0).toFixed(2),r[0],r[1]].join(",")}function kse(e){return e&&!!e.image}function Z8e(e){return e&&!!e.svgElement}function $B(e){return kse(e)||Z8e(e)}function Rse(e){return e.type==="linear"}function Ose(e){return e.type==="radial"}function Bse(e){return e&&(e.type==="linear"||e.type==="radial")}function cC(e){return"url(#"+e+")"}function Nse(e){var t=e.getGlobalScale(),r=Math.max(t[0],t[1]);return Math.max(Math.ceil(Math.log(r)/Math.log(10)),1)}function Vse(e){var t=e.x||0,r=e.y||0,i=(e.rotation||0)*uA,n=Lt(e.scaleX,1),a=Lt(e.scaleY,1),o=e.skewX||0,s=e.skewY||0,l=[];return(t||r)&&l.push("translate("+t+"px,"+r+"px)"),i&&l.push("rotate("+i+")"),(n!==1||a!==1)&&l.push("scale("+n+","+a+")"),(o||s)&&l.push("skew("+D8(o*uA)+"deg, "+D8(s*uA)+"deg)"),l.join(" ")}var Q8e=function(){return hr.hasGlobalWindow&&xt(window.btoa)?function(e){return window.btoa(unescape(encodeURIComponent(e)))}:typeof Buffer<"u"?function(e){return Buffer.from(e).toString("base64")}:function(e){return null}}(),ZI=Array.prototype.slice;function Rh(e,t,r){return(t-e)*r+e}function CE(e,t,r,i){for(var n=t.length,a=0;a<n;a++)e[a]=Rh(t[a],r[a],i);return e}function K8e(e,t,r,i){for(var n=t.length,a=n&&t[0].length,o=0;o<n;o++){e[o]||(e[o]=[]);for(var s=0;s<a;s++)e[o][s]=Rh(t[o][s],r[o][s],i)}return e}function x3(e,t,r,i){for(var n=t.length,a=0;a<n;a++)e[a]=t[a]+r[a]*i;return e}function xG(e,t,r,i){for(var n=t.length,a=n&&t[0].length,o=0;o<n;o++){e[o]||(e[o]=[]);for(var s=0;s<a;s++)e[o][s]=t[o][s]+r[o][s]*i}return e}function J8e(e,t){for(var r=e.length,i=t.length,n=r>i?t:e,a=Math.min(r,i),o=n[a-1]||{color:[0,0,0,0],offset:0},s=a;s<Math.max(r,i);s++)n.push({offset:o.offset,color:o.color.slice()})}function $8e(e,t,r){var i=e,n=t;if(!(!i.push||!n.push)){var a=i.length,o=n.length;if(a!==o){var s=a>o;if(s)i.length=o;else for(var l=a;l<o;l++)i.push(r===1?n[l]:ZI.call(n[l]))}for(var u=i[0]&&i[0].length,l=0;l<i.length;l++)if(r===1)isNaN(i[l])&&(i[l]=n[l]);else for(var c=0;c<u;c++)isNaN(i[l][c])&&(i[l][c]=n[l][c])}}function ob(e){if(_o(e)){var t=e.length;if(_o(e[0])){for(var r=[],i=0;i<t;i++)r.push(ZI.call(e[i]));return r}return ZI.call(e)}return e}function fA(e){return e[0]=Math.floor(e[0])||0,e[1]=Math.floor(e[1])||0,e[2]=Math.floor(e[2])||0,e[3]=e[3]==null?1:e[3],"rgba("+e.join(",")+")"}function eSe(e){return _o(e&&e[0])?2:1}var b3=0,pA=1,Fse=2,Px=3,QI=4,KI=5,bG=6;function wG(e){return e===QI||e===KI}function w3(e){return e===pA||e===Fse}var g2=[0,0,0,0],tSe=function(){function e(t){this.keyframes=[],this.discrete=!1,this._invalid=!1,this._needsSort=!1,this._lastFr=0,this._lastFrP=0,this.propName=t}return e.prototype.isFinished=function(){return this._finished},e.prototype.setFinished=function(){this._finished=!0,this._additiveTrack&&this._additiveTrack.setFinished()},e.prototype.needsAnimate=function(){return this.keyframes.length>=1},e.prototype.getAdditiveTrack=function(){return this._additiveTrack},e.prototype.addKeyframe=function(t,r,i){this._needsSort=!0;var n=this.keyframes,a=n.length,o=!1,s=bG,l=r;if(_o(r)){var u=eSe(r);s=u,(u===1&&!kr(r[0])||u===2&&!kr(r[0][0]))&&(o=!0)}else if(kr(r)&&!qb(r))s=b3;else if(it(r))if(!isNaN(+r))s=b3;else{var c=Ws(r);c&&(l=c,s=Px)}else if(sC(r)){var h=Be({},l);h.colorStops=qe(r.colorStops,function(f){return{offset:f.offset,color:Ws(f.color)}}),Rse(r)?s=QI:Ose(r)&&(s=KI),l=h}a===0?this.valType=s:(s!==this.valType||s===bG)&&(o=!0),this.discrete=this.discrete||o;var d={time:t,value:l,rawValue:r,percent:0};return i&&(d.easing=i,d.easingFunc=xt(i)?i:nb[i]||JB(i)),n.push(d),d},e.prototype.prepare=function(t,r){var i=this.keyframes;this._needsSort&&i.sort(function(v,m){return v.time-m.time});for(var n=this.valType,a=i.length,o=i[a-1],s=this.discrete,l=w3(n),u=wG(n),c=0;c<a;c++){var h=i[c],d=h.value,f=o.value;h.percent=h.time/t,s||(l&&c!==a-1?$8e(d,f,n):u&&J8e(d.colorStops,f.colorStops))}if(!s&&n!==KI&&r&&this.needsAnimate()&&r.needsAnimate()&&n===r.valType&&!r._finished){this._additiveTrack=r;for(var p=i[0].value,c=0;c<a;c++)n===b3?i[c].additiveValue=i[c].value-p:n===Px?i[c].additiveValue=x3([],i[c].value,p,-1):w3(n)&&(i[c].additiveValue=n===pA?x3([],i[c].value,p,-1):xG([],i[c].value,p,-1))}},e.prototype.step=function(t,r){if(!this._finished){this._additiveTrack&&this._additiveTrack._finished&&(this._additiveTrack=null);var i=this._additiveTrack!=null,n=i?"additiveValue":"value",a=this.valType,o=this.keyframes,s=o.length,l=this.propName,u=a===Px,c,h=this._lastFr,d=Math.min,f,p;if(s===1)f=p=o[0];else{if(r<0)c=0;else if(r<this._lastFrP){var v=d(h+1,s-1);for(c=v;c>=0&&!(o[c].percent<=r);c--);c=d(c,s-2)}else{for(c=h;c<s&&!(o[c].percent>r);c++);c=d(c-1,s-2)}p=o[c+1],f=o[c]}if(f&&p){this._lastFr=c,this._lastFrP=r;var m=p.percent-f.percent,g=m===0?1:d((r-f.percent)/m,1);p.easingFunc&&(g=p.easingFunc(g));var y=i?this._additiveValue:u?g2:t[l];if((w3(a)||u)&&!y&&(y=this._additiveValue=[]),this.discrete)t[l]=g<1?f.rawValue:p.rawValue;else if(w3(a))a===pA?CE(y,f[n],p[n],g):K8e(y,f[n],p[n],g);else if(wG(a)){var x=f[n],b=p[n],_=a===QI;t[l]={type:_?"linear":"radial",x:Rh(x.x,b.x,g),y:Rh(x.y,b.y,g),colorStops:qe(x.colorStops,function(S,A){var M=b.colorStops[A];return{offset:Rh(S.offset,M.offset,g),color:fA(CE([],S.color,M.color,g))}}),global:b.global},_?(t[l].x2=Rh(x.x2,b.x2,g),t[l].y2=Rh(x.y2,b.y2,g)):t[l].r=Rh(x.r,b.r,g)}else if(u)CE(y,f[n],p[n],g),i||(t[l]=fA(y));else{var w=Rh(f[n],p[n],g);i?this._additiveValue=w:t[l]=w}i&&this._addToTarget(t)}}},e.prototype._addToTarget=function(t){var r=this.valType,i=this.propName,n=this._additiveValue;r===b3?t[i]=t[i]+n:r===Px?(Ws(t[i],g2),x3(g2,g2,n,1),t[i]=fA(g2)):r===pA?x3(t[i],t[i],n,1):r===Fse&&xG(t[i],t[i],n,1)},e}(),eN=function(){function e(t,r,i,n){if(this._tracks={},this._trackKeys=[],this._maxTime=0,this._started=0,this._clip=null,this._target=t,this._loop=r,r&&n){WB("Can' use additive animation on looped animation.");return}this._additiveAnimators=n,this._allowDiscrete=i}return e.prototype.getMaxTime=function(){return this._maxTime},e.prototype.getDelay=function(){return this._delay},e.prototype.getLoop=function(){return this._loop},e.prototype.getTarget=function(){return this._target},e.prototype.changeTarget=function(t){this._target=t},e.prototype.when=function(t,r,i){return this.whenWithKeys(t,r,mr(r),i)},e.prototype.whenWithKeys=function(t,r,i,n){for(var a=this._tracks,o=0;o<i.length;o++){var s=i[o],l=a[s];if(!l){l=a[s]=new tSe(s);var u=void 0,c=this._getAdditiveTrack(s);if(c){var h=c.keyframes,d=h[h.length-1];u=d&&d.value,c.valType===Px&&u&&(u=fA(u))}else u=this._target[s];if(u==null)continue;t>0&&l.addKeyframe(0,ob(u),n),this._trackKeys.push(s)}l.addKeyframe(t,ob(r[s]),n)}return this._maxTime=Math.max(this._maxTime,t),this},e.prototype.pause=function(){this._clip.pause(),this._paused=!0},e.prototype.resume=function(){this._clip.resume(),this._paused=!1},e.prototype.isPaused=function(){return!!this._paused},e.prototype.duration=function(t){return this._maxTime=t,this._force=!0,this},e.prototype._doneCallback=function(){this._setTracksFinished(),this._clip=null;var t=this._doneCbs;if(t)for(var r=t.length,i=0;i<r;i++)t[i].call(this)},e.prototype._abortedCallback=function(){this._setTracksFinished();var t=this.animation,r=this._abortedCbs;if(t&&t.removeClip(this._clip),this._clip=null,r)for(var i=0;i<r.length;i++)r[i].call(this)},e.prototype._setTracksFinished=function(){for(var t=this._tracks,r=this._trackKeys,i=0;i<r.length;i++)t[r[i]].setFinished()},e.prototype._getAdditiveTrack=function(t){var r,i=this._additiveAnimators;if(i)for(var n=0;n<i.length;n++){var a=i[n].getTrack(t);a&&(r=a)}return r},e.prototype.start=function(t){if(!(this._started>0)){this._started=1;for(var r=this,i=[],n=this._maxTime||0,a=0;a<this._trackKeys.length;a++){var o=this._trackKeys[a],s=this._tracks[o],l=this._getAdditiveTrack(o),u=s.keyframes,c=u.length;if(s.prepare(n,l),s.needsAnimate())if(!this._allowDiscrete&&s.discrete){var h=u[c-1];h&&(r._target[s.propName]=h.rawValue),s.setFinished()}else i.push(s)}if(i.length||this._force){var d=new F8e({life:n,loop:this._loop,delay:this._delay||0,onframe:function(f){r._started=2;var p=r._additiveAnimators;if(p){for(var v=!1,m=0;m<p.length;m++)if(p[m]._clip){v=!0;break}v||(r._additiveAnimators=null)}for(var m=0;m<i.length;m++)i[m].step(r._target,f);var g=r._onframeCbs;if(g)for(var m=0;m<g.length;m++)g[m](r._target,f)},ondestroy:function(){r._doneCallback()}});this._clip=d,this.animation&&this.animation.addClip(d),t&&d.setEasing(t)}else this._doneCallback();return this}},e.prototype.stop=function(t){if(this._clip){var r=this._clip;t&&r.onframe(1),this._abortedCallback()}},e.prototype.delay=function(t){return this._delay=t,this},e.prototype.during=function(t){return t&&(this._onframeCbs||(this._onframeCbs=[]),this._onframeCbs.push(t)),this},e.prototype.done=function(t){return t&&(this._doneCbs||(this._doneCbs=[]),this._doneCbs.push(t)),this},e.prototype.aborted=function(t){return t&&(this._abortedCbs||(this._abortedCbs=[]),this._abortedCbs.push(t)),this},e.prototype.getClip=function(){return this._clip},e.prototype.getTrack=function(t){return this._tracks[t]},e.prototype.getTracks=function(){var t=this;return qe(this._trackKeys,function(r){return t._tracks[r]})},e.prototype.stopTracks=function(t,r){if(!t.length||!this._clip)return!0;for(var i=this._tracks,n=this._trackKeys,a=0;a<t.length;a++){var o=i[t[a]];o&&!o.isFinished()&&(r?o.step(this._target,1):this._started===1&&o.step(this._target,0),o.setFinished())}for(var s=!0,a=0;a<n.length;a++)if(!i[n[a]].isFinished()){s=!1;break}return s&&this._abortedCallback(),s},e.prototype.saveTo=function(t,r,i){if(t){r=r||this._trackKeys;for(var n=0;n<r.length;n++){var a=r[n],o=this._tracks[a];if(!(!o||o.isFinished())){var s=o.keyframes,l=s[i?0:s.length-1];l&&(t[a]=ob(l.rawValue))}}}},e.prototype.__changeFinalValue=function(t,r){r=r||mr(t);for(var i=0;i<r.length;i++){var n=r[i],a=this._tracks[n];if(a){var o=a.keyframes;if(o.length>1){var s=o.pop();a.addKeyframe(s.time,t[n]),a.prepare(this._maxTime,a.getAdditiveTrack())}}}},e}();function zg(){return new Date().getTime()}var rSe=function(e){_e(t,e);function t(r){var i=e.call(this)||this;return i._running=!1,i._time=0,i._pausedTime=0,i._pauseStart=0,i._paused=!1,r=r||{},i.stage=r.stage||{},i}return t.prototype.addClip=function(r){r.animation&&this.removeClip(r),this._head?(this._tail.next=r,r.prev=this._tail,r.next=null,this._tail=r):this._head=this._tail=r,r.animation=this},t.prototype.addAnimator=function(r){r.animation=this;var i=r.getClip();i&&this.addClip(i)},t.prototype.removeClip=function(r){if(r.animation){var i=r.prev,n=r.next;i?i.next=n:this._head=n,n?n.prev=i:this._tail=i,r.next=r.prev=r.animation=null}},t.prototype.removeAnimator=function(r){var i=r.getClip();i&&this.removeClip(i),r.animation=null},t.prototype.update=function(r){for(var i=zg()-this._pausedTime,n=i-this._time,a=this._head;a;){var o=a.next,s=a.step(i,n);s&&(a.ondestroy(),this.removeClip(a)),a=o}this._time=i,r||(this.trigger("frame",n),this.stage.update&&this.stage.update())},t.prototype._startLoop=function(){var r=this;this._running=!0;function i(){r._running&&(C8(i),!r._paused&&r.update())}C8(i)},t.prototype.start=function(){this._running||(this._time=zg(),this._pausedTime=0,this._startLoop())},t.prototype.stop=function(){this._running=!1},t.prototype.pause=function(){this._paused||(this._pauseStart=zg(),this._paused=!0)},t.prototype.resume=function(){this._paused&&(this._pausedTime+=zg()-this._pauseStart,this._paused=!1)},t.prototype.clear=function(){for(var r=this._head;r;){var i=r.next;r.prev=r.next=r.animation=null,r=i}this._head=this._tail=null},t.prototype.isFinished=function(){return this._head==null},t.prototype.animate=function(r,i){i=i||{},this.start();var n=new eN(r,i.loop);return this.addAnimator(n),n},t}(Vl),iSe=300,EE=hr.domSupported,ME=function(){var e=["click","dblclick","mousewheel","wheel","mouseout","mouseup","mousedown","mousemove","contextmenu"],t=["touchstart","touchend","touchmove"],r={pointerdown:1,pointerup:1,pointermove:1,pointerout:1},i=qe(e,function(n){var a=n.replace("mouse","pointer");return r.hasOwnProperty(a)?a:n});return{mouse:e,touch:t,pointer:i}}(),_G={mouse:["mousemove","mouseup"],pointer:["pointermove","pointerup"]},AG=!1;function JI(e){var t=e.pointerType;return t==="pen"||t==="touch"}function nSe(e){e.touching=!0,e.touchTimer!=null&&(clearTimeout(e.touchTimer),e.touchTimer=null),e.touchTimer=setTimeout(function(){e.touching=!1,e.touchTimer=null},700)}function TE(e){e&&(e.zrByTouch=!0)}function aSe(e,t){return dl(e.dom,new oSe(e,t),!0)}function zse(e,t){for(var r=t,i=!1;r&&r.nodeType!==9&&!(i=r.domBelongToZr||r!==t&&r===e.painterRoot);)r=r.parentNode;return i}var oSe=function(){function e(t,r){this.stopPropagation=pn,this.stopImmediatePropagation=pn,this.preventDefault=pn,this.type=r.type,this.target=this.currentTarget=t.dom,this.pointerType=r.pointerType,this.clientX=r.clientX,this.clientY=r.clientY}return e}(),ou={mousedown:function(e){e=dl(this.dom,e),this.__mayPointerCapture=[e.zrX,e.zrY],this.trigger("mousedown",e)},mousemove:function(e){e=dl(this.dom,e);var t=this.__mayPointerCapture;t&&(e.zrX!==t[0]||e.zrY!==t[1])&&this.__togglePointerCapture(!0),this.trigger("mousemove",e)},mouseup:function(e){e=dl(this.dom,e),this.__togglePointerCapture(!1),this.trigger("mouseup",e)},mouseout:function(e){e=dl(this.dom,e);var t=e.toElement||e.relatedTarget;zse(this,t)||(this.__pointerCapturing&&(e.zrEventControl="no_globalout"),this.trigger("mouseout",e))},wheel:function(e){AG=!0,e=dl(this.dom,e),this.trigger("mousewheel",e)},mousewheel:function(e){AG||(e=dl(this.dom,e),this.trigger("mousewheel",e))},touchstart:function(e){e=dl(this.dom,e),TE(e),this.__lastTouchMoment=new Date,this.handler.processGesture(e,"start"),ou.mousemove.call(this,e),ou.mousedown.call(this,e)},touchmove:function(e){e=dl(this.dom,e),TE(e),this.handler.processGesture(e,"change"),ou.mousemove.call(this,e)},touchend:function(e){e=dl(this.dom,e),TE(e),this.handler.processGesture(e,"end"),ou.mouseup.call(this,e),+new Date-+this.__lastTouchMoment<iSe&&ou.click.call(this,e)},pointerdown:function(e){ou.mousedown.call(this,e)},pointermove:function(e){JI(e)||ou.mousemove.call(this,e)},pointerup:function(e){ou.mouseup.call(this,e)},pointerout:function(e){JI(e)||ou.mouseout.call(this,e)}};q(["click","dblclick","contextmenu"],function(e){ou[e]=function(t){t=dl(this.dom,t),this.trigger(e,t)}});var $I={pointermove:function(e){JI(e)||$I.mousemove.call(this,e)},pointerup:function(e){$I.mouseup.call(this,e)},mousemove:function(e){this.trigger("mousemove",e)},mouseup:function(e){var t=this.__pointerCapturing;this.__togglePointerCapture(!1),this.trigger("mouseup",e),t&&(e.zrEventControl="only_globalout",this.trigger("mouseout",e))}};function sSe(e,t){var r=t.domHandlers;hr.pointerEventsSupported?q(ME.pointer,function(i){vA(t,i,function(n){r[i].call(e,n)})}):(hr.touchEventsSupported&&q(ME.touch,function(i){vA(t,i,function(n){r[i].call(e,n),nSe(t)})}),q(ME.mouse,function(i){vA(t,i,function(n){n=ZB(n),t.touching||r[i].call(e,n)})}))}function lSe(e,t){hr.pointerEventsSupported?q(_G.pointer,r):hr.touchEventsSupported||q(_G.mouse,r);function r(i){function n(a){a=ZB(a),zse(e,a.target)||(a=aSe(e,a),t.domHandlers[i].call(e,a))}vA(t,i,n,{capture:!0})}}function vA(e,t,r,i){e.mounted[t]=r,e.listenerOpts[t]=i,UI(e.domTarget,t,r,i)}function PE(e){var t=e.mounted;for(var r in t)t.hasOwnProperty(r)&&_8e(e.domTarget,r,t[r],e.listenerOpts[r]);e.mounted={}}var SG=function(){function e(t,r){this.mounted={},this.listenerOpts={},this.touching=!1,this.domTarget=t,this.domHandlers=r}return e}(),uSe=function(e){_e(t,e);function t(r,i){var n=e.call(this)||this;return n.__pointerCapturing=!1,n.dom=r,n.painterRoot=i,n._localHandlerScope=new SG(r,ou),EE&&(n._globalHandlerScope=new SG(document,$I)),sSe(n,n._localHandlerScope),n}return t.prototype.dispose=function(){PE(this._localHandlerScope),EE&&PE(this._globalHandlerScope)},t.prototype.setCursor=function(r){this.dom.style&&(this.dom.style.cursor=r||"default")},t.prototype.__togglePointerCapture=function(r){if(this.__mayPointerCapture=null,EE&&+this.__pointerCapturing^+r){this.__pointerCapturing=r;var i=this._globalHandlerScope;r?lSe(this,i):PE(i)}},t}(Vl),Hse=1;hr.hasGlobalWindow&&(Hse=Math.max(window.devicePixelRatio||window.screen&&window.screen.deviceXDPI/window.screen.logicalXDPI||1,1));var I8=Hse,eL=.4,tL="#333",rL="#ccc",cSe="#eee",CG=uC,EG=5e-5;function Fp(e){return e>EG||e<-EG}var zp=[],wm=[],DE=js(),IE=Math.abs,Qh=function(){function e(){}return e.prototype.getLocalTransform=function(t){return e.getLocalTransform(this,t)},e.prototype.setPosition=function(t){this.x=t[0],this.y=t[1]},e.prototype.setScale=function(t){this.scaleX=t[0],this.scaleY=t[1]},e.prototype.setSkew=function(t){this.skewX=t[0],this.skewY=t[1]},e.prototype.setOrigin=function(t){this.originX=t[0],this.originY=t[1]},e.prototype.needLocalTransform=function(){return Fp(this.rotation)||Fp(this.x)||Fp(this.y)||Fp(this.scaleX-1)||Fp(this.scaleY-1)||Fp(this.skewX)||Fp(this.skewY)},e.prototype.updateTransform=function(){var t=this.parent&&this.parent.transform,r=this.needLocalTransform(),i=this.transform;if(!(r||t)){i&&(CG(i),this.invTransform=null);return}i=i||js(),r?this.getLocalTransform(i):CG(i),t&&(r?od(i,t,i):QB(i,t)),this.transform=i,this._resolveGlobalScaleRatio(i)},e.prototype._resolveGlobalScaleRatio=function(t){var r=this.globalScaleRatio;if(r!=null&&r!==1){this.getGlobalScale(zp);var i=zp[0]<0?-1:1,n=zp[1]<0?-1:1,a=((zp[0]-i)*r+i)/zp[0]||0,o=((zp[1]-n)*r+n)/zp[1]||0;t[0]*=a,t[1]*=a,t[2]*=o,t[3]*=o}this.invTransform=this.invTransform||js(),wy(this.invTransform,t)},e.prototype.getComputedTransform=function(){for(var t=this,r=[];t;)r.push(t),t=t.parent;for(;t=r.pop();)t.updateTransform();return this.transform},e.prototype.setLocalTransform=function(t){if(t){var r=t[0]*t[0]+t[1]*t[1],i=t[2]*t[2]+t[3]*t[3],n=Math.atan2(t[1],t[0]),a=Math.PI/2+n-Math.atan2(t[3],t[2]);i=Math.sqrt(i)*Math.cos(a),r=Math.sqrt(r),this.skewX=a,this.skewY=0,this.rotation=-n,this.x=+t[4],this.y=+t[5],this.scaleX=r,this.scaleY=i,this.originX=0,this.originY=0}},e.prototype.decomposeTransform=function(){if(this.transform){var t=this.parent,r=this.transform;t&&t.transform&&(t.invTransform=t.invTransform||js(),od(wm,t.invTransform,r),r=wm);var i=this.originX,n=this.originY;(i||n)&&(DE[4]=i,DE[5]=n,od(wm,r,DE),wm[4]-=i,wm[5]-=n,r=wm),this.setLocalTransform(r)}},e.prototype.getGlobalScale=function(t){var r=this.transform;return t=t||[],r?(t[0]=Math.sqrt(r[0]*r[0]+r[1]*r[1]),t[1]=Math.sqrt(r[2]*r[2]+r[3]*r[3]),r[0]<0&&(t[0]=-t[0]),r[3]<0&&(t[1]=-t[1]),t):(t[0]=1,t[1]=1,t)},e.prototype.transformCoordToLocal=function(t,r){var i=[t,r],n=this.invTransform;return n&&Wa(i,i,n),i},e.prototype.transformCoordToGlobal=function(t,r){var i=[t,r],n=this.transform;return n&&Wa(i,i,n),i},e.prototype.getLineScale=function(){var t=this.transform;return t&&IE(t[0]-1)>1e-10&&IE(t[3]-1)>1e-10?Math.sqrt(IE(t[0]*t[3]-t[2]*t[1])):1},e.prototype.copyTransform=function(t){Use(this,t)},e.getLocalTransform=function(t,r){r=r||[];var i=t.originX||0,n=t.originY||0,a=t.scaleX,o=t.scaleY,s=t.anchorX,l=t.anchorY,u=t.rotation||0,c=t.x,h=t.y,d=t.skewX?Math.tan(t.skewX):0,f=t.skewY?Math.tan(-t.skewY):0;if(i||n||s||l){var p=i+s,v=n+l;r[4]=-p*a-d*v*o,r[5]=-v*o-f*p*a}else r[4]=r[5]=0;return r[0]=a,r[3]=o,r[1]=f*a,r[2]=d*o,u&&Jv(r,r,u),r[4]+=i+c,r[5]+=n+h,r},e.initDefaultProps=function(){var t=e.prototype;t.scaleX=t.scaleY=t.globalScaleRatio=1,t.x=t.y=t.originX=t.originY=t.skewX=t.skewY=t.rotation=t.anchorX=t.anchorY=0}(),e}(),Kc=["x","y","originX","originY","anchorX","anchorY","rotation","scaleX","scaleY","skewX","skewY"];function Use(e,t){for(var r=0;r<Kc.length;r++){var i=Kc[r];e[i]=t[i]}}var MG={};function qs(e,t){t=t||cp;var r=MG[t];r||(r=MG[t]=new s4(500));var i=r.get(e);return i==null&&(i=hp.measureText(e,t).width,r.put(e,i)),i}function TG(e,t,r,i){var n=qs(e,t),a=hC(t),o=Dx(0,n,r),s=Cg(0,a,i),l=new qt(o,s,n,a);return l}function l4(e,t,r,i){var n=((e||"")+"").split(`
`),a=n.length;if(a===1)return TG(n[0],t,r,i);for(var o=new qt(0,0,0,0),s=0;s<n.length;s++){var l=TG(n[s],t,r,i);s===0?o.copy(l):o.union(l)}return o}function Dx(e,t,r){return r==="right"?e-=t:r==="center"&&(e-=t/2),e}function Cg(e,t,r){return r==="middle"?e-=t/2:r==="bottom"&&(e-=t),e}function hC(e){return qs("国",e)}function Tu(e,t){return typeof e=="string"?e.lastIndexOf("%")>=0?parseFloat(e)/100*t:parseFloat(e):e}function L8(e,t,r){var i=t.position||"inside",n=t.distance!=null?t.distance:5,a=r.height,o=r.width,s=a/2,l=r.x,u=r.y,c="left",h="top";if(i instanceof Array)l+=Tu(i[0],r.width),u+=Tu(i[1],r.height),c=null,h=null;else switch(i){case"left":l-=n,u+=s,c="right",h="middle";break;case"right":l+=n+o,u+=s,h="middle";break;case"top":l+=o/2,u-=n,c="center",h="bottom";break;case"bottom":l+=o/2,u+=a+n,c="center";break;case"inside":l+=o/2,u+=s,c="center",h="middle";break;case"insideLeft":l+=n,u+=s,h="middle";break;case"insideRight":l+=o-n,u+=s,c="right",h="middle";break;case"insideTop":l+=o/2,u+=n,c="center";break;case"insideBottom":l+=o/2,u+=a-n,c="center",h="bottom";break;case"insideTopLeft":l+=n,u+=n;break;case"insideTopRight":l+=o-n,u+=n,c="right";break;case"insideBottomLeft":l+=n,u+=a-n,h="bottom";break;case"insideBottomRight":l+=o-n,u+=a-n,c="right",h="bottom";break}return e=e||{},e.x=l,e.y=u,e.align=c,e.verticalAlign=h,e}var LE="__zr_normal__",kE=Kc.concat(["ignore"]),hSe=Zc(Kc,function(e,t){return e[t]=!0,e},{ignore:!1}),_m={},dSe=new qt(0,0,0,0),dC=function(){function e(t){this.id=mse(),this.animators=[],this.currentStates=[],this.states={},this._init(t)}return e.prototype._init=function(t){this.attr(t)},e.prototype.drift=function(t,r,i){switch(this.draggable){case"horizontal":r=0;break;case"vertical":t=0;break}var n=this.transform;n||(n=this.transform=[1,0,0,1,0,0]),n[4]+=t,n[5]+=r,this.decomposeTransform(),this.markRedraw()},e.prototype.beforeUpdate=function(){},e.prototype.afterUpdate=function(){},e.prototype.update=function(){this.updateTransform(),this.__dirty&&this.updateInnerText()},e.prototype.updateInnerText=function(t){var r=this._textContent;if(r&&(!r.ignore||t)){this.textConfig||(this.textConfig={});var i=this.textConfig,n=i.local,a=r.innerTransformable,o=void 0,s=void 0,l=!1;a.parent=n?this:null;var u=!1;if(a.copyTransform(r),i.position!=null){var c=dSe;i.layoutRect?c.copy(i.layoutRect):c.copy(this.getBoundingRect()),n||c.applyTransform(this.transform),this.calculateTextPosition?this.calculateTextPosition(_m,i,c):L8(_m,i,c),a.x=_m.x,a.y=_m.y,o=_m.align,s=_m.verticalAlign;var h=i.origin;if(h&&i.rotation!=null){var d=void 0,f=void 0;h==="center"?(d=c.width*.5,f=c.height*.5):(d=Tu(h[0],c.width),f=Tu(h[1],c.height)),u=!0,a.originX=-a.x+d+(n?0:c.x),a.originY=-a.y+f+(n?0:c.y)}}i.rotation!=null&&(a.rotation=i.rotation);var p=i.offset;p&&(a.x+=p[0],a.y+=p[1],u||(a.originX=-p[0],a.originY=-p[1]));var v=i.inside==null?typeof i.position=="string"&&i.position.indexOf("inside")>=0:i.inside,m=this._innerTextDefaultStyle||(this._innerTextDefaultStyle={}),g=void 0,y=void 0,x=void 0;v&&this.canBeInsideText()?(g=i.insideFill,y=i.insideStroke,(g==null||g==="auto")&&(g=this.getInsideTextFill()),(y==null||y==="auto")&&(y=this.getInsideTextStroke(g),x=!0)):(g=i.outsideFill,y=i.outsideStroke,(g==null||g==="auto")&&(g=this.getOutsideFill()),(y==null||y==="auto")&&(y=this.getOutsideStroke(g),x=!0)),g=g||"#000",(g!==m.fill||y!==m.stroke||x!==m.autoStroke||o!==m.align||s!==m.verticalAlign)&&(l=!0,m.fill=g,m.stroke=y,m.autoStroke=x,m.align=o,m.verticalAlign=s,r.setDefaultTextStyle(m)),r.__dirty|=Fs,l&&r.dirtyStyle(!0)}},e.prototype.canBeInsideText=function(){return!0},e.prototype.getInsideTextFill=function(){return"#fff"},e.prototype.getInsideTextStroke=function(t){return"#000"},e.prototype.getOutsideFill=function(){return this.__zr&&this.__zr.isDarkMode()?rL:tL},e.prototype.getOutsideStroke=function(t){var r=this.__zr&&this.__zr.getBackgroundColor(),i=typeof r=="string"&&Ws(r);i||(i=[255,255,255,1]);for(var n=i[3],a=this.__zr.isDarkMode(),o=0;o<3;o++)i[o]=i[o]*n+(a?0:255)*(1-n);return i[3]=1,sd(i,"rgba")},e.prototype.traverse=function(t,r){},e.prototype.attrKV=function(t,r){t==="textConfig"?this.setTextConfig(r):t==="textContent"?this.setTextContent(r):t==="clipPath"?this.setClipPath(r):t==="extra"?(this.extra=this.extra||{},Be(this.extra,r)):this[t]=r},e.prototype.hide=function(){this.ignore=!0,this.markRedraw()},e.prototype.show=function(){this.ignore=!1,this.markRedraw()},e.prototype.attr=function(t,r){if(typeof t=="string")this.attrKV(t,r);else if(_t(t))for(var i=t,n=mr(i),a=0;a<n.length;a++){var o=n[a];this.attrKV(o,t[o])}return this.markRedraw(),this},e.prototype.saveCurrentToNormalState=function(t){this._innerSaveToNormal(t);for(var r=this._normalState,i=0;i<this.animators.length;i++){var n=this.animators[i],a=n.__fromStateTransition;if(!(n.getLoop()||a&&a!==LE)){var o=n.targetName,s=o?r[o]:r;n.saveTo(s)}}},e.prototype._innerSaveToNormal=function(t){var r=this._normalState;r||(r=this._normalState={}),t.textConfig&&!r.textConfig&&(r.textConfig=this.textConfig),this._savePrimaryToNormal(t,r,kE)},e.prototype._savePrimaryToNormal=function(t,r,i){for(var n=0;n<i.length;n++){var a=i[n];t[a]!=null&&!(a in r)&&(r[a]=this[a])}},e.prototype.hasState=function(){return this.currentStates.length>0},e.prototype.getState=function(t){return this.states[t]},e.prototype.ensureState=function(t){var r=this.states;return r[t]||(r[t]={}),r[t]},e.prototype.clearStates=function(t){this.useState(LE,!1,t)},e.prototype.useState=function(t,r,i,n){var a=t===LE,o=this.hasState();if(!(!o&&a)){var s=this.currentStates,l=this.stateTransition;if(!(tr(s,t)>=0&&(r||s.length===1))){var u;if(this.stateProxy&&!a&&(u=this.stateProxy(t)),u||(u=this.states&&this.states[t]),!u&&!a){WB("State "+t+" not exists.");return}a||this.saveCurrentToNormalState(u);var c=!!(u&&u.hoverLayer||n);c&&this._toggleHoverLayerFlag(!0),this._applyStateObj(t,u,this._normalState,r,!i&&!this.__inHover&&l&&l.duration>0,l);var h=this._textContent,d=this._textGuide;return h&&h.useState(t,r,i,c),d&&d.useState(t,r,i,c),a?(this.currentStates=[],this._normalState={}):r?this.currentStates.push(t):this.currentStates=[t],this._updateAnimationTargets(),this.markRedraw(),!c&&this.__inHover&&(this._toggleHoverLayerFlag(!1),this.__dirty&=~Fs),u}}},e.prototype.useStates=function(t,r,i){if(!t.length)this.clearStates();else{var n=[],a=this.currentStates,o=t.length,s=o===a.length;if(s){for(var l=0;l<o;l++)if(t[l]!==a[l]){s=!1;break}}if(s)return;for(var l=0;l<o;l++){var u=t[l],c=void 0;this.stateProxy&&(c=this.stateProxy(u,t)),c||(c=this.states[u]),c&&n.push(c)}var h=n[o-1],d=!!(h&&h.hoverLayer||i);d&&this._toggleHoverLayerFlag(!0);var f=this._mergeStates(n),p=this.stateTransition;this.saveCurrentToNormalState(f),this._applyStateObj(t.join(","),f,this._normalState,!1,!r&&!this.__inHover&&p&&p.duration>0,p);var v=this._textContent,m=this._textGuide;v&&v.useStates(t,r,d),m&&m.useStates(t,r,d),this._updateAnimationTargets(),this.currentStates=t.slice(),this.markRedraw(),!d&&this.__inHover&&(this._toggleHoverLayerFlag(!1),this.__dirty&=~Fs)}},e.prototype.isSilent=function(){for(var t=this.silent,r=this.parent;!t&&r;){if(r.silent){t=!0;break}r=r.parent}return t},e.prototype._updateAnimationTargets=function(){for(var t=0;t<this.animators.length;t++){var r=this.animators[t];r.targetName&&r.changeTarget(this[r.targetName])}},e.prototype.removeState=function(t){var r=tr(this.currentStates,t);if(r>=0){var i=this.currentStates.slice();i.splice(r,1),this.useStates(i)}},e.prototype.replaceState=function(t,r,i){var n=this.currentStates.slice(),a=tr(n,t),o=tr(n,r)>=0;a>=0?o?n.splice(a,1):n[a]=r:i&&!o&&n.push(r),this.useStates(n)},e.prototype.toggleState=function(t,r){r?this.useState(t,!0):this.removeState(t)},e.prototype._mergeStates=function(t){for(var r={},i,n=0;n<t.length;n++){var a=t[n];Be(r,a),a.textConfig&&(i=i||{},Be(i,a.textConfig))}return i&&(r.textConfig=i),r},e.prototype._applyStateObj=function(t,r,i,n,a,o){var s=!(r&&n);r&&r.textConfig?(this.textConfig=Be({},n?this.textConfig:i.textConfig),Be(this.textConfig,r.textConfig)):s&&i.textConfig&&(this.textConfig=i.textConfig);for(var l={},u=!1,c=0;c<kE.length;c++){var h=kE[c],d=a&&hSe[h];r&&r[h]!=null?d?(u=!0,l[h]=r[h]):this[h]=r[h]:s&&i[h]!=null&&(d?(u=!0,l[h]=i[h]):this[h]=i[h])}if(!a)for(var c=0;c<this.animators.length;c++){var f=this.animators[c],p=f.targetName;f.getLoop()||f.__changeFinalValue(p?(r||i)[p]:r||i)}u&&this._transitionState(t,l,o)},e.prototype._attachComponent=function(t){if(!(t.__zr&&!t.__hostTarget)&&t!==this){var r=this.__zr;r&&t.addSelfToZr(r),t.__zr=r,t.__hostTarget=this}},e.prototype._detachComponent=function(t){t.__zr&&t.removeSelfFromZr(t.__zr),t.__zr=null,t.__hostTarget=null},e.prototype.getClipPath=function(){return this._clipPath},e.prototype.setClipPath=function(t){this._clipPath&&this._clipPath!==t&&this.removeClipPath(),this._attachComponent(t),this._clipPath=t,this.markRedraw()},e.prototype.removeClipPath=function(){var t=this._clipPath;t&&(this._detachComponent(t),this._clipPath=null,this.markRedraw())},e.prototype.getTextContent=function(){return this._textContent},e.prototype.setTextContent=function(t){var r=this._textContent;r!==t&&(r&&r!==t&&this.removeTextContent(),t.innerTransformable=new Qh,this._attachComponent(t),this._textContent=t,this.markRedraw())},e.prototype.setTextConfig=function(t){this.textConfig||(this.textConfig={}),Be(this.textConfig,t),this.markRedraw()},e.prototype.removeTextConfig=function(){this.textConfig=null,this.markRedraw()},e.prototype.removeTextContent=function(){var t=this._textContent;t&&(t.innerTransformable=null,this._detachComponent(t),this._textContent=null,this._innerTextDefaultStyle=null,this.markRedraw())},e.prototype.getTextGuideLine=function(){return this._textGuide},e.prototype.setTextGuideLine=function(t){this._textGuide&&this._textGuide!==t&&this.removeTextGuideLine(),this._attachComponent(t),this._textGuide=t,this.markRedraw()},e.prototype.removeTextGuideLine=function(){var t=this._textGuide;t&&(this._detachComponent(t),this._textGuide=null,this.markRedraw())},e.prototype.markRedraw=function(){this.__dirty|=Fs;var t=this.__zr;t&&(this.__inHover?t.refreshHover():t.refresh()),this.__hostTarget&&this.__hostTarget.markRedraw()},e.prototype.dirty=function(){this.markRedraw()},e.prototype._toggleHoverLayerFlag=function(t){this.__inHover=t;var r=this._textContent,i=this._textGuide;r&&(r.__inHover=t),i&&(i.__inHover=t)},e.prototype.addSelfToZr=function(t){if(this.__zr!==t){this.__zr=t;var r=this.animators;if(r)for(var i=0;i<r.length;i++)t.animation.addAnimator(r[i]);this._clipPath&&this._clipPath.addSelfToZr(t),this._textContent&&this._textContent.addSelfToZr(t),this._textGuide&&this._textGuide.addSelfToZr(t)}},e.prototype.removeSelfFromZr=function(t){if(this.__zr){this.__zr=null;var r=this.animators;if(r)for(var i=0;i<r.length;i++)t.animation.removeAnimator(r[i]);this._clipPath&&this._clipPath.removeSelfFromZr(t),this._textContent&&this._textContent.removeSelfFromZr(t),this._textGuide&&this._textGuide.removeSelfFromZr(t)}},e.prototype.animate=function(t,r,i){var n=t?this[t]:this,a=new eN(n,r,i);return t&&(a.targetName=t),this.addAnimator(a,t),a},e.prototype.addAnimator=function(t,r){var i=this.__zr,n=this;t.during(function(){n.updateDuringAnimation(r)}).done(function(){var a=n.animators,o=tr(a,t);o>=0&&a.splice(o,1)}),this.animators.push(t),i&&i.animation.addAnimator(t),i&&i.wakeUp()},e.prototype.updateDuringAnimation=function(t){this.markRedraw()},e.prototype.stopAnimation=function(t,r){for(var i=this.animators,n=i.length,a=[],o=0;o<n;o++){var s=i[o];!t||t===s.scope?s.stop(r):a.push(s)}return this.animators=a,this},e.prototype.animateTo=function(t,r,i){RE(this,t,r,i)},e.prototype.animateFrom=function(t,r,i){RE(this,t,r,i,!0)},e.prototype._transitionState=function(t,r,i,n){for(var a=RE(this,r,i,n),o=0;o<a.length;o++)a[o].__fromStateTransition=t},e.prototype.getBoundingRect=function(){return null},e.prototype.getPaintRect=function(){return null},e.initDefaultProps=function(){var t=e.prototype;t.type="element",t.name="",t.ignore=t.silent=t.isGroup=t.draggable=t.dragging=t.ignoreClip=t.__inHover=!1,t.__dirty=Fs;function r(i,n,a,o){Object.defineProperty(t,i,{get:function(){if(!this[n]){var l=this[n]=[];s(this,l)}return this[n]},set:function(l){this[a]=l[0],this[o]=l[1],this[n]=l,s(this,l)}});function s(l,u){Object.defineProperty(u,0,{get:function(){return l[a]},set:function(c){l[a]=c}}),Object.defineProperty(u,1,{get:function(){return l[o]},set:function(c){l[o]=c}})}}Object.defineProperty&&(r("position","_legacyPos","x","y"),r("scale","_legacyScale","scaleX","scaleY"),r("origin","_legacyOrigin","originX","originY"))}(),e}();Mn(dC,Vl);Mn(dC,Qh);function RE(e,t,r,i,n){r=r||{};var a=[];Gse(e,"",e,t,r,i,a,n);var o=a.length,s=!1,l=r.done,u=r.aborted,c=function(){s=!0,o--,o<=0&&(s?l&&l():u&&u())},h=function(){o--,o<=0&&(s?l&&l():u&&u())};o||l&&l(),a.length>0&&r.during&&a[0].during(function(p,v){r.during(v)});for(var d=0;d<a.length;d++){var f=a[d];c&&f.done(c),h&&f.aborted(h),r.force&&f.duration(r.duration),f.start(r.easing)}return a}function OE(e,t,r){for(var i=0;i<r;i++)e[i]=t[i]}function fSe(e){return _o(e[0])}function pSe(e,t,r){if(_o(t[r]))if(_o(e[r])||(e[r]=[]),Ss(t[r])){var i=t[r].length;e[r].length!==i&&(e[r]=new t[r].constructor(i),OE(e[r],t[r],i))}else{var n=t[r],a=e[r],o=n.length;if(fSe(n))for(var s=n[0].length,l=0;l<o;l++)a[l]?OE(a[l],n[l],s):a[l]=Array.prototype.slice.call(n[l]);else OE(a,n,o);a.length=n.length}else e[r]=t[r]}function vSe(e,t){return e===t||_o(e)&&_o(t)&&mSe(e,t)}function mSe(e,t){var r=e.length;if(r!==t.length)return!1;for(var i=0;i<r;i++)if(e[i]!==t[i])return!1;return!0}function Gse(e,t,r,i,n,a,o,s){for(var l=mr(i),u=n.duration,c=n.delay,h=n.additive,d=n.setToFinal,f=!_t(a),p=e.animators,v=[],m=0;m<l.length;m++){var g=l[m],y=i[g];if(y!=null&&r[g]!=null&&(f||a[g]))if(_t(y)&&!_o(y)&&!sC(y)){if(t){s||(r[g]=y,e.updateDuringAnimation(t));continue}Gse(e,g,r[g],y,n,a&&a[g],o,s)}else v.push(g);else s||(r[g]=y,e.updateDuringAnimation(t),v.push(g))}var x=v.length;if(!h&&x)for(var b=0;b<p.length;b++){var _=p[b];if(_.targetName===t){var w=_.stopTracks(v);if(w){var S=tr(p,_);p.splice(S,1)}}}if(n.force||(v=ni(v,function(T){return!vSe(i[T],r[T])}),x=v.length),x>0||n.force&&!o.length){var A=void 0,M=void 0,E=void 0;if(s){M={},d&&(A={});for(var b=0;b<x;b++){var g=v[b];M[g]=r[g],d?A[g]=i[g]:r[g]=i[g]}}else if(d){E={};for(var b=0;b<x;b++){var g=v[b];E[g]=ob(r[g]),pSe(r,i,g)}}var _=new eN(r,!1,!1,h?ni(p,function(L){return L.targetName===t}):null);_.targetName=t,n.scope&&(_.scope=n.scope),d&&A&&_.whenWithKeys(0,A,v),E&&_.whenWithKeys(0,E,v),_.whenWithKeys(u??500,s?M:i,v).delay(c||0),e.addAnimator(_,t),o.push(_)}}var Ct=function(e){_e(t,e);function t(r){var i=e.call(this)||this;return i.isGroup=!0,i._children=[],i.attr(r),i}return t.prototype.childrenRef=function(){return this._children},t.prototype.children=function(){return this._children.slice()},t.prototype.childAt=function(r){return this._children[r]},t.prototype.childOfName=function(r){for(var i=this._children,n=0;n<i.length;n++)if(i[n].name===r)return i[n]},t.prototype.childCount=function(){return this._children.length},t.prototype.add=function(r){return r&&r!==this&&r.parent!==this&&(this._children.push(r),this._doAdd(r)),this},t.prototype.addBefore=function(r,i){if(r&&r!==this&&r.parent!==this&&i&&i.parent===this){var n=this._children,a=n.indexOf(i);a>=0&&(n.splice(a,0,r),this._doAdd(r))}return this},t.prototype.replace=function(r,i){var n=tr(this._children,r);return n>=0&&this.replaceAt(i,n),this},t.prototype.replaceAt=function(r,i){var n=this._children,a=n[i];if(r&&r!==this&&r.parent!==this&&r!==a){n[i]=r,a.parent=null;var o=this.__zr;o&&a.removeSelfFromZr(o),this._doAdd(r)}return this},t.prototype._doAdd=function(r){r.parent&&r.parent.remove(r),r.parent=this;var i=this.__zr;i&&i!==r.__zr&&r.addSelfToZr(i),i&&i.refresh()},t.prototype.remove=function(r){var i=this.__zr,n=this._children,a=tr(n,r);return a<0?this:(n.splice(a,1),r.parent=null,i&&r.removeSelfFromZr(i),i&&i.refresh(),this)},t.prototype.removeAll=function(){for(var r=this._children,i=this.__zr,n=0;n<r.length;n++){var a=r[n];i&&a.removeSelfFromZr(i),a.parent=null}return r.length=0,this},t.prototype.eachChild=function(r,i){for(var n=this._children,a=0;a<n.length;a++){var o=n[a];r.call(i,o,a)}return this},t.prototype.traverse=function(r,i){for(var n=0;n<this._children.length;n++){var a=this._children[n],o=r.call(i,a);a.isGroup&&!o&&a.traverse(r,i)}return this},t.prototype.addSelfToZr=function(r){e.prototype.addSelfToZr.call(this,r);for(var i=0;i<this._children.length;i++){var n=this._children[i];n.addSelfToZr(r)}},t.prototype.removeSelfFromZr=function(r){e.prototype.removeSelfFromZr.call(this,r);for(var i=0;i<this._children.length;i++){var n=this._children[i];n.removeSelfFromZr(r)}},t.prototype.getBoundingRect=function(r){for(var i=new qt(0,0,0,0),n=r||this._children,a=[],o=null,s=0;s<n.length;s++){var l=n[s];if(!(l.ignore||l.invisible)){var u=l.getBoundingRect(),c=l.getLocalTransform(a);c?(qt.applyTransform(i,u,c),o=o||i.clone(),o.union(i)):(o=o||u.clone(),o.union(u))}}return o||i},t}(dC);Ct.prototype.type="group";/*!
* ZRender, a high performance 2d drawing library.
*
* Copyright (c) 2013, Baidu Inc.
* All rights reserved.
*
* LICENSE
* https://github.com/ecomfe/zrender/blob/master/LICENSE.txt
*/var mA={},jse={};function gSe(e){delete jse[e]}function ySe(e){if(!e)return!1;if(typeof e=="string")return P8(e,1)<eL;if(e.colorStops){for(var t=e.colorStops,r=0,i=t.length,n=0;n<i;n++)r+=P8(t[n].color,1);return r/=i,r<eL}return!1}var xSe=function(){function e(t,r,i){var n=this;this._sleepAfterStill=10,this._stillFrameAccum=0,this._needsRefresh=!0,this._needsRefreshHover=!0,this._darkMode=!1,i=i||{},this.dom=r,this.id=t;var a=new R8e,o=i.renderer||"canvas";mA[o]||(o=mr(mA)[0]),i.useDirtyRect=i.useDirtyRect==null?!1:i.useDirtyRect;var s=new mA[o](r,a,i,t),l=i.ssr||s.ssrOnly;this.storage=a,this.painter=s;var u=!hr.node&&!hr.worker&&!l?new uSe(s.getViewportRoot(),s.root):null,c=i.useCoarsePointer,h=c==null||c==="auto"?hr.touchEventsSupported:!!c,d=44,f;h&&(f=Lt(i.pointerSize,d)),this.handler=new _se(a,s,u,s.root,f),this.animation=new rSe({stage:{update:l?null:function(){return n._flush(!0)}}}),l||this.animation.start()}return e.prototype.add=function(t){this._disposed||!t||(this.storage.addRoot(t),t.addSelfToZr(this),this.refresh())},e.prototype.remove=function(t){this._disposed||!t||(this.storage.delRoot(t),t.removeSelfFromZr(this),this.refresh())},e.prototype.configLayer=function(t,r){this._disposed||(this.painter.configLayer&&this.painter.configLayer(t,r),this.refresh())},e.prototype.setBackgroundColor=function(t){this._disposed||(this.painter.setBackgroundColor&&this.painter.setBackgroundColor(t),this.refresh(),this._backgroundColor=t,this._darkMode=ySe(t))},e.prototype.getBackgroundColor=function(){return this._backgroundColor},e.prototype.setDarkMode=function(t){this._darkMode=t},e.prototype.isDarkMode=function(){return this._darkMode},e.prototype.refreshImmediately=function(t){this._disposed||(t||this.animation.update(!0),this._needsRefresh=!1,this.painter.refresh(),this._needsRefresh=!1)},e.prototype.refresh=function(){this._disposed||(this._needsRefresh=!0,this.animation.start())},e.prototype.flush=function(){this._disposed||this._flush(!1)},e.prototype._flush=function(t){var r,i=zg();this._needsRefresh&&(r=!0,this.refreshImmediately(t)),this._needsRefreshHover&&(r=!0,this.refreshHoverImmediately());var n=zg();r?(this._stillFrameAccum=0,this.trigger("rendered",{elapsedTime:n-i})):this._sleepAfterStill>0&&(this._stillFrameAccum++,this._stillFrameAccum>this._sleepAfterStill&&this.animation.stop())},e.prototype.setSleepAfterStill=function(t){this._sleepAfterStill=t},e.prototype.wakeUp=function(){this._disposed||(this.animation.start(),this._stillFrameAccum=0)},e.prototype.refreshHover=function(){this._needsRefreshHover=!0},e.prototype.refreshHoverImmediately=function(){this._disposed||(this._needsRefreshHover=!1,this.painter.refreshHover&&this.painter.getType()==="canvas"&&this.painter.refreshHover())},e.prototype.resize=function(t){this._disposed||(t=t||{},this.painter.resize(t.width,t.height),this.handler.resize())},e.prototype.clearAnimation=function(){this._disposed||this.animation.clear()},e.prototype.getWidth=function(){if(!this._disposed)return this.painter.getWidth()},e.prototype.getHeight=function(){if(!this._disposed)return this.painter.getHeight()},e.prototype.setCursorStyle=function(t){this._disposed||this.handler.setCursorStyle(t)},e.prototype.findHover=function(t,r){if(!this._disposed)return this.handler.findHover(t,r)},e.prototype.on=function(t,r,i){return this._disposed||this.handler.on(t,r,i),this},e.prototype.off=function(t,r){this._disposed||this.handler.off(t,r)},e.prototype.trigger=function(t,r){this._disposed||this.handler.trigger(t,r)},e.prototype.clear=function(){if(!this._disposed){for(var t=this.storage.getRoots(),r=0;r<t.length;r++)t[r]instanceof Ct&&t[r].removeSelfFromZr(this);this.storage.delAllRoots(),this.painter.clear()}},e.prototype.dispose=function(){this._disposed||(this.animation.stop(),this.clear(),this.storage.dispose(),this.painter.dispose(),this.handler.dispose(),this.animation=this.storage=this.painter=this.handler=null,this._disposed=!0,gSe(this.id))},e}();function PG(e,t){var r=new xSe(mse(),e,t);return jse[r.id]=r,r}function bSe(e,t){mA[e]=t}var iL;function wSe(e){if(typeof iL=="function")return iL(e)}function _Se(e){iL=e}var DG=1e-4,Wse=20;function ASe(e){return e.replace(/^\s+|\s+$/g,"")}function ti(e,t,r,i){var n=t[0],a=t[1],o=r[0],s=r[1],l=a-n,u=s-o;if(l===0)return u===0?o:(o+s)/2;if(i)if(l>0){if(e<=n)return o;if(e>=a)return s}else{if(e>=n)return o;if(e<=a)return s}else{if(e===n)return o;if(e===a)return s}return(e-n)/l*u+o}function et(e,t){switch(e){case"center":case"middle":e="50%";break;case"left":case"top":e="0%";break;case"right":case"bottom":e="100%";break}return it(e)?ASe(e).match(/%$/)?parseFloat(e)/100*t:parseFloat(e):e==null?NaN:+e}function rn(e,t,r){return t==null&&(t=10),t=Math.min(Math.max(0,t),Wse),e=(+e).toFixed(t),r?e:+e}function Ml(e){return e.sort(function(t,r){return t-r}),e}function Pc(e){if(e=+e,isNaN(e))return 0;if(e>1e-14){for(var t=1,r=0;r<15;r++,t*=10)if(Math.round(e*t)/t===e)return r}return SSe(e)}function SSe(e){var t=e.toString().toLowerCase(),r=t.indexOf("e"),i=r>0?+t.slice(r+1):0,n=r>0?r:t.length,a=t.indexOf("."),o=a<0?0:n-1-a;return Math.max(0,o-i)}function qse(e,t){var r=Math.log,i=Math.LN10,n=Math.floor(r(e[1]-e[0])/i),a=Math.round(r(Math.abs(t[1]-t[0]))/i),o=Math.min(Math.max(-n+a,0),20);return isFinite(o)?o:20}function CSe(e,t){var r=Zc(e,function(f,p){return f+(isNaN(p)?0:p)},0);if(r===0)return[];for(var i=Math.pow(10,t),n=qe(e,function(f){return(isNaN(f)?0:f)/r*i*100}),a=i*100,o=qe(n,function(f){return Math.floor(f)}),s=Zc(o,function(f,p){return f+p},0),l=qe(n,function(f,p){return f-o[p]});s<a;){for(var u=Number.NEGATIVE_INFINITY,c=null,h=0,d=l.length;h<d;++h)l[h]>u&&(u=l[h],c=h);++o[c],l[c]=0,++s}return qe(o,function(f){return f/i})}function ESe(e,t){var r=Math.max(Pc(e),Pc(t)),i=e+t;return r>Wse?i:rn(i,r)}var IG=9007199254740991;function Yse(e){var t=Math.PI*2;return(e%t+t)%t}function Qb(e){return e>-DG&&e<DG}var MSe=/^(?:(\d{4})(?:[-\/](\d{1,2})(?:[-\/](\d{1,2})(?:[T ](\d{1,2})(?::(\d{1,2})(?::(\d{1,2})(?:[.,](\d+))?)?)?(Z|[\+\-]\d\d:?\d\d)?)?)?)?)?$/;function Jc(e){if(e instanceof Date)return e;if(it(e)){var t=MSe.exec(e);if(!t)return new Date(NaN);if(t[8]){var r=+t[4]||0;return t[8].toUpperCase()!=="Z"&&(r-=+t[8].slice(0,3)),new Date(Date.UTC(+t[1],+(t[2]||1)-1,+t[3]||1,r,+(t[5]||0),+t[6]||0,t[7]?+t[7].substring(0,3):0))}else return new Date(+t[1],+(t[2]||1)-1,+t[3]||1,+t[4]||0,+(t[5]||0),+t[6]||0,t[7]?+t[7].substring(0,3):0)}else if(e==null)return new Date(NaN);return new Date(Math.round(e))}function TSe(e){return Math.pow(10,tN(e))}function tN(e){if(e===0)return 0;var t=Math.floor(Math.log(e)/Math.LN10);return e/Math.pow(10,t)>=10&&t++,t}function Xse(e,t){var r=tN(e),i=Math.pow(10,r),n=e/i,a;return n<1.5?a=1:n<2.5?a=2:n<4?a=3:n<7?a=5:a=10,e=a*i,r>=-20?+e.toFixed(r<0?-r:0):e}function BE(e,t){var r=(e.length-1)*t+1,i=Math.floor(r),n=+e[i-1],a=r-i;return a?n+a*(e[i]-n):n}function LG(e){e.sort(function(l,u){return s(l,u,0)?-1:1});for(var t=-1/0,r=1,i=0;i<e.length;){for(var n=e[i].interval,a=e[i].close,o=0;o<2;o++)n[o]<=t&&(n[o]=t,a[o]=o?1:1-r),t=n[o],r=a[o];n[0]===n[1]&&a[0]*a[1]!==1?e.splice(i,1):i++}return e;function s(l,u,c){return l.interval[c]<u.interval[c]||l.interval[c]===u.interval[c]&&(l.close[c]-u.close[c]===(c?-1:1)||!c&&s(l,u,1))}}function vd(e){var t=parseFloat(e);return t==e&&(t!==0||!it(e)||e.indexOf("x")<=0)?t:NaN}function Zse(e){return!isNaN(vd(e))}function Qse(){return Math.round(Math.random()*9)}function Kse(e,t){return t===0?e:Kse(t,e%t)}function kG(e,t){return e==null?t:t==null?e:e*t/Kse(e,t)}function jr(e){throw new Error(e)}function RG(e,t,r){return(t-e)*r+e}var Jse="series\0",$se="\0_ec_\0";function ci(e){return e instanceof Array?e:e==null?[]:[e]}function Lv(e,t,r){if(e){e[t]=e[t]||{},e.emphasis=e.emphasis||{},e.emphasis[t]=e.emphasis[t]||{};for(var i=0,n=r.length;i<n;i++){var a=r[i];!e.emphasis[t].hasOwnProperty(a)&&e[t].hasOwnProperty(a)&&(e.emphasis[t][a]=e[t][a])}}}var OG=["fontStyle","fontWeight","fontSize","fontFamily","rich","tag","color","textBorderColor","textBorderWidth","width","height","lineHeight","align","verticalAlign","baseline","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY","textShadowColor","textShadowBlur","textShadowOffsetX","textShadowOffsetY","backgroundColor","borderColor","borderWidth","borderRadius","padding"];function _y(e){return _t(e)&&!Ue(e)&&!(e instanceof Date)?e.value:e}function PSe(e){return _t(e)&&!(e instanceof Array)}function ele(e,t,r){var i=r==="normalMerge",n=r==="replaceMerge",a=r==="replaceAll";e=e||[],t=(t||[]).slice();var o=dt();q(t,function(l,u){if(!_t(l)){t[u]=null;return}});var s=DSe(e,o,r);return(i||n)&&ISe(s,e,o,t),i&&LSe(s,t),i||n?kSe(s,t,n):a&&RSe(s,t),OSe(s),s}function DSe(e,t,r){var i=[];if(r==="replaceAll")return i;for(var n=0;n<e.length;n++){var a=e[n];a&&a.id!=null&&t.set(a.id,n),i.push({existing:r==="replaceMerge"||Kb(a)?null:a,newOption:null,keyInfo:null,brandNew:null})}return i}function ISe(e,t,r,i){q(i,function(n,a){if(!(!n||n.id==null)){var o=sb(n.id),s=r.get(o);if(s!=null){var l=e[s];Yo(!l.newOption,'Duplicated option on id "'+o+'".'),l.newOption=n,l.existing=t[s],i[a]=null}}})}function LSe(e,t){q(t,function(r,i){if(!(!r||r.name==null))for(var n=0;n<e.length;n++){var a=e[n].existing;if(!e[n].newOption&&a&&(a.id==null||r.id==null)&&!Kb(r)&&!Kb(a)&&tle("name",a,r)){e[n].newOption=r,t[i]=null;return}}})}function kSe(e,t,r){q(t,function(i){if(i){for(var n,a=0;(n=e[a])&&(n.newOption||Kb(n.existing)||n.existing&&i.id!=null&&!tle("id",i,n.existing));)a++;n?(n.newOption=i,n.brandNew=r):e.push({newOption:i,brandNew:r,existing:null,keyInfo:null}),a++}})}function RSe(e,t){q(t,function(r){e.push({newOption:r,brandNew:!0,existing:null,keyInfo:null})})}function OSe(e){var t=dt();q(e,function(r){var i=r.existing;i&&t.set(i.id,r)}),q(e,function(r){var i=r.newOption;Yo(!i||i.id==null||!t.get(i.id)||t.get(i.id)===r,"id duplicates: "+(i&&i.id)),i&&i.id!=null&&t.set(i.id,r),!r.keyInfo&&(r.keyInfo={})}),q(e,function(r,i){var n=r.existing,a=r.newOption,o=r.keyInfo;if(_t(a)){if(o.name=a.name!=null?sb(a.name):n?n.name:Jse+i,n)o.id=sb(n.id);else if(a.id!=null)o.id=sb(a.id);else{var s=0;do o.id="\0"+o.name+"\0"+s++;while(t.get(o.id))}t.set(o.id,r)}})}function tle(e,t,r){var i=Rn(t[e],null),n=Rn(r[e],null);return i!=null&&n!=null&&i===n}function sb(e){return Rn(e,"")}function Rn(e,t){return e==null?t:it(e)?e:kr(e)||OI(e)?e+"":t}function rN(e){var t=e.name;return!!(t&&t.indexOf(Jse))}function Kb(e){return e&&e.id!=null&&sb(e.id).indexOf($se)===0}function BSe(e){return $se+e}function NSe(e,t,r){q(e,function(i){var n=i.newOption;_t(n)&&(i.keyInfo.mainType=t,i.keyInfo.subType=VSe(t,n,i.existing,r))})}function VSe(e,t,r,i){var n=t.type?t.type:r?r.subType:i.determineSubType(e,t);return n}function FSe(e,t){var r={},i={};return n(e||[],r),n(t||[],i,r),[a(r),a(i)];function n(o,s,l){for(var u=0,c=o.length;u<c;u++){var h=Rn(o[u].seriesId,null);if(h==null)return;for(var d=ci(o[u].dataIndex),f=l&&l[h],p=0,v=d.length;p<v;p++){var m=d[p];f&&f[m]?f[m]=null:(s[h]||(s[h]={}))[m]=1}}}function a(o,s){var l=[];for(var u in o)if(o.hasOwnProperty(u)&&o[u]!=null)if(s)l.push(+u);else{var c=a(o[u],!0);c.length&&l.push({seriesId:u,dataIndex:c})}return l}}function kv(e,t){if(t.dataIndexInside!=null)return t.dataIndexInside;if(t.dataIndex!=null)return Ue(t.dataIndex)?qe(t.dataIndex,function(r){return e.indexOfRawIndex(r)}):e.indexOfRawIndex(t.dataIndex);if(t.name!=null)return Ue(t.name)?qe(t.name,function(r){return e.indexOfName(r)}):e.indexOfName(t.name)}function Pr(){var e="__ec_inner_"+zSe++;return function(t){return t[e]||(t[e]={})}}var zSe=Qse();function lb(e,t,r){var i=iN(t,r),n=i.mainTypeSpecified,a=i.queryOptionMap,o=i.others,s=o,l=r?r.defaultMainType:null;return!n&&l&&a.set(l,{}),a.each(function(u,c){var h=u4(e,c,u,{useDefault:l===c,enableAll:r&&r.enableAll!=null?r.enableAll:!0,enableNone:r&&r.enableNone!=null?r.enableNone:!0});s[c+"Models"]=h.models,s[c+"Model"]=h.models[0]}),s}function iN(e,t){var r;if(it(e)){var i={};i[e+"Index"]=0,r=i}else r=e;var n=dt(),a={},o=!1;return q(r,function(s,l){if(l==="dataIndex"||l==="dataIndexInside"){a[l]=s;return}var u=l.match(/^(\w+)(Index|Id|Name)$/)||[],c=u[1],h=(u[2]||"").toLowerCase();if(!(!c||!h||t&&t.includeMainTypes&&tr(t.includeMainTypes,c)<0)){o=o||!!c;var d=n.get(c)||n.set(c,{});d[h]=s}}),{mainTypeSpecified:o,queryOptionMap:n,others:a}}var wn={useDefault:!0,enableAll:!1,enableNone:!1},HSe={useDefault:!1,enableAll:!0,enableNone:!0};function u4(e,t,r,i){i=i||wn;var n=r.index,a=r.id,o=r.name,s={models:null,specified:n!=null||a!=null||o!=null};if(!s.specified){var l=void 0;return s.models=i.useDefault&&(l=e.getComponent(t))?[l]:[],s}return n==="none"||n===!1?(Yo(i.enableNone,'`"none"` or `false` is not a valid value on index option.'),s.models=[],s):(n==="all"&&(Yo(i.enableAll,'`"all"` is not a valid value on index option.'),n=a=o=null),s.models=e.queryComponents({mainType:t,index:n,id:a,name:o}),s)}function rle(e,t,r){e.setAttribute?e.setAttribute(t,r):e[t]=r}function USe(e,t){return e.getAttribute?e.getAttribute(t):e[t]}function GSe(e){return e==="auto"?hr.domSupported?"html":"richText":e||"html"}function nL(e,t){var r=dt(),i=[];return q(e,function(n){var a=t(n);(r.get(a)||(i.push(a),r.set(a,[]))).push(n)}),{keys:i,buckets:r}}function ile(e,t,r,i,n){var a=t==null||t==="auto";if(i==null)return i;if(kr(i)){var o=RG(r||0,i,n);return rn(o,a?Math.max(Pc(r||0),Pc(i)):t)}else{if(it(i))return n<1?r:i;for(var s=[],l=r,u=i,c=Math.max(l?l.length:0,u.length),h=0;h<c;++h){var d=e.getDimensionInfo(h);if(d&&d.type==="ordinal")s[h]=(n<1&&l?l:u)[h];else{var f=l&&l[h]?l[h]:0,p=u[h],o=RG(f,p,n);s[h]=rn(o,a?Math.max(Pc(f),Pc(p)):t)}}return s}}var jSe=".",Hp="___EC__COMPONENT__CONTAINER___",nle="___EC__EXTENDED_CLASS___";function Dc(e){var t={main:"",sub:""};if(e){var r=e.split(jSe);t.main=r[0]||"",t.sub=r[1]||""}return t}function WSe(e){Yo(/^[a-zA-Z0-9_]+([.][a-zA-Z0-9_]+)?$/.test(e),'componentType "'+e+'" illegal')}function qSe(e){return!!(e&&e[nle])}function nN(e,t){e.$constructor=e,e.extend=function(r){var i=this,n;return YSe(i)?n=function(a){_e(o,a);function o(){return a.apply(this,arguments)||this}return o}(i):(n=function(){(r.$constructor||i).apply(this,arguments)},t8e(n,this)),Be(n.prototype,r),n[nle]=!0,n.extend=this.extend,n.superCall=QSe,n.superApply=KSe,n.superClass=i,n}}function YSe(e){return xt(e)&&/^class\s/.test(Function.prototype.toString.call(e))}function ale(e,t){e.extend=t.extend}var XSe=Math.round(Math.random()*10);function ZSe(e){var t=["__\0is_clz",XSe++].join("_");e.prototype[t]=!0,e.isInstance=function(r){return!!(r&&r[t])}}function QSe(e,t){for(var r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];return this.superClass.prototype[t].apply(e,r)}function KSe(e,t,r){return this.superClass.prototype[t].apply(e,r)}function fC(e){var t={};e.registerClass=function(i){var n=i.type||i.prototype.type;if(n){WSe(n),i.prototype.type=n;var a=Dc(n);if(!a.sub)t[a.main]=i;else if(a.sub!==Hp){var o=r(a);o[a.sub]=i}}return i},e.getClass=function(i,n,a){var o=t[i];if(o&&o[Hp]&&(o=n?o[n]:null),a&&!o)throw new Error(n?"Component "+i+"."+(n||"")+" is used but not imported.":i+".type should be specified.");return o},e.getClassesByMainType=function(i){var n=Dc(i),a=[],o=t[n.main];return o&&o[Hp]?q(o,function(s,l){l!==Hp&&a.push(s)}):a.push(o),a},e.hasClass=function(i){var n=Dc(i);return!!t[n.main]},e.getAllClassMainTypes=function(){var i=[];return q(t,function(n,a){i.push(a)}),i},e.hasSubTypes=function(i){var n=Dc(i),a=t[n.main];return a&&a[Hp]};function r(i){var n=t[i.main];return(!n||!n[Hp])&&(n=t[i.main]={},n[Hp]=!0),n}}function Rv(e,t){for(var r=0;r<e.length;r++)e[r][1]||(e[r][1]=e[r][0]);return t=t||!1,function(i,n,a){for(var o={},s=0;s<e.length;s++){var l=e[s][1];if(!(n&&tr(n,l)>=0||a&&tr(a,l)<0)){var u=i.getShallow(l,t);u!=null&&(o[e[s][0]]=u)}}return o}}var JSe=[["fill","color"],["shadowBlur"],["shadowOffsetX"],["shadowOffsetY"],["opacity"],["shadowColor"]],$Se=Rv(JSe),e6e=function(){function e(){}return e.prototype.getAreaStyle=function(t,r){return $Se(this,t,r)},e}(),aL=new s4(50);function t6e(e){if(typeof e=="string"){var t=aL.get(e);return t&&t.image}else return e}function aN(e,t,r,i,n){if(e)if(typeof e=="string"){if(t&&t.__zrImageSrc===e||!r)return t;var a=aL.get(e),o={hostEl:r,cb:i,cbPayload:n};return a?(t=a.image,!pC(t)&&a.pending.push(o)):(t=hp.loadImage(e,BG,BG),t.__zrImageSrc=e,aL.put(e,t.__cachedImgObj={image:t,pending:[o]})),t}else return e;else return t}function BG(){var e=this.__cachedImgObj;this.onload=this.onerror=this.__cachedImgObj=null;for(var t=0;t<e.pending.length;t++){var r=e.pending[t],i=r.cb;i&&i(this,r.cbPayload),r.hostEl.dirty()}e.pending.length=0}function pC(e){return e&&e.width&&e.height}var NE=/\{([a-zA-Z0-9_]+)\|([^}]*)\}/g;function r6e(e,t,r,i,n){if(!t)return"";var a=(e+"").split(`
`);n=ole(t,r,i,n);for(var o=0,s=a.length;o<s;o++)a[o]=sle(a[o],n);return a.join(`
`)}function ole(e,t,r,i){i=i||{};var n=Be({},i);n.font=t,r=Lt(r,"..."),n.maxIterations=Lt(i.maxIterations,2);var a=n.minChar=Lt(i.minChar,0);n.cnCharWidth=qs("国",t);var o=n.ascCharWidth=qs("a",t);n.placeholder=Lt(i.placeholder,"");for(var s=e=Math.max(0,e-1),l=0;l<a&&s>=o;l++)s-=o;var u=qs(r,t);return u>s&&(r="",u=0),s=e-u,n.ellipsis=r,n.ellipsisWidth=u,n.contentWidth=s,n.containerWidth=e,n}function sle(e,t){var r=t.containerWidth,i=t.font,n=t.contentWidth;if(!r)return"";var a=qs(e,i);if(a<=r)return e;for(var o=0;;o++){if(a<=n||o>=t.maxIterations){e+=t.ellipsis;break}var s=o===0?i6e(e,n,t.ascCharWidth,t.cnCharWidth):a>0?Math.floor(e.length*n/a):0;e=e.substr(0,s),a=qs(e,i)}return e===""&&(e=t.placeholder),e}function i6e(e,t,r,i){for(var n=0,a=0,o=e.length;a<o&&n<t;a++){var s=e.charCodeAt(a);n+=0<=s&&s<=127?r:i}return a}function n6e(e,t){e!=null&&(e+="");var r=t.overflow,i=t.padding,n=t.font,a=r==="truncate",o=hC(n),s=Lt(t.lineHeight,o),l=!!t.backgroundColor,u=t.lineOverflow==="truncate",c=t.width,h;c!=null&&(r==="break"||r==="breakAll")?h=e?lle(e,t.font,c,r==="breakAll",0).lines:[]:h=e?e.split(`
`):[];var d=h.length*s,f=Lt(t.height,d);if(d>f&&u){var p=Math.floor(f/s);h=h.slice(0,p)}if(e&&a&&c!=null)for(var v=ole(c,n,t.ellipsis,{minChar:t.truncateMinChar,placeholder:t.placeholder}),m=0;m<h.length;m++)h[m]=sle(h[m],v);for(var g=f,y=0,m=0;m<h.length;m++)y=Math.max(qs(h[m],n),y);c==null&&(c=y);var x=y;return i&&(g+=i[0]+i[2],x+=i[1]+i[3],c+=i[1]+i[3]),l&&(x=c),{lines:h,height:f,outerWidth:x,outerHeight:g,lineHeight:s,calculatedLineHeight:o,contentWidth:y,contentHeight:d,width:c}}var a6e=function(){function e(){}return e}(),NG=function(){function e(t){this.tokens=[],t&&(this.tokens=t)}return e}(),o6e=function(){function e(){this.width=0,this.height=0,this.contentWidth=0,this.contentHeight=0,this.outerWidth=0,this.outerHeight=0,this.lines=[]}return e}();function s6e(e,t){var r=new o6e;if(e!=null&&(e+=""),!e)return r;for(var i=t.width,n=t.height,a=t.overflow,o=(a==="break"||a==="breakAll")&&i!=null?{width:i,accumWidth:0,breakAll:a==="breakAll"}:null,s=NE.lastIndex=0,l;(l=NE.exec(e))!=null;){var u=l.index;u>s&&VE(r,e.substring(s,u),t,o),VE(r,l[2],t,o,l[1]),s=NE.lastIndex}s<e.length&&VE(r,e.substring(s,e.length),t,o);var c=[],h=0,d=0,f=t.padding,p=a==="truncate",v=t.lineOverflow==="truncate";function m(R,H,j){R.width=H,R.lineHeight=j,h+=j,d=Math.max(d,H)}e:for(var g=0;g<r.lines.length;g++){for(var y=r.lines[g],x=0,b=0,_=0;_<y.tokens.length;_++){var w=y.tokens[_],S=w.styleName&&t.rich[w.styleName]||{},A=w.textPadding=S.padding,M=A?A[1]+A[3]:0,E=w.font=S.font||t.font;w.contentHeight=hC(E);var T=Lt(S.height,w.contentHeight);if(w.innerHeight=T,A&&(T+=A[0]+A[2]),w.height=T,w.lineHeight=Vc(S.lineHeight,t.lineHeight,T),w.align=S&&S.align||t.align,w.verticalAlign=S&&S.verticalAlign||"middle",v&&n!=null&&h+w.lineHeight>n){_>0?(y.tokens=y.tokens.slice(0,_),m(y,b,x),r.lines=r.lines.slice(0,g+1)):r.lines=r.lines.slice(0,g);break e}var L=S.width,P=L==null||L==="auto";if(typeof L=="string"&&L.charAt(L.length-1)==="%")w.percentWidth=L,c.push(w),w.contentWidth=qs(w.text,E);else{if(P){var C=S.backgroundColor,D=C&&C.image;D&&(D=t6e(D),pC(D)&&(w.width=Math.max(w.width,D.width*T/D.height)))}var I=p&&i!=null?i-b:null;I!=null&&I<w.width?!P||I<M?(w.text="",w.width=w.contentWidth=0):(w.text=r6e(w.text,I-M,E,t.ellipsis,{minChar:t.truncateMinChar}),w.width=w.contentWidth=qs(w.text,E)):w.contentWidth=qs(w.text,E)}w.width+=M,b+=w.width,S&&(x=Math.max(x,w.lineHeight))}m(y,b,x)}r.outerWidth=r.width=Lt(i,d),r.outerHeight=r.height=Lt(n,h),r.contentHeight=h,r.contentWidth=d,f&&(r.outerWidth+=f[1]+f[3],r.outerHeight+=f[0]+f[2]);for(var g=0;g<c.length;g++){var w=c[g],O=w.percentWidth;w.width=parseInt(O,10)/100*r.width}return r}function VE(e,t,r,i,n){var a=t==="",o=n&&r.rich[n]||{},s=e.lines,l=o.font||r.font,u=!1,c,h;if(i){var d=o.padding,f=d?d[1]+d[3]:0;if(o.width!=null&&o.width!=="auto"){var p=Tu(o.width,i.width)+f;s.length>0&&p+i.accumWidth>i.width&&(c=t.split(`
`),u=!0),i.accumWidth=p}else{var v=lle(t,l,i.width,i.breakAll,i.accumWidth);i.accumWidth=v.accumWidth+f,h=v.linesWidths,c=v.lines}}else c=t.split(`
`);for(var m=0;m<c.length;m++){var g=c[m],y=new a6e;if(y.styleName=n,y.text=g,y.isLineHolder=!g&&!a,typeof o.width=="number"?y.width=o.width:y.width=h?h[m]:qs(g,l),!m&&!u){var x=(s[s.length-1]||(s[0]=new NG)).tokens,b=x.length;b===1&&x[0].isLineHolder?x[0]=y:(g||!b||a)&&x.push(y)}else s.push(new NG([y]))}}function l6e(e){var t=e.charCodeAt(0);return t>=32&&t<=591||t>=880&&t<=4351||t>=4608&&t<=5119||t>=7680&&t<=8303}var u6e=Zc(",&?/;] ".split(""),function(e,t){return e[t]=!0,e},{});function c6e(e){return l6e(e)?!!u6e[e]:!0}function lle(e,t,r,i,n){for(var a=[],o=[],s="",l="",u=0,c=0,h=0;h<e.length;h++){var d=e.charAt(h);if(d===`
`){l&&(s+=l,c+=u),a.push(s),o.push(c),s="",l="",u=0,c=0;continue}var f=qs(d,t),p=i?!1:!c6e(d);if(a.length?c+f>r:n+c+f>r){c?(s||l)&&(p?(s||(s=l,l="",u=0,c=u),a.push(s),o.push(c-u),l+=d,u+=f,s="",c=u):(l&&(s+=l,l="",u=0),a.push(s),o.push(c),s=d,c=f)):p?(a.push(l),o.push(u),l=d,u=f):(a.push(d),o.push(f));continue}c+=f,p?(l+=d,u+=f):(l&&(s+=l,l="",u=0),s+=d)}return!a.length&&!s&&(s=e,l="",u=0),l&&(s+=l),s&&(a.push(s),o.push(c)),a.length===1&&(c+=n),{accumWidth:c,lines:a,linesWidths:o}}var oL="__zr_style_"+Math.round(Math.random()*10),vv={shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0,shadowColor:"#000",opacity:1,blend:"source-over"},vC={style:{shadowBlur:!0,shadowOffsetX:!0,shadowOffsetY:!0,shadowColor:!0,opacity:!0}};vv[oL]=!0;var VG=["z","z2","invisible"],h6e=["invisible"],Rl=function(e){_e(t,e);function t(r){return e.call(this,r)||this}return t.prototype._init=function(r){for(var i=mr(r),n=0;n<i.length;n++){var a=i[n];a==="style"?this.useStyle(r[a]):e.prototype.attrKV.call(this,a,r[a])}this.style||this.useStyle({})},t.prototype.beforeBrush=function(){},t.prototype.afterBrush=function(){},t.prototype.innerBeforeBrush=function(){},t.prototype.innerAfterBrush=function(){},t.prototype.shouldBePainted=function(r,i,n,a){var o=this.transform;if(this.ignore||this.invisible||this.style.opacity===0||this.culling&&d6e(this,r,i)||o&&!o[0]&&!o[3])return!1;if(n&&this.__clipPaths){for(var s=0;s<this.__clipPaths.length;++s)if(this.__clipPaths[s].isZeroArea())return!1}if(a&&this.parent)for(var l=this.parent;l;){if(l.ignore)return!1;l=l.parent}return!0},t.prototype.contain=function(r,i){return this.rectContain(r,i)},t.prototype.traverse=function(r,i){r.call(i,this)},t.prototype.rectContain=function(r,i){var n=this.transformCoordToLocal(r,i),a=this.getBoundingRect();return a.contain(n[0],n[1])},t.prototype.getPaintRect=function(){var r=this._paintRect;if(!this._paintRect||this.__dirty){var i=this.transform,n=this.getBoundingRect(),a=this.style,o=a.shadowBlur||0,s=a.shadowOffsetX||0,l=a.shadowOffsetY||0;r=this._paintRect||(this._paintRect=new qt(0,0,0,0)),i?qt.applyTransform(r,n,i):r.copy(n),(o||s||l)&&(r.width+=o*2+Math.abs(s),r.height+=o*2+Math.abs(l),r.x=Math.min(r.x,r.x+s-o),r.y=Math.min(r.y,r.y+l-o));var u=this.dirtyRectTolerance;r.isZero()||(r.x=Math.floor(r.x-u),r.y=Math.floor(r.y-u),r.width=Math.ceil(r.width+1+u*2),r.height=Math.ceil(r.height+1+u*2))}return r},t.prototype.setPrevPaintRect=function(r){r?(this._prevPaintRect=this._prevPaintRect||new qt(0,0,0,0),this._prevPaintRect.copy(r)):this._prevPaintRect=null},t.prototype.getPrevPaintRect=function(){return this._prevPaintRect},t.prototype.animateStyle=function(r){return this.animate("style",r)},t.prototype.updateDuringAnimation=function(r){r==="style"?this.dirtyStyle():this.markRedraw()},t.prototype.attrKV=function(r,i){r!=="style"?e.prototype.attrKV.call(this,r,i):this.style?this.setStyle(i):this.useStyle(i)},t.prototype.setStyle=function(r,i){return typeof r=="string"?this.style[r]=i:Be(this.style,r),this.dirtyStyle(),this},t.prototype.dirtyStyle=function(r){r||this.markRedraw(),this.__dirty|=Tx,this._rect&&(this._rect=null)},t.prototype.dirty=function(){this.dirtyStyle()},t.prototype.styleChanged=function(){return!!(this.__dirty&Tx)},t.prototype.styleUpdated=function(){this.__dirty&=~Tx},t.prototype.createStyle=function(r){return lC(vv,r)},t.prototype.useStyle=function(r){r[oL]||(r=this.createStyle(r)),this.__inHover?this.__hoverStyle=r:this.style=r,this.dirtyStyle()},t.prototype.isStyleObject=function(r){return r[oL]},t.prototype._innerSaveToNormal=function(r){e.prototype._innerSaveToNormal.call(this,r);var i=this._normalState;r.style&&!i.style&&(i.style=this._mergeStyle(this.createStyle(),this.style)),this._savePrimaryToNormal(r,i,VG)},t.prototype._applyStateObj=function(r,i,n,a,o,s){e.prototype._applyStateObj.call(this,r,i,n,a,o,s);var l=!(i&&a),u;if(i&&i.style?o?a?u=i.style:(u=this._mergeStyle(this.createStyle(),n.style),this._mergeStyle(u,i.style)):(u=this._mergeStyle(this.createStyle(),a?this.style:n.style),this._mergeStyle(u,i.style)):l&&(u=n.style),u)if(o){var c=this.style;if(this.style=this.createStyle(l?{}:c),l)for(var h=mr(c),d=0;d<h.length;d++){var f=h[d];f in u&&(u[f]=u[f],this.style[f]=c[f])}for(var p=mr(u),d=0;d<p.length;d++){var f=p[d];this.style[f]=this.style[f]}this._transitionState(r,{style:u},s,this.getAnimationStyleProps())}else this.useStyle(u);for(var v=this.__inHover?h6e:VG,d=0;d<v.length;d++){var f=v[d];i&&i[f]!=null?this[f]=i[f]:l&&n[f]!=null&&(this[f]=n[f])}},t.prototype._mergeStates=function(r){for(var i=e.prototype._mergeStates.call(this,r),n,a=0;a<r.length;a++){var o=r[a];o.style&&(n=n||{},this._mergeStyle(n,o.style))}return n&&(i.style=n),i},t.prototype._mergeStyle=function(r,i){return Be(r,i),r},t.prototype.getAnimationStyleProps=function(){return vC},t.initDefaultProps=function(){var r=t.prototype;r.type="displayable",r.invisible=!1,r.z=0,r.z2=0,r.zlevel=0,r.culling=!1,r.cursor="pointer",r.rectHover=!1,r.incremental=!1,r._rect=null,r.dirtyRectTolerance=0,r.__dirty=Fs|Tx}(),t}(dC),FE=new qt(0,0,0,0),zE=new qt(0,0,0,0);function d6e(e,t,r){return FE.copy(e.getBoundingRect()),e.transform&&FE.applyTransform(e.transform),zE.width=t,zE.height=r,!FE.intersect(zE)}var us=Math.min,cs=Math.max,HE=Math.sin,UE=Math.cos,Up=Math.PI*2,_3=Kv(),A3=Kv(),S3=Kv();function mC(e,t,r){if(e.length!==0){for(var i=e[0],n=i[0],a=i[0],o=i[1],s=i[1],l=1;l<e.length;l++)i=e[l],n=us(n,i[0]),a=cs(a,i[0]),o=us(o,i[1]),s=cs(s,i[1]);t[0]=n,t[1]=o,r[0]=a,r[1]=s}}function FG(e,t,r,i,n,a){n[0]=us(e,r),n[1]=us(t,i),a[0]=cs(e,r),a[1]=cs(t,i)}var zG=[],HG=[];function f6e(e,t,r,i,n,a,o,s,l,u){var c=Mse,h=qn,d=c(e,r,n,o,zG);l[0]=1/0,l[1]=1/0,u[0]=-1/0,u[1]=-1/0;for(var f=0;f<d;f++){var p=h(e,r,n,o,zG[f]);l[0]=us(p,l[0]),u[0]=cs(p,u[0])}d=c(t,i,a,s,HG);for(var f=0;f<d;f++){var v=h(t,i,a,s,HG[f]);l[1]=us(v,l[1]),u[1]=cs(v,u[1])}l[0]=us(e,l[0]),u[0]=cs(e,u[0]),l[0]=us(o,l[0]),u[0]=cs(o,u[0]),l[1]=us(t,l[1]),u[1]=cs(t,u[1]),l[1]=us(s,l[1]),u[1]=cs(s,u[1])}function p6e(e,t,r,i,n,a,o,s){var l=Pse,u=fa,c=cs(us(l(e,r,n),1),0),h=cs(us(l(t,i,a),1),0),d=u(e,r,n,c),f=u(t,i,a,h);o[0]=us(e,n,d),o[1]=us(t,a,f),s[0]=cs(e,n,d),s[1]=cs(t,a,f)}function v6e(e,t,r,i,n,a,o,s,l){var u=Rf,c=Of,h=Math.abs(n-a);if(h%Up<1e-4&&h>1e-4){s[0]=e-r,s[1]=t-i,l[0]=e+r,l[1]=t+i;return}if(_3[0]=UE(n)*r+e,_3[1]=HE(n)*i+t,A3[0]=UE(a)*r+e,A3[1]=HE(a)*i+t,u(s,_3,A3),c(l,_3,A3),n=n%Up,n<0&&(n=n+Up),a=a%Up,a<0&&(a=a+Up),n>a&&!o?a+=Up:n<a&&o&&(n+=Up),o){var d=a;a=n,n=d}for(var f=0;f<a;f+=Math.PI/2)f>n&&(S3[0]=UE(f)*r+e,S3[1]=HE(f)*i+t,u(s,S3,s),c(l,S3,l))}var xi={M:1,L:2,C:3,Q:4,A:5,Z:6,R:7},Gp=[],jp=[],Gu=[],jd=[],ju=[],Wu=[],GE=Math.min,jE=Math.max,Wp=Math.cos,qp=Math.sin,gh=Math.abs,sL=Math.PI,mf=sL*2,WE=typeof Float32Array<"u",y2=[];function qE(e){var t=Math.round(e/sL*1e8)/1e8;return t%2*sL}function oN(e,t){var r=qE(e[0]);r<0&&(r+=mf);var i=r-e[0],n=e[1];n+=i,!t&&n-r>=mf?n=r+mf:t&&r-n>=mf?n=r-mf:!t&&r>n?n=r+(mf-qE(r-n)):t&&r<n&&(n=r-(mf-qE(n-r))),e[0]=r,e[1]=n}var $c=function(){function e(t){this.dpr=1,this._xi=0,this._yi=0,this._x0=0,this._y0=0,this._len=0,t&&(this._saveData=!1),this._saveData&&(this.data=[])}return e.prototype.increaseVersion=function(){this._version++},e.prototype.getVersion=function(){return this._version},e.prototype.setScale=function(t,r,i){i=i||0,i>0&&(this._ux=gh(i/I8/t)||0,this._uy=gh(i/I8/r)||0)},e.prototype.setDPR=function(t){this.dpr=t},e.prototype.setContext=function(t){this._ctx=t},e.prototype.getContext=function(){return this._ctx},e.prototype.beginPath=function(){return this._ctx&&this._ctx.beginPath(),this.reset(),this},e.prototype.reset=function(){this._saveData&&(this._len=0),this._pathSegLen&&(this._pathSegLen=null,this._pathLen=0),this._version++},e.prototype.moveTo=function(t,r){return this._drawPendingPt(),this.addData(xi.M,t,r),this._ctx&&this._ctx.moveTo(t,r),this._x0=t,this._y0=r,this._xi=t,this._yi=r,this},e.prototype.lineTo=function(t,r){var i=gh(t-this._xi),n=gh(r-this._yi),a=i>this._ux||n>this._uy;if(this.addData(xi.L,t,r),this._ctx&&a&&this._ctx.lineTo(t,r),a)this._xi=t,this._yi=r,this._pendingPtDist=0;else{var o=i*i+n*n;o>this._pendingPtDist&&(this._pendingPtX=t,this._pendingPtY=r,this._pendingPtDist=o)}return this},e.prototype.bezierCurveTo=function(t,r,i,n,a,o){return this._drawPendingPt(),this.addData(xi.C,t,r,i,n,a,o),this._ctx&&this._ctx.bezierCurveTo(t,r,i,n,a,o),this._xi=a,this._yi=o,this},e.prototype.quadraticCurveTo=function(t,r,i,n){return this._drawPendingPt(),this.addData(xi.Q,t,r,i,n),this._ctx&&this._ctx.quadraticCurveTo(t,r,i,n),this._xi=i,this._yi=n,this},e.prototype.arc=function(t,r,i,n,a,o){this._drawPendingPt(),y2[0]=n,y2[1]=a,oN(y2,o),n=y2[0],a=y2[1];var s=a-n;return this.addData(xi.A,t,r,i,i,n,s,0,o?0:1),this._ctx&&this._ctx.arc(t,r,i,n,a,o),this._xi=Wp(a)*i+t,this._yi=qp(a)*i+r,this},e.prototype.arcTo=function(t,r,i,n,a){return this._drawPendingPt(),this._ctx&&this._ctx.arcTo(t,r,i,n,a),this},e.prototype.rect=function(t,r,i,n){return this._drawPendingPt(),this._ctx&&this._ctx.rect(t,r,i,n),this.addData(xi.R,t,r,i,n),this},e.prototype.closePath=function(){this._drawPendingPt(),this.addData(xi.Z);var t=this._ctx,r=this._x0,i=this._y0;return t&&t.closePath(),this._xi=r,this._yi=i,this},e.prototype.fill=function(t){t&&t.fill(),this.toStatic()},e.prototype.stroke=function(t){t&&t.stroke(),this.toStatic()},e.prototype.len=function(){return this._len},e.prototype.setData=function(t){var r=t.length;!(this.data&&this.data.length===r)&&WE&&(this.data=new Float32Array(r));for(var i=0;i<r;i++)this.data[i]=t[i];this._len=r},e.prototype.appendPath=function(t){t instanceof Array||(t=[t]);for(var r=t.length,i=0,n=this._len,a=0;a<r;a++)i+=t[a].len();WE&&this.data instanceof Float32Array&&(this.data=new Float32Array(n+i));for(var a=0;a<r;a++)for(var o=t[a].data,s=0;s<o.length;s++)this.data[n++]=o[s];this._len=n},e.prototype.addData=function(t,r,i,n,a,o,s,l,u){if(this._saveData){var c=this.data;this._len+arguments.length>c.length&&(this._expandData(),c=this.data);for(var h=0;h<arguments.length;h++)c[this._len++]=arguments[h]}},e.prototype._drawPendingPt=function(){this._pendingPtDist>0&&(this._ctx&&this._ctx.lineTo(this._pendingPtX,this._pendingPtY),this._pendingPtDist=0)},e.prototype._expandData=function(){if(!(this.data instanceof Array)){for(var t=[],r=0;r<this._len;r++)t[r]=this.data[r];this.data=t}},e.prototype.toStatic=function(){if(this._saveData){this._drawPendingPt();var t=this.data;t instanceof Array&&(t.length=this._len,WE&&this._len>11&&(this.data=new Float32Array(t)))}},e.prototype.getBoundingRect=function(){Gu[0]=Gu[1]=ju[0]=ju[1]=Number.MAX_VALUE,jd[0]=jd[1]=Wu[0]=Wu[1]=-Number.MAX_VALUE;var t=this.data,r=0,i=0,n=0,a=0,o;for(o=0;o<this._len;){var s=t[o++],l=o===1;switch(l&&(r=t[o],i=t[o+1],n=r,a=i),s){case xi.M:r=n=t[o++],i=a=t[o++],ju[0]=n,ju[1]=a,Wu[0]=n,Wu[1]=a;break;case xi.L:FG(r,i,t[o],t[o+1],ju,Wu),r=t[o++],i=t[o++];break;case xi.C:f6e(r,i,t[o++],t[o++],t[o++],t[o++],t[o],t[o+1],ju,Wu),r=t[o++],i=t[o++];break;case xi.Q:p6e(r,i,t[o++],t[o++],t[o],t[o+1],ju,Wu),r=t[o++],i=t[o++];break;case xi.A:var u=t[o++],c=t[o++],h=t[o++],d=t[o++],f=t[o++],p=t[o++]+f;o+=1;var v=!t[o++];l&&(n=Wp(f)*h+u,a=qp(f)*d+c),v6e(u,c,h,d,f,p,v,ju,Wu),r=Wp(p)*h+u,i=qp(p)*d+c;break;case xi.R:n=r=t[o++],a=i=t[o++];var m=t[o++],g=t[o++];FG(n,a,n+m,a+g,ju,Wu);break;case xi.Z:r=n,i=a;break}Rf(Gu,Gu,ju),Of(jd,jd,Wu)}return o===0&&(Gu[0]=Gu[1]=jd[0]=jd[1]=0),new qt(Gu[0],Gu[1],jd[0]-Gu[0],jd[1]-Gu[1])},e.prototype._calculateLength=function(){var t=this.data,r=this._len,i=this._ux,n=this._uy,a=0,o=0,s=0,l=0;this._pathSegLen||(this._pathSegLen=[]);for(var u=this._pathSegLen,c=0,h=0,d=0;d<r;){var f=t[d++],p=d===1;p&&(a=t[d],o=t[d+1],s=a,l=o);var v=-1;switch(f){case xi.M:a=s=t[d++],o=l=t[d++];break;case xi.L:{var m=t[d++],g=t[d++],y=m-a,x=g-o;(gh(y)>i||gh(x)>n||d===r-1)&&(v=Math.sqrt(y*y+x*x),a=m,o=g);break}case xi.C:{var b=t[d++],_=t[d++],m=t[d++],g=t[d++],w=t[d++],S=t[d++];v=O8e(a,o,b,_,m,g,w,S,10),a=w,o=S;break}case xi.Q:{var b=t[d++],_=t[d++],m=t[d++],g=t[d++];v=N8e(a,o,b,_,m,g,10),a=m,o=g;break}case xi.A:var A=t[d++],M=t[d++],E=t[d++],T=t[d++],L=t[d++],P=t[d++],C=P+L;d+=1,p&&(s=Wp(L)*E+A,l=qp(L)*T+M),v=jE(E,T)*GE(mf,Math.abs(P)),a=Wp(C)*E+A,o=qp(C)*T+M;break;case xi.R:{s=a=t[d++],l=o=t[d++];var D=t[d++],I=t[d++];v=D*2+I*2;break}case xi.Z:{var y=s-a,x=l-o;v=Math.sqrt(y*y+x*x),a=s,o=l;break}}v>=0&&(u[h++]=v,c+=v)}return this._pathLen=c,c},e.prototype.rebuildPath=function(t,r){var i=this.data,n=this._ux,a=this._uy,o=this._len,s,l,u,c,h,d,f=r<1,p,v,m=0,g=0,y,x=0,b,_;if(!(f&&(this._pathSegLen||this._calculateLength(),p=this._pathSegLen,v=this._pathLen,y=r*v,!y)))e:for(var w=0;w<o;){var S=i[w++],A=w===1;switch(A&&(u=i[w],c=i[w+1],s=u,l=c),S!==xi.L&&x>0&&(t.lineTo(b,_),x=0),S){case xi.M:s=u=i[w++],l=c=i[w++],t.moveTo(u,c);break;case xi.L:{h=i[w++],d=i[w++];var M=gh(h-u),E=gh(d-c);if(M>n||E>a){if(f){var T=p[g++];if(m+T>y){var L=(y-m)/T;t.lineTo(u*(1-L)+h*L,c*(1-L)+d*L);break e}m+=T}t.lineTo(h,d),u=h,c=d,x=0}else{var P=M*M+E*E;P>x&&(b=h,_=d,x=P)}break}case xi.C:{var C=i[w++],D=i[w++],I=i[w++],O=i[w++],R=i[w++],H=i[w++];if(f){var T=p[g++];if(m+T>y){var L=(y-m)/T;dp(u,C,I,R,L,Gp),dp(c,D,O,H,L,jp),t.bezierCurveTo(Gp[1],jp[1],Gp[2],jp[2],Gp[3],jp[3]);break e}m+=T}t.bezierCurveTo(C,D,I,O,R,H),u=R,c=H;break}case xi.Q:{var C=i[w++],D=i[w++],I=i[w++],O=i[w++];if(f){var T=p[g++];if(m+T>y){var L=(y-m)/T;Yb(u,C,I,L,Gp),Yb(c,D,O,L,jp),t.quadraticCurveTo(Gp[1],jp[1],Gp[2],jp[2]);break e}m+=T}t.quadraticCurveTo(C,D,I,O),u=I,c=O;break}case xi.A:var j=i[w++],N=i[w++],k=i[w++],G=i[w++],Y=i[w++],F=i[w++],Z=i[w++],ne=!i[w++],re=k>G?k:G,ae=gh(k-G)>.001,he=Y+F,se=!1;if(f){var T=p[g++];m+T>y&&(he=Y+F*(y-m)/T,se=!0),m+=T}if(ae&&t.ellipse?t.ellipse(j,N,k,G,Z,Y,he,ne):t.arc(j,N,re,Y,he,ne),se)break e;A&&(s=Wp(Y)*k+j,l=qp(Y)*G+N),u=Wp(he)*k+j,c=qp(he)*G+N;break;case xi.R:s=u=i[w],l=c=i[w+1],h=i[w++],d=i[w++];var fe=i[w++],J=i[w++];if(f){var T=p[g++];if(m+T>y){var te=y-m;t.moveTo(h,d),t.lineTo(h+GE(te,fe),d),te-=fe,te>0&&t.lineTo(h+fe,d+GE(te,J)),te-=J,te>0&&t.lineTo(h+jE(fe-te,0),d+J),te-=fe,te>0&&t.lineTo(h,d+jE(J-te,0));break e}m+=T}t.rect(h,d,fe,J);break;case xi.Z:if(f){var T=p[g++];if(m+T>y){var L=(y-m)/T;t.lineTo(u*(1-L)+s*L,c*(1-L)+l*L);break e}m+=T}t.closePath(),u=s,c=l}}},e.prototype.clone=function(){var t=new e,r=this.data;return t.data=r.slice?r.slice():Array.prototype.slice.call(r),t._len=this._len,t},e.CMD=xi,e.initDefaultProps=function(){var t=e.prototype;t._saveData=!0,t._ux=0,t._uy=0,t._pendingPtDist=0,t._version=0}(),e}();function _f(e,t,r,i,n,a,o){if(n===0)return!1;var s=n,l=0,u=e;if(o>t+s&&o>i+s||o<t-s&&o<i-s||a>e+s&&a>r+s||a<e-s&&a<r-s)return!1;if(e!==r)l=(t-i)/(e-r),u=(e*i-r*t)/(e-r);else return Math.abs(a-e)<=s/2;var c=l*a-o+u,h=c*c/(l*l+1);return h<=s/2*s/2}function m6e(e,t,r,i,n,a,o,s,l,u,c){if(l===0)return!1;var h=l;if(c>t+h&&c>i+h&&c>a+h&&c>s+h||c<t-h&&c<i-h&&c<a-h&&c<s-h||u>e+h&&u>r+h&&u>n+h&&u>o+h||u<e-h&&u<r-h&&u<n-h&&u<o-h)return!1;var d=Tse(e,t,r,i,n,a,o,s,u,c,null);return d<=h/2}function ule(e,t,r,i,n,a,o,s,l){if(o===0)return!1;var u=o;if(l>t+u&&l>i+u&&l>a+u||l<t-u&&l<i-u&&l<a-u||s>e+u&&s>r+u&&s>n+u||s<e-u&&s<r-u&&s<n-u)return!1;var c=Dse(e,t,r,i,n,a,s,l,null);return c<=u/2}var UG=Math.PI*2;function zs(e){return e%=UG,e<0&&(e+=UG),e}var x2=Math.PI*2;function g6e(e,t,r,i,n,a,o,s,l){if(o===0)return!1;var u=o;s-=e,l-=t;var c=Math.sqrt(s*s+l*l);if(c-u>r||c+u<r)return!1;if(Math.abs(i-n)%x2<1e-4)return!0;if(a){var h=i;i=zs(n),n=zs(h)}else i=zs(i),n=zs(n);i>n&&(n+=x2);var d=Math.atan2(l,s);return d<0&&(d+=x2),d>=i&&d<=n||d+x2>=i&&d+x2<=n}function Oh(e,t,r,i,n,a){if(a>t&&a>i||a<t&&a<i||i===t)return 0;var o=(a-t)/(i-t),s=i<t?1:-1;(o===1||o===0)&&(s=i<t?.5:-.5);var l=o*(r-e)+e;return l===n?1/0:l>n?s:0}var Wd=$c.CMD,Yp=Math.PI*2,y6e=1e-4;function x6e(e,t){return Math.abs(e-t)<y6e}var No=[-1,-1,-1],ml=[-1,-1];function b6e(){var e=ml[0];ml[0]=ml[1],ml[1]=e}function w6e(e,t,r,i,n,a,o,s,l,u){if(u>t&&u>i&&u>a&&u>s||u<t&&u<i&&u<a&&u<s)return 0;var c=M8(t,i,a,s,u,No);if(c===0)return 0;for(var h=0,d=-1,f=void 0,p=void 0,v=0;v<c;v++){var m=No[v],g=m===0||m===1?.5:1,y=qn(e,r,n,o,m);y<l||(d<0&&(d=Mse(t,i,a,s,ml),ml[1]<ml[0]&&d>1&&b6e(),f=qn(t,i,a,s,ml[0]),d>1&&(p=qn(t,i,a,s,ml[1]))),d===2?m<ml[0]?h+=f<t?g:-g:m<ml[1]?h+=p<f?g:-g:h+=s<p?g:-g:m<ml[0]?h+=f<t?g:-g:h+=s<f?g:-g)}return h}function _6e(e,t,r,i,n,a,o,s){if(s>t&&s>i&&s>a||s<t&&s<i&&s<a)return 0;var l=B8e(t,i,a,s,No);if(l===0)return 0;var u=Pse(t,i,a);if(u>=0&&u<=1){for(var c=0,h=fa(t,i,a,u),d=0;d<l;d++){var f=No[d]===0||No[d]===1?.5:1,p=fa(e,r,n,No[d]);p<o||(No[d]<u?c+=h<t?f:-f:c+=a<h?f:-f)}return c}else{var f=No[0]===0||No[0]===1?.5:1,p=fa(e,r,n,No[0]);return p<o?0:a<t?f:-f}}function A6e(e,t,r,i,n,a,o,s){if(s-=t,s>r||s<-r)return 0;var l=Math.sqrt(r*r-s*s);No[0]=-l,No[1]=l;var u=Math.abs(i-n);if(u<1e-4)return 0;if(u>=Yp-1e-4){i=0,n=Yp;var c=a?1:-1;return o>=No[0]+e&&o<=No[1]+e?c:0}if(i>n){var h=i;i=n,n=h}i<0&&(i+=Yp,n+=Yp);for(var d=0,f=0;f<2;f++){var p=No[f];if(p+e>o){var v=Math.atan2(s,p),c=a?1:-1;v<0&&(v=Yp+v),(v>=i&&v<=n||v+Yp>=i&&v+Yp<=n)&&(v>Math.PI/2&&v<Math.PI*1.5&&(c=-c),d+=c)}}return d}function cle(e,t,r,i,n){for(var a=e.data,o=e.len(),s=0,l=0,u=0,c=0,h=0,d,f,p=0;p<o;){var v=a[p++],m=p===1;switch(v===Wd.M&&p>1&&(r||(s+=Oh(l,u,c,h,i,n))),m&&(l=a[p],u=a[p+1],c=l,h=u),v){case Wd.M:c=a[p++],h=a[p++],l=c,u=h;break;case Wd.L:if(r){if(_f(l,u,a[p],a[p+1],t,i,n))return!0}else s+=Oh(l,u,a[p],a[p+1],i,n)||0;l=a[p++],u=a[p++];break;case Wd.C:if(r){if(m6e(l,u,a[p++],a[p++],a[p++],a[p++],a[p],a[p+1],t,i,n))return!0}else s+=w6e(l,u,a[p++],a[p++],a[p++],a[p++],a[p],a[p+1],i,n)||0;l=a[p++],u=a[p++];break;case Wd.Q:if(r){if(ule(l,u,a[p++],a[p++],a[p],a[p+1],t,i,n))return!0}else s+=_6e(l,u,a[p++],a[p++],a[p],a[p+1],i,n)||0;l=a[p++],u=a[p++];break;case Wd.A:var g=a[p++],y=a[p++],x=a[p++],b=a[p++],_=a[p++],w=a[p++];p+=1;var S=!!(1-a[p++]);d=Math.cos(_)*x+g,f=Math.sin(_)*b+y,m?(c=d,h=f):s+=Oh(l,u,d,f,i,n);var A=(i-g)*b/x+g;if(r){if(g6e(g,y,b,_,_+w,S,t,A,n))return!0}else s+=A6e(g,y,b,_,_+w,S,A,n);l=Math.cos(_+w)*x+g,u=Math.sin(_+w)*b+y;break;case Wd.R:c=l=a[p++],h=u=a[p++];var M=a[p++],E=a[p++];if(d=c+M,f=h+E,r){if(_f(c,h,d,h,t,i,n)||_f(d,h,d,f,t,i,n)||_f(d,f,c,f,t,i,n)||_f(c,f,c,h,t,i,n))return!0}else s+=Oh(d,h,d,f,i,n),s+=Oh(c,f,c,h,i,n);break;case Wd.Z:if(r){if(_f(l,u,c,h,t,i,n))return!0}else s+=Oh(l,u,c,h,i,n);l=c,u=h;break}}return!r&&!x6e(u,h)&&(s+=Oh(l,u,c,h,i,n)||0),s!==0}function S6e(e,t,r){return cle(e,0,!1,t,r)}function C6e(e,t,r,i){return cle(e,t,!0,r,i)}var k8=bt({fill:"#000",stroke:null,strokePercent:1,fillOpacity:1,strokeOpacity:1,lineDashOffset:0,lineWidth:1,lineCap:"butt",miterLimit:10,strokeNoScale:!1,strokeFirst:!1},vv),E6e={style:bt({fill:!0,stroke:!0,strokePercent:!0,fillOpacity:!0,strokeOpacity:!0,lineDashOffset:!0,lineWidth:!0,miterLimit:!0},vC.style)},YE=Kc.concat(["invisible","culling","z","z2","zlevel","parent"]),or=function(e){_e(t,e);function t(r){return e.call(this,r)||this}return t.prototype.update=function(){var r=this;e.prototype.update.call(this);var i=this.style;if(i.decal){var n=this._decalEl=this._decalEl||new t;n.buildPath===t.prototype.buildPath&&(n.buildPath=function(l){r.buildPath(l,r.shape)}),n.silent=!0;var a=n.style;for(var o in i)a[o]!==i[o]&&(a[o]=i[o]);a.fill=i.fill?i.decal:null,a.decal=null,a.shadowColor=null,i.strokeFirst&&(a.stroke=null);for(var s=0;s<YE.length;++s)n[YE[s]]=this[YE[s]];n.__dirty|=Fs}else this._decalEl&&(this._decalEl=null)},t.prototype.getDecalElement=function(){return this._decalEl},t.prototype._init=function(r){var i=mr(r);this.shape=this.getDefaultShape();var n=this.getDefaultStyle();n&&this.useStyle(n);for(var a=0;a<i.length;a++){var o=i[a],s=r[o];o==="style"?this.style?Be(this.style,s):this.useStyle(s):o==="shape"?Be(this.shape,s):e.prototype.attrKV.call(this,o,s)}this.style||this.useStyle({})},t.prototype.getDefaultStyle=function(){return null},t.prototype.getDefaultShape=function(){return{}},t.prototype.canBeInsideText=function(){return this.hasFill()},t.prototype.getInsideTextFill=function(){var r=this.style.fill;if(r!=="none"){if(it(r)){var i=P8(r,0);return i>.5?tL:i>.2?cSe:rL}else if(r)return rL}return tL},t.prototype.getInsideTextStroke=function(r){var i=this.style.fill;if(it(i)){var n=this.__zr,a=!!(n&&n.isDarkMode()),o=P8(r,0)<eL;if(a===o)return i}},t.prototype.buildPath=function(r,i,n){},t.prototype.pathUpdated=function(){this.__dirty&=~Sg},t.prototype.getUpdatedPathProxy=function(r){return!this.path&&this.createPathProxy(),this.path.beginPath(),this.buildPath(this.path,this.shape,r),this.path},t.prototype.createPathProxy=function(){this.path=new $c(!1)},t.prototype.hasStroke=function(){var r=this.style,i=r.stroke;return!(i==null||i==="none"||!(r.lineWidth>0))},t.prototype.hasFill=function(){var r=this.style,i=r.fill;return i!=null&&i!=="none"},t.prototype.getBoundingRect=function(){var r=this._rect,i=this.style,n=!r;if(n){var a=!1;this.path||(a=!0,this.createPathProxy());var o=this.path;(a||this.__dirty&Sg)&&(o.beginPath(),this.buildPath(o,this.shape,!1),this.pathUpdated()),r=o.getBoundingRect()}if(this._rect=r,this.hasStroke()&&this.path&&this.path.len()>0){var s=this._rectStroke||(this._rectStroke=r.clone());if(this.__dirty||n){s.copy(r);var l=i.strokeNoScale?this.getLineScale():1,u=i.lineWidth;if(!this.hasFill()){var c=this.strokeContainThreshold;u=Math.max(u,c??4)}l>1e-10&&(s.width+=u/l,s.height+=u/l,s.x-=u/l/2,s.y-=u/l/2)}return s}return r},t.prototype.contain=function(r,i){var n=this.transformCoordToLocal(r,i),a=this.getBoundingRect(),o=this.style;if(r=n[0],i=n[1],a.contain(r,i)){var s=this.path;if(this.hasStroke()){var l=o.lineWidth,u=o.strokeNoScale?this.getLineScale():1;if(u>1e-10&&(this.hasFill()||(l=Math.max(l,this.strokeContainThreshold)),C6e(s,l/u,r,i)))return!0}if(this.hasFill())return S6e(s,r,i)}return!1},t.prototype.dirtyShape=function(){this.__dirty|=Sg,this._rect&&(this._rect=null),this._decalEl&&this._decalEl.dirtyShape(),this.markRedraw()},t.prototype.dirty=function(){this.dirtyStyle(),this.dirtyShape()},t.prototype.animateShape=function(r){return this.animate("shape",r)},t.prototype.updateDuringAnimation=function(r){r==="style"?this.dirtyStyle():r==="shape"?this.dirtyShape():this.markRedraw()},t.prototype.attrKV=function(r,i){r==="shape"?this.setShape(i):e.prototype.attrKV.call(this,r,i)},t.prototype.setShape=function(r,i){var n=this.shape;return n||(n=this.shape={}),typeof r=="string"?n[r]=i:Be(n,r),this.dirtyShape(),this},t.prototype.shapeChanged=function(){return!!(this.__dirty&Sg)},t.prototype.createStyle=function(r){return lC(k8,r)},t.prototype._innerSaveToNormal=function(r){e.prototype._innerSaveToNormal.call(this,r);var i=this._normalState;r.shape&&!i.shape&&(i.shape=Be({},this.shape))},t.prototype._applyStateObj=function(r,i,n,a,o,s){e.prototype._applyStateObj.call(this,r,i,n,a,o,s);var l=!(i&&a),u;if(i&&i.shape?o?a?u=i.shape:(u=Be({},n.shape),Be(u,i.shape)):(u=Be({},a?this.shape:n.shape),Be(u,i.shape)):l&&(u=n.shape),u)if(o){this.shape=Be({},this.shape);for(var c={},h=mr(u),d=0;d<h.length;d++){var f=h[d];typeof u[f]=="object"?this.shape[f]=u[f]:c[f]=u[f]}this._transitionState(r,{shape:c},s)}else this.shape=u,this.dirtyShape()},t.prototype._mergeStates=function(r){for(var i=e.prototype._mergeStates.call(this,r),n,a=0;a<r.length;a++){var o=r[a];o.shape&&(n=n||{},this._mergeStyle(n,o.shape))}return n&&(i.shape=n),i},t.prototype.getAnimationStyleProps=function(){return E6e},t.prototype.isZeroArea=function(){return!1},t.extend=function(r){var i=function(a){_e(o,a);function o(s){var l=a.call(this,s)||this;return r.init&&r.init.call(l,s),l}return o.prototype.getDefaultStyle=function(){return At(r.style)},o.prototype.getDefaultShape=function(){return At(r.shape)},o}(t);for(var n in r)typeof r[n]=="function"&&(i.prototype[n]=r[n]);return i},t.initDefaultProps=function(){var r=t.prototype;r.type="path",r.strokeContainThreshold=5,r.segmentIgnoreThreshold=0,r.subPixelOptimize=!1,r.autoBatch=!1,r.__dirty=Fs|Tx|Sg}(),t}(Rl),M6e=bt({strokeFirst:!0,font:cp,x:0,y:0,textAlign:"left",textBaseline:"top",miterLimit:2},k8),N1=function(e){_e(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.hasStroke=function(){var r=this.style,i=r.stroke;return i!=null&&i!=="none"&&r.lineWidth>0},t.prototype.hasFill=function(){var r=this.style,i=r.fill;return i!=null&&i!=="none"},t.prototype.createStyle=function(r){return lC(M6e,r)},t.prototype.setBoundingRect=function(r){this._rect=r},t.prototype.getBoundingRect=function(){var r=this.style;if(!this._rect){var i=r.text;i!=null?i+="":i="";var n=l4(i,r.font,r.textAlign,r.textBaseline);if(n.x+=r.x||0,n.y+=r.y||0,this.hasStroke()){var a=r.lineWidth;n.x-=a/2,n.y-=a/2,n.width+=a,n.height+=a}this._rect=n}return this._rect},t.initDefaultProps=function(){var r=t.prototype;r.dirtyRectTolerance=10}(),t}(Rl);N1.prototype.type="tspan";var T6e=bt({x:0,y:0},vv),P6e={style:bt({x:!0,y:!0,width:!0,height:!0,sx:!0,sy:!0,sWidth:!0,sHeight:!0},vC.style)};function D6e(e){return!!(e&&typeof e!="string"&&e.width&&e.height)}var Ta=function(e){_e(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.createStyle=function(r){return lC(T6e,r)},t.prototype._getSize=function(r){var i=this.style,n=i[r];if(n!=null)return n;var a=D6e(i.image)?i.image:this.__image;if(!a)return 0;var o=r==="width"?"height":"width",s=i[o];return s==null?a[r]:a[r]/a[o]*s},t.prototype.getWidth=function(){return this._getSize("width")},t.prototype.getHeight=function(){return this._getSize("height")},t.prototype.getAnimationStyleProps=function(){return P6e},t.prototype.getBoundingRect=function(){var r=this.style;return this._rect||(this._rect=new qt(r.x||0,r.y||0,this.getWidth(),this.getHeight())),this._rect},t}(Rl);Ta.prototype.type="image";function I6e(e,t){var r=t.x,i=t.y,n=t.width,a=t.height,o=t.r,s,l,u,c;n<0&&(r=r+n,n=-n),a<0&&(i=i+a,a=-a),typeof o=="number"?s=l=u=c=o:o instanceof Array?o.length===1?s=l=u=c=o[0]:o.length===2?(s=u=o[0],l=c=o[1]):o.length===3?(s=o[0],l=c=o[1],u=o[2]):(s=o[0],l=o[1],u=o[2],c=o[3]):s=l=u=c=0;var h;s+l>n&&(h=s+l,s*=n/h,l*=n/h),u+c>n&&(h=u+c,u*=n/h,c*=n/h),l+u>a&&(h=l+u,l*=a/h,u*=a/h),s+c>a&&(h=s+c,s*=a/h,c*=a/h),e.moveTo(r+s,i),e.lineTo(r+n-l,i),l!==0&&e.arc(r+n-l,i+l,l,-Math.PI/2,0),e.lineTo(r+n,i+a-u),u!==0&&e.arc(r+n-u,i+a-u,u,0,Math.PI/2),e.lineTo(r+c,i+a),c!==0&&e.arc(r+c,i+a-c,c,Math.PI/2,Math.PI),e.lineTo(r,i+s),s!==0&&e.arc(r+s,i+s,s,Math.PI,Math.PI*1.5)}var Hg=Math.round;function hle(e,t,r){if(t){var i=t.x1,n=t.x2,a=t.y1,o=t.y2;e.x1=i,e.x2=n,e.y1=a,e.y2=o;var s=r&&r.lineWidth;return s&&(Hg(i*2)===Hg(n*2)&&(e.x1=e.x2=G0(i,s,!0)),Hg(a*2)===Hg(o*2)&&(e.y1=e.y2=G0(a,s,!0))),e}}function dle(e,t,r){if(t){var i=t.x,n=t.y,a=t.width,o=t.height;e.x=i,e.y=n,e.width=a,e.height=o;var s=r&&r.lineWidth;return s&&(e.x=G0(i,s,!0),e.y=G0(n,s,!0),e.width=Math.max(G0(i+a,s,!1)-e.x,a===0?0:1),e.height=Math.max(G0(n+o,s,!1)-e.y,o===0?0:1)),e}}function G0(e,t,r){if(!t)return e;var i=Hg(e*2);return(i+Hg(t))%2===0?i/2:(i+(r?1:-1))/2}var L6e=function(){function e(){this.x=0,this.y=0,this.width=0,this.height=0}return e}(),k6e={},Tr=function(e){_e(t,e);function t(r){return e.call(this,r)||this}return t.prototype.getDefaultShape=function(){return new L6e},t.prototype.buildPath=function(r,i){var n,a,o,s;if(this.subPixelOptimize){var l=dle(k6e,i,this.style);n=l.x,a=l.y,o=l.width,s=l.height,l.r=i.r,i=l}else n=i.x,a=i.y,o=i.width,s=i.height;i.r?I6e(r,i):r.rect(n,a,o,s)},t.prototype.isZeroArea=function(){return!this.shape.width||!this.shape.height},t}(or);Tr.prototype.type="rect";var GG={fill:"#000"},jG=2,R6e={style:bt({fill:!0,stroke:!0,fillOpacity:!0,strokeOpacity:!0,lineWidth:!0,fontSize:!0,lineHeight:!0,width:!0,height:!0,textShadowColor:!0,textShadowBlur:!0,textShadowOffsetX:!0,textShadowOffsetY:!0,backgroundColor:!0,padding:!0,borderColor:!0,borderWidth:!0,borderRadius:!0},vC.style)},Dr=function(e){_e(t,e);function t(r){var i=e.call(this)||this;return i.type="text",i._children=[],i._defaultStyle=GG,i.attr(r),i}return t.prototype.childrenRef=function(){return this._children},t.prototype.update=function(){e.prototype.update.call(this),this.styleChanged()&&this._updateSubTexts();for(var r=0;r<this._children.length;r++){var i=this._children[r];i.zlevel=this.zlevel,i.z=this.z,i.z2=this.z2,i.culling=this.culling,i.cursor=this.cursor,i.invisible=this.invisible}},t.prototype.updateTransform=function(){var r=this.innerTransformable;r?(r.updateTransform(),r.transform&&(this.transform=r.transform)):e.prototype.updateTransform.call(this)},t.prototype.getLocalTransform=function(r){var i=this.innerTransformable;return i?i.getLocalTransform(r):e.prototype.getLocalTransform.call(this,r)},t.prototype.getComputedTransform=function(){return this.__hostTarget&&(this.__hostTarget.getComputedTransform(),this.__hostTarget.updateInnerText(!0)),e.prototype.getComputedTransform.call(this)},t.prototype._updateSubTexts=function(){this._childCursor=0,N6e(this.style),this.style.rich?this._updateRichTexts():this._updatePlainTexts(),this._children.length=this._childCursor,this.styleUpdated()},t.prototype.addSelfToZr=function(r){e.prototype.addSelfToZr.call(this,r);for(var i=0;i<this._children.length;i++)this._children[i].__zr=r},t.prototype.removeSelfFromZr=function(r){e.prototype.removeSelfFromZr.call(this,r);for(var i=0;i<this._children.length;i++)this._children[i].__zr=null},t.prototype.getBoundingRect=function(){if(this.styleChanged()&&this._updateSubTexts(),!this._rect){for(var r=new qt(0,0,0,0),i=this._children,n=[],a=null,o=0;o<i.length;o++){var s=i[o],l=s.getBoundingRect(),u=s.getLocalTransform(n);u?(r.copy(l),r.applyTransform(u),a=a||r.clone(),a.union(r)):(a=a||l.clone(),a.union(l))}this._rect=a||r}return this._rect},t.prototype.setDefaultTextStyle=function(r){this._defaultStyle=r||GG},t.prototype.setTextContent=function(r){},t.prototype._mergeStyle=function(r,i){if(!i)return r;var n=i.rich,a=r.rich||n&&{};return Be(r,i),n&&a?(this._mergeRich(a,n),r.rich=a):a&&(r.rich=a),r},t.prototype._mergeRich=function(r,i){for(var n=mr(i),a=0;a<n.length;a++){var o=n[a];r[o]=r[o]||{},Be(r[o],i[o])}},t.prototype.getAnimationStyleProps=function(){return R6e},t.prototype._getOrCreateChild=function(r){var i=this._children[this._childCursor];return(!i||!(i instanceof r))&&(i=new r),this._children[this._childCursor++]=i,i.__zr=this.__zr,i.parent=this,i},t.prototype._updatePlainTexts=function(){var r=this.style,i=r.font||cp,n=r.padding,a=KG(r),o=n6e(a,r),s=XE(r),l=!!r.backgroundColor,u=o.outerHeight,c=o.outerWidth,h=o.contentWidth,d=o.lines,f=o.lineHeight,p=this._defaultStyle,v=r.x||0,m=r.y||0,g=r.align||p.align||"left",y=r.verticalAlign||p.verticalAlign||"top",x=v,b=Cg(m,o.contentHeight,y);if(s||n){var _=Dx(v,c,g),w=Cg(m,u,y);s&&this._renderBackground(r,r,_,w,c,u)}b+=f/2,n&&(x=QG(v,g,n),y==="top"?b+=n[0]:y==="bottom"&&(b-=n[2]));for(var S=0,A=!1,M=ZG("fill"in r?r.fill:(A=!0,p.fill)),E=XG("stroke"in r?r.stroke:!l&&(!p.autoStroke||A)?(S=jG,p.stroke):null),T=r.textShadowBlur>0,L=r.width!=null&&(r.overflow==="truncate"||r.overflow==="break"||r.overflow==="breakAll"),P=o.calculatedLineHeight,C=0;C<d.length;C++){var D=this._getOrCreateChild(N1),I=D.createStyle();D.useStyle(I),I.text=d[C],I.x=x,I.y=b,g&&(I.textAlign=g),I.textBaseline="middle",I.opacity=r.opacity,I.strokeFirst=!0,T&&(I.shadowBlur=r.textShadowBlur||0,I.shadowColor=r.textShadowColor||"transparent",I.shadowOffsetX=r.textShadowOffsetX||0,I.shadowOffsetY=r.textShadowOffsetY||0),I.stroke=E,I.fill=M,E&&(I.lineWidth=r.lineWidth||S,I.lineDash=r.lineDash,I.lineDashOffset=r.lineDashOffset||0),I.font=i,qG(I,r),b+=f,L&&D.setBoundingRect(new qt(Dx(I.x,r.width,I.textAlign),Cg(I.y,P,I.textBaseline),h,P))}},t.prototype._updateRichTexts=function(){var r=this.style,i=KG(r),n=s6e(i,r),a=n.width,o=n.outerWidth,s=n.outerHeight,l=r.padding,u=r.x||0,c=r.y||0,h=this._defaultStyle,d=r.align||h.align,f=r.verticalAlign||h.verticalAlign,p=Dx(u,o,d),v=Cg(c,s,f),m=p,g=v;l&&(m+=l[3],g+=l[0]);var y=m+a;XE(r)&&this._renderBackground(r,r,p,v,o,s);for(var x=!!r.backgroundColor,b=0;b<n.lines.length;b++){for(var _=n.lines[b],w=_.tokens,S=w.length,A=_.lineHeight,M=_.width,E=0,T=m,L=y,P=S-1,C=void 0;E<S&&(C=w[E],!C.align||C.align==="left");)this._placeToken(C,r,A,g,T,"left",x),M-=C.width,T+=C.width,E++;for(;P>=0&&(C=w[P],C.align==="right");)this._placeToken(C,r,A,g,L,"right",x),M-=C.width,L-=C.width,P--;for(T+=(a-(T-m)-(y-L)-M)/2;E<=P;)C=w[E],this._placeToken(C,r,A,g,T+C.width/2,"center",x),T+=C.width,E++;g+=A}},t.prototype._placeToken=function(r,i,n,a,o,s,l){var u=i.rich[r.styleName]||{};u.text=r.text;var c=r.verticalAlign,h=a+n/2;c==="top"?h=a+r.height/2:c==="bottom"&&(h=a+n-r.height/2);var d=!r.isLineHolder&&XE(u);d&&this._renderBackground(u,i,s==="right"?o-r.width:s==="center"?o-r.width/2:o,h-r.height/2,r.width,r.height);var f=!!u.backgroundColor,p=r.textPadding;p&&(o=QG(o,s,p),h-=r.height/2-p[0]-r.innerHeight/2);var v=this._getOrCreateChild(N1),m=v.createStyle();v.useStyle(m);var g=this._defaultStyle,y=!1,x=0,b=ZG("fill"in u?u.fill:"fill"in i?i.fill:(y=!0,g.fill)),_=XG("stroke"in u?u.stroke:"stroke"in i?i.stroke:!f&&!l&&(!g.autoStroke||y)?(x=jG,g.stroke):null),w=u.textShadowBlur>0||i.textShadowBlur>0;m.text=r.text,m.x=o,m.y=h,w&&(m.shadowBlur=u.textShadowBlur||i.textShadowBlur||0,m.shadowColor=u.textShadowColor||i.textShadowColor||"transparent",m.shadowOffsetX=u.textShadowOffsetX||i.textShadowOffsetX||0,m.shadowOffsetY=u.textShadowOffsetY||i.textShadowOffsetY||0),m.textAlign=s,m.textBaseline="middle",m.font=r.font||cp,m.opacity=Vc(u.opacity,i.opacity,1),qG(m,u),_&&(m.lineWidth=Vc(u.lineWidth,i.lineWidth,x),m.lineDash=Lt(u.lineDash,i.lineDash),m.lineDashOffset=i.lineDashOffset||0,m.stroke=_),b&&(m.fill=b);var S=r.contentWidth,A=r.contentHeight;v.setBoundingRect(new qt(Dx(m.x,S,m.textAlign),Cg(m.y,A,m.textBaseline),S,A))},t.prototype._renderBackground=function(r,i,n,a,o,s){var l=r.backgroundColor,u=r.borderWidth,c=r.borderColor,h=l&&l.image,d=l&&!h,f=r.borderRadius,p=this,v,m;if(d||r.lineHeight||u&&c){v=this._getOrCreateChild(Tr),v.useStyle(v.createStyle()),v.style.fill=null;var g=v.shape;g.x=n,g.y=a,g.width=o,g.height=s,g.r=f,v.dirtyShape()}if(d){var y=v.style;y.fill=l||null,y.fillOpacity=Lt(r.fillOpacity,1)}else if(h){m=this._getOrCreateChild(Ta),m.onload=function(){p.dirtyStyle()};var x=m.style;x.image=l.image,x.x=n,x.y=a,x.width=o,x.height=s}if(u&&c){var y=v.style;y.lineWidth=u,y.stroke=c,y.strokeOpacity=Lt(r.strokeOpacity,1),y.lineDash=r.borderDash,y.lineDashOffset=r.borderDashOffset||0,v.strokeContainThreshold=0,v.hasFill()&&v.hasStroke()&&(y.strokeFirst=!0,y.lineWidth*=2)}var b=(v||m).style;b.shadowBlur=r.shadowBlur||0,b.shadowColor=r.shadowColor||"transparent",b.shadowOffsetX=r.shadowOffsetX||0,b.shadowOffsetY=r.shadowOffsetY||0,b.opacity=Vc(r.opacity,i.opacity,1)},t.makeFont=function(r){var i="";return ple(r)&&(i=[r.fontStyle,r.fontWeight,fle(r.fontSize),r.fontFamily||"sans-serif"].join(" ")),i&&fu(i)||r.textFont||r.font},t}(Rl),O6e={left:!0,right:1,center:1},B6e={top:1,bottom:1,middle:1},WG=["fontStyle","fontWeight","fontSize","fontFamily"];function fle(e){return typeof e=="string"&&(e.indexOf("px")!==-1||e.indexOf("rem")!==-1||e.indexOf("em")!==-1)?e:isNaN(+e)?UB+"px":e+"px"}function qG(e,t){for(var r=0;r<WG.length;r++){var i=WG[r],n=t[i];n!=null&&(e[i]=n)}}function ple(e){return e.fontSize!=null||e.fontFamily||e.fontWeight}function N6e(e){return YG(e),q(e.rich,YG),e}function YG(e){if(e){e.font=Dr.makeFont(e);var t=e.align;t==="middle"&&(t="center"),e.align=t==null||O6e[t]?t:"left";var r=e.verticalAlign;r==="center"&&(r="middle"),e.verticalAlign=r==null||B6e[r]?r:"top";var i=e.padding;i&&(e.padding=XB(e.padding))}}function XG(e,t){return e==null||t<=0||e==="transparent"||e==="none"?null:e.image||e.colorStops?"#000":e}function ZG(e){return e==null||e==="none"?null:e.image||e.colorStops?"#000":e}function QG(e,t,r){return t==="right"?e-r[1]:t==="center"?e+r[3]/2-r[1]/2:e+r[3]}function KG(e){var t=e.text;return t!=null&&(t+=""),t}function XE(e){return!!(e.backgroundColor||e.lineHeight||e.borderWidth&&e.borderColor)}var Dt=Pr(),lL=function(e,t,r,i){if(i){var n=Dt(i);n.dataIndex=r,n.dataType=t,n.seriesIndex=e,n.ssrType="chart",i.type==="group"&&i.traverse(function(a){var o=Dt(a);o.seriesIndex=e,o.dataIndex=r,o.dataType=t,o.ssrType="chart"})}},JG=1,$G={},vle=Pr(),sN=Pr(),lN=0,c4=1,gC=2,Xo=["emphasis","blur","select"],Jb=["normal","emphasis","blur","select"],Ay=10,V6e=9,mv="highlight",gA="downplay",ub="select",yA="unselect",cb="toggleSelect";function Am(e){return e!=null&&e!=="none"}function yC(e,t,r){e.onHoverStateChange&&(e.hoverState||0)!==r&&e.onHoverStateChange(t),e.hoverState=r}function mle(e){yC(e,"emphasis",gC)}function gle(e){e.hoverState===gC&&yC(e,"normal",lN)}function uN(e){yC(e,"blur",c4)}function yle(e){e.hoverState===c4&&yC(e,"normal",lN)}function F6e(e){e.selected=!0}function z6e(e){e.selected=!1}function ej(e,t,r){t(e,r)}function Rd(e,t,r){ej(e,t,r),e.isGroup&&e.traverse(function(i){ej(i,t,r)})}function R8(e,t){switch(t){case"emphasis":e.hoverState=gC;break;case"normal":e.hoverState=lN;break;case"blur":e.hoverState=c4;break;case"select":e.selected=!0}}function H6e(e,t,r,i){for(var n=e.style,a={},o=0;o<t.length;o++){var s=t[o],l=n[s];a[s]=l??(i&&i[s])}for(var o=0;o<e.animators.length;o++){var u=e.animators[o];u.__fromStateTransition&&u.__fromStateTransition.indexOf(r)<0&&u.targetName==="style"&&u.saveTo(a,t)}return a}function U6e(e,t,r,i){var n=r&&tr(r,"select")>=0,a=!1;if(e instanceof or){var o=vle(e),s=n&&o.selectFill||o.normalFill,l=n&&o.selectStroke||o.normalStroke;if(Am(s)||Am(l)){i=i||{};var u=i.style||{};u.fill==="inherit"?(a=!0,i=Be({},i),u=Be({},u),u.fill=s):!Am(u.fill)&&Am(s)?(a=!0,i=Be({},i),u=Be({},u),u.fill=YI(s)):!Am(u.stroke)&&Am(l)&&(a||(i=Be({},i),u=Be({},u)),u.stroke=YI(l)),i.style=u}}if(i&&i.z2==null){a||(i=Be({},i));var c=e.z2EmphasisLift;i.z2=e.z2+(c??Ay)}return i}function G6e(e,t,r){if(r&&r.z2==null){r=Be({},r);var i=e.z2SelectLift;r.z2=e.z2+(i??V6e)}return r}function j6e(e,t,r){var i=tr(e.currentStates,t)>=0,n=e.style.opacity,a=i?null:H6e(e,["opacity"],t,{opacity:1});r=r||{};var o=r.style||{};return o.opacity==null&&(r=Be({},r),o=Be({opacity:i?n:a.opacity*.1},o),r.style=o),r}function ZE(e,t){var r=this.states[e];if(this.style){if(e==="emphasis")return U6e(this,e,t,r);if(e==="blur")return j6e(this,e,r);if(e==="select")return G6e(this,e,r)}return r}function Ov(e){e.stateProxy=ZE;var t=e.getTextContent(),r=e.getTextGuideLine();t&&(t.stateProxy=ZE),r&&(r.stateProxy=ZE)}function tj(e,t){!_le(e,t)&&!e.__highByOuter&&Rd(e,mle)}function rj(e,t){!_le(e,t)&&!e.__highByOuter&&Rd(e,gle)}function md(e,t){e.__highByOuter|=1<<(t||0),Rd(e,mle)}function gd(e,t){!(e.__highByOuter&=~(1<<(t||0)))&&Rd(e,gle)}function xle(e){Rd(e,uN)}function cN(e){Rd(e,yle)}function ble(e){Rd(e,F6e)}function wle(e){Rd(e,z6e)}function _le(e,t){return e.__highDownSilentOnTouch&&t.zrByTouch}function Ale(e){var t=e.getModel(),r=[],i=[];t.eachComponent(function(n,a){var o=sN(a),s=n==="series",l=s?e.getViewOfSeriesModel(a):e.getViewOfComponentModel(a);!s&&i.push(l),o.isBlured&&(l.group.traverse(function(u){yle(u)}),s&&r.push(a)),o.isBlured=!1}),q(i,function(n){n&&n.toggleBlurSeries&&n.toggleBlurSeries(r,!1,t)})}function uL(e,t,r,i){var n=i.getModel();r=r||"coordinateSystem";function a(u,c){for(var h=0;h<c.length;h++){var d=u.getItemGraphicEl(c[h]);d&&cN(d)}}if(e!=null&&!(!t||t==="none")){var o=n.getSeriesByIndex(e),s=o.coordinateSystem;s&&s.master&&(s=s.master);var l=[];n.eachSeries(function(u){var c=o===u,h=u.coordinateSystem;h&&h.master&&(h=h.master);var d=h&&s?h===s:c;if(!(r==="series"&&!c||r==="coordinateSystem"&&!d||t==="series"&&c)){var f=i.getViewOfSeriesModel(u);if(f.group.traverse(function(m){m.__highByOuter&&c&&t==="self"||uN(m)}),_o(t))a(u.getData(),t);else if(_t(t))for(var p=mr(t),v=0;v<p.length;v++)a(u.getData(p[v]),t[p[v]]);l.push(u),sN(u).isBlured=!0}}),n.eachComponent(function(u,c){if(u!=="series"){var h=i.getViewOfComponentModel(c);h&&h.toggleBlurSeries&&h.toggleBlurSeries(l,!0,n)}})}}function cL(e,t,r){if(!(e==null||t==null)){var i=r.getModel().getComponent(e,t);if(i){sN(i).isBlured=!0;var n=r.getViewOfComponentModel(i);!n||!n.focusBlurEnabled||n.group.traverse(function(a){uN(a)})}}}function W6e(e,t,r){var i=e.seriesIndex,n=e.getData(t.dataType);if(n){var a=kv(n,t);a=(Ue(a)?a[0]:a)||0;var o=n.getItemGraphicEl(a);if(!o)for(var s=n.count(),l=0;!o&&l<s;)o=n.getItemGraphicEl(l++);if(o){var u=Dt(o);uL(i,u.focus,u.blurScope,r)}else{var c=e.get(["emphasis","focus"]),h=e.get(["emphasis","blurScope"]);c!=null&&uL(i,c,h,r)}}}function hN(e,t,r,i){var n={focusSelf:!1,dispatchers:null};if(e==null||e==="series"||t==null||r==null)return n;var a=i.getModel().getComponent(e,t);if(!a)return n;var o=i.getViewOfComponentModel(a);if(!o||!o.findHighDownDispatchers)return n;for(var s=o.findHighDownDispatchers(r),l,u=0;u<s.length;u++)if(Dt(s[u]).focus==="self"){l=!0;break}return{focusSelf:l,dispatchers:s}}function q6e(e,t,r){var i=Dt(e),n=hN(i.componentMainType,i.componentIndex,i.componentHighDownName,r),a=n.dispatchers,o=n.focusSelf;a?(o&&cL(i.componentMainType,i.componentIndex,r),q(a,function(s){return tj(s,t)})):(uL(i.seriesIndex,i.focus,i.blurScope,r),i.focus==="self"&&cL(i.componentMainType,i.componentIndex,r),tj(e,t))}function Y6e(e,t,r){Ale(r);var i=Dt(e),n=hN(i.componentMainType,i.componentIndex,i.componentHighDownName,r).dispatchers;n?q(n,function(a){return rj(a,t)}):rj(e,t)}function X6e(e,t,r){if(dL(t)){var i=t.dataType,n=e.getData(i),a=kv(n,t);Ue(a)||(a=[a]),e[t.type===cb?"toggleSelect":t.type===ub?"select":"unselect"](a,i)}}function ij(e){var t=e.getAllData();q(t,function(r){var i=r.data,n=r.type;i.eachItemGraphicEl(function(a,o){e.isSelected(o,n)?ble(a):wle(a)})})}function Z6e(e){var t=[];return e.eachSeries(function(r){var i=r.getAllData();q(i,function(n){n.data;var a=n.type,o=r.getSelectedDataIndices();if(o.length>0){var s={dataIndex:o,seriesIndex:r.seriesIndex};a!=null&&(s.dataType=a),t.push(s)}})}),t}function gv(e,t,r){j0(e,!0),Rd(e,Ov),hL(e,t,r)}function Q6e(e){j0(e,!1)}function Ji(e,t,r,i){i?Q6e(e):gv(e,t,r)}function hL(e,t,r){var i=Dt(e);t!=null?(i.focus=t,i.blurScope=r):i.focus&&(i.focus=null)}var nj=["emphasis","blur","select"],K6e={itemStyle:"getItemStyle",lineStyle:"getLineStyle",areaStyle:"getAreaStyle"};function Ya(e,t,r,i){r=r||"itemStyle";for(var n=0;n<nj.length;n++){var a=nj[n],o=t.getModel([a,r]),s=e.ensureState(a);s.style=i?i(o):o[K6e[r]]()}}function j0(e,t){var r=t===!1,i=e;e.highDownSilentOnTouch&&(i.__highDownSilentOnTouch=e.highDownSilentOnTouch),(!r||i.__highDownDispatcher)&&(i.__highByOuter=i.__highByOuter||0,i.__highDownDispatcher=!r)}function $b(e){return!!(e&&e.__highDownDispatcher)}function J6e(e,t,r){var i=Dt(e);i.componentMainType=t.mainType,i.componentIndex=t.componentIndex,i.componentHighDownName=r}function $6e(e){var t=$G[e];return t==null&&JG<=32&&(t=$G[e]=JG++),t}function dL(e){var t=e.type;return t===ub||t===yA||t===cb}function aj(e){var t=e.type;return t===mv||t===gA}function eCe(e){var t=vle(e);t.normalFill=e.style.fill,t.normalStroke=e.style.stroke;var r=e.states.select||{};t.selectFill=r.style&&r.style.fill||null,t.selectStroke=r.style&&r.style.stroke||null}var Sm=$c.CMD,tCe=[[],[],[]],oj=Math.sqrt,rCe=Math.atan2;function Sle(e,t){if(t){var r=e.data,i=e.len(),n,a,o,s,l,u,c=Sm.M,h=Sm.C,d=Sm.L,f=Sm.R,p=Sm.A,v=Sm.Q;for(o=0,s=0;o<i;){switch(n=r[o++],s=o,a=0,n){case c:a=1;break;case d:a=1;break;case h:a=3;break;case v:a=2;break;case p:var m=t[4],g=t[5],y=oj(t[0]*t[0]+t[1]*t[1]),x=oj(t[2]*t[2]+t[3]*t[3]),b=rCe(-t[1]/x,t[0]/y);r[o]*=y,r[o++]+=m,r[o]*=x,r[o++]+=g,r[o++]*=y,r[o++]*=x,r[o++]+=b,r[o++]+=b,o+=2,s=o;break;case f:u[0]=r[o++],u[1]=r[o++],Wa(u,u,t),r[s++]=u[0],r[s++]=u[1],u[0]+=r[o++],u[1]+=r[o++],Wa(u,u,t),r[s++]=u[0],r[s++]=u[1]}for(l=0;l<a;l++){var _=tCe[l];_[0]=r[o++],_[1]=r[o++],Wa(_,_,t),r[s++]=_[0],r[s++]=_[1]}}e.increaseVersion()}}var QE=Math.sqrt,C3=Math.sin,E3=Math.cos,b2=Math.PI;function sj(e){return Math.sqrt(e[0]*e[0]+e[1]*e[1])}function fL(e,t){return(e[0]*t[0]+e[1]*t[1])/(sj(e)*sj(t))}function lj(e,t){return(e[0]*t[1]<e[1]*t[0]?-1:1)*Math.acos(fL(e,t))}function uj(e,t,r,i,n,a,o,s,l,u,c){var h=l*(b2/180),d=E3(h)*(e-r)/2+C3(h)*(t-i)/2,f=-1*C3(h)*(e-r)/2+E3(h)*(t-i)/2,p=d*d/(o*o)+f*f/(s*s);p>1&&(o*=QE(p),s*=QE(p));var v=(n===a?-1:1)*QE((o*o*(s*s)-o*o*(f*f)-s*s*(d*d))/(o*o*(f*f)+s*s*(d*d)))||0,m=v*o*f/s,g=v*-s*d/o,y=(e+r)/2+E3(h)*m-C3(h)*g,x=(t+i)/2+C3(h)*m+E3(h)*g,b=lj([1,0],[(d-m)/o,(f-g)/s]),_=[(d-m)/o,(f-g)/s],w=[(-1*d-m)/o,(-1*f-g)/s],S=lj(_,w);if(fL(_,w)<=-1&&(S=b2),fL(_,w)>=1&&(S=0),S<0){var A=Math.round(S/b2*1e6)/1e6;S=b2*2+A%2*b2}c.addData(u,y,x,o,s,b,S,h,a)}var iCe=/([mlvhzcqtsa])([^mlvhzcqtsa]*)/ig,nCe=/-?([0-9]*\.)?[0-9]+([eE]-?[0-9]+)?/g;function aCe(e){var t=new $c;if(!e)return t;var r=0,i=0,n=r,a=i,o,s=$c.CMD,l=e.match(iCe);if(!l)return t;for(var u=0;u<l.length;u++){for(var c=l[u],h=c.charAt(0),d=void 0,f=c.match(nCe)||[],p=f.length,v=0;v<p;v++)f[v]=parseFloat(f[v]);for(var m=0;m<p;){var g=void 0,y=void 0,x=void 0,b=void 0,_=void 0,w=void 0,S=void 0,A=r,M=i,E=void 0,T=void 0;switch(h){case"l":r+=f[m++],i+=f[m++],d=s.L,t.addData(d,r,i);break;case"L":r=f[m++],i=f[m++],d=s.L,t.addData(d,r,i);break;case"m":r+=f[m++],i+=f[m++],d=s.M,t.addData(d,r,i),n=r,a=i,h="l";break;case"M":r=f[m++],i=f[m++],d=s.M,t.addData(d,r,i),n=r,a=i,h="L";break;case"h":r+=f[m++],d=s.L,t.addData(d,r,i);break;case"H":r=f[m++],d=s.L,t.addData(d,r,i);break;case"v":i+=f[m++],d=s.L,t.addData(d,r,i);break;case"V":i=f[m++],d=s.L,t.addData(d,r,i);break;case"C":d=s.C,t.addData(d,f[m++],f[m++],f[m++],f[m++],f[m++],f[m++]),r=f[m-2],i=f[m-1];break;case"c":d=s.C,t.addData(d,f[m++]+r,f[m++]+i,f[m++]+r,f[m++]+i,f[m++]+r,f[m++]+i),r+=f[m-2],i+=f[m-1];break;case"S":g=r,y=i,E=t.len(),T=t.data,o===s.C&&(g+=r-T[E-4],y+=i-T[E-3]),d=s.C,A=f[m++],M=f[m++],r=f[m++],i=f[m++],t.addData(d,g,y,A,M,r,i);break;case"s":g=r,y=i,E=t.len(),T=t.data,o===s.C&&(g+=r-T[E-4],y+=i-T[E-3]),d=s.C,A=r+f[m++],M=i+f[m++],r+=f[m++],i+=f[m++],t.addData(d,g,y,A,M,r,i);break;case"Q":A=f[m++],M=f[m++],r=f[m++],i=f[m++],d=s.Q,t.addData(d,A,M,r,i);break;case"q":A=f[m++]+r,M=f[m++]+i,r+=f[m++],i+=f[m++],d=s.Q,t.addData(d,A,M,r,i);break;case"T":g=r,y=i,E=t.len(),T=t.data,o===s.Q&&(g+=r-T[E-4],y+=i-T[E-3]),r=f[m++],i=f[m++],d=s.Q,t.addData(d,g,y,r,i);break;case"t":g=r,y=i,E=t.len(),T=t.data,o===s.Q&&(g+=r-T[E-4],y+=i-T[E-3]),r+=f[m++],i+=f[m++],d=s.Q,t.addData(d,g,y,r,i);break;case"A":x=f[m++],b=f[m++],_=f[m++],w=f[m++],S=f[m++],A=r,M=i,r=f[m++],i=f[m++],d=s.A,uj(A,M,r,i,w,S,x,b,_,d,t);break;case"a":x=f[m++],b=f[m++],_=f[m++],w=f[m++],S=f[m++],A=r,M=i,r+=f[m++],i+=f[m++],d=s.A,uj(A,M,r,i,w,S,x,b,_,d,t);break}}(h==="z"||h==="Z")&&(d=s.Z,t.addData(d),r=n,i=a),o=d}return t.toStatic(),t}var Cle=function(e){_e(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.applyTransform=function(r){},t}(or);function Ele(e){return e.setData!=null}function Mle(e,t){var r=aCe(e),i=Be({},t);return i.buildPath=function(n){if(Ele(n)){n.setData(r.data);var a=n.getContext();a&&n.rebuildPath(a,1)}else{var a=n;r.rebuildPath(a,1)}},i.applyTransform=function(n){Sle(r,n),this.dirtyShape()},i}function Tle(e,t){return new Cle(Mle(e,t))}function oCe(e,t){var r=Mle(e,t),i=function(n){_e(a,n);function a(o){var s=n.call(this,o)||this;return s.applyTransform=r.applyTransform,s.buildPath=r.buildPath,s}return a}(Cle);return i}function sCe(e,t){for(var r=[],i=e.length,n=0;n<i;n++){var a=e[n];r.push(a.getUpdatedPathProxy(!0))}var o=new or(t);return o.createPathProxy(),o.buildPath=function(s){if(Ele(s)){s.appendPath(r);var l=s.getContext();l&&s.rebuildPath(l,1)}},o}function dN(e,t){t=t||{};var r=new or;return e.shape&&r.setShape(e.shape),r.setStyle(e.style),t.bakeTransform?Sle(r.path,e.getComputedTransform()):t.toLocal?r.setLocalTransform(e.getComputedTransform()):r.copyTransform(e),r.buildPath=e.buildPath,r.applyTransform=r.applyTransform,r.z=e.z,r.z2=e.z2,r.zlevel=e.zlevel,r}var lCe=function(){function e(){this.cx=0,this.cy=0,this.r=0}return e}(),Od=function(e){_e(t,e);function t(r){return e.call(this,r)||this}return t.prototype.getDefaultShape=function(){return new lCe},t.prototype.buildPath=function(r,i){r.moveTo(i.cx+i.r,i.cy),r.arc(i.cx,i.cy,i.r,0,Math.PI*2)},t}(or);Od.prototype.type="circle";var uCe=function(){function e(){this.cx=0,this.cy=0,this.rx=0,this.ry=0}return e}(),xC=function(e){_e(t,e);function t(r){return e.call(this,r)||this}return t.prototype.getDefaultShape=function(){return new uCe},t.prototype.buildPath=function(r,i){var n=.5522848,a=i.cx,o=i.cy,s=i.rx,l=i.ry,u=s*n,c=l*n;r.moveTo(a-s,o),r.bezierCurveTo(a-s,o-c,a-u,o-l,a,o-l),r.bezierCurveTo(a+u,o-l,a+s,o-c,a+s,o),r.bezierCurveTo(a+s,o+c,a+u,o+l,a,o+l),r.bezierCurveTo(a-u,o+l,a-s,o+c,a-s,o),r.closePath()},t}(or);xC.prototype.type="ellipse";var Ple=Math.PI,KE=Ple*2,Xp=Math.sin,Cm=Math.cos,cCe=Math.acos,$a=Math.atan2,cj=Math.abs,hb=Math.sqrt,Ix=Math.max,qu=Math.min,nu=1e-4;function hCe(e,t,r,i,n,a,o,s){var l=r-e,u=i-t,c=o-n,h=s-a,d=h*l-c*u;if(!(d*d<nu))return d=(c*(t-a)-h*(e-n))/d,[e+d*l,t+d*u]}function M3(e,t,r,i,n,a,o){var s=e-r,l=t-i,u=(o?a:-a)/hb(s*s+l*l),c=u*l,h=-u*s,d=e+c,f=t+h,p=r+c,v=i+h,m=(d+p)/2,g=(f+v)/2,y=p-d,x=v-f,b=y*y+x*x,_=n-a,w=d*v-p*f,S=(x<0?-1:1)*hb(Ix(0,_*_*b-w*w)),A=(w*x-y*S)/b,M=(-w*y-x*S)/b,E=(w*x+y*S)/b,T=(-w*y+x*S)/b,L=A-m,P=M-g,C=E-m,D=T-g;return L*L+P*P>C*C+D*D&&(A=E,M=T),{cx:A,cy:M,x0:-c,y0:-h,x1:A*(n/_-1),y1:M*(n/_-1)}}function dCe(e){var t;if(Ue(e)){var r=e.length;if(!r)return e;r===1?t=[e[0],e[0],0,0]:r===2?t=[e[0],e[0],e[1],e[1]]:r===3?t=e.concat(e[2]):t=e}else t=[e,e,e,e];return t}function fCe(e,t){var r,i=Ix(t.r,0),n=Ix(t.r0||0,0),a=i>0,o=n>0;if(!(!a&&!o)){if(a||(i=n,n=0),n>i){var s=i;i=n,n=s}var l=t.startAngle,u=t.endAngle;if(!(isNaN(l)||isNaN(u))){var c=t.cx,h=t.cy,d=!!t.clockwise,f=cj(u-l),p=f>KE&&f%KE;if(p>nu&&(f=p),!(i>nu))e.moveTo(c,h);else if(f>KE-nu)e.moveTo(c+i*Cm(l),h+i*Xp(l)),e.arc(c,h,i,l,u,!d),n>nu&&(e.moveTo(c+n*Cm(u),h+n*Xp(u)),e.arc(c,h,n,u,l,d));else{var v=void 0,m=void 0,g=void 0,y=void 0,x=void 0,b=void 0,_=void 0,w=void 0,S=void 0,A=void 0,M=void 0,E=void 0,T=void 0,L=void 0,P=void 0,C=void 0,D=i*Cm(l),I=i*Xp(l),O=n*Cm(u),R=n*Xp(u),H=f>nu;if(H){var j=t.cornerRadius;j&&(r=dCe(j),v=r[0],m=r[1],g=r[2],y=r[3]);var N=cj(i-n)/2;if(x=qu(N,g),b=qu(N,y),_=qu(N,v),w=qu(N,m),M=S=Ix(x,b),E=A=Ix(_,w),(S>nu||A>nu)&&(T=i*Cm(u),L=i*Xp(u),P=n*Cm(l),C=n*Xp(l),f<Ple)){var k=hCe(D,I,P,C,T,L,O,R);if(k){var G=D-k[0],Y=I-k[1],F=T-k[0],Z=L-k[1],ne=1/Xp(cCe((G*F+Y*Z)/(hb(G*G+Y*Y)*hb(F*F+Z*Z)))/2),re=hb(k[0]*k[0]+k[1]*k[1]);M=qu(S,(i-re)/(ne+1)),E=qu(A,(n-re)/(ne-1))}}}if(!H)e.moveTo(c+D,h+I);else if(M>nu){var ae=qu(g,M),he=qu(y,M),se=M3(P,C,D,I,i,ae,d),fe=M3(T,L,O,R,i,he,d);e.moveTo(c+se.cx+se.x0,h+se.cy+se.y0),M<S&&ae===he?e.arc(c+se.cx,h+se.cy,M,$a(se.y0,se.x0),$a(fe.y0,fe.x0),!d):(ae>0&&e.arc(c+se.cx,h+se.cy,ae,$a(se.y0,se.x0),$a(se.y1,se.x1),!d),e.arc(c,h,i,$a(se.cy+se.y1,se.cx+se.x1),$a(fe.cy+fe.y1,fe.cx+fe.x1),!d),he>0&&e.arc(c+fe.cx,h+fe.cy,he,$a(fe.y1,fe.x1),$a(fe.y0,fe.x0),!d))}else e.moveTo(c+D,h+I),e.arc(c,h,i,l,u,!d);if(!(n>nu)||!H)e.lineTo(c+O,h+R);else if(E>nu){var ae=qu(v,E),he=qu(m,E),se=M3(O,R,T,L,n,-he,d),fe=M3(D,I,P,C,n,-ae,d);e.lineTo(c+se.cx+se.x0,h+se.cy+se.y0),E<A&&ae===he?e.arc(c+se.cx,h+se.cy,E,$a(se.y0,se.x0),$a(fe.y0,fe.x0),!d):(he>0&&e.arc(c+se.cx,h+se.cy,he,$a(se.y0,se.x0),$a(se.y1,se.x1),!d),e.arc(c,h,n,$a(se.cy+se.y1,se.cx+se.x1),$a(fe.cy+fe.y1,fe.cx+fe.x1),d),ae>0&&e.arc(c+fe.cx,h+fe.cy,ae,$a(fe.y1,fe.x1),$a(fe.y0,fe.x0),!d))}else e.lineTo(c+O,h+R),e.arc(c,h,n,u,l,d)}e.closePath()}}}var pCe=function(){function e(){this.cx=0,this.cy=0,this.r0=0,this.r=0,this.startAngle=0,this.endAngle=Math.PI*2,this.clockwise=!0,this.cornerRadius=0}return e}(),Zo=function(e){_e(t,e);function t(r){return e.call(this,r)||this}return t.prototype.getDefaultShape=function(){return new pCe},t.prototype.buildPath=function(r,i){fCe(r,i)},t.prototype.isZeroArea=function(){return this.shape.startAngle===this.shape.endAngle||this.shape.r===this.shape.r0},t}(or);Zo.prototype.type="sector";var vCe=function(){function e(){this.cx=0,this.cy=0,this.r=0,this.r0=0}return e}(),h4=function(e){_e(t,e);function t(r){return e.call(this,r)||this}return t.prototype.getDefaultShape=function(){return new vCe},t.prototype.buildPath=function(r,i){var n=i.cx,a=i.cy,o=Math.PI*2;r.moveTo(n+i.r,a),r.arc(n,a,i.r,0,o,!1),r.moveTo(n+i.r0,a),r.arc(n,a,i.r0,0,o,!0)},t}(or);h4.prototype.type="ring";function mCe(e,t,r,i){var n=[],a=[],o=[],s=[],l,u,c,h;if(i){c=[1/0,1/0],h=[-1/0,-1/0];for(var d=0,f=e.length;d<f;d++)Rf(c,c,e[d]),Of(h,h,e[d]);Rf(c,c,i[0]),Of(h,h,i[1])}for(var d=0,f=e.length;d<f;d++){var p=e[d];if(r)l=e[d?d-1:f-1],u=e[(d+1)%f];else if(d===0||d===f-1){n.push(ad(e[d]));continue}else l=e[d-1],u=e[d+1];U0(a,u,l),cA(a,a,t);var v=VI(p,l),m=VI(p,u),g=v+m;g!==0&&(v/=g,m/=g),cA(o,a,-v),cA(s,a,m);var y=iG([],p,o),x=iG([],p,s);i&&(Of(y,y,c),Rf(y,y,h),Of(x,x,c),Rf(x,x,h)),n.push(y),n.push(x)}return r&&n.push(n.shift()),n}function Dle(e,t,r){var i=t.smooth,n=t.points;if(n&&n.length>=2){if(i){var a=mCe(n,i,r,t.smoothConstraint);e.moveTo(n[0][0],n[0][1]);for(var o=n.length,s=0;s<(r?o:o-1);s++){var l=a[s*2],u=a[s*2+1],c=n[(s+1)%o];e.bezierCurveTo(l[0],l[1],u[0],u[1],c[0],c[1])}}else{e.moveTo(n[0][0],n[0][1]);for(var s=1,h=n.length;s<h;s++)e.lineTo(n[s][0],n[s][1])}r&&e.closePath()}}var gCe=function(){function e(){this.points=null,this.smooth=0,this.smoothConstraint=null}return e}(),Qo=function(e){_e(t,e);function t(r){return e.call(this,r)||this}return t.prototype.getDefaultShape=function(){return new gCe},t.prototype.buildPath=function(r,i){Dle(r,i,!0)},t}(or);Qo.prototype.type="polygon";var yCe=function(){function e(){this.points=null,this.percent=1,this.smooth=0,this.smoothConstraint=null}return e}(),$o=function(e){_e(t,e);function t(r){return e.call(this,r)||this}return t.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},t.prototype.getDefaultShape=function(){return new yCe},t.prototype.buildPath=function(r,i){Dle(r,i,!1)},t}(or);$o.prototype.type="polyline";var xCe={},bCe=function(){function e(){this.x1=0,this.y1=0,this.x2=0,this.y2=0,this.percent=1}return e}(),$n=function(e){_e(t,e);function t(r){return e.call(this,r)||this}return t.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},t.prototype.getDefaultShape=function(){return new bCe},t.prototype.buildPath=function(r,i){var n,a,o,s;if(this.subPixelOptimize){var l=hle(xCe,i,this.style);n=l.x1,a=l.y1,o=l.x2,s=l.y2}else n=i.x1,a=i.y1,o=i.x2,s=i.y2;var u=i.percent;u!==0&&(r.moveTo(n,a),u<1&&(o=n*(1-u)+o*u,s=a*(1-u)+s*u),r.lineTo(o,s))},t.prototype.pointAt=function(r){var i=this.shape;return[i.x1*(1-r)+i.x2*r,i.y1*(1-r)+i.y2*r]},t}(or);$n.prototype.type="line";var rs=[],wCe=function(){function e(){this.x1=0,this.y1=0,this.x2=0,this.y2=0,this.cpx1=0,this.cpy1=0,this.percent=1}return e}();function hj(e,t,r){var i=e.cpx2,n=e.cpy2;return i!=null||n!=null?[(r?vG:qn)(e.x1,e.cpx1,e.cpx2,e.x2,t),(r?vG:qn)(e.y1,e.cpy1,e.cpy2,e.y2,t)]:[(r?GI:fa)(e.x1,e.cpx1,e.x2,t),(r?GI:fa)(e.y1,e.cpy1,e.y2,t)]}var d4=function(e){_e(t,e);function t(r){return e.call(this,r)||this}return t.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},t.prototype.getDefaultShape=function(){return new wCe},t.prototype.buildPath=function(r,i){var n=i.x1,a=i.y1,o=i.x2,s=i.y2,l=i.cpx1,u=i.cpy1,c=i.cpx2,h=i.cpy2,d=i.percent;d!==0&&(r.moveTo(n,a),c==null||h==null?(d<1&&(Yb(n,l,o,d,rs),l=rs[1],o=rs[2],Yb(a,u,s,d,rs),u=rs[1],s=rs[2]),r.quadraticCurveTo(l,u,o,s)):(d<1&&(dp(n,l,c,o,d,rs),l=rs[1],c=rs[2],o=rs[3],dp(a,u,h,s,d,rs),u=rs[1],h=rs[2],s=rs[3]),r.bezierCurveTo(l,u,c,h,o,s)))},t.prototype.pointAt=function(r){return hj(this.shape,r,!1)},t.prototype.tangentAt=function(r){var i=hj(this.shape,r,!0);return by(i,i)},t}(or);d4.prototype.type="bezier-curve";var _Ce=function(){function e(){this.cx=0,this.cy=0,this.r=0,this.startAngle=0,this.endAngle=Math.PI*2,this.clockwise=!0}return e}(),bC=function(e){_e(t,e);function t(r){return e.call(this,r)||this}return t.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},t.prototype.getDefaultShape=function(){return new _Ce},t.prototype.buildPath=function(r,i){var n=i.cx,a=i.cy,o=Math.max(i.r,0),s=i.startAngle,l=i.endAngle,u=i.clockwise,c=Math.cos(s),h=Math.sin(s);r.moveTo(c*o+n,h*o+a),r.arc(n,a,o,s,l,!u)},t}(or);bC.prototype.type="arc";var fN=function(e){_e(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type="compound",r}return t.prototype._updatePathDirty=function(){for(var r=this.shape.paths,i=this.shapeChanged(),n=0;n<r.length;n++)i=i||r[n].shapeChanged();i&&this.dirtyShape()},t.prototype.beforeBrush=function(){this._updatePathDirty();for(var r=this.shape.paths||[],i=this.getGlobalScale(),n=0;n<r.length;n++)r[n].path||r[n].createPathProxy(),r[n].path.setScale(i[0],i[1],r[n].segmentIgnoreThreshold)},t.prototype.buildPath=function(r,i){for(var n=i.paths||[],a=0;a<n.length;a++)n[a].buildPath(r,n[a].shape,!0)},t.prototype.afterBrush=function(){for(var r=this.shape.paths||[],i=0;i<r.length;i++)r[i].pathUpdated()},t.prototype.getBoundingRect=function(){return this._updatePathDirty.call(this),or.prototype.getBoundingRect.call(this)},t}(or),Ile=function(){function e(t){this.colorStops=t||[]}return e.prototype.addColorStop=function(t,r){this.colorStops.push({offset:t,color:r})},e}(),Sy=function(e){_e(t,e);function t(r,i,n,a,o,s){var l=e.call(this,o)||this;return l.x=r??0,l.y=i??0,l.x2=n??1,l.y2=a??0,l.type="linear",l.global=s||!1,l}return t}(Ile),Lle=function(e){_e(t,e);function t(r,i,n,a,o){var s=e.call(this,a)||this;return s.x=r??.5,s.y=i??.5,s.r=n??.5,s.type="radial",s.global=o||!1,s}return t}(Ile),Zp=[0,0],Qp=[0,0],T3=new Ut,P3=new Ut,O8=function(){function e(t,r){this._corners=[],this._axes=[],this._origin=[0,0];for(var i=0;i<4;i++)this._corners[i]=new Ut;for(var i=0;i<2;i++)this._axes[i]=new Ut;t&&this.fromBoundingRect(t,r)}return e.prototype.fromBoundingRect=function(t,r){var i=this._corners,n=this._axes,a=t.x,o=t.y,s=a+t.width,l=o+t.height;if(i[0].set(a,o),i[1].set(s,o),i[2].set(s,l),i[3].set(a,l),r)for(var u=0;u<4;u++)i[u].transform(r);Ut.sub(n[0],i[1],i[0]),Ut.sub(n[1],i[3],i[0]),n[0].normalize(),n[1].normalize();for(var u=0;u<2;u++)this._origin[u]=n[u].dot(i[0])},e.prototype.intersect=function(t,r){var i=!0,n=!r;return T3.set(1/0,1/0),P3.set(0,0),!this._intersectCheckOneSide(this,t,T3,P3,n,1)&&(i=!1,n)||!this._intersectCheckOneSide(t,this,T3,P3,n,-1)&&(i=!1,n)||n||Ut.copy(r,i?T3:P3),i},e.prototype._intersectCheckOneSide=function(t,r,i,n,a,o){for(var s=!0,l=0;l<2;l++){var u=this._axes[l];if(this._getProjMinMaxOnAxis(l,t._corners,Zp),this._getProjMinMaxOnAxis(l,r._corners,Qp),Zp[1]<Qp[0]||Zp[0]>Qp[1]){if(s=!1,a)return s;var c=Math.abs(Qp[0]-Zp[1]),h=Math.abs(Zp[0]-Qp[1]);Math.min(c,h)>n.len()&&(c<h?Ut.scale(n,u,-c*o):Ut.scale(n,u,h*o))}else if(i){var c=Math.abs(Qp[0]-Zp[1]),h=Math.abs(Zp[0]-Qp[1]);Math.min(c,h)<i.len()&&(c<h?Ut.scale(i,u,c*o):Ut.scale(i,u,-h*o))}}return s},e.prototype._getProjMinMaxOnAxis=function(t,r,i){for(var n=this._axes[t],a=this._origin,o=r[0].dot(n)+a[t],s=o,l=o,u=1;u<r.length;u++){var c=r[u].dot(n)+a[t];s=Math.min(c,s),l=Math.max(c,l)}i[0]=s,i[1]=l},e}(),ACe=[],SCe=function(e){_e(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.notClear=!0,r.incremental=!0,r._displayables=[],r._temporaryDisplayables=[],r._cursor=0,r}return t.prototype.traverse=function(r,i){r.call(i,this)},t.prototype.useStyle=function(){this.style={}},t.prototype.getCursor=function(){return this._cursor},t.prototype.innerAfterBrush=function(){this._cursor=this._displayables.length},t.prototype.clearDisplaybles=function(){this._displayables=[],this._temporaryDisplayables=[],this._cursor=0,this.markRedraw(),this.notClear=!1},t.prototype.clearTemporalDisplayables=function(){this._temporaryDisplayables=[]},t.prototype.addDisplayable=function(r,i){i?this._temporaryDisplayables.push(r):this._displayables.push(r),this.markRedraw()},t.prototype.addDisplayables=function(r,i){i=i||!1;for(var n=0;n<r.length;n++)this.addDisplayable(r[n],i)},t.prototype.getDisplayables=function(){return this._displayables},t.prototype.getTemporalDisplayables=function(){return this._temporaryDisplayables},t.prototype.eachPendingDisplayable=function(r){for(var i=this._cursor;i<this._displayables.length;i++)r&&r(this._displayables[i]);for(var i=0;i<this._temporaryDisplayables.length;i++)r&&r(this._temporaryDisplayables[i])},t.prototype.update=function(){this.updateTransform();for(var r=this._cursor;r<this._displayables.length;r++){var i=this._displayables[r];i.parent=this,i.update(),i.parent=null}for(var r=0;r<this._temporaryDisplayables.length;r++){var i=this._temporaryDisplayables[r];i.parent=this,i.update(),i.parent=null}},t.prototype.getBoundingRect=function(){if(!this._rect){for(var r=new qt(1/0,1/0,-1/0,-1/0),i=0;i<this._displayables.length;i++){var n=this._displayables[i],a=n.getBoundingRect().clone();n.needLocalTransform()&&a.applyTransform(n.getLocalTransform(ACe)),r.union(a)}this._rect=r}return this._rect},t.prototype.contain=function(r,i){var n=this.transformCoordToLocal(r,i),a=this.getBoundingRect();if(a.contain(n[0],n[1]))for(var o=0;o<this._displayables.length;o++){var s=this._displayables[o];if(s.contain(r,i))return!0}return!1},t}(Rl),kle=Pr();function Cy(e,t,r,i,n){var a;if(t&&t.ecModel){var o=t.ecModel.getUpdatePayload();a=o&&o.animation}var s=t&&t.isAnimationEnabled(),l=e==="update";if(s){var u=void 0,c=void 0,h=void 0;i?(u=Lt(i.duration,200),c=Lt(i.easing,"cubicOut"),h=0):(u=t.getShallow(l?"animationDurationUpdate":"animationDuration"),c=t.getShallow(l?"animationEasingUpdate":"animationEasing"),h=t.getShallow(l?"animationDelayUpdate":"animationDelay")),a&&(a.duration!=null&&(u=a.duration),a.easing!=null&&(c=a.easing),a.delay!=null&&(h=a.delay)),xt(h)&&(h=h(r,n)),xt(u)&&(u=u(r));var d={duration:u||0,delay:h,easing:c};return d}else return null}function pN(e,t,r,i,n,a,o){var s=!1,l;xt(n)?(o=a,a=n,n=null):_t(n)&&(a=n.cb,o=n.during,s=n.isFrom,l=n.removeOpt,n=n.dataIndex);var u=e==="leave";u||t.stopAnimation("leave");var c=Cy(e,i,n,u?l||{}:null,i&&i.getAnimationDelayParams?i.getAnimationDelayParams(t,n):null);if(c&&c.duration>0){var h=c.duration,d=c.delay,f=c.easing,p={duration:h,delay:d||0,easing:f,done:a,force:!!a||!!o,setToFinal:!u,scope:e,during:o};s?t.animateFrom(r,p):t.animateTo(r,p)}else t.stopAnimation(),!s&&t.attr(r),o&&o(1),a&&a()}function Nr(e,t,r,i,n,a){pN("update",e,t,r,i,n,a)}function Vi(e,t,r,i,n,a){pN("enter",e,t,r,i,n,a)}function u1(e){if(!e.__zr)return!0;for(var t=0;t<e.animators.length;t++){var r=e.animators[t];if(r.scope==="leave")return!0}return!1}function fp(e,t,r,i,n,a){u1(e)||pN("leave",e,t,r,i,n,a)}function dj(e,t,r,i){e.removeTextContent(),e.removeTextGuideLine(),fp(e,{style:{opacity:0}},t,r,i)}function ew(e,t,r){function i(){e.parent&&e.parent.remove(e)}e.isGroup?e.traverse(function(n){n.isGroup||dj(n,t,r,i)}):dj(e,t,r,i)}function Pu(e){kle(e).oldStyle=e.style}function CCe(e){return kle(e).oldStyle}var B8=Math.max,N8=Math.min,pL={};function ECe(e){return or.extend(e)}var MCe=oCe;function TCe(e,t){return MCe(e,t)}function Vu(e,t){pL[e]=t}function vN(e){if(pL.hasOwnProperty(e))return pL[e]}function wC(e,t,r,i){var n=Tle(e,t);return r&&(i==="center"&&(r=Ole(r,n.getBoundingRect())),Ble(n,r)),n}function Rle(e,t,r){var i=new Ta({style:{image:e,x:t.x,y:t.y,width:t.width,height:t.height},onload:function(n){if(r==="center"){var a={width:n.width,height:n.height};i.setStyle(Ole(t,a))}}});return i}function Ole(e,t){var r=t.width/t.height,i=e.height*r,n;i<=e.width?n=e.height:(i=e.width,n=i/r);var a=e.x+e.width/2,o=e.y+e.height/2;return{x:a-i/2,y:o-n/2,width:i,height:n}}var Cl=sCe;function Ble(e,t){if(e.applyTransform){var r=e.getBoundingRect(),i=r.calculateTransform(t);e.applyTransform(i)}}function V1(e,t){return hle(e,e,{lineWidth:t}),e}function PCe(e){return dle(e.shape,e.shape,e.style),e}var xA=G0;function yv(e,t){for(var r=uC([]);e&&e!==t;)od(r,e.getLocalTransform(),r),e=e.parent;return r}function Au(e,t,r){return t&&!_o(t)&&(t=Qh.getLocalTransform(t)),r&&(t=wy([],t)),Wa([],e,t)}function _C(e,t,r){var i=t[4]===0||t[5]===0||t[0]===0?1:Math.abs(2*t[4]/t[0]),n=t[4]===0||t[5]===0||t[2]===0?1:Math.abs(2*t[4]/t[2]),a=[e==="left"?-i:e==="right"?i:0,e==="top"?-n:e==="bottom"?n:0];return a=Au(a,t,r),Math.abs(a[0])>Math.abs(a[1])?a[0]>0?"right":"left":a[1]>0?"bottom":"top"}function fj(e){return!e.isGroup}function DCe(e){return e.shape!=null}function f4(e,t,r){if(!e||!t)return;function i(o){var s={};return o.traverse(function(l){fj(l)&&l.anid&&(s[l.anid]=l)}),s}function n(o){var s={x:o.x,y:o.y,rotation:o.rotation};return DCe(o)&&(s.shape=Be({},o.shape)),s}var a=i(e);t.traverse(function(o){if(fj(o)&&o.anid){var s=a[o.anid];if(s){var l=n(o);o.attr(n(s)),Nr(o,l,r,Dt(o).dataIndex)}}})}function Nle(e,t){return qe(e,function(r){var i=r[0];i=B8(i,t.x),i=N8(i,t.x+t.width);var n=r[1];return n=B8(n,t.y),n=N8(n,t.y+t.height),[i,n]})}function ICe(e,t){var r=B8(e.x,t.x),i=N8(e.x+e.width,t.x+t.width),n=B8(e.y,t.y),a=N8(e.y+e.height,t.y+t.height);if(i>=r&&a>=n)return{x:r,y:n,width:i-r,height:a-n}}function p4(e,t,r){var i=Be({rectHover:!0},t),n=i.style={strokeNoScale:!0};if(r=r||{x:-1,y:-1,width:2,height:2},e)return e.indexOf("image://")===0?(n.image=e.slice(8),bt(n,r),new Ta(i)):wC(e.replace("path://",""),i,r,"center")}function Lx(e,t,r,i,n){for(var a=0,o=n[n.length-1];a<n.length;a++){var s=n[a];if(Vle(e,t,r,i,s[0],s[1],o[0],o[1]))return!0;o=s}}function Vle(e,t,r,i,n,a,o,s){var l=r-e,u=i-t,c=o-n,h=s-a,d=JE(c,h,l,u);if(LCe(d))return!1;var f=e-n,p=t-a,v=JE(f,p,l,u)/d;if(v<0||v>1)return!1;var m=JE(f,p,c,h)/d;return!(m<0||m>1)}function JE(e,t,r,i){return e*i-r*t}function LCe(e){return e<=1e-6&&e>=-1e-6}function Ey(e){var t=e.itemTooltipOption,r=e.componentModel,i=e.itemName,n=it(t)?{formatter:t}:t,a=r.mainType,o=r.componentIndex,s={componentType:a,name:i,$vars:["name"]};s[a+"Index"]=o;var l=e.formatterParamsExtra;l&&q(mr(l),function(c){lt(s,c)||(s[c]=l[c],s.$vars.push(c))});var u=Dt(e.el);u.componentMainType=a,u.componentIndex=o,u.tooltipConfig={name:i,option:bt({content:i,encodeHTMLContent:!0,formatterParams:s},n)}}function pj(e,t){var r;e.isGroup&&(r=t(e)),r||e.traverse(t)}function Ep(e,t){if(e)if(Ue(e))for(var r=0;r<e.length;r++)pj(e[r],t);else pj(e,t)}Vu("circle",Od);Vu("ellipse",xC);Vu("sector",Zo);Vu("ring",h4);Vu("polygon",Qo);Vu("polyline",$o);Vu("rect",Tr);Vu("line",$n);Vu("bezierCurve",d4);Vu("arc",bC);const $v=Object.freeze(Object.defineProperty({__proto__:null,Arc:bC,BezierCurve:d4,BoundingRect:qt,Circle:Od,CompoundPath:fN,Ellipse:xC,Group:Ct,Image:Ta,IncrementalDisplayable:SCe,Line:$n,LinearGradient:Sy,OrientedBoundingRect:O8,Path:or,Point:Ut,Polygon:Qo,Polyline:$o,RadialGradient:Lle,Rect:Tr,Ring:h4,Sector:Zo,Text:Dr,applyTransform:Au,clipPointsByRect:Nle,clipRectByRect:ICe,createIcon:p4,extendPath:TCe,extendShape:ECe,getShapeClass:vN,getTransform:yv,groupTransition:f4,initProps:Vi,isElementRemoved:u1,lineLineIntersect:Vle,linePolygonIntersect:Lx,makeImage:Rle,makePath:wC,mergePath:Cl,registerShape:Vu,removeElement:fp,removeElementWithFadeOut:ew,resizePath:Ble,setTooltipConfig:Ey,subPixelOptimize:xA,subPixelOptimizeLine:V1,subPixelOptimizeRect:PCe,transformDirection:_C,traverseElements:Ep,updateProps:Nr},Symbol.toStringTag,{value:"Module"}));var AC={};function Fle(e,t){for(var r=0;r<Xo.length;r++){var i=Xo[r],n=t[i],a=e.ensureState(i);a.style=a.style||{},a.style.text=n}var o=e.currentStates.slice();e.clearStates(!0),e.setStyle({text:t.normal}),e.useStates(o,!0)}function vL(e,t,r){var i=e.labelFetcher,n=e.labelDataIndex,a=e.labelDimIndex,o=t.normal,s;i&&(s=i.getFormattedLabel(n,"normal",null,a,o&&o.get("formatter"),r!=null?{interpolatedValue:r}:null)),s==null&&(s=xt(e.defaultText)?e.defaultText(n,e,r):e.defaultText);for(var l={normal:s},u=0;u<Xo.length;u++){var c=Xo[u],h=t[c];l[c]=Lt(i?i.getFormattedLabel(n,c,null,a,h&&h.get("formatter")):null,s)}return l}function Xa(e,t,r,i){r=r||AC;for(var n=e instanceof Dr,a=!1,o=0;o<Jb.length;o++){var s=t[Jb[o]];if(s&&s.getShallow("show")){a=!0;break}}var l=n?e:e.getTextContent();if(a){n||(l||(l=new Dr,e.setTextContent(l)),e.stateProxy&&(l.stateProxy=e.stateProxy));var u=vL(r,t),c=t.normal,h=!!c.getShallow("show"),d=Ti(c,i&&i.normal,r,!1,!n);d.text=u.normal,n||e.setTextConfig(V8(c,r,!1));for(var o=0;o<Xo.length;o++){var f=Xo[o],s=t[f];if(s){var p=l.ensureState(f),v=!!Lt(s.getShallow("show"),h);if(v!==h&&(p.ignore=!v),p.style=Ti(s,i&&i[f],r,!0,!n),p.style.text=u[f],!n){var m=e.ensureState(f);m.textConfig=V8(s,r,!0)}}}l.silent=!!c.getShallow("silent"),l.style.x!=null&&(d.x=l.style.x),l.style.y!=null&&(d.y=l.style.y),l.ignore=!h,l.useStyle(d),l.dirty(),r.enableTextSetter&&(My(l).setLabelText=function(g){var y=vL(r,t,g);Fle(l,y)})}else l&&(l.ignore=!0);e.dirty()}function ia(e,t){t=t||"label";for(var r={normal:e.getModel(t)},i=0;i<Xo.length;i++){var n=Xo[i];r[n]=e.getModel([n,t])}return r}function Ti(e,t,r,i,n){var a={};return kCe(a,e,r,i,n),t&&Be(a,t),a}function V8(e,t,r){t=t||{};var i={},n,a=e.getShallow("rotate"),o=Lt(e.getShallow("distance"),r?null:5),s=e.getShallow("offset");return n=e.getShallow("position")||(r?null:"inside"),n==="outside"&&(n=t.defaultOutsidePosition||"top"),n!=null&&(i.position=n),s!=null&&(i.offset=s),a!=null&&(a*=Math.PI/180,i.rotation=a),o!=null&&(i.distance=o),i.outsideFill=e.get("color")==="inherit"?t.inheritColor||null:"auto",i}function kCe(e,t,r,i,n){r=r||AC;var a=t.ecModel,o=a&&a.option.textStyle,s=RCe(t),l;if(s){l={};for(var u in s)if(s.hasOwnProperty(u)){var c=t.getModel(["rich",u]);yj(l[u]={},c,o,r,i,n,!1,!0)}}l&&(e.rich=l);var h=t.get("overflow");h&&(e.overflow=h);var d=t.get("minMargin");d!=null&&(e.margin=d),yj(e,t,o,r,i,n,!0,!1)}function RCe(e){for(var t;e&&e!==e.ecModel;){var r=(e.option||AC).rich;if(r){t=t||{};for(var i=mr(r),n=0;n<i.length;n++){var a=i[n];t[a]=1}}e=e.parentModel}return t}var vj=["fontStyle","fontWeight","fontSize","fontFamily","textShadowColor","textShadowBlur","textShadowOffsetX","textShadowOffsetY"],mj=["align","lineHeight","width","height","tag","verticalAlign","ellipsis"],gj=["padding","borderWidth","borderRadius","borderDashOffset","backgroundColor","borderColor","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY"];function yj(e,t,r,i,n,a,o,s){r=!n&&r||AC;var l=i&&i.inheritColor,u=t.getShallow("color"),c=t.getShallow("textBorderColor"),h=Lt(t.getShallow("opacity"),r.opacity);(u==="inherit"||u==="auto")&&(l?u=l:u=null),(c==="inherit"||c==="auto")&&(l?c=l:c=null),a||(u=u||r.color,c=c||r.textBorderColor),u!=null&&(e.fill=u),c!=null&&(e.stroke=c);var d=Lt(t.getShallow("textBorderWidth"),r.textBorderWidth);d!=null&&(e.lineWidth=d);var f=Lt(t.getShallow("textBorderType"),r.textBorderType);f!=null&&(e.lineDash=f);var p=Lt(t.getShallow("textBorderDashOffset"),r.textBorderDashOffset);p!=null&&(e.lineDashOffset=p),!n&&h==null&&!s&&(h=i&&i.defaultOpacity),h!=null&&(e.opacity=h),!n&&!a&&e.fill==null&&i.inheritColor&&(e.fill=i.inheritColor);for(var v=0;v<vj.length;v++){var m=vj[v],g=Lt(t.getShallow(m),r[m]);g!=null&&(e[m]=g)}for(var v=0;v<mj.length;v++){var m=mj[v],g=t.getShallow(m);g!=null&&(e[m]=g)}if(e.verticalAlign==null){var y=t.getShallow("baseline");y!=null&&(e.verticalAlign=y)}if(!o||!i.disableBox){for(var v=0;v<gj.length;v++){var m=gj[v],g=t.getShallow(m);g!=null&&(e[m]=g)}var x=t.getShallow("borderType");x!=null&&(e.borderDash=x),(e.backgroundColor==="auto"||e.backgroundColor==="inherit")&&l&&(e.backgroundColor=l),(e.borderColor==="auto"||e.borderColor==="inherit")&&l&&(e.borderColor=l)}}function mN(e,t){var r=t&&t.getModel("textStyle");return fu([e.fontStyle||r&&r.getShallow("fontStyle")||"",e.fontWeight||r&&r.getShallow("fontWeight")||"",(e.fontSize||r&&r.getShallow("fontSize")||12)+"px",e.fontFamily||r&&r.getShallow("fontFamily")||"sans-serif"].join(" "))}var My=Pr();function zle(e,t,r,i){if(e){var n=My(e);n.prevValue=n.value,n.value=r;var a=t.normal;n.valueAnimation=a.get("valueAnimation"),n.valueAnimation&&(n.precision=a.get("precision"),n.defaultInterpolatedText=i,n.statesModels=t)}}function Hle(e,t,r,i,n){var a=My(e);if(!a.valueAnimation||a.prevValue===a.value)return;var o=a.defaultInterpolatedText,s=Lt(a.interpolatedValue,a.prevValue),l=a.value;function u(c){var h=ile(r,a.precision,s,l,c);a.interpolatedValue=c===1?null:h;var d=vL({labelDataIndex:t,labelFetcher:n,defaultText:o?o(h):h+""},a.statesModels,h);Fle(e,d)}e.percent=0,(a.prevValue==null?Vi:Nr)(e,{percent:1},i,t,null,u)}var OCe=["textStyle","color"],$E=["fontStyle","fontWeight","fontSize","fontFamily","padding","lineHeight","rich","width","height","overflow"],eM=new Dr,BCe=function(){function e(){}return e.prototype.getTextColor=function(t){var r=this.ecModel;return this.getShallow("color")||(!t&&r?r.get(OCe):null)},e.prototype.getFont=function(){return mN({fontStyle:this.getShallow("fontStyle"),fontWeight:this.getShallow("fontWeight"),fontSize:this.getShallow("fontSize"),fontFamily:this.getShallow("fontFamily")},this.ecModel)},e.prototype.getTextRect=function(t){for(var r={text:t,verticalAlign:this.getShallow("verticalAlign")||this.getShallow("baseline")},i=0;i<$E.length;i++)r[$E[i]]=this.getShallow($E[i]);return eM.useStyle(r),eM.update(),eM.getBoundingRect()},e}(),Ule=[["lineWidth","width"],["stroke","color"],["opacity"],["shadowBlur"],["shadowOffsetX"],["shadowOffsetY"],["shadowColor"],["lineDash","type"],["lineDashOffset","dashOffset"],["lineCap","cap"],["lineJoin","join"],["miterLimit"]],NCe=Rv(Ule),VCe=function(){function e(){}return e.prototype.getLineStyle=function(t){return NCe(this,t)},e}(),Gle=[["fill","color"],["stroke","borderColor"],["lineWidth","borderWidth"],["opacity"],["shadowBlur"],["shadowOffsetX"],["shadowOffsetY"],["shadowColor"],["lineDash","borderType"],["lineDashOffset","borderDashOffset"],["lineCap","borderCap"],["lineJoin","borderJoin"],["miterLimit","borderMiterLimit"]],FCe=Rv(Gle),zCe=function(){function e(){}return e.prototype.getItemStyle=function(t,r){return FCe(this,t,r)},e}(),Qr=function(){function e(t,r,i){this.parentModel=r,this.ecModel=i,this.option=t}return e.prototype.init=function(t,r,i){},e.prototype.mergeOption=function(t,r){Wt(this.option,t,!0)},e.prototype.get=function(t,r){return t==null?this.option:this._doGet(this.parsePath(t),!r&&this.parentModel)},e.prototype.getShallow=function(t,r){var i=this.option,n=i==null?i:i[t];if(n==null&&!r){var a=this.parentModel;a&&(n=a.getShallow(t))}return n},e.prototype.getModel=function(t,r){var i=t!=null,n=i?this.parsePath(t):null,a=i?this._doGet(n):this.option;return r=r||this.parentModel&&this.parentModel.getModel(this.resolveParentPath(n)),new e(a,r,this.ecModel)},e.prototype.isEmpty=function(){return this.option==null},e.prototype.restoreData=function(){},e.prototype.clone=function(){var t=this.constructor;return new t(At(this.option))},e.prototype.parsePath=function(t){return typeof t=="string"?t.split("."):t},e.prototype.resolveParentPath=function(t){return t},e.prototype.isAnimationEnabled=function(){if(!hr.node&&this.option){if(this.option.animation!=null)return!!this.option.animation;if(this.parentModel)return this.parentModel.isAnimationEnabled()}},e.prototype._doGet=function(t,r){var i=this.option;if(!t)return i;for(var n=0;n<t.length&&!(t[n]&&(i=i&&typeof i=="object"?i[t[n]]:null,i==null));n++);return i==null&&r&&(i=r._doGet(this.resolveParentPath(t),r.parentModel)),i},e}();nN(Qr);ZSe(Qr);Mn(Qr,VCe);Mn(Qr,zCe);Mn(Qr,e6e);Mn(Qr,BCe);var HCe=Math.round(Math.random()*10);function Ty(e){return[e||"",HCe++].join("_")}function UCe(e){var t={};e.registerSubTypeDefaulter=function(r,i){var n=Dc(r);t[n.main]=i},e.determineSubType=function(r,i){var n=i.type;if(!n){var a=Dc(r).main;e.hasSubTypes(r)&&t[a]&&(n=t[a](i))}return n}}function GCe(e,t){e.topologicalTravel=function(a,o,s,l){if(!a.length)return;var u=r(o),c=u.graph,h=u.noEntryList,d={};for(q(a,function(y){d[y]=!0});h.length;){var f=h.pop(),p=c[f],v=!!d[f];v&&(s.call(l,f,p.originalDeps.slice()),delete d[f]),q(p.successor,v?g:m)}q(d,function(){var y="";throw new Error(y)});function m(y){c[y].entryCount--,c[y].entryCount===0&&h.push(y)}function g(y){d[y]=!0,m(y)}};function r(a){var o={},s=[];return q(a,function(l){var u=i(o,l),c=u.originalDeps=t(l),h=n(c,a);u.entryCount=h.length,u.entryCount===0&&s.push(l),q(h,function(d){tr(u.predecessor,d)<0&&u.predecessor.push(d);var f=i(o,d);tr(f.successor,d)<0&&f.successor.push(l)})}),{graph:o,noEntryList:s}}function i(a,o){return a[o]||(a[o]={predecessor:[],successor:[]}),a[o]}function n(a,o){var s=[];return q(a,function(l){tr(o,l)>=0&&s.push(l)}),s}}function Mp(e,t){return Wt(Wt({},e,!0),t,!0)}const jCe={time:{month:["January","February","March","April","May","June","July","August","September","October","November","December"],monthAbbr:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayOfWeek:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayOfWeekAbbr:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"]},legend:{selector:{all:"All",inverse:"Inv"}},toolbox:{brush:{title:{rect:"Box Select",polygon:"Lasso Select",lineX:"Horizontally Select",lineY:"Vertically Select",keep:"Keep Selections",clear:"Clear Selections"}},dataView:{title:"Data View",lang:["Data View","Close","Refresh"]},dataZoom:{title:{zoom:"Zoom",back:"Zoom Reset"}},magicType:{title:{line:"Switch to Line Chart",bar:"Switch to Bar Chart",stack:"Stack",tiled:"Tile"}},restore:{title:"Restore"},saveAsImage:{title:"Save as Image",lang:["Right Click to Save Image"]}},series:{typeNames:{pie:"Pie chart",bar:"Bar chart",line:"Line chart",scatter:"Scatter plot",effectScatter:"Ripple scatter plot",radar:"Radar chart",tree:"Tree",treemap:"Treemap",boxplot:"Boxplot",candlestick:"Candlestick",k:"K line chart",heatmap:"Heat map",map:"Map",parallel:"Parallel coordinate map",lines:"Line graph",graph:"Relationship graph",sankey:"Sankey diagram",funnel:"Funnel chart",gauge:"Gauge",pictorialBar:"Pictorial bar",themeRiver:"Theme River Map",sunburst:"Sunburst",custom:"Custom chart",chart:"Chart"}},aria:{general:{withTitle:'This is a chart about "{title}"',withoutTitle:"This is a chart"},series:{single:{prefix:"",withName:" with type {seriesType} named {seriesName}.",withoutName:" with type {seriesType}."},multiple:{prefix:". It consists of {seriesCount} series count.",withName:" The {seriesId} series is a {seriesType} representing {seriesName}.",withoutName:" The {seriesId} series is a {seriesType}.",separator:{middle:"",end:""}}},data:{allData:"The data is as follows: ",partialData:"The first {displayCnt} items are: ",withName:"the data for {name} is {value}",withoutName:"{value}",separator:{middle:", ",end:". "}}}},WCe={time:{month:["一月","二月","三月","四月","五月","六月","七月","八月","九月","十月","十一月","十二月"],monthAbbr:["1月","2月","3月","4月","5月","6月","7月","8月","9月","10月","11月","12月"],dayOfWeek:["星期日","星期一","星期二","星期三","星期四","星期五","星期六"],dayOfWeekAbbr:["日","一","二","三","四","五","六"]},legend:{selector:{all:"全选",inverse:"反选"}},toolbox:{brush:{title:{rect:"矩形选择",polygon:"圈选",lineX:"横向选择",lineY:"纵向选择",keep:"保持选择",clear:"清除选择"}},dataView:{title:"数据视图",lang:["数据视图","关闭","刷新"]},dataZoom:{title:{zoom:"区域缩放",back:"区域缩放还原"}},magicType:{title:{line:"切换为折线图",bar:"切换为柱状图",stack:"切换为堆叠",tiled:"切换为平铺"}},restore:{title:"还原"},saveAsImage:{title:"保存为图片",lang:["右键另存为图片"]}},series:{typeNames:{pie:"饼图",bar:"柱状图",line:"折线图",scatter:"散点图",effectScatter:"涟漪散点图",radar:"雷达图",tree:"树图",treemap:"矩形树图",boxplot:"箱型图",candlestick:"K线图",k:"K线图",heatmap:"热力图",map:"地图",parallel:"平行坐标图",lines:"线图",graph:"关系图",sankey:"桑基图",funnel:"漏斗图",gauge:"仪表盘图",pictorialBar:"象形柱图",themeRiver:"主题河流图",sunburst:"旭日图",custom:"自定义图表",chart:"图表"}},aria:{general:{withTitle:"这是一个关于“{title}”的图表。",withoutTitle:"这是一个图表，"},series:{single:{prefix:"",withName:"图表类型是{seriesType}，表示{seriesName}。",withoutName:"图表类型是{seriesType}。"},multiple:{prefix:"它由{seriesCount}个图表系列组成。",withName:"第{seriesId}个系列是一个表示{seriesName}的{seriesType}，",withoutName:"第{seriesId}个系列是一个{seriesType}，",separator:{middle:"；",end:"。"}}},data:{allData:"其数据是——",partialData:"其中，前{displayCnt}项是——",withName:"{name}的数据是{value}",withoutName:"{value}",separator:{middle:"，",end:""}}}};var F8="ZH",gN="EN",c1=gN,bA={},yN={},jle=hr.domSupported?function(){var e=(document.documentElement.lang||navigator.language||navigator.browserLanguage||c1).toUpperCase();return e.indexOf(F8)>-1?F8:c1}():c1;function Wle(e,t){e=e.toUpperCase(),yN[e]=new Qr(t),bA[e]=t}function qCe(e){if(it(e)){var t=bA[e.toUpperCase()]||{};return e===F8||e===gN?At(t):Wt(At(t),At(bA[c1]),!1)}else return Wt(At(e),At(bA[c1]),!1)}function mL(e){return yN[e]}function YCe(){return yN[c1]}Wle(gN,jCe);Wle(F8,WCe);var xN=1e3,bN=xN*60,db=bN*60,El=db*24,xj=El*365,kx={year:"{yyyy}",month:"{MMM}",day:"{d}",hour:"{HH}:{mm}",minute:"{HH}:{mm}",second:"{HH}:{mm}:{ss}",millisecond:"{HH}:{mm}:{ss} {SSS}",none:"{yyyy}-{MM}-{dd} {HH}:{mm}:{ss} {SSS}"},D3="{yyyy}-{MM}-{dd}",bj={year:"{yyyy}",month:"{yyyy}-{MM}",day:D3,hour:D3+" "+kx.hour,minute:D3+" "+kx.minute,second:D3+" "+kx.second,millisecond:kx.none},tM=["year","month","day","hour","minute","second","millisecond"],qle=["year","half-year","quarter","month","week","half-week","day","half-day","quarter-day","hour","minute","second","millisecond"];function qd(e,t){return e+="","0000".substr(0,t-e.length)+e}function h1(e){switch(e){case"half-year":case"quarter":return"month";case"week":case"half-week":return"day";case"half-day":case"quarter-day":return"hour";default:return e}}function XCe(e){return e===h1(e)}function ZCe(e){switch(e){case"year":case"month":return"day";case"millisecond":return"millisecond";default:return"second"}}function SC(e,t,r,i){var n=Jc(e),a=n[wN(r)](),o=n[d1(r)]()+1,s=Math.floor((o-1)/3)+1,l=n[CC(r)](),u=n["get"+(r?"UTC":"")+"Day"](),c=n[tw(r)](),h=(c-1)%12+1,d=n[EC(r)](),f=n[MC(r)](),p=n[TC(r)](),v=c>=12?"pm":"am",m=v.toUpperCase(),g=i instanceof Qr?i:mL(i||jle)||YCe(),y=g.getModel("time"),x=y.get("month"),b=y.get("monthAbbr"),_=y.get("dayOfWeek"),w=y.get("dayOfWeekAbbr");return(t||"").replace(/{a}/g,v+"").replace(/{A}/g,m+"").replace(/{yyyy}/g,a+"").replace(/{yy}/g,qd(a%100+"",2)).replace(/{Q}/g,s+"").replace(/{MMMM}/g,x[o-1]).replace(/{MMM}/g,b[o-1]).replace(/{MM}/g,qd(o,2)).replace(/{M}/g,o+"").replace(/{dd}/g,qd(l,2)).replace(/{d}/g,l+"").replace(/{eeee}/g,_[u]).replace(/{ee}/g,w[u]).replace(/{e}/g,u+"").replace(/{HH}/g,qd(c,2)).replace(/{H}/g,c+"").replace(/{hh}/g,qd(h+"",2)).replace(/{h}/g,h+"").replace(/{mm}/g,qd(d,2)).replace(/{m}/g,d+"").replace(/{ss}/g,qd(f,2)).replace(/{s}/g,f+"").replace(/{SSS}/g,qd(p,3)).replace(/{S}/g,p+"")}function QCe(e,t,r,i,n){var a=null;if(it(r))a=r;else if(xt(r))a=r(e.value,t,{level:e.level});else{var o=Be({},kx);if(e.level>0)for(var s=0;s<tM.length;++s)o[tM[s]]="{primary|"+o[tM[s]]+"}";var l=r?r.inherit===!1?r:bt(r,o):o,u=Yle(e.value,n);if(l[u])a=l[u];else if(l.inherit){for(var c=qle.indexOf(u),s=c-1;s>=0;--s)if(l[u]){a=l[u];break}a=a||o.none}if(Ue(a)){var h=e.level==null?0:e.level>=0?e.level:a.length+e.level;h=Math.min(h,a.length-1),a=a[h]}}return SC(new Date(e.value),a,n,i)}function Yle(e,t){var r=Jc(e),i=r[d1(t)]()+1,n=r[CC(t)](),a=r[tw(t)](),o=r[EC(t)](),s=r[MC(t)](),l=r[TC(t)](),u=l===0,c=u&&s===0,h=c&&o===0,d=h&&a===0,f=d&&n===1,p=f&&i===1;return p?"year":f?"month":d?"day":h?"hour":c?"minute":u?"second":"millisecond"}function wj(e,t,r){var i=kr(e)?Jc(e):e;switch(t=t||Yle(e,r),t){case"year":return i[wN(r)]();case"half-year":return i[d1(r)]()>=6?1:0;case"quarter":return Math.floor((i[d1(r)]()+1)/4);case"month":return i[d1(r)]();case"day":return i[CC(r)]();case"half-day":return i[tw(r)]()/24;case"hour":return i[tw(r)]();case"minute":return i[EC(r)]();case"second":return i[MC(r)]();case"millisecond":return i[TC(r)]()}}function wN(e){return e?"getUTCFullYear":"getFullYear"}function d1(e){return e?"getUTCMonth":"getMonth"}function CC(e){return e?"getUTCDate":"getDate"}function tw(e){return e?"getUTCHours":"getHours"}function EC(e){return e?"getUTCMinutes":"getMinutes"}function MC(e){return e?"getUTCSeconds":"getSeconds"}function TC(e){return e?"getUTCMilliseconds":"getMilliseconds"}function KCe(e){return e?"setUTCFullYear":"setFullYear"}function Xle(e){return e?"setUTCMonth":"setMonth"}function Zle(e){return e?"setUTCDate":"setDate"}function Qle(e){return e?"setUTCHours":"setHours"}function Kle(e){return e?"setUTCMinutes":"setMinutes"}function Jle(e){return e?"setUTCSeconds":"setSeconds"}function $le(e){return e?"setUTCMilliseconds":"setMilliseconds"}function eue(e){if(!Zse(e))return it(e)?e:"-";var t=(e+"").split(".");return t[0].replace(/(\d{1,3})(?=(?:\d{3})+(?!\d))/g,"$1,")+(t.length>1?"."+t[1]:"")}function tue(e,t){return e=(e||"").toLowerCase().replace(/-(.)/g,function(r,i){return i.toUpperCase()}),t&&e&&(e=e.charAt(0).toUpperCase()+e.slice(1)),e}var Py=XB;function gL(e,t,r){var i="{yyyy}-{MM}-{dd} {HH}:{mm}:{ss}";function n(c){return c&&fu(c)?c:"-"}function a(c){return!!(c!=null&&!isNaN(c)&&isFinite(c))}var o=t==="time",s=e instanceof Date;if(o||s){var l=o?Jc(e):e;if(isNaN(+l)){if(s)return"-"}else return SC(l,i,r)}if(t==="ordinal")return OI(e)?n(e):kr(e)&&a(e)?e+"":"-";var u=vd(e);return a(u)?eue(u):OI(e)?n(e):typeof e=="boolean"?e+"":"-"}var _j=["a","b","c","d","e","f","g"],rM=function(e,t){return"{"+e+(t??"")+"}"};function rue(e,t,r){Ue(t)||(t=[t]);var i=t.length;if(!i)return"";for(var n=t[0].$vars||[],a=0;a<n.length;a++){var o=_j[a];e=e.replace(rM(o),rM(o,0))}for(var s=0;s<i;s++)for(var l=0;l<n.length;l++){var u=t[s][n[l]];e=e.replace(rM(_j[l],s),r?ls(u):u)}return e}function JCe(e,t,r){return q(t,function(i,n){e=e.replace("{"+n+"}",i)}),e}function $Ce(e,t){var r=it(e)?{color:e,extraCssText:t}:e||{},i=r.color,n=r.type;t=r.extraCssText;var a=r.renderMode||"html";if(!i)return"";if(a==="html")return n==="subItem"?'<span style="display:inline-block;vertical-align:middle;margin-right:8px;margin-left:3px;border-radius:4px;width:4px;height:4px;background-color:'+ls(i)+";"+(t||"")+'"></span>':'<span style="display:inline-block;margin-right:4px;border-radius:10px;width:10px;height:10px;background-color:'+ls(i)+";"+(t||"")+'"></span>';var o=r.markerId||"markerX";return{renderMode:a,content:"{"+o+"|}  ",style:n==="subItem"?{width:4,height:4,borderRadius:2,backgroundColor:i}:{width:10,height:10,borderRadius:5,backgroundColor:i}}}function Bv(e,t){return t=t||"transparent",it(e)?e:_t(e)&&e.colorStops&&(e.colorStops[0]||{}).color||t}function z8(e,t){if(t==="_blank"||t==="blank"){var r=window.open();r.opener=null,r.location.href=e}else window.open(e,t)}var wA=q,iue=["left","right","top","bottom","width","height"],W0=[["width","left","right"],["height","top","bottom"]];function _N(e,t,r,i,n){var a=0,o=0;i==null&&(i=1/0),n==null&&(n=1/0);var s=0;t.eachChild(function(l,u){var c=l.getBoundingRect(),h=t.childAt(u+1),d=h&&h.getBoundingRect(),f,p;if(e==="horizontal"){var v=c.width+(d?-d.x+c.x:0);f=a+v,f>i||l.newline?(a=0,f=v,o+=s+r,s=c.height):s=Math.max(s,c.height)}else{var m=c.height+(d?-d.y+c.y:0);p=o+m,p>n||l.newline?(a+=s+r,o=0,p=m,s=c.width):s=Math.max(s,c.width)}l.newline||(l.x=a,l.y=o,l.markRedraw(),e==="horizontal"?a=f+r:o=p+r)})}var xv=_N;kt(_N,"vertical");kt(_N,"horizontal");function e7e(e,t,r){var i=t.width,n=t.height,a=et(e.left,i),o=et(e.top,n),s=et(e.right,i),l=et(e.bottom,n);return(isNaN(a)||isNaN(parseFloat(e.left)))&&(a=0),(isNaN(s)||isNaN(parseFloat(e.right)))&&(s=i),(isNaN(o)||isNaN(parseFloat(e.top)))&&(o=0),(isNaN(l)||isNaN(parseFloat(e.bottom)))&&(l=n),r=Py(r||0),{width:Math.max(s-a-r[1]-r[3],0),height:Math.max(l-o-r[0]-r[2],0)}}function zn(e,t,r){r=Py(r||0);var i=t.width,n=t.height,a=et(e.left,i),o=et(e.top,n),s=et(e.right,i),l=et(e.bottom,n),u=et(e.width,i),c=et(e.height,n),h=r[2]+r[0],d=r[1]+r[3],f=e.aspect;switch(isNaN(u)&&(u=i-s-d-a),isNaN(c)&&(c=n-l-h-o),f!=null&&(isNaN(u)&&isNaN(c)&&(f>i/n?u=i*.8:c=n*.8),isNaN(u)&&(u=f*c),isNaN(c)&&(c=u/f)),isNaN(a)&&(a=i-s-u-d),isNaN(o)&&(o=n-l-c-h),e.left||e.right){case"center":a=i/2-u/2-r[3];break;case"right":a=i-u-d;break}switch(e.top||e.bottom){case"middle":case"center":o=n/2-c/2-r[0];break;case"bottom":o=n-c-h;break}a=a||0,o=o||0,isNaN(u)&&(u=i-d-a-(s||0)),isNaN(c)&&(c=n-h-o-(l||0));var p=new qt(a+r[3],o+r[0],u,c);return p.margin=r,p}function PC(e,t,r,i,n,a){var o=!n||!n.hv||n.hv[0],s=!n||!n.hv||n.hv[1],l=n&&n.boundingMode||"all";if(a=a||e,a.x=e.x,a.y=e.y,!o&&!s)return!1;var u;if(l==="raw")u=e.type==="group"?new qt(0,0,+t.width||0,+t.height||0):e.getBoundingRect();else if(u=e.getBoundingRect(),e.needLocalTransform()){var c=e.getLocalTransform();u=u.clone(),u.applyTransform(c)}var h=zn(bt({width:u.width,height:u.height},t),r,i),d=o?h.x-u.x:0,f=s?h.y-u.y:0;return l==="raw"?(a.x=d,a.y=f):(a.x+=d,a.y+=f),a===e&&e.markRedraw(),!0}function t7e(e,t){return e[W0[t][0]]!=null||e[W0[t][1]]!=null&&e[W0[t][2]]!=null}function rw(e){var t=e.layoutMode||e.constructor.layoutMode;return _t(t)?t:t?{type:t}:null}function pp(e,t,r){var i=r&&r.ignoreSize;!Ue(i)&&(i=[i,i]);var n=o(W0[0],0),a=o(W0[1],1);u(W0[0],e,n),u(W0[1],e,a);function o(c,h){var d={},f=0,p={},v=0,m=2;if(wA(c,function(x){p[x]=e[x]}),wA(c,function(x){s(t,x)&&(d[x]=p[x]=t[x]),l(d,x)&&f++,l(p,x)&&v++}),i[h])return l(t,c[1])?p[c[2]]=null:l(t,c[2])&&(p[c[1]]=null),p;if(v===m||!f)return p;if(f>=m)return d;for(var g=0;g<c.length;g++){var y=c[g];if(!s(d,y)&&s(e,y)){d[y]=e[y];break}}return d}function s(c,h){return c.hasOwnProperty(h)}function l(c,h){return c[h]!=null&&c[h]!=="auto"}function u(c,h,d){wA(c,function(f){h[f]=d[f]})}}function Dy(e){return nue({},e)}function nue(e,t){return t&&e&&wA(iue,function(r){t.hasOwnProperty(r)&&(e[r]=t[r])}),e}var r7e=Pr(),vr=function(e){_e(t,e);function t(r,i,n){var a=e.call(this,r,i,n)||this;return a.uid=Ty("ec_cpt_model"),a}return t.prototype.init=function(r,i,n){this.mergeDefaultAndTheme(r,n)},t.prototype.mergeDefaultAndTheme=function(r,i){var n=rw(this),a=n?Dy(r):{},o=i.getTheme();Wt(r,o.get(this.mainType)),Wt(r,this.getDefaultOption()),n&&pp(r,a,n)},t.prototype.mergeOption=function(r,i){Wt(this.option,r,!0);var n=rw(this);n&&pp(this.option,r,n)},t.prototype.optionUpdated=function(r,i){},t.prototype.getDefaultOption=function(){var r=this.constructor;if(!qSe(r))return r.defaultOption;var i=r7e(this);if(!i.defaultOption){for(var n=[],a=r;a;){var o=a.prototype.defaultOption;o&&n.push(o),a=a.superClass}for(var s={},l=n.length-1;l>=0;l--)s=Wt(s,n[l],!0);i.defaultOption=s}return i.defaultOption},t.prototype.getReferringComponents=function(r,i){var n=r+"Index",a=r+"Id";return u4(this.ecModel,r,{index:this.get(n,!0),id:this.get(a,!0)},i)},t.prototype.getBoxLayoutParams=function(){var r=this;return{left:r.get("left"),top:r.get("top"),right:r.get("right"),bottom:r.get("bottom"),width:r.get("width"),height:r.get("height")}},t.prototype.getZLevelKey=function(){return""},t.prototype.setZLevel=function(r){this.option.zlevel=r},t.protoInitialize=function(){var r=t.prototype;r.type="component",r.id="",r.name="",r.mainType="",r.subType="",r.componentIndex=0}(),t}(Qr);ale(vr,Qr);fC(vr);UCe(vr);GCe(vr,i7e);function i7e(e){var t=[];return q(vr.getClassesByMainType(e),function(r){t=t.concat(r.dependencies||r.prototype.dependencies||[])}),t=qe(t,function(r){return Dc(r).main}),e!=="dataset"&&tr(t,"dataset")<=0&&t.unshift("dataset"),t}var aue="";typeof navigator<"u"&&(aue=navigator.platform||"");var Em="rgba(0, 0, 0, 0.2)";const n7e={darkMode:"auto",colorBy:"series",color:["#5470c6","#91cc75","#fac858","#ee6666","#73c0de","#3ba272","#fc8452","#9a60b4","#ea7ccc"],gradientColor:["#f6efa6","#d88273","#bf444c"],aria:{decal:{decals:[{color:Em,dashArrayX:[1,0],dashArrayY:[2,5],symbolSize:1,rotation:Math.PI/6},{color:Em,symbol:"circle",dashArrayX:[[8,8],[0,8,8,0]],dashArrayY:[6,0],symbolSize:.8},{color:Em,dashArrayX:[1,0],dashArrayY:[4,3],rotation:-Math.PI/4},{color:Em,dashArrayX:[[6,6],[0,6,6,0]],dashArrayY:[6,0]},{color:Em,dashArrayX:[[1,0],[1,6]],dashArrayY:[1,0,6,0],rotation:Math.PI/4},{color:Em,symbol:"triangle",dashArrayX:[[9,9],[0,9,9,0]],dashArrayY:[7,2],symbolSize:.75}]}},textStyle:{fontFamily:aue.match(/^Win/)?"Microsoft YaHei":"sans-serif",fontSize:12,fontStyle:"normal",fontWeight:"normal"},blendMode:null,stateAnimation:{duration:300,easing:"cubicOut"},animation:"auto",animationDuration:1e3,animationDurationUpdate:500,animationEasing:"cubicInOut",animationEasingUpdate:"cubicInOut",animationThreshold:2e3,progressiveThreshold:3e3,progressive:400,hoverLayerThreshold:3e3,useUTC:!1};var oue=dt(["tooltip","label","itemName","itemId","itemGroupId","itemChildGroupId","seriesName"]),Fl="original",Ao="arrayRows",zl="objectRows",lh="keyedColumns",$f="typedArray",sue="unknown",Fc="column",Iy="row",Ra={Must:1,Might:2,Not:3},lue=Pr();function a7e(e){lue(e).datasetMap=dt()}function uue(e,t,r){var i={},n=SN(t);if(!n||!e)return i;var a=[],o=[],s=t.ecModel,l=lue(s).datasetMap,u=n.uid+"_"+r.seriesLayoutBy,c,h;e=e.slice(),q(e,function(v,m){var g=_t(v)?v:e[m]={name:v};g.type==="ordinal"&&c==null&&(c=m,h=p(g)),i[g.name]=[]});var d=l.get(u)||l.set(u,{categoryWayDim:h,valueWayDim:0});q(e,function(v,m){var g=v.name,y=p(v);if(c==null){var x=d.valueWayDim;f(i[g],x,y),f(o,x,y),d.valueWayDim+=y}else if(c===m)f(i[g],0,y),f(a,0,y);else{var x=d.categoryWayDim;f(i[g],x,y),f(o,x,y),d.categoryWayDim+=y}});function f(v,m,g){for(var y=0;y<g;y++)v.push(m+y)}function p(v){var m=v.dimsDef;return m?m.length:1}return a.length&&(i.itemName=a),o.length&&(i.seriesName=o),i}function AN(e,t,r){var i={},n=SN(e);if(!n)return i;var a=t.sourceFormat,o=t.dimensionsDefine,s;(a===zl||a===lh)&&q(o,function(c,h){(_t(c)?c.name:c)==="name"&&(s=h)});var l=function(){for(var c={},h={},d=[],f=0,p=Math.min(5,r);f<p;f++){var v=hue(t.data,a,t.seriesLayoutBy,o,t.startIndex,f);d.push(v);var m=v===Ra.Not;if(m&&c.v==null&&f!==s&&(c.v=f),(c.n==null||c.n===c.v||!m&&d[c.n]===Ra.Not)&&(c.n=f),g(c)&&d[c.n]!==Ra.Not)return c;m||(v===Ra.Might&&h.v==null&&f!==s&&(h.v=f),(h.n==null||h.n===h.v)&&(h.n=f))}function g(y){return y.v!=null&&y.n!=null}return g(c)?c:g(h)?h:null}();if(l){i.value=[l.v];var u=s??l.n;i.itemName=[u],i.seriesName=[u]}return i}function SN(e){var t=e.get("data",!0);if(!t)return u4(e.ecModel,"dataset",{index:e.get("datasetIndex",!0),id:e.get("datasetId",!0)},wn).models[0]}function o7e(e){return!e.get("transform",!0)&&!e.get("fromTransformResult",!0)?[]:u4(e.ecModel,"dataset",{index:e.get("fromDatasetIndex",!0),id:e.get("fromDatasetId",!0)},wn).models}function cue(e,t){return hue(e.data,e.sourceFormat,e.seriesLayoutBy,e.dimensionsDefine,e.startIndex,t)}function hue(e,t,r,i,n,a){var o,s=5;if(Ss(e))return Ra.Not;var l,u;if(i){var c=i[a];_t(c)?(l=c.name,u=c.type):it(c)&&(l=c)}if(u!=null)return u==="ordinal"?Ra.Must:Ra.Not;if(t===Ao){var h=e;if(r===Iy){for(var d=h[a],f=0;f<(d||[]).length&&f<s;f++)if((o=b(d[n+f]))!=null)return o}else for(var f=0;f<h.length&&f<s;f++){var p=h[n+f];if(p&&(o=b(p[a]))!=null)return o}}else if(t===zl){var v=e;if(!l)return Ra.Not;for(var f=0;f<v.length&&f<s;f++){var m=v[f];if(m&&(o=b(m[l]))!=null)return o}}else if(t===lh){var g=e;if(!l)return Ra.Not;var d=g[l];if(!d||Ss(d))return Ra.Not;for(var f=0;f<d.length&&f<s;f++)if((o=b(d[f]))!=null)return o}else if(t===Fl)for(var y=e,f=0;f<y.length&&f<s;f++){var m=y[f],x=_y(m);if(!Ue(x))return Ra.Not;if((o=b(x[a]))!=null)return o}function b(_){var w=it(_);if(_!=null&&Number.isFinite(Number(_))&&_!=="")return w?Ra.Might:Ra.Not;if(w&&_!=="-")return Ra.Must}return Ra.Not}var yL=dt();function s7e(e,t){Yo(yL.get(e)==null&&t),yL.set(e,t)}function l7e(e,t,r){var i=yL.get(t);if(!i)return r;var n=i(e);return n?r.concat(n):r}var Aj=Pr(),u7e=Pr(),CN=function(){function e(){}return e.prototype.getColorFromPalette=function(t,r,i){var n=ci(this.get("color",!0)),a=this.get("colorLayer",!0);return due(this,Aj,n,a,t,r,i)},e.prototype.clearColorPalette=function(){h7e(this,Aj)},e}();function xL(e,t,r,i){var n=ci(e.get(["aria","decal","decals"]));return due(e,u7e,n,null,t,r,i)}function c7e(e,t){for(var r=e.length,i=0;i<r;i++)if(e[i].length>t)return e[i];return e[r-1]}function due(e,t,r,i,n,a,o){a=a||e;var s=t(a),l=s.paletteIdx||0,u=s.paletteNameMap=s.paletteNameMap||{};if(u.hasOwnProperty(n))return u[n];var c=o==null||!i?r:c7e(i,o);if(c=c||r,!(!c||!c.length)){var h=c[l];return n&&(u[n]=h),s.paletteIdx=(l+1)%c.length,h}}function h7e(e,t){t(e).paletteIdx=0,t(e).paletteNameMap={}}var I3,w2,Sj,Cj="\0_ec_inner",d7e=1,EN=function(e){_e(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.init=function(r,i,n,a,o,s){a=a||{},this.option=null,this._theme=new Qr(a),this._locale=new Qr(o),this._optionManager=s},t.prototype.setOption=function(r,i,n){var a=Tj(i);this._optionManager.setOption(r,n,a),this._resetOption(null,a)},t.prototype.resetOption=function(r,i){return this._resetOption(r,Tj(i))},t.prototype._resetOption=function(r,i){var n=!1,a=this._optionManager;if(!r||r==="recreate"){var o=a.mountOption(r==="recreate");!this.option||r==="recreate"?Sj(this,o):(this.restoreData(),this._mergeOption(o,i)),n=!0}if((r==="timeline"||r==="media")&&this.restoreData(),!r||r==="recreate"||r==="timeline"){var s=a.getTimelineOption(this);s&&(n=!0,this._mergeOption(s,i))}if(!r||r==="recreate"||r==="media"){var l=a.getMediaOption(this);l.length&&q(l,function(u){n=!0,this._mergeOption(u,i)},this)}return n},t.prototype.mergeOption=function(r){this._mergeOption(r,null)},t.prototype._mergeOption=function(r,i){var n=this.option,a=this._componentsMap,o=this._componentsCount,s=[],l=dt(),u=i&&i.replaceMergeMainTypeMap;a7e(this),q(r,function(h,d){h!=null&&(vr.hasClass(d)?d&&(s.push(d),l.set(d,!0)):n[d]=n[d]==null?At(h):Wt(n[d],h,!0))}),u&&u.each(function(h,d){vr.hasClass(d)&&!l.get(d)&&(s.push(d),l.set(d,!0))}),vr.topologicalTravel(s,vr.getAllClassMainTypes(),c,this);function c(h){var d=l7e(this,h,ci(r[h])),f=a.get(h),p=f?u&&u.get(h)?"replaceMerge":"normalMerge":"replaceAll",v=ele(f,d,p);NSe(v,h,vr),n[h]=null,a.set(h,null),o.set(h,0);var m=[],g=[],y=0,x;q(v,function(b,_){var w=b.existing,S=b.newOption;if(!S)w&&(w.mergeOption({},this),w.optionUpdated({},!1));else{var A=h==="series",M=vr.getClass(h,b.keyInfo.subType,!A);if(!M)return;if(h==="tooltip"){if(x)return;x=!0}if(w&&w.constructor===M)w.name=b.keyInfo.name,w.mergeOption(S,this),w.optionUpdated(S,!1);else{var E=Be({componentIndex:_},b.keyInfo);w=new M(S,this,this,E),Be(w,E),b.brandNew&&(w.__requireNewView=!0),w.init(S,this,this),w.optionUpdated(null,!0)}}w?(m.push(w.option),g.push(w),y++):(m.push(void 0),g.push(void 0))},this),n[h]=m,a.set(h,g),o.set(h,y),h==="series"&&I3(this)}this._seriesIndices||I3(this)},t.prototype.getOption=function(){var r=At(this.option);return q(r,function(i,n){if(vr.hasClass(n)){for(var a=ci(i),o=a.length,s=!1,l=o-1;l>=0;l--)a[l]&&!Kb(a[l])?s=!0:(a[l]=null,!s&&o--);a.length=o,r[n]=a}}),delete r[Cj],r},t.prototype.getTheme=function(){return this._theme},t.prototype.getLocaleModel=function(){return this._locale},t.prototype.setUpdatePayload=function(r){this._payload=r},t.prototype.getUpdatePayload=function(){return this._payload},t.prototype.getComponent=function(r,i){var n=this._componentsMap.get(r);if(n){var a=n[i||0];if(a)return a;if(i==null){for(var o=0;o<n.length;o++)if(n[o])return n[o]}}},t.prototype.queryComponents=function(r){var i=r.mainType;if(!i)return[];var n=r.index,a=r.id,o=r.name,s=this._componentsMap.get(i);if(!s||!s.length)return[];var l;return n!=null?(l=[],q(ci(n),function(u){s[u]&&l.push(s[u])})):a!=null?l=Ej("id",a,s):o!=null?l=Ej("name",o,s):l=ni(s,function(u){return!!u}),Mj(l,r)},t.prototype.findComponents=function(r){var i=r.query,n=r.mainType,a=s(i),o=a?this.queryComponents(a):ni(this._componentsMap.get(n),function(u){return!!u});return l(Mj(o,r));function s(u){var c=n+"Index",h=n+"Id",d=n+"Name";return u&&(u[c]!=null||u[h]!=null||u[d]!=null)?{mainType:n,index:u[c],id:u[h],name:u[d]}:null}function l(u){return r.filter?ni(u,r.filter):u}},t.prototype.eachComponent=function(r,i,n){var a=this._componentsMap;if(xt(r)){var o=i,s=r;a.each(function(h,d){for(var f=0;h&&f<h.length;f++){var p=h[f];p&&s.call(o,d,p,p.componentIndex)}})}else for(var l=it(r)?a.get(r):_t(r)?this.findComponents(r):null,u=0;l&&u<l.length;u++){var c=l[u];c&&i.call(n,c,c.componentIndex)}},t.prototype.getSeriesByName=function(r){var i=Rn(r,null);return ni(this._componentsMap.get("series"),function(n){return!!n&&i!=null&&n.name===i})},t.prototype.getSeriesByIndex=function(r){return this._componentsMap.get("series")[r]},t.prototype.getSeriesByType=function(r){return ni(this._componentsMap.get("series"),function(i){return!!i&&i.subType===r})},t.prototype.getSeries=function(){return ni(this._componentsMap.get("series"),function(r){return!!r})},t.prototype.getSeriesCount=function(){return this._componentsCount.get("series")},t.prototype.eachSeries=function(r,i){w2(this),q(this._seriesIndices,function(n){var a=this._componentsMap.get("series")[n];r.call(i,a,n)},this)},t.prototype.eachRawSeries=function(r,i){q(this._componentsMap.get("series"),function(n){n&&r.call(i,n,n.componentIndex)})},t.prototype.eachSeriesByType=function(r,i,n){w2(this),q(this._seriesIndices,function(a){var o=this._componentsMap.get("series")[a];o.subType===r&&i.call(n,o,a)},this)},t.prototype.eachRawSeriesByType=function(r,i,n){return q(this.getSeriesByType(r),i,n)},t.prototype.isSeriesFiltered=function(r){return w2(this),this._seriesIndicesMap.get(r.componentIndex)==null},t.prototype.getCurrentSeriesIndices=function(){return(this._seriesIndices||[]).slice()},t.prototype.filterSeries=function(r,i){w2(this);var n=[];q(this._seriesIndices,function(a){var o=this._componentsMap.get("series")[a];r.call(i,o,a)&&n.push(a)},this),this._seriesIndices=n,this._seriesIndicesMap=dt(n)},t.prototype.restoreData=function(r){I3(this);var i=this._componentsMap,n=[];i.each(function(a,o){vr.hasClass(o)&&n.push(o)}),vr.topologicalTravel(n,vr.getAllClassMainTypes(),function(a){q(i.get(a),function(o){o&&(a!=="series"||!f7e(o,r))&&o.restoreData()})})},t.internalField=function(){I3=function(r){var i=r._seriesIndices=[];q(r._componentsMap.get("series"),function(n){n&&i.push(n.componentIndex)}),r._seriesIndicesMap=dt(i)},w2=function(r){},Sj=function(r,i){r.option={},r.option[Cj]=d7e,r._componentsMap=dt({series:[]}),r._componentsCount=dt();var n=i.aria;_t(n)&&n.enabled==null&&(n.enabled=!0),p7e(i,r._theme.option),Wt(i,n7e,!1),r._mergeOption(i,null)}}(),t}(Qr);function f7e(e,t){if(t){var r=t.seriesIndex,i=t.seriesId,n=t.seriesName;return r!=null&&e.componentIndex!==r||i!=null&&e.id!==i||n!=null&&e.name!==n}}function p7e(e,t){var r=e.color&&!e.colorLayer;q(t,function(i,n){n==="colorLayer"&&r||vr.hasClass(n)||(typeof i=="object"?e[n]=e[n]?Wt(e[n],i,!1):At(i):e[n]==null&&(e[n]=i))})}function Ej(e,t,r){if(Ue(t)){var i=dt();return q(t,function(a){if(a!=null){var o=Rn(a,null);o!=null&&i.set(a,!0)}}),ni(r,function(a){return a&&i.get(a[e])})}else{var n=Rn(t,null);return ni(r,function(a){return a&&n!=null&&a[e]===n})}}function Mj(e,t){return t.hasOwnProperty("subType")?ni(e,function(r){return r&&r.subType===t.subType}):e}function Tj(e){var t=dt();return e&&q(ci(e.replaceMerge),function(r){t.set(r,!0)}),{replaceMergeMainTypeMap:t}}Mn(EN,CN);var v7e=["getDom","getZr","getWidth","getHeight","getDevicePixelRatio","dispatchAction","isSSR","isDisposed","on","off","getDataURL","getConnectedDataURL","getOption","getId","updateLabelLayout"],fue=function(){function e(t){q(v7e,function(r){this[r]=at(t[r],t)},this)}return e}(),iM={},v4=function(){function e(){this._coordinateSystems=[]}return e.prototype.create=function(t,r){var i=[];q(iM,function(n,a){var o=n.create(t,r);i=i.concat(o||[])}),this._coordinateSystems=i},e.prototype.update=function(t,r){q(this._coordinateSystems,function(i){i.update&&i.update(t,r)})},e.prototype.getCoordinateSystems=function(){return this._coordinateSystems.slice()},e.register=function(t,r){iM[t]=r},e.get=function(t){return iM[t]},e}(),m7e=/^(min|max)?(.+)$/,g7e=function(){function e(t){this._timelineOptions=[],this._mediaList=[],this._currentMediaIndices=[],this._api=t}return e.prototype.setOption=function(t,r,i){t&&(q(ci(t.series),function(o){o&&o.data&&Ss(o.data)&&A8(o.data)}),q(ci(t.dataset),function(o){o&&o.source&&Ss(o.source)&&A8(o.source)})),t=At(t);var n=this._optionBackup,a=y7e(t,r,!n);this._newBaseOption=a.baseOption,n?(a.timelineOptions.length&&(n.timelineOptions=a.timelineOptions),a.mediaList.length&&(n.mediaList=a.mediaList),a.mediaDefault&&(n.mediaDefault=a.mediaDefault)):this._optionBackup=a},e.prototype.mountOption=function(t){var r=this._optionBackup;return this._timelineOptions=r.timelineOptions,this._mediaList=r.mediaList,this._mediaDefault=r.mediaDefault,this._currentMediaIndices=[],At(t?r.baseOption:this._newBaseOption)},e.prototype.getTimelineOption=function(t){var r,i=this._timelineOptions;if(i.length){var n=t.getComponent("timeline");n&&(r=At(i[n.getCurrentIndex()]))}return r},e.prototype.getMediaOption=function(t){var r=this._api.getWidth(),i=this._api.getHeight(),n=this._mediaList,a=this._mediaDefault,o=[],s=[];if(!n.length&&!a)return s;for(var l=0,u=n.length;l<u;l++)x7e(n[l].query,r,i)&&o.push(l);return!o.length&&a&&(o=[-1]),o.length&&!w7e(o,this._currentMediaIndices)&&(s=qe(o,function(c){return At(c===-1?a.option:n[c].option)})),this._currentMediaIndices=o,s},e}();function y7e(e,t,r){var i=[],n,a,o=e.baseOption,s=e.timeline,l=e.options,u=e.media,c=!!e.media,h=!!(l||s||o&&o.timeline);o?(a=o,a.timeline||(a.timeline=s)):((h||c)&&(e.options=e.media=null),a=e),c&&Ue(u)&&q(u,function(f){f&&f.option&&(f.query?i.push(f):n||(n=f))}),d(a),q(l,function(f){return d(f)}),q(i,function(f){return d(f.option)});function d(f){q(t,function(p){p(f,r)})}return{baseOption:a,timelineOptions:l||[],mediaDefault:n,mediaList:i}}function x7e(e,t,r){var i={width:t,height:r,aspectratio:t/r},n=!0;return q(e,function(a,o){var s=o.match(m7e);if(!(!s||!s[1]||!s[2])){var l=s[1],u=s[2].toLowerCase();b7e(i[u],a,l)||(n=!1)}}),n}function b7e(e,t,r){return r==="min"?e>=t:r==="max"?e<=t:e===t}function w7e(e,t){return e.join(",")===t.join(",")}var jl=q,iw=_t,Pj=["areaStyle","lineStyle","nodeStyle","linkStyle","chordStyle","label","labelLine"];function nM(e){var t=e&&e.itemStyle;if(t)for(var r=0,i=Pj.length;r<i;r++){var n=Pj[r],a=t.normal,o=t.emphasis;a&&a[n]&&(e[n]=e[n]||{},e[n].normal?Wt(e[n].normal,a[n]):e[n].normal=a[n],a[n]=null),o&&o[n]&&(e[n]=e[n]||{},e[n].emphasis?Wt(e[n].emphasis,o[n]):e[n].emphasis=o[n],o[n]=null)}}function so(e,t,r){if(e&&e[t]&&(e[t].normal||e[t].emphasis)){var i=e[t].normal,n=e[t].emphasis;i&&(r?(e[t].normal=e[t].emphasis=null,bt(e[t],i)):e[t]=i),n&&(e.emphasis=e.emphasis||{},e.emphasis[t]=n,n.focus&&(e.emphasis.focus=n.focus),n.blurScope&&(e.emphasis.blurScope=n.blurScope))}}function Rx(e){so(e,"itemStyle"),so(e,"lineStyle"),so(e,"areaStyle"),so(e,"label"),so(e,"labelLine"),so(e,"upperLabel"),so(e,"edgeLabel")}function xn(e,t){var r=iw(e)&&e[t],i=iw(r)&&r.textStyle;if(i)for(var n=0,a=OG.length;n<a;n++){var o=OG[n];i.hasOwnProperty(o)&&(r[o]=i[o])}}function fl(e){e&&(Rx(e),xn(e,"label"),e.emphasis&&xn(e.emphasis,"label"))}function _7e(e){if(iw(e)){nM(e),Rx(e),xn(e,"label"),xn(e,"upperLabel"),xn(e,"edgeLabel"),e.emphasis&&(xn(e.emphasis,"label"),xn(e.emphasis,"upperLabel"),xn(e.emphasis,"edgeLabel"));var t=e.markPoint;t&&(nM(t),fl(t));var r=e.markLine;r&&(nM(r),fl(r));var i=e.markArea;i&&fl(i);var n=e.data;if(e.type==="graph"){n=n||e.nodes;var a=e.links||e.edges;if(a&&!Ss(a))for(var o=0;o<a.length;o++)fl(a[o]);q(e.categories,function(u){Rx(u)})}if(n&&!Ss(n))for(var o=0;o<n.length;o++)fl(n[o]);if(t=e.markPoint,t&&t.data)for(var s=t.data,o=0;o<s.length;o++)fl(s[o]);if(r=e.markLine,r&&r.data)for(var l=r.data,o=0;o<l.length;o++)Ue(l[o])?(fl(l[o][0]),fl(l[o][1])):fl(l[o]);e.type==="gauge"?(xn(e,"axisLabel"),xn(e,"title"),xn(e,"detail")):e.type==="treemap"?(so(e.breadcrumb,"itemStyle"),q(e.levels,function(u){Rx(u)})):e.type==="tree"&&Rx(e.leaves)}}function yh(e){return Ue(e)?e:e?[e]:[]}function Dj(e){return(Ue(e)?e[0]:e)||{}}function A7e(e,t){jl(yh(e.series),function(i){iw(i)&&_7e(i)});var r=["xAxis","yAxis","radiusAxis","angleAxis","singleAxis","parallelAxis","radar"];t&&r.push("valueAxis","categoryAxis","logAxis","timeAxis"),jl(r,function(i){jl(yh(e[i]),function(n){n&&(xn(n,"axisLabel"),xn(n.axisPointer,"label"))})}),jl(yh(e.parallel),function(i){var n=i&&i.parallelAxisDefault;xn(n,"axisLabel"),xn(n&&n.axisPointer,"label")}),jl(yh(e.calendar),function(i){so(i,"itemStyle"),xn(i,"dayLabel"),xn(i,"monthLabel"),xn(i,"yearLabel")}),jl(yh(e.radar),function(i){xn(i,"name"),i.name&&i.axisName==null&&(i.axisName=i.name,delete i.name),i.nameGap!=null&&i.axisNameGap==null&&(i.axisNameGap=i.nameGap,delete i.nameGap)}),jl(yh(e.geo),function(i){iw(i)&&(fl(i),jl(yh(i.regions),function(n){fl(n)}))}),jl(yh(e.timeline),function(i){fl(i),so(i,"label"),so(i,"itemStyle"),so(i,"controlStyle",!0);var n=i.data;Ue(n)&&q(n,function(a){_t(a)&&(so(a,"label"),so(a,"itemStyle"))})}),jl(yh(e.toolbox),function(i){so(i,"iconStyle"),jl(i.feature,function(n){so(n,"iconStyle")})}),xn(Dj(e.axisPointer),"label"),xn(Dj(e.tooltip).axisPointer,"label")}function S7e(e,t){for(var r=t.split(","),i=e,n=0;n<r.length&&(i=i&&i[r[n]],i!=null);n++);return i}function C7e(e,t,r,i){for(var n=t.split(","),a=e,o,s=0;s<n.length-1;s++)o=n[s],a[o]==null&&(a[o]={}),a=a[o];a[n[s]]==null&&(a[n[s]]=r)}function Ij(e){e&&q(E7e,function(t){t[0]in e&&!(t[1]in e)&&(e[t[1]]=e[t[0]])})}var E7e=[["x","left"],["y","top"],["x2","right"],["y2","bottom"]],M7e=["grid","geo","parallel","legend","toolbox","title","visualMap","dataZoom","timeline"],aM=[["borderRadius","barBorderRadius"],["borderColor","barBorderColor"],["borderWidth","barBorderWidth"]];function _2(e){var t=e&&e.itemStyle;if(t)for(var r=0;r<aM.length;r++){var i=aM[r][1],n=aM[r][0];t[i]!=null&&(t[n]=t[i])}}function Lj(e){e&&e.alignTo==="edge"&&e.margin!=null&&e.edgeDistance==null&&(e.edgeDistance=e.margin)}function kj(e){e&&e.downplay&&!e.blur&&(e.blur=e.downplay)}function T7e(e){e&&e.focusNodeAdjacency!=null&&(e.emphasis=e.emphasis||{},e.emphasis.focus==null&&(e.emphasis.focus="adjacency"))}function pue(e,t){if(e)for(var r=0;r<e.length;r++)t(e[r]),e[r]&&pue(e[r].children,t)}function vue(e,t){A7e(e,t),e.series=ci(e.series),q(e.series,function(r){if(_t(r)){var i=r.type;if(i==="line")r.clipOverflow!=null&&(r.clip=r.clipOverflow);else if(i==="pie"||i==="gauge"){r.clockWise!=null&&(r.clockwise=r.clockWise),Lj(r.label);var n=r.data;if(n&&!Ss(n))for(var a=0;a<n.length;a++)Lj(n[a]);r.hoverOffset!=null&&(r.emphasis=r.emphasis||{},(r.emphasis.scaleSize=null)&&(r.emphasis.scaleSize=r.hoverOffset))}else if(i==="gauge"){var o=S7e(r,"pointer.color");o!=null&&C7e(r,"itemStyle.color",o)}else if(i==="bar"){_2(r),_2(r.backgroundStyle),_2(r.emphasis);var n=r.data;if(n&&!Ss(n))for(var a=0;a<n.length;a++)typeof n[a]=="object"&&(_2(n[a]),_2(n[a]&&n[a].emphasis))}else if(i==="sunburst"){var s=r.highlightPolicy;s&&(r.emphasis=r.emphasis||{},r.emphasis.focus||(r.emphasis.focus=s)),kj(r),pue(r.data,kj)}else i==="graph"||i==="sankey"?T7e(r):i==="map"&&(r.mapType&&!r.map&&(r.map=r.mapType),r.mapLocation&&bt(r,r.mapLocation));r.hoverAnimation!=null&&(r.emphasis=r.emphasis||{},r.emphasis&&r.emphasis.scale==null&&(r.emphasis.scale=r.hoverAnimation)),Ij(r)}}),e.dataRange&&(e.visualMap=e.dataRange),q(M7e,function(r){var i=e[r];i&&(Ue(i)||(i=[i]),q(i,function(n){Ij(n)}))})}function P7e(e){var t=dt();e.eachSeries(function(r){var i=r.get("stack");if(i){var n=t.get(i)||t.set(i,[]),a=r.getData(),o={stackResultDimension:a.getCalculationInfo("stackResultDimension"),stackedOverDimension:a.getCalculationInfo("stackedOverDimension"),stackedDimension:a.getCalculationInfo("stackedDimension"),stackedByDimension:a.getCalculationInfo("stackedByDimension"),isStackedByIndex:a.getCalculationInfo("isStackedByIndex"),data:a,seriesModel:r};if(!o.stackedDimension||!(o.isStackedByIndex||o.stackedByDimension))return;n.length&&a.setCalculationInfo("stackedOnSeries",n[n.length-1].seriesModel),n.push(o)}}),t.each(D7e)}function D7e(e){q(e,function(t,r){var i=[],n=[NaN,NaN],a=[t.stackResultDimension,t.stackedOverDimension],o=t.data,s=t.isStackedByIndex,l=t.seriesModel.get("stackStrategy")||"samesign";o.modify(a,function(u,c,h){var d=o.get(t.stackedDimension,h);if(isNaN(d))return n;var f,p;s?p=o.getRawIndex(h):f=o.get(t.stackedByDimension,h);for(var v=NaN,m=r-1;m>=0;m--){var g=e[m];if(s||(p=g.data.rawIndexOf(g.stackedByDimension,f)),p>=0){var y=g.data.getByRawIndex(g.stackResultDimension,p);if(l==="all"||l==="positive"&&y>0||l==="negative"&&y<0||l==="samesign"&&d>=0&&y>0||l==="samesign"&&d<=0&&y<0){d=ESe(d,y),v=y;break}}}return i[0]=d,i[1]=v,i})})}var DC=function(){function e(t){this.data=t.data||(t.sourceFormat===lh?{}:[]),this.sourceFormat=t.sourceFormat||sue,this.seriesLayoutBy=t.seriesLayoutBy||Fc,this.startIndex=t.startIndex||0,this.dimensionsDetectedCount=t.dimensionsDetectedCount,this.metaRawOption=t.metaRawOption;var r=this.dimensionsDefine=t.dimensionsDefine;if(r)for(var i=0;i<r.length;i++){var n=r[i];n.type==null&&cue(this,i)===Ra.Must&&(n.type="ordinal")}}return e}();function MN(e){return e instanceof DC}function bL(e,t,r){r=r||mue(e);var i=t.seriesLayoutBy,n=L7e(e,r,i,t.sourceHeader,t.dimensions),a=new DC({data:e,sourceFormat:r,seriesLayoutBy:i,dimensionsDefine:n.dimensionsDefine,startIndex:n.startIndex,dimensionsDetectedCount:n.dimensionsDetectedCount,metaRawOption:At(t)});return a}function TN(e){return new DC({data:e,sourceFormat:Ss(e)?$f:Fl})}function I7e(e){return new DC({data:e.data,sourceFormat:e.sourceFormat,seriesLayoutBy:e.seriesLayoutBy,dimensionsDefine:At(e.dimensionsDefine),startIndex:e.startIndex,dimensionsDetectedCount:e.dimensionsDetectedCount})}function mue(e){var t=sue;if(Ss(e))t=$f;else if(Ue(e)){e.length===0&&(t=Ao);for(var r=0,i=e.length;r<i;r++){var n=e[r];if(n!=null){if(Ue(n)||Ss(n)){t=Ao;break}else if(_t(n)){t=zl;break}}}}else if(_t(e)){for(var a in e)if(lt(e,a)&&_o(e[a])){t=lh;break}}return t}function L7e(e,t,r,i,n){var a,o;if(!e)return{dimensionsDefine:Rj(n),startIndex:o,dimensionsDetectedCount:a};if(t===Ao){var s=e;i==="auto"||i==null?Oj(function(u){u!=null&&u!=="-"&&(it(u)?o==null&&(o=1):o=0)},r,s,10):o=kr(i)?i:i?1:0,!n&&o===1&&(n=[],Oj(function(u,c){n[c]=u!=null?u+"":""},r,s,1/0)),a=n?n.length:r===Iy?s.length:s[0]?s[0].length:null}else if(t===zl)n||(n=k7e(e));else if(t===lh)n||(n=[],q(e,function(u,c){n.push(c)}));else if(t===Fl){var l=_y(e[0]);a=Ue(l)&&l.length||1}return{startIndex:o,dimensionsDefine:Rj(n),dimensionsDetectedCount:a}}function k7e(e){for(var t=0,r;t<e.length&&!(r=e[t++]););if(r)return mr(r)}function Rj(e){if(e){var t=dt();return qe(e,function(r,i){r=_t(r)?r:{name:r};var n={name:r.name,displayName:r.displayName,type:r.type};if(n.name==null)return n;n.name+="",n.displayName==null&&(n.displayName=n.name);var a=t.get(n.name);return a?n.name+="-"+a.count++:t.set(n.name,{count:1}),n})}}function Oj(e,t,r,i){if(t===Iy)for(var n=0;n<r.length&&n<i;n++)e(r[n]?r[n][0]:null,n);else for(var a=r[0]||[],n=0;n<a.length&&n<i;n++)e(a[n],n)}function gue(e){var t=e.sourceFormat;return t===zl||t===lh}var Kp,Jp,$p,Bj,Nj,yue=function(){function e(t,r){var i=MN(t)?t:TN(t);this._source=i;var n=this._data=i.data;i.sourceFormat===$f&&(this._offset=0,this._dimSize=r,this._data=n),Nj(this,n,i)}return e.prototype.getSource=function(){return this._source},e.prototype.count=function(){return 0},e.prototype.getItem=function(t,r){},e.prototype.appendData=function(t){},e.prototype.clean=function(){},e.protoInitialize=function(){var t=e.prototype;t.pure=!1,t.persistent=!0}(),e.internalField=function(){var t;Nj=function(o,s,l){var u=l.sourceFormat,c=l.seriesLayoutBy,h=l.startIndex,d=l.dimensionsDefine,f=Bj[PN(u,c)];if(Be(o,f),u===$f)o.getItem=r,o.count=n,o.fillStorage=i;else{var p=xue(u,c);o.getItem=at(p,null,s,h,d);var v=bue(u,c);o.count=at(v,null,s,h,d)}};var r=function(o,s){o=o-this._offset,s=s||[];for(var l=this._data,u=this._dimSize,c=u*o,h=0;h<u;h++)s[h]=l[c+h];return s},i=function(o,s,l,u){for(var c=this._data,h=this._dimSize,d=0;d<h;d++){for(var f=u[d],p=f[0]==null?1/0:f[0],v=f[1]==null?-1/0:f[1],m=s-o,g=l[d],y=0;y<m;y++){var x=c[y*h+d];g[o+y]=x,x<p&&(p=x),x>v&&(v=x)}f[0]=p,f[1]=v}},n=function(){return this._data?this._data.length/this._dimSize:0};Bj=(t={},t[Ao+"_"+Fc]={pure:!0,appendData:a},t[Ao+"_"+Iy]={pure:!0,appendData:function(){throw new Error('Do not support appendData when set seriesLayoutBy: "row".')}},t[zl]={pure:!0,appendData:a},t[lh]={pure:!0,appendData:function(o){var s=this._data;q(o,function(l,u){for(var c=s[u]||(s[u]=[]),h=0;h<(l||[]).length;h++)c.push(l[h])})}},t[Fl]={appendData:a},t[$f]={persistent:!1,pure:!0,appendData:function(o){this._data=o},clean:function(){this._offset+=this.count(),this._data=null}},t);function a(o){for(var s=0;s<o.length;s++)this._data.push(o[s])}}(),e}(),Vj=function(e,t,r,i){return e[i]},R7e=(Kp={},Kp[Ao+"_"+Fc]=function(e,t,r,i){return e[i+t]},Kp[Ao+"_"+Iy]=function(e,t,r,i,n){i+=t;for(var a=n||[],o=e,s=0;s<o.length;s++){var l=o[s];a[s]=l?l[i]:null}return a},Kp[zl]=Vj,Kp[lh]=function(e,t,r,i,n){for(var a=n||[],o=0;o<r.length;o++){var s=r[o].name,l=e[s];a[o]=l?l[i]:null}return a},Kp[Fl]=Vj,Kp);function xue(e,t){var r=R7e[PN(e,t)];return r}var Fj=function(e,t,r){return e.length},O7e=(Jp={},Jp[Ao+"_"+Fc]=function(e,t,r){return Math.max(0,e.length-t)},Jp[Ao+"_"+Iy]=function(e,t,r){var i=e[0];return i?Math.max(0,i.length-t):0},Jp[zl]=Fj,Jp[lh]=function(e,t,r){var i=r[0].name,n=e[i];return n?n.length:0},Jp[Fl]=Fj,Jp);function bue(e,t){var r=O7e[PN(e,t)];return r}var oM=function(e,t,r){return e[t]},B7e=($p={},$p[Ao]=oM,$p[zl]=function(e,t,r){return e[r]},$p[lh]=oM,$p[Fl]=function(e,t,r){var i=_y(e);return i instanceof Array?i[t]:i},$p[$f]=oM,$p);function wue(e){var t=B7e[e];return t}function PN(e,t){return e===Ao?e+"_"+t:e}function F1(e,t,r){if(e){var i=e.getRawDataItem(t);if(i!=null){var n=e.getStore(),a=n.getSource().sourceFormat;if(r!=null){var o=e.getDimensionIndex(r),s=n.getDimensionProperty(o);return wue(a)(i,o,s)}else{var l=i;return a===Fl&&(l=_y(i)),l}}}}var N7e=/\{@(.+?)\}/g,IC=function(){function e(){}return e.prototype.getDataParams=function(t,r){var i=this.getData(r),n=this.getRawValue(t,r),a=i.getRawIndex(t),o=i.getName(t),s=i.getRawDataItem(t),l=i.getItemVisual(t,"style"),u=l&&l[i.getItemVisual(t,"drawType")||"fill"],c=l&&l.stroke,h=this.mainType,d=h==="series",f=i.userOutput&&i.userOutput.get();return{componentType:h,componentSubType:this.subType,componentIndex:this.componentIndex,seriesType:d?this.subType:null,seriesIndex:this.seriesIndex,seriesId:d?this.id:null,seriesName:d?this.name:null,name:o,dataIndex:a,data:s,dataType:r,value:n,color:u,borderColor:c,dimensionNames:f?f.fullDimensions:null,encode:f?f.encode:null,$vars:["seriesName","name","value"]}},e.prototype.getFormattedLabel=function(t,r,i,n,a,o){r=r||"normal";var s=this.getData(i),l=this.getDataParams(t,i);if(o&&(l.value=o.interpolatedValue),n!=null&&Ue(l.value)&&(l.value=l.value[n]),!a){var u=s.getItemModel(t);a=u.get(r==="normal"?["label","formatter"]:[r,"label","formatter"])}if(xt(a))return l.status=r,l.dimensionIndex=n,a(l);if(it(a)){var c=rue(a,l);return c.replace(N7e,function(h,d){var f=d.length,p=d;p.charAt(0)==="["&&p.charAt(f-1)==="]"&&(p=+p.slice(1,f-1));var v=F1(s,t,p);if(o&&Ue(o.interpolatedValue)){var m=s.getDimensionIndex(p);m>=0&&(v=o.interpolatedValue[m])}return v!=null?v+"":""})}},e.prototype.getRawValue=function(t,r){return F1(this.getData(r),t)},e.prototype.formatTooltip=function(t,r,i){},e}();function zj(e){var t,r;return _t(e)?e.type&&(r=e):t=e,{text:t,frag:r}}function fb(e){return new V7e(e)}var V7e=function(){function e(t){t=t||{},this._reset=t.reset,this._plan=t.plan,this._count=t.count,this._onDirty=t.onDirty,this._dirty=!0}return e.prototype.perform=function(t){var r=this._upstream,i=t&&t.skip;if(this._dirty&&r){var n=this.context;n.data=n.outputData=r.context.outputData}this.__pipeline&&(this.__pipeline.currentTask=this);var a;this._plan&&!i&&(a=this._plan(this.context));var o=c(this._modBy),s=this._modDataCount||0,l=c(t&&t.modBy),u=t&&t.modDataCount||0;(o!==l||s!==u)&&(a="reset");function c(y){return!(y>=1)&&(y=1),y}var h;(this._dirty||a==="reset")&&(this._dirty=!1,h=this._doReset(i)),this._modBy=l,this._modDataCount=u;var d=t&&t.step;if(r?this._dueEnd=r._outputDueEnd:this._dueEnd=this._count?this._count(this.context):1/0,this._progress){var f=this._dueIndex,p=Math.min(d!=null?this._dueIndex+d:1/0,this._dueEnd);if(!i&&(h||f<p)){var v=this._progress;if(Ue(v))for(var m=0;m<v.length;m++)this._doProgress(v[m],f,p,l,u);else this._doProgress(v,f,p,l,u)}this._dueIndex=p;var g=this._settedOutputEnd!=null?this._settedOutputEnd:p;this._outputDueEnd=g}else this._dueIndex=this._outputDueEnd=this._settedOutputEnd!=null?this._settedOutputEnd:this._dueEnd;return this.unfinished()},e.prototype.dirty=function(){this._dirty=!0,this._onDirty&&this._onDirty(this.context)},e.prototype._doProgress=function(t,r,i,n,a){Hj.reset(r,i,n,a),this._callingProgress=t,this._callingProgress({start:r,end:i,count:i-r,next:Hj.next},this.context)},e.prototype._doReset=function(t){this._dueIndex=this._outputDueEnd=this._dueEnd=0,this._settedOutputEnd=null;var r,i;!t&&this._reset&&(r=this._reset(this.context),r&&r.progress&&(i=r.forceFirstProgress,r=r.progress),Ue(r)&&!r.length&&(r=null)),this._progress=r,this._modBy=this._modDataCount=null;var n=this._downstream;return n&&n.dirty(),i},e.prototype.unfinished=function(){return this._progress&&this._dueIndex<this._dueEnd},e.prototype.pipe=function(t){(this._downstream!==t||this._dirty)&&(this._downstream=t,t._upstream=this,t.dirty())},e.prototype.dispose=function(){this._disposed||(this._upstream&&(this._upstream._downstream=null),this._downstream&&(this._downstream._upstream=null),this._dirty=!1,this._disposed=!0)},e.prototype.getUpstream=function(){return this._upstream},e.prototype.getDownstream=function(){return this._downstream},e.prototype.setOutputEnd=function(t){this._outputDueEnd=this._settedOutputEnd=t},e}(),Hj=function(){var e,t,r,i,n,a={reset:function(l,u,c,h){t=l,e=u,r=c,i=h,n=Math.ceil(i/r),a.next=r>1&&i>0?s:o}};return a;function o(){return t<e?t++:null}function s(){var l=t%n*r+Math.ceil(t/n),u=t>=e?null:l<i?l:t;return t++,u}}();function ep(e,t){var r=t&&t.type;return r==="ordinal"?e:(r==="time"&&!kr(e)&&e!=null&&e!=="-"&&(e=+Jc(e)),e==null||e===""?NaN:Number(e))}var F7e=dt({number:function(e){return parseFloat(e)},time:function(e){return+Jc(e)},trim:function(e){return it(e)?fu(e):e}});function _ue(e){return F7e.get(e)}var Aue={lt:function(e,t){return e<t},lte:function(e,t){return e<=t},gt:function(e,t){return e>t},gte:function(e,t){return e>=t}},z7e=function(){function e(t,r){if(!kr(r)){var i="";jr(i)}this._opFn=Aue[t],this._rvalFloat=vd(r)}return e.prototype.evaluate=function(t){return kr(t)?this._opFn(t,this._rvalFloat):this._opFn(vd(t),this._rvalFloat)},e}(),Sue=function(){function e(t,r){var i=t==="desc";this._resultLT=i?1:-1,r==null&&(r=i?"min":"max"),this._incomparable=r==="min"?-1/0:1/0}return e.prototype.evaluate=function(t,r){var i=kr(t)?t:vd(t),n=kr(r)?r:vd(r),a=isNaN(i),o=isNaN(n);if(a&&(i=this._incomparable),o&&(n=this._incomparable),a&&o){var s=it(t),l=it(r);s&&(i=l?t:0),l&&(n=s?r:0)}return i<n?this._resultLT:i>n?-this._resultLT:0},e}(),H7e=function(){function e(t,r){this._rval=r,this._isEQ=t,this._rvalTypeof=typeof r,this._rvalFloat=vd(r)}return e.prototype.evaluate=function(t){var r=t===this._rval;if(!r){var i=typeof t;i!==this._rvalTypeof&&(i==="number"||this._rvalTypeof==="number")&&(r=vd(t)===this._rvalFloat)}return this._isEQ?r:!r},e}();function U7e(e,t){return e==="eq"||e==="ne"?new H7e(e==="eq",t):lt(Aue,e)?new z7e(e,t):null}var G7e=function(){function e(){}return e.prototype.getRawData=function(){throw new Error("not supported")},e.prototype.getRawDataItem=function(t){throw new Error("not supported")},e.prototype.cloneRawData=function(){},e.prototype.getDimensionInfo=function(t){},e.prototype.cloneAllDimensionInfo=function(){},e.prototype.count=function(){},e.prototype.retrieveValue=function(t,r){},e.prototype.retrieveValueFromItem=function(t,r){},e.prototype.convertValue=function(t,r){return ep(t,r)},e}();function j7e(e,t){var r=new G7e,i=e.data,n=r.sourceFormat=e.sourceFormat,a=e.startIndex,o="";e.seriesLayoutBy!==Fc&&jr(o);var s=[],l={},u=e.dimensionsDefine;if(u)q(u,function(v,m){var g=v.name,y={index:m,name:g,displayName:v.displayName};if(s.push(y),g!=null){var x="";lt(l,g)&&jr(x),l[g]=y}});else for(var c=0;c<e.dimensionsDetectedCount;c++)s.push({index:c});var h=xue(n,Fc);t.__isBuiltIn&&(r.getRawDataItem=function(v){return h(i,a,s,v)},r.getRawData=at(W7e,null,e)),r.cloneRawData=at(q7e,null,e);var d=bue(n,Fc);r.count=at(d,null,i,a,s);var f=wue(n);r.retrieveValue=function(v,m){var g=h(i,a,s,v);return p(g,m)};var p=r.retrieveValueFromItem=function(v,m){if(v!=null){var g=s[m];if(g)return f(v,m,g.name)}};return r.getDimensionInfo=at(Y7e,null,s,l),r.cloneAllDimensionInfo=at(X7e,null,s),r}function W7e(e){var t=e.sourceFormat;if(!DN(t)){var r="";jr(r)}return e.data}function q7e(e){var t=e.sourceFormat,r=e.data;if(!DN(t)){var i="";jr(i)}if(t===Ao){for(var n=[],a=0,o=r.length;a<o;a++)n.push(r[a].slice());return n}else if(t===zl){for(var n=[],a=0,o=r.length;a<o;a++)n.push(Be({},r[a]));return n}}function Y7e(e,t,r){if(r!=null){if(kr(r)||!isNaN(r)&&!lt(t,r))return e[r];if(lt(t,r))return t[r]}}function X7e(e){return At(e)}var Cue=dt();function Z7e(e){e=At(e);var t=e.type,r="";t||jr(r);var i=t.split(":");i.length!==2&&jr(r);var n=!1;i[0]==="echarts"&&(t=i[1],n=!0),e.__isBuiltIn=n,Cue.set(t,e)}function Q7e(e,t,r){var i=ci(e),n=i.length,a="";n||jr(a);for(var o=0,s=n;o<s;o++){var l=i[o];t=K7e(l,t),o!==s-1&&(t.length=Math.max(t.length,1))}return t}function K7e(e,t,r,i){var n="";t.length||jr(n),_t(e)||jr(n);var a=e.type,o=Cue.get(a);o||jr(n);var s=qe(t,function(u){return j7e(u,o)}),l=ci(o.transform({upstream:s[0],upstreamList:s,config:At(e.config)}));return qe(l,function(u,c){var h="";_t(u)||jr(h),u.data||jr(h);var d=mue(u.data);DN(d)||jr(h);var f,p=t[0];if(p&&c===0&&!u.dimensions){var v=p.startIndex;v&&(u.data=p.data.slice(0,v).concat(u.data)),f={seriesLayoutBy:Fc,sourceHeader:v,dimensions:p.metaRawOption.dimensions}}else f={seriesLayoutBy:Fc,sourceHeader:0,dimensions:u.dimensions};return bL(u.data,f,null)})}function DN(e){return e===Ao||e===zl}var LC="undefined",J7e=typeof Uint32Array===LC?Array:Uint32Array,$7e=typeof Uint16Array===LC?Array:Uint16Array,Eue=typeof Int32Array===LC?Array:Int32Array,Uj=typeof Float64Array===LC?Array:Float64Array,Mue={float:Uj,int:Eue,ordinal:Array,number:Array,time:Uj},sM;function A2(e){return e>65535?J7e:$7e}function Mm(){return[1/0,-1/0]}function eEe(e){var t=e.constructor;return t===Array?e.slice():new t(e)}function Gj(e,t,r,i,n){var a=Mue[r||"float"];if(n){var o=e[t],s=o&&o.length;if(s!==i){for(var l=new a(i),u=0;u<s;u++)l[u]=o[u];e[t]=l}}else e[t]=new a(i)}var wL=function(){function e(){this._chunks=[],this._rawExtent=[],this._extent=[],this._count=0,this._rawCount=0,this._calcDimNameToIdx=dt()}return e.prototype.initData=function(t,r,i){this._provider=t,this._chunks=[],this._indices=null,this.getRawIndex=this._getRawIdxIdentity;var n=t.getSource(),a=this.defaultDimValueGetter=sM[n.sourceFormat];this._dimValueGetter=i||a,this._rawExtent=[],gue(n),this._dimensions=qe(r,function(o){return{type:o.type,property:o.property}}),this._initDataFromProvider(0,t.count())},e.prototype.getProvider=function(){return this._provider},e.prototype.getSource=function(){return this._provider.getSource()},e.prototype.ensureCalculationDimension=function(t,r){var i=this._calcDimNameToIdx,n=this._dimensions,a=i.get(t);if(a!=null){if(n[a].type===r)return a}else a=n.length;return n[a]={type:r},i.set(t,a),this._chunks[a]=new Mue[r||"float"](this._rawCount),this._rawExtent[a]=Mm(),a},e.prototype.collectOrdinalMeta=function(t,r){var i=this._chunks[t],n=this._dimensions[t],a=this._rawExtent,o=n.ordinalOffset||0,s=i.length;o===0&&(a[t]=Mm());for(var l=a[t],u=o;u<s;u++){var c=i[u]=r.parseAndCollect(i[u]);isNaN(c)||(l[0]=Math.min(c,l[0]),l[1]=Math.max(c,l[1]))}n.ordinalMeta=r,n.ordinalOffset=s,n.type="ordinal"},e.prototype.getOrdinalMeta=function(t){var r=this._dimensions[t],i=r.ordinalMeta;return i},e.prototype.getDimensionProperty=function(t){var r=this._dimensions[t];return r&&r.property},e.prototype.appendData=function(t){var r=this._provider,i=this.count();r.appendData(t);var n=r.count();return r.persistent||(n+=i),i<n&&this._initDataFromProvider(i,n,!0),[i,n]},e.prototype.appendValues=function(t,r){for(var i=this._chunks,n=this._dimensions,a=n.length,o=this._rawExtent,s=this.count(),l=s+Math.max(t.length,r||0),u=0;u<a;u++){var c=n[u];Gj(i,u,c.type,l,!0)}for(var h=[],d=s;d<l;d++)for(var f=d-s,p=0;p<a;p++){var c=n[p],v=sM.arrayRows.call(this,t[f]||h,c.property,f,p);i[p][d]=v;var m=o[p];v<m[0]&&(m[0]=v),v>m[1]&&(m[1]=v)}return this._rawCount=this._count=l,{start:s,end:l}},e.prototype._initDataFromProvider=function(t,r,i){for(var n=this._provider,a=this._chunks,o=this._dimensions,s=o.length,l=this._rawExtent,u=qe(o,function(y){return y.property}),c=0;c<s;c++){var h=o[c];l[c]||(l[c]=Mm()),Gj(a,c,h.type,r,i)}if(n.fillStorage)n.fillStorage(t,r,a,l);else for(var d=[],f=t;f<r;f++){d=n.getItem(f,d);for(var p=0;p<s;p++){var v=a[p],m=this._dimValueGetter(d,u[p],f,p);v[f]=m;var g=l[p];m<g[0]&&(g[0]=m),m>g[1]&&(g[1]=m)}}!n.persistent&&n.clean&&n.clean(),this._rawCount=this._count=r,this._extent=[]},e.prototype.count=function(){return this._count},e.prototype.get=function(t,r){if(!(r>=0&&r<this._count))return NaN;var i=this._chunks[t];return i?i[this.getRawIndex(r)]:NaN},e.prototype.getValues=function(t,r){var i=[],n=[];if(r==null){r=t,t=[];for(var a=0;a<this._dimensions.length;a++)n.push(a)}else n=t;for(var a=0,o=n.length;a<o;a++)i.push(this.get(n[a],r));return i},e.prototype.getByRawIndex=function(t,r){if(!(r>=0&&r<this._rawCount))return NaN;var i=this._chunks[t];return i?i[r]:NaN},e.prototype.getSum=function(t){var r=this._chunks[t],i=0;if(r)for(var n=0,a=this.count();n<a;n++){var o=this.get(t,n);isNaN(o)||(i+=o)}return i},e.prototype.getMedian=function(t){var r=[];this.each([t],function(a){isNaN(a)||r.push(a)});var i=r.sort(function(a,o){return a-o}),n=this.count();return n===0?0:n%2===1?i[(n-1)/2]:(i[n/2]+i[n/2-1])/2},e.prototype.indexOfRawIndex=function(t){if(t>=this._rawCount||t<0)return-1;if(!this._indices)return t;var r=this._indices,i=r[t];if(i!=null&&i<this._count&&i===t)return t;for(var n=0,a=this._count-1;n<=a;){var o=(n+a)/2|0;if(r[o]<t)n=o+1;else if(r[o]>t)a=o-1;else return o}return-1},e.prototype.indicesOfNearest=function(t,r,i){var n=this._chunks,a=n[t],o=[];if(!a)return o;i==null&&(i=1/0);for(var s=1/0,l=-1,u=0,c=0,h=this.count();c<h;c++){var d=this.getRawIndex(c),f=r-a[d],p=Math.abs(f);p<=i&&((p<s||p===s&&f>=0&&l<0)&&(s=p,l=f,u=0),f===l&&(o[u++]=c))}return o.length=u,o},e.prototype.getIndices=function(){var t,r=this._indices;if(r){var i=r.constructor,n=this._count;if(i===Array){t=new i(n);for(var a=0;a<n;a++)t[a]=r[a]}else t=new i(r.buffer,0,n)}else{var i=A2(this._rawCount);t=new i(this.count());for(var a=0;a<t.length;a++)t[a]=a}return t},e.prototype.filter=function(t,r){if(!this._count)return this;for(var i=this.clone(),n=i.count(),a=A2(i._rawCount),o=new a(n),s=[],l=t.length,u=0,c=t[0],h=i._chunks,d=0;d<n;d++){var f=void 0,p=i.getRawIndex(d);if(l===0)f=r(d);else if(l===1){var v=h[c][p];f=r(v,d)}else{for(var m=0;m<l;m++)s[m]=h[t[m]][p];s[m]=d,f=r.apply(null,s)}f&&(o[u++]=p)}return u<n&&(i._indices=o),i._count=u,i._extent=[],i._updateGetRawIdx(),i},e.prototype.selectRange=function(t){var r=this.clone(),i=r._count;if(!i)return this;var n=mr(t),a=n.length;if(!a)return this;var o=r.count(),s=A2(r._rawCount),l=new s(o),u=0,c=n[0],h=t[c][0],d=t[c][1],f=r._chunks,p=!1;if(!r._indices){var v=0;if(a===1){for(var m=f[n[0]],g=0;g<i;g++){var y=m[g];(y>=h&&y<=d||isNaN(y))&&(l[u++]=v),v++}p=!0}else if(a===2){for(var m=f[n[0]],x=f[n[1]],b=t[n[1]][0],_=t[n[1]][1],g=0;g<i;g++){var y=m[g],w=x[g];(y>=h&&y<=d||isNaN(y))&&(w>=b&&w<=_||isNaN(w))&&(l[u++]=v),v++}p=!0}}if(!p)if(a===1)for(var g=0;g<o;g++){var S=r.getRawIndex(g),y=f[n[0]][S];(y>=h&&y<=d||isNaN(y))&&(l[u++]=S)}else for(var g=0;g<o;g++){for(var A=!0,S=r.getRawIndex(g),M=0;M<a;M++){var E=n[M],y=f[E][S];(y<t[E][0]||y>t[E][1])&&(A=!1)}A&&(l[u++]=r.getRawIndex(g))}return u<o&&(r._indices=l),r._count=u,r._extent=[],r._updateGetRawIdx(),r},e.prototype.map=function(t,r){var i=this.clone(t);return this._updateDims(i,t,r),i},e.prototype.modify=function(t,r){this._updateDims(this,t,r)},e.prototype._updateDims=function(t,r,i){for(var n=t._chunks,a=[],o=r.length,s=t.count(),l=[],u=t._rawExtent,c=0;c<r.length;c++)u[r[c]]=Mm();for(var h=0;h<s;h++){for(var d=t.getRawIndex(h),f=0;f<o;f++)l[f]=n[r[f]][d];l[o]=h;var p=i&&i.apply(null,l);if(p!=null){typeof p!="object"&&(a[0]=p,p=a);for(var c=0;c<p.length;c++){var v=r[c],m=p[c],g=u[v],y=n[v];y&&(y[d]=m),m<g[0]&&(g[0]=m),m>g[1]&&(g[1]=m)}}}},e.prototype.lttbDownSample=function(t,r){var i=this.clone([t],!0),n=i._chunks,a=n[t],o=this.count(),s=0,l=Math.floor(1/r),u=this.getRawIndex(0),c,h,d,f=new(A2(this._rawCount))(Math.min((Math.ceil(o/l)+2)*2,o));f[s++]=u;for(var p=1;p<o-1;p+=l){for(var v=Math.min(p+l,o-1),m=Math.min(p+l*2,o),g=(m+v)/2,y=0,x=v;x<m;x++){var b=this.getRawIndex(x),_=a[b];isNaN(_)||(y+=_)}y/=m-v;var w=p,S=Math.min(p+l,o),A=p-1,M=a[u];c=-1,d=w;for(var E=-1,T=0,x=w;x<S;x++){var b=this.getRawIndex(x),_=a[b];if(isNaN(_)){T++,E<0&&(E=b);continue}h=Math.abs((A-g)*(_-M)-(A-x)*(y-M)),h>c&&(c=h,d=b)}T>0&&T<S-w&&(f[s++]=Math.min(E,d),d=Math.max(E,d)),f[s++]=d,u=d}return f[s++]=this.getRawIndex(o-1),i._count=s,i._indices=f,i.getRawIndex=this._getRawIdx,i},e.prototype.downSample=function(t,r,i,n){for(var a=this.clone([t],!0),o=a._chunks,s=[],l=Math.floor(1/r),u=o[t],c=this.count(),h=a._rawExtent[t]=Mm(),d=new(A2(this._rawCount))(Math.ceil(c/l)),f=0,p=0;p<c;p+=l){l>c-p&&(l=c-p,s.length=l);for(var v=0;v<l;v++){var m=this.getRawIndex(p+v);s[v]=u[m]}var g=i(s),y=this.getRawIndex(Math.min(p+n(s,g)||0,c-1));u[y]=g,g<h[0]&&(h[0]=g),g>h[1]&&(h[1]=g),d[f++]=y}return a._count=f,a._indices=d,a._updateGetRawIdx(),a},e.prototype.each=function(t,r){if(this._count)for(var i=t.length,n=this._chunks,a=0,o=this.count();a<o;a++){var s=this.getRawIndex(a);switch(i){case 0:r(a);break;case 1:r(n[t[0]][s],a);break;case 2:r(n[t[0]][s],n[t[1]][s],a);break;default:for(var l=0,u=[];l<i;l++)u[l]=n[t[l]][s];u[l]=a,r.apply(null,u)}}},e.prototype.getDataExtent=function(t){var r=this._chunks[t],i=Mm();if(!r)return i;var n=this.count(),a=!this._indices,o;if(a)return this._rawExtent[t].slice();if(o=this._extent[t],o)return o.slice();o=i;for(var s=o[0],l=o[1],u=0;u<n;u++){var c=this.getRawIndex(u),h=r[c];h<s&&(s=h),h>l&&(l=h)}return o=[s,l],this._extent[t]=o,o},e.prototype.getRawDataItem=function(t){var r=this.getRawIndex(t);if(this._provider.persistent)return this._provider.getItem(r);for(var i=[],n=this._chunks,a=0;a<n.length;a++)i.push(n[a][r]);return i},e.prototype.clone=function(t,r){var i=new e,n=this._chunks,a=t&&Zc(t,function(s,l){return s[l]=!0,s},{});if(a)for(var o=0;o<n.length;o++)i._chunks[o]=a[o]?eEe(n[o]):n[o];else i._chunks=n;return this._copyCommonProps(i),r||(i._indices=this._cloneIndices()),i._updateGetRawIdx(),i},e.prototype._copyCommonProps=function(t){t._count=this._count,t._rawCount=this._rawCount,t._provider=this._provider,t._dimensions=this._dimensions,t._extent=At(this._extent),t._rawExtent=At(this._rawExtent)},e.prototype._cloneIndices=function(){if(this._indices){var t=this._indices.constructor,r=void 0;if(t===Array){var i=this._indices.length;r=new t(i);for(var n=0;n<i;n++)r[n]=this._indices[n]}else r=new t(this._indices);return r}return null},e.prototype._getRawIdxIdentity=function(t){return t},e.prototype._getRawIdx=function(t){return t<this._count&&t>=0?this._indices[t]:-1},e.prototype._updateGetRawIdx=function(){this.getRawIndex=this._indices?this._getRawIdx:this._getRawIdxIdentity},e.internalField=function(){function t(r,i,n,a){return ep(r[a],this._dimensions[a])}sM={arrayRows:t,objectRows:function(r,i,n,a){return ep(r[i],this._dimensions[a])},keyedColumns:t,original:function(r,i,n,a){var o=r&&(r.value==null?r:r.value);return ep(o instanceof Array?o[a]:o,this._dimensions[a])},typedArray:function(r,i,n,a){return r[a]}}}(),e}(),Tue=function(){function e(t){this._sourceList=[],this._storeList=[],this._upstreamSignList=[],this._versionSignBase=0,this._dirty=!0,this._sourceHost=t}return e.prototype.dirty=function(){this._setLocalSource([],[]),this._storeList=[],this._dirty=!0},e.prototype._setLocalSource=function(t,r){this._sourceList=t,this._upstreamSignList=r,this._versionSignBase++,this._versionSignBase>9e10&&(this._versionSignBase=0)},e.prototype._getVersionSign=function(){return this._sourceHost.uid+"_"+this._versionSignBase},e.prototype.prepareSource=function(){this._isDirty()&&(this._createSource(),this._dirty=!1)},e.prototype._createSource=function(){this._setLocalSource([],[]);var t=this._sourceHost,r=this._getUpstreamSourceManagers(),i=!!r.length,n,a;if(L3(t)){var o=t,s=void 0,l=void 0,u=void 0;if(i){var c=r[0];c.prepareSource(),u=c.getSource(),s=u.data,l=u.sourceFormat,a=[c._getVersionSign()]}else s=o.get("data",!0),l=Ss(s)?$f:Fl,a=[];var h=this._getSourceMetaRawOption()||{},d=u&&u.metaRawOption||{},f=Lt(h.seriesLayoutBy,d.seriesLayoutBy)||null,p=Lt(h.sourceHeader,d.sourceHeader),v=Lt(h.dimensions,d.dimensions),m=f!==d.seriesLayoutBy||!!p!=!!d.sourceHeader||v;n=m?[bL(s,{seriesLayoutBy:f,sourceHeader:p,dimensions:v},l)]:[]}else{var g=t;if(i){var y=this._applyTransform(r);n=y.sourceList,a=y.upstreamSignList}else{var x=g.get("source",!0);n=[bL(x,this._getSourceMetaRawOption(),null)],a=[]}}this._setLocalSource(n,a)},e.prototype._applyTransform=function(t){var r=this._sourceHost,i=r.get("transform",!0),n=r.get("fromTransformResult",!0);if(n!=null){var a="";t.length!==1&&Wj(a)}var o,s=[],l=[];return q(t,function(u){u.prepareSource();var c=u.getSource(n||0),h="";n!=null&&!c&&Wj(h),s.push(c),l.push(u._getVersionSign())}),i?o=Q7e(i,s,{datasetIndex:r.componentIndex}):n!=null&&(o=[I7e(s[0])]),{sourceList:o,upstreamSignList:l}},e.prototype._isDirty=function(){if(this._dirty)return!0;for(var t=this._getUpstreamSourceManagers(),r=0;r<t.length;r++){var i=t[r];if(i._isDirty()||this._upstreamSignList[r]!==i._getVersionSign())return!0}},e.prototype.getSource=function(t){t=t||0;var r=this._sourceList[t];if(!r){var i=this._getUpstreamSourceManagers();return i[0]&&i[0].getSource(t)}return r},e.prototype.getSharedDataStore=function(t){var r=t.makeStoreSchema();return this._innerGetDataStore(r.dimensions,t.source,r.hash)},e.prototype._innerGetDataStore=function(t,r,i){var n=0,a=this._storeList,o=a[n];o||(o=a[n]={});var s=o[i];if(!s){var l=this._getUpstreamSourceManagers()[0];L3(this._sourceHost)&&l?s=l._innerGetDataStore(t,r,i):(s=new wL,s.initData(new yue(r,t.length),t)),o[i]=s}return s},e.prototype._getUpstreamSourceManagers=function(){var t=this._sourceHost;if(L3(t)){var r=SN(t);return r?[r.getSourceManager()]:[]}else return qe(o7e(t),function(i){return i.getSourceManager()})},e.prototype._getSourceMetaRawOption=function(){var t=this._sourceHost,r,i,n;if(L3(t))r=t.get("seriesLayoutBy",!0),i=t.get("sourceHeader",!0),n=t.get("dimensions",!0);else if(!this._getUpstreamSourceManagers().length){var a=t;r=a.get("seriesLayoutBy",!0),i=a.get("sourceHeader",!0),n=a.get("dimensions",!0)}return{seriesLayoutBy:r,sourceHeader:i,dimensions:n}},e}();function jj(e){var t=e.option.transform;t&&A8(e.option.transform)}function L3(e){return e.mainType==="series"}function Wj(e){throw new Error(e)}var Pue="line-height:1";function Due(e,t){var r=e.color||"#6e7079",i=e.fontSize||12,n=e.fontWeight||"400",a=e.color||"#464646",o=e.fontSize||14,s=e.fontWeight||"900";return t==="html"?{nameStyle:"font-size:"+ls(i+"")+"px;color:"+ls(r)+";font-weight:"+ls(n+""),valueStyle:"font-size:"+ls(o+"")+"px;color:"+ls(a)+";font-weight:"+ls(s+"")}:{nameStyle:{fontSize:i,fill:r,fontWeight:n},valueStyle:{fontSize:o,fill:a,fontWeight:s}}}var tEe=[0,10,20,30],rEe=["",`
`,`

`,`


`];function na(e,t){return t.type=e,t}function _L(e){return e.type==="section"}function Iue(e){return _L(e)?iEe:nEe}function Lue(e){if(_L(e)){var t=0,r=e.blocks.length,i=r>1||r>0&&!e.noHeader;return q(e.blocks,function(n){var a=Lue(n);a>=t&&(t=a+ +(i&&(!a||_L(n)&&!n.noHeader)))}),t}return 0}function iEe(e,t,r,i){var n=t.noHeader,a=aEe(Lue(t)),o=[],s=t.blocks||[];Yo(!s||Ue(s)),s=s||[];var l=e.orderMode;if(t.sortBlocks&&l){s=s.slice();var u={valueAsc:"asc",valueDesc:"desc"};if(lt(u,l)){var c=new Sue(u[l],null);s.sort(function(p,v){return c.evaluate(p.sortParam,v.sortParam)})}else l==="seriesDesc"&&s.reverse()}q(s,function(p,v){var m=t.valueFormatter,g=Iue(p)(m?Be(Be({},e),{valueFormatter:m}):e,p,v>0?a.html:0,i);g!=null&&o.push(g)});var h=e.renderMode==="richText"?o.join(a.richText):AL(o.join(""),n?r:a.html);if(n)return h;var d=gL(t.header,"ordinal",e.useUTC),f=Due(i,e.renderMode).nameStyle;return e.renderMode==="richText"?kue(e,d,f)+a.richText+h:AL('<div style="'+f+";"+Pue+';">'+ls(d)+"</div>"+h,r)}function nEe(e,t,r,i){var n=e.renderMode,a=t.noName,o=t.noValue,s=!t.markerType,l=t.name,u=e.useUTC,c=t.valueFormatter||e.valueFormatter||function(b){return b=Ue(b)?b:[b],qe(b,function(_,w){return gL(_,Ue(f)?f[w]:f,u)})};if(!(a&&o)){var h=s?"":e.markupStyleCreator.makeTooltipMarker(t.markerType,t.markerColor||"#333",n),d=a?"":gL(l,"ordinal",u),f=t.valueType,p=o?[]:c(t.value,t.dataIndex),v=!s||!a,m=!s&&a,g=Due(i,n),y=g.nameStyle,x=g.valueStyle;return n==="richText"?(s?"":h)+(a?"":kue(e,d,y))+(o?"":lEe(e,p,v,m,x)):AL((s?"":h)+(a?"":oEe(d,!s,y))+(o?"":sEe(p,v,m,x)),r)}}function qj(e,t,r,i,n,a){if(e){var o=Iue(e),s={useUTC:n,renderMode:r,orderMode:i,markupStyleCreator:t,valueFormatter:e.valueFormatter};return o(s,e,0,a)}}function aEe(e){return{html:tEe[e],richText:rEe[e]}}function AL(e,t){var r='<div style="clear:both"></div>',i="margin: "+t+"px 0 0";return'<div style="'+i+";"+Pue+';">'+e+r+"</div>"}function oEe(e,t,r){var i=t?"margin-left:2px":"";return'<span style="'+r+";"+i+'">'+ls(e)+"</span>"}function sEe(e,t,r,i){var n=r?"10px":"20px",a=t?"float:right;margin-left:"+n:"";return e=Ue(e)?e:[e],'<span style="'+a+";"+i+'">'+qe(e,function(o){return ls(o)}).join("&nbsp;&nbsp;")+"</span>"}function kue(e,t,r){return e.markupStyleCreator.wrapRichTextStyle(t,r)}function lEe(e,t,r,i,n){var a=[n],o=i?10:20;return r&&a.push({padding:[0,0,0,o],align:"right"}),e.markupStyleCreator.wrapRichTextStyle(Ue(t)?t.join("  "):t,a)}function Rue(e,t){var r=e.getData().getItemVisual(t,"style"),i=r[e.visualDrawType];return Bv(i)}function Oue(e,t){var r=e.get("padding");return r??(t==="richText"?[8,10]:10)}var lM=function(){function e(){this.richTextStyles={},this._nextStyleNameId=Qse()}return e.prototype._generateStyleName=function(){return"__EC_aUTo_"+this._nextStyleNameId++},e.prototype.makeTooltipMarker=function(t,r,i){var n=i==="richText"?this._generateStyleName():null,a=$Ce({color:r,type:t,renderMode:i,markerId:n});return it(a)?a:(this.richTextStyles[n]=a.style,a.content)},e.prototype.wrapRichTextStyle=function(t,r){var i={};Ue(r)?q(r,function(a){return Be(i,a)}):Be(i,r);var n=this._generateStyleName();return this.richTextStyles[n]=i,"{"+n+"|"+t+"}"},e}();function Bue(e){var t=e.series,r=e.dataIndex,i=e.multipleSeries,n=t.getData(),a=n.mapDimensionsAll("defaultedTooltip"),o=a.length,s=t.getRawValue(r),l=Ue(s),u=Rue(t,r),c,h,d,f;if(o>1||l&&!o){var p=uEe(s,t,r,a,u);c=p.inlineValues,h=p.inlineValueTypes,d=p.blocks,f=p.inlineValues[0]}else if(o){var v=n.getDimensionInfo(a[0]);f=c=F1(n,r,a[0]),h=v.type}else f=c=l?s[0]:s;var m=rN(t),g=m&&t.name||"",y=n.getName(r),x=i?g:y;return na("section",{header:g,noHeader:i||!m,sortParam:f,blocks:[na("nameValue",{markerType:"item",markerColor:u,name:x,noName:!fu(x),value:c,valueType:h,dataIndex:r})].concat(d||[])})}function uEe(e,t,r,i,n){var a=t.getData(),o=Zc(e,function(h,d,f){var p=a.getDimensionInfo(f);return h=h||p&&p.tooltip!==!1&&p.displayName!=null},!1),s=[],l=[],u=[];i.length?q(i,function(h){c(F1(a,r,h),h)}):q(e,c);function c(h,d){var f=a.getDimensionInfo(d);!f||f.otherDims.tooltip===!1||(o?u.push(na("nameValue",{markerType:"subItem",markerColor:n,name:f.displayName,value:h,valueType:f.type})):(s.push(h),l.push(f.type)))}return{inlineValues:s,inlineValueTypes:l,blocks:u}}var Yd=Pr();function k3(e,t){return e.getName(t)||e.getId(t)}var _A="__universalTransitionEnabled",Di=function(e){_e(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r._selectedDataIndicesMap={},r}return t.prototype.init=function(r,i,n){this.seriesIndex=this.componentIndex,this.dataTask=fb({count:hEe,reset:dEe}),this.dataTask.context={model:this},this.mergeDefaultAndTheme(r,n);var a=Yd(this).sourceManager=new Tue(this);a.prepareSource();var o=this.getInitialData(r,n);Xj(o,this),this.dataTask.context.data=o,Yd(this).dataBeforeProcessed=o,Yj(this),this._initSelectedMapFromData(o)},t.prototype.mergeDefaultAndTheme=function(r,i){var n=rw(this),a=n?Dy(r):{},o=this.subType;vr.hasClass(o)&&(o+="Series"),Wt(r,i.getTheme().get(this.subType)),Wt(r,this.getDefaultOption()),Lv(r,"label",["show"]),this.fillDataTextStyle(r.data),n&&pp(r,a,n)},t.prototype.mergeOption=function(r,i){r=Wt(this.option,r,!0),this.fillDataTextStyle(r.data);var n=rw(this);n&&pp(this.option,r,n);var a=Yd(this).sourceManager;a.dirty(),a.prepareSource();var o=this.getInitialData(r,i);Xj(o,this),this.dataTask.dirty(),this.dataTask.context.data=o,Yd(this).dataBeforeProcessed=o,Yj(this),this._initSelectedMapFromData(o)},t.prototype.fillDataTextStyle=function(r){if(r&&!Ss(r))for(var i=["show"],n=0;n<r.length;n++)r[n]&&r[n].label&&Lv(r[n],"label",i)},t.prototype.getInitialData=function(r,i){},t.prototype.appendData=function(r){var i=this.getRawData();i.appendData(r.data)},t.prototype.getData=function(r){var i=SL(this);if(i){var n=i.context.data;return r==null||!n.getLinkedData?n:n.getLinkedData(r)}else return Yd(this).data},t.prototype.getAllData=function(){var r=this.getData();return r&&r.getLinkedDataAll?r.getLinkedDataAll():[{data:r}]},t.prototype.setData=function(r){var i=SL(this);if(i){var n=i.context;n.outputData=r,i!==this.dataTask&&(n.data=r)}Yd(this).data=r},t.prototype.getEncode=function(){var r=this.get("encode",!0);if(r)return dt(r)},t.prototype.getSourceManager=function(){return Yd(this).sourceManager},t.prototype.getSource=function(){return this.getSourceManager().getSource()},t.prototype.getRawData=function(){return Yd(this).dataBeforeProcessed},t.prototype.getColorBy=function(){var r=this.get("colorBy");return r||"series"},t.prototype.isColorBySeries=function(){return this.getColorBy()==="series"},t.prototype.getBaseAxis=function(){var r=this.coordinateSystem;return r&&r.getBaseAxis&&r.getBaseAxis()},t.prototype.formatTooltip=function(r,i,n){return Bue({series:this,dataIndex:r,multipleSeries:i})},t.prototype.isAnimationEnabled=function(){var r=this.ecModel;if(hr.node&&!(r&&r.ssr))return!1;var i=this.getShallow("animation");return i&&this.getData().count()>this.getShallow("animationThreshold")&&(i=!1),!!i},t.prototype.restoreData=function(){this.dataTask.dirty()},t.prototype.getColorFromPalette=function(r,i,n){var a=this.ecModel,o=CN.prototype.getColorFromPalette.call(this,r,i,n);return o||(o=a.getColorFromPalette(r,i,n)),o},t.prototype.coordDimToDataDim=function(r){return this.getRawData().mapDimensionsAll(r)},t.prototype.getProgressive=function(){return this.get("progressive")},t.prototype.getProgressiveThreshold=function(){return this.get("progressiveThreshold")},t.prototype.select=function(r,i){this._innerSelect(this.getData(i),r)},t.prototype.unselect=function(r,i){var n=this.option.selectedMap;if(n){var a=this.option.selectedMode,o=this.getData(i);if(a==="series"||n==="all"){this.option.selectedMap={},this._selectedDataIndicesMap={};return}for(var s=0;s<r.length;s++){var l=r[s],u=k3(o,l);n[u]=!1,this._selectedDataIndicesMap[u]=-1}}},t.prototype.toggleSelect=function(r,i){for(var n=[],a=0;a<r.length;a++)n[0]=r[a],this.isSelected(r[a],i)?this.unselect(n,i):this.select(n,i)},t.prototype.getSelectedDataIndices=function(){if(this.option.selectedMap==="all")return[].slice.call(this.getData().getIndices());for(var r=this._selectedDataIndicesMap,i=mr(r),n=[],a=0;a<i.length;a++){var o=r[i[a]];o>=0&&n.push(o)}return n},t.prototype.isSelected=function(r,i){var n=this.option.selectedMap;if(!n)return!1;var a=this.getData(i);return(n==="all"||n[k3(a,r)])&&!a.getItemModel(r).get(["select","disabled"])},t.prototype.isUniversalTransitionEnabled=function(){if(this[_A])return!0;var r=this.option.universalTransition;return r?r===!0?!0:r&&r.enabled:!1},t.prototype._innerSelect=function(r,i){var n,a,o=this.option,s=o.selectedMode,l=i.length;if(!(!s||!l)){if(s==="series")o.selectedMap="all";else if(s==="multiple"){_t(o.selectedMap)||(o.selectedMap={});for(var u=o.selectedMap,c=0;c<l;c++){var h=i[c],d=k3(r,h);u[d]=!0,this._selectedDataIndicesMap[d]=r.getRawIndex(h)}}else if(s==="single"||s===!0){var f=i[l-1],d=k3(r,f);o.selectedMap=(n={},n[d]=!0,n),this._selectedDataIndicesMap=(a={},a[d]=r.getRawIndex(f),a)}}},t.prototype._initSelectedMapFromData=function(r){if(!this.option.selectedMap){var i=[];r.hasItemOption&&r.each(function(n){var a=r.getRawDataItem(n);a&&a.selected&&i.push(n)}),i.length>0&&this._innerSelect(r,i)}},t.registerClass=function(r){return vr.registerClass(r)},t.protoInitialize=function(){var r=t.prototype;r.type="series.__base__",r.seriesIndex=0,r.ignoreStyleOnData=!1,r.hasSymbolVisual=!1,r.defaultSymbol="circle",r.visualStyleAccessPath="itemStyle",r.visualDrawType="fill"}(),t}(vr);Mn(Di,IC);Mn(Di,CN);ale(Di,vr);function Yj(e){var t=e.name;rN(e)||(e.name=cEe(e)||t)}function cEe(e){var t=e.getRawData(),r=t.mapDimensionsAll("seriesName"),i=[];return q(r,function(n){var a=t.getDimensionInfo(n);a.displayName&&i.push(a.displayName)}),i.join(" ")}function hEe(e){return e.model.getRawData().count()}function dEe(e){var t=e.model;return t.setData(t.getRawData().cloneShallow()),fEe}function fEe(e,t){t.outputData&&e.end>t.outputData.count()&&t.model.getRawData().cloneShallow(t.outputData)}function Xj(e,t){q(S8(e.CHANGABLE_METHODS,e.DOWNSAMPLE_METHODS),function(r){e.wrapMethod(r,kt(pEe,t))})}function pEe(e,t){var r=SL(e);return r&&r.setOutputEnd((t||this).count()),t}function SL(e){var t=(e.ecModel||{}).scheduler,r=t&&t.getPipeline(e.uid);if(r){var i=r.currentTask;if(i){var n=i.agentStubMap;n&&(i=n.get(e.uid))}return i}}var Gi=function(){function e(){this.group=new Ct,this.uid=Ty("viewComponent")}return e.prototype.init=function(t,r){},e.prototype.render=function(t,r,i,n){},e.prototype.dispose=function(t,r){},e.prototype.updateView=function(t,r,i,n){},e.prototype.updateLayout=function(t,r,i,n){},e.prototype.updateVisual=function(t,r,i,n){},e.prototype.toggleBlurSeries=function(t,r,i){},e.prototype.eachRendered=function(t){var r=this.group;r&&r.traverse(t)},e}();nN(Gi);fC(Gi);function Ly(){var e=Pr();return function(t){var r=e(t),i=t.pipelineContext,n=!!r.large,a=!!r.progressiveRender,o=r.large=!!(i&&i.large),s=r.progressiveRender=!!(i&&i.progressiveRender);return(n!==o||a!==s)&&"reset"}}var Nue=Pr(),vEe=Ly(),yi=function(){function e(){this.group=new Ct,this.uid=Ty("viewChart"),this.renderTask=fb({plan:mEe,reset:gEe}),this.renderTask.context={view:this}}return e.prototype.init=function(t,r){},e.prototype.render=function(t,r,i,n){},e.prototype.highlight=function(t,r,i,n){var a=t.getData(n&&n.dataType);a&&Qj(a,n,"emphasis")},e.prototype.downplay=function(t,r,i,n){var a=t.getData(n&&n.dataType);a&&Qj(a,n,"normal")},e.prototype.remove=function(t,r){this.group.removeAll()},e.prototype.dispose=function(t,r){},e.prototype.updateView=function(t,r,i,n){this.render(t,r,i,n)},e.prototype.updateLayout=function(t,r,i,n){this.render(t,r,i,n)},e.prototype.updateVisual=function(t,r,i,n){this.render(t,r,i,n)},e.prototype.eachRendered=function(t){Ep(this.group,t)},e.markUpdateMethod=function(t,r){Nue(t).updateMethod=r},e.protoInitialize=function(){var t=e.prototype;t.type="chart"}(),e}();function Zj(e,t,r){e&&$b(e)&&(t==="emphasis"?md:gd)(e,r)}function Qj(e,t,r){var i=kv(e,t),n=t&&t.highlightKey!=null?$6e(t.highlightKey):null;i!=null?q(ci(i),function(a){Zj(e.getItemGraphicEl(a),r,n)}):e.eachItemGraphicEl(function(a){Zj(a,r,n)})}nN(yi);fC(yi);function mEe(e){return vEe(e.model)}function gEe(e){var t=e.model,r=e.ecModel,i=e.api,n=e.payload,a=t.pipelineContext.progressiveRender,o=e.view,s=n&&Nue(n).updateMethod,l=a?"incrementalPrepareRender":s&&o[s]?s:"render";return l!=="render"&&o[l](t,r,i,n),yEe[l]}var yEe={incrementalPrepareRender:{progress:function(e,t){t.view.incrementalRender(e,t.model,t.ecModel,t.api,t.payload)}},render:{forceFirstProgress:!0,progress:function(e,t){t.view.render(t.model,t.ecModel,t.api,t.payload)}}},H8="\0__throttleOriginMethod",Kj="\0__throttleRate",Jj="\0__throttleType";function IN(e,t,r){var i,n=0,a=0,o=null,s,l,u,c;t=t||0;function h(){a=new Date().getTime(),o=null,e.apply(l,u||[])}var d=function(){for(var f=[],p=0;p<arguments.length;p++)f[p]=arguments[p];i=new Date().getTime(),l=this,u=f;var v=c||t,m=c||r;c=null,s=i-(m?n:a)-v,clearTimeout(o),m?o=setTimeout(h,v):s>=0?h():o=setTimeout(h,-s),n=i};return d.clear=function(){o&&(clearTimeout(o),o=null)},d.debounceNextCall=function(f){c=f},d}function ky(e,t,r,i){var n=e[t];if(n){var a=n[H8]||n,o=n[Jj],s=n[Kj];if(s!==r||o!==i){if(r==null||!i)return e[t]=a;n=e[t]=IN(a,r,i==="debounce"),n[H8]=a,n[Jj]=i,n[Kj]=r}return n}}function nw(e,t){var r=e[t];r&&r[H8]&&(r.clear&&r.clear(),e[t]=r[H8])}var $j=Pr(),eW={itemStyle:Rv(Gle,!0),lineStyle:Rv(Ule,!0)},xEe={lineStyle:"stroke",itemStyle:"fill"};function Vue(e,t){var r=e.visualStyleMapper||eW[t];return r||(console.warn("Unknown style type '"+t+"'."),eW.itemStyle)}function Fue(e,t){var r=e.visualDrawType||xEe[t];return r||(console.warn("Unknown style type '"+t+"'."),"fill")}var bEe={createOnAllSeries:!0,performRawSeries:!0,reset:function(e,t){var r=e.getData(),i=e.visualStyleAccessPath||"itemStyle",n=e.getModel(i),a=Vue(e,i),o=a(n),s=n.getShallow("decal");s&&(r.setVisual("decal",s),s.dirty=!0);var l=Fue(e,i),u=o[l],c=xt(u)?u:null,h=o.fill==="auto"||o.stroke==="auto";if(!o[l]||c||h){var d=e.getColorFromPalette(e.name,null,t.getSeriesCount());o[l]||(o[l]=d,r.setVisual("colorFromPalette",!0)),o.fill=o.fill==="auto"||xt(o.fill)?d:o.fill,o.stroke=o.stroke==="auto"||xt(o.stroke)?d:o.stroke}if(r.setVisual("style",o),r.setVisual("drawType",l),!t.isSeriesFiltered(e)&&c)return r.setVisual("colorFromPalette",!1),{dataEach:function(f,p){var v=e.getDataParams(p),m=Be({},o);m[l]=c(v),f.setItemVisual(p,"style",m)}}}},S2=new Qr,wEe={createOnAllSeries:!0,performRawSeries:!0,reset:function(e,t){if(!(e.ignoreStyleOnData||t.isSeriesFiltered(e))){var r=e.getData(),i=e.visualStyleAccessPath||"itemStyle",n=Vue(e,i),a=r.getVisual("drawType");return{dataEach:r.hasItemOption?function(o,s){var l=o.getRawDataItem(s);if(l&&l[i]){S2.option=l[i];var u=n(S2),c=o.ensureUniqueItemVisual(s,"style");Be(c,u),S2.option.decal&&(o.setItemVisual(s,"decal",S2.option.decal),S2.option.decal.dirty=!0),a in u&&o.setItemVisual(s,"colorFromPalette",!1)}}:null}}}},_Ee={performRawSeries:!0,overallReset:function(e){var t=dt();e.eachSeries(function(r){var i=r.getColorBy();if(!r.isColorBySeries()){var n=r.type+"-"+i,a=t.get(n);a||(a={},t.set(n,a)),$j(r).scope=a}}),e.eachSeries(function(r){if(!(r.isColorBySeries()||e.isSeriesFiltered(r))){var i=r.getRawData(),n={},a=r.getData(),o=$j(r).scope,s=r.visualStyleAccessPath||"itemStyle",l=Fue(r,s);a.each(function(u){var c=a.getRawIndex(u);n[c]=u}),i.each(function(u){var c=n[u],h=a.getItemVisual(c,"colorFromPalette");if(h){var d=a.ensureUniqueItemVisual(c,"style"),f=i.getName(u)||u+"",p=i.count();d[l]=r.getColorFromPalette(f,o,p)}})}})}},R3=Math.PI;function AEe(e,t){t=t||{},bt(t,{text:"loading",textColor:"#000",fontSize:12,fontWeight:"normal",fontStyle:"normal",fontFamily:"sans-serif",maskColor:"rgba(255, 255, 255, 0.8)",showSpinner:!0,color:"#5470c6",spinnerRadius:10,lineWidth:5,zlevel:0});var r=new Ct,i=new Tr({style:{fill:t.maskColor},zlevel:t.zlevel,z:1e4});r.add(i);var n=new Dr({style:{text:t.text,fill:t.textColor,fontSize:t.fontSize,fontWeight:t.fontWeight,fontStyle:t.fontStyle,fontFamily:t.fontFamily},zlevel:t.zlevel,z:10001}),a=new Tr({style:{fill:"none"},textContent:n,textConfig:{position:"right",distance:10},zlevel:t.zlevel,z:10001});r.add(a);var o;return t.showSpinner&&(o=new bC({shape:{startAngle:-R3/2,endAngle:-R3/2+.1,r:t.spinnerRadius},style:{stroke:t.color,lineCap:"round",lineWidth:t.lineWidth},zlevel:t.zlevel,z:10001}),o.animateShape(!0).when(1e3,{endAngle:R3*3/2}).start("circularInOut"),o.animateShape(!0).when(1e3,{startAngle:R3*3/2}).delay(300).start("circularInOut"),r.add(o)),r.resize=function(){var s=n.getBoundingRect().width,l=t.showSpinner?t.spinnerRadius:0,u=(e.getWidth()-l*2-(t.showSpinner&&s?10:0)-s)/2-(t.showSpinner&&s?0:5+s/2)+(t.showSpinner?0:s/2)+(s?0:l),c=e.getHeight()/2;t.showSpinner&&o.setShape({cx:u,cy:c}),a.setShape({x:u-l,y:c-l,width:l*2,height:l*2}),i.setShape({x:0,y:0,width:e.getWidth(),height:e.getHeight()})},r.resize(),r}var zue=function(){function e(t,r,i,n){this._stageTaskMap=dt(),this.ecInstance=t,this.api=r,i=this._dataProcessorHandlers=i.slice(),n=this._visualHandlers=n.slice(),this._allHandlers=i.concat(n)}return e.prototype.restoreData=function(t,r){t.restoreData(r),this._stageTaskMap.each(function(i){var n=i.overallTask;n&&n.dirty()})},e.prototype.getPerformArgs=function(t,r){if(t.__pipeline){var i=this._pipelineMap.get(t.__pipeline.id),n=i.context,a=!r&&i.progressiveEnabled&&(!n||n.progressiveRender)&&t.__idxInPipeline>i.blockIndex,o=a?i.step:null,s=n&&n.modDataCount,l=s!=null?Math.ceil(s/o):null;return{step:o,modBy:l,modDataCount:s}}},e.prototype.getPipeline=function(t){return this._pipelineMap.get(t)},e.prototype.updateStreamModes=function(t,r){var i=this._pipelineMap.get(t.uid),n=t.getData(),a=n.count(),o=i.progressiveEnabled&&r.incrementalPrepareRender&&a>=i.threshold,s=t.get("large")&&a>=t.get("largeThreshold"),l=t.get("progressiveChunkMode")==="mod"?a:null;t.pipelineContext=i.context={progressiveRender:o,modDataCount:l,large:s}},e.prototype.restorePipelines=function(t){var r=this,i=r._pipelineMap=dt();t.eachSeries(function(n){var a=n.getProgressive(),o=n.uid;i.set(o,{id:o,head:null,tail:null,threshold:n.getProgressiveThreshold(),progressiveEnabled:a&&!(n.preventIncremental&&n.preventIncremental()),blockIndex:-1,step:Math.round(a||700),count:0}),r._pipe(n,n.dataTask)})},e.prototype.prepareStageTasks=function(){var t=this._stageTaskMap,r=this.api.getModel(),i=this.api;q(this._allHandlers,function(n){var a=t.get(n.uid)||t.set(n.uid,{}),o="";Yo(!(n.reset&&n.overallReset),o),n.reset&&this._createSeriesStageTask(n,a,r,i),n.overallReset&&this._createOverallStageTask(n,a,r,i)},this)},e.prototype.prepareView=function(t,r,i,n){var a=t.renderTask,o=a.context;o.model=r,o.ecModel=i,o.api=n,a.__block=!t.incrementalPrepareRender,this._pipe(r,a)},e.prototype.performDataProcessorTasks=function(t,r){this._performStageTasks(this._dataProcessorHandlers,t,r,{block:!0})},e.prototype.performVisualTasks=function(t,r,i){this._performStageTasks(this._visualHandlers,t,r,i)},e.prototype._performStageTasks=function(t,r,i,n){n=n||{};var a=!1,o=this;q(t,function(l,u){if(!(n.visualType&&n.visualType!==l.visualType)){var c=o._stageTaskMap.get(l.uid),h=c.seriesTaskMap,d=c.overallTask;if(d){var f,p=d.agentStubMap;p.each(function(m){s(n,m)&&(m.dirty(),f=!0)}),f&&d.dirty(),o.updatePayload(d,i);var v=o.getPerformArgs(d,n.block);p.each(function(m){m.perform(v)}),d.perform(v)&&(a=!0)}else h&&h.each(function(m,g){s(n,m)&&m.dirty();var y=o.getPerformArgs(m,n.block);y.skip=!l.performRawSeries&&r.isSeriesFiltered(m.context.model),o.updatePayload(m,i),m.perform(y)&&(a=!0)})}});function s(l,u){return l.setDirty&&(!l.dirtyMap||l.dirtyMap.get(u.__pipeline.id))}this.unfinished=a||this.unfinished},e.prototype.performSeriesTasks=function(t){var r;t.eachSeries(function(i){r=i.dataTask.perform()||r}),this.unfinished=r||this.unfinished},e.prototype.plan=function(){this._pipelineMap.each(function(t){var r=t.tail;do{if(r.__block){t.blockIndex=r.__idxInPipeline;break}r=r.getUpstream()}while(r)})},e.prototype.updatePayload=function(t,r){r!=="remain"&&(t.context.payload=r)},e.prototype._createSeriesStageTask=function(t,r,i,n){var a=this,o=r.seriesTaskMap,s=r.seriesTaskMap=dt(),l=t.seriesType,u=t.getTargetSeries;t.createOnAllSeries?i.eachRawSeries(c):l?i.eachRawSeriesByType(l,c):u&&u(i,n).each(c);function c(h){var d=h.uid,f=s.set(d,o&&o.get(d)||fb({plan:TEe,reset:PEe,count:IEe}));f.context={model:h,ecModel:i,api:n,useClearVisual:t.isVisual&&!t.isLayout,plan:t.plan,reset:t.reset,scheduler:a},a._pipe(h,f)}},e.prototype._createOverallStageTask=function(t,r,i,n){var a=this,o=r.overallTask=r.overallTask||fb({reset:SEe});o.context={ecModel:i,api:n,overallReset:t.overallReset,scheduler:a};var s=o.agentStubMap,l=o.agentStubMap=dt(),u=t.seriesType,c=t.getTargetSeries,h=!0,d=!1,f="";Yo(!t.createOnAllSeries,f),u?i.eachRawSeriesByType(u,p):c?c(i,n).each(p):(h=!1,q(i.getSeries(),p));function p(v){var m=v.uid,g=l.set(m,s&&s.get(m)||(d=!0,fb({reset:CEe,onDirty:MEe})));g.context={model:v,overallProgress:h},g.agent=o,g.__block=h,a._pipe(v,g)}d&&o.dirty()},e.prototype._pipe=function(t,r){var i=t.uid,n=this._pipelineMap.get(i);!n.head&&(n.head=r),n.tail&&n.tail.pipe(r),n.tail=r,r.__idxInPipeline=n.count++,r.__pipeline=n},e.wrapStageHandler=function(t,r){return xt(t)&&(t={overallReset:t,seriesType:LEe(t)}),t.uid=Ty("stageHandler"),r&&(t.visualType=r),t},e}();function SEe(e){e.overallReset(e.ecModel,e.api,e.payload)}function CEe(e){return e.overallProgress&&EEe}function EEe(){this.agent.dirty(),this.getDownstream().dirty()}function MEe(){this.agent&&this.agent.dirty()}function TEe(e){return e.plan?e.plan(e.model,e.ecModel,e.api,e.payload):null}function PEe(e){e.useClearVisual&&e.data.clearAllVisual();var t=e.resetDefines=ci(e.reset(e.model,e.ecModel,e.api,e.payload));return t.length>1?qe(t,function(r,i){return Hue(i)}):DEe}var DEe=Hue(0);function Hue(e){return function(t,r){var i=r.data,n=r.resetDefines[e];if(n&&n.dataEach)for(var a=t.start;a<t.end;a++)n.dataEach(i,a);else n&&n.progress&&n.progress(t,i)}}function IEe(e){return e.data.count()}function LEe(e){U8=null;try{e(aw,Uue)}catch{}return U8}var aw={},Uue={},U8;Gue(aw,EN);Gue(Uue,fue);aw.eachSeriesByType=aw.eachRawSeriesByType=function(e){U8=e};aw.eachComponent=function(e){e.mainType==="series"&&e.subType&&(U8=e.subType)};function Gue(e,t){for(var r in t.prototype)e[r]=pn}var tW=["#37A2DA","#32C5E9","#67E0E3","#9FE6B8","#FFDB5C","#ff9f7f","#fb7293","#E062AE","#E690D1","#e7bcf3","#9d96f5","#8378EA","#96BFFF"];const kEe={color:tW,colorLayer:[["#37A2DA","#ffd85c","#fd7b5f"],["#37A2DA","#67E0E3","#FFDB5C","#ff9f7f","#E062AE","#9d96f5"],["#37A2DA","#32C5E9","#9FE6B8","#FFDB5C","#ff9f7f","#fb7293","#e7bcf3","#8378EA","#96BFFF"],tW]};var ko="#B9B8CE",rW="#100C2A",O3=function(){return{axisLine:{lineStyle:{color:ko}},splitLine:{lineStyle:{color:"#484753"}},splitArea:{areaStyle:{color:["rgba(255,255,255,0.02)","rgba(255,255,255,0.05)"]}},minorSplitLine:{lineStyle:{color:"#20203B"}}}},iW=["#4992ff","#7cffb2","#fddd60","#ff6e76","#58d9f9","#05c091","#ff8a45","#8d48e3","#dd79ff"],jue={darkMode:!0,color:iW,backgroundColor:rW,axisPointer:{lineStyle:{color:"#817f91"},crossStyle:{color:"#817f91"},label:{color:"#fff"}},legend:{textStyle:{color:ko}},textStyle:{color:ko},title:{textStyle:{color:"#EEF1FA"},subtextStyle:{color:"#B9B8CE"}},toolbox:{iconStyle:{borderColor:ko}},dataZoom:{borderColor:"#71708A",textStyle:{color:ko},brushStyle:{color:"rgba(135,163,206,0.3)"},handleStyle:{color:"#353450",borderColor:"#C5CBE3"},moveHandleStyle:{color:"#B0B6C3",opacity:.3},fillerColor:"rgba(135,163,206,0.2)",emphasis:{handleStyle:{borderColor:"#91B7F2",color:"#4D587D"},moveHandleStyle:{color:"#636D9A",opacity:.7}},dataBackground:{lineStyle:{color:"#71708A",width:1},areaStyle:{color:"#71708A"}},selectedDataBackground:{lineStyle:{color:"#87A3CE"},areaStyle:{color:"#87A3CE"}}},visualMap:{textStyle:{color:ko}},timeline:{lineStyle:{color:ko},label:{color:ko},controlStyle:{color:ko,borderColor:ko}},calendar:{itemStyle:{color:rW},dayLabel:{color:ko},monthLabel:{color:ko},yearLabel:{color:ko}},timeAxis:O3(),logAxis:O3(),valueAxis:O3(),categoryAxis:O3(),line:{symbol:"circle"},graph:{color:iW},gauge:{title:{color:ko},axisLine:{lineStyle:{color:[[1,"rgba(207,212,219,0.2)"]]}},axisLabel:{color:ko},detail:{color:"#EEF1FA"}},candlestick:{itemStyle:{color:"#f64e56",color0:"#54ea92",borderColor:"#f64e56",borderColor0:"#54ea92"}}};jue.categoryAxis.splitLine.show=!1;var REe=function(){function e(){}return e.prototype.normalizeQuery=function(t){var r={},i={},n={};if(it(t)){var a=Dc(t);r.mainType=a.main||null,r.subType=a.sub||null}else{var o=["Index","Name","Id"],s={name:1,dataIndex:1,dataType:1};q(t,function(l,u){for(var c=!1,h=0;h<o.length;h++){var d=o[h],f=u.lastIndexOf(d);if(f>0&&f===u.length-d.length){var p=u.slice(0,f);p!=="data"&&(r.mainType=p,r[d.toLowerCase()]=l,c=!0)}}s.hasOwnProperty(u)&&(i[u]=l,c=!0),c||(n[u]=l)})}return{cptQuery:r,dataQuery:i,otherQuery:n}},e.prototype.filter=function(t,r){var i=this.eventInfo;if(!i)return!0;var n=i.targetEl,a=i.packedEvent,o=i.model,s=i.view;if(!o||!s)return!0;var l=r.cptQuery,u=r.dataQuery;return c(l,o,"mainType")&&c(l,o,"subType")&&c(l,o,"index","componentIndex")&&c(l,o,"name")&&c(l,o,"id")&&c(u,a,"name")&&c(u,a,"dataIndex")&&c(u,a,"dataType")&&(!s.filterForExposedEvent||s.filterForExposedEvent(t,r.otherQuery,n,a));function c(h,d,f,p){return h[f]==null||d[p||f]===h[f]}},e.prototype.afterTrigger=function(){this.eventInfo=null},e}(),CL=["symbol","symbolSize","symbolRotate","symbolOffset"],nW=CL.concat(["symbolKeepAspect"]),OEe={createOnAllSeries:!0,performRawSeries:!0,reset:function(e,t){var r=e.getData();if(e.legendIcon&&r.setVisual("legendIcon",e.legendIcon),!e.hasSymbolVisual)return;for(var i={},n={},a=!1,o=0;o<CL.length;o++){var s=CL[o],l=e.get(s);xt(l)?(a=!0,n[s]=l):i[s]=l}if(i.symbol=i.symbol||e.defaultSymbol,r.setVisual(Be({legendIcon:e.legendIcon||i.symbol,symbolKeepAspect:e.get("symbolKeepAspect")},i)),t.isSeriesFiltered(e))return;var u=mr(n);function c(h,d){for(var f=e.getRawValue(d),p=e.getDataParams(d),v=0;v<u.length;v++){var m=u[v];h.setItemVisual(d,m,n[m](f,p))}}return{dataEach:a?c:null}}},BEe={createOnAllSeries:!0,performRawSeries:!0,reset:function(e,t){if(!e.hasSymbolVisual||t.isSeriesFiltered(e))return;var r=e.getData();function i(n,a){for(var o=n.getItemModel(a),s=0;s<nW.length;s++){var l=nW[s],u=o.getShallow(l,!0);u!=null&&n.setItemVisual(a,l,u)}}return{dataEach:r.hasItemOption?i:null}}};function LN(e,t,r){switch(r){case"color":var i=e.getItemVisual(t,"style");return i[e.getVisual("drawType")];case"opacity":return e.getItemVisual(t,"style").opacity;case"symbol":case"symbolSize":case"liftZ":return e.getItemVisual(t,r)}}function m4(e,t){switch(t){case"color":var r=e.getVisual("style");return r[e.getVisual("drawType")];case"opacity":return e.getVisual("style").opacity;case"symbol":case"symbolSize":case"liftZ":return e.getVisual(t)}}function Wue(e,t,r,i){switch(r){case"color":var n=e.ensureUniqueItemVisual(t,"style");n[e.getVisual("drawType")]=i,e.setItemVisual(t,"colorFromPalette",!1);break;case"opacity":e.ensureUniqueItemVisual(t,"style").opacity=i;break;case"symbol":case"symbolSize":case"liftZ":e.setItemVisual(t,r,i);break}}function que(e,t){function r(i,n){var a=[];return i.eachComponent({mainType:"series",subType:e,query:n},function(o){a.push(o.seriesIndex)}),a}q([[e+"ToggleSelect","toggleSelect"],[e+"Select","select"],[e+"UnSelect","unselect"]],function(i){t(i[0],function(n,a,o){n=Be({},n),o.dispatchAction(Be(n,{type:i[1],seriesIndex:r(a,n)}))})})}function Tm(e,t,r,i,n){var a=e+t;r.isSilent(a)||i.eachComponent({mainType:"series",subType:"pie"},function(o){for(var s=o.seriesIndex,l=o.option.selectedMap,u=n.selected,c=0;c<u.length;c++)if(u[c].seriesIndex===s){var h=o.getData(),d=kv(h,n.fromActionPayload);r.trigger(a,{type:a,seriesId:o.id,name:Ue(d)?h.getName(d[0]):h.getName(d),selected:it(l)?l:Be({},l)})}})}function NEe(e,t,r){e.on("selectchanged",function(i){var n=r.getModel();i.isFromClick?(Tm("map","selectchanged",t,n,i),Tm("pie","selectchanged",t,n,i)):i.fromAction==="select"?(Tm("map","selected",t,n,i),Tm("pie","selected",t,n,i)):i.fromAction==="unselect"&&(Tm("map","unselected",t,n,i),Tm("pie","unselected",t,n,i))})}function q0(e,t,r){for(var i;e&&!(t(e)&&(i=e,r));)e=e.__hostTarget||e.parent;return i}var VEe=Math.round(Math.random()*9),FEe=typeof Object.defineProperty=="function",zEe=function(){function e(){this._id="__ec_inner_"+VEe++}return e.prototype.get=function(t){return this._guard(t)[this._id]},e.prototype.set=function(t,r){var i=this._guard(t);return FEe?Object.defineProperty(i,this._id,{value:r,enumerable:!1,configurable:!0}):i[this._id]=r,this},e.prototype.delete=function(t){return this.has(t)?(delete this._guard(t)[this._id],!0):!1},e.prototype.has=function(t){return!!this._guard(t)[this._id]},e.prototype._guard=function(t){if(t!==Object(t))throw TypeError("Value of WeakMap is not a non-null object.");return t},e}(),HEe=or.extend({type:"triangle",shape:{cx:0,cy:0,width:0,height:0},buildPath:function(e,t){var r=t.cx,i=t.cy,n=t.width/2,a=t.height/2;e.moveTo(r,i-a),e.lineTo(r+n,i+a),e.lineTo(r-n,i+a),e.closePath()}}),UEe=or.extend({type:"diamond",shape:{cx:0,cy:0,width:0,height:0},buildPath:function(e,t){var r=t.cx,i=t.cy,n=t.width/2,a=t.height/2;e.moveTo(r,i-a),e.lineTo(r+n,i),e.lineTo(r,i+a),e.lineTo(r-n,i),e.closePath()}}),GEe=or.extend({type:"pin",shape:{x:0,y:0,width:0,height:0},buildPath:function(e,t){var r=t.x,i=t.y,n=t.width/5*3,a=Math.max(n,t.height),o=n/2,s=o*o/(a-o),l=i-a+o+s,u=Math.asin(s/o),c=Math.cos(u)*o,h=Math.sin(u),d=Math.cos(u),f=o*.6,p=o*.7;e.moveTo(r-c,l+s),e.arc(r,l,o,Math.PI-u,Math.PI*2+u),e.bezierCurveTo(r+c-h*f,l+s+d*f,r,i-p,r,i),e.bezierCurveTo(r,i-p,r-c+h*f,l+s+d*f,r-c,l+s),e.closePath()}}),jEe=or.extend({type:"arrow",shape:{x:0,y:0,width:0,height:0},buildPath:function(e,t){var r=t.height,i=t.width,n=t.x,a=t.y,o=i/3*2;e.moveTo(n,a),e.lineTo(n+o,a+r),e.lineTo(n,a+r/4*3),e.lineTo(n-o,a+r),e.lineTo(n,a),e.closePath()}}),WEe={line:$n,rect:Tr,roundRect:Tr,square:Tr,circle:Od,diamond:UEe,pin:GEe,arrow:jEe,triangle:HEe},qEe={line:function(e,t,r,i,n){n.x1=e,n.y1=t+i/2,n.x2=e+r,n.y2=t+i/2},rect:function(e,t,r,i,n){n.x=e,n.y=t,n.width=r,n.height=i},roundRect:function(e,t,r,i,n){n.x=e,n.y=t,n.width=r,n.height=i,n.r=Math.min(r,i)/4},square:function(e,t,r,i,n){var a=Math.min(r,i);n.x=e,n.y=t,n.width=a,n.height=a},circle:function(e,t,r,i,n){n.cx=e+r/2,n.cy=t+i/2,n.r=Math.min(r,i)/2},diamond:function(e,t,r,i,n){n.cx=e+r/2,n.cy=t+i/2,n.width=r,n.height=i},pin:function(e,t,r,i,n){n.x=e+r/2,n.y=t+i/2,n.width=r,n.height=i},arrow:function(e,t,r,i,n){n.x=e+r/2,n.y=t+i/2,n.width=r,n.height=i},triangle:function(e,t,r,i,n){n.cx=e+r/2,n.cy=t+i/2,n.width=r,n.height=i}},G8={};q(WEe,function(e,t){G8[t]=new e});var YEe=or.extend({type:"symbol",shape:{symbolType:"",x:0,y:0,width:0,height:0},calculateTextPosition:function(e,t,r){var i=L8(e,t,r),n=this.shape;return n&&n.symbolType==="pin"&&t.position==="inside"&&(i.y=r.y+r.height*.4),i},buildPath:function(e,t,r){var i=t.symbolType;if(i!=="none"){var n=G8[i];n||(i="rect",n=G8[i]),qEe[i](t.x,t.y,t.width,t.height,n.shape),n.buildPath(e,n.shape,r)}}});function XEe(e,t){if(this.type!=="image"){var r=this.style;this.__isEmptyBrush?(r.stroke=e,r.fill=t||"#fff",r.lineWidth=2):this.shape.symbolType==="line"?r.stroke=e:r.fill=e,this.markRedraw()}}function Sn(e,t,r,i,n,a,o){var s=e.indexOf("empty")===0;s&&(e=e.substr(5,1).toLowerCase()+e.substr(6));var l;return e.indexOf("image://")===0?l=Rle(e.slice(8),new qt(t,r,i,n),o?"center":"cover"):e.indexOf("path://")===0?l=wC(e.slice(7),{},new qt(t,r,i,n),o?"center":"cover"):l=new YEe({shape:{symbolType:e,x:t,y:r,width:i,height:n}}),l.__isEmptyBrush=s,l.setColor=XEe,a&&l.setColor(a),l}function Ry(e){return Ue(e)||(e=[+e,+e]),[e[0]||0,e[1]||0]}function em(e,t){if(e!=null)return Ue(e)||(e=[e,e]),[et(e[0],t[0])||0,et(Lt(e[1],e[0]),t[1])||0]}function Y0(e){return isFinite(e)}function ZEe(e,t,r){var i=t.x==null?0:t.x,n=t.x2==null?1:t.x2,a=t.y==null?0:t.y,o=t.y2==null?0:t.y2;t.global||(i=i*r.width+r.x,n=n*r.width+r.x,a=a*r.height+r.y,o=o*r.height+r.y),i=Y0(i)?i:0,n=Y0(n)?n:1,a=Y0(a)?a:0,o=Y0(o)?o:0;var s=e.createLinearGradient(i,a,n,o);return s}function QEe(e,t,r){var i=r.width,n=r.height,a=Math.min(i,n),o=t.x==null?.5:t.x,s=t.y==null?.5:t.y,l=t.r==null?.5:t.r;t.global||(o=o*i+r.x,s=s*n+r.y,l=l*a),o=Y0(o)?o:.5,s=Y0(s)?s:.5,l=l>=0&&Y0(l)?l:.5;var u=e.createRadialGradient(o,s,0,o,s,l);return u}function EL(e,t,r){for(var i=t.type==="radial"?QEe(e,t,r):ZEe(e,t,r),n=t.colorStops,a=0;a<n.length;a++)i.addColorStop(n[a].offset,n[a].color);return i}function KEe(e,t){if(e===t||!e&&!t)return!1;if(!e||!t||e.length!==t.length)return!0;for(var r=0;r<e.length;r++)if(e[r]!==t[r])return!0;return!1}function B3(e){return parseInt(e,10)}function Ug(e,t,r){var i=["width","height"][t],n=["clientWidth","clientHeight"][t],a=["paddingLeft","paddingTop"][t],o=["paddingRight","paddingBottom"][t];if(r[i]!=null&&r[i]!=="auto")return parseFloat(r[i]);var s=document.defaultView.getComputedStyle(e);return(e[n]||B3(s[i])||B3(e.style[i]))-(B3(s[a])||0)-(B3(s[o])||0)|0}function JEe(e,t){return!e||e==="solid"||!(t>0)?null:e==="dashed"?[4*t,2*t]:e==="dotted"?[t]:kr(e)?[e]:Ue(e)?e:null}function kN(e){var t=e.style,r=t.lineDash&&t.lineWidth>0&&JEe(t.lineDash,t.lineWidth),i=t.lineDashOffset;if(r){var n=t.strokeNoScale&&e.getLineScale?e.getLineScale():1;n&&n!==1&&(r=qe(r,function(a){return a/n}),i/=n)}return[r,i]}var $Ee=new $c(!0);function j8(e){var t=e.stroke;return!(t==null||t==="none"||!(e.lineWidth>0))}function aW(e){return typeof e=="string"&&e!=="none"}function W8(e){var t=e.fill;return t!=null&&t!=="none"}function oW(e,t){if(t.fillOpacity!=null&&t.fillOpacity!==1){var r=e.globalAlpha;e.globalAlpha=t.fillOpacity*t.opacity,e.fill(),e.globalAlpha=r}else e.fill()}function sW(e,t){if(t.strokeOpacity!=null&&t.strokeOpacity!==1){var r=e.globalAlpha;e.globalAlpha=t.strokeOpacity*t.opacity,e.stroke(),e.globalAlpha=r}else e.stroke()}function ML(e,t,r){var i=aN(t.image,t.__image,r);if(pC(i)){var n=e.createPattern(i,t.repeat||"repeat");if(typeof DOMMatrix=="function"&&n&&n.setTransform){var a=new DOMMatrix;a.translateSelf(t.x||0,t.y||0),a.rotateSelf(0,0,(t.rotation||0)*uA),a.scaleSelf(t.scaleX||1,t.scaleY||1),n.setTransform(a)}return n}}function eMe(e,t,r,i){var n,a=j8(r),o=W8(r),s=r.strokePercent,l=s<1,u=!t.path;(!t.silent||l)&&u&&t.createPathProxy();var c=t.path||$Ee,h=t.__dirty;if(!i){var d=r.fill,f=r.stroke,p=o&&!!d.colorStops,v=a&&!!f.colorStops,m=o&&!!d.image,g=a&&!!f.image,y=void 0,x=void 0,b=void 0,_=void 0,w=void 0;(p||v)&&(w=t.getBoundingRect()),p&&(y=h?EL(e,d,w):t.__canvasFillGradient,t.__canvasFillGradient=y),v&&(x=h?EL(e,f,w):t.__canvasStrokeGradient,t.__canvasStrokeGradient=x),m&&(b=h||!t.__canvasFillPattern?ML(e,d,t):t.__canvasFillPattern,t.__canvasFillPattern=b),g&&(_=h||!t.__canvasStrokePattern?ML(e,f,t):t.__canvasStrokePattern,t.__canvasStrokePattern=b),p?e.fillStyle=y:m&&(b?e.fillStyle=b:o=!1),v?e.strokeStyle=x:g&&(_?e.strokeStyle=_:a=!1)}var S=t.getGlobalScale();c.setScale(S[0],S[1],t.segmentIgnoreThreshold);var A,M;e.setLineDash&&r.lineDash&&(n=kN(t),A=n[0],M=n[1]);var E=!0;(u||h&Sg)&&(c.setDPR(e.dpr),l?c.setContext(null):(c.setContext(e),E=!1),c.reset(),t.buildPath(c,t.shape,i),c.toStatic(),t.pathUpdated()),E&&c.rebuildPath(e,l?s:1),A&&(e.setLineDash(A),e.lineDashOffset=M),i||(r.strokeFirst?(a&&sW(e,r),o&&oW(e,r)):(o&&oW(e,r),a&&sW(e,r))),A&&e.setLineDash([])}function tMe(e,t,r){var i=t.__image=aN(r.image,t.__image,t,t.onload);if(!(!i||!pC(i))){var n=r.x||0,a=r.y||0,o=t.getWidth(),s=t.getHeight(),l=i.width/i.height;if(o==null&&s!=null?o=s*l:s==null&&o!=null?s=o/l:o==null&&s==null&&(o=i.width,s=i.height),r.sWidth&&r.sHeight){var u=r.sx||0,c=r.sy||0;e.drawImage(i,u,c,r.sWidth,r.sHeight,n,a,o,s)}else if(r.sx&&r.sy){var u=r.sx,c=r.sy,h=o-u,d=s-c;e.drawImage(i,u,c,h,d,n,a,o,s)}else e.drawImage(i,n,a,o,s)}}function rMe(e,t,r){var i,n=r.text;if(n!=null&&(n+=""),n){e.font=r.font||cp,e.textAlign=r.textAlign,e.textBaseline=r.textBaseline;var a=void 0,o=void 0;e.setLineDash&&r.lineDash&&(i=kN(t),a=i[0],o=i[1]),a&&(e.setLineDash(a),e.lineDashOffset=o),r.strokeFirst?(j8(r)&&e.strokeText(n,r.x,r.y),W8(r)&&e.fillText(n,r.x,r.y)):(W8(r)&&e.fillText(n,r.x,r.y),j8(r)&&e.strokeText(n,r.x,r.y)),a&&e.setLineDash([])}}var lW=["shadowBlur","shadowOffsetX","shadowOffsetY"],uW=[["lineCap","butt"],["lineJoin","miter"],["miterLimit",10]];function Yue(e,t,r,i,n){var a=!1;if(!i&&(r=r||{},t===r))return!1;if(i||t.opacity!==r.opacity){ps(e,n),a=!0;var o=Math.max(Math.min(t.opacity,1),0);e.globalAlpha=isNaN(o)?vv.opacity:o}(i||t.blend!==r.blend)&&(a||(ps(e,n),a=!0),e.globalCompositeOperation=t.blend||vv.blend);for(var s=0;s<lW.length;s++){var l=lW[s];(i||t[l]!==r[l])&&(a||(ps(e,n),a=!0),e[l]=e.dpr*(t[l]||0))}return(i||t.shadowColor!==r.shadowColor)&&(a||(ps(e,n),a=!0),e.shadowColor=t.shadowColor||vv.shadowColor),a}function cW(e,t,r,i,n){var a=ow(t,n.inHover),o=i?null:r&&ow(r,n.inHover)||{};if(a===o)return!1;var s=Yue(e,a,o,i,n);if((i||a.fill!==o.fill)&&(s||(ps(e,n),s=!0),aW(a.fill)&&(e.fillStyle=a.fill)),(i||a.stroke!==o.stroke)&&(s||(ps(e,n),s=!0),aW(a.stroke)&&(e.strokeStyle=a.stroke)),(i||a.opacity!==o.opacity)&&(s||(ps(e,n),s=!0),e.globalAlpha=a.opacity==null?1:a.opacity),t.hasStroke()){var l=a.lineWidth,u=l/(a.strokeNoScale&&t.getLineScale?t.getLineScale():1);e.lineWidth!==u&&(s||(ps(e,n),s=!0),e.lineWidth=u)}for(var c=0;c<uW.length;c++){var h=uW[c],d=h[0];(i||a[d]!==o[d])&&(s||(ps(e,n),s=!0),e[d]=a[d]||h[1])}return s}function iMe(e,t,r,i,n){return Yue(e,ow(t,n.inHover),r&&ow(r,n.inHover),i,n)}function Xue(e,t){var r=t.transform,i=e.dpr||1;r?e.setTransform(i*r[0],i*r[1],i*r[2],i*r[3],i*r[4],i*r[5]):e.setTransform(i,0,0,i,0,0)}function nMe(e,t,r){for(var i=!1,n=0;n<e.length;n++){var a=e[n];i=i||a.isZeroArea(),Xue(t,a),t.beginPath(),a.buildPath(t,a.shape),t.clip()}r.allClipped=i}function aMe(e,t){return e&&t?e[0]!==t[0]||e[1]!==t[1]||e[2]!==t[2]||e[3]!==t[3]||e[4]!==t[4]||e[5]!==t[5]:!(!e&&!t)}var hW=1,dW=2,fW=3,pW=4;function oMe(e){var t=W8(e),r=j8(e);return!(e.lineDash||!(+t^+r)||t&&typeof e.fill!="string"||r&&typeof e.stroke!="string"||e.strokePercent<1||e.strokeOpacity<1||e.fillOpacity<1)}function ps(e,t){t.batchFill&&e.fill(),t.batchStroke&&e.stroke(),t.batchFill="",t.batchStroke=""}function ow(e,t){return t&&e.__hoverStyle||e.style}function Zue(e,t){X0(e,t,{inHover:!1,viewWidth:0,viewHeight:0},!0)}function X0(e,t,r,i){var n=t.transform;if(!t.shouldBePainted(r.viewWidth,r.viewHeight,!1,!1)){t.__dirty&=~Fs,t.__isRendered=!1;return}var a=t.__clipPaths,o=r.prevElClipPaths,s=!1,l=!1;if((!o||KEe(a,o))&&(o&&o.length&&(ps(e,r),e.restore(),l=s=!0,r.prevElClipPaths=null,r.allClipped=!1,r.prevEl=null),a&&a.length&&(ps(e,r),e.save(),nMe(a,e,r),s=!0),r.prevElClipPaths=a),r.allClipped){t.__isRendered=!1;return}t.beforeBrush&&t.beforeBrush(),t.innerBeforeBrush();var u=r.prevEl;u||(l=s=!0);var c=t instanceof or&&t.autoBatch&&oMe(t.style);s||aMe(n,u.transform)?(ps(e,r),Xue(e,t)):c||ps(e,r);var h=ow(t,r.inHover);t instanceof or?(r.lastDrawType!==hW&&(l=!0,r.lastDrawType=hW),cW(e,t,u,l,r),(!c||!r.batchFill&&!r.batchStroke)&&e.beginPath(),eMe(e,t,h,c),c&&(r.batchFill=h.fill||"",r.batchStroke=h.stroke||"")):t instanceof N1?(r.lastDrawType!==fW&&(l=!0,r.lastDrawType=fW),cW(e,t,u,l,r),rMe(e,t,h)):t instanceof Ta?(r.lastDrawType!==dW&&(l=!0,r.lastDrawType=dW),iMe(e,t,u,l,r),tMe(e,t,h)):t.getTemporalDisplayables&&(r.lastDrawType!==pW&&(l=!0,r.lastDrawType=pW),sMe(e,t,r)),c&&i&&ps(e,r),t.innerAfterBrush(),t.afterBrush&&t.afterBrush(),r.prevEl=t,t.__dirty=0,t.__isRendered=!0}function sMe(e,t,r){var i=t.getDisplayables(),n=t.getTemporalDisplayables();e.save();var a={prevElClipPaths:null,prevEl:null,allClipped:!1,viewWidth:r.viewWidth,viewHeight:r.viewHeight,inHover:r.inHover},o,s;for(o=t.getCursor(),s=i.length;o<s;o++){var l=i[o];l.beforeBrush&&l.beforeBrush(),l.innerBeforeBrush(),X0(e,l,a,o===s-1),l.innerAfterBrush(),l.afterBrush&&l.afterBrush(),a.prevEl=l}for(var u=0,c=n.length;u<c;u++){var l=n[u];l.beforeBrush&&l.beforeBrush(),l.innerBeforeBrush(),X0(e,l,a,u===c-1),l.innerAfterBrush(),l.afterBrush&&l.afterBrush(),a.prevEl=l}t.clearTemporalDisplayables(),t.notClear=!0,e.restore()}var uM=new zEe,vW=new s4(100),mW=["symbol","symbolSize","symbolKeepAspect","color","backgroundColor","dashArrayX","dashArrayY","maxTileWidth","maxTileHeight"];function z1(e,t){if(e==="none")return null;var r=t.getDevicePixelRatio(),i=t.getZr(),n=i.painter.type==="svg";e.dirty&&uM.delete(e);var a=uM.get(e);if(a)return a;var o=bt(e,{symbol:"rect",symbolSize:1,symbolKeepAspect:!0,color:"rgba(0, 0, 0, 0.2)",backgroundColor:null,dashArrayX:5,dashArrayY:5,rotation:0,maxTileWidth:512,maxTileHeight:512});o.backgroundColor==="none"&&(o.backgroundColor=null);var s={repeat:"repeat"};return l(s),s.rotation=o.rotation,s.scaleX=s.scaleY=n?1:1/r,uM.set(e,s),e.dirty=!1,s;function l(u){for(var c=[r],h=!0,d=0;d<mW.length;++d){var f=o[mW[d]];if(f!=null&&!Ue(f)&&!it(f)&&!kr(f)&&typeof f!="boolean"){h=!1;break}c.push(f)}var p;if(h){p=c.join(",")+(n?"-svg":"");var v=vW.get(p);v&&(n?u.svgElement=v:u.image=v)}var m=Kue(o.dashArrayX),g=lMe(o.dashArrayY),y=Que(o.symbol),x=uMe(m),b=Jue(g),_=!n&&hp.createCanvas(),w=n&&{tag:"g",attrs:{},key:"dcl",children:[]},S=M(),A;_&&(_.width=S.width*r,_.height=S.height*r,A=_.getContext("2d")),E(),h&&vW.put(p,_||w),u.image=_,u.svgElement=w,u.svgWidth=S.width,u.svgHeight=S.height;function M(){for(var T=1,L=0,P=x.length;L<P;++L)T=kG(T,x[L]);for(var C=1,L=0,P=y.length;L<P;++L)C=kG(C,y[L].length);T*=C;var D=b*x.length*y.length;return{width:Math.max(1,Math.min(T,o.maxTileWidth)),height:Math.max(1,Math.min(D,o.maxTileHeight))}}function E(){A&&(A.clearRect(0,0,_.width,_.height),o.backgroundColor&&(A.fillStyle=o.backgroundColor,A.fillRect(0,0,_.width,_.height)));for(var T=0,L=0;L<g.length;++L)T+=g[L];if(T<=0)return;for(var P=-b,C=0,D=0,I=0;P<S.height;){if(C%2===0){for(var O=D/2%y.length,R=0,H=0,j=0;R<S.width*2;){for(var N=0,L=0;L<m[I].length;++L)N+=m[I][L];if(N<=0)break;if(H%2===0){var k=(1-o.symbolSize)*.5,G=R+m[I][H]*k,Y=P+g[C]*k,F=m[I][H]*o.symbolSize,Z=g[C]*o.symbolSize,ne=j/2%y[O].length;re(G,Y,F,Z,y[O][ne])}R+=m[I][H],++j,++H,H===m[I].length&&(H=0)}++I,I===m.length&&(I=0)}P+=g[C],++D,++C,C===g.length&&(C=0)}function re(ae,he,se,fe,J){var te=n?1:r,le=Sn(J,ae*te,he*te,se*te,fe*te,o.color,o.symbolKeepAspect);if(n){var Ae=i.painter.renderOneToVNode(le);Ae&&w.children.push(Ae)}else Zue(A,le)}}}}function Que(e){if(!e||e.length===0)return[["rect"]];if(it(e))return[[e]];for(var t=!0,r=0;r<e.length;++r)if(!it(e[r])){t=!1;break}if(t)return Que([e]);for(var i=[],r=0;r<e.length;++r)it(e[r])?i.push([e[r]]):i.push(e[r]);return i}function Kue(e){if(!e||e.length===0)return[[0,0]];if(kr(e)){var t=Math.ceil(e);return[[t,t]]}for(var r=!0,i=0;i<e.length;++i)if(!kr(e[i])){r=!1;break}if(r)return Kue([e]);for(var n=[],i=0;i<e.length;++i)if(kr(e[i])){var t=Math.ceil(e[i]);n.push([t,t])}else{var t=qe(e[i],function(s){return Math.ceil(s)});t.length%2===1?n.push(t.concat(t)):n.push(t)}return n}function lMe(e){if(!e||typeof e=="object"&&e.length===0)return[0,0];if(kr(e)){var t=Math.ceil(e);return[t,t]}var r=qe(e,function(i){return Math.ceil(i)});return e.length%2?r.concat(r):r}function uMe(e){return qe(e,function(t){return Jue(t)})}function Jue(e){for(var t=0,r=0;r<e.length;++r)t+=e[r];return e.length%2===1?t*2:t}function cMe(e,t){e.eachRawSeries(function(r){if(!e.isSeriesFiltered(r)){var i=r.getData();i.hasItemVisual()&&i.each(function(o){var s=i.getItemVisual(o,"decal");if(s){var l=i.ensureUniqueItemVisual(o,"style");l.decal=z1(s,t)}});var n=i.getVisual("decal");if(n){var a=i.getVisual("style");a.decal=z1(n,t)}}})}var su=new Vl,$ue={};function hMe(e,t){$ue[e]=t}function dMe(e){return $ue[e]}var fMe=1,pMe=800,vMe=900,mMe=1e3,gMe=2e3,yMe=5e3,ece=1e3,xMe=1100,RN=2e3,tce=3e3,bMe=4e3,kC=4500,wMe=4600,_Me=5e3,AMe=6e3,rce=7e3,SMe={PROCESSOR:{FILTER:mMe,SERIES_FILTER:pMe,STATISTIC:yMe},VISUAL:{LAYOUT:ece,PROGRESSIVE_LAYOUT:xMe,GLOBAL:RN,CHART:tce,POST_CHART_LAYOUT:wMe,COMPONENT:bMe,BRUSH:_Me,CHART_ITEM:kC,ARIA:AMe,DECAL:rce}},eo="__flagInMainProcess",is="__pendingUpdate",cM="__needsUpdateStatus",gW=/^[a-zA-Z0-9_]+$/,hM="__connectUpdateStatus",yW=0,CMe=1,EMe=2;function ice(e){return function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];if(this.isDisposed()){this.id;return}return ace(this,e,t)}}function nce(e){return function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];return ace(this,e,t)}}function ace(e,t,r){return r[0]=r[0]&&r[0].toLowerCase(),Vl.prototype[t].apply(e,r)}var oce=function(e){_e(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t}(Vl),sce=oce.prototype;sce.on=nce("on");sce.off=nce("off");var Pm,dM,N3,Xd,fM,pM,vM,C2,E2,xW,bW,mM,wW,V3,_W,lce,Js,AW,uce=function(e){_e(t,e);function t(r,i,n){var a=e.call(this,new REe)||this;a._chartsViews=[],a._chartsMap={},a._componentsViews=[],a._componentsMap={},a._pendingActions=[],n=n||{},it(i)&&(i=cce[i]),a._dom=r;var o="canvas",s="auto",l=!1;n.ssr&&_Se(function(d){var f=Dt(d),p=f.dataIndex;if(p!=null){var v=dt();return v.set("series_index",f.seriesIndex),v.set("data_index",p),f.ssrType&&v.set("ssr_type",f.ssrType),v}});var u=a._zr=PG(r,{renderer:n.renderer||o,devicePixelRatio:n.devicePixelRatio,width:n.width,height:n.height,ssr:n.ssr,useDirtyRect:Lt(n.useDirtyRect,l),useCoarsePointer:Lt(n.useCoarsePointer,s),pointerSize:n.pointerSize});a._ssr=n.ssr,a._throttledZrFlush=IN(at(u.flush,u),17),i=At(i),i&&vue(i,!0),a._theme=i,a._locale=qCe(n.locale||jle),a._coordSysMgr=new v4;var c=a._api=_W(a);function h(d,f){return d.__prio-f.__prio}return dA(Y8,h),dA(TL,h),a._scheduler=new zue(a,c,TL,Y8),a._messageCenter=new oce,a._initEvents(),a.resize=at(a.resize,a),u.animation.on("frame",a._onframe,a),xW(u,a),bW(u,a),A8(a),a}return t.prototype._onframe=function(){if(!this._disposed){AW(this);var r=this._scheduler;if(this[is]){var i=this[is].silent;this[eo]=!0;try{Pm(this),Xd.update.call(this,null,this[is].updateParams)}catch(l){throw this[eo]=!1,this[is]=null,l}this._zr.flush(),this[eo]=!1,this[is]=null,C2.call(this,i),E2.call(this,i)}else if(r.unfinished){var n=fMe,a=this._model,o=this._api;r.unfinished=!1;do{var s=+new Date;r.performSeriesTasks(a),r.performDataProcessorTasks(a),pM(this,a),r.performVisualTasks(a),V3(this,this._model,o,"remain",{}),n-=+new Date-s}while(n>0&&r.unfinished);r.unfinished||this._zr.flush()}}},t.prototype.getDom=function(){return this._dom},t.prototype.getId=function(){return this.id},t.prototype.getZr=function(){return this._zr},t.prototype.isSSR=function(){return this._ssr},t.prototype.setOption=function(r,i,n){if(!this[eo]){if(this._disposed){this.id;return}var a,o,s;if(_t(i)&&(n=i.lazyUpdate,a=i.silent,o=i.replaceMerge,s=i.transition,i=i.notMerge),this[eo]=!0,!this._model||i){var l=new g7e(this._api),u=this._theme,c=this._model=new EN;c.scheduler=this._scheduler,c.ssr=this._ssr,c.init(null,null,null,u,this._locale,l)}this._model.setOption(r,{replaceMerge:o},PL);var h={seriesTransition:s,optionChanged:!0};if(n)this[is]={silent:a,updateParams:h},this[eo]=!1,this.getZr().wakeUp();else{try{Pm(this),Xd.update.call(this,null,h)}catch(d){throw this[is]=null,this[eo]=!1,d}this._ssr||this._zr.flush(),this[is]=null,this[eo]=!1,C2.call(this,a),E2.call(this,a)}}},t.prototype.setTheme=function(){},t.prototype.getModel=function(){return this._model},t.prototype.getOption=function(){return this._model&&this._model.getOption()},t.prototype.getWidth=function(){return this._zr.getWidth()},t.prototype.getHeight=function(){return this._zr.getHeight()},t.prototype.getDevicePixelRatio=function(){return this._zr.painter.dpr||hr.hasGlobalWindow&&window.devicePixelRatio||1},t.prototype.getRenderedCanvas=function(r){return this.renderToCanvas(r)},t.prototype.renderToCanvas=function(r){r=r||{};var i=this._zr.painter;return i.getRenderedCanvas({backgroundColor:r.backgroundColor||this._model.get("backgroundColor"),pixelRatio:r.pixelRatio||this.getDevicePixelRatio()})},t.prototype.renderToSVGString=function(r){r=r||{};var i=this._zr.painter;return i.renderToString({useViewBox:r.useViewBox})},t.prototype.getSvgDataURL=function(){if(hr.svgSupported){var r=this._zr,i=r.storage.getDisplayList();return q(i,function(n){n.stopAnimation(null,!0)}),r.painter.toDataURL()}},t.prototype.getDataURL=function(r){if(this._disposed){this.id;return}r=r||{};var i=r.excludeComponents,n=this._model,a=[],o=this;q(i,function(l){n.eachComponent({mainType:l},function(u){var c=o._componentsMap[u.__viewId];c.group.ignore||(a.push(c),c.group.ignore=!0)})});var s=this._zr.painter.getType()==="svg"?this.getSvgDataURL():this.renderToCanvas(r).toDataURL("image/"+(r&&r.type||"png"));return q(a,function(l){l.group.ignore=!1}),s},t.prototype.getConnectedDataURL=function(r){if(this._disposed){this.id;return}var i=r.type==="svg",n=this.group,a=Math.min,o=Math.max,s=1/0;if(SW[n]){var l=s,u=s,c=-s,h=-s,d=[],f=r&&r.pixelRatio||this.getDevicePixelRatio();q(vb,function(x,b){if(x.group===n){var _=i?x.getZr().painter.getSvgDom().innerHTML:x.renderToCanvas(At(r)),w=x.getDom().getBoundingClientRect();l=a(w.left,l),u=a(w.top,u),c=o(w.right,c),h=o(w.bottom,h),d.push({dom:_,left:w.left,top:w.top})}}),l*=f,u*=f,c*=f,h*=f;var p=c-l,v=h-u,m=hp.createCanvas(),g=PG(m,{renderer:i?"svg":"canvas"});if(g.resize({width:p,height:v}),i){var y="";return q(d,function(x){var b=x.left-l,_=x.top-u;y+='<g transform="translate('+b+","+_+')">'+x.dom+"</g>"}),g.painter.getSvgRoot().innerHTML=y,r.connectedBackgroundColor&&g.painter.setBackgroundColor(r.connectedBackgroundColor),g.refreshImmediately(),g.painter.toDataURL()}else return r.connectedBackgroundColor&&g.add(new Tr({shape:{x:0,y:0,width:p,height:v},style:{fill:r.connectedBackgroundColor}})),q(d,function(x){var b=new Ta({style:{x:x.left*f-l,y:x.top*f-u,image:x.dom}});g.add(b)}),g.refreshImmediately(),m.toDataURL("image/"+(r&&r.type||"png"))}else return this.getDataURL(r)},t.prototype.convertToPixel=function(r,i){return fM(this,"convertToPixel",r,i)},t.prototype.convertFromPixel=function(r,i){return fM(this,"convertFromPixel",r,i)},t.prototype.containPixel=function(r,i){if(this._disposed){this.id;return}var n=this._model,a,o=lb(n,r);return q(o,function(s,l){l.indexOf("Models")>=0&&q(s,function(u){var c=u.coordinateSystem;if(c&&c.containPoint)a=a||!!c.containPoint(i);else if(l==="seriesModels"){var h=this._chartsMap[u.__viewId];h&&h.containPoint&&(a=a||h.containPoint(i,u))}},this)},this),!!a},t.prototype.getVisual=function(r,i){var n=this._model,a=lb(n,r,{defaultMainType:"series"}),o=a.seriesModel,s=o.getData(),l=a.hasOwnProperty("dataIndexInside")?a.dataIndexInside:a.hasOwnProperty("dataIndex")?s.indexOfRawIndex(a.dataIndex):null;return l!=null?LN(s,l,i):m4(s,i)},t.prototype.getViewOfComponentModel=function(r){return this._componentsMap[r.__viewId]},t.prototype.getViewOfSeriesModel=function(r){return this._chartsMap[r.__viewId]},t.prototype._initEvents=function(){var r=this;q(MMe,function(i){var n=function(a){var o=r.getModel(),s=a.target,l,u=i==="globalout";if(u?l={}:s&&q0(s,function(p){var v=Dt(p);if(v&&v.dataIndex!=null){var m=v.dataModel||o.getSeriesByIndex(v.seriesIndex);return l=m&&m.getDataParams(v.dataIndex,v.dataType,s)||{},!0}else if(v.eventData)return l=Be({},v.eventData),!0},!0),l){var c=l.componentType,h=l.componentIndex;(c==="markLine"||c==="markPoint"||c==="markArea")&&(c="series",h=l.seriesIndex);var d=c&&h!=null&&o.getComponent(c,h),f=d&&r[d.mainType==="series"?"_chartsMap":"_componentsMap"][d.__viewId];l.event=a,l.type=i,r._$eventProcessor.eventInfo={targetEl:s,packedEvent:l,model:d,view:f},r.trigger(i,l)}};n.zrEventfulCallAtLast=!0,r._zr.on(i,n,r)}),q(pb,function(i,n){r._messageCenter.on(n,function(a){this.trigger(n,a)},r)}),q(["selectchanged"],function(i){r._messageCenter.on(i,function(n){this.trigger(i,n)},r)}),NEe(this._messageCenter,this,this._api)},t.prototype.isDisposed=function(){return this._disposed},t.prototype.clear=function(){if(this._disposed){this.id;return}this.setOption({series:[]},!0)},t.prototype.dispose=function(){if(this._disposed){this.id;return}this._disposed=!0;var r=this.getDom();r&&rle(this.getDom(),BN,"");var i=this,n=i._api,a=i._model;q(i._componentsViews,function(o){o.dispose(a,n)}),q(i._chartsViews,function(o){o.dispose(a,n)}),i._zr.dispose(),i._dom=i._model=i._chartsMap=i._componentsMap=i._chartsViews=i._componentsViews=i._scheduler=i._api=i._zr=i._throttledZrFlush=i._theme=i._coordSysMgr=i._messageCenter=null,delete vb[i.id]},t.prototype.resize=function(r){if(!this[eo]){if(this._disposed){this.id;return}this._zr.resize(r);var i=this._model;if(this._loadingFX&&this._loadingFX.resize(),!!i){var n=i.resetOption("media"),a=r&&r.silent;this[is]&&(a==null&&(a=this[is].silent),n=!0,this[is]=null),this[eo]=!0;try{n&&Pm(this),Xd.update.call(this,{type:"resize",animation:Be({duration:0},r&&r.animation)})}catch(o){throw this[eo]=!1,o}this[eo]=!1,C2.call(this,a),E2.call(this,a)}}},t.prototype.showLoading=function(r,i){if(this._disposed){this.id;return}if(_t(r)&&(i=r,r=""),r=r||"default",this.hideLoading(),!!DL[r]){var n=DL[r](this._api,i),a=this._zr;this._loadingFX=n,a.add(n)}},t.prototype.hideLoading=function(){if(this._disposed){this.id;return}this._loadingFX&&this._zr.remove(this._loadingFX),this._loadingFX=null},t.prototype.makeActionFromEvent=function(r){var i=Be({},r);return i.type=pb[r.type],i},t.prototype.dispatchAction=function(r,i){if(this._disposed){this.id;return}if(_t(i)||(i={silent:!!i}),!!q8[r.type]&&this._model){if(this[eo]){this._pendingActions.push(r);return}var n=i.silent;vM.call(this,r,n);var a=i.flush;a?this._zr.flush():a!==!1&&hr.browser.weChat&&this._throttledZrFlush(),C2.call(this,n),E2.call(this,n)}},t.prototype.updateLabelLayout=function(){su.trigger("series:layoutlabels",this._model,this._api,{updatedSeries:[]})},t.prototype.appendData=function(r){if(this._disposed){this.id;return}var i=r.seriesIndex,n=this.getModel(),a=n.getSeriesByIndex(i);a.appendData(r),this._scheduler.unfinished=!0,this.getZr().wakeUp()},t.internalField=function(){Pm=function(h){var d=h._scheduler;d.restorePipelines(h._model),d.prepareStageTasks(),dM(h,!0),dM(h,!1),d.plan()},dM=function(h,d){for(var f=h._model,p=h._scheduler,v=d?h._componentsViews:h._chartsViews,m=d?h._componentsMap:h._chartsMap,g=h._zr,y=h._api,x=0;x<v.length;x++)v[x].__alive=!1;d?f.eachComponent(function(w,S){w!=="series"&&b(S)}):f.eachSeries(b);function b(w){var S=w.__requireNewView;w.__requireNewView=!1;var A="_ec_"+w.id+"_"+w.type,M=!S&&m[A];if(!M){var E=Dc(w.type),T=d?Gi.getClass(E.main,E.sub):yi.getClass(E.sub);M=new T,M.init(f,y),m[A]=M,v.push(M),g.add(M.group)}w.__viewId=M.__id=A,M.__alive=!0,M.__model=w,M.group.__ecComponentInfo={mainType:w.mainType,index:w.componentIndex},!d&&p.prepareView(M,w,f,y)}for(var x=0;x<v.length;){var _=v[x];_.__alive?x++:(!d&&_.renderTask.dispose(),g.remove(_.group),_.dispose(f,y),v.splice(x,1),m[_.__id]===_&&delete m[_.__id],_.__id=_.group.__ecComponentInfo=null)}},N3=function(h,d,f,p,v){var m=h._model;if(m.setUpdatePayload(f),!p){q([].concat(h._componentsViews).concat(h._chartsViews),_);return}var g={};g[p+"Id"]=f[p+"Id"],g[p+"Index"]=f[p+"Index"],g[p+"Name"]=f[p+"Name"];var y={mainType:p,query:g};v&&(y.subType=v);var x=f.excludeSeriesId,b;x!=null&&(b=dt(),q(ci(x),function(w){var S=Rn(w,null);S!=null&&b.set(S,!0)})),m&&m.eachComponent(y,function(w){var S=b&&b.get(w.id)!=null;if(!S)if(aj(f))if(w instanceof Di)f.type===mv&&!f.notBlur&&!w.get(["emphasis","disabled"])&&W6e(w,f,h._api);else{var A=hN(w.mainType,w.componentIndex,f.name,h._api),M=A.focusSelf,E=A.dispatchers;f.type===mv&&M&&!f.notBlur&&cL(w.mainType,w.componentIndex,h._api),E&&q(E,function(T){f.type===mv?md(T):gd(T)})}else dL(f)&&w instanceof Di&&(X6e(w,f,h._api),ij(w),Js(h))},h),m&&m.eachComponent(y,function(w){var S=b&&b.get(w.id)!=null;S||_(h[p==="series"?"_chartsMap":"_componentsMap"][w.__viewId])},h);function _(w){w&&w.__alive&&w[d]&&w[d](w.__model,m,h._api,f)}},Xd={prepareAndUpdate:function(h){Pm(this),Xd.update.call(this,h,{optionChanged:h.newOption!=null})},update:function(h,d){var f=this._model,p=this._api,v=this._zr,m=this._coordSysMgr,g=this._scheduler;if(f){f.setUpdatePayload(h),g.restoreData(f,h),g.performSeriesTasks(f),m.create(f,p),g.performDataProcessorTasks(f,h),pM(this,f),m.update(f,p),r(f),g.performVisualTasks(f,h),mM(this,f,p,h,d);var y=f.get("backgroundColor")||"transparent",x=f.get("darkMode");v.setBackgroundColor(y),x!=null&&x!=="auto"&&v.setDarkMode(x),su.trigger("afterupdate",f,p)}},updateTransform:function(h){var d=this,f=this._model,p=this._api;if(f){f.setUpdatePayload(h);var v=[];f.eachComponent(function(g,y){if(g!=="series"){var x=d.getViewOfComponentModel(y);if(x&&x.__alive)if(x.updateTransform){var b=x.updateTransform(y,f,p,h);b&&b.update&&v.push(x)}else v.push(x)}});var m=dt();f.eachSeries(function(g){var y=d._chartsMap[g.__viewId];if(y.updateTransform){var x=y.updateTransform(g,f,p,h);x&&x.update&&m.set(g.uid,1)}else m.set(g.uid,1)}),r(f),this._scheduler.performVisualTasks(f,h,{setDirty:!0,dirtyMap:m}),V3(this,f,p,h,{},m),su.trigger("afterupdate",f,p)}},updateView:function(h){var d=this._model;d&&(d.setUpdatePayload(h),yi.markUpdateMethod(h,"updateView"),r(d),this._scheduler.performVisualTasks(d,h,{setDirty:!0}),mM(this,d,this._api,h,{}),su.trigger("afterupdate",d,this._api))},updateVisual:function(h){var d=this,f=this._model;f&&(f.setUpdatePayload(h),f.eachSeries(function(p){p.getData().clearAllVisual()}),yi.markUpdateMethod(h,"updateVisual"),r(f),this._scheduler.performVisualTasks(f,h,{visualType:"visual",setDirty:!0}),f.eachComponent(function(p,v){if(p!=="series"){var m=d.getViewOfComponentModel(v);m&&m.__alive&&m.updateVisual(v,f,d._api,h)}}),f.eachSeries(function(p){var v=d._chartsMap[p.__viewId];v.updateVisual(p,f,d._api,h)}),su.trigger("afterupdate",f,this._api))},updateLayout:function(h){Xd.update.call(this,h)}},fM=function(h,d,f,p){if(h._disposed){h.id;return}for(var v=h._model,m=h._coordSysMgr.getCoordinateSystems(),g,y=lb(v,f),x=0;x<m.length;x++){var b=m[x];if(b[d]&&(g=b[d](v,y,p))!=null)return g}},pM=function(h,d){var f=h._chartsMap,p=h._scheduler;d.eachSeries(function(v){p.updateStreamModes(v,f[v.__viewId])})},vM=function(h,d){var f=this,p=this.getModel(),v=h.type,m=h.escapeConnect,g=q8[v],y=g.actionInfo,x=(y.update||"update").split(":"),b=x.pop(),_=x[0]!=null&&Dc(x[0]);this[eo]=!0;var w=[h],S=!1;h.batch&&(S=!0,w=qe(h.batch,function(C){return C=bt(Be({},C),h),C.batch=null,C}));var A=[],M,E=dL(h),T=aj(h);if(T&&Ale(this._api),q(w,function(C){if(M=g.action(C,f._model,f._api),M=M||Be({},C),M.type=y.event||M.type,A.push(M),T){var D=iN(h),I=D.queryOptionMap,O=D.mainTypeSpecified,R=O?I.keys()[0]:"series";N3(f,b,C,R),Js(f)}else E?(N3(f,b,C,"series"),Js(f)):_&&N3(f,b,C,_.main,_.sub)}),b!=="none"&&!T&&!E&&!_)try{this[is]?(Pm(this),Xd.update.call(this,h),this[is]=null):Xd[b].call(this,h)}catch(C){throw this[eo]=!1,C}if(S?M={type:y.event||v,escapeConnect:m,batch:A}:M=A[0],this[eo]=!1,!d){var L=this._messageCenter;if(L.trigger(M.type,M),E){var P={type:"selectchanged",escapeConnect:m,selected:Z6e(p),isFromClick:h.isFromClick||!1,fromAction:h.type,fromActionPayload:h};L.trigger(P.type,P)}}},C2=function(h){for(var d=this._pendingActions;d.length;){var f=d.shift();vM.call(this,f,h)}},E2=function(h){!h&&this.trigger("updated")},xW=function(h,d){h.on("rendered",function(f){d.trigger("rendered",f),h.animation.isFinished()&&!d[is]&&!d._scheduler.unfinished&&!d._pendingActions.length&&d.trigger("finished")})},bW=function(h,d){h.on("mouseover",function(f){var p=f.target,v=q0(p,$b);v&&(q6e(v,f,d._api),Js(d))}).on("mouseout",function(f){var p=f.target,v=q0(p,$b);v&&(Y6e(v,f,d._api),Js(d))}).on("click",function(f){var p=f.target,v=q0(p,function(y){return Dt(y).dataIndex!=null},!0);if(v){var m=v.selected?"unselect":"select",g=Dt(v);d._api.dispatchAction({type:m,dataType:g.dataType,dataIndexInside:g.dataIndex,seriesIndex:g.seriesIndex,isFromClick:!0})}})};function r(h){h.clearColorPalette(),h.eachSeries(function(d){d.clearColorPalette()})}function i(h){var d=[],f=[],p=!1;if(h.eachComponent(function(y,x){var b=x.get("zlevel")||0,_=x.get("z")||0,w=x.getZLevelKey();p=p||!!w,(y==="series"?f:d).push({zlevel:b,z:_,idx:x.componentIndex,type:y,key:w})}),p){var v=d.concat(f),m,g;dA(v,function(y,x){return y.zlevel===x.zlevel?y.z-x.z:y.zlevel-x.zlevel}),q(v,function(y){var x=h.getComponent(y.type,y.idx),b=y.zlevel,_=y.key;m!=null&&(b=Math.max(m,b)),_?(b===m&&_!==g&&b++,g=_):g&&(b===m&&b++,g=""),m=b,x.setZLevel(b)})}}mM=function(h,d,f,p,v){i(d),wW(h,d,f,p,v),q(h._chartsViews,function(m){m.__alive=!1}),V3(h,d,f,p,v),q(h._chartsViews,function(m){m.__alive||m.remove(d,f)})},wW=function(h,d,f,p,v,m){q(m||h._componentsViews,function(g){var y=g.__model;u(y,g),g.render(y,d,f,p),s(y,g),c(y,g)})},V3=function(h,d,f,p,v,m){var g=h._scheduler;v=Be(v||{},{updatedSeries:d.getSeries()}),su.trigger("series:beforeupdate",d,f,v);var y=!1;d.eachSeries(function(x){var b=h._chartsMap[x.__viewId];b.__alive=!0;var _=b.renderTask;g.updatePayload(_,p),u(x,b),m&&m.get(x.uid)&&_.dirty(),_.perform(g.getPerformArgs(_))&&(y=!0),b.group.silent=!!x.get("silent"),o(x,b),ij(x)}),g.unfinished=y||g.unfinished,su.trigger("series:layoutlabels",d,f,v),su.trigger("series:transition",d,f,v),d.eachSeries(function(x){var b=h._chartsMap[x.__viewId];s(x,b),c(x,b)}),a(h,d),su.trigger("series:afterupdate",d,f,v)},Js=function(h){h[cM]=!0,h.getZr().wakeUp()},AW=function(h){h[cM]&&(h.getZr().storage.traverse(function(d){u1(d)||n(d)}),h[cM]=!1)};function n(h){for(var d=[],f=h.currentStates,p=0;p<f.length;p++){var v=f[p];v==="emphasis"||v==="blur"||v==="select"||d.push(v)}h.selected&&h.states.select&&d.push("select"),h.hoverState===gC&&h.states.emphasis?d.push("emphasis"):h.hoverState===c4&&h.states.blur&&d.push("blur"),h.useStates(d)}function a(h,d){var f=h._zr,p=f.storage,v=0;p.traverse(function(m){m.isGroup||v++}),v>d.get("hoverLayerThreshold")&&!hr.node&&!hr.worker&&d.eachSeries(function(m){if(!m.preventUsingHoverLayer){var g=h._chartsMap[m.__viewId];g.__alive&&g.eachRendered(function(y){y.states.emphasis&&(y.states.emphasis.hoverLayer=!0)})}})}function o(h,d){var f=h.get("blendMode")||null;d.eachRendered(function(p){p.isGroup||(p.style.blend=f)})}function s(h,d){if(!h.preventAutoZ){var f=h.get("z")||0,p=h.get("zlevel")||0;d.eachRendered(function(v){return l(v,f,p,-1/0),!0})}}function l(h,d,f,p){var v=h.getTextContent(),m=h.getTextGuideLine(),g=h.isGroup;if(g)for(var y=h.childrenRef(),x=0;x<y.length;x++)p=Math.max(l(y[x],d,f,p),p);else h.z=d,h.zlevel=f,p=Math.max(h.z2,p);if(v&&(v.z=d,v.zlevel=f,isFinite(p)&&(v.z2=p+2)),m){var b=h.textGuideLineConfig;m.z=d,m.zlevel=f,isFinite(p)&&(m.z2=p+(b&&b.showAbove?1:-1))}return p}function u(h,d){d.eachRendered(function(f){if(!u1(f)){var p=f.getTextContent(),v=f.getTextGuideLine();f.stateTransition&&(f.stateTransition=null),p&&p.stateTransition&&(p.stateTransition=null),v&&v.stateTransition&&(v.stateTransition=null),f.hasState()?(f.prevStates=f.currentStates,f.clearStates()):f.prevStates&&(f.prevStates=null)}})}function c(h,d){var f=h.getModel("stateAnimation"),p=h.isAnimationEnabled(),v=f.get("duration"),m=v>0?{duration:v,delay:f.get("delay"),easing:f.get("easing")}:null;d.eachRendered(function(g){if(g.states&&g.states.emphasis){if(u1(g))return;if(g instanceof or&&eCe(g),g.__dirty){var y=g.prevStates;y&&g.useStates(y)}if(p){g.stateTransition=m;var x=g.getTextContent(),b=g.getTextGuideLine();x&&(x.stateTransition=m),b&&(b.stateTransition=m)}g.__dirty&&n(g)}})}_W=function(h){return new(function(d){_e(f,d);function f(){return d!==null&&d.apply(this,arguments)||this}return f.prototype.getCoordinateSystems=function(){return h._coordSysMgr.getCoordinateSystems()},f.prototype.getComponentByElement=function(p){for(;p;){var v=p.__ecComponentInfo;if(v!=null)return h._model.getComponent(v.mainType,v.index);p=p.parent}},f.prototype.enterEmphasis=function(p,v){md(p,v),Js(h)},f.prototype.leaveEmphasis=function(p,v){gd(p,v),Js(h)},f.prototype.enterBlur=function(p){xle(p),Js(h)},f.prototype.leaveBlur=function(p){cN(p),Js(h)},f.prototype.enterSelect=function(p){ble(p),Js(h)},f.prototype.leaveSelect=function(p){wle(p),Js(h)},f.prototype.getModel=function(){return h.getModel()},f.prototype.getViewOfComponentModel=function(p){return h.getViewOfComponentModel(p)},f.prototype.getViewOfSeriesModel=function(p){return h.getViewOfSeriesModel(p)},f}(fue))(h)},lce=function(h){function d(f,p){for(var v=0;v<f.length;v++){var m=f[v];m[hM]=p}}q(pb,function(f,p){h._messageCenter.on(p,function(v){if(SW[h.group]&&h[hM]!==yW){if(v&&v.escapeConnect)return;var m=h.makeActionFromEvent(v),g=[];q(vb,function(y){y!==h&&y.group===h.group&&g.push(y)}),d(g,yW),q(g,function(y){y[hM]!==CMe&&y.dispatchAction(m)}),d(g,EMe)}})})}}(),t}(Vl),ON=uce.prototype;ON.on=ice("on");ON.off=ice("off");ON.one=function(e,t,r){var i=this;function n(){for(var a=[],o=0;o<arguments.length;o++)a[o]=arguments[o];t&&t.apply&&t.apply(this,a),i.off(e,n)}this.on.call(this,e,n,r)};var MMe=["click","dblclick","mouseover","mouseout","mousemove","mousedown","mouseup","globalout","contextmenu"];var q8={},pb={},TL=[],PL=[],Y8=[],cce={},DL={},vb={},SW={},TMe=+new Date-0,BN="_echarts_instance_";function Dm(e,t,r){{var i=PMe(e);if(i)return i}var n=new uce(e,t,r);return n.id="ec_"+TMe++,vb[n.id]=n,rle(e,BN,n.id),lce(n),su.trigger("afterinit",n),n}function PMe(e){return vb[USe(e,BN)]}function hce(e,t){cce[e]=t}function dce(e){tr(PL,e)<0&&PL.push(e)}function fce(e,t){VN(TL,e,t,gMe)}function DMe(e){NN("afterinit",e)}function IMe(e){NN("afterupdate",e)}function NN(e,t){su.on(e,t)}function uh(e,t,r){xt(t)&&(r=t,t="");var i=_t(e)?e.type:[e,e={event:t}][0];e.event=(e.event||i).toLowerCase(),t=e.event,!pb[t]&&(Yo(gW.test(i)&&gW.test(t)),q8[i]||(q8[i]={action:r,actionInfo:e}),pb[t]=i)}function LMe(e,t){v4.register(e,t)}function kMe(e,t){VN(Y8,e,t,ece,"layout")}function tm(e,t){VN(Y8,e,t,tce,"visual")}var CW=[];function VN(e,t,r,i,n){if((xt(t)||_t(t))&&(r=t,t=i),!(tr(CW,r)>=0)){CW.push(r);var a=zue.wrapStageHandler(r,n);a.__prio=t,a.__raw=r,e.push(a)}}function pce(e,t){DL[e]=t}function vce(e,t,r){var i=dMe("registerMap");i&&i(e,t,r)}var RMe=Z7e;tm(RN,bEe);tm(kC,wEe);tm(kC,_Ee);tm(RN,OEe);tm(kC,BEe);tm(rce,cMe);dce(vue);fce(vMe,P7e);pce("default",AEe);uh({type:mv,event:mv,update:mv},pn);uh({type:gA,event:gA,update:gA},pn);uh({type:ub,event:ub,update:ub},pn);uh({type:yA,event:yA,update:yA},pn);uh({type:cb,event:cb,update:cb},pn);hce("light",kEe);hce("dark",jue);var EW=[],OMe={registerPreprocessor:dce,registerProcessor:fce,registerPostInit:DMe,registerPostUpdate:IMe,registerUpdateLifecycle:NN,registerAction:uh,registerCoordinateSystem:LMe,registerLayout:kMe,registerVisual:tm,registerTransform:RMe,registerLoading:pce,registerMap:vce,registerImpl:hMe,PRIORITY:SMe,ComponentModel:vr,ComponentView:Gi,SeriesModel:Di,ChartView:yi,registerComponentModel:function(e){vr.registerClass(e)},registerComponentView:function(e){Gi.registerClass(e)},registerSeriesModel:function(e){Di.registerClass(e)},registerChartView:function(e){yi.registerClass(e)},registerSubTypeDefaulter:function(e,t){vr.registerSubTypeDefaulter(e,t)},registerPainter:function(e,t){bSe(e,t)}};function ir(e){if(Ue(e)){q(e,function(t){ir(t)});return}tr(EW,e)>=0||(EW.push(e),xt(e)&&(e={install:e}),e.install(OMe))}function M2(e){return e==null?0:e.length||1}function MW(e){return e}var yd=function(){function e(t,r,i,n,a,o){this._old=t,this._new=r,this._oldKeyGetter=i||MW,this._newKeyGetter=n||MW,this.context=a,this._diffModeMultiple=o==="multiple"}return e.prototype.add=function(t){return this._add=t,this},e.prototype.update=function(t){return this._update=t,this},e.prototype.updateManyToOne=function(t){return this._updateManyToOne=t,this},e.prototype.updateOneToMany=function(t){return this._updateOneToMany=t,this},e.prototype.updateManyToMany=function(t){return this._updateManyToMany=t,this},e.prototype.remove=function(t){return this._remove=t,this},e.prototype.execute=function(){this[this._diffModeMultiple?"_executeMultiple":"_executeOneToOne"]()},e.prototype._executeOneToOne=function(){var t=this._old,r=this._new,i={},n=new Array(t.length),a=new Array(r.length);this._initIndexMap(t,null,n,"_oldKeyGetter"),this._initIndexMap(r,i,a,"_newKeyGetter");for(var o=0;o<t.length;o++){var s=n[o],l=i[s],u=M2(l);if(u>1){var c=l.shift();l.length===1&&(i[s]=l[0]),this._update&&this._update(c,o)}else u===1?(i[s]=null,this._update&&this._update(l,o)):this._remove&&this._remove(o)}this._performRestAdd(a,i)},e.prototype._executeMultiple=function(){var t=this._old,r=this._new,i={},n={},a=[],o=[];this._initIndexMap(t,i,a,"_oldKeyGetter"),this._initIndexMap(r,n,o,"_newKeyGetter");for(var s=0;s<a.length;s++){var l=a[s],u=i[l],c=n[l],h=M2(u),d=M2(c);if(h>1&&d===1)this._updateManyToOne&&this._updateManyToOne(c,u),n[l]=null;else if(h===1&&d>1)this._updateOneToMany&&this._updateOneToMany(c,u),n[l]=null;else if(h===1&&d===1)this._update&&this._update(c,u),n[l]=null;else if(h>1&&d>1)this._updateManyToMany&&this._updateManyToMany(c,u),n[l]=null;else if(h>1)for(var f=0;f<h;f++)this._remove&&this._remove(u[f]);else this._remove&&this._remove(u)}this._performRestAdd(o,n)},e.prototype._performRestAdd=function(t,r){for(var i=0;i<t.length;i++){var n=t[i],a=r[n],o=M2(a);if(o>1)for(var s=0;s<o;s++)this._add&&this._add(a[s]);else o===1&&this._add&&this._add(a);r[n]=null}},e.prototype._initIndexMap=function(t,r,i,n){for(var a=this._diffModeMultiple,o=0;o<t.length;o++){var s="_ec_"+this[n](t[o],o);if(a||(i[o]=s),!!r){var l=r[s],u=M2(l);u===0?(r[s]=o,a&&i.push(s)):u===1?r[s]=[l,o]:l.push(o)}}},e}(),BMe=function(){function e(t,r){this._encode=t,this._schema=r}return e.prototype.get=function(){return{fullDimensions:this._getFullDimensionNames(),encode:this._encode}},e.prototype._getFullDimensionNames=function(){return this._cachedDimNames||(this._cachedDimNames=this._schema?this._schema.makeOutputDimensionNames():[]),this._cachedDimNames},e}();function NMe(e,t){var r={},i=r.encode={},n=dt(),a=[],o=[],s={};q(e.dimensions,function(d){var f=e.getDimensionInfo(d),p=f.coordDim;if(p){var v=f.coordDimIndex;gM(i,p)[v]=d,f.isExtraCoord||(n.set(p,1),VMe(f.type)&&(a[0]=d),gM(s,p)[v]=e.getDimensionIndex(f.name)),f.defaultTooltip&&o.push(d)}oue.each(function(m,g){var y=gM(i,g),x=f.otherDims[g];x!=null&&x!==!1&&(y[x]=f.name)})});var l=[],u={};n.each(function(d,f){var p=i[f];u[f]=p[0],l=l.concat(p)}),r.dataDimsOnCoord=l,r.dataDimIndicesOnCoord=qe(l,function(d){return e.getDimensionInfo(d).storeDimIndex}),r.encodeFirstDimNotExtra=u;var c=i.label;c&&c.length&&(a=c.slice());var h=i.tooltip;return h&&h.length?o=h.slice():o.length||(o=a.slice()),i.defaultedLabel=a,i.defaultedTooltip=o,r.userOutput=new BMe(s,t),r}function gM(e,t){return e.hasOwnProperty(t)||(e[t]=[]),e[t]}function X8(e){return e==="category"?"ordinal":e==="time"?"time":"float"}function VMe(e){return!(e==="ordinal"||e==="time")}var AA=function(){function e(t){this.otherDims={},t!=null&&Be(this,t)}return e}(),FMe=Pr(),zMe={float:"f",int:"i",ordinal:"o",number:"n",time:"t"},mce=function(){function e(t){this.dimensions=t.dimensions,this._dimOmitted=t.dimensionOmitted,this.source=t.source,this._fullDimCount=t.fullDimensionCount,this._updateDimOmitted(t.dimensionOmitted)}return e.prototype.isDimensionOmitted=function(){return this._dimOmitted},e.prototype._updateDimOmitted=function(t){this._dimOmitted=t,t&&(this._dimNameMap||(this._dimNameMap=xce(this.source)))},e.prototype.getSourceDimensionIndex=function(t){return Lt(this._dimNameMap.get(t),-1)},e.prototype.getSourceDimension=function(t){var r=this.source.dimensionsDefine;if(r)return r[t]},e.prototype.makeStoreSchema=function(){for(var t=this._fullDimCount,r=gue(this.source),i=!bce(t),n="",a=[],o=0,s=0;o<t;o++){var l=void 0,u=void 0,c=void 0,h=this.dimensions[s];if(h&&h.storeDimIndex===o)l=r?h.name:null,u=h.type,c=h.ordinalMeta,s++;else{var d=this.getSourceDimension(o);d&&(l=r?d.name:null,u=d.type)}a.push({property:l,type:u,ordinalMeta:c}),r&&l!=null&&(!h||!h.isCalculationCoord)&&(n+=i?l.replace(/\`/g,"`1").replace(/\$/g,"`2"):l),n+="$",n+=zMe[u]||"f",c&&(n+=c.uid),n+="$"}var f=this.source,p=[f.seriesLayoutBy,f.startIndex,n].join("$$");return{dimensions:a,hash:p}},e.prototype.makeOutputDimensionNames=function(){for(var t=[],r=0,i=0;r<this._fullDimCount;r++){var n=void 0,a=this.dimensions[i];if(a&&a.storeDimIndex===r)a.isCalculationCoord||(n=a.name),i++;else{var o=this.getSourceDimension(r);o&&(n=o.name)}t.push(n)}return t},e.prototype.appendCalculationDimension=function(t){this.dimensions.push(t),t.isCalculationCoord=!0,this._fullDimCount++,this._updateDimOmitted(!0)},e}();function gce(e){return e instanceof mce}function yce(e){for(var t=dt(),r=0;r<(e||[]).length;r++){var i=e[r],n=_t(i)?i.name:i;n!=null&&t.get(n)==null&&t.set(n,r)}return t}function xce(e){var t=FMe(e);return t.dimNameMap||(t.dimNameMap=yce(e.dimensionsDefine))}function bce(e){return e>30}var T2=_t,Zd=qe,HMe=typeof Int32Array>"u"?Array:Int32Array,UMe="e\0\0",TW=-1,GMe=["hasItemOption","_nameList","_idList","_invertedIndicesMap","_dimSummary","userOutput","_rawData","_dimValueGetter","_nameDimIdx","_idDimIdx","_nameRepeatCount"],jMe=["_approximateExtent"],PW,F3,P2,D2,yM,z3,xM,Wo=function(){function e(t,r){this.type="list",this._dimOmitted=!1,this._nameList=[],this._idList=[],this._visual={},this._layout={},this._itemVisuals=[],this._itemLayouts=[],this._graphicEls=[],this._approximateExtent={},this._calculationInfo={},this.hasItemOption=!1,this.TRANSFERABLE_METHODS=["cloneShallow","downSample","lttbDownSample","map"],this.CHANGABLE_METHODS=["filterSelf","selectRange"],this.DOWNSAMPLE_METHODS=["downSample","lttbDownSample"];var i,n=!1;gce(t)?(i=t.dimensions,this._dimOmitted=t.isDimensionOmitted(),this._schema=t):(n=!0,i=t),i=i||["x","y"];for(var a={},o=[],s={},l=!1,u={},c=0;c<i.length;c++){var h=i[c],d=it(h)?new AA({name:h}):h instanceof AA?h:new AA(h),f=d.name;d.type=d.type||"float",d.coordDim||(d.coordDim=f,d.coordDimIndex=0);var p=d.otherDims=d.otherDims||{};o.push(f),a[f]=d,u[f]!=null&&(l=!0),d.createInvertedIndices&&(s[f]=[]),p.itemName===0&&(this._nameDimIdx=c),p.itemId===0&&(this._idDimIdx=c),n&&(d.storeDimIndex=c)}if(this.dimensions=o,this._dimInfos=a,this._initGetDimensionInfo(l),this.hostModel=r,this._invertedIndicesMap=s,this._dimOmitted){var v=this._dimIdxToName=dt();q(o,function(m){v.set(a[m].storeDimIndex,m)})}}return e.prototype.getDimension=function(t){var r=this._recognizeDimIndex(t);if(r==null)return t;if(r=t,!this._dimOmitted)return this.dimensions[r];var i=this._dimIdxToName.get(r);if(i!=null)return i;var n=this._schema.getSourceDimension(r);if(n)return n.name},e.prototype.getDimensionIndex=function(t){var r=this._recognizeDimIndex(t);if(r!=null)return r;if(t==null)return-1;var i=this._getDimInfo(t);return i?i.storeDimIndex:this._dimOmitted?this._schema.getSourceDimensionIndex(t):-1},e.prototype._recognizeDimIndex=function(t){if(kr(t)||t!=null&&!isNaN(t)&&!this._getDimInfo(t)&&(!this._dimOmitted||this._schema.getSourceDimensionIndex(t)<0))return+t},e.prototype._getStoreDimIndex=function(t){var r=this.getDimensionIndex(t);return r},e.prototype.getDimensionInfo=function(t){return this._getDimInfo(this.getDimension(t))},e.prototype._initGetDimensionInfo=function(t){var r=this._dimInfos;this._getDimInfo=t?function(i){return r.hasOwnProperty(i)?r[i]:void 0}:function(i){return r[i]}},e.prototype.getDimensionsOnCoord=function(){return this._dimSummary.dataDimsOnCoord.slice()},e.prototype.mapDimension=function(t,r){var i=this._dimSummary;if(r==null)return i.encodeFirstDimNotExtra[t];var n=i.encode[t];return n?n[r]:null},e.prototype.mapDimensionsAll=function(t){var r=this._dimSummary,i=r.encode[t];return(i||[]).slice()},e.prototype.getStore=function(){return this._store},e.prototype.initData=function(t,r,i){var n=this,a;if(t instanceof wL&&(a=t),!a){var o=this.dimensions,s=MN(t)||_o(t)?new yue(t,o.length):t;a=new wL;var l=Zd(o,function(u){return{type:n._dimInfos[u].type,property:u}});a.initData(s,l,i)}this._store=a,this._nameList=(r||[]).slice(),this._idList=[],this._nameRepeatCount={},this._doInit(0,a.count()),this._dimSummary=NMe(this,this._schema),this.userOutput=this._dimSummary.userOutput},e.prototype.appendData=function(t){var r=this._store.appendData(t);this._doInit(r[0],r[1])},e.prototype.appendValues=function(t,r){var i=this._store.appendValues(t,r.length),n=i.start,a=i.end,o=this._shouldMakeIdFromName();if(this._updateOrdinalMeta(),r)for(var s=n;s<a;s++){var l=s-n;this._nameList[s]=r[l],o&&xM(this,s)}},e.prototype._updateOrdinalMeta=function(){for(var t=this._store,r=this.dimensions,i=0;i<r.length;i++){var n=this._dimInfos[r[i]];n.ordinalMeta&&t.collectOrdinalMeta(n.storeDimIndex,n.ordinalMeta)}},e.prototype._shouldMakeIdFromName=function(){var t=this._store.getProvider();return this._idDimIdx==null&&t.getSource().sourceFormat!==$f&&!t.fillStorage},e.prototype._doInit=function(t,r){if(!(t>=r)){var i=this._store,n=i.getProvider();this._updateOrdinalMeta();var a=this._nameList,o=this._idList,s=n.getSource().sourceFormat,l=s===Fl;if(l&&!n.pure)for(var u=[],c=t;c<r;c++){var h=n.getItem(c,u);if(!this.hasItemOption&&PSe(h)&&(this.hasItemOption=!0),h){var d=h.name;a[c]==null&&d!=null&&(a[c]=Rn(d,null));var f=h.id;o[c]==null&&f!=null&&(o[c]=Rn(f,null))}}if(this._shouldMakeIdFromName())for(var c=t;c<r;c++)xM(this,c);PW(this)}},e.prototype.getApproximateExtent=function(t){return this._approximateExtent[t]||this._store.getDataExtent(this._getStoreDimIndex(t))},e.prototype.setApproximateExtent=function(t,r){r=this.getDimension(r),this._approximateExtent[r]=t.slice()},e.prototype.getCalculationInfo=function(t){return this._calculationInfo[t]},e.prototype.setCalculationInfo=function(t,r){T2(t)?Be(this._calculationInfo,t):this._calculationInfo[t]=r},e.prototype.getName=function(t){var r=this.getRawIndex(t),i=this._nameList[r];return i==null&&this._nameDimIdx!=null&&(i=P2(this,this._nameDimIdx,r)),i==null&&(i=""),i},e.prototype._getCategory=function(t,r){var i=this._store.get(t,r),n=this._store.getOrdinalMeta(t);return n?n.categories[i]:i},e.prototype.getId=function(t){return F3(this,this.getRawIndex(t))},e.prototype.count=function(){return this._store.count()},e.prototype.get=function(t,r){var i=this._store,n=this._dimInfos[t];if(n)return i.get(n.storeDimIndex,r)},e.prototype.getByRawIndex=function(t,r){var i=this._store,n=this._dimInfos[t];if(n)return i.getByRawIndex(n.storeDimIndex,r)},e.prototype.getIndices=function(){return this._store.getIndices()},e.prototype.getDataExtent=function(t){return this._store.getDataExtent(this._getStoreDimIndex(t))},e.prototype.getSum=function(t){return this._store.getSum(this._getStoreDimIndex(t))},e.prototype.getMedian=function(t){return this._store.getMedian(this._getStoreDimIndex(t))},e.prototype.getValues=function(t,r){var i=this,n=this._store;return Ue(t)?n.getValues(Zd(t,function(a){return i._getStoreDimIndex(a)}),r):n.getValues(t)},e.prototype.hasValue=function(t){for(var r=this._dimSummary.dataDimIndicesOnCoord,i=0,n=r.length;i<n;i++)if(isNaN(this._store.get(r[i],t)))return!1;return!0},e.prototype.indexOfName=function(t){for(var r=0,i=this._store.count();r<i;r++)if(this.getName(r)===t)return r;return-1},e.prototype.getRawIndex=function(t){return this._store.getRawIndex(t)},e.prototype.indexOfRawIndex=function(t){return this._store.indexOfRawIndex(t)},e.prototype.rawIndexOf=function(t,r){var i=t&&this._invertedIndicesMap[t],n=i[r];return n==null||isNaN(n)?TW:n},e.prototype.indicesOfNearest=function(t,r,i){return this._store.indicesOfNearest(this._getStoreDimIndex(t),r,i)},e.prototype.each=function(t,r,i){xt(t)&&(i=r,r=t,t=[]);var n=i||this,a=Zd(D2(t),this._getStoreDimIndex,this);this._store.each(a,n?at(r,n):r)},e.prototype.filterSelf=function(t,r,i){xt(t)&&(i=r,r=t,t=[]);var n=i||this,a=Zd(D2(t),this._getStoreDimIndex,this);return this._store=this._store.filter(a,n?at(r,n):r),this},e.prototype.selectRange=function(t){var r=this,i={},n=mr(t);return q(n,function(a){var o=r._getStoreDimIndex(a);i[o]=t[a]}),this._store=this._store.selectRange(i),this},e.prototype.mapArray=function(t,r,i){xt(t)&&(i=r,r=t,t=[]),i=i||this;var n=[];return this.each(t,function(){n.push(r&&r.apply(this,arguments))},i),n},e.prototype.map=function(t,r,i,n){var a=i||n||this,o=Zd(D2(t),this._getStoreDimIndex,this),s=z3(this);return s._store=this._store.map(o,a?at(r,a):r),s},e.prototype.modify=function(t,r,i,n){var a=i||n||this,o=Zd(D2(t),this._getStoreDimIndex,this);this._store.modify(o,a?at(r,a):r)},e.prototype.downSample=function(t,r,i,n){var a=z3(this);return a._store=this._store.downSample(this._getStoreDimIndex(t),r,i,n),a},e.prototype.lttbDownSample=function(t,r){var i=z3(this);return i._store=this._store.lttbDownSample(this._getStoreDimIndex(t),r),i},e.prototype.getRawDataItem=function(t){return this._store.getRawDataItem(t)},e.prototype.getItemModel=function(t){var r=this.hostModel,i=this.getRawDataItem(t);return new Qr(i,r,r&&r.ecModel)},e.prototype.diff=function(t){var r=this;return new yd(t?t.getStore().getIndices():[],this.getStore().getIndices(),function(i){return F3(t,i)},function(i){return F3(r,i)})},e.prototype.getVisual=function(t){var r=this._visual;return r&&r[t]},e.prototype.setVisual=function(t,r){this._visual=this._visual||{},T2(t)?Be(this._visual,t):this._visual[t]=r},e.prototype.getItemVisual=function(t,r){var i=this._itemVisuals[t],n=i&&i[r];return n??this.getVisual(r)},e.prototype.hasItemVisual=function(){return this._itemVisuals.length>0},e.prototype.ensureUniqueItemVisual=function(t,r){var i=this._itemVisuals,n=i[t];n||(n=i[t]={});var a=n[r];return a==null&&(a=this.getVisual(r),Ue(a)?a=a.slice():T2(a)&&(a=Be({},a)),n[r]=a),a},e.prototype.setItemVisual=function(t,r,i){var n=this._itemVisuals[t]||{};this._itemVisuals[t]=n,T2(r)?Be(n,r):n[r]=i},e.prototype.clearAllVisual=function(){this._visual={},this._itemVisuals=[]},e.prototype.setLayout=function(t,r){T2(t)?Be(this._layout,t):this._layout[t]=r},e.prototype.getLayout=function(t){return this._layout[t]},e.prototype.getItemLayout=function(t){return this._itemLayouts[t]},e.prototype.setItemLayout=function(t,r,i){this._itemLayouts[t]=i?Be(this._itemLayouts[t]||{},r):r},e.prototype.clearItemLayouts=function(){this._itemLayouts.length=0},e.prototype.setItemGraphicEl=function(t,r){var i=this.hostModel&&this.hostModel.seriesIndex;lL(i,this.dataType,t,r),this._graphicEls[t]=r},e.prototype.getItemGraphicEl=function(t){return this._graphicEls[t]},e.prototype.eachItemGraphicEl=function(t,r){q(this._graphicEls,function(i,n){i&&t&&t.call(r,i,n)})},e.prototype.cloneShallow=function(t){return t||(t=new e(this._schema?this._schema:Zd(this.dimensions,this._getDimInfo,this),this.hostModel)),yM(t,this),t._store=this._store,t},e.prototype.wrapMethod=function(t,r){var i=this[t];xt(i)&&(this.__wrappedMethods=this.__wrappedMethods||[],this.__wrappedMethods.push(t),this[t]=function(){var n=i.apply(this,arguments);return r.apply(this,[n].concat(YB(arguments)))})},e.internalField=function(){PW=function(t){var r=t._invertedIndicesMap;q(r,function(i,n){var a=t._dimInfos[n],o=a.ordinalMeta,s=t._store;if(o){i=r[n]=new HMe(o.categories.length);for(var l=0;l<i.length;l++)i[l]=TW;for(var l=0;l<s.count();l++)i[s.get(a.storeDimIndex,l)]=l}})},P2=function(t,r,i){return Rn(t._getCategory(r,i),null)},F3=function(t,r){var i=t._idList[r];return i==null&&t._idDimIdx!=null&&(i=P2(t,t._idDimIdx,r)),i==null&&(i=UMe+r),i},D2=function(t){return Ue(t)||(t=t!=null?[t]:[]),t},z3=function(t){var r=new e(t._schema?t._schema:Zd(t.dimensions,t._getDimInfo,t),t.hostModel);return yM(r,t),r},yM=function(t,r){q(GMe.concat(r.__wrappedMethods||[]),function(i){r.hasOwnProperty(i)&&(t[i]=r[i])}),t.__wrappedMethods=r.__wrappedMethods,q(jMe,function(i){t[i]=At(r[i])}),t._calculationInfo=Be({},r._calculationInfo)},xM=function(t,r){var i=t._nameList,n=t._idList,a=t._nameDimIdx,o=t._idDimIdx,s=i[r],l=n[r];if(s==null&&a!=null&&(i[r]=s=P2(t,a,r)),l==null&&o!=null&&(n[r]=l=P2(t,o,r)),l==null&&s!=null){var u=t._nameRepeatCount,c=u[s]=(u[s]||0)+1;l=s,c>1&&(l+="__ec__"+c),n[r]=l}}}(),e}();function g4(e,t){MN(e)||(e=TN(e)),t=t||{};var r=t.coordDimensions||[],i=t.dimensionsDefine||e.dimensionsDefine||[],n=dt(),a=[],o=qMe(e,r,i,t.dimensionsCount),s=t.canOmitUnusedDimensions&&bce(o),l=i===e.dimensionsDefine,u=l?xce(e):yce(i),c=t.encodeDefine;!c&&t.encodeDefaulter&&(c=t.encodeDefaulter(e,o));for(var h=dt(c),d=new Eue(o),f=0;f<d.length;f++)d[f]=-1;function p(M){var E=d[M];if(E<0){var T=i[M],L=_t(T)?T:{name:T},P=new AA,C=L.name;C!=null&&u.get(C)!=null&&(P.name=P.displayName=C),L.type!=null&&(P.type=L.type),L.displayName!=null&&(P.displayName=L.displayName);var D=a.length;return d[M]=D,P.storeDimIndex=M,a.push(P),P}return a[E]}if(!s)for(var f=0;f<o;f++)p(f);h.each(function(M,E){var T=ci(M).slice();if(T.length===1&&!it(T[0])&&T[0]<0){h.set(E,!1);return}var L=h.set(E,[]);q(T,function(P,C){var D=it(P)?u.get(P):P;D!=null&&D<o&&(L[C]=D,m(p(D),E,C))})});var v=0;q(r,function(M){var E,T,L,P;if(it(M))E=M,P={};else{P=M,E=P.name;var C=P.ordinalMeta;P.ordinalMeta=null,P=Be({},P),P.ordinalMeta=C,T=P.dimsDef,L=P.otherDims,P.name=P.coordDim=P.coordDimIndex=P.dimsDef=P.otherDims=null}var D=h.get(E);if(D!==!1){if(D=ci(D),!D.length)for(var I=0;I<(T&&T.length||1);I++){for(;v<o&&p(v).coordDim!=null;)v++;v<o&&D.push(v++)}q(D,function(O,R){var H=p(O);if(l&&P.type!=null&&(H.type=P.type),m(bt(H,P),E,R),H.name==null&&T){var j=T[R];!_t(j)&&(j={name:j}),H.name=H.displayName=j.name,H.defaultTooltip=j.defaultTooltip}L&&bt(H.otherDims,L)})}});function m(M,E,T){oue.get(E)!=null?M.otherDims[E]=T:(M.coordDim=E,M.coordDimIndex=T,n.set(E,!0))}var g=t.generateCoord,y=t.generateCoordCount,x=y!=null;y=g?y||1:0;var b=g||"value";function _(M){M.name==null&&(M.name=M.coordDim)}if(s)q(a,function(M){_(M)}),a.sort(function(M,E){return M.storeDimIndex-E.storeDimIndex});else for(var w=0;w<o;w++){var S=p(w),A=S.coordDim;A==null&&(S.coordDim=YMe(b,n,x),S.coordDimIndex=0,(!g||y<=0)&&(S.isExtraCoord=!0),y--),_(S),S.type==null&&(cue(e,w)===Ra.Must||S.isExtraCoord&&(S.otherDims.itemName!=null||S.otherDims.seriesName!=null))&&(S.type="ordinal")}return WMe(a),new mce({source:e,dimensions:a,fullDimensionCount:o,dimensionOmitted:s})}function WMe(e){for(var t=dt(),r=0;r<e.length;r++){var i=e[r],n=i.name,a=t.get(n)||0;a>0&&(i.name=n+(a-1)),a++,t.set(n,a)}}function qMe(e,t,r,i){var n=Math.max(e.dimensionsDetectedCount||1,t.length,r.length,i||0);return q(t,function(a){var o;_t(a)&&(o=a.dimsDef)&&(n=Math.max(n,o.length))}),n}function YMe(e,t,r){if(r||t.hasKey(e)){for(var i=0;t.hasKey(e+i);)i++;e+=i}return t.set(e,!0),e}var XMe=function(){function e(t){this.coordSysDims=[],this.axisMap=dt(),this.categoryAxisMap=dt(),this.coordSysName=t}return e}();function ZMe(e){var t=e.get("coordinateSystem"),r=new XMe(t),i=QMe[t];if(i)return i(e,r,r.axisMap,r.categoryAxisMap),r}var QMe={cartesian2d:function(e,t,r,i){var n=e.getReferringComponents("xAxis",wn).models[0],a=e.getReferringComponents("yAxis",wn).models[0];t.coordSysDims=["x","y"],r.set("x",n),r.set("y",a),Im(n)&&(i.set("x",n),t.firstCategoryDimIndex=0),Im(a)&&(i.set("y",a),t.firstCategoryDimIndex==null&&(t.firstCategoryDimIndex=1))},singleAxis:function(e,t,r,i){var n=e.getReferringComponents("singleAxis",wn).models[0];t.coordSysDims=["single"],r.set("single",n),Im(n)&&(i.set("single",n),t.firstCategoryDimIndex=0)},polar:function(e,t,r,i){var n=e.getReferringComponents("polar",wn).models[0],a=n.findAxisModel("radiusAxis"),o=n.findAxisModel("angleAxis");t.coordSysDims=["radius","angle"],r.set("radius",a),r.set("angle",o),Im(a)&&(i.set("radius",a),t.firstCategoryDimIndex=0),Im(o)&&(i.set("angle",o),t.firstCategoryDimIndex==null&&(t.firstCategoryDimIndex=1))},geo:function(e,t,r,i){t.coordSysDims=["lng","lat"]},parallel:function(e,t,r,i){var n=e.ecModel,a=n.getComponent("parallel",e.get("parallelIndex")),o=t.coordSysDims=a.dimensions.slice();q(a.parallelAxisIndex,function(s,l){var u=n.getComponent("parallelAxis",s),c=o[l];r.set(c,u),Im(u)&&(i.set(c,u),t.firstCategoryDimIndex==null&&(t.firstCategoryDimIndex=l))})}};function Im(e){return e.get("type")==="category"}function KMe(e,t,r){r=r||{};var i=r.byIndex,n=r.stackedCoordDimension,a,o,s;JMe(t)?a=t:(o=t.schema,a=o.dimensions,s=t.store);var l=!!(e&&e.get("stack")),u,c,h,d;if(q(a,function(y,x){it(y)&&(a[x]=y={name:y}),l&&!y.isExtraCoord&&(!i&&!u&&y.ordinalMeta&&(u=y),!c&&y.type!=="ordinal"&&y.type!=="time"&&(!n||n===y.coordDim)&&(c=y))}),c&&!i&&!u&&(i=!0),c){h="__\0ecstackresult_"+e.id,d="__\0ecstackedover_"+e.id,u&&(u.createInvertedIndices=!0);var f=c.coordDim,p=c.type,v=0;q(a,function(y){y.coordDim===f&&v++});var m={name:h,coordDim:f,coordDimIndex:v,type:p,isExtraCoord:!0,isCalculationCoord:!0,storeDimIndex:a.length},g={name:d,coordDim:d,coordDimIndex:v+1,type:p,isExtraCoord:!0,isCalculationCoord:!0,storeDimIndex:a.length+1};o?(s&&(m.storeDimIndex=s.ensureCalculationDimension(d,p),g.storeDimIndex=s.ensureCalculationDimension(h,p)),o.appendCalculationDimension(m),o.appendCalculationDimension(g)):(a.push(m),a.push(g))}return{stackedDimension:c&&c.name,stackedByDimension:u&&u.name,isStackedByIndex:i,stackedOverDimension:d,stackResultDimension:h}}function JMe(e){return!gce(e.schema)}function vp(e,t){return!!t&&t===e.getCalculationInfo("stackedDimension")}function wce(e,t){return vp(e,t)?e.getCalculationInfo("stackResultDimension"):t}function $Me(e,t){var r=e.get("coordinateSystem"),i=v4.get(r),n;return t&&t.coordSysDims&&(n=qe(t.coordSysDims,function(a){var o={name:a},s=t.axisMap.get(a);if(s){var l=s.get("type");o.type=X8(l)}return o})),n||(n=i&&(i.getDimensionsInfo?i.getDimensionsInfo():i.dimensions.slice())||["x","y"]),n}function eTe(e,t,r){var i,n;return r&&q(e,function(a,o){var s=a.coordDim,l=r.categoryAxisMap.get(s);l&&(i==null&&(i=o),a.ordinalMeta=l.getOrdinalMeta(),t&&(a.createInvertedIndices=!0)),a.otherDims.itemName!=null&&(n=!0)}),!n&&i!=null&&(e[i].otherDims.itemName=0),i}function Bd(e,t,r){r=r||{};var i=t.getSourceManager(),n,a=!1;e?(a=!0,n=TN(e)):(n=i.getSource(),a=n.sourceFormat===Fl);var o=ZMe(t),s=$Me(t,o),l=r.useEncodeDefaulter,u=xt(l)?l:l?kt(uue,s,t):null,c={coordDimensions:s,generateCoord:r.generateCoord,encodeDefine:t.getEncode(),encodeDefaulter:u,canOmitUnusedDimensions:!a},h=g4(n,c),d=eTe(h.dimensions,r.createInvertedIndices,o),f=a?null:i.getSharedDataStore(h),p=KMe(t,{schema:h,store:f}),v=new Wo(h,t);v.setCalculationInfo(p);var m=d!=null&&tTe(n)?function(g,y,x,b){return b===d?x:this.defaultDimValueGetter(g,y,x,b)}:null;return v.hasItemOption=!1,v.initData(a?n:f,null,m),v}function tTe(e){if(e.sourceFormat===Fl){var t=rTe(e.data||[]);return!Ue(_y(t))}}function rTe(e){for(var t=0;t<e.length&&e[t]==null;)t++;return e[t]}var ch=function(){function e(t){this._setting=t||{},this._extent=[1/0,-1/0]}return e.prototype.getSetting=function(t){return this._setting[t]},e.prototype.unionExtent=function(t){var r=this._extent;t[0]<r[0]&&(r[0]=t[0]),t[1]>r[1]&&(r[1]=t[1])},e.prototype.unionExtentFromData=function(t,r){this.unionExtent(t.getApproximateExtent(r))},e.prototype.getExtent=function(){return this._extent.slice()},e.prototype.setExtent=function(t,r){var i=this._extent;isNaN(t)||(i[0]=t),isNaN(r)||(i[1]=r)},e.prototype.isInExtentRange=function(t){return this._extent[0]<=t&&this._extent[1]>=t},e.prototype.isBlank=function(){return this._isBlank},e.prototype.setBlank=function(t){this._isBlank=t},e}();fC(ch);var iTe=0,IL=function(){function e(t){this.categories=t.categories||[],this._needCollect=t.needCollect,this._deduplication=t.deduplication,this.uid=++iTe}return e.createByAxisModel=function(t){var r=t.option,i=r.data,n=i&&qe(i,nTe);return new e({categories:n,needCollect:!n,deduplication:r.dedplication!==!1})},e.prototype.getOrdinal=function(t){return this._getOrCreateMap().get(t)},e.prototype.parseAndCollect=function(t){var r,i=this._needCollect;if(!it(t)&&!i)return t;if(i&&!this._deduplication)return r=this.categories.length,this.categories[r]=t,r;var n=this._getOrCreateMap();return r=n.get(t),r==null&&(i?(r=this.categories.length,this.categories[r]=t,n.set(t,r)):r=NaN),r},e.prototype._getOrCreateMap=function(){return this._map||(this._map=dt(this.categories))},e}();function nTe(e){return _t(e)&&e.value!=null?e.value:e+""}function LL(e){return e.type==="interval"||e.type==="log"}function aTe(e,t,r,i){var n={},a=e[1]-e[0],o=n.interval=Xse(a/t);r!=null&&o<r&&(o=n.interval=r),i!=null&&o>i&&(o=n.interval=i);var s=n.intervalPrecision=_ce(o),l=n.niceTickExtent=[rn(Math.ceil(e[0]/o)*o,s),rn(Math.floor(e[1]/o)*o,s)];return oTe(l,e),n}function bM(e){var t=Math.pow(10,tN(e)),r=e/t;return r?r===2?r=3:r===3?r=5:r*=2:r=1,rn(r*t)}function _ce(e){return Pc(e)+2}function DW(e,t,r){e[t]=Math.max(Math.min(e[t],r[1]),r[0])}function oTe(e,t){!isFinite(e[0])&&(e[0]=t[0]),!isFinite(e[1])&&(e[1]=t[1]),DW(e,0,t),DW(e,1,t),e[0]>e[1]&&(e[0]=e[1])}function RC(e,t){return e>=t[0]&&e<=t[1]}function OC(e,t){return t[1]===t[0]?.5:(e-t[0])/(t[1]-t[0])}function BC(e,t){return e*(t[1]-t[0])+t[0]}var NC=function(e){_e(t,e);function t(r){var i=e.call(this,r)||this;i.type="ordinal";var n=i.getSetting("ordinalMeta");return n||(n=new IL({})),Ue(n)&&(n=new IL({categories:qe(n,function(a){return _t(a)?a.value:a})})),i._ordinalMeta=n,i._extent=i.getSetting("extent")||[0,n.categories.length-1],i}return t.prototype.parse=function(r){return r==null?NaN:it(r)?this._ordinalMeta.getOrdinal(r):Math.round(r)},t.prototype.contain=function(r){return r=this.parse(r),RC(r,this._extent)&&this._ordinalMeta.categories[r]!=null},t.prototype.normalize=function(r){return r=this._getTickNumber(this.parse(r)),OC(r,this._extent)},t.prototype.scale=function(r){return r=Math.round(BC(r,this._extent)),this.getRawOrdinalNumber(r)},t.prototype.getTicks=function(){for(var r=[],i=this._extent,n=i[0];n<=i[1];)r.push({value:n}),n++;return r},t.prototype.getMinorTicks=function(r){},t.prototype.setSortInfo=function(r){if(r==null){this._ordinalNumbersByTick=this._ticksByOrdinalNumber=null;return}for(var i=r.ordinalNumbers,n=this._ordinalNumbersByTick=[],a=this._ticksByOrdinalNumber=[],o=0,s=this._ordinalMeta.categories.length,l=Math.min(s,i.length);o<l;++o){var u=i[o];n[o]=u,a[u]=o}for(var c=0;o<s;++o){for(;a[c]!=null;)c++;n.push(c),a[c]=o}},t.prototype._getTickNumber=function(r){var i=this._ticksByOrdinalNumber;return i&&r>=0&&r<i.length?i[r]:r},t.prototype.getRawOrdinalNumber=function(r){var i=this._ordinalNumbersByTick;return i&&r>=0&&r<i.length?i[r]:r},t.prototype.getLabel=function(r){if(!this.isBlank()){var i=this.getRawOrdinalNumber(r.value),n=this._ordinalMeta.categories[i];return n==null?"":n+""}},t.prototype.count=function(){return this._extent[1]-this._extent[0]+1},t.prototype.unionExtentFromData=function(r,i){this.unionExtent(r.getApproximateExtent(i))},t.prototype.isInExtentRange=function(r){return r=this._getTickNumber(r),this._extent[0]<=r&&this._extent[1]>=r},t.prototype.getOrdinalMeta=function(){return this._ordinalMeta},t.prototype.calcNiceTicks=function(){},t.prototype.calcNiceExtent=function(){},t.type="ordinal",t}(ch);ch.registerClass(NC);var e0=rn,xd=function(e){_e(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type="interval",r._interval=0,r._intervalPrecision=2,r}return t.prototype.parse=function(r){return r},t.prototype.contain=function(r){return RC(r,this._extent)},t.prototype.normalize=function(r){return OC(r,this._extent)},t.prototype.scale=function(r){return BC(r,this._extent)},t.prototype.setExtent=function(r,i){var n=this._extent;isNaN(r)||(n[0]=parseFloat(r)),isNaN(i)||(n[1]=parseFloat(i))},t.prototype.unionExtent=function(r){var i=this._extent;r[0]<i[0]&&(i[0]=r[0]),r[1]>i[1]&&(i[1]=r[1]),this.setExtent(i[0],i[1])},t.prototype.getInterval=function(){return this._interval},t.prototype.setInterval=function(r){this._interval=r,this._niceExtent=this._extent.slice(),this._intervalPrecision=_ce(r)},t.prototype.getTicks=function(r){var i=this._interval,n=this._extent,a=this._niceExtent,o=this._intervalPrecision,s=[];if(!i)return s;var l=1e4;n[0]<a[0]&&(r?s.push({value:e0(a[0]-i,o)}):s.push({value:n[0]}));for(var u=a[0];u<=a[1]&&(s.push({value:u}),u=e0(u+i,o),u!==s[s.length-1].value);)if(s.length>l)return[];var c=s.length?s[s.length-1].value:a[1];return n[1]>c&&(r?s.push({value:e0(c+i,o)}):s.push({value:n[1]})),s},t.prototype.getMinorTicks=function(r){for(var i=this.getTicks(!0),n=[],a=this.getExtent(),o=1;o<i.length;o++){for(var s=i[o],l=i[o-1],u=0,c=[],h=s.value-l.value,d=h/r;u<r-1;){var f=e0(l.value+(u+1)*d);f>a[0]&&f<a[1]&&c.push(f),u++}n.push(c)}return n},t.prototype.getLabel=function(r,i){if(r==null)return"";var n=i&&i.precision;n==null?n=Pc(r.value)||0:n==="auto"&&(n=this._intervalPrecision);var a=e0(r.value,n,!0);return eue(a)},t.prototype.calcNiceTicks=function(r,i,n){r=r||5;var a=this._extent,o=a[1]-a[0];if(isFinite(o)){o<0&&(o=-o,a.reverse());var s=aTe(a,r,i,n);this._intervalPrecision=s.intervalPrecision,this._interval=s.interval,this._niceExtent=s.niceTickExtent}},t.prototype.calcNiceExtent=function(r){var i=this._extent;if(i[0]===i[1])if(i[0]!==0){var n=Math.abs(i[0]);r.fixMax||(i[1]+=n/2),i[0]-=n/2}else i[1]=1;var a=i[1]-i[0];isFinite(a)||(i[0]=0,i[1]=1),this.calcNiceTicks(r.splitNumber,r.minInterval,r.maxInterval);var o=this._interval;r.fixMin||(i[0]=e0(Math.floor(i[0]/o)*o)),r.fixMax||(i[1]=e0(Math.ceil(i[1]/o)*o))},t.prototype.setNiceExtent=function(r,i){this._niceExtent=[r,i]},t.type="interval",t}(ch);ch.registerClass(xd);var Ace=typeof Float32Array<"u",sTe=Ace?Float32Array:Array;function Ic(e){return Ue(e)?Ace?new Float32Array(e):e:new sTe(e)}var kL="__ec_stack_";function FN(e){return e.get("stack")||kL+e.seriesIndex}function zN(e){return e.dim+e.index}function lTe(e){var t=[],r=e.axis,i="axis0";if(r.type==="category"){for(var n=r.getBandWidth(),a=0;a<e.count;a++)t.push(bt({bandWidth:n,axisKey:i,stackId:kL+a},e));for(var o=Ece(t),s=[],a=0;a<e.count;a++){var l=o[i][kL+a];l.offsetCenter=l.offset+l.width/2,s.push(l)}return s}}function Sce(e,t){var r=[];return t.eachSeriesByType(e,function(i){Pce(i)&&r.push(i)}),r}function uTe(e){var t={};q(e,function(l){var u=l.coordinateSystem,c=u.getBaseAxis();if(!(c.type!=="time"&&c.type!=="value"))for(var h=l.getData(),d=c.dim+"_"+c.index,f=h.getDimensionIndex(h.mapDimension(c.dim)),p=h.getStore(),v=0,m=p.count();v<m;++v){var g=p.get(f,v);t[d]?t[d].push(g):t[d]=[g]}});var r={};for(var i in t)if(t.hasOwnProperty(i)){var n=t[i];if(n){n.sort(function(l,u){return l-u});for(var a=null,o=1;o<n.length;++o){var s=n[o]-n[o-1];s>0&&(a=a===null?s:Math.min(a,s))}r[i]=a}}return r}function Cce(e){var t=uTe(e),r=[];return q(e,function(i){var n=i.coordinateSystem,a=n.getBaseAxis(),o=a.getExtent(),s;if(a.type==="category")s=a.getBandWidth();else if(a.type==="value"||a.type==="time"){var l=a.dim+"_"+a.index,u=t[l],c=Math.abs(o[1]-o[0]),h=a.scale.getExtent(),d=Math.abs(h[1]-h[0]);s=u?c/d*u:c}else{var f=i.getData();s=Math.abs(o[1]-o[0])/f.count()}var p=et(i.get("barWidth"),s),v=et(i.get("barMaxWidth"),s),m=et(i.get("barMinWidth")||(Dce(i)?.5:1),s),g=i.get("barGap"),y=i.get("barCategoryGap");r.push({bandWidth:s,barWidth:p,barMaxWidth:v,barMinWidth:m,barGap:g,barCategoryGap:y,axisKey:zN(a),stackId:FN(i)})}),Ece(r)}function Ece(e){var t={};q(e,function(i,n){var a=i.axisKey,o=i.bandWidth,s=t[a]||{bandWidth:o,remainedWidth:o,autoWidthCount:0,categoryGap:null,gap:"20%",stacks:{}},l=s.stacks;t[a]=s;var u=i.stackId;l[u]||s.autoWidthCount++,l[u]=l[u]||{width:0,maxWidth:0};var c=i.barWidth;c&&!l[u].width&&(l[u].width=c,c=Math.min(s.remainedWidth,c),s.remainedWidth-=c);var h=i.barMaxWidth;h&&(l[u].maxWidth=h);var d=i.barMinWidth;d&&(l[u].minWidth=d);var f=i.barGap;f!=null&&(s.gap=f);var p=i.barCategoryGap;p!=null&&(s.categoryGap=p)});var r={};return q(t,function(i,n){r[n]={};var a=i.stacks,o=i.bandWidth,s=i.categoryGap;if(s==null){var l=mr(a).length;s=Math.max(35-l*4,15)+"%"}var u=et(s,o),c=et(i.gap,1),h=i.remainedWidth,d=i.autoWidthCount,f=(h-u)/(d+(d-1)*c);f=Math.max(f,0),q(a,function(g){var y=g.maxWidth,x=g.minWidth;if(g.width){var b=g.width;y&&(b=Math.min(b,y)),x&&(b=Math.max(b,x)),g.width=b,h-=b+c*b,d--}else{var b=f;y&&y<b&&(b=Math.min(y,h)),x&&x>b&&(b=x),b!==f&&(g.width=b,h-=b+c*b,d--)}}),f=(h-u)/(d+(d-1)*c),f=Math.max(f,0);var p=0,v;q(a,function(g,y){g.width||(g.width=f),v=g,p+=g.width*(1+c)}),v&&(p-=v.width*c);var m=-p/2;q(a,function(g,y){r[n][y]=r[n][y]||{bandWidth:o,offset:m,width:g.width},m+=g.width*(1+c)})}),r}function cTe(e,t,r){if(e&&t){var i=e[zN(t)];return i!=null&&r!=null?i[FN(r)]:i}}function Mce(e,t){var r=Sce(e,t),i=Cce(r);q(r,function(n){var a=n.getData(),o=n.coordinateSystem,s=o.getBaseAxis(),l=FN(n),u=i[zN(s)][l],c=u.offset,h=u.width;a.setLayout({bandWidth:u.bandWidth,offset:c,size:h})})}function Tce(e){return{seriesType:e,plan:Ly(),reset:function(t){if(Pce(t)){var r=t.getData(),i=t.coordinateSystem,n=i.getBaseAxis(),a=i.getOtherAxis(n),o=r.getDimensionIndex(r.mapDimension(a.dim)),s=r.getDimensionIndex(r.mapDimension(n.dim)),l=t.get("showBackground",!0),u=r.mapDimension(a.dim),c=r.getCalculationInfo("stackResultDimension"),h=vp(r,u)&&!!r.getCalculationInfo("stackedOnSeries"),d=a.isHorizontal(),f=hTe(n,a),p=Dce(t),v=t.get("barMinHeight")||0,m=c&&r.getDimensionIndex(c),g=r.getLayout("size"),y=r.getLayout("offset");return{progress:function(x,b){for(var _=x.count,w=p&&Ic(_*3),S=p&&l&&Ic(_*3),A=p&&Ic(_),M=i.master.getRect(),E=d?M.width:M.height,T,L=b.getStore(),P=0;(T=x.next())!=null;){var C=L.get(h?m:o,T),D=L.get(s,T),I=f,O=void 0;h&&(O=+C-L.get(o,T));var R=void 0,H=void 0,j=void 0,N=void 0;if(d){var k=i.dataToPoint([C,D]);if(h){var G=i.dataToPoint([O,D]);I=G[0]}R=I,H=k[1]+y,j=k[0]-I,N=g,Math.abs(j)<v&&(j=(j<0?-1:1)*v)}else{var k=i.dataToPoint([D,C]);if(h){var G=i.dataToPoint([D,O]);I=G[1]}R=k[0]+y,H=I,j=g,N=k[1]-I,Math.abs(N)<v&&(N=(N<=0?-1:1)*v)}p?(w[P]=R,w[P+1]=H,w[P+2]=d?j:N,S&&(S[P]=d?M.x:R,S[P+1]=d?H:M.y,S[P+2]=E),A[T]=T):b.setItemLayout(T,{x:R,y:H,width:j,height:N}),P+=3}p&&b.setLayout({largePoints:w,largeDataIndices:A,largeBackgroundPoints:S,valueAxisHorizontal:d})}}}}}}function Pce(e){return e.coordinateSystem&&e.coordinateSystem.type==="cartesian2d"}function Dce(e){return e.pipelineContext&&e.pipelineContext.large}function hTe(e,t){var r=t.model.get("startValue");return r||(r=0),t.toGlobalCoord(t.dataToCoord(t.type==="log"?r>0?r:1:r))}var dTe=function(e,t,r,i){for(;r<i;){var n=r+i>>>1;e[n][1]<t?r=n+1:i=n}return r},HN=function(e){_e(t,e);function t(r){var i=e.call(this,r)||this;return i.type="time",i}return t.prototype.getLabel=function(r){var i=this.getSetting("useUTC");return SC(r.value,bj[ZCe(h1(this._minLevelUnit))]||bj.second,i,this.getSetting("locale"))},t.prototype.getFormattedLabel=function(r,i,n){var a=this.getSetting("useUTC"),o=this.getSetting("locale");return QCe(r,i,n,o,a)},t.prototype.getTicks=function(){var r=this._interval,i=this._extent,n=[];if(!r)return n;n.push({value:i[0],level:0});var a=this.getSetting("useUTC"),o=xTe(this._minLevelUnit,this._approxInterval,a,i);return n=n.concat(o),n.push({value:i[1],level:0}),n},t.prototype.calcNiceExtent=function(r){var i=this._extent;if(i[0]===i[1]&&(i[0]-=El,i[1]+=El),i[1]===-1/0&&i[0]===1/0){var n=new Date;i[1]=+new Date(n.getFullYear(),n.getMonth(),n.getDate()),i[0]=i[1]-El}this.calcNiceTicks(r.splitNumber,r.minInterval,r.maxInterval)},t.prototype.calcNiceTicks=function(r,i,n){r=r||10;var a=this._extent,o=a[1]-a[0];this._approxInterval=o/r,i!=null&&this._approxInterval<i&&(this._approxInterval=i),n!=null&&this._approxInterval>n&&(this._approxInterval=n);var s=H3.length,l=Math.min(dTe(H3,this._approxInterval,0,s),s-1);this._interval=H3[l][1],this._minLevelUnit=H3[Math.max(l-1,0)][0]},t.prototype.parse=function(r){return kr(r)?r:+Jc(r)},t.prototype.contain=function(r){return RC(this.parse(r),this._extent)},t.prototype.normalize=function(r){return OC(this.parse(r),this._extent)},t.prototype.scale=function(r){return BC(r,this._extent)},t.type="time",t}(xd),H3=[["second",xN],["minute",bN],["hour",db],["quarter-day",db*6],["half-day",db*12],["day",El*1.2],["half-week",El*3.5],["week",El*7],["month",El*31],["quarter",El*95],["half-year",xj/2],["year",xj]];function fTe(e,t,r,i){var n=Jc(t),a=Jc(r),o=function(p){return wj(n,p,i)===wj(a,p,i)},s=function(){return o("year")},l=function(){return s()&&o("month")},u=function(){return l()&&o("day")},c=function(){return u()&&o("hour")},h=function(){return c()&&o("minute")},d=function(){return h()&&o("second")},f=function(){return d()&&o("millisecond")};switch(e){case"year":return s();case"month":return l();case"day":return u();case"hour":return c();case"minute":return h();case"second":return d();case"millisecond":return f()}}function pTe(e,t){return e/=El,e>16?16:e>7.5?7:e>3.5?4:e>1.5?2:1}function vTe(e){var t=30*El;return e/=t,e>6?6:e>3?3:e>2?2:1}function mTe(e){return e/=db,e>12?12:e>6?6:e>3.5?4:e>2?2:1}function IW(e,t){return e/=t?bN:xN,e>30?30:e>20?20:e>15?15:e>10?10:e>5?5:e>2?2:1}function gTe(e){return Xse(e)}function yTe(e,t,r){var i=new Date(e);switch(h1(t)){case"year":case"month":i[Xle(r)](0);case"day":i[Zle(r)](1);case"hour":i[Qle(r)](0);case"minute":i[Kle(r)](0);case"second":i[Jle(r)](0),i[$le(r)](0)}return i.getTime()}function xTe(e,t,r,i){var n=1e4,a=qle,o=0;function s(E,T,L,P,C,D,I){for(var O=new Date(T),R=T,H=O[P]();R<L&&R<=i[1];)I.push({value:R}),H+=E,O[C](H),R=O.getTime();I.push({value:R,notAdd:!0})}function l(E,T,L){var P=[],C=!T.length;if(!fTe(h1(E),i[0],i[1],r)){C&&(T=[{value:yTe(new Date(i[0]),E,r)},{value:i[1]}]);for(var D=0;D<T.length-1;D++){var I=T[D].value,O=T[D+1].value;if(I!==O){var R=void 0,H=void 0,j=void 0,N=!1;switch(E){case"year":R=Math.max(1,Math.round(t/El/365)),H=wN(r),j=KCe(r);break;case"half-year":case"quarter":case"month":R=vTe(t),H=d1(r),j=Xle(r);break;case"week":case"half-week":case"day":R=pTe(t),H=CC(r),j=Zle(r),N=!0;break;case"half-day":case"quarter-day":case"hour":R=mTe(t),H=tw(r),j=Qle(r);break;case"minute":R=IW(t,!0),H=EC(r),j=Kle(r);break;case"second":R=IW(t,!1),H=MC(r),j=Jle(r);break;case"millisecond":R=gTe(t),H=TC(r),j=$le(r);break}s(R,I,O,H,j,N,P),E==="year"&&L.length>1&&D===0&&L.unshift({value:L[0].value-R})}}for(var D=0;D<P.length;D++)L.push(P[D]);return P}}for(var u=[],c=[],h=0,d=0,f=0;f<a.length&&o++<n;++f){var p=h1(a[f]);if(XCe(a[f])){l(a[f],u[u.length-1]||[],c);var v=a[f+1]?h1(a[f+1]):null;if(p!==v){if(c.length){d=h,c.sort(function(E,T){return E.value-T.value});for(var m=[],g=0;g<c.length;++g){var y=c[g].value;(g===0||c[g-1].value!==y)&&(m.push(c[g]),y>=i[0]&&y<=i[1]&&h++)}var x=(i[1]-i[0])/t;if(h>x*1.5&&d>x/1.5||(u.push(m),h>x||e===a[f]))break}c=[]}}}for(var b=ni(qe(u,function(E){return ni(E,function(T){return T.value>=i[0]&&T.value<=i[1]&&!T.notAdd})}),function(E){return E.length>0}),_=[],w=b.length-1,f=0;f<b.length;++f)for(var S=b[f],A=0;A<S.length;++A)_.push({value:S[A].value,level:w-f});_.sort(function(E,T){return E.value-T.value});for(var M=[],f=0;f<_.length;++f)(f===0||_[f].value!==_[f-1].value)&&M.push(_[f]);return M}ch.registerClass(HN);var LW=ch.prototype,mb=xd.prototype,bTe=rn,wTe=Math.floor,_Te=Math.ceil,U3=Math.pow,Wl=Math.log,UN=function(e){_e(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type="log",r.base=10,r._originalScale=new xd,r._interval=0,r}return t.prototype.getTicks=function(r){var i=this._originalScale,n=this._extent,a=i.getExtent(),o=mb.getTicks.call(this,r);return qe(o,function(s){var l=s.value,u=rn(U3(this.base,l));return u=l===n[0]&&this._fixMin?G3(u,a[0]):u,u=l===n[1]&&this._fixMax?G3(u,a[1]):u,{value:u}},this)},t.prototype.setExtent=function(r,i){var n=Wl(this.base);r=Wl(Math.max(0,r))/n,i=Wl(Math.max(0,i))/n,mb.setExtent.call(this,r,i)},t.prototype.getExtent=function(){var r=this.base,i=LW.getExtent.call(this);i[0]=U3(r,i[0]),i[1]=U3(r,i[1]);var n=this._originalScale,a=n.getExtent();return this._fixMin&&(i[0]=G3(i[0],a[0])),this._fixMax&&(i[1]=G3(i[1],a[1])),i},t.prototype.unionExtent=function(r){this._originalScale.unionExtent(r);var i=this.base;r[0]=Wl(r[0])/Wl(i),r[1]=Wl(r[1])/Wl(i),LW.unionExtent.call(this,r)},t.prototype.unionExtentFromData=function(r,i){this.unionExtent(r.getApproximateExtent(i))},t.prototype.calcNiceTicks=function(r){r=r||10;var i=this._extent,n=i[1]-i[0];if(!(n===1/0||n<=0)){var a=TSe(n),o=r/n*a;for(o<=.5&&(a*=10);!isNaN(a)&&Math.abs(a)<1&&Math.abs(a)>0;)a*=10;var s=[rn(_Te(i[0]/a)*a),rn(wTe(i[1]/a)*a)];this._interval=a,this._niceExtent=s}},t.prototype.calcNiceExtent=function(r){mb.calcNiceExtent.call(this,r),this._fixMin=r.fixMin,this._fixMax=r.fixMax},t.prototype.parse=function(r){return r},t.prototype.contain=function(r){return r=Wl(r)/Wl(this.base),RC(r,this._extent)},t.prototype.normalize=function(r){return r=Wl(r)/Wl(this.base),OC(r,this._extent)},t.prototype.scale=function(r){return r=BC(r,this._extent),U3(this.base,r)},t.type="log",t}(ch),Ice=UN.prototype;Ice.getMinorTicks=mb.getMinorTicks;Ice.getLabel=mb.getLabel;function G3(e,t){return bTe(e,Pc(t))}ch.registerClass(UN);var ATe=function(){function e(t,r,i){this._prepareParams(t,r,i)}return e.prototype._prepareParams=function(t,r,i){i[1]<i[0]&&(i=[NaN,NaN]),this._dataMin=i[0],this._dataMax=i[1];var n=this._isOrdinal=t.type==="ordinal";this._needCrossZero=t.type==="interval"&&r.getNeedCrossZero&&r.getNeedCrossZero();var a=r.get("min",!0);a==null&&(a=r.get("startValue",!0));var o=this._modelMinRaw=a;xt(o)?this._modelMinNum=j3(t,o({min:i[0],max:i[1]})):o!=="dataMin"&&(this._modelMinNum=j3(t,o));var s=this._modelMaxRaw=r.get("max",!0);if(xt(s)?this._modelMaxNum=j3(t,s({min:i[0],max:i[1]})):s!=="dataMax"&&(this._modelMaxNum=j3(t,s)),n)this._axisDataLen=r.getCategories().length;else{var l=r.get("boundaryGap"),u=Ue(l)?l:[l||0,l||0];typeof u[0]=="boolean"||typeof u[1]=="boolean"?this._boundaryGapInner=[0,0]:this._boundaryGapInner=[Tu(u[0],1),Tu(u[1],1)]}},e.prototype.calculate=function(){var t=this._isOrdinal,r=this._dataMin,i=this._dataMax,n=this._axisDataLen,a=this._boundaryGapInner,o=t?null:i-r||Math.abs(r),s=this._modelMinRaw==="dataMin"?r:this._modelMinNum,l=this._modelMaxRaw==="dataMax"?i:this._modelMaxNum,u=s!=null,c=l!=null;s==null&&(s=t?n?0:NaN:r-a[0]*o),l==null&&(l=t?n?n-1:NaN:i+a[1]*o),(s==null||!isFinite(s))&&(s=NaN),(l==null||!isFinite(l))&&(l=NaN);var h=qb(s)||qb(l)||t&&!n;this._needCrossZero&&(s>0&&l>0&&!u&&(s=0),s<0&&l<0&&!c&&(l=0));var d=this._determinedMin,f=this._determinedMax;return d!=null&&(s=d,u=!0),f!=null&&(l=f,c=!0),{min:s,max:l,minFixed:u,maxFixed:c,isBlank:h}},e.prototype.modifyDataMinMax=function(t,r){this[CTe[t]]=r},e.prototype.setDeterminedMinMax=function(t,r){var i=STe[t];this[i]=r},e.prototype.freeze=function(){this.frozen=!0},e}(),STe={min:"_determinedMin",max:"_determinedMax"},CTe={min:"_dataMin",max:"_dataMax"};function Lce(e,t,r){var i=e.rawExtentInfo;return i||(i=new ATe(e,t,r),e.rawExtentInfo=i,i)}function j3(e,t){return t==null?null:qb(t)?NaN:e.parse(t)}function kce(e,t){var r=e.type,i=Lce(e,t,e.getExtent()).calculate();e.setBlank(i.isBlank);var n=i.min,a=i.max,o=t.ecModel;if(o&&r==="time"){var s=Sce("bar",o),l=!1;if(q(s,function(h){l=l||h.getBaseAxis()===t.axis}),l){var u=Cce(s),c=ETe(n,a,t,u);n=c.min,a=c.max}}return{extent:[n,a],fixMin:i.minFixed,fixMax:i.maxFixed}}function ETe(e,t,r,i){var n=r.axis.getExtent(),a=n[1]-n[0],o=cTe(i,r.axis);if(o===void 0)return{min:e,max:t};var s=1/0;q(o,function(f){s=Math.min(f.offset,s)});var l=-1/0;q(o,function(f){l=Math.max(f.offset+f.width,l)}),s=Math.abs(s),l=Math.abs(l);var u=s+l,c=t-e,h=1-(s+l)/a,d=c/h-c;return t+=d*(l/u),e-=d*(s/u),{min:e,max:t}}function H1(e,t){var r=t,i=kce(e,r),n=i.extent,a=r.get("splitNumber");e instanceof UN&&(e.base=r.get("logBase"));var o=e.type,s=r.get("interval"),l=o==="interval"||o==="time";e.setExtent(n[0],n[1]),e.calcNiceExtent({splitNumber:a,fixMin:i.fixMin,fixMax:i.fixMax,minInterval:l?r.get("minInterval"):null,maxInterval:l?r.get("maxInterval"):null}),s!=null&&e.setInterval&&e.setInterval(s)}function VC(e,t){if(t=t||e.get("type"),t)switch(t){case"category":return new NC({ordinalMeta:e.getOrdinalMeta?e.getOrdinalMeta():e.getCategories(),extent:[1/0,-1/0]});case"time":return new HN({locale:e.ecModel.getLocaleModel(),useUTC:e.ecModel.get("useUTC")});default:return new(ch.getClass(t)||xd)}}function MTe(e){var t=e.scale.getExtent(),r=t[0],i=t[1];return!(r>0&&i>0||r<0&&i<0)}function Oy(e){var t=e.getLabelModel().get("formatter"),r=e.type==="category"?e.scale.getExtent()[0]:null;return e.scale.type==="time"?function(i){return function(n,a){return e.scale.getFormattedLabel(n,a,i)}}(t):it(t)?function(i){return function(n){var a=e.scale.getLabel(n),o=i.replace("{value}",a??"");return o}}(t):xt(t)?function(i){return function(n,a){return r!=null&&(a=n.value-r),i(GN(e,n),a,n.level!=null?{level:n.level}:null)}}(t):function(i){return e.scale.getLabel(i)}}function GN(e,t){return e.type==="category"?e.scale.getLabel(t):t.value}function TTe(e){var t=e.model,r=e.scale;if(!(!t.get(["axisLabel","show"])||r.isBlank())){var i,n,a=r.getExtent();r instanceof NC?n=r.count():(i=r.getTicks(),n=i.length);var o=e.getLabelModel(),s=Oy(e),l,u=1;n>40&&(u=Math.ceil(n/40));for(var c=0;c<n;c+=u){var h=i?i[c]:{value:a[0]+c},d=s(h,c),f=o.getTextRect(d),p=PTe(f,o.get("rotate")||0);l?l.union(p):l=p}return l}}function PTe(e,t){var r=t*Math.PI/180,i=e.width,n=e.height,a=i*Math.abs(Math.cos(r))+Math.abs(n*Math.sin(r)),o=i*Math.abs(Math.sin(r))+Math.abs(n*Math.cos(r)),s=new qt(e.x,e.y,a,o);return s}function jN(e){var t=e.get("interval");return t??"auto"}function Rce(e){return e.type==="category"&&jN(e.getLabelModel())===0}function Z8(e,t){var r={};return q(e.mapDimensionsAll(t),function(i){r[wce(e,i)]=!0}),mr(r)}function DTe(e,t,r){t&&q(Z8(t,r),function(i){var n=t.getApproximateExtent(i);n[0]<e[0]&&(e[0]=n[0]),n[1]>e[1]&&(e[1]=n[1])})}var y4=function(){function e(){}return e.prototype.getNeedCrossZero=function(){var t=this.option;return!t.scale},e.prototype.getCoordSysModel=function(){},e}(),ITe=1e-8;function kW(e,t){return Math.abs(e-t)<ITe}function L0(e,t,r){var i=0,n=e[0];if(!n)return!1;for(var a=1;a<e.length;a++){var o=e[a];i+=Oh(n[0],n[1],o[0],o[1],t,r),n=o}var s=e[0];return(!kW(n[0],s[0])||!kW(n[1],s[1]))&&(i+=Oh(n[0],n[1],s[0],s[1],t,r)),i!==0}var LTe=[];function wM(e,t){for(var r=0;r<e.length;r++)Wa(e[r],e[r],t)}function RW(e,t,r,i){for(var n=0;n<e.length;n++){var a=e[n];i&&(a=i.project(a)),a&&isFinite(a[0])&&isFinite(a[1])&&(Rf(t,t,a),Of(r,r,a))}}function kTe(e){for(var t=0,r=0,i=0,n=e.length,a=e[n-1][0],o=e[n-1][1],s=0;s<n;s++){var l=e[s][0],u=e[s][1],c=a*u-l*o;t+=c,r+=(a+l)*c,i+=(o+u)*c,a=l,o=u}return t?[r/t/3,i/t/3,t]:[e[0][0]||0,e[0][1]||0]}var Oce=function(){function e(t){this.name=t}return e.prototype.setCenter=function(t){this._center=t},e.prototype.getCenter=function(){var t=this._center;return t||(t=this._center=this.calcCenter()),t},e}(),OW=function(){function e(t,r){this.type="polygon",this.exterior=t,this.interiors=r}return e}(),BW=function(){function e(t){this.type="linestring",this.points=t}return e}(),Bce=function(e){_e(t,e);function t(r,i,n){var a=e.call(this,r)||this;return a.type="geoJSON",a.geometries=i,a._center=n&&[n[0],n[1]],a}return t.prototype.calcCenter=function(){for(var r=this.geometries,i,n=0,a=0;a<r.length;a++){var o=r[a],s=o.exterior,l=s&&s.length;l>n&&(i=o,n=l)}if(i)return kTe(i.exterior);var u=this.getBoundingRect();return[u.x+u.width/2,u.y+u.height/2]},t.prototype.getBoundingRect=function(r){var i=this._rect;if(i&&!r)return i;var n=[1/0,1/0],a=[-1/0,-1/0],o=this.geometries;return q(o,function(s){s.type==="polygon"?RW(s.exterior,n,a,r):q(s.points,function(l){RW(l,n,a,r)})}),isFinite(n[0])&&isFinite(n[1])&&isFinite(a[0])&&isFinite(a[1])||(n[0]=n[1]=a[0]=a[1]=0),i=new qt(n[0],n[1],a[0]-n[0],a[1]-n[1]),r||(this._rect=i),i},t.prototype.contain=function(r){var i=this.getBoundingRect(),n=this.geometries;if(!i.contain(r[0],r[1]))return!1;e:for(var a=0,o=n.length;a<o;a++){var s=n[a];if(s.type==="polygon"){var l=s.exterior,u=s.interiors;if(L0(l,r[0],r[1])){for(var c=0;c<(u?u.length:0);c++)if(L0(u[c],r[0],r[1]))continue e;return!0}}}return!1},t.prototype.transformTo=function(r,i,n,a){var o=this.getBoundingRect(),s=o.width/o.height;n?a||(a=n/s):n=s*a;for(var l=new qt(r,i,n,a),u=o.calculateTransform(l),c=this.geometries,h=0;h<c.length;h++){var d=c[h];d.type==="polygon"?(wM(d.exterior,u),q(d.interiors,function(f){wM(f,u)})):q(d.points,function(f){wM(f,u)})}o=this._rect,o.copy(l),this._center=[o.x+o.width/2,o.y+o.height/2]},t.prototype.cloneShallow=function(r){r==null&&(r=this.name);var i=new t(r,this.geometries,this._center);return i._rect=this._rect,i.transformTo=null,i},t}(Oce),RTe=function(e){_e(t,e);function t(r,i){var n=e.call(this,r)||this;return n.type="geoSVG",n._elOnlyForCalculate=i,n}return t.prototype.calcCenter=function(){for(var r=this._elOnlyForCalculate,i=r.getBoundingRect(),n=[i.x+i.width/2,i.y+i.height/2],a=uC(LTe),o=r;o&&!o.isGeoSVGGraphicRoot;)od(a,o.getLocalTransform(),a),o=o.parent;return wy(a,a),Wa(n,n,a),n},t}(Oce);function OTe(e){if(!e.UTF8Encoding)return e;var t=e,r=t.UTF8Scale;r==null&&(r=1024);var i=t.features;return q(i,function(n){var a=n.geometry,o=a.encodeOffsets,s=a.coordinates;if(o)switch(a.type){case"LineString":a.coordinates=Nce(s,o,r);break;case"Polygon":_M(s,o,r);break;case"MultiLineString":_M(s,o,r);break;case"MultiPolygon":q(s,function(l,u){return _M(l,o[u],r)})}}),t.UTF8Encoding=!1,t}function _M(e,t,r){for(var i=0;i<e.length;i++)e[i]=Nce(e[i],t[i],r)}function Nce(e,t,r){for(var i=[],n=t[0],a=t[1],o=0;o<e.length;o+=2){var s=e.charCodeAt(o)-64,l=e.charCodeAt(o+1)-64;s=s>>1^-(s&1),l=l>>1^-(l&1),s+=n,l+=a,n=s,a=l,i.push([s/r,l/r])}return i}function BTe(e,t){return e=OTe(e),qe(ni(e.features,function(r){return r.geometry&&r.properties&&r.geometry.coordinates.length>0}),function(r){var i=r.properties,n=r.geometry,a=[];switch(n.type){case"Polygon":var o=n.coordinates;a.push(new OW(o[0],o.slice(1)));break;case"MultiPolygon":q(n.coordinates,function(l){l[0]&&a.push(new OW(l[0],l.slice(1)))});break;case"LineString":a.push(new BW([n.coordinates]));break;case"MultiLineString":a.push(new BW(n.coordinates))}var s=new Bce(i[t||"name"],a,i.cp);return s.properties=i,s})}var sw=Pr();function Vce(e,t){var r=qe(t,function(i){return e.scale.parse(i)});return e.type==="time"&&r.length>0&&(r.sort(),r.unshift(r[0]),r.push(r[r.length-1])),r}function NTe(e){var t=e.getLabelModel().get("customValues");if(t){var r=Oy(e);return{labels:Vce(e,t).map(function(i){var n={value:i};return{formattedLabel:r(n),rawLabel:e.scale.getLabel(n),tickValue:i}})}}return e.type==="category"?FTe(e):HTe(e)}function VTe(e,t){var r=e.getTickModel().get("customValues");return r?{ticks:Vce(e,r)}:e.type==="category"?zTe(e,t):{ticks:qe(e.scale.getTicks(),function(i){return i.value})}}function FTe(e){var t=e.getLabelModel(),r=Fce(e,t);return!t.get("show")||e.scale.isBlank()?{labels:[],labelCategoryInterval:r.labelCategoryInterval}:r}function Fce(e,t){var r=zce(e,"labels"),i=jN(t),n=Hce(r,i);if(n)return n;var a,o;return xt(i)?a=jce(e,i):(o=i==="auto"?UTe(e):i,a=Gce(e,o)),Uce(r,i,{labels:a,labelCategoryInterval:o})}function zTe(e,t){var r=zce(e,"ticks"),i=jN(t),n=Hce(r,i);if(n)return n;var a,o;if((!t.get("show")||e.scale.isBlank())&&(a=[]),xt(i))a=jce(e,i,!0);else if(i==="auto"){var s=Fce(e,e.getLabelModel());o=s.labelCategoryInterval,a=qe(s.labels,function(l){return l.tickValue})}else o=i,a=Gce(e,o,!0);return Uce(r,i,{ticks:a,tickCategoryInterval:o})}function HTe(e){var t=e.scale.getTicks(),r=Oy(e);return{labels:qe(t,function(i,n){return{level:i.level,formattedLabel:r(i,n),rawLabel:e.scale.getLabel(i),tickValue:i.value}})}}function zce(e,t){return sw(e)[t]||(sw(e)[t]=[])}function Hce(e,t){for(var r=0;r<e.length;r++)if(e[r].key===t)return e[r].value}function Uce(e,t,r){return e.push({key:t,value:r}),r}function UTe(e){var t=sw(e).autoInterval;return t??(sw(e).autoInterval=e.calculateCategoryInterval())}function GTe(e){var t=jTe(e),r=Oy(e),i=(t.axisRotate-t.labelRotate)/180*Math.PI,n=e.scale,a=n.getExtent(),o=n.count();if(a[1]-a[0]<1)return 0;var s=1;o>40&&(s=Math.max(1,Math.floor(o/40)));for(var l=a[0],u=e.dataToCoord(l+1)-e.dataToCoord(l),c=Math.abs(u*Math.cos(i)),h=Math.abs(u*Math.sin(i)),d=0,f=0;l<=a[1];l+=s){var p=0,v=0,m=l4(r({value:l}),t.font,"center","top");p=m.width*1.3,v=m.height*1.3,d=Math.max(d,p,7),f=Math.max(f,v,7)}var g=d/c,y=f/h;isNaN(g)&&(g=1/0),isNaN(y)&&(y=1/0);var x=Math.max(0,Math.floor(Math.min(g,y))),b=sw(e.model),_=e.getExtent(),w=b.lastAutoInterval,S=b.lastTickCount;return w!=null&&S!=null&&Math.abs(w-x)<=1&&Math.abs(S-o)<=1&&w>x&&b.axisExtent0===_[0]&&b.axisExtent1===_[1]?x=w:(b.lastTickCount=o,b.lastAutoInterval=x,b.axisExtent0=_[0],b.axisExtent1=_[1]),x}function jTe(e){var t=e.getLabelModel();return{axisRotate:e.getRotate?e.getRotate():e.isHorizontal&&!e.isHorizontal()?90:0,labelRotate:t.get("rotate")||0,font:t.getFont()}}function Gce(e,t,r){var i=Oy(e),n=e.scale,a=n.getExtent(),o=e.getLabelModel(),s=[],l=Math.max((t||0)+1,1),u=a[0],c=n.count();u!==0&&l>1&&c/l>2&&(u=Math.round(Math.ceil(u/l)*l));var h=Rce(e),d=o.get("showMinLabel")||h,f=o.get("showMaxLabel")||h;d&&u!==a[0]&&v(a[0]);for(var p=u;p<=a[1];p+=l)v(p);f&&p-l!==a[1]&&v(a[1]);function v(m){var g={value:m};s.push(r?m:{formattedLabel:i(g),rawLabel:n.getLabel(g),tickValue:m})}return s}function jce(e,t,r){var i=e.scale,n=Oy(e),a=[];return q(i.getTicks(),function(o){var s=i.getLabel(o),l=o.value;t(o.value,s)&&a.push(r?l:{formattedLabel:n(o),rawLabel:s,tickValue:l})}),a}var NW=[0,1],Fu=function(){function e(t,r,i){this.onBand=!1,this.inverse=!1,this.dim=t,this.scale=r,this._extent=i||[0,0]}return e.prototype.contain=function(t){var r=this._extent,i=Math.min(r[0],r[1]),n=Math.max(r[0],r[1]);return t>=i&&t<=n},e.prototype.containData=function(t){return this.scale.contain(t)},e.prototype.getExtent=function(){return this._extent.slice()},e.prototype.getPixelPrecision=function(t){return qse(t||this.scale.getExtent(),this._extent)},e.prototype.setExtent=function(t,r){var i=this._extent;i[0]=t,i[1]=r},e.prototype.dataToCoord=function(t,r){var i=this._extent,n=this.scale;return t=n.normalize(t),this.onBand&&n.type==="ordinal"&&(i=i.slice(),VW(i,n.count())),ti(t,NW,i,r)},e.prototype.coordToData=function(t,r){var i=this._extent,n=this.scale;this.onBand&&n.type==="ordinal"&&(i=i.slice(),VW(i,n.count()));var a=ti(t,i,NW,r);return this.scale.scale(a)},e.prototype.pointToData=function(t,r){},e.prototype.getTicksCoords=function(t){t=t||{};var r=t.tickModel||this.getTickModel(),i=VTe(this,r),n=i.ticks,a=qe(n,function(s){return{coord:this.dataToCoord(this.scale.type==="ordinal"?this.scale.getRawOrdinalNumber(s):s),tickValue:s}},this),o=r.get("alignWithLabel");return WTe(this,a,o,t.clamp),a},e.prototype.getMinorTicksCoords=function(){if(this.scale.type==="ordinal")return[];var t=this.model.getModel("minorTick"),r=t.get("splitNumber");r>0&&r<100||(r=5);var i=this.scale.getMinorTicks(r),n=qe(i,function(a){return qe(a,function(o){return{coord:this.dataToCoord(o),tickValue:o}},this)},this);return n},e.prototype.getViewLabels=function(){return NTe(this).labels},e.prototype.getLabelModel=function(){return this.model.getModel("axisLabel")},e.prototype.getTickModel=function(){return this.model.getModel("axisTick")},e.prototype.getBandWidth=function(){var t=this._extent,r=this.scale.getExtent(),i=r[1]-r[0]+(this.onBand?1:0);i===0&&(i=1);var n=Math.abs(t[1]-t[0]);return Math.abs(n)/i},e.prototype.calculateCategoryInterval=function(){return GTe(this)},e}();function VW(e,t){var r=e[1]-e[0],i=t,n=r/i/2;e[0]+=n,e[1]-=n}function WTe(e,t,r,i){var n=t.length;if(!e.onBand||r||!n)return;var a=e.getExtent(),o,s;if(n===1)t[0].coord=a[0],o=t[1]={coord:a[1]};else{var l=t[n-1].tickValue-t[0].tickValue,u=(t[n-1].coord-t[0].coord)/l;q(t,function(f){f.coord-=u/2});var c=e.scale.getExtent();s=1+c[1]-t[n-1].tickValue,o={coord:t[n-1].coord+u*s},t.push(o)}var h=a[0]>a[1];d(t[0].coord,a[0])&&(i?t[0].coord=a[0]:t.shift()),i&&d(a[0],t[0].coord)&&t.unshift({coord:a[0]}),d(a[1],o.coord)&&(i?o.coord=a[1]:t.pop()),i&&d(o.coord,a[1])&&t.push({coord:a[1]});function d(f,p){return f=rn(f),p=rn(p),h?f>p:f<p}}var I2=Math.PI*2,t0=$c.CMD,qTe=["top","right","bottom","left"];function YTe(e,t,r,i,n){var a=r.width,o=r.height;switch(e){case"top":i.set(r.x+a/2,r.y-t),n.set(0,-1);break;case"bottom":i.set(r.x+a/2,r.y+o+t),n.set(0,1);break;case"left":i.set(r.x-t,r.y+o/2),n.set(-1,0);break;case"right":i.set(r.x+a+t,r.y+o/2),n.set(1,0);break}}function XTe(e,t,r,i,n,a,o,s,l){o-=e,s-=t;var u=Math.sqrt(o*o+s*s);o/=u,s/=u;var c=o*r+e,h=s*r+t;if(Math.abs(i-n)%I2<1e-4)return l[0]=c,l[1]=h,u-r;if(a){var d=i;i=zs(n),n=zs(d)}else i=zs(i),n=zs(n);i>n&&(n+=I2);var f=Math.atan2(s,o);if(f<0&&(f+=I2),f>=i&&f<=n||f+I2>=i&&f+I2<=n)return l[0]=c,l[1]=h,u-r;var p=r*Math.cos(i)+e,v=r*Math.sin(i)+t,m=r*Math.cos(n)+e,g=r*Math.sin(n)+t,y=(p-o)*(p-o)+(v-s)*(v-s),x=(m-o)*(m-o)+(g-s)*(g-s);return y<x?(l[0]=p,l[1]=v,Math.sqrt(y)):(l[0]=m,l[1]=g,Math.sqrt(x))}function Q8(e,t,r,i,n,a,o,s){var l=n-e,u=a-t,c=r-e,h=i-t,d=Math.sqrt(c*c+h*h);c/=d,h/=d;var f=l*c+u*h,p=f/d;s&&(p=Math.min(Math.max(p,0),1)),p*=d;var v=o[0]=e+p*c,m=o[1]=t+p*h;return Math.sqrt((v-n)*(v-n)+(m-a)*(m-a))}function Wce(e,t,r,i,n,a,o){r<0&&(e=e+r,r=-r),i<0&&(t=t+i,i=-i);var s=e+r,l=t+i,u=o[0]=Math.min(Math.max(n,e),s),c=o[1]=Math.min(Math.max(a,t),l);return Math.sqrt((u-n)*(u-n)+(c-a)*(c-a))}var lu=[];function ZTe(e,t,r){var i=Wce(t.x,t.y,t.width,t.height,e.x,e.y,lu);return r.set(lu[0],lu[1]),i}function QTe(e,t,r){for(var i=0,n=0,a=0,o=0,s,l,u=1/0,c=t.data,h=e.x,d=e.y,f=0;f<c.length;){var p=c[f++];f===1&&(i=c[f],n=c[f+1],a=i,o=n);var v=u;switch(p){case t0.M:a=c[f++],o=c[f++],i=a,n=o;break;case t0.L:v=Q8(i,n,c[f],c[f+1],h,d,lu,!0),i=c[f++],n=c[f++];break;case t0.C:v=Tse(i,n,c[f++],c[f++],c[f++],c[f++],c[f],c[f+1],h,d,lu),i=c[f++],n=c[f++];break;case t0.Q:v=Dse(i,n,c[f++],c[f++],c[f],c[f+1],h,d,lu),i=c[f++],n=c[f++];break;case t0.A:var m=c[f++],g=c[f++],y=c[f++],x=c[f++],b=c[f++],_=c[f++];f+=1;var w=!!(1-c[f++]);s=Math.cos(b)*y+m,l=Math.sin(b)*x+g,f<=1&&(a=s,o=l);var S=(h-m)*x/y+m;v=XTe(m,g,x,b,b+_,w,S,d,lu),i=Math.cos(b+_)*y+m,n=Math.sin(b+_)*x+g;break;case t0.R:a=i=c[f++],o=n=c[f++];var A=c[f++],M=c[f++];v=Wce(a,o,A,M,h,d,lu);break;case t0.Z:v=Q8(i,n,a,o,h,d,lu,!0),i=a,n=o;break}v<u&&(u=v,r.set(lu[0],lu[1]))}return u}var pu=new Ut,Ei=new Ut,cn=new Ut,Lc=new Ut,_c=new Ut;function FW(e,t){if(e){var r=e.getTextGuideLine(),i=e.getTextContent();if(i&&r){var n=e.textGuideLineConfig||{},a=[[0,0],[0,0],[0,0]],o=n.candidates||qTe,s=i.getBoundingRect().clone();s.applyTransform(i.getComputedTransform());var l=1/0,u=n.anchor,c=e.getComputedTransform(),h=c&&wy([],c),d=t.get("length2")||0;u&&cn.copy(u);for(var f=0;f<o.length;f++){var p=o[f];YTe(p,0,s,pu,Lc),Ut.scaleAndAdd(Ei,pu,Lc,d),Ei.transform(h);var v=e.getBoundingRect(),m=u?u.distance(Ei):e instanceof or?QTe(Ei,e.path,cn):ZTe(Ei,v,cn);m<l&&(l=m,Ei.transform(c),cn.transform(c),cn.toArray(a[0]),Ei.toArray(a[1]),pu.toArray(a[2]))}qce(a,t.get("minTurnAngle")),r.setShape({points:a})}}}var K8=[],Vo=new Ut;function qce(e,t){if(t<=180&&t>0){t=t/180*Math.PI,pu.fromArray(e[0]),Ei.fromArray(e[1]),cn.fromArray(e[2]),Ut.sub(Lc,pu,Ei),Ut.sub(_c,cn,Ei);var r=Lc.len(),i=_c.len();if(!(r<.001||i<.001)){Lc.scale(1/r),_c.scale(1/i);var n=Lc.dot(_c),a=Math.cos(t);if(a<n){var o=Q8(Ei.x,Ei.y,cn.x,cn.y,pu.x,pu.y,K8,!1);Vo.fromArray(K8),Vo.scaleAndAdd(_c,o/Math.tan(Math.PI-t));var s=cn.x!==Ei.x?(Vo.x-Ei.x)/(cn.x-Ei.x):(Vo.y-Ei.y)/(cn.y-Ei.y);if(isNaN(s))return;s<0?Ut.copy(Vo,Ei):s>1&&Ut.copy(Vo,cn),Vo.toArray(e[1])}}}}function KTe(e,t,r){if(r<=180&&r>0){r=r/180*Math.PI,pu.fromArray(e[0]),Ei.fromArray(e[1]),cn.fromArray(e[2]),Ut.sub(Lc,Ei,pu),Ut.sub(_c,cn,Ei);var i=Lc.len(),n=_c.len();if(!(i<.001||n<.001)){Lc.scale(1/i),_c.scale(1/n);var a=Lc.dot(t),o=Math.cos(r);if(a<o){var s=Q8(Ei.x,Ei.y,cn.x,cn.y,pu.x,pu.y,K8,!1);Vo.fromArray(K8);var l=Math.PI/2,u=Math.acos(_c.dot(t)),c=l+u-r;if(c>=l)Ut.copy(Vo,cn);else{Vo.scaleAndAdd(_c,s/Math.tan(Math.PI/2-c));var h=cn.x!==Ei.x?(Vo.x-Ei.x)/(cn.x-Ei.x):(Vo.y-Ei.y)/(cn.y-Ei.y);if(isNaN(h))return;h<0?Ut.copy(Vo,Ei):h>1&&Ut.copy(Vo,cn)}Vo.toArray(e[1])}}}}function AM(e,t,r,i){var n=r==="normal",a=n?e:e.ensureState(r);a.ignore=t;var o=i.get("smooth");o&&o===!0&&(o=.3),a.shape=a.shape||{},o>0&&(a.shape.smooth=o);var s=i.getModel("lineStyle").getLineStyle();n?e.useStyle(s):a.style=s}function JTe(e,t){var r=t.smooth,i=t.points;if(i)if(e.moveTo(i[0][0],i[0][1]),r>0&&i.length>=3){var n=kf(i[0],i[1]),a=kf(i[1],i[2]);if(!n||!a){e.lineTo(i[1][0],i[1][1]),e.lineTo(i[2][0],i[2][1]);return}var o=Math.min(n,a)*r,s=hA([],i[1],i[0],o/n),l=hA([],i[1],i[2],o/a),u=hA([],s,l,.5);e.bezierCurveTo(s[0],s[1],s[0],s[1],u[0],u[1]),e.bezierCurveTo(l[0],l[1],l[0],l[1],i[2][0],i[2][1])}else for(var c=1;c<i.length;c++)e.lineTo(i[c][0],i[c][1])}function WN(e,t,r){var i=e.getTextGuideLine(),n=e.getTextContent();if(!n){i&&e.removeTextGuideLine();return}for(var a=t.normal,o=a.get("show"),s=n.ignore,l=0;l<Jb.length;l++){var u=Jb[l],c=t[u],h=u==="normal";if(c){var d=c.get("show"),f=h?s:Lt(n.states[u]&&n.states[u].ignore,s);if(f||!Lt(d,o)){var p=h?i:i&&i.states[u];p&&(p.ignore=!0),i&&AM(i,!0,u,c);continue}i||(i=new $o,e.setTextGuideLine(i),!h&&(s||!o)&&AM(i,!0,"normal",t.normal),e.stateProxy&&(i.stateProxy=e.stateProxy)),AM(i,!1,u,c)}}if(i){bt(i.style,r),i.style.fill=null;var v=a.get("showAbove"),m=e.textGuideLineConfig=e.textGuideLineConfig||{};m.showAbove=v||!1,i.buildPath=JTe}}function qN(e,t){t=t||"labelLine";for(var r={normal:e.getModel(t)},i=0;i<Xo.length;i++){var n=Xo[i];r[n]=e.getModel([n,t])}return r}function Yce(e){for(var t=[],r=0;r<e.length;r++){var i=e[r];if(!i.defaultAttr.ignore){var n=i.label,a=n.getComputedTransform(),o=n.getBoundingRect(),s=!a||a[1]<1e-5&&a[2]<1e-5,l=n.style.margin||0,u=o.clone();u.applyTransform(a),u.x-=l/2,u.y-=l/2,u.width+=l,u.height+=l;var c=s?new O8(o,a):null;t.push({label:n,labelLine:i.labelLine,rect:u,localRect:o,obb:c,priority:i.priority,defaultAttr:i.defaultAttr,layoutOption:i.computedLayoutOption,axisAligned:s,transform:a})}}return t}function Xce(e,t,r,i,n,a){var o=e.length;if(o<2)return;e.sort(function(A,M){return A.rect[t]-M.rect[t]});for(var s=0,l,u=!1,c=0,h=0;h<o;h++){var d=e[h],f=d.rect;l=f[t]-s,l<0&&(f[t]-=l,d.label[t]-=l,u=!0);var p=Math.max(-l,0);c+=p,s=f[t]+f[r]}c>0&&a&&_(-c/o,0,o);var v=e[0],m=e[o-1],g,y;x(),g<0&&w(-g,.8),y<0&&w(y,.8),x(),b(g,y,1),b(y,g,-1),x(),g<0&&S(-g),y<0&&S(y);function x(){g=v.rect[t]-i,y=n-m.rect[t]-m.rect[r]}function b(A,M,E){if(A<0){var T=Math.min(M,-A);if(T>0){_(T*E,0,o);var L=T+A;L<0&&w(-L*E,1)}else w(-A*E,1)}}function _(A,M,E){A!==0&&(u=!0);for(var T=M;T<E;T++){var L=e[T],P=L.rect;P[t]+=A,L.label[t]+=A}}function w(A,M){for(var E=[],T=0,L=1;L<o;L++){var P=e[L-1].rect,C=Math.max(e[L].rect[t]-P[t]-P[r],0);E.push(C),T+=C}if(T){var D=Math.min(Math.abs(A)/T,M);if(A>0)for(var L=0;L<o-1;L++){var I=E[L]*D;_(I,0,L+1)}else for(var L=o-1;L>0;L--){var I=E[L-1]*D;_(-I,L,o)}}}function S(A){var M=A<0?-1:1;A=Math.abs(A);for(var E=Math.ceil(A/(o-1)),T=0;T<o-1;T++)if(M>0?_(E,0,T+1):_(-E,o-T-1,o),A-=E,A<=0)return}return u}function $Te(e,t,r,i){return Xce(e,"x","width",t,r,i)}function Zce(e,t,r,i){return Xce(e,"y","height",t,r,i)}function Qce(e){var t=[];e.sort(function(v,m){return m.priority-v.priority});var r=new qt(0,0,0,0);function i(v){if(!v.ignore){var m=v.ensureState("emphasis");m.ignore==null&&(m.ignore=!1)}v.ignore=!0}for(var n=0;n<e.length;n++){var a=e[n],o=a.axisAligned,s=a.localRect,l=a.transform,u=a.label,c=a.labelLine;r.copy(a.rect),r.width-=.1,r.height-=.1,r.x+=.05,r.y+=.05;for(var h=a.obb,d=!1,f=0;f<t.length;f++){var p=t[f];if(r.intersect(p.rect)){if(o&&p.axisAligned){d=!0;break}if(p.obb||(p.obb=new O8(p.localRect,p.transform)),h||(h=new O8(s,l)),h.intersect(p.obb)){d=!0;break}}}d?(i(u),c&&i(c)):(u.attr("ignore",a.defaultAttr.ignore),c&&c.attr("ignore",a.defaultAttr.labelGuideIgnore),t.push(a))}}function e9e(e){if(e){for(var t=[],r=0;r<e.length;r++)t.push(e[r].slice());return t}}function t9e(e,t){var r=e.label,i=t&&t.getTextGuideLine();return{dataIndex:e.dataIndex,dataType:e.dataType,seriesIndex:e.seriesModel.seriesIndex,text:e.label.style.text,rect:e.hostRect,labelRect:e.rect,align:r.style.align,verticalAlign:r.style.verticalAlign,labelLinePoints:e9e(i&&i.shape.points)}}var zW=["align","verticalAlign","width","height","fontSize"],Mo=new Qh,SM=Pr(),r9e=Pr();function W3(e,t,r){for(var i=0;i<r.length;i++){var n=r[i];t[n]!=null&&(e[n]=t[n])}}var q3=["x","y","rotation"],i9e=function(){function e(){this._labelList=[],this._chartViewList=[]}return e.prototype.clearLabels=function(){this._labelList=[],this._chartViewList=[]},e.prototype._addLabel=function(t,r,i,n,a){var o=n.style,s=n.__hostTarget,l=s.textConfig||{},u=n.getComputedTransform(),c=n.getBoundingRect().plain();qt.applyTransform(c,c,u),u?Mo.setLocalTransform(u):(Mo.x=Mo.y=Mo.rotation=Mo.originX=Mo.originY=0,Mo.scaleX=Mo.scaleY=1),Mo.rotation=zs(Mo.rotation);var h=n.__hostTarget,d;if(h){d=h.getBoundingRect().plain();var f=h.getComputedTransform();qt.applyTransform(d,d,f)}var p=d&&h.getTextGuideLine();this._labelList.push({label:n,labelLine:p,seriesModel:i,dataIndex:t,dataType:r,layoutOption:a,computedLayoutOption:null,rect:c,hostRect:d,priority:d?d.width*d.height:0,defaultAttr:{ignore:n.ignore,labelGuideIgnore:p&&p.ignore,x:Mo.x,y:Mo.y,scaleX:Mo.scaleX,scaleY:Mo.scaleY,rotation:Mo.rotation,style:{x:o.x,y:o.y,align:o.align,verticalAlign:o.verticalAlign,width:o.width,height:o.height,fontSize:o.fontSize},cursor:n.cursor,attachedPos:l.position,attachedRot:l.rotation}})},e.prototype.addLabelsOfSeries=function(t){var r=this;this._chartViewList.push(t);var i=t.__model,n=i.get("labelLayout");(xt(n)||mr(n).length)&&t.group.traverse(function(a){if(a.ignore)return!0;var o=a.getTextContent(),s=Dt(a);o&&!o.disableLabelLayout&&r._addLabel(s.dataIndex,s.dataType,i,o,n)})},e.prototype.updateLayoutConfig=function(t){var r=t.getWidth(),i=t.getHeight();function n(x,b){return function(){FW(x,b)}}for(var a=0;a<this._labelList.length;a++){var o=this._labelList[a],s=o.label,l=s.__hostTarget,u=o.defaultAttr,c=void 0;xt(o.layoutOption)?c=o.layoutOption(t9e(o,l)):c=o.layoutOption,c=c||{},o.computedLayoutOption=c;var h=Math.PI/180;l&&l.setTextConfig({local:!1,position:c.x!=null||c.y!=null?null:u.attachedPos,rotation:c.rotate!=null?c.rotate*h:u.attachedRot,offset:[c.dx||0,c.dy||0]});var d=!1;if(c.x!=null?(s.x=et(c.x,r),s.setStyle("x",0),d=!0):(s.x=u.x,s.setStyle("x",u.style.x)),c.y!=null?(s.y=et(c.y,i),s.setStyle("y",0),d=!0):(s.y=u.y,s.setStyle("y",u.style.y)),c.labelLinePoints){var f=l.getTextGuideLine();f&&(f.setShape({points:c.labelLinePoints}),d=!1)}var p=SM(s);p.needsUpdateLabelLine=d,s.rotation=c.rotate!=null?c.rotate*h:u.rotation,s.scaleX=u.scaleX,s.scaleY=u.scaleY;for(var v=0;v<zW.length;v++){var m=zW[v];s.setStyle(m,c[m]!=null?c[m]:u.style[m])}if(c.draggable){if(s.draggable=!0,s.cursor="move",l){var g=o.seriesModel;if(o.dataIndex!=null){var y=o.seriesModel.getData(o.dataType);g=y.getItemModel(o.dataIndex)}s.on("drag",n(l,g.getModel("labelLine")))}}else s.off("drag"),s.cursor=u.cursor}},e.prototype.layout=function(t){var r=t.getWidth(),i=t.getHeight(),n=Yce(this._labelList),a=ni(n,function(l){return l.layoutOption.moveOverlap==="shiftX"}),o=ni(n,function(l){return l.layoutOption.moveOverlap==="shiftY"});$Te(a,0,r),Zce(o,0,i);var s=ni(n,function(l){return l.layoutOption.hideOverlap});Qce(s)},e.prototype.processLabelsOverall=function(){var t=this;q(this._chartViewList,function(r){var i=r.__model,n=r.ignoreLabelLineUpdate,a=i.isAnimationEnabled();r.group.traverse(function(o){if(o.ignore&&!o.forceLabelAnimation)return!0;var s=!n,l=o.getTextContent();!s&&l&&(s=SM(l).needsUpdateLabelLine),s&&t._updateLabelLine(o,i),a&&t._animateLabels(o,i)})})},e.prototype._updateLabelLine=function(t,r){var i=t.getTextContent(),n=Dt(t),a=n.dataIndex;if(i&&a!=null){var o=r.getData(n.dataType),s=o.getItemModel(a),l={},u=o.getItemVisual(a,"style");if(u){var c=o.getVisual("drawType");l.stroke=u[c]}var h=s.getModel("labelLine");WN(t,qN(s),l),FW(t,h)}},e.prototype._animateLabels=function(t,r){var i=t.getTextContent(),n=t.getTextGuideLine();if(i&&(t.forceLabelAnimation||!i.ignore&&!i.invisible&&!t.disableLabelAnimation&&!u1(t))){var a=SM(i),o=a.oldLayout,s=Dt(t),l=s.dataIndex,u={x:i.x,y:i.y,rotation:i.rotation},c=r.getData(s.dataType);if(o){i.attr(o);var d=t.prevStates;d&&(tr(d,"select")>=0&&i.attr(a.oldLayoutSelect),tr(d,"emphasis")>=0&&i.attr(a.oldLayoutEmphasis)),Nr(i,u,r,l)}else if(i.attr(u),!My(i).valueAnimation){var h=Lt(i.style.opacity,1);i.style.opacity=0,Vi(i,{style:{opacity:h}},r,l)}if(a.oldLayout=u,i.states.select){var f=a.oldLayoutSelect={};W3(f,u,q3),W3(f,i.states.select,q3)}if(i.states.emphasis){var p=a.oldLayoutEmphasis={};W3(p,u,q3),W3(p,i.states.emphasis,q3)}Hle(i,l,c,r,r)}if(n&&!n.ignore&&!n.invisible){var a=r9e(n),o=a.oldLayout,v={points:n.shape.points};o?(n.attr({shape:o}),Nr(n,{shape:v},r)):(n.setShape(v),n.style.strokePercent=0,Vi(n,{style:{strokePercent:1}},r)),a.oldLayout=v}},e}(),CM=Pr();function n9e(e){e.registerUpdateLifecycle("series:beforeupdate",function(t,r,i){var n=CM(r).labelManager;n||(n=CM(r).labelManager=new i9e),n.clearLabels()}),e.registerUpdateLifecycle("series:layoutlabels",function(t,r,i){var n=CM(r).labelManager;i.updatedSeries.forEach(function(a){n.addLabelsOfSeries(r.getViewOfSeriesModel(a))}),n.updateLayoutConfig(r),n.layout(r),n.processLabelsOverall()})}var EM=Math.sin,MM=Math.cos,Kce=Math.PI,r0=Math.PI*2,a9e=180/Kce,Jce=function(){function e(){}return e.prototype.reset=function(t){this._start=!0,this._d=[],this._str="",this._p=Math.pow(10,t||4)},e.prototype.moveTo=function(t,r){this._add("M",t,r)},e.prototype.lineTo=function(t,r){this._add("L",t,r)},e.prototype.bezierCurveTo=function(t,r,i,n,a,o){this._add("C",t,r,i,n,a,o)},e.prototype.quadraticCurveTo=function(t,r,i,n){this._add("Q",t,r,i,n)},e.prototype.arc=function(t,r,i,n,a,o){this.ellipse(t,r,i,i,0,n,a,o)},e.prototype.ellipse=function(t,r,i,n,a,o,s,l){var u=s-o,c=!l,h=Math.abs(u),d=Vf(h-r0)||(c?u>=r0:-u>=r0),f=u>0?u%r0:u%r0+r0,p=!1;d?p=!0:Vf(h)?p=!1:p=f>=Kce==!!c;var v=t+i*MM(o),m=r+n*EM(o);this._start&&this._add("M",v,m);var g=Math.round(a*a9e);if(d){var y=1/this._p,x=(c?1:-1)*(r0-y);this._add("A",i,n,g,1,+c,t+i*MM(o+x),r+n*EM(o+x)),y>.01&&this._add("A",i,n,g,0,+c,v,m)}else{var b=t+i*MM(s),_=r+n*EM(s);this._add("A",i,n,g,+p,+c,b,_)}},e.prototype.rect=function(t,r,i,n){this._add("M",t,r),this._add("l",i,0),this._add("l",0,n),this._add("l",-i,0),this._add("Z")},e.prototype.closePath=function(){this._d.length>0&&this._add("Z")},e.prototype._add=function(t,r,i,n,a,o,s,l,u){for(var c=[],h=this._p,d=1;d<arguments.length;d++){var f=arguments[d];if(isNaN(f)){this._invalid=!0;return}c.push(Math.round(f*h)/h)}this._d.push(t+c.join(" ")),this._start=t==="Z"},e.prototype.generateStr=function(){this._str=this._invalid?"":this._d.join(""),this._d=[]},e.prototype.getStr=function(){return this._str},e}(),YN="none",o9e=Math.round;function s9e(e){var t=e.fill;return t!=null&&t!==YN}function l9e(e){var t=e.stroke;return t!=null&&t!==YN}var RL=["lineCap","miterLimit","lineJoin"],u9e=qe(RL,function(e){return"stroke-"+e.toLowerCase()});function c9e(e,t,r,i){var n=t.opacity==null?1:t.opacity;if(r instanceof Ta){e("opacity",n);return}if(s9e(t)){var a=Zb(t.fill);e("fill",a.color);var o=t.fillOpacity!=null?t.fillOpacity*a.opacity*n:a.opacity*n;o<1&&e("fill-opacity",o)}else e("fill",YN);if(l9e(t)){var s=Zb(t.stroke);e("stroke",s.color);var l=t.strokeNoScale?r.getLineScale():1,u=l?(t.lineWidth||0)/l:0,c=t.strokeOpacity!=null?t.strokeOpacity*s.opacity*n:s.opacity*n,h=t.strokeFirst;if(u!==1&&e("stroke-width",u),h&&e("paint-order",h?"stroke":"fill"),c<1&&e("stroke-opacity",c),t.lineDash){var d=kN(r),f=d[0],p=d[1];f&&(p=o9e(p||0),e("stroke-dasharray",f.join(",")),(p||i)&&e("stroke-dashoffset",p))}for(var v=0;v<RL.length;v++){var m=RL[v];if(t[m]!==k8[m]){var g=t[m]||k8[m];g&&e(u9e[v],g)}}}}var $ce="http://www.w3.org/2000/svg",ehe="http://www.w3.org/1999/xlink",h9e="http://www.w3.org/2000/xmlns/",d9e="http://www.w3.org/XML/1998/namespace",HW="ecmeta_";function the(e){return document.createElementNS($ce,e)}function ea(e,t,r,i,n){return{tag:e,attrs:r||{},children:i,text:n,key:t}}function f9e(e,t){var r=[];if(t)for(var i in t){var n=t[i],a=i;n!==!1&&(n!==!0&&n!=null&&(a+='="'+n+'"'),r.push(a))}return"<"+e+" "+r.join(" ")+">"}function p9e(e){return"</"+e+">"}function XN(e,t){t=t||{};var r=t.newline?`
`:"";function i(n){var a=n.children,o=n.tag,s=n.attrs,l=n.text;return f9e(o,s)+(o!=="style"?ls(l):l||"")+(a?""+r+qe(a,function(u){return i(u)}).join(r)+r:"")+p9e(o)}return i(e)}function v9e(e,t,r){r=r||{};var i=r.newline?`
`:"",n=" {"+i,a=i+"}",o=qe(mr(e),function(l){return l+n+qe(mr(e[l]),function(u){return u+":"+e[l][u]+";"}).join(i)+a}).join(i),s=qe(mr(t),function(l){return"@keyframes "+l+n+qe(mr(t[l]),function(u){return u+n+qe(mr(t[l][u]),function(c){var h=t[l][u][c];return c==="d"&&(h='path("'+h+'")'),c+":"+h+";"}).join(i)+a}).join(i)+a}).join(i);return!o&&!s?"":["<![CDATA[",o,s,"]]>"].join(i)}function OL(e){return{zrId:e,shadowCache:{},patternCache:{},gradientCache:{},clipPathCache:{},defs:{},cssNodes:{},cssAnims:{},cssStyleCache:{},cssAnimIdx:0,shadowIdx:0,gradientIdx:0,patternIdx:0,clipPathIdx:0}}function UW(e,t,r,i){return ea("svg","root",{width:e,height:t,xmlns:$ce,"xmlns:xlink":ehe,version:"1.1",baseProfile:"full",viewBox:i?"0 0 "+e+" "+t:!1},r)}var m9e=0;function rhe(){return m9e++}var GW={cubicIn:"0.32,0,0.67,0",cubicOut:"0.33,1,0.68,1",cubicInOut:"0.65,0,0.35,1",quadraticIn:"0.11,0,0.5,0",quadraticOut:"0.5,1,0.89,1",quadraticInOut:"0.45,0,0.55,1",quarticIn:"0.5,0,0.75,0",quarticOut:"0.25,1,0.5,1",quarticInOut:"0.76,0,0.24,1",quinticIn:"0.64,0,0.78,0",quinticOut:"0.22,1,0.36,1",quinticInOut:"0.83,0,0.17,1",sinusoidalIn:"0.12,0,0.39,0",sinusoidalOut:"0.61,1,0.88,1",sinusoidalInOut:"0.37,0,0.63,1",exponentialIn:"0.7,0,0.84,0",exponentialOut:"0.16,1,0.3,1",exponentialInOut:"0.87,0,0.13,1",circularIn:"0.55,0,1,0.45",circularOut:"0,0.55,0.45,1",circularInOut:"0.85,0,0.15,1"},_0="transform-origin";function g9e(e,t,r){var i=Be({},e.shape);Be(i,t),e.buildPath(r,i);var n=new Jce;return n.reset(Nse(e)),r.rebuildPath(n,1),n.generateStr(),n.getStr()}function y9e(e,t){var r=t.originX,i=t.originY;(r||i)&&(e[_0]=r+"px "+i+"px")}var x9e={fill:"fill",opacity:"opacity",lineWidth:"stroke-width",lineDashOffset:"stroke-dashoffset"};function ihe(e,t){var r=t.zrId+"-ani-"+t.cssAnimIdx++;return t.cssAnims[r]=e,r}function b9e(e,t,r){var i=e.shape.paths,n={},a,o;if(q(i,function(l){var u=OL(r.zrId);u.animation=!0,FC(l,{},u,!0);var c=u.cssAnims,h=u.cssNodes,d=mr(c),f=d.length;if(f){o=d[f-1];var p=c[o];for(var v in p){var m=p[v];n[v]=n[v]||{d:""},n[v].d+=m.d||""}for(var g in h){var y=h[g].animation;y.indexOf(o)>=0&&(a=y)}}}),!!a){t.d=!1;var s=ihe(n,r);return a.replace(o,s)}}function jW(e){return it(e)?GW[e]?"cubic-bezier("+GW[e]+")":JB(e)?e:"":""}function FC(e,t,r,i){var n=e.animators,a=n.length,o=[];if(e instanceof fN){var s=b9e(e,t,r);if(s)o.push(s);else if(!a)return}else if(!a)return;for(var l={},u=0;u<a;u++){var c=n[u],h=[c.getMaxTime()/1e3+"s"],d=jW(c.getClip().easing),f=c.getDelay();d?h.push(d):h.push("linear"),f&&h.push(f/1e3+"s"),c.getLoop()&&h.push("infinite");var p=h.join(" ");l[p]=l[p]||[p,[]],l[p][1].push(c)}function v(y){var x=y[1],b=x.length,_={},w={},S={},A="animation-timing-function";function M(re,ae,he){for(var se=re.getTracks(),fe=re.getMaxTime(),J=0;J<se.length;J++){var te=se[J];if(te.needsAnimate()){var le=te.keyframes,Ae=te.propName;if(he&&(Ae=he(Ae)),Ae)for(var xe=0;xe<le.length;xe++){var ye=le[xe],Se=Math.round(ye.time/fe*100)+"%",Pe=jW(ye.easing),Ce=ye.rawValue;(it(Ce)||kr(Ce))&&(ae[Se]=ae[Se]||{},ae[Se][Ae]=ye.rawValue,Pe&&(ae[Se][A]=Pe))}}}}for(var E=0;E<b;E++){var T=x[E],L=T.targetName;L?L==="shape"&&M(T,w):!i&&M(T,_)}for(var P in _){var C={};Use(C,e),Be(C,_[P]);var D=Vse(C),I=_[P][A];S[P]=D?{transform:D}:{},y9e(S[P],C),I&&(S[P][A]=I)}var O,R=!0;for(var P in w){S[P]=S[P]||{};var H=!O,I=w[P][A];H&&(O=new $c);var j=O.len();O.reset(),S[P].d=g9e(e,w[P],O);var N=O.len();if(!H&&j!==N){R=!1;break}I&&(S[P][A]=I)}if(!R)for(var P in S)delete S[P].d;if(!i)for(var E=0;E<b;E++){var T=x[E],L=T.targetName;L==="style"&&M(T,S,function(se){return x9e[se]})}for(var k=mr(S),G=!0,Y,E=1;E<k.length;E++){var F=k[E-1],Z=k[E];if(S[F][_0]!==S[Z][_0]){G=!1;break}Y=S[F][_0]}if(G&&Y){for(var P in S)S[P][_0]&&delete S[P][_0];t[_0]=Y}if(ni(k,function(re){return mr(S[re]).length>0}).length){var ne=ihe(S,r);return ne+" "+y[0]+" both"}}for(var m in l){var s=v(l[m]);s&&o.push(s)}if(o.length){var g=r.zrId+"-cls-"+rhe();r.cssNodes["."+g]={animation:o.join(",")},t.class=g}}function w9e(e,t,r){if(!e.ignore)if(e.isSilent()){var i={"pointer-events":"none"};WW(i,t,r)}else{var n=e.states.emphasis&&e.states.emphasis.style?e.states.emphasis.style:{},a=n.fill;if(!a){var o=e.style&&e.style.fill,s=e.states.select&&e.states.select.style&&e.states.select.style.fill,l=e.currentStates.indexOf("select")>=0&&s||o;l&&(a=YI(l))}var u=n.lineWidth;if(u){var c=!n.strokeNoScale&&e.transform?e.transform[0]:1;u=u/c}var i={cursor:"pointer"};a&&(i.fill=a),n.stroke&&(i.stroke=n.stroke),u&&(i["stroke-width"]=u),WW(i,t,r)}}function WW(e,t,r,i){var n=JSON.stringify(e),a=r.cssStyleCache[n];a||(a=r.zrId+"-cls-"+rhe(),r.cssStyleCache[n]=a,r.cssNodes["."+a+":hover"]=e),t.class=t.class?t.class+" "+a:a}var lw=Math.round;function nhe(e){return e&&it(e.src)}function ahe(e){return e&&xt(e.toDataURL)}function ZN(e,t,r,i){c9e(function(n,a){var o=n==="fill"||n==="stroke";o&&Bse(a)?she(t,e,n,i):o&&$B(a)?lhe(r,e,n,i):o&&a==="none"?e[n]="transparent":e[n]=a},t,r,!1),T9e(r,e,i)}function QN(e,t){var r=wSe(t);r&&(r.each(function(i,n){i!=null&&(e[(HW+n).toLowerCase()]=i+"")}),t.isSilent()&&(e[HW+"silent"]="true"))}function qW(e){return Vf(e[0]-1)&&Vf(e[1])&&Vf(e[2])&&Vf(e[3]-1)}function _9e(e){return Vf(e[4])&&Vf(e[5])}function KN(e,t,r){if(t&&!(_9e(t)&&qW(t))){var i=1e4;e.transform=qW(t)?"translate("+lw(t[4]*i)/i+" "+lw(t[5]*i)/i+")":j8e(t)}}function YW(e,t,r){for(var i=e.points,n=[],a=0;a<i.length;a++)n.push(lw(i[a][0]*r)/r),n.push(lw(i[a][1]*r)/r);t.points=n.join(" ")}function XW(e){return!e.smooth}function A9e(e){var t=qe(e,function(r){return typeof r=="string"?[r,r]:r});return function(r,i,n){for(var a=0;a<t.length;a++){var o=t[a],s=r[o[0]];s!=null&&(i[o[1]]=lw(s*n)/n)}}}var S9e={circle:[A9e(["cx","cy","r"])],polyline:[YW,XW],polygon:[YW,XW]};function C9e(e){for(var t=e.animators,r=0;r<t.length;r++)if(t[r].targetName==="shape")return!0;return!1}function ohe(e,t){var r=e.style,i=e.shape,n=S9e[e.type],a={},o=t.animation,s="path",l=e.style.strokePercent,u=t.compress&&Nse(e)||4;if(n&&!t.willUpdate&&!(n[1]&&!n[1](i))&&!(o&&C9e(e))&&!(l<1)){s=e.type;var c=Math.pow(10,u);n[0](i,a,c)}else{var h=!e.path||e.shapeChanged();e.path||e.createPathProxy();var d=e.path;h&&(d.beginPath(),e.buildPath(d,e.shape),e.pathUpdated());var f=d.getVersion(),p=e,v=p.__svgPathBuilder;(p.__svgPathVersion!==f||!v||l!==p.__svgPathStrokePercent)&&(v||(v=p.__svgPathBuilder=new Jce),v.reset(u),d.rebuildPath(v,l),v.generateStr(),p.__svgPathVersion=f,p.__svgPathStrokePercent=l),a.d=v.getStr()}return KN(a,e.transform),ZN(a,r,e,t),QN(a,e),t.animation&&FC(e,a,t),t.emphasis&&w9e(e,a,t),ea(s,e.id+"",a)}function E9e(e,t){var r=e.style,i=r.image;if(i&&!it(i)&&(nhe(i)?i=i.src:ahe(i)&&(i=i.toDataURL())),!!i){var n=r.x||0,a=r.y||0,o=r.width,s=r.height,l={href:i,width:o,height:s};return n&&(l.x=n),a&&(l.y=a),KN(l,e.transform),ZN(l,r,e,t),QN(l,e),t.animation&&FC(e,l,t),ea("image",e.id+"",l)}}function M9e(e,t){var r=e.style,i=r.text;if(i!=null&&(i+=""),!(!i||isNaN(r.x)||isNaN(r.y))){var n=r.font||cp,a=r.x||0,o=q8e(r.y||0,hC(n),r.textBaseline),s=W8e[r.textAlign]||r.textAlign,l={"dominant-baseline":"central","text-anchor":s};if(ple(r)){var u="",c=r.fontStyle,h=fle(r.fontSize);if(!parseFloat(h))return;var d=r.fontFamily||fse,f=r.fontWeight;u+="font-size:"+h+";font-family:"+d+";",c&&c!=="normal"&&(u+="font-style:"+c+";"),f&&f!=="normal"&&(u+="font-weight:"+f+";"),l.style=u}else l.style="font: "+n;return i.match(/\s/)&&(l["xml:space"]="preserve"),a&&(l.x=a),o&&(l.y=o),KN(l,e.transform),ZN(l,r,e,t),QN(l,e),t.animation&&FC(e,l,t),ea("text",e.id+"",l,void 0,i)}}function ZW(e,t){if(e instanceof or)return ohe(e,t);if(e instanceof Ta)return E9e(e,t);if(e instanceof N1)return M9e(e,t)}function T9e(e,t,r){var i=e.style;if(Y8e(i)){var n=X8e(e),a=r.shadowCache,o=a[n];if(!o){var s=e.getGlobalScale(),l=s[0],u=s[1];if(!l||!u)return;var c=i.shadowOffsetX||0,h=i.shadowOffsetY||0,d=i.shadowBlur,f=Zb(i.shadowColor),p=f.opacity,v=f.color,m=d/2/l,g=d/2/u,y=m+" "+g;o=r.zrId+"-s"+r.shadowIdx++,r.defs[o]=ea("filter",o,{id:o,x:"-100%",y:"-100%",width:"300%",height:"300%"},[ea("feDropShadow","",{dx:c/l,dy:h/u,stdDeviation:y,"flood-color":v,"flood-opacity":p})]),a[n]=o}t.filter=cC(o)}}function she(e,t,r,i){var n=e[r],a,o={gradientUnits:n.global?"userSpaceOnUse":"objectBoundingBox"};if(Rse(n))a="linearGradient",o.x1=n.x,o.y1=n.y,o.x2=n.x2,o.y2=n.y2;else if(Ose(n))a="radialGradient",o.cx=Lt(n.x,.5),o.cy=Lt(n.y,.5),o.r=Lt(n.r,.5);else return;for(var s=n.colorStops,l=[],u=0,c=s.length;u<c;++u){var h=XI(s[u].offset)*100+"%",d=s[u].color,f=Zb(d),p=f.color,v=f.opacity,m={offset:h};m["stop-color"]=p,v<1&&(m["stop-opacity"]=v),l.push(ea("stop",u+"",m))}var g=ea(a,"",o,l),y=XN(g),x=i.gradientCache,b=x[y];b||(b=i.zrId+"-g"+i.gradientIdx++,x[y]=b,o.id=b,i.defs[b]=ea(a,b,o,l)),t[r]=cC(b)}function lhe(e,t,r,i){var n=e.style[r],a=e.getBoundingRect(),o={},s=n.repeat,l=s==="no-repeat",u=s==="repeat-x",c=s==="repeat-y",h;if(kse(n)){var d=n.imageWidth,f=n.imageHeight,p=void 0,v=n.image;if(it(v)?p=v:nhe(v)?p=v.src:ahe(v)&&(p=v.toDataURL()),typeof Image>"u"){var m="Image width/height must been given explictly in svg-ssr renderer.";Yo(d,m),Yo(f,m)}else if(d==null||f==null){var g=function(E,T){if(E){var L=E.elm,P=d||T.width,C=f||T.height;E.tag==="pattern"&&(u?(C=1,P/=a.width):c&&(P=1,C/=a.height)),E.attrs.width=P,E.attrs.height=C,L&&(L.setAttribute("width",P),L.setAttribute("height",C))}},y=aN(p,null,e,function(E){l||g(w,E),g(h,E)});y&&y.width&&y.height&&(d=d||y.width,f=f||y.height)}h=ea("image","img",{href:p,width:d,height:f}),o.width=d,o.height=f}else n.svgElement&&(h=At(n.svgElement),o.width=n.svgWidth,o.height=n.svgHeight);if(h){var x,b;l?x=b=1:u?(b=1,x=o.width/a.width):c?(x=1,b=o.height/a.height):o.patternUnits="userSpaceOnUse",x!=null&&!isNaN(x)&&(o.width=x),b!=null&&!isNaN(b)&&(o.height=b);var _=Vse(n);_&&(o.patternTransform=_);var w=ea("pattern","",o,[h]),S=XN(w),A=i.patternCache,M=A[S];M||(M=i.zrId+"-p"+i.patternIdx++,A[S]=M,o.id=M,w=i.defs[M]=ea("pattern",M,o,[h])),t[r]=cC(M)}}function P9e(e,t,r){var i=r.clipPathCache,n=r.defs,a=i[e.id];if(!a){a=r.zrId+"-c"+r.clipPathIdx++;var o={id:a};i[e.id]=a,n[a]=ea("clipPath",a,o,[ohe(e,r)])}t["clip-path"]=cC(a)}function QW(e){return document.createTextNode(e)}function k0(e,t,r){e.insertBefore(t,r)}function KW(e,t){e.removeChild(t)}function JW(e,t){e.appendChild(t)}function uhe(e){return e.parentNode}function che(e){return e.nextSibling}function TM(e,t){e.textContent=t}var $W=58,D9e=120,I9e=ea("","");function BL(e){return e===void 0}function vc(e){return e!==void 0}function L9e(e,t,r){for(var i={},n=t;n<=r;++n){var a=e[n].key;a!==void 0&&(i[a]=n)}return i}function Ox(e,t){var r=e.key===t.key,i=e.tag===t.tag;return i&&r}function uw(e){var t,r=e.children,i=e.tag;if(vc(i)){var n=e.elm=the(i);if(JN(I9e,e),Ue(r))for(t=0;t<r.length;++t){var a=r[t];a!=null&&JW(n,uw(a))}else vc(e.text)&&!_t(e.text)&&JW(n,QW(e.text))}else e.elm=QW(e.text);return e.elm}function hhe(e,t,r,i,n){for(;i<=n;++i){var a=r[i];a!=null&&k0(e,uw(a),t)}}function J8(e,t,r,i){for(;r<=i;++r){var n=t[r];if(n!=null)if(vc(n.tag)){var a=uhe(n.elm);KW(a,n.elm)}else KW(e,n.elm)}}function JN(e,t){var r,i=t.elm,n=e&&e.attrs||{},a=t.attrs||{};if(n!==a){for(r in a){var o=a[r],s=n[r];s!==o&&(o===!0?i.setAttribute(r,""):o===!1?i.removeAttribute(r):r==="style"?i.style.cssText=o:r.charCodeAt(0)!==D9e?i.setAttribute(r,o):r==="xmlns:xlink"||r==="xmlns"?i.setAttributeNS(h9e,r,o):r.charCodeAt(3)===$W?i.setAttributeNS(d9e,r,o):r.charCodeAt(5)===$W?i.setAttributeNS(ehe,r,o):i.setAttribute(r,o))}for(r in n)r in a||i.removeAttribute(r)}}function k9e(e,t,r){for(var i=0,n=0,a=t.length-1,o=t[0],s=t[a],l=r.length-1,u=r[0],c=r[l],h,d,f,p;i<=a&&n<=l;)o==null?o=t[++i]:s==null?s=t[--a]:u==null?u=r[++n]:c==null?c=r[--l]:Ox(o,u)?(Eg(o,u),o=t[++i],u=r[++n]):Ox(s,c)?(Eg(s,c),s=t[--a],c=r[--l]):Ox(o,c)?(Eg(o,c),k0(e,o.elm,che(s.elm)),o=t[++i],c=r[--l]):Ox(s,u)?(Eg(s,u),k0(e,s.elm,o.elm),s=t[--a],u=r[++n]):(BL(h)&&(h=L9e(t,i,a)),d=h[u.key],BL(d)?k0(e,uw(u),o.elm):(f=t[d],f.tag!==u.tag?k0(e,uw(u),o.elm):(Eg(f,u),t[d]=void 0,k0(e,f.elm,o.elm))),u=r[++n]);(i<=a||n<=l)&&(i>a?(p=r[l+1]==null?null:r[l+1].elm,hhe(e,p,r,n,l)):J8(e,t,i,a))}function Eg(e,t){var r=t.elm=e.elm,i=e.children,n=t.children;e!==t&&(JN(e,t),BL(t.text)?vc(i)&&vc(n)?i!==n&&k9e(r,i,n):vc(n)?(vc(e.text)&&TM(r,""),hhe(r,null,n,0,n.length-1)):vc(i)?J8(r,i,0,i.length-1):vc(e.text)&&TM(r,""):e.text!==t.text&&(vc(i)&&J8(r,i,0,i.length-1),TM(r,t.text)))}function R9e(e,t){if(Ox(e,t))Eg(e,t);else{var r=e.elm,i=uhe(r);uw(t),i!==null&&(k0(i,t.elm,che(r)),J8(i,[e],0,0))}return t}var O9e=0,B9e=function(){function e(t,r,i){if(this.type="svg",this.refreshHover=eq(),this.configLayer=eq(),this.storage=r,this._opts=i=Be({},i),this.root=t,this._id="zr"+O9e++,this._oldVNode=UW(i.width,i.height),t&&!i.ssr){var n=this._viewport=document.createElement("div");n.style.cssText="position:relative;overflow:hidden";var a=this._svgDom=this._oldVNode.elm=the("svg");JN(null,this._oldVNode),n.appendChild(a),t.appendChild(n)}this.resize(i.width,i.height)}return e.prototype.getType=function(){return this.type},e.prototype.getViewportRoot=function(){return this._viewport},e.prototype.getViewportRootOffset=function(){var t=this.getViewportRoot();if(t)return{offsetLeft:t.offsetLeft||0,offsetTop:t.offsetTop||0}},e.prototype.getSvgDom=function(){return this._svgDom},e.prototype.refresh=function(){if(this.root){var t=this.renderToVNode({willUpdate:!0});t.attrs.style="position:absolute;left:0;top:0;user-select:none",R9e(this._oldVNode,t),this._oldVNode=t}},e.prototype.renderOneToVNode=function(t){return ZW(t,OL(this._id))},e.prototype.renderToVNode=function(t){t=t||{};var r=this.storage.getDisplayList(!0),i=this._width,n=this._height,a=OL(this._id);a.animation=t.animation,a.willUpdate=t.willUpdate,a.compress=t.compress,a.emphasis=t.emphasis;var o=[],s=this._bgVNode=N9e(i,n,this._backgroundColor,a);s&&o.push(s);var l=t.compress?null:this._mainVNode=ea("g","main",{},[]);this._paintList(r,a,l?l.children:o),l&&o.push(l);var u=qe(mr(a.defs),function(d){return a.defs[d]});if(u.length&&o.push(ea("defs","defs",{},u)),t.animation){var c=v9e(a.cssNodes,a.cssAnims,{newline:!0});if(c){var h=ea("style","stl",{},[],c);o.push(h)}}return UW(i,n,o,t.useViewBox)},e.prototype.renderToString=function(t){return t=t||{},XN(this.renderToVNode({animation:Lt(t.cssAnimation,!0),emphasis:Lt(t.cssEmphasis,!0),willUpdate:!1,compress:!0,useViewBox:Lt(t.useViewBox,!0)}),{newline:!0})},e.prototype.setBackgroundColor=function(t){this._backgroundColor=t},e.prototype.getSvgRoot=function(){return this._mainVNode&&this._mainVNode.elm},e.prototype._paintList=function(t,r,i){for(var n=t.length,a=[],o=0,s,l,u=0,c=0;c<n;c++){var h=t[c];if(!h.invisible){var d=h.__clipPaths,f=d&&d.length||0,p=l&&l.length||0,v=void 0;for(v=Math.max(f-1,p-1);v>=0&&!(d&&l&&d[v]===l[v]);v--);for(var m=p-1;m>v;m--)o--,s=a[o-1];for(var g=v+1;g<f;g++){var y={};P9e(d[g],y,r);var x=ea("g","clip-g-"+u++,y,[]);(s?s.children:i).push(x),a[o++]=x,s=x}l=d;var b=ZW(h,r);b&&(s?s.children:i).push(b)}}},e.prototype.resize=function(t,r){var i=this._opts,n=this.root,a=this._viewport;if(t!=null&&(i.width=t),r!=null&&(i.height=r),n&&a&&(a.style.display="none",t=Ug(n,0,i),r=Ug(n,1,i),a.style.display=""),this._width!==t||this._height!==r){if(this._width=t,this._height=r,a){var o=a.style;o.width=t+"px",o.height=r+"px"}if($B(this._backgroundColor))this.refresh();else{var s=this._svgDom;s&&(s.setAttribute("width",t),s.setAttribute("height",r));var l=this._bgVNode&&this._bgVNode.elm;l&&(l.setAttribute("width",t),l.setAttribute("height",r))}}},e.prototype.getWidth=function(){return this._width},e.prototype.getHeight=function(){return this._height},e.prototype.dispose=function(){this.root&&(this.root.innerHTML=""),this._svgDom=this._viewport=this.storage=this._oldVNode=this._bgVNode=this._mainVNode=null},e.prototype.clear=function(){this._svgDom&&(this._svgDom.innerHTML=null),this._oldVNode=null},e.prototype.toDataURL=function(t){var r=this.renderToString(),i="data:image/svg+xml;";return t?(r=Q8e(r),r&&i+"base64,"+r):i+"charset=UTF-8,"+encodeURIComponent(r)},e}();function eq(e){return function(){}}function N9e(e,t,r,i){var n;if(r&&r!=="none")if(n=ea("rect","bg",{width:e,height:t,x:"0",y:"0"}),Bse(r))she({fill:r},n.attrs,"fill",i);else if($B(r))lhe({style:{fill:r},dirty:pn,getBoundingRect:function(){return{width:e,height:t}}},n.attrs,"fill",i);else{var a=Zb(r),o=a.color,s=a.opacity;n.attrs.fill=o,s<1&&(n.attrs["fill-opacity"]=s)}return n}function V9e(e){e.registerPainter("svg",B9e)}function tq(e,t,r){var i=hp.createCanvas(),n=t.getWidth(),a=t.getHeight(),o=i.style;return o&&(o.position="absolute",o.left="0",o.top="0",o.width=n+"px",o.height=a+"px",i.setAttribute("data-zr-dom-id",e)),i.width=n*r,i.height=a*r,i}var PM=function(e){_e(t,e);function t(r,i,n){var a=e.call(this)||this;a.motionBlur=!1,a.lastFrameAlpha=.7,a.dpr=1,a.virtual=!1,a.config={},a.incremental=!1,a.zlevel=0,a.maxRepaintRectCount=5,a.__dirty=!0,a.__firstTimePaint=!0,a.__used=!1,a.__drawIndex=0,a.__startIndex=0,a.__endIndex=0,a.__prevStartIndex=null,a.__prevEndIndex=null;var o;n=n||I8,typeof r=="string"?o=tq(r,i,n):_t(r)&&(o=r,r=o.id),a.id=r,a.dom=o;var s=o.style;return s&&(xse(o),o.onselectstart=function(){return!1},s.padding="0",s.margin="0",s.borderWidth="0"),a.painter=i,a.dpr=n,a}return t.prototype.getElementCount=function(){return this.__endIndex-this.__startIndex},t.prototype.afterBrush=function(){this.__prevStartIndex=this.__startIndex,this.__prevEndIndex=this.__endIndex},t.prototype.initContext=function(){this.ctx=this.dom.getContext("2d"),this.ctx.dpr=this.dpr},t.prototype.setUnpainted=function(){this.__firstTimePaint=!0},t.prototype.createBackBuffer=function(){var r=this.dpr;this.domBack=tq("back-"+this.id,this.painter,r),this.ctxBack=this.domBack.getContext("2d"),r!==1&&this.ctxBack.scale(r,r)},t.prototype.createRepaintRects=function(r,i,n,a){if(this.__firstTimePaint)return this.__firstTimePaint=!1,null;var o=[],s=this.maxRepaintRectCount,l=!1,u=new qt(0,0,0,0);function c(y){if(!(!y.isFinite()||y.isZero()))if(o.length===0){var x=new qt(0,0,0,0);x.copy(y),o.push(x)}else{for(var b=!1,_=1/0,w=0,S=0;S<o.length;++S){var A=o[S];if(A.intersect(y)){var M=new qt(0,0,0,0);M.copy(A),M.union(y),o[S]=M,b=!0;break}else if(l){u.copy(y),u.union(A);var E=y.width*y.height,T=A.width*A.height,L=u.width*u.height,P=L-E-T;P<_&&(_=P,w=S)}}if(l&&(o[w].union(y),b=!0),!b){var x=new qt(0,0,0,0);x.copy(y),o.push(x)}l||(l=o.length>=s)}}for(var h=this.__startIndex;h<this.__endIndex;++h){var d=r[h];if(d){var f=d.shouldBePainted(n,a,!0,!0),p=d.__isRendered&&(d.__dirty&Fs||!f)?d.getPrevPaintRect():null;p&&c(p);var v=f&&(d.__dirty&Fs||!d.__isRendered)?d.getPaintRect():null;v&&c(v)}}for(var h=this.__prevStartIndex;h<this.__prevEndIndex;++h){var d=i[h],f=d&&d.shouldBePainted(n,a,!0,!0);if(d&&(!f||!d.__zr)&&d.__isRendered){var p=d.getPrevPaintRect();p&&c(p)}}var m;do{m=!1;for(var h=0;h<o.length;){if(o[h].isZero()){o.splice(h,1);continue}for(var g=h+1;g<o.length;)o[h].intersect(o[g])?(m=!0,o[h].union(o[g]),o.splice(g,1)):g++;h++}}while(m);return this._paintRects=o,o},t.prototype.debugGetPaintRects=function(){return(this._paintRects||[]).slice()},t.prototype.resize=function(r,i){var n=this.dpr,a=this.dom,o=a.style,s=this.domBack;o&&(o.width=r+"px",o.height=i+"px"),a.width=r*n,a.height=i*n,s&&(s.width=r*n,s.height=i*n,n!==1&&this.ctxBack.scale(n,n))},t.prototype.clear=function(r,i,n){var a=this.dom,o=this.ctx,s=a.width,l=a.height;i=i||this.clearColor;var u=this.motionBlur&&!r,c=this.lastFrameAlpha,h=this.dpr,d=this;u&&(this.domBack||this.createBackBuffer(),this.ctxBack.globalCompositeOperation="copy",this.ctxBack.drawImage(a,0,0,s/h,l/h));var f=this.domBack;function p(v,m,g,y){if(o.clearRect(v,m,g,y),i&&i!=="transparent"){var x=void 0;if(sC(i)){var b=i.global||i.__width===g&&i.__height===y;x=b&&i.__canvasGradient||EL(o,i,{x:0,y:0,width:g,height:y}),i.__canvasGradient=x,i.__width=g,i.__height=y}else n8e(i)&&(i.scaleX=i.scaleX||h,i.scaleY=i.scaleY||h,x=ML(o,i,{dirty:function(){d.setUnpainted(),d.painter.refresh()}}));o.save(),o.fillStyle=x||i,o.fillRect(v,m,g,y),o.restore()}u&&(o.save(),o.globalAlpha=c,o.drawImage(f,v,m,g,y),o.restore())}!n||u?p(0,0,s,l):n.length&&q(n,function(v){p(v.x*h,v.y*h,v.width*h,v.height*h)})},t}(Vl),rq=1e5,i0=314159,Y3=.01,F9e=.001;function z9e(e){return e?e.__builtin__?!0:!(typeof e.resize!="function"||typeof e.refresh!="function"):!1}function H9e(e,t){var r=document.createElement("div");return r.style.cssText=["position:relative","width:"+e+"px","height:"+t+"px","padding:0","margin:0","border-width:0"].join(";")+";",r}var U9e=function(){function e(t,r,i,n){this.type="canvas",this._zlevelList=[],this._prevDisplayList=[],this._layers={},this._layerConfig={},this._needsManuallyCompositing=!1,this.type="canvas";var a=!t.nodeName||t.nodeName.toUpperCase()==="CANVAS";this._opts=i=Be({},i||{}),this.dpr=i.devicePixelRatio||I8,this._singleCanvas=a,this.root=t;var o=t.style;o&&(xse(t),t.innerHTML=""),this.storage=r;var s=this._zlevelList;this._prevDisplayList=[];var l=this._layers;if(a){var c=t,h=c.width,d=c.height;i.width!=null&&(h=i.width),i.height!=null&&(d=i.height),this.dpr=i.devicePixelRatio||1,c.width=h*this.dpr,c.height=d*this.dpr,this._width=h,this._height=d;var f=new PM(c,this,this.dpr);f.__builtin__=!0,f.initContext(),l[i0]=f,f.zlevel=i0,s.push(i0),this._domRoot=t}else{this._width=Ug(t,0,i),this._height=Ug(t,1,i);var u=this._domRoot=H9e(this._width,this._height);t.appendChild(u)}}return e.prototype.getType=function(){return"canvas"},e.prototype.isSingleCanvas=function(){return this._singleCanvas},e.prototype.getViewportRoot=function(){return this._domRoot},e.prototype.getViewportRootOffset=function(){var t=this.getViewportRoot();if(t)return{offsetLeft:t.offsetLeft||0,offsetTop:t.offsetTop||0}},e.prototype.refresh=function(t){var r=this.storage.getDisplayList(!0),i=this._prevDisplayList,n=this._zlevelList;this._redrawId=Math.random(),this._paintList(r,i,t,this._redrawId);for(var a=0;a<n.length;a++){var o=n[a],s=this._layers[o];if(!s.__builtin__&&s.refresh){var l=a===0?this._backgroundColor:null;s.refresh(l)}}return this._opts.useDirtyRect&&(this._prevDisplayList=r.slice()),this},e.prototype.refreshHover=function(){this._paintHoverList(this.storage.getDisplayList(!1))},e.prototype._paintHoverList=function(t){var r=t.length,i=this._hoverlayer;if(i&&i.clear(),!!r){for(var n={inHover:!0,viewWidth:this._width,viewHeight:this._height},a,o=0;o<r;o++){var s=t[o];s.__inHover&&(i||(i=this._hoverlayer=this.getLayer(rq)),a||(a=i.ctx,a.save()),X0(a,s,n,o===r-1))}a&&a.restore()}},e.prototype.getHoverLayer=function(){return this.getLayer(rq)},e.prototype.paintOne=function(t,r){Zue(t,r)},e.prototype._paintList=function(t,r,i,n){if(this._redrawId===n){i=i||!1,this._updateLayerStatus(t);var a=this._doPaintList(t,r,i),o=a.finished,s=a.needsRefreshHover;if(this._needsManuallyCompositing&&this._compositeManually(),s&&this._paintHoverList(t),o)this.eachLayer(function(u){u.afterBrush&&u.afterBrush()});else{var l=this;C8(function(){l._paintList(t,r,i,n)})}}},e.prototype._compositeManually=function(){var t=this.getLayer(i0).ctx,r=this._domRoot.width,i=this._domRoot.height;t.clearRect(0,0,r,i),this.eachBuiltinLayer(function(n){n.virtual&&t.drawImage(n.dom,0,0,r,i)})},e.prototype._doPaintList=function(t,r,i){for(var n=this,a=[],o=this._opts.useDirtyRect,s=0;s<this._zlevelList.length;s++){var l=this._zlevelList[s],u=this._layers[l];u.__builtin__&&u!==this._hoverlayer&&(u.__dirty||i)&&a.push(u)}for(var c=!0,h=!1,d=function(v){var m=a[v],g=m.ctx,y=o&&m.createRepaintRects(t,r,f._width,f._height),x=i?m.__startIndex:m.__drawIndex,b=!i&&m.incremental&&Date.now,_=b&&Date.now(),w=m.zlevel===f._zlevelList[0]?f._backgroundColor:null;if(m.__startIndex===m.__endIndex)m.clear(!1,w,y);else if(x===m.__startIndex){var S=t[x];(!S.incremental||!S.notClear||i)&&m.clear(!1,w,y)}x===-1&&(console.error("For some unknown reason. drawIndex is -1"),x=m.__startIndex);var A,M=function(P){var C={inHover:!1,allClipped:!1,prevEl:null,viewWidth:n._width,viewHeight:n._height};for(A=x;A<m.__endIndex;A++){var D=t[A];if(D.__inHover&&(h=!0),n._doPaintEl(D,m,o,P,C,A===m.__endIndex-1),b){var I=Date.now()-_;if(I>15)break}}C.prevElClipPaths&&g.restore()};if(y)if(y.length===0)A=m.__endIndex;else for(var E=f.dpr,T=0;T<y.length;++T){var L=y[T];g.save(),g.beginPath(),g.rect(L.x*E,L.y*E,L.width*E,L.height*E),g.clip(),M(L),g.restore()}else g.save(),M(),g.restore();m.__drawIndex=A,m.__drawIndex<m.__endIndex&&(c=!1)},f=this,p=0;p<a.length;p++)d(p);return hr.wxa&&q(this._layers,function(v){v&&v.ctx&&v.ctx.draw&&v.ctx.draw()}),{finished:c,needsRefreshHover:h}},e.prototype._doPaintEl=function(t,r,i,n,a,o){var s=r.ctx;if(i){var l=t.getPaintRect();(!n||l&&l.intersect(n))&&(X0(s,t,a,o),t.setPrevPaintRect(l))}else X0(s,t,a,o)},e.prototype.getLayer=function(t,r){this._singleCanvas&&!this._needsManuallyCompositing&&(t=i0);var i=this._layers[t];return i||(i=new PM("zr_"+t,this,this.dpr),i.zlevel=t,i.__builtin__=!0,this._layerConfig[t]?Wt(i,this._layerConfig[t],!0):this._layerConfig[t-Y3]&&Wt(i,this._layerConfig[t-Y3],!0),r&&(i.virtual=r),this.insertLayer(t,i),i.initContext()),i},e.prototype.insertLayer=function(t,r){var i=this._layers,n=this._zlevelList,a=n.length,o=this._domRoot,s=null,l=-1;if(!i[t]&&z9e(r)){if(a>0&&t>n[0]){for(l=0;l<a-1&&!(n[l]<t&&n[l+1]>t);l++);s=i[n[l]]}if(n.splice(l+1,0,t),i[t]=r,!r.virtual)if(s){var u=s.dom;u.nextSibling?o.insertBefore(r.dom,u.nextSibling):o.appendChild(r.dom)}else o.firstChild?o.insertBefore(r.dom,o.firstChild):o.appendChild(r.dom);r.painter||(r.painter=this)}},e.prototype.eachLayer=function(t,r){for(var i=this._zlevelList,n=0;n<i.length;n++){var a=i[n];t.call(r,this._layers[a],a)}},e.prototype.eachBuiltinLayer=function(t,r){for(var i=this._zlevelList,n=0;n<i.length;n++){var a=i[n],o=this._layers[a];o.__builtin__&&t.call(r,o,a)}},e.prototype.eachOtherLayer=function(t,r){for(var i=this._zlevelList,n=0;n<i.length;n++){var a=i[n],o=this._layers[a];o.__builtin__||t.call(r,o,a)}},e.prototype.getLayers=function(){return this._layers},e.prototype._updateLayerStatus=function(t){this.eachBuiltinLayer(function(h,d){h.__dirty=h.__used=!1});function r(h){a&&(a.__endIndex!==h&&(a.__dirty=!0),a.__endIndex=h)}if(this._singleCanvas)for(var i=1;i<t.length;i++){var n=t[i];if(n.zlevel!==t[i-1].zlevel||n.incremental){this._needsManuallyCompositing=!0;break}}var a=null,o=0,s,l;for(l=0;l<t.length;l++){var n=t[l],u=n.zlevel,c=void 0;s!==u&&(s=u,o=0),n.incremental?(c=this.getLayer(u+F9e,this._needsManuallyCompositing),c.incremental=!0,o=1):c=this.getLayer(u+(o>0?Y3:0),this._needsManuallyCompositing),c.__builtin__||WB("ZLevel "+u+" has been used by unkown layer "+c.id),c!==a&&(c.__used=!0,c.__startIndex!==l&&(c.__dirty=!0),c.__startIndex=l,c.incremental?c.__drawIndex=-1:c.__drawIndex=l,r(l),a=c),n.__dirty&Fs&&!n.__inHover&&(c.__dirty=!0,c.incremental&&c.__drawIndex<0&&(c.__drawIndex=l))}r(l),this.eachBuiltinLayer(function(h,d){!h.__used&&h.getElementCount()>0&&(h.__dirty=!0,h.__startIndex=h.__endIndex=h.__drawIndex=0),h.__dirty&&h.__drawIndex<0&&(h.__drawIndex=h.__startIndex)})},e.prototype.clear=function(){return this.eachBuiltinLayer(this._clearLayer),this},e.prototype._clearLayer=function(t){t.clear()},e.prototype.setBackgroundColor=function(t){this._backgroundColor=t,q(this._layers,function(r){r.setUnpainted()})},e.prototype.configLayer=function(t,r){if(r){var i=this._layerConfig;i[t]?Wt(i[t],r,!0):i[t]=r;for(var n=0;n<this._zlevelList.length;n++){var a=this._zlevelList[n];if(a===t||a===t+Y3){var o=this._layers[a];Wt(o,i[t],!0)}}}},e.prototype.delLayer=function(t){var r=this._layers,i=this._zlevelList,n=r[t];n&&(n.dom.parentNode.removeChild(n.dom),delete r[t],i.splice(tr(i,t),1))},e.prototype.resize=function(t,r){if(this._domRoot.style){var i=this._domRoot;i.style.display="none";var n=this._opts,a=this.root;if(t!=null&&(n.width=t),r!=null&&(n.height=r),t=Ug(a,0,n),r=Ug(a,1,n),i.style.display="",this._width!==t||r!==this._height){i.style.width=t+"px",i.style.height=r+"px";for(var o in this._layers)this._layers.hasOwnProperty(o)&&this._layers[o].resize(t,r);this.refresh(!0)}this._width=t,this._height=r}else{if(t==null||r==null)return;this._width=t,this._height=r,this.getLayer(i0).resize(t,r)}return this},e.prototype.clearLayer=function(t){var r=this._layers[t];r&&r.clear()},e.prototype.dispose=function(){this.root.innerHTML="",this.root=this.storage=this._domRoot=this._layers=null},e.prototype.getRenderedCanvas=function(t){if(t=t||{},this._singleCanvas&&!this._compositeManually)return this._layers[i0].dom;var r=new PM("image",this,t.pixelRatio||this.dpr);r.initContext(),r.clear(!1,t.backgroundColor||this._backgroundColor);var i=r.ctx;if(t.pixelRatio<=this.dpr){this.refresh();var n=r.dom.width,a=r.dom.height;this.eachLayer(function(h){h.__builtin__?i.drawImage(h.dom,0,0,n,a):h.renderToCanvas&&(i.save(),h.renderToCanvas(i),i.restore())})}else for(var o={inHover:!1,viewWidth:this._width,viewHeight:this._height},s=this.storage.getDisplayList(!0),l=0,u=s.length;l<u;l++){var c=s[l];X0(i,c,o,l===u-1)}return r.dom},e.prototype.getWidth=function(){return this._width},e.prototype.getHeight=function(){return this._height},e}();function G9e(e){e.registerPainter("canvas",U9e)}var j9e=function(e){_e(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r.hasSymbolVisual=!0,r}return t.prototype.getInitialData=function(r){return Bd(null,this,{useEncodeDefaulter:!0})},t.prototype.getLegendIcon=function(r){var i=new Ct,n=Sn("line",0,r.itemHeight/2,r.itemWidth,0,r.lineStyle.stroke,!1);i.add(n),n.setStyle(r.lineStyle);var a=this.getData().getVisual("symbol"),o=this.getData().getVisual("symbolRotate"),s=a==="none"?"circle":a,l=r.itemHeight*.8,u=Sn(s,(r.itemWidth-l)/2,(r.itemHeight-l)/2,l,l,r.itemStyle.fill);i.add(u),u.setStyle(r.itemStyle);var c=r.iconRotate==="inherit"?o:r.iconRotate||0;return u.rotation=c*Math.PI/180,u.setOrigin([r.itemWidth/2,r.itemHeight/2]),s.indexOf("empty")>-1&&(u.style.stroke=u.style.fill,u.style.fill="#fff",u.style.lineWidth=2),i},t.type="series.line",t.dependencies=["grid","polar"],t.defaultOption={z:3,coordinateSystem:"cartesian2d",legendHoverLink:!0,clip:!0,label:{position:"top"},endLabel:{show:!1,valueAnimation:!0,distance:8},lineStyle:{width:2,type:"solid"},emphasis:{scale:!0},step:!1,smooth:!1,smoothMonotone:null,symbol:"emptyCircle",symbolSize:4,symbolRotate:null,showSymbol:!0,showAllSymbol:"auto",connectNulls:!1,sampling:"none",animationEasing:"linear",progressive:0,hoverLayerThreshold:1/0,universalTransition:{divideShape:"clone"},triggerLineEvent:!1},t}(Di);function U1(e,t){var r=e.mapDimensionsAll("defaultedLabel"),i=r.length;if(i===1){var n=F1(e,t,r[0]);return n!=null?n+"":null}else if(i){for(var a=[],o=0;o<r.length;o++)a.push(F1(e,t,r[o]));return a.join(" ")}}function dhe(e,t){var r=e.mapDimensionsAll("defaultedLabel");if(!Ue(t))return t+"";for(var i=[],n=0;n<r.length;n++){var a=e.getDimensionIndex(r[n]);a>=0&&i.push(t[a])}return i.join(" ")}var x4=function(e){_e(t,e);function t(r,i,n,a){var o=e.call(this)||this;return o.updateData(r,i,n,a),o}return t.prototype._createSymbol=function(r,i,n,a,o){this.removeAll();var s=Sn(r,-1,-1,2,2,null,o);s.attr({z2:100,culling:!0,scaleX:a[0]/2,scaleY:a[1]/2}),s.drift=W9e,this._symbolType=r,this.add(s)},t.prototype.stopSymbolAnimation=function(r){this.childAt(0).stopAnimation(null,r)},t.prototype.getSymbolType=function(){return this._symbolType},t.prototype.getSymbolPath=function(){return this.childAt(0)},t.prototype.highlight=function(){md(this.childAt(0))},t.prototype.downplay=function(){gd(this.childAt(0))},t.prototype.setZ=function(r,i){var n=this.childAt(0);n.zlevel=r,n.z=i},t.prototype.setDraggable=function(r,i){var n=this.childAt(0);n.draggable=r,n.cursor=!i&&r?"move":n.cursor},t.prototype.updateData=function(r,i,n,a){this.silent=!1;var o=r.getItemVisual(i,"symbol")||"circle",s=r.hostModel,l=t.getSymbolSize(r,i),u=o!==this._symbolType,c=a&&a.disableAnimation;if(u){var h=r.getItemVisual(i,"symbolKeepAspect");this._createSymbol(o,r,i,l,h)}else{var d=this.childAt(0);d.silent=!1;var f={scaleX:l[0]/2,scaleY:l[1]/2};c?d.attr(f):Nr(d,f,s,i),Pu(d)}if(this._updateCommon(r,i,l,n,a),u){var d=this.childAt(0);if(!c){var f={scaleX:this._sizeX,scaleY:this._sizeY,style:{opacity:d.style.opacity}};d.scaleX=d.scaleY=0,d.style.opacity=0,Vi(d,f,s,i)}}c&&this.childAt(0).stopAnimation("leave")},t.prototype._updateCommon=function(r,i,n,a,o){var s=this.childAt(0),l=r.hostModel,u,c,h,d,f,p,v,m,g;if(a&&(u=a.emphasisItemStyle,c=a.blurItemStyle,h=a.selectItemStyle,d=a.focus,f=a.blurScope,v=a.labelStatesModels,m=a.hoverScale,g=a.cursorStyle,p=a.emphasisDisabled),!a||r.hasItemOption){var y=a&&a.itemModel?a.itemModel:r.getItemModel(i),x=y.getModel("emphasis");u=x.getModel("itemStyle").getItemStyle(),h=y.getModel(["select","itemStyle"]).getItemStyle(),c=y.getModel(["blur","itemStyle"]).getItemStyle(),d=x.get("focus"),f=x.get("blurScope"),p=x.get("disabled"),v=ia(y),m=x.getShallow("scale"),g=y.getShallow("cursor")}var b=r.getItemVisual(i,"symbolRotate");s.attr("rotation",(b||0)*Math.PI/180||0);var _=em(r.getItemVisual(i,"symbolOffset"),n);_&&(s.x=_[0],s.y=_[1]),g&&s.attr("cursor",g);var w=r.getItemVisual(i,"style"),S=w.fill;if(s instanceof Ta){var A=s.style;s.useStyle(Be({image:A.image,x:A.x,y:A.y,width:A.width,height:A.height},w))}else s.__isEmptyBrush?s.useStyle(Be({},w)):s.useStyle(w),s.style.decal=null,s.setColor(S,o&&o.symbolInnerColor),s.style.strokeNoScale=!0;var M=r.getItemVisual(i,"liftZ"),E=this._z2;M!=null?E==null&&(this._z2=s.z2,s.z2+=M):E!=null&&(s.z2=E,this._z2=null);var T=o&&o.useNameLabel;Xa(s,v,{labelFetcher:l,labelDataIndex:i,defaultText:L,inheritColor:S,defaultOpacity:w.opacity});function L(D){return T?r.getName(D):U1(r,D)}this._sizeX=n[0]/2,this._sizeY=n[1]/2;var P=s.ensureState("emphasis");P.style=u,s.ensureState("select").style=h,s.ensureState("blur").style=c;var C=m==null||m===!0?Math.max(1.1,3/this._sizeY):isFinite(m)&&m>0?+m:1;P.scaleX=this._sizeX*C,P.scaleY=this._sizeY*C,this.setSymbolScale(1),Ji(this,d,f,p)},t.prototype.setSymbolScale=function(r){this.scaleX=this.scaleY=r},t.prototype.fadeOut=function(r,i,n){var a=this.childAt(0),o=Dt(this).dataIndex,s=n&&n.animation;if(this.silent=a.silent=!0,n&&n.fadeLabel){var l=a.getTextContent();l&&fp(l,{style:{opacity:0}},i,{dataIndex:o,removeOpt:s,cb:function(){a.removeTextContent()}})}else a.removeTextContent();fp(a,{style:{opacity:0},scaleX:0,scaleY:0},i,{dataIndex:o,cb:r,removeOpt:s})},t.getSymbolSize=function(r,i){return Ry(r.getItemVisual(i,"symbolSize"))},t}(Ct);function W9e(e,t){this.parent.drift(e,t)}function DM(e,t,r,i){return t&&!isNaN(t[0])&&!isNaN(t[1])&&!(i.isIgnore&&i.isIgnore(r))&&!(i.clipShape&&!i.clipShape.contain(t[0],t[1]))&&e.getItemVisual(r,"symbol")!=="none"}function iq(e){return e!=null&&!_t(e)&&(e={isIgnore:e}),e||{}}function nq(e){var t=e.hostModel,r=t.getModel("emphasis");return{emphasisItemStyle:r.getModel("itemStyle").getItemStyle(),blurItemStyle:t.getModel(["blur","itemStyle"]).getItemStyle(),selectItemStyle:t.getModel(["select","itemStyle"]).getItemStyle(),focus:r.get("focus"),blurScope:r.get("blurScope"),emphasisDisabled:r.get("disabled"),hoverScale:r.get("scale"),labelStatesModels:ia(t),cursorStyle:t.get("cursor")}}var b4=function(){function e(t){this.group=new Ct,this._SymbolCtor=t||x4}return e.prototype.updateData=function(t,r){this._progressiveEls=null,r=iq(r);var i=this.group,n=t.hostModel,a=this._data,o=this._SymbolCtor,s=r.disableAnimation,l=nq(t),u={disableAnimation:s},c=r.getSymbolPoint||function(h){return t.getItemLayout(h)};a||i.removeAll(),t.diff(a).add(function(h){var d=c(h);if(DM(t,d,h,r)){var f=new o(t,h,l,u);f.setPosition(d),t.setItemGraphicEl(h,f),i.add(f)}}).update(function(h,d){var f=a.getItemGraphicEl(d),p=c(h);if(!DM(t,p,h,r)){i.remove(f);return}var v=t.getItemVisual(h,"symbol")||"circle",m=f&&f.getSymbolType&&f.getSymbolType();if(!f||m&&m!==v)i.remove(f),f=new o(t,h,l,u),f.setPosition(p);else{f.updateData(t,h,l,u);var g={x:p[0],y:p[1]};s?f.attr(g):Nr(f,g,n)}i.add(f),t.setItemGraphicEl(h,f)}).remove(function(h){var d=a.getItemGraphicEl(h);d&&d.fadeOut(function(){i.remove(d)},n)}).execute(),this._getSymbolPoint=c,this._data=t},e.prototype.updateLayout=function(){var t=this,r=this._data;r&&r.eachItemGraphicEl(function(i,n){var a=t._getSymbolPoint(n);i.setPosition(a),i.markRedraw()})},e.prototype.incrementalPrepareUpdate=function(t){this._seriesScope=nq(t),this._data=null,this.group.removeAll()},e.prototype.incrementalUpdate=function(t,r,i){this._progressiveEls=[],i=iq(i);function n(l){l.isGroup||(l.incremental=!0,l.ensureState("emphasis").hoverLayer=!0)}for(var a=t.start;a<t.end;a++){var o=r.getItemLayout(a);if(DM(r,o,a,i)){var s=new this._SymbolCtor(r,a,this._seriesScope);s.traverse(n),s.setPosition(o),this.group.add(s),r.setItemGraphicEl(a,s),this._progressiveEls.push(s)}}},e.prototype.eachRendered=function(t){Ep(this._progressiveEls||this.group,t)},e.prototype.remove=function(t){var r=this.group,i=this._data;i&&t?i.eachItemGraphicEl(function(n){n.fadeOut(function(){r.remove(n)},i.hostModel)}):r.removeAll()},e}();function fhe(e,t,r){var i=e.getBaseAxis(),n=e.getOtherAxis(i),a=q9e(n,r),o=i.dim,s=n.dim,l=t.mapDimension(s),u=t.mapDimension(o),c=s==="x"||s==="radius"?1:0,h=qe(e.dimensions,function(p){return t.mapDimension(p)}),d=!1,f=t.getCalculationInfo("stackResultDimension");return vp(t,h[0])&&(d=!0,h[0]=f),vp(t,h[1])&&(d=!0,h[1]=f),{dataDimsForPoint:h,valueStart:a,valueAxisDim:s,baseAxisDim:o,stacked:!!d,valueDim:l,baseDim:u,baseDataOffset:c,stackedOverDimension:t.getCalculationInfo("stackedOverDimension")}}function q9e(e,t){var r=0,i=e.scale.getExtent();return t==="start"?r=i[0]:t==="end"?r=i[1]:kr(t)&&!isNaN(t)?r=t:i[0]>0?r=i[0]:i[1]<0&&(r=i[1]),r}function phe(e,t,r,i){var n=NaN;e.stacked&&(n=r.get(r.getCalculationInfo("stackedOverDimension"),i)),isNaN(n)&&(n=e.valueStart);var a=e.baseDataOffset,o=[];return o[a]=r.get(e.baseDim,i),o[1-a]=n,t.dataToPoint(o)}function Y9e(e,t){var r=[];return t.diff(e).add(function(i){r.push({cmd:"+",idx:i})}).update(function(i,n){r.push({cmd:"=",idx:n,idx1:i})}).remove(function(i){r.push({cmd:"-",idx:i})}).execute(),r}function X9e(e,t,r,i,n,a,o,s){for(var l=Y9e(e,t),u=[],c=[],h=[],d=[],f=[],p=[],v=[],m=fhe(n,t,o),g=e.getLayout("points")||[],y=t.getLayout("points")||[],x=0;x<l.length;x++){var b=l[x],_=!0,w=void 0,S=void 0;switch(b.cmd){case"=":w=b.idx*2,S=b.idx1*2;var A=g[w],M=g[w+1],E=y[S],T=y[S+1];(isNaN(A)||isNaN(M))&&(A=E,M=T),u.push(A,M),c.push(E,T),h.push(r[w],r[w+1]),d.push(i[S],i[S+1]),v.push(t.getRawIndex(b.idx1));break;case"+":var L=b.idx,P=m.dataDimsForPoint,C=n.dataToPoint([t.get(P[0],L),t.get(P[1],L)]);S=L*2,u.push(C[0],C[1]),c.push(y[S],y[S+1]);var D=phe(m,n,t,L);h.push(D[0],D[1]),d.push(i[S],i[S+1]),v.push(t.getRawIndex(L));break;case"-":_=!1}_&&(f.push(b),p.push(p.length))}p.sort(function(F,Z){return v[F]-v[Z]});for(var I=u.length,O=Ic(I),R=Ic(I),H=Ic(I),j=Ic(I),N=[],x=0;x<p.length;x++){var k=p[x],G=x*2,Y=k*2;O[G]=u[Y],O[G+1]=u[Y+1],R[G]=c[Y],R[G+1]=c[Y+1],H[G]=h[Y],H[G+1]=h[Y+1],j[G]=d[Y],j[G+1]=d[Y+1],N[x]=f[k]}return{current:O,next:R,stackedOnCurrent:H,stackedOnNext:j,status:N}}var Qd=Math.min,Kd=Math.max;function bv(e,t){return isNaN(e)||isNaN(t)}function NL(e,t,r,i,n,a,o,s,l){for(var u,c,h,d,f,p,v=r,m=0;m<i;m++){var g=t[v*2],y=t[v*2+1];if(v>=n||v<0)break;if(bv(g,y)){if(l){v+=a;continue}break}if(v===r)e[a>0?"moveTo":"lineTo"](g,y),h=g,d=y;else{var x=g-u,b=y-c;if(x*x+b*b<.5){v+=a;continue}if(o>0){for(var _=v+a,w=t[_*2],S=t[_*2+1];w===g&&S===y&&m<i;)m++,_+=a,v+=a,w=t[_*2],S=t[_*2+1],g=t[v*2],y=t[v*2+1],x=g-u,b=y-c;var A=m+1;if(l)for(;bv(w,S)&&A<i;)A++,_+=a,w=t[_*2],S=t[_*2+1];var M=.5,E=0,T=0,L=void 0,P=void 0;if(A>=i||bv(w,S))f=g,p=y;else{E=w-u,T=S-c;var C=g-u,D=w-g,I=y-c,O=S-y,R=void 0,H=void 0;if(s==="x"){R=Math.abs(C),H=Math.abs(D);var j=E>0?1:-1;f=g-j*R*o,p=y,L=g+j*H*o,P=y}else if(s==="y"){R=Math.abs(I),H=Math.abs(O);var N=T>0?1:-1;f=g,p=y-N*R*o,L=g,P=y+N*H*o}else R=Math.sqrt(C*C+I*I),H=Math.sqrt(D*D+O*O),M=H/(H+R),f=g-E*o*(1-M),p=y-T*o*(1-M),L=g+E*o*M,P=y+T*o*M,L=Qd(L,Kd(w,g)),P=Qd(P,Kd(S,y)),L=Kd(L,Qd(w,g)),P=Kd(P,Qd(S,y)),E=L-g,T=P-y,f=g-E*R/H,p=y-T*R/H,f=Qd(f,Kd(u,g)),p=Qd(p,Kd(c,y)),f=Kd(f,Qd(u,g)),p=Kd(p,Qd(c,y)),E=g-f,T=y-p,L=g+E*H/R,P=y+T*H/R}e.bezierCurveTo(h,d,f,p,g,y),h=L,d=P}else e.lineTo(g,y)}u=g,c=y,v+=a}return m}var vhe=function(){function e(){this.smooth=0,this.smoothConstraint=!0}return e}(),Z9e=function(e){_e(t,e);function t(r){var i=e.call(this,r)||this;return i.type="ec-polyline",i}return t.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},t.prototype.getDefaultShape=function(){return new vhe},t.prototype.buildPath=function(r,i){var n=i.points,a=0,o=n.length/2;if(i.connectNulls){for(;o>0&&bv(n[o*2-2],n[o*2-1]);o--);for(;a<o&&bv(n[a*2],n[a*2+1]);a++);}for(;a<o;)a+=NL(r,n,a,o,o,1,i.smooth,i.smoothMonotone,i.connectNulls)+1},t.prototype.getPointOn=function(r,i){this.path||(this.createPathProxy(),this.buildPath(this.path,this.shape));for(var n=this.path,a=n.data,o=$c.CMD,s,l,u=i==="x",c=[],h=0;h<a.length;){var d=a[h++],f=void 0,p=void 0,v=void 0,m=void 0,g=void 0,y=void 0,x=void 0;switch(d){case o.M:s=a[h++],l=a[h++];break;case o.L:if(f=a[h++],p=a[h++],x=u?(r-s)/(f-s):(r-l)/(p-l),x<=1&&x>=0){var b=u?(p-l)*x+l:(f-s)*x+s;return u?[r,b]:[b,r]}s=f,l=p;break;case o.C:f=a[h++],p=a[h++],v=a[h++],m=a[h++],g=a[h++],y=a[h++];var _=u?M8(s,f,v,g,r,c):M8(l,p,m,y,r,c);if(_>0)for(var w=0;w<_;w++){var S=c[w];if(S<=1&&S>=0){var b=u?qn(l,p,m,y,S):qn(s,f,v,g,S);return u?[r,b]:[b,r]}}s=g,l=y;break}}},t}(or),Q9e=function(e){_e(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t}(vhe),mhe=function(e){_e(t,e);function t(r){var i=e.call(this,r)||this;return i.type="ec-polygon",i}return t.prototype.getDefaultShape=function(){return new Q9e},t.prototype.buildPath=function(r,i){var n=i.points,a=i.stackedOnPoints,o=0,s=n.length/2,l=i.smoothMonotone;if(i.connectNulls){for(;s>0&&bv(n[s*2-2],n[s*2-1]);s--);for(;o<s&&bv(n[o*2],n[o*2+1]);o++);}for(;o<s;){var u=NL(r,n,o,s,s,1,i.smooth,l,i.connectNulls);NL(r,a,o+u-1,u,s,-1,i.stackedOnSmooth,l,i.connectNulls),o+=u+1,r.closePath()}},t}(or);function ghe(e,t,r,i,n){var a=e.getArea(),o=a.x,s=a.y,l=a.width,u=a.height,c=r.get(["lineStyle","width"])||2;o-=c/2,s-=c/2,l+=c,u+=c,l=Math.ceil(l),o!==Math.floor(o)&&(o=Math.floor(o),l++);var h=new Tr({shape:{x:o,y:s,width:l,height:u}});if(t){var d=e.getBaseAxis(),f=d.isHorizontal(),p=d.inverse;f?(p&&(h.shape.x+=l),h.shape.width=0):(p||(h.shape.y+=u),h.shape.height=0);var v=xt(n)?function(m){n(m,h)}:null;Vi(h,{shape:{width:l,height:u,x:o,y:s}},r,null,i,v)}return h}function yhe(e,t,r){var i=e.getArea(),n=rn(i.r0,1),a=rn(i.r,1),o=new Zo({shape:{cx:rn(e.cx,1),cy:rn(e.cy,1),r0:n,r:a,startAngle:i.startAngle,endAngle:i.endAngle,clockwise:i.clockwise}});if(t){var s=e.getBaseAxis().dim==="angle";s?o.shape.endAngle=i.startAngle:o.shape.r=n,Vi(o,{shape:{endAngle:i.endAngle,r:a}},r)}return o}function w4(e,t,r,i,n){if(e){if(e.type==="polar")return yhe(e,t,r);if(e.type==="cartesian2d")return ghe(e,t,r,i,n)}else return null;return null}function rm(e,t){return e.type===t}function aq(e,t){if(e.length===t.length){for(var r=0;r<e.length;r++)if(e[r]!==t[r])return;return!0}}function oq(e){for(var t=1/0,r=1/0,i=-1/0,n=-1/0,a=0;a<e.length;){var o=e[a++],s=e[a++];isNaN(o)||(t=Math.min(o,t),i=Math.max(o,i)),isNaN(s)||(r=Math.min(s,r),n=Math.max(s,n))}return[[t,r],[i,n]]}function sq(e,t){var r=oq(e),i=r[0],n=r[1],a=oq(t),o=a[0],s=a[1];return Math.max(Math.abs(i[0]-o[0]),Math.abs(i[1]-o[1]),Math.abs(n[0]-s[0]),Math.abs(n[1]-s[1]))}function lq(e){return kr(e)?e:e?.5:0}function K9e(e,t,r){if(!r.valueDim)return[];for(var i=t.count(),n=Ic(i*2),a=0;a<i;a++){var o=phe(r,e,t,a);n[a*2]=o[0],n[a*2+1]=o[1]}return n}function Jd(e,t,r,i){var n=t.getBaseAxis(),a=n.dim==="x"||n.dim==="radius"?0:1,o=[],s=0,l=[],u=[],c=[],h=[];if(i){for(s=0;s<e.length;s+=2)!isNaN(e[s])&&!isNaN(e[s+1])&&h.push(e[s],e[s+1]);e=h}for(s=0;s<e.length-2;s+=2)switch(c[0]=e[s+2],c[1]=e[s+3],u[0]=e[s],u[1]=e[s+1],o.push(u[0],u[1]),r){case"end":l[a]=c[a],l[1-a]=u[1-a],o.push(l[0],l[1]);break;case"middle":var d=(u[a]+c[a])/2,f=[];l[a]=f[a]=d,l[1-a]=u[1-a],f[1-a]=c[1-a],o.push(l[0],l[1]),o.push(f[0],f[1]);break;default:l[a]=u[a],l[1-a]=c[1-a],o.push(l[0],l[1])}return o.push(e[s++],e[s++]),o}function J9e(e,t){var r=[],i=e.length,n,a;function o(c,h,d){var f=c.coord,p=(d-f)/(h.coord-f),v=G8e(p,[c.color,h.color]);return{coord:d,color:v}}for(var s=0;s<i;s++){var l=e[s],u=l.coord;if(u<0)n=l;else if(u>t){a?r.push(o(a,l,t)):n&&r.push(o(n,l,0),o(n,l,t));break}else n&&(r.push(o(n,l,0)),n=null),r.push(l),a=l}return r}function $9e(e,t,r){var i=e.getVisual("visualMeta");if(!(!i||!i.length||!e.count())&&t.type==="cartesian2d"){for(var n,a,o=i.length-1;o>=0;o--){var s=e.getDimensionInfo(i[o].dimension);if(n=s&&s.coordDim,n==="x"||n==="y"){a=i[o];break}}if(a){var l=t.getAxis(n),u=qe(a.stops,function(x){return{coord:l.toGlobalCoord(l.dataToCoord(x.value)),color:x.color}}),c=u.length,h=a.outerColors.slice();c&&u[0].coord>u[c-1].coord&&(u.reverse(),h.reverse());var d=J9e(u,n==="x"?r.getWidth():r.getHeight()),f=d.length;if(!f&&c)return u[0].coord<0?h[1]?h[1]:u[c-1].color:h[0]?h[0]:u[0].color;var p=10,v=d[0].coord-p,m=d[f-1].coord+p,g=m-v;if(g<.001)return"transparent";q(d,function(x){x.offset=(x.coord-v)/g}),d.push({offset:f?d[f-1].offset:.5,color:h[1]||"transparent"}),d.unshift({offset:f?d[0].offset:.5,color:h[0]||"transparent"});var y=new Sy(0,0,0,0,d,!0);return y[n]=v,y[n+"2"]=m,y}}}function ePe(e,t,r){var i=e.get("showAllSymbol"),n=i==="auto";if(!(i&&!n)){var a=r.getAxesByScale("ordinal")[0];if(a&&!(n&&tPe(a,t))){var o=t.mapDimension(a.dim),s={};return q(a.getViewLabels(),function(l){var u=a.scale.getRawOrdinalNumber(l.tickValue);s[u]=1}),function(l){return!s.hasOwnProperty(t.get(o,l))}}}}function tPe(e,t){var r=e.getExtent(),i=Math.abs(r[1]-r[0])/e.scale.count();isNaN(i)&&(i=0);for(var n=t.count(),a=Math.max(1,Math.round(n/5)),o=0;o<n;o+=a)if(x4.getSymbolSize(t,o)[e.isHorizontal()?1:0]*1.5>i)return!1;return!0}function rPe(e,t){return isNaN(e)||isNaN(t)}function iPe(e){for(var t=e.length/2;t>0&&rPe(e[t*2-2],e[t*2-1]);t--);return t-1}function uq(e,t){return[e[t*2],e[t*2+1]]}function nPe(e,t,r){for(var i=e.length/2,n=r==="x"?0:1,a,o,s=0,l=-1,u=0;u<i;u++)if(o=e[u*2+n],!(isNaN(o)||isNaN(e[u*2+1-n]))){if(u===0){a=o;continue}if(a<=t&&o>=t||a>=t&&o<=t){l=u;break}s=u,a=o}return{range:[s,l],t:(t-a)/(o-a)}}function xhe(e){if(e.get(["endLabel","show"]))return!0;for(var t=0;t<Xo.length;t++)if(e.get([Xo[t],"endLabel","show"]))return!0;return!1}function IM(e,t,r,i){if(rm(t,"cartesian2d")){var n=i.getModel("endLabel"),a=n.get("valueAnimation"),o=i.getData(),s={lastFrameIndex:0},l=xhe(i)?function(f,p){e._endLabelOnDuring(f,p,o,s,a,n,t)}:null,u=t.getBaseAxis().isHorizontal(),c=ghe(t,r,i,function(){var f=e._endLabel;f&&r&&s.originalX!=null&&f.attr({x:s.originalX,y:s.originalY})},l);if(!i.get("clip",!0)){var h=c.shape,d=Math.max(h.width,h.height);u?(h.y-=d,h.height+=d*2):(h.x-=d,h.width+=d*2)}return l&&l(1,c),c}else return yhe(t,r,i)}function aPe(e,t){var r=t.getBaseAxis(),i=r.isHorizontal(),n=r.inverse,a=i?n?"right":"left":"center",o=i?"middle":n?"top":"bottom";return{normal:{align:e.get("align")||a,verticalAlign:e.get("verticalAlign")||o}}}var oPe=function(e){_e(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.init=function(){var r=new Ct,i=new b4;this.group.add(i.group),this._symbolDraw=i,this._lineGroup=r},t.prototype.render=function(r,i,n){var a=this,o=r.coordinateSystem,s=this.group,l=r.getData(),u=r.getModel("lineStyle"),c=r.getModel("areaStyle"),h=l.getLayout("points")||[],d=o.type==="polar",f=this._coordSys,p=this._symbolDraw,v=this._polyline,m=this._polygon,g=this._lineGroup,y=!i.ssr&&r.get("animation"),x=!c.isEmpty(),b=c.get("origin"),_=fhe(o,l,b),w=x&&K9e(o,l,_),S=r.get("showSymbol"),A=r.get("connectNulls"),M=S&&!d&&ePe(r,l,o),E=this._data;E&&E.eachItemGraphicEl(function(Z,ne){Z.__temp&&(s.remove(Z),E.setItemGraphicEl(ne,null))}),S||p.remove(),s.add(g);var T=d?!1:r.get("step"),L;o&&o.getArea&&r.get("clip",!0)&&(L=o.getArea(),L.width!=null?(L.x-=.1,L.y-=.1,L.width+=.2,L.height+=.2):L.r0&&(L.r0-=.5,L.r+=.5)),this._clipShapeForSymbol=L;var P=$9e(l,o,n)||l.getVisual("style")[l.getVisual("drawType")];if(!(v&&f.type===o.type&&T===this._step))S&&p.updateData(l,{isIgnore:M,clipShape:L,disableAnimation:!0,getSymbolPoint:function(Z){return[h[Z*2],h[Z*2+1]]}}),y&&this._initSymbolLabelAnimation(l,o,L),T&&(h=Jd(h,o,T,A),w&&(w=Jd(w,o,T,A))),v=this._newPolyline(h),x?m=this._newPolygon(h,w):m&&(g.remove(m),m=this._polygon=null),d||this._initOrUpdateEndLabel(r,o,Bv(P)),g.setClipPath(IM(this,o,!0,r));else{x&&!m?m=this._newPolygon(h,w):m&&!x&&(g.remove(m),m=this._polygon=null),d||this._initOrUpdateEndLabel(r,o,Bv(P));var C=g.getClipPath();if(C){var D=IM(this,o,!1,r);Vi(C,{shape:D.shape},r)}else g.setClipPath(IM(this,o,!0,r));S&&p.updateData(l,{isIgnore:M,clipShape:L,disableAnimation:!0,getSymbolPoint:function(Z){return[h[Z*2],h[Z*2+1]]}}),(!aq(this._stackedOnPoints,w)||!aq(this._points,h))&&(y?this._doUpdateAnimation(l,w,o,n,T,b,A):(T&&(h=Jd(h,o,T,A),w&&(w=Jd(w,o,T,A))),v.setShape({points:h}),m&&m.setShape({points:h,stackedOnPoints:w})))}var I=r.getModel("emphasis"),O=I.get("focus"),R=I.get("blurScope"),H=I.get("disabled");if(v.useStyle(bt(u.getLineStyle(),{fill:"none",stroke:P,lineJoin:"bevel"})),Ya(v,r,"lineStyle"),v.style.lineWidth>0&&r.get(["emphasis","lineStyle","width"])==="bolder"){var j=v.getState("emphasis").style;j.lineWidth=+v.style.lineWidth+1}Dt(v).seriesIndex=r.seriesIndex,Ji(v,O,R,H);var N=lq(r.get("smooth")),k=r.get("smoothMonotone");if(v.setShape({smooth:N,smoothMonotone:k,connectNulls:A}),m){var G=l.getCalculationInfo("stackedOnSeries"),Y=0;m.useStyle(bt(c.getAreaStyle(),{fill:P,opacity:.7,lineJoin:"bevel",decal:l.getVisual("style").decal})),G&&(Y=lq(G.get("smooth"))),m.setShape({smooth:N,stackedOnSmooth:Y,smoothMonotone:k,connectNulls:A}),Ya(m,r,"areaStyle"),Dt(m).seriesIndex=r.seriesIndex,Ji(m,O,R,H)}var F=function(Z){a._changePolyState(Z)};l.eachItemGraphicEl(function(Z){Z&&(Z.onHoverStateChange=F)}),this._polyline.onHoverStateChange=F,this._data=l,this._coordSys=o,this._stackedOnPoints=w,this._points=h,this._step=T,this._valueOrigin=b,r.get("triggerLineEvent")&&(this.packEventData(r,v),m&&this.packEventData(r,m))},t.prototype.packEventData=function(r,i){Dt(i).eventData={componentType:"series",componentSubType:"line",componentIndex:r.componentIndex,seriesIndex:r.seriesIndex,seriesName:r.name,seriesType:"line"}},t.prototype.highlight=function(r,i,n,a){var o=r.getData(),s=kv(o,a);if(this._changePolyState("emphasis"),!(s instanceof Array)&&s!=null&&s>=0){var l=o.getLayout("points"),u=o.getItemGraphicEl(s);if(!u){var c=l[s*2],h=l[s*2+1];if(isNaN(c)||isNaN(h)||this._clipShapeForSymbol&&!this._clipShapeForSymbol.contain(c,h))return;var d=r.get("zlevel")||0,f=r.get("z")||0;u=new x4(o,s),u.x=c,u.y=h,u.setZ(d,f);var p=u.getSymbolPath().getTextContent();p&&(p.zlevel=d,p.z=f,p.z2=this._polyline.z2+1),u.__temp=!0,o.setItemGraphicEl(s,u),u.stopSymbolAnimation(!0),this.group.add(u)}u.highlight()}else yi.prototype.highlight.call(this,r,i,n,a)},t.prototype.downplay=function(r,i,n,a){var o=r.getData(),s=kv(o,a);if(this._changePolyState("normal"),s!=null&&s>=0){var l=o.getItemGraphicEl(s);l&&(l.__temp?(o.setItemGraphicEl(s,null),this.group.remove(l)):l.downplay())}else yi.prototype.downplay.call(this,r,i,n,a)},t.prototype._changePolyState=function(r){var i=this._polygon;R8(this._polyline,r),i&&R8(i,r)},t.prototype._newPolyline=function(r){var i=this._polyline;return i&&this._lineGroup.remove(i),i=new Z9e({shape:{points:r},segmentIgnoreThreshold:2,z2:10}),this._lineGroup.add(i),this._polyline=i,i},t.prototype._newPolygon=function(r,i){var n=this._polygon;return n&&this._lineGroup.remove(n),n=new mhe({shape:{points:r,stackedOnPoints:i},segmentIgnoreThreshold:2}),this._lineGroup.add(n),this._polygon=n,n},t.prototype._initSymbolLabelAnimation=function(r,i,n){var a,o,s=i.getBaseAxis(),l=s.inverse;i.type==="cartesian2d"?(a=s.isHorizontal(),o=!1):i.type==="polar"&&(a=s.dim==="angle",o=!0);var u=r.hostModel,c=u.get("animationDuration");xt(c)&&(c=c(null));var h=u.get("animationDelay")||0,d=xt(h)?h(null):h;r.eachItemGraphicEl(function(f,p){var v=f;if(v){var m=[f.x,f.y],g=void 0,y=void 0,x=void 0;if(n)if(o){var b=n,_=i.pointToCoord(m);a?(g=b.startAngle,y=b.endAngle,x=-_[1]/180*Math.PI):(g=b.r0,y=b.r,x=_[0])}else{var w=n;a?(g=w.x,y=w.x+w.width,x=f.x):(g=w.y+w.height,y=w.y,x=f.y)}var S=y===g?0:(x-g)/(y-g);l&&(S=1-S);var A=xt(h)?h(p):c*S+d,M=v.getSymbolPath(),E=M.getTextContent();v.attr({scaleX:0,scaleY:0}),v.animateTo({scaleX:1,scaleY:1},{duration:200,setToFinal:!0,delay:A}),E&&E.animateFrom({style:{opacity:0}},{duration:300,delay:A}),M.disableLabelAnimation=!0}})},t.prototype._initOrUpdateEndLabel=function(r,i,n){var a=r.getModel("endLabel");if(xhe(r)){var o=r.getData(),s=this._polyline,l=o.getLayout("points");if(!l){s.removeTextContent(),this._endLabel=null;return}var u=this._endLabel;u||(u=this._endLabel=new Dr({z2:200}),u.ignoreClip=!0,s.setTextContent(this._endLabel),s.disableLabelAnimation=!0);var c=iPe(l);c>=0&&(Xa(s,ia(r,"endLabel"),{inheritColor:n,labelFetcher:r,labelDataIndex:c,defaultText:function(h,d,f){return f!=null?dhe(o,f):U1(o,h)},enableTextSetter:!0},aPe(a,i)),s.textConfig.position=null)}else this._endLabel&&(this._polyline.removeTextContent(),this._endLabel=null)},t.prototype._endLabelOnDuring=function(r,i,n,a,o,s,l){var u=this._endLabel,c=this._polyline;if(u){r<1&&a.originalX==null&&(a.originalX=u.x,a.originalY=u.y);var h=n.getLayout("points"),d=n.hostModel,f=d.get("connectNulls"),p=s.get("precision"),v=s.get("distance")||0,m=l.getBaseAxis(),g=m.isHorizontal(),y=m.inverse,x=i.shape,b=y?g?x.x:x.y+x.height:g?x.x+x.width:x.y,_=(g?v:0)*(y?-1:1),w=(g?0:-v)*(y?-1:1),S=g?"x":"y",A=nPe(h,b,S),M=A.range,E=M[1]-M[0],T=void 0;if(E>=1){if(E>1&&!f){var L=uq(h,M[0]);u.attr({x:L[0]+_,y:L[1]+w}),o&&(T=d.getRawValue(M[0]))}else{var L=c.getPointOn(b,S);L&&u.attr({x:L[0]+_,y:L[1]+w});var P=d.getRawValue(M[0]),C=d.getRawValue(M[1]);o&&(T=ile(n,p,P,C,A.t))}a.lastFrameIndex=M[0]}else{var D=r===1||a.lastFrameIndex>0?M[0]:0,L=uq(h,D);o&&(T=d.getRawValue(D)),u.attr({x:L[0]+_,y:L[1]+w})}if(o){var I=My(u);typeof I.setLabelText=="function"&&I.setLabelText(T)}}},t.prototype._doUpdateAnimation=function(r,i,n,a,o,s,l){var u=this._polyline,c=this._polygon,h=r.hostModel,d=X9e(this._data,r,this._stackedOnPoints,i,this._coordSys,n,this._valueOrigin),f=d.current,p=d.stackedOnCurrent,v=d.next,m=d.stackedOnNext;if(o&&(f=Jd(d.current,n,o,l),p=Jd(d.stackedOnCurrent,n,o,l),v=Jd(d.next,n,o,l),m=Jd(d.stackedOnNext,n,o,l)),sq(f,v)>3e3||c&&sq(p,m)>3e3){u.stopAnimation(),u.setShape({points:v}),c&&(c.stopAnimation(),c.setShape({points:v,stackedOnPoints:m}));return}u.shape.__points=d.current,u.shape.points=f;var g={shape:{points:v}};d.current!==f&&(g.shape.__points=d.next),u.stopAnimation(),Nr(u,g,h),c&&(c.setShape({points:f,stackedOnPoints:p}),c.stopAnimation(),Nr(c,{shape:{stackedOnPoints:m}},h),u.shape.points!==c.shape.points&&(c.shape.points=u.shape.points));for(var y=[],x=d.status,b=0;b<x.length;b++){var _=x[b].cmd;if(_==="="){var w=r.getItemGraphicEl(x[b].idx1);w&&y.push({el:w,ptIdx:b})}}u.animators&&u.animators.length&&u.animators[0].during(function(){c&&c.dirtyShape();for(var S=u.shape.__points,A=0;A<y.length;A++){var M=y[A].el,E=y[A].ptIdx*2;M.x=S[E],M.y=S[E+1],M.markRedraw()}})},t.prototype.remove=function(r){var i=this.group,n=this._data;this._lineGroup.removeAll(),this._symbolDraw.remove(!0),n&&n.eachItemGraphicEl(function(a,o){a.__temp&&(i.remove(a),n.setItemGraphicEl(o,null))}),this._polyline=this._polygon=this._coordSys=this._points=this._stackedOnPoints=this._endLabel=this._data=null},t.type="line",t}(yi);function _4(e,t){return{seriesType:e,plan:Ly(),reset:function(r){var i=r.getData(),n=r.coordinateSystem,a=r.pipelineContext,o=t||a.large;if(n){var s=qe(n.dimensions,function(f){return i.mapDimension(f)}).slice(0,2),l=s.length,u=i.getCalculationInfo("stackResultDimension");vp(i,s[0])&&(s[0]=u),vp(i,s[1])&&(s[1]=u);var c=i.getStore(),h=i.getDimensionIndex(s[0]),d=i.getDimensionIndex(s[1]);return l&&{progress:function(f,p){for(var v=f.end-f.start,m=o&&Ic(v*l),g=[],y=[],x=f.start,b=0;x<f.end;x++){var _=void 0;if(l===1){var w=c.get(h,x);_=n.dataToPoint(w,null,y)}else g[0]=c.get(h,x),g[1]=c.get(d,x),_=n.dataToPoint(g,null,y);o?(m[b++]=_[0],m[b++]=_[1]):p.setItemLayout(x,_.slice())}o&&p.setLayout("points",m)}}}}}}var sPe={average:function(e){for(var t=0,r=0,i=0;i<e.length;i++)isNaN(e[i])||(t+=e[i],r++);return r===0?NaN:t/r},sum:function(e){for(var t=0,r=0;r<e.length;r++)t+=e[r]||0;return t},max:function(e){for(var t=-1/0,r=0;r<e.length;r++)e[r]>t&&(t=e[r]);return isFinite(t)?t:NaN},min:function(e){for(var t=1/0,r=0;r<e.length;r++)e[r]<t&&(t=e[r]);return isFinite(t)?t:NaN},minmax:function(e){for(var t=-1/0,r=-1/0,i=0;i<e.length;i++){var n=e[i],a=Math.abs(n);a>t&&(t=a,r=n)}return isFinite(r)?r:NaN},nearest:function(e){return e[0]}},lPe=function(e){return Math.round(e.length/2)};function bhe(e){return{seriesType:e,reset:function(t,r,i){var n=t.getData(),a=t.get("sampling"),o=t.coordinateSystem,s=n.count();if(s>10&&o.type==="cartesian2d"&&a){var l=o.getBaseAxis(),u=o.getOtherAxis(l),c=l.getExtent(),h=i.getDevicePixelRatio(),d=Math.abs(c[1]-c[0])*(h||1),f=Math.round(s/d);if(isFinite(f)&&f>1){a==="lttb"&&t.setData(n.lttbDownSample(n.mapDimension(u.dim),1/f));var p=void 0;it(a)?p=sPe[a]:xt(a)&&(p=a),p&&t.setData(n.downSample(n.mapDimension(u.dim),1/f,p,lPe))}}}}}function uPe(e){e.registerChartView(oPe),e.registerSeriesModel(j9e),e.registerLayout(_4("line",!0)),e.registerVisual({seriesType:"line",reset:function(t){var r=t.getData(),i=t.getModel("lineStyle").getLineStyle();i&&!i.stroke&&(i.stroke=r.getVisual("style").fill),r.setVisual("legendLineStyle",i)}}),e.registerProcessor(e.PRIORITY.PROCESSOR.STATISTIC,bhe("line"))}var cw=function(e){_e(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r}return t.prototype.getInitialData=function(r,i){return Bd(null,this,{useEncodeDefaulter:!0})},t.prototype.getMarkerPosition=function(r,i,n){var a=this.coordinateSystem;if(a&&a.clampData){var o=a.clampData(r),s=a.dataToPoint(o);if(n)q(a.getAxes(),function(d,f){if(d.type==="category"&&i!=null){var p=d.getTicksCoords(),v=d.getTickModel().get("alignWithLabel"),m=o[f],g=i[f]==="x1"||i[f]==="y1";if(g&&!v&&(m+=1),p.length<2)return;if(p.length===2){s[f]=d.toGlobalCoord(d.getExtent()[g?1:0]);return}for(var y=void 0,x=void 0,b=1,_=0;_<p.length;_++){var w=p[_].coord,S=_===p.length-1?p[_-1].tickValue+b:p[_].tickValue;if(S===m){x=w;break}else if(S<m)y=w;else if(y!=null&&S>m){x=(w+y)/2;break}_===1&&(b=S-p[0].tickValue)}x==null&&(y?y&&(x=p[p.length-1].coord):x=p[0].coord),s[f]=d.toGlobalCoord(x)}});else{var l=this.getData(),u=l.getLayout("offset"),c=l.getLayout("size"),h=a.getBaseAxis().isHorizontal()?0:1;s[h]+=u+c/2}return s}return[NaN,NaN]},t.type="series.__base_bar__",t.defaultOption={z:2,coordinateSystem:"cartesian2d",legendHoverLink:!0,barMinHeight:0,barMinAngle:0,large:!1,largeThreshold:400,progressive:3e3,progressiveChunkMode:"mod"},t}(Di);Di.registerClass(cw);var cPe=function(e){_e(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r}return t.prototype.getInitialData=function(){return Bd(null,this,{useEncodeDefaulter:!0,createInvertedIndices:!!this.get("realtimeSort",!0)||null})},t.prototype.getProgressive=function(){return this.get("large")?this.get("progressive"):!1},t.prototype.getProgressiveThreshold=function(){var r=this.get("progressiveThreshold"),i=this.get("largeThreshold");return i>r&&(r=i),r},t.prototype.brushSelector=function(r,i,n){return n.rect(i.getItemLayout(r))},t.type="series.bar",t.dependencies=["grid","polar"],t.defaultOption=Mp(cw.defaultOption,{clip:!0,roundCap:!1,showBackground:!1,backgroundStyle:{color:"rgba(180, 180, 180, 0.2)",borderColor:null,borderWidth:0,borderType:"solid",borderRadius:0,shadowBlur:0,shadowColor:null,shadowOffsetX:0,shadowOffsetY:0,opacity:1},select:{itemStyle:{borderColor:"#212121"}},realtimeSort:!1}),t}(cw),hPe=function(){function e(){this.cx=0,this.cy=0,this.r0=0,this.r=0,this.startAngle=0,this.endAngle=Math.PI*2,this.clockwise=!0}return e}(),$8=function(e){_e(t,e);function t(r){var i=e.call(this,r)||this;return i.type="sausage",i}return t.prototype.getDefaultShape=function(){return new hPe},t.prototype.buildPath=function(r,i){var n=i.cx,a=i.cy,o=Math.max(i.r0||0,0),s=Math.max(i.r,0),l=(s-o)*.5,u=o+l,c=i.startAngle,h=i.endAngle,d=i.clockwise,f=Math.PI*2,p=d?h-c<f:c-h<f;p||(c=h-(d?f:-f));var v=Math.cos(c),m=Math.sin(c),g=Math.cos(h),y=Math.sin(h);p?(r.moveTo(v*o+n,m*o+a),r.arc(v*u+n,m*u+a,l,-Math.PI+c,c,!d)):r.moveTo(v*s+n,m*s+a),r.arc(n,a,s,c,h,!d),r.arc(g*u+n,y*u+a,l,h-Math.PI*2,h-Math.PI,!d),o!==0&&r.arc(n,a,o,h,c,d)},t}(or);function dPe(e,t){t=t||{};var r=t.isRoundCap;return function(i,n,a){var o=n.position;if(!o||o instanceof Array)return L8(i,n,a);var s=e(o),l=n.distance!=null?n.distance:5,u=this.shape,c=u.cx,h=u.cy,d=u.r,f=u.r0,p=(d+f)/2,v=u.startAngle,m=u.endAngle,g=(v+m)/2,y=r?Math.abs(d-f)/2:0,x=Math.cos,b=Math.sin,_=c+d*x(v),w=h+d*b(v),S="left",A="top";switch(s){case"startArc":_=c+(f-l)*x(g),w=h+(f-l)*b(g),S="center",A="top";break;case"insideStartArc":_=c+(f+l)*x(g),w=h+(f+l)*b(g),S="center",A="bottom";break;case"startAngle":_=c+p*x(v)+X3(v,l+y,!1),w=h+p*b(v)+Z3(v,l+y,!1),S="right",A="middle";break;case"insideStartAngle":_=c+p*x(v)+X3(v,-l+y,!1),w=h+p*b(v)+Z3(v,-l+y,!1),S="left",A="middle";break;case"middle":_=c+p*x(g),w=h+p*b(g),S="center",A="middle";break;case"endArc":_=c+(d+l)*x(g),w=h+(d+l)*b(g),S="center",A="bottom";break;case"insideEndArc":_=c+(d-l)*x(g),w=h+(d-l)*b(g),S="center",A="top";break;case"endAngle":_=c+p*x(m)+X3(m,l+y,!0),w=h+p*b(m)+Z3(m,l+y,!0),S="left",A="middle";break;case"insideEndAngle":_=c+p*x(m)+X3(m,-l+y,!0),w=h+p*b(m)+Z3(m,-l+y,!0),S="right",A="middle";break;default:return L8(i,n,a)}return i=i||{},i.x=_,i.y=w,i.align=S,i.verticalAlign=A,i}}function fPe(e,t,r,i){if(kr(i)){e.setTextConfig({rotation:i});return}else if(Ue(t)){e.setTextConfig({rotation:0});return}var n=e.shape,a=n.clockwise?n.startAngle:n.endAngle,o=n.clockwise?n.endAngle:n.startAngle,s=(a+o)/2,l,u=r(t);switch(u){case"startArc":case"insideStartArc":case"middle":case"insideEndArc":case"endArc":l=s;break;case"startAngle":case"insideStartAngle":l=a;break;case"endAngle":case"insideEndAngle":l=o;break;default:e.setTextConfig({rotation:0});return}var c=Math.PI*1.5-l;u==="middle"&&c>Math.PI/2&&c<Math.PI*1.5&&(c-=Math.PI),e.setTextConfig({rotation:c})}function X3(e,t,r){return t*Math.sin(e)*(r?-1:1)}function Z3(e,t,r){return t*Math.cos(e)*(r?1:-1)}function Z0(e,t,r){var i=e.get("borderRadius");if(i==null)return r?{cornerRadius:0}:null;Ue(i)||(i=[i,i,i,i]);var n=Math.abs(t.r||0-t.r0||0);return{cornerRadius:qe(i,function(a){return Tu(a,n)})}}var LM=Math.max,kM=Math.min;function pPe(e,t){var r=e.getArea&&e.getArea();if(rm(e,"cartesian2d")){var i=e.getBaseAxis();if(i.type!=="category"||!i.onBand){var n=t.getLayout("bandWidth");i.isHorizontal()?(r.x-=n,r.width+=n*2):(r.y-=n,r.height+=n*2)}}return r}var vPe=function(e){_e(t,e);function t(){var r=e.call(this)||this;return r.type=t.type,r._isFirstFrame=!0,r}return t.prototype.render=function(r,i,n,a){this._model=r,this._removeOnRenderedListener(n),this._updateDrawMode(r);var o=r.get("coordinateSystem");(o==="cartesian2d"||o==="polar")&&(this._progressiveEls=null,this._isLargeDraw?this._renderLarge(r,i,n):this._renderNormal(r,i,n,a))},t.prototype.incrementalPrepareRender=function(r){this._clear(),this._updateDrawMode(r),this._updateLargeClip(r)},t.prototype.incrementalRender=function(r,i){this._progressiveEls=[],this._incrementalRenderLarge(r,i)},t.prototype.eachRendered=function(r){Ep(this._progressiveEls||this.group,r)},t.prototype._updateDrawMode=function(r){var i=r.pipelineContext.large;(this._isLargeDraw==null||i!==this._isLargeDraw)&&(this._isLargeDraw=i,this._clear())},t.prototype._renderNormal=function(r,i,n,a){var o=this.group,s=r.getData(),l=this._data,u=r.coordinateSystem,c=u.getBaseAxis(),h;u.type==="cartesian2d"?h=c.isHorizontal():u.type==="polar"&&(h=c.dim==="angle");var d=r.isAnimationEnabled()?r:null,f=mPe(r,u);f&&this._enableRealtimeSort(f,s,n);var p=r.get("clip",!0)||f,v=pPe(u,s);o.removeClipPath();var m=r.get("roundCap",!0),g=r.get("showBackground",!0),y=r.getModel("backgroundStyle"),x=y.get("borderRadius")||0,b=[],_=this._backgroundEls,w=a&&a.isInitSort,S=a&&a.type==="changeAxisOrder";function A(T){var L=Q3[u.type](s,T),P=APe(u,h,L);return P.useStyle(y.getItemStyle()),u.type==="cartesian2d"?P.setShape("r",x):P.setShape("cornerRadius",x),b[T]=P,P}s.diff(l).add(function(T){var L=s.getItemModel(T),P=Q3[u.type](s,T,L);if(g&&A(T),!(!s.hasValue(T)||!pq[u.type](P))){var C=!1;p&&(C=cq[u.type](v,P));var D=hq[u.type](r,s,T,P,h,d,c.model,!1,m);f&&(D.forceLabelAnimation=!0),vq(D,s,T,L,P,r,h,u.type==="polar"),w?D.attr({shape:P}):f?dq(f,d,D,P,T,h,!1,!1):Vi(D,{shape:P},r,T),s.setItemGraphicEl(T,D),o.add(D),D.ignore=C}}).update(function(T,L){var P=s.getItemModel(T),C=Q3[u.type](s,T,P);if(g){var D=void 0;_.length===0?D=A(L):(D=_[L],D.useStyle(y.getItemStyle()),u.type==="cartesian2d"?D.setShape("r",x):D.setShape("cornerRadius",x),b[T]=D);var I=Q3[u.type](s,T),O=_he(h,I,u);Nr(D,{shape:O},d,T)}var R=l.getItemGraphicEl(L);if(!s.hasValue(T)||!pq[u.type](C)){o.remove(R);return}var H=!1;if(p&&(H=cq[u.type](v,C),H&&o.remove(R)),R?Pu(R):R=hq[u.type](r,s,T,C,h,d,c.model,!!R,m),f&&(R.forceLabelAnimation=!0),S){var j=R.getTextContent();if(j){var N=My(j);N.prevValue!=null&&(N.prevValue=N.value)}}else vq(R,s,T,P,C,r,h,u.type==="polar");w?R.attr({shape:C}):f?dq(f,d,R,C,T,h,!0,S):Nr(R,{shape:C},r,T,null),s.setItemGraphicEl(T,R),R.ignore=H,o.add(R)}).remove(function(T){var L=l.getItemGraphicEl(T);L&&ew(L,r,T)}).execute();var M=this._backgroundGroup||(this._backgroundGroup=new Ct);M.removeAll();for(var E=0;E<b.length;++E)M.add(b[E]);o.add(M),this._backgroundEls=b,this._data=s},t.prototype._renderLarge=function(r,i,n){this._clear(),gq(r,this.group),this._updateLargeClip(r)},t.prototype._incrementalRenderLarge=function(r,i){this._removeBackground(),gq(i,this.group,this._progressiveEls,!0)},t.prototype._updateLargeClip=function(r){var i=r.get("clip",!0)&&w4(r.coordinateSystem,!1,r),n=this.group;i?n.setClipPath(i):n.removeClipPath()},t.prototype._enableRealtimeSort=function(r,i,n){var a=this;if(i.count()){var o=r.baseAxis;if(this._isFirstFrame)this._dispatchInitSort(i,r,n),this._isFirstFrame=!1;else{var s=function(l){var u=i.getItemGraphicEl(l),c=u&&u.shape;return c&&Math.abs(o.isHorizontal()?c.height:c.width)||0};this._onRendered=function(){a._updateSortWithinSameData(i,s,o,n)},n.getZr().on("rendered",this._onRendered)}}},t.prototype._dataSort=function(r,i,n){var a=[];return r.each(r.mapDimension(i.dim),function(o,s){var l=n(s);l=l??NaN,a.push({dataIndex:s,mappedValue:l,ordinalNumber:o})}),a.sort(function(o,s){return s.mappedValue-o.mappedValue}),{ordinalNumbers:qe(a,function(o){return o.ordinalNumber})}},t.prototype._isOrderChangedWithinSameData=function(r,i,n){for(var a=n.scale,o=r.mapDimension(n.dim),s=Number.MAX_VALUE,l=0,u=a.getOrdinalMeta().categories.length;l<u;++l){var c=r.rawIndexOf(o,a.getRawOrdinalNumber(l)),h=c<0?Number.MIN_VALUE:i(r.indexOfRawIndex(c));if(h>s)return!0;s=h}return!1},t.prototype._isOrderDifferentInView=function(r,i){for(var n=i.scale,a=n.getExtent(),o=Math.max(0,a[0]),s=Math.min(a[1],n.getOrdinalMeta().categories.length-1);o<=s;++o)if(r.ordinalNumbers[o]!==n.getRawOrdinalNumber(o))return!0},t.prototype._updateSortWithinSameData=function(r,i,n,a){if(this._isOrderChangedWithinSameData(r,i,n)){var o=this._dataSort(r,n,i);this._isOrderDifferentInView(o,n)&&(this._removeOnRenderedListener(a),a.dispatchAction({type:"changeAxisOrder",componentType:n.dim+"Axis",axisId:n.index,sortInfo:o}))}},t.prototype._dispatchInitSort=function(r,i,n){var a=i.baseAxis,o=this._dataSort(r,a,function(s){return r.get(r.mapDimension(i.otherAxis.dim),s)});n.dispatchAction({type:"changeAxisOrder",componentType:a.dim+"Axis",isInitSort:!0,axisId:a.index,sortInfo:o})},t.prototype.remove=function(r,i){this._clear(this._model),this._removeOnRenderedListener(i)},t.prototype.dispose=function(r,i){this._removeOnRenderedListener(i)},t.prototype._removeOnRenderedListener=function(r){this._onRendered&&(r.getZr().off("rendered",this._onRendered),this._onRendered=null)},t.prototype._clear=function(r){var i=this.group,n=this._data;r&&r.isAnimationEnabled()&&n&&!this._isLargeDraw?(this._removeBackground(),this._backgroundEls=[],n.eachItemGraphicEl(function(a){ew(a,r,Dt(a).dataIndex)})):i.removeAll(),this._data=null,this._isFirstFrame=!0},t.prototype._removeBackground=function(){this.group.remove(this._backgroundGroup),this._backgroundGroup=null},t.type="bar",t}(yi),cq={cartesian2d:function(e,t){var r=t.width<0?-1:1,i=t.height<0?-1:1;r<0&&(t.x+=t.width,t.width=-t.width),i<0&&(t.y+=t.height,t.height=-t.height);var n=e.x+e.width,a=e.y+e.height,o=LM(t.x,e.x),s=kM(t.x+t.width,n),l=LM(t.y,e.y),u=kM(t.y+t.height,a),c=s<o,h=u<l;return t.x=c&&o>n?s:o,t.y=h&&l>a?u:l,t.width=c?0:s-o,t.height=h?0:u-l,r<0&&(t.x+=t.width,t.width=-t.width),i<0&&(t.y+=t.height,t.height=-t.height),c||h},polar:function(e,t){var r=t.r0<=t.r?1:-1;if(r<0){var i=t.r;t.r=t.r0,t.r0=i}var n=kM(t.r,e.r),a=LM(t.r0,e.r0);t.r=n,t.r0=a;var o=n-a<0;if(r<0){var i=t.r;t.r=t.r0,t.r0=i}return o}},hq={cartesian2d:function(e,t,r,i,n,a,o,s,l){var u=new Tr({shape:Be({},i),z2:1});if(u.__dataIndex=r,u.name="item",a){var c=u.shape,h=n?"height":"width";c[h]=0}return u},polar:function(e,t,r,i,n,a,o,s,l){var u=!n&&l?$8:Zo,c=new u({shape:i,z2:1});c.name="item";var h=whe(n);if(c.calculateTextPosition=dPe(h,{isRoundCap:u===$8}),a){var d=c.shape,f=n?"r":"endAngle",p={};d[f]=n?i.r0:i.startAngle,p[f]=i[f],(s?Nr:Vi)(c,{shape:p},a)}return c}};function mPe(e,t){var r=e.get("realtimeSort",!0),i=t.getBaseAxis();if(r&&i.type==="category"&&t.type==="cartesian2d")return{baseAxis:i,otherAxis:t.getOtherAxis(i)}}function dq(e,t,r,i,n,a,o,s){var l,u;a?(u={x:i.x,width:i.width},l={y:i.y,height:i.height}):(u={y:i.y,height:i.height},l={x:i.x,width:i.width}),s||(o?Nr:Vi)(r,{shape:l},t,n,null);var c=t?e.baseAxis.model:null;(o?Nr:Vi)(r,{shape:u},c,n)}function fq(e,t){for(var r=0;r<t.length;r++)if(!isFinite(e[t[r]]))return!0;return!1}var gPe=["x","y","width","height"],yPe=["cx","cy","r","startAngle","endAngle"],pq={cartesian2d:function(e){return!fq(e,gPe)},polar:function(e){return!fq(e,yPe)}},Q3={cartesian2d:function(e,t,r){var i=e.getItemLayout(t),n=r?bPe(r,i):0,a=i.width>0?1:-1,o=i.height>0?1:-1;return{x:i.x+a*n/2,y:i.y+o*n/2,width:i.width-a*n,height:i.height-o*n}},polar:function(e,t,r){var i=e.getItemLayout(t);return{cx:i.cx,cy:i.cy,r0:i.r0,r:i.r,startAngle:i.startAngle,endAngle:i.endAngle,clockwise:i.clockwise}}};function xPe(e){return e.startAngle!=null&&e.endAngle!=null&&e.startAngle===e.endAngle}function whe(e){return function(t){var r=t?"Arc":"Angle";return function(i){switch(i){case"start":case"insideStart":case"end":case"insideEnd":return i+r;default:return i}}}(e)}function vq(e,t,r,i,n,a,o,s){var l=t.getItemVisual(r,"style");if(s){if(!a.get("roundCap")){var c=e.shape,h=Z0(i.getModel("itemStyle"),c,!0);Be(c,h),e.setShape(c)}}else{var u=i.get(["itemStyle","borderRadius"])||0;e.setShape("r",u)}e.useStyle(l);var d=i.getShallow("cursor");d&&e.attr("cursor",d);var f=s?o?n.r>=n.r0?"endArc":"startArc":n.endAngle>=n.startAngle?"endAngle":"startAngle":o?n.height>=0?"bottom":"top":n.width>=0?"right":"left",p=ia(i);Xa(e,p,{labelFetcher:a,labelDataIndex:r,defaultText:U1(a.getData(),r),inheritColor:l.fill,defaultOpacity:l.opacity,defaultOutsidePosition:f});var v=e.getTextContent();if(s&&v){var m=i.get(["label","position"]);e.textConfig.inside=m==="middle"?!0:null,fPe(e,m==="outside"?f:m,whe(o),i.get(["label","rotate"]))}zle(v,p,a.getRawValue(r),function(y){return dhe(t,y)});var g=i.getModel(["emphasis"]);Ji(e,g.get("focus"),g.get("blurScope"),g.get("disabled")),Ya(e,i),xPe(n)&&(e.style.fill="none",e.style.stroke="none",q(e.states,function(y){y.style&&(y.style.fill=y.style.stroke="none")}))}function bPe(e,t){var r=e.get(["itemStyle","borderColor"]);if(!r||r==="none")return 0;var i=e.get(["itemStyle","borderWidth"])||0,n=isNaN(t.width)?Number.MAX_VALUE:Math.abs(t.width),a=isNaN(t.height)?Number.MAX_VALUE:Math.abs(t.height);return Math.min(i,n,a)}var wPe=function(){function e(){}return e}(),mq=function(e){_e(t,e);function t(r){var i=e.call(this,r)||this;return i.type="largeBar",i}return t.prototype.getDefaultShape=function(){return new wPe},t.prototype.buildPath=function(r,i){for(var n=i.points,a=this.baseDimIdx,o=1-this.baseDimIdx,s=[],l=[],u=this.barWidth,c=0;c<n.length;c+=3)l[a]=u,l[o]=n[c+2],s[a]=n[c+a],s[o]=n[c+o],r.rect(s[0],s[1],l[0],l[1])},t}(or);function gq(e,t,r,i){var n=e.getData(),a=n.getLayout("valueAxisHorizontal")?1:0,o=n.getLayout("largeDataIndices"),s=n.getLayout("size"),l=e.getModel("backgroundStyle"),u=n.getLayout("largeBackgroundPoints");if(u){var c=new mq({shape:{points:u},incremental:!!i,silent:!0,z2:0});c.baseDimIdx=a,c.largeDataIndices=o,c.barWidth=s,c.useStyle(l.getItemStyle()),t.add(c),r&&r.push(c)}var h=new mq({shape:{points:n.getLayout("largePoints")},incremental:!!i,ignoreCoarsePointer:!0,z2:1});h.baseDimIdx=a,h.largeDataIndices=o,h.barWidth=s,t.add(h),h.useStyle(n.getVisual("style")),Dt(h).seriesIndex=e.seriesIndex,e.get("silent")||(h.on("mousedown",yq),h.on("mousemove",yq)),r&&r.push(h)}var yq=IN(function(e){var t=this,r=_Pe(t,e.offsetX,e.offsetY);Dt(t).dataIndex=r>=0?r:null},30,!1);function _Pe(e,t,r){for(var i=e.baseDimIdx,n=1-i,a=e.shape.points,o=e.largeDataIndices,s=[],l=[],u=e.barWidth,c=0,h=a.length/3;c<h;c++){var d=c*3;if(l[i]=u,l[n]=a[d+2],s[i]=a[d+i],s[n]=a[d+n],l[n]<0&&(s[n]+=l[n],l[n]=-l[n]),t>=s[0]&&t<=s[0]+l[0]&&r>=s[1]&&r<=s[1]+l[1])return o[c]}return-1}function _he(e,t,r){if(rm(r,"cartesian2d")){var i=t,n=r.getArea();return{x:e?i.x:n.x,y:e?n.y:i.y,width:e?i.width:n.width,height:e?n.height:i.height}}else{var n=r.getArea(),a=t;return{cx:n.cx,cy:n.cy,r0:e?n.r0:a.r0,r:e?n.r:a.r,startAngle:e?a.startAngle:0,endAngle:e?a.endAngle:Math.PI*2}}}function APe(e,t,r){var i=e.type==="polar"?Zo:Tr;return new i({shape:_he(t,r,e),silent:!0,z2:0})}function SPe(e){e.registerChartView(vPe),e.registerSeriesModel(cPe),e.registerLayout(e.PRIORITY.VISUAL.LAYOUT,kt(Mce,"bar")),e.registerLayout(e.PRIORITY.VISUAL.PROGRESSIVE_LAYOUT,Tce("bar")),e.registerProcessor(e.PRIORITY.PROCESSOR.STATISTIC,bhe("bar")),e.registerAction({type:"changeAxisOrder",event:"changeAxisOrder",update:"update"},function(t,r){var i=t.componentType||"series";r.eachComponent({mainType:i,query:t},function(n){t.sortInfo&&n.axis.setCategorySortInfo(t.sortInfo)})})}var xq=Math.PI*2,K3=Math.PI/180;function Ahe(e,t){return zn(e.getBoxLayoutParams(),{width:t.getWidth(),height:t.getHeight()})}function She(e,t){var r=Ahe(e,t),i=e.get("center"),n=e.get("radius");Ue(n)||(n=[0,n]);var a=et(r.width,t.getWidth()),o=et(r.height,t.getHeight()),s=Math.min(a,o),l=et(n[0],s/2),u=et(n[1],s/2),c,h,d=e.coordinateSystem;if(d){var f=d.dataToPoint(i);c=f[0]||0,h=f[1]||0}else Ue(i)||(i=[i,i]),c=et(i[0],a)+r.x,h=et(i[1],o)+r.y;return{cx:c,cy:h,r0:l,r:u}}function CPe(e,t,r){t.eachSeriesByType(e,function(i){var n=i.getData(),a=n.mapDimension("value"),o=Ahe(i,r),s=She(i,r),l=s.cx,u=s.cy,c=s.r,h=s.r0,d=-i.get("startAngle")*K3,f=i.get("endAngle"),p=i.get("padAngle")*K3;f=f==="auto"?d-xq:-f*K3;var v=i.get("minAngle")*K3,m=v+p,g=0;n.each(a,function(O){!isNaN(O)&&g++});var y=n.getSum(a),x=Math.PI/(y||g)*2,b=i.get("clockwise"),_=i.get("roseType"),w=i.get("stillShowZeroSum"),S=n.getDataExtent(a);S[0]=0;var A=b?1:-1,M=[d,f],E=A*p/2;oN(M,!b),d=M[0],f=M[1];var T=Che(i);T.startAngle=d,T.endAngle=f,T.clockwise=b;var L=Math.abs(f-d),P=L,C=0,D=d;if(n.setLayout({viewRect:o,r:c}),n.each(a,function(O,R){var H;if(isNaN(O)){n.setItemLayout(R,{angle:NaN,startAngle:NaN,endAngle:NaN,clockwise:b,cx:l,cy:u,r0:h,r:_?NaN:c});return}_!=="area"?H=y===0&&w?x:O*x:H=L/g,H<m?(H=m,P-=m):C+=O;var j=D+A*H,N=0,k=0;p>H?(N=D+A*H/2,k=N):(N=D+E,k=j-E),n.setItemLayout(R,{angle:H,startAngle:N,endAngle:k,clockwise:b,cx:l,cy:u,r0:h,r:_?ti(O,S,[h,c]):c}),D=j}),P<xq&&g)if(P<=.001){var I=L/g;n.each(a,function(O,R){if(!isNaN(O)){var H=n.getItemLayout(R);H.angle=I;var j=0,N=0;I<p?(j=d+A*(R+1/2)*I,N=j):(j=d+A*R*I+E,N=d+A*(R+1)*I-E),H.startAngle=j,H.endAngle=N}})}else x=P/C,D=d,n.each(a,function(O,R){if(!isNaN(O)){var H=n.getItemLayout(R),j=H.angle===m?m:O*x,N=0,k=0;j<p?(N=D+A*j/2,k=N):(N=D+E,k=D+A*j-E),H.startAngle=N,H.endAngle=k,D+=A*j}})})}var Che=Pr();function A4(e){return{seriesType:e,reset:function(t,r){var i=r.findComponents({mainType:"legend"});if(!(!i||!i.length)){var n=t.getData();n.filterSelf(function(a){for(var o=n.getName(a),s=0;s<i.length;s++)if(!i[s].isSelected(o))return!1;return!0})}}}}var EPe=Math.PI/180;function bq(e,t,r,i,n,a,o,s,l,u){if(e.length<2)return;function c(v){for(var m=v.rB,g=m*m,y=0;y<v.list.length;y++){var x=v.list[y],b=Math.abs(x.label.y-r),_=i+x.len,w=_*_,S=Math.sqrt((1-Math.abs(b*b/g))*w),A=t+(S+x.len2)*n,M=A-x.label.x,E=x.targetTextWidth-M*n;Ehe(x,E,!0),x.label.x=A}}function h(v){for(var m={list:[],maxY:0},g={list:[],maxY:0},y=0;y<v.length;y++)if(v[y].labelAlignTo==="none"){var x=v[y],b=x.label.y>r?g:m,_=Math.abs(x.label.y-r);if(_>=b.maxY){var w=x.label.x-t-x.len2*n,S=i+x.len,A=Math.abs(w)<S?Math.sqrt(_*_/(1-w*w/S/S)):S;b.rB=A,b.maxY=_}b.list.push(x)}c(m),c(g)}for(var d=e.length,f=0;f<d;f++)if(e[f].position==="outer"&&e[f].labelAlignTo==="labelLine"){var p=e[f].label.x-u;e[f].linePoints[1][0]+=p,e[f].label.x=u}Zce(e,l,l+o)&&h(e)}function MPe(e,t,r,i,n,a,o,s){for(var l=[],u=[],c=Number.MAX_VALUE,h=-Number.MAX_VALUE,d=0;d<e.length;d++){var f=e[d].label;RM(e[d])||(f.x<t?(c=Math.min(c,f.x),l.push(e[d])):(h=Math.max(h,f.x),u.push(e[d])))}for(var d=0;d<e.length;d++){var p=e[d];if(!RM(p)&&p.linePoints){if(p.labelStyleWidth!=null)continue;var f=p.label,v=p.linePoints,m=void 0;p.labelAlignTo==="edge"?f.x<t?m=v[2][0]-p.labelDistance-o-p.edgeDistance:m=o+n-p.edgeDistance-v[2][0]-p.labelDistance:p.labelAlignTo==="labelLine"?f.x<t?m=c-o-p.bleedMargin:m=o+n-h-p.bleedMargin:f.x<t?m=f.x-o-p.bleedMargin:m=o+n-f.x-p.bleedMargin,p.targetTextWidth=m,Ehe(p,m)}}bq(u,t,r,i,1,n,a,o,s,h),bq(l,t,r,i,-1,n,a,o,s,c);for(var d=0;d<e.length;d++){var p=e[d];if(!RM(p)&&p.linePoints){var f=p.label,v=p.linePoints,g=p.labelAlignTo==="edge",y=f.style.padding,x=y?y[1]+y[3]:0,b=f.style.backgroundColor?0:x,_=p.rect.width+b,w=v[1][0]-v[2][0];g?f.x<t?v[2][0]=o+p.edgeDistance+_+p.labelDistance:v[2][0]=o+n-p.edgeDistance-_-p.labelDistance:(f.x<t?v[2][0]=f.x+p.labelDistance:v[2][0]=f.x-p.labelDistance,v[1][0]=v[2][0]+w),v[1][1]=v[2][1]=f.y}}}function Ehe(e,t,r){if(r===void 0&&(r=!1),e.labelStyleWidth==null){var i=e.label,n=i.style,a=e.rect,o=n.backgroundColor,s=n.padding,l=s?s[1]+s[3]:0,u=n.overflow,c=a.width+(o?0:l);if(t<c||r){var h=a.height;if(u&&u.match("break")){i.setStyle("backgroundColor",null),i.setStyle("width",t-l);var d=i.getBoundingRect();i.setStyle("width",Math.ceil(d.width)),i.setStyle("backgroundColor",o)}else{var f=t-l,p=t<c?f:r?f>e.unconstrainedWidth?null:f:null;i.setStyle("width",p)}var v=i.getBoundingRect();a.width=v.width;var m=(i.style.margin||0)+2.1;a.height=v.height+m,a.y-=(a.height-h)/2}}}function RM(e){return e.position==="center"}function TPe(e){var t=e.getData(),r=[],i,n,a=!1,o=(e.get("minShowLabelAngle")||0)*EPe,s=t.getLayout("viewRect"),l=t.getLayout("r"),u=s.width,c=s.x,h=s.y,d=s.height;function f(w){w.ignore=!0}function p(w){if(!w.ignore)return!0;for(var S in w.states)if(w.states[S].ignore===!1)return!0;return!1}t.each(function(w){var S=t.getItemGraphicEl(w),A=S.shape,M=S.getTextContent(),E=S.getTextGuideLine(),T=t.getItemModel(w),L=T.getModel("label"),P=L.get("position")||T.get(["emphasis","label","position"]),C=L.get("distanceToLabelLine"),D=L.get("alignTo"),I=et(L.get("edgeDistance"),u),O=L.get("bleedMargin"),R=T.getModel("labelLine"),H=R.get("length");H=et(H,u);var j=R.get("length2");if(j=et(j,u),Math.abs(A.endAngle-A.startAngle)<o){q(M.states,f),M.ignore=!0,E&&(q(E.states,f),E.ignore=!0);return}if(p(M)){var N=(A.startAngle+A.endAngle)/2,k=Math.cos(N),G=Math.sin(N),Y,F,Z,ne;i=A.cx,n=A.cy;var re=P==="inside"||P==="inner";if(P==="center")Y=A.cx,F=A.cy,ne="center";else{var ae=(re?(A.r+A.r0)/2*k:A.r*k)+i,he=(re?(A.r+A.r0)/2*G:A.r*G)+n;if(Y=ae+k*3,F=he+G*3,!re){var se=ae+k*(H+l-A.r),fe=he+G*(H+l-A.r),J=se+(k<0?-1:1)*j,te=fe;D==="edge"?Y=k<0?c+I:c+u-I:Y=J+(k<0?-C:C),F=te,Z=[[ae,he],[se,fe],[J,te]]}ne=re?"center":D==="edge"?k>0?"right":"left":k>0?"left":"right"}var le=Math.PI,Ae=0,xe=L.get("rotate");if(kr(xe))Ae=xe*(le/180);else if(P==="center")Ae=0;else if(xe==="radial"||xe===!0){var ye=k<0?-N+le:-N;Ae=ye}else if(xe==="tangential"&&P!=="outside"&&P!=="outer"){var Se=Math.atan2(k,G);Se<0&&(Se=le*2+Se);var Pe=G>0;Pe&&(Se=le+Se),Ae=Se-le}if(a=!!Ae,M.x=Y,M.y=F,M.rotation=Ae,M.setStyle({verticalAlign:"middle"}),re){M.setStyle({align:ne});var K=M.states.select;K&&(K.x+=M.x,K.y+=M.y)}else{var Ce=M.getBoundingRect().clone();Ce.applyTransform(M.getComputedTransform());var ee=(M.style.margin||0)+2.1;Ce.y-=ee/2,Ce.height+=ee,r.push({label:M,labelLine:E,position:P,len:H,len2:j,minTurnAngle:R.get("minTurnAngle"),maxSurfaceAngle:R.get("maxSurfaceAngle"),surfaceNormal:new Ut(k,G),linePoints:Z,textAlign:ne,labelDistance:C,labelAlignTo:D,edgeDistance:I,bleedMargin:O,rect:Ce,unconstrainedWidth:Ce.width,labelStyleWidth:M.style.width})}S.setTextConfig({inside:re})}}),!a&&e.get("avoidLabelOverlap")&&MPe(r,i,n,l,u,d,c,h);for(var v=0;v<r.length;v++){var m=r[v],g=m.label,y=m.labelLine,x=isNaN(g.x)||isNaN(g.y);if(g){g.setStyle({align:m.textAlign}),x&&(q(g.states,f),g.ignore=!0);var b=g.states.select;b&&(b.x+=g.x,b.y+=g.y)}if(y){var _=m.linePoints;x||!_?(q(y.states,f),y.ignore=!0):(qce(_,m.minTurnAngle),KTe(_,m.surfaceNormal,m.maxSurfaceAngle),y.setShape({points:_}),g.__hostTarget.textGuideLineConfig={anchor:new Ut(_[0][0],_[0][1])})}}}var PPe=function(e){_e(t,e);function t(r,i,n){var a=e.call(this)||this;a.z2=2;var o=new Dr;return a.setTextContent(o),a.updateData(r,i,n,!0),a}return t.prototype.updateData=function(r,i,n,a){var o=this,s=r.hostModel,l=r.getItemModel(i),u=l.getModel("emphasis"),c=r.getItemLayout(i),h=Be(Z0(l.getModel("itemStyle"),c,!0),c);if(isNaN(h.startAngle)){o.setShape(h);return}if(a){o.setShape(h);var d=s.getShallow("animationType");s.ecModel.ssr?(Vi(o,{scaleX:0,scaleY:0},s,{dataIndex:i,isFrom:!0}),o.originX=h.cx,o.originY=h.cy):d==="scale"?(o.shape.r=c.r0,Vi(o,{shape:{r:c.r}},s,i)):n!=null?(o.setShape({startAngle:n,endAngle:n}),Vi(o,{shape:{startAngle:c.startAngle,endAngle:c.endAngle}},s,i)):(o.shape.endAngle=c.startAngle,Nr(o,{shape:{endAngle:c.endAngle}},s,i))}else Pu(o),Nr(o,{shape:h},s,i);o.useStyle(r.getItemVisual(i,"style")),Ya(o,l);var f=(c.startAngle+c.endAngle)/2,p=s.get("selectedOffset"),v=Math.cos(f)*p,m=Math.sin(f)*p,g=l.getShallow("cursor");g&&o.attr("cursor",g),this._updateLabel(s,r,i),o.ensureState("emphasis").shape=Be({r:c.r+(u.get("scale")&&u.get("scaleSize")||0)},Z0(u.getModel("itemStyle"),c)),Be(o.ensureState("select"),{x:v,y:m,shape:Z0(l.getModel(["select","itemStyle"]),c)}),Be(o.ensureState("blur"),{shape:Z0(l.getModel(["blur","itemStyle"]),c)});var y=o.getTextGuideLine(),x=o.getTextContent();y&&Be(y.ensureState("select"),{x:v,y:m}),Be(x.ensureState("select"),{x:v,y:m}),Ji(this,u.get("focus"),u.get("blurScope"),u.get("disabled"))},t.prototype._updateLabel=function(r,i,n){var a=this,o=i.getItemModel(n),s=o.getModel("labelLine"),l=i.getItemVisual(n,"style"),u=l&&l.fill,c=l&&l.opacity;Xa(a,ia(o),{labelFetcher:i.hostModel,labelDataIndex:n,inheritColor:u,defaultOpacity:c,defaultText:r.getFormattedLabel(n,"normal")||i.getName(n)});var h=a.getTextContent();a.setTextConfig({position:null,rotation:null}),h.attr({z2:10});var d=r.get(["label","position"]);if(d!=="outside"&&d!=="outer")a.removeTextGuideLine();else{var f=this.getTextGuideLine();f||(f=new $o,this.setTextGuideLine(f)),WN(this,qN(o),{stroke:u,opacity:Vc(s.get(["lineStyle","opacity"]),c,1)})}},t}(Zo),DPe=function(e){_e(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.ignoreLabelLineUpdate=!0,r}return t.prototype.render=function(r,i,n,a){var o=r.getData(),s=this._data,l=this.group,u;if(!s&&o.count()>0){for(var c=o.getItemLayout(0),h=1;isNaN(c&&c.startAngle)&&h<o.count();++h)c=o.getItemLayout(h);c&&(u=c.startAngle)}if(this._emptyCircleSector&&l.remove(this._emptyCircleSector),o.count()===0&&r.get("showEmptyCircle")){var d=Che(r),f=new Zo({shape:Be(She(r,n),d)});f.useStyle(r.getModel("emptyCircleStyle").getItemStyle()),this._emptyCircleSector=f,l.add(f)}o.diff(s).add(function(p){var v=new PPe(o,p,u);o.setItemGraphicEl(p,v),l.add(v)}).update(function(p,v){var m=s.getItemGraphicEl(v);m.updateData(o,p,u),m.off("click"),l.add(m),o.setItemGraphicEl(p,m)}).remove(function(p){var v=s.getItemGraphicEl(p);ew(v,r,p)}).execute(),TPe(r),r.get("animationTypeUpdate")!=="expansion"&&(this._data=o)},t.prototype.dispose=function(){},t.prototype.containPoint=function(r,i){var n=i.getData(),a=n.getItemLayout(0);if(a){var o=r[0]-a.cx,s=r[1]-a.cy,l=Math.sqrt(o*o+s*s);return l<=a.r&&l>=a.r0}},t.type="pie",t}(yi);function By(e,t,r){t=Ue(t)&&{coordDimensions:t}||Be({encodeDefine:e.getEncode()},t);var i=e.getSource(),n=g4(i,t).dimensions,a=new Wo(n,e);return a.initData(i,r),a}var S4=function(){function e(t,r){this._getDataWithEncodedVisual=t,this._getRawData=r}return e.prototype.getAllNames=function(){var t=this._getRawData();return t.mapArray(t.getName)},e.prototype.containName=function(t){var r=this._getRawData();return r.indexOfName(t)>=0},e.prototype.indexOfName=function(t){var r=this._getDataWithEncodedVisual();return r.indexOfName(t)},e.prototype.getItemVisual=function(t,r){var i=this._getDataWithEncodedVisual();return i.getItemVisual(t,r)},e}(),IPe=Pr(),LPe=function(e){_e(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.init=function(r){e.prototype.init.apply(this,arguments),this.legendVisualProvider=new S4(at(this.getData,this),at(this.getRawData,this)),this._defaultLabelLine(r)},t.prototype.mergeOption=function(){e.prototype.mergeOption.apply(this,arguments)},t.prototype.getInitialData=function(){return By(this,{coordDimensions:["value"],encodeDefaulter:kt(AN,this)})},t.prototype.getDataParams=function(r){var i=this.getData(),n=IPe(i),a=n.seats;if(!a){var o=[];i.each(i.mapDimension("value"),function(l){o.push(l)}),a=n.seats=CSe(o,i.hostModel.get("percentPrecision"))}var s=e.prototype.getDataParams.call(this,r);return s.percent=a[r]||0,s.$vars.push("percent"),s},t.prototype._defaultLabelLine=function(r){Lv(r,"labelLine",["show"]);var i=r.labelLine,n=r.emphasis.labelLine;i.show=i.show&&r.label.show,n.show=n.show&&r.emphasis.label.show},t.type="series.pie",t.defaultOption={z:2,legendHoverLink:!0,colorBy:"data",center:["50%","50%"],radius:[0,"75%"],clockwise:!0,startAngle:90,endAngle:"auto",padAngle:0,minAngle:0,minShowLabelAngle:0,selectedOffset:10,percentPrecision:2,stillShowZeroSum:!0,left:0,top:0,right:0,bottom:0,width:null,height:null,label:{rotate:0,show:!0,overflow:"truncate",position:"outer",alignTo:"none",edgeDistance:"25%",bleedMargin:10,distanceToLabelLine:5},labelLine:{show:!0,length:15,length2:15,smooth:!1,minTurnAngle:90,maxSurfaceAngle:90,lineStyle:{width:1,type:"solid"}},itemStyle:{borderWidth:1,borderJoin:"round"},showEmptyCircle:!0,emptyCircleStyle:{color:"lightgray",opacity:1},labelLayout:{hideOverlap:!0},emphasis:{scale:!0,scaleSize:5},avoidLabelOverlap:!0,animationType:"expansion",animationDuration:1e3,animationTypeUpdate:"transition",animationEasingUpdate:"cubicInOut",animationDurationUpdate:500,animationEasing:"cubicInOut"},t}(Di);function kPe(e){return{seriesType:e,reset:function(t,r){var i=t.getData();i.filterSelf(function(n){var a=i.mapDimension("value"),o=i.get(a,n);return!(kr(o)&&!isNaN(o)&&o<0)})}}}function RPe(e){e.registerChartView(DPe),e.registerSeriesModel(LPe),que("pie",e.registerAction),e.registerLayout(kt(CPe,"pie")),e.registerProcessor(A4("pie")),e.registerProcessor(kPe("pie"))}var OPe=function(e){_e(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r.hasSymbolVisual=!0,r}return t.prototype.getInitialData=function(r,i){return Bd(null,this,{useEncodeDefaulter:!0})},t.prototype.getProgressive=function(){var r=this.option.progressive;return r??(this.option.large?5e3:this.get("progressive"))},t.prototype.getProgressiveThreshold=function(){var r=this.option.progressiveThreshold;return r??(this.option.large?1e4:this.get("progressiveThreshold"))},t.prototype.brushSelector=function(r,i,n){return n.point(i.getItemLayout(r))},t.prototype.getZLevelKey=function(){return this.getData().count()>this.getProgressiveThreshold()?this.id:""},t.type="series.scatter",t.dependencies=["grid","polar","geo","singleAxis","calendar"],t.defaultOption={coordinateSystem:"cartesian2d",z:2,legendHoverLink:!0,symbolSize:10,large:!1,largeThreshold:2e3,itemStyle:{opacity:.8},emphasis:{scale:!0},clip:!0,select:{itemStyle:{borderColor:"#212121"}},universalTransition:{divideShape:"clone"}},t}(Di),Mhe=4,BPe=function(){function e(){}return e}(),NPe=function(e){_e(t,e);function t(r){var i=e.call(this,r)||this;return i._off=0,i.hoverDataIdx=-1,i}return t.prototype.getDefaultShape=function(){return new BPe},t.prototype.reset=function(){this.notClear=!1,this._off=0},t.prototype.buildPath=function(r,i){var n=i.points,a=i.size,o=this.symbolProxy,s=o.shape,l=r.getContext?r.getContext():r,u=l&&a[0]<Mhe,c=this.softClipShape,h;if(u){this._ctx=l;return}for(this._ctx=null,h=this._off;h<n.length;){var d=n[h++],f=n[h++];isNaN(d)||isNaN(f)||c&&!c.contain(d,f)||(s.x=d-a[0]/2,s.y=f-a[1]/2,s.width=a[0],s.height=a[1],o.buildPath(r,s,!0))}this.incremental&&(this._off=h,this.notClear=!0)},t.prototype.afterBrush=function(){var r=this.shape,i=r.points,n=r.size,a=this._ctx,o=this.softClipShape,s;if(a){for(s=this._off;s<i.length;){var l=i[s++],u=i[s++];isNaN(l)||isNaN(u)||o&&!o.contain(l,u)||a.fillRect(l-n[0]/2,u-n[1]/2,n[0],n[1])}this.incremental&&(this._off=s,this.notClear=!0)}},t.prototype.findDataIndex=function(r,i){for(var n=this.shape,a=n.points,o=n.size,s=Math.max(o[0],4),l=Math.max(o[1],4),u=a.length/2-1;u>=0;u--){var c=u*2,h=a[c]-s/2,d=a[c+1]-l/2;if(r>=h&&i>=d&&r<=h+s&&i<=d+l)return u}return-1},t.prototype.contain=function(r,i){var n=this.transformCoordToLocal(r,i),a=this.getBoundingRect();if(r=n[0],i=n[1],a.contain(r,i)){var o=this.hoverDataIdx=this.findDataIndex(r,i);return o>=0}return this.hoverDataIdx=-1,!1},t.prototype.getBoundingRect=function(){var r=this._rect;if(!r){for(var i=this.shape,n=i.points,a=i.size,o=a[0],s=a[1],l=1/0,u=1/0,c=-1/0,h=-1/0,d=0;d<n.length;){var f=n[d++],p=n[d++];l=Math.min(f,l),c=Math.max(f,c),u=Math.min(p,u),h=Math.max(p,h)}r=this._rect=new qt(l-o/2,u-s/2,c-l+o,h-u+s)}return r},t}(or),VPe=function(){function e(){this.group=new Ct}return e.prototype.updateData=function(t,r){this._clear();var i=this._create();i.setShape({points:t.getLayout("points")}),this._setCommon(i,t,r)},e.prototype.updateLayout=function(t){var r=t.getLayout("points");this.group.eachChild(function(i){if(i.startIndex!=null){var n=(i.endIndex-i.startIndex)*2,a=i.startIndex*4*2;r=new Float32Array(r.buffer,a,n)}i.setShape("points",r),i.reset()})},e.prototype.incrementalPrepareUpdate=function(t){this._clear()},e.prototype.incrementalUpdate=function(t,r,i){var n=this._newAdded[0],a=r.getLayout("points"),o=n&&n.shape.points;if(o&&o.length<2e4){var s=o.length,l=new Float32Array(s+a.length);l.set(o),l.set(a,s),n.endIndex=t.end,n.setShape({points:l})}else{this._newAdded=[];var u=this._create();u.startIndex=t.start,u.endIndex=t.end,u.incremental=!0,u.setShape({points:a}),this._setCommon(u,r,i)}},e.prototype.eachRendered=function(t){this._newAdded[0]&&t(this._newAdded[0])},e.prototype._create=function(){var t=new NPe({cursor:"default"});return t.ignoreCoarsePointer=!0,this.group.add(t),this._newAdded.push(t),t},e.prototype._setCommon=function(t,r,i){var n=r.hostModel;i=i||{};var a=r.getVisual("symbolSize");t.setShape("size",a instanceof Array?a:[a,a]),t.softClipShape=i.clipShape||null,t.symbolProxy=Sn(r.getVisual("symbol"),0,0,0,0),t.setColor=t.symbolProxy.setColor;var o=t.shape.size[0]<Mhe;t.useStyle(n.getModel("itemStyle").getItemStyle(o?["color","shadowBlur","shadowColor"]:["color"]));var s=r.getVisual("style"),l=s&&s.fill;l&&t.setColor(l);var u=Dt(t);u.seriesIndex=n.seriesIndex,t.on("mousemove",function(c){u.dataIndex=null;var h=t.hoverDataIdx;h>=0&&(u.dataIndex=h+(t.startIndex||0))})},e.prototype.remove=function(){this._clear()},e.prototype._clear=function(){this._newAdded=[],this.group.removeAll()},e}(),FPe=function(e){_e(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r}return t.prototype.render=function(r,i,n){var a=r.getData(),o=this._updateSymbolDraw(a,r);o.updateData(a,{clipShape:this._getClipShape(r)}),this._finished=!0},t.prototype.incrementalPrepareRender=function(r,i,n){var a=r.getData(),o=this._updateSymbolDraw(a,r);o.incrementalPrepareUpdate(a),this._finished=!1},t.prototype.incrementalRender=function(r,i,n){this._symbolDraw.incrementalUpdate(r,i.getData(),{clipShape:this._getClipShape(i)}),this._finished=r.end===i.getData().count()},t.prototype.updateTransform=function(r,i,n){var a=r.getData();if(this.group.dirty(),!this._finished||a.count()>1e4)return{update:!0};var o=_4("").reset(r,i,n);o.progress&&o.progress({start:0,end:a.count(),count:a.count()},a),this._symbolDraw.updateLayout(a)},t.prototype.eachRendered=function(r){this._symbolDraw&&this._symbolDraw.eachRendered(r)},t.prototype._getClipShape=function(r){if(r.get("clip",!0)){var i=r.coordinateSystem;return i&&i.getArea&&i.getArea(.1)}},t.prototype._updateSymbolDraw=function(r,i){var n=this._symbolDraw,a=i.pipelineContext,o=a.large;return(!n||o!==this._isLargeDraw)&&(n&&n.remove(),n=this._symbolDraw=o?new VPe:new b4,this._isLargeDraw=o,this.group.removeAll()),this.group.add(n.group),n},t.prototype.remove=function(r,i){this._symbolDraw&&this._symbolDraw.remove(!0),this._symbolDraw=null},t.prototype.dispose=function(){},t.type="scatter",t}(yi),zPe=function(e){_e(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.type="grid",t.dependencies=["xAxis","yAxis"],t.layoutMode="box",t.defaultOption={show:!1,z:0,left:"10%",top:60,right:"10%",bottom:70,containLabel:!1,backgroundColor:"rgba(0,0,0,0)",borderWidth:1,borderColor:"#ccc"},t}(vr),VL=function(e){_e(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.getCoordSysModel=function(){return this.getReferringComponents("grid",wn).models[0]},t.type="cartesian2dAxis",t}(vr);Mn(VL,y4);var The={show:!0,z:0,inverse:!1,name:"",nameLocation:"end",nameRotate:null,nameTruncate:{maxWidth:null,ellipsis:"...",placeholder:"."},nameTextStyle:{},nameGap:15,silent:!1,triggerEvent:!1,tooltip:{show:!1},axisPointer:{},axisLine:{show:!0,onZero:!0,onZeroAxisIndex:null,lineStyle:{color:"#6E7079",width:1,type:"solid"},symbol:["none","none"],symbolSize:[10,15]},axisTick:{show:!0,inside:!1,length:5,lineStyle:{width:1}},axisLabel:{show:!0,inside:!1,rotate:0,showMinLabel:null,showMaxLabel:null,margin:8,fontSize:12},splitLine:{show:!0,lineStyle:{color:["#E0E6F1"],width:1,type:"solid"}},splitArea:{show:!1,areaStyle:{color:["rgba(250,250,250,0.2)","rgba(210,219,238,0.2)"]}}},HPe=Wt({boundaryGap:!0,deduplication:null,splitLine:{show:!1},axisTick:{alignWithLabel:!1,interval:"auto"},axisLabel:{interval:"auto"}},The),$N=Wt({boundaryGap:[0,0],axisLine:{show:"auto"},axisTick:{show:"auto"},splitNumber:5,minorTick:{show:!1,splitNumber:5,length:3,lineStyle:{}},minorSplitLine:{show:!1,lineStyle:{color:"#F4F7FD",width:1}}},The),UPe=Wt({splitNumber:6,axisLabel:{showMinLabel:!1,showMaxLabel:!1,rich:{primary:{fontWeight:"bold"}}},splitLine:{show:!1}},$N),GPe=bt({logBase:10},$N);const Phe={category:HPe,value:$N,time:UPe,log:GPe};var jPe={value:1,category:1,time:1,log:1};function G1(e,t,r,i){q(jPe,function(n,a){var o=Wt(Wt({},Phe[a],!0),i,!0),s=function(l){_e(u,l);function u(){var c=l!==null&&l.apply(this,arguments)||this;return c.type=t+"Axis."+a,c}return u.prototype.mergeDefaultAndTheme=function(c,h){var d=rw(this),f=d?Dy(c):{},p=h.getTheme();Wt(c,p.get(a+"Axis")),Wt(c,this.getDefaultOption()),c.type=wq(c),d&&pp(c,f,d)},u.prototype.optionUpdated=function(){var c=this.option;c.type==="category"&&(this.__ordinalMeta=IL.createByAxisModel(this))},u.prototype.getCategories=function(c){var h=this.option;if(h.type==="category")return c?h.data:this.__ordinalMeta.categories},u.prototype.getOrdinalMeta=function(){return this.__ordinalMeta},u.type=t+"Axis."+a,u.defaultOption=o,u}(r);e.registerComponentModel(s)}),e.registerSubTypeDefaulter(t+"Axis",wq)}function wq(e){return e.type||(e.data?"category":"value")}var WPe=function(){function e(t){this.type="cartesian",this._dimList=[],this._axes={},this.name=t||""}return e.prototype.getAxis=function(t){return this._axes[t]},e.prototype.getAxes=function(){return qe(this._dimList,function(t){return this._axes[t]},this)},e.prototype.getAxesByScale=function(t){return t=t.toLowerCase(),ni(this.getAxes(),function(r){return r.scale.type===t})},e.prototype.addAxis=function(t){var r=t.dim;this._axes[r]=t,this._dimList.push(r)},e}(),FL=["x","y"];function _q(e){return e.type==="interval"||e.type==="time"}var qPe=function(e){_e(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type="cartesian2d",r.dimensions=FL,r}return t.prototype.calcAffineTransform=function(){this._transform=this._invTransform=null;var r=this.getAxis("x").scale,i=this.getAxis("y").scale;if(!(!_q(r)||!_q(i))){var n=r.getExtent(),a=i.getExtent(),o=this.dataToPoint([n[0],a[0]]),s=this.dataToPoint([n[1],a[1]]),l=n[1]-n[0],u=a[1]-a[0];if(!(!l||!u)){var c=(s[0]-o[0])/l,h=(s[1]-o[1])/u,d=o[0]-n[0]*c,f=o[1]-a[0]*h,p=this._transform=[c,0,0,h,d,f];this._invTransform=wy([],p)}}},t.prototype.getBaseAxis=function(){return this.getAxesByScale("ordinal")[0]||this.getAxesByScale("time")[0]||this.getAxis("x")},t.prototype.containPoint=function(r){var i=this.getAxis("x"),n=this.getAxis("y");return i.contain(i.toLocalCoord(r[0]))&&n.contain(n.toLocalCoord(r[1]))},t.prototype.containData=function(r){return this.getAxis("x").containData(r[0])&&this.getAxis("y").containData(r[1])},t.prototype.containZone=function(r,i){var n=this.dataToPoint(r),a=this.dataToPoint(i),o=this.getArea(),s=new qt(n[0],n[1],a[0]-n[0],a[1]-n[1]);return o.intersect(s)},t.prototype.dataToPoint=function(r,i,n){n=n||[];var a=r[0],o=r[1];if(this._transform&&a!=null&&isFinite(a)&&o!=null&&isFinite(o))return Wa(n,r,this._transform);var s=this.getAxis("x"),l=this.getAxis("y");return n[0]=s.toGlobalCoord(s.dataToCoord(a,i)),n[1]=l.toGlobalCoord(l.dataToCoord(o,i)),n},t.prototype.clampData=function(r,i){var n=this.getAxis("x").scale,a=this.getAxis("y").scale,o=n.getExtent(),s=a.getExtent(),l=n.parse(r[0]),u=a.parse(r[1]);return i=i||[],i[0]=Math.min(Math.max(Math.min(o[0],o[1]),l),Math.max(o[0],o[1])),i[1]=Math.min(Math.max(Math.min(s[0],s[1]),u),Math.max(s[0],s[1])),i},t.prototype.pointToData=function(r,i){var n=[];if(this._invTransform)return Wa(n,r,this._invTransform);var a=this.getAxis("x"),o=this.getAxis("y");return n[0]=a.coordToData(a.toLocalCoord(r[0]),i),n[1]=o.coordToData(o.toLocalCoord(r[1]),i),n},t.prototype.getOtherAxis=function(r){return this.getAxis(r.dim==="x"?"y":"x")},t.prototype.getArea=function(r){r=r||0;var i=this.getAxis("x").getGlobalExtent(),n=this.getAxis("y").getGlobalExtent(),a=Math.min(i[0],i[1])-r,o=Math.min(n[0],n[1])-r,s=Math.max(i[0],i[1])-a+r,l=Math.max(n[0],n[1])-o+r;return new qt(a,o,s,l)},t}(WPe),YPe=function(e){_e(t,e);function t(r,i,n,a,o){var s=e.call(this,r,i,n)||this;return s.index=0,s.type=a||"value",s.position=o||"bottom",s}return t.prototype.isHorizontal=function(){var r=this.position;return r==="top"||r==="bottom"},t.prototype.getGlobalExtent=function(r){var i=this.getExtent();return i[0]=this.toGlobalCoord(i[0]),i[1]=this.toGlobalCoord(i[1]),r&&i[0]>i[1]&&i.reverse(),i},t.prototype.pointToData=function(r,i){return this.coordToData(this.toLocalCoord(r[this.dim==="x"?0:1]),i)},t.prototype.setCategorySortInfo=function(r){if(this.type!=="category")return!1;this.model.option.categorySortInfo=r,this.scale.setSortInfo(r)},t}(Fu);function zL(e,t,r){r=r||{};var i=e.coordinateSystem,n=t.axis,a={},o=n.getAxesOnZeroOf()[0],s=n.position,l=o?"onZero":s,u=n.dim,c=i.getRect(),h=[c.x,c.x+c.width,c.y,c.y+c.height],d={left:0,right:1,top:0,bottom:1,onZero:2},f=t.get("offset")||0,p=u==="x"?[h[2]-f,h[3]+f]:[h[0]-f,h[1]+f];if(o){var v=o.toGlobalCoord(o.dataToCoord(0));p[d.onZero]=Math.max(Math.min(v,p[1]),p[0])}a.position=[u==="y"?p[d[l]]:h[0],u==="x"?p[d[l]]:h[3]],a.rotation=Math.PI/2*(u==="x"?0:1);var m={top:-1,bottom:1,left:-1,right:1};a.labelDirection=a.tickDirection=a.nameDirection=m[s],a.labelOffset=o?p[d[s]]-p[d.onZero]:0,t.get(["axisTick","inside"])&&(a.tickDirection=-a.tickDirection),xa(r.labelInside,t.get(["axisLabel","inside"]))&&(a.labelDirection=-a.labelDirection);var g=t.get(["axisLabel","rotate"]);return a.labelRotate=l==="top"?-g:g,a.z2=1,a}function Aq(e){return e.get("coordinateSystem")==="cartesian2d"}function Sq(e){var t={xAxisModel:null,yAxisModel:null};return q(t,function(r,i){var n=i.replace(/Model$/,""),a=e.getReferringComponents(n,wn).models[0];t[i]=a}),t}var OM=Math.log;function Dhe(e,t,r){var i=xd.prototype,n=i.getTicks.call(r),a=i.getTicks.call(r,!0),o=n.length-1,s=i.getInterval.call(r),l=kce(e,t),u=l.extent,c=l.fixMin,h=l.fixMax;if(e.type==="log"){var d=OM(e.base);u=[OM(u[0])/d,OM(u[1])/d]}e.setExtent(u[0],u[1]),e.calcNiceExtent({splitNumber:o,fixMin:c,fixMax:h});var f=i.getExtent.call(e);c&&(u[0]=f[0]),h&&(u[1]=f[1]);var p=i.getInterval.call(e),v=u[0],m=u[1];if(c&&h)p=(m-v)/o;else if(c)for(m=u[0]+p*o;m<u[1]&&isFinite(m)&&isFinite(u[1]);)p=bM(p),m=u[0]+p*o;else if(h)for(v=u[1]-p*o;v>u[0]&&isFinite(v)&&isFinite(u[0]);)p=bM(p),v=u[1]-p*o;else{var g=e.getTicks().length-1;g>o&&(p=bM(p));var y=p*o;m=Math.ceil(u[1]/p)*p,v=rn(m-y),v<0&&u[0]>=0?(v=0,m=rn(y)):m>0&&u[1]<=0&&(m=0,v=-rn(y))}var x=(n[0].value-a[0].value)/s,b=(n[o].value-a[o].value)/s;i.setExtent.call(e,v+p*x,m+p*b),i.setInterval.call(e,p),(x||b)&&i.setNiceExtent.call(e,v+p,m-p)}var XPe=function(){function e(t,r,i){this.type="grid",this._coordsMap={},this._coordsList=[],this._axesMap={},this._axesList=[],this.axisPointerEnabled=!0,this.dimensions=FL,this._initCartesian(t,r,i),this.model=t}return e.prototype.getRect=function(){return this._rect},e.prototype.update=function(t,r){var i=this._axesMap;this._updateScale(t,this.model);function n(o){var s,l=mr(o),u=l.length;if(u){for(var c=[],h=u-1;h>=0;h--){var d=+l[h],f=o[d],p=f.model,v=f.scale;LL(v)&&p.get("alignTicks")&&p.get("interval")==null?c.push(f):(H1(v,p),LL(v)&&(s=f))}c.length&&(s||(s=c.pop(),H1(s.scale,s.model)),q(c,function(m){Dhe(m.scale,m.model,s.scale)}))}}n(i.x),n(i.y);var a={};q(i.x,function(o){Cq(i,"y",o,a)}),q(i.y,function(o){Cq(i,"x",o,a)}),this.resize(this.model,r)},e.prototype.resize=function(t,r,i){var n=t.getBoxLayoutParams(),a=!i&&t.get("containLabel"),o=zn(n,{width:r.getWidth(),height:r.getHeight()});this._rect=o;var s=this._axesList;l(),a&&(q(s,function(u){if(!u.model.get(["axisLabel","inside"])){var c=TTe(u);if(c){var h=u.isHorizontal()?"height":"width",d=u.model.get(["axisLabel","margin"]);o[h]-=c[h]+d,u.position==="top"?o.y+=c.height+d:u.position==="left"&&(o.x+=c.width+d)}}}),l()),q(this._coordsList,function(u){u.calcAffineTransform()});function l(){q(s,function(u){var c=u.isHorizontal(),h=c?[0,o.width]:[0,o.height],d=u.inverse?1:0;u.setExtent(h[d],h[1-d]),ZPe(u,c?o.x:o.y)})}},e.prototype.getAxis=function(t,r){var i=this._axesMap[t];if(i!=null)return i[r||0]},e.prototype.getAxes=function(){return this._axesList.slice()},e.prototype.getCartesian=function(t,r){if(t!=null&&r!=null){var i="x"+t+"y"+r;return this._coordsMap[i]}_t(t)&&(r=t.yAxisIndex,t=t.xAxisIndex);for(var n=0,a=this._coordsList;n<a.length;n++)if(a[n].getAxis("x").index===t||a[n].getAxis("y").index===r)return a[n]},e.prototype.getCartesians=function(){return this._coordsList.slice()},e.prototype.convertToPixel=function(t,r,i){var n=this._findConvertTarget(r);return n.cartesian?n.cartesian.dataToPoint(i):n.axis?n.axis.toGlobalCoord(n.axis.dataToCoord(i)):null},e.prototype.convertFromPixel=function(t,r,i){var n=this._findConvertTarget(r);return n.cartesian?n.cartesian.pointToData(i):n.axis?n.axis.coordToData(n.axis.toLocalCoord(i)):null},e.prototype._findConvertTarget=function(t){var r=t.seriesModel,i=t.xAxisModel||r&&r.getReferringComponents("xAxis",wn).models[0],n=t.yAxisModel||r&&r.getReferringComponents("yAxis",wn).models[0],a=t.gridModel,o=this._coordsList,s,l;if(r)s=r.coordinateSystem,tr(o,s)<0&&(s=null);else if(i&&n)s=this.getCartesian(i.componentIndex,n.componentIndex);else if(i)l=this.getAxis("x",i.componentIndex);else if(n)l=this.getAxis("y",n.componentIndex);else if(a){var u=a.coordinateSystem;u===this&&(s=this._coordsList[0])}return{cartesian:s,axis:l}},e.prototype.containPoint=function(t){var r=this._coordsList[0];if(r)return r.containPoint(t)},e.prototype._initCartesian=function(t,r,i){var n=this,a=this,o={left:!1,right:!1,top:!1,bottom:!1},s={x:{},y:{}},l={x:0,y:0};if(r.eachComponent("xAxis",u("x"),this),r.eachComponent("yAxis",u("y"),this),!l.x||!l.y){this._axesMap={},this._axesList=[];return}this._axesMap=s,q(s.x,function(c,h){q(s.y,function(d,f){var p="x"+h+"y"+f,v=new qPe(p);v.master=n,v.model=t,n._coordsMap[p]=v,n._coordsList.push(v),v.addAxis(c),v.addAxis(d)})});function u(c){return function(h,d){if(BM(h,t)){var f=h.get("position");c==="x"?f!=="top"&&f!=="bottom"&&(f=o.bottom?"top":"bottom"):f!=="left"&&f!=="right"&&(f=o.left?"right":"left"),o[f]=!0;var p=new YPe(c,VC(h),[0,0],h.get("type"),f),v=p.type==="category";p.onBand=v&&h.get("boundaryGap"),p.inverse=h.get("inverse"),h.axis=p,p.model=h,p.grid=a,p.index=d,a._axesList.push(p),s[c][d]=p,l[c]++}}}},e.prototype._updateScale=function(t,r){q(this._axesList,function(n){if(n.scale.setExtent(1/0,-1/0),n.type==="category"){var a=n.model.get("categorySortInfo");n.scale.setSortInfo(a)}}),t.eachSeries(function(n){if(Aq(n)){var a=Sq(n),o=a.xAxisModel,s=a.yAxisModel;if(!BM(o,r)||!BM(s,r))return;var l=this.getCartesian(o.componentIndex,s.componentIndex),u=n.getData(),c=l.getAxis("x"),h=l.getAxis("y");i(u,c),i(u,h)}},this);function i(n,a){q(Z8(n,a.dim),function(o){a.scale.unionExtentFromData(n,o)})}},e.prototype.getTooltipAxes=function(t){var r=[],i=[];return q(this.getCartesians(),function(n){var a=t!=null&&t!=="auto"?n.getAxis(t):n.getBaseAxis(),o=n.getOtherAxis(a);tr(r,a)<0&&r.push(a),tr(i,o)<0&&i.push(o)}),{baseAxes:r,otherAxes:i}},e.create=function(t,r){var i=[];return t.eachComponent("grid",function(n,a){var o=new e(n,t,r);o.name="grid_"+a,o.resize(n,r,!0),n.coordinateSystem=o,i.push(o)}),t.eachSeries(function(n){if(Aq(n)){var a=Sq(n),o=a.xAxisModel,s=a.yAxisModel,l=o.getCoordSysModel(),u=l.coordinateSystem;n.coordinateSystem=u.getCartesian(o.componentIndex,s.componentIndex)}}),i},e.dimensions=FL,e}();function BM(e,t){return e.getCoordSysModel()===t}function Cq(e,t,r,i){r.getAxesOnZeroOf=function(){return a?[a]:[]};var n=e[t],a,o=r.model,s=o.get(["axisLine","onZero"]),l=o.get(["axisLine","onZeroAxisIndex"]);if(!s)return;if(l!=null)Eq(n[l])&&(a=n[l]);else for(var u in n)if(n.hasOwnProperty(u)&&Eq(n[u])&&!i[c(n[u])]){a=n[u];break}a&&(i[c(a)]=!0);function c(h){return h.dim+"_"+h.index}}function Eq(e){return e&&e.type!=="category"&&e.type!=="time"&&MTe(e)}function ZPe(e,t){var r=e.getExtent(),i=r[0]+r[1];e.toGlobalCoord=e.dim==="x"?function(n){return n+t}:function(n){return i-n+t},e.toLocalCoord=e.dim==="x"?function(n){return n-t}:function(n){return i-n+t}}var Ff=Math.PI,qo=function(){function e(t,r){this.group=new Ct,this.opt=r,this.axisModel=t,bt(r,{labelOffset:0,nameDirection:1,tickDirection:1,labelDirection:1,silent:!0,handleAutoShown:function(){return!0}});var i=new Ct({x:r.position[0],y:r.position[1],rotation:r.rotation});i.updateTransform(),this._transformGroup=i}return e.prototype.hasBuilder=function(t){return!!Mq[t]},e.prototype.add=function(t){Mq[t](this.opt,this.axisModel,this.group,this._transformGroup)},e.prototype.getGroup=function(){return this.group},e.innerTextLayout=function(t,r,i){var n=Yse(r-t),a,o;return Qb(n)?(o=i>0?"top":"bottom",a="center"):Qb(n-Ff)?(o=i>0?"bottom":"top",a="center"):(o="middle",n>0&&n<Ff?a=i>0?"right":"left":a=i>0?"left":"right"),{rotation:n,textAlign:a,textVerticalAlign:o}},e.makeAxisEventDataBase=function(t){var r={componentType:t.mainType,componentIndex:t.componentIndex};return r[t.mainType+"Index"]=t.componentIndex,r},e.isLabelSilent=function(t){var r=t.get("tooltip");return t.get("silent")||!(t.get("triggerEvent")||r&&r.show)},e}(),Mq={axisLine:function(e,t,r,i){var n=t.get(["axisLine","show"]);if(n==="auto"&&e.handleAutoShown&&(n=e.handleAutoShown("axisLine")),!!n){var a=t.axis.getExtent(),o=i.transform,s=[a[0],0],l=[a[1],0],u=s[0]>l[0];o&&(Wa(s,s,o),Wa(l,l,o));var c=Be({lineCap:"round"},t.getModel(["axisLine","lineStyle"]).getLineStyle()),h=new $n({shape:{x1:s[0],y1:s[1],x2:l[0],y2:l[1]},style:c,strokeContainThreshold:e.strokeContainThreshold||5,silent:!0,z2:1});V1(h.shape,h.style.lineWidth),h.anid="line",r.add(h);var d=t.get(["axisLine","symbol"]);if(d!=null){var f=t.get(["axisLine","symbolSize"]);it(d)&&(d=[d,d]),(it(f)||kr(f))&&(f=[f,f]);var p=em(t.get(["axisLine","symbolOffset"])||0,f),v=f[0],m=f[1];q([{rotate:e.rotation+Math.PI/2,offset:p[0],r:0},{rotate:e.rotation-Math.PI/2,offset:p[1],r:Math.sqrt((s[0]-l[0])*(s[0]-l[0])+(s[1]-l[1])*(s[1]-l[1]))}],function(g,y){if(d[y]!=="none"&&d[y]!=null){var x=Sn(d[y],-v/2,-m/2,v,m,c.stroke,!0),b=g.r+g.offset,_=u?l:s;x.attr({rotation:g.rotate,x:_[0]+b*Math.cos(e.rotation),y:_[1]-b*Math.sin(e.rotation),silent:!0,z2:11}),r.add(x)}})}}},axisTickLabel:function(e,t,r,i){var n=JPe(r,i,t,e),a=eDe(r,i,t,e);if(KPe(t,a,n),$Pe(r,i,t,e.tickDirection),t.get(["axisLabel","hideOverlap"])){var o=Yce(qe(a,function(s){return{label:s,priority:s.z2,defaultAttr:{ignore:s.ignore}}}));Qce(o)}},axisName:function(e,t,r,i){var n=xa(e.axisName,t.get("name"));if(n){var a=t.get("nameLocation"),o=e.nameDirection,s=t.getModel("nameTextStyle"),l=t.get("nameGap")||0,u=t.axis.getExtent(),c=u[0]>u[1]?-1:1,h=[a==="start"?u[0]-c*l:a==="end"?u[1]+c*l:(u[0]+u[1])/2,Pq(a)?e.labelOffset+o*l:0],d,f=t.get("nameRotate");f!=null&&(f=f*Ff/180);var p;Pq(a)?d=qo.innerTextLayout(e.rotation,f??e.rotation,o):(d=QPe(e.rotation,a,f||0,u),p=e.axisNameAvailableWidth,p!=null&&(p=Math.abs(p/Math.sin(d.rotation)),!isFinite(p)&&(p=null)));var v=s.getFont(),m=t.get("nameTruncate",!0)||{},g=m.ellipsis,y=xa(e.nameTruncateMaxWidth,m.maxWidth,p),x=new Dr({x:h[0],y:h[1],rotation:d.rotation,silent:qo.isLabelSilent(t),style:Ti(s,{text:n,font:v,overflow:"truncate",width:y,ellipsis:g,fill:s.getTextColor()||t.get(["axisLine","lineStyle","color"]),align:s.get("align")||d.textAlign,verticalAlign:s.get("verticalAlign")||d.textVerticalAlign}),z2:1});if(Ey({el:x,componentModel:t,itemName:n}),x.__fullText=n,x.anid="name",t.get("triggerEvent")){var b=qo.makeAxisEventDataBase(t);b.targetType="axisName",b.name=n,Dt(x).eventData=b}i.add(x),x.updateTransform(),r.add(x),x.decomposeTransform()}}};function QPe(e,t,r,i){var n=Yse(r-e),a,o,s=i[0]>i[1],l=t==="start"&&!s||t!=="start"&&s;return Qb(n-Ff/2)?(o=l?"bottom":"top",a="center"):Qb(n-Ff*1.5)?(o=l?"top":"bottom",a="center"):(o="middle",n<Ff*1.5&&n>Ff/2?a=l?"left":"right":a=l?"right":"left"),{rotation:n,textAlign:a,textVerticalAlign:o}}function KPe(e,t,r){if(!Rce(e.axis)){var i=e.get(["axisLabel","showMinLabel"]),n=e.get(["axisLabel","showMaxLabel"]);t=t||[],r=r||[];var a=t[0],o=t[1],s=t[t.length-1],l=t[t.length-2],u=r[0],c=r[1],h=r[r.length-1],d=r[r.length-2];i===!1?($s(a),$s(u)):Tq(a,o)&&(i?($s(o),$s(c)):($s(a),$s(u))),n===!1?($s(s),$s(h)):Tq(l,s)&&(n?($s(l),$s(d)):($s(s),$s(h)))}}function $s(e){e&&(e.ignore=!0)}function Tq(e,t){var r=e&&e.getBoundingRect().clone(),i=t&&t.getBoundingRect().clone();if(!(!r||!i)){var n=uC([]);return Jv(n,n,-e.rotation),r.applyTransform(od([],n,e.getLocalTransform())),i.applyTransform(od([],n,t.getLocalTransform())),r.intersect(i)}}function Pq(e){return e==="middle"||e==="center"}function Ihe(e,t,r,i,n){for(var a=[],o=[],s=[],l=0;l<e.length;l++){var u=e[l].coord;o[0]=u,o[1]=0,s[0]=u,s[1]=r,t&&(Wa(o,o,t),Wa(s,s,t));var c=new $n({shape:{x1:o[0],y1:o[1],x2:s[0],y2:s[1]},style:i,z2:2,autoBatch:!0,silent:!0});V1(c.shape,c.style.lineWidth),c.anid=n+"_"+e[l].tickValue,a.push(c)}return a}function JPe(e,t,r,i){var n=r.axis,a=r.getModel("axisTick"),o=a.get("show");if(o==="auto"&&i.handleAutoShown&&(o=i.handleAutoShown("axisTick")),!(!o||n.scale.isBlank())){for(var s=a.getModel("lineStyle"),l=i.tickDirection*a.get("length"),u=n.getTicksCoords(),c=Ihe(u,t.transform,l,bt(s.getLineStyle(),{stroke:r.get(["axisLine","lineStyle","color"])}),"ticks"),h=0;h<c.length;h++)e.add(c[h]);return c}}function $Pe(e,t,r,i){var n=r.axis,a=r.getModel("minorTick");if(!(!a.get("show")||n.scale.isBlank())){var o=n.getMinorTicksCoords();if(o.length)for(var s=a.getModel("lineStyle"),l=i*a.get("length"),u=bt(s.getLineStyle(),bt(r.getModel("axisTick").getLineStyle(),{stroke:r.get(["axisLine","lineStyle","color"])})),c=0;c<o.length;c++)for(var h=Ihe(o[c],t.transform,l,u,"minorticks_"+c),d=0;d<h.length;d++)e.add(h[d])}}function eDe(e,t,r,i){var n=r.axis,a=xa(i.axisLabelShow,r.get(["axisLabel","show"]));if(!(!a||n.scale.isBlank())){var o=r.getModel("axisLabel"),s=o.get("margin"),l=n.getViewLabels(),u=(xa(i.labelRotate,o.get("rotate"))||0)*Ff/180,c=qo.innerTextLayout(i.rotation,u,i.labelDirection),h=r.getCategories&&r.getCategories(!0),d=[],f=qo.isLabelSilent(r),p=r.get("triggerEvent");return q(l,function(v,m){var g=n.scale.type==="ordinal"?n.scale.getRawOrdinalNumber(v.tickValue):v.tickValue,y=v.formattedLabel,x=v.rawLabel,b=o;if(h&&h[g]){var _=h[g];_t(_)&&_.textStyle&&(b=new Qr(_.textStyle,o,r.ecModel))}var w=b.getTextColor()||r.get(["axisLine","lineStyle","color"]),S=n.dataToCoord(g),A=b.getShallow("align",!0)||c.textAlign,M=Lt(b.getShallow("alignMinLabel",!0),A),E=Lt(b.getShallow("alignMaxLabel",!0),A),T=b.getShallow("verticalAlign",!0)||b.getShallow("baseline",!0)||c.textVerticalAlign,L=Lt(b.getShallow("verticalAlignMinLabel",!0),T),P=Lt(b.getShallow("verticalAlignMaxLabel",!0),T),C=new Dr({x:S,y:i.labelOffset+i.labelDirection*s,rotation:c.rotation,silent:f,z2:10+(v.level||0),style:Ti(b,{text:y,align:m===0?M:m===l.length-1?E:A,verticalAlign:m===0?L:m===l.length-1?P:T,fill:xt(w)?w(n.type==="category"?x:n.type==="value"?g+"":g,m):w})});if(C.anid="label_"+g,p){var D=qo.makeAxisEventDataBase(r);D.targetType="axisLabel",D.value=x,D.tickIndex=m,n.type==="category"&&(D.dataIndex=g),Dt(C).eventData=D}t.add(C),C.updateTransform(),d.push(C),e.add(C),C.decomposeTransform()}),d}}function tDe(e,t){var r={axesInfo:{},seriesInvolved:!1,coordSysAxesInfo:{},coordSysMap:{}};return rDe(r,e,t),r.seriesInvolved&&nDe(r,e),r}function rDe(e,t,r){var i=t.getComponent("tooltip"),n=t.getComponent("axisPointer"),a=n.get("link",!0)||[],o=[];q(r.getCoordinateSystems(),function(s){if(!s.axisPointerEnabled)return;var l=hw(s.model),u=e.coordSysAxesInfo[l]={};e.coordSysMap[l]=s;var c=s.model,h=c.getModel("tooltip",i);if(q(s.getAxes(),kt(v,!1,null)),s.getTooltipAxes&&i&&h.get("show")){var d=h.get("trigger")==="axis",f=h.get(["axisPointer","type"])==="cross",p=s.getTooltipAxes(h.get(["axisPointer","axis"]));(d||f)&&q(p.baseAxes,kt(v,f?"cross":!0,d)),f&&q(p.otherAxes,kt(v,"cross",!1))}function v(m,g,y){var x=y.model.getModel("axisPointer",n),b=x.get("show");if(!(!b||b==="auto"&&!m&&!HL(x))){g==null&&(g=x.get("triggerTooltip")),x=m?iDe(y,h,n,t,m,g):x;var _=x.get("snap"),w=x.get("triggerEmphasis"),S=hw(y.model),A=g||_||y.type==="category",M=e.axesInfo[S]={key:S,axis:y,coordSys:s,axisPointerModel:x,triggerTooltip:g,triggerEmphasis:w,involveSeries:A,snap:_,useHandle:HL(x),seriesModels:[],linkGroup:null};u[S]=M,e.seriesInvolved=e.seriesInvolved||A;var E=aDe(a,y);if(E!=null){var T=o[E]||(o[E]={axesInfo:{}});T.axesInfo[S]=M,T.mapper=a[E].mapper,M.linkGroup=T}}}})}function iDe(e,t,r,i,n,a){var o=t.getModel("axisPointer"),s=["type","snap","lineStyle","shadowStyle","label","animation","animationDurationUpdate","animationEasingUpdate","z"],l={};q(s,function(d){l[d]=At(o.get(d))}),l.snap=e.type!=="category"&&!!a,o.get("type")==="cross"&&(l.type="line");var u=l.label||(l.label={});if(u.show==null&&(u.show=!1),n==="cross"){var c=o.get(["label","show"]);if(u.show=c??!0,!a){var h=l.lineStyle=o.get("crossStyle");h&&bt(u,h.textStyle)}}return e.model.getModel("axisPointer",new Qr(l,r,i))}function nDe(e,t){t.eachSeries(function(r){var i=r.coordinateSystem,n=r.get(["tooltip","trigger"],!0),a=r.get(["tooltip","show"],!0);!i||n==="none"||n===!1||n==="item"||a===!1||r.get(["axisPointer","show"],!0)===!1||q(e.coordSysAxesInfo[hw(i.model)],function(o){var s=o.axis;i.getAxis(s.dim)===s&&(o.seriesModels.push(r),o.seriesDataCount==null&&(o.seriesDataCount=0),o.seriesDataCount+=r.getData().count())})})}function aDe(e,t){for(var r=t.model,i=t.dim,n=0;n<e.length;n++){var a=e[n]||{};if(NM(a[i+"AxisId"],r.id)||NM(a[i+"AxisIndex"],r.componentIndex)||NM(a[i+"AxisName"],r.name))return n}}function NM(e,t){return e==="all"||Ue(e)&&tr(e,t)>=0||e===t}function oDe(e){var t=eV(e);if(t){var r=t.axisPointerModel,i=t.axis.scale,n=r.option,a=r.get("status"),o=r.get("value");o!=null&&(o=i.parse(o));var s=HL(r);a==null&&(n.status=s?"show":"hide");var l=i.getExtent().slice();l[0]>l[1]&&l.reverse(),(o==null||o>l[1])&&(o=l[1]),o<l[0]&&(o=l[0]),n.value=o,s&&(n.status=t.axis.scale.isBlank()?"hide":"show")}}function eV(e){var t=(e.ecModel.getComponent("axisPointer")||{}).coordSysAxesInfo;return t&&t.axesInfo[hw(e)]}function sDe(e){var t=eV(e);return t&&t.axisPointerModel}function HL(e){return!!e.get(["handle","show"])}function hw(e){return e.type+"||"+e.id}var Dq={},im=function(e){_e(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r}return t.prototype.render=function(r,i,n,a){this.axisPointerClass&&oDe(r),e.prototype.render.apply(this,arguments),this._doUpdateAxisPointerClass(r,n,!0)},t.prototype.updateAxisPointer=function(r,i,n,a){this._doUpdateAxisPointerClass(r,n,!1)},t.prototype.remove=function(r,i){var n=this._axisPointer;n&&n.remove(i)},t.prototype.dispose=function(r,i){this._disposeAxisPointer(i),e.prototype.dispose.apply(this,arguments)},t.prototype._doUpdateAxisPointerClass=function(r,i,n){var a=t.getAxisPointerClass(this.axisPointerClass);if(a){var o=sDe(r);o?(this._axisPointer||(this._axisPointer=new a)).render(r,o,i,n):this._disposeAxisPointer(i)}},t.prototype._disposeAxisPointer=function(r){this._axisPointer&&this._axisPointer.dispose(r),this._axisPointer=null},t.registerAxisPointerClass=function(r,i){Dq[r]=i},t.getAxisPointerClass=function(r){return r&&Dq[r]},t.type="axis",t}(Gi),UL=Pr();function Lhe(e,t,r,i){var n=r.axis;if(!n.scale.isBlank()){var a=r.getModel("splitArea"),o=a.getModel("areaStyle"),s=o.get("color"),l=i.coordinateSystem.getRect(),u=n.getTicksCoords({tickModel:a,clamp:!0});if(u.length){var c=s.length,h=UL(e).splitAreaColors,d=dt(),f=0;if(h)for(var p=0;p<u.length;p++){var v=h.get(u[p].tickValue);if(v!=null){f=(v+(c-1)*p)%c;break}}var m=n.toGlobalCoord(u[0].coord),g=o.getAreaStyle();s=Ue(s)?s:[s];for(var p=1;p<u.length;p++){var y=n.toGlobalCoord(u[p].coord),x=void 0,b=void 0,_=void 0,w=void 0;n.isHorizontal()?(x=m,b=l.y,_=y-x,w=l.height,m=x+_):(x=l.x,b=m,_=l.width,w=y-b,m=b+w);var S=u[p-1].tickValue;S!=null&&d.set(S,f),t.add(new Tr({anid:S!=null?"area_"+S:null,shape:{x,y:b,width:_,height:w},style:bt({fill:s[f]},g),autoBatch:!0,silent:!0})),f=(f+1)%c}UL(e).splitAreaColors=d}}}function khe(e){UL(e).splitAreaColors=null}var lDe=["axisLine","axisTickLabel","axisName"],uDe=["splitArea","splitLine","minorSplitLine"],Rhe=function(e){_e(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r.axisPointerClass="CartesianAxisPointer",r}return t.prototype.render=function(r,i,n,a){this.group.removeAll();var o=this._axisGroup;if(this._axisGroup=new Ct,this.group.add(this._axisGroup),!!r.get("show")){var s=r.getCoordSysModel(),l=zL(s,r),u=new qo(r,Be({handleAutoShown:function(h){for(var d=s.coordinateSystem.getCartesians(),f=0;f<d.length;f++)if(LL(d[f].getOtherAxis(r.axis).scale))return!0;return!1}},l));q(lDe,u.add,u),this._axisGroup.add(u.getGroup()),q(uDe,function(h){r.get([h,"show"])&&cDe[h](this,this._axisGroup,r,s)},this);var c=a&&a.type==="changeAxisOrder"&&a.isInitSort;c||f4(o,this._axisGroup,r),e.prototype.render.call(this,r,i,n,a)}},t.prototype.remove=function(){khe(this)},t.type="cartesianAxis",t}(im),cDe={splitLine:function(e,t,r,i){var n=r.axis;if(!n.scale.isBlank()){var a=r.getModel("splitLine"),o=a.getModel("lineStyle"),s=o.get("color");s=Ue(s)?s:[s];for(var l=i.coordinateSystem.getRect(),u=n.isHorizontal(),c=0,h=n.getTicksCoords({tickModel:a}),d=[],f=[],p=o.getLineStyle(),v=0;v<h.length;v++){var m=n.toGlobalCoord(h[v].coord);u?(d[0]=m,d[1]=l.y,f[0]=m,f[1]=l.y+l.height):(d[0]=l.x,d[1]=m,f[0]=l.x+l.width,f[1]=m);var g=c++%s.length,y=h[v].tickValue,x=new $n({anid:y!=null?"line_"+h[v].tickValue:null,autoBatch:!0,shape:{x1:d[0],y1:d[1],x2:f[0],y2:f[1]},style:bt({stroke:s[g]},p),silent:!0});V1(x.shape,p.lineWidth),t.add(x)}}},minorSplitLine:function(e,t,r,i){var n=r.axis,a=r.getModel("minorSplitLine"),o=a.getModel("lineStyle"),s=i.coordinateSystem.getRect(),l=n.isHorizontal(),u=n.getMinorTicksCoords();if(u.length)for(var c=[],h=[],d=o.getLineStyle(),f=0;f<u.length;f++)for(var p=0;p<u[f].length;p++){var v=n.toGlobalCoord(u[f][p].coord);l?(c[0]=v,c[1]=s.y,h[0]=v,h[1]=s.y+s.height):(c[0]=s.x,c[1]=v,h[0]=s.x+s.width,h[1]=v);var m=new $n({anid:"minor_line_"+u[f][p].tickValue,autoBatch:!0,shape:{x1:c[0],y1:c[1],x2:h[0],y2:h[1]},style:d,silent:!0});V1(m.shape,d.lineWidth),t.add(m)}},splitArea:function(e,t,r,i){Lhe(e,t,r,i)}},Ohe=function(e){_e(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r}return t.type="xAxis",t}(Rhe),hDe=function(e){_e(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=Ohe.type,r}return t.type="yAxis",t}(Rhe),dDe=function(e){_e(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type="grid",r}return t.prototype.render=function(r,i){this.group.removeAll(),r.get("show")&&this.group.add(new Tr({shape:r.coordinateSystem.getRect(),style:bt({fill:r.get("backgroundColor")},r.getItemStyle()),silent:!0,z2:-1}))},t.type="grid",t}(Gi),Iq={offset:0};function Bhe(e){e.registerComponentView(dDe),e.registerComponentModel(zPe),e.registerCoordinateSystem("cartesian2d",XPe),G1(e,"x",VL,Iq),G1(e,"y",VL,Iq),e.registerComponentView(Ohe),e.registerComponentView(hDe),e.registerPreprocessor(function(t){t.xAxis&&t.yAxis&&!t.grid&&(t.grid={})})}function fDe(e){ir(Bhe),e.registerSeriesModel(OPe),e.registerChartView(FPe),e.registerLayout(_4("scatter"))}function pDe(e){e.eachSeriesByType("radar",function(t){var r=t.getData(),i=[],n=t.coordinateSystem;if(n){var a=n.getIndicatorAxes();q(a,function(o,s){r.each(r.mapDimension(a[s].dim),function(l,u){i[u]=i[u]||[];var c=n.dataToPoint(l,s);i[u][s]=Lq(c)?c:kq(n)})}),r.each(function(o){var s=r8e(i[o],function(l){return Lq(l)})||kq(n);i[o].push(s.slice()),r.setItemLayout(o,i[o])})}})}function Lq(e){return!isNaN(e[0])&&!isNaN(e[1])}function kq(e){return[e.cx,e.cy]}function vDe(e){var t=e.polar;if(t){Ue(t)||(t=[t]);var r=[];q(t,function(i,n){i.indicator?(i.type&&!i.shape&&(i.shape=i.type),e.radar=e.radar||[],Ue(e.radar)||(e.radar=[e.radar]),e.radar.push(i)):r.push(i)}),e.polar=r}q(e.series,function(i){i&&i.type==="radar"&&i.polarIndex&&(i.radarIndex=i.polarIndex)})}var mDe=function(e){_e(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r}return t.prototype.render=function(r,i,n){var a=r.coordinateSystem,o=this.group,s=r.getData(),l=this._data;function u(d,f){var p=d.getItemVisual(f,"symbol")||"circle";if(p!=="none"){var v=Ry(d.getItemVisual(f,"symbolSize")),m=Sn(p,-1,-1,2,2),g=d.getItemVisual(f,"symbolRotate")||0;return m.attr({style:{strokeNoScale:!0},z2:100,scaleX:v[0]/2,scaleY:v[1]/2,rotation:g*Math.PI/180||0}),m}}function c(d,f,p,v,m,g){p.removeAll();for(var y=0;y<f.length-1;y++){var x=u(v,m);x&&(x.__dimIdx=y,d[y]?(x.setPosition(d[y]),$v[g?"initProps":"updateProps"](x,{x:f[y][0],y:f[y][1]},r,m)):x.setPosition(f[y]),p.add(x))}}function h(d){return qe(d,function(f){return[a.cx,a.cy]})}s.diff(l).add(function(d){var f=s.getItemLayout(d);if(f){var p=new Qo,v=new $o,m={shape:{points:f}};p.shape.points=h(f),v.shape.points=h(f),Vi(p,m,r,d),Vi(v,m,r,d);var g=new Ct,y=new Ct;g.add(v),g.add(p),g.add(y),c(v.shape.points,f,y,s,d,!0),s.setItemGraphicEl(d,g)}}).update(function(d,f){var p=l.getItemGraphicEl(f),v=p.childAt(0),m=p.childAt(1),g=p.childAt(2),y={shape:{points:s.getItemLayout(d)}};y.shape.points&&(c(v.shape.points,y.shape.points,g,s,d,!1),Pu(m),Pu(v),Nr(v,y,r),Nr(m,y,r),s.setItemGraphicEl(d,p))}).remove(function(d){o.remove(l.getItemGraphicEl(d))}).execute(),s.eachItemGraphicEl(function(d,f){var p=s.getItemModel(f),v=d.childAt(0),m=d.childAt(1),g=d.childAt(2),y=s.getItemVisual(f,"style"),x=y.fill;o.add(d),v.useStyle(bt(p.getModel("lineStyle").getLineStyle(),{fill:"none",stroke:x})),Ya(v,p,"lineStyle"),Ya(m,p,"areaStyle");var b=p.getModel("areaStyle"),_=b.isEmpty()&&b.parentModel.isEmpty();m.ignore=_,q(["emphasis","select","blur"],function(A){var M=p.getModel([A,"areaStyle"]),E=M.isEmpty()&&M.parentModel.isEmpty();m.ensureState(A).ignore=E&&_}),m.useStyle(bt(b.getAreaStyle(),{fill:x,opacity:.7,decal:y.decal}));var w=p.getModel("emphasis"),S=w.getModel("itemStyle").getItemStyle();g.eachChild(function(A){if(A instanceof Ta){var M=A.style;A.useStyle(Be({image:M.image,x:M.x,y:M.y,width:M.width,height:M.height},y))}else A.useStyle(y),A.setColor(x),A.style.strokeNoScale=!0;var E=A.ensureState("emphasis");E.style=At(S);var T=s.getStore().get(s.getDimensionIndex(A.__dimIdx),f);(T==null||isNaN(T))&&(T=""),Xa(A,ia(p),{labelFetcher:s.hostModel,labelDataIndex:f,labelDimIndex:A.__dimIdx,defaultText:T,inheritColor:x,defaultOpacity:y.opacity})}),Ji(d,w.get("focus"),w.get("blurScope"),w.get("disabled"))}),this._data=s},t.prototype.remove=function(){this.group.removeAll(),this._data=null},t.type="radar",t}(yi),gDe=function(e){_e(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r.hasSymbolVisual=!0,r}return t.prototype.init=function(r){e.prototype.init.apply(this,arguments),this.legendVisualProvider=new S4(at(this.getData,this),at(this.getRawData,this))},t.prototype.getInitialData=function(r,i){return By(this,{generateCoord:"indicator_",generateCoordCount:1/0})},t.prototype.formatTooltip=function(r,i,n){var a=this.getData(),o=this.coordinateSystem,s=o.getIndicatorAxes(),l=this.getData().getName(r),u=l===""?this.name:l,c=Rue(this,r);return na("section",{header:u,sortBlocks:!0,blocks:qe(s,function(h){var d=a.get(a.mapDimension(h.dim),r);return na("nameValue",{markerType:"subItem",markerColor:c,name:h.name,value:d,sortParam:d})})})},t.prototype.getTooltipPosition=function(r){if(r!=null){for(var i=this.getData(),n=this.coordinateSystem,a=i.getValues(qe(n.dimensions,function(u){return i.mapDimension(u)}),r),o=0,s=a.length;o<s;o++)if(!isNaN(a[o])){var l=n.getIndicatorAxes();return n.coordToPoint(l[o].dataToCoord(a[o]),o)}}},t.type="series.radar",t.dependencies=["radar"],t.defaultOption={z:2,colorBy:"data",coordinateSystem:"radar",legendHoverLink:!0,radarIndex:0,lineStyle:{width:2,type:"solid",join:"round"},label:{position:"top"},symbolSize:8},t}(Di),L2=Phe.value;function J3(e,t){return bt({show:t},e)}var yDe=function(e){_e(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r}return t.prototype.optionUpdated=function(){var r=this.get("boundaryGap"),i=this.get("splitNumber"),n=this.get("scale"),a=this.get("axisLine"),o=this.get("axisTick"),s=this.get("axisLabel"),l=this.get("axisName"),u=this.get(["axisName","show"]),c=this.get(["axisName","formatter"]),h=this.get("axisNameGap"),d=this.get("triggerEvent"),f=qe(this.get("indicator")||[],function(p){p.max!=null&&p.max>0&&!p.min?p.min=0:p.min!=null&&p.min<0&&!p.max&&(p.max=0);var v=l;p.color!=null&&(v=bt({color:p.color},l));var m=Wt(At(p),{boundaryGap:r,splitNumber:i,scale:n,axisLine:a,axisTick:o,axisLabel:s,name:p.text,showName:u,nameLocation:"end",nameGap:h,nameTextStyle:v,triggerEvent:d},!1);if(it(c)){var g=m.name;m.name=c.replace("{value}",g??"")}else xt(c)&&(m.name=c(m.name,m));var y=new Qr(m,null,this.ecModel);return Mn(y,y4.prototype),y.mainType="radar",y.componentIndex=this.componentIndex,y},this);this._indicatorModels=f},t.prototype.getIndicatorModels=function(){return this._indicatorModels},t.type="radar",t.defaultOption={z:0,center:["50%","50%"],radius:"75%",startAngle:90,axisName:{show:!0},boundaryGap:[0,0],splitNumber:5,axisNameGap:15,scale:!1,shape:"polygon",axisLine:Wt({lineStyle:{color:"#bbb"}},L2.axisLine),axisLabel:J3(L2.axisLabel,!1),axisTick:J3(L2.axisTick,!1),splitLine:J3(L2.splitLine,!0),splitArea:J3(L2.splitArea,!0),indicator:[]},t}(vr),xDe=["axisLine","axisTickLabel","axisName"],bDe=function(e){_e(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r}return t.prototype.render=function(r,i,n){var a=this.group;a.removeAll(),this._buildAxes(r),this._buildSplitLineAndArea(r)},t.prototype._buildAxes=function(r){var i=r.coordinateSystem,n=i.getIndicatorAxes(),a=qe(n,function(o){var s=o.model.get("showName")?o.name:"",l=new qo(o.model,{axisName:s,position:[i.cx,i.cy],rotation:o.angle,labelDirection:-1,tickDirection:-1,nameDirection:1});return l});q(a,function(o){q(xDe,o.add,o),this.group.add(o.getGroup())},this)},t.prototype._buildSplitLineAndArea=function(r){var i=r.coordinateSystem,n=i.getIndicatorAxes();if(!n.length)return;var a=r.get("shape"),o=r.getModel("splitLine"),s=r.getModel("splitArea"),l=o.getModel("lineStyle"),u=s.getModel("areaStyle"),c=o.get("show"),h=s.get("show"),d=l.get("color"),f=u.get("color"),p=Ue(d)?d:[d],v=Ue(f)?f:[f],m=[],g=[];function y(D,I,O){var R=O%I.length;return D[R]=D[R]||[],R}if(a==="circle")for(var x=n[0].getTicksCoords(),b=i.cx,_=i.cy,w=0;w<x.length;w++){if(c){var S=y(m,p,w);m[S].push(new Od({shape:{cx:b,cy:_,r:x[w].coord}}))}if(h&&w<x.length-1){var S=y(g,v,w);g[S].push(new h4({shape:{cx:b,cy:_,r0:x[w].coord,r:x[w+1].coord}}))}}else for(var A,M=qe(n,function(D,I){var O=D.getTicksCoords();return A=A==null?O.length-1:Math.min(O.length-1,A),qe(O,function(R){return i.coordToPoint(R.coord,I)})}),E=[],w=0;w<=A;w++){for(var T=[],L=0;L<n.length;L++)T.push(M[L][w]);if(T[0]&&T.push(T[0].slice()),c){var S=y(m,p,w);m[S].push(new $o({shape:{points:T}}))}if(h&&E){var S=y(g,v,w-1);g[S].push(new Qo({shape:{points:T.concat(E)}}))}E=T.slice().reverse()}var P=l.getLineStyle(),C=u.getAreaStyle();q(g,function(D,I){this.group.add(Cl(D,{style:bt({stroke:"none",fill:v[I%v.length]},C),silent:!0}))},this),q(m,function(D,I){this.group.add(Cl(D,{style:bt({fill:"none",stroke:p[I%p.length]},P),silent:!0}))},this)},t.type="radar",t}(Gi),wDe=function(e){_e(t,e);function t(r,i,n){var a=e.call(this,r,i,n)||this;return a.type="value",a.angle=0,a.name="",a}return t}(Fu),_De=function(){function e(t,r,i){this.dimensions=[],this._model=t,this._indicatorAxes=qe(t.getIndicatorModels(),function(n,a){var o="indicator_"+a,s=new wDe(o,new xd);return s.name=n.get("name"),s.model=n,n.axis=s,this.dimensions.push(o),s},this),this.resize(t,i)}return e.prototype.getIndicatorAxes=function(){return this._indicatorAxes},e.prototype.dataToPoint=function(t,r){var i=this._indicatorAxes[r];return this.coordToPoint(i.dataToCoord(t),r)},e.prototype.coordToPoint=function(t,r){var i=this._indicatorAxes[r],n=i.angle,a=this.cx+t*Math.cos(n),o=this.cy-t*Math.sin(n);return[a,o]},e.prototype.pointToData=function(t){var r=t[0]-this.cx,i=t[1]-this.cy,n=Math.sqrt(r*r+i*i);r/=n,i/=n;for(var a=Math.atan2(-i,r),o=1/0,s,l=-1,u=0;u<this._indicatorAxes.length;u++){var c=this._indicatorAxes[u],h=Math.abs(a-c.angle);h<o&&(s=c,l=u,o=h)}return[l,+(s&&s.coordToData(n))]},e.prototype.resize=function(t,r){var i=t.get("center"),n=r.getWidth(),a=r.getHeight(),o=Math.min(n,a)/2;this.cx=et(i[0],n),this.cy=et(i[1],a),this.startAngle=t.get("startAngle")*Math.PI/180;var s=t.get("radius");(it(s)||kr(s))&&(s=[0,s]),this.r0=et(s[0],o),this.r=et(s[1],o),q(this._indicatorAxes,function(l,u){l.setExtent(this.r0,this.r);var c=this.startAngle+u*Math.PI*2/this._indicatorAxes.length;c=Math.atan2(Math.sin(c),Math.cos(c)),l.angle=c},this)},e.prototype.update=function(t,r){var i=this._indicatorAxes,n=this._model;q(i,function(s){s.scale.setExtent(1/0,-1/0)}),t.eachSeriesByType("radar",function(s,l){if(!(s.get("coordinateSystem")!=="radar"||t.getComponent("radar",s.get("radarIndex"))!==n)){var u=s.getData();q(i,function(c){c.scale.unionExtentFromData(u,u.mapDimension(c.dim))})}},this);var a=n.get("splitNumber"),o=new xd;o.setExtent(0,a),o.setInterval(1),q(i,function(s,l){Dhe(s.scale,s.model,o)})},e.prototype.convertToPixel=function(t,r,i){return console.warn("Not implemented."),null},e.prototype.convertFromPixel=function(t,r,i){return console.warn("Not implemented."),null},e.prototype.containPoint=function(t){return console.warn("Not implemented."),!1},e.create=function(t,r){var i=[];return t.eachComponent("radar",function(n){var a=new e(n,t,r);i.push(a),n.coordinateSystem=a}),t.eachSeriesByType("radar",function(n){n.get("coordinateSystem")==="radar"&&(n.coordinateSystem=i[n.get("radarIndex")||0])}),i},e.dimensions=[],e}();function ADe(e){e.registerCoordinateSystem("radar",_De),e.registerComponentModel(yDe),e.registerComponentView(bDe),e.registerVisual({seriesType:"radar",reset:function(t){var r=t.getData();r.each(function(i){r.setItemVisual(i,"legendIcon","roundRect")}),r.setVisual("legendIcon","roundRect")}})}function SDe(e){ir(ADe),e.registerChartView(mDe),e.registerSeriesModel(gDe),e.registerLayout(pDe),e.registerProcessor(A4("radar")),e.registerPreprocessor(vDe)}var Rq="\0_ec_interaction_mutex";function CDe(e,t,r){var i=tV(e);i[t]=r}function EDe(e,t,r){var i=tV(e),n=i[t];n===r&&(i[t]=null)}function Oq(e,t){return!!tV(e)[t]}function tV(e){return e[Rq]||(e[Rq]={})}uh({type:"takeGlobalCursor",event:"globalCursorTaken",update:"update"},pn);var C4=function(e){_e(t,e);function t(r){var i=e.call(this)||this;i._zr=r;var n=at(i._mousedownHandler,i),a=at(i._mousemoveHandler,i),o=at(i._mouseupHandler,i),s=at(i._mousewheelHandler,i),l=at(i._pinchHandler,i);return i.enable=function(u,c){this.disable(),this._opt=bt(At(c)||{},{zoomOnMouseWheel:!0,moveOnMouseMove:!0,moveOnMouseWheel:!1,preventDefaultMouseMove:!0}),u==null&&(u=!0),(u===!0||u==="move"||u==="pan")&&(r.on("mousedown",n),r.on("mousemove",a),r.on("mouseup",o)),(u===!0||u==="scale"||u==="zoom")&&(r.on("mousewheel",s),r.on("pinch",l))},i.disable=function(){r.off("mousedown",n),r.off("mousemove",a),r.off("mouseup",o),r.off("mousewheel",s),r.off("pinch",l)},i}return t.prototype.isDragging=function(){return this._dragging},t.prototype.isPinching=function(){return this._pinching},t.prototype.setPointerChecker=function(r){this.pointerChecker=r},t.prototype.dispose=function(){this.disable()},t.prototype._mousedownHandler=function(r){if(!sG(r)){for(var i=r.target;i;){if(i.draggable)return;i=i.__hostTarget||i.parent}var n=r.offsetX,a=r.offsetY;this.pointerChecker&&this.pointerChecker(r,n,a)&&(this._x=n,this._y=a,this._dragging=!0)}},t.prototype._mousemoveHandler=function(r){if(!(!this._dragging||!SA("moveOnMouseMove",r,this._opt)||r.gestureEvent==="pinch"||Oq(this._zr,"globalPan"))){var i=r.offsetX,n=r.offsetY,a=this._x,o=this._y,s=i-a,l=n-o;this._x=i,this._y=n,this._opt.preventDefaultMouseMove&&pd(r.event),Nhe(this,"pan","moveOnMouseMove",r,{dx:s,dy:l,oldX:a,oldY:o,newX:i,newY:n,isAvailableBehavior:null})}},t.prototype._mouseupHandler=function(r){sG(r)||(this._dragging=!1)},t.prototype._mousewheelHandler=function(r){var i=SA("zoomOnMouseWheel",r,this._opt),n=SA("moveOnMouseWheel",r,this._opt),a=r.wheelDelta,o=Math.abs(a),s=r.offsetX,l=r.offsetY;if(!(a===0||!i&&!n)){if(i){var u=o>3?1.4:o>1?1.2:1.1,c=a>0?u:1/u;VM(this,"zoom","zoomOnMouseWheel",r,{scale:c,originX:s,originY:l,isAvailableBehavior:null})}if(n){var h=Math.abs(a),d=(a>0?1:-1)*(h>3?.4:h>1?.15:.05);VM(this,"scrollMove","moveOnMouseWheel",r,{scrollDelta:d,originX:s,originY:l,isAvailableBehavior:null})}}},t.prototype._pinchHandler=function(r){if(!Oq(this._zr,"globalPan")){var i=r.pinchScale>1?1.1:1/1.1;VM(this,"zoom",null,r,{scale:i,originX:r.pinchX,originY:r.pinchY,isAvailableBehavior:null})}},t}(Vl);function VM(e,t,r,i,n){e.pointerChecker&&e.pointerChecker(i,n.originX,n.originY)&&(pd(i.event),Nhe(e,t,r,i,n))}function Nhe(e,t,r,i,n){n.isAvailableBehavior=at(SA,null,r,i),e.trigger(t,n)}function SA(e,t,r){var i=r[e];return!e||i&&(!it(i)||t.event[i+"Key"])}function rV(e,t,r){var i=e.target;i.x+=t,i.y+=r,i.dirty()}function iV(e,t,r,i){var n=e.target,a=e.zoomLimit,o=e.zoom=e.zoom||1;if(o*=t,a){var s=a.min||0,l=a.max||1/0;o=Math.max(Math.min(l,o),s)}var u=o/e.zoom;e.zoom=o,n.x-=(r-n.x)*(u-1),n.y-=(i-n.y)*(u-1),n.scaleX*=u,n.scaleY*=u,n.dirty()}var MDe={axisPointer:1,tooltip:1,brush:1};function zC(e,t,r){var i=t.getComponentByElement(e.topTarget),n=i&&i.coordinateSystem;return i&&i!==r&&!MDe.hasOwnProperty(i.mainType)&&n&&n.model!==r}function Vhe(e){if(it(e)){var t=new DOMParser;e=t.parseFromString(e,"text/xml")}var r=e;for(r.nodeType===9&&(r=r.firstChild);r.nodeName.toLowerCase()!=="svg"||r.nodeType!==1;)r=r.nextSibling;return r}var FM,eS={fill:"fill",stroke:"stroke","stroke-width":"lineWidth",opacity:"opacity","fill-opacity":"fillOpacity","stroke-opacity":"strokeOpacity","stroke-dasharray":"lineDash","stroke-dashoffset":"lineDashOffset","stroke-linecap":"lineCap","stroke-linejoin":"lineJoin","stroke-miterlimit":"miterLimit","font-family":"fontFamily","font-size":"fontSize","font-style":"fontStyle","font-weight":"fontWeight","text-anchor":"textAlign",visibility:"visibility",display:"display"},Bq=mr(eS),tS={"alignment-baseline":"textBaseline","stop-color":"stopColor"},Nq=mr(tS),TDe=function(){function e(){this._defs={},this._root=null}return e.prototype.parse=function(t,r){r=r||{};var i=Vhe(t);this._defsUsePending=[];var n=new Ct;this._root=n;var a=[],o=i.getAttribute("viewBox")||"",s=parseFloat(i.getAttribute("width")||r.width),l=parseFloat(i.getAttribute("height")||r.height);isNaN(s)&&(s=null),isNaN(l)&&(l=null),Ds(i,n,null,!0,!1);for(var u=i.firstChild;u;)this._parseNode(u,n,a,null,!1,!1),u=u.nextSibling;IDe(this._defs,this._defsUsePending),this._defsUsePending=[];var c,h;if(o){var d=HC(o);d.length>=4&&(c={x:parseFloat(d[0]||0),y:parseFloat(d[1]||0),width:parseFloat(d[2]),height:parseFloat(d[3])})}if(c&&s!=null&&l!=null&&(h=zhe(c,{x:0,y:0,width:s,height:l}),!r.ignoreViewBox)){var f=n;n=new Ct,n.add(f),f.scaleX=f.scaleY=h.scale,f.x=h.x,f.y=h.y}return!r.ignoreRootClip&&s!=null&&l!=null&&n.setClipPath(new Tr({shape:{x:0,y:0,width:s,height:l}})),{root:n,width:s,height:l,viewBoxRect:c,viewBoxTransform:h,named:a}},e.prototype._parseNode=function(t,r,i,n,a,o){var s=t.nodeName.toLowerCase(),l,u=n;if(s==="defs"&&(a=!0),s==="text"&&(o=!0),s==="defs"||s==="switch")l=r;else{if(!a){var c=FM[s];if(c&&lt(FM,s)){l=c.call(this,t,r);var h=t.getAttribute("name");if(h){var d={name:h,namedFrom:null,svgNodeTagLower:s,el:l};i.push(d),s==="g"&&(u=d)}else n&&i.push({name:n.name,namedFrom:n,svgNodeTagLower:s,el:l});r.add(l)}}var f=Vq[s];if(f&&lt(Vq,s)){var p=f.call(this,t),v=t.getAttribute("id");v&&(this._defs[v]=p)}}if(l&&l.isGroup)for(var m=t.firstChild;m;)m.nodeType===1?this._parseNode(m,l,i,u,a,o):m.nodeType===3&&o&&this._parseText(m,l),m=m.nextSibling},e.prototype._parseText=function(t,r){var i=new N1({style:{text:t.textContent},silent:!0,x:this._textX||0,y:this._textY||0});el(r,i),Ds(t,i,this._defsUsePending,!1,!1),PDe(i,r);var n=i.style,a=n.fontSize;a&&a<9&&(n.fontSize=9,i.scaleX*=a/9,i.scaleY*=a/9);var o=(n.fontSize||n.fontFamily)&&[n.fontStyle,n.fontWeight,(n.fontSize||12)+"px",n.fontFamily||"sans-serif"].join(" ");n.font=o;var s=i.getBoundingRect();return this._textX+=s.width,r.add(i),i},e.internalField=function(){FM={g:function(t,r){var i=new Ct;return el(r,i),Ds(t,i,this._defsUsePending,!1,!1),i},rect:function(t,r){var i=new Tr;return el(r,i),Ds(t,i,this._defsUsePending,!1,!1),i.setShape({x:parseFloat(t.getAttribute("x")||"0"),y:parseFloat(t.getAttribute("y")||"0"),width:parseFloat(t.getAttribute("width")||"0"),height:parseFloat(t.getAttribute("height")||"0")}),i.silent=!0,i},circle:function(t,r){var i=new Od;return el(r,i),Ds(t,i,this._defsUsePending,!1,!1),i.setShape({cx:parseFloat(t.getAttribute("cx")||"0"),cy:parseFloat(t.getAttribute("cy")||"0"),r:parseFloat(t.getAttribute("r")||"0")}),i.silent=!0,i},line:function(t,r){var i=new $n;return el(r,i),Ds(t,i,this._defsUsePending,!1,!1),i.setShape({x1:parseFloat(t.getAttribute("x1")||"0"),y1:parseFloat(t.getAttribute("y1")||"0"),x2:parseFloat(t.getAttribute("x2")||"0"),y2:parseFloat(t.getAttribute("y2")||"0")}),i.silent=!0,i},ellipse:function(t,r){var i=new xC;return el(r,i),Ds(t,i,this._defsUsePending,!1,!1),i.setShape({cx:parseFloat(t.getAttribute("cx")||"0"),cy:parseFloat(t.getAttribute("cy")||"0"),rx:parseFloat(t.getAttribute("rx")||"0"),ry:parseFloat(t.getAttribute("ry")||"0")}),i.silent=!0,i},polygon:function(t,r){var i=t.getAttribute("points"),n;i&&(n=Hq(i));var a=new Qo({shape:{points:n||[]},silent:!0});return el(r,a),Ds(t,a,this._defsUsePending,!1,!1),a},polyline:function(t,r){var i=t.getAttribute("points"),n;i&&(n=Hq(i));var a=new $o({shape:{points:n||[]},silent:!0});return el(r,a),Ds(t,a,this._defsUsePending,!1,!1),a},image:function(t,r){var i=new Ta;return el(r,i),Ds(t,i,this._defsUsePending,!1,!1),i.setStyle({image:t.getAttribute("xlink:href")||t.getAttribute("href"),x:+t.getAttribute("x"),y:+t.getAttribute("y"),width:+t.getAttribute("width"),height:+t.getAttribute("height")}),i.silent=!0,i},text:function(t,r){var i=t.getAttribute("x")||"0",n=t.getAttribute("y")||"0",a=t.getAttribute("dx")||"0",o=t.getAttribute("dy")||"0";this._textX=parseFloat(i)+parseFloat(a),this._textY=parseFloat(n)+parseFloat(o);var s=new Ct;return el(r,s),Ds(t,s,this._defsUsePending,!1,!0),s},tspan:function(t,r){var i=t.getAttribute("x"),n=t.getAttribute("y");i!=null&&(this._textX=parseFloat(i)),n!=null&&(this._textY=parseFloat(n));var a=t.getAttribute("dx")||"0",o=t.getAttribute("dy")||"0",s=new Ct;return el(r,s),Ds(t,s,this._defsUsePending,!1,!0),this._textX+=parseFloat(a),this._textY+=parseFloat(o),s},path:function(t,r){var i=t.getAttribute("d")||"",n=Tle(i);return el(r,n),Ds(t,n,this._defsUsePending,!1,!1),n.silent=!0,n}}}(),e}(),Vq={lineargradient:function(e){var t=parseInt(e.getAttribute("x1")||"0",10),r=parseInt(e.getAttribute("y1")||"0",10),i=parseInt(e.getAttribute("x2")||"10",10),n=parseInt(e.getAttribute("y2")||"0",10),a=new Sy(t,r,i,n);return Fq(e,a),zq(e,a),a},radialgradient:function(e){var t=parseInt(e.getAttribute("cx")||"0",10),r=parseInt(e.getAttribute("cy")||"0",10),i=parseInt(e.getAttribute("r")||"0",10),n=new Lle(t,r,i);return Fq(e,n),zq(e,n),n}};function Fq(e,t){var r=e.getAttribute("gradientUnits");r==="userSpaceOnUse"&&(t.global=!0)}function zq(e,t){for(var r=e.firstChild;r;){if(r.nodeType===1&&r.nodeName.toLocaleLowerCase()==="stop"){var i=r.getAttribute("offset"),n=void 0;i&&i.indexOf("%")>0?n=parseInt(i,10)/100:i?n=parseFloat(i):n=0;var a={};Fhe(r,a,a);var o=a.stopColor||r.getAttribute("stop-color")||"#000000";t.colorStops.push({offset:n,color:o})}r=r.nextSibling}}function el(e,t){e&&e.__inheritedStyle&&(t.__inheritedStyle||(t.__inheritedStyle={}),bt(t.__inheritedStyle,e.__inheritedStyle))}function Hq(e){for(var t=HC(e),r=[],i=0;i<t.length;i+=2){var n=parseFloat(t[i]),a=parseFloat(t[i+1]);r.push([n,a])}return r}function Ds(e,t,r,i,n){var a=t,o=a.__inheritedStyle=a.__inheritedStyle||{},s={};e.nodeType===1&&(RDe(e,t),Fhe(e,o,s),i||ODe(e,o,s)),a.style=a.style||{},o.fill!=null&&(a.style.fill=Uq(a,"fill",o.fill,r)),o.stroke!=null&&(a.style.stroke=Uq(a,"stroke",o.stroke,r)),q(["lineWidth","opacity","fillOpacity","strokeOpacity","miterLimit","fontSize"],function(l){o[l]!=null&&(a.style[l]=parseFloat(o[l]))}),q(["lineDashOffset","lineCap","lineJoin","fontWeight","fontFamily","fontStyle","textAlign"],function(l){o[l]!=null&&(a.style[l]=o[l])}),n&&(a.__selfStyle=s),o.lineDash&&(a.style.lineDash=qe(HC(o.lineDash),function(l){return parseFloat(l)})),(o.visibility==="hidden"||o.visibility==="collapse")&&(a.invisible=!0),o.display==="none"&&(a.ignore=!0)}function PDe(e,t){var r=t.__selfStyle;if(r){var i=r.textBaseline,n=i;!i||i==="auto"||i==="baseline"?n="alphabetic":i==="before-edge"||i==="text-before-edge"?n="top":i==="after-edge"||i==="text-after-edge"?n="bottom":(i==="central"||i==="mathematical")&&(n="middle"),e.style.textBaseline=n}var a=t.__inheritedStyle;if(a){var o=a.textAlign,s=o;o&&(o==="middle"&&(s="center"),e.style.textAlign=s)}}var DDe=/^url\(\s*#(.*?)\)/;function Uq(e,t,r,i){var n=r&&r.match(DDe);if(n){var a=fu(n[1]);i.push([e,t,a]);return}return r==="none"&&(r=null),r}function IDe(e,t){for(var r=0;r<t.length;r++){var i=t[r];i[0].style[i[1]]=e[i[2]]}}var LDe=/-?([0-9]*\.)?[0-9]+([eE]-?[0-9]+)?/g;function HC(e){return e.match(LDe)||[]}var kDe=/(translate|scale|rotate|skewX|skewY|matrix)\(([\-\s0-9\.eE,]*)\)/g,zM=Math.PI/180;function RDe(e,t){var r=e.getAttribute("transform");if(r){r=r.replace(/,/g," ");var i=[],n=null;r.replace(kDe,function(h,d,f){return i.push(d,f),""});for(var a=i.length-1;a>0;a-=2){var o=i[a],s=i[a-1],l=HC(o);switch(n=n||js(),s){case"translate":Qc(n,n,[parseFloat(l[0]),parseFloat(l[1]||"0")]);break;case"scale":KB(n,n,[parseFloat(l[0]),parseFloat(l[1]||l[0])]);break;case"rotate":Jv(n,n,-parseFloat(l[0])*zM,[parseFloat(l[1]||"0"),parseFloat(l[2]||"0")]);break;case"skewX":var u=Math.tan(parseFloat(l[0])*zM);od(n,[1,0,u,1,0,0],n);break;case"skewY":var c=Math.tan(parseFloat(l[0])*zM);od(n,[1,c,0,1,0,0],n);break;case"matrix":n[0]=parseFloat(l[0]),n[1]=parseFloat(l[1]),n[2]=parseFloat(l[2]),n[3]=parseFloat(l[3]),n[4]=parseFloat(l[4]),n[5]=parseFloat(l[5]);break}}t.setLocalTransform(n)}}var Gq=/([^\s:;]+)\s*:\s*([^:;]+)/g;function Fhe(e,t,r){var i=e.getAttribute("style");if(i){Gq.lastIndex=0;for(var n;(n=Gq.exec(i))!=null;){var a=n[1],o=lt(eS,a)?eS[a]:null;o&&(t[o]=n[2]);var s=lt(tS,a)?tS[a]:null;s&&(r[s]=n[2])}}}function ODe(e,t,r){for(var i=0;i<Bq.length;i++){var n=Bq[i],a=e.getAttribute(n);a!=null&&(t[eS[n]]=a)}for(var i=0;i<Nq.length;i++){var n=Nq[i],a=e.getAttribute(n);a!=null&&(r[tS[n]]=a)}}function zhe(e,t){var r=t.width/e.width,i=t.height/e.height,n=Math.min(r,i);return{scale:n,x:-(e.x+e.width/2)*n+(t.x+t.width/2),y:-(e.y+e.height/2)*n+(t.y+t.height/2)}}function BDe(e,t){var r=new TDe;return r.parse(e,t)}var NDe=dt(["rect","circle","line","ellipse","polygon","polyline","path","text","tspan","g"]),VDe=function(){function e(t,r){this.type="geoSVG",this._usedGraphicMap=dt(),this._freedGraphics=[],this._mapName=t,this._parsedXML=Vhe(r)}return e.prototype.load=function(){var t=this._firstGraphic;if(!t){t=this._firstGraphic=this._buildGraphic(this._parsedXML),this._freedGraphics.push(t),this._boundingRect=this._firstGraphic.boundingRect.clone();var r=zDe(t.named),i=r.regions,n=r.regionsMap;this._regions=i,this._regionsMap=n}return{boundingRect:this._boundingRect,regions:this._regions,regionsMap:this._regionsMap}},e.prototype._buildGraphic=function(t){var r,i;try{r=t&&BDe(t,{ignoreViewBox:!0,ignoreRootClip:!0})||{},i=r.root,Yo(i!=null)}catch(m){throw new Error(`Invalid svg format
`+m.message)}var n=new Ct;n.add(i),n.isGeoSVGGraphicRoot=!0;var a=r.width,o=r.height,s=r.viewBoxRect,l=this._boundingRect;if(!l){var u=void 0,c=void 0,h=void 0,d=void 0;if(a!=null?(u=0,h=a):s&&(u=s.x,h=s.width),o!=null?(c=0,d=o):s&&(c=s.y,d=s.height),u==null||c==null){var f=i.getBoundingRect();u==null&&(u=f.x,h=f.width),c==null&&(c=f.y,d=f.height)}l=this._boundingRect=new qt(u,c,h,d)}if(s){var p=zhe(s,l);i.scaleX=i.scaleY=p.scale,i.x=p.x,i.y=p.y}n.setClipPath(new Tr({shape:l.plain()}));var v=[];return q(r.named,function(m){NDe.get(m.svgNodeTagLower)!=null&&(v.push(m),FDe(m.el))}),{root:n,boundingRect:l,named:v}},e.prototype.useGraphic=function(t){var r=this._usedGraphicMap,i=r.get(t);return i||(i=this._freedGraphics.pop()||this._buildGraphic(this._parsedXML),r.set(t,i),i)},e.prototype.freeGraphic=function(t){var r=this._usedGraphicMap,i=r.get(t);i&&(r.removeKey(t),this._freedGraphics.push(i))},e}();function FDe(e){e.silent=!1,e.isGroup&&e.traverse(function(t){t.silent=!1})}function zDe(e){var t=[],r=dt();return q(e,function(i){if(i.namedFrom==null){var n=new RTe(i.name,i.el);t.push(n),r.set(i.name,n)}}),{regions:t,regionsMap:r}}var GL=[126,25],jq="南海诸岛",A0=[[[0,3.5],[7,11.2],[15,11.9],[30,7],[42,.7],[52,.7],[56,7.7],[59,.7],[64,.7],[64,0],[5,0],[0,3.5]],[[13,16.1],[19,14.7],[16,21.7],[11,23.1],[13,16.1]],[[12,32.2],[14,38.5],[15,38.5],[13,32.2],[12,32.2]],[[16,47.6],[12,53.2],[13,53.2],[18,47.6],[16,47.6]],[[6,64.4],[8,70],[9,70],[8,64.4],[6,64.4]],[[23,82.6],[29,79.8],[30,79.8],[25,82.6],[23,82.6]],[[37,70.7],[43,62.3],[44,62.3],[39,70.7],[37,70.7]],[[48,51.1],[51,45.5],[53,45.5],[50,51.1],[48,51.1]],[[51,35],[51,28.7],[53,28.7],[53,35],[51,35]],[[52,22.4],[55,17.5],[56,17.5],[53,22.4],[52,22.4]],[[58,12.6],[62,7],[63,7],[60,12.6],[58,12.6]],[[0,3.5],[0,93.1],[64,93.1],[64,0],[63,0],[63,92.4],[1,92.4],[1,3.5],[0,3.5]]];for(var n0=0;n0<A0.length;n0++)for(var Lm=0;Lm<A0[n0].length;Lm++)A0[n0][Lm][0]/=10.5,A0[n0][Lm][1]/=-10.5/.75,A0[n0][Lm][0]+=GL[0],A0[n0][Lm][1]+=GL[1];function HDe(e,t){if(e==="china"){for(var r=0;r<t.length;r++)if(t[r].name===jq)return;t.push(new Bce(jq,qe(A0,function(i){return{type:"polygon",exterior:i}}),GL))}}var UDe={南海诸岛:[32,80],广东:[0,-10],香港:[10,5],澳门:[-10,10],天津:[5,5]};function GDe(e,t){if(e==="china"){var r=UDe[t.name];if(r){var i=t.getCenter();i[0]+=r[0]/10.5,i[1]+=-r[1]/(10.5/.75),t.setCenter(i)}}}var jDe=[[[123.45165252685547,25.73527164402261],[123.49731445312499,25.73527164402261],[123.49731445312499,25.750734064600884],[123.45165252685547,25.750734064600884],[123.45165252685547,25.73527164402261]]];function WDe(e,t){e==="china"&&t.name==="台湾"&&t.geometries.push({type:"polygon",exterior:jDe[0]})}var qDe="name",YDe=function(){function e(t,r,i){this.type="geoJSON",this._parsedMap=dt(),this._mapName=t,this._specialAreas=i,this._geoJSON=ZDe(r)}return e.prototype.load=function(t,r){r=r||qDe;var i=this._parsedMap.get(r);if(!i){var n=this._parseToRegions(r);i=this._parsedMap.set(r,{regions:n,boundingRect:XDe(n)})}var a=dt(),o=[];return q(i.regions,function(s){var l=s.name;t&&lt(t,l)&&(s=s.cloneShallow(l=t[l])),o.push(s),a.set(l,s)}),{regions:o,boundingRect:i.boundingRect||new qt(0,0,0,0),regionsMap:a}},e.prototype._parseToRegions=function(t){var r=this._mapName,i=this._geoJSON,n;try{n=i?BTe(i,t):[]}catch(a){throw new Error(`Invalid geoJson format
`+a.message)}return HDe(r,n),q(n,function(a){var o=a.name;GDe(r,a),WDe(r,a);var s=this._specialAreas&&this._specialAreas[o];s&&a.transformTo(s.left,s.top,s.width,s.height)},this),n},e.prototype.getMapForUser=function(){return{geoJson:this._geoJSON,geoJSON:this._geoJSON,specialAreas:this._specialAreas}},e}();function XDe(e){for(var t,r=0;r<e.length;r++){var i=e[r].getBoundingRect();t=t||i.clone(),t.union(i)}return t}function ZDe(e){return it(e)?typeof JSON<"u"&&JSON.parse?JSON.parse(e):new Function("return ("+e+");")():e}var k2=dt();const bd={registerMap:function(e,t,r){if(t.svg){var i=new VDe(e,t.svg);k2.set(e,i)}else{var n=t.geoJson||t.geoJSON;n&&!t.features?r=t.specialAreas:n=t;var i=new YDe(e,n,r);k2.set(e,i)}},getGeoResource:function(e){return k2.get(e)},getMapForUser:function(e){var t=k2.get(e);return t&&t.type==="geoJSON"&&t.getMapForUser()},load:function(e,t,r){var i=k2.get(e);if(i)return i.load(t,r)}};var nV=["rect","circle","line","ellipse","polygon","polyline","path"],QDe=dt(nV),KDe=dt(nV.concat(["g"])),JDe=dt(nV.concat(["g"])),Hhe=Pr();function $3(e){var t=e.getItemStyle(),r=e.get("areaColor");return r!=null&&(t.fill=r),t}function Wq(e){var t=e.style;t&&(t.stroke=t.stroke||t.fill,t.fill=null)}var Uhe=function(){function e(t){var r=new Ct;this.uid=Ty("ec_map_draw"),this._controller=new C4(t.getZr()),this._controllerHost={target:r},this.group=r,r.add(this._regionsGroup=new Ct),r.add(this._svgGroup=new Ct)}return e.prototype.draw=function(t,r,i,n,a){var o=t.mainType==="geo",s=t.getData&&t.getData();o&&r.eachComponent({mainType:"series",subType:"map"},function(g){!s&&g.getHostGeoModel()===t&&(s=g.getData())});var l=t.coordinateSystem,u=this._regionsGroup,c=this.group,h=l.getTransformInfo(),d=h.raw,f=h.roam,p=!u.childAt(0)||a;p?(c.x=f.x,c.y=f.y,c.scaleX=f.scaleX,c.scaleY=f.scaleY,c.dirty()):Nr(c,f,t);var v=s&&s.getVisual("visualMeta")&&s.getVisual("visualMeta").length>0,m={api:i,geo:l,mapOrGeoModel:t,data:s,isVisualEncodedByVisualMap:v,isGeo:o,transformInfoRaw:d};l.resourceType==="geoJSON"?this._buildGeoJSON(m):l.resourceType==="geoSVG"&&this._buildSVG(m),this._updateController(t,r,i),this._updateMapSelectHandler(t,u,i,n)},e.prototype._buildGeoJSON=function(t){var r=this._regionsGroupByName=dt(),i=dt(),n=this._regionsGroup,a=t.transformInfoRaw,o=t.mapOrGeoModel,s=t.data,l=t.geo.projection,u=l&&l.stream;function c(f,p){return p&&(f=p(f)),f&&[f[0]*a.scaleX+a.x,f[1]*a.scaleY+a.y]}function h(f){for(var p=[],v=!u&&l&&l.project,m=0;m<f.length;++m){var g=c(f[m],v);g&&p.push(g)}return p}function d(f){return{shape:{points:h(f)}}}n.removeAll(),q(t.geo.regions,function(f){var p=f.name,v=r.get(p),m=i.get(p)||{},g=m.dataIdx,y=m.regionModel;v||(v=r.set(p,new Ct),n.add(v),g=s?s.indexOfName(p):null,y=t.isGeo?o.getRegionModel(p):s?s.getItemModel(g):null,i.set(p,{dataIdx:g,regionModel:y}));var x=[],b=[];q(f.geometries,function(S){if(S.type==="polygon"){var A=[S.exterior].concat(S.interiors||[]);u&&(A=Kq(A,u)),q(A,function(E){x.push(new Qo(d(E)))})}else{var M=S.points;u&&(M=Kq(M,u,!0)),q(M,function(E){b.push(new $o(d(E)))})}});var _=c(f.getCenter(),l&&l.project);function w(S,A){if(S.length){var M=new fN({culling:!0,segmentIgnoreThreshold:1,shape:{paths:S}});v.add(M),qq(t,M,g,y),Yq(t,M,p,y,o,g,_),A&&(Wq(M),q(M.states,Wq))}}w(x),w(b,!0)}),r.each(function(f,p){var v=i.get(p),m=v.dataIdx,g=v.regionModel;Xq(t,f,p,g,o,m),Zq(t,f,p,g,o),Qq(t,f,p,g,o)},this)},e.prototype._buildSVG=function(t){var r=t.geo.map,i=t.transformInfoRaw;this._svgGroup.x=i.x,this._svgGroup.y=i.y,this._svgGroup.scaleX=i.scaleX,this._svgGroup.scaleY=i.scaleY,this._svgResourceChanged(r)&&(this._freeSVG(),this._useSVG(r));var n=this._svgDispatcherMap=dt(),a=!1;q(this._svgGraphicRecord.named,function(o){var s=o.name,l=t.mapOrGeoModel,u=t.data,c=o.svgNodeTagLower,h=o.el,d=u?u.indexOfName(s):null,f=l.getRegionModel(s);if(QDe.get(c)!=null&&h instanceof Rl&&qq(t,h,d,f),h instanceof Rl&&(h.culling=!0),h.z2EmphasisLift=0,!o.namedFrom&&(JDe.get(c)!=null&&Yq(t,h,s,f,l,d,null),Xq(t,h,s,f,l,d),Zq(t,h,s,f,l),KDe.get(c)!=null)){var p=Qq(t,h,s,f,l);p==="self"&&(a=!0);var v=n.get(s)||n.set(s,[]);v.push(h)}},this),this._enableBlurEntireSVG(a,t)},e.prototype._enableBlurEntireSVG=function(t,r){if(t&&r.isGeo){var i=r.mapOrGeoModel.getModel(["blur","itemStyle"]).getItemStyle(),n=i.opacity;this._svgGraphicRecord.root.traverse(function(a){if(!a.isGroup){Ov(a);var o=a.ensureState("blur").style||{};o.opacity==null&&n!=null&&(o.opacity=n),a.ensureState("emphasis")}})}},e.prototype.remove=function(){this._regionsGroup.removeAll(),this._regionsGroupByName=null,this._svgGroup.removeAll(),this._freeSVG(),this._controller.dispose(),this._controllerHost=null},e.prototype.findHighDownDispatchers=function(t,r){if(t==null)return[];var i=r.coordinateSystem;if(i.resourceType==="geoJSON"){var n=this._regionsGroupByName;if(n){var a=n.get(t);return a?[a]:[]}}else if(i.resourceType==="geoSVG")return this._svgDispatcherMap&&this._svgDispatcherMap.get(t)||[]},e.prototype._svgResourceChanged=function(t){return this._svgMapName!==t},e.prototype._useSVG=function(t){var r=bd.getGeoResource(t);if(r&&r.type==="geoSVG"){var i=r.useGraphic(this.uid);this._svgGroup.add(i.root),this._svgGraphicRecord=i,this._svgMapName=t}},e.prototype._freeSVG=function(){var t=this._svgMapName;if(t!=null){var r=bd.getGeoResource(t);r&&r.type==="geoSVG"&&r.freeGraphic(this.uid),this._svgGraphicRecord=null,this._svgDispatcherMap=null,this._svgGroup.removeAll(),this._svgMapName=null}},e.prototype._updateController=function(t,r,i){var n=t.coordinateSystem,a=this._controller,o=this._controllerHost;o.zoomLimit=t.get("scaleLimit"),o.zoom=n.getZoom(),a.enable(t.get("roam")||!1);var s=t.mainType;function l(){var u={type:"geoRoam",componentType:s};return u[s+"Id"]=t.id,u}a.off("pan").on("pan",function(u){this._mouseDownFlag=!1,rV(o,u.dx,u.dy),i.dispatchAction(Be(l(),{dx:u.dx,dy:u.dy,animation:{duration:0}}))},this),a.off("zoom").on("zoom",function(u){this._mouseDownFlag=!1,iV(o,u.scale,u.originX,u.originY),i.dispatchAction(Be(l(),{totalZoom:o.zoom,zoom:u.scale,originX:u.originX,originY:u.originY,animation:{duration:0}}))},this),a.setPointerChecker(function(u,c,h){return n.containPoint([c,h])&&!zC(u,i,t)})},e.prototype.resetForLabelLayout=function(){this.group.traverse(function(t){var r=t.getTextContent();r&&(r.ignore=Hhe(r).ignore)})},e.prototype._updateMapSelectHandler=function(t,r,i,n){var a=this;r.off("mousedown"),r.off("click"),t.get("selectedMode")&&(r.on("mousedown",function(){a._mouseDownFlag=!0}),r.on("click",function(o){a._mouseDownFlag&&(a._mouseDownFlag=!1)}))},e}();function qq(e,t,r,i){var n=i.getModel("itemStyle"),a=i.getModel(["emphasis","itemStyle"]),o=i.getModel(["blur","itemStyle"]),s=i.getModel(["select","itemStyle"]),l=$3(n),u=$3(a),c=$3(s),h=$3(o),d=e.data;if(d){var f=d.getItemVisual(r,"style"),p=d.getItemVisual(r,"decal");e.isVisualEncodedByVisualMap&&f.fill&&(l.fill=f.fill),p&&(l.decal=z1(p,e.api))}t.setStyle(l),t.style.strokeNoScale=!0,t.ensureState("emphasis").style=u,t.ensureState("select").style=c,t.ensureState("blur").style=h,Ov(t)}function Yq(e,t,r,i,n,a,o){var s=e.data,l=e.isGeo,u=s&&isNaN(s.get(s.mapDimension("value"),a)),c=s&&s.getItemLayout(a);if(l||u||c&&c.showLabel){var h=l?r:a,d=void 0;(!s||a>=0)&&(d=n);var f=o?{normal:{align:"center",verticalAlign:"middle"}}:null;Xa(t,ia(i),{labelFetcher:d,labelDataIndex:h,defaultText:r},f);var p=t.getTextContent();if(p&&(Hhe(p).ignore=p.ignore,t.textConfig&&o)){var v=t.getBoundingRect().clone();t.textConfig.layoutRect=v,t.textConfig.position=[(o[0]-v.x)/v.width*100+"%",(o[1]-v.y)/v.height*100+"%"]}t.disableLabelAnimation=!0}else t.removeTextContent(),t.removeTextConfig(),t.disableLabelAnimation=null}function Xq(e,t,r,i,n,a){e.data?e.data.setItemGraphicEl(a,t):Dt(t).eventData={componentType:"geo",componentIndex:n.componentIndex,geoIndex:n.componentIndex,name:r,region:i&&i.option||{}}}function Zq(e,t,r,i,n){e.data||Ey({el:t,componentModel:n,itemName:r,itemTooltipOption:i.get("tooltip")})}function Qq(e,t,r,i,n){t.highDownSilentOnTouch=!!n.get("selectedMode");var a=i.getModel("emphasis"),o=a.get("focus");return Ji(t,o,a.get("blurScope"),a.get("disabled")),e.isGeo&&J6e(t,n,r),o}function Kq(e,t,r){var i=[],n;function a(){n=[]}function o(){n.length&&(i.push(n),n=[])}var s=t({polygonStart:a,polygonEnd:o,lineStart:a,lineEnd:o,point:function(l,u){isFinite(l)&&isFinite(u)&&n.push([l,u])},sphere:function(){}});return!r&&s.polygonStart(),q(e,function(l){s.lineStart();for(var u=0;u<l.length;u++)s.point(l[u][0],l[u][1]);s.lineEnd()}),!r&&s.polygonEnd(),i}var $De=function(e){_e(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r}return t.prototype.render=function(r,i,n,a){if(!(a&&a.type==="mapToggleSelect"&&a.from===this.uid)){var o=this.group;if(o.removeAll(),!r.getHostGeoModel()){if(this._mapDraw&&a&&a.type==="geoRoam"&&this._mapDraw.resetForLabelLayout(),a&&a.type==="geoRoam"&&a.componentType==="series"&&a.seriesId===r.id){var s=this._mapDraw;s&&o.add(s.group)}else if(r.needsDrawMap){var s=this._mapDraw||new Uhe(n);o.add(s.group),s.draw(r,i,n,this,a),this._mapDraw=s}else this._mapDraw&&this._mapDraw.remove(),this._mapDraw=null;r.get("showLegendSymbol")&&i.getComponent("legend")&&this._renderSymbols(r,i,n)}}},t.prototype.remove=function(){this._mapDraw&&this._mapDraw.remove(),this._mapDraw=null,this.group.removeAll()},t.prototype.dispose=function(){this._mapDraw&&this._mapDraw.remove(),this._mapDraw=null},t.prototype._renderSymbols=function(r,i,n){var a=r.originalData,o=this.group;a.each(a.mapDimension("value"),function(s,l){if(!isNaN(s)){var u=a.getItemLayout(l);if(!(!u||!u.point)){var c=u.point,h=u.offset,d=new Od({style:{fill:r.getData().getVisual("style").fill},shape:{cx:c[0]+h*9,cy:c[1],r:3},silent:!0,z2:8+(h?0:Ay+1)});if(!h){var f=r.mainSeries.getData(),p=a.getName(l),v=f.indexOfName(p),m=a.getItemModel(l),g=m.getModel("label"),y=f.getItemGraphicEl(v);Xa(d,ia(m),{labelFetcher:{getFormattedLabel:function(x,b){return r.getFormattedLabel(v,b)}},defaultText:p}),d.disableLabelAnimation=!0,g.get("position")||d.setTextConfig({position:"bottom"}),y.onHoverStateChange=function(x){R8(d,x)}}o.add(d)}}})},t.type="map",t}(yi),eIe=function(e){_e(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r.needsDrawMap=!1,r.seriesGroup=[],r.getTooltipPosition=function(i){if(i!=null){var n=this.getData().getName(i),a=this.coordinateSystem,o=a.getRegion(n);return o&&a.dataToPoint(o.getCenter())}},r}return t.prototype.getInitialData=function(r){for(var i=By(this,{coordDimensions:["value"],encodeDefaulter:kt(AN,this)}),n=dt(),a=[],o=0,s=i.count();o<s;o++){var l=i.getName(o);n.set(l,!0)}var u=bd.load(this.getMapType(),this.option.nameMap,this.option.nameProperty);return q(u.regions,function(c){var h=c.name;n.get(h)||a.push(h)}),i.appendValues([],a),i},t.prototype.getHostGeoModel=function(){var r=this.option.geoIndex;return r!=null?this.ecModel.getComponent("geo",r):null},t.prototype.getMapType=function(){return(this.getHostGeoModel()||this).option.map},t.prototype.getRawValue=function(r){var i=this.getData();return i.get(i.mapDimension("value"),r)},t.prototype.getRegionModel=function(r){var i=this.getData();return i.getItemModel(i.indexOfName(r))},t.prototype.formatTooltip=function(r,i,n){for(var a=this.getData(),o=this.getRawValue(r),s=a.getName(r),l=this.seriesGroup,u=[],c=0;c<l.length;c++){var h=l[c].originalData.indexOfName(s),d=a.mapDimension("value");isNaN(l[c].originalData.get(d,h))||u.push(l[c].name)}return na("section",{header:u.join(", "),noHeader:!u.length,blocks:[na("nameValue",{name:s,value:o})]})},t.prototype.setZoom=function(r){this.option.zoom=r},t.prototype.setCenter=function(r){this.option.center=r},t.prototype.getLegendIcon=function(r){var i=r.icon||"roundRect",n=Sn(i,0,0,r.itemWidth,r.itemHeight,r.itemStyle.fill);return n.setStyle(r.itemStyle),n.style.stroke="none",i.indexOf("empty")>-1&&(n.style.stroke=n.style.fill,n.style.fill="#fff",n.style.lineWidth=2),n},t.type="series.map",t.dependencies=["geo"],t.layoutMode="box",t.defaultOption={z:2,coordinateSystem:"geo",map:"",left:"center",top:"center",aspectScale:null,showLegendSymbol:!0,boundingCoords:null,center:null,zoom:1,scaleLimit:null,selectedMode:!0,label:{show:!1,color:"#000"},itemStyle:{borderWidth:.5,borderColor:"#444",areaColor:"#eee"},emphasis:{label:{show:!0,color:"rgb(100,0,0)"},itemStyle:{areaColor:"rgba(255,215,0,0.8)"}},select:{label:{show:!0,color:"rgb(100,0,0)"},itemStyle:{color:"rgba(255,215,0,0.8)"}},nameProperty:"name"},t}(Di);function tIe(e,t){var r={};return q(e,function(i){i.each(i.mapDimension("value"),function(n,a){var o="ec-"+i.getName(a);r[o]=r[o]||[],isNaN(n)||r[o].push(n)})}),e[0].map(e[0].mapDimension("value"),function(i,n){for(var a="ec-"+e[0].getName(n),o=0,s=1/0,l=-1/0,u=r[a].length,c=0;c<u;c++)s=Math.min(s,r[a][c]),l=Math.max(l,r[a][c]),o+=r[a][c];var h;return t==="min"?h=s:t==="max"?h=l:t==="average"?h=o/u:h=o,u===0?NaN:h})}function rIe(e){var t={};e.eachSeriesByType("map",function(r){var i=r.getHostGeoModel(),n=i?"o"+i.id:"i"+r.getMapType();(t[n]=t[n]||[]).push(r)}),q(t,function(r,i){for(var n=tIe(qe(r,function(o){return o.getData()}),r[0].get("mapValueCalculation")),a=0;a<r.length;a++)r[a].originalData=r[a].getData();for(var a=0;a<r.length;a++)r[a].seriesGroup=r,r[a].needsDrawMap=a===0&&!r[a].getHostGeoModel(),r[a].setData(n.cloneShallow()),r[a].mainSeries=r[0]})}function iIe(e){var t={};e.eachSeriesByType("map",function(r){var i=r.getMapType();if(!(r.getHostGeoModel()||t[i])){var n={};q(r.seriesGroup,function(o){var s=o.coordinateSystem,l=o.originalData;o.get("showLegendSymbol")&&e.getComponent("legend")&&l.each(l.mapDimension("value"),function(u,c){var h=l.getName(c),d=s.getRegion(h);if(!(!d||isNaN(u))){var f=n[h]||0,p=s.dataToPoint(d.getCenter());n[h]=f+1,l.setItemLayout(c,{point:p,offset:f})}})});var a=r.getData();a.each(function(o){var s=a.getName(o),l=a.getItemLayout(o)||{};l.showLabel=!n[s],a.setItemLayout(o,l)}),t[i]=!0}})}var Jq=Wa,E4=function(e){_e(t,e);function t(r){var i=e.call(this)||this;return i.type="view",i.dimensions=["x","y"],i._roamTransformable=new Qh,i._rawTransformable=new Qh,i.name=r,i}return t.prototype.setBoundingRect=function(r,i,n,a){return this._rect=new qt(r,i,n,a),this._rect},t.prototype.getBoundingRect=function(){return this._rect},t.prototype.setViewRect=function(r,i,n,a){this._transformTo(r,i,n,a),this._viewRect=new qt(r,i,n,a)},t.prototype._transformTo=function(r,i,n,a){var o=this.getBoundingRect(),s=this._rawTransformable;s.transform=o.calculateTransform(new qt(r,i,n,a));var l=s.parent;s.parent=null,s.decomposeTransform(),s.parent=l,this._updateTransform()},t.prototype.setCenter=function(r,i){r&&(this._center=[et(r[0],i.getWidth()),et(r[1],i.getHeight())],this._updateCenterAndZoom())},t.prototype.setZoom=function(r){r=r||1;var i=this.zoomLimit;i&&(i.max!=null&&(r=Math.min(i.max,r)),i.min!=null&&(r=Math.max(i.min,r))),this._zoom=r,this._updateCenterAndZoom()},t.prototype.getDefaultCenter=function(){var r=this.getBoundingRect(),i=r.x+r.width/2,n=r.y+r.height/2;return[i,n]},t.prototype.getCenter=function(){return this._center||this.getDefaultCenter()},t.prototype.getZoom=function(){return this._zoom||1},t.prototype.getRoamTransform=function(){return this._roamTransformable.getLocalTransform()},t.prototype._updateCenterAndZoom=function(){var r=this._rawTransformable.getLocalTransform(),i=this._roamTransformable,n=this.getDefaultCenter(),a=this.getCenter(),o=this.getZoom();a=Wa([],a,r),n=Wa([],n,r),i.originX=a[0],i.originY=a[1],i.x=n[0]-a[0],i.y=n[1]-a[1],i.scaleX=i.scaleY=o,this._updateTransform()},t.prototype._updateTransform=function(){var r=this._roamTransformable,i=this._rawTransformable;i.parent=r,r.updateTransform(),i.updateTransform(),QB(this.transform||(this.transform=[]),i.transform||js()),this._rawTransform=i.getLocalTransform(),this.invTransform=this.invTransform||[],wy(this.invTransform,this.transform),this.decomposeTransform()},t.prototype.getTransformInfo=function(){var r=this._rawTransformable,i=this._roamTransformable,n=new Qh;return n.transform=i.transform,n.decomposeTransform(),{roam:{x:n.x,y:n.y,scaleX:n.scaleX,scaleY:n.scaleY},raw:{x:r.x,y:r.y,scaleX:r.scaleX,scaleY:r.scaleY}}},t.prototype.getViewRect=function(){return this._viewRect},t.prototype.getViewRectAfterRoam=function(){var r=this.getBoundingRect().clone();return r.applyTransform(this.transform),r},t.prototype.dataToPoint=function(r,i,n){var a=i?this._rawTransform:this.transform;return n=n||[],a?Jq(n,r,a):Bo(n,r)},t.prototype.pointToData=function(r){var i=this.invTransform;return i?Jq([],r,i):[r[0],r[1]]},t.prototype.convertToPixel=function(r,i,n){var a=$q(i);return a===this?a.dataToPoint(n):null},t.prototype.convertFromPixel=function(r,i,n){var a=$q(i);return a===this?a.pointToData(n):null},t.prototype.containPoint=function(r){return this.getViewRectAfterRoam().contain(r[0],r[1])},t.dimensions=["x","y"],t}(Qh);function $q(e){var t=e.seriesModel;return t?t.coordinateSystem:null}var nIe={geoJSON:{aspectScale:.75,invertLongitute:!0},geoSVG:{aspectScale:1,invertLongitute:!1}},Ghe=["lng","lat"],jL=function(e){_e(t,e);function t(r,i,n){var a=e.call(this,r)||this;a.dimensions=Ghe,a.type="geo",a._nameCoordMap=dt(),a.map=i;var o=n.projection,s=bd.load(i,n.nameMap,n.nameProperty),l=bd.getGeoResource(i);a.resourceType=l?l.type:null;var u=a.regions=s.regions,c=nIe[l.type];a._regionsMap=s.regionsMap,a.regions=s.regions,a.projection=o;var h;if(o)for(var d=0;d<u.length;d++){var f=u[d].getBoundingRect(o);h=h||f.clone(),h.union(f)}else h=s.boundingRect;return a.setBoundingRect(h.x,h.y,h.width,h.height),a.aspectScale=o?1:Lt(n.aspectScale,c.aspectScale),a._invertLongitute=o?!1:c.invertLongitute,a}return t.prototype._transformTo=function(r,i,n,a){var o=this.getBoundingRect(),s=this._invertLongitute;o=o.clone(),s&&(o.y=-o.y-o.height);var l=this._rawTransformable;l.transform=o.calculateTransform(new qt(r,i,n,a));var u=l.parent;l.parent=null,l.decomposeTransform(),l.parent=u,s&&(l.scaleY=-l.scaleY),this._updateTransform()},t.prototype.getRegion=function(r){return this._regionsMap.get(r)},t.prototype.getRegionByCoord=function(r){for(var i=this.regions,n=0;n<i.length;n++){var a=i[n];if(a.type==="geoJSON"&&a.contain(r))return i[n]}},t.prototype.addGeoCoord=function(r,i){this._nameCoordMap.set(r,i)},t.prototype.getGeoCoord=function(r){var i=this._regionsMap.get(r);return this._nameCoordMap.get(r)||i&&i.getCenter()},t.prototype.dataToPoint=function(r,i,n){if(it(r)&&(r=this.getGeoCoord(r)),r){var a=this.projection;return a&&(r=a.project(r)),r&&this.projectedToPoint(r,i,n)}},t.prototype.pointToData=function(r){var i=this.projection;return i&&(r=i.unproject(r)),r&&this.pointToProjected(r)},t.prototype.pointToProjected=function(r){return e.prototype.pointToData.call(this,r)},t.prototype.projectedToPoint=function(r,i,n){return e.prototype.dataToPoint.call(this,r,i,n)},t.prototype.convertToPixel=function(r,i,n){var a=eY(i);return a===this?a.dataToPoint(n):null},t.prototype.convertFromPixel=function(r,i,n){var a=eY(i);return a===this?a.pointToData(n):null},t}(E4);Mn(jL,E4);function eY(e){var t=e.geoModel,r=e.seriesModel;return t?t.coordinateSystem:r?r.coordinateSystem||(r.getReferringComponents("geo",wn).models[0]||{}).coordinateSystem:null}function tY(e,t){var r=e.get("boundingCoords");if(r!=null){var i=r[0],n=r[1];if(isFinite(i[0])&&isFinite(i[1])&&isFinite(n[0])&&isFinite(n[1])){var a=this.projection;if(a){var o=i[0],s=i[1],l=n[0],u=n[1];i=[1/0,1/0],n=[-1/0,-1/0];var c=function(w,S,A,M){for(var E=A-w,T=M-S,L=0;L<=100;L++){var P=L/100,C=a.project([w+E*P,S+T*P]);Rf(i,i,C),Of(n,n,C)}};c(o,s,l,s),c(l,s,l,u),c(l,u,o,u),c(o,u,l,s)}this.setBoundingRect(i[0],i[1],n[0]-i[0],n[1]-i[1])}}var h=this.getBoundingRect(),d=e.get("layoutCenter"),f=e.get("layoutSize"),p=t.getWidth(),v=t.getHeight(),m=h.width/h.height*this.aspectScale,g=!1,y,x;d&&f&&(y=[et(d[0],p),et(d[1],v)],x=et(f,Math.min(p,v)),!isNaN(y[0])&&!isNaN(y[1])&&!isNaN(x)&&(g=!0));var b;if(g)b={},m>1?(b.width=x,b.height=x/m):(b.height=x,b.width=x*m),b.y=y[1]-b.height/2,b.x=y[0]-b.width/2;else{var _=e.getBoxLayoutParams();_.aspect=m,b=zn(_,{width:p,height:v})}this.setViewRect(b.x,b.y,b.width,b.height),this.setCenter(e.get("center"),t),this.setZoom(e.get("zoom"))}function aIe(e,t){q(t.get("geoCoord"),function(r,i){e.addGeoCoord(i,r)})}var oIe=function(){function e(){this.dimensions=Ghe}return e.prototype.create=function(t,r){var i=[];function n(o){return{nameProperty:o.get("nameProperty"),aspectScale:o.get("aspectScale"),projection:o.get("projection")}}t.eachComponent("geo",function(o,s){var l=o.get("map"),u=new jL(l+s,l,Be({nameMap:o.get("nameMap")},n(o)));u.zoomLimit=o.get("scaleLimit"),i.push(u),o.coordinateSystem=u,u.model=o,u.resize=tY,u.resize(o,r)}),t.eachSeries(function(o){var s=o.get("coordinateSystem");if(s==="geo"){var l=o.get("geoIndex")||0;o.coordinateSystem=i[l]}});var a={};return t.eachSeriesByType("map",function(o){if(!o.getHostGeoModel()){var s=o.getMapType();a[s]=a[s]||[],a[s].push(o)}}),q(a,function(o,s){var l=qe(o,function(c){return c.get("nameMap")}),u=new jL(s,s,Be({nameMap:qB(l)},n(o[0])));u.zoomLimit=xa.apply(null,qe(o,function(c){return c.get("scaleLimit")})),i.push(u),u.resize=tY,u.resize(o[0],r),q(o,function(c){c.coordinateSystem=u,aIe(u,c)})}),i},e.prototype.getFilledRegions=function(t,r,i,n){for(var a=(t||[]).slice(),o=dt(),s=0;s<a.length;s++)o.set(a[s].name,a[s]);var l=bd.load(r,i,n);return q(l.regions,function(u){var c=u.name;!o.get(c)&&a.push({name:c})}),a},e}(),jhe=new oIe,sIe=function(e){_e(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r}return t.prototype.init=function(r,i,n){var a=bd.getGeoResource(r.map);if(a&&a.type==="geoJSON"){var o=r.itemStyle=r.itemStyle||{};"color"in o||(o.color="#eee")}this.mergeDefaultAndTheme(r,n),Lv(r,"label",["show"])},t.prototype.optionUpdated=function(){var r=this,i=this.option;i.regions=jhe.getFilledRegions(i.regions,i.map,i.nameMap,i.nameProperty);var n={};this._optionModelMap=Zc(i.regions||[],function(a,o){var s=o.name;return s&&(a.set(s,new Qr(o,r,r.ecModel)),o.selected&&(n[s]=!0)),a},dt()),i.selectedMap||(i.selectedMap=n)},t.prototype.getRegionModel=function(r){return this._optionModelMap.get(r)||new Qr(null,this,this.ecModel)},t.prototype.getFormattedLabel=function(r,i){var n=this.getRegionModel(r),a=i==="normal"?n.get(["label","formatter"]):n.get(["emphasis","label","formatter"]),o={name:r};if(xt(a))return o.status=i,a(o);if(it(a))return a.replace("{a}",r??"")},t.prototype.setZoom=function(r){this.option.zoom=r},t.prototype.setCenter=function(r){this.option.center=r},t.prototype.select=function(r){var i=this.option,n=i.selectedMode;if(n){n!=="multiple"&&(i.selectedMap=null);var a=i.selectedMap||(i.selectedMap={});a[r]=!0}},t.prototype.unSelect=function(r){var i=this.option.selectedMap;i&&(i[r]=!1)},t.prototype.toggleSelected=function(r){this[this.isSelected(r)?"unSelect":"select"](r)},t.prototype.isSelected=function(r){var i=this.option.selectedMap;return!!(i&&i[r])},t.type="geo",t.layoutMode="box",t.defaultOption={z:0,show:!0,left:"center",top:"center",aspectScale:null,silent:!1,map:"",boundingCoords:null,center:null,zoom:1,scaleLimit:null,label:{show:!1,color:"#000"},itemStyle:{borderWidth:.5,borderColor:"#444"},emphasis:{label:{show:!0,color:"rgb(100,0,0)"},itemStyle:{color:"rgba(255,215,0,0.8)"}},select:{label:{show:!0,color:"rgb(100,0,0)"},itemStyle:{color:"rgba(255,215,0,0.8)"}},regions:[]},t}(vr);function rY(e,t){return e.pointToProjected?e.pointToProjected(t):e.pointToData(t)}function aV(e,t,r,i){var n=e.getZoom(),a=e.getCenter(),o=t.zoom,s=e.projectedToPoint?e.projectedToPoint(a):e.dataToPoint(a);if(t.dx!=null&&t.dy!=null&&(s[0]-=t.dx,s[1]-=t.dy,e.setCenter(rY(e,s),i)),o!=null){if(r){var l=r.min||0,u=r.max||1/0;o=Math.max(Math.min(n*o,u),l)/n}e.scaleX*=o,e.scaleY*=o;var c=(t.originX-e.x)*(o-1),h=(t.originY-e.y)*(o-1);e.x-=c,e.y-=h,e.updateTransform(),e.setCenter(rY(e,s),i),e.setZoom(o*n)}return{center:e.getCenter(),zoom:e.getZoom()}}var lIe=function(e){_e(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r.focusBlurEnabled=!0,r}return t.prototype.init=function(r,i){this._api=i},t.prototype.render=function(r,i,n,a){if(this._model=r,!r.get("show")){this._mapDraw&&this._mapDraw.remove(),this._mapDraw=null;return}this._mapDraw||(this._mapDraw=new Uhe(n));var o=this._mapDraw;o.draw(r,i,n,this,a),o.group.on("click",this._handleRegionClick,this),o.group.silent=r.get("silent"),this.group.add(o.group),this.updateSelectStatus(r,i,n)},t.prototype._handleRegionClick=function(r){var i;q0(r.target,function(n){return(i=Dt(n).eventData)!=null},!0),i&&this._api.dispatchAction({type:"geoToggleSelect",geoId:this._model.id,name:i.name})},t.prototype.updateSelectStatus=function(r,i,n){var a=this;this._mapDraw.group.traverse(function(o){var s=Dt(o).eventData;if(s)return a._model.isSelected(s.name)?n.enterSelect(o):n.leaveSelect(o),!0})},t.prototype.findHighDownDispatchers=function(r){return this._mapDraw&&this._mapDraw.findHighDownDispatchers(r,this._model)},t.prototype.dispose=function(){this._mapDraw&&this._mapDraw.remove()},t.type="geo",t}(Gi);function uIe(e,t,r){bd.registerMap(e,t,r)}function Whe(e){e.registerCoordinateSystem("geo",jhe),e.registerComponentModel(sIe),e.registerComponentView(lIe),e.registerImpl("registerMap",uIe),e.registerImpl("getMap",function(r){return bd.getMapForUser(r)});function t(r,i){i.update="geo:updateSelectStatus",e.registerAction(i,function(n,a){var o={},s=[];return a.eachComponent({mainType:"geo",query:n},function(l){l[r](n.name);var u=l.coordinateSystem;q(u.regions,function(h){o[h.name]=l.isSelected(h.name)||!1});var c=[];q(o,function(h,d){o[d]&&c.push(d)}),s.push({geoIndex:l.componentIndex,name:c})}),{selected:o,allSelected:s,name:n.name}})}t("toggleSelected",{type:"geoToggleSelect",event:"geoselectchanged"}),t("select",{type:"geoSelect",event:"geoselected"}),t("unSelect",{type:"geoUnSelect",event:"geounselected"}),e.registerAction({type:"geoRoam",event:"geoRoam",update:"updateTransform"},function(r,i,n){var a=r.componentType||"series";i.eachComponent({mainType:a,query:r},function(o){var s=o.coordinateSystem;if(s.type==="geo"){var l=aV(s,r,o.get("scaleLimit"),n);o.setCenter&&o.setCenter(l.center),o.setZoom&&o.setZoom(l.zoom),a==="series"&&q(o.seriesGroup,function(u){u.setCenter(l.center),u.setZoom(l.zoom)})}})})}function cIe(e){ir(Whe),e.registerChartView($De),e.registerSeriesModel(eIe),e.registerLayout(iIe),e.registerProcessor(e.PRIORITY.PROCESSOR.STATISTIC,rIe),que("map",e.registerAction)}function hIe(e){var t=e;t.hierNode={defaultAncestor:null,ancestor:t,prelim:0,modifier:0,change:0,shift:0,i:0,thread:null};for(var r=[t],i,n;i=r.pop();)if(n=i.children,i.isExpand&&n.length)for(var a=n.length,o=a-1;o>=0;o--){var s=n[o];s.hierNode={defaultAncestor:null,ancestor:s,prelim:0,modifier:0,change:0,shift:0,i:o,thread:null},r.push(s)}}function dIe(e,t){var r=e.isExpand?e.children:[],i=e.parentNode.children,n=e.hierNode.i?i[e.hierNode.i-1]:null;if(r.length){vIe(e);var a=(r[0].hierNode.prelim+r[r.length-1].hierNode.prelim)/2;n?(e.hierNode.prelim=n.hierNode.prelim+t(e,n),e.hierNode.modifier=e.hierNode.prelim-a):e.hierNode.prelim=a}else n&&(e.hierNode.prelim=n.hierNode.prelim+t(e,n));e.parentNode.hierNode.defaultAncestor=mIe(e,n,e.parentNode.hierNode.defaultAncestor||i[0],t)}function fIe(e){var t=e.hierNode.prelim+e.parentNode.hierNode.modifier;e.setLayout({x:t},!0),e.hierNode.modifier+=e.parentNode.hierNode.modifier}function iY(e){return arguments.length?e:xIe}function Bx(e,t){return e-=Math.PI/2,{x:t*Math.cos(e),y:t*Math.sin(e)}}function pIe(e,t){return zn(e.getBoxLayoutParams(),{width:t.getWidth(),height:t.getHeight()})}function vIe(e){for(var t=e.children,r=t.length,i=0,n=0;--r>=0;){var a=t[r];a.hierNode.prelim+=i,a.hierNode.modifier+=i,n+=a.hierNode.change,i+=a.hierNode.shift+n}}function mIe(e,t,r,i){if(t){for(var n=e,a=e,o=a.parentNode.children[0],s=t,l=n.hierNode.modifier,u=a.hierNode.modifier,c=o.hierNode.modifier,h=s.hierNode.modifier;s=HM(s),a=UM(a),s&&a;){n=HM(n),o=UM(o),n.hierNode.ancestor=e;var d=s.hierNode.prelim+h-a.hierNode.prelim-u+i(s,a);d>0&&(yIe(gIe(s,e,r),e,d),u+=d,l+=d),h+=s.hierNode.modifier,u+=a.hierNode.modifier,l+=n.hierNode.modifier,c+=o.hierNode.modifier}s&&!HM(n)&&(n.hierNode.thread=s,n.hierNode.modifier+=h-l),a&&!UM(o)&&(o.hierNode.thread=a,o.hierNode.modifier+=u-c,r=e)}return r}function HM(e){var t=e.children;return t.length&&e.isExpand?t[t.length-1]:e.hierNode.thread}function UM(e){var t=e.children;return t.length&&e.isExpand?t[0]:e.hierNode.thread}function gIe(e,t,r){return e.hierNode.ancestor.parentNode===t.parentNode?e.hierNode.ancestor:r}function yIe(e,t,r){var i=r/(t.hierNode.i-e.hierNode.i);t.hierNode.change-=i,t.hierNode.shift+=r,t.hierNode.modifier+=r,t.hierNode.prelim+=r,e.hierNode.change+=i}function xIe(e,t){return e.parentNode===t.parentNode?1:2}var bIe=function(){function e(){this.parentPoint=[],this.childPoints=[]}return e}(),wIe=function(e){_e(t,e);function t(r){return e.call(this,r)||this}return t.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},t.prototype.getDefaultShape=function(){return new bIe},t.prototype.buildPath=function(r,i){var n=i.childPoints,a=n.length,o=i.parentPoint,s=n[0],l=n[a-1];if(a===1){r.moveTo(o[0],o[1]),r.lineTo(s[0],s[1]);return}var u=i.orient,c=u==="TB"||u==="BT"?0:1,h=1-c,d=et(i.forkPosition,1),f=[];f[c]=o[c],f[h]=o[h]+(l[h]-o[h])*d,r.moveTo(o[0],o[1]),r.lineTo(f[0],f[1]),r.moveTo(s[0],s[1]),f[c]=s[c],r.lineTo(f[0],f[1]),f[c]=l[c],r.lineTo(f[0],f[1]),r.lineTo(l[0],l[1]);for(var p=1;p<a-1;p++){var v=n[p];r.moveTo(v[0],v[1]),f[c]=v[c],r.lineTo(f[0],f[1])}},t}(or),_Ie=function(e){_e(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r._mainGroup=new Ct,r}return t.prototype.init=function(r,i){this._controller=new C4(i.getZr()),this._controllerHost={target:this.group},this.group.add(this._mainGroup)},t.prototype.render=function(r,i,n){var a=r.getData(),o=r.layoutInfo,s=this._mainGroup,l=r.get("layout");l==="radial"?(s.x=o.x+o.width/2,s.y=o.y+o.height/2):(s.x=o.x,s.y=o.y),this._updateViewCoordSys(r,n),this._updateController(r,i,n);var u=this._data;a.diff(u).add(function(c){nY(a,c)&&aY(a,c,null,s,r)}).update(function(c,h){var d=u.getItemGraphicEl(h);if(!nY(a,c)){d&&sY(u,h,d,s,r);return}aY(a,c,d,s,r)}).remove(function(c){var h=u.getItemGraphicEl(c);h&&sY(u,c,h,s,r)}).execute(),this._nodeScaleRatio=r.get("nodeScaleRatio"),this._updateNodeAndLinkScale(r),r.get("expandAndCollapse")===!0&&a.eachItemGraphicEl(function(c,h){c.off("click").on("click",function(){n.dispatchAction({type:"treeExpandAndCollapse",seriesId:r.id,dataIndex:h})})}),this._data=a},t.prototype._updateViewCoordSys=function(r,i){var n=r.getData(),a=[];n.each(function(h){var d=n.getItemLayout(h);d&&!isNaN(d.x)&&!isNaN(d.y)&&a.push([+d.x,+d.y])});var o=[],s=[];mC(a,o,s);var l=this._min,u=this._max;s[0]-o[0]===0&&(o[0]=l?l[0]:o[0]-1,s[0]=u?u[0]:s[0]+1),s[1]-o[1]===0&&(o[1]=l?l[1]:o[1]-1,s[1]=u?u[1]:s[1]+1);var c=r.coordinateSystem=new E4;c.zoomLimit=r.get("scaleLimit"),c.setBoundingRect(o[0],o[1],s[0]-o[0],s[1]-o[1]),c.setCenter(r.get("center"),i),c.setZoom(r.get("zoom")),this.group.attr({x:c.x,y:c.y,scaleX:c.scaleX,scaleY:c.scaleY}),this._min=o,this._max=s},t.prototype._updateController=function(r,i,n){var a=this,o=this._controller,s=this._controllerHost,l=this.group;o.setPointerChecker(function(u,c,h){var d=l.getBoundingRect();return d.applyTransform(l.transform),d.contain(c,h)&&!zC(u,n,r)}),o.enable(r.get("roam")),s.zoomLimit=r.get("scaleLimit"),s.zoom=r.coordinateSystem.getZoom(),o.off("pan").off("zoom").on("pan",function(u){rV(s,u.dx,u.dy),n.dispatchAction({seriesId:r.id,type:"treeRoam",dx:u.dx,dy:u.dy})}).on("zoom",function(u){iV(s,u.scale,u.originX,u.originY),n.dispatchAction({seriesId:r.id,type:"treeRoam",zoom:u.scale,originX:u.originX,originY:u.originY}),a._updateNodeAndLinkScale(r),n.updateLabelLayout()})},t.prototype._updateNodeAndLinkScale=function(r){var i=r.getData(),n=this._getNodeGlobalScale(r);i.eachItemGraphicEl(function(a,o){a.setSymbolScale(n)})},t.prototype._getNodeGlobalScale=function(r){var i=r.coordinateSystem;if(i.type!=="view")return 1;var n=this._nodeScaleRatio,a=i.scaleX||1,o=i.getZoom(),s=(o-1)*n+1;return s/a},t.prototype.dispose=function(){this._controller&&this._controller.dispose(),this._controllerHost=null},t.prototype.remove=function(){this._mainGroup.removeAll(),this._data=null},t.type="tree",t}(yi);function nY(e,t){var r=e.getItemLayout(t);return r&&!isNaN(r.x)&&!isNaN(r.y)}function aY(e,t,r,i,n){var a=!r,o=e.tree.getNodeByDataIndex(t),s=o.getModel(),l=o.getVisual("style").fill,u=o.isExpand===!1&&o.children.length!==0?l:"#fff",c=e.tree.root,h=o.parentNode===c?o:o.parentNode||o,d=e.getItemGraphicEl(h.dataIndex),f=h.getLayout(),p=d?{x:d.__oldX,y:d.__oldY,rawX:d.__radialOldRawX,rawY:d.__radialOldRawY}:f,v=o.getLayout();a?(r=new x4(e,t,null,{symbolInnerColor:u,useNameLabel:!0}),r.x=p.x,r.y=p.y):r.updateData(e,t,null,{symbolInnerColor:u,useNameLabel:!0}),r.__radialOldRawX=r.__radialRawX,r.__radialOldRawY=r.__radialRawY,r.__radialRawX=v.rawX,r.__radialRawY=v.rawY,i.add(r),e.setItemGraphicEl(t,r),r.__oldX=r.x,r.__oldY=r.y,Nr(r,{x:v.x,y:v.y},n);var m=r.getSymbolPath();if(n.get("layout")==="radial"){var g=c.children[0],y=g.getLayout(),x=g.children.length,b=void 0,_=void 0;if(v.x===y.x&&o.isExpand===!0&&g.children.length){var w={x:(g.children[0].getLayout().x+g.children[x-1].getLayout().x)/2,y:(g.children[0].getLayout().y+g.children[x-1].getLayout().y)/2};b=Math.atan2(w.y-y.y,w.x-y.x),b<0&&(b=Math.PI*2+b),_=w.x<y.x,_&&(b=b-Math.PI)}else b=Math.atan2(v.y-y.y,v.x-y.x),b<0&&(b=Math.PI*2+b),o.children.length===0||o.children.length!==0&&o.isExpand===!1?(_=v.x<y.x,_&&(b=b-Math.PI)):(_=v.x>y.x,_||(b=b-Math.PI));var S=_?"left":"right",A=s.getModel("label"),M=A.get("rotate"),E=M*(Math.PI/180),T=m.getTextContent();T&&(m.setTextConfig({position:A.get("position")||S,rotation:M==null?-b:E,origin:"center"}),T.setStyle("verticalAlign","middle"))}var L=s.get(["emphasis","focus"]),P=L==="relative"?S8(o.getAncestorsIndices(),o.getDescendantIndices()):L==="ancestor"?o.getAncestorsIndices():L==="descendant"?o.getDescendantIndices():null;P&&(Dt(r).focus=P),AIe(n,o,c,r,p,f,v,i),r.__edge&&(r.onHoverStateChange=function(C){if(C!=="blur"){var D=o.parentNode&&e.getItemGraphicEl(o.parentNode.dataIndex);D&&D.hoverState===c4||R8(r.__edge,C)}})}function AIe(e,t,r,i,n,a,o,s){var l=t.getModel(),u=e.get("edgeShape"),c=e.get("layout"),h=e.getOrient(),d=e.get(["lineStyle","curveness"]),f=e.get("edgeForkPosition"),p=l.getModel("lineStyle").getLineStyle(),v=i.__edge;if(u==="curve")t.parentNode&&t.parentNode!==r&&(v||(v=i.__edge=new d4({shape:WL(c,h,d,n,n)})),Nr(v,{shape:WL(c,h,d,a,o)},e));else if(u==="polyline"&&c==="orthogonal"&&t!==r&&t.children&&t.children.length!==0&&t.isExpand===!0){for(var m=t.children,g=[],y=0;y<m.length;y++){var x=m[y].getLayout();g.push([x.x,x.y])}v||(v=i.__edge=new wIe({shape:{parentPoint:[o.x,o.y],childPoints:[[o.x,o.y]],orient:h,forkPosition:f}})),Nr(v,{shape:{parentPoint:[o.x,o.y],childPoints:g}},e)}v&&!(u==="polyline"&&!t.isExpand)&&(v.useStyle(bt({strokeNoScale:!0,fill:null},p)),Ya(v,l,"lineStyle"),Ov(v),s.add(v))}function oY(e,t,r,i,n){var a=t.tree.root,o=qhe(a,e),s=o.source,l=o.sourceLayout,u=t.getItemGraphicEl(e.dataIndex);if(u){var c=t.getItemGraphicEl(s.dataIndex),h=c.__edge,d=u.__edge||(s.isExpand===!1||s.children.length===1?h:void 0),f=i.get("edgeShape"),p=i.get("layout"),v=i.get("orient"),m=i.get(["lineStyle","curveness"]);d&&(f==="curve"?fp(d,{shape:WL(p,v,m,l,l),style:{opacity:0}},i,{cb:function(){r.remove(d)},removeOpt:n}):f==="polyline"&&i.get("layout")==="orthogonal"&&fp(d,{shape:{parentPoint:[l.x,l.y],childPoints:[[l.x,l.y]]},style:{opacity:0}},i,{cb:function(){r.remove(d)},removeOpt:n}))}}function qhe(e,t){for(var r=t.parentNode===e?t:t.parentNode||t,i;i=r.getLayout(),i==null;)r=r.parentNode===e?r:r.parentNode||r;return{source:r,sourceLayout:i}}function sY(e,t,r,i,n){var a=e.tree.getNodeByDataIndex(t),o=e.tree.root,s=qhe(o,a).sourceLayout,l={duration:n.get("animationDurationUpdate"),easing:n.get("animationEasingUpdate")};fp(r,{x:s.x+1,y:s.y+1},n,{cb:function(){i.remove(r),e.setItemGraphicEl(t,null)},removeOpt:l}),r.fadeOut(null,e.hostModel,{fadeLabel:!0,animation:l}),a.children.forEach(function(u){oY(u,e,i,n,l)}),oY(a,e,i,n,l)}function WL(e,t,r,i,n){var a,o,s,l,u,c,h,d;if(e==="radial"){u=i.rawX,h=i.rawY,c=n.rawX,d=n.rawY;var f=Bx(u,h),p=Bx(u,h+(d-h)*r),v=Bx(c,d+(h-d)*r),m=Bx(c,d);return{x1:f.x||0,y1:f.y||0,x2:m.x||0,y2:m.y||0,cpx1:p.x||0,cpy1:p.y||0,cpx2:v.x||0,cpy2:v.y||0}}else u=i.x,h=i.y,c=n.x,d=n.y,(t==="LR"||t==="RL")&&(a=u+(c-u)*r,o=h,s=c+(u-c)*r,l=d),(t==="TB"||t==="BT")&&(a=u,o=h+(d-h)*r,s=c,l=d+(h-d)*r);return{x1:u,y1:h,x2:c,y2:d,cpx1:a,cpy1:o,cpx2:s,cpy2:l}}var Dl=Pr();function Yhe(e){var t=e.mainData,r=e.datas;r||(r={main:t},e.datasAttr={main:"data"}),e.datas=e.mainData=null,Xhe(t,r,e),q(r,function(i){q(t.TRANSFERABLE_METHODS,function(n){i.wrapMethod(n,kt(SIe,e))})}),t.wrapMethod("cloneShallow",kt(EIe,e)),q(t.CHANGABLE_METHODS,function(i){t.wrapMethod(i,kt(CIe,e))}),Yo(r[t.dataType]===t)}function SIe(e,t){if(PIe(this)){var r=Be({},Dl(this).datas);r[this.dataType]=t,Xhe(t,r,e)}else oV(t,this.dataType,Dl(this).mainData,e);return t}function CIe(e,t){return e.struct&&e.struct.update(),t}function EIe(e,t){return q(Dl(t).datas,function(r,i){r!==t&&oV(r.cloneShallow(),i,t,e)}),t}function MIe(e){var t=Dl(this).mainData;return e==null||t==null?t:Dl(t).datas[e]}function TIe(){var e=Dl(this).mainData;return e==null?[{data:e}]:qe(mr(Dl(e).datas),function(t){return{type:t,data:Dl(e).datas[t]}})}function PIe(e){return Dl(e).mainData===e}function Xhe(e,t,r){Dl(e).datas={},q(t,function(i,n){oV(i,n,e,r)})}function oV(e,t,r,i){Dl(r).datas[t]=e,Dl(e).mainData=r,e.dataType=t,i.struct&&(e[i.structAttr]=i.struct,i.struct[i.datasAttr[t]]=e),e.getLinkedData=MIe,e.getLinkedDataAll=TIe}var DIe=function(){function e(t,r){this.depth=0,this.height=0,this.dataIndex=-1,this.children=[],this.viewChildren=[],this.isExpand=!1,this.name=t||"",this.hostTree=r}return e.prototype.isRemoved=function(){return this.dataIndex<0},e.prototype.eachNode=function(t,r,i){xt(t)&&(i=r,r=t,t=null),t=t||{},it(t)&&(t={order:t});var n=t.order||"preorder",a=this[t.attr||"children"],o;n==="preorder"&&(o=r.call(i,this));for(var s=0;!o&&s<a.length;s++)a[s].eachNode(t,r,i);n==="postorder"&&r.call(i,this)},e.prototype.updateDepthAndHeight=function(t){var r=0;this.depth=t;for(var i=0;i<this.children.length;i++){var n=this.children[i];n.updateDepthAndHeight(t+1),n.height>r&&(r=n.height)}this.height=r+1},e.prototype.getNodeById=function(t){if(this.getId()===t)return this;for(var r=0,i=this.children,n=i.length;r<n;r++){var a=i[r].getNodeById(t);if(a)return a}},e.prototype.contains=function(t){if(t===this)return!0;for(var r=0,i=this.children,n=i.length;r<n;r++){var a=i[r].contains(t);if(a)return a}},e.prototype.getAncestors=function(t){for(var r=[],i=t?this:this.parentNode;i;)r.push(i),i=i.parentNode;return r.reverse(),r},e.prototype.getAncestorsIndices=function(){for(var t=[],r=this;r;)t.push(r.dataIndex),r=r.parentNode;return t.reverse(),t},e.prototype.getDescendantIndices=function(){var t=[];return this.eachNode(function(r){t.push(r.dataIndex)}),t},e.prototype.getValue=function(t){var r=this.hostTree.data;return r.getStore().get(r.getDimensionIndex(t||"value"),this.dataIndex)},e.prototype.setLayout=function(t,r){this.dataIndex>=0&&this.hostTree.data.setItemLayout(this.dataIndex,t,r)},e.prototype.getLayout=function(){return this.hostTree.data.getItemLayout(this.dataIndex)},e.prototype.getModel=function(t){if(!(this.dataIndex<0)){var r=this.hostTree,i=r.data.getItemModel(this.dataIndex);return i.getModel(t)}},e.prototype.getLevelModel=function(){return(this.hostTree.levelModels||[])[this.depth]},e.prototype.setVisual=function(t,r){this.dataIndex>=0&&this.hostTree.data.setItemVisual(this.dataIndex,t,r)},e.prototype.getVisual=function(t){return this.hostTree.data.getItemVisual(this.dataIndex,t)},e.prototype.getRawIndex=function(){return this.hostTree.data.getRawIndex(this.dataIndex)},e.prototype.getId=function(){return this.hostTree.data.getId(this.dataIndex)},e.prototype.getChildIndex=function(){if(this.parentNode){for(var t=this.parentNode.children,r=0;r<t.length;++r)if(t[r]===this)return r;return-1}return-1},e.prototype.isAncestorOf=function(t){for(var r=t.parentNode;r;){if(r===this)return!0;r=r.parentNode}return!1},e.prototype.isDescendantOf=function(t){return t!==this&&t.isAncestorOf(this)},e}(),sV=function(){function e(t){this.type="tree",this._nodes=[],this.hostModel=t}return e.prototype.eachNode=function(t,r,i){this.root.eachNode(t,r,i)},e.prototype.getNodeByDataIndex=function(t){var r=this.data.getRawIndex(t);return this._nodes[r]},e.prototype.getNodeById=function(t){return this.root.getNodeById(t)},e.prototype.update=function(){for(var t=this.data,r=this._nodes,i=0,n=r.length;i<n;i++)r[i].dataIndex=-1;for(var i=0,n=t.count();i<n;i++)r[t.getRawIndex(i)].dataIndex=i},e.prototype.clearLayouts=function(){this.data.clearItemLayouts()},e.createTree=function(t,r,i){var n=new e(r),a=[],o=1;s(t);function s(c,h){var d=c.value;o=Math.max(o,Ue(d)?d.length:1),a.push(c);var f=new DIe(Rn(c.name,""),n);h?IIe(f,h):n.root=f,n._nodes.push(f);var p=c.children;if(p)for(var v=0;v<p.length;v++)s(p[v],f)}n.root.updateDepthAndHeight(0);var l=g4(a,{coordDimensions:["value"],dimensionsCount:o}).dimensions,u=new Wo(l,r);return u.initData(a),i&&i(u),Yhe({mainData:u,struct:n,structAttr:"tree"}),n.update(),n},e}();function IIe(e,t){var r=t.children;e.parentNode!==t&&(r.push(e),e.parentNode=t)}function dw(e,t,r){if(e&&tr(t,e.type)>=0){var i=r.getData().tree.root,n=e.targetNode;if(it(n)&&(n=i.getNodeById(n)),n&&i.contains(n))return{node:n};var a=e.targetNodeId;if(a!=null&&(n=i.getNodeById(a)))return{node:n}}}function Zhe(e){for(var t=[];e;)e=e.parentNode,e&&t.push(e);return t.reverse()}function lV(e,t){var r=Zhe(e);return tr(r,t)>=0}function UC(e,t){for(var r=[];e;){var i=e.dataIndex;r.push({name:e.name,dataIndex:i,value:t.getRawValue(i)}),e=e.parentNode}return r.reverse(),r}var LIe=function(e){_e(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.hasSymbolVisual=!0,r.ignoreStyleOnData=!0,r}return t.prototype.getInitialData=function(r){var i={name:r.name,children:r.data},n=r.leaves||{},a=new Qr(n,this,this.ecModel),o=sV.createTree(i,this,s);function s(h){h.wrapMethod("getItemModel",function(d,f){var p=o.getNodeByDataIndex(f);return p&&p.children.length&&p.isExpand||(d.parentModel=a),d})}var l=0;o.eachNode("preorder",function(h){h.depth>l&&(l=h.depth)});var u=r.expandAndCollapse,c=u&&r.initialTreeDepth>=0?r.initialTreeDepth:l;return o.root.eachNode("preorder",function(h){var d=h.hostTree.data.getRawDataItem(h.dataIndex);h.isExpand=d&&d.collapsed!=null?!d.collapsed:h.depth<=c}),o.data},t.prototype.getOrient=function(){var r=this.get("orient");return r==="horizontal"?r="LR":r==="vertical"&&(r="TB"),r},t.prototype.setZoom=function(r){this.option.zoom=r},t.prototype.setCenter=function(r){this.option.center=r},t.prototype.formatTooltip=function(r,i,n){for(var a=this.getData().tree,o=a.root.children[0],s=a.getNodeByDataIndex(r),l=s.getValue(),u=s.name;s&&s!==o;)u=s.parentNode.name+"."+u,s=s.parentNode;return na("nameValue",{name:u,value:l,noValue:isNaN(l)||l==null})},t.prototype.getDataParams=function(r){var i=e.prototype.getDataParams.apply(this,arguments),n=this.getData().tree.getNodeByDataIndex(r);return i.treeAncestors=UC(n,this),i.collapsed=!n.isExpand,i},t.type="series.tree",t.layoutMode="box",t.defaultOption={z:2,coordinateSystem:"view",left:"12%",top:"12%",right:"12%",bottom:"12%",layout:"orthogonal",edgeShape:"curve",edgeForkPosition:"50%",roam:!1,nodeScaleRatio:.4,center:null,zoom:1,orient:"LR",symbol:"emptyCircle",symbolSize:7,expandAndCollapse:!0,initialTreeDepth:2,lineStyle:{color:"#ccc",width:1.5,curveness:.5},itemStyle:{color:"lightsteelblue",borderWidth:1.5},label:{show:!0},animationEasing:"linear",animationDuration:700,animationDurationUpdate:500},t}(Di);function kIe(e,t,r){for(var i=[e],n=[],a;a=i.pop();)if(n.push(a),a.isExpand){var o=a.children;if(o.length)for(var s=0;s<o.length;s++)i.push(o[s])}for(;a=n.pop();)t(a,r)}function R2(e,t){for(var r=[e],i;i=r.pop();)if(t(i),i.isExpand){var n=i.children;if(n.length)for(var a=n.length-1;a>=0;a--)r.push(n[a])}}function RIe(e,t){e.eachSeriesByType("tree",function(r){OIe(r,t)})}function OIe(e,t){var r=pIe(e,t);e.layoutInfo=r;var i=e.get("layout"),n=0,a=0,o=null;i==="radial"?(n=2*Math.PI,a=Math.min(r.height,r.width)/2,o=iY(function(x,b){return(x.parentNode===b.parentNode?1:2)/x.depth})):(n=r.width,a=r.height,o=iY());var s=e.getData().tree.root,l=s.children[0];if(l){hIe(s),kIe(l,dIe,o),s.hierNode.modifier=-l.hierNode.prelim,R2(l,fIe);var u=l,c=l,h=l;R2(l,function(x){var b=x.getLayout().x;b<u.getLayout().x&&(u=x),b>c.getLayout().x&&(c=x),x.depth>h.depth&&(h=x)});var d=u===c?1:o(u,c)/2,f=d-u.getLayout().x,p=0,v=0,m=0,g=0;if(i==="radial")p=n/(c.getLayout().x+d+f),v=a/(h.depth-1||1),R2(l,function(x){m=(x.getLayout().x+f)*p,g=(x.depth-1)*v;var b=Bx(m,g);x.setLayout({x:b.x,y:b.y,rawX:m,rawY:g},!0)});else{var y=e.getOrient();y==="RL"||y==="LR"?(v=a/(c.getLayout().x+d+f),p=n/(h.depth-1||1),R2(l,function(x){g=(x.getLayout().x+f)*v,m=y==="LR"?(x.depth-1)*p:n-(x.depth-1)*p,x.setLayout({x:m,y:g},!0)})):(y==="TB"||y==="BT")&&(p=n/(c.getLayout().x+d+f),v=a/(h.depth-1||1),R2(l,function(x){m=(x.getLayout().x+f)*p,g=y==="TB"?(x.depth-1)*v:a-(x.depth-1)*v,x.setLayout({x:m,y:g},!0)}))}}}function BIe(e){e.eachSeriesByType("tree",function(t){var r=t.getData(),i=r.tree;i.eachNode(function(n){var a=n.getModel(),o=a.getModel("itemStyle").getItemStyle(),s=r.ensureUniqueItemVisual(n.dataIndex,"style");Be(s,o)})})}function NIe(e){e.registerAction({type:"treeExpandAndCollapse",event:"treeExpandAndCollapse",update:"update"},function(t,r){r.eachComponent({mainType:"series",subType:"tree",query:t},function(i){var n=t.dataIndex,a=i.getData().tree,o=a.getNodeByDataIndex(n);o.isExpand=!o.isExpand})}),e.registerAction({type:"treeRoam",event:"treeRoam",update:"none"},function(t,r,i){r.eachComponent({mainType:"series",subType:"tree",query:t},function(n){var a=n.coordinateSystem,o=aV(a,t,void 0,i);n.setCenter&&n.setCenter(o.center),n.setZoom&&n.setZoom(o.zoom)})})}function VIe(e){e.registerChartView(_Ie),e.registerSeriesModel(LIe),e.registerLayout(RIe),e.registerVisual(BIe),NIe(e)}var lY=["treemapZoomToNode","treemapRender","treemapMove"];function FIe(e){for(var t=0;t<lY.length;t++)e.registerAction({type:lY[t],update:"updateView"},pn);e.registerAction({type:"treemapRootToNode",update:"updateView"},function(r,i){i.eachComponent({mainType:"series",subType:"treemap",query:r},n);function n(a,o){var s=["treemapZoomToNode","treemapRootToNode"],l=dw(r,s,a);if(l){var u=a.getViewRoot();u&&(r.direction=lV(u,l.node)?"rollUp":"drillDown"),a.resetViewRoot(l.node)}}})}function Qhe(e){var t=e.getData(),r=t.tree,i={};r.eachNode(function(n){for(var a=n;a&&a.depth>1;)a=a.parentNode;var o=xL(e.ecModel,a.name||a.dataIndex+"",i);n.setVisual("decal",o)})}var zIe=function(e){_e(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r.preventUsingHoverLayer=!0,r}return t.prototype.getInitialData=function(r,i){var n={name:r.name,children:r.data};Khe(n);var a=r.levels||[],o=this.designatedVisualItemStyle={},s=new Qr({itemStyle:o},this,i);a=r.levels=HIe(a,i);var l=qe(a||[],function(h){return new Qr(h,s,i)},this),u=sV.createTree(n,this,c);function c(h){h.wrapMethod("getItemModel",function(d,f){var p=u.getNodeByDataIndex(f),v=p?l[p.depth]:null;return d.parentModel=v||s,d})}return u.data},t.prototype.optionUpdated=function(){this.resetViewRoot()},t.prototype.formatTooltip=function(r,i,n){var a=this.getData(),o=this.getRawValue(r),s=a.getName(r);return na("nameValue",{name:s,value:o})},t.prototype.getDataParams=function(r){var i=e.prototype.getDataParams.apply(this,arguments),n=this.getData().tree.getNodeByDataIndex(r);return i.treeAncestors=UC(n,this),i.treePathInfo=i.treeAncestors,i},t.prototype.setLayoutInfo=function(r){this.layoutInfo=this.layoutInfo||{},Be(this.layoutInfo,r)},t.prototype.mapIdToIndex=function(r){var i=this._idIndexMap;i||(i=this._idIndexMap=dt(),this._idIndexMapCount=0);var n=i.get(r);return n==null&&i.set(r,n=this._idIndexMapCount++),n},t.prototype.getViewRoot=function(){return this._viewRoot},t.prototype.resetViewRoot=function(r){r?this._viewRoot=r:r=this._viewRoot;var i=this.getRawData().tree.root;(!r||r!==i&&!i.contains(r))&&(this._viewRoot=i)},t.prototype.enableAriaDecal=function(){Qhe(this)},t.type="series.treemap",t.layoutMode="box",t.defaultOption={progressive:0,left:"center",top:"middle",width:"80%",height:"80%",sort:!0,clipWindow:"origin",squareRatio:.5*(1+Math.sqrt(5)),leafDepth:null,drillDownIcon:"▶",zoomToNodeRatio:.32*.32,scaleLimit:null,roam:!0,nodeClick:"zoomToNode",animation:!0,animationDurationUpdate:900,animationEasing:"quinticInOut",breadcrumb:{show:!0,height:22,left:"center",top:"bottom",emptyItemWidth:25,itemStyle:{color:"rgba(0,0,0,0.7)",textStyle:{color:"#fff"}},emphasis:{itemStyle:{color:"rgba(0,0,0,0.9)"}}},label:{show:!0,distance:0,padding:5,position:"inside",color:"#fff",overflow:"truncate"},upperLabel:{show:!1,position:[0,"50%"],height:20,overflow:"truncate",verticalAlign:"middle"},itemStyle:{color:null,colorAlpha:null,colorSaturation:null,borderWidth:0,gapWidth:0,borderColor:"#fff",borderColorSaturation:null},emphasis:{upperLabel:{show:!0,position:[0,"50%"],overflow:"truncate",verticalAlign:"middle"}},visualDimension:0,visualMin:null,visualMax:null,color:[],colorAlpha:null,colorSaturation:null,colorMappingBy:"index",visibleMin:10,childrenVisibleMin:null,levels:[]},t}(Di);function Khe(e){var t=0;q(e.children,function(i){Khe(i);var n=i.value;Ue(n)&&(n=n[0]),t+=n});var r=e.value;Ue(r)&&(r=r[0]),(r==null||isNaN(r))&&(r=t),r<0&&(r=0),Ue(e.value)?e.value[0]=r:e.value=r}function HIe(e,t){var r=ci(t.get("color")),i=ci(t.get(["aria","decal","decals"]));if(r){e=e||[];var n,a;q(e,function(s){var l=new Qr(s),u=l.get("color"),c=l.get("decal");(l.get(["itemStyle","color"])||u&&u!=="none")&&(n=!0),(l.get(["itemStyle","decal"])||c&&c!=="none")&&(a=!0)});var o=e[0]||(e[0]={});return n||(o.color=r.slice()),!a&&i&&(o.decal=i.slice()),e}}var UIe=8,uY=8,GM=5,GIe=function(){function e(t){this.group=new Ct,t.add(this.group)}return e.prototype.render=function(t,r,i,n){var a=t.getModel("breadcrumb"),o=this.group;if(o.removeAll(),!(!a.get("show")||!i)){var s=a.getModel("itemStyle"),l=a.getModel("emphasis"),u=s.getModel("textStyle"),c=l.getModel(["itemStyle","textStyle"]),h={pos:{left:a.get("left"),right:a.get("right"),top:a.get("top"),bottom:a.get("bottom")},box:{width:r.getWidth(),height:r.getHeight()},emptyItemWidth:a.get("emptyItemWidth"),totalWidth:0,renderList:[]};this._prepare(i,h,u),this._renderContent(t,h,s,l,u,c,n),PC(o,h.pos,h.box)}},e.prototype._prepare=function(t,r,i){for(var n=t;n;n=n.parentNode){var a=Rn(n.getModel().get("name"),""),o=i.getTextRect(a),s=Math.max(o.width+UIe*2,r.emptyItemWidth);r.totalWidth+=s+uY,r.renderList.push({node:n,text:a,width:s})}},e.prototype._renderContent=function(t,r,i,n,a,o,s){for(var l=0,u=r.emptyItemWidth,c=t.get(["breadcrumb","height"]),h=e7e(r.pos,r.box),d=r.totalWidth,f=r.renderList,p=n.getModel("itemStyle").getItemStyle(),v=f.length-1;v>=0;v--){var m=f[v],g=m.node,y=m.width,x=m.text;d>h.width&&(d-=y-u,y=u,x=null);var b=new Qo({shape:{points:jIe(l,0,y,c,v===f.length-1,v===0)},style:bt(i.getItemStyle(),{lineJoin:"bevel"}),textContent:new Dr({style:Ti(a,{text:x})}),textConfig:{position:"inside"},z2:Ay*1e4,onclick:kt(s,g)});b.disableLabelAnimation=!0,b.getTextContent().ensureState("emphasis").style=Ti(o,{text:x}),b.ensureState("emphasis").style=p,Ji(b,n.get("focus"),n.get("blurScope"),n.get("disabled")),this.group.add(b),WIe(b,t,g),l+=y+uY}},e.prototype.remove=function(){this.group.removeAll()},e}();function jIe(e,t,r,i,n,a){var o=[[n?e:e-GM,t],[e+r,t],[e+r,t+i],[n?e:e-GM,t+i]];return!a&&o.splice(2,0,[e+r+GM,t+i/2]),!n&&o.push([e,t+i/2]),o}function WIe(e,t,r){Dt(e).eventData={componentType:"series",componentSubType:"treemap",componentIndex:t.componentIndex,seriesIndex:t.seriesIndex,seriesName:t.name,seriesType:"treemap",selfType:"breadcrumb",nodeData:{dataIndex:r&&r.dataIndex,name:r&&r.name},treePathInfo:r&&UC(r,t)}}var qIe=function(){function e(){this._storage=[],this._elExistsMap={}}return e.prototype.add=function(t,r,i,n,a){return this._elExistsMap[t.id]?!1:(this._elExistsMap[t.id]=!0,this._storage.push({el:t,target:r,duration:i,delay:n,easing:a}),!0)},e.prototype.finished=function(t){return this._finishedCallback=t,this},e.prototype.start=function(){for(var t=this,r=this._storage.length,i=function(){r--,r<=0&&(t._storage.length=0,t._elExistsMap={},t._finishedCallback&&t._finishedCallback())},n=0,a=this._storage.length;n<a;n++){var o=this._storage[n];o.el.animateTo(o.target,{duration:o.duration,delay:o.delay,easing:o.easing,setToFinal:!0,done:i,aborted:i})}return this},e}();function YIe(){return new qIe}var qL=Ct,cY=Tr,hY=3,dY="label",fY="upperLabel",XIe=Ay*10,ZIe=Ay*2,QIe=Ay*3,S0=Rv([["fill","color"],["stroke","strokeColor"],["lineWidth","strokeWidth"],["shadowBlur"],["shadowOffsetX"],["shadowOffsetY"],["shadowColor"]]),pY=function(e){var t=S0(e);return t.stroke=t.fill=t.lineWidth=null,t},rS=Pr(),KIe=function(e){_e(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r._state="ready",r._storage=O2(),r}return t.prototype.render=function(r,i,n,a){var o=i.findComponents({mainType:"series",subType:"treemap",query:a});if(!(tr(o,r)<0)){this.seriesModel=r,this.api=n,this.ecModel=i;var s=["treemapZoomToNode","treemapRootToNode"],l=dw(a,s,r),u=a&&a.type,c=r.layoutInfo,h=!this._oldTree,d=this._storage,f=u==="treemapRootToNode"&&l&&d?{rootNodeGroup:d.nodeGroup[l.node.getRawIndex()],direction:a.direction}:null,p=this._giveContainerGroup(c),v=r.get("animation"),m=this._doRender(p,r,f);v&&!h&&(!u||u==="treemapZoomToNode"||u==="treemapRootToNode")?this._doAnimation(p,m,r,f):m.renderFinally(),this._resetController(n),this._renderBreadcrumb(r,n,l)}},t.prototype._giveContainerGroup=function(r){var i=this._containerGroup;return i||(i=this._containerGroup=new qL,this._initEvents(i),this.group.add(i)),i.x=r.x,i.y=r.y,i},t.prototype._doRender=function(r,i,n){var a=i.getData().tree,o=this._oldTree,s=O2(),l=O2(),u=this._storage,c=[];function h(y,x,b,_){return JIe(i,l,u,n,s,c,y,x,b,_)}v(a.root?[a.root]:[],o&&o.root?[o.root]:[],r,a===o||!o,0);var d=m(u);if(this._oldTree=a,this._storage=l,this._controllerHost){var f=this.seriesModel.layoutInfo,p=a.root.getLayout();p.width===f.width&&p.height===f.height&&(this._controllerHost.zoom=1)}return{lastsForAnimation:s,willDeleteEls:d,renderFinally:g};function v(y,x,b,_,w){_?(x=y,q(y,function(M,E){!M.isRemoved()&&A(E,E)})):new yd(x,y,S,S).add(A).update(A).remove(kt(A,null)).execute();function S(M){return M.getId()}function A(M,E){var T=M!=null?y[M]:null,L=E!=null?x[E]:null,P=h(T,L,b,w);P&&v(T&&T.viewChildren||[],L&&L.viewChildren||[],P,_,w+1)}}function m(y){var x=O2();return y&&q(y,function(b,_){var w=x[_];q(b,function(S){S&&(w.push(S),rS(S).willDelete=!0)})}),x}function g(){q(d,function(y){q(y,function(x){x.parent&&x.parent.remove(x)})}),q(c,function(y){y.invisible=!0,y.dirty()})}},t.prototype._doAnimation=function(r,i,n,a){var o=n.get("animationDurationUpdate"),s=n.get("animationEasing"),l=(xt(o)?0:o)||0,u=(xt(s)?null:s)||"cubicOut",c=YIe();q(i.willDeleteEls,function(h,d){q(h,function(f,p){if(!f.invisible){var v=f.parent,m,g=rS(v);if(a&&a.direction==="drillDown")m=v===a.rootNodeGroup?{shape:{x:0,y:0,width:g.nodeWidth,height:g.nodeHeight},style:{opacity:0}}:{style:{opacity:0}};else{var y=0,x=0;g.willDelete||(y=g.nodeWidth/2,x=g.nodeHeight/2),m=d==="nodeGroup"?{x:y,y:x,style:{opacity:0}}:{shape:{x:y,y:x,width:0,height:0},style:{opacity:0}}}m&&c.add(f,m,l,0,u)}})}),q(this._storage,function(h,d){q(h,function(f,p){var v=i.lastsForAnimation[d][p],m={};v&&(f instanceof Ct?v.oldX!=null&&(m.x=f.x,m.y=f.y,f.x=v.oldX,f.y=v.oldY):(v.oldShape&&(m.shape=Be({},f.shape),f.setShape(v.oldShape)),v.fadein?(f.setStyle("opacity",0),m.style={opacity:1}):f.style.opacity!==1&&(m.style={opacity:1})),c.add(f,m,l,0,u))})},this),this._state="animating",c.finished(at(function(){this._state="ready",i.renderFinally()},this)).start()},t.prototype._resetController=function(r){var i=this._controller,n=this._controllerHost;n||(this._controllerHost={target:this.group},n=this._controllerHost),i||(i=this._controller=new C4(r.getZr()),i.enable(this.seriesModel.get("roam")),n.zoomLimit=this.seriesModel.get("scaleLimit"),n.zoom=this.seriesModel.get("zoom"),i.on("pan",at(this._onPan,this)),i.on("zoom",at(this._onZoom,this)));var a=new qt(0,0,r.getWidth(),r.getHeight());i.setPointerChecker(function(o,s,l){return a.contain(s,l)})},t.prototype._clearController=function(){var r=this._controller;this._controllerHost=null,r&&(r.dispose(),r=null)},t.prototype._onPan=function(r){if(this._state!=="animating"&&(Math.abs(r.dx)>hY||Math.abs(r.dy)>hY)){var i=this.seriesModel.getData().tree.root;if(!i)return;var n=i.getLayout();if(!n)return;this.api.dispatchAction({type:"treemapMove",from:this.uid,seriesId:this.seriesModel.id,rootRect:{x:n.x+r.dx,y:n.y+r.dy,width:n.width,height:n.height}})}},t.prototype._onZoom=function(r){var i=r.originX,n=r.originY,a=r.scale;if(this._state!=="animating"){var o=this.seriesModel.getData().tree.root;if(!o)return;var s=o.getLayout();if(!s)return;var l=new qt(s.x,s.y,s.width,s.height),u=null,c=this._controllerHost;u=c.zoomLimit;var h=c.zoom=c.zoom||1;if(h*=a,u){var d=u.min||0,f=u.max||1/0;h=Math.max(Math.min(f,h),d)}var p=h/c.zoom;c.zoom=h;var v=this.seriesModel.layoutInfo;i-=v.x,n-=v.y;var m=js();Qc(m,m,[-i,-n]),KB(m,m,[p,p]),Qc(m,m,[i,n]),l.applyTransform(m),this.api.dispatchAction({type:"treemapRender",from:this.uid,seriesId:this.seriesModel.id,rootRect:{x:l.x,y:l.y,width:l.width,height:l.height}})}},t.prototype._initEvents=function(r){var i=this;r.on("click",function(n){if(i._state==="ready"){var a=i.seriesModel.get("nodeClick",!0);if(a){var o=i.findTarget(n.offsetX,n.offsetY);if(o){var s=o.node;if(s.getLayout().isLeafRoot)i._rootToNode(o);else if(a==="zoomToNode")i._zoomToNode(o);else if(a==="link"){var l=s.hostTree.data.getItemModel(s.dataIndex),u=l.get("link",!0),c=l.get("target",!0)||"blank";u&&z8(u,c)}}}}},this)},t.prototype._renderBreadcrumb=function(r,i,n){var a=this;n||(n=r.get("leafDepth",!0)!=null?{node:r.getViewRoot()}:this.findTarget(i.getWidth()/2,i.getHeight()/2),n||(n={node:r.getData().tree.root})),(this._breadcrumb||(this._breadcrumb=new GIe(this.group))).render(r,i,n.node,function(o){a._state!=="animating"&&(lV(r.getViewRoot(),o)?a._rootToNode({node:o}):a._zoomToNode({node:o}))})},t.prototype.remove=function(){this._clearController(),this._containerGroup&&this._containerGroup.removeAll(),this._storage=O2(),this._state="ready",this._breadcrumb&&this._breadcrumb.remove()},t.prototype.dispose=function(){this._clearController()},t.prototype._zoomToNode=function(r){this.api.dispatchAction({type:"treemapZoomToNode",from:this.uid,seriesId:this.seriesModel.id,targetNode:r.node})},t.prototype._rootToNode=function(r){this.api.dispatchAction({type:"treemapRootToNode",from:this.uid,seriesId:this.seriesModel.id,targetNode:r.node})},t.prototype.findTarget=function(r,i){var n,a=this.seriesModel.getViewRoot();return a.eachNode({attr:"viewChildren",order:"preorder"},function(o){var s=this._storage.background[o.getRawIndex()];if(s){var l=s.transformCoordToLocal(r,i),u=s.shape;if(u.x<=l[0]&&l[0]<=u.x+u.width&&u.y<=l[1]&&l[1]<=u.y+u.height)n={node:o,offsetX:l[0],offsetY:l[1]};else return!1}},this),n},t.type="treemap",t}(yi);function O2(){return{nodeGroup:[],background:[],content:[]}}function JIe(e,t,r,i,n,a,o,s,l,u){if(!o)return;var c=o.getLayout(),h=e.getData(),d=o.getModel();if(h.setItemGraphicEl(o.dataIndex,null),!c||!c.isInView)return;var f=c.width,p=c.height,v=c.borderWidth,m=c.invisible,g=o.getRawIndex(),y=s&&s.getRawIndex(),x=o.viewChildren,b=c.upperHeight,_=x&&x.length,w=d.getModel("itemStyle"),S=d.getModel(["emphasis","itemStyle"]),A=d.getModel(["blur","itemStyle"]),M=d.getModel(["select","itemStyle"]),E=w.get("borderRadius")||0,T=Y("nodeGroup",qL);if(!T)return;if(l.add(T),T.x=c.x||0,T.y=c.y||0,T.markRedraw(),rS(T).nodeWidth=f,rS(T).nodeHeight=p,c.isAboveViewRoot)return T;var L=Y("background",cY,u,ZIe);L&&H(T,L,_&&c.upperLabelHeight);var P=d.getModel("emphasis"),C=P.get("focus"),D=P.get("blurScope"),I=P.get("disabled"),O=C==="ancestor"?o.getAncestorsIndices():C==="descendant"?o.getDescendantIndices():C;if(_)$b(T)&&j0(T,!1),L&&(j0(L,!I),h.setItemGraphicEl(o.dataIndex,L),hL(L,O,D));else{var R=Y("content",cY,u,QIe);R&&j(T,R),L.disableMorphing=!0,L&&$b(L)&&j0(L,!1),j0(T,!I),h.setItemGraphicEl(o.dataIndex,T),hL(T,O,D)}return T;function H(ne,re,ae){var he=Dt(re);if(he.dataIndex=o.dataIndex,he.seriesIndex=e.seriesIndex,re.setShape({x:0,y:0,width:f,height:p,r:E}),m)N(re);else{re.invisible=!1;var se=o.getVisual("style"),fe=se.stroke,J=pY(w);J.fill=fe;var te=S0(S);te.fill=S.get("borderColor");var le=S0(A);le.fill=A.get("borderColor");var Ae=S0(M);if(Ae.fill=M.get("borderColor"),ae){var xe=f-2*v;k(re,fe,se.opacity,{x:v,y:0,width:xe,height:b})}else re.removeTextContent();re.setStyle(J),re.ensureState("emphasis").style=te,re.ensureState("blur").style=le,re.ensureState("select").style=Ae,Ov(re)}ne.add(re)}function j(ne,re){var ae=Dt(re);ae.dataIndex=o.dataIndex,ae.seriesIndex=e.seriesIndex;var he=Math.max(f-2*v,0),se=Math.max(p-2*v,0);if(re.culling=!0,re.setShape({x:v,y:v,width:he,height:se,r:E}),m)N(re);else{re.invisible=!1;var fe=o.getVisual("style"),J=fe.fill,te=pY(w);te.fill=J,te.decal=fe.decal;var le=S0(S),Ae=S0(A),xe=S0(M);k(re,J,fe.opacity,null),re.setStyle(te),re.ensureState("emphasis").style=le,re.ensureState("blur").style=Ae,re.ensureState("select").style=xe,Ov(re)}ne.add(re)}function N(ne){!ne.invisible&&a.push(ne)}function k(ne,re,ae,he){var se=d.getModel(he?fY:dY),fe=Rn(d.get("name"),null),J=se.getShallow("show");Xa(ne,ia(d,he?fY:dY),{defaultText:J?fe:null,inheritColor:re,defaultOpacity:ae,labelFetcher:e,labelDataIndex:o.dataIndex});var te=ne.getTextContent();if(te){var le=te.style,Ae=XB(le.padding||0);he&&(ne.setTextConfig({layoutRect:he}),te.disableLabelLayout=!0),te.beforeUpdate=function(){var ye=Math.max((he?he.width:ne.shape.width)-Ae[1]-Ae[3],0),Se=Math.max((he?he.height:ne.shape.height)-Ae[0]-Ae[2],0);(le.width!==ye||le.height!==Se)&&te.setStyle({width:ye,height:Se})},le.truncateMinChar=2,le.lineOverflow="truncate",G(le,he,c);var xe=te.getState("emphasis");G(xe?xe.style:null,he,c)}}function G(ne,re,ae){var he=ne?ne.text:null;if(!re&&ae.isLeafRoot&&he!=null){var se=e.get("drillDownIcon",!0);ne.text=se?se+" "+he:he}}function Y(ne,re,ae,he){var se=y!=null&&r[ne][y],fe=n[ne];return se?(r[ne][y]=null,F(fe,se)):m||(se=new re,se instanceof Rl&&(se.z2=$Ie(ae,he)),Z(fe,se)),t[ne][g]=se}function F(ne,re){var ae=ne[g]={};re instanceof qL?(ae.oldX=re.x,ae.oldY=re.y):ae.oldShape=Be({},re.shape)}function Z(ne,re){var ae=ne[g]={},he=o.parentNode,se=re instanceof Ct;if(he&&(!i||i.direction==="drillDown")){var fe=0,J=0,te=n.background[he.getRawIndex()];!i&&te&&te.oldShape&&(fe=te.oldShape.width,J=te.oldShape.height),se?(ae.oldX=0,ae.oldY=J):ae.oldShape={x:fe,y:J,width:0,height:0}}ae.fadein=!se}}function $Ie(e,t){return e*XIe+t}var fw=q,eLe=_t,iS=-1,ra=function(){function e(t){var r=t.mappingMethod,i=t.type,n=this.option=At(t);this.type=i,this.mappingMethod=r,this._normalizeData=iLe[r];var a=e.visualHandlers[i];this.applyVisual=a.applyVisual,this.getColorMapper=a.getColorMapper,this._normalizedToVisual=a._normalizedToVisual[r],r==="piecewise"?(jM(n),tLe(n)):r==="category"?n.categories?rLe(n):jM(n,!0):(Yo(r!=="linear"||n.dataExtent),jM(n))}return e.prototype.mapValueToVisual=function(t){var r=this._normalizeData(t);return this._normalizedToVisual(r,t)},e.prototype.getNormalizer=function(){return at(this._normalizeData,this)},e.listVisualTypes=function(){return mr(e.visualHandlers)},e.isValidType=function(t){return e.visualHandlers.hasOwnProperty(t)},e.eachVisual=function(t,r,i){_t(t)?q(t,r,i):r.call(i,t)},e.mapVisual=function(t,r,i){var n,a=Ue(t)?[]:_t(t)?{}:(n=!0,null);return e.eachVisual(t,function(o,s){var l=r.call(i,o,s);n?a=l:a[s]=l}),a},e.retrieveVisuals=function(t){var r={},i;return t&&fw(e.visualHandlers,function(n,a){t.hasOwnProperty(a)&&(r[a]=t[a],i=!0)}),i?r:null},e.prepareVisualTypes=function(t){if(Ue(t))t=t.slice();else if(eLe(t)){var r=[];fw(t,function(i,n){r.push(n)}),t=r}else return[];return t.sort(function(i,n){return n==="color"&&i!=="color"&&i.indexOf("color")===0?1:-1}),t},e.dependsOn=function(t,r){return r==="color"?!!(t&&t.indexOf(r)===0):t===r},e.findPieceIndex=function(t,r,i){for(var n,a=1/0,o=0,s=r.length;o<s;o++){var l=r[o].value;if(l!=null){if(l===t||it(l)&&l===t+"")return o;i&&d(l,o)}}for(var o=0,s=r.length;o<s;o++){var u=r[o],c=u.interval,h=u.close;if(c){if(c[0]===-1/0){if(t_(h[1],t,c[1]))return o}else if(c[1]===1/0){if(t_(h[0],c[0],t))return o}else if(t_(h[0],c[0],t)&&t_(h[1],t,c[1]))return o;i&&d(c[0],o),i&&d(c[1],o)}}if(i)return t===1/0?r.length-1:t===-1/0?0:n;function d(f,p){var v=Math.abs(f-t);v<a&&(a=v,n=p)}},e.visualHandlers={color:{applyVisual:B2("color"),getColorMapper:function(){var t=this.option;return at(t.mappingMethod==="category"?function(r,i){return!i&&(r=this._normalizeData(r)),Nx.call(this,r)}:function(r,i,n){var a=!!n;return!i&&(r=this._normalizeData(r)),n=SE(r,t.parsedVisual,n),a?n:sd(n,"rgba")},this)},_normalizedToVisual:{linear:function(t){return sd(SE(t,this.option.parsedVisual),"rgba")},category:Nx,piecewise:function(t,r){var i=XL.call(this,r);return i==null&&(i=sd(SE(t,this.option.parsedVisual),"rgba")),i},fixed:C0}},colorHue:e_(function(t,r){return ab(t,r)}),colorSaturation:e_(function(t,r){return ab(t,null,r)}),colorLightness:e_(function(t,r){return ab(t,null,null,r)}),colorAlpha:e_(function(t,r){return T8(t,r)}),decal:{applyVisual:B2("decal"),_normalizedToVisual:{linear:null,category:Nx,piecewise:null,fixed:null}},opacity:{applyVisual:B2("opacity"),_normalizedToVisual:YL([0,1])},liftZ:{applyVisual:B2("liftZ"),_normalizedToVisual:{linear:C0,category:C0,piecewise:C0,fixed:C0}},symbol:{applyVisual:function(t,r,i){var n=this.mapValueToVisual(t);i("symbol",n)},_normalizedToVisual:{linear:vY,category:Nx,piecewise:function(t,r){var i=XL.call(this,r);return i==null&&(i=vY.call(this,t)),i},fixed:C0}},symbolSize:{applyVisual:B2("symbolSize"),_normalizedToVisual:YL([0,1])}},e}();function tLe(e){var t=e.pieceList;e.hasSpecialVisual=!1,q(t,function(r,i){r.originIndex=i,r.visual!=null&&(e.hasSpecialVisual=!0)})}function rLe(e){var t=e.categories,r=e.categoryMap={},i=e.visual;if(fw(t,function(o,s){r[o]=s}),!Ue(i)){var n=[];_t(i)?fw(i,function(o,s){var l=r[s];n[l??iS]=o}):n[iS]=i,i=Jhe(e,n)}for(var a=t.length-1;a>=0;a--)i[a]==null&&(delete r[t[a]],t.pop())}function jM(e,t){var r=e.visual,i=[];_t(r)?fw(r,function(a){i.push(a)}):r!=null&&i.push(r);var n={color:1,symbol:1};!t&&i.length===1&&!n.hasOwnProperty(e.type)&&(i[1]=i[0]),Jhe(e,i)}function e_(e){return{applyVisual:function(t,r,i){var n=this.mapValueToVisual(t);i("color",e(r("color"),n))},_normalizedToVisual:YL([0,1])}}function vY(e){var t=this.option.visual;return t[Math.round(ti(e,[0,1],[0,t.length-1],!0))]||{}}function B2(e){return function(t,r,i){i(e,this.mapValueToVisual(t))}}function Nx(e){var t=this.option.visual;return t[this.option.loop&&e!==iS?e%t.length:e]}function C0(){return this.option.visual[0]}function YL(e){return{linear:function(t){return ti(t,e,this.option.visual,!0)},category:Nx,piecewise:function(t,r){var i=XL.call(this,r);return i==null&&(i=ti(t,e,this.option.visual,!0)),i},fixed:C0}}function XL(e){var t=this.option,r=t.pieceList;if(t.hasSpecialVisual){var i=ra.findPieceIndex(e,r),n=r[i];if(n&&n.visual)return n.visual[this.type]}}function Jhe(e,t){return e.visual=t,e.type==="color"&&(e.parsedVisual=qe(t,function(r){var i=Ws(r);return i||[0,0,0,1]})),t}var iLe={linear:function(e){return ti(e,this.option.dataExtent,[0,1],!0)},piecewise:function(e){var t=this.option.pieceList,r=ra.findPieceIndex(e,t,!0);if(r!=null)return ti(r,[0,t.length-1],[0,1],!0)},category:function(e){var t=this.option.categories?this.option.categoryMap[e]:e;return t??iS},fixed:pn};function t_(e,t,r){return e?t<=r:t<r}var nLe="itemStyle",$he=Pr();const aLe={seriesType:"treemap",reset:function(e){var t=e.getData().tree,r=t.root;r.isRemoved()||ede(r,{},e.getViewRoot().getAncestors(),e)}};function ede(e,t,r,i){var n=e.getModel(),a=e.getLayout(),o=e.hostTree.data;if(!(!a||a.invisible||!a.isInView)){var s=n.getModel(nLe),l=oLe(s,t,i),u=o.ensureUniqueItemVisual(e.dataIndex,"style"),c=s.get("borderColor"),h=s.get("borderColorSaturation"),d;h!=null&&(d=mY(l),c=sLe(h,d)),u.stroke=c;var f=e.viewChildren;if(!f||!f.length)d=mY(l),u.fill=d;else{var p=lLe(e,n,a,s,l,f);q(f,function(v,m){if(v.depth>=r.length||v===r[v.depth]){var g=uLe(n,l,v,m,p,i);ede(v,g,r,i)}})}}}function oLe(e,t,r){var i=Be({},t),n=r.designatedVisualItemStyle;return q(["color","colorAlpha","colorSaturation"],function(a){n[a]=t[a];var o=e.get(a);n[a]=null,o!=null&&(i[a]=o)}),i}function mY(e){var t=WM(e,"color");if(t){var r=WM(e,"colorAlpha"),i=WM(e,"colorSaturation");return i&&(t=ab(t,null,null,i)),r&&(t=T8(t,r)),t}}function sLe(e,t){return t!=null?ab(t,null,null,e):null}function WM(e,t){var r=e[t];if(r!=null&&r!=="none")return r}function lLe(e,t,r,i,n,a){if(!(!a||!a.length)){var o=qM(t,"color")||n.color!=null&&n.color!=="none"&&(qM(t,"colorAlpha")||qM(t,"colorSaturation"));if(o){var s=t.get("visualMin"),l=t.get("visualMax"),u=r.dataExtent.slice();s!=null&&s<u[0]&&(u[0]=s),l!=null&&l>u[1]&&(u[1]=l);var c=t.get("colorMappingBy"),h={type:o.name,dataExtent:u,visual:o.range};h.type==="color"&&(c==="index"||c==="id")?(h.mappingMethod="category",h.loop=!0):h.mappingMethod="linear";var d=new ra(h);return $he(d).drColorMappingBy=c,d}}}function qM(e,t){var r=e.get(t);return Ue(r)&&r.length?{name:t,range:r}:null}function uLe(e,t,r,i,n,a){var o=Be({},t);if(n){var s=n.type,l=s==="color"&&$he(n).drColorMappingBy,u=l==="index"?i:l==="id"?a.mapIdToIndex(r.getId()):r.getValue(e.get("visualDimension"));o[s]=n.mapValueToVisual(u)}return o}var pw=Math.max,nS=Math.min,gY=xa,uV=q,tde=["itemStyle","borderWidth"],cLe=["itemStyle","gapWidth"],hLe=["upperLabel","show"],dLe=["upperLabel","height"];const fLe={seriesType:"treemap",reset:function(e,t,r,i){var n=r.getWidth(),a=r.getHeight(),o=e.option,s=zn(e.getBoxLayoutParams(),{width:r.getWidth(),height:r.getHeight()}),l=o.size||[],u=et(gY(s.width,l[0]),n),c=et(gY(s.height,l[1]),a),h=i&&i.type,d=["treemapZoomToNode","treemapRootToNode"],f=dw(i,d,e),p=h==="treemapRender"||h==="treemapMove"?i.rootRect:null,v=e.getViewRoot(),m=Zhe(v);if(h!=="treemapMove"){var g=h==="treemapZoomToNode"?xLe(e,f,v,u,c):p?[p.width,p.height]:[u,c],y=o.sort;y&&y!=="asc"&&y!=="desc"&&(y="desc");var x={squareRatio:o.squareRatio,sort:y,leafDepth:o.leafDepth};v.hostTree.clearLayouts();var b={x:0,y:0,width:g[0],height:g[1],area:g[0]*g[1]};v.setLayout(b),rde(v,x,!1,0),b=v.getLayout(),uV(m,function(w,S){var A=(m[S+1]||v).getValue();w.setLayout(Be({dataExtent:[A,A],borderWidth:0,upperHeight:0},b))})}var _=e.getData().tree.root;_.setLayout(bLe(s,p,f),!0),e.setLayoutInfo(s),ide(_,new qt(-s.x,-s.y,n,a),m,v,0)}};function rde(e,t,r,i){var n,a;if(!e.isRemoved()){var o=e.getLayout();n=o.width,a=o.height;var s=e.getModel(),l=s.get(tde),u=s.get(cLe)/2,c=nde(s),h=Math.max(l,c),d=l-u,f=h-u;e.setLayout({borderWidth:l,upperHeight:h,upperLabelHeight:c},!0),n=pw(n-2*d,0),a=pw(a-d-f,0);var p=n*a,v=pLe(e,s,p,t,r,i);if(v.length){var m={x:d,y:f,width:n,height:a},g=nS(n,a),y=1/0,x=[];x.area=0;for(var b=0,_=v.length;b<_;){var w=v[b];x.push(w),x.area+=w.getLayout().area;var S=yLe(x,g,t.squareRatio);S<=y?(b++,y=S):(x.area-=x.pop().getLayout().area,yY(x,g,m,u,!1),g=nS(m.width,m.height),x.length=x.area=0,y=1/0)}if(x.length&&yY(x,g,m,u,!0),!r){var A=s.get("childrenVisibleMin");A!=null&&p<A&&(r=!0)}for(var b=0,_=v.length;b<_;b++)rde(v[b],t,r,i+1)}}}function pLe(e,t,r,i,n,a){var o=e.children||[],s=i.sort;s!=="asc"&&s!=="desc"&&(s=null);var l=i.leafDepth!=null&&i.leafDepth<=a;if(n&&!l)return e.viewChildren=[];o=ni(o,function(f){return!f.isRemoved()}),mLe(o,s);var u=gLe(t,o,s);if(u.sum===0)return e.viewChildren=[];if(u.sum=vLe(t,r,u.sum,s,o),u.sum===0)return e.viewChildren=[];for(var c=0,h=o.length;c<h;c++){var d=o[c].getValue()/u.sum*r;o[c].setLayout({area:d})}return l&&(o.length&&e.setLayout({isLeafRoot:!0},!0),o.length=0),e.viewChildren=o,e.setLayout({dataExtent:u.dataExtent},!0),o}function vLe(e,t,r,i,n){if(!i)return r;for(var a=e.get("visibleMin"),o=n.length,s=o,l=o-1;l>=0;l--){var u=n[i==="asc"?o-l-1:l].getValue();u/r*t<a&&(s=l,r-=u)}return i==="asc"?n.splice(0,o-s):n.splice(s,o-s),r}function mLe(e,t){return t&&e.sort(function(r,i){var n=t==="asc"?r.getValue()-i.getValue():i.getValue()-r.getValue();return n===0?t==="asc"?r.dataIndex-i.dataIndex:i.dataIndex-r.dataIndex:n}),e}function gLe(e,t,r){for(var i=0,n=0,a=t.length;n<a;n++)i+=t[n].getValue();var o=e.get("visualDimension"),s;return!t||!t.length?s=[NaN,NaN]:o==="value"&&r?(s=[t[t.length-1].getValue(),t[0].getValue()],r==="asc"&&s.reverse()):(s=[1/0,-1/0],uV(t,function(l){var u=l.getValue(o);u<s[0]&&(s[0]=u),u>s[1]&&(s[1]=u)})),{sum:i,dataExtent:s}}function yLe(e,t,r){for(var i=0,n=1/0,a=0,o=void 0,s=e.length;a<s;a++)o=e[a].getLayout().area,o&&(o<n&&(n=o),o>i&&(i=o));var l=e.area*e.area,u=t*t*r;return l?pw(u*i/l,l/(u*n)):1/0}function yY(e,t,r,i,n){var a=t===r.width?0:1,o=1-a,s=["x","y"],l=["width","height"],u=r[s[a]],c=t?e.area/t:0;(n||c>r[l[o]])&&(c=r[l[o]]);for(var h=0,d=e.length;h<d;h++){var f=e[h],p={},v=c?f.getLayout().area/c:0,m=p[l[o]]=pw(c-2*i,0),g=r[s[a]]+r[l[a]]-u,y=h===d-1||g<v?g:v,x=p[l[a]]=pw(y-2*i,0);p[s[o]]=r[s[o]]+nS(i,m/2),p[s[a]]=u+nS(i,x/2),u+=y,f.setLayout(p,!0)}r[s[o]]+=c,r[l[o]]-=c}function xLe(e,t,r,i,n){var a=(t||{}).node,o=[i,n];if(!a||a===r)return o;for(var s,l=i*n,u=l*e.option.zoomToNodeRatio;s=a.parentNode;){for(var c=0,h=s.children,d=0,f=h.length;d<f;d++)c+=h[d].getValue();var p=a.getValue();if(p===0)return o;u*=c/p;var v=s.getModel(),m=v.get(tde),g=Math.max(m,nde(v));u+=4*m*m+(3*m+g)*Math.pow(u,.5),u>IG&&(u=IG),a=s}u<l&&(u=l);var y=Math.pow(u/l,.5);return[i*y,n*y]}function bLe(e,t,r){if(t)return{x:t.x,y:t.y};var i={x:0,y:0};if(!r)return i;var n=r.node,a=n.getLayout();if(!a)return i;for(var o=[a.width/2,a.height/2],s=n;s;){var l=s.getLayout();o[0]+=l.x,o[1]+=l.y,s=s.parentNode}return{x:e.width/2-o[0],y:e.height/2-o[1]}}function ide(e,t,r,i,n){var a=e.getLayout(),o=r[n],s=o&&o===e;if(!(o&&!s||n===r.length&&e!==i)){e.setLayout({isInView:!0,invisible:!s&&!t.intersect(a),isAboveViewRoot:s},!0);var l=new qt(t.x-a.x,t.y-a.y,t.width,t.height);uV(e.viewChildren||[],function(u){ide(u,l,r,i,n+1)})}}function nde(e){return e.get(hLe)?e.get(dLe):0}function wLe(e){e.registerSeriesModel(zIe),e.registerChartView(KIe),e.registerVisual(aLe),e.registerLayout(fLe),FIe(e)}function _Le(e){var t=e.findComponents({mainType:"legend"});!t||!t.length||e.eachSeriesByType("graph",function(r){var i=r.getCategoriesData(),n=r.getGraph(),a=n.data,o=i.mapArray(i.getName);a.filterSelf(function(s){var l=a.getItemModel(s),u=l.getShallow("category");if(u!=null){kr(u)&&(u=o[u]);for(var c=0;c<t.length;c++)if(!t[c].isSelected(u))return!1}return!0})})}function ALe(e){var t={};e.eachSeriesByType("graph",function(r){var i=r.getCategoriesData(),n=r.getData(),a={};i.each(function(o){var s=i.getName(o);a["ec-"+s]=o;var l=i.getItemModel(o),u=l.getModel("itemStyle").getItemStyle();u.fill||(u.fill=r.getColorFromPalette(s,t)),i.setItemVisual(o,"style",u);for(var c=["symbol","symbolSize","symbolKeepAspect"],h=0;h<c.length;h++){var d=l.getShallow(c[h],!0);d!=null&&i.setItemVisual(o,c[h],d)}}),i.count()&&n.each(function(o){var s=n.getItemModel(o),l=s.getShallow("category");if(l!=null){it(l)&&(l=a["ec-"+l]);var u=i.getItemVisual(l,"style"),c=n.ensureUniqueItemVisual(o,"style");Be(c,u);for(var h=["symbol","symbolSize","symbolKeepAspect"],d=0;d<h.length;d++)n.setItemVisual(o,h[d],i.getItemVisual(l,h[d]))}})})}function r_(e){return e instanceof Array||(e=[e,e]),e}function SLe(e){e.eachSeriesByType("graph",function(t){var r=t.getGraph(),i=t.getEdgeData(),n=r_(t.get("edgeSymbol")),a=r_(t.get("edgeSymbolSize"));i.setVisual("fromSymbol",n&&n[0]),i.setVisual("toSymbol",n&&n[1]),i.setVisual("fromSymbolSize",a&&a[0]),i.setVisual("toSymbolSize",a&&a[1]),i.setVisual("style",t.getModel("lineStyle").getLineStyle()),i.each(function(o){var s=i.getItemModel(o),l=r.getEdgeByIndex(o),u=r_(s.getShallow("symbol",!0)),c=r_(s.getShallow("symbolSize",!0)),h=s.getModel("lineStyle").getLineStyle(),d=i.ensureUniqueItemVisual(o,"style");switch(Be(d,h),d.stroke){case"source":{var f=l.node1.getVisual("style");d.stroke=f&&f.fill;break}case"target":{var f=l.node2.getVisual("style");d.stroke=f&&f.fill;break}}u[0]&&l.setVisual("fromSymbol",u[0]),u[1]&&l.setVisual("toSymbol",u[1]),c[0]&&l.setVisual("fromSymbolSize",c[0]),c[1]&&l.setVisual("toSymbolSize",c[1])})})}var ZL="-->",GC=function(e){return e.get("autoCurveness")||null},ade=function(e,t){var r=GC(e),i=20,n=[];if(kr(r))i=r;else if(Ue(r)){e.__curvenessList=r;return}t>i&&(i=t);var a=i%2?i+2:i+3;n=[];for(var o=0;o<a;o++)n.push((o%2?o+1:o)/10*(o%2?-1:1));e.__curvenessList=n},vw=function(e,t,r){var i=[e.id,e.dataIndex].join("."),n=[t.id,t.dataIndex].join(".");return[r.uid,i,n].join(ZL)},ode=function(e){var t=e.split(ZL);return[t[0],t[2],t[1]].join(ZL)},CLe=function(e,t){var r=vw(e.node1,e.node2,t);return t.__edgeMap[r]},ELe=function(e,t){var r=QL(vw(e.node1,e.node2,t),t),i=QL(vw(e.node2,e.node1,t),t);return r+i},QL=function(e,t){var r=t.__edgeMap;return r[e]?r[e].length:0};function MLe(e){GC(e)&&(e.__curvenessList=[],e.__edgeMap={},ade(e))}function TLe(e,t,r,i){if(GC(r)){var n=vw(e,t,r),a=r.__edgeMap,o=a[ode(n)];a[n]&&!o?a[n].isForward=!0:o&&a[n]&&(o.isForward=!0,a[n].isForward=!1),a[n]=a[n]||[],a[n].push(i)}}function cV(e,t,r,i){var n=GC(t),a=Ue(n);if(!n)return null;var o=CLe(e,t);if(!o)return null;for(var s=-1,l=0;l<o.length;l++)if(o[l]===r){s=l;break}var u=ELe(e,t);ade(t,u),e.lineStyle=e.lineStyle||{};var c=vw(e.node1,e.node2,t),h=t.__curvenessList,d=a||u%2?0:1;if(o.isForward)return h[d+s];var f=ode(c),p=QL(f,t),v=h[s+p+d];return i?a?n&&n[0]===0?(p+d)%2?v:-v:((p%2?0:1)+d)%2?v:-v:(p+d)%2?v:-v:h[s+p+d]}function sde(e){var t=e.coordinateSystem;if(!(t&&t.type!=="view")){var r=e.getGraph();r.eachNode(function(i){var n=i.getModel();i.setLayout([+n.get("x"),+n.get("y")])}),hV(r,e)}}function hV(e,t){e.eachEdge(function(r,i){var n=Vc(r.getModel().get(["lineStyle","curveness"]),-cV(r,t,i,!0),0),a=ad(r.node1.getLayout()),o=ad(r.node2.getLayout()),s=[a,o];+n&&s.push([(a[0]+o[0])/2-(a[1]-o[1])*n,(a[1]+o[1])/2-(o[0]-a[0])*n]),r.setLayout(s)})}function PLe(e,t){e.eachSeriesByType("graph",function(r){var i=r.get("layout"),n=r.coordinateSystem;if(n&&n.type!=="view"){var a=r.getData(),o=[];q(n.dimensions,function(d){o=o.concat(a.mapDimensionsAll(d))});for(var s=0;s<a.count();s++){for(var l=[],u=!1,c=0;c<o.length;c++){var h=a.get(o[c],s);isNaN(h)||(u=!0),l.push(h)}u?a.setItemLayout(s,n.dataToPoint(l)):a.setItemLayout(s,[NaN,NaN])}hV(a.graph,r)}else(!i||i==="none")&&sde(r)})}function Vx(e){var t=e.coordinateSystem;if(t.type!=="view")return 1;var r=e.option.nodeScaleRatio,i=t.scaleX,n=t.getZoom(),a=(n-1)*r+1;return a/i}function Fx(e){var t=e.getVisual("symbolSize");return t instanceof Array&&(t=(t[0]+t[1])/2),+t}var xY=Math.PI,YM=[];function dV(e,t,r,i){var n=e.coordinateSystem;if(!(n&&n.type!=="view")){var a=n.getBoundingRect(),o=e.getData(),s=o.graph,l=a.width/2+a.x,u=a.height/2+a.y,c=Math.min(a.width,a.height)/2,h=o.count();if(o.setLayout({cx:l,cy:u}),!!h){if(r){var d=n.pointToData(i),f=d[0],p=d[1],v=[f-l,p-u];by(v,v),cA(v,v,c),r.setLayout([l+v[0],u+v[1]],!0);var m=e.get(["circular","rotateLabel"]);lde(r,m,l,u)}DLe[t](e,s,o,c,l,u,h),s.eachEdge(function(g,y){var x=Vc(g.getModel().get(["lineStyle","curveness"]),cV(g,e,y),0),b=ad(g.node1.getLayout()),_=ad(g.node2.getLayout()),w,S=(b[0]+_[0])/2,A=(b[1]+_[1])/2;+x&&(x*=3,w=[l*x+S*(1-x),u*x+A*(1-x)]),g.setLayout([b,_,w])})}}}var DLe={value:function(e,t,r,i,n,a,o){var s=0,l=r.getSum("value"),u=Math.PI*2/(l||o);t.eachNode(function(c){var h=c.getValue("value"),d=u*(l?h:1)/2;s+=d,c.setLayout([i*Math.cos(s)+n,i*Math.sin(s)+a]),s+=d})},symbolSize:function(e,t,r,i,n,a,o){var s=0;YM.length=o;var l=Vx(e);t.eachNode(function(h){var d=Fx(h);isNaN(d)&&(d=2),d<0&&(d=0),d*=l;var f=Math.asin(d/2/i);isNaN(f)&&(f=xY/2),YM[h.dataIndex]=f,s+=f*2});var u=(2*xY-s)/o/2,c=0;t.eachNode(function(h){var d=u+YM[h.dataIndex];c+=d,(!h.getLayout()||!h.getLayout().fixed)&&h.setLayout([i*Math.cos(c)+n,i*Math.sin(c)+a]),c+=d})}};function lde(e,t,r,i){var n=e.getGraphicEl();if(n){var a=e.getModel(),o=a.get(["label","rotate"])||0,s=n.getSymbolPath();if(t){var l=e.getLayout(),u=Math.atan2(l[1]-i,l[0]-r);u<0&&(u=Math.PI*2+u);var c=l[0]<r;c&&(u=u-Math.PI);var h=c?"left":"right";s.setTextConfig({rotation:-u,position:h,origin:"center"});var d=s.ensureState("emphasis");Be(d.textConfig||(d.textConfig={}),{position:h})}else s.setTextConfig({rotation:o*=Math.PI/180})}}function ILe(e){e.eachSeriesByType("graph",function(t){t.get("layout")==="circular"&&dV(t,"symbolSize")})}var km=BI;function LLe(e,t,r){for(var i=e,n=t,a=r.rect,o=a.width,s=a.height,l=[a.x+o/2,a.y+s/2],u=r.gravity==null?.1:r.gravity,c=0;c<i.length;c++){var h=i[c];h.p||(h.p=Kv(o*(Math.random()-.5)+l[0],s*(Math.random()-.5)+l[1])),h.pp=ad(h.p),h.edges=null}var d=r.friction==null?.6:r.friction,f=d,p,v;return{warmUp:function(){f=d*.8},setFixed:function(m){i[m].fixed=!0},setUnfixed:function(m){i[m].fixed=!1},beforeStep:function(m){p=m},afterStep:function(m){v=m},step:function(m){p&&p(i,n);for(var g=[],y=i.length,x=0;x<n.length;x++){var b=n[x];if(!b.ignoreForceLayout){var _=b.n1,w=b.n2;U0(g,w.p,_.p);var S=NI(g)-b.d,A=w.w/(_.w+w.w);isNaN(A)&&(A=0),by(g,g),!_.fixed&&km(_.p,_.p,g,A*S*f),!w.fixed&&km(w.p,w.p,g,-(1-A)*S*f)}}for(var x=0;x<y;x++){var M=i[x];M.fixed||(U0(g,l,M.p),km(M.p,M.p,g,u*f))}for(var x=0;x<y;x++)for(var _=i[x],E=x+1;E<y;E++){var w=i[E];U0(g,w.p,_.p);var S=NI(g);S===0&&(u8e(g,Math.random()-.5,Math.random()-.5),S=1);var T=(_.rep+w.rep)/S/S;!_.fixed&&km(_.pp,_.pp,g,T),!w.fixed&&km(w.pp,w.pp,g,-T)}for(var L=[],x=0;x<y;x++){var M=i[x];M.fixed||(U0(L,M.p,M.pp),km(M.p,M.p,L,f),Bo(M.pp,M.p))}f=f*.992;var P=f<.01;v&&v(i,n,P),m&&m(P)}}}function kLe(e){e.eachSeriesByType("graph",function(t){var r=t.coordinateSystem;if(!(r&&r.type!=="view"))if(t.get("layout")==="force"){var i=t.preservedPoints||{},n=t.getGraph(),a=n.data,o=n.edgeData,s=t.getModel("force"),l=s.get("initLayout");t.preservedPoints?a.each(function(x){var b=a.getId(x);a.setItemLayout(x,i[b]||[NaN,NaN])}):!l||l==="none"?sde(t):l==="circular"&&dV(t,"value");var u=a.getDataExtent("value"),c=o.getDataExtent("value"),h=s.get("repulsion"),d=s.get("edgeLength"),f=Ue(h)?h:[h,h],p=Ue(d)?d:[d,d];p=[p[1],p[0]];var v=a.mapArray("value",function(x,b){var _=a.getItemLayout(b),w=ti(x,u,f);return isNaN(w)&&(w=(f[0]+f[1])/2),{w,rep:w,fixed:a.getItemModel(b).get("fixed"),p:!_||isNaN(_[0])||isNaN(_[1])?null:_}}),m=o.mapArray("value",function(x,b){var _=n.getEdgeByIndex(b),w=ti(x,c,p);isNaN(w)&&(w=(p[0]+p[1])/2);var S=_.getModel(),A=Vc(_.getModel().get(["lineStyle","curveness"]),-cV(_,t,b,!0),0);return{n1:v[_.node1.dataIndex],n2:v[_.node2.dataIndex],d:w,curveness:A,ignoreForceLayout:S.get("ignoreForceLayout")}}),g=r.getBoundingRect(),y=LLe(v,m,{rect:g,gravity:s.get("gravity"),friction:s.get("friction")});y.beforeStep(function(x,b){for(var _=0,w=x.length;_<w;_++)x[_].fixed&&Bo(x[_].p,n.getNodeByIndex(_).getLayout())}),y.afterStep(function(x,b,_){for(var w=0,S=x.length;w<S;w++)x[w].fixed||n.getNodeByIndex(w).setLayout(x[w].p),i[a.getId(w)]=x[w].p;for(var w=0,S=b.length;w<S;w++){var A=b[w],M=n.getEdgeByIndex(w),E=A.n1.p,T=A.n2.p,L=M.getLayout();L=L?L.slice():[],L[0]=L[0]||[],L[1]=L[1]||[],Bo(L[0],E),Bo(L[1],T),+A.curveness&&(L[2]=[(E[0]+T[0])/2-(E[1]-T[1])*A.curveness,(E[1]+T[1])/2-(T[0]-E[0])*A.curveness]),M.setLayout(L)}}),t.forceLayout=y,t.preservedPoints=i,y.step()}else t.forceLayout=null})}function RLe(e,t,r){var i=Be(e.getBoxLayoutParams(),{aspect:r});return zn(i,{width:t.getWidth(),height:t.getHeight()})}function OLe(e,t){var r=[];return e.eachSeriesByType("graph",function(i){var n=i.get("coordinateSystem");if(!n||n==="view"){var a=i.getData(),o=a.mapArray(function(m){var g=a.getItemModel(m);return[+g.get("x"),+g.get("y")]}),s=[],l=[];mC(o,s,l),l[0]-s[0]===0&&(l[0]+=1,s[0]-=1),l[1]-s[1]===0&&(l[1]+=1,s[1]-=1);var u=(l[0]-s[0])/(l[1]-s[1]),c=RLe(i,t,u);isNaN(u)&&(s=[c.x,c.y],l=[c.x+c.width,c.y+c.height]);var h=l[0]-s[0],d=l[1]-s[1],f=c.width,p=c.height,v=i.coordinateSystem=new E4;v.zoomLimit=i.get("scaleLimit"),v.setBoundingRect(s[0],s[1],h,d),v.setViewRect(c.x,c.y,f,p),v.setCenter(i.get("center"),t),v.setZoom(i.get("zoom")),r.push(v)}}),r}var bY=$n.prototype,XM=d4.prototype,ude=function(){function e(){this.x1=0,this.y1=0,this.x2=0,this.y2=0,this.percent=1}return e}();(function(e){_e(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t})(ude);function ZM(e){return isNaN(+e.cpx1)||isNaN(+e.cpy1)}var BLe=function(e){_e(t,e);function t(r){var i=e.call(this,r)||this;return i.type="ec-line",i}return t.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},t.prototype.getDefaultShape=function(){return new ude},t.prototype.buildPath=function(r,i){ZM(i)?bY.buildPath.call(this,r,i):XM.buildPath.call(this,r,i)},t.prototype.pointAt=function(r){return ZM(this.shape)?bY.pointAt.call(this,r):XM.pointAt.call(this,r)},t.prototype.tangentAt=function(r){var i=this.shape,n=ZM(i)?[i.x2-i.x1,i.y2-i.y1]:XM.tangentAt.call(this,r);return by(n,n)},t}(or),QM=["fromSymbol","toSymbol"];function wY(e){return"_"+e+"Type"}function _Y(e,t,r){var i=t.getItemVisual(r,e);if(!i||i==="none")return i;var n=t.getItemVisual(r,e+"Size"),a=t.getItemVisual(r,e+"Rotate"),o=t.getItemVisual(r,e+"Offset"),s=t.getItemVisual(r,e+"KeepAspect"),l=Ry(n),u=em(o||0,l);return i+l+u+(a||"")+(s||"")}function AY(e,t,r){var i=t.getItemVisual(r,e);if(!(!i||i==="none")){var n=t.getItemVisual(r,e+"Size"),a=t.getItemVisual(r,e+"Rotate"),o=t.getItemVisual(r,e+"Offset"),s=t.getItemVisual(r,e+"KeepAspect"),l=Ry(n),u=em(o||0,l),c=Sn(i,-l[0]/2+u[0],-l[1]/2+u[1],l[0],l[1],null,s);return c.__specifiedRotation=a==null||isNaN(a)?void 0:+a*Math.PI/180||0,c.name=e,c}}function NLe(e){var t=new BLe({name:"line",subPixelOptimize:!0});return KL(t.shape,e),t}function KL(e,t){e.x1=t[0][0],e.y1=t[0][1],e.x2=t[1][0],e.y2=t[1][1],e.percent=1;var r=t[2];r?(e.cpx1=r[0],e.cpy1=r[1]):(e.cpx1=NaN,e.cpy1=NaN)}var fV=function(e){_e(t,e);function t(r,i,n){var a=e.call(this)||this;return a._createLine(r,i,n),a}return t.prototype._createLine=function(r,i,n){var a=r.hostModel,o=r.getItemLayout(i),s=NLe(o);s.shape.percent=0,Vi(s,{shape:{percent:1}},a,i),this.add(s),q(QM,function(l){var u=AY(l,r,i);this.add(u),this[wY(l)]=_Y(l,r,i)},this),this._updateCommonStl(r,i,n)},t.prototype.updateData=function(r,i,n){var a=r.hostModel,o=this.childOfName("line"),s=r.getItemLayout(i),l={shape:{}};KL(l.shape,s),Nr(o,l,a,i),q(QM,function(u){var c=_Y(u,r,i),h=wY(u);if(this[h]!==c){this.remove(this.childOfName(u));var d=AY(u,r,i);this.add(d)}this[h]=c},this),this._updateCommonStl(r,i,n)},t.prototype.getLinePath=function(){return this.childAt(0)},t.prototype._updateCommonStl=function(r,i,n){var a=r.hostModel,o=this.childOfName("line"),s=n&&n.emphasisLineStyle,l=n&&n.blurLineStyle,u=n&&n.selectLineStyle,c=n&&n.labelStatesModels,h=n&&n.emphasisDisabled,d=n&&n.focus,f=n&&n.blurScope;if(!n||r.hasItemOption){var p=r.getItemModel(i),v=p.getModel("emphasis");s=v.getModel("lineStyle").getLineStyle(),l=p.getModel(["blur","lineStyle"]).getLineStyle(),u=p.getModel(["select","lineStyle"]).getLineStyle(),h=v.get("disabled"),d=v.get("focus"),f=v.get("blurScope"),c=ia(p)}var m=r.getItemVisual(i,"style"),g=m.stroke;o.useStyle(m),o.style.fill=null,o.style.strokeNoScale=!0,o.ensureState("emphasis").style=s,o.ensureState("blur").style=l,o.ensureState("select").style=u,q(QM,function(w){var S=this.childOfName(w);if(S){S.setColor(g),S.style.opacity=m.opacity;for(var A=0;A<Xo.length;A++){var M=Xo[A],E=o.getState(M);if(E){var T=E.style||{},L=S.ensureState(M),P=L.style||(L.style={});T.stroke!=null&&(P[S.__isEmptyBrush?"stroke":"fill"]=T.stroke),T.opacity!=null&&(P.opacity=T.opacity)}}S.markRedraw()}},this);var y=a.getRawValue(i);Xa(this,c,{labelDataIndex:i,labelFetcher:{getFormattedLabel:function(w,S){return a.getFormattedLabel(w,S,r.dataType)}},inheritColor:g||"#000",defaultOpacity:m.opacity,defaultText:(y==null?r.getName(i):isFinite(y)?rn(y):y)+""});var x=this.getTextContent();if(x){var b=c.normal;x.__align=x.style.align,x.__verticalAlign=x.style.verticalAlign,x.__position=b.get("position")||"middle";var _=b.get("distance");Ue(_)||(_=[_,_]),x.__labelDistance=_}this.setTextConfig({position:null,local:!0,inside:!1}),Ji(this,d,f,h)},t.prototype.highlight=function(){md(this)},t.prototype.downplay=function(){gd(this)},t.prototype.updateLayout=function(r,i){this.setLinePoints(r.getItemLayout(i))},t.prototype.setLinePoints=function(r){var i=this.childOfName("line");KL(i.shape,r),i.dirty()},t.prototype.beforeUpdate=function(){var r=this,i=r.childOfName("fromSymbol"),n=r.childOfName("toSymbol"),a=r.getTextContent();if(!i&&!n&&(!a||a.ignore))return;for(var o=1,s=this.parent;s;)s.scaleX&&(o/=s.scaleX),s=s.parent;var l=r.childOfName("line");if(!this.__dirty&&!l.__dirty)return;var u=l.shape.percent,c=l.pointAt(0),h=l.pointAt(u),d=U0([],h,c);by(d,d);function f(E,T){var L=E.__specifiedRotation;if(L==null){var P=l.tangentAt(T);E.attr("rotation",(T===1?-1:1)*Math.PI/2-Math.atan2(P[1],P[0]))}else E.attr("rotation",L)}if(i&&(i.setPosition(c),f(i,0),i.scaleX=i.scaleY=o*u,i.markRedraw()),n&&(n.setPosition(h),f(n,1),n.scaleX=n.scaleY=o*u,n.markRedraw()),a&&!a.ignore){a.x=a.y=0,a.originX=a.originY=0;var p=void 0,v=void 0,m=a.__labelDistance,g=m[0]*o,y=m[1]*o,x=u/2,b=l.tangentAt(x),_=[b[1],-b[0]],w=l.pointAt(x);_[1]>0&&(_[0]=-_[0],_[1]=-_[1]);var S=b[0]<0?-1:1;if(a.__position!=="start"&&a.__position!=="end"){var A=-Math.atan2(b[1],b[0]);h[0]<c[0]&&(A=Math.PI+A),a.rotation=A}var M=void 0;switch(a.__position){case"insideStartTop":case"insideMiddleTop":case"insideEndTop":case"middle":M=-y,v="bottom";break;case"insideStartBottom":case"insideMiddleBottom":case"insideEndBottom":M=y,v="top";break;default:M=0,v="middle"}switch(a.__position){case"end":a.x=d[0]*g+h[0],a.y=d[1]*y+h[1],p=d[0]>.8?"left":d[0]<-.8?"right":"center",v=d[1]>.8?"top":d[1]<-.8?"bottom":"middle";break;case"start":a.x=-d[0]*g+c[0],a.y=-d[1]*y+c[1],p=d[0]>.8?"right":d[0]<-.8?"left":"center",v=d[1]>.8?"bottom":d[1]<-.8?"top":"middle";break;case"insideStartTop":case"insideStart":case"insideStartBottom":a.x=g*S+c[0],a.y=c[1]+M,p=b[0]<0?"right":"left",a.originX=-g*S,a.originY=-M;break;case"insideMiddleTop":case"insideMiddle":case"insideMiddleBottom":case"middle":a.x=w[0],a.y=w[1]+M,p="center",a.originY=-M;break;case"insideEndTop":case"insideEnd":case"insideEndBottom":a.x=-g*S+h[0],a.y=h[1]+M,p=b[0]>=0?"right":"left",a.originX=g*S,a.originY=-M;break}a.scaleX=a.scaleY=o,a.setStyle({verticalAlign:a.__verticalAlign||v,align:a.__align||p})}},t}(Ct),pV=function(){function e(t){this.group=new Ct,this._LineCtor=t||fV}return e.prototype.updateData=function(t){var r=this;this._progressiveEls=null;var i=this,n=i.group,a=i._lineData;i._lineData=t,a||n.removeAll();var o=SY(t);t.diff(a).add(function(s){r._doAdd(t,s,o)}).update(function(s,l){r._doUpdate(a,t,l,s,o)}).remove(function(s){n.remove(a.getItemGraphicEl(s))}).execute()},e.prototype.updateLayout=function(){var t=this._lineData;t&&t.eachItemGraphicEl(function(r,i){r.updateLayout(t,i)},this)},e.prototype.incrementalPrepareUpdate=function(t){this._seriesScope=SY(t),this._lineData=null,this.group.removeAll()},e.prototype.incrementalUpdate=function(t,r){this._progressiveEls=[];function i(s){!s.isGroup&&!VLe(s)&&(s.incremental=!0,s.ensureState("emphasis").hoverLayer=!0)}for(var n=t.start;n<t.end;n++){var a=r.getItemLayout(n);if(KM(a)){var o=new this._LineCtor(r,n,this._seriesScope);o.traverse(i),this.group.add(o),r.setItemGraphicEl(n,o),this._progressiveEls.push(o)}}},e.prototype.remove=function(){this.group.removeAll()},e.prototype.eachRendered=function(t){Ep(this._progressiveEls||this.group,t)},e.prototype._doAdd=function(t,r,i){var n=t.getItemLayout(r);if(KM(n)){var a=new this._LineCtor(t,r,i);t.setItemGraphicEl(r,a),this.group.add(a)}},e.prototype._doUpdate=function(t,r,i,n,a){var o=t.getItemGraphicEl(i);if(!KM(r.getItemLayout(n))){this.group.remove(o);return}o?o.updateData(r,n,a):o=new this._LineCtor(r,n,a),r.setItemGraphicEl(n,o),this.group.add(o)},e}();function VLe(e){return e.animators&&e.animators.length>0}function SY(e){var t=e.hostModel,r=t.getModel("emphasis");return{lineStyle:t.getModel("lineStyle").getLineStyle(),emphasisLineStyle:r.getModel(["lineStyle"]).getLineStyle(),blurLineStyle:t.getModel(["blur","lineStyle"]).getLineStyle(),selectLineStyle:t.getModel(["select","lineStyle"]).getLineStyle(),emphasisDisabled:r.get("disabled"),blurScope:r.get("blurScope"),focus:r.get("focus"),labelStatesModels:ia(t)}}function CY(e){return isNaN(e[0])||isNaN(e[1])}function KM(e){return e&&!CY(e[0])&&!CY(e[1])}var JM=[],$M=[],eT=[],Rm=fa,tT=fv,EY=Math.abs;function MY(e,t,r){for(var i=e[0],n=e[1],a=e[2],o=1/0,s,l=r*r,u=.1,c=.1;c<=.9;c+=.1){JM[0]=Rm(i[0],n[0],a[0],c),JM[1]=Rm(i[1],n[1],a[1],c);var h=EY(tT(JM,t)-l);h<o&&(o=h,s=c)}for(var d=0;d<32;d++){var f=s+u;$M[0]=Rm(i[0],n[0],a[0],s),$M[1]=Rm(i[1],n[1],a[1],s),eT[0]=Rm(i[0],n[0],a[0],f),eT[1]=Rm(i[1],n[1],a[1],f);var h=tT($M,t)-l;if(EY(h)<.01)break;var p=tT(eT,t)-l;u/=2,h<0?p>=0?s=s+u:s=s-u:p>=0?s=s-u:s=s+u}return s}function rT(e,t){var r=[],i=Yb,n=[[],[],[]],a=[[],[]],o=[];t/=2,e.eachEdge(function(s,l){var u=s.getLayout(),c=s.getVisual("fromSymbol"),h=s.getVisual("toSymbol");u.__original||(u.__original=[ad(u[0]),ad(u[1])],u[2]&&u.__original.push(ad(u[2])));var d=u.__original;if(u[2]!=null){if(Bo(n[0],d[0]),Bo(n[1],d[2]),Bo(n[2],d[1]),c&&c!=="none"){var f=Fx(s.node1),p=MY(n,d[0],f*t);i(n[0][0],n[1][0],n[2][0],p,r),n[0][0]=r[3],n[1][0]=r[4],i(n[0][1],n[1][1],n[2][1],p,r),n[0][1]=r[3],n[1][1]=r[4]}if(h&&h!=="none"){var f=Fx(s.node2),p=MY(n,d[1],f*t);i(n[0][0],n[1][0],n[2][0],p,r),n[1][0]=r[1],n[2][0]=r[2],i(n[0][1],n[1][1],n[2][1],p,r),n[1][1]=r[1],n[2][1]=r[2]}Bo(u[0],n[0]),Bo(u[1],n[2]),Bo(u[2],n[1])}else{if(Bo(a[0],d[0]),Bo(a[1],d[1]),U0(o,a[1],a[0]),by(o,o),c&&c!=="none"){var f=Fx(s.node1);BI(a[0],a[0],o,f*t)}if(h&&h!=="none"){var f=Fx(s.node2);BI(a[1],a[1],o,-f*t)}Bo(u[0],a[0]),Bo(u[1],a[1])}})}function TY(e){return e.type==="view"}var FLe=function(e){_e(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r}return t.prototype.init=function(r,i){var n=new b4,a=new pV,o=this.group;this._controller=new C4(i.getZr()),this._controllerHost={target:o},o.add(n.group),o.add(a.group),this._symbolDraw=n,this._lineDraw=a,this._firstRender=!0},t.prototype.render=function(r,i,n){var a=this,o=r.coordinateSystem;this._model=r;var s=this._symbolDraw,l=this._lineDraw,u=this.group;if(TY(o)){var c={x:o.x,y:o.y,scaleX:o.scaleX,scaleY:o.scaleY};this._firstRender?u.attr(c):Nr(u,c,r)}rT(r.getGraph(),Vx(r));var h=r.getData();s.updateData(h);var d=r.getEdgeData();l.updateData(d),this._updateNodeAndLinkScale(),this._updateController(r,i,n),clearTimeout(this._layoutTimeout);var f=r.forceLayout,p=r.get(["force","layoutAnimation"]);f&&this._startForceLayoutIteration(f,p);var v=r.get("layout");h.graph.eachNode(function(x){var b=x.dataIndex,_=x.getGraphicEl(),w=x.getModel();if(_){_.off("drag").off("dragend");var S=w.get("draggable");S&&_.on("drag",function(M){switch(v){case"force":f.warmUp(),!a._layouting&&a._startForceLayoutIteration(f,p),f.setFixed(b),h.setItemLayout(b,[_.x,_.y]);break;case"circular":h.setItemLayout(b,[_.x,_.y]),x.setLayout({fixed:!0},!0),dV(r,"symbolSize",x,[M.offsetX,M.offsetY]),a.updateLayout(r);break;case"none":default:h.setItemLayout(b,[_.x,_.y]),hV(r.getGraph(),r),a.updateLayout(r);break}}).on("dragend",function(){f&&f.setUnfixed(b)}),_.setDraggable(S,!!w.get("cursor"));var A=w.get(["emphasis","focus"]);A==="adjacency"&&(Dt(_).focus=x.getAdjacentDataIndices())}}),h.graph.eachEdge(function(x){var b=x.getGraphicEl(),_=x.getModel().get(["emphasis","focus"]);b&&_==="adjacency"&&(Dt(b).focus={edge:[x.dataIndex],node:[x.node1.dataIndex,x.node2.dataIndex]})});var m=r.get("layout")==="circular"&&r.get(["circular","rotateLabel"]),g=h.getLayout("cx"),y=h.getLayout("cy");h.graph.eachNode(function(x){lde(x,m,g,y)}),this._firstRender=!1},t.prototype.dispose=function(){this.remove(),this._controller&&this._controller.dispose(),this._controllerHost=null},t.prototype._startForceLayoutIteration=function(r,i){var n=this;(function a(){r.step(function(o){n.updateLayout(n._model),(n._layouting=!o)&&(i?n._layoutTimeout=setTimeout(a,16):a())})})()},t.prototype._updateController=function(r,i,n){var a=this,o=this._controller,s=this._controllerHost,l=this.group;if(o.setPointerChecker(function(u,c,h){var d=l.getBoundingRect();return d.applyTransform(l.transform),d.contain(c,h)&&!zC(u,n,r)}),!TY(r.coordinateSystem)){o.disable();return}o.enable(r.get("roam")),s.zoomLimit=r.get("scaleLimit"),s.zoom=r.coordinateSystem.getZoom(),o.off("pan").off("zoom").on("pan",function(u){rV(s,u.dx,u.dy),n.dispatchAction({seriesId:r.id,type:"graphRoam",dx:u.dx,dy:u.dy})}).on("zoom",function(u){iV(s,u.scale,u.originX,u.originY),n.dispatchAction({seriesId:r.id,type:"graphRoam",zoom:u.scale,originX:u.originX,originY:u.originY}),a._updateNodeAndLinkScale(),rT(r.getGraph(),Vx(r)),a._lineDraw.updateLayout(),n.updateLabelLayout()})},t.prototype._updateNodeAndLinkScale=function(){var r=this._model,i=r.getData(),n=Vx(r);i.eachItemGraphicEl(function(a,o){a&&a.setSymbolScale(n)})},t.prototype.updateLayout=function(r){rT(r.getGraph(),Vx(r)),this._symbolDraw.updateLayout(),this._lineDraw.updateLayout()},t.prototype.remove=function(){clearTimeout(this._layoutTimeout),this._layouting=!1,this._layoutTimeout=null,this._symbolDraw&&this._symbolDraw.remove(),this._lineDraw&&this._lineDraw.remove()},t.type="graph",t}(yi);function Om(e){return"_EC_"+e}var zLe=function(){function e(t){this.type="graph",this.nodes=[],this.edges=[],this._nodesMap={},this._edgesMap={},this._directed=t||!1}return e.prototype.isDirected=function(){return this._directed},e.prototype.addNode=function(t,r){t=t==null?""+r:""+t;var i=this._nodesMap;if(!i[Om(t)]){var n=new E0(t,r);return n.hostGraph=this,this.nodes.push(n),i[Om(t)]=n,n}},e.prototype.getNodeByIndex=function(t){var r=this.data.getRawIndex(t);return this.nodes[r]},e.prototype.getNodeById=function(t){return this._nodesMap[Om(t)]},e.prototype.addEdge=function(t,r,i){var n=this._nodesMap,a=this._edgesMap;if(kr(t)&&(t=this.nodes[t]),kr(r)&&(r=this.nodes[r]),t instanceof E0||(t=n[Om(t)]),r instanceof E0||(r=n[Om(r)]),!(!t||!r)){var o=t.id+"-"+r.id,s=new cde(t,r,i);return s.hostGraph=this,this._directed&&(t.outEdges.push(s),r.inEdges.push(s)),t.edges.push(s),t!==r&&r.edges.push(s),this.edges.push(s),a[o]=s,s}},e.prototype.getEdgeByIndex=function(t){var r=this.edgeData.getRawIndex(t);return this.edges[r]},e.prototype.getEdge=function(t,r){t instanceof E0&&(t=t.id),r instanceof E0&&(r=r.id);var i=this._edgesMap;return this._directed?i[t+"-"+r]:i[t+"-"+r]||i[r+"-"+t]},e.prototype.eachNode=function(t,r){for(var i=this.nodes,n=i.length,a=0;a<n;a++)i[a].dataIndex>=0&&t.call(r,i[a],a)},e.prototype.eachEdge=function(t,r){for(var i=this.edges,n=i.length,a=0;a<n;a++)i[a].dataIndex>=0&&i[a].node1.dataIndex>=0&&i[a].node2.dataIndex>=0&&t.call(r,i[a],a)},e.prototype.breadthFirstTraverse=function(t,r,i,n){if(r instanceof E0||(r=this._nodesMap[Om(r)]),!!r){for(var a=i==="out"?"outEdges":i==="in"?"inEdges":"edges",o=0;o<this.nodes.length;o++)this.nodes[o].__visited=!1;if(!t.call(n,r,null))for(var s=[r];s.length;)for(var l=s.shift(),u=l[a],o=0;o<u.length;o++){var c=u[o],h=c.node1===l?c.node2:c.node1;if(!h.__visited){if(t.call(n,h,l))return;s.push(h),h.__visited=!0}}}},e.prototype.update=function(){for(var t=this.data,r=this.edgeData,i=this.nodes,n=this.edges,a=0,o=i.length;a<o;a++)i[a].dataIndex=-1;for(var a=0,o=t.count();a<o;a++)i[t.getRawIndex(a)].dataIndex=a;r.filterSelf(function(s){var l=n[r.getRawIndex(s)];return l.node1.dataIndex>=0&&l.node2.dataIndex>=0});for(var a=0,o=n.length;a<o;a++)n[a].dataIndex=-1;for(var a=0,o=r.count();a<o;a++)n[r.getRawIndex(a)].dataIndex=a},e.prototype.clone=function(){for(var t=new e(this._directed),r=this.nodes,i=this.edges,n=0;n<r.length;n++)t.addNode(r[n].id,r[n].dataIndex);for(var n=0;n<i.length;n++){var a=i[n];t.addEdge(a.node1.id,a.node2.id,a.dataIndex)}return t},e}(),E0=function(){function e(t,r){this.inEdges=[],this.outEdges=[],this.edges=[],this.dataIndex=-1,this.id=t??"",this.dataIndex=r??-1}return e.prototype.degree=function(){return this.edges.length},e.prototype.inDegree=function(){return this.inEdges.length},e.prototype.outDegree=function(){return this.outEdges.length},e.prototype.getModel=function(t){if(!(this.dataIndex<0)){var r=this.hostGraph,i=r.data.getItemModel(this.dataIndex);return i.getModel(t)}},e.prototype.getAdjacentDataIndices=function(){for(var t={edge:[],node:[]},r=0;r<this.edges.length;r++){var i=this.edges[r];i.dataIndex<0||(t.edge.push(i.dataIndex),t.node.push(i.node1.dataIndex,i.node2.dataIndex))}return t},e.prototype.getTrajectoryDataIndices=function(){for(var t=dt(),r=dt(),i=0;i<this.edges.length;i++){var n=this.edges[i];if(!(n.dataIndex<0)){t.set(n.dataIndex,!0);for(var a=[n.node1],o=[n.node2],s=0;s<a.length;){var l=a[s];s++,r.set(l.dataIndex,!0);for(var u=0;u<l.inEdges.length;u++)t.set(l.inEdges[u].dataIndex,!0),a.push(l.inEdges[u].node1)}for(s=0;s<o.length;){var c=o[s];s++,r.set(c.dataIndex,!0);for(var u=0;u<c.outEdges.length;u++)t.set(c.outEdges[u].dataIndex,!0),o.push(c.outEdges[u].node2)}}}return{edge:t.keys(),node:r.keys()}},e}(),cde=function(){function e(t,r,i){this.dataIndex=-1,this.node1=t,this.node2=r,this.dataIndex=i??-1}return e.prototype.getModel=function(t){if(!(this.dataIndex<0)){var r=this.hostGraph,i=r.edgeData.getItemModel(this.dataIndex);return i.getModel(t)}},e.prototype.getAdjacentDataIndices=function(){return{edge:[this.dataIndex],node:[this.node1.dataIndex,this.node2.dataIndex]}},e.prototype.getTrajectoryDataIndices=function(){var t=dt(),r=dt();t.set(this.dataIndex,!0);for(var i=[this.node1],n=[this.node2],a=0;a<i.length;){var o=i[a];a++,r.set(o.dataIndex,!0);for(var s=0;s<o.inEdges.length;s++)t.set(o.inEdges[s].dataIndex,!0),i.push(o.inEdges[s].node1)}for(a=0;a<n.length;){var l=n[a];a++,r.set(l.dataIndex,!0);for(var s=0;s<l.outEdges.length;s++)t.set(l.outEdges[s].dataIndex,!0),n.push(l.outEdges[s].node2)}return{edge:t.keys(),node:r.keys()}},e}();function hde(e,t){return{getValue:function(r){var i=this[e][t];return i.getStore().get(i.getDimensionIndex(r||"value"),this.dataIndex)},setVisual:function(r,i){this.dataIndex>=0&&this[e][t].setItemVisual(this.dataIndex,r,i)},getVisual:function(r){return this[e][t].getItemVisual(this.dataIndex,r)},setLayout:function(r,i){this.dataIndex>=0&&this[e][t].setItemLayout(this.dataIndex,r,i)},getLayout:function(){return this[e][t].getItemLayout(this.dataIndex)},getGraphicEl:function(){return this[e][t].getItemGraphicEl(this.dataIndex)},getRawIndex:function(){return this[e][t].getRawIndex(this.dataIndex)}}}Mn(E0,hde("hostGraph","data"));Mn(cde,hde("hostGraph","edgeData"));function dde(e,t,r,i,n){for(var a=new zLe(i),o=0;o<e.length;o++)a.addNode(xa(e[o].id,e[o].name,o),o);for(var s=[],l=[],u=0,o=0;o<t.length;o++){var c=t[o],h=c.source,d=c.target;a.addEdge(h,d,u)&&(l.push(c),s.push(xa(Rn(c.id,null),h+" > "+d)),u++)}var f=r.get("coordinateSystem"),p;if(f==="cartesian2d"||f==="polar")p=Bd(e,r);else{var v=v4.get(f),m=v?v.dimensions||[]:[];tr(m,"value")<0&&m.concat(["value"]);var g=g4(e,{coordDimensions:m,encodeDefine:r.getEncode()}).dimensions;p=new Wo(g,r),p.initData(e)}var y=new Wo(["value"],r);return y.initData(l,s),n&&n(p,y),Yhe({mainData:p,struct:a,structAttr:"graph",datas:{node:p,edge:y},datasAttr:{node:"data",edge:"edgeData"}}),a.update(),a}var HLe=function(e){_e(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r.hasSymbolVisual=!0,r}return t.prototype.init=function(r){e.prototype.init.apply(this,arguments);var i=this;function n(){return i._categoriesData}this.legendVisualProvider=new S4(n,n),this.fillDataTextStyle(r.edges||r.links),this._updateCategoriesData()},t.prototype.mergeOption=function(r){e.prototype.mergeOption.apply(this,arguments),this.fillDataTextStyle(r.edges||r.links),this._updateCategoriesData()},t.prototype.mergeDefaultAndTheme=function(r){e.prototype.mergeDefaultAndTheme.apply(this,arguments),Lv(r,"edgeLabel",["show"])},t.prototype.getInitialData=function(r,i){var n=r.edges||r.links||[],a=r.data||r.nodes||[],o=this;if(a&&n){MLe(this);var s=dde(a,n,this,!0,l);return q(s.edges,function(u){TLe(u.node1,u.node2,this,u.dataIndex)},this),s.data}function l(u,c){u.wrapMethod("getItemModel",function(p){var v=o._categoriesModels,m=p.getShallow("category"),g=v[m];return g&&(g.parentModel=p.parentModel,p.parentModel=g),p});var h=Qr.prototype.getModel;function d(p,v){var m=h.call(this,p,v);return m.resolveParentPath=f,m}c.wrapMethod("getItemModel",function(p){return p.resolveParentPath=f,p.getModel=d,p});function f(p){if(p&&(p[0]==="label"||p[1]==="label")){var v=p.slice();return p[0]==="label"?v[0]="edgeLabel":p[1]==="label"&&(v[1]="edgeLabel"),v}return p}}},t.prototype.getGraph=function(){return this.getData().graph},t.prototype.getEdgeData=function(){return this.getGraph().edgeData},t.prototype.getCategoriesData=function(){return this._categoriesData},t.prototype.formatTooltip=function(r,i,n){if(n==="edge"){var a=this.getData(),o=this.getDataParams(r,n),s=a.graph.getEdgeByIndex(r),l=a.getName(s.node1.dataIndex),u=a.getName(s.node2.dataIndex),c=[];return l!=null&&c.push(l),u!=null&&c.push(u),na("nameValue",{name:c.join(" > "),value:o.value,noValue:o.value==null})}var h=Bue({series:this,dataIndex:r,multipleSeries:i});return h},t.prototype._updateCategoriesData=function(){var r=qe(this.option.categories||[],function(n){return n.value!=null?n:Be({value:0},n)}),i=new Wo(["value"],this);i.initData(r),this._categoriesData=i,this._categoriesModels=i.mapArray(function(n){return i.getItemModel(n)})},t.prototype.setZoom=function(r){this.option.zoom=r},t.prototype.setCenter=function(r){this.option.center=r},t.prototype.isAnimationEnabled=function(){return e.prototype.isAnimationEnabled.call(this)&&!(this.get("layout")==="force"&&this.get(["force","layoutAnimation"]))},t.type="series.graph",t.dependencies=["grid","polar","geo","singleAxis","calendar"],t.defaultOption={z:2,coordinateSystem:"view",legendHoverLink:!0,layout:null,circular:{rotateLabel:!1},force:{initLayout:null,repulsion:[0,50],gravity:.1,friction:.6,edgeLength:30,layoutAnimation:!0},left:"center",top:"center",symbol:"circle",symbolSize:10,edgeSymbol:["none","none"],edgeSymbolSize:10,edgeLabel:{position:"middle",distance:5},draggable:!1,roam:!1,center:null,zoom:1,nodeScaleRatio:.6,label:{show:!1,formatter:"{b}"},itemStyle:{},lineStyle:{color:"#aaa",width:1,opacity:.5},emphasis:{scale:!0,label:{show:!0}},select:{itemStyle:{borderColor:"#212121"}}},t}(Di),ULe={type:"graphRoam",event:"graphRoam",update:"none"};function GLe(e){e.registerChartView(FLe),e.registerSeriesModel(HLe),e.registerProcessor(_Le),e.registerVisual(ALe),e.registerVisual(SLe),e.registerLayout(PLe),e.registerLayout(e.PRIORITY.VISUAL.POST_CHART_LAYOUT,ILe),e.registerLayout(kLe),e.registerCoordinateSystem("graphView",{dimensions:E4.dimensions,create:OLe}),e.registerAction({type:"focusNodeAdjacency",event:"focusNodeAdjacency",update:"series:focusNodeAdjacency"},pn),e.registerAction({type:"unfocusNodeAdjacency",event:"unfocusNodeAdjacency",update:"series:unfocusNodeAdjacency"},pn),e.registerAction(ULe,function(t,r,i){r.eachComponent({mainType:"series",query:t},function(n){var a=n.coordinateSystem,o=aV(a,t,void 0,i);n.setCenter&&n.setCenter(o.center),n.setZoom&&n.setZoom(o.zoom)})})}var jLe=function(){function e(){this.angle=0,this.width=10,this.r=10,this.x=0,this.y=0}return e}(),WLe=function(e){_e(t,e);function t(r){var i=e.call(this,r)||this;return i.type="pointer",i}return t.prototype.getDefaultShape=function(){return new jLe},t.prototype.buildPath=function(r,i){var n=Math.cos,a=Math.sin,o=i.r,s=i.width,l=i.angle,u=i.x-n(l)*s*(s>=o/3?1:2),c=i.y-a(l)*s*(s>=o/3?1:2);l=i.angle-Math.PI/2,r.moveTo(u,c),r.lineTo(i.x+n(l)*s,i.y+a(l)*s),r.lineTo(i.x+n(i.angle)*o,i.y+a(i.angle)*o),r.lineTo(i.x-n(l)*s,i.y-a(l)*s),r.lineTo(u,c)},t}(or);function qLe(e,t){var r=e.get("center"),i=t.getWidth(),n=t.getHeight(),a=Math.min(i,n),o=et(r[0],t.getWidth()),s=et(r[1],t.getHeight()),l=et(e.get("radius"),a/2);return{cx:o,cy:s,r:l}}function i_(e,t){var r=e==null?"":e+"";return t&&(it(t)?r=t.replace("{value}",r):xt(t)&&(r=t(e))),r}var YLe=function(e){_e(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r}return t.prototype.render=function(r,i,n){this.group.removeAll();var a=r.get(["axisLine","lineStyle","color"]),o=qLe(r,n);this._renderMain(r,i,n,a,o),this._data=r.getData()},t.prototype.dispose=function(){},t.prototype._renderMain=function(r,i,n,a,o){var s=this.group,l=r.get("clockwise"),u=-r.get("startAngle")/180*Math.PI,c=-r.get("endAngle")/180*Math.PI,h=r.getModel("axisLine"),d=h.get("roundCap"),f=d?$8:Zo,p=h.get("show"),v=h.getModel("lineStyle"),m=v.get("width"),g=[u,c];oN(g,!l),u=g[0],c=g[1];for(var y=c-u,x=u,b=[],_=0;p&&_<a.length;_++){var w=Math.min(Math.max(a[_][0],0),1);c=u+y*w;var S=new f({shape:{startAngle:x,endAngle:c,cx:o.cx,cy:o.cy,clockwise:l,r0:o.r-m,r:o.r},silent:!0});S.setStyle({fill:a[_][1]}),S.setStyle(v.getLineStyle(["color","width"])),b.push(S),x=c}b.reverse(),q(b,function(M){return s.add(M)});var A=function(M){if(M<=0)return a[0][1];var E;for(E=0;E<a.length;E++)if(a[E][0]>=M&&(E===0?0:a[E-1][0])<M)return a[E][1];return a[E-1][1]};this._renderTicks(r,i,n,A,o,u,c,l,m),this._renderTitleAndDetail(r,i,n,A,o),this._renderAnchor(r,o),this._renderPointer(r,i,n,A,o,u,c,l,m)},t.prototype._renderTicks=function(r,i,n,a,o,s,l,u,c){for(var h=this.group,d=o.cx,f=o.cy,p=o.r,v=+r.get("min"),m=+r.get("max"),g=r.getModel("splitLine"),y=r.getModel("axisTick"),x=r.getModel("axisLabel"),b=r.get("splitNumber"),_=y.get("splitNumber"),w=et(g.get("length"),p),S=et(y.get("length"),p),A=s,M=(l-s)/b,E=M/_,T=g.getModel("lineStyle").getLineStyle(),L=y.getModel("lineStyle").getLineStyle(),P=g.get("distance"),C,D,I=0;I<=b;I++){if(C=Math.cos(A),D=Math.sin(A),g.get("show")){var O=P?P+c:c,R=new $n({shape:{x1:C*(p-O)+d,y1:D*(p-O)+f,x2:C*(p-w-O)+d,y2:D*(p-w-O)+f},style:T,silent:!0});T.stroke==="auto"&&R.setStyle({stroke:a(I/b)}),h.add(R)}if(x.get("show")){var O=x.get("distance")+P,H=i_(rn(I/b*(m-v)+v),x.get("formatter")),j=a(I/b),N=C*(p-w-O)+d,k=D*(p-w-O)+f,G=x.get("rotate"),Y=0;G==="radial"?(Y=-A+2*Math.PI,Y>Math.PI/2&&(Y+=Math.PI)):G==="tangential"?Y=-A-Math.PI/2:kr(G)&&(Y=G*Math.PI/180),Y===0?h.add(new Dr({style:Ti(x,{text:H,x:N,y:k,verticalAlign:D<-.8?"top":D>.8?"bottom":"middle",align:C<-.4?"left":C>.4?"right":"center"},{inheritColor:j}),silent:!0})):h.add(new Dr({style:Ti(x,{text:H,x:N,y:k,verticalAlign:"middle",align:"center"},{inheritColor:j}),silent:!0,originX:N,originY:k,rotation:Y}))}if(y.get("show")&&I!==b){var O=y.get("distance");O=O?O+c:c;for(var F=0;F<=_;F++){C=Math.cos(A),D=Math.sin(A);var Z=new $n({shape:{x1:C*(p-O)+d,y1:D*(p-O)+f,x2:C*(p-S-O)+d,y2:D*(p-S-O)+f},silent:!0,style:L});L.stroke==="auto"&&Z.setStyle({stroke:a((I+F/_)/b)}),h.add(Z),A+=E}A-=E}else A+=M}},t.prototype._renderPointer=function(r,i,n,a,o,s,l,u,c){var h=this.group,d=this._data,f=this._progressEls,p=[],v=r.get(["pointer","show"]),m=r.getModel("progress"),g=m.get("show"),y=r.getData(),x=y.mapDimension("value"),b=+r.get("min"),_=+r.get("max"),w=[b,_],S=[s,l];function A(E,T){var L=y.getItemModel(E),P=L.getModel("pointer"),C=et(P.get("width"),o.r),D=et(P.get("length"),o.r),I=r.get(["pointer","icon"]),O=P.get("offsetCenter"),R=et(O[0],o.r),H=et(O[1],o.r),j=P.get("keepAspect"),N;return I?N=Sn(I,R-C/2,H-D,C,D,null,j):N=new WLe({shape:{angle:-Math.PI/2,width:C,r:D,x:R,y:H}}),N.rotation=-(T+Math.PI/2),N.x=o.cx,N.y=o.cy,N}function M(E,T){var L=m.get("roundCap"),P=L?$8:Zo,C=m.get("overlap"),D=C?m.get("width"):c/y.count(),I=C?o.r-D:o.r-(E+1)*D,O=C?o.r:o.r-E*D,R=new P({shape:{startAngle:s,endAngle:T,cx:o.cx,cy:o.cy,clockwise:u,r0:I,r:O}});return C&&(R.z2=_-y.get(x,E)%_),R}(g||v)&&(y.diff(d).add(function(E){var T=y.get(x,E);if(v){var L=A(E,s);Vi(L,{rotation:-((isNaN(+T)?S[0]:ti(T,w,S,!0))+Math.PI/2)},r),h.add(L),y.setItemGraphicEl(E,L)}if(g){var P=M(E,s),C=m.get("clip");Vi(P,{shape:{endAngle:ti(T,w,S,C)}},r),h.add(P),lL(r.seriesIndex,y.dataType,E,P),p[E]=P}}).update(function(E,T){var L=y.get(x,E);if(v){var P=d.getItemGraphicEl(T),C=P?P.rotation:s,D=A(E,C);D.rotation=C,Nr(D,{rotation:-((isNaN(+L)?S[0]:ti(L,w,S,!0))+Math.PI/2)},r),h.add(D),y.setItemGraphicEl(E,D)}if(g){var I=f[T],O=I?I.shape.endAngle:s,R=M(E,O),H=m.get("clip");Nr(R,{shape:{endAngle:ti(L,w,S,H)}},r),h.add(R),lL(r.seriesIndex,y.dataType,E,R),p[E]=R}}).execute(),y.each(function(E){var T=y.getItemModel(E),L=T.getModel("emphasis"),P=L.get("focus"),C=L.get("blurScope"),D=L.get("disabled");if(v){var I=y.getItemGraphicEl(E),O=y.getItemVisual(E,"style"),R=O.fill;if(I instanceof Ta){var H=I.style;I.useStyle(Be({image:H.image,x:H.x,y:H.y,width:H.width,height:H.height},O))}else I.useStyle(O),I.type!=="pointer"&&I.setColor(R);I.setStyle(T.getModel(["pointer","itemStyle"]).getItemStyle()),I.style.fill==="auto"&&I.setStyle("fill",a(ti(y.get(x,E),w,[0,1],!0))),I.z2EmphasisLift=0,Ya(I,T),Ji(I,P,C,D)}if(g){var j=p[E];j.useStyle(y.getItemVisual(E,"style")),j.setStyle(T.getModel(["progress","itemStyle"]).getItemStyle()),j.z2EmphasisLift=0,Ya(j,T),Ji(j,P,C,D)}}),this._progressEls=p)},t.prototype._renderAnchor=function(r,i){var n=r.getModel("anchor"),a=n.get("show");if(a){var o=n.get("size"),s=n.get("icon"),l=n.get("offsetCenter"),u=n.get("keepAspect"),c=Sn(s,i.cx-o/2+et(l[0],i.r),i.cy-o/2+et(l[1],i.r),o,o,null,u);c.z2=n.get("showAbove")?1:0,c.setStyle(n.getModel("itemStyle").getItemStyle()),this.group.add(c)}},t.prototype._renderTitleAndDetail=function(r,i,n,a,o){var s=this,l=r.getData(),u=l.mapDimension("value"),c=+r.get("min"),h=+r.get("max"),d=new Ct,f=[],p=[],v=r.isAnimationEnabled(),m=r.get(["pointer","showAbove"]);l.diff(this._data).add(function(g){f[g]=new Dr({silent:!0}),p[g]=new Dr({silent:!0})}).update(function(g,y){f[g]=s._titleEls[y],p[g]=s._detailEls[y]}).execute(),l.each(function(g){var y=l.getItemModel(g),x=l.get(u,g),b=new Ct,_=a(ti(x,[c,h],[0,1],!0)),w=y.getModel("title");if(w.get("show")){var S=w.get("offsetCenter"),A=o.cx+et(S[0],o.r),M=o.cy+et(S[1],o.r),E=f[g];E.attr({z2:m?0:2,style:Ti(w,{x:A,y:M,text:l.getName(g),align:"center",verticalAlign:"middle"},{inheritColor:_})}),b.add(E)}var T=y.getModel("detail");if(T.get("show")){var L=T.get("offsetCenter"),P=o.cx+et(L[0],o.r),C=o.cy+et(L[1],o.r),D=et(T.get("width"),o.r),I=et(T.get("height"),o.r),O=r.get(["progress","show"])?l.getItemVisual(g,"style").fill:_,E=p[g],R=T.get("formatter");E.attr({z2:m?0:2,style:Ti(T,{x:P,y:C,text:i_(x,R),width:isNaN(D)?null:D,height:isNaN(I)?null:I,align:"center",verticalAlign:"middle"},{inheritColor:O})}),zle(E,{normal:T},x,function(j){return i_(j,R)}),v&&Hle(E,g,l,r,{getFormattedLabel:function(j,N,k,G,Y,F){return i_(F?F.interpolatedValue:x,R)}}),b.add(E)}d.add(b)}),this.group.add(d),this._titleEls=f,this._detailEls=p},t.type="gauge",t}(yi),XLe=function(e){_e(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r.visualStyleAccessPath="itemStyle",r}return t.prototype.getInitialData=function(r,i){return By(this,["value"])},t.type="series.gauge",t.defaultOption={z:2,colorBy:"data",center:["50%","50%"],legendHoverLink:!0,radius:"75%",startAngle:225,endAngle:-45,clockwise:!0,min:0,max:100,splitNumber:10,axisLine:{show:!0,roundCap:!1,lineStyle:{color:[[1,"#E6EBF8"]],width:10}},progress:{show:!1,overlap:!0,width:10,roundCap:!1,clip:!0},splitLine:{show:!0,length:10,distance:10,lineStyle:{color:"#63677A",width:3,type:"solid"}},axisTick:{show:!0,splitNumber:5,length:6,distance:10,lineStyle:{color:"#63677A",width:1,type:"solid"}},axisLabel:{show:!0,distance:15,color:"#464646",fontSize:12,rotate:0},pointer:{icon:null,offsetCenter:[0,0],show:!0,showAbove:!0,length:"60%",width:6,keepAspect:!1},anchor:{show:!1,showAbove:!1,size:6,icon:"circle",offsetCenter:[0,0],keepAspect:!1,itemStyle:{color:"#fff",borderWidth:0,borderColor:"#5470c6"}},title:{show:!0,offsetCenter:[0,"20%"],color:"#464646",fontSize:16,valueAnimation:!1},detail:{show:!0,backgroundColor:"rgba(0,0,0,0)",borderWidth:0,borderColor:"#ccc",width:100,height:null,padding:[5,10],offsetCenter:[0,"40%"],color:"#464646",fontSize:30,fontWeight:"bold",lineHeight:30,valueAnimation:!1}},t}(Di);function ZLe(e){e.registerChartView(YLe),e.registerSeriesModel(XLe)}var QLe=["itemStyle","opacity"],KLe=function(e){_e(t,e);function t(r,i){var n=e.call(this)||this,a=n,o=new $o,s=new Dr;return a.setTextContent(s),n.setTextGuideLine(o),n.updateData(r,i,!0),n}return t.prototype.updateData=function(r,i,n){var a=this,o=r.hostModel,s=r.getItemModel(i),l=r.getItemLayout(i),u=s.getModel("emphasis"),c=s.get(QLe);c=c??1,n||Pu(a),a.useStyle(r.getItemVisual(i,"style")),a.style.lineJoin="round",n?(a.setShape({points:l.points}),a.style.opacity=0,Vi(a,{style:{opacity:c}},o,i)):Nr(a,{style:{opacity:c},shape:{points:l.points}},o,i),Ya(a,s),this._updateLabel(r,i),Ji(this,u.get("focus"),u.get("blurScope"),u.get("disabled"))},t.prototype._updateLabel=function(r,i){var n=this,a=this.getTextGuideLine(),o=n.getTextContent(),s=r.hostModel,l=r.getItemModel(i),u=r.getItemLayout(i),c=u.label,h=r.getItemVisual(i,"style"),d=h.fill;Xa(o,ia(l),{labelFetcher:r.hostModel,labelDataIndex:i,defaultOpacity:h.opacity,defaultText:r.getName(i)},{normal:{align:c.textAlign,verticalAlign:c.verticalAlign}}),n.setTextConfig({local:!0,inside:!!c.inside,insideStroke:d,outsideFill:d});var f=c.linePoints;a.setShape({points:f}),n.textGuideLineConfig={anchor:f?new Ut(f[0][0],f[0][1]):null},Nr(o,{style:{x:c.x,y:c.y}},s,i),o.attr({rotation:c.rotation,originX:c.x,originY:c.y,z2:10}),WN(n,qN(l),{stroke:d})},t}(Qo),JLe=function(e){_e(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r.ignoreLabelLineUpdate=!0,r}return t.prototype.render=function(r,i,n){var a=r.getData(),o=this._data,s=this.group;a.diff(o).add(function(l){var u=new KLe(a,l);a.setItemGraphicEl(l,u),s.add(u)}).update(function(l,u){var c=o.getItemGraphicEl(u);c.updateData(a,l),s.add(c),a.setItemGraphicEl(l,c)}).remove(function(l){var u=o.getItemGraphicEl(l);ew(u,r,l)}).execute(),this._data=a},t.prototype.remove=function(){this.group.removeAll(),this._data=null},t.prototype.dispose=function(){},t.type="funnel",t}(yi),$Le=function(e){_e(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r}return t.prototype.init=function(r){e.prototype.init.apply(this,arguments),this.legendVisualProvider=new S4(at(this.getData,this),at(this.getRawData,this)),this._defaultLabelLine(r)},t.prototype.getInitialData=function(r,i){return By(this,{coordDimensions:["value"],encodeDefaulter:kt(AN,this)})},t.prototype._defaultLabelLine=function(r){Lv(r,"labelLine",["show"]);var i=r.labelLine,n=r.emphasis.labelLine;i.show=i.show&&r.label.show,n.show=n.show&&r.emphasis.label.show},t.prototype.getDataParams=function(r){var i=this.getData(),n=e.prototype.getDataParams.call(this,r),a=i.mapDimension("value"),o=i.getSum(a);return n.percent=o?+(i.get(a,r)/o*100).toFixed(2):0,n.$vars.push("percent"),n},t.type="series.funnel",t.defaultOption={z:2,legendHoverLink:!0,colorBy:"data",left:80,top:60,right:80,bottom:60,minSize:"0%",maxSize:"100%",sort:"descending",orient:"vertical",gap:0,funnelAlign:"center",label:{show:!0,position:"outer"},labelLine:{show:!0,length:20,lineStyle:{width:1}},itemStyle:{borderColor:"#fff",borderWidth:1},emphasis:{label:{show:!0}},select:{itemStyle:{borderColor:"#212121"}}},t}(Di);function eke(e,t){return zn(e.getBoxLayoutParams(),{width:t.getWidth(),height:t.getHeight()})}function tke(e,t){for(var r=e.mapDimension("value"),i=e.mapArray(r,function(l){return l}),n=[],a=t==="ascending",o=0,s=e.count();o<s;o++)n[o]=o;return xt(t)?n.sort(t):t!=="none"&&n.sort(function(l,u){return a?i[l]-i[u]:i[u]-i[l]}),n}function rke(e){var t=e.hostModel,r=t.get("orient");e.each(function(i){var n=e.getItemModel(i),a=n.getModel("label"),o=a.get("position"),s=n.getModel("labelLine"),l=e.getItemLayout(i),u=l.points,c=o==="inner"||o==="inside"||o==="center"||o==="insideLeft"||o==="insideRight",h,d,f,p;if(c)o==="insideLeft"?(d=(u[0][0]+u[3][0])/2+5,f=(u[0][1]+u[3][1])/2,h="left"):o==="insideRight"?(d=(u[1][0]+u[2][0])/2-5,f=(u[1][1]+u[2][1])/2,h="right"):(d=(u[0][0]+u[1][0]+u[2][0]+u[3][0])/4,f=(u[0][1]+u[1][1]+u[2][1]+u[3][1])/4,h="center"),p=[[d,f],[d,f]];else{var v=void 0,m=void 0,g=void 0,y=void 0,x=s.get("length");o==="left"?(v=(u[3][0]+u[0][0])/2,m=(u[3][1]+u[0][1])/2,g=v-x,d=g-5,h="right"):o==="right"?(v=(u[1][0]+u[2][0])/2,m=(u[1][1]+u[2][1])/2,g=v+x,d=g+5,h="left"):o==="top"?(v=(u[3][0]+u[0][0])/2,m=(u[3][1]+u[0][1])/2,y=m-x,f=y-5,h="center"):o==="bottom"?(v=(u[1][0]+u[2][0])/2,m=(u[1][1]+u[2][1])/2,y=m+x,f=y+5,h="center"):o==="rightTop"?(v=r==="horizontal"?u[3][0]:u[1][0],m=r==="horizontal"?u[3][1]:u[1][1],r==="horizontal"?(y=m-x,f=y-5,h="center"):(g=v+x,d=g+5,h="top")):o==="rightBottom"?(v=u[2][0],m=u[2][1],r==="horizontal"?(y=m+x,f=y+5,h="center"):(g=v+x,d=g+5,h="bottom")):o==="leftTop"?(v=u[0][0],m=r==="horizontal"?u[0][1]:u[1][1],r==="horizontal"?(y=m-x,f=y-5,h="center"):(g=v-x,d=g-5,h="right")):o==="leftBottom"?(v=r==="horizontal"?u[1][0]:u[3][0],m=r==="horizontal"?u[1][1]:u[2][1],r==="horizontal"?(y=m+x,f=y+5,h="center"):(g=v-x,d=g-5,h="right")):(v=(u[1][0]+u[2][0])/2,m=(u[1][1]+u[2][1])/2,r==="horizontal"?(y=m+x,f=y+5,h="center"):(g=v+x,d=g+5,h="left")),r==="horizontal"?(g=v,d=g):(y=m,f=y),p=[[v,m],[g,y]]}l.label={linePoints:p,x:d,y:f,verticalAlign:"middle",textAlign:h,inside:c}})}function ike(e,t){e.eachSeriesByType("funnel",function(r){var i=r.getData(),n=i.mapDimension("value"),a=r.get("sort"),o=eke(r,t),s=r.get("orient"),l=o.width,u=o.height,c=tke(i,a),h=o.x,d=o.y,f=s==="horizontal"?[et(r.get("minSize"),u),et(r.get("maxSize"),u)]:[et(r.get("minSize"),l),et(r.get("maxSize"),l)],p=i.getDataExtent(n),v=r.get("min"),m=r.get("max");v==null&&(v=Math.min(p[0],0)),m==null&&(m=p[1]);var g=r.get("funnelAlign"),y=r.get("gap"),x=s==="horizontal"?l:u,b=(x-y*(i.count()-1))/i.count(),_=function(C,D){if(s==="horizontal"){var I=i.get(n,C)||0,O=ti(I,[v,m],f,!0),R=void 0;switch(g){case"top":R=d;break;case"center":R=d+(u-O)/2;break;case"bottom":R=d+(u-O);break}return[[D,R],[D,R+O]]}var H=i.get(n,C)||0,j=ti(H,[v,m],f,!0),N;switch(g){case"left":N=h;break;case"center":N=h+(l-j)/2;break;case"right":N=h+l-j;break}return[[N,D],[N+j,D]]};a==="ascending"&&(b=-b,y=-y,s==="horizontal"?h+=l:d+=u,c=c.reverse());for(var w=0;w<c.length;w++){var S=c[w],A=c[w+1],M=i.getItemModel(S);if(s==="horizontal"){var E=M.get(["itemStyle","width"]);E==null?E=b:(E=et(E,l),a==="ascending"&&(E=-E));var T=_(S,h),L=_(A,h+E);h+=E+y,i.setItemLayout(S,{points:T.concat(L.slice().reverse())})}else{var P=M.get(["itemStyle","height"]);P==null?P=b:(P=et(P,u),a==="ascending"&&(P=-P));var T=_(S,d),L=_(A,d+P);d+=P+y,i.setItemLayout(S,{points:T.concat(L.slice().reverse())})}}rke(i)})}function nke(e){e.registerChartView(JLe),e.registerSeriesModel($Le),e.registerLayout(ike),e.registerProcessor(A4("funnel"))}var ake=.3,oke=function(e){_e(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r._dataGroup=new Ct,r._initialized=!1,r}return t.prototype.init=function(){this.group.add(this._dataGroup)},t.prototype.render=function(r,i,n,a){this._progressiveEls=null;var o=this._dataGroup,s=r.getData(),l=this._data,u=r.coordinateSystem,c=u.dimensions,h=DY(r);s.diff(l).add(d).update(f).remove(p).execute();function d(m){var g=PY(s,o,m,c,u);iT(g,s,m,h)}function f(m,g){var y=l.getItemGraphicEl(g),x=fde(s,m,c,u);s.setItemGraphicEl(m,y),Nr(y,{shape:{points:x}},r,m),Pu(y),iT(y,s,m,h)}function p(m){var g=l.getItemGraphicEl(m);o.remove(g)}if(!this._initialized){this._initialized=!0;var v=ske(u,r,function(){setTimeout(function(){o.removeClipPath()})});o.setClipPath(v)}this._data=s},t.prototype.incrementalPrepareRender=function(r,i,n){this._initialized=!0,this._data=null,this._dataGroup.removeAll()},t.prototype.incrementalRender=function(r,i,n){for(var a=i.getData(),o=i.coordinateSystem,s=o.dimensions,l=DY(i),u=this._progressiveEls=[],c=r.start;c<r.end;c++){var h=PY(a,this._dataGroup,c,s,o);h.incremental=!0,iT(h,a,c,l),u.push(h)}},t.prototype.remove=function(){this._dataGroup&&this._dataGroup.removeAll(),this._data=null},t.type="parallel",t}(yi);function ske(e,t,r){var i=e.model,n=e.getRect(),a=new Tr({shape:{x:n.x,y:n.y,width:n.width,height:n.height}}),o=i.get("layout")==="horizontal"?"width":"height";return a.setShape(o,0),Vi(a,{shape:{width:n.width,height:n.height}},t,r),a}function fde(e,t,r,i){for(var n=[],a=0;a<r.length;a++){var o=r[a],s=e.get(e.mapDimension(o),t);lke(s,i.getAxis(o).type)||n.push(i.dataToPoint(s,o))}return n}function PY(e,t,r,i,n){var a=fde(e,r,i,n),o=new $o({shape:{points:a},z2:10});return t.add(o),e.setItemGraphicEl(r,o),o}function DY(e){var t=e.get("smooth",!0);return t===!0&&(t=ake),t=vd(t),qb(t)&&(t=0),{smooth:t}}function iT(e,t,r,i){e.useStyle(t.getItemVisual(r,"style")),e.style.fill=null,e.setShape("smooth",i.smooth);var n=t.getItemModel(r),a=n.getModel("emphasis");Ya(e,n,"lineStyle"),Ji(e,a.get("focus"),a.get("blurScope"),a.get("disabled"))}function lke(e,t){return t==="category"?e==null:e==null||isNaN(e)}var uke=function(e){_e(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r.visualStyleAccessPath="lineStyle",r.visualDrawType="stroke",r}return t.prototype.getInitialData=function(r,i){return Bd(null,this,{useEncodeDefaulter:at(cke,null,this)})},t.prototype.getRawIndicesByActiveState=function(r){var i=this.coordinateSystem,n=this.getData(),a=[];return i.eachActiveState(n,function(o,s){r===o&&a.push(n.getRawIndex(s))}),a},t.type="series.parallel",t.dependencies=["parallel"],t.defaultOption={z:2,coordinateSystem:"parallel",parallelIndex:0,label:{show:!1},inactiveOpacity:.05,activeOpacity:1,lineStyle:{width:1,opacity:.45,type:"solid"},emphasis:{label:{show:!1}},progressive:500,smooth:!1,animationEasing:"linear"},t}(Di);function cke(e){var t=e.ecModel.getComponent("parallel",e.get("parallelIndex"));if(t){var r={};return q(t.dimensions,function(i){var n=hke(i);r[i]=n}),r}}function hke(e){return+e.replace("dim","")}var dke=["lineStyle","opacity"],fke={seriesType:"parallel",reset:function(e,t){var r=e.coordinateSystem,i={normal:e.get(["lineStyle","opacity"]),active:e.get("activeOpacity"),inactive:e.get("inactiveOpacity")};return{progress:function(n,a){r.eachActiveState(a,function(o,s){var l=i[o];if(o==="normal"&&a.hasItemOption){var u=a.getItemModel(s).get(dke,!0);u!=null&&(l=u)}var c=a.ensureUniqueItemVisual(s,"style");c.opacity=l},n.start,n.end)}}}};function pke(e){vke(e),mke(e)}function vke(e){if(!e.parallel){var t=!1;q(e.series,function(r){r&&r.type==="parallel"&&(t=!0)}),t&&(e.parallel=[{}])}}function mke(e){var t=ci(e.parallelAxis);q(t,function(r){if(_t(r)){var i=r.parallelIndex||0,n=ci(e.parallel)[i];n&&n.parallelAxisDefault&&Wt(r,n.parallelAxisDefault,!1)}})}var gke=5,yke=function(e){_e(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r}return t.prototype.render=function(r,i,n){this._model=r,this._api=n,this._handlers||(this._handlers={},q(xke,function(a,o){n.getZr().on(o,this._handlers[o]=at(a,this))},this)),ky(this,"_throttledDispatchExpand",r.get("axisExpandRate"),"fixRate")},t.prototype.dispose=function(r,i){nw(this,"_throttledDispatchExpand"),q(this._handlers,function(n,a){i.getZr().off(a,n)}),this._handlers=null},t.prototype._throttledDispatchExpand=function(r){this._dispatchExpand(r)},t.prototype._dispatchExpand=function(r){r&&this._api.dispatchAction(Be({type:"parallelAxisExpand"},r))},t.type="parallel",t}(Gi),xke={mousedown:function(e){nT(this,"click")&&(this._mouseDownPoint=[e.offsetX,e.offsetY])},mouseup:function(e){var t=this._mouseDownPoint;if(nT(this,"click")&&t){var r=[e.offsetX,e.offsetY],i=Math.pow(t[0]-r[0],2)+Math.pow(t[1]-r[1],2);if(i>gke)return;var n=this._model.coordinateSystem.getSlidedAxisExpandWindow([e.offsetX,e.offsetY]);n.behavior!=="none"&&this._dispatchExpand({axisExpandWindow:n.axisExpandWindow})}this._mouseDownPoint=null},mousemove:function(e){if(!(this._mouseDownPoint||!nT(this,"mousemove"))){var t=this._model,r=t.coordinateSystem.getSlidedAxisExpandWindow([e.offsetX,e.offsetY]),i=r.behavior;i==="jump"&&this._throttledDispatchExpand.debounceNextCall(t.get("axisExpandDebounce")),this._throttledDispatchExpand(i==="none"?null:{axisExpandWindow:r.axisExpandWindow,animation:i==="jump"?null:{duration:0}})}}};function nT(e,t){var r=e._model;return r.get("axisExpandable")&&r.get("axisExpandTriggerOn")===t}var bke=function(e){_e(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r}return t.prototype.init=function(){e.prototype.init.apply(this,arguments),this.mergeOption({})},t.prototype.mergeOption=function(r){var i=this.option;r&&Wt(i,r,!0),this._initDimensions()},t.prototype.contains=function(r,i){var n=r.get("parallelIndex");return n!=null&&i.getComponent("parallel",n)===this},t.prototype.setAxisExpand=function(r){q(["axisExpandable","axisExpandCenter","axisExpandCount","axisExpandWidth","axisExpandWindow"],function(i){r.hasOwnProperty(i)&&(this.option[i]=r[i])},this)},t.prototype._initDimensions=function(){var r=this.dimensions=[],i=this.parallelAxisIndex=[],n=ni(this.ecModel.queryComponents({mainType:"parallelAxis"}),function(a){return(a.get("parallelIndex")||0)===this.componentIndex},this);q(n,function(a){r.push("dim"+a.get("dim")),i.push(a.componentIndex)})},t.type="parallel",t.dependencies=["parallelAxis"],t.layoutMode="box",t.defaultOption={z:0,left:80,top:60,right:80,bottom:60,layout:"horizontal",axisExpandable:!1,axisExpandCenter:null,axisExpandCount:0,axisExpandWidth:50,axisExpandRate:17,axisExpandDebounce:50,axisExpandSlideTriggerArea:[-.15,.05,.4],axisExpandTriggerOn:"click",parallelAxisDefault:null},t}(vr),wke=function(e){_e(t,e);function t(r,i,n,a,o){var s=e.call(this,r,i,n)||this;return s.type=a||"value",s.axisIndex=o,s}return t.prototype.isHorizontal=function(){return this.coordinateSystem.getModel().get("layout")!=="horizontal"},t}(Fu);function nm(e,t,r,i,n,a){e=e||0;var o=r[1]-r[0];if(n!=null&&(n=Bm(n,[0,o])),a!=null&&(a=Math.max(a,n??0)),i==="all"){var s=Math.abs(t[1]-t[0]);s=Bm(s,[0,o]),n=a=Bm(s,[n,a]),i=0}t[0]=Bm(t[0],r),t[1]=Bm(t[1],r);var l=aT(t,i);t[i]+=e;var u=n||0,c=r.slice();l.sign<0?c[0]+=u:c[1]-=u,t[i]=Bm(t[i],c);var h;return h=aT(t,i),n!=null&&(h.sign!==l.sign||h.span<n)&&(t[1-i]=t[i]+l.sign*n),h=aT(t,i),a!=null&&h.span>a&&(t[1-i]=t[i]+h.sign*a),t}function aT(e,t){var r=e[t]-e[1-t];return{span:Math.abs(r),sign:r>0?-1:r<0?1:t?-1:1}}function Bm(e,t){return Math.min(t[1]!=null?t[1]:1/0,Math.max(t[0]!=null?t[0]:-1/0,e))}var oT=q,pde=Math.min,vde=Math.max,IY=Math.floor,_ke=Math.ceil,LY=rn,Ake=Math.PI,Ske=function(){function e(t,r,i){this.type="parallel",this._axesMap=dt(),this._axesLayout={},this.dimensions=t.dimensions,this._model=t,this._init(t,r,i)}return e.prototype._init=function(t,r,i){var n=t.dimensions,a=t.parallelAxisIndex;oT(n,function(o,s){var l=a[s],u=r.getComponent("parallelAxis",l),c=this._axesMap.set(o,new wke(o,VC(u),[0,0],u.get("type"),l)),h=c.type==="category";c.onBand=h&&u.get("boundaryGap"),c.inverse=u.get("inverse"),u.axis=c,c.model=u,c.coordinateSystem=u.coordinateSystem=this},this)},e.prototype.update=function(t,r){this._updateAxesFromSeries(this._model,t)},e.prototype.containPoint=function(t){var r=this._makeLayoutInfo(),i=r.axisBase,n=r.layoutBase,a=r.pixelDimIndex,o=t[1-a],s=t[a];return o>=i&&o<=i+r.axisLength&&s>=n&&s<=n+r.layoutLength},e.prototype.getModel=function(){return this._model},e.prototype._updateAxesFromSeries=function(t,r){r.eachSeries(function(i){if(t.contains(i,r)){var n=i.getData();oT(this.dimensions,function(a){var o=this._axesMap.get(a);o.scale.unionExtentFromData(n,n.mapDimension(a)),H1(o.scale,o.model)},this)}},this)},e.prototype.resize=function(t,r){this._rect=zn(t.getBoxLayoutParams(),{width:r.getWidth(),height:r.getHeight()}),this._layoutAxes()},e.prototype.getRect=function(){return this._rect},e.prototype._makeLayoutInfo=function(){var t=this._model,r=this._rect,i=["x","y"],n=["width","height"],a=t.get("layout"),o=a==="horizontal"?0:1,s=r[n[o]],l=[0,s],u=this.dimensions.length,c=n_(t.get("axisExpandWidth"),l),h=n_(t.get("axisExpandCount")||0,[0,u]),d=t.get("axisExpandable")&&u>3&&u>h&&h>1&&c>0&&s>0,f=t.get("axisExpandWindow"),p;if(f)p=n_(f[1]-f[0],l),f[1]=f[0]+p;else{p=n_(c*(h-1),l);var v=t.get("axisExpandCenter")||IY(u/2);f=[c*v-p/2],f[1]=f[0]+p}var m=(s-p)/(u-h);m<3&&(m=0);var g=[IY(LY(f[0]/c,1))+1,_ke(LY(f[1]/c,1))-1],y=m/c*f[0];return{layout:a,pixelDimIndex:o,layoutBase:r[i[o]],layoutLength:s,axisBase:r[i[1-o]],axisLength:r[n[1-o]],axisExpandable:d,axisExpandWidth:c,axisCollapseWidth:m,axisExpandWindow:f,axisCount:u,winInnerIndices:g,axisExpandWindow0Pos:y}},e.prototype._layoutAxes=function(){var t=this._rect,r=this._axesMap,i=this.dimensions,n=this._makeLayoutInfo(),a=n.layout;r.each(function(o){var s=[0,n.axisLength],l=o.inverse?1:0;o.setExtent(s[l],s[1-l])}),oT(i,function(o,s){var l=(n.axisExpandable?Eke:Cke)(s,n),u={horizontal:{x:l.position,y:n.axisLength},vertical:{x:0,y:l.position}},c={horizontal:Ake/2,vertical:0},h=[u[a].x+t.x,u[a].y+t.y],d=c[a],f=js();Jv(f,f,d),Qc(f,f,h),this._axesLayout[o]={position:h,rotation:d,transform:f,axisNameAvailableWidth:l.axisNameAvailableWidth,axisLabelShow:l.axisLabelShow,nameTruncateMaxWidth:l.nameTruncateMaxWidth,tickDirection:1,labelDirection:1}},this)},e.prototype.getAxis=function(t){return this._axesMap.get(t)},e.prototype.dataToPoint=function(t,r){return this.axisCoordToPoint(this._axesMap.get(r).dataToCoord(t),r)},e.prototype.eachActiveState=function(t,r,i,n){i==null&&(i=0),n==null&&(n=t.count());var a=this._axesMap,o=this.dimensions,s=[],l=[];q(o,function(m){s.push(t.mapDimension(m)),l.push(a.get(m).model)});for(var u=this.hasAxisBrushed(),c=i;c<n;c++){var h=void 0;if(!u)h="normal";else{h="active";for(var d=t.getValues(s,c),f=0,p=o.length;f<p;f++){var v=l[f].getActiveState(d[f]);if(v==="inactive"){h="inactive";break}}}r(h,c)}},e.prototype.hasAxisBrushed=function(){for(var t=this.dimensions,r=this._axesMap,i=!1,n=0,a=t.length;n<a;n++)r.get(t[n]).model.getActiveState()!=="normal"&&(i=!0);return i},e.prototype.axisCoordToPoint=function(t,r){var i=this._axesLayout[r];return Au([t,0],i.transform)},e.prototype.getAxisLayout=function(t){return At(this._axesLayout[t])},e.prototype.getSlidedAxisExpandWindow=function(t){var r=this._makeLayoutInfo(),i=r.pixelDimIndex,n=r.axisExpandWindow.slice(),a=n[1]-n[0],o=[0,r.axisExpandWidth*(r.axisCount-1)];if(!this.containPoint(t))return{behavior:"none",axisExpandWindow:n};var s=t[i]-r.layoutBase-r.axisExpandWindow0Pos,l,u="slide",c=r.axisCollapseWidth,h=this._model.get("axisExpandSlideTriggerArea"),d=h[0]!=null;if(c)d&&c&&s<a*h[0]?(u="jump",l=s-a*h[2]):d&&c&&s>a*(1-h[0])?(u="jump",l=s-a*(1-h[2])):(l=s-a*h[1])>=0&&(l=s-a*(1-h[1]))<=0&&(l=0),l*=r.axisExpandWidth/c,l?nm(l,n,o,"all"):u="none";else{var f=n[1]-n[0],p=o[1]*s/f;n=[vde(0,p-f/2)],n[1]=pde(o[1],n[0]+f),n[0]=n[1]-f}return{axisExpandWindow:n,behavior:u}},e}();function n_(e,t){return pde(vde(e,t[0]),t[1])}function Cke(e,t){var r=t.layoutLength/(t.axisCount-1);return{position:r*e,axisNameAvailableWidth:r,axisLabelShow:!0}}function Eke(e,t){var r=t.layoutLength,i=t.axisExpandWidth,n=t.axisCount,a=t.axisCollapseWidth,o=t.winInnerIndices,s,l=a,u=!1,c;return e<o[0]?(s=e*a,c=a):e<=o[1]?(s=t.axisExpandWindow0Pos+e*i-t.axisExpandWindow[0],l=i,u=!0):(s=r-(n-1-e)*a,c=a),{position:s,axisNameAvailableWidth:l,axisLabelShow:u,nameTruncateMaxWidth:c}}function Mke(e,t){var r=[];return e.eachComponent("parallel",function(i,n){var a=new Ske(i,e,t);a.name="parallel_"+n,a.resize(i,t),i.coordinateSystem=a,a.model=i,r.push(a)}),e.eachSeries(function(i){if(i.get("coordinateSystem")==="parallel"){var n=i.getReferringComponents("parallel",wn).models[0];i.coordinateSystem=n.coordinateSystem}}),r}var Tke={create:Mke},JL=function(e){_e(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r.activeIntervals=[],r}return t.prototype.getAreaSelectStyle=function(){return Rv([["fill","color"],["lineWidth","borderWidth"],["stroke","borderColor"],["width","width"],["opacity","opacity"]])(this.getModel("areaSelectStyle"))},t.prototype.setActiveIntervals=function(r){var i=this.activeIntervals=At(r);if(i)for(var n=i.length-1;n>=0;n--)Ml(i[n])},t.prototype.getActiveState=function(r){var i=this.activeIntervals;if(!i.length)return"normal";if(r==null||isNaN(+r))return"inactive";if(i.length===1){var n=i[0];if(n[0]<=r&&r<=n[1])return"active"}else for(var a=0,o=i.length;a<o;a++)if(i[a][0]<=r&&r<=i[a][1])return"active";return"inactive"},t}(vr);Mn(JL,y4);var Nv=!0,mw=Math.min,j1=Math.max,Pke=Math.pow,Dke=1e4,Ike=6,Lke=6,kY="globalPan",kke={w:[0,0],e:[0,1],n:[1,0],s:[1,1]},Rke={w:"ew",e:"ew",n:"ns",s:"ns",ne:"nesw",sw:"nesw",nw:"nwse",se:"nwse"},RY={brushStyle:{lineWidth:2,stroke:"rgba(210,219,238,0.3)",fill:"#D2DBEE"},transformable:!0,brushMode:"single",removeOnClick:!1},Oke=0,vV=function(e){_e(t,e);function t(r){var i=e.call(this)||this;return i._track=[],i._covers=[],i._handlers={},i._zr=r,i.group=new Ct,i._uid="brushController_"+Oke++,q(Uke,function(n,a){this._handlers[a]=at(n,this)},i),i}return t.prototype.enableBrush=function(r){return this._brushType&&this._doDisableBrush(),r.brushType&&this._doEnableBrush(r),this},t.prototype._doEnableBrush=function(r){var i=this._zr;this._enableGlobalPan||CDe(i,kY,this._uid),q(this._handlers,function(n,a){i.on(a,n)}),this._brushType=r.brushType,this._brushOption=Wt(At(RY),r,!0)},t.prototype._doDisableBrush=function(){var r=this._zr;EDe(r,kY,this._uid),q(this._handlers,function(i,n){r.off(n,i)}),this._brushType=this._brushOption=null},t.prototype.setPanels=function(r){if(r&&r.length){var i=this._panels={};q(r,function(n){i[n.panelId]=At(n)})}else this._panels=null;return this},t.prototype.mount=function(r){r=r||{},this._enableGlobalPan=r.enableGlobalPan;var i=this.group;return this._zr.add(i),i.attr({x:r.x||0,y:r.y||0,rotation:r.rotation||0,scaleX:r.scaleX||1,scaleY:r.scaleY||1}),this._transform=i.getLocalTransform(),this},t.prototype.updateCovers=function(r){r=qe(r,function(d){return Wt(At(RY),d,!0)});var i="\0-brush-index-",n=this._covers,a=this._covers=[],o=this,s=this._creatingCover;return new yd(n,r,u,l).add(c).update(c).remove(h).execute(),this;function l(d,f){return(d.id!=null?d.id:i+f)+"-"+d.brushType}function u(d,f){return l(d.__brushOption,f)}function c(d,f){var p=r[d];if(f!=null&&n[f]===s)a[d]=n[f];else{var v=a[d]=f!=null?(n[f].__brushOption=p,n[f]):gde(o,mde(o,p));mV(o,v)}}function h(d){n[d]!==s&&o.group.remove(n[d])}},t.prototype.unmount=function(){return this.enableBrush(!1),$L(this),this._zr.remove(this.group),this},t.prototype.dispose=function(){this.unmount(),this.off()},t}(Vl);function mde(e,t){var r=jC[t.brushType].createCover(e,t);return r.__brushOption=t,xde(r,t),e.group.add(r),r}function gde(e,t){var r=gV(t);return r.endCreating&&(r.endCreating(e,t),xde(t,t.__brushOption)),t}function yde(e,t){var r=t.__brushOption;gV(t).updateCoverShape(e,t,r.range,r)}function xde(e,t){var r=t.z;r==null&&(r=Dke),e.traverse(function(i){i.z=r,i.z2=r})}function mV(e,t){gV(t).updateCommon(e,t),yde(e,t)}function gV(e){return jC[e.__brushOption.brushType]}function yV(e,t,r){var i=e._panels;if(!i)return Nv;var n,a=e._transform;return q(i,function(o){o.isTargetByCursor(t,r,a)&&(n=o)}),n}function bde(e,t){var r=e._panels;if(!r)return Nv;var i=t.__brushOption.panelId;return i!=null?r[i]:Nv}function $L(e){var t=e._covers,r=t.length;return q(t,function(i){e.group.remove(i)},e),t.length=0,!!r}function Vv(e,t){var r=qe(e._covers,function(i){var n=i.__brushOption,a=At(n.range);return{brushType:n.brushType,panelId:n.panelId,range:a}});e.trigger("brush",{areas:r,isEnd:!!t.isEnd,removeOnClick:!!t.removeOnClick})}function Bke(e){var t=e._track;if(!t.length)return!1;var r=t[t.length-1],i=t[0],n=r[0]-i[0],a=r[1]-i[1],o=Pke(n*n+a*a,.5);return o>Ike}function wde(e){var t=e.length-1;return t<0&&(t=0),[e[0],e[t]]}function _de(e,t,r,i){var n=new Ct;return n.add(new Tr({name:"main",style:xV(r),silent:!0,draggable:!0,cursor:"move",drift:kt(OY,e,t,n,["n","s","w","e"]),ondragend:kt(Vv,t,{isEnd:!0})})),q(i,function(a){n.add(new Tr({name:a.join(""),style:{opacity:0},draggable:!0,silent:!0,invisible:!0,drift:kt(OY,e,t,n,a),ondragend:kt(Vv,t,{isEnd:!0})}))}),n}function Ade(e,t,r,i){var n=i.brushStyle.lineWidth||0,a=j1(n,Lke),o=r[0][0],s=r[1][0],l=o-n/2,u=s-n/2,c=r[0][1],h=r[1][1],d=c-a+n/2,f=h-a+n/2,p=c-o,v=h-s,m=p+n,g=v+n;xh(e,t,"main",o,s,p,v),i.transformable&&(xh(e,t,"w",l,u,a,g),xh(e,t,"e",d,u,a,g),xh(e,t,"n",l,u,m,a),xh(e,t,"s",l,f,m,a),xh(e,t,"nw",l,u,a,a),xh(e,t,"ne",d,u,a,a),xh(e,t,"sw",l,f,a,a),xh(e,t,"se",d,f,a,a))}function ek(e,t){var r=t.__brushOption,i=r.transformable,n=t.childAt(0);n.useStyle(xV(r)),n.attr({silent:!i,cursor:i?"move":"default"}),q([["w"],["e"],["n"],["s"],["s","e"],["s","w"],["n","e"],["n","w"]],function(a){var o=t.childOfName(a.join("")),s=a.length===1?tk(e,a[0]):Vke(e,a);o&&o.attr({silent:!i,invisible:!i,cursor:i?Rke[s]+"-resize":null})})}function xh(e,t,r,i,n,a,o){var s=t.childOfName(r);s&&s.setShape(zke(bV(e,t,[[i,n],[i+a,n+o]])))}function xV(e){return bt({strokeNoScale:!0},e.brushStyle)}function Sde(e,t,r,i){var n=[mw(e,r),mw(t,i)],a=[j1(e,r),j1(t,i)];return[[n[0],a[0]],[n[1],a[1]]]}function Nke(e){return yv(e.group)}function tk(e,t){var r={w:"left",e:"right",n:"top",s:"bottom"},i={left:"w",right:"e",top:"n",bottom:"s"},n=_C(r[t],Nke(e));return i[n]}function Vke(e,t){var r=[tk(e,t[0]),tk(e,t[1])];return(r[0]==="e"||r[0]==="w")&&r.reverse(),r.join("")}function OY(e,t,r,i,n,a){var o=r.__brushOption,s=e.toRectRange(o.range),l=Cde(t,n,a);q(i,function(u){var c=kke[u];s[c[0]][c[1]]+=l[c[0]]}),o.range=e.fromRectRange(Sde(s[0][0],s[1][0],s[0][1],s[1][1])),mV(t,r),Vv(t,{isEnd:!1})}function Fke(e,t,r,i){var n=t.__brushOption.range,a=Cde(e,r,i);q(n,function(o){o[0]+=a[0],o[1]+=a[1]}),mV(e,t),Vv(e,{isEnd:!1})}function Cde(e,t,r){var i=e.group,n=i.transformCoordToLocal(t,r),a=i.transformCoordToLocal(0,0);return[n[0]-a[0],n[1]-a[1]]}function bV(e,t,r){var i=bde(e,t);return i&&i!==Nv?i.clipPath(r,e._transform):At(r)}function zke(e){var t=mw(e[0][0],e[1][0]),r=mw(e[0][1],e[1][1]),i=j1(e[0][0],e[1][0]),n=j1(e[0][1],e[1][1]);return{x:t,y:r,width:i-t,height:n-r}}function Hke(e,t,r){if(!(!e._brushType||Gke(e,t.offsetX,t.offsetY))){var i=e._zr,n=e._covers,a=yV(e,t,r);if(!e._dragging)for(var o=0;o<n.length;o++){var s=n[o].__brushOption;if(a&&(a===Nv||s.panelId===a.panelId)&&jC[s.brushType].contain(n[o],r[0],r[1]))return}a&&i.setCursorStyle("crosshair")}}function rk(e){var t=e.event;t.preventDefault&&t.preventDefault()}function ik(e,t,r){return e.childOfName("main").contain(t,r)}function Ede(e,t,r,i){var n=e._creatingCover,a=e._creatingPanel,o=e._brushOption,s;if(e._track.push(r.slice()),Bke(e)||n){if(a&&!n){o.brushMode==="single"&&$L(e);var l=At(o);l.brushType=BY(l.brushType,a),l.panelId=a===Nv?null:a.panelId,n=e._creatingCover=mde(e,l),e._covers.push(n)}if(n){var u=jC[BY(e._brushType,a)],c=n.__brushOption;c.range=u.getCreatingRange(bV(e,n,e._track)),i&&(gde(e,n),u.updateCommon(e,n)),yde(e,n),s={isEnd:i}}}else i&&o.brushMode==="single"&&o.removeOnClick&&yV(e,t,r)&&$L(e)&&(s={isEnd:i,removeOnClick:!0});return s}function BY(e,t){return e==="auto"?t.defaultBrushType:e}var Uke={mousedown:function(e){if(this._dragging)NY(this,e);else if(!e.target||!e.target.draggable){rk(e);var t=this.group.transformCoordToLocal(e.offsetX,e.offsetY);this._creatingCover=null;var r=this._creatingPanel=yV(this,e,t);r&&(this._dragging=!0,this._track=[t.slice()])}},mousemove:function(e){var t=e.offsetX,r=e.offsetY,i=this.group.transformCoordToLocal(t,r);if(Hke(this,e,i),this._dragging){rk(e);var n=Ede(this,e,i,!1);n&&Vv(this,n)}},mouseup:function(e){NY(this,e)}};function NY(e,t){if(e._dragging){rk(t);var r=t.offsetX,i=t.offsetY,n=e.group.transformCoordToLocal(r,i),a=Ede(e,t,n,!0);e._dragging=!1,e._track=[],e._creatingCover=null,a&&Vv(e,a)}}function Gke(e,t,r){var i=e._zr;return t<0||t>i.getWidth()||r<0||r>i.getHeight()}var jC={lineX:VY(0),lineY:VY(1),rect:{createCover:function(e,t){function r(i){return i}return _de({toRectRange:r,fromRectRange:r},e,t,[["w"],["e"],["n"],["s"],["s","e"],["s","w"],["n","e"],["n","w"]])},getCreatingRange:function(e){var t=wde(e);return Sde(t[1][0],t[1][1],t[0][0],t[0][1])},updateCoverShape:function(e,t,r,i){Ade(e,t,r,i)},updateCommon:ek,contain:ik},polygon:{createCover:function(e,t){var r=new Ct;return r.add(new $o({name:"main",style:xV(t),silent:!0})),r},getCreatingRange:function(e){return e},endCreating:function(e,t){t.remove(t.childAt(0)),t.add(new Qo({name:"main",draggable:!0,drift:kt(Fke,e,t),ondragend:kt(Vv,e,{isEnd:!0})}))},updateCoverShape:function(e,t,r,i){t.childAt(0).setShape({points:bV(e,t,r)})},updateCommon:ek,contain:ik}};function VY(e){return{createCover:function(t,r){return _de({toRectRange:function(i){var n=[i,[0,100]];return e&&n.reverse(),n},fromRectRange:function(i){return i[e]}},t,r,[[["w"],["e"]],[["n"],["s"]]][e])},getCreatingRange:function(t){var r=wde(t),i=mw(r[0][e],r[1][e]),n=j1(r[0][e],r[1][e]);return[i,n]},updateCoverShape:function(t,r,i,n){var a,o=bde(t,r);if(o!==Nv&&o.getLinearBrushOtherExtent)a=o.getLinearBrushOtherExtent(e);else{var s=t._zr;a=[0,[s.getWidth(),s.getHeight()][1-e]]}var l=[i,a];e&&l.reverse(),Ade(t,r,l,n)},updateCommon:ek,contain:ik}}function Mde(e){return e=wV(e),function(t){return Nle(t,e)}}function Tde(e,t){return e=wV(e),function(r){var i=t??r,n=i?e.width:e.height,a=i?e.x:e.y;return[a,a+(n||0)]}}function Pde(e,t,r){var i=wV(e);return function(n,a){return i.contain(a[0],a[1])&&!zC(n,t,r)}}function wV(e){return qt.create(e)}var jke=["axisLine","axisTickLabel","axisName"],Wke=function(e){_e(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r}return t.prototype.init=function(r,i){e.prototype.init.apply(this,arguments),(this._brushController=new vV(i.getZr())).on("brush",at(this._onBrush,this))},t.prototype.render=function(r,i,n,a){if(!qke(r,i,a)){this.axisModel=r,this.api=n,this.group.removeAll();var o=this._axisGroup;if(this._axisGroup=new Ct,this.group.add(this._axisGroup),!!r.get("show")){var s=Xke(r,i),l=s.coordinateSystem,u=r.getAreaSelectStyle(),c=u.width,h=r.axis.dim,d=l.getAxisLayout(h),f=Be({strokeContainThreshold:c},d),p=new qo(r,f);q(jke,p.add,p),this._axisGroup.add(p.getGroup()),this._refreshBrushController(f,u,r,s,c,n),f4(o,this._axisGroup,r)}}},t.prototype._refreshBrushController=function(r,i,n,a,o,s){var l=n.axis.getExtent(),u=l[1]-l[0],c=Math.min(30,Math.abs(u)*.1),h=qt.create({x:l[0],y:-o/2,width:u,height:o});h.x-=c,h.width+=2*c,this._brushController.mount({enableGlobalPan:!0,rotation:r.rotation,x:r.position[0],y:r.position[1]}).setPanels([{panelId:"pl",clipPath:Mde(h),isTargetByCursor:Pde(h,s,a),getLinearBrushOtherExtent:Tde(h,0)}]).enableBrush({brushType:"lineX",brushStyle:i,removeOnClick:!0}).updateCovers(Yke(n))},t.prototype._onBrush=function(r){var i=r.areas,n=this.axisModel,a=n.axis,o=qe(i,function(s){return[a.coordToData(s.range[0],!0),a.coordToData(s.range[1],!0)]});(!n.option.realtime===r.isEnd||r.removeOnClick)&&this.api.dispatchAction({type:"axisAreaSelect",parallelAxisId:n.id,intervals:o})},t.prototype.dispose=function(){this._brushController.dispose()},t.type="parallelAxis",t}(Gi);function qke(e,t,r){return r&&r.type==="axisAreaSelect"&&t.findComponents({mainType:"parallelAxis",query:r})[0]===e}function Yke(e){var t=e.axis;return qe(e.activeIntervals,function(r){return{brushType:"lineX",panelId:"pl",range:[t.dataToCoord(r[0],!0),t.dataToCoord(r[1],!0)]}})}function Xke(e,t){return t.getComponent("parallel",e.get("parallelIndex"))}var Zke={type:"axisAreaSelect",event:"axisAreaSelected"};function Qke(e){e.registerAction(Zke,function(t,r){r.eachComponent({mainType:"parallelAxis",query:t},function(i){i.axis.model.setActiveIntervals(t.intervals)})}),e.registerAction("parallelAxisExpand",function(t,r){r.eachComponent({mainType:"parallel",query:t},function(i){i.setAxisExpand(t)})})}var Kke={type:"value",areaSelectStyle:{width:20,borderWidth:1,borderColor:"rgba(160,197,232)",color:"rgba(160,197,232)",opacity:.3},realtime:!0,z:10};function Dde(e){e.registerComponentView(yke),e.registerComponentModel(bke),e.registerCoordinateSystem("parallel",Tke),e.registerPreprocessor(pke),e.registerComponentModel(JL),e.registerComponentView(Wke),G1(e,"parallel",JL,Kke),Qke(e)}function Jke(e){ir(Dde),e.registerChartView(oke),e.registerSeriesModel(uke),e.registerVisual(e.PRIORITY.VISUAL.BRUSH,fke)}var $ke=function(){function e(){this.x1=0,this.y1=0,this.x2=0,this.y2=0,this.cpx1=0,this.cpy1=0,this.cpx2=0,this.cpy2=0,this.extent=0}return e}(),eRe=function(e){_e(t,e);function t(r){return e.call(this,r)||this}return t.prototype.getDefaultShape=function(){return new $ke},t.prototype.buildPath=function(r,i){var n=i.extent;r.moveTo(i.x1,i.y1),r.bezierCurveTo(i.cpx1,i.cpy1,i.cpx2,i.cpy2,i.x2,i.y2),i.orient==="vertical"?(r.lineTo(i.x2+n,i.y2),r.bezierCurveTo(i.cpx2+n,i.cpy2,i.cpx1+n,i.cpy1,i.x1+n,i.y1)):(r.lineTo(i.x2,i.y2+n),r.bezierCurveTo(i.cpx2,i.cpy2+n,i.cpx1,i.cpy1+n,i.x1,i.y1+n)),r.closePath()},t.prototype.highlight=function(){md(this)},t.prototype.downplay=function(){gd(this)},t}(or),tRe=function(e){_e(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r._focusAdjacencyDisabled=!1,r}return t.prototype.render=function(r,i,n){var a=this,o=r.getGraph(),s=this.group,l=r.layoutInfo,u=l.width,c=l.height,h=r.getData(),d=r.getData("edge"),f=r.get("orient");this._model=r,s.removeAll(),s.x=l.x,s.y=l.y,o.eachEdge(function(p){var v=new eRe,m=Dt(v);m.dataIndex=p.dataIndex,m.seriesIndex=r.seriesIndex,m.dataType="edge";var g=p.getModel(),y=g.getModel("lineStyle"),x=y.get("curveness"),b=p.node1.getLayout(),_=p.node1.getModel(),w=_.get("localX"),S=_.get("localY"),A=p.node2.getLayout(),M=p.node2.getModel(),E=M.get("localX"),T=M.get("localY"),L=p.getLayout(),P,C,D,I,O,R,H,j;v.shape.extent=Math.max(1,L.dy),v.shape.orient=f,f==="vertical"?(P=(w!=null?w*u:b.x)+L.sy,C=(S!=null?S*c:b.y)+b.dy,D=(E!=null?E*u:A.x)+L.ty,I=T!=null?T*c:A.y,O=P,R=C*(1-x)+I*x,H=D,j=C*x+I*(1-x)):(P=(w!=null?w*u:b.x)+b.dx,C=(S!=null?S*c:b.y)+L.sy,D=E!=null?E*u:A.x,I=(T!=null?T*c:A.y)+L.ty,O=P*(1-x)+D*x,R=C,H=P*x+D*(1-x),j=I),v.setShape({x1:P,y1:C,x2:D,y2:I,cpx1:O,cpy1:R,cpx2:H,cpy2:j}),v.useStyle(y.getItemStyle()),FY(v.style,f,p);var N=""+g.get("value"),k=ia(g,"edgeLabel");Xa(v,k,{labelFetcher:{getFormattedLabel:function(F,Z,ne,re,ae,he){return r.getFormattedLabel(F,Z,"edge",re,Vc(ae,k.normal&&k.normal.get("formatter"),N),he)}},labelDataIndex:p.dataIndex,defaultText:N}),v.setTextConfig({position:"inside"});var G=g.getModel("emphasis");Ya(v,g,"lineStyle",function(F){var Z=F.getItemStyle();return FY(Z,f,p),Z}),s.add(v),d.setItemGraphicEl(p.dataIndex,v);var Y=G.get("focus");Ji(v,Y==="adjacency"?p.getAdjacentDataIndices():Y==="trajectory"?p.getTrajectoryDataIndices():Y,G.get("blurScope"),G.get("disabled"))}),o.eachNode(function(p){var v=p.getLayout(),m=p.getModel(),g=m.get("localX"),y=m.get("localY"),x=m.getModel("emphasis"),b=m.get(["itemStyle","borderRadius"])||0,_=new Tr({shape:{x:g!=null?g*u:v.x,y:y!=null?y*c:v.y,width:v.dx,height:v.dy,r:b},style:m.getModel("itemStyle").getItemStyle(),z2:10});Xa(_,ia(m),{labelFetcher:{getFormattedLabel:function(S,A){return r.getFormattedLabel(S,A,"node")}},labelDataIndex:p.dataIndex,defaultText:p.id}),_.disableLabelAnimation=!0,_.setStyle("fill",p.getVisual("color")),_.setStyle("decal",p.getVisual("style").decal),Ya(_,m),s.add(_),h.setItemGraphicEl(p.dataIndex,_),Dt(_).dataType="node";var w=x.get("focus");Ji(_,w==="adjacency"?p.getAdjacentDataIndices():w==="trajectory"?p.getTrajectoryDataIndices():w,x.get("blurScope"),x.get("disabled"))}),h.eachItemGraphicEl(function(p,v){var m=h.getItemModel(v);m.get("draggable")&&(p.drift=function(g,y){a._focusAdjacencyDisabled=!0,this.shape.x+=g,this.shape.y+=y,this.dirty(),n.dispatchAction({type:"dragNode",seriesId:r.id,dataIndex:h.getRawIndex(v),localX:this.shape.x/u,localY:this.shape.y/c})},p.ondragend=function(){a._focusAdjacencyDisabled=!1},p.draggable=!0,p.cursor="move")}),!this._data&&r.isAnimationEnabled()&&s.setClipPath(rRe(s.getBoundingRect(),r,function(){s.removeClipPath()})),this._data=r.getData()},t.prototype.dispose=function(){},t.type="sankey",t}(yi);function FY(e,t,r){switch(e.fill){case"source":e.fill=r.node1.getVisual("color"),e.decal=r.node1.getVisual("style").decal;break;case"target":e.fill=r.node2.getVisual("color"),e.decal=r.node2.getVisual("style").decal;break;case"gradient":var i=r.node1.getVisual("color"),n=r.node2.getVisual("color");it(i)&&it(n)&&(e.fill=new Sy(0,0,+(t==="horizontal"),+(t==="vertical"),[{color:i,offset:0},{color:n,offset:1}]))}}function rRe(e,t,r){var i=new Tr({shape:{x:e.x-10,y:e.y-10,width:0,height:e.height+20}});return Vi(i,{shape:{width:e.width+20}},t,r),i}var iRe=function(e){_e(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r}return t.prototype.getInitialData=function(r,i){var n=r.edges||r.links,a=r.data||r.nodes,o=r.levels;this.levelModels=[];for(var s=this.levelModels,l=0;l<o.length;l++)o[l].depth!=null&&o[l].depth>=0&&(s[o[l].depth]=new Qr(o[l],this,i));if(a&&n){var u=dde(a,n,this,!0,c);return u.data}function c(h,d){h.wrapMethod("getItemModel",function(f,p){var v=f.parentModel,m=v.getData().getItemLayout(p);if(m){var g=m.depth,y=v.levelModels[g];y&&(f.parentModel=y)}return f}),d.wrapMethod("getItemModel",function(f,p){var v=f.parentModel,m=v.getGraph().getEdgeByIndex(p),g=m.node1.getLayout();if(g){var y=g.depth,x=v.levelModels[y];x&&(f.parentModel=x)}return f})}},t.prototype.setNodePosition=function(r,i){var n=this.option.data||this.option.nodes,a=n[r];a.localX=i[0],a.localY=i[1]},t.prototype.getGraph=function(){return this.getData().graph},t.prototype.getEdgeData=function(){return this.getGraph().edgeData},t.prototype.formatTooltip=function(r,i,n){function a(f){return isNaN(f)||f==null}if(n==="edge"){var o=this.getDataParams(r,n),s=o.data,l=o.value,u=s.source+" -- "+s.target;return na("nameValue",{name:u,value:l,noValue:a(l)})}else{var c=this.getGraph().getNodeByIndex(r),h=c.getLayout().value,d=this.getDataParams(r,n).data.name;return na("nameValue",{name:d!=null?d+"":null,value:h,noValue:a(h)})}},t.prototype.optionUpdated=function(){},t.prototype.getDataParams=function(r,i){var n=e.prototype.getDataParams.call(this,r,i);if(n.value==null&&i==="node"){var a=this.getGraph().getNodeByIndex(r),o=a.getLayout().value;n.value=o}return n},t.type="series.sankey",t.defaultOption={z:2,coordinateSystem:"view",left:"5%",top:"5%",right:"20%",bottom:"5%",orient:"horizontal",nodeWidth:20,nodeGap:8,draggable:!0,layoutIterations:32,label:{show:!0,position:"right",fontSize:12},edgeLabel:{show:!1,fontSize:12},levels:[],nodeAlign:"justify",lineStyle:{color:"#314656",opacity:.2,curveness:.5},emphasis:{label:{show:!0},lineStyle:{opacity:.5}},select:{itemStyle:{borderColor:"#212121"}},animationEasing:"linear",animationDuration:1e3},t}(Di);function nRe(e,t){e.eachSeriesByType("sankey",function(r){var i=r.get("nodeWidth"),n=r.get("nodeGap"),a=aRe(r,t);r.layoutInfo=a;var o=a.width,s=a.height,l=r.getGraph(),u=l.nodes,c=l.edges;sRe(u);var h=ni(u,function(v){return v.getLayout().value===0}),d=h.length!==0?0:r.get("layoutIterations"),f=r.get("orient"),p=r.get("nodeAlign");oRe(u,c,i,n,o,s,d,f,p)})}function aRe(e,t){return zn(e.getBoxLayoutParams(),{width:t.getWidth(),height:t.getHeight()})}function oRe(e,t,r,i,n,a,o,s,l){lRe(e,t,r,n,a,s,l),dRe(e,t,a,n,i,o,s),wRe(e,s)}function sRe(e){q(e,function(t){var r=tp(t.outEdges,aS),i=tp(t.inEdges,aS),n=t.getValue()||0,a=Math.max(r,i,n);t.setLayout({value:a},!0)})}function lRe(e,t,r,i,n,a,o){for(var s=[],l=[],u=[],c=[],h=0,d=0;d<t.length;d++)s[d]=1;for(var d=0;d<e.length;d++)l[d]=e[d].inEdges.length,l[d]===0&&u.push(e[d]);for(var f=-1;u.length;){for(var p=0;p<u.length;p++){var v=u[p],m=v.hostGraph.data.getRawDataItem(v.dataIndex),g=m.depth!=null&&m.depth>=0;g&&m.depth>f&&(f=m.depth),v.setLayout({depth:g?m.depth:h},!0),a==="vertical"?v.setLayout({dy:r},!0):v.setLayout({dx:r},!0);for(var y=0;y<v.outEdges.length;y++){var x=v.outEdges[y],b=t.indexOf(x);s[b]=0;var _=x.node2,w=e.indexOf(_);--l[w]===0&&c.indexOf(_)<0&&c.push(_)}}++h,u=c,c=[]}for(var d=0;d<s.length;d++)if(s[d]===1)throw new Error("Sankey is a DAG, the original data has cycle!");var S=f>h-1?f:h-1;o&&o!=="left"&&uRe(e,o,a,S);var A=a==="vertical"?(n-r)/S:(i-r)/S;hRe(e,A,a)}function Ide(e){var t=e.hostGraph.data.getRawDataItem(e.dataIndex);return t.depth!=null&&t.depth>=0}function uRe(e,t,r,i){if(t==="right"){for(var n=[],a=e,o=0;a.length;){for(var s=0;s<a.length;s++){var l=a[s];l.setLayout({skNodeHeight:o},!0);for(var u=0;u<l.inEdges.length;u++){var c=l.inEdges[u];n.indexOf(c.node1)<0&&n.push(c.node1)}}a=n,n=[],++o}q(e,function(h){Ide(h)||h.setLayout({depth:Math.max(0,i-h.getLayout().skNodeHeight)},!0)})}else t==="justify"&&cRe(e,i)}function cRe(e,t){q(e,function(r){!Ide(r)&&!r.outEdges.length&&r.setLayout({depth:t},!0)})}function hRe(e,t,r){q(e,function(i){var n=i.getLayout().depth*t;r==="vertical"?i.setLayout({y:n},!0):i.setLayout({x:n},!0)})}function dRe(e,t,r,i,n,a,o){var s=fRe(e,o);pRe(s,t,r,i,n,o),sT(s,n,r,i,o);for(var l=1;a>0;a--)l*=.99,vRe(s,l,o),sT(s,n,r,i,o),bRe(s,l,o),sT(s,n,r,i,o)}function fRe(e,t){var r=[],i=t==="vertical"?"y":"x",n=nL(e,function(a){return a.getLayout()[i]});return n.keys.sort(function(a,o){return a-o}),q(n.keys,function(a){r.push(n.buckets.get(a))}),r}function pRe(e,t,r,i,n,a){var o=1/0;q(e,function(s){var l=s.length,u=0;q(s,function(h){u+=h.getLayout().value});var c=a==="vertical"?(i-(l-1)*n)/u:(r-(l-1)*n)/u;c<o&&(o=c)}),q(e,function(s){q(s,function(l,u){var c=l.getLayout().value*o;a==="vertical"?(l.setLayout({x:u},!0),l.setLayout({dx:c},!0)):(l.setLayout({y:u},!0),l.setLayout({dy:c},!0))})}),q(t,function(s){var l=+s.getValue()*o;s.setLayout({dy:l},!0)})}function sT(e,t,r,i,n){var a=n==="vertical"?"x":"y";q(e,function(o){o.sort(function(v,m){return v.getLayout()[a]-m.getLayout()[a]});for(var s,l,u,c=0,h=o.length,d=n==="vertical"?"dx":"dy",f=0;f<h;f++)l=o[f],u=c-l.getLayout()[a],u>0&&(s=l.getLayout()[a]+u,n==="vertical"?l.setLayout({x:s},!0):l.setLayout({y:s},!0)),c=l.getLayout()[a]+l.getLayout()[d]+t;var p=n==="vertical"?i:r;if(u=c-t-p,u>0){s=l.getLayout()[a]-u,n==="vertical"?l.setLayout({x:s},!0):l.setLayout({y:s},!0),c=s;for(var f=h-2;f>=0;--f)l=o[f],u=l.getLayout()[a]+l.getLayout()[d]+t-c,u>0&&(s=l.getLayout()[a]-u,n==="vertical"?l.setLayout({x:s},!0):l.setLayout({y:s},!0)),c=l.getLayout()[a]}})}function vRe(e,t,r){q(e.slice().reverse(),function(i){q(i,function(n){if(n.outEdges.length){var a=tp(n.outEdges,mRe,r)/tp(n.outEdges,aS);if(isNaN(a)){var o=n.outEdges.length;a=o?tp(n.outEdges,gRe,r)/o:0}if(r==="vertical"){var s=n.getLayout().x+(a-mp(n,r))*t;n.setLayout({x:s},!0)}else{var l=n.getLayout().y+(a-mp(n,r))*t;n.setLayout({y:l},!0)}}})})}function mRe(e,t){return mp(e.node2,t)*e.getValue()}function gRe(e,t){return mp(e.node2,t)}function yRe(e,t){return mp(e.node1,t)*e.getValue()}function xRe(e,t){return mp(e.node1,t)}function mp(e,t){return t==="vertical"?e.getLayout().x+e.getLayout().dx/2:e.getLayout().y+e.getLayout().dy/2}function aS(e){return e.getValue()}function tp(e,t,r){for(var i=0,n=e.length,a=-1;++a<n;){var o=+t(e[a],r);isNaN(o)||(i+=o)}return i}function bRe(e,t,r){q(e,function(i){q(i,function(n){if(n.inEdges.length){var a=tp(n.inEdges,yRe,r)/tp(n.inEdges,aS);if(isNaN(a)){var o=n.inEdges.length;a=o?tp(n.inEdges,xRe,r)/o:0}if(r==="vertical"){var s=n.getLayout().x+(a-mp(n,r))*t;n.setLayout({x:s},!0)}else{var l=n.getLayout().y+(a-mp(n,r))*t;n.setLayout({y:l},!0)}}})})}function wRe(e,t){var r=t==="vertical"?"x":"y";q(e,function(i){i.outEdges.sort(function(n,a){return n.node2.getLayout()[r]-a.node2.getLayout()[r]}),i.inEdges.sort(function(n,a){return n.node1.getLayout()[r]-a.node1.getLayout()[r]})}),q(e,function(i){var n=0,a=0;q(i.outEdges,function(o){o.setLayout({sy:n},!0),n+=o.getLayout().dy}),q(i.inEdges,function(o){o.setLayout({ty:a},!0),a+=o.getLayout().dy})})}function _Re(e){e.eachSeriesByType("sankey",function(t){var r=t.getGraph(),i=r.nodes,n=r.edges;if(i.length){var a=1/0,o=-1/0;q(i,function(s){var l=s.getLayout().value;l<a&&(a=l),l>o&&(o=l)}),q(i,function(s){var l=new ra({type:"color",mappingMethod:"linear",dataExtent:[a,o],visual:t.get("color")}),u=l.mapValueToVisual(s.getLayout().value),c=s.getModel().get(["itemStyle","color"]);c!=null?(s.setVisual("color",c),s.setVisual("style",{fill:c})):(s.setVisual("color",u),s.setVisual("style",{fill:u}))})}n.length&&q(n,function(s){var l=s.getModel().get("lineStyle");s.setVisual("style",l)})})}function ARe(e){e.registerChartView(tRe),e.registerSeriesModel(iRe),e.registerLayout(nRe),e.registerVisual(_Re),e.registerAction({type:"dragNode",event:"dragnode",update:"update"},function(t,r){r.eachComponent({mainType:"series",subType:"sankey",query:t},function(i){i.setNodePosition(t.dataIndex,[t.localX,t.localY])})})}var Lde=function(){function e(){}return e.prototype.getInitialData=function(t,r){var i,n=r.getComponent("xAxis",this.get("xAxisIndex")),a=r.getComponent("yAxis",this.get("yAxisIndex")),o=n.get("type"),s=a.get("type"),l;o==="category"?(t.layout="horizontal",i=n.getOrdinalMeta(),l=!0):s==="category"?(t.layout="vertical",i=a.getOrdinalMeta(),l=!0):t.layout=t.layout||"horizontal";var u=["x","y"],c=t.layout==="horizontal"?0:1,h=this._baseAxisDim=u[c],d=u[1-c],f=[n,a],p=f[c].get("type"),v=f[1-c].get("type"),m=t.data;if(m&&l){var g=[];q(m,function(b,_){var w;Ue(b)?(w=b.slice(),b.unshift(_)):Ue(b.value)?(w=Be({},b),w.value=w.value.slice(),b.value.unshift(_)):w=b,g.push(w)}),t.data=g}var y=this.defaultValueDimensions,x=[{name:h,type:X8(p),ordinalMeta:i,otherDims:{tooltip:!1,itemName:0},dimsDef:["base"]},{name:d,type:X8(v),dimsDef:y.slice()}];return By(this,{coordDimensions:x,dimensionsCount:y.length+1,encodeDefaulter:kt(uue,x,this)})},e.prototype.getBaseAxis=function(){var t=this._baseAxisDim;return this.ecModel.getComponent(t+"Axis",this.get(t+"AxisIndex")).axis},e}(),kde=function(e){_e(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r.defaultValueDimensions=[{name:"min",defaultTooltip:!0},{name:"Q1",defaultTooltip:!0},{name:"median",defaultTooltip:!0},{name:"Q3",defaultTooltip:!0},{name:"max",defaultTooltip:!0}],r.visualDrawType="stroke",r}return t.type="series.boxplot",t.dependencies=["xAxis","yAxis","grid"],t.defaultOption={z:2,coordinateSystem:"cartesian2d",legendHoverLink:!0,layout:null,boxWidth:[7,50],itemStyle:{color:"#fff",borderWidth:1},emphasis:{scale:!0,itemStyle:{borderWidth:2,shadowBlur:5,shadowOffsetX:1,shadowOffsetY:1,shadowColor:"rgba(0,0,0,0.2)"}},animationDuration:800},t}(Di);Mn(kde,Lde,!0);var SRe=function(e){_e(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r}return t.prototype.render=function(r,i,n){var a=r.getData(),o=this.group,s=this._data;this._data||o.removeAll();var l=r.get("layout")==="horizontal"?1:0;a.diff(s).add(function(u){if(a.hasValue(u)){var c=a.getItemLayout(u),h=zY(c,a,u,l,!0);a.setItemGraphicEl(u,h),o.add(h)}}).update(function(u,c){var h=s.getItemGraphicEl(c);if(!a.hasValue(u)){o.remove(h);return}var d=a.getItemLayout(u);h?(Pu(h),Rde(d,h,a,u)):h=zY(d,a,u,l),o.add(h),a.setItemGraphicEl(u,h)}).remove(function(u){var c=s.getItemGraphicEl(u);c&&o.remove(c)}).execute(),this._data=a},t.prototype.remove=function(r){var i=this.group,n=this._data;this._data=null,n&&n.eachItemGraphicEl(function(a){a&&i.remove(a)})},t.type="boxplot",t}(yi),CRe=function(){function e(){}return e}(),ERe=function(e){_e(t,e);function t(r){var i=e.call(this,r)||this;return i.type="boxplotBoxPath",i}return t.prototype.getDefaultShape=function(){return new CRe},t.prototype.buildPath=function(r,i){var n=i.points,a=0;for(r.moveTo(n[a][0],n[a][1]),a++;a<4;a++)r.lineTo(n[a][0],n[a][1]);for(r.closePath();a<n.length;a++)r.moveTo(n[a][0],n[a][1]),a++,r.lineTo(n[a][0],n[a][1])},t}(or);function zY(e,t,r,i,n){var a=e.ends,o=new ERe({shape:{points:n?MRe(a,i,e):a}});return Rde(e,o,t,r,n),o}function Rde(e,t,r,i,n){var a=r.hostModel,o=$v[n?"initProps":"updateProps"];o(t,{shape:{points:e.ends}},a,i),t.useStyle(r.getItemVisual(i,"style")),t.style.strokeNoScale=!0,t.z2=100;var s=r.getItemModel(i),l=s.getModel("emphasis");Ya(t,s),Ji(t,l.get("focus"),l.get("blurScope"),l.get("disabled"))}function MRe(e,t,r){return qe(e,function(i){return i=i.slice(),i[t]=r.initBaseline,i})}var gb=q;function TRe(e){var t=PRe(e);gb(t,function(r){var i=r.seriesModels;i.length&&(DRe(r),gb(i,function(n,a){IRe(n,r.boxOffsetList[a],r.boxWidthList[a])}))})}function PRe(e){var t=[],r=[];return e.eachSeriesByType("boxplot",function(i){var n=i.getBaseAxis(),a=tr(r,n);a<0&&(a=r.length,r[a]=n,t[a]={axis:n,seriesModels:[]}),t[a].seriesModels.push(i)}),t}function DRe(e){var t=e.axis,r=e.seriesModels,i=r.length,n=e.boxWidthList=[],a=e.boxOffsetList=[],o=[],s;if(t.type==="category")s=t.getBandWidth();else{var l=0;gb(r,function(p){l=Math.max(l,p.getData().count())});var u=t.getExtent();s=Math.abs(u[1]-u[0])/l}gb(r,function(p){var v=p.get("boxWidth");Ue(v)||(v=[v,v]),o.push([et(v[0],s)||0,et(v[1],s)||0])});var c=s*.8-2,h=c/i*.3,d=(c-h*(i-1))/i,f=d/2-c/2;gb(r,function(p,v){a.push(f),f+=h+d,n.push(Math.min(Math.max(d,o[v][0]),o[v][1]))})}function IRe(e,t,r){var i=e.coordinateSystem,n=e.getData(),a=r/2,o=e.get("layout")==="horizontal"?0:1,s=1-o,l=["x","y"],u=n.mapDimension(l[o]),c=n.mapDimensionsAll(l[s]);if(u==null||c.length<5)return;for(var h=0;h<n.count();h++){var d=n.get(u,h),f=x(d,c[2],h),p=x(d,c[0],h),v=x(d,c[1],h),m=x(d,c[3],h),g=x(d,c[4],h),y=[];b(y,v,!1),b(y,m,!0),y.push(p,v,g,m),_(y,p),_(y,g),_(y,f),n.setItemLayout(h,{initBaseline:f[s],ends:y})}function x(w,S,A){var M=n.get(S,A),E=[];E[o]=w,E[s]=M;var T;return isNaN(w)||isNaN(M)?T=[NaN,NaN]:(T=i.dataToPoint(E),T[o]+=t),T}function b(w,S,A){var M=S.slice(),E=S.slice();M[o]+=a,E[o]-=a,A?w.push(M,E):w.push(E,M)}function _(w,S){var A=S.slice(),M=S.slice();A[o]-=a,M[o]+=a,w.push(A,M)}}function LRe(e,t){t=t||{};for(var r=[],i=[],n=t.boundIQR,a=n==="none"||n===0,o=0;o<e.length;o++){var s=Ml(e[o].slice()),l=BE(s,.25),u=BE(s,.5),c=BE(s,.75),h=s[0],d=s[s.length-1],f=(n??1.5)*(c-l),p=a?h:Math.max(h,l-f),v=a?d:Math.min(d,c+f),m=t.itemNameFormatter,g=xt(m)?m({value:o}):it(m)?m.replace("{value}",o+""):o+"";r.push([g,p,l,u,c,v]);for(var y=0;y<s.length;y++){var x=s[y];if(x<p||x>v){var b=[g,x];i.push(b)}}}return{boxData:r,outliers:i}}var kRe={type:"echarts:boxplot",transform:function(t){var r=t.upstream;if(r.sourceFormat!==Ao){var i="";jr(i)}var n=LRe(r.getRawData(),t.config);return[{dimensions:["ItemName","Low","Q1","Q2","Q3","High"],data:n.boxData},{data:n.outliers}]}};function RRe(e){e.registerSeriesModel(kde),e.registerChartView(SRe),e.registerLayout(TRe),e.registerTransform(kRe)}var ORe=["color","borderColor"],BRe=function(e){_e(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r}return t.prototype.render=function(r,i,n){this.group.removeClipPath(),this._progressiveEls=null,this._updateDrawMode(r),this._isLargeDraw?this._renderLarge(r):this._renderNormal(r)},t.prototype.incrementalPrepareRender=function(r,i,n){this._clear(),this._updateDrawMode(r)},t.prototype.incrementalRender=function(r,i,n,a){this._progressiveEls=[],this._isLargeDraw?this._incrementalRenderLarge(r,i):this._incrementalRenderNormal(r,i)},t.prototype.eachRendered=function(r){Ep(this._progressiveEls||this.group,r)},t.prototype._updateDrawMode=function(r){var i=r.pipelineContext.large;(this._isLargeDraw==null||i!==this._isLargeDraw)&&(this._isLargeDraw=i,this._clear())},t.prototype._renderNormal=function(r){var i=r.getData(),n=this._data,a=this.group,o=i.getLayout("isSimpleBox"),s=r.get("clip",!0),l=r.coordinateSystem,u=l.getArea&&l.getArea();this._data||a.removeAll(),i.diff(n).add(function(c){if(i.hasValue(c)){var h=i.getItemLayout(c);if(s&&HY(u,h))return;var d=lT(h,c,!0);Vi(d,{shape:{points:h.ends}},r,c),uT(d,i,c,o),a.add(d),i.setItemGraphicEl(c,d)}}).update(function(c,h){var d=n.getItemGraphicEl(h);if(!i.hasValue(c)){a.remove(d);return}var f=i.getItemLayout(c);if(s&&HY(u,f)){a.remove(d);return}d?(Nr(d,{shape:{points:f.ends}},r,c),Pu(d)):d=lT(f),uT(d,i,c,o),a.add(d),i.setItemGraphicEl(c,d)}).remove(function(c){var h=n.getItemGraphicEl(c);h&&a.remove(h)}).execute(),this._data=i},t.prototype._renderLarge=function(r){this._clear(),UY(r,this.group);var i=r.get("clip",!0)?w4(r.coordinateSystem,!1,r):null;i?this.group.setClipPath(i):this.group.removeClipPath()},t.prototype._incrementalRenderNormal=function(r,i){for(var n=i.getData(),a=n.getLayout("isSimpleBox"),o;(o=r.next())!=null;){var s=n.getItemLayout(o),l=lT(s);uT(l,n,o,a),l.incremental=!0,this.group.add(l),this._progressiveEls.push(l)}},t.prototype._incrementalRenderLarge=function(r,i){UY(i,this.group,this._progressiveEls,!0)},t.prototype.remove=function(r){this._clear()},t.prototype._clear=function(){this.group.removeAll(),this._data=null},t.type="candlestick",t}(yi),NRe=function(){function e(){}return e}(),VRe=function(e){_e(t,e);function t(r){var i=e.call(this,r)||this;return i.type="normalCandlestickBox",i}return t.prototype.getDefaultShape=function(){return new NRe},t.prototype.buildPath=function(r,i){var n=i.points;this.__simpleBox?(r.moveTo(n[4][0],n[4][1]),r.lineTo(n[6][0],n[6][1])):(r.moveTo(n[0][0],n[0][1]),r.lineTo(n[1][0],n[1][1]),r.lineTo(n[2][0],n[2][1]),r.lineTo(n[3][0],n[3][1]),r.closePath(),r.moveTo(n[4][0],n[4][1]),r.lineTo(n[5][0],n[5][1]),r.moveTo(n[6][0],n[6][1]),r.lineTo(n[7][0],n[7][1]))},t}(or);function lT(e,t,r){var i=e.ends;return new VRe({shape:{points:r?FRe(i,e):i},z2:100})}function HY(e,t){for(var r=!0,i=0;i<t.ends.length;i++)if(e.contain(t.ends[i][0],t.ends[i][1])){r=!1;break}return r}function uT(e,t,r,i){var n=t.getItemModel(r);e.useStyle(t.getItemVisual(r,"style")),e.style.strokeNoScale=!0,e.__simpleBox=i,Ya(e,n)}function FRe(e,t){return qe(e,function(r){return r=r.slice(),r[1]=t.initBaseline,r})}var zRe=function(){function e(){}return e}(),cT=function(e){_e(t,e);function t(r){var i=e.call(this,r)||this;return i.type="largeCandlestickBox",i}return t.prototype.getDefaultShape=function(){return new zRe},t.prototype.buildPath=function(r,i){for(var n=i.points,a=0;a<n.length;)if(this.__sign===n[a++]){var o=n[a++];r.moveTo(o,n[a++]),r.lineTo(o,n[a++])}else a+=3},t}(or);function UY(e,t,r,i){var n=e.getData(),a=n.getLayout("largePoints"),o=new cT({shape:{points:a},__sign:1,ignoreCoarsePointer:!0});t.add(o);var s=new cT({shape:{points:a},__sign:-1,ignoreCoarsePointer:!0});t.add(s);var l=new cT({shape:{points:a},__sign:0,ignoreCoarsePointer:!0});t.add(l),hT(1,o,e),hT(-1,s,e),hT(0,l,e),i&&(o.incremental=!0,s.incremental=!0),r&&r.push(o,s)}function hT(e,t,r,i){var n=r.get(["itemStyle",e>0?"borderColor":"borderColor0"])||r.get(["itemStyle",e>0?"color":"color0"]);e===0&&(n=r.get(["itemStyle","borderColorDoji"]));var a=r.getModel("itemStyle").getItemStyle(ORe);t.useStyle(a),t.style.fill=null,t.style.stroke=n}var Ode=function(e){_e(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r.defaultValueDimensions=[{name:"open",defaultTooltip:!0},{name:"close",defaultTooltip:!0},{name:"lowest",defaultTooltip:!0},{name:"highest",defaultTooltip:!0}],r}return t.prototype.getShadowDim=function(){return"open"},t.prototype.brushSelector=function(r,i,n){var a=i.getItemLayout(r);return a&&n.rect(a.brushRect)},t.type="series.candlestick",t.dependencies=["xAxis","yAxis","grid"],t.defaultOption={z:2,coordinateSystem:"cartesian2d",legendHoverLink:!0,layout:null,clip:!0,itemStyle:{color:"#eb5454",color0:"#47b262",borderColor:"#eb5454",borderColor0:"#47b262",borderColorDoji:null,borderWidth:1},emphasis:{scale:!0,itemStyle:{borderWidth:2}},barMaxWidth:null,barMinWidth:null,barWidth:null,large:!0,largeThreshold:600,progressive:3e3,progressiveThreshold:1e4,progressiveChunkMode:"mod",animationEasing:"linear",animationDuration:300},t}(Di);Mn(Ode,Lde,!0);function HRe(e){!e||!Ue(e.series)||q(e.series,function(t){_t(t)&&t.type==="k"&&(t.type="candlestick")})}var URe=["itemStyle","borderColor"],GRe=["itemStyle","borderColor0"],jRe=["itemStyle","borderColorDoji"],WRe=["itemStyle","color"],qRe=["itemStyle","color0"],YRe={seriesType:"candlestick",plan:Ly(),performRawSeries:!0,reset:function(e,t){function r(a,o){return o.get(a>0?WRe:qRe)}function i(a,o){return o.get(a===0?jRe:a>0?URe:GRe)}if(!t.isSeriesFiltered(e)){var n=e.pipelineContext.large;return!n&&{progress:function(a,o){for(var s;(s=a.next())!=null;){var l=o.getItemModel(s),u=o.getItemLayout(s).sign,c=l.getItemStyle();c.fill=r(u,l),c.stroke=i(u,l)||c.fill;var h=o.ensureUniqueItemVisual(s,"style");Be(h,c)}}}}}},XRe={seriesType:"candlestick",plan:Ly(),reset:function(e){var t=e.coordinateSystem,r=e.getData(),i=ZRe(e,r),n=0,a=1,o=["x","y"],s=r.getDimensionIndex(r.mapDimension(o[n])),l=qe(r.mapDimensionsAll(o[a]),r.getDimensionIndex,r),u=l[0],c=l[1],h=l[2],d=l[3];if(r.setLayout({candleWidth:i,isSimpleBox:i<=1.3}),s<0||l.length<4)return;return{progress:e.pipelineContext.large?p:f};function f(v,m){for(var g,y=m.getStore();(g=v.next())!=null;){var x=y.get(s,g),b=y.get(u,g),_=y.get(c,g),w=y.get(h,g),S=y.get(d,g),A=Math.min(b,_),M=Math.max(b,_),E=O(A,x),T=O(M,x),L=O(w,x),P=O(S,x),C=[];R(C,T,0),R(C,E,1),C.push(j(P),j(T),j(L),j(E));var D=m.getItemModel(g),I=!!D.get(["itemStyle","borderColorDoji"]);m.setItemLayout(g,{sign:GY(y,g,b,_,c,I),initBaseline:b>_?T[a]:E[a],ends:C,brushRect:H(w,S,x)})}function O(N,k){var G=[];return G[n]=k,G[a]=N,isNaN(k)||isNaN(N)?[NaN,NaN]:t.dataToPoint(G)}function R(N,k,G){var Y=k.slice(),F=k.slice();Y[n]=xA(Y[n]+i/2,1,!1),F[n]=xA(F[n]-i/2,1,!0),G?N.push(Y,F):N.push(F,Y)}function H(N,k,G){var Y=O(N,G),F=O(k,G);return Y[n]-=i/2,F[n]-=i/2,{x:Y[0],y:Y[1],width:i,height:F[1]-Y[1]}}function j(N){return N[n]=xA(N[n],1),N}}function p(v,m){for(var g=Ic(v.count*4),y=0,x,b=[],_=[],w,S=m.getStore(),A=!!e.get(["itemStyle","borderColorDoji"]);(w=v.next())!=null;){var M=S.get(s,w),E=S.get(u,w),T=S.get(c,w),L=S.get(h,w),P=S.get(d,w);if(isNaN(M)||isNaN(L)||isNaN(P)){g[y++]=NaN,y+=3;continue}g[y++]=GY(S,w,E,T,c,A),b[n]=M,b[a]=L,x=t.dataToPoint(b,null,_),g[y++]=x?x[0]:NaN,g[y++]=x?x[1]:NaN,b[a]=P,x=t.dataToPoint(b,null,_),g[y++]=x?x[1]:NaN}m.setLayout("largePoints",g)}}};function GY(e,t,r,i,n,a){var o;return r>i?o=-1:r<i?o=1:o=a?0:t>0?e.get(n,t-1)<=i?1:-1:1,o}function ZRe(e,t){var r=e.getBaseAxis(),i,n=r.type==="category"?r.getBandWidth():(i=r.getExtent(),Math.abs(i[1]-i[0])/t.count()),a=et(Lt(e.get("barMaxWidth"),n),n),o=et(Lt(e.get("barMinWidth"),1),n),s=e.get("barWidth");return s!=null?et(s,n):Math.max(Math.min(n/2,a),o)}function QRe(e){e.registerChartView(BRe),e.registerSeriesModel(Ode),e.registerPreprocessor(HRe),e.registerVisual(YRe),e.registerLayout(XRe)}function jY(e,t){var r=t.rippleEffectColor||t.color;e.eachChild(function(i){i.attr({z:t.z,zlevel:t.zlevel,style:{stroke:t.brushType==="stroke"?r:null,fill:t.brushType==="fill"?r:null}})})}var KRe=function(e){_e(t,e);function t(r,i){var n=e.call(this)||this,a=new x4(r,i),o=new Ct;return n.add(a),n.add(o),n.updateData(r,i),n}return t.prototype.stopEffectAnimation=function(){this.childAt(1).removeAll()},t.prototype.startEffectAnimation=function(r){for(var i=r.symbolType,n=r.color,a=r.rippleNumber,o=this.childAt(1),s=0;s<a;s++){var l=Sn(i,-1,-1,2,2,n);l.attr({style:{strokeNoScale:!0},z2:99,silent:!0,scaleX:.5,scaleY:.5});var u=-s/a*r.period+r.effectOffset;l.animate("",!0).when(r.period,{scaleX:r.rippleScale/2,scaleY:r.rippleScale/2}).delay(u).start(),l.animateStyle(!0).when(r.period,{opacity:0}).delay(u).start(),o.add(l)}jY(o,r)},t.prototype.updateEffectAnimation=function(r){for(var i=this._effectCfg,n=this.childAt(1),a=["symbolType","period","rippleScale","rippleNumber"],o=0;o<a.length;o++){var s=a[o];if(i[s]!==r[s]){this.stopEffectAnimation(),this.startEffectAnimation(r);return}}jY(n,r)},t.prototype.highlight=function(){md(this)},t.prototype.downplay=function(){gd(this)},t.prototype.getSymbolType=function(){var r=this.childAt(0);return r&&r.getSymbolType()},t.prototype.updateData=function(r,i){var n=this,a=r.hostModel;this.childAt(0).updateData(r,i);var o=this.childAt(1),s=r.getItemModel(i),l=r.getItemVisual(i,"symbol"),u=Ry(r.getItemVisual(i,"symbolSize")),c=r.getItemVisual(i,"style"),h=c&&c.fill,d=s.getModel("emphasis");o.setScale(u),o.traverse(function(m){m.setStyle("fill",h)});var f=em(r.getItemVisual(i,"symbolOffset"),u);f&&(o.x=f[0],o.y=f[1]);var p=r.getItemVisual(i,"symbolRotate");o.rotation=(p||0)*Math.PI/180||0;var v={};v.showEffectOn=a.get("showEffectOn"),v.rippleScale=s.get(["rippleEffect","scale"]),v.brushType=s.get(["rippleEffect","brushType"]),v.period=s.get(["rippleEffect","period"])*1e3,v.effectOffset=i/r.count(),v.z=a.getShallow("z")||0,v.zlevel=a.getShallow("zlevel")||0,v.symbolType=l,v.color=h,v.rippleEffectColor=s.get(["rippleEffect","color"]),v.rippleNumber=s.get(["rippleEffect","number"]),v.showEffectOn==="render"?(this._effectCfg?this.updateEffectAnimation(v):this.startEffectAnimation(v),this._effectCfg=v):(this._effectCfg=null,this.stopEffectAnimation(),this.onHoverStateChange=function(m){m==="emphasis"?v.showEffectOn!=="render"&&n.startEffectAnimation(v):m==="normal"&&v.showEffectOn!=="render"&&n.stopEffectAnimation()}),this._effectCfg=v,Ji(this,d.get("focus"),d.get("blurScope"),d.get("disabled"))},t.prototype.fadeOut=function(r){r&&r()},t}(Ct),JRe=function(e){_e(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r}return t.prototype.init=function(){this._symbolDraw=new b4(KRe)},t.prototype.render=function(r,i,n){var a=r.getData(),o=this._symbolDraw;o.updateData(a,{clipShape:this._getClipShape(r)}),this.group.add(o.group)},t.prototype._getClipShape=function(r){var i=r.coordinateSystem,n=i&&i.getArea&&i.getArea();return r.get("clip",!0)?n:null},t.prototype.updateTransform=function(r,i,n){var a=r.getData();this.group.dirty();var o=_4("").reset(r,i,n);o.progress&&o.progress({start:0,end:a.count(),count:a.count()},a),this._symbolDraw.updateLayout()},t.prototype._updateGroupTransform=function(r){var i=r.coordinateSystem;i&&i.getRoamTransform&&(this.group.transform=C8e(i.getRoamTransform()),this.group.decomposeTransform())},t.prototype.remove=function(r,i){this._symbolDraw&&this._symbolDraw.remove(!0)},t.type="effectScatter",t}(yi),$Re=function(e){_e(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r.hasSymbolVisual=!0,r}return t.prototype.getInitialData=function(r,i){return Bd(null,this,{useEncodeDefaulter:!0})},t.prototype.brushSelector=function(r,i,n){return n.point(i.getItemLayout(r))},t.type="series.effectScatter",t.dependencies=["grid","polar"],t.defaultOption={coordinateSystem:"cartesian2d",z:2,legendHoverLink:!0,effectType:"ripple",progressive:0,showEffectOn:"render",clip:!0,rippleEffect:{period:4,scale:2.5,brushType:"fill",number:3},universalTransition:{divideShape:"clone"},symbolSize:10},t}(Di);function eOe(e){e.registerChartView(JRe),e.registerSeriesModel($Re),e.registerLayout(_4("effectScatter"))}var Bde=function(e){_e(t,e);function t(r,i,n){var a=e.call(this)||this;return a.add(a.createLine(r,i,n)),a._updateEffectSymbol(r,i),a}return t.prototype.createLine=function(r,i,n){return new fV(r,i,n)},t.prototype._updateEffectSymbol=function(r,i){var n=r.getItemModel(i),a=n.getModel("effect"),o=a.get("symbolSize"),s=a.get("symbol");Ue(o)||(o=[o,o]);var l=r.getItemVisual(i,"style"),u=a.get("color")||l&&l.stroke,c=this.childAt(1);this._symbolType!==s&&(this.remove(c),c=Sn(s,-.5,-.5,1,1,u),c.z2=100,c.culling=!0,this.add(c)),c&&(c.setStyle("shadowColor",u),c.setStyle(a.getItemStyle(["color"])),c.scaleX=o[0],c.scaleY=o[1],c.setColor(u),this._symbolType=s,this._symbolScale=o,this._updateEffectAnimation(r,a,i))},t.prototype._updateEffectAnimation=function(r,i,n){var a=this.childAt(1);if(a){var o=r.getItemLayout(n),s=i.get("period")*1e3,l=i.get("loop"),u=i.get("roundTrip"),c=i.get("constantSpeed"),h=xa(i.get("delay"),function(f){return f/r.count()*s/3});if(a.ignore=!0,this._updateAnimationPoints(a,o),c>0&&(s=this._getLineLength(a)/c*1e3),s!==this._period||l!==this._loop||u!==this._roundTrip){a.stopAnimation();var d=void 0;xt(h)?d=h(n):d=h,a.__t>0&&(d=-s*a.__t),this._animateSymbol(a,s,d,l,u)}this._period=s,this._loop=l,this._roundTrip=u}},t.prototype._animateSymbol=function(r,i,n,a,o){if(i>0){r.__t=0;var s=this,l=r.animate("",a).when(o?i*2:i,{__t:o?2:1}).delay(n).during(function(){s._updateSymbolPosition(r)});a||l.done(function(){s.remove(r)}),l.start()}},t.prototype._getLineLength=function(r){return kf(r.__p1,r.__cp1)+kf(r.__cp1,r.__p2)},t.prototype._updateAnimationPoints=function(r,i){r.__p1=i[0],r.__p2=i[1],r.__cp1=i[2]||[(i[0][0]+i[1][0])/2,(i[0][1]+i[1][1])/2]},t.prototype.updateData=function(r,i,n){this.childAt(0).updateData(r,i,n),this._updateEffectSymbol(r,i)},t.prototype._updateSymbolPosition=function(r){var i=r.__p1,n=r.__p2,a=r.__cp1,o=r.__t<1?r.__t:2-r.__t,s=[r.x,r.y],l=s.slice(),u=fa,c=GI;s[0]=u(i[0],a[0],n[0],o),s[1]=u(i[1],a[1],n[1],o);var h=r.__t<1?c(i[0],a[0],n[0],o):c(n[0],a[0],i[0],1-o),d=r.__t<1?c(i[1],a[1],n[1],o):c(n[1],a[1],i[1],1-o);r.rotation=-Math.atan2(d,h)-Math.PI/2,(this._symbolType==="line"||this._symbolType==="rect"||this._symbolType==="roundRect")&&(r.__lastT!==void 0&&r.__lastT<r.__t?(r.scaleY=kf(l,s)*1.05,o===1&&(s[0]=l[0]+(s[0]-l[0])/2,s[1]=l[1]+(s[1]-l[1])/2)):r.__lastT===1?r.scaleY=2*kf(i,s):r.scaleY=this._symbolScale[1]),r.__lastT=r.__t,r.ignore=!1,r.x=s[0],r.y=s[1]},t.prototype.updateLayout=function(r,i){this.childAt(0).updateLayout(r,i);var n=r.getItemModel(i).getModel("effect");this._updateEffectAnimation(r,n,i)},t}(Ct),Nde=function(e){_e(t,e);function t(r,i,n){var a=e.call(this)||this;return a._createPolyline(r,i,n),a}return t.prototype._createPolyline=function(r,i,n){var a=r.getItemLayout(i),o=new $o({shape:{points:a}});this.add(o),this._updateCommonStl(r,i,n)},t.prototype.updateData=function(r,i,n){var a=r.hostModel,o=this.childAt(0),s={shape:{points:r.getItemLayout(i)}};Nr(o,s,a,i),this._updateCommonStl(r,i,n)},t.prototype._updateCommonStl=function(r,i,n){var a=this.childAt(0),o=r.getItemModel(i),s=n&&n.emphasisLineStyle,l=n&&n.focus,u=n&&n.blurScope,c=n&&n.emphasisDisabled;if(!n||r.hasItemOption){var h=o.getModel("emphasis");s=h.getModel("lineStyle").getLineStyle(),c=h.get("disabled"),l=h.get("focus"),u=h.get("blurScope")}a.useStyle(r.getItemVisual(i,"style")),a.style.fill=null,a.style.strokeNoScale=!0;var d=a.ensureState("emphasis");d.style=s,Ji(this,l,u,c)},t.prototype.updateLayout=function(r,i){var n=this.childAt(0);n.setShape("points",r.getItemLayout(i))},t}(Ct),tOe=function(e){_e(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r._lastFrame=0,r._lastFramePercent=0,r}return t.prototype.createLine=function(r,i,n){return new Nde(r,i,n)},t.prototype._updateAnimationPoints=function(r,i){this._points=i;for(var n=[0],a=0,o=1;o<i.length;o++){var s=i[o-1],l=i[o];a+=kf(s,l),n.push(a)}if(a===0){this._length=0;return}for(var o=0;o<n.length;o++)n[o]/=a;this._offsets=n,this._length=a},t.prototype._getLineLength=function(){return this._length},t.prototype._updateSymbolPosition=function(r){var i=r.__t<1?r.__t:2-r.__t,n=this._points,a=this._offsets,o=n.length;if(a){var s=this._lastFrame,l;if(i<this._lastFramePercent){var u=Math.min(s+1,o-1);for(l=u;l>=0&&!(a[l]<=i);l--);l=Math.min(l,o-2)}else{for(l=s;l<o&&!(a[l]>i);l++);l=Math.min(l-1,o-2)}var c=(i-a[l])/(a[l+1]-a[l]),h=n[l],d=n[l+1];r.x=h[0]*(1-c)+c*d[0],r.y=h[1]*(1-c)+c*d[1];var f=r.__t<1?d[0]-h[0]:h[0]-d[0],p=r.__t<1?d[1]-h[1]:h[1]-d[1];r.rotation=-Math.atan2(p,f)-Math.PI/2,this._lastFrame=l,this._lastFramePercent=i,r.ignore=!1}},t}(Bde),rOe=function(){function e(){this.polyline=!1,this.curveness=0,this.segs=[]}return e}(),iOe=function(e){_e(t,e);function t(r){var i=e.call(this,r)||this;return i._off=0,i.hoverDataIdx=-1,i}return t.prototype.reset=function(){this.notClear=!1,this._off=0},t.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},t.prototype.getDefaultShape=function(){return new rOe},t.prototype.buildPath=function(r,i){var n=i.segs,a=i.curveness,o;if(i.polyline)for(o=this._off;o<n.length;){var s=n[o++];if(s>0){r.moveTo(n[o++],n[o++]);for(var l=1;l<s;l++)r.lineTo(n[o++],n[o++])}}else for(o=this._off;o<n.length;){var u=n[o++],c=n[o++],h=n[o++],d=n[o++];if(r.moveTo(u,c),a>0){var f=(u+h)/2-(c-d)*a,p=(c+d)/2-(h-u)*a;r.quadraticCurveTo(f,p,h,d)}else r.lineTo(h,d)}this.incremental&&(this._off=o,this.notClear=!0)},t.prototype.findDataIndex=function(r,i){var n=this.shape,a=n.segs,o=n.curveness,s=this.style.lineWidth;if(n.polyline)for(var l=0,u=0;u<a.length;){var c=a[u++];if(c>0)for(var h=a[u++],d=a[u++],f=1;f<c;f++){var p=a[u++],v=a[u++];if(_f(h,d,p,v,s,r,i))return l}l++}else for(var l=0,u=0;u<a.length;){var h=a[u++],d=a[u++],p=a[u++],v=a[u++];if(o>0){var m=(h+p)/2-(d-v)*o,g=(d+v)/2-(p-h)*o;if(ule(h,d,m,g,p,v,s,r,i))return l}else if(_f(h,d,p,v,s,r,i))return l;l++}return-1},t.prototype.contain=function(r,i){var n=this.transformCoordToLocal(r,i),a=this.getBoundingRect();if(r=n[0],i=n[1],a.contain(r,i)){var o=this.hoverDataIdx=this.findDataIndex(r,i);return o>=0}return this.hoverDataIdx=-1,!1},t.prototype.getBoundingRect=function(){var r=this._rect;if(!r){for(var i=this.shape,n=i.segs,a=1/0,o=1/0,s=-1/0,l=-1/0,u=0;u<n.length;){var c=n[u++],h=n[u++];a=Math.min(c,a),s=Math.max(c,s),o=Math.min(h,o),l=Math.max(h,l)}r=this._rect=new qt(a,o,s,l)}return r},t}(or),nOe=function(){function e(){this.group=new Ct}return e.prototype.updateData=function(t){this._clear();var r=this._create();r.setShape({segs:t.getLayout("linesPoints")}),this._setCommon(r,t)},e.prototype.incrementalPrepareUpdate=function(t){this.group.removeAll(),this._clear()},e.prototype.incrementalUpdate=function(t,r){var i=this._newAdded[0],n=r.getLayout("linesPoints"),a=i&&i.shape.segs;if(a&&a.length<2e4){var o=a.length,s=new Float32Array(o+n.length);s.set(a),s.set(n,o),i.setShape({segs:s})}else{this._newAdded=[];var l=this._create();l.incremental=!0,l.setShape({segs:n}),this._setCommon(l,r),l.__startIndex=t.start}},e.prototype.remove=function(){this._clear()},e.prototype.eachRendered=function(t){this._newAdded[0]&&t(this._newAdded[0])},e.prototype._create=function(){var t=new iOe({cursor:"default",ignoreCoarsePointer:!0});return this._newAdded.push(t),this.group.add(t),t},e.prototype._setCommon=function(t,r,i){var n=r.hostModel;t.setShape({polyline:n.get("polyline"),curveness:n.get(["lineStyle","curveness"])}),t.useStyle(n.getModel("lineStyle").getLineStyle()),t.style.strokeNoScale=!0;var a=r.getVisual("style");a&&a.stroke&&t.setStyle("stroke",a.stroke),t.setStyle("fill",null);var o=Dt(t);o.seriesIndex=n.seriesIndex,t.on("mousemove",function(s){o.dataIndex=null;var l=t.hoverDataIdx;l>0&&(o.dataIndex=l+t.__startIndex)})},e.prototype._clear=function(){this._newAdded=[],this.group.removeAll()},e}(),Vde={seriesType:"lines",plan:Ly(),reset:function(e){var t=e.coordinateSystem;if(t){var r=e.get("polyline"),i=e.pipelineContext.large;return{progress:function(n,a){var o=[];if(i){var s=void 0,l=n.end-n.start;if(r){for(var u=0,c=n.start;c<n.end;c++)u+=e.getLineCoordsCount(c);s=new Float32Array(l+u*2)}else s=new Float32Array(l*4);for(var h=0,d=[],c=n.start;c<n.end;c++){var f=e.getLineCoords(c,o);r&&(s[h++]=f);for(var p=0;p<f;p++)d=t.dataToPoint(o[p],!1,d),s[h++]=d[0],s[h++]=d[1]}a.setLayout("linesPoints",s)}else for(var c=n.start;c<n.end;c++){var v=a.getItemModel(c),f=e.getLineCoords(c,o),m=[];if(r)for(var g=0;g<f;g++)m.push(t.dataToPoint(o[g]));else{m[0]=t.dataToPoint(o[0]),m[1]=t.dataToPoint(o[1]);var y=v.get(["lineStyle","curveness"]);+y&&(m[2]=[(m[0][0]+m[1][0])/2-(m[0][1]-m[1][1])*y,(m[0][1]+m[1][1])/2-(m[1][0]-m[0][0])*y])}a.setItemLayout(c,m)}}}}}},aOe=function(e){_e(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r}return t.prototype.render=function(r,i,n){var a=r.getData(),o=this._updateLineDraw(a,r),s=r.get("zlevel"),l=r.get(["effect","trailLength"]),u=n.getZr(),c=u.painter.getType()==="svg";c||u.painter.getLayer(s).clear(!0),this._lastZlevel!=null&&!c&&u.configLayer(this._lastZlevel,{motionBlur:!1}),this._showEffect(r)&&l>0&&(c||u.configLayer(s,{motionBlur:!0,lastFrameAlpha:Math.max(Math.min(l/10+.9,1),0)})),o.updateData(a);var h=r.get("clip",!0)&&w4(r.coordinateSystem,!1,r);h?this.group.setClipPath(h):this.group.removeClipPath(),this._lastZlevel=s,this._finished=!0},t.prototype.incrementalPrepareRender=function(r,i,n){var a=r.getData(),o=this._updateLineDraw(a,r);o.incrementalPrepareUpdate(a),this._clearLayer(n),this._finished=!1},t.prototype.incrementalRender=function(r,i,n){this._lineDraw.incrementalUpdate(r,i.getData()),this._finished=r.end===i.getData().count()},t.prototype.eachRendered=function(r){this._lineDraw&&this._lineDraw.eachRendered(r)},t.prototype.updateTransform=function(r,i,n){var a=r.getData(),o=r.pipelineContext;if(!this._finished||o.large||o.progressiveRender)return{update:!0};var s=Vde.reset(r,i,n);s.progress&&s.progress({start:0,end:a.count(),count:a.count()},a),this._lineDraw.updateLayout(),this._clearLayer(n)},t.prototype._updateLineDraw=function(r,i){var n=this._lineDraw,a=this._showEffect(i),o=!!i.get("polyline"),s=i.pipelineContext,l=s.large;return(!n||a!==this._hasEffet||o!==this._isPolyline||l!==this._isLargeDraw)&&(n&&n.remove(),n=this._lineDraw=l?new nOe:new pV(o?a?tOe:Nde:a?Bde:fV),this._hasEffet=a,this._isPolyline=o,this._isLargeDraw=l),this.group.add(n.group),n},t.prototype._showEffect=function(r){return!!r.get(["effect","show"])},t.prototype._clearLayer=function(r){var i=r.getZr(),n=i.painter.getType()==="svg";!n&&this._lastZlevel!=null&&i.painter.getLayer(this._lastZlevel).clear(!0)},t.prototype.remove=function(r,i){this._lineDraw&&this._lineDraw.remove(),this._lineDraw=null,this._clearLayer(i)},t.prototype.dispose=function(r,i){this.remove(r,i)},t.type="lines",t}(yi),oOe=typeof Uint32Array>"u"?Array:Uint32Array,sOe=typeof Float64Array>"u"?Array:Float64Array;function WY(e){var t=e.data;t&&t[0]&&t[0][0]&&t[0][0].coord&&(e.data=qe(t,function(r){var i=[r[0].coord,r[1].coord],n={coords:i};return r[0].name&&(n.fromName=r[0].name),r[1].name&&(n.toName=r[1].name),qB([n,r[0],r[1]])}))}var lOe=function(e){_e(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r.visualStyleAccessPath="lineStyle",r.visualDrawType="stroke",r}return t.prototype.init=function(r){r.data=r.data||[],WY(r);var i=this._processFlatCoordsArray(r.data);this._flatCoords=i.flatCoords,this._flatCoordsOffset=i.flatCoordsOffset,i.flatCoords&&(r.data=new Float32Array(i.count)),e.prototype.init.apply(this,arguments)},t.prototype.mergeOption=function(r){if(WY(r),r.data){var i=this._processFlatCoordsArray(r.data);this._flatCoords=i.flatCoords,this._flatCoordsOffset=i.flatCoordsOffset,i.flatCoords&&(r.data=new Float32Array(i.count))}e.prototype.mergeOption.apply(this,arguments)},t.prototype.appendData=function(r){var i=this._processFlatCoordsArray(r.data);i.flatCoords&&(this._flatCoords?(this._flatCoords=S8(this._flatCoords,i.flatCoords),this._flatCoordsOffset=S8(this._flatCoordsOffset,i.flatCoordsOffset)):(this._flatCoords=i.flatCoords,this._flatCoordsOffset=i.flatCoordsOffset),r.data=new Float32Array(i.count)),this.getRawData().appendData(r.data)},t.prototype._getCoordsFromItemModel=function(r){var i=this.getData().getItemModel(r),n=i.option instanceof Array?i.option:i.getShallow("coords");return n},t.prototype.getLineCoordsCount=function(r){return this._flatCoordsOffset?this._flatCoordsOffset[r*2+1]:this._getCoordsFromItemModel(r).length},t.prototype.getLineCoords=function(r,i){if(this._flatCoordsOffset){for(var n=this._flatCoordsOffset[r*2],a=this._flatCoordsOffset[r*2+1],o=0;o<a;o++)i[o]=i[o]||[],i[o][0]=this._flatCoords[n+o*2],i[o][1]=this._flatCoords[n+o*2+1];return a}else{for(var s=this._getCoordsFromItemModel(r),o=0;o<s.length;o++)i[o]=i[o]||[],i[o][0]=s[o][0],i[o][1]=s[o][1];return s.length}},t.prototype._processFlatCoordsArray=function(r){var i=0;if(this._flatCoords&&(i=this._flatCoords.length),kr(r[0])){for(var n=r.length,a=new oOe(n),o=new sOe(n),s=0,l=0,u=0,c=0;c<n;){u++;var h=r[c++];a[l++]=s+i,a[l++]=h;for(var d=0;d<h;d++){var f=r[c++],p=r[c++];o[s++]=f,o[s++]=p}}return{flatCoordsOffset:new Uint32Array(a.buffer,0,l),flatCoords:o,count:u}}return{flatCoordsOffset:null,flatCoords:null,count:r.length}},t.prototype.getInitialData=function(r,i){var n=new Wo(["value"],this);return n.hasItemOption=!1,n.initData(r.data,[],function(a,o,s,l){if(a instanceof Array)return NaN;n.hasItemOption=!0;var u=a.value;if(u!=null)return u instanceof Array?u[l]:u}),n},t.prototype.formatTooltip=function(r,i,n){var a=this.getData(),o=a.getItemModel(r),s=o.get("name");if(s)return s;var l=o.get("fromName"),u=o.get("toName"),c=[];return l!=null&&c.push(l),u!=null&&c.push(u),na("nameValue",{name:c.join(" > ")})},t.prototype.preventIncremental=function(){return!!this.get(["effect","show"])},t.prototype.getProgressive=function(){var r=this.option.progressive;return r??(this.option.large?1e4:this.get("progressive"))},t.prototype.getProgressiveThreshold=function(){var r=this.option.progressiveThreshold;return r??(this.option.large?2e4:this.get("progressiveThreshold"))},t.prototype.getZLevelKey=function(){var r=this.getModel("effect"),i=r.get("trailLength");return this.getData().count()>this.getProgressiveThreshold()?this.id:r.get("show")&&i>0?i+"":""},t.type="series.lines",t.dependencies=["grid","polar","geo","calendar"],t.defaultOption={coordinateSystem:"geo",z:2,legendHoverLink:!0,xAxisIndex:0,yAxisIndex:0,symbol:["none","none"],symbolSize:[10,10],geoIndex:0,effect:{show:!1,period:4,constantSpeed:0,symbol:"circle",symbolSize:3,loop:!0,trailLength:.2},large:!1,largeThreshold:2e3,polyline:!1,clip:!0,label:{show:!1,position:"end"},lineStyle:{opacity:.5}},t}(Di);function a_(e){return e instanceof Array||(e=[e,e]),e}var uOe={seriesType:"lines",reset:function(e){var t=a_(e.get("symbol")),r=a_(e.get("symbolSize")),i=e.getData();i.setVisual("fromSymbol",t&&t[0]),i.setVisual("toSymbol",t&&t[1]),i.setVisual("fromSymbolSize",r&&r[0]),i.setVisual("toSymbolSize",r&&r[1]);function n(a,o){var s=a.getItemModel(o),l=a_(s.getShallow("symbol",!0)),u=a_(s.getShallow("symbolSize",!0));l[0]&&a.setItemVisual(o,"fromSymbol",l[0]),l[1]&&a.setItemVisual(o,"toSymbol",l[1]),u[0]&&a.setItemVisual(o,"fromSymbolSize",u[0]),u[1]&&a.setItemVisual(o,"toSymbolSize",u[1])}return{dataEach:i.hasItemOption?n:null}}};function cOe(e){e.registerChartView(aOe),e.registerSeriesModel(lOe),e.registerLayout(Vde),e.registerVisual(uOe)}var hOe=256,dOe=function(){function e(){this.blurSize=30,this.pointSize=20,this.maxOpacity=1,this.minOpacity=0,this._gradientPixels={inRange:null,outOfRange:null};var t=hp.createCanvas();this.canvas=t}return e.prototype.update=function(t,r,i,n,a,o){var s=this._getBrush(),l=this._getGradient(a,"inRange"),u=this._getGradient(a,"outOfRange"),c=this.pointSize+this.blurSize,h=this.canvas,d=h.getContext("2d"),f=t.length;h.width=r,h.height=i;for(var p=0;p<f;++p){var v=t[p],m=v[0],g=v[1],y=v[2],x=n(y);d.globalAlpha=x,d.drawImage(s,m-c,g-c)}if(!h.width||!h.height)return h;for(var b=d.getImageData(0,0,h.width,h.height),_=b.data,w=0,S=_.length,A=this.minOpacity,M=this.maxOpacity,E=M-A;w<S;){var x=_[w+3]/256,T=Math.floor(x*(hOe-1))*4;if(x>0){var L=o(x)?l:u;x>0&&(x=x*E+A),_[w++]=L[T],_[w++]=L[T+1],_[w++]=L[T+2],_[w++]=L[T+3]*x*256}else w+=4}return d.putImageData(b,0,0),h},e.prototype._getBrush=function(){var t=this._brushCanvas||(this._brushCanvas=hp.createCanvas()),r=this.pointSize+this.blurSize,i=r*2;t.width=i,t.height=i;var n=t.getContext("2d");return n.clearRect(0,0,i,i),n.shadowOffsetX=i,n.shadowBlur=this.blurSize,n.shadowColor="#000",n.beginPath(),n.arc(-r,r,this.pointSize,0,Math.PI*2,!0),n.closePath(),n.fill(),t},e.prototype._getGradient=function(t,r){for(var i=this._gradientPixels,n=i[r]||(i[r]=new Uint8ClampedArray(256*4)),a=[0,0,0,0],o=0,s=0;s<256;s++)t[r](s/255,!0,a),n[o++]=a[0],n[o++]=a[1],n[o++]=a[2],n[o++]=a[3];return n},e}();function fOe(e,t,r){var i=e[1]-e[0];t=qe(t,function(o){return{interval:[(o.interval[0]-e[0])/i,(o.interval[1]-e[0])/i]}});var n=t.length,a=0;return function(o){var s;for(s=a;s<n;s++){var l=t[s].interval;if(l[0]<=o&&o<=l[1]){a=s;break}}if(s===n)for(s=a-1;s>=0;s--){var l=t[s].interval;if(l[0]<=o&&o<=l[1]){a=s;break}}return s>=0&&s<n&&r[s]}}function pOe(e,t){var r=e[1]-e[0];return t=[(t[0]-e[0])/r,(t[1]-e[0])/r],function(i){return i>=t[0]&&i<=t[1]}}function qY(e){var t=e.dimensions;return t[0]==="lng"&&t[1]==="lat"}var vOe=function(e){_e(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r}return t.prototype.render=function(r,i,n){var a;i.eachComponent("visualMap",function(s){s.eachTargetSeries(function(l){l===r&&(a=s)})}),this._progressiveEls=null,this.group.removeAll();var o=r.coordinateSystem;o.type==="cartesian2d"||o.type==="calendar"?this._renderOnCartesianAndCalendar(r,n,0,r.getData().count()):qY(o)&&this._renderOnGeo(o,r,a,n)},t.prototype.incrementalPrepareRender=function(r,i,n){this.group.removeAll()},t.prototype.incrementalRender=function(r,i,n,a){var o=i.coordinateSystem;o&&(qY(o)?this.render(i,n,a):(this._progressiveEls=[],this._renderOnCartesianAndCalendar(i,a,r.start,r.end,!0)))},t.prototype.eachRendered=function(r){Ep(this._progressiveEls||this.group,r)},t.prototype._renderOnCartesianAndCalendar=function(r,i,n,a,o){var s=r.coordinateSystem,l=rm(s,"cartesian2d"),u,c,h,d;if(l){var f=s.getAxis("x"),p=s.getAxis("y");u=f.getBandWidth()+.5,c=p.getBandWidth()+.5,h=f.scale.getExtent(),d=p.scale.getExtent()}for(var v=this.group,m=r.getData(),g=r.getModel(["emphasis","itemStyle"]).getItemStyle(),y=r.getModel(["blur","itemStyle"]).getItemStyle(),x=r.getModel(["select","itemStyle"]).getItemStyle(),b=r.get(["itemStyle","borderRadius"]),_=ia(r),w=r.getModel("emphasis"),S=w.get("focus"),A=w.get("blurScope"),M=w.get("disabled"),E=l?[m.mapDimension("x"),m.mapDimension("y"),m.mapDimension("value")]:[m.mapDimension("time"),m.mapDimension("value")],T=n;T<a;T++){var L=void 0,P=m.getItemVisual(T,"style");if(l){var C=m.get(E[0],T),D=m.get(E[1],T);if(isNaN(m.get(E[2],T))||isNaN(C)||isNaN(D)||C<h[0]||C>h[1]||D<d[0]||D>d[1])continue;var I=s.dataToPoint([C,D]);L=new Tr({shape:{x:I[0]-u/2,y:I[1]-c/2,width:u,height:c},style:P})}else{if(isNaN(m.get(E[1],T)))continue;L=new Tr({z2:1,shape:s.dataToRect([m.get(E[0],T)]).contentShape,style:P})}if(m.hasItemOption){var O=m.getItemModel(T),R=O.getModel("emphasis");g=R.getModel("itemStyle").getItemStyle(),y=O.getModel(["blur","itemStyle"]).getItemStyle(),x=O.getModel(["select","itemStyle"]).getItemStyle(),b=O.get(["itemStyle","borderRadius"]),S=R.get("focus"),A=R.get("blurScope"),M=R.get("disabled"),_=ia(O)}L.shape.r=b;var H=r.getRawValue(T),j="-";H&&H[2]!=null&&(j=H[2]+""),Xa(L,_,{labelFetcher:r,labelDataIndex:T,defaultOpacity:P.opacity,defaultText:j}),L.ensureState("emphasis").style=g,L.ensureState("blur").style=y,L.ensureState("select").style=x,Ji(L,S,A,M),L.incremental=o,o&&(L.states.emphasis.hoverLayer=!0),v.add(L),m.setItemGraphicEl(T,L),this._progressiveEls&&this._progressiveEls.push(L)}},t.prototype._renderOnGeo=function(r,i,n,a){var o=n.targetVisuals.inRange,s=n.targetVisuals.outOfRange,l=i.getData(),u=this._hmLayer||this._hmLayer||new dOe;u.blurSize=i.get("blurSize"),u.pointSize=i.get("pointSize"),u.minOpacity=i.get("minOpacity"),u.maxOpacity=i.get("maxOpacity");var c=r.getViewRect().clone(),h=r.getRoamTransform();c.applyTransform(h);var d=Math.max(c.x,0),f=Math.max(c.y,0),p=Math.min(c.width+c.x,a.getWidth()),v=Math.min(c.height+c.y,a.getHeight()),m=p-d,g=v-f,y=[l.mapDimension("lng"),l.mapDimension("lat"),l.mapDimension("value")],x=l.mapArray(y,function(S,A,M){var E=r.dataToPoint([S,A]);return E[0]-=d,E[1]-=f,E.push(M),E}),b=n.getExtent(),_=n.type==="visualMap.continuous"?pOe(b,n.option.range):fOe(b,n.getPieceList(),n.option.selected);u.update(x,m,g,o.color.getNormalizer(),{inRange:o.color.getColorMapper(),outOfRange:s.color.getColorMapper()},_);var w=new Ta({style:{width:m,height:g,x:d,y:f,image:u.canvas},silent:!0});this.group.add(w)},t.type="heatmap",t}(yi),mOe=function(e){_e(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r}return t.prototype.getInitialData=function(r,i){return Bd(null,this,{generateCoord:"value"})},t.prototype.preventIncremental=function(){var r=v4.get(this.get("coordinateSystem"));if(r&&r.dimensions)return r.dimensions[0]==="lng"&&r.dimensions[1]==="lat"},t.type="series.heatmap",t.dependencies=["grid","geo","calendar"],t.defaultOption={coordinateSystem:"cartesian2d",z:2,geoIndex:0,blurSize:30,pointSize:20,maxOpacity:1,minOpacity:0,select:{itemStyle:{borderColor:"#212121"}}},t}(Di);function gOe(e){e.registerChartView(vOe),e.registerSeriesModel(mOe)}var yOe=["itemStyle","borderWidth"],YY=[{xy:"x",wh:"width",index:0,posDesc:["left","right"]},{xy:"y",wh:"height",index:1,posDesc:["top","bottom"]}],dT=new Od,xOe=function(e){_e(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r}return t.prototype.render=function(r,i,n){var a=this.group,o=r.getData(),s=this._data,l=r.coordinateSystem,u=l.getBaseAxis(),c=u.isHorizontal(),h=l.master.getRect(),d={ecSize:{width:n.getWidth(),height:n.getHeight()},seriesModel:r,coordSys:l,coordSysExtent:[[h.x,h.x+h.width],[h.y,h.y+h.height]],isHorizontal:c,valueDim:YY[+c],categoryDim:YY[1-+c]};o.diff(s).add(function(p){if(o.hasValue(p)){var v=ZY(o,p),m=XY(o,p,v,d),g=QY(o,d,m);o.setItemGraphicEl(p,g),a.add(g),JY(g,d,m)}}).update(function(p,v){var m=s.getItemGraphicEl(v);if(!o.hasValue(p)){a.remove(m);return}var g=ZY(o,p),y=XY(o,p,g,d),x=jde(o,y);m&&x!==m.__pictorialShapeStr&&(a.remove(m),o.setItemGraphicEl(p,null),m=null),m?EOe(m,d,y):m=QY(o,d,y,!0),o.setItemGraphicEl(p,m),m.__pictorialSymbolMeta=y,a.add(m),JY(m,d,y)}).remove(function(p){var v=s.getItemGraphicEl(p);v&&KY(s,p,v.__pictorialSymbolMeta.animationModel,v)}).execute();var f=r.get("clip",!0)?w4(r.coordinateSystem,!1,r):null;return f?a.setClipPath(f):a.removeClipPath(),this._data=o,this.group},t.prototype.remove=function(r,i){var n=this.group,a=this._data;r.get("animation")?a&&a.eachItemGraphicEl(function(o){KY(a,Dt(o).dataIndex,r,o)}):n.removeAll()},t.type="pictorialBar",t}(yi);function XY(e,t,r,i){var n=e.getItemLayout(t),a=r.get("symbolRepeat"),o=r.get("symbolClip"),s=r.get("symbolPosition")||"start",l=r.get("symbolRotate"),u=(l||0)*Math.PI/180||0,c=r.get("symbolPatternSize")||2,h=r.isAnimationEnabled(),d={dataIndex:t,layout:n,itemModel:r,symbolType:e.getItemVisual(t,"symbol")||"circle",style:e.getItemVisual(t,"style"),symbolClip:o,symbolRepeat:a,symbolRepeatDirection:r.get("symbolRepeatDirection"),symbolPatternSize:c,rotation:u,animationModel:h?r:null,hoverScale:h&&r.get(["emphasis","scale"]),z2:r.getShallow("z",!0)||0};bOe(r,a,n,i,d),wOe(e,t,n,a,o,d.boundingLength,d.pxSign,c,i,d),_Oe(r,d.symbolScale,u,i,d);var f=d.symbolSize,p=em(r.get("symbolOffset"),f);return AOe(r,f,n,a,o,p,s,d.valueLineWidth,d.boundingLength,d.repeatCutLength,i,d),d}function bOe(e,t,r,i,n){var a=i.valueDim,o=e.get("symbolBoundingData"),s=i.coordSys.getOtherAxis(i.coordSys.getBaseAxis()),l=s.toGlobalCoord(s.dataToCoord(0)),u=1-+(r[a.wh]<=0),c;if(Ue(o)){var h=[fT(s,o[0])-l,fT(s,o[1])-l];h[1]<h[0]&&h.reverse(),c=h[u]}else o!=null?c=fT(s,o)-l:t?c=i.coordSysExtent[a.index][u]-l:c=r[a.wh];n.boundingLength=c,t&&(n.repeatCutLength=r[a.wh]),n.pxSign=c>0?1:-1}function fT(e,t){return e.toGlobalCoord(e.dataToCoord(e.scale.parse(t)))}function wOe(e,t,r,i,n,a,o,s,l,u){var c=l.valueDim,h=l.categoryDim,d=Math.abs(r[h.wh]),f=e.getItemVisual(t,"symbolSize"),p;Ue(f)?p=f.slice():f==null?p=["100%","100%"]:p=[f,f],p[h.index]=et(p[h.index],d),p[c.index]=et(p[c.index],i?d:Math.abs(a)),u.symbolSize=p;var v=u.symbolScale=[p[0]/s,p[1]/s];v[c.index]*=(l.isHorizontal?-1:1)*o}function _Oe(e,t,r,i,n){var a=e.get(yOe)||0;a&&(dT.attr({scaleX:t[0],scaleY:t[1],rotation:r}),dT.updateTransform(),a/=dT.getLineScale(),a*=t[i.valueDim.index]),n.valueLineWidth=a||0}function AOe(e,t,r,i,n,a,o,s,l,u,c,h){var d=c.categoryDim,f=c.valueDim,p=h.pxSign,v=Math.max(t[f.index]+s,0),m=v;if(i){var g=Math.abs(l),y=xa(e.get("symbolMargin"),"15%")+"",x=!1;y.lastIndexOf("!")===y.length-1&&(x=!0,y=y.slice(0,y.length-1));var b=et(y,t[f.index]),_=Math.max(v+b*2,0),w=x?0:b*2,S=Zse(i),A=S?i:$Y((g+w)/_),M=g-A*v;b=M/2/(x?A:Math.max(A-1,1)),_=v+b*2,w=x?0:b*2,!S&&i!=="fixed"&&(A=u?$Y((Math.abs(u)+w)/_):0),m=A*_-w,h.repeatTimes=A,h.symbolMargin=b}var E=p*(m/2),T=h.pathPosition=[];T[d.index]=r[d.wh]/2,T[f.index]=o==="start"?E:o==="end"?l-E:l/2,a&&(T[0]+=a[0],T[1]+=a[1]);var L=h.bundlePosition=[];L[d.index]=r[d.xy],L[f.index]=r[f.xy];var P=h.barRectShape=Be({},r);P[f.wh]=p*Math.max(Math.abs(r[f.wh]),Math.abs(T[f.index]+E)),P[d.wh]=r[d.wh];var C=h.clipShape={};C[d.xy]=-r[d.xy],C[d.wh]=c.ecSize[d.wh],C[f.xy]=0,C[f.wh]=r[f.wh]}function Fde(e){var t=e.symbolPatternSize,r=Sn(e.symbolType,-t/2,-t/2,t,t);return r.attr({culling:!0}),r.type!=="image"&&r.setStyle({strokeNoScale:!0}),r}function zde(e,t,r,i){var n=e.__pictorialBundle,a=r.symbolSize,o=r.valueLineWidth,s=r.pathPosition,l=t.valueDim,u=r.repeatTimes||0,c=0,h=a[t.valueDim.index]+o+r.symbolMargin*2;for(_V(e,function(v){v.__pictorialAnimationIndex=c,v.__pictorialRepeatTimes=u,c<u?f1(v,null,p(c),r,i):f1(v,null,{scaleX:0,scaleY:0},r,i,function(){n.remove(v)}),c++});c<u;c++){var d=Fde(r);d.__pictorialAnimationIndex=c,d.__pictorialRepeatTimes=u,n.add(d);var f=p(c);f1(d,{x:f.x,y:f.y,scaleX:0,scaleY:0},{scaleX:f.scaleX,scaleY:f.scaleY,rotation:f.rotation},r,i)}function p(v){var m=s.slice(),g=r.pxSign,y=v;return(r.symbolRepeatDirection==="start"?g>0:g<0)&&(y=u-1-v),m[l.index]=h*(y-u/2+.5)+s[l.index],{x:m[0],y:m[1],scaleX:r.symbolScale[0],scaleY:r.symbolScale[1],rotation:r.rotation}}}function Hde(e,t,r,i){var n=e.__pictorialBundle,a=e.__pictorialMainPath;a?f1(a,null,{x:r.pathPosition[0],y:r.pathPosition[1],scaleX:r.symbolScale[0],scaleY:r.symbolScale[1],rotation:r.rotation},r,i):(a=e.__pictorialMainPath=Fde(r),n.add(a),f1(a,{x:r.pathPosition[0],y:r.pathPosition[1],scaleX:0,scaleY:0,rotation:r.rotation},{scaleX:r.symbolScale[0],scaleY:r.symbolScale[1]},r,i))}function Ude(e,t,r){var i=Be({},t.barRectShape),n=e.__pictorialBarRect;n?f1(n,null,{shape:i},t,r):(n=e.__pictorialBarRect=new Tr({z2:2,shape:i,silent:!0,style:{stroke:"transparent",fill:"transparent",lineWidth:0}}),n.disableMorphing=!0,e.add(n))}function Gde(e,t,r,i){if(r.symbolClip){var n=e.__pictorialClipPath,a=Be({},r.clipShape),o=t.valueDim,s=r.animationModel,l=r.dataIndex;if(n)Nr(n,{shape:a},s,l);else{a[o.wh]=0,n=new Tr({shape:a}),e.__pictorialBundle.setClipPath(n),e.__pictorialClipPath=n;var u={};u[o.wh]=r.clipShape[o.wh],$v[i?"updateProps":"initProps"](n,{shape:u},s,l)}}}function ZY(e,t){var r=e.getItemModel(t);return r.getAnimationDelayParams=SOe,r.isAnimationEnabled=COe,r}function SOe(e){return{index:e.__pictorialAnimationIndex,count:e.__pictorialRepeatTimes}}function COe(){return this.parentModel.isAnimationEnabled()&&!!this.getShallow("animation")}function QY(e,t,r,i){var n=new Ct,a=new Ct;return n.add(a),n.__pictorialBundle=a,a.x=r.bundlePosition[0],a.y=r.bundlePosition[1],r.symbolRepeat?zde(n,t,r):Hde(n,t,r),Ude(n,r,i),Gde(n,t,r,i),n.__pictorialShapeStr=jde(e,r),n.__pictorialSymbolMeta=r,n}function EOe(e,t,r){var i=r.animationModel,n=r.dataIndex,a=e.__pictorialBundle;Nr(a,{x:r.bundlePosition[0],y:r.bundlePosition[1]},i,n),r.symbolRepeat?zde(e,t,r,!0):Hde(e,t,r,!0),Ude(e,r,!0),Gde(e,t,r,!0)}function KY(e,t,r,i){var n=i.__pictorialBarRect;n&&n.removeTextContent();var a=[];_V(i,function(o){a.push(o)}),i.__pictorialMainPath&&a.push(i.__pictorialMainPath),i.__pictorialClipPath&&(r=null),q(a,function(o){fp(o,{scaleX:0,scaleY:0},r,t,function(){i.parent&&i.parent.remove(i)})}),e.setItemGraphicEl(t,null)}function jde(e,t){return[e.getItemVisual(t.dataIndex,"symbol")||"none",!!t.symbolRepeat,!!t.symbolClip].join(":")}function _V(e,t,r){q(e.__pictorialBundle.children(),function(i){i!==e.__pictorialBarRect&&t.call(r,i)})}function f1(e,t,r,i,n,a){t&&e.attr(t),i.symbolClip&&!n?r&&e.attr(r):r&&$v[n?"updateProps":"initProps"](e,r,i.animationModel,i.dataIndex,a)}function JY(e,t,r){var i=r.dataIndex,n=r.itemModel,a=n.getModel("emphasis"),o=a.getModel("itemStyle").getItemStyle(),s=n.getModel(["blur","itemStyle"]).getItemStyle(),l=n.getModel(["select","itemStyle"]).getItemStyle(),u=n.getShallow("cursor"),c=a.get("focus"),h=a.get("blurScope"),d=a.get("scale");_V(e,function(v){if(v instanceof Ta){var m=v.style;v.useStyle(Be({image:m.image,x:m.x,y:m.y,width:m.width,height:m.height},r.style))}else v.useStyle(r.style);var g=v.ensureState("emphasis");g.style=o,d&&(g.scaleX=v.scaleX*1.1,g.scaleY=v.scaleY*1.1),v.ensureState("blur").style=s,v.ensureState("select").style=l,u&&(v.cursor=u),v.z2=r.z2});var f=t.valueDim.posDesc[+(r.boundingLength>0)],p=e.__pictorialBarRect;p.ignoreClip=!0,Xa(p,ia(n),{labelFetcher:t.seriesModel,labelDataIndex:i,defaultText:U1(t.seriesModel.getData(),i),inheritColor:r.style.fill,defaultOpacity:r.style.opacity,defaultOutsidePosition:f}),Ji(e,c,h,a.get("disabled"))}function $Y(e){var t=Math.round(e);return Math.abs(e-t)<1e-4?t:Math.ceil(e)}var MOe=function(e){_e(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r.hasSymbolVisual=!0,r.defaultSymbol="roundRect",r}return t.prototype.getInitialData=function(r){return r.stack=null,e.prototype.getInitialData.apply(this,arguments)},t.type="series.pictorialBar",t.dependencies=["grid"],t.defaultOption=Mp(cw.defaultOption,{symbol:"circle",symbolSize:null,symbolRotate:null,symbolPosition:null,symbolOffset:null,symbolMargin:null,symbolRepeat:!1,symbolRepeatDirection:"end",symbolClip:!1,symbolBoundingData:null,symbolPatternSize:400,barGap:"-100%",clip:!1,progressive:0,emphasis:{scale:!1},select:{itemStyle:{borderColor:"#212121"}}}),t}(cw);function TOe(e){e.registerChartView(xOe),e.registerSeriesModel(MOe),e.registerLayout(e.PRIORITY.VISUAL.LAYOUT,kt(Mce,"pictorialBar")),e.registerLayout(e.PRIORITY.VISUAL.PROGRESSIVE_LAYOUT,Tce("pictorialBar"))}var POe=function(e){_e(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r._layers=[],r}return t.prototype.render=function(r,i,n){var a=r.getData(),o=this,s=this.group,l=r.getLayerSeries(),u=a.getLayout("layoutInfo"),c=u.rect,h=u.boundaryGap;s.x=0,s.y=c.y+h[0];function d(m){return m.name}var f=new yd(this._layersSeries||[],l,d,d),p=[];f.add(at(v,this,"add")).update(at(v,this,"update")).remove(at(v,this,"remove")).execute();function v(m,g,y){var x=o._layers;if(m==="remove"){s.remove(x[g]);return}for(var b=[],_=[],w,S=l[g].indices,A=0;A<S.length;A++){var M=a.getItemLayout(S[A]),E=M.x,T=M.y0,L=M.y;b.push(E,T),_.push(E,T+L),w=a.getItemVisual(S[A],"style")}var P,C=a.getItemLayout(S[0]),D=r.getModel("label"),I=D.get("margin"),O=r.getModel("emphasis");if(m==="add"){var R=p[g]=new Ct;P=new mhe({shape:{points:b,stackedOnPoints:_,smooth:.4,stackedOnSmooth:.4,smoothConstraint:!1},z2:0}),R.add(P),s.add(R),r.isAnimationEnabled()&&P.setClipPath(DOe(P.getBoundingRect(),r,function(){P.removeClipPath()}))}else{var R=x[y];P=R.childAt(0),s.add(R),p[g]=R,Nr(P,{shape:{points:b,stackedOnPoints:_}},r),Pu(P)}Xa(P,ia(r),{labelDataIndex:S[A-1],defaultText:a.getName(S[A-1]),inheritColor:w.fill},{normal:{verticalAlign:"middle"}}),P.setTextConfig({position:null,local:!0});var H=P.getTextContent();H&&(H.x=C.x-I,H.y=C.y0+C.y/2),P.useStyle(w),a.setItemGraphicEl(g,P),Ya(P,r),Ji(P,O.get("focus"),O.get("blurScope"),O.get("disabled"))}this._layersSeries=l,this._layers=p},t.type="themeRiver",t}(yi);function DOe(e,t,r){var i=new Tr({shape:{x:e.x-10,y:e.y-10,width:0,height:e.height+20}});return Vi(i,{shape:{x:e.x-50,width:e.width+100,height:e.height+20}},t,r),i}var pT=2,IOe=function(e){_e(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r}return t.prototype.init=function(r){e.prototype.init.apply(this,arguments),this.legendVisualProvider=new S4(at(this.getData,this),at(this.getRawData,this))},t.prototype.fixData=function(r){var i=r.length,n={},a=nL(r,function(d){return n.hasOwnProperty(d[0]+"")||(n[d[0]+""]=-1),d[2]}),o=[];a.buckets.each(function(d,f){o.push({name:f,dataList:d})});for(var s=o.length,l=0;l<s;++l){for(var u=o[l].name,c=0;c<o[l].dataList.length;++c){var h=o[l].dataList[c][0]+"";n[h]=l}for(var h in n)n.hasOwnProperty(h)&&n[h]!==l&&(n[h]=l,r[i]=[h,0,u],i++)}return r},t.prototype.getInitialData=function(r,i){for(var n=this.getReferringComponents("singleAxis",wn).models[0],a=n.get("type"),o=ni(r.data,function(p){return p[2]!==void 0}),s=this.fixData(o||[]),l=[],u=this.nameMap=dt(),c=0,h=0;h<s.length;++h)l.push(s[h][pT]),u.get(s[h][pT])||(u.set(s[h][pT],c),c++);var d=g4(s,{coordDimensions:["single"],dimensionsDefine:[{name:"time",type:X8(a)},{name:"value",type:"float"},{name:"name",type:"ordinal"}],encodeDefine:{single:0,value:1,itemName:2}}).dimensions,f=new Wo(d,this);return f.initData(s),f},t.prototype.getLayerSeries=function(){for(var r=this.getData(),i=r.count(),n=[],a=0;a<i;++a)n[a]=a;var o=r.mapDimension("single"),s=nL(n,function(u){return r.get("name",u)}),l=[];return s.buckets.each(function(u,c){u.sort(function(h,d){return r.get(o,h)-r.get(o,d)}),l.push({name:c,indices:u})}),l},t.prototype.getAxisTooltipData=function(r,i,n){Ue(r)||(r=r?[r]:[]);for(var a=this.getData(),o=this.getLayerSeries(),s=[],l=o.length,u,c=0;c<l;++c){for(var h=Number.MAX_VALUE,d=-1,f=o[c].indices.length,p=0;p<f;++p){var v=a.get(r[0],o[c].indices[p]),m=Math.abs(v-i);m<=h&&(u=v,h=m,d=o[c].indices[p])}s.push(d)}return{dataIndices:s,nestestValue:u}},t.prototype.formatTooltip=function(r,i,n){var a=this.getData(),o=a.getName(r),s=a.get(a.mapDimension("value"),r);return na("nameValue",{name:o,value:s})},t.type="series.themeRiver",t.dependencies=["singleAxis"],t.defaultOption={z:2,colorBy:"data",coordinateSystem:"singleAxis",boundaryGap:["10%","10%"],singleAxisIndex:0,animationEasing:"linear",label:{margin:4,show:!0,position:"left",fontSize:11},emphasis:{label:{show:!0}}},t}(Di);function LOe(e,t){e.eachSeriesByType("themeRiver",function(r){var i=r.getData(),n=r.coordinateSystem,a={},o=n.getRect();a.rect=o;var s=r.get("boundaryGap"),l=n.getAxis();if(a.boundaryGap=s,l.orient==="horizontal"){s[0]=et(s[0],o.height),s[1]=et(s[1],o.height);var u=o.height-s[0]-s[1];eX(i,r,u)}else{s[0]=et(s[0],o.width),s[1]=et(s[1],o.width);var c=o.width-s[0]-s[1];eX(i,r,c)}i.setLayout("layoutInfo",a)})}function eX(e,t,r){if(e.count())for(var i=t.coordinateSystem,n=t.getLayerSeries(),a=e.mapDimension("single"),o=e.mapDimension("value"),s=qe(n,function(m){return qe(m.indices,function(g){var y=i.dataToPoint(e.get(a,g));return y[1]=e.get(o,g),y})}),l=kOe(s),u=l.y0,c=r/l.max,h=n.length,d=n[0].indices.length,f,p=0;p<d;++p){f=u[p]*c,e.setItemLayout(n[0].indices[p],{layerIndex:0,x:s[0][p][0],y0:f,y:s[0][p][1]*c});for(var v=1;v<h;++v)f+=s[v-1][p][1]*c,e.setItemLayout(n[v].indices[p],{layerIndex:v,x:s[v][p][0],y0:f,y:s[v][p][1]*c})}}function kOe(e){for(var t=e.length,r=e[0].length,i=[],n=[],a=0,o=0;o<r;++o){for(var s=0,l=0;l<t;++l)s+=e[l][o][1];s>a&&(a=s),i.push(s)}for(var u=0;u<r;++u)n[u]=(a-i[u])/2;a=0;for(var c=0;c<r;++c){var h=i[c]+n[c];h>a&&(a=h)}return{y0:n,max:a}}function ROe(e){e.registerChartView(POe),e.registerSeriesModel(IOe),e.registerLayout(LOe),e.registerProcessor(A4("themeRiver"))}var OOe=2,BOe=4,tX=function(e){_e(t,e);function t(r,i,n,a){var o=e.call(this)||this;o.z2=OOe,o.textConfig={inside:!0},Dt(o).seriesIndex=i.seriesIndex;var s=new Dr({z2:BOe,silent:r.getModel().get(["label","silent"])});return o.setTextContent(s),o.updateData(!0,r,i,n,a),o}return t.prototype.updateData=function(r,i,n,a,o){this.node=i,i.piece=this,n=n||this._seriesModel,a=a||this._ecModel;var s=this;Dt(s).dataIndex=i.dataIndex;var l=i.getModel(),u=l.getModel("emphasis"),c=i.getLayout(),h=Be({},c);h.label=null;var d=i.getVisual("style");d.lineJoin="bevel";var f=i.getVisual("decal");f&&(d.decal=z1(f,o));var p=Z0(l.getModel("itemStyle"),h,!0);Be(h,p),q(Xo,function(y){var x=s.ensureState(y),b=l.getModel([y,"itemStyle"]);x.style=b.getItemStyle();var _=Z0(b,h);_&&(x.shape=_)}),r?(s.setShape(h),s.shape.r=c.r0,Vi(s,{shape:{r:c.r}},n,i.dataIndex)):(Nr(s,{shape:h},n),Pu(s)),s.useStyle(d),this._updateLabel(n);var v=l.getShallow("cursor");v&&s.attr("cursor",v),this._seriesModel=n||this._seriesModel,this._ecModel=a||this._ecModel;var m=u.get("focus"),g=m==="ancestor"?i.getAncestorsIndices():m==="descendant"?i.getDescendantIndices():m;Ji(this,g,u.get("blurScope"),u.get("disabled"))},t.prototype._updateLabel=function(r){var i=this,n=this.node.getModel(),a=n.getModel("label"),o=this.node.getLayout(),s=o.endAngle-o.startAngle,l=(o.startAngle+o.endAngle)/2,u=Math.cos(l),c=Math.sin(l),h=this,d=h.getTextContent(),f=this.node.dataIndex,p=a.get("minAngle")/180*Math.PI,v=a.get("show")&&!(p!=null&&Math.abs(s)<p);d.ignore=!v,q(Jb,function(g){var y=g==="normal"?n.getModel("label"):n.getModel([g,"label"]),x=g==="normal",b=x?d:d.ensureState(g),_=r.getFormattedLabel(f,g);x&&(_=_||i.node.name),b.style=Ti(y,{},null,g!=="normal",!0),_&&(b.style.text=_);var w=y.get("show");w!=null&&!x&&(b.ignore=!w);var S=m(y,"position"),A=x?h:h.states[g],M=A.style.fill;A.textConfig={outsideFill:y.get("color")==="inherit"?M:null,inside:S!=="outside"};var E,T=m(y,"distance")||0,L=m(y,"align"),P=m(y,"rotate"),C=Math.PI*.5,D=Math.PI*1.5,I=zs(P==="tangential"?Math.PI/2-l:l),O=I>C&&!Qb(I-C)&&I<D;S==="outside"?(E=o.r+T,L=O?"right":"left"):!L||L==="center"?(s===2*Math.PI&&o.r0===0?E=0:E=(o.r+o.r0)/2,L="center"):L==="left"?(E=o.r0+T,L=O?"right":"left"):L==="right"&&(E=o.r-T,L=O?"left":"right"),b.style.align=L,b.style.verticalAlign=m(y,"verticalAlign")||"middle",b.x=E*u+o.cx,b.y=E*c+o.cy;var R=0;P==="radial"?R=zs(-l)+(O?Math.PI:0):P==="tangential"?R=zs(Math.PI/2-l)+(O?Math.PI:0):kr(P)&&(R=P*Math.PI/180),b.rotation=zs(R)});function m(g,y){var x=g.get(y);return x??a.get(y)}d.dirtyStyle()},t}(Zo),nk="sunburstRootToNode",rX="sunburstHighlight",NOe="sunburstUnhighlight";function VOe(e){e.registerAction({type:nk,update:"updateView"},function(t,r){r.eachComponent({mainType:"series",subType:"sunburst",query:t},i);function i(n,a){var o=dw(t,[nk],n);if(o){var s=n.getViewRoot();s&&(t.direction=lV(s,o.node)?"rollUp":"drillDown"),n.resetViewRoot(o.node)}}}),e.registerAction({type:rX,update:"none"},function(t,r,i){t=Be({},t),r.eachComponent({mainType:"series",subType:"sunburst",query:t},n);function n(a){var o=dw(t,[rX],a);o&&(t.dataIndex=o.node.dataIndex)}i.dispatchAction(Be(t,{type:"highlight"}))}),e.registerAction({type:NOe,update:"updateView"},function(t,r,i){t=Be({},t),i.dispatchAction(Be(t,{type:"downplay"}))})}var FOe=function(e){_e(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r}return t.prototype.render=function(r,i,n,a){var o=this;this.seriesModel=r,this.api=n,this.ecModel=i;var s=r.getData(),l=s.tree.root,u=r.getViewRoot(),c=this.group,h=r.get("renderLabelForZeroData"),d=[];u.eachNode(function(y){d.push(y)});var f=this._oldChildren||[];p(d,f),g(l,u),this._initEvents(),this._oldChildren=d;function p(y,x){if(y.length===0&&x.length===0)return;new yd(x,y,b,b).add(_).update(_).remove(kt(_,null)).execute();function b(w){return w.getId()}function _(w,S){var A=w==null?null:y[w],M=S==null?null:x[S];v(A,M)}}function v(y,x){if(!h&&y&&!y.getValue()&&(y=null),y!==l&&x!==l){if(x&&x.piece)y?(x.piece.updateData(!1,y,r,i,n),s.setItemGraphicEl(y.dataIndex,x.piece)):m(x);else if(y){var b=new tX(y,r,i,n);c.add(b),s.setItemGraphicEl(y.dataIndex,b)}}}function m(y){y&&y.piece&&(c.remove(y.piece),y.piece=null)}function g(y,x){x.depth>0?(o.virtualPiece?o.virtualPiece.updateData(!1,y,r,i,n):(o.virtualPiece=new tX(y,r,i,n),c.add(o.virtualPiece)),x.piece.off("click"),o.virtualPiece.on("click",function(b){o._rootToNode(x.parentNode)})):o.virtualPiece&&(c.remove(o.virtualPiece),o.virtualPiece=null)}},t.prototype._initEvents=function(){var r=this;this.group.off("click"),this.group.on("click",function(i){var n=!1,a=r.seriesModel.getViewRoot();a.eachNode(function(o){if(!n&&o.piece&&o.piece===i.target){var s=o.getModel().get("nodeClick");if(s==="rootToNode")r._rootToNode(o);else if(s==="link"){var l=o.getModel(),u=l.get("link");if(u){var c=l.get("target",!0)||"_blank";z8(u,c)}}n=!0}})})},t.prototype._rootToNode=function(r){r!==this.seriesModel.getViewRoot()&&this.api.dispatchAction({type:nk,from:this.uid,seriesId:this.seriesModel.id,targetNode:r})},t.prototype.containPoint=function(r,i){var n=i.getData(),a=n.getItemLayout(0);if(a){var o=r[0]-a.cx,s=r[1]-a.cy,l=Math.sqrt(o*o+s*s);return l<=a.r&&l>=a.r0}},t.type="sunburst",t}(yi),zOe=function(e){_e(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r.ignoreStyleOnData=!0,r}return t.prototype.getInitialData=function(r,i){var n={name:r.name,children:r.data};Wde(n);var a=this._levelModels=qe(r.levels||[],function(l){return new Qr(l,this,i)},this),o=sV.createTree(n,this,s);function s(l){l.wrapMethod("getItemModel",function(u,c){var h=o.getNodeByDataIndex(c),d=a[h.depth];return d&&(u.parentModel=d),u})}return o.data},t.prototype.optionUpdated=function(){this.resetViewRoot()},t.prototype.getDataParams=function(r){var i=e.prototype.getDataParams.apply(this,arguments),n=this.getData().tree.getNodeByDataIndex(r);return i.treePathInfo=UC(n,this),i},t.prototype.getLevelModel=function(r){return this._levelModels&&this._levelModels[r.depth]},t.prototype.getViewRoot=function(){return this._viewRoot},t.prototype.resetViewRoot=function(r){r?this._viewRoot=r:r=this._viewRoot;var i=this.getRawData().tree.root;(!r||r!==i&&!i.contains(r))&&(this._viewRoot=i)},t.prototype.enableAriaDecal=function(){Qhe(this)},t.type="series.sunburst",t.defaultOption={z:2,center:["50%","50%"],radius:[0,"75%"],clockwise:!0,startAngle:90,minAngle:0,stillShowZeroSum:!0,nodeClick:"rootToNode",renderLabelForZeroData:!1,label:{rotate:"radial",show:!0,opacity:1,align:"center",position:"inside",distance:5,silent:!0},itemStyle:{borderWidth:1,borderColor:"white",borderType:"solid",shadowBlur:0,shadowColor:"rgba(0, 0, 0, 0.2)",shadowOffsetX:0,shadowOffsetY:0,opacity:1},emphasis:{focus:"descendant"},blur:{itemStyle:{opacity:.2},label:{opacity:.1}},animationType:"expansion",animationDuration:1e3,animationDurationUpdate:500,data:[],sort:"desc"},t}(Di);function Wde(e){var t=0;q(e.children,function(i){Wde(i);var n=i.value;Ue(n)&&(n=n[0]),t+=n});var r=e.value;Ue(r)&&(r=r[0]),(r==null||isNaN(r))&&(r=t),r<0&&(r=0),Ue(e.value)?e.value[0]=r:e.value=r}var iX=Math.PI/180;function HOe(e,t,r){t.eachSeriesByType(e,function(i){var n=i.get("center"),a=i.get("radius");Ue(a)||(a=[0,a]),Ue(n)||(n=[n,n]);var o=r.getWidth(),s=r.getHeight(),l=Math.min(o,s),u=et(n[0],o),c=et(n[1],s),h=et(a[0],l/2),d=et(a[1],l/2),f=-i.get("startAngle")*iX,p=i.get("minAngle")*iX,v=i.getData().tree.root,m=i.getViewRoot(),g=m.depth,y=i.get("sort");y!=null&&qde(m,y);var x=0;q(m.children,function(I){!isNaN(I.getValue())&&x++});var b=m.getValue(),_=Math.PI/(b||x)*2,w=m.depth>0,S=m.height-(w?-1:1),A=(d-h)/(S||1),M=i.get("clockwise"),E=i.get("stillShowZeroSum"),T=M?1:-1,L=function(I,O){if(I){var R=O;if(I!==v){var H=I.getValue(),j=b===0&&E?_:H*_;j<p&&(j=p),R=O+T*j;var N=I.depth-g-(w?-1:1),k=h+A*N,G=h+A*(N+1),Y=i.getLevelModel(I);if(Y){var F=Y.get("r0",!0),Z=Y.get("r",!0),ne=Y.get("radius",!0);ne!=null&&(F=ne[0],Z=ne[1]),F!=null&&(k=et(F,l/2)),Z!=null&&(G=et(Z,l/2))}I.setLayout({angle:j,startAngle:O,endAngle:R,clockwise:M,cx:u,cy:c,r0:k,r:G})}if(I.children&&I.children.length){var re=0;q(I.children,function(ae){re+=L(ae,O+re)})}return R-O}};if(w){var P=h,C=h+A,D=Math.PI*2;v.setLayout({angle:D,startAngle:f,endAngle:f+D,clockwise:M,cx:u,cy:c,r0:P,r:C})}L(m,f)})}function qde(e,t){var r=e.children||[];e.children=UOe(r,t),r.length&&q(e.children,function(i){qde(i,t)})}function UOe(e,t){if(xt(t)){var r=qe(e,function(n,a){var o=n.getValue();return{params:{depth:n.depth,height:n.height,dataIndex:n.dataIndex,getValue:function(){return o}},index:a}});return r.sort(function(n,a){return t(n.params,a.params)}),qe(r,function(n){return e[n.index]})}else{var i=t==="asc";return e.sort(function(n,a){var o=(n.getValue()-a.getValue())*(i?1:-1);return o===0?(n.dataIndex-a.dataIndex)*(i?-1:1):o})}}function GOe(e){var t={};function r(i,n,a){for(var o=i;o&&o.depth>1;)o=o.parentNode;var s=n.getColorFromPalette(o.name||o.dataIndex+"",t);return i.depth>1&&it(s)&&(s=qI(s,(i.depth-1)/(a-1)*.5)),s}e.eachSeriesByType("sunburst",function(i){var n=i.getData(),a=n.tree;a.eachNode(function(o){var s=o.getModel(),l=s.getModel("itemStyle").getItemStyle();l.fill||(l.fill=r(o,i,a.root.height));var u=n.ensureUniqueItemVisual(o.dataIndex,"style");Be(u,l)})})}function jOe(e){e.registerChartView(FOe),e.registerSeriesModel(zOe),e.registerLayout(kt(HOe,"sunburst")),e.registerProcessor(kt(A4,"sunburst")),e.registerVisual(GOe),VOe(e)}var nX={color:"fill",borderColor:"stroke"},WOe={symbol:1,symbolSize:1,symbolKeepAspect:1,legendIcon:1,visualMeta:1,liftZ:1,decal:1},ld=Pr(),qOe=function(e){_e(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r}return t.prototype.optionUpdated=function(){this.currentZLevel=this.get("zlevel",!0),this.currentZ=this.get("z",!0)},t.prototype.getInitialData=function(r,i){return Bd(null,this)},t.prototype.getDataParams=function(r,i,n){var a=e.prototype.getDataParams.call(this,r,i);return n&&(a.info=ld(n).info),a},t.type="series.custom",t.dependencies=["grid","polar","geo","singleAxis","calendar"],t.defaultOption={coordinateSystem:"cartesian2d",z:2,legendHoverLink:!0,clip:!1},t}(Di);function YOe(e,t){return t=t||[0,0],qe(["x","y"],function(r,i){var n=this.getAxis(r),a=t[i],o=e[i]/2;return n.type==="category"?n.getBandWidth():Math.abs(n.dataToCoord(a-o)-n.dataToCoord(a+o))},this)}function XOe(e){var t=e.master.getRect();return{coordSys:{type:"cartesian2d",x:t.x,y:t.y,width:t.width,height:t.height},api:{coord:function(r){return e.dataToPoint(r)},size:at(YOe,e)}}}function ZOe(e,t){return t=t||[0,0],qe([0,1],function(r){var i=t[r],n=e[r]/2,a=[],o=[];return a[r]=i-n,o[r]=i+n,a[1-r]=o[1-r]=t[1-r],Math.abs(this.dataToPoint(a)[r]-this.dataToPoint(o)[r])},this)}function QOe(e){var t=e.getBoundingRect();return{coordSys:{type:"geo",x:t.x,y:t.y,width:t.width,height:t.height,zoom:e.getZoom()},api:{coord:function(r){return e.dataToPoint(r)},size:at(ZOe,e)}}}function KOe(e,t){var r=this.getAxis(),i=t instanceof Array?t[0]:t,n=(e instanceof Array?e[0]:e)/2;return r.type==="category"?r.getBandWidth():Math.abs(r.dataToCoord(i-n)-r.dataToCoord(i+n))}function JOe(e){var t=e.getRect();return{coordSys:{type:"singleAxis",x:t.x,y:t.y,width:t.width,height:t.height},api:{coord:function(r){return e.dataToPoint(r)},size:at(KOe,e)}}}function $Oe(e,t){return t=t||[0,0],qe(["Radius","Angle"],function(r,i){var n="get"+r+"Axis",a=this[n](),o=t[i],s=e[i]/2,l=a.type==="category"?a.getBandWidth():Math.abs(a.dataToCoord(o-s)-a.dataToCoord(o+s));return r==="Angle"&&(l=l*Math.PI/180),l},this)}function eBe(e){var t=e.getRadiusAxis(),r=e.getAngleAxis(),i=t.getExtent();return i[0]>i[1]&&i.reverse(),{coordSys:{type:"polar",cx:e.cx,cy:e.cy,r:i[1],r0:i[0]},api:{coord:function(n){var a=t.dataToRadius(n[0]),o=r.dataToAngle(n[1]),s=e.coordToPoint([a,o]);return s.push(a,o*Math.PI/180),s},size:at($Oe,e)}}}function tBe(e){var t=e.getRect(),r=e.getRangeInfo();return{coordSys:{type:"calendar",x:t.x,y:t.y,width:t.width,height:t.height,cellWidth:e.getCellWidth(),cellHeight:e.getCellHeight(),rangeInfo:{start:r.start,end:r.end,weeks:r.weeks,dayCount:r.allDay}},api:{coord:function(i,n){return e.dataToPoint(i,n)}}}}function Yde(e,t,r,i){return e&&(e.legacy||e.legacy!==!1&&!r&&!i&&t!=="tspan"&&(t==="text"||lt(e,"text")))}function Xde(e,t,r){var i=e,n,a,o;if(t==="text")o=i;else{o={},lt(i,"text")&&(o.text=i.text),lt(i,"rich")&&(o.rich=i.rich),lt(i,"textFill")&&(o.fill=i.textFill),lt(i,"textStroke")&&(o.stroke=i.textStroke),lt(i,"fontFamily")&&(o.fontFamily=i.fontFamily),lt(i,"fontSize")&&(o.fontSize=i.fontSize),lt(i,"fontStyle")&&(o.fontStyle=i.fontStyle),lt(i,"fontWeight")&&(o.fontWeight=i.fontWeight),a={type:"text",style:o,silent:!0},n={};var s=lt(i,"textPosition");r?n.position=s?i.textPosition:"inside":s&&(n.position=i.textPosition),lt(i,"textPosition")&&(n.position=i.textPosition),lt(i,"textOffset")&&(n.offset=i.textOffset),lt(i,"textRotation")&&(n.rotation=i.textRotation),lt(i,"textDistance")&&(n.distance=i.textDistance)}return aX(o,e),q(o.rich,function(l){aX(l,l)}),{textConfig:n,textContent:a}}function aX(e,t){t&&(t.font=t.textFont||t.font,lt(t,"textStrokeWidth")&&(e.lineWidth=t.textStrokeWidth),lt(t,"textAlign")&&(e.align=t.textAlign),lt(t,"textVerticalAlign")&&(e.verticalAlign=t.textVerticalAlign),lt(t,"textLineHeight")&&(e.lineHeight=t.textLineHeight),lt(t,"textWidth")&&(e.width=t.textWidth),lt(t,"textHeight")&&(e.height=t.textHeight),lt(t,"textBackgroundColor")&&(e.backgroundColor=t.textBackgroundColor),lt(t,"textPadding")&&(e.padding=t.textPadding),lt(t,"textBorderColor")&&(e.borderColor=t.textBorderColor),lt(t,"textBorderWidth")&&(e.borderWidth=t.textBorderWidth),lt(t,"textBorderRadius")&&(e.borderRadius=t.textBorderRadius),lt(t,"textBoxShadowColor")&&(e.shadowColor=t.textBoxShadowColor),lt(t,"textBoxShadowBlur")&&(e.shadowBlur=t.textBoxShadowBlur),lt(t,"textBoxShadowOffsetX")&&(e.shadowOffsetX=t.textBoxShadowOffsetX),lt(t,"textBoxShadowOffsetY")&&(e.shadowOffsetY=t.textBoxShadowOffsetY))}function oX(e,t,r){var i=e;i.textPosition=i.textPosition||r.position||"inside",r.offset!=null&&(i.textOffset=r.offset),r.rotation!=null&&(i.textRotation=r.rotation),r.distance!=null&&(i.textDistance=r.distance);var n=i.textPosition.indexOf("inside")>=0,a=e.fill||"#000";sX(i,t);var o=i.textFill==null;return n?o&&(i.textFill=r.insideFill||"#fff",!i.textStroke&&r.insideStroke&&(i.textStroke=r.insideStroke),!i.textStroke&&(i.textStroke=a),i.textStrokeWidth==null&&(i.textStrokeWidth=2)):(o&&(i.textFill=e.fill||r.outsideFill||"#000"),!i.textStroke&&r.outsideStroke&&(i.textStroke=r.outsideStroke)),i.text=t.text,i.rich=t.rich,q(t.rich,function(s){sX(s,s)}),i}function sX(e,t){t&&(lt(t,"fill")&&(e.textFill=t.fill),lt(t,"stroke")&&(e.textStroke=t.fill),lt(t,"lineWidth")&&(e.textStrokeWidth=t.lineWidth),lt(t,"font")&&(e.font=t.font),lt(t,"fontStyle")&&(e.fontStyle=t.fontStyle),lt(t,"fontWeight")&&(e.fontWeight=t.fontWeight),lt(t,"fontSize")&&(e.fontSize=t.fontSize),lt(t,"fontFamily")&&(e.fontFamily=t.fontFamily),lt(t,"align")&&(e.textAlign=t.align),lt(t,"verticalAlign")&&(e.textVerticalAlign=t.verticalAlign),lt(t,"lineHeight")&&(e.textLineHeight=t.lineHeight),lt(t,"width")&&(e.textWidth=t.width),lt(t,"height")&&(e.textHeight=t.height),lt(t,"backgroundColor")&&(e.textBackgroundColor=t.backgroundColor),lt(t,"padding")&&(e.textPadding=t.padding),lt(t,"borderColor")&&(e.textBorderColor=t.borderColor),lt(t,"borderWidth")&&(e.textBorderWidth=t.borderWidth),lt(t,"borderRadius")&&(e.textBorderRadius=t.borderRadius),lt(t,"shadowColor")&&(e.textBoxShadowColor=t.shadowColor),lt(t,"shadowBlur")&&(e.textBoxShadowBlur=t.shadowBlur),lt(t,"shadowOffsetX")&&(e.textBoxShadowOffsetX=t.shadowOffsetX),lt(t,"shadowOffsetY")&&(e.textBoxShadowOffsetY=t.shadowOffsetY),lt(t,"textShadowColor")&&(e.textShadowColor=t.textShadowColor),lt(t,"textShadowBlur")&&(e.textShadowBlur=t.textShadowBlur),lt(t,"textShadowOffsetX")&&(e.textShadowOffsetX=t.textShadowOffsetX),lt(t,"textShadowOffsetY")&&(e.textShadowOffsetY=t.textShadowOffsetY))}var Zde={position:["x","y"],scale:["scaleX","scaleY"],origin:["originX","originY"]},lX=mr(Zde);Zc(Kc,function(e,t){return e[t]=1,e},{});Kc.join(", ");var oS=["","style","shape","extra"],W1=Pr();function AV(e,t,r,i,n){var a=e+"Animation",o=Cy(e,i,n)||{},s=W1(t).userDuring;return o.duration>0&&(o.during=s?at(oBe,{el:t,userDuring:s}):null,o.setToFinal=!0,o.scope=e),Be(o,r[a]),o}function CA(e,t,r,i){i=i||{};var n=i.dataIndex,a=i.isInit,o=i.clearStyle,s=r.isAnimationEnabled(),l=W1(e),u=t.style;l.userDuring=t.during;var c={},h={};if(lBe(e,t,h),cX("shape",t,h),cX("extra",t,h),!a&&s&&(sBe(e,t,c),uX("shape",e,t,c),uX("extra",e,t,c),uBe(e,t,u,c)),h.style=u,rBe(e,h,o),nBe(e,t),s)if(a){var d={};q(oS,function(p){var v=p?t[p]:t;v&&v.enterFrom&&(p&&(d[p]=d[p]||{}),Be(p?d[p]:d,v.enterFrom))});var f=AV("enter",e,t,r,n);f.duration>0&&e.animateFrom(d,f)}else iBe(e,t,n||0,r,c);Qde(e,t),u?e.dirty():e.markRedraw()}function Qde(e,t){for(var r=W1(e).leaveToProps,i=0;i<oS.length;i++){var n=oS[i],a=n?t[n]:t;a&&a.leaveTo&&(r||(r=W1(e).leaveToProps={}),n&&(r[n]=r[n]||{}),Be(n?r[n]:r,a.leaveTo))}}function WC(e,t,r,i){if(e){var n=e.parent,a=W1(e).leaveToProps;if(a){var o=AV("update",e,t,r,0);o.done=function(){n.remove(e)},e.animateTo(a,o)}else n.remove(e)}}function wv(e){return e==="all"}function rBe(e,t,r){var i=t.style;if(!e.isGroup&&i){if(r){e.useStyle({});for(var n=e.animators,a=0;a<n.length;a++){var o=n[a];o.targetName==="style"&&o.changeTarget(e.style)}}e.setStyle(i)}t&&(t.style=null,t&&e.attr(t),t.style=i)}function iBe(e,t,r,i,n){if(n){var a=AV("update",e,t,i,r);a.duration>0&&e.animateFrom(n,a)}}function nBe(e,t){lt(t,"silent")&&(e.silent=t.silent),lt(t,"ignore")&&(e.ignore=t.ignore),e instanceof Rl&&lt(t,"invisible")&&(e.invisible=t.invisible),e instanceof or&&lt(t,"autoBatch")&&(e.autoBatch=t.autoBatch)}var sc={},aBe={setTransform:function(e,t){return sc.el[e]=t,this},getTransform:function(e){return sc.el[e]},setShape:function(e,t){var r=sc.el,i=r.shape||(r.shape={});return i[e]=t,r.dirtyShape&&r.dirtyShape(),this},getShape:function(e){var t=sc.el.shape;if(t)return t[e]},setStyle:function(e,t){var r=sc.el,i=r.style;return i&&(i[e]=t,r.dirtyStyle&&r.dirtyStyle()),this},getStyle:function(e){var t=sc.el.style;if(t)return t[e]},setExtra:function(e,t){var r=sc.el.extra||(sc.el.extra={});return r[e]=t,this},getExtra:function(e){var t=sc.el.extra;if(t)return t[e]}};function oBe(){var e=this,t=e.el;if(t){var r=W1(t).userDuring,i=e.userDuring;if(r!==i){e.el=e.userDuring=null;return}sc.el=t,i(aBe)}}function uX(e,t,r,i){var n=r[e];if(n){var a=t[e],o;if(a){var s=r.transition,l=n.transition;if(l)if(!o&&(o=i[e]={}),wv(l))Be(o,a);else for(var u=ci(l),c=0;c<u.length;c++){var h=u[c],d=a[h];o[h]=d}else if(wv(s)||tr(s,e)>=0){!o&&(o=i[e]={});for(var f=mr(a),c=0;c<f.length;c++){var h=f[c],d=a[h];cBe(n[h],d)&&(o[h]=d)}}}}}function cX(e,t,r){var i=t[e];if(i)for(var n=r[e]={},a=mr(i),o=0;o<a.length;o++){var s=a[o];n[s]=ob(i[s])}}function sBe(e,t,r){for(var i=t.transition,n=wv(i)?Kc:ci(i||[]),a=0;a<n.length;a++){var o=n[a];if(!(o==="style"||o==="shape"||o==="extra")){var s=e[o];r[o]=s}}}function lBe(e,t,r){for(var i=0;i<lX.length;i++){var n=lX[i],a=Zde[n],o=t[n];o&&(r[a[0]]=o[0],r[a[1]]=o[1])}for(var i=0;i<Kc.length;i++){var s=Kc[i];t[s]!=null&&(r[s]=t[s])}}function uBe(e,t,r,i){if(r){var n=e.style,a;if(n){var o=r.transition,s=t.transition;if(o&&!wv(o)){var l=ci(o);!a&&(a=i.style={});for(var u=0;u<l.length;u++){var c=l[u],h=n[c];a[c]=h}}else if(e.getAnimationStyleProps&&(wv(s)||wv(o)||tr(s,"style")>=0)){var d=e.getAnimationStyleProps(),f=d?d.style:null;if(f){!a&&(a=i.style={});for(var p=mr(r),u=0;u<p.length;u++){var c=p[u];if(f[c]){var h=n[c];a[c]=h}}}}}}}function cBe(e,t){return _o(e)?e!==t:e!=null&&isFinite(e)}var Kde=Pr(),hBe=["percent","easing","shape","style","extra"];function Jde(e){e.stopAnimation("keyframe"),e.attr(Kde(e))}function sS(e,t,r){if(!(!r.isAnimationEnabled()||!t)){if(Ue(t)){q(t,function(s){sS(e,s,r)});return}var i=t.keyframes,n=t.duration;if(r&&n==null){var a=Cy("enter",r,0);n=a&&a.duration}if(!(!i||!n)){var o=Kde(e);q(oS,function(s){if(!(s&&!e[s])){var l;i.sort(function(u,c){return u.percent-c.percent}),q(i,function(u){var c=e.animators,h=s?u[s]:u;if(h){var d=mr(h);if(s||(d=ni(d,function(v){return tr(hBe,v)<0})),!!d.length){l||(l=e.animate(s,t.loop,!0),l.scope="keyframe");for(var f=0;f<c.length;f++)c[f]!==l&&c[f].targetName===l.targetName&&c[f].stopTracks(d);s&&(o[s]=o[s]||{});var p=s?o[s]:o;q(d,function(v){p[v]=((s?e[s]:e)||{})[v]}),l.whenWithKeys(n*u.percent,h,d,u.easing)}}}),l&&l.delay(t.delay||0).duration(n).start(t.easing)}})}}}var ud="emphasis",zf="normal",SV="blur",CV="select",gp=[zf,ud,SV,CV],vT={normal:["itemStyle"],emphasis:[ud,"itemStyle"],blur:[SV,"itemStyle"],select:[CV,"itemStyle"]},mT={normal:["label"],emphasis:[ud,"label"],blur:[SV,"label"],select:[CV,"label"]},dBe=["x","y"],fBe="e\0\0",tl={normal:{},emphasis:{},blur:{},select:{}},pBe={cartesian2d:XOe,geo:QOe,single:JOe,polar:eBe,calendar:tBe};function ak(e){return e instanceof or}function ok(e){return e instanceof Rl}function vBe(e,t){t.copyTransform(e),ok(t)&&ok(e)&&(t.setStyle(e.style),t.z=e.z,t.z2=e.z2,t.zlevel=e.zlevel,t.invisible=e.invisible,t.ignore=e.ignore,ak(t)&&ak(e)&&t.setShape(e.shape))}var mBe=function(e){_e(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r}return t.prototype.render=function(r,i,n,a){this._progressiveEls=null;var o=this._data,s=r.getData(),l=this.group,u=hX(r,s,i,n);o||l.removeAll(),s.diff(o).add(function(h){gT(n,null,h,u(h,a),r,l,s)}).remove(function(h){var d=o.getItemGraphicEl(h);d&&WC(d,ld(d).option,r)}).update(function(h,d){var f=o.getItemGraphicEl(d);gT(n,f,h,u(h,a),r,l,s)}).execute();var c=r.get("clip",!0)?w4(r.coordinateSystem,!1,r):null;c?l.setClipPath(c):l.removeClipPath(),this._data=s},t.prototype.incrementalPrepareRender=function(r,i,n){this.group.removeAll(),this._data=null},t.prototype.incrementalRender=function(r,i,n,a,o){var s=i.getData(),l=hX(i,s,n,a),u=this._progressiveEls=[];function c(f){f.isGroup||(f.incremental=!0,f.ensureState("emphasis").hoverLayer=!0)}for(var h=r.start;h<r.end;h++){var d=gT(null,null,h,l(h,o),i,this.group,s);d&&(d.traverse(c),u.push(d))}},t.prototype.eachRendered=function(r){Ep(this._progressiveEls||this.group,r)},t.prototype.filterForExposedEvent=function(r,i,n,a){var o=i.element;if(o==null||n.name===o)return!0;for(;(n=n.__hostTarget||n.parent)&&n!==this.group;)if(n.name===o)return!0;return!1},t.type="custom",t}(yi);function EV(e){var t=e.type,r;if(t==="path"){var i=e.shape,n=i.width!=null&&i.height!=null?{x:i.x||0,y:i.y||0,width:i.width,height:i.height}:null,a=tfe(i);r=wC(a,null,n,i.layout||"center"),ld(r).customPathData=a}else if(t==="image")r=new Ta({}),ld(r).customImagePath=e.style.image;else if(t==="text")r=new Dr({});else if(t==="group")r=new Ct;else{if(t==="compoundPath")throw new Error('"compoundPath" is not supported yet.');var o=vN(t);if(!o){var s="";jr(s)}r=new o}return ld(r).customGraphicType=t,r.name=e.name,r.z2EmphasisLift=1,r.z2SelectLift=1,r}function MV(e,t,r,i,n,a,o){Jde(t);var s=n&&n.normal.cfg;s&&t.setTextConfig(s),i&&i.transition==null&&(i.transition=dBe);var l=i&&i.style;if(l){if(t.type==="text"){var u=l;lt(u,"textFill")&&(u.fill=u.textFill),lt(u,"textStroke")&&(u.stroke=u.textStroke)}var c=void 0,h=ak(t)?l.decal:null;e&&h&&(h.dirty=!0,c=z1(h,e)),l.__decalPattern=c}if(ok(t)&&l){var c=l.__decalPattern;c&&(l.decal=c)}CA(t,i,a,{dataIndex:r,isInit:o,clearStyle:!0}),sS(t,i.keyframeAnimation,a)}function $de(e,t,r,i,n){var a=t.isGroup?null:t,o=n&&n[e].cfg;if(a){var s=a.ensureState(e);if(i===!1){var l=a.getState(e);l&&(l.style=null)}else s.style=i||null;o&&(s.textConfig=o),Ov(a)}}function gBe(e,t,r){if(!e.isGroup){var i=e,n=r.currentZ,a=r.currentZLevel;i.z=n,i.zlevel=a;var o=t.z2;o!=null&&(i.z2=o||0);for(var s=0;s<gp.length;s++)yBe(i,t,gp[s])}}function yBe(e,t,r){var i=r===zf,n=i?t:lS(t,r),a=n?n.z2:null,o;a!=null&&(o=i?e:e.ensureState(r),o.z2=a||0)}function hX(e,t,r,i){var n=e.get("renderItem"),a=e.coordinateSystem,o={};a&&(o=a.prepareCustoms?a.prepareCustoms(a):pBe[a.type](a));for(var s=bt({getWidth:i.getWidth,getHeight:i.getHeight,getZr:i.getZr,getDevicePixelRatio:i.getDevicePixelRatio,value:b,style:w,ordinalRawValue:_,styleEmphasis:S,visual:E,barLayout:T,currentSeriesIndices:L,font:P},o.api||{}),l={context:{},seriesId:e.id,seriesName:e.name,seriesIndex:e.seriesIndex,coordSys:o.coordSys,dataInsideLength:t.count(),encode:xBe(e.getData())},u,c,h={},d={},f={},p={},v=0;v<gp.length;v++){var m=gp[v];f[m]=e.getModel(vT[m]),p[m]=e.getModel(mT[m])}function g(C){return C===u?c||(c=t.getItemModel(C)):t.getItemModel(C)}function y(C,D){return t.hasItemOption?C===u?h[D]||(h[D]=g(C).getModel(vT[D])):g(C).getModel(vT[D]):f[D]}function x(C,D){return t.hasItemOption?C===u?d[D]||(d[D]=g(C).getModel(mT[D])):g(C).getModel(mT[D]):p[D]}return function(C,D){return u=C,c=null,h={},d={},n&&n(bt({dataIndexInside:C,dataIndex:t.getRawIndex(C),actionType:D?D.type:null},l),s)};function b(C,D){return D==null&&(D=u),t.getStore().get(t.getDimensionIndex(C||0),D)}function _(C,D){D==null&&(D=u),C=C||0;var I=t.getDimensionInfo(C);if(!I){var O=t.getDimensionIndex(C);return O>=0?t.getStore().get(O,D):void 0}var R=t.get(I.name,D),H=I&&I.ordinalMeta;return H?H.categories[R]:R}function w(C,D){D==null&&(D=u);var I=t.getItemVisual(D,"style"),O=I&&I.fill,R=I&&I.opacity,H=y(D,zf).getItemStyle();O!=null&&(H.fill=O),R!=null&&(H.opacity=R);var j={inheritColor:it(O)?O:"#000"},N=x(D,zf),k=Ti(N,null,j,!1,!0);k.text=N.getShallow("show")?Lt(e.getFormattedLabel(D,zf),U1(t,D)):null;var G=V8(N,j,!1);return M(C,H),H=oX(H,k,G),C&&A(H,C),H.legacy=!0,H}function S(C,D){D==null&&(D=u);var I=y(D,ud).getItemStyle(),O=x(D,ud),R=Ti(O,null,null,!0,!0);R.text=O.getShallow("show")?Vc(e.getFormattedLabel(D,ud),e.getFormattedLabel(D,zf),U1(t,D)):null;var H=V8(O,null,!0);return M(C,I),I=oX(I,R,H),C&&A(I,C),I.legacy=!0,I}function A(C,D){for(var I in D)lt(D,I)&&(C[I]=D[I])}function M(C,D){C&&(C.textFill&&(D.textFill=C.textFill),C.textPosition&&(D.textPosition=C.textPosition))}function E(C,D){if(D==null&&(D=u),lt(nX,C)){var I=t.getItemVisual(D,"style");return I?I[nX[C]]:null}if(lt(WOe,C))return t.getItemVisual(D,C)}function T(C){if(a.type==="cartesian2d"){var D=a.getBaseAxis();return lTe(bt({axis:D},C))}}function L(){return r.getCurrentSeriesIndices()}function P(C){return mN(C,r)}}function xBe(e){var t={};return q(e.dimensions,function(r){var i=e.getDimensionInfo(r);if(!i.isExtraCoord){var n=i.coordDim,a=t[n]=t[n]||[];a[i.coordDimIndex]=e.getDimensionIndex(r)}}),t}function gT(e,t,r,i,n,a,o){if(!i){a.remove(t);return}var s=TV(e,t,r,i,n,a);return s&&o.setItemGraphicEl(r,s),s&&Ji(s,i.focus,i.blurScope,i.emphasisDisabled),s}function TV(e,t,r,i,n,a){var o=-1,s=t;t&&efe(t,i,n)&&(o=tr(a.childrenRef(),t),t=null);var l=!t,u=t;u?u.clearStates():(u=EV(i),s&&vBe(s,u)),i.morph===!1?u.disableMorphing=!0:u.disableMorphing&&(u.disableMorphing=!1),tl.normal.cfg=tl.normal.conOpt=tl.emphasis.cfg=tl.emphasis.conOpt=tl.blur.cfg=tl.blur.conOpt=tl.select.cfg=tl.select.conOpt=null,tl.isLegacy=!1,wBe(u,r,i,n,l,tl),bBe(u,r,i,n,l),MV(e,u,r,i,tl,n,l),lt(i,"info")&&(ld(u).info=i.info);for(var c=0;c<gp.length;c++){var h=gp[c];if(h!==zf){var d=lS(i,h),f=PV(i,d,h);$de(h,u,d,f,tl)}}return gBe(u,i,n),i.type==="group"&&_Be(e,u,r,i,n),o>=0?a.replaceAt(u,o):a.add(u),u}function efe(e,t,r){var i=ld(e),n=t.type,a=t.shape,o=t.style;return r.isUniversalTransitionEnabled()||n!=null&&n!==i.customGraphicType||n==="path"&&EBe(a)&&tfe(a)!==i.customPathData||n==="image"&&lt(o,"image")&&o.image!==i.customImagePath}function bBe(e,t,r,i,n){var a=r.clipPath;if(a===!1)e&&e.getClipPath()&&e.removeClipPath();else if(a){var o=e.getClipPath();o&&efe(o,a,i)&&(o=null),o||(o=EV(a),e.setClipPath(o)),MV(null,o,t,a,null,i,n)}}function wBe(e,t,r,i,n,a){if(!e.isGroup){dX(r,null,a),dX(r,ud,a);var o=a.normal.conOpt,s=a.emphasis.conOpt,l=a.blur.conOpt,u=a.select.conOpt;if(o!=null||s!=null||u!=null||l!=null){var c=e.getTextContent();if(o===!1)c&&e.removeTextContent();else{o=a.normal.conOpt=o||{type:"text"},c?c.clearStates():(c=EV(o),e.setTextContent(c)),MV(null,c,t,o,null,i,n);for(var h=o&&o.style,d=0;d<gp.length;d++){var f=gp[d];if(f!==zf){var p=a[f].conOpt;$de(f,c,p,PV(o,p,f),null)}}h?c.dirty():c.markRedraw()}}}}function dX(e,t,r){var i=t?lS(e,t):e,n=t?PV(e,i,ud):e.style,a=e.type,o=i?i.textConfig:null,s=e.textContent,l=s?t?lS(s,t):s:null;if(n&&(r.isLegacy||Yde(n,a,!!o,!!l))){r.isLegacy=!0;var u=Xde(n,a,!t);!o&&u.textConfig&&(o=u.textConfig),!l&&u.textContent&&(l=u.textContent)}if(!t&&l){var c=l;!c.type&&(c.type="text")}var h=t?r[t]:r.normal;h.cfg=o,h.conOpt=l}function lS(e,t){return t?e?e[t]:null:e}function PV(e,t,r){var i=t&&t.style;return i==null&&r===ud&&e&&(i=e.styleEmphasis),i}function _Be(e,t,r,i,n){var a=i.children,o=a?a.length:0,s=i.$mergeChildren,l=s==="byName"||i.diffChildrenByName,u=s===!1;if(!(!o&&!l&&!u)){if(l){SBe({api:e,oldChildren:t.children()||[],newChildren:a||[],dataIndex:r,seriesModel:n,group:t});return}u&&t.removeAll();for(var c=0;c<o;c++){var h=a[c],d=t.childAt(c);h?(h.ignore==null&&(h.ignore=!1),TV(e,d,r,h,n,t)):d.ignore=!0}for(var f=t.childCount()-1;f>=c;f--){var p=t.childAt(f);ABe(t,p,n)}}}function ABe(e,t,r){t&&WC(t,ld(e).option,r)}function SBe(e){new yd(e.oldChildren,e.newChildren,fX,fX,e).add(pX).update(pX).remove(CBe).execute()}function fX(e,t){var r=e&&e.name;return r??fBe+t}function pX(e,t){var r=this.context,i=e!=null?r.newChildren[e]:null,n=t!=null?r.oldChildren[t]:null;TV(r.api,n,r.dataIndex,i,r.seriesModel,r.group)}function CBe(e){var t=this.context,r=t.oldChildren[e];r&&WC(r,ld(r).option,t.seriesModel)}function tfe(e){return e&&(e.pathData||e.d)}function EBe(e){return e&&(lt(e,"pathData")||lt(e,"d"))}function MBe(e){e.registerChartView(mBe),e.registerSeriesModel(qOe)}var R0=Pr(),vX=At,yT=at,DV=function(){function e(){this._dragging=!1,this.animationThreshold=15}return e.prototype.render=function(t,r,i,n){var a=r.get("value"),o=r.get("status");if(this._axisModel=t,this._axisPointerModel=r,this._api=i,!(!n&&this._lastValue===a&&this._lastStatus===o)){this._lastValue=a,this._lastStatus=o;var s=this._group,l=this._handle;if(!o||o==="hide"){s&&s.hide(),l&&l.hide();return}s&&s.show(),l&&l.show();var u={};this.makeElOption(u,a,t,r,i);var c=u.graphicKey;c!==this._lastGraphicKey&&this.clear(i),this._lastGraphicKey=c;var h=this._moveAnimation=this.determineAnimation(t,r);if(!s)s=this._group=new Ct,this.createPointerEl(s,u,t,r),this.createLabelEl(s,u,t,r),i.getZr().add(s);else{var d=kt(mX,r,h);this.updatePointerEl(s,u,d),this.updateLabelEl(s,u,d,r)}yX(s,r,!0),this._renderHandle(a)}},e.prototype.remove=function(t){this.clear(t)},e.prototype.dispose=function(t){this.clear(t)},e.prototype.determineAnimation=function(t,r){var i=r.get("animation"),n=t.axis,a=n.type==="category",o=r.get("snap");if(!o&&!a)return!1;if(i==="auto"||i==null){var s=this.animationThreshold;if(a&&n.getBandWidth()>s)return!0;if(o){var l=eV(t).seriesDataCount,u=n.getExtent();return Math.abs(u[0]-u[1])/l>s}return!1}return i===!0},e.prototype.makeElOption=function(t,r,i,n,a){},e.prototype.createPointerEl=function(t,r,i,n){var a=r.pointer;if(a){var o=R0(t).pointerEl=new $v[a.type](vX(r.pointer));t.add(o)}},e.prototype.createLabelEl=function(t,r,i,n){if(r.label){var a=R0(t).labelEl=new Dr(vX(r.label));t.add(a),gX(a,n)}},e.prototype.updatePointerEl=function(t,r,i){var n=R0(t).pointerEl;n&&r.pointer&&(n.setStyle(r.pointer.style),i(n,{shape:r.pointer.shape}))},e.prototype.updateLabelEl=function(t,r,i,n){var a=R0(t).labelEl;a&&(a.setStyle(r.label.style),i(a,{x:r.label.x,y:r.label.y}),gX(a,n))},e.prototype._renderHandle=function(t){if(!(this._dragging||!this.updateHandleTransform)){var r=this._axisPointerModel,i=this._api.getZr(),n=this._handle,a=r.getModel("handle"),o=r.get("status");if(!a.get("show")||!o||o==="hide"){n&&i.remove(n),this._handle=null;return}var s;this._handle||(s=!0,n=this._handle=p4(a.get("icon"),{cursor:"move",draggable:!0,onmousemove:function(u){pd(u.event)},onmousedown:yT(this._onHandleDragMove,this,0,0),drift:yT(this._onHandleDragMove,this),ondragend:yT(this._onHandleDragEnd,this)}),i.add(n)),yX(n,r,!1),n.setStyle(a.getItemStyle(null,["color","borderColor","borderWidth","opacity","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY"]));var l=a.get("size");Ue(l)||(l=[l,l]),n.scaleX=l[0]/2,n.scaleY=l[1]/2,ky(this,"_doDispatchAxisPointer",a.get("throttle")||0,"fixRate"),this._moveHandleToValue(t,s)}},e.prototype._moveHandleToValue=function(t,r){mX(this._axisPointerModel,!r&&this._moveAnimation,this._handle,xT(this.getHandleTransform(t,this._axisModel,this._axisPointerModel)))},e.prototype._onHandleDragMove=function(t,r){var i=this._handle;if(i){this._dragging=!0;var n=this.updateHandleTransform(xT(i),[t,r],this._axisModel,this._axisPointerModel);this._payloadInfo=n,i.stopAnimation(),i.attr(xT(n)),R0(i).lastProp=null,this._doDispatchAxisPointer()}},e.prototype._doDispatchAxisPointer=function(){var t=this._handle;if(t){var r=this._payloadInfo,i=this._axisModel;this._api.dispatchAction({type:"updateAxisPointer",x:r.cursorPoint[0],y:r.cursorPoint[1],tooltipOption:r.tooltipOption,axesInfo:[{axisDim:i.axis.dim,axisIndex:i.componentIndex}]})}},e.prototype._onHandleDragEnd=function(){this._dragging=!1;var t=this._handle;if(t){var r=this._axisPointerModel.get("value");this._moveHandleToValue(r),this._api.dispatchAction({type:"hideTip"})}},e.prototype.clear=function(t){this._lastValue=null,this._lastStatus=null;var r=t.getZr(),i=this._group,n=this._handle;r&&i&&(this._lastGraphicKey=null,i&&r.remove(i),n&&r.remove(n),this._group=null,this._handle=null,this._payloadInfo=null),nw(this,"_doDispatchAxisPointer")},e.prototype.doClear=function(){},e.prototype.buildLabel=function(t,r,i){return i=i||0,{x:t[i],y:t[1-i],width:r[i],height:r[1-i]}},e}();function mX(e,t,r,i){rfe(R0(r).lastProp,i)||(R0(r).lastProp=i,t?Nr(r,i,e):(r.stopAnimation(),r.attr(i)))}function rfe(e,t){if(_t(e)&&_t(t)){var r=!0;return q(t,function(i,n){r=r&&rfe(e[n],i)}),!!r}else return e===t}function gX(e,t){e[t.get(["label","show"])?"show":"hide"]()}function xT(e){return{x:e.x||0,y:e.y||0,rotation:e.rotation||0}}function yX(e,t,r){var i=t.get("z"),n=t.get("zlevel");e&&e.traverse(function(a){a.type!=="group"&&(i!=null&&(a.z=i),n!=null&&(a.zlevel=n),a.silent=r)})}function IV(e){var t=e.get("type"),r=e.getModel(t+"Style"),i;return t==="line"?(i=r.getLineStyle(),i.fill=null):t==="shadow"&&(i=r.getAreaStyle(),i.stroke=null),i}function ife(e,t,r,i,n){var a=r.get("value"),o=nfe(a,t.axis,t.ecModel,r.get("seriesDataIndices"),{precision:r.get(["label","precision"]),formatter:r.get(["label","formatter"])}),s=r.getModel("label"),l=Py(s.get("padding")||0),u=s.getFont(),c=l4(o,u),h=n.position,d=c.width+l[1]+l[3],f=c.height+l[0]+l[2],p=n.align;p==="right"&&(h[0]-=d),p==="center"&&(h[0]-=d/2);var v=n.verticalAlign;v==="bottom"&&(h[1]-=f),v==="middle"&&(h[1]-=f/2),TBe(h,d,f,i);var m=s.get("backgroundColor");(!m||m==="auto")&&(m=t.get(["axisLine","lineStyle","color"])),e.label={x:h[0],y:h[1],style:Ti(s,{text:o,font:u,fill:s.getTextColor(),padding:l,backgroundColor:m}),z2:10}}function TBe(e,t,r,i){var n=i.getWidth(),a=i.getHeight();e[0]=Math.min(e[0]+t,n)-t,e[1]=Math.min(e[1]+r,a)-r,e[0]=Math.max(e[0],0),e[1]=Math.max(e[1],0)}function nfe(e,t,r,i,n){e=t.scale.parse(e);var a=t.scale.getLabel({value:e},{precision:n.precision}),o=n.formatter;if(o){var s={value:GN(t,{value:e}),axisDimension:t.dim,axisIndex:t.index,seriesData:[]};q(i,function(l){var u=r.getSeriesByIndex(l.seriesIndex),c=l.dataIndexInside,h=u&&u.getDataParams(c);h&&s.seriesData.push(h)}),it(o)?a=o.replace("{value}",a):xt(o)&&(a=o(s))}return a}function LV(e,t,r){var i=js();return Jv(i,i,r.rotation),Qc(i,i,r.position),Au([e.dataToCoord(t),(r.labelOffset||0)+(r.labelDirection||1)*(r.labelMargin||0)],i)}function afe(e,t,r,i,n,a){var o=qo.innerTextLayout(r.rotation,0,r.labelDirection);r.labelMargin=n.get(["label","margin"]),ife(t,i,n,a,{position:LV(i.axis,e,r),align:o.textAlign,verticalAlign:o.textVerticalAlign})}function kV(e,t,r){return r=r||0,{x1:e[r],y1:e[1-r],x2:t[r],y2:t[1-r]}}function ofe(e,t,r){return r=r||0,{x:e[r],y:e[1-r],width:t[r],height:t[1-r]}}function xX(e,t,r,i,n,a){return{cx:e,cy:t,r0:r,r:i,startAngle:n,endAngle:a,clockwise:!0}}var PBe=function(e){_e(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.makeElOption=function(r,i,n,a,o){var s=n.axis,l=s.grid,u=a.get("type"),c=bX(l,s).getOtherAxis(s).getGlobalExtent(),h=s.toGlobalCoord(s.dataToCoord(i,!0));if(u&&u!=="none"){var d=IV(a),f=DBe[u](s,h,c);f.style=d,r.graphicKey=f.type,r.pointer=f}var p=zL(l.model,n);afe(i,r,p,n,a,o)},t.prototype.getHandleTransform=function(r,i,n){var a=zL(i.axis.grid.model,i,{labelInside:!1});a.labelMargin=n.get(["handle","margin"]);var o=LV(i.axis,r,a);return{x:o[0],y:o[1],rotation:a.rotation+(a.labelDirection<0?Math.PI:0)}},t.prototype.updateHandleTransform=function(r,i,n,a){var o=n.axis,s=o.grid,l=o.getGlobalExtent(!0),u=bX(s,o).getOtherAxis(o).getGlobalExtent(),c=o.dim==="x"?0:1,h=[r.x,r.y];h[c]+=i[c],h[c]=Math.min(l[1],h[c]),h[c]=Math.max(l[0],h[c]);var d=(u[1]+u[0])/2,f=[d,d];f[c]=h[c];var p=[{verticalAlign:"middle"},{align:"center"}];return{x:h[0],y:h[1],rotation:r.rotation,cursorPoint:f,tooltipOption:p[c]}},t}(DV);function bX(e,t){var r={};return r[t.dim+"AxisIndex"]=t.index,e.getCartesian(r)}var DBe={line:function(e,t,r){var i=kV([t,r[0]],[t,r[1]],wX(e));return{type:"Line",subPixelOptimize:!0,shape:i}},shadow:function(e,t,r){var i=Math.max(1,e.getBandWidth()),n=r[1]-r[0];return{type:"Rect",shape:ofe([t-i/2,r[0]],[i,n],wX(e))}}};function wX(e){return e.dim==="x"?0:1}var IBe=function(e){_e(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r}return t.type="axisPointer",t.defaultOption={show:"auto",z:50,type:"line",snap:!1,triggerTooltip:!0,triggerEmphasis:!0,value:null,status:null,link:[],animation:null,animationDurationUpdate:200,lineStyle:{color:"#B9BEC9",width:1,type:"dashed"},shadowStyle:{color:"rgba(210,219,238,0.2)"},label:{show:!0,formatter:null,precision:"auto",margin:3,color:"#fff",padding:[5,7,5,7],backgroundColor:"auto",borderColor:null,borderWidth:0,borderRadius:3},handle:{show:!1,icon:"M10.7,11.9v-1.3H9.3v1.3c-4.9,0.3-8.8,4.4-8.8,9.4c0,5,3.9,9.1,8.8,9.4h1.3c4.9-0.3,8.8-4.4,8.8-9.4C19.5,16.3,15.6,12.2,10.7,11.9z M13.3,24.4H6.7v-1.2h6.6z M13.3,22H6.7v-1.2h6.6z M13.3,19.6H6.7v-1.2h6.6z",size:45,margin:50,color:"#333",shadowBlur:3,shadowColor:"#aaa",shadowOffsetX:0,shadowOffsetY:2,throttle:40}},t}(vr),Kh=Pr(),LBe=q;function sfe(e,t,r){if(!hr.node){var i=t.getZr();Kh(i).records||(Kh(i).records={}),kBe(i,t);var n=Kh(i).records[e]||(Kh(i).records[e]={});n.handler=r}}function kBe(e,t){if(Kh(e).initialized)return;Kh(e).initialized=!0,r("click",kt(_X,"click")),r("mousemove",kt(_X,"mousemove")),r("globalout",OBe);function r(i,n){e.on(i,function(a){var o=BBe(t);LBe(Kh(e).records,function(s){s&&n(s,a,o.dispatchAction)}),RBe(o.pendings,t)})}}function RBe(e,t){var r=e.showTip.length,i=e.hideTip.length,n;r?n=e.showTip[r-1]:i&&(n=e.hideTip[i-1]),n&&(n.dispatchAction=null,t.dispatchAction(n))}function OBe(e,t,r){e.handler("leave",null,r)}function _X(e,t,r,i){t.handler(e,r,i)}function BBe(e){var t={showTip:[],hideTip:[]},r=function(i){var n=t[i.type];n?n.push(i):(i.dispatchAction=r,e.dispatchAction(i))};return{dispatchAction:r,pendings:t}}function sk(e,t){if(!hr.node){var r=t.getZr(),i=(Kh(r).records||{})[e];i&&(Kh(r).records[e]=null)}}var NBe=function(e){_e(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r}return t.prototype.render=function(r,i,n){var a=i.getComponent("tooltip"),o=r.get("triggerOn")||a&&a.get("triggerOn")||"mousemove|click";sfe("axisPointer",n,function(s,l,u){o!=="none"&&(s==="leave"||o.indexOf(s)>=0)&&u({type:"updateAxisPointer",currTrigger:s,x:l&&l.offsetX,y:l&&l.offsetY})})},t.prototype.remove=function(r,i){sk("axisPointer",i)},t.prototype.dispose=function(r,i){sk("axisPointer",i)},t.type="axisPointer",t}(Gi);function lfe(e,t){var r=[],i=e.seriesIndex,n;if(i==null||!(n=t.getSeriesByIndex(i)))return{point:[]};var a=n.getData(),o=kv(a,e);if(o==null||o<0||Ue(o))return{point:[]};var s=a.getItemGraphicEl(o),l=n.coordinateSystem;if(n.getTooltipPosition)r=n.getTooltipPosition(o)||[];else if(l&&l.dataToPoint)if(e.isStacked){var u=l.getBaseAxis(),c=l.getOtherAxis(u),h=c.dim,d=u.dim,f=h==="x"||h==="radius"?1:0,p=a.mapDimension(d),v=[];v[f]=a.get(p,o),v[1-f]=a.get(a.getCalculationInfo("stackResultDimension"),o),r=l.dataToPoint(v)||[]}else r=l.dataToPoint(a.getValues(qe(l.dimensions,function(g){return a.mapDimension(g)}),o))||[];else if(s){var m=s.getBoundingRect().clone();m.applyTransform(s.transform),r=[m.x+m.width/2,m.y+m.height/2]}return{point:r,el:s}}var AX=Pr();function VBe(e,t,r){var i=e.currTrigger,n=[e.x,e.y],a=e,o=e.dispatchAction||at(r.dispatchAction,r),s=t.getComponent("axisPointer").coordSysAxesInfo;if(s){EA(n)&&(n=lfe({seriesIndex:a.seriesIndex,dataIndex:a.dataIndex},t).point);var l=EA(n),u=a.axesInfo,c=s.axesInfo,h=i==="leave"||EA(n),d={},f={},p={list:[],map:{}},v={showPointer:kt(zBe,f),showTooltip:kt(HBe,p)};q(s.coordSysMap,function(g,y){var x=l||g.containPoint(n);q(s.coordSysAxesInfo[y],function(b,_){var w=b.axis,S=WBe(u,b);if(!h&&x&&(!u||S)){var A=S&&S.value;A==null&&!l&&(A=w.pointToData(n)),A!=null&&SX(b,A,v,!1,d)}})});var m={};return q(c,function(g,y){var x=g.linkGroup;x&&!f[y]&&q(x.axesInfo,function(b,_){var w=f[_];if(b!==g&&w){var S=w.value;x.mapper&&(S=g.axis.scale.parse(x.mapper(S,CX(b),CX(g)))),m[g.key]=S}})}),q(m,function(g,y){SX(c[y],g,v,!0,d)}),UBe(f,c,d),GBe(p,n,e,o),jBe(c,o,r),d}}function SX(e,t,r,i,n){var a=e.axis;if(!(a.scale.isBlank()||!a.containData(t))){if(!e.involveSeries){r.showPointer(e,t);return}var o=FBe(t,e),s=o.payloadBatch,l=o.snapToValue;s[0]&&n.seriesIndex==null&&Be(n,s[0]),!i&&e.snap&&a.containData(l)&&l!=null&&(t=l),r.showPointer(e,t,s),r.showTooltip(e,o,l)}}function FBe(e,t){var r=t.axis,i=r.dim,n=e,a=[],o=Number.MAX_VALUE,s=-1;return q(t.seriesModels,function(l,u){var c=l.getData().mapDimensionsAll(i),h,d;if(l.getAxisTooltipData){var f=l.getAxisTooltipData(c,e,r);d=f.dataIndices,h=f.nestestValue}else{if(d=l.getData().indicesOfNearest(c[0],e,r.type==="category"?.5:null),!d.length)return;h=l.getData().get(c[0],d[0])}if(!(h==null||!isFinite(h))){var p=e-h,v=Math.abs(p);v<=o&&((v<o||p>=0&&s<0)&&(o=v,s=p,n=h,a.length=0),q(d,function(m){a.push({seriesIndex:l.seriesIndex,dataIndexInside:m,dataIndex:l.getData().getRawIndex(m)})}))}}),{payloadBatch:a,snapToValue:n}}function zBe(e,t,r,i){e[t.key]={value:r,payloadBatch:i}}function HBe(e,t,r,i){var n=r.payloadBatch,a=t.axis,o=a.model,s=t.axisPointerModel;if(!(!t.triggerTooltip||!n.length)){var l=t.coordSys.model,u=hw(l),c=e.map[u];c||(c=e.map[u]={coordSysId:l.id,coordSysIndex:l.componentIndex,coordSysType:l.type,coordSysMainType:l.mainType,dataByAxis:[]},e.list.push(c)),c.dataByAxis.push({axisDim:a.dim,axisIndex:o.componentIndex,axisType:o.type,axisId:o.id,value:i,valueLabelOpt:{precision:s.get(["label","precision"]),formatter:s.get(["label","formatter"])},seriesDataIndices:n.slice()})}}function UBe(e,t,r){var i=r.axesInfo=[];q(t,function(n,a){var o=n.axisPointerModel.option,s=e[a];s?(!n.useHandle&&(o.status="show"),o.value=s.value,o.seriesDataIndices=(s.payloadBatch||[]).slice()):!n.useHandle&&(o.status="hide"),o.status==="show"&&i.push({axisDim:n.axis.dim,axisIndex:n.axis.model.componentIndex,value:o.value})})}function GBe(e,t,r,i){if(EA(t)||!e.list.length){i({type:"hideTip"});return}var n=((e.list[0].dataByAxis[0]||{}).seriesDataIndices||[])[0]||{};i({type:"showTip",escapeConnect:!0,x:t[0],y:t[1],tooltipOption:r.tooltipOption,position:r.position,dataIndexInside:n.dataIndexInside,dataIndex:n.dataIndex,seriesIndex:n.seriesIndex,dataByCoordSys:e.list})}function jBe(e,t,r){var i=r.getZr(),n="axisPointerLastHighlights",a=AX(i)[n]||{},o=AX(i)[n]={};q(e,function(u,c){var h=u.axisPointerModel.option;h.status==="show"&&u.triggerEmphasis&&q(h.seriesDataIndices,function(d){var f=d.seriesIndex+" | "+d.dataIndex;o[f]=d})});var s=[],l=[];q(a,function(u,c){!o[c]&&l.push(u)}),q(o,function(u,c){!a[c]&&s.push(u)}),l.length&&r.dispatchAction({type:"downplay",escapeConnect:!0,notBlur:!0,batch:l}),s.length&&r.dispatchAction({type:"highlight",escapeConnect:!0,notBlur:!0,batch:s})}function WBe(e,t){for(var r=0;r<(e||[]).length;r++){var i=e[r];if(t.axis.dim===i.axisDim&&t.axis.model.componentIndex===i.axisIndex)return i}}function CX(e){var t=e.axis.model,r={},i=r.axisDim=e.axis.dim;return r.axisIndex=r[i+"AxisIndex"]=t.componentIndex,r.axisName=r[i+"AxisName"]=t.name,r.axisId=r[i+"AxisId"]=t.id,r}function EA(e){return!e||e[0]==null||isNaN(e[0])||e[1]==null||isNaN(e[1])}function M4(e){im.registerAxisPointerClass("CartesianAxisPointer",PBe),e.registerComponentModel(IBe),e.registerComponentView(NBe),e.registerPreprocessor(function(t){if(t){(!t.axisPointer||t.axisPointer.length===0)&&(t.axisPointer={});var r=t.axisPointer.link;r&&!Ue(r)&&(t.axisPointer.link=[r])}}),e.registerProcessor(e.PRIORITY.PROCESSOR.STATISTIC,function(t,r){t.getComponent("axisPointer").coordSysAxesInfo=tDe(t,r)}),e.registerAction({type:"updateAxisPointer",event:"updateAxisPointer",update:":updateAxisPointer"},VBe)}function qBe(e){ir(Bhe),ir(M4)}var YBe=function(e){_e(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.makeElOption=function(r,i,n,a,o){var s=n.axis;s.dim==="angle"&&(this.animationThreshold=Math.PI/18);var l=s.polar,u=l.getOtherAxis(s),c=u.getExtent(),h=s.dataToCoord(i),d=a.get("type");if(d&&d!=="none"){var f=IV(a),p=ZBe[d](s,l,h,c);p.style=f,r.graphicKey=p.type,r.pointer=p}var v=a.get(["label","margin"]),m=XBe(i,n,a,l,v);ife(r,n,a,o,m)},t}(DV);function XBe(e,t,r,i,n){var a=t.axis,o=a.dataToCoord(e),s=i.getAngleAxis().getExtent()[0];s=s/180*Math.PI;var l=i.getRadiusAxis().getExtent(),u,c,h;if(a.dim==="radius"){var d=js();Jv(d,d,s),Qc(d,d,[i.cx,i.cy]),u=Au([o,-n],d);var f=t.getModel("axisLabel").get("rotate")||0,p=qo.innerTextLayout(s,f*Math.PI/180,-1);c=p.textAlign,h=p.textVerticalAlign}else{var v=l[1];u=i.coordToPoint([v+n,o]);var m=i.cx,g=i.cy;c=Math.abs(u[0]-m)/v<.3?"center":u[0]>m?"left":"right",h=Math.abs(u[1]-g)/v<.3?"middle":u[1]>g?"top":"bottom"}return{position:u,align:c,verticalAlign:h}}var ZBe={line:function(e,t,r,i){return e.dim==="angle"?{type:"Line",shape:kV(t.coordToPoint([i[0],r]),t.coordToPoint([i[1],r]))}:{type:"Circle",shape:{cx:t.cx,cy:t.cy,r}}},shadow:function(e,t,r,i){var n=Math.max(1,e.getBandWidth()),a=Math.PI/180;return e.dim==="angle"?{type:"Sector",shape:xX(t.cx,t.cy,i[0],i[1],(-r-n/2)*a,(-r+n/2)*a)}:{type:"Sector",shape:xX(t.cx,t.cy,r-n/2,r+n/2,0,Math.PI*2)}}},QBe=function(e){_e(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r}return t.prototype.findAxisModel=function(r){var i,n=this.ecModel;return n.eachComponent(r,function(a){a.getCoordSysModel()===this&&(i=a)},this),i},t.type="polar",t.dependencies=["radiusAxis","angleAxis"],t.defaultOption={z:0,center:["50%","50%"],radius:"80%"},t}(vr),RV=function(e){_e(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.getCoordSysModel=function(){return this.getReferringComponents("polar",wn).models[0]},t.type="polarAxis",t}(vr);Mn(RV,y4);var KBe=function(e){_e(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r}return t.type="angleAxis",t}(RV),JBe=function(e){_e(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r}return t.type="radiusAxis",t}(RV),OV=function(e){_e(t,e);function t(r,i){return e.call(this,"radius",r,i)||this}return t.prototype.pointToData=function(r,i){return this.polar.pointToData(r,i)[this.dim==="radius"?0:1]},t}(Fu);OV.prototype.dataToRadius=Fu.prototype.dataToCoord;OV.prototype.radiusToData=Fu.prototype.coordToData;var $Be=Pr(),BV=function(e){_e(t,e);function t(r,i){return e.call(this,"angle",r,i||[0,360])||this}return t.prototype.pointToData=function(r,i){return this.polar.pointToData(r,i)[this.dim==="radius"?0:1]},t.prototype.calculateCategoryInterval=function(){var r=this,i=r.getLabelModel(),n=r.scale,a=n.getExtent(),o=n.count();if(a[1]-a[0]<1)return 0;var s=a[0],l=r.dataToCoord(s+1)-r.dataToCoord(s),u=Math.abs(l),c=l4(s==null?"":s+"",i.getFont(),"center","top"),h=Math.max(c.height,7),d=h/u;isNaN(d)&&(d=1/0);var f=Math.max(0,Math.floor(d)),p=$Be(r.model),v=p.lastAutoInterval,m=p.lastTickCount;return v!=null&&m!=null&&Math.abs(v-f)<=1&&Math.abs(m-o)<=1&&v>f?f=v:(p.lastTickCount=o,p.lastAutoInterval=f),f},t}(Fu);BV.prototype.dataToAngle=Fu.prototype.dataToCoord;BV.prototype.angleToData=Fu.prototype.coordToData;var ufe=["radius","angle"],eNe=function(){function e(t){this.dimensions=ufe,this.type="polar",this.cx=0,this.cy=0,this._radiusAxis=new OV,this._angleAxis=new BV,this.axisPointerEnabled=!0,this.name=t||"",this._radiusAxis.polar=this._angleAxis.polar=this}return e.prototype.containPoint=function(t){var r=this.pointToCoord(t);return this._radiusAxis.contain(r[0])&&this._angleAxis.contain(r[1])},e.prototype.containData=function(t){return this._radiusAxis.containData(t[0])&&this._angleAxis.containData(t[1])},e.prototype.getAxis=function(t){var r="_"+t+"Axis";return this[r]},e.prototype.getAxes=function(){return[this._radiusAxis,this._angleAxis]},e.prototype.getAxesByScale=function(t){var r=[],i=this._angleAxis,n=this._radiusAxis;return i.scale.type===t&&r.push(i),n.scale.type===t&&r.push(n),r},e.prototype.getAngleAxis=function(){return this._angleAxis},e.prototype.getRadiusAxis=function(){return this._radiusAxis},e.prototype.getOtherAxis=function(t){var r=this._angleAxis;return t===r?this._radiusAxis:r},e.prototype.getBaseAxis=function(){return this.getAxesByScale("ordinal")[0]||this.getAxesByScale("time")[0]||this.getAngleAxis()},e.prototype.getTooltipAxes=function(t){var r=t!=null&&t!=="auto"?this.getAxis(t):this.getBaseAxis();return{baseAxes:[r],otherAxes:[this.getOtherAxis(r)]}},e.prototype.dataToPoint=function(t,r){return this.coordToPoint([this._radiusAxis.dataToRadius(t[0],r),this._angleAxis.dataToAngle(t[1],r)])},e.prototype.pointToData=function(t,r){var i=this.pointToCoord(t);return[this._radiusAxis.radiusToData(i[0],r),this._angleAxis.angleToData(i[1],r)]},e.prototype.pointToCoord=function(t){var r=t[0]-this.cx,i=t[1]-this.cy,n=this.getAngleAxis(),a=n.getExtent(),o=Math.min(a[0],a[1]),s=Math.max(a[0],a[1]);n.inverse?o=s-360:s=o+360;var l=Math.sqrt(r*r+i*i);r/=l,i/=l;for(var u=Math.atan2(-i,r)/Math.PI*180,c=u<o?1:-1;u<o||u>s;)u+=c*360;return[l,u]},e.prototype.coordToPoint=function(t){var r=t[0],i=t[1]/180*Math.PI,n=Math.cos(i)*r+this.cx,a=-Math.sin(i)*r+this.cy;return[n,a]},e.prototype.getArea=function(){var t=this.getAngleAxis(),r=this.getRadiusAxis(),i=r.getExtent().slice();i[0]>i[1]&&i.reverse();var n=t.getExtent(),a=Math.PI/180;return{cx:this.cx,cy:this.cy,r0:i[0],r:i[1],startAngle:-n[0]*a,endAngle:-n[1]*a,clockwise:t.inverse,contain:function(o,s){var l=o-this.cx,u=s-this.cy,c=l*l+u*u-1e-4,h=this.r,d=this.r0;return c<=h*h&&c>=d*d}}},e.prototype.convertToPixel=function(t,r,i){var n=EX(r);return n===this?this.dataToPoint(i):null},e.prototype.convertFromPixel=function(t,r,i){var n=EX(r);return n===this?this.pointToData(i):null},e}();function EX(e){var t=e.seriesModel,r=e.polarModel;return r&&r.coordinateSystem||t&&t.coordinateSystem}function tNe(e,t,r){var i=t.get("center"),n=r.getWidth(),a=r.getHeight();e.cx=et(i[0],n),e.cy=et(i[1],a);var o=e.getRadiusAxis(),s=Math.min(n,a)/2,l=t.get("radius");l==null?l=[0,"100%"]:Ue(l)||(l=[0,l]);var u=[et(l[0],s),et(l[1],s)];o.inverse?o.setExtent(u[1],u[0]):o.setExtent(u[0],u[1])}function rNe(e,t){var r=this,i=r.getAngleAxis(),n=r.getRadiusAxis();if(i.scale.setExtent(1/0,-1/0),n.scale.setExtent(1/0,-1/0),e.eachSeries(function(s){if(s.coordinateSystem===r){var l=s.getData();q(Z8(l,"radius"),function(u){n.scale.unionExtentFromData(l,u)}),q(Z8(l,"angle"),function(u){i.scale.unionExtentFromData(l,u)})}}),H1(i.scale,i.model),H1(n.scale,n.model),i.type==="category"&&!i.onBand){var a=i.getExtent(),o=360/i.scale.count();i.inverse?a[1]+=o:a[1]-=o,i.setExtent(a[0],a[1])}}function iNe(e){return e.mainType==="angleAxis"}function MX(e,t){var r;if(e.type=t.get("type"),e.scale=VC(t),e.onBand=t.get("boundaryGap")&&e.type==="category",e.inverse=t.get("inverse"),iNe(t)){e.inverse=e.inverse!==t.get("clockwise");var i=t.get("startAngle"),n=(r=t.get("endAngle"))!==null&&r!==void 0?r:i+(e.inverse?-360:360);e.setExtent(i,n)}t.axis=e,e.model=t}var nNe={dimensions:ufe,create:function(e,t){var r=[];return e.eachComponent("polar",function(i,n){var a=new eNe(n+"");a.update=rNe;var o=a.getRadiusAxis(),s=a.getAngleAxis(),l=i.findAxisModel("radiusAxis"),u=i.findAxisModel("angleAxis");MX(o,l),MX(s,u),tNe(a,i,t),r.push(a),i.coordinateSystem=a,a.model=i}),e.eachSeries(function(i){if(i.get("coordinateSystem")==="polar"){var n=i.getReferringComponents("polar",wn).models[0];i.coordinateSystem=n.coordinateSystem}}),r}},aNe=["axisLine","axisLabel","axisTick","minorTick","splitLine","minorSplitLine","splitArea"];function o_(e,t,r){t[1]>t[0]&&(t=t.slice().reverse());var i=e.coordToPoint([t[0],r]),n=e.coordToPoint([t[1],r]);return{x1:i[0],y1:i[1],x2:n[0],y2:n[1]}}function s_(e){var t=e.getRadiusAxis();return t.inverse?0:1}function TX(e){var t=e[0],r=e[e.length-1];t&&r&&Math.abs(Math.abs(t.coord-r.coord)-360)<1e-4&&e.pop()}var oNe=function(e){_e(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r.axisPointerClass="PolarAxisPointer",r}return t.prototype.render=function(r,i){if(this.group.removeAll(),!!r.get("show")){var n=r.axis,a=n.polar,o=a.getRadiusAxis().getExtent(),s=n.getTicksCoords(),l=n.getMinorTicksCoords(),u=qe(n.getViewLabels(),function(c){c=At(c);var h=n.scale,d=h.type==="ordinal"?h.getRawOrdinalNumber(c.tickValue):c.tickValue;return c.coord=n.dataToCoord(d),c});TX(u),TX(s),q(aNe,function(c){r.get([c,"show"])&&(!n.scale.isBlank()||c==="axisLine")&&sNe[c](this.group,r,a,s,l,o,u)},this)}},t.type="angleAxis",t}(im),sNe={axisLine:function(e,t,r,i,n,a){var o=t.getModel(["axisLine","lineStyle"]),s=r.getAngleAxis(),l=Math.PI/180,u=s.getExtent(),c=s_(r),h=c?0:1,d,f=Math.abs(u[1]-u[0])===360?"Circle":"Arc";a[h]===0?d=new $v[f]({shape:{cx:r.cx,cy:r.cy,r:a[c],startAngle:-u[0]*l,endAngle:-u[1]*l,clockwise:s.inverse},style:o.getLineStyle(),z2:1,silent:!0}):d=new h4({shape:{cx:r.cx,cy:r.cy,r:a[c],r0:a[h]},style:o.getLineStyle(),z2:1,silent:!0}),d.style.fill=null,e.add(d)},axisTick:function(e,t,r,i,n,a){var o=t.getModel("axisTick"),s=(o.get("inside")?-1:1)*o.get("length"),l=a[s_(r)],u=qe(i,function(c){return new $n({shape:o_(r,[l,l+s],c.coord)})});e.add(Cl(u,{style:bt(o.getModel("lineStyle").getLineStyle(),{stroke:t.get(["axisLine","lineStyle","color"])})}))},minorTick:function(e,t,r,i,n,a){if(n.length){for(var o=t.getModel("axisTick"),s=t.getModel("minorTick"),l=(o.get("inside")?-1:1)*s.get("length"),u=a[s_(r)],c=[],h=0;h<n.length;h++)for(var d=0;d<n[h].length;d++)c.push(new $n({shape:o_(r,[u,u+l],n[h][d].coord)}));e.add(Cl(c,{style:bt(s.getModel("lineStyle").getLineStyle(),bt(o.getLineStyle(),{stroke:t.get(["axisLine","lineStyle","color"])}))}))}},axisLabel:function(e,t,r,i,n,a,o){var s=t.getCategories(!0),l=t.getModel("axisLabel"),u=l.get("margin"),c=t.get("triggerEvent");q(o,function(h,d){var f=l,p=h.tickValue,v=a[s_(r)],m=r.coordToPoint([v+u,h.coord]),g=r.cx,y=r.cy,x=Math.abs(m[0]-g)/v<.3?"center":m[0]>g?"left":"right",b=Math.abs(m[1]-y)/v<.3?"middle":m[1]>y?"top":"bottom";if(s&&s[p]){var _=s[p];_t(_)&&_.textStyle&&(f=new Qr(_.textStyle,l,l.ecModel))}var w=new Dr({silent:qo.isLabelSilent(t),style:Ti(f,{x:m[0],y:m[1],fill:f.getTextColor()||t.get(["axisLine","lineStyle","color"]),text:h.formattedLabel,align:x,verticalAlign:b})});if(e.add(w),c){var S=qo.makeAxisEventDataBase(t);S.targetType="axisLabel",S.value=h.rawLabel,Dt(w).eventData=S}},this)},splitLine:function(e,t,r,i,n,a){var o=t.getModel("splitLine"),s=o.getModel("lineStyle"),l=s.get("color"),u=0;l=l instanceof Array?l:[l];for(var c=[],h=0;h<i.length;h++){var d=u++%l.length;c[d]=c[d]||[],c[d].push(new $n({shape:o_(r,a,i[h].coord)}))}for(var h=0;h<c.length;h++)e.add(Cl(c[h],{style:bt({stroke:l[h%l.length]},s.getLineStyle()),silent:!0,z:t.get("z")}))},minorSplitLine:function(e,t,r,i,n,a){if(n.length){for(var o=t.getModel("minorSplitLine"),s=o.getModel("lineStyle"),l=[],u=0;u<n.length;u++)for(var c=0;c<n[u].length;c++)l.push(new $n({shape:o_(r,a,n[u][c].coord)}));e.add(Cl(l,{style:s.getLineStyle(),silent:!0,z:t.get("z")}))}},splitArea:function(e,t,r,i,n,a){if(i.length){var o=t.getModel("splitArea"),s=o.getModel("areaStyle"),l=s.get("color"),u=0;l=l instanceof Array?l:[l];for(var c=[],h=Math.PI/180,d=-i[0].coord*h,f=Math.min(a[0],a[1]),p=Math.max(a[0],a[1]),v=t.get("clockwise"),m=1,g=i.length;m<=g;m++){var y=m===g?i[0].coord:i[m].coord,x=u++%l.length;c[x]=c[x]||[],c[x].push(new Zo({shape:{cx:r.cx,cy:r.cy,r0:f,r:p,startAngle:d,endAngle:-y*h,clockwise:v},silent:!0})),d=-y*h}for(var m=0;m<c.length;m++)e.add(Cl(c[m],{style:bt({fill:l[m%l.length]},s.getAreaStyle()),silent:!0}))}}},lNe=["axisLine","axisTickLabel","axisName"],uNe=["splitLine","splitArea","minorSplitLine"],cNe=function(e){_e(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r.axisPointerClass="PolarAxisPointer",r}return t.prototype.render=function(r,i){if(this.group.removeAll(),!!r.get("show")){var n=this._axisGroup,a=this._axisGroup=new Ct;this.group.add(a);var o=r.axis,s=o.polar,l=s.getAngleAxis(),u=o.getTicksCoords(),c=o.getMinorTicksCoords(),h=l.getExtent()[0],d=o.getExtent(),f=dNe(s,r,h),p=new qo(r,f);q(lNe,p.add,p),a.add(p.getGroup()),f4(n,a,r),q(uNe,function(v){r.get([v,"show"])&&!o.scale.isBlank()&&hNe[v](this.group,r,s,h,d,u,c)},this)}},t.type="radiusAxis",t}(im),hNe={splitLine:function(e,t,r,i,n,a){var o=t.getModel("splitLine"),s=o.getModel("lineStyle"),l=s.get("color"),u=0,c=r.getAngleAxis(),h=Math.PI/180,d=c.getExtent(),f=Math.abs(d[1]-d[0])===360?"Circle":"Arc";l=l instanceof Array?l:[l];for(var p=[],v=0;v<a.length;v++){var m=u++%l.length;p[m]=p[m]||[],p[m].push(new $v[f]({shape:{cx:r.cx,cy:r.cy,r:Math.max(a[v].coord,0),startAngle:-d[0]*h,endAngle:-d[1]*h,clockwise:c.inverse}}))}for(var v=0;v<p.length;v++)e.add(Cl(p[v],{style:bt({stroke:l[v%l.length],fill:null},s.getLineStyle()),silent:!0}))},minorSplitLine:function(e,t,r,i,n,a,o){if(o.length){for(var s=t.getModel("minorSplitLine"),l=s.getModel("lineStyle"),u=[],c=0;c<o.length;c++)for(var h=0;h<o[c].length;h++)u.push(new Od({shape:{cx:r.cx,cy:r.cy,r:o[c][h].coord}}));e.add(Cl(u,{style:bt({fill:null},l.getLineStyle()),silent:!0}))}},splitArea:function(e,t,r,i,n,a){if(a.length){var o=t.getModel("splitArea"),s=o.getModel("areaStyle"),l=s.get("color"),u=0;l=l instanceof Array?l:[l];for(var c=[],h=a[0].coord,d=1;d<a.length;d++){var f=u++%l.length;c[f]=c[f]||[],c[f].push(new Zo({shape:{cx:r.cx,cy:r.cy,r0:h,r:a[d].coord,startAngle:0,endAngle:Math.PI*2},silent:!0})),h=a[d].coord}for(var d=0;d<c.length;d++)e.add(Cl(c[d],{style:bt({fill:l[d%l.length]},s.getAreaStyle()),silent:!0}))}}};function dNe(e,t,r){return{position:[e.cx,e.cy],rotation:r/180*Math.PI,labelDirection:-1,tickDirection:-1,nameDirection:1,labelRotate:t.getModel("axisLabel").get("rotate"),z2:1}}function cfe(e){return e.get("stack")||"__ec_stack_"+e.seriesIndex}function hfe(e,t){return t.dim+e.model.componentIndex}function fNe(e,t,r){var i={},n=pNe(ni(t.getSeriesByType(e),function(a){return!t.isSeriesFiltered(a)&&a.coordinateSystem&&a.coordinateSystem.type==="polar"}));t.eachSeriesByType(e,function(a){if(a.coordinateSystem.type==="polar"){var o=a.getData(),s=a.coordinateSystem,l=s.getBaseAxis(),u=hfe(s,l),c=cfe(a),h=n[u][c],d=h.offset,f=h.width,p=s.getOtherAxis(l),v=a.coordinateSystem.cx,m=a.coordinateSystem.cy,g=a.get("barMinHeight")||0,y=a.get("barMinAngle")||0;i[c]=i[c]||[];for(var x=o.mapDimension(p.dim),b=o.mapDimension(l.dim),_=vp(o,x),w=l.dim!=="radius"||!a.get("roundCap",!0),S=p.model,A=S.get("startValue"),M=p.dataToCoord(A||0),E=0,T=o.count();E<T;E++){var L=o.get(x,E),P=o.get(b,E),C=L>=0?"p":"n",D=M;_&&(i[c][P]||(i[c][P]={p:M,n:M}),D=i[c][P][C]);var I=void 0,O=void 0,R=void 0,H=void 0;if(p.dim==="radius"){var j=p.dataToCoord(L)-M,N=l.dataToCoord(P);Math.abs(j)<g&&(j=(j<0?-1:1)*g),I=D,O=D+j,R=N-d,H=R-f,_&&(i[c][P][C]=O)}else{var k=p.dataToCoord(L,w)-M,G=l.dataToCoord(P);Math.abs(k)<y&&(k=(k<0?-1:1)*y),I=G+d,O=I+f,R=D,H=D+k,_&&(i[c][P][C]=H)}o.setItemLayout(E,{cx:v,cy:m,r0:I,r:O,startAngle:-R*Math.PI/180,endAngle:-H*Math.PI/180,clockwise:R>=H})}}})}function pNe(e){var t={};q(e,function(i,n){var a=i.getData(),o=i.coordinateSystem,s=o.getBaseAxis(),l=hfe(o,s),u=s.getExtent(),c=s.type==="category"?s.getBandWidth():Math.abs(u[1]-u[0])/a.count(),h=t[l]||{bandWidth:c,remainedWidth:c,autoWidthCount:0,categoryGap:"20%",gap:"30%",stacks:{}},d=h.stacks;t[l]=h;var f=cfe(i);d[f]||h.autoWidthCount++,d[f]=d[f]||{width:0,maxWidth:0};var p=et(i.get("barWidth"),c),v=et(i.get("barMaxWidth"),c),m=i.get("barGap"),g=i.get("barCategoryGap");p&&!d[f].width&&(p=Math.min(h.remainedWidth,p),d[f].width=p,h.remainedWidth-=p),v&&(d[f].maxWidth=v),m!=null&&(h.gap=m),g!=null&&(h.categoryGap=g)});var r={};return q(t,function(i,n){r[n]={};var a=i.stacks,o=i.bandWidth,s=et(i.categoryGap,o),l=et(i.gap,1),u=i.remainedWidth,c=i.autoWidthCount,h=(u-s)/(c+(c-1)*l);h=Math.max(h,0),q(a,function(v,m){var g=v.maxWidth;g&&g<h&&(g=Math.min(g,u),v.width&&(g=Math.min(g,v.width)),u-=g,v.width=g,c--)}),h=(u-s)/(c+(c-1)*l),h=Math.max(h,0);var d=0,f;q(a,function(v,m){v.width||(v.width=h),f=v,d+=v.width*(1+l)}),f&&(d-=f.width*l);var p=-d/2;q(a,function(v,m){r[n][m]=r[n][m]||{offset:p,width:v.width},p+=v.width*(1+l)})}),r}var vNe={startAngle:90,clockwise:!0,splitNumber:12,axisLabel:{rotate:0}},mNe={splitNumber:5},gNe=function(e){_e(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r}return t.type="polar",t}(Gi);function yNe(e){ir(M4),im.registerAxisPointerClass("PolarAxisPointer",YBe),e.registerCoordinateSystem("polar",nNe),e.registerComponentModel(QBe),e.registerComponentView(gNe),G1(e,"angle",KBe,vNe),G1(e,"radius",JBe,mNe),e.registerComponentView(oNe),e.registerComponentView(cNe),e.registerLayout(kt(fNe,"bar"))}function lk(e,t){t=t||{};var r=e.coordinateSystem,i=e.axis,n={},a=i.position,o=i.orient,s=r.getRect(),l=[s.x,s.x+s.width,s.y,s.y+s.height],u={horizontal:{top:l[2],bottom:l[3]},vertical:{left:l[0],right:l[1]}};n.position=[o==="vertical"?u.vertical[a]:l[0],o==="horizontal"?u.horizontal[a]:l[3]];var c={horizontal:0,vertical:1};n.rotation=Math.PI/2*c[o];var h={top:-1,bottom:1,right:1,left:-1};n.labelDirection=n.tickDirection=n.nameDirection=h[a],e.get(["axisTick","inside"])&&(n.tickDirection=-n.tickDirection),xa(t.labelInside,e.get(["axisLabel","inside"]))&&(n.labelDirection=-n.labelDirection);var d=t.rotate;return d==null&&(d=e.get(["axisLabel","rotate"])),n.labelRotation=a==="top"?-d:d,n.z2=1,n}var xNe=["axisLine","axisTickLabel","axisName"],bNe=["splitArea","splitLine"],wNe=function(e){_e(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r.axisPointerClass="SingleAxisPointer",r}return t.prototype.render=function(r,i,n,a){var o=this.group;o.removeAll();var s=this._axisGroup;this._axisGroup=new Ct;var l=lk(r),u=new qo(r,l);q(xNe,u.add,u),o.add(this._axisGroup),o.add(u.getGroup()),q(bNe,function(c){r.get([c,"show"])&&_Ne[c](this,this.group,this._axisGroup,r)},this),f4(s,this._axisGroup,r),e.prototype.render.call(this,r,i,n,a)},t.prototype.remove=function(){khe(this)},t.type="singleAxis",t}(im),_Ne={splitLine:function(e,t,r,i){var n=i.axis;if(!n.scale.isBlank()){var a=i.getModel("splitLine"),o=a.getModel("lineStyle"),s=o.get("color");s=s instanceof Array?s:[s];for(var l=o.get("width"),u=i.coordinateSystem.getRect(),c=n.isHorizontal(),h=[],d=0,f=n.getTicksCoords({tickModel:a}),p=[],v=[],m=0;m<f.length;++m){var g=n.toGlobalCoord(f[m].coord);c?(p[0]=g,p[1]=u.y,v[0]=g,v[1]=u.y+u.height):(p[0]=u.x,p[1]=g,v[0]=u.x+u.width,v[1]=g);var y=new $n({shape:{x1:p[0],y1:p[1],x2:v[0],y2:v[1]},silent:!0});V1(y.shape,l);var x=d++%s.length;h[x]=h[x]||[],h[x].push(y)}for(var b=o.getLineStyle(["color"]),m=0;m<h.length;++m)t.add(Cl(h[m],{style:bt({stroke:s[m%s.length]},b),silent:!0}))}},splitArea:function(e,t,r,i){Lhe(e,r,i,i)}},MA=function(e){_e(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r}return t.prototype.getCoordSysModel=function(){return this},t.type="singleAxis",t.layoutMode="box",t.defaultOption={left:"5%",top:"5%",right:"5%",bottom:"5%",type:"value",position:"bottom",orient:"horizontal",axisLine:{show:!0,lineStyle:{width:1,type:"solid"}},tooltip:{show:!0},axisTick:{show:!0,length:6,lineStyle:{width:1}},axisLabel:{show:!0,interval:"auto"},splitLine:{show:!0,lineStyle:{type:"dashed",opacity:.2}}},t}(vr);Mn(MA,y4.prototype);var ANe=function(e){_e(t,e);function t(r,i,n,a,o){var s=e.call(this,r,i,n)||this;return s.type=a||"value",s.position=o||"bottom",s}return t.prototype.isHorizontal=function(){var r=this.position;return r==="top"||r==="bottom"},t.prototype.pointToData=function(r,i){return this.coordinateSystem.pointToData(r)[0]},t}(Fu),dfe=["single"],SNe=function(){function e(t,r,i){this.type="single",this.dimension="single",this.dimensions=dfe,this.axisPointerEnabled=!0,this.model=t,this._init(t,r,i)}return e.prototype._init=function(t,r,i){var n=this.dimension,a=new ANe(n,VC(t),[0,0],t.get("type"),t.get("position")),o=a.type==="category";a.onBand=o&&t.get("boundaryGap"),a.inverse=t.get("inverse"),a.orient=t.get("orient"),t.axis=a,a.model=t,a.coordinateSystem=this,this._axis=a},e.prototype.update=function(t,r){t.eachSeries(function(i){if(i.coordinateSystem===this){var n=i.getData();q(n.mapDimensionsAll(this.dimension),function(a){this._axis.scale.unionExtentFromData(n,a)},this),H1(this._axis.scale,this._axis.model)}},this)},e.prototype.resize=function(t,r){this._rect=zn({left:t.get("left"),top:t.get("top"),right:t.get("right"),bottom:t.get("bottom"),width:t.get("width"),height:t.get("height")},{width:r.getWidth(),height:r.getHeight()}),this._adjustAxis()},e.prototype.getRect=function(){return this._rect},e.prototype._adjustAxis=function(){var t=this._rect,r=this._axis,i=r.isHorizontal(),n=i?[0,t.width]:[0,t.height],a=r.inverse?1:0;r.setExtent(n[a],n[1-a]),this._updateAxisTransform(r,i?t.x:t.y)},e.prototype._updateAxisTransform=function(t,r){var i=t.getExtent(),n=i[0]+i[1],a=t.isHorizontal();t.toGlobalCoord=a?function(o){return o+r}:function(o){return n-o+r},t.toLocalCoord=a?function(o){return o-r}:function(o){return n-o+r}},e.prototype.getAxis=function(){return this._axis},e.prototype.getBaseAxis=function(){return this._axis},e.prototype.getAxes=function(){return[this._axis]},e.prototype.getTooltipAxes=function(){return{baseAxes:[this.getAxis()],otherAxes:[]}},e.prototype.containPoint=function(t){var r=this.getRect(),i=this.getAxis(),n=i.orient;return n==="horizontal"?i.contain(i.toLocalCoord(t[0]))&&t[1]>=r.y&&t[1]<=r.y+r.height:i.contain(i.toLocalCoord(t[1]))&&t[0]>=r.y&&t[0]<=r.y+r.height},e.prototype.pointToData=function(t){var r=this.getAxis();return[r.coordToData(r.toLocalCoord(t[r.orient==="horizontal"?0:1]))]},e.prototype.dataToPoint=function(t){var r=this.getAxis(),i=this.getRect(),n=[],a=r.orient==="horizontal"?0:1;return t instanceof Array&&(t=t[0]),n[a]=r.toGlobalCoord(r.dataToCoord(+t)),n[1-a]=a===0?i.y+i.height/2:i.x+i.width/2,n},e.prototype.convertToPixel=function(t,r,i){var n=PX(r);return n===this?this.dataToPoint(i):null},e.prototype.convertFromPixel=function(t,r,i){var n=PX(r);return n===this?this.pointToData(i):null},e}();function PX(e){var t=e.seriesModel,r=e.singleAxisModel;return r&&r.coordinateSystem||t&&t.coordinateSystem}function CNe(e,t){var r=[];return e.eachComponent("singleAxis",function(i,n){var a=new SNe(i,e,t);a.name="single_"+n,a.resize(i,t),i.coordinateSystem=a,r.push(a)}),e.eachSeries(function(i){if(i.get("coordinateSystem")==="singleAxis"){var n=i.getReferringComponents("singleAxis",wn).models[0];i.coordinateSystem=n&&n.coordinateSystem}}),r}var ENe={create:CNe,dimensions:dfe},DX=["x","y"],MNe=["width","height"],TNe=function(e){_e(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.makeElOption=function(r,i,n,a,o){var s=n.axis,l=s.coordinateSystem,u=bT(l,1-uS(s)),c=l.dataToPoint(i)[0],h=a.get("type");if(h&&h!=="none"){var d=IV(a),f=PNe[h](s,c,u);f.style=d,r.graphicKey=f.type,r.pointer=f}var p=lk(n);afe(i,r,p,n,a,o)},t.prototype.getHandleTransform=function(r,i,n){var a=lk(i,{labelInside:!1});a.labelMargin=n.get(["handle","margin"]);var o=LV(i.axis,r,a);return{x:o[0],y:o[1],rotation:a.rotation+(a.labelDirection<0?Math.PI:0)}},t.prototype.updateHandleTransform=function(r,i,n,a){var o=n.axis,s=o.coordinateSystem,l=uS(o),u=bT(s,l),c=[r.x,r.y];c[l]+=i[l],c[l]=Math.min(u[1],c[l]),c[l]=Math.max(u[0],c[l]);var h=bT(s,1-l),d=(h[1]+h[0])/2,f=[d,d];return f[l]=c[l],{x:c[0],y:c[1],rotation:r.rotation,cursorPoint:f,tooltipOption:{verticalAlign:"middle"}}},t}(DV),PNe={line:function(e,t,r){var i=kV([t,r[0]],[t,r[1]],uS(e));return{type:"Line",subPixelOptimize:!0,shape:i}},shadow:function(e,t,r){var i=e.getBandWidth(),n=r[1]-r[0];return{type:"Rect",shape:ofe([t-i/2,r[0]],[i,n],uS(e))}}};function uS(e){return e.isHorizontal()?0:1}function bT(e,t){var r=e.getRect();return[r[DX[t]],r[DX[t]]+r[MNe[t]]]}var DNe=function(e){_e(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r}return t.type="single",t}(Gi);function INe(e){ir(M4),im.registerAxisPointerClass("SingleAxisPointer",TNe),e.registerComponentView(DNe),e.registerComponentView(wNe),e.registerComponentModel(MA),G1(e,"single",MA,MA.defaultOption),e.registerCoordinateSystem("single",ENe)}var LNe=function(e){_e(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r}return t.prototype.init=function(r,i,n){var a=Dy(r);e.prototype.init.apply(this,arguments),IX(r,a)},t.prototype.mergeOption=function(r){e.prototype.mergeOption.apply(this,arguments),IX(this.option,r)},t.prototype.getCellSize=function(){return this.option.cellSize},t.type="calendar",t.defaultOption={z:2,left:80,top:60,cellSize:20,orient:"horizontal",splitLine:{show:!0,lineStyle:{color:"#000",width:1,type:"solid"}},itemStyle:{color:"#fff",borderWidth:1,borderColor:"#ccc"},dayLabel:{show:!0,firstDay:0,position:"start",margin:"50%",color:"#000"},monthLabel:{show:!0,position:"start",margin:5,align:"center",formatter:null,color:"#000"},yearLabel:{show:!0,position:null,margin:30,formatter:null,color:"#ccc",fontFamily:"sans-serif",fontWeight:"bolder",fontSize:20}},t}(vr);function IX(e,t){var r=e.cellSize,i;Ue(r)?i=r:i=e.cellSize=[r,r],i.length===1&&(i[1]=i[0]);var n=qe([0,1],function(a){return t7e(t,a)&&(i[a]="auto"),i[a]!=null&&i[a]!=="auto"});pp(e,t,{type:"box",ignoreSize:n})}var kNe=function(e){_e(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r}return t.prototype.render=function(r,i,n){var a=this.group;a.removeAll();var o=r.coordinateSystem,s=o.getRangeInfo(),l=o.getOrient(),u=i.getLocaleModel();this._renderDayRect(r,s,a),this._renderLines(r,s,l,a),this._renderYearText(r,s,l,a),this._renderMonthText(r,u,l,a),this._renderWeekText(r,u,s,l,a)},t.prototype._renderDayRect=function(r,i,n){for(var a=r.coordinateSystem,o=r.getModel("itemStyle").getItemStyle(),s=a.getCellWidth(),l=a.getCellHeight(),u=i.start.time;u<=i.end.time;u=a.getNextNDay(u,1).time){var c=a.dataToRect([u],!1).tl,h=new Tr({shape:{x:c[0],y:c[1],width:s,height:l},cursor:"default",style:o});n.add(h)}},t.prototype._renderLines=function(r,i,n,a){var o=this,s=r.coordinateSystem,l=r.getModel(["splitLine","lineStyle"]).getLineStyle(),u=r.get(["splitLine","show"]),c=l.lineWidth;this._tlpoints=[],this._blpoints=[],this._firstDayOfMonth=[],this._firstDayPoints=[];for(var h=i.start,d=0;h.time<=i.end.time;d++){p(h.formatedDate),d===0&&(h=s.getDateInfo(i.start.y+"-"+i.start.m));var f=h.date;f.setMonth(f.getMonth()+1),h=s.getDateInfo(f)}p(s.getNextNDay(i.end.time,1).formatedDate);function p(v){o._firstDayOfMonth.push(s.getDateInfo(v)),o._firstDayPoints.push(s.dataToRect([v],!1).tl);var m=o._getLinePointsOfOneWeek(r,v,n);o._tlpoints.push(m[0]),o._blpoints.push(m[m.length-1]),u&&o._drawSplitline(m,l,a)}u&&this._drawSplitline(o._getEdgesPoints(o._tlpoints,c,n),l,a),u&&this._drawSplitline(o._getEdgesPoints(o._blpoints,c,n),l,a)},t.prototype._getEdgesPoints=function(r,i,n){var a=[r[0].slice(),r[r.length-1].slice()],o=n==="horizontal"?0:1;return a[0][o]=a[0][o]-i/2,a[1][o]=a[1][o]+i/2,a},t.prototype._drawSplitline=function(r,i,n){var a=new $o({z2:20,shape:{points:r},style:i});n.add(a)},t.prototype._getLinePointsOfOneWeek=function(r,i,n){for(var a=r.coordinateSystem,o=a.getDateInfo(i),s=[],l=0;l<7;l++){var u=a.getNextNDay(o.time,l),c=a.dataToRect([u.time],!1);s[2*u.day]=c.tl,s[2*u.day+1]=c[n==="horizontal"?"bl":"tr"]}return s},t.prototype._formatterLabel=function(r,i){return it(r)&&r?JCe(r,i):xt(r)?r(i):i.nameMap},t.prototype._yearTextPositionControl=function(r,i,n,a,o){var s=i[0],l=i[1],u=["center","bottom"];a==="bottom"?(l+=o,u=["center","top"]):a==="left"?s-=o:a==="right"?(s+=o,u=["center","top"]):l-=o;var c=0;return(a==="left"||a==="right")&&(c=Math.PI/2),{rotation:c,x:s,y:l,style:{align:u[0],verticalAlign:u[1]}}},t.prototype._renderYearText=function(r,i,n,a){var o=r.getModel("yearLabel");if(o.get("show")){var s=o.get("margin"),l=o.get("position");l||(l=n!=="horizontal"?"top":"left");var u=[this._tlpoints[this._tlpoints.length-1],this._blpoints[0]],c=(u[0][0]+u[1][0])/2,h=(u[0][1]+u[1][1])/2,d=n==="horizontal"?0:1,f={top:[c,u[d][1]],bottom:[c,u[1-d][1]],left:[u[1-d][0],h],right:[u[d][0],h]},p=i.start.y;+i.end.y>+i.start.y&&(p=p+"-"+i.end.y);var v=o.get("formatter"),m={start:i.start.y,end:i.end.y,nameMap:p},g=this._formatterLabel(v,m),y=new Dr({z2:30,style:Ti(o,{text:g})});y.attr(this._yearTextPositionControl(y,f[l],n,l,s)),a.add(y)}},t.prototype._monthTextPositionControl=function(r,i,n,a,o){var s="left",l="top",u=r[0],c=r[1];return n==="horizontal"?(c=c+o,i&&(s="center"),a==="start"&&(l="bottom")):(u=u+o,i&&(l="middle"),a==="start"&&(s="right")),{x:u,y:c,align:s,verticalAlign:l}},t.prototype._renderMonthText=function(r,i,n,a){var o=r.getModel("monthLabel");if(o.get("show")){var s=o.get("nameMap"),l=o.get("margin"),u=o.get("position"),c=o.get("align"),h=[this._tlpoints,this._blpoints];(!s||it(s))&&(s&&(i=mL(s)||i),s=i.get(["time","monthAbbr"])||[]);var d=u==="start"?0:1,f=n==="horizontal"?0:1;l=u==="start"?-l:l;for(var p=c==="center",v=0;v<h[d].length-1;v++){var m=h[d][v].slice(),g=this._firstDayOfMonth[v];if(p){var y=this._firstDayPoints[v];m[f]=(y[f]+h[0][v+1][f])/2}var x=o.get("formatter"),b=s[+g.m-1],_={yyyy:g.y,yy:(g.y+"").slice(2),MM:g.m,M:+g.m,nameMap:b},w=this._formatterLabel(x,_),S=new Dr({z2:30,style:Be(Ti(o,{text:w}),this._monthTextPositionControl(m,p,n,u,l))});a.add(S)}}},t.prototype._weekTextPositionControl=function(r,i,n,a,o){var s="center",l="middle",u=r[0],c=r[1],h=n==="start";return i==="horizontal"?(u=u+a+(h?1:-1)*o[0]/2,s=h?"right":"left"):(c=c+a+(h?1:-1)*o[1]/2,l=h?"bottom":"top"),{x:u,y:c,align:s,verticalAlign:l}},t.prototype._renderWeekText=function(r,i,n,a,o){var s=r.getModel("dayLabel");if(s.get("show")){var l=r.coordinateSystem,u=s.get("position"),c=s.get("nameMap"),h=s.get("margin"),d=l.getFirstDayOfWeek();if(!c||it(c)){c&&(i=mL(c)||i);var f=i.get(["time","dayOfWeekShort"]);c=f||qe(i.get(["time","dayOfWeekAbbr"]),function(_){return _[0]})}var p=l.getNextNDay(n.end.time,7-n.lweek).time,v=[l.getCellWidth(),l.getCellHeight()];h=et(h,Math.min(v[1],v[0])),u==="start"&&(p=l.getNextNDay(n.start.time,-(7+n.fweek)).time,h=-h);for(var m=0;m<7;m++){var g=l.getNextNDay(p,m),y=l.dataToRect([g.time],!1).center,x=m;x=Math.abs((m+d)%7);var b=new Dr({z2:30,style:Be(Ti(s,{text:c[x]}),this._weekTextPositionControl(y,a,u,h,v))});o.add(b)}}},t.type="calendar",t}(Gi),wT=864e5,RNe=function(){function e(t,r,i){this.type="calendar",this.dimensions=e.dimensions,this.getDimensionsInfo=e.getDimensionsInfo,this._model=t}return e.getDimensionsInfo=function(){return[{name:"time",type:"time"},"value"]},e.prototype.getRangeInfo=function(){return this._rangeInfo},e.prototype.getModel=function(){return this._model},e.prototype.getRect=function(){return this._rect},e.prototype.getCellWidth=function(){return this._sw},e.prototype.getCellHeight=function(){return this._sh},e.prototype.getOrient=function(){return this._orient},e.prototype.getFirstDayOfWeek=function(){return this._firstDayOfWeek},e.prototype.getDateInfo=function(t){t=Jc(t);var r=t.getFullYear(),i=t.getMonth()+1,n=i<10?"0"+i:""+i,a=t.getDate(),o=a<10?"0"+a:""+a,s=t.getDay();return s=Math.abs((s+7-this.getFirstDayOfWeek())%7),{y:r+"",m:n,d:o,day:s,time:t.getTime(),formatedDate:r+"-"+n+"-"+o,date:t}},e.prototype.getNextNDay=function(t,r){return r=r||0,r===0?this.getDateInfo(t):(t=new Date(this.getDateInfo(t).time),t.setDate(t.getDate()+r),this.getDateInfo(t))},e.prototype.update=function(t,r){this._firstDayOfWeek=+this._model.getModel("dayLabel").get("firstDay"),this._orient=this._model.get("orient"),this._lineWidth=this._model.getModel("itemStyle").getItemStyle().lineWidth||0,this._rangeInfo=this._getRangeInfo(this._initRangeOption());var i=this._rangeInfo.weeks||1,n=["width","height"],a=this._model.getCellSize().slice(),o=this._model.getBoxLayoutParams(),s=this._orient==="horizontal"?[i,7]:[7,i];q([0,1],function(h){c(a,h)&&(o[n[h]]=a[h]*s[h])});var l={width:r.getWidth(),height:r.getHeight()},u=this._rect=zn(o,l);q([0,1],function(h){c(a,h)||(a[h]=u[n[h]]/s[h])});function c(h,d){return h[d]!=null&&h[d]!=="auto"}this._sw=a[0],this._sh=a[1]},e.prototype.dataToPoint=function(t,r){Ue(t)&&(t=t[0]),r==null&&(r=!0);var i=this.getDateInfo(t),n=this._rangeInfo,a=i.formatedDate;if(r&&!(i.time>=n.start.time&&i.time<n.end.time+wT))return[NaN,NaN];var o=i.day,s=this._getRangeInfo([n.start.time,a]).nthWeek;return this._orient==="vertical"?[this._rect.x+o*this._sw+this._sw/2,this._rect.y+s*this._sh+this._sh/2]:[this._rect.x+s*this._sw+this._sw/2,this._rect.y+o*this._sh+this._sh/2]},e.prototype.pointToData=function(t){var r=this.pointToDate(t);return r&&r.time},e.prototype.dataToRect=function(t,r){var i=this.dataToPoint(t,r);return{contentShape:{x:i[0]-(this._sw-this._lineWidth)/2,y:i[1]-(this._sh-this._lineWidth)/2,width:this._sw-this._lineWidth,height:this._sh-this._lineWidth},center:i,tl:[i[0]-this._sw/2,i[1]-this._sh/2],tr:[i[0]+this._sw/2,i[1]-this._sh/2],br:[i[0]+this._sw/2,i[1]+this._sh/2],bl:[i[0]-this._sw/2,i[1]+this._sh/2]}},e.prototype.pointToDate=function(t){var r=Math.floor((t[0]-this._rect.x)/this._sw)+1,i=Math.floor((t[1]-this._rect.y)/this._sh)+1,n=this._rangeInfo.range;return this._orient==="vertical"?this._getDateByWeeksAndDay(i,r-1,n):this._getDateByWeeksAndDay(r,i-1,n)},e.prototype.convertToPixel=function(t,r,i){var n=LX(r);return n===this?n.dataToPoint(i):null},e.prototype.convertFromPixel=function(t,r,i){var n=LX(r);return n===this?n.pointToData(i):null},e.prototype.containPoint=function(t){return console.warn("Not implemented."),!1},e.prototype._initRangeOption=function(){var t=this._model.get("range"),r;if(Ue(t)&&t.length===1&&(t=t[0]),Ue(t))r=t;else{var i=t.toString();if(/^\d{4}$/.test(i)&&(r=[i+"-01-01",i+"-12-31"]),/^\d{4}[\/|-]\d{1,2}$/.test(i)){var n=this.getDateInfo(i),a=n.date;a.setMonth(a.getMonth()+1);var o=this.getNextNDay(a,-1);r=[n.formatedDate,o.formatedDate]}/^\d{4}[\/|-]\d{1,2}[\/|-]\d{1,2}$/.test(i)&&(r=[i,i])}if(!r)return t;var s=this._getRangeInfo(r);return s.start.time>s.end.time&&r.reverse(),r},e.prototype._getRangeInfo=function(t){var r=[this.getDateInfo(t[0]),this.getDateInfo(t[1])],i;r[0].time>r[1].time&&(i=!0,r.reverse());var n=Math.floor(r[1].time/wT)-Math.floor(r[0].time/wT)+1,a=new Date(r[0].time),o=a.getDate(),s=r[1].date.getDate();a.setDate(o+n-1);var l=a.getDate();if(l!==s)for(var u=a.getTime()-r[1].time>0?1:-1;(l=a.getDate())!==s&&(a.getTime()-r[1].time)*u>0;)n-=u,a.setDate(l-u);var c=Math.floor((n+r[0].day+6)/7),h=i?-c+1:c-1;return i&&r.reverse(),{range:[r[0].formatedDate,r[1].formatedDate],start:r[0],end:r[1],allDay:n,weeks:c,nthWeek:h,fweek:r[0].day,lweek:r[1].day}},e.prototype._getDateByWeeksAndDay=function(t,r,i){var n=this._getRangeInfo(i);if(t>n.weeks||t===0&&r<n.fweek||t===n.weeks&&r>n.lweek)return null;var a=(t-1)*7-n.fweek+r,o=new Date(n.start.time);return o.setDate(+n.start.d+a),this.getDateInfo(o)},e.create=function(t,r){var i=[];return t.eachComponent("calendar",function(n){var a=new e(n);i.push(a),n.coordinateSystem=a}),t.eachSeries(function(n){n.get("coordinateSystem")==="calendar"&&(n.coordinateSystem=i[n.get("calendarIndex")||0])}),i},e.dimensions=["time","value"],e}();function LX(e){var t=e.calendarModel,r=e.seriesModel,i=t?t.coordinateSystem:r?r.coordinateSystem:null;return i}function ONe(e){e.registerComponentModel(LNe),e.registerComponentView(kNe),e.registerCoordinateSystem("calendar",RNe)}function BNe(e,t){var r=e.existing;if(t.id=e.keyInfo.id,!t.type&&r&&(t.type=r.type),t.parentId==null){var i=t.parentOption;i?t.parentId=i.id:r&&(t.parentId=r.parentId)}t.parentOption=null}function kX(e,t){var r;return q(t,function(i){e[i]!=null&&e[i]!=="auto"&&(r=!0)}),r}function NNe(e,t,r){var i=Be({},r),n=e[t],a=r.$action||"merge";a==="merge"?n?(Wt(n,i,!0),pp(n,i,{ignoreSize:!0}),nue(r,n),l_(r,n),l_(r,n,"shape"),l_(r,n,"style"),l_(r,n,"extra"),r.clipPath=n.clipPath):e[t]=i:a==="replace"?e[t]=i:a==="remove"&&n&&(e[t]=null)}var ffe=["transition","enterFrom","leaveTo"],VNe=ffe.concat(["enterAnimation","updateAnimation","leaveAnimation"]);function l_(e,t,r){if(r&&(!e[r]&&t[r]&&(e[r]={}),e=e[r],t=t[r]),!(!e||!t))for(var i=r?ffe:VNe,n=0;n<i.length;n++){var a=i[n];e[a]==null&&t[a]!=null&&(e[a]=t[a])}}function FNe(e,t){if(e&&(e.hv=t.hv=[kX(t,["left","right"]),kX(t,["top","bottom"])],e.type==="group")){var r=e,i=t;r.width==null&&(r.width=i.width=0),r.height==null&&(r.height=i.height=0)}}var zNe=function(e){_e(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r.preventAutoZ=!0,r}return t.prototype.mergeOption=function(r,i){var n=this.option.elements;this.option.elements=null,e.prototype.mergeOption.call(this,r,i),this.option.elements=n},t.prototype.optionUpdated=function(r,i){var n=this.option,a=(i?n:r).elements,o=n.elements=i?[]:n.elements,s=[];this._flatten(a,s,null);var l=ele(o,s,"normalMerge"),u=this._elOptionsToUpdate=[];q(l,function(c,h){var d=c.newOption;d&&(u.push(d),BNe(c,d),NNe(o,h,d),FNe(o[h],d))},this),n.elements=ni(o,function(c){return c&&delete c.$action,c!=null})},t.prototype._flatten=function(r,i,n){q(r,function(a){if(a){n&&(a.parentOption=n),i.push(a);var o=a.children;o&&o.length&&this._flatten(o,i,a),delete a.children}},this)},t.prototype.useElOptionsToUpdate=function(){var r=this._elOptionsToUpdate;return this._elOptionsToUpdate=null,r},t.type="graphic",t.defaultOption={elements:[]},t}(vr),RX={path:null,compoundPath:null,group:Ct,image:Ta,text:Dr},gl=Pr(),HNe=function(e){_e(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r}return t.prototype.init=function(){this._elMap=dt()},t.prototype.render=function(r,i,n){r!==this._lastGraphicModel&&this._clear(),this._lastGraphicModel=r,this._updateElements(r),this._relocate(r,n)},t.prototype._updateElements=function(r){var i=r.useElOptionsToUpdate();if(i){var n=this._elMap,a=this.group,o=r.get("z"),s=r.get("zlevel");q(i,function(l){var u=Rn(l.id,null),c=u!=null?n.get(u):null,h=Rn(l.parentId,null),d=h!=null?n.get(h):a,f=l.type,p=l.style;f==="text"&&p&&l.hv&&l.hv[1]&&(p.textVerticalAlign=p.textBaseline=p.verticalAlign=p.align=null);var v=l.textContent,m=l.textConfig;if(p&&Yde(p,f,!!m,!!v)){var g=Xde(p,f,!0);!m&&g.textConfig&&(m=l.textConfig=g.textConfig),!v&&g.textContent&&(v=g.textContent)}var y=UNe(l),x=l.$action||"merge",b=x==="merge",_=x==="replace";if(b){var w=!c,S=c;w?S=OX(u,d,l.type,n):(S&&(gl(S).isNew=!1),Jde(S)),S&&(CA(S,y,r,{isInit:w}),BX(S,l,o,s))}else if(_){TA(c,l,n,r);var A=OX(u,d,l.type,n);A&&(CA(A,y,r,{isInit:!0}),BX(A,l,o,s))}else x==="remove"&&(Qde(c,l),TA(c,l,n,r));var M=n.get(u);if(M&&v)if(b){var E=M.getTextContent();E?E.attr(v):M.setTextContent(new Dr(v))}else _&&M.setTextContent(new Dr(v));if(M){var T=l.clipPath;if(T){var L=T.type,P=void 0,w=!1;if(b){var C=M.getClipPath();w=!C||gl(C).type!==L,P=w?uk(L):C}else _&&(w=!0,P=uk(L));M.setClipPath(P),CA(P,T,r,{isInit:w}),sS(P,T.keyframeAnimation,r)}var D=gl(M);M.setTextConfig(m),D.option=l,GNe(M,r,l),Ey({el:M,componentModel:r,itemName:M.name,itemTooltipOption:l.tooltip}),sS(M,l.keyframeAnimation,r)}})}},t.prototype._relocate=function(r,i){for(var n=r.option.elements,a=this.group,o=this._elMap,s=i.getWidth(),l=i.getHeight(),u=["x","y"],c=0;c<n.length;c++){var h=n[c],d=Rn(h.id,null),f=d!=null?o.get(d):null;if(!(!f||!f.isGroup)){var p=f.parent,v=p===a,m=gl(f),g=gl(p);m.width=et(m.option.width,v?s:g.width)||0,m.height=et(m.option.height,v?l:g.height)||0}}for(var c=n.length-1;c>=0;c--){var h=n[c],d=Rn(h.id,null),f=d!=null?o.get(d):null;if(f){var p=f.parent,g=gl(p),y=p===a?{width:s,height:l}:{width:g.width,height:g.height},x={},b=PC(f,h,y,null,{hv:h.hv,boundingMode:h.bounding},x);if(!gl(f).isNew&&b){for(var _=h.transition,w={},S=0;S<u.length;S++){var A=u[S],M=x[A];_&&(wv(_)||tr(_,A)>=0)?w[A]=M:f[A]=M}Nr(f,w,r,0)}else f.attr(x)}}},t.prototype._clear=function(){var r=this,i=this._elMap;i.each(function(n){TA(n,gl(n).option,i,r._lastGraphicModel)}),this._elMap=dt()},t.prototype.dispose=function(){this._clear()},t.type="graphic",t}(Gi);function uk(e){var t=lt(RX,e)?RX[e]:vN(e),r=new t({});return gl(r).type=e,r}function OX(e,t,r,i){var n=uk(r);return t.add(n),i.set(e,n),gl(n).id=e,gl(n).isNew=!0,n}function TA(e,t,r,i){var n=e&&e.parent;n&&(e.type==="group"&&e.traverse(function(a){TA(a,t,r,i)}),WC(e,t,i),r.removeKey(gl(e).id))}function BX(e,t,r,i){e.isGroup||q([["cursor",Rl.prototype.cursor],["zlevel",i||0],["z",r||0],["z2",0]],function(n){var a=n[0];lt(t,a)?e[a]=Lt(t[a],n[1]):e[a]==null&&(e[a]=n[1])}),q(mr(t),function(n){if(n.indexOf("on")===0){var a=t[n];e[n]=xt(a)?a:null}}),lt(t,"draggable")&&(e.draggable=t.draggable),t.name!=null&&(e.name=t.name),t.id!=null&&(e.id=t.id)}function UNe(e){return e=Be({},e),q(["id","parentId","$action","hv","bounding","textContent","clipPath"].concat(iue),function(t){delete e[t]}),e}function GNe(e,t,r){var i=Dt(e).eventData;!e.silent&&!e.ignore&&!i&&(i=Dt(e).eventData={componentType:"graphic",componentIndex:t.componentIndex,name:e.name}),i&&(i.info=r.info)}function jNe(e){e.registerComponentModel(zNe),e.registerComponentView(HNe),e.registerPreprocessor(function(t){var r=t.graphic;Ue(r)?!r[0]||!r[0].elements?t.graphic=[{elements:r}]:t.graphic=[t.graphic[0]]:r&&!r.elements&&(t.graphic=[{elements:[r]}])})}var NX=["x","y","radius","angle","single"],WNe=["cartesian2d","polar","singleAxis"];function qNe(e){var t=e.get("coordinateSystem");return tr(WNe,t)>=0}function Hf(e){return e+"Axis"}function YNe(e,t){var r=dt(),i=[],n=dt();e.eachComponent({mainType:"dataZoom",query:t},function(c){n.get(c.uid)||s(c)});var a;do a=!1,e.eachComponent("dataZoom",o);while(a);function o(c){!n.get(c.uid)&&l(c)&&(s(c),a=!0)}function s(c){n.set(c.uid,!0),i.push(c),u(c)}function l(c){var h=!1;return c.eachTargetAxis(function(d,f){var p=r.get(d);p&&p[f]&&(h=!0)}),h}function u(c){c.eachTargetAxis(function(h,d){(r.get(h)||r.set(h,[]))[d]=!0})}return i}function pfe(e){var t=e.ecModel,r={infoList:[],infoMap:dt()};return e.eachTargetAxis(function(i,n){var a=t.getComponent(Hf(i),n);if(a){var o=a.getCoordSysModel();if(o){var s=o.uid,l=r.infoMap.get(s);l||(l={model:o,axisModels:[]},r.infoList.push(l),r.infoMap.set(s,l)),l.axisModels.push(a)}}}),r}var _T=function(){function e(){this.indexList=[],this.indexMap=[]}return e.prototype.add=function(t){this.indexMap[t]||(this.indexList.push(t),this.indexMap[t]=!0)},e}(),gw=function(e){_e(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r._autoThrottle=!0,r._noTarget=!0,r._rangePropMode=["percent","percent"],r}return t.prototype.init=function(r,i,n){var a=VX(r);this.settledOption=a,this.mergeDefaultAndTheme(r,n),this._doInit(a)},t.prototype.mergeOption=function(r){var i=VX(r);Wt(this.option,r,!0),Wt(this.settledOption,i,!0),this._doInit(i)},t.prototype._doInit=function(r){var i=this.option;this._setDefaultThrottle(r),this._updateRangeUse(r);var n=this.settledOption;q([["start","startValue"],["end","endValue"]],function(a,o){this._rangePropMode[o]==="value"&&(i[a[0]]=n[a[0]]=null)},this),this._resetTarget()},t.prototype._resetTarget=function(){var r=this.get("orient",!0),i=this._targetAxisInfoMap=dt(),n=this._fillSpecifiedTargetAxis(i);n?this._orient=r||this._makeAutoOrientByTargetAxis():(this._orient=r||"horizontal",this._fillAutoTargetAxisByOrient(i,this._orient)),this._noTarget=!0,i.each(function(a){a.indexList.length&&(this._noTarget=!1)},this)},t.prototype._fillSpecifiedTargetAxis=function(r){var i=!1;return q(NX,function(n){var a=this.getReferringComponents(Hf(n),HSe);if(a.specified){i=!0;var o=new _T;q(a.models,function(s){o.add(s.componentIndex)}),r.set(n,o)}},this),i},t.prototype._fillAutoTargetAxisByOrient=function(r,i){var n=this.ecModel,a=!0;if(a){var o=i==="vertical"?"y":"x",s=n.findComponents({mainType:o+"Axis"});l(s,o)}if(a){var s=n.findComponents({mainType:"singleAxis",filter:function(c){return c.get("orient",!0)===i}});l(s,"single")}function l(u,c){var h=u[0];if(h){var d=new _T;if(d.add(h.componentIndex),r.set(c,d),a=!1,c==="x"||c==="y"){var f=h.getReferringComponents("grid",wn).models[0];f&&q(u,function(p){h.componentIndex!==p.componentIndex&&f===p.getReferringComponents("grid",wn).models[0]&&d.add(p.componentIndex)})}}}a&&q(NX,function(u){if(a){var c=n.findComponents({mainType:Hf(u),filter:function(d){return d.get("type",!0)==="category"}});if(c[0]){var h=new _T;h.add(c[0].componentIndex),r.set(u,h),a=!1}}},this)},t.prototype._makeAutoOrientByTargetAxis=function(){var r;return this.eachTargetAxis(function(i){!r&&(r=i)},this),r==="y"?"vertical":"horizontal"},t.prototype._setDefaultThrottle=function(r){if(r.hasOwnProperty("throttle")&&(this._autoThrottle=!1),this._autoThrottle){var i=this.ecModel.option;this.option.throttle=i.animation&&i.animationDurationUpdate>0?100:20}},t.prototype._updateRangeUse=function(r){var i=this._rangePropMode,n=this.get("rangeMode");q([["start","startValue"],["end","endValue"]],function(a,o){var s=r[a[0]]!=null,l=r[a[1]]!=null;s&&!l?i[o]="percent":!s&&l?i[o]="value":n?i[o]=n[o]:s&&(i[o]="percent")})},t.prototype.noTarget=function(){return this._noTarget},t.prototype.getFirstTargetAxisModel=function(){var r;return this.eachTargetAxis(function(i,n){r==null&&(r=this.ecModel.getComponent(Hf(i),n))},this),r},t.prototype.eachTargetAxis=function(r,i){this._targetAxisInfoMap.each(function(n,a){q(n.indexList,function(o){r.call(i,a,o)})})},t.prototype.getAxisProxy=function(r,i){var n=this.getAxisModel(r,i);if(n)return n.__dzAxisProxy},t.prototype.getAxisModel=function(r,i){var n=this._targetAxisInfoMap.get(r);if(n&&n.indexMap[i])return this.ecModel.getComponent(Hf(r),i)},t.prototype.setRawRange=function(r){var i=this.option,n=this.settledOption;q([["start","startValue"],["end","endValue"]],function(a){(r[a[0]]!=null||r[a[1]]!=null)&&(i[a[0]]=n[a[0]]=r[a[0]],i[a[1]]=n[a[1]]=r[a[1]])},this),this._updateRangeUse(r)},t.prototype.setCalculatedRange=function(r){var i=this.option;q(["start","startValue","end","endValue"],function(n){i[n]=r[n]})},t.prototype.getPercentRange=function(){var r=this.findRepresentativeAxisProxy();if(r)return r.getDataPercentWindow()},t.prototype.getValueRange=function(r,i){if(r==null&&i==null){var n=this.findRepresentativeAxisProxy();if(n)return n.getDataValueWindow()}else return this.getAxisProxy(r,i).getDataValueWindow()},t.prototype.findRepresentativeAxisProxy=function(r){if(r)return r.__dzAxisProxy;for(var i,n=this._targetAxisInfoMap.keys(),a=0;a<n.length;a++)for(var o=n[a],s=this._targetAxisInfoMap.get(o),l=0;l<s.indexList.length;l++){var u=this.getAxisProxy(o,s.indexList[l]);if(u.hostedBy(this))return u;i||(i=u)}return i},t.prototype.getRangePropMode=function(){return this._rangePropMode.slice()},t.prototype.getOrient=function(){return this._orient},t.type="dataZoom",t.dependencies=["xAxis","yAxis","radiusAxis","angleAxis","singleAxis","series","toolbox"],t.defaultOption={z:4,filterMode:"filter",start:0,end:100},t}(vr);function VX(e){var t={};return q(["start","end","startValue","endValue","throttle"],function(r){e.hasOwnProperty(r)&&(t[r]=e[r])}),t}var XNe=function(e){_e(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r}return t.type="dataZoom.select",t}(gw),NV=function(e){_e(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r}return t.prototype.render=function(r,i,n,a){this.dataZoomModel=r,this.ecModel=i,this.api=n},t.type="dataZoom",t}(Gi),ZNe=function(e){_e(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r}return t.type="dataZoom.select",t}(NV),Mg=q,FX=Ml,QNe=function(){function e(t,r,i,n){this._dimName=t,this._axisIndex=r,this.ecModel=n,this._dataZoomModel=i}return e.prototype.hostedBy=function(t){return this._dataZoomModel===t},e.prototype.getDataValueWindow=function(){return this._valueWindow.slice()},e.prototype.getDataPercentWindow=function(){return this._percentWindow.slice()},e.prototype.getTargetSeriesModels=function(){var t=[];return this.ecModel.eachSeries(function(r){if(qNe(r)){var i=Hf(this._dimName),n=r.getReferringComponents(i,wn).models[0];n&&this._axisIndex===n.componentIndex&&t.push(r)}},this),t},e.prototype.getAxisModel=function(){return this.ecModel.getComponent(this._dimName+"Axis",this._axisIndex)},e.prototype.getMinMaxSpan=function(){return At(this._minMaxSpan)},e.prototype.calculateDataWindow=function(t){var r=this._dataExtent,i=this.getAxisModel(),n=i.axis.scale,a=this._dataZoomModel.getRangePropMode(),o=[0,100],s=[],l=[],u;Mg(["start","end"],function(d,f){var p=t[d],v=t[d+"Value"];a[f]==="percent"?(p==null&&(p=o[f]),v=n.parse(ti(p,o,r))):(u=!0,v=v==null?r[f]:n.parse(v),p=ti(v,r,o)),l[f]=v==null||isNaN(v)?r[f]:v,s[f]=p==null||isNaN(p)?o[f]:p}),FX(l),FX(s);var c=this._minMaxSpan;u?h(l,s,r,o,!1):h(s,l,o,r,!0);function h(d,f,p,v,m){var g=m?"Span":"ValueSpan";nm(0,d,p,"all",c["min"+g],c["max"+g]);for(var y=0;y<2;y++)f[y]=ti(d[y],p,v,!0),m&&(f[y]=n.parse(f[y]))}return{valueWindow:l,percentWindow:s}},e.prototype.reset=function(t){if(t===this._dataZoomModel){var r=this.getTargetSeriesModels();this._dataExtent=KNe(this,this._dimName,r),this._updateMinMaxSpan();var i=this.calculateDataWindow(t.settledOption);this._valueWindow=i.valueWindow,this._percentWindow=i.percentWindow,this._setAxisModel()}},e.prototype.filterData=function(t,r){if(t!==this._dataZoomModel)return;var i=this._dimName,n=this.getTargetSeriesModels(),a=t.get("filterMode"),o=this._valueWindow;if(a==="none")return;Mg(n,function(l){var u=l.getData(),c=u.mapDimensionsAll(i);if(c.length){if(a==="weakFilter"){var h=u.getStore(),d=qe(c,function(f){return u.getDimensionIndex(f)},u);u.filterSelf(function(f){for(var p,v,m,g=0;g<c.length;g++){var y=h.get(d[g],f),x=!isNaN(y),b=y<o[0],_=y>o[1];if(x&&!b&&!_)return!0;x&&(m=!0),b&&(p=!0),_&&(v=!0)}return m&&p&&v})}else Mg(c,function(f){if(a==="empty")l.setData(u=u.map(f,function(v){return s(v)?v:NaN}));else{var p={};p[f]=o,u.selectRange(p)}});Mg(c,function(f){u.setApproximateExtent(o,f)})}});function s(l){return l>=o[0]&&l<=o[1]}},e.prototype._updateMinMaxSpan=function(){var t=this._minMaxSpan={},r=this._dataZoomModel,i=this._dataExtent;Mg(["min","max"],function(n){var a=r.get(n+"Span"),o=r.get(n+"ValueSpan");o!=null&&(o=this.getAxisModel().axis.scale.parse(o)),o!=null?a=ti(i[0]+o,i,[0,100],!0):a!=null&&(o=ti(a,[0,100],i,!0)-i[0]),t[n+"Span"]=a,t[n+"ValueSpan"]=o},this)},e.prototype._setAxisModel=function(){var t=this.getAxisModel(),r=this._percentWindow,i=this._valueWindow;if(r){var n=qse(i,[0,500]);n=Math.min(n,20);var a=t.axis.scale.rawExtentInfo;r[0]!==0&&a.setDeterminedMinMax("min",+i[0].toFixed(n)),r[1]!==100&&a.setDeterminedMinMax("max",+i[1].toFixed(n)),a.freeze()}},e}();function KNe(e,t,r){var i=[1/0,-1/0];Mg(r,function(o){DTe(i,o.getData(),t)});var n=e.getAxisModel(),a=Lce(n.axis.scale,n,i).calculate();return[a.min,a.max]}var JNe={getTargetSeries:function(e){function t(n){e.eachComponent("dataZoom",function(a){a.eachTargetAxis(function(o,s){var l=e.getComponent(Hf(o),s);n(o,s,l,a)})})}t(function(n,a,o,s){o.__dzAxisProxy=null});var r=[];t(function(n,a,o,s){o.__dzAxisProxy||(o.__dzAxisProxy=new QNe(n,a,s,e),r.push(o.__dzAxisProxy))});var i=dt();return q(r,function(n){q(n.getTargetSeriesModels(),function(a){i.set(a.uid,a)})}),i},overallReset:function(e,t){e.eachComponent("dataZoom",function(r){r.eachTargetAxis(function(i,n){r.getAxisProxy(i,n).reset(r)}),r.eachTargetAxis(function(i,n){r.getAxisProxy(i,n).filterData(r,t)})}),e.eachComponent("dataZoom",function(r){var i=r.findRepresentativeAxisProxy();if(i){var n=i.getDataPercentWindow(),a=i.getDataValueWindow();r.setCalculatedRange({start:n[0],end:n[1],startValue:a[0],endValue:a[1]})}})}};function $Ne(e){e.registerAction("dataZoom",function(t,r){var i=YNe(r,t);q(i,function(n){n.setRawRange({start:t.start,end:t.end,startValue:t.startValue,endValue:t.endValue})})})}var zX=!1;function VV(e){zX||(zX=!0,e.registerProcessor(e.PRIORITY.PROCESSOR.FILTER,JNe),$Ne(e),e.registerSubTypeDefaulter("dataZoom",function(){return"slider"}))}function eVe(e){e.registerComponentModel(XNe),e.registerComponentView(ZNe),VV(e)}var _l=function(){function e(){}return e}(),vfe={};function Tg(e,t){vfe[e]=t}function mfe(e){return vfe[e]}var tVe=function(e){_e(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r}return t.prototype.optionUpdated=function(){e.prototype.optionUpdated.apply(this,arguments);var r=this.ecModel;q(this.option.feature,function(i,n){var a=mfe(n);a&&(a.getDefaultOption&&(a.defaultOption=a.getDefaultOption(r)),Wt(i,a.defaultOption))})},t.type="toolbox",t.layoutMode={type:"box",ignoreSize:!0},t.defaultOption={show:!0,z:6,orient:"horizontal",left:"right",top:"top",backgroundColor:"transparent",borderColor:"#ccc",borderRadius:0,borderWidth:0,padding:5,itemSize:15,itemGap:8,showTitle:!0,iconStyle:{borderColor:"#666",color:"none"},emphasis:{iconStyle:{borderColor:"#3E98C5"}},tooltip:{show:!1,position:"bottom"}},t}(vr);function rVe(e,t,r){var i=t.getBoxLayoutParams(),n=t.get("padding"),a={width:r.getWidth(),height:r.getHeight()},o=zn(i,a,n);xv(t.get("orient"),e,t.get("itemGap"),o.width,o.height),PC(e,i,a,n)}function gfe(e,t){var r=Py(t.get("padding")),i=t.getItemStyle(["color","opacity"]);return i.fill=t.get("backgroundColor"),e=new Tr({shape:{x:e.x-r[3],y:e.y-r[0],width:e.width+r[1]+r[3],height:e.height+r[0]+r[2],r:t.get("borderRadius")},style:i,silent:!0,z2:-1}),e}var iVe=function(e){_e(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.render=function(r,i,n,a){var o=this.group;if(o.removeAll(),!r.get("show"))return;var s=+r.get("itemSize"),l=r.get("orient")==="vertical",u=r.get("feature")||{},c=this._features||(this._features={}),h=[];q(u,function(p,v){h.push(v)}),new yd(this._featureNames||[],h).add(d).update(d).remove(kt(d,null)).execute(),this._featureNames=h;function d(p,v){var m=h[p],g=h[v],y=u[m],x=new Qr(y,r,r.ecModel),b;if(a&&a.newTitle!=null&&a.featureName===m&&(y.title=a.newTitle),m&&!g){if(nVe(m))b={onclick:x.option.onclick,featureName:m};else{var _=mfe(m);if(!_)return;b=new _}c[m]=b}else if(b=c[g],!b)return;b.uid=Ty("toolbox-feature"),b.model=x,b.ecModel=i,b.api=n;var w=b instanceof _l;if(!m&&g){w&&b.dispose&&b.dispose(i,n);return}if(!x.get("show")||w&&b.unusable){w&&b.remove&&b.remove(i,n);return}f(x,b,m),x.setIconStatus=function(S,A){var M=this.option,E=this.iconPaths;M.iconStatus=M.iconStatus||{},M.iconStatus[S]=A,E[S]&&(A==="emphasis"?md:gd)(E[S])},b instanceof _l&&b.render&&b.render(x,i,n,a)}function f(p,v,m){var g=p.getModel("iconStyle"),y=p.getModel(["emphasis","iconStyle"]),x=v instanceof _l&&v.getIcons?v.getIcons():p.get("icon"),b=p.get("title")||{},_,w;it(x)?(_={},_[m]=x):_=x,it(b)?(w={},w[m]=b):w=b;var S=p.iconPaths={};q(_,function(A,M){var E=p4(A,{},{x:-s/2,y:-s/2,width:s,height:s});E.setStyle(g.getItemStyle());var T=E.ensureState("emphasis");T.style=y.getItemStyle();var L=new Dr({style:{text:w[M],align:y.get("textAlign"),borderRadius:y.get("textBorderRadius"),padding:y.get("textPadding"),fill:null,font:mN({fontStyle:y.get("textFontStyle"),fontFamily:y.get("textFontFamily"),fontSize:y.get("textFontSize"),fontWeight:y.get("textFontWeight")},i)},ignore:!0});E.setTextContent(L),Ey({el:E,componentModel:r,itemName:M,formatterParamsExtra:{title:w[M]}}),E.__title=w[M],E.on("mouseover",function(){var P=y.getItemStyle(),C=l?r.get("right")==null&&r.get("left")!=="right"?"right":"left":r.get("bottom")==null&&r.get("top")!=="bottom"?"bottom":"top";L.setStyle({fill:y.get("textFill")||P.fill||P.stroke||"#000",backgroundColor:y.get("textBackgroundColor")}),E.setTextConfig({position:y.get("textPosition")||C}),L.ignore=!r.get("showTitle"),n.enterEmphasis(this)}).on("mouseout",function(){p.get(["iconStatus",M])!=="emphasis"&&n.leaveEmphasis(this),L.hide()}),(p.get(["iconStatus",M])==="emphasis"?md:gd)(E),o.add(E),E.on("click",at(v.onclick,v,i,n,M)),S[M]=E})}rVe(o,r,n),o.add(gfe(o.getBoundingRect(),r)),l||o.eachChild(function(p){var v=p.__title,m=p.ensureState("emphasis"),g=m.textConfig||(m.textConfig={}),y=p.getTextContent(),x=y&&y.ensureState("emphasis");if(x&&!xt(x)&&v){var b=x.style||(x.style={}),_=l4(v,Dr.makeFont(b)),w=p.x+o.x,S=p.y+o.y+s,A=!1;S+_.height>n.getHeight()&&(g.position="top",A=!0);var M=A?-5-_.height:s+10;w+_.width/2>n.getWidth()?(g.position=["100%",M],b.align="right"):w-_.width/2<0&&(g.position=[0,M],b.align="left")}})},t.prototype.updateView=function(r,i,n,a){q(this._features,function(o){o instanceof _l&&o.updateView&&o.updateView(o.model,i,n,a)})},t.prototype.remove=function(r,i){q(this._features,function(n){n instanceof _l&&n.remove&&n.remove(r,i)}),this.group.removeAll()},t.prototype.dispose=function(r,i){q(this._features,function(n){n instanceof _l&&n.dispose&&n.dispose(r,i)})},t.type="toolbox",t}(Gi);function nVe(e){return e.indexOf("my")===0}var aVe=function(e){_e(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.onclick=function(r,i){var n=this.model,a=n.get("name")||r.get("title.0.text")||"echarts",o=i.getZr().painter.getType()==="svg",s=o?"svg":n.get("type",!0)||"png",l=i.getConnectedDataURL({type:s,backgroundColor:n.get("backgroundColor",!0)||r.get("backgroundColor")||"#fff",connectedBackgroundColor:n.get("connectedBackgroundColor"),excludeComponents:n.get("excludeComponents"),pixelRatio:n.get("pixelRatio")}),u=hr.browser;if(typeof MouseEvent=="function"&&(u.newEdge||!u.ie&&!u.edge)){var c=document.createElement("a");c.download=a+"."+s,c.target="_blank",c.href=l;var h=new MouseEvent("click",{view:document.defaultView,bubbles:!0,cancelable:!1});c.dispatchEvent(h)}else if(window.navigator.msSaveOrOpenBlob||o){var d=l.split(","),f=d[0].indexOf("base64")>-1,p=o?decodeURIComponent(d[1]):d[1];f&&(p=window.atob(p));var v=a+"."+s;if(window.navigator.msSaveOrOpenBlob){for(var m=p.length,g=new Uint8Array(m);m--;)g[m]=p.charCodeAt(m);var y=new Blob([g]);window.navigator.msSaveOrOpenBlob(y,v)}else{var x=document.createElement("iframe");document.body.appendChild(x);var b=x.contentWindow,_=b.document;_.open("image/svg+xml","replace"),_.write(p),_.close(),b.focus(),_.execCommand("SaveAs",!0,v),document.body.removeChild(x)}}else{var w=n.get("lang"),S='<body style="margin:0;"><img src="'+l+'" style="max-width:100%;" title="'+(w&&w[0]||"")+'" /></body>',A=window.open();A.document.write(S),A.document.title=a}},t.getDefaultOption=function(r){var i={show:!0,icon:"M4.7,22.9L29.3,45.5L54.7,23.4M4.6,43.6L4.6,58L53.8,58L53.8,43.6M29.2,45.1L29.2,0",title:r.getLocaleModel().get(["toolbox","saveAsImage","title"]),type:"png",connectedBackgroundColor:"#fff",name:"",excludeComponents:["toolbox"],lang:r.getLocaleModel().get(["toolbox","saveAsImage","lang"])};return i},t}(_l),HX="__ec_magicType_stack__",oVe=[["line","bar"],["stack"]],sVe=function(e){_e(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.getIcons=function(){var r=this.model,i=r.get("icon"),n={};return q(r.get("type"),function(a){i[a]&&(n[a]=i[a])}),n},t.getDefaultOption=function(r){var i={show:!0,type:[],icon:{line:"M4.1,28.9h7.1l9.3-22l7.4,38l9.7-19.7l3,12.8h14.9M4.1,58h51.4",bar:"M6.7,22.9h10V48h-10V22.9zM24.9,13h10v35h-10V13zM43.2,2h10v46h-10V2zM3.1,58h53.7",stack:"M8.2,38.4l-8.4,4.1l30.6,15.3L60,42.5l-8.1-4.1l-21.5,11L8.2,38.4z M51.9,30l-8.1,4.2l-13.4,6.9l-13.9-6.9L8.2,30l-8.4,4.2l8.4,4.2l22.2,11l21.5-11l8.1-4.2L51.9,30z M51.9,21.7l-8.1,4.2L35.7,30l-5.3,2.8L24.9,30l-8.4-4.1l-8.3-4.2l-8.4,4.2L8.2,30l8.3,4.2l13.9,6.9l13.4-6.9l8.1-4.2l8.1-4.1L51.9,21.7zM30.4,2.2L-0.2,17.5l8.4,4.1l8.3,4.2l8.4,4.2l5.5,2.7l5.3-2.7l8.1-4.2l8.1-4.2l8.1-4.1L30.4,2.2z"},title:r.getLocaleModel().get(["toolbox","magicType","title"]),option:{},seriesIndex:{}};return i},t.prototype.onclick=function(r,i,n){var a=this.model,o=a.get(["seriesIndex",n]);if(UX[n]){var s={series:[]},l=function(h){var d=h.subType,f=h.id,p=UX[n](d,f,h,a);p&&(bt(p,h.option),s.series.push(p));var v=h.coordinateSystem;if(v&&v.type==="cartesian2d"&&(n==="line"||n==="bar")){var m=v.getAxesByScale("ordinal")[0];if(m){var g=m.dim,y=g+"Axis",x=h.getReferringComponents(y,wn).models[0],b=x.componentIndex;s[y]=s[y]||[];for(var _=0;_<=b;_++)s[y][b]=s[y][b]||{};s[y][b].boundaryGap=n==="bar"}}};q(oVe,function(h){tr(h,n)>=0&&q(h,function(d){a.setIconStatus(d,"normal")})}),a.setIconStatus(n,"emphasis"),r.eachComponent({mainType:"series",query:o==null?null:{seriesIndex:o}},l);var u,c=n;n==="stack"&&(u=Wt({stack:a.option.title.tiled,tiled:a.option.title.stack},a.option.title),a.get(["iconStatus",n])!=="emphasis"&&(c="tiled")),i.dispatchAction({type:"changeMagicType",currentType:c,newOption:s,newTitle:u,featureName:"magicType"})}},t}(_l),UX={line:function(e,t,r,i){if(e==="bar")return Wt({id:t,type:"line",data:r.get("data"),stack:r.get("stack"),markPoint:r.get("markPoint"),markLine:r.get("markLine")},i.get(["option","line"])||{},!0)},bar:function(e,t,r,i){if(e==="line")return Wt({id:t,type:"bar",data:r.get("data"),stack:r.get("stack"),markPoint:r.get("markPoint"),markLine:r.get("markLine")},i.get(["option","bar"])||{},!0)},stack:function(e,t,r,i){var n=r.get("stack")===HX;if(e==="line"||e==="bar")return i.setIconStatus("stack",n?"normal":"emphasis"),Wt({id:t,stack:n?"":HX},i.get(["option","stack"])||{},!0)}};uh({type:"changeMagicType",event:"magicTypeChanged",update:"prepareAndUpdate"},function(e,t){t.mergeOption(e.newOption)});var qC=new Array(60).join("-"),q1="	";function lVe(e){var t={},r=[],i=[];return e.eachRawSeries(function(n){var a=n.coordinateSystem;if(a&&(a.type==="cartesian2d"||a.type==="polar")){var o=a.getBaseAxis();if(o.type==="category"){var s=o.dim+"_"+o.index;t[s]||(t[s]={categoryAxis:o,valueAxis:a.getOtherAxis(o),series:[]},i.push({axisDim:o.dim,axisIndex:o.index})),t[s].series.push(n)}else r.push(n)}else r.push(n)}),{seriesGroupByCategoryAxis:t,other:r,meta:i}}function uVe(e){var t=[];return q(e,function(r,i){var n=r.categoryAxis,a=r.valueAxis,o=a.dim,s=[" "].concat(qe(r.series,function(f){return f.name})),l=[n.model.getCategories()];q(r.series,function(f){var p=f.getRawData();l.push(f.getRawData().mapArray(p.mapDimension(o),function(v){return v}))});for(var u=[s.join(q1)],c=0;c<l[0].length;c++){for(var h=[],d=0;d<l.length;d++)h.push(l[d][c]);u.push(h.join(q1))}t.push(u.join(`
`))}),t.join(`

`+qC+`

`)}function cVe(e){return qe(e,function(t){var r=t.getRawData(),i=[t.name],n=[];return r.each(r.dimensions,function(){for(var a=arguments.length,o=arguments[a-1],s=r.getName(o),l=0;l<a-1;l++)n[l]=arguments[l];i.push((s?s+q1:"")+n.join(q1))}),i.join(`
`)}).join(`

`+qC+`

`)}function hVe(e){var t=lVe(e);return{value:ni([uVe(t.seriesGroupByCategoryAxis),cVe(t.other)],function(r){return!!r.replace(/[\n\t\s]/g,"")}).join(`

`+qC+`

`),meta:t.meta}}function cS(e){return e.replace(/^\s\s*/,"").replace(/\s\s*$/,"")}function dVe(e){var t=e.slice(0,e.indexOf(`
`));if(t.indexOf(q1)>=0)return!0}var ck=new RegExp("["+q1+"]+","g");function fVe(e){for(var t=e.split(/\n+/g),r=cS(t.shift()).split(ck),i=[],n=qe(r,function(l){return{name:l,data:[]}}),a=0;a<t.length;a++){var o=cS(t[a]).split(ck);i.push(o.shift());for(var s=0;s<o.length;s++)n[s]&&(n[s].data[a]=o[s])}return{series:n,categories:i}}function pVe(e){for(var t=e.split(/\n+/g),r=cS(t.shift()),i=[],n=0;n<t.length;n++){var a=cS(t[n]);if(a){var o=a.split(ck),s="",l=void 0,u=!1;isNaN(o[0])?(u=!0,s=o[0],o=o.slice(1),i[n]={name:s,value:[]},l=i[n].value):l=i[n]=[];for(var c=0;c<o.length;c++)l.push(+o[c]);l.length===1&&(u?i[n].value=l[0]:i[n]=l[0])}}return{name:r,data:i}}function vVe(e,t){var r=e.split(new RegExp(`
*`+qC+`
*`,"g")),i={series:[]};return q(r,function(n,a){if(dVe(n)){var o=fVe(n),s=t[a],l=s.axisDim+"Axis";s&&(i[l]=i[l]||[],i[l][s.axisIndex]={data:o.categories},i.series=i.series.concat(o.series))}else{var o=pVe(n);i.series.push(o)}}),i}var mVe=function(e){_e(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.onclick=function(r,i){setTimeout(function(){i.dispatchAction({type:"hideTip"})});var n=i.getDom(),a=this.model;this._dom&&n.removeChild(this._dom);var o=document.createElement("div");o.style.cssText="position:absolute;top:0;bottom:0;left:0;right:0;padding:5px",o.style.backgroundColor=a.get("backgroundColor")||"#fff";var s=document.createElement("h4"),l=a.get("lang")||[];s.innerHTML=l[0]||a.get("title"),s.style.cssText="margin:10px 20px",s.style.color=a.get("textColor");var u=document.createElement("div"),c=document.createElement("textarea");u.style.cssText="overflow:auto";var h=a.get("optionToContent"),d=a.get("contentToOption"),f=hVe(r);if(xt(h)){var p=h(i.getOption());it(p)?u.innerHTML=p:B1(p)&&u.appendChild(p)}else{c.readOnly=a.get("readOnly");var v=c.style;v.cssText="display:block;width:100%;height:100%;font-family:monospace;font-size:14px;line-height:1.6rem;resize:none;box-sizing:border-box;outline:none",v.color=a.get("textColor"),v.borderColor=a.get("textareaBorderColor"),v.backgroundColor=a.get("textareaColor"),c.value=f.value,u.appendChild(c)}var m=f.meta,g=document.createElement("div");g.style.cssText="position:absolute;bottom:5px;left:0;right:0";var y="float:right;margin-right:20px;border:none;cursor:pointer;padding:2px 5px;font-size:12px;border-radius:3px",x=document.createElement("div"),b=document.createElement("div");y+=";background-color:"+a.get("buttonColor"),y+=";color:"+a.get("buttonTextColor");var _=this;function w(){n.removeChild(o),_._dom=null}UI(x,"click",w),UI(b,"click",function(){if(d==null&&h!=null||d!=null&&h==null){w();return}var S;try{xt(d)?S=d(u,i.getOption()):S=vVe(c.value,m)}catch(A){throw w(),new Error("Data view format error "+A)}S&&i.dispatchAction({type:"changeDataView",newOption:S}),w()}),x.innerHTML=l[1],b.innerHTML=l[2],b.style.cssText=x.style.cssText=y,!a.get("readOnly")&&g.appendChild(b),g.appendChild(x),o.appendChild(s),o.appendChild(u),o.appendChild(g),u.style.height=n.clientHeight-80+"px",n.appendChild(o),this._dom=o},t.prototype.remove=function(r,i){this._dom&&i.getDom().removeChild(this._dom)},t.prototype.dispose=function(r,i){this.remove(r,i)},t.getDefaultOption=function(r){var i={show:!0,readOnly:!1,optionToContent:null,contentToOption:null,icon:"M17.5,17.3H33 M17.5,17.3H33 M45.4,29.5h-28 M11.5,2v56H51V14.8L38.4,2H11.5z M38.4,2.2v12.7H51 M45.4,41.7h-28",title:r.getLocaleModel().get(["toolbox","dataView","title"]),lang:r.getLocaleModel().get(["toolbox","dataView","lang"]),backgroundColor:"#fff",textColor:"#000",textareaColor:"#fff",textareaBorderColor:"#333",buttonColor:"#c23531",buttonTextColor:"#fff"};return i},t}(_l);function gVe(e,t){return qe(e,function(r,i){var n=t&&t[i];if(_t(n)&&!Ue(n)){var a=_t(r)&&!Ue(r);a||(r={value:r});var o=n.name!=null&&r.name==null;return r=bt(r,n),o&&delete r.name,r}else return r})}uh({type:"changeDataView",event:"dataViewChanged",update:"prepareAndUpdate"},function(e,t){var r=[];q(e.newOption.series,function(i){var n=t.getSeriesByName(i.name)[0];if(!n)r.push(Be({type:"scatter"},i));else{var a=n.get("data");r.push({name:i.name,data:gVe(i.data,a)})}}),t.mergeOption(bt({series:r},e.newOption))});var yfe=q,xfe=Pr();function yVe(e,t){var r=FV(e);yfe(t,function(i,n){for(var a=r.length-1;a>=0;a--){var o=r[a];if(o[n])break}if(a<0){var s=e.queryComponents({mainType:"dataZoom",subType:"select",id:n})[0];if(s){var l=s.getPercentRange();r[0][n]={dataZoomId:n,start:l[0],end:l[1]}}}}),r.push(t)}function xVe(e){var t=FV(e),r=t[t.length-1];t.length>1&&t.pop();var i={};return yfe(r,function(n,a){for(var o=t.length-1;o>=0;o--)if(n=t[o][a],n){i[a]=n;break}}),i}function bVe(e){xfe(e).snapshots=null}function wVe(e){return FV(e).length}function FV(e){var t=xfe(e);return t.snapshots||(t.snapshots=[{}]),t.snapshots}var _Ve=function(e){_e(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.onclick=function(r,i){bVe(r),i.dispatchAction({type:"restore",from:this.uid})},t.getDefaultOption=function(r){var i={show:!0,icon:"M3.8,33.4 M47,18.9h9.8V8.7 M56.3,20.1 C52.1,9,40.5,0.6,26.8,2.1C12.6,3.7,1.6,16.2,2.1,30.6 M13,41.1H3.1v10.2 M3.7,39.9c4.2,11.1,15.8,19.5,29.5,18 c14.2-1.6,25.2-14.1,24.7-28.5",title:r.getLocaleModel().get(["toolbox","restore","title"])};return i},t}(_l);uh({type:"restore",event:"restore",update:"prepareAndUpdate"},function(e,t){t.resetOption("recreate")});var AVe=["grid","xAxis","yAxis","geo","graph","polar","radiusAxis","angleAxis","bmap"],zV=function(){function e(t,r,i){var n=this;this._targetInfoList=[];var a=GX(r,t);q(SVe,function(o,s){(!i||!i.include||tr(i.include,s)>=0)&&o(a,n._targetInfoList)})}return e.prototype.setOutputRanges=function(t,r){return this.matchOutputRanges(t,r,function(i,n,a){if((i.coordRanges||(i.coordRanges=[])).push(n),!i.coordRange){i.coordRange=n;var o=AT[i.brushType](0,a,n);i.__rangeOffset={offset:YX[i.brushType](o.values,i.range,[1,1]),xyMinMax:o.xyMinMax}}}),t},e.prototype.matchOutputRanges=function(t,r,i){q(t,function(n){var a=this.findTargetInfo(n,r);a&&a!==!0&&q(a.coordSyses,function(o){var s=AT[n.brushType](1,o,n.range,!0);i(n,s.values,o,r)})},this)},e.prototype.setInputRanges=function(t,r){q(t,function(i){var n=this.findTargetInfo(i,r);if(i.range=i.range||[],n&&n!==!0){i.panelId=n.panelId;var a=AT[i.brushType](0,n.coordSys,i.coordRange),o=i.__rangeOffset;i.range=o?YX[i.brushType](a.values,o.offset,CVe(a.xyMinMax,o.xyMinMax)):a.values}},this)},e.prototype.makePanelOpts=function(t,r){return qe(this._targetInfoList,function(i){var n=i.getPanelRect();return{panelId:i.panelId,defaultBrushType:r?r(i):null,clipPath:Mde(n),isTargetByCursor:Pde(n,t,i.coordSysModel),getLinearBrushOtherExtent:Tde(n)}})},e.prototype.controlSeries=function(t,r,i){var n=this.findTargetInfo(t,i);return n===!0||n&&tr(n.coordSyses,r.coordinateSystem)>=0},e.prototype.findTargetInfo=function(t,r){for(var i=this._targetInfoList,n=GX(r,t),a=0;a<i.length;a++){var o=i[a],s=t.panelId;if(s){if(o.panelId===s)return o}else for(var l=0;l<jX.length;l++)if(jX[l](n,o))return o}return!0},e}();function hk(e){return e[0]>e[1]&&e.reverse(),e}function GX(e,t){return lb(e,t,{includeMainTypes:AVe})}var SVe={grid:function(e,t){var r=e.xAxisModels,i=e.yAxisModels,n=e.gridModels,a=dt(),o={},s={};!r&&!i&&!n||(q(r,function(l){var u=l.axis.grid.model;a.set(u.id,u),o[u.id]=!0}),q(i,function(l){var u=l.axis.grid.model;a.set(u.id,u),s[u.id]=!0}),q(n,function(l){a.set(l.id,l),o[l.id]=!0,s[l.id]=!0}),a.each(function(l){var u=l.coordinateSystem,c=[];q(u.getCartesians(),function(h,d){(tr(r,h.getAxis("x").model)>=0||tr(i,h.getAxis("y").model)>=0)&&c.push(h)}),t.push({panelId:"grid--"+l.id,gridModel:l,coordSysModel:l,coordSys:c[0],coordSyses:c,getPanelRect:WX.grid,xAxisDeclared:o[l.id],yAxisDeclared:s[l.id]})}))},geo:function(e,t){q(e.geoModels,function(r){var i=r.coordinateSystem;t.push({panelId:"geo--"+r.id,geoModel:r,coordSysModel:r,coordSys:i,coordSyses:[i],getPanelRect:WX.geo})})}},jX=[function(e,t){var r=e.xAxisModel,i=e.yAxisModel,n=e.gridModel;return!n&&r&&(n=r.axis.grid.model),!n&&i&&(n=i.axis.grid.model),n&&n===t.gridModel},function(e,t){var r=e.geoModel;return r&&r===t.geoModel}],WX={grid:function(){return this.coordSys.master.getRect().clone()},geo:function(){var e=this.coordSys,t=e.getBoundingRect().clone();return t.applyTransform(yv(e)),t}},AT={lineX:kt(qX,0),lineY:kt(qX,1),rect:function(e,t,r,i){var n=e?t.pointToData([r[0][0],r[1][0]],i):t.dataToPoint([r[0][0],r[1][0]],i),a=e?t.pointToData([r[0][1],r[1][1]],i):t.dataToPoint([r[0][1],r[1][1]],i),o=[hk([n[0],a[0]]),hk([n[1],a[1]])];return{values:o,xyMinMax:o}},polygon:function(e,t,r,i){var n=[[1/0,-1/0],[1/0,-1/0]],a=qe(r,function(o){var s=e?t.pointToData(o,i):t.dataToPoint(o,i);return n[0][0]=Math.min(n[0][0],s[0]),n[1][0]=Math.min(n[1][0],s[1]),n[0][1]=Math.max(n[0][1],s[0]),n[1][1]=Math.max(n[1][1],s[1]),s});return{values:a,xyMinMax:n}}};function qX(e,t,r,i){var n=r.getAxis(["x","y"][e]),a=hk(qe([0,1],function(s){return t?n.coordToData(n.toLocalCoord(i[s]),!0):n.toGlobalCoord(n.dataToCoord(i[s]))})),o=[];return o[e]=a,o[1-e]=[NaN,NaN],{values:a,xyMinMax:o}}var YX={lineX:kt(XX,0),lineY:kt(XX,1),rect:function(e,t,r){return[[e[0][0]-r[0]*t[0][0],e[0][1]-r[0]*t[0][1]],[e[1][0]-r[1]*t[1][0],e[1][1]-r[1]*t[1][1]]]},polygon:function(e,t,r){return qe(e,function(i,n){return[i[0]-r[0]*t[n][0],i[1]-r[1]*t[n][1]]})}};function XX(e,t,r,i){return[t[0]-i[e]*r[0],t[1]-i[e]*r[1]]}function CVe(e,t){var r=ZX(e),i=ZX(t),n=[r[0]/i[0],r[1]/i[1]];return isNaN(n[0])&&(n[0]=1),isNaN(n[1])&&(n[1]=1),n}function ZX(e){return e?[e[0][1]-e[0][0],e[1][1]-e[1][0]]:[NaN,NaN]}var dk=q,EVe=BSe("toolbox-dataZoom_"),MVe=function(e){_e(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.render=function(r,i,n,a){this._brushController||(this._brushController=new vV(n.getZr()),this._brushController.on("brush",at(this._onBrush,this)).mount()),DVe(r,i,this,a,n),PVe(r,i)},t.prototype.onclick=function(r,i,n){TVe[n].call(this)},t.prototype.remove=function(r,i){this._brushController&&this._brushController.unmount()},t.prototype.dispose=function(r,i){this._brushController&&this._brushController.dispose()},t.prototype._onBrush=function(r){var i=r.areas;if(!r.isEnd||!i.length)return;var n={},a=this.ecModel;this._brushController.updateCovers([]);var o=new zV(HV(this.model),a,{include:["grid"]});o.matchOutputRanges(i,a,function(u,c,h){if(h.type==="cartesian2d"){var d=u.brushType;d==="rect"?(s("x",h,c[0]),s("y",h,c[1])):s({lineX:"x",lineY:"y"}[d],h,c)}}),yVe(a,n),this._dispatchZoomAction(n);function s(u,c,h){var d=c.getAxis(u),f=d.model,p=l(u,f,a),v=p.findRepresentativeAxisProxy(f).getMinMaxSpan();(v.minValueSpan!=null||v.maxValueSpan!=null)&&(h=nm(0,h.slice(),d.scale.getExtent(),0,v.minValueSpan,v.maxValueSpan)),p&&(n[p.id]={dataZoomId:p.id,startValue:h[0],endValue:h[1]})}function l(u,c,h){var d;return h.eachComponent({mainType:"dataZoom",subType:"select"},function(f){var p=f.getAxisModel(u,c.componentIndex);p&&(d=f)}),d}},t.prototype._dispatchZoomAction=function(r){var i=[];dk(r,function(n,a){i.push(At(n))}),i.length&&this.api.dispatchAction({type:"dataZoom",from:this.uid,batch:i})},t.getDefaultOption=function(r){var i={show:!0,filterMode:"filter",icon:{zoom:"M0,13.5h26.9 M13.5,26.9V0 M32.1,13.5H58V58H13.5 V32.1",back:"M22,1.4L9.9,13.5l12.3,12.3 M10.3,13.5H54.9v44.6 H10.3v-26"},title:r.getLocaleModel().get(["toolbox","dataZoom","title"]),brushStyle:{borderWidth:0,color:"rgba(210,219,238,0.2)"}};return i},t}(_l),TVe={zoom:function(){var e=!this._isZoomActive;this.api.dispatchAction({type:"takeGlobalCursor",key:"dataZoomSelect",dataZoomSelectActive:e})},back:function(){this._dispatchZoomAction(xVe(this.ecModel))}};function HV(e){var t={xAxisIndex:e.get("xAxisIndex",!0),yAxisIndex:e.get("yAxisIndex",!0),xAxisId:e.get("xAxisId",!0),yAxisId:e.get("yAxisId",!0)};return t.xAxisIndex==null&&t.xAxisId==null&&(t.xAxisIndex="all"),t.yAxisIndex==null&&t.yAxisId==null&&(t.yAxisIndex="all"),t}function PVe(e,t){e.setIconStatus("back",wVe(t)>1?"emphasis":"normal")}function DVe(e,t,r,i,n){var a=r._isZoomActive;i&&i.type==="takeGlobalCursor"&&(a=i.key==="dataZoomSelect"?i.dataZoomSelectActive:!1),r._isZoomActive=a,e.setIconStatus("zoom",a?"emphasis":"normal");var o=new zV(HV(e),t,{include:["grid"]}),s=o.makePanelOpts(n,function(l){return l.xAxisDeclared&&!l.yAxisDeclared?"lineX":!l.xAxisDeclared&&l.yAxisDeclared?"lineY":"rect"});r._brushController.setPanels(s).enableBrush(a&&s.length?{brushType:"auto",brushStyle:e.getModel("brushStyle").getItemStyle()}:!1)}s7e("dataZoom",function(e){var t=e.getComponent("toolbox",0),r=["feature","dataZoom"];if(!t||t.get(r)==null)return;var i=t.getModel(r),n=[],a=HV(i),o=lb(e,a);dk(o.xAxisModels,function(l){return s(l,"xAxis","xAxisIndex")}),dk(o.yAxisModels,function(l){return s(l,"yAxis","yAxisIndex")});function s(l,u,c){var h=l.componentIndex,d={type:"select",$fromToolbox:!0,filterMode:i.get("filterMode",!0)||"filter",id:EVe+u+h};d[c]=h,n.push(d)}return n});function IVe(e){e.registerComponentModel(tVe),e.registerComponentView(iVe),Tg("saveAsImage",aVe),Tg("magicType",sVe),Tg("dataView",mVe),Tg("dataZoom",MVe),Tg("restore",_Ve),ir(eVe)}var LVe=function(e){_e(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r}return t.type="tooltip",t.dependencies=["axisPointer"],t.defaultOption={z:60,show:!0,showContent:!0,trigger:"item",triggerOn:"mousemove|click",alwaysShowContent:!1,displayMode:"single",renderMode:"auto",confine:null,showDelay:0,hideDelay:100,transitionDuration:.4,enterable:!1,backgroundColor:"#fff",shadowBlur:10,shadowColor:"rgba(0, 0, 0, .2)",shadowOffsetX:1,shadowOffsetY:2,borderRadius:4,borderWidth:1,padding:null,extraCssText:"",axisPointer:{type:"line",axis:"auto",animation:"auto",animationDurationUpdate:200,animationEasingUpdate:"exponentialOut",crossStyle:{color:"#999",width:1,type:"dashed",textStyle:{}}},textStyle:{color:"#666",fontSize:14}},t}(vr);function bfe(e){var t=e.get("confine");return t!=null?!!t:e.get("renderMode")==="richText"}function wfe(e){if(hr.domSupported){for(var t=document.documentElement.style,r=0,i=e.length;r<i;r++)if(e[r]in t)return e[r]}}var _fe=wfe(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),kVe=wfe(["webkitTransition","transition","OTransition","MozTransition","msTransition"]);function Afe(e,t){if(!e)return t;t=tue(t,!0);var r=e.indexOf(t);return e=r===-1?t:"-"+e.slice(0,r)+"-"+t,e.toLowerCase()}function RVe(e,t){var r=e.currentStyle||document.defaultView&&document.defaultView.getComputedStyle(e);return r?r[t]:null}var OVe=Afe(kVe,"transition"),UV=Afe(_fe,"transform"),BVe="position:absolute;display:block;border-style:solid;white-space:nowrap;z-index:9999999;"+(hr.transform3dSupported?"will-change:transform;":"");function NVe(e){return e=e==="left"?"right":e==="right"?"left":e==="top"?"bottom":"top",e}function VVe(e,t,r){if(!it(r)||r==="inside")return"";var i=e.get("backgroundColor"),n=e.get("borderWidth");t=Bv(t);var a=NVe(r),o=Math.max(Math.round(n)*1.5,6),s="",l=UV+":",u;tr(["left","right"],a)>-1?(s+="top:50%",l+="translateY(-50%) rotate("+(u=a==="left"?-225:-45)+"deg)"):(s+="left:50%",l+="translateX(-50%) rotate("+(u=a==="top"?225:45)+"deg)");var c=u*Math.PI/180,h=o+n,d=h*Math.abs(Math.cos(c))+h*Math.abs(Math.sin(c)),f=Math.round(((d-Math.SQRT2*n)/2+Math.SQRT2*n-(d-h)/2)*100)/100;s+=";"+a+":-"+f+"px";var p=t+" solid "+n+"px;",v=["position:absolute;width:"+o+"px;height:"+o+"px;z-index:-1;",s+";"+l+";","border-bottom:"+p,"border-right:"+p,"background-color:"+i+";"];return'<div style="'+v.join("")+'"></div>'}function FVe(e,t){var r="cubic-bezier(0.23,1,0.32,1)",i=" "+e/2+"s "+r,n="opacity"+i+",visibility"+i;return t||(i=" "+e+"s "+r,n+=hr.transformSupported?","+UV+i:",left"+i+",top"+i),OVe+":"+n}function QX(e,t,r){var i=e.toFixed(0)+"px",n=t.toFixed(0)+"px";if(!hr.transformSupported)return r?"top:"+n+";left:"+i+";":[["top",n],["left",i]];var a=hr.transform3dSupported,o="translate"+(a?"3d":"")+"("+i+","+n+(a?",0":"")+")";return r?"top:0;left:0;"+UV+":"+o+";":[["top",0],["left",0],[_fe,o]]}function zVe(e){var t=[],r=e.get("fontSize"),i=e.getTextColor();i&&t.push("color:"+i),t.push("font:"+e.getFont()),r&&t.push("line-height:"+Math.round(r*3/2)+"px");var n=e.get("textShadowColor"),a=e.get("textShadowBlur")||0,o=e.get("textShadowOffsetX")||0,s=e.get("textShadowOffsetY")||0;return n&&a&&t.push("text-shadow:"+o+"px "+s+"px "+a+"px "+n),q(["decoration","align"],function(l){var u=e.get(l);u&&t.push("text-"+l+":"+u)}),t.join(";")}function HVe(e,t,r){var i=[],n=e.get("transitionDuration"),a=e.get("backgroundColor"),o=e.get("shadowBlur"),s=e.get("shadowColor"),l=e.get("shadowOffsetX"),u=e.get("shadowOffsetY"),c=e.getModel("textStyle"),h=Oue(e,"html"),d=l+"px "+u+"px "+o+"px "+s;return i.push("box-shadow:"+d),t&&n&&i.push(FVe(n,r)),a&&i.push("background-color:"+a),q(["width","color","radius"],function(f){var p="border-"+f,v=tue(p),m=e.get(v);m!=null&&i.push(p+":"+m+(f==="color"?"":"px"))}),i.push(zVe(c)),h!=null&&i.push("padding:"+Py(h).join("px ")+"px"),i.join(";")+";"}function KX(e,t,r,i,n){var a=t&&t.painter;if(r){var o=a&&a.getViewportRoot();o&&p8e(e,o,r,i,n)}else{e[0]=i,e[1]=n;var s=a&&a.getViewportRootOffset();s&&(e[0]+=s.offsetLeft,e[1]+=s.offsetTop)}e[2]=e[0]/t.getWidth(),e[3]=e[1]/t.getHeight()}var UVe=function(){function e(t,r){if(this._show=!1,this._styleCoord=[0,0,0,0],this._enterable=!0,this._alwaysShowContent=!1,this._firstShow=!0,this._longHide=!0,hr.wxa)return null;var i=document.createElement("div");i.domBelongToZr=!0,this.el=i;var n=this._zr=t.getZr(),a=r.appendTo,o=a&&(it(a)?document.querySelector(a):B1(a)?a:xt(a)&&a(t.getDom()));KX(this._styleCoord,n,o,t.getWidth()/2,t.getHeight()/2),(o||t.getDom()).appendChild(i),this._api=t,this._container=o;var s=this;i.onmouseenter=function(){s._enterable&&(clearTimeout(s._hideTimeout),s._show=!0),s._inContent=!0},i.onmousemove=function(l){if(l=l||window.event,!s._enterable){var u=n.handler,c=n.painter.getViewportRoot();dl(c,l,!0),u.dispatch("mousemove",l)}},i.onmouseleave=function(){s._inContent=!1,s._enterable&&s._show&&s.hideLater(s._hideDelay)}}return e.prototype.update=function(t){if(!this._container){var r=this._api.getDom(),i=RVe(r,"position"),n=r.style;n.position!=="absolute"&&i!=="absolute"&&(n.position="relative")}var a=t.get("alwaysShowContent");a&&this._moveIfResized(),this._alwaysShowContent=a,this.el.className=t.get("className")||""},e.prototype.show=function(t,r){clearTimeout(this._hideTimeout),clearTimeout(this._longHideTimeout);var i=this.el,n=i.style,a=this._styleCoord;i.innerHTML?n.cssText=BVe+HVe(t,!this._firstShow,this._longHide)+QX(a[0],a[1],!0)+("border-color:"+Bv(r)+";")+(t.get("extraCssText")||"")+(";pointer-events:"+(this._enterable?"auto":"none")):n.display="none",this._show=!0,this._firstShow=!1,this._longHide=!1},e.prototype.setContent=function(t,r,i,n,a){var o=this.el;if(t==null){o.innerHTML="";return}var s="";if(it(a)&&i.get("trigger")==="item"&&!bfe(i)&&(s=VVe(i,n,a)),it(t))o.innerHTML=t+s;else if(t){o.innerHTML="",Ue(t)||(t=[t]);for(var l=0;l<t.length;l++)B1(t[l])&&t[l].parentNode!==o&&o.appendChild(t[l]);if(s&&o.childNodes.length){var u=document.createElement("div");u.innerHTML=s,o.appendChild(u)}}},e.prototype.setEnterable=function(t){this._enterable=t},e.prototype.getSize=function(){var t=this.el;return[t.offsetWidth,t.offsetHeight]},e.prototype.moveTo=function(t,r){var i=this._styleCoord;if(KX(i,this._zr,this._container,t,r),i[0]!=null&&i[1]!=null){var n=this.el.style,a=QX(i[0],i[1]);q(a,function(o){n[o[0]]=o[1]})}},e.prototype._moveIfResized=function(){var t=this._styleCoord[2],r=this._styleCoord[3];this.moveTo(t*this._zr.getWidth(),r*this._zr.getHeight())},e.prototype.hide=function(){var t=this,r=this.el.style;r.visibility="hidden",r.opacity="0",hr.transform3dSupported&&(r.willChange=""),this._show=!1,this._longHideTimeout=setTimeout(function(){return t._longHide=!0},500)},e.prototype.hideLater=function(t){this._show&&!(this._inContent&&this._enterable)&&!this._alwaysShowContent&&(t?(this._hideDelay=t,this._show=!1,this._hideTimeout=setTimeout(at(this.hide,this),t)):this.hide())},e.prototype.isShow=function(){return this._show},e.prototype.dispose=function(){clearTimeout(this._hideTimeout),clearTimeout(this._longHideTimeout);var t=this.el.parentNode;t&&t.removeChild(this.el),this.el=this._container=null},e}(),GVe=function(){function e(t){this._show=!1,this._styleCoord=[0,0,0,0],this._alwaysShowContent=!1,this._enterable=!0,this._zr=t.getZr(),$X(this._styleCoord,this._zr,t.getWidth()/2,t.getHeight()/2)}return e.prototype.update=function(t){var r=t.get("alwaysShowContent");r&&this._moveIfResized(),this._alwaysShowContent=r},e.prototype.show=function(){this._hideTimeout&&clearTimeout(this._hideTimeout),this.el.show(),this._show=!0},e.prototype.setContent=function(t,r,i,n,a){var o=this;_t(t)&&jr(""),this.el&&this._zr.remove(this.el);var s=i.getModel("textStyle");this.el=new Dr({style:{rich:r.richTextStyles,text:t,lineHeight:22,borderWidth:1,borderColor:n,textShadowColor:s.get("textShadowColor"),fill:i.get(["textStyle","color"]),padding:Oue(i,"richText"),verticalAlign:"top",align:"left"},z:i.get("z")}),q(["backgroundColor","borderRadius","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY"],function(u){o.el.style[u]=i.get(u)}),q(["textShadowBlur","textShadowOffsetX","textShadowOffsetY"],function(u){o.el.style[u]=s.get(u)||0}),this._zr.add(this.el);var l=this;this.el.on("mouseover",function(){l._enterable&&(clearTimeout(l._hideTimeout),l._show=!0),l._inContent=!0}),this.el.on("mouseout",function(){l._enterable&&l._show&&l.hideLater(l._hideDelay),l._inContent=!1})},e.prototype.setEnterable=function(t){this._enterable=t},e.prototype.getSize=function(){var t=this.el,r=this.el.getBoundingRect(),i=JX(t.style);return[r.width+i.left+i.right,r.height+i.top+i.bottom]},e.prototype.moveTo=function(t,r){var i=this.el;if(i){var n=this._styleCoord;$X(n,this._zr,t,r),t=n[0],r=n[1];var a=i.style,o=gf(a.borderWidth||0),s=JX(a);i.x=t+o+s.left,i.y=r+o+s.top,i.markRedraw()}},e.prototype._moveIfResized=function(){var t=this._styleCoord[2],r=this._styleCoord[3];this.moveTo(t*this._zr.getWidth(),r*this._zr.getHeight())},e.prototype.hide=function(){this.el&&this.el.hide(),this._show=!1},e.prototype.hideLater=function(t){this._show&&!(this._inContent&&this._enterable)&&!this._alwaysShowContent&&(t?(this._hideDelay=t,this._show=!1,this._hideTimeout=setTimeout(at(this.hide,this),t)):this.hide())},e.prototype.isShow=function(){return this._show},e.prototype.dispose=function(){this._zr.remove(this.el)},e}();function gf(e){return Math.max(0,e)}function JX(e){var t=gf(e.shadowBlur||0),r=gf(e.shadowOffsetX||0),i=gf(e.shadowOffsetY||0);return{left:gf(t-r),right:gf(t+r),top:gf(t-i),bottom:gf(t+i)}}function $X(e,t,r,i){e[0]=r,e[1]=i,e[2]=e[0]/t.getWidth(),e[3]=e[1]/t.getHeight()}var jVe=new Tr({shape:{x:-1,y:-1,width:2,height:2}}),WVe=function(e){_e(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r}return t.prototype.init=function(r,i){if(!(hr.node||!i.getDom())){var n=r.getComponent("tooltip"),a=this._renderMode=GSe(n.get("renderMode"));this._tooltipContent=a==="richText"?new GVe(i):new UVe(i,{appendTo:n.get("appendToBody",!0)?"body":n.get("appendTo",!0)})}},t.prototype.render=function(r,i,n){if(!(hr.node||!n.getDom())){this.group.removeAll(),this._tooltipModel=r,this._ecModel=i,this._api=n;var a=this._tooltipContent;a.update(r),a.setEnterable(r.get("enterable")),this._initGlobalListener(),this._keepShow(),this._renderMode!=="richText"&&r.get("transitionDuration")?ky(this,"_updatePosition",50,"fixRate"):nw(this,"_updatePosition")}},t.prototype._initGlobalListener=function(){var r=this._tooltipModel,i=r.get("triggerOn");sfe("itemTooltip",this._api,at(function(n,a,o){i!=="none"&&(i.indexOf(n)>=0?this._tryShow(a,o):n==="leave"&&this._hide(o))},this))},t.prototype._keepShow=function(){var r=this._tooltipModel,i=this._ecModel,n=this._api,a=r.get("triggerOn");if(this._lastX!=null&&this._lastY!=null&&a!=="none"&&a!=="click"){var o=this;clearTimeout(this._refreshUpdateTimeout),this._refreshUpdateTimeout=setTimeout(function(){!n.isDisposed()&&o.manuallyShowTip(r,i,n,{x:o._lastX,y:o._lastY,dataByCoordSys:o._lastDataByCoordSys})})}},t.prototype.manuallyShowTip=function(r,i,n,a){if(!(a.from===this.uid||hr.node||!n.getDom())){var o=eZ(a,n);this._ticket="";var s=a.dataByCoordSys,l=ZVe(a,i,n);if(l){var u=l.el.getBoundingRect().clone();u.applyTransform(l.el.transform),this._tryShow({offsetX:u.x+u.width/2,offsetY:u.y+u.height/2,target:l.el,position:a.position,positionDefault:"bottom"},o)}else if(a.tooltip&&a.x!=null&&a.y!=null){var c=jVe;c.x=a.x,c.y=a.y,c.update(),Dt(c).tooltipConfig={name:null,option:a.tooltip},this._tryShow({offsetX:a.x,offsetY:a.y,target:c},o)}else if(s)this._tryShow({offsetX:a.x,offsetY:a.y,position:a.position,dataByCoordSys:s,tooltipOption:a.tooltipOption},o);else if(a.seriesIndex!=null){if(this._manuallyAxisShowTip(r,i,n,a))return;var h=lfe(a,i),d=h.point[0],f=h.point[1];d!=null&&f!=null&&this._tryShow({offsetX:d,offsetY:f,target:h.el,position:a.position,positionDefault:"bottom"},o)}else a.x!=null&&a.y!=null&&(n.dispatchAction({type:"updateAxisPointer",x:a.x,y:a.y}),this._tryShow({offsetX:a.x,offsetY:a.y,position:a.position,target:n.getZr().findHover(a.x,a.y).target},o))}},t.prototype.manuallyHideTip=function(r,i,n,a){var o=this._tooltipContent;this._tooltipModel&&o.hideLater(this._tooltipModel.get("hideDelay")),this._lastX=this._lastY=this._lastDataByCoordSys=null,a.from!==this.uid&&this._hide(eZ(a,n))},t.prototype._manuallyAxisShowTip=function(r,i,n,a){var o=a.seriesIndex,s=a.dataIndex,l=i.getComponent("axisPointer").coordSysAxesInfo;if(!(o==null||s==null||l==null)){var u=i.getSeriesByIndex(o);if(u){var c=u.getData(),h=N2([c.getItemModel(s),u,(u.coordinateSystem||{}).model],this._tooltipModel);if(h.get("trigger")==="axis")return n.dispatchAction({type:"updateAxisPointer",seriesIndex:o,dataIndex:s,position:a.position}),!0}}},t.prototype._tryShow=function(r,i){var n=r.target,a=this._tooltipModel;if(a){this._lastX=r.offsetX,this._lastY=r.offsetY;var o=r.dataByCoordSys;if(o&&o.length)this._showAxisTooltip(o,r);else if(n){var s=Dt(n);if(s.ssrType==="legend")return;this._lastDataByCoordSys=null;var l,u;q0(n,function(c){if(Dt(c).dataIndex!=null)return l=c,!0;if(Dt(c).tooltipConfig!=null)return u=c,!0},!0),l?this._showSeriesItemTooltip(r,l,i):u?this._showComponentItemTooltip(r,u,i):this._hide(i)}else this._lastDataByCoordSys=null,this._hide(i)}},t.prototype._showOrMove=function(r,i){var n=r.get("showDelay");i=at(i,this),clearTimeout(this._showTimout),n>0?this._showTimout=setTimeout(i,n):i()},t.prototype._showAxisTooltip=function(r,i){var n=this._ecModel,a=this._tooltipModel,o=[i.offsetX,i.offsetY],s=N2([i.tooltipOption],a),l=this._renderMode,u=[],c=na("section",{blocks:[],noHeader:!0}),h=[],d=new lM;q(r,function(y){q(y.dataByAxis,function(x){var b=n.getComponent(x.axisDim+"Axis",x.axisIndex),_=x.value;if(!(!b||_==null)){var w=nfe(_,b.axis,n,x.seriesDataIndices,x.valueLabelOpt),S=na("section",{header:w,noHeader:!fu(w),sortBlocks:!0,blocks:[]});c.blocks.push(S),q(x.seriesDataIndices,function(A){var M=n.getSeriesByIndex(A.seriesIndex),E=A.dataIndexInside,T=M.getDataParams(E);if(!(T.dataIndex<0)){T.axisDim=x.axisDim,T.axisIndex=x.axisIndex,T.axisType=x.axisType,T.axisId=x.axisId,T.axisValue=GN(b.axis,{value:_}),T.axisValueLabel=w,T.marker=d.makeTooltipMarker("item",Bv(T.color),l);var L=zj(M.formatTooltip(E,!0,null)),P=L.frag;if(P){var C=N2([M],a).get("valueFormatter");S.blocks.push(C?Be({valueFormatter:C},P):P)}L.text&&h.push(L.text),u.push(T)}})}})}),c.blocks.reverse(),h.reverse();var f=i.position,p=s.get("order"),v=qj(c,d,l,p,n.get("useUTC"),s.get("textStyle"));v&&h.unshift(v);var m=l==="richText"?`

`:"<br/>",g=h.join(m);this._showOrMove(s,function(){this._updateContentNotChangedOnAxis(r,u)?this._updatePosition(s,f,o[0],o[1],this._tooltipContent,u):this._showTooltipContent(s,g,u,Math.random()+"",o[0],o[1],f,null,d)})},t.prototype._showSeriesItemTooltip=function(r,i,n){var a=this._ecModel,o=Dt(i),s=o.seriesIndex,l=a.getSeriesByIndex(s),u=o.dataModel||l,c=o.dataIndex,h=o.dataType,d=u.getData(h),f=this._renderMode,p=r.positionDefault,v=N2([d.getItemModel(c),u,l&&(l.coordinateSystem||{}).model],this._tooltipModel,p?{position:p}:null),m=v.get("trigger");if(!(m!=null&&m!=="item")){var g=u.getDataParams(c,h),y=new lM;g.marker=y.makeTooltipMarker("item",Bv(g.color),f);var x=zj(u.formatTooltip(c,!1,h)),b=v.get("order"),_=v.get("valueFormatter"),w=x.frag,S=w?qj(_?Be({valueFormatter:_},w):w,y,f,b,a.get("useUTC"),v.get("textStyle")):x.text,A="item_"+u.name+"_"+c;this._showOrMove(v,function(){this._showTooltipContent(v,S,g,A,r.offsetX,r.offsetY,r.position,r.target,y)}),n({type:"showTip",dataIndexInside:c,dataIndex:d.getRawIndex(c),seriesIndex:s,from:this.uid})}},t.prototype._showComponentItemTooltip=function(r,i,n){var a=this._renderMode==="html",o=Dt(i),s=o.tooltipConfig,l=s.option||{},u=l.encodeHTMLContent;if(it(l)){var c=l;l={content:c,formatter:c},u=!0}u&&a&&l.content&&(l=At(l),l.content=ls(l.content));var h=[l],d=this._ecModel.getComponent(o.componentMainType,o.componentIndex);d&&h.push(d),h.push({formatter:l.content});var f=r.positionDefault,p=N2(h,this._tooltipModel,f?{position:f}:null),v=p.get("content"),m=Math.random()+"",g=new lM;this._showOrMove(p,function(){var y=At(p.get("formatterParams")||{});this._showTooltipContent(p,v,y,m,r.offsetX,r.offsetY,r.position,i,g)}),n({type:"showTip",from:this.uid})},t.prototype._showTooltipContent=function(r,i,n,a,o,s,l,u,c){if(this._ticket="",!(!r.get("showContent")||!r.get("show"))){var h=this._tooltipContent;h.setEnterable(r.get("enterable"));var d=r.get("formatter");l=l||r.get("position");var f=i,p=this._getNearestPoint([o,s],n,r.get("trigger"),r.get("borderColor")),v=p.color;if(d)if(it(d)){var m=r.ecModel.get("useUTC"),g=Ue(n)?n[0]:n,y=g&&g.axisType&&g.axisType.indexOf("time")>=0;f=d,y&&(f=SC(g.axisValue,f,m)),f=rue(f,n,!0)}else if(xt(d)){var x=at(function(b,_){b===this._ticket&&(h.setContent(_,c,r,v,l),this._updatePosition(r,l,o,s,h,n,u))},this);this._ticket=a,f=d(n,a,x)}else f=d;h.setContent(f,c,r,v,l),h.show(r,v),this._updatePosition(r,l,o,s,h,n,u)}},t.prototype._getNearestPoint=function(r,i,n,a){if(n==="axis"||Ue(i))return{color:a||(this._renderMode==="html"?"#fff":"none")};if(!Ue(i))return{color:a||i.color||i.borderColor}},t.prototype._updatePosition=function(r,i,n,a,o,s,l){var u=this._api.getWidth(),c=this._api.getHeight();i=i||r.get("position");var h=o.getSize(),d=r.get("align"),f=r.get("verticalAlign"),p=l&&l.getBoundingRect().clone();if(l&&p.applyTransform(l.transform),xt(i)&&(i=i([n,a],s,o.el,p,{viewSize:[u,c],contentSize:h.slice()})),Ue(i))n=et(i[0],u),a=et(i[1],c);else if(_t(i)){var v=i;v.width=h[0],v.height=h[1];var m=zn(v,{width:u,height:c});n=m.x,a=m.y,d=null,f=null}else if(it(i)&&l){var g=XVe(i,p,h,r.get("borderWidth"));n=g[0],a=g[1]}else{var g=qVe(n,a,o,u,c,d?null:20,f?null:20);n=g[0],a=g[1]}if(d&&(n-=tZ(d)?h[0]/2:d==="right"?h[0]:0),f&&(a-=tZ(f)?h[1]/2:f==="bottom"?h[1]:0),bfe(r)){var g=YVe(n,a,o,u,c);n=g[0],a=g[1]}o.moveTo(n,a)},t.prototype._updateContentNotChangedOnAxis=function(r,i){var n=this._lastDataByCoordSys,a=this._cbParamsList,o=!!n&&n.length===r.length;return o&&q(n,function(s,l){var u=s.dataByAxis||[],c=r[l]||{},h=c.dataByAxis||[];o=o&&u.length===h.length,o&&q(u,function(d,f){var p=h[f]||{},v=d.seriesDataIndices||[],m=p.seriesDataIndices||[];o=o&&d.value===p.value&&d.axisType===p.axisType&&d.axisId===p.axisId&&v.length===m.length,o&&q(v,function(g,y){var x=m[y];o=o&&g.seriesIndex===x.seriesIndex&&g.dataIndex===x.dataIndex}),a&&q(d.seriesDataIndices,function(g){var y=g.seriesIndex,x=i[y],b=a[y];x&&b&&b.data!==x.data&&(o=!1)})})}),this._lastDataByCoordSys=r,this._cbParamsList=i,!!o},t.prototype._hide=function(r){this._lastDataByCoordSys=null,r({type:"hideTip",from:this.uid})},t.prototype.dispose=function(r,i){hr.node||!i.getDom()||(nw(this,"_updatePosition"),this._tooltipContent.dispose(),sk("itemTooltip",i))},t.type="tooltip",t}(Gi);function N2(e,t,r){var i=t.ecModel,n;r?(n=new Qr(r,i,i),n=new Qr(t.option,n,i)):n=t;for(var a=e.length-1;a>=0;a--){var o=e[a];o&&(o instanceof Qr&&(o=o.get("tooltip",!0)),it(o)&&(o={formatter:o}),o&&(n=new Qr(o,n,i)))}return n}function eZ(e,t){return e.dispatchAction||at(t.dispatchAction,t)}function qVe(e,t,r,i,n,a,o){var s=r.getSize(),l=s[0],u=s[1];return a!=null&&(e+l+a+2>i?e-=l+a:e+=a),o!=null&&(t+u+o>n?t-=u+o:t+=o),[e,t]}function YVe(e,t,r,i,n){var a=r.getSize(),o=a[0],s=a[1];return e=Math.min(e+o,i)-o,t=Math.min(t+s,n)-s,e=Math.max(e,0),t=Math.max(t,0),[e,t]}function XVe(e,t,r,i){var n=r[0],a=r[1],o=Math.ceil(Math.SQRT2*i)+8,s=0,l=0,u=t.width,c=t.height;switch(e){case"inside":s=t.x+u/2-n/2,l=t.y+c/2-a/2;break;case"top":s=t.x+u/2-n/2,l=t.y-a-o;break;case"bottom":s=t.x+u/2-n/2,l=t.y+c+o;break;case"left":s=t.x-n-o,l=t.y+c/2-a/2;break;case"right":s=t.x+u+o,l=t.y+c/2-a/2}return[s,l]}function tZ(e){return e==="center"||e==="middle"}function ZVe(e,t,r){var i=iN(e).queryOptionMap,n=i.keys()[0];if(!(!n||n==="series")){var a=u4(t,n,i.get(n),{useDefault:!1,enableAll:!1,enableNone:!1}),o=a.models[0];if(o){var s=r.getViewOfComponentModel(o),l;if(s.group.traverse(function(u){var c=Dt(u).tooltipConfig;if(c&&c.name===e.name)return l=u,!0}),l)return{componentMainType:n,componentIndex:o.componentIndex,el:l}}}}function QVe(e){ir(M4),e.registerComponentModel(LVe),e.registerComponentView(WVe),e.registerAction({type:"showTip",event:"showTip",update:"tooltip:manuallyShowTip"},pn),e.registerAction({type:"hideTip",event:"hideTip",update:"tooltip:manuallyHideTip"},pn)}var KVe=["rect","polygon","keep","clear"];function JVe(e,t){var r=ci(e?e.brush:[]);if(r.length){var i=[];q(r,function(l){var u=l.hasOwnProperty("toolbox")?l.toolbox:[];u instanceof Array&&(i=i.concat(u))});var n=e&&e.toolbox;Ue(n)&&(n=n[0]),n||(n={feature:{}},e.toolbox=[n]);var a=n.feature||(n.feature={}),o=a.brush||(a.brush={}),s=o.type||(o.type=[]);s.push.apply(s,i),$Ve(s),t&&!s.length&&s.push.apply(s,KVe)}}function $Ve(e){var t={};q(e,function(r){t[r]=1}),e.length=0,q(t,function(r,i){e.push(i)})}var rZ=q;function iZ(e){if(e){for(var t in e)if(e.hasOwnProperty(t))return!0}}function fk(e,t,r){var i={};return rZ(t,function(a){var o=i[a]=n();rZ(e[a],function(s,l){if(ra.isValidType(l)){var u={type:l,visual:s};r&&r(u,a),o[l]=new ra(u),l==="opacity"&&(u=At(u),u.type="colorAlpha",o.__hidden.__alphaForOpacity=new ra(u))}})}),i;function n(){var a=function(){};a.prototype.__hidden=a.prototype;var o=new a;return o}}function Sfe(e,t,r){var i;q(r,function(n){t.hasOwnProperty(n)&&iZ(t[n])&&(i=!0)}),i&&q(r,function(n){t.hasOwnProperty(n)&&iZ(t[n])?e[n]=At(t[n]):delete e[n]})}function eFe(e,t,r,i,n,a){var o={};q(e,function(h){var d=ra.prepareVisualTypes(t[h]);o[h]=d});var s;function l(h){return LN(r,s,h)}function u(h,d){Wue(r,s,h,d)}r.each(c);function c(h,d){s=h;var f=r.getRawDataItem(s);if(!(f&&f.visualMap===!1))for(var p=i.call(n,h),v=t[p],m=o[p],g=0,y=m.length;g<y;g++){var x=m[g];v[x]&&v[x].applyVisual(h,l,u)}}}function tFe(e,t,r,i){var n={};return q(e,function(a){var o=ra.prepareVisualTypes(t[a]);n[a]=o}),{progress:function(o,s){var l;i!=null&&(l=s.getDimensionIndex(i));function u(_){return LN(s,h,_)}function c(_,w){Wue(s,h,_,w)}for(var h,d=s.getStore();(h=o.next())!=null;){var f=s.getRawDataItem(h);if(!(f&&f.visualMap===!1))for(var p=i!=null?d.get(l,h):h,v=r(p),m=t[v],g=n[v],y=0,x=g.length;y<x;y++){var b=g[y];m[b]&&m[b].applyVisual(p,u,c)}}}}}function rFe(e){var t=e.brushType,r={point:function(i){return nZ[t].point(i,r,e)},rect:function(i){return nZ[t].rect(i,r,e)}};return r}var nZ={lineX:aZ(0),lineY:aZ(1),rect:{point:function(e,t,r){return e&&r.boundingRect.contain(e[0],e[1])},rect:function(e,t,r){return e&&r.boundingRect.intersect(e)}},polygon:{point:function(e,t,r){return e&&r.boundingRect.contain(e[0],e[1])&&L0(r.range,e[0],e[1])},rect:function(e,t,r){var i=r.range;if(!e||i.length<=1)return!1;var n=e.x,a=e.y,o=e.width,s=e.height,l=i[0];if(L0(i,n,a)||L0(i,n+o,a)||L0(i,n,a+s)||L0(i,n+o,a+s)||qt.create(e).contain(l[0],l[1])||Lx(n,a,n+o,a,i)||Lx(n,a,n,a+s,i)||Lx(n+o,a,n+o,a+s,i)||Lx(n,a+s,n+o,a+s,i))return!0}}};function aZ(e){var t=["x","y"],r=["width","height"];return{point:function(i,n,a){if(i){var o=a.range,s=i[e];return V2(s,o)}},rect:function(i,n,a){if(i){var o=a.range,s=[i[t[e]],i[t[e]]+i[r[e]]];return s[1]<s[0]&&s.reverse(),V2(s[0],o)||V2(s[1],o)||V2(o[0],s)||V2(o[1],s)}}}}function V2(e,t){return t[0]<=e&&e<=t[1]}var oZ=["inBrush","outOfBrush"],ST="__ecBrushSelect",pk="__ecInBrushSelectEvent";function Cfe(e){e.eachComponent({mainType:"brush"},function(t){var r=t.brushTargetManager=new zV(t.option,e);r.setInputRanges(t.areas,e)})}function iFe(e,t,r){var i=[],n,a;e.eachComponent({mainType:"brush"},function(o){r&&r.type==="takeGlobalCursor"&&o.setBrushOption(r.key==="brush"?r.brushOption:{brushType:!1})}),Cfe(e),e.eachComponent({mainType:"brush"},function(o,s){var l={brushId:o.id,brushIndex:s,brushName:o.name,areas:At(o.areas),selected:[]};i.push(l);var u=o.option,c=u.brushLink,h=[],d=[],f=[],p=!1;s||(n=u.throttleType,a=u.throttleDelay);var v=qe(o.areas,function(_){var w=sFe[_.brushType],S=bt({boundingRect:w?w(_):void 0},_);return S.selectors=rFe(S),S}),m=fk(o.option,oZ,function(_){_.mappingMethod="fixed"});Ue(c)&&q(c,function(_){h[_]=1});function g(_){return c==="all"||!!h[_]}function y(_){return!!_.length}e.eachSeries(function(_,w){var S=f[w]=[];_.subType==="parallel"?x(_,w):b(_,w,S)});function x(_,w){var S=_.coordinateSystem;p=p||S.hasAxisBrushed(),g(w)&&S.eachActiveState(_.getData(),function(A,M){A==="active"&&(d[M]=1)})}function b(_,w,S){if(!(!_.brushSelector||oFe(o,w))&&(q(v,function(M){o.brushTargetManager.controlSeries(M,_,e)&&S.push(M),p=p||y(S)}),g(w)&&y(S))){var A=_.getData();A.each(function(M){sZ(_,S,A,M)&&(d[M]=1)})}}e.eachSeries(function(_,w){var S={seriesId:_.id,seriesIndex:w,seriesName:_.name,dataIndex:[]};l.selected.push(S);var A=f[w],M=_.getData(),E=g(w)?function(T){return d[T]?(S.dataIndex.push(M.getRawIndex(T)),"inBrush"):"outOfBrush"}:function(T){return sZ(_,A,M,T)?(S.dataIndex.push(M.getRawIndex(T)),"inBrush"):"outOfBrush"};(g(w)?p:y(A))&&eFe(oZ,m,M,E)})}),nFe(t,n,a,i,r)}function nFe(e,t,r,i,n){if(n){var a=e.getZr();if(!a[pk]){a[ST]||(a[ST]=aFe);var o=ky(a,ST,r,t);o(e,i)}}}function aFe(e,t){if(!e.isDisposed()){var r=e.getZr();r[pk]=!0,e.dispatchAction({type:"brushSelect",batch:t}),r[pk]=!1}}function sZ(e,t,r,i){for(var n=0,a=t.length;n<a;n++){var o=t[n];if(e.brushSelector(i,r,o.selectors,o))return!0}}function oFe(e,t){var r=e.option.seriesIndex;return r!=null&&r!=="all"&&(Ue(r)?tr(r,t)<0:t!==r)}var sFe={rect:function(e){return lZ(e.range)},polygon:function(e){for(var t,r=e.range,i=0,n=r.length;i<n;i++){t=t||[[1/0,-1/0],[1/0,-1/0]];var a=r[i];a[0]<t[0][0]&&(t[0][0]=a[0]),a[0]>t[0][1]&&(t[0][1]=a[0]),a[1]<t[1][0]&&(t[1][0]=a[1]),a[1]>t[1][1]&&(t[1][1]=a[1])}return t&&lZ(t)}};function lZ(e){return new qt(e[0][0],e[1][0],e[0][1]-e[0][0],e[1][1]-e[1][0])}var lFe=function(e){_e(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r}return t.prototype.init=function(r,i){this.ecModel=r,this.api=i,this.model,(this._brushController=new vV(i.getZr())).on("brush",at(this._onBrush,this)).mount()},t.prototype.render=function(r,i,n,a){this.model=r,this._updateController(r,i,n,a)},t.prototype.updateTransform=function(r,i,n,a){Cfe(i),this._updateController(r,i,n,a)},t.prototype.updateVisual=function(r,i,n,a){this.updateTransform(r,i,n,a)},t.prototype.updateView=function(r,i,n,a){this._updateController(r,i,n,a)},t.prototype._updateController=function(r,i,n,a){(!a||a.$from!==r.id)&&this._brushController.setPanels(r.brushTargetManager.makePanelOpts(n)).enableBrush(r.brushOption).updateCovers(r.areas.slice())},t.prototype.dispose=function(){this._brushController.dispose()},t.prototype._onBrush=function(r){var i=this.model.id,n=this.model.brushTargetManager.setOutputRanges(r.areas,this.ecModel);(!r.isEnd||r.removeOnClick)&&this.api.dispatchAction({type:"brush",brushId:i,areas:At(n),$from:i}),r.isEnd&&this.api.dispatchAction({type:"brushEnd",brushId:i,areas:At(n),$from:i})},t.type="brush",t}(Gi),uFe="#ddd",cFe=function(e){_e(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r.areas=[],r.brushOption={},r}return t.prototype.optionUpdated=function(r,i){var n=this.option;!i&&Sfe(n,r,["inBrush","outOfBrush"]);var a=n.inBrush=n.inBrush||{};n.outOfBrush=n.outOfBrush||{color:uFe},a.hasOwnProperty("liftZ")||(a.liftZ=5)},t.prototype.setAreas=function(r){r&&(this.areas=qe(r,function(i){return uZ(this.option,i)},this))},t.prototype.setBrushOption=function(r){this.brushOption=uZ(this.option,r),this.brushType=this.brushOption.brushType},t.type="brush",t.dependencies=["geo","grid","xAxis","yAxis","parallel","series"],t.defaultOption={seriesIndex:"all",brushType:"rect",brushMode:"single",transformable:!0,brushStyle:{borderWidth:1,color:"rgba(210,219,238,0.3)",borderColor:"#D2DBEE"},throttleType:"fixRate",throttleDelay:0,removeOnClick:!0,z:1e4},t}(vr);function uZ(e,t){return Wt({brushType:e.brushType,brushMode:e.brushMode,transformable:e.transformable,brushStyle:new Qr(e.brushStyle).getItemStyle(),removeOnClick:e.removeOnClick,z:e.z},t,!0)}var hFe=["rect","polygon","lineX","lineY","keep","clear"],dFe=function(e){_e(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.render=function(r,i,n){var a,o,s;i.eachComponent({mainType:"brush"},function(l){a=l.brushType,o=l.brushOption.brushMode||"single",s=s||!!l.areas.length}),this._brushType=a,this._brushMode=o,q(r.get("type",!0),function(l){r.setIconStatus(l,(l==="keep"?o==="multiple":l==="clear"?s:l===a)?"emphasis":"normal")})},t.prototype.updateView=function(r,i,n){this.render(r,i,n)},t.prototype.getIcons=function(){var r=this.model,i=r.get("icon",!0),n={};return q(r.get("type",!0),function(a){i[a]&&(n[a]=i[a])}),n},t.prototype.onclick=function(r,i,n){var a=this._brushType,o=this._brushMode;n==="clear"?(i.dispatchAction({type:"axisAreaSelect",intervals:[]}),i.dispatchAction({type:"brush",command:"clear",areas:[]})):i.dispatchAction({type:"takeGlobalCursor",key:"brush",brushOption:{brushType:n==="keep"?a:a===n?!1:n,brushMode:n==="keep"?o==="multiple"?"single":"multiple":o}})},t.getDefaultOption=function(r){var i={show:!0,type:hFe.slice(),icon:{rect:"M7.3,34.7 M0.4,10V-0.2h9.8 M89.6,10V-0.2h-9.8 M0.4,60v10.2h9.8 M89.6,60v10.2h-9.8 M12.3,22.4V10.5h13.1 M33.6,10.5h7.8 M49.1,10.5h7.8 M77.5,22.4V10.5h-13 M12.3,31.1v8.2 M77.7,31.1v8.2 M12.3,47.6v11.9h13.1 M33.6,59.5h7.6 M49.1,59.5 h7.7 M77.5,47.6v11.9h-13",polygon:"M55.2,34.9c1.7,0,3.1,1.4,3.1,3.1s-1.4,3.1-3.1,3.1 s-3.1-1.4-3.1-3.1S53.5,34.9,55.2,34.9z M50.4,51c1.7,0,3.1,1.4,3.1,3.1c0,1.7-1.4,3.1-3.1,3.1c-1.7,0-3.1-1.4-3.1-3.1 C47.3,52.4,48.7,51,50.4,51z M55.6,37.1l1.5-7.8 M60.1,13.5l1.6-8.7l-7.8,4 M59,19l-1,5.3 M24,16.1l6.4,4.9l6.4-3.3 M48.5,11.6 l-5.9,3.1 M19.1,12.8L9.7,5.1l1.1,7.7 M13.4,29.8l1,7.3l6.6,1.6 M11.6,18.4l1,6.1 M32.8,41.9 M26.6,40.4 M27.3,40.2l6.1,1.6 M49.9,52.1l-5.6-7.6l-4.9-1.2",lineX:"M15.2,30 M19.7,15.6V1.9H29 M34.8,1.9H40.4 M55.3,15.6V1.9H45.9 M19.7,44.4V58.1H29 M34.8,58.1H40.4 M55.3,44.4 V58.1H45.9 M12.5,20.3l-9.4,9.6l9.6,9.8 M3.1,29.9h16.5 M62.5,20.3l9.4,9.6L62.3,39.7 M71.9,29.9H55.4",lineY:"M38.8,7.7 M52.7,12h13.2v9 M65.9,26.6V32 M52.7,46.3h13.2v-9 M24.9,12H11.8v9 M11.8,26.6V32 M24.9,46.3H11.8v-9 M48.2,5.1l-9.3-9l-9.4,9.2 M38.9-3.9V12 M48.2,53.3l-9.3,9l-9.4-9.2 M38.9,62.3V46.4",keep:"M4,10.5V1h10.3 M20.7,1h6.1 M33,1h6.1 M55.4,10.5V1H45.2 M4,17.3v6.6 M55.6,17.3v6.6 M4,30.5V40h10.3 M20.7,40 h6.1 M33,40h6.1 M55.4,30.5V40H45.2 M21,18.9h62.9v48.6H21V18.9z",clear:"M22,14.7l30.9,31 M52.9,14.7L22,45.7 M4.7,16.8V4.2h13.1 M26,4.2h7.8 M41.6,4.2h7.8 M70.3,16.8V4.2H57.2 M4.7,25.9v8.6 M70.3,25.9v8.6 M4.7,43.2v12.6h13.1 M26,55.8h7.8 M41.6,55.8h7.8 M70.3,43.2v12.6H57.2"},title:r.getLocaleModel().get(["toolbox","brush","title"])};return i},t}(_l);function fFe(e){e.registerComponentView(lFe),e.registerComponentModel(cFe),e.registerPreprocessor(JVe),e.registerVisual(e.PRIORITY.VISUAL.BRUSH,iFe),e.registerAction({type:"brush",event:"brush",update:"updateVisual"},function(t,r){r.eachComponent({mainType:"brush",query:t},function(i){i.setAreas(t.areas)})}),e.registerAction({type:"brushSelect",event:"brushSelected",update:"none"},pn),e.registerAction({type:"brushEnd",event:"brushEnd",update:"none"},pn),Tg("brush",dFe)}var pFe=function(e){_e(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r.layoutMode={type:"box",ignoreSize:!0},r}return t.type="title",t.defaultOption={z:6,show:!0,text:"",target:"blank",subtext:"",subtarget:"blank",left:0,top:0,backgroundColor:"rgba(0,0,0,0)",borderColor:"#ccc",borderWidth:0,padding:5,itemGap:10,textStyle:{fontSize:18,fontWeight:"bold",color:"#464646"},subtextStyle:{fontSize:12,color:"#6E7079"}},t}(vr),vFe=function(e){_e(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r}return t.prototype.render=function(r,i,n){if(this.group.removeAll(),!!r.get("show")){var a=this.group,o=r.getModel("textStyle"),s=r.getModel("subtextStyle"),l=r.get("textAlign"),u=Lt(r.get("textBaseline"),r.get("textVerticalAlign")),c=new Dr({style:Ti(o,{text:r.get("text"),fill:o.getTextColor()},{disableBox:!0}),z2:10}),h=c.getBoundingRect(),d=r.get("subtext"),f=new Dr({style:Ti(s,{text:d,fill:s.getTextColor(),y:h.height+r.get("itemGap"),verticalAlign:"top"},{disableBox:!0}),z2:10}),p=r.get("link"),v=r.get("sublink"),m=r.get("triggerEvent",!0);c.silent=!p&&!m,f.silent=!v&&!m,p&&c.on("click",function(){z8(p,"_"+r.get("target"))}),v&&f.on("click",function(){z8(v,"_"+r.get("subtarget"))}),Dt(c).eventData=Dt(f).eventData=m?{componentType:"title",componentIndex:r.componentIndex}:null,a.add(c),d&&a.add(f);var g=a.getBoundingRect(),y=r.getBoxLayoutParams();y.width=g.width,y.height=g.height;var x=zn(y,{width:n.getWidth(),height:n.getHeight()},r.get("padding"));l||(l=r.get("left")||r.get("right"),l==="middle"&&(l="center"),l==="right"?x.x+=x.width:l==="center"&&(x.x+=x.width/2)),u||(u=r.get("top")||r.get("bottom"),u==="center"&&(u="middle"),u==="bottom"?x.y+=x.height:u==="middle"&&(x.y+=x.height/2),u=u||"top"),a.x=x.x,a.y=x.y,a.markRedraw();var b={align:l,verticalAlign:u};c.setStyle(b),f.setStyle(b),g=a.getBoundingRect();var _=x.margin,w=r.getItemStyle(["color","opacity"]);w.fill=r.get("backgroundColor");var S=new Tr({shape:{x:g.x-_[3],y:g.y-_[0],width:g.width+_[1]+_[3],height:g.height+_[0]+_[2],r:r.get("borderRadius")},style:w,subPixelOptimize:!0,silent:!0});a.add(S)}},t.type="title",t}(Gi);function mFe(e){e.registerComponentModel(pFe),e.registerComponentView(vFe)}var cZ=function(e){_e(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r.layoutMode="box",r}return t.prototype.init=function(r,i,n){this.mergeDefaultAndTheme(r,n),this._initData()},t.prototype.mergeOption=function(r){e.prototype.mergeOption.apply(this,arguments),this._initData()},t.prototype.setCurrentIndex=function(r){r==null&&(r=this.option.currentIndex);var i=this._data.count();this.option.loop?r=(r%i+i)%i:(r>=i&&(r=i-1),r<0&&(r=0)),this.option.currentIndex=r},t.prototype.getCurrentIndex=function(){return this.option.currentIndex},t.prototype.isIndexMax=function(){return this.getCurrentIndex()>=this._data.count()-1},t.prototype.setPlayState=function(r){this.option.autoPlay=!!r},t.prototype.getPlayState=function(){return!!this.option.autoPlay},t.prototype._initData=function(){var r=this.option,i=r.data||[],n=r.axisType,a=this._names=[],o;n==="category"?(o=[],q(i,function(u,c){var h=Rn(_y(u),""),d;_t(u)?(d=At(u),d.value=c):d=c,o.push(d),a.push(h)})):o=i;var s={category:"ordinal",time:"time",value:"number"}[n]||"number",l=this._data=new Wo([{name:"value",type:s}],this);l.initData(o,a)},t.prototype.getData=function(){return this._data},t.prototype.getCategories=function(){if(this.get("axisType")==="category")return this._names.slice()},t.type="timeline",t.defaultOption={z:4,show:!0,axisType:"time",realtime:!0,left:"20%",top:null,right:"20%",bottom:0,width:null,height:40,padding:5,controlPosition:"left",autoPlay:!1,rewind:!1,loop:!0,playInterval:2e3,currentIndex:0,itemStyle:{},label:{color:"#000"},data:[]},t}(vr),Efe=function(e){_e(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r}return t.type="timeline.slider",t.defaultOption=Mp(cZ.defaultOption,{backgroundColor:"rgba(0,0,0,0)",borderColor:"#ccc",borderWidth:0,orient:"horizontal",inverse:!1,tooltip:{trigger:"item"},symbol:"circle",symbolSize:12,lineStyle:{show:!0,width:2,color:"#DAE1F5"},label:{position:"auto",show:!0,interval:"auto",rotate:0,color:"#A4B1D7"},itemStyle:{color:"#A4B1D7",borderWidth:1},checkpointStyle:{symbol:"circle",symbolSize:15,color:"#316bf3",borderColor:"#fff",borderWidth:2,shadowBlur:2,shadowOffsetX:1,shadowOffsetY:1,shadowColor:"rgba(0, 0, 0, 0.3)",animation:!0,animationDuration:300,animationEasing:"quinticInOut"},controlStyle:{show:!0,showPlayBtn:!0,showPrevBtn:!0,showNextBtn:!0,itemSize:24,itemGap:12,position:"left",playIcon:"path://M31.6,53C17.5,53,6,41.5,6,27.4S17.5,1.8,31.6,1.8C45.7,1.8,57.2,13.3,57.2,27.4S45.7,53,31.6,53z M31.6,3.3 C18.4,3.3,7.5,14.1,7.5,27.4c0,13.3,10.8,24.1,24.1,24.1C44.9,51.5,55.7,40.7,55.7,27.4C55.7,14.1,44.9,3.3,31.6,3.3z M24.9,21.3 c0-2.2,1.6-3.1,3.5-2l10.5,6.1c1.899,1.1,1.899,2.9,0,4l-10.5,6.1c-1.9,1.1-3.5,0.2-3.5-2V21.3z",stopIcon:"path://M30.9,53.2C16.8,53.2,5.3,41.7,5.3,27.6S16.8,2,30.9,2C45,2,56.4,13.5,56.4,27.6S45,53.2,30.9,53.2z M30.9,3.5C17.6,3.5,6.8,14.4,6.8,27.6c0,13.3,10.8,24.1,24.101,24.1C44.2,51.7,55,40.9,55,27.6C54.9,14.4,44.1,3.5,30.9,3.5z M36.9,35.8c0,0.601-0.4,1-0.9,1h-1.3c-0.5,0-0.9-0.399-0.9-1V19.5c0-0.6,0.4-1,0.9-1H36c0.5,0,0.9,0.4,0.9,1V35.8z M27.8,35.8 c0,0.601-0.4,1-0.9,1h-1.3c-0.5,0-0.9-0.399-0.9-1V19.5c0-0.6,0.4-1,0.9-1H27c0.5,0,0.9,0.4,0.9,1L27.8,35.8L27.8,35.8z",nextIcon:"M2,18.5A1.52,1.52,0,0,1,.92,18a1.49,1.49,0,0,1,0-2.12L7.81,9.36,1,3.11A1.5,1.5,0,1,1,3,.89l8,7.34a1.48,1.48,0,0,1,.49,1.09,1.51,1.51,0,0,1-.46,1.1L3,18.08A1.5,1.5,0,0,1,2,18.5Z",prevIcon:"M10,.5A1.52,1.52,0,0,1,11.08,1a1.49,1.49,0,0,1,0,2.12L4.19,9.64,11,15.89a1.5,1.5,0,1,1-2,2.22L1,10.77A1.48,1.48,0,0,1,.5,9.68,1.51,1.51,0,0,1,1,8.58L9,.92A1.5,1.5,0,0,1,10,.5Z",prevBtnSize:18,nextBtnSize:18,color:"#A4B1D7",borderColor:"#A4B1D7",borderWidth:1},emphasis:{label:{show:!0,color:"#6f778d"},itemStyle:{color:"#316BF3"},controlStyle:{color:"#316BF3",borderColor:"#316BF3",borderWidth:2}},progress:{lineStyle:{color:"#316BF3"},itemStyle:{color:"#316BF3"},label:{color:"#6f778d"}},data:[]}),t}(cZ);Mn(Efe,IC.prototype);var gFe=function(e){_e(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r}return t.type="timeline",t}(Gi),yFe=function(e){_e(t,e);function t(r,i,n,a){var o=e.call(this,r,i,n)||this;return o.type=a||"value",o}return t.prototype.getLabelModel=function(){return this.model.getModel("label")},t.prototype.isHorizontal=function(){return this.model.get("orient")==="horizontal"},t}(Fu),CT=Math.PI,hZ=Pr(),xFe=function(e){_e(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r}return t.prototype.init=function(r,i){this.api=i},t.prototype.render=function(r,i,n){if(this.model=r,this.api=n,this.ecModel=i,this.group.removeAll(),r.get("show",!0)){var a=this._layout(r,n),o=this._createGroup("_mainGroup"),s=this._createGroup("_labelGroup"),l=this._axis=this._createAxis(a,r);r.formatTooltip=function(u){var c=l.scale.getLabel({value:u});return na("nameValue",{noName:!0,value:c})},q(["AxisLine","AxisTick","Control","CurrentPointer"],function(u){this["_render"+u](a,o,l,r)},this),this._renderAxisLabel(a,s,l,r),this._position(a,r)}this._doPlayStop(),this._updateTicksStatus()},t.prototype.remove=function(){this._clearTimer(),this.group.removeAll()},t.prototype.dispose=function(){this._clearTimer()},t.prototype._layout=function(r,i){var n=r.get(["label","position"]),a=r.get("orient"),o=wFe(r,i),s;n==null||n==="auto"?s=a==="horizontal"?o.y+o.height/2<i.getHeight()/2?"-":"+":o.x+o.width/2<i.getWidth()/2?"+":"-":it(n)?s={horizontal:{top:"-",bottom:"+"},vertical:{left:"-",right:"+"}}[a][n]:s=n;var l={horizontal:"center",vertical:s>=0||s==="+"?"left":"right"},u={horizontal:s>=0||s==="+"?"top":"bottom",vertical:"middle"},c={horizontal:0,vertical:CT/2},h=a==="vertical"?o.height:o.width,d=r.getModel("controlStyle"),f=d.get("show",!0),p=f?d.get("itemSize"):0,v=f?d.get("itemGap"):0,m=p+v,g=r.get(["label","rotate"])||0;g=g*CT/180;var y,x,b,_=d.get("position",!0),w=f&&d.get("showPlayBtn",!0),S=f&&d.get("showPrevBtn",!0),A=f&&d.get("showNextBtn",!0),M=0,E=h;_==="left"||_==="bottom"?(w&&(y=[0,0],M+=m),S&&(x=[M,0],M+=m),A&&(b=[E-p,0],E-=m)):(w&&(y=[E-p,0],E-=m),S&&(x=[0,0],M+=m),A&&(b=[E-p,0],E-=m));var T=[M,E];return r.get("inverse")&&T.reverse(),{viewRect:o,mainLength:h,orient:a,rotation:c[a],labelRotation:g,labelPosOpt:s,labelAlign:r.get(["label","align"])||l[a],labelBaseline:r.get(["label","verticalAlign"])||r.get(["label","baseline"])||u[a],playPosition:y,prevBtnPosition:x,nextBtnPosition:b,axisExtent:T,controlSize:p,controlGap:v}},t.prototype._position=function(r,i){var n=this._mainGroup,a=this._labelGroup,o=r.viewRect;if(r.orient==="vertical"){var s=js(),l=o.x,u=o.y+o.height;Qc(s,s,[-l,-u]),Jv(s,s,-CT/2),Qc(s,s,[l,u]),o=o.clone(),o.applyTransform(s)}var c=y(o),h=y(n.getBoundingRect()),d=y(a.getBoundingRect()),f=[n.x,n.y],p=[a.x,a.y];p[0]=f[0]=c[0][0];var v=r.labelPosOpt;if(v==null||it(v)){var m=v==="+"?0:1;x(f,h,c,1,m),x(p,d,c,1,1-m)}else{var m=v>=0?0:1;x(f,h,c,1,m),p[1]=f[1]+v}n.setPosition(f),a.setPosition(p),n.rotation=a.rotation=r.rotation,g(n),g(a);function g(b){b.originX=c[0][0]-b.x,b.originY=c[1][0]-b.y}function y(b){return[[b.x,b.x+b.width],[b.y,b.y+b.height]]}function x(b,_,w,S,A){b[S]+=w[S][A]-_[S][A]}},t.prototype._createAxis=function(r,i){var n=i.getData(),a=i.get("axisType"),o=bFe(i,a);o.getTicks=function(){return n.mapArray(["value"],function(u){return{value:u}})};var s=n.getDataExtent("value");o.setExtent(s[0],s[1]),o.calcNiceTicks();var l=new yFe("value",o,r.axisExtent,a);return l.model=i,l},t.prototype._createGroup=function(r){var i=this[r]=new Ct;return this.group.add(i),i},t.prototype._renderAxisLine=function(r,i,n,a){var o=n.getExtent();if(a.get(["lineStyle","show"])){var s=new $n({shape:{x1:o[0],y1:0,x2:o[1],y2:0},style:Be({lineCap:"round"},a.getModel("lineStyle").getLineStyle()),silent:!0,z2:1});i.add(s);var l=this._progressLine=new $n({shape:{x1:o[0],x2:this._currentPointer?this._currentPointer.x:o[0],y1:0,y2:0},style:bt({lineCap:"round",lineWidth:s.style.lineWidth},a.getModel(["progress","lineStyle"]).getLineStyle()),silent:!0,z2:1});i.add(l)}},t.prototype._renderAxisTick=function(r,i,n,a){var o=this,s=a.getData(),l=n.scale.getTicks();this._tickSymbols=[],q(l,function(u){var c=n.dataToCoord(u.value),h=s.getItemModel(u.value),d=h.getModel("itemStyle"),f=h.getModel(["emphasis","itemStyle"]),p=h.getModel(["progress","itemStyle"]),v={x:c,y:0,onclick:at(o._changeTimeline,o,u.value)},m=dZ(h,d,i,v);m.ensureState("emphasis").style=f.getItemStyle(),m.ensureState("progress").style=p.getItemStyle(),gv(m);var g=Dt(m);h.get("tooltip")?(g.dataIndex=u.value,g.dataModel=a):g.dataIndex=g.dataModel=null,o._tickSymbols.push(m)})},t.prototype._renderAxisLabel=function(r,i,n,a){var o=this,s=n.getLabelModel();if(s.get("show")){var l=a.getData(),u=n.getViewLabels();this._tickLabels=[],q(u,function(c){var h=c.tickValue,d=l.getItemModel(h),f=d.getModel("label"),p=d.getModel(["emphasis","label"]),v=d.getModel(["progress","label"]),m=n.dataToCoord(c.tickValue),g=new Dr({x:m,y:0,rotation:r.labelRotation-r.rotation,onclick:at(o._changeTimeline,o,h),silent:!1,style:Ti(f,{text:c.formattedLabel,align:r.labelAlign,verticalAlign:r.labelBaseline})});g.ensureState("emphasis").style=Ti(p),g.ensureState("progress").style=Ti(v),i.add(g),gv(g),hZ(g).dataIndex=h,o._tickLabels.push(g)})}},t.prototype._renderControl=function(r,i,n,a){var o=r.controlSize,s=r.rotation,l=a.getModel("controlStyle").getItemStyle(),u=a.getModel(["emphasis","controlStyle"]).getItemStyle(),c=a.getPlayState(),h=a.get("inverse",!0);d(r.nextBtnPosition,"next",at(this._changeTimeline,this,h?"-":"+")),d(r.prevBtnPosition,"prev",at(this._changeTimeline,this,h?"+":"-")),d(r.playPosition,c?"stop":"play",at(this._handlePlayClick,this,!c),!0);function d(f,p,v,m){if(f){var g=Tu(Lt(a.get(["controlStyle",p+"BtnSize"]),o),o),y=[0,-g/2,g,g],x=_Fe(a,p+"Icon",y,{x:f[0],y:f[1],originX:o/2,originY:0,rotation:m?-s:0,rectHover:!0,style:l,onclick:v});x.ensureState("emphasis").style=u,i.add(x),gv(x)}}},t.prototype._renderCurrentPointer=function(r,i,n,a){var o=a.getData(),s=a.getCurrentIndex(),l=o.getItemModel(s).getModel("checkpointStyle"),u=this,c={onCreate:function(h){h.draggable=!0,h.drift=at(u._handlePointerDrag,u),h.ondragend=at(u._handlePointerDragend,u),fZ(h,u._progressLine,s,n,a,!0)},onUpdate:function(h){fZ(h,u._progressLine,s,n,a)}};this._currentPointer=dZ(l,l,this._mainGroup,{},this._currentPointer,c)},t.prototype._handlePlayClick=function(r){this._clearTimer(),this.api.dispatchAction({type:"timelinePlayChange",playState:r,from:this.uid})},t.prototype._handlePointerDrag=function(r,i,n){this._clearTimer(),this._pointerChangeTimeline([n.offsetX,n.offsetY])},t.prototype._handlePointerDragend=function(r){this._pointerChangeTimeline([r.offsetX,r.offsetY],!0)},t.prototype._pointerChangeTimeline=function(r,i){var n=this._toAxisCoord(r)[0],a=this._axis,o=Ml(a.getExtent().slice());n>o[1]&&(n=o[1]),n<o[0]&&(n=o[0]),this._currentPointer.x=n,this._currentPointer.markRedraw();var s=this._progressLine;s&&(s.shape.x2=n,s.dirty());var l=this._findNearestTick(n),u=this.model;(i||l!==u.getCurrentIndex()&&u.get("realtime"))&&this._changeTimeline(l)},t.prototype._doPlayStop=function(){var r=this;this._clearTimer(),this.model.getPlayState()&&(this._timer=setTimeout(function(){var i=r.model;r._changeTimeline(i.getCurrentIndex()+(i.get("rewind",!0)?-1:1))},this.model.get("playInterval")))},t.prototype._toAxisCoord=function(r){var i=this._mainGroup.getLocalTransform();return Au(r,i,!0)},t.prototype._findNearestTick=function(r){var i=this.model.getData(),n=1/0,a,o=this._axis;return i.each(["value"],function(s,l){var u=o.dataToCoord(s),c=Math.abs(u-r);c<n&&(n=c,a=l)}),a},t.prototype._clearTimer=function(){this._timer&&(clearTimeout(this._timer),this._timer=null)},t.prototype._changeTimeline=function(r){var i=this.model.getCurrentIndex();r==="+"?r=i+1:r==="-"&&(r=i-1),this.api.dispatchAction({type:"timelineChange",currentIndex:r,from:this.uid})},t.prototype._updateTicksStatus=function(){var r=this.model.getCurrentIndex(),i=this._tickSymbols,n=this._tickLabels;if(i)for(var a=0;a<i.length;a++)i&&i[a]&&i[a].toggleState("progress",a<r);if(n)for(var a=0;a<n.length;a++)n&&n[a]&&n[a].toggleState("progress",hZ(n[a]).dataIndex<=r)},t.type="timeline.slider",t}(gFe);function bFe(e,t){if(t=t||e.get("type"),t)switch(t){case"category":return new NC({ordinalMeta:e.getCategories(),extent:[1/0,-1/0]});case"time":return new HN({locale:e.ecModel.getLocaleModel(),useUTC:e.ecModel.get("useUTC")});default:return new xd}}function wFe(e,t){return zn(e.getBoxLayoutParams(),{width:t.getWidth(),height:t.getHeight()},e.get("padding"))}function _Fe(e,t,r,i){var n=i.style,a=p4(e.get(["controlStyle",t]),i||{},new qt(r[0],r[1],r[2],r[3]));return n&&a.setStyle(n),a}function dZ(e,t,r,i,n,a){var o=t.get("color");if(n)n.setColor(o),r.add(n),a&&a.onUpdate(n);else{var s=e.get("symbol");n=Sn(s,-1,-1,2,2,o),n.setStyle("strokeNoScale",!0),r.add(n),a&&a.onCreate(n)}var l=t.getItemStyle(["color"]);n.setStyle(l),i=Wt({rectHover:!0,z2:100},i,!0);var u=Ry(e.get("symbolSize"));i.scaleX=u[0]/2,i.scaleY=u[1]/2;var c=em(e.get("symbolOffset"),u);c&&(i.x=(i.x||0)+c[0],i.y=(i.y||0)+c[1]);var h=e.get("symbolRotate");return i.rotation=(h||0)*Math.PI/180||0,n.attr(i),n.updateTransform(),n}function fZ(e,t,r,i,n,a){if(!e.dragging){var o=n.getModel("checkpointStyle"),s=i.dataToCoord(n.getData().get("value",r));if(a||!o.get("animation",!0))e.attr({x:s,y:0}),t&&t.attr({shape:{x2:s}});else{var l={duration:o.get("animationDuration",!0),easing:o.get("animationEasing",!0)};e.stopAnimation(null,!0),e.animateTo({x:s,y:0},l),t&&t.animateTo({shape:{x2:s}},l)}}}function AFe(e){e.registerAction({type:"timelineChange",event:"timelineChanged",update:"prepareAndUpdate"},function(t,r,i){var n=r.getComponent("timeline");return n&&t.currentIndex!=null&&(n.setCurrentIndex(t.currentIndex),!n.get("loop",!0)&&n.isIndexMax()&&n.getPlayState()&&(n.setPlayState(!1),i.dispatchAction({type:"timelinePlayChange",playState:!1,from:t.from}))),r.resetOption("timeline",{replaceMerge:n.get("replaceMerge",!0)}),bt({currentIndex:n.option.currentIndex},t)}),e.registerAction({type:"timelinePlayChange",event:"timelinePlayChanged",update:"update"},function(t,r){var i=r.getComponent("timeline");i&&t.playState!=null&&i.setPlayState(t.playState)})}function SFe(e){var t=e&&e.timeline;Ue(t)||(t=t?[t]:[]),q(t,function(r){r&&CFe(r)})}function CFe(e){var t=e.type,r={number:"value",time:"time"};if(r[t]&&(e.axisType=r[t],delete e.type),pZ(e),O0(e,"controlPosition")){var i=e.controlStyle||(e.controlStyle={});O0(i,"position")||(i.position=e.controlPosition),i.position==="none"&&!O0(i,"show")&&(i.show=!1,delete i.position),delete e.controlPosition}q(e.data||[],function(n){_t(n)&&!Ue(n)&&(!O0(n,"value")&&O0(n,"name")&&(n.value=n.name),pZ(n))})}function pZ(e){var t=e.itemStyle||(e.itemStyle={}),r=t.emphasis||(t.emphasis={}),i=e.label||e.label||{},n=i.normal||(i.normal={}),a={normal:1,emphasis:1};q(i,function(o,s){!a[s]&&!O0(n,s)&&(n[s]=o)}),r.label&&!O0(i,"emphasis")&&(i.emphasis=r.label,delete r.label)}function O0(e,t){return e.hasOwnProperty(t)}function EFe(e){e.registerComponentModel(Efe),e.registerComponentView(xFe),e.registerSubTypeDefaulter("timeline",function(){return"slider"}),AFe(e),e.registerPreprocessor(SFe)}function GV(e,t){if(!e)return!1;for(var r=Ue(e)?e:[e],i=0;i<r.length;i++)if(r[i]&&r[i][t])return!0;return!1}function u_(e){Lv(e,"label",["show"])}var c_=Pr(),wd=function(e){_e(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r.createdBySelf=!1,r}return t.prototype.init=function(r,i,n){this.mergeDefaultAndTheme(r,n),this._mergeOption(r,n,!1,!0)},t.prototype.isAnimationEnabled=function(){if(hr.node)return!1;var r=this.__hostSeries;return this.getShallow("animation")&&r&&r.isAnimationEnabled()},t.prototype.mergeOption=function(r,i){this._mergeOption(r,i,!1,!1)},t.prototype._mergeOption=function(r,i,n,a){var o=this.mainType;n||i.eachSeries(function(s){var l=s.get(this.mainType,!0),u=c_(s)[o];if(!l||!l.data){c_(s)[o]=null;return}u?u._mergeOption(l,i,!0):(a&&u_(l),q(l.data,function(c){c instanceof Array?(u_(c[0]),u_(c[1])):u_(c)}),u=this.createMarkerModelFromSeries(l,this,i),Be(u,{mainType:this.mainType,seriesIndex:s.seriesIndex,name:s.name,createdBySelf:!0}),u.__hostSeries=s),c_(s)[o]=u},this)},t.prototype.formatTooltip=function(r,i,n){var a=this.getData(),o=this.getRawValue(r),s=a.getName(r);return na("section",{header:this.name,blocks:[na("nameValue",{name:s,value:o,noName:!s,noValue:o==null})]})},t.prototype.getData=function(){return this._data},t.prototype.setData=function(r){this._data=r},t.prototype.getDataParams=function(r,i){var n=IC.prototype.getDataParams.call(this,r,i),a=this.__hostSeries;return a&&(n.seriesId=a.id,n.seriesName=a.name,n.seriesType=a.subType),n},t.getMarkerModelFromSeries=function(r,i){return c_(r)[i]},t.type="marker",t.dependencies=["series","grid","polar","geo"],t}(vr);Mn(wd,IC.prototype);var MFe=function(e){_e(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r}return t.prototype.createMarkerModelFromSeries=function(r,i,n){return new t(r,i,n)},t.type="markPoint",t.defaultOption={z:5,symbol:"pin",symbolSize:50,tooltip:{trigger:"item"},label:{show:!0,position:"inside"},itemStyle:{borderWidth:2},emphasis:{label:{show:!0}}},t}(wd);function vk(e){return!(isNaN(parseFloat(e.x))&&isNaN(parseFloat(e.y)))}function TFe(e){return!isNaN(parseFloat(e.x))&&!isNaN(parseFloat(e.y))}function h_(e,t,r,i,n,a){var o=[],s=vp(t,i),l=s?t.getCalculationInfo("stackResultDimension"):i,u=jV(t,l,e),c=t.indicesOfNearest(l,u)[0];o[n]=t.get(r,c),o[a]=t.get(l,c);var h=t.get(i,c),d=Pc(t.get(i,c));return d=Math.min(d,20),d>=0&&(o[a]=+o[a].toFixed(d)),[o,h]}var ET={min:kt(h_,"min"),max:kt(h_,"max"),average:kt(h_,"average"),median:kt(h_,"median")};function yw(e,t){if(t){var r=e.getData(),i=e.coordinateSystem,n=i&&i.dimensions;if(!TFe(t)&&!Ue(t.coord)&&Ue(n)){var a=Mfe(t,r,i,e);if(t=At(t),t.type&&ET[t.type]&&a.baseAxis&&a.valueAxis){var o=tr(n,a.baseAxis.dim),s=tr(n,a.valueAxis.dim),l=ET[t.type](r,a.baseDataDim,a.valueDataDim,o,s);t.coord=l[0],t.value=l[1]}else t.coord=[t.xAxis!=null?t.xAxis:t.radiusAxis,t.yAxis!=null?t.yAxis:t.angleAxis]}if(t.coord==null||!Ue(n))t.coord=[];else for(var u=t.coord,c=0;c<2;c++)ET[u[c]]&&(u[c]=jV(r,r.mapDimension(n[c]),u[c]));return t}}function Mfe(e,t,r,i){var n={};return e.valueIndex!=null||e.valueDim!=null?(n.valueDataDim=e.valueIndex!=null?t.getDimension(e.valueIndex):e.valueDim,n.valueAxis=r.getAxis(PFe(i,n.valueDataDim)),n.baseAxis=r.getOtherAxis(n.valueAxis),n.baseDataDim=t.mapDimension(n.baseAxis.dim)):(n.baseAxis=i.getBaseAxis(),n.valueAxis=r.getOtherAxis(n.baseAxis),n.baseDataDim=t.mapDimension(n.baseAxis.dim),n.valueDataDim=t.mapDimension(n.valueAxis.dim)),n}function PFe(e,t){var r=e.getData().getDimensionInfo(t);return r&&r.coordDim}function xw(e,t){return e&&e.containData&&t.coord&&!vk(t)?e.containData(t.coord):!0}function DFe(e,t,r){return e&&e.containZone&&t.coord&&r.coord&&!vk(t)&&!vk(r)?e.containZone(t.coord,r.coord):!0}function Tfe(e,t){return e?function(r,i,n,a){var o=a<2?r.coord&&r.coord[a]:r.value;return ep(o,t[a])}:function(r,i,n,a){return ep(r.value,t[a])}}function jV(e,t,r){if(r==="average"){var i=0,n=0;return e.each(t,function(a,o){isNaN(a)||(i+=a,n++)}),i/n}else return r==="median"?e.getMedian(t):e.getDataExtent(t)[r==="max"?1:0]}var MT=Pr(),WV=function(e){_e(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r}return t.prototype.init=function(){this.markerGroupMap=dt()},t.prototype.render=function(r,i,n){var a=this,o=this.markerGroupMap;o.each(function(s){MT(s).keep=!1}),i.eachSeries(function(s){var l=wd.getMarkerModelFromSeries(s,a.type);l&&a.renderSeries(s,l,i,n)}),o.each(function(s){!MT(s).keep&&a.group.remove(s.group)})},t.prototype.markKeep=function(r){MT(r).keep=!0},t.prototype.toggleBlurSeries=function(r,i){var n=this;q(r,function(a){var o=wd.getMarkerModelFromSeries(a,n.type);if(o){var s=o.getData();s.eachItemGraphicEl(function(l){l&&(i?xle(l):cN(l))})}})},t.type="marker",t}(Gi);function vZ(e,t,r){var i=t.coordinateSystem;e.each(function(n){var a=e.getItemModel(n),o,s=et(a.get("x"),r.getWidth()),l=et(a.get("y"),r.getHeight());if(!isNaN(s)&&!isNaN(l))o=[s,l];else if(t.getMarkerPosition)o=t.getMarkerPosition(e.getValues(e.dimensions,n));else if(i){var u=e.get(i.dimensions[0],n),c=e.get(i.dimensions[1],n);o=i.dataToPoint([u,c])}isNaN(s)||(o[0]=s),isNaN(l)||(o[1]=l),e.setItemLayout(n,o)})}var IFe=function(e){_e(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r}return t.prototype.updateTransform=function(r,i,n){i.eachSeries(function(a){var o=wd.getMarkerModelFromSeries(a,"markPoint");o&&(vZ(o.getData(),a,n),this.markerGroupMap.get(a.id).updateLayout())},this)},t.prototype.renderSeries=function(r,i,n,a){var o=r.coordinateSystem,s=r.id,l=r.getData(),u=this.markerGroupMap,c=u.get(s)||u.set(s,new b4),h=LFe(o,r,i);i.setData(h),vZ(i.getData(),r,a),h.each(function(d){var f=h.getItemModel(d),p=f.getShallow("symbol"),v=f.getShallow("symbolSize"),m=f.getShallow("symbolRotate"),g=f.getShallow("symbolOffset"),y=f.getShallow("symbolKeepAspect");if(xt(p)||xt(v)||xt(m)||xt(g)){var x=i.getRawValue(d),b=i.getDataParams(d);xt(p)&&(p=p(x,b)),xt(v)&&(v=v(x,b)),xt(m)&&(m=m(x,b)),xt(g)&&(g=g(x,b))}var _=f.getModel("itemStyle").getItemStyle(),w=m4(l,"color");_.fill||(_.fill=w),h.setItemVisual(d,{symbol:p,symbolSize:v,symbolRotate:m,symbolOffset:g,symbolKeepAspect:y,style:_})}),c.updateData(h),this.group.add(c.group),h.eachItemGraphicEl(function(d){d.traverse(function(f){Dt(f).dataModel=i})}),this.markKeep(c),c.group.silent=i.get("silent")||r.get("silent")},t.type="markPoint",t}(WV);function LFe(e,t,r){var i;e?i=qe(e&&e.dimensions,function(s){var l=t.getData().getDimensionInfo(t.getData().mapDimension(s))||{};return Be(Be({},l),{name:s,ordinalMeta:null})}):i=[{name:"value",type:"float"}];var n=new Wo(i,r),a=qe(r.get("data"),kt(yw,t));e&&(a=ni(a,kt(xw,e)));var o=Tfe(!!e,i);return n.initData(a,null,o),n}function kFe(e){e.registerComponentModel(MFe),e.registerComponentView(IFe),e.registerPreprocessor(function(t){GV(t.series,"markPoint")&&(t.markPoint=t.markPoint||{})})}var RFe=function(e){_e(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r}return t.prototype.createMarkerModelFromSeries=function(r,i,n){return new t(r,i,n)},t.type="markLine",t.defaultOption={z:5,symbol:["circle","arrow"],symbolSize:[8,16],symbolOffset:0,precision:2,tooltip:{trigger:"item"},label:{show:!0,position:"end",distance:5},lineStyle:{type:"dashed"},emphasis:{label:{show:!0},lineStyle:{width:3}},animationEasing:"linear"},t}(wd),d_=Pr(),OFe=function(e,t,r,i){var n=e.getData(),a;if(Ue(i))a=i;else{var o=i.type;if(o==="min"||o==="max"||o==="average"||o==="median"||i.xAxis!=null||i.yAxis!=null){var s=void 0,l=void 0;if(i.yAxis!=null||i.xAxis!=null)s=t.getAxis(i.yAxis!=null?"y":"x"),l=xa(i.yAxis,i.xAxis);else{var u=Mfe(i,n,t,e);s=u.valueAxis;var c=wce(n,u.valueDataDim);l=jV(n,c,o)}var h=s.dim==="x"?0:1,d=1-h,f=At(i),p={coord:[]};f.type=null,f.coord=[],f.coord[d]=-1/0,p.coord[d]=1/0;var v=r.get("precision");v>=0&&kr(l)&&(l=+l.toFixed(Math.min(v,20))),f.coord[h]=p.coord[h]=l,a=[f,p,{type:o,valueIndex:i.valueIndex,value:l}]}else a=[]}var m=[yw(e,a[0]),yw(e,a[1]),Be({},a[2])];return m[2].type=m[2].type||null,Wt(m[2],m[0]),Wt(m[2],m[1]),m};function hS(e){return!isNaN(e)&&!isFinite(e)}function mZ(e,t,r,i){var n=1-e,a=i.dimensions[e];return hS(t[n])&&hS(r[n])&&t[e]===r[e]&&i.getAxis(a).containData(t[e])}function BFe(e,t){if(e.type==="cartesian2d"){var r=t[0].coord,i=t[1].coord;if(r&&i&&(mZ(1,r,i,e)||mZ(0,r,i,e)))return!0}return xw(e,t[0])&&xw(e,t[1])}function TT(e,t,r,i,n){var a=i.coordinateSystem,o=e.getItemModel(t),s,l=et(o.get("x"),n.getWidth()),u=et(o.get("y"),n.getHeight());if(!isNaN(l)&&!isNaN(u))s=[l,u];else{if(i.getMarkerPosition)s=i.getMarkerPosition(e.getValues(e.dimensions,t));else{var c=a.dimensions,h=e.get(c[0],t),d=e.get(c[1],t);s=a.dataToPoint([h,d])}if(rm(a,"cartesian2d")){var f=a.getAxis("x"),p=a.getAxis("y"),c=a.dimensions;hS(e.get(c[0],t))?s[0]=f.toGlobalCoord(f.getExtent()[r?0:1]):hS(e.get(c[1],t))&&(s[1]=p.toGlobalCoord(p.getExtent()[r?0:1]))}isNaN(l)||(s[0]=l),isNaN(u)||(s[1]=u)}e.setItemLayout(t,s)}var NFe=function(e){_e(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r}return t.prototype.updateTransform=function(r,i,n){i.eachSeries(function(a){var o=wd.getMarkerModelFromSeries(a,"markLine");if(o){var s=o.getData(),l=d_(o).from,u=d_(o).to;l.each(function(c){TT(l,c,!0,a,n),TT(u,c,!1,a,n)}),s.each(function(c){s.setItemLayout(c,[l.getItemLayout(c),u.getItemLayout(c)])}),this.markerGroupMap.get(a.id).updateLayout()}},this)},t.prototype.renderSeries=function(r,i,n,a){var o=r.coordinateSystem,s=r.id,l=r.getData(),u=this.markerGroupMap,c=u.get(s)||u.set(s,new pV);this.group.add(c.group);var h=VFe(o,r,i),d=h.from,f=h.to,p=h.line;d_(i).from=d,d_(i).to=f,i.setData(p);var v=i.get("symbol"),m=i.get("symbolSize"),g=i.get("symbolRotate"),y=i.get("symbolOffset");Ue(v)||(v=[v,v]),Ue(m)||(m=[m,m]),Ue(g)||(g=[g,g]),Ue(y)||(y=[y,y]),h.from.each(function(b){x(d,b,!0),x(f,b,!1)}),p.each(function(b){var _=p.getItemModel(b).getModel("lineStyle").getLineStyle();p.setItemLayout(b,[d.getItemLayout(b),f.getItemLayout(b)]),_.stroke==null&&(_.stroke=d.getItemVisual(b,"style").fill),p.setItemVisual(b,{fromSymbolKeepAspect:d.getItemVisual(b,"symbolKeepAspect"),fromSymbolOffset:d.getItemVisual(b,"symbolOffset"),fromSymbolRotate:d.getItemVisual(b,"symbolRotate"),fromSymbolSize:d.getItemVisual(b,"symbolSize"),fromSymbol:d.getItemVisual(b,"symbol"),toSymbolKeepAspect:f.getItemVisual(b,"symbolKeepAspect"),toSymbolOffset:f.getItemVisual(b,"symbolOffset"),toSymbolRotate:f.getItemVisual(b,"symbolRotate"),toSymbolSize:f.getItemVisual(b,"symbolSize"),toSymbol:f.getItemVisual(b,"symbol"),style:_})}),c.updateData(p),h.line.eachItemGraphicEl(function(b){Dt(b).dataModel=i,b.traverse(function(_){Dt(_).dataModel=i})});function x(b,_,w){var S=b.getItemModel(_);TT(b,_,w,r,a);var A=S.getModel("itemStyle").getItemStyle();A.fill==null&&(A.fill=m4(l,"color")),b.setItemVisual(_,{symbolKeepAspect:S.get("symbolKeepAspect"),symbolOffset:Lt(S.get("symbolOffset",!0),y[w?0:1]),symbolRotate:Lt(S.get("symbolRotate",!0),g[w?0:1]),symbolSize:Lt(S.get("symbolSize"),m[w?0:1]),symbol:Lt(S.get("symbol",!0),v[w?0:1]),style:A})}this.markKeep(c),c.group.silent=i.get("silent")||r.get("silent")},t.type="markLine",t}(WV);function VFe(e,t,r){var i;e?i=qe(e&&e.dimensions,function(u){var c=t.getData().getDimensionInfo(t.getData().mapDimension(u))||{};return Be(Be({},c),{name:u,ordinalMeta:null})}):i=[{name:"value",type:"float"}];var n=new Wo(i,r),a=new Wo(i,r),o=new Wo([],r),s=qe(r.get("data"),kt(OFe,t,e,r));e&&(s=ni(s,kt(BFe,e)));var l=Tfe(!!e,i);return n.initData(qe(s,function(u){return u[0]}),null,l),a.initData(qe(s,function(u){return u[1]}),null,l),o.initData(qe(s,function(u){return u[2]})),o.hasItemOption=!0,{from:n,to:a,line:o}}function FFe(e){e.registerComponentModel(RFe),e.registerComponentView(NFe),e.registerPreprocessor(function(t){GV(t.series,"markLine")&&(t.markLine=t.markLine||{})})}var zFe=function(e){_e(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r}return t.prototype.createMarkerModelFromSeries=function(r,i,n){return new t(r,i,n)},t.type="markArea",t.defaultOption={z:1,tooltip:{trigger:"item"},animation:!1,label:{show:!0,position:"top"},itemStyle:{borderWidth:0},emphasis:{label:{show:!0,position:"top"}}},t}(wd),f_=Pr(),HFe=function(e,t,r,i){var n=i[0],a=i[1];if(!(!n||!a)){var o=yw(e,n),s=yw(e,a),l=o.coord,u=s.coord;l[0]=xa(l[0],-1/0),l[1]=xa(l[1],-1/0),u[0]=xa(u[0],1/0),u[1]=xa(u[1],1/0);var c=qB([{},o,s]);return c.coord=[o.coord,s.coord],c.x0=o.x,c.y0=o.y,c.x1=s.x,c.y1=s.y,c}};function dS(e){return!isNaN(e)&&!isFinite(e)}function gZ(e,t,r,i){var n=1-e;return dS(t[n])&&dS(r[n])}function UFe(e,t){var r=t.coord[0],i=t.coord[1],n={coord:r,x:t.x0,y:t.y0},a={coord:i,x:t.x1,y:t.y1};return rm(e,"cartesian2d")?r&&i&&(gZ(1,r,i)||gZ(0,r,i))?!0:DFe(e,n,a):xw(e,n)||xw(e,a)}function yZ(e,t,r,i,n){var a=i.coordinateSystem,o=e.getItemModel(t),s,l=et(o.get(r[0]),n.getWidth()),u=et(o.get(r[1]),n.getHeight());if(!isNaN(l)&&!isNaN(u))s=[l,u];else{if(i.getMarkerPosition){var c=e.getValues(["x0","y0"],t),h=e.getValues(["x1","y1"],t),d=a.clampData(c),f=a.clampData(h),p=[];r[0]==="x0"?p[0]=d[0]>f[0]?h[0]:c[0]:p[0]=d[0]>f[0]?c[0]:h[0],r[1]==="y0"?p[1]=d[1]>f[1]?h[1]:c[1]:p[1]=d[1]>f[1]?c[1]:h[1],s=i.getMarkerPosition(p,r,!0)}else{var v=e.get(r[0],t),m=e.get(r[1],t),g=[v,m];a.clampData&&a.clampData(g,g),s=a.dataToPoint(g,!0)}if(rm(a,"cartesian2d")){var y=a.getAxis("x"),x=a.getAxis("y"),v=e.get(r[0],t),m=e.get(r[1],t);dS(v)?s[0]=y.toGlobalCoord(y.getExtent()[r[0]==="x0"?0:1]):dS(m)&&(s[1]=x.toGlobalCoord(x.getExtent()[r[1]==="y0"?0:1]))}isNaN(l)||(s[0]=l),isNaN(u)||(s[1]=u)}return s}var xZ=[["x0","y0"],["x1","y0"],["x1","y1"],["x0","y1"]],GFe=function(e){_e(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r}return t.prototype.updateTransform=function(r,i,n){i.eachSeries(function(a){var o=wd.getMarkerModelFromSeries(a,"markArea");if(o){var s=o.getData();s.each(function(l){var u=qe(xZ,function(h){return yZ(s,l,h,a,n)});s.setItemLayout(l,u);var c=s.getItemGraphicEl(l);c.setShape("points",u)})}},this)},t.prototype.renderSeries=function(r,i,n,a){var o=r.coordinateSystem,s=r.id,l=r.getData(),u=this.markerGroupMap,c=u.get(s)||u.set(s,{group:new Ct});this.group.add(c.group),this.markKeep(c);var h=jFe(o,r,i);i.setData(h),h.each(function(d){var f=qe(xZ,function(A){return yZ(h,d,A,r,a)}),p=o.getAxis("x").scale,v=o.getAxis("y").scale,m=p.getExtent(),g=v.getExtent(),y=[p.parse(h.get("x0",d)),p.parse(h.get("x1",d))],x=[v.parse(h.get("y0",d)),v.parse(h.get("y1",d))];Ml(y),Ml(x);var b=!(m[0]>y[1]||m[1]<y[0]||g[0]>x[1]||g[1]<x[0]),_=!b;h.setItemLayout(d,{points:f,allClipped:_});var w=h.getItemModel(d).getModel("itemStyle").getItemStyle(),S=m4(l,"color");w.fill||(w.fill=S,it(w.fill)&&(w.fill=T8(w.fill,.4))),w.stroke||(w.stroke=S),h.setItemVisual(d,"style",w)}),h.diff(f_(c).data).add(function(d){var f=h.getItemLayout(d);if(!f.allClipped){var p=new Qo({shape:{points:f.points}});h.setItemGraphicEl(d,p),c.group.add(p)}}).update(function(d,f){var p=f_(c).data.getItemGraphicEl(f),v=h.getItemLayout(d);v.allClipped?p&&c.group.remove(p):(p?Nr(p,{shape:{points:v.points}},i,d):p=new Qo({shape:{points:v.points}}),h.setItemGraphicEl(d,p),c.group.add(p))}).remove(function(d){var f=f_(c).data.getItemGraphicEl(d);c.group.remove(f)}).execute(),h.eachItemGraphicEl(function(d,f){var p=h.getItemModel(f),v=h.getItemVisual(f,"style");d.useStyle(h.getItemVisual(f,"style")),Xa(d,ia(p),{labelFetcher:i,labelDataIndex:f,defaultText:h.getName(f)||"",inheritColor:it(v.fill)?T8(v.fill,1):"#000"}),Ya(d,p),Ji(d,null,null,p.get(["emphasis","disabled"])),Dt(d).dataModel=i}),f_(c).data=h,c.group.silent=i.get("silent")||r.get("silent")},t.type="markArea",t}(WV);function jFe(e,t,r){var i,n,a=["x0","y0","x1","y1"];if(e){var o=qe(e&&e.dimensions,function(u){var c=t.getData(),h=c.getDimensionInfo(c.mapDimension(u))||{};return Be(Be({},h),{name:u,ordinalMeta:null})});n=qe(a,function(u,c){return{name:u,type:o[c%2].type}}),i=new Wo(n,r)}else n=[{name:"value",type:"float"}],i=new Wo(n,r);var s=qe(r.get("data"),kt(HFe,t,e,r));e&&(s=ni(s,kt(UFe,e)));var l=e?function(u,c,h,d){var f=u.coord[Math.floor(d/2)][d%2];return ep(f,n[d])}:function(u,c,h,d){return ep(u.value,n[d])};return i.initData(s,null,l),i.hasItemOption=!0,i}function WFe(e){e.registerComponentModel(zFe),e.registerComponentView(GFe),e.registerPreprocessor(function(t){GV(t.series,"markArea")&&(t.markArea=t.markArea||{})})}var qFe=function(e,t){if(t==="all")return{type:"all",title:e.getLocaleModel().get(["legend","selector","all"])};if(t==="inverse")return{type:"inverse",title:e.getLocaleModel().get(["legend","selector","inverse"])}},mk=function(e){_e(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r.layoutMode={type:"box",ignoreSize:!0},r}return t.prototype.init=function(r,i,n){this.mergeDefaultAndTheme(r,n),r.selected=r.selected||{},this._updateSelector(r)},t.prototype.mergeOption=function(r,i){e.prototype.mergeOption.call(this,r,i),this._updateSelector(r)},t.prototype._updateSelector=function(r){var i=r.selector,n=this.ecModel;i===!0&&(i=r.selector=["all","inverse"]),Ue(i)&&q(i,function(a,o){it(a)&&(a={type:a}),i[o]=Wt(a,qFe(n,a.type))})},t.prototype.optionUpdated=function(){this._updateData(this.ecModel);var r=this._data;if(r[0]&&this.get("selectedMode")==="single"){for(var i=!1,n=0;n<r.length;n++){var a=r[n].get("name");if(this.isSelected(a)){this.select(a),i=!0;break}}!i&&this.select(r[0].get("name"))}},t.prototype._updateData=function(r){var i=[],n=[];r.eachRawSeries(function(l){var u=l.name;n.push(u);var c;if(l.legendVisualProvider){var h=l.legendVisualProvider,d=h.getAllNames();r.isSeriesFiltered(l)||(n=n.concat(d)),d.length?i=i.concat(d):c=!0}else c=!0;c&&rN(l)&&i.push(l.name)}),this._availableNames=n;var a=this.get("data")||i,o=dt(),s=qe(a,function(l){return(it(l)||kr(l))&&(l={name:l}),o.get(l.name)?null:(o.set(l.name,!0),new Qr(l,this,this.ecModel))},this);this._data=ni(s,function(l){return!!l})},t.prototype.getData=function(){return this._data},t.prototype.select=function(r){var i=this.option.selected,n=this.get("selectedMode");if(n==="single"){var a=this._data;q(a,function(o){i[o.get("name")]=!1})}i[r]=!0},t.prototype.unSelect=function(r){this.get("selectedMode")!=="single"&&(this.option.selected[r]=!1)},t.prototype.toggleSelected=function(r){var i=this.option.selected;i.hasOwnProperty(r)||(i[r]=!0),this[i[r]?"unSelect":"select"](r)},t.prototype.allSelect=function(){var r=this._data,i=this.option.selected;q(r,function(n){i[n.get("name",!0)]=!0})},t.prototype.inverseSelect=function(){var r=this._data,i=this.option.selected;q(r,function(n){var a=n.get("name",!0);i.hasOwnProperty(a)||(i[a]=!0),i[a]=!i[a]})},t.prototype.isSelected=function(r){var i=this.option.selected;return!(i.hasOwnProperty(r)&&!i[r])&&tr(this._availableNames,r)>=0},t.prototype.getOrient=function(){return this.get("orient")==="vertical"?{index:1,name:"vertical"}:{index:0,name:"horizontal"}},t.type="legend.plain",t.dependencies=["series"],t.defaultOption={z:4,show:!0,orient:"horizontal",left:"center",top:0,align:"auto",backgroundColor:"rgba(0,0,0,0)",borderColor:"#ccc",borderRadius:0,borderWidth:0,padding:5,itemGap:10,itemWidth:25,itemHeight:14,symbolRotate:"inherit",symbolKeepAspect:!0,inactiveColor:"#ccc",inactiveBorderColor:"#ccc",inactiveBorderWidth:"auto",itemStyle:{color:"inherit",opacity:"inherit",borderColor:"inherit",borderWidth:"auto",borderCap:"inherit",borderJoin:"inherit",borderDashOffset:"inherit",borderMiterLimit:"inherit"},lineStyle:{width:"auto",color:"inherit",inactiveColor:"#ccc",inactiveWidth:2,opacity:"inherit",type:"inherit",cap:"inherit",join:"inherit",dashOffset:"inherit",miterLimit:"inherit"},textStyle:{color:"#333"},selectedMode:!0,selector:!1,selectorLabel:{show:!0,borderRadius:10,padding:[3,5,3,5],fontSize:12,fontFamily:"sans-serif",color:"#666",borderWidth:1,borderColor:"#666"},emphasis:{selectorLabel:{show:!0,color:"#eee",backgroundColor:"#666"}},selectorPosition:"auto",selectorItemGap:7,selectorButtonGap:10,tooltip:{show:!1}},t}(vr),Nm=kt,gk=q,p_=Ct,Pfe=function(e){_e(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r.newlineDisabled=!1,r}return t.prototype.init=function(){this.group.add(this._contentGroup=new p_),this.group.add(this._selectorGroup=new p_),this._isFirstRender=!0},t.prototype.getContentGroup=function(){return this._contentGroup},t.prototype.getSelectorGroup=function(){return this._selectorGroup},t.prototype.render=function(r,i,n){var a=this._isFirstRender;if(this._isFirstRender=!1,this.resetInner(),!!r.get("show",!0)){var o=r.get("align"),s=r.get("orient");(!o||o==="auto")&&(o=r.get("left")==="right"&&s==="vertical"?"right":"left");var l=r.get("selector",!0),u=r.get("selectorPosition",!0);l&&(!u||u==="auto")&&(u=s==="horizontal"?"end":"start"),this.renderInner(o,r,i,n,l,s,u);var c=r.getBoxLayoutParams(),h={width:n.getWidth(),height:n.getHeight()},d=r.get("padding"),f=zn(c,h,d),p=this.layoutInner(r,o,f,a,l,u),v=zn(bt({width:p.width,height:p.height},c),h,d);this.group.x=v.x-p.x,this.group.y=v.y-p.y,this.group.markRedraw(),this.group.add(this._backgroundEl=gfe(p,r))}},t.prototype.resetInner=function(){this.getContentGroup().removeAll(),this._backgroundEl&&this.group.remove(this._backgroundEl),this.getSelectorGroup().removeAll()},t.prototype.renderInner=function(r,i,n,a,o,s,l){var u=this.getContentGroup(),c=dt(),h=i.get("selectedMode"),d=[];n.eachRawSeries(function(f){!f.get("legendHoverLink")&&d.push(f.id)}),gk(i.getData(),function(f,p){var v=f.get("name");if(!this.newlineDisabled&&(v===""||v===`
`)){var m=new p_;m.newline=!0,u.add(m);return}var g=n.getSeriesByName(v)[0];if(!c.get(v))if(g){var y=g.getData(),x=y.getVisual("legendLineStyle")||{},b=y.getVisual("legendIcon"),_=y.getVisual("style"),w=this._createItem(g,v,p,f,i,r,x,_,b,h,a);w.on("click",Nm(bZ,v,null,a,d)).on("mouseover",Nm(yk,g.name,null,a,d)).on("mouseout",Nm(xk,g.name,null,a,d)),n.ssr&&w.eachChild(function(S){var A=Dt(S);A.seriesIndex=g.seriesIndex,A.dataIndex=p,A.ssrType="legend"}),c.set(v,!0)}else n.eachRawSeries(function(S){if(!c.get(v)&&S.legendVisualProvider){var A=S.legendVisualProvider;if(!A.containName(v))return;var M=A.indexOfName(v),E=A.getItemVisual(M,"style"),T=A.getItemVisual(M,"legendIcon"),L=Ws(E.fill);L&&L[3]===0&&(L[3]=.2,E=Be(Be({},E),{fill:sd(L,"rgba")}));var P=this._createItem(S,v,p,f,i,r,{},E,T,h,a);P.on("click",Nm(bZ,null,v,a,d)).on("mouseover",Nm(yk,null,v,a,d)).on("mouseout",Nm(xk,null,v,a,d)),n.ssr&&P.eachChild(function(C){var D=Dt(C);D.seriesIndex=S.seriesIndex,D.dataIndex=p,D.ssrType="legend"}),c.set(v,!0)}},this)},this),o&&this._createSelector(o,i,a,s,l)},t.prototype._createSelector=function(r,i,n,a,o){var s=this.getSelectorGroup();gk(r,function(u){var c=u.type,h=new Dr({style:{x:0,y:0,align:"center",verticalAlign:"middle"},onclick:function(){n.dispatchAction({type:c==="all"?"legendAllSelect":"legendInverseSelect"})}});s.add(h);var d=i.getModel("selectorLabel"),f=i.getModel(["emphasis","selectorLabel"]);Xa(h,{normal:d,emphasis:f},{defaultText:u.title}),gv(h)})},t.prototype._createItem=function(r,i,n,a,o,s,l,u,c,h,d){var f=r.visualDrawType,p=o.get("itemWidth"),v=o.get("itemHeight"),m=o.isSelected(i),g=a.get("symbolRotate"),y=a.get("symbolKeepAspect"),x=a.get("icon");c=x||c||"roundRect";var b=YFe(c,a,l,u,f,m,d),_=new p_,w=a.getModel("textStyle");if(xt(r.getLegendIcon)&&(!x||x==="inherit"))_.add(r.getLegendIcon({itemWidth:p,itemHeight:v,icon:c,iconRotate:g,itemStyle:b.itemStyle,lineStyle:b.lineStyle,symbolKeepAspect:y}));else{var S=x==="inherit"&&r.getData().getVisual("symbol")?g==="inherit"?r.getData().getVisual("symbolRotate"):g:0;_.add(XFe({itemWidth:p,itemHeight:v,icon:c,iconRotate:S,itemStyle:b.itemStyle,lineStyle:b.lineStyle,symbolKeepAspect:y}))}var A=s==="left"?p+5:-5,M=s,E=o.get("formatter"),T=i;it(E)&&E?T=E.replace("{name}",i??""):xt(E)&&(T=E(i));var L=m?w.getTextColor():a.get("inactiveColor");_.add(new Dr({style:Ti(w,{text:T,x:A,y:v/2,fill:L,align:M,verticalAlign:"middle"},{inheritColor:L})}));var P=new Tr({shape:_.getBoundingRect(),style:{fill:"transparent"}}),C=a.getModel("tooltip");return C.get("show")&&Ey({el:P,componentModel:o,itemName:i,itemTooltipOption:C.option}),_.add(P),_.eachChild(function(D){D.silent=!0}),P.silent=!h,this.getContentGroup().add(_),gv(_),_.__legendDataIndex=n,_},t.prototype.layoutInner=function(r,i,n,a,o,s){var l=this.getContentGroup(),u=this.getSelectorGroup();xv(r.get("orient"),l,r.get("itemGap"),n.width,n.height);var c=l.getBoundingRect(),h=[-c.x,-c.y];if(u.markRedraw(),l.markRedraw(),o){xv("horizontal",u,r.get("selectorItemGap",!0));var d=u.getBoundingRect(),f=[-d.x,-d.y],p=r.get("selectorButtonGap",!0),v=r.getOrient().index,m=v===0?"width":"height",g=v===0?"height":"width",y=v===0?"y":"x";s==="end"?f[v]+=c[m]+p:h[v]+=d[m]+p,f[1-v]+=c[g]/2-d[g]/2,u.x=f[0],u.y=f[1],l.x=h[0],l.y=h[1];var x={x:0,y:0};return x[m]=c[m]+p+d[m],x[g]=Math.max(c[g],d[g]),x[y]=Math.min(0,d[y]+f[1-v]),x}else return l.x=h[0],l.y=h[1],this.group.getBoundingRect()},t.prototype.remove=function(){this.getContentGroup().removeAll(),this._isFirstRender=!0},t.type="legend.plain",t}(Gi);function YFe(e,t,r,i,n,a,o){function s(m,g){m.lineWidth==="auto"&&(m.lineWidth=g.lineWidth>0?2:0),gk(m,function(y,x){m[x]==="inherit"&&(m[x]=g[x])})}var l=t.getModel("itemStyle"),u=l.getItemStyle(),c=e.lastIndexOf("empty",0)===0?"fill":"stroke",h=l.getShallow("decal");u.decal=!h||h==="inherit"?i.decal:z1(h,o),u.fill==="inherit"&&(u.fill=i[n]),u.stroke==="inherit"&&(u.stroke=i[c]),u.opacity==="inherit"&&(u.opacity=(n==="fill"?i:r).opacity),s(u,i);var d=t.getModel("lineStyle"),f=d.getLineStyle();if(s(f,r),u.fill==="auto"&&(u.fill=i.fill),u.stroke==="auto"&&(u.stroke=i.fill),f.stroke==="auto"&&(f.stroke=i.fill),!a){var p=t.get("inactiveBorderWidth"),v=u[c];u.lineWidth=p==="auto"?i.lineWidth>0&&v?2:0:u.lineWidth,u.fill=t.get("inactiveColor"),u.stroke=t.get("inactiveBorderColor"),f.stroke=d.get("inactiveColor"),f.lineWidth=d.get("inactiveWidth")}return{itemStyle:u,lineStyle:f}}function XFe(e){var t=e.icon||"roundRect",r=Sn(t,0,0,e.itemWidth,e.itemHeight,e.itemStyle.fill,e.symbolKeepAspect);return r.setStyle(e.itemStyle),r.rotation=(e.iconRotate||0)*Math.PI/180,r.setOrigin([e.itemWidth/2,e.itemHeight/2]),t.indexOf("empty")>-1&&(r.style.stroke=r.style.fill,r.style.fill="#fff",r.style.lineWidth=2),r}function bZ(e,t,r,i){xk(e,t,r,i),r.dispatchAction({type:"legendToggleSelect",name:e??t}),yk(e,t,r,i)}function Dfe(e){for(var t=e.getZr().storage.getDisplayList(),r,i=0,n=t.length;i<n&&!(r=t[i].states.emphasis);)i++;return r&&r.hoverLayer}function yk(e,t,r,i){Dfe(r)||r.dispatchAction({type:"highlight",seriesName:e,name:t,excludeSeriesId:i})}function xk(e,t,r,i){Dfe(r)||r.dispatchAction({type:"downplay",seriesName:e,name:t,excludeSeriesId:i})}function ZFe(e){var t=e.findComponents({mainType:"legend"});t&&t.length&&e.filterSeries(function(r){for(var i=0;i<t.length;i++)if(!t[i].isSelected(r.name))return!1;return!0})}function F2(e,t,r){var i={},n=e==="toggleSelected",a;return r.eachComponent("legend",function(o){n&&a!=null?o[a?"select":"unSelect"](t.name):e==="allSelect"||e==="inverseSelect"?o[e]():(o[e](t.name),a=o.isSelected(t.name));var s=o.getData();q(s,function(l){var u=l.get("name");if(!(u===`
`||u==="")){var c=o.isSelected(u);i.hasOwnProperty(u)?i[u]=i[u]&&c:i[u]=c}})}),e==="allSelect"||e==="inverseSelect"?{selected:i}:{name:t.name,selected:i}}function QFe(e){e.registerAction("legendToggleSelect","legendselectchanged",kt(F2,"toggleSelected")),e.registerAction("legendAllSelect","legendselectall",kt(F2,"allSelect")),e.registerAction("legendInverseSelect","legendinverseselect",kt(F2,"inverseSelect")),e.registerAction("legendSelect","legendselected",kt(F2,"select")),e.registerAction("legendUnSelect","legendunselected",kt(F2,"unSelect"))}function Ife(e){e.registerComponentModel(mk),e.registerComponentView(Pfe),e.registerProcessor(e.PRIORITY.PROCESSOR.SERIES_FILTER,ZFe),e.registerSubTypeDefaulter("legend",function(){return"plain"}),QFe(e)}var KFe=function(e){_e(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r}return t.prototype.setScrollDataIndex=function(r){this.option.scrollDataIndex=r},t.prototype.init=function(r,i,n){var a=Dy(r);e.prototype.init.call(this,r,i,n),wZ(this,r,a)},t.prototype.mergeOption=function(r,i){e.prototype.mergeOption.call(this,r,i),wZ(this,this.option,r)},t.type="legend.scroll",t.defaultOption=Mp(mk.defaultOption,{scrollDataIndex:0,pageButtonItemGap:5,pageButtonGap:null,pageButtonPosition:"end",pageFormatter:"{current}/{total}",pageIcons:{horizontal:["M0,0L12,-10L12,10z","M0,0L-12,-10L-12,10z"],vertical:["M0,0L20,0L10,-20z","M0,0L20,0L10,20z"]},pageIconColor:"#2f4554",pageIconInactiveColor:"#aaa",pageIconSize:15,pageTextStyle:{color:"#333"},animationDurationUpdate:800}),t}(mk);function wZ(e,t,r){var i=e.getOrient(),n=[1,1];n[i.index]=0,pp(t,r,{type:"box",ignoreSize:!!n})}var _Z=Ct,PT=["width","height"],DT=["x","y"],JFe=function(e){_e(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r.newlineDisabled=!0,r._currentIndex=0,r}return t.prototype.init=function(){e.prototype.init.call(this),this.group.add(this._containerGroup=new _Z),this._containerGroup.add(this.getContentGroup()),this.group.add(this._controllerGroup=new _Z)},t.prototype.resetInner=function(){e.prototype.resetInner.call(this),this._controllerGroup.removeAll(),this._containerGroup.removeClipPath(),this._containerGroup.__rectSize=null},t.prototype.renderInner=function(r,i,n,a,o,s,l){var u=this;e.prototype.renderInner.call(this,r,i,n,a,o,s,l);var c=this._controllerGroup,h=i.get("pageIconSize",!0),d=Ue(h)?h:[h,h];p("pagePrev",0);var f=i.getModel("pageTextStyle");c.add(new Dr({name:"pageText",style:{text:"xx/xx",fill:f.getTextColor(),font:f.getFont(),verticalAlign:"middle",align:"center"},silent:!0})),p("pageNext",1);function p(v,m){var g=v+"DataIndex",y=p4(i.get("pageIcons",!0)[i.getOrient().name][m],{onclick:at(u._pageGo,u,g,i,a)},{x:-d[0]/2,y:-d[1]/2,width:d[0],height:d[1]});y.name=v,c.add(y)}},t.prototype.layoutInner=function(r,i,n,a,o,s){var l=this.getSelectorGroup(),u=r.getOrient().index,c=PT[u],h=DT[u],d=PT[1-u],f=DT[1-u];o&&xv("horizontal",l,r.get("selectorItemGap",!0));var p=r.get("selectorButtonGap",!0),v=l.getBoundingRect(),m=[-v.x,-v.y],g=At(n);o&&(g[c]=n[c]-v[c]-p);var y=this._layoutContentAndController(r,a,g,u,c,d,f,h);if(o){if(s==="end")m[u]+=y[c]+p;else{var x=v[c]+p;m[u]-=x,y[h]-=x}y[c]+=v[c]+p,m[1-u]+=y[f]+y[d]/2-v[d]/2,y[d]=Math.max(y[d],v[d]),y[f]=Math.min(y[f],v[f]+m[1-u]),l.x=m[0],l.y=m[1],l.markRedraw()}return y},t.prototype._layoutContentAndController=function(r,i,n,a,o,s,l,u){var c=this.getContentGroup(),h=this._containerGroup,d=this._controllerGroup;xv(r.get("orient"),c,r.get("itemGap"),a?n.width:null,a?null:n.height),xv("horizontal",d,r.get("pageButtonItemGap",!0));var f=c.getBoundingRect(),p=d.getBoundingRect(),v=this._showController=f[o]>n[o],m=[-f.x,-f.y];i||(m[a]=c[u]);var g=[0,0],y=[-p.x,-p.y],x=Lt(r.get("pageButtonGap",!0),r.get("itemGap",!0));if(v){var b=r.get("pageButtonPosition",!0);b==="end"?y[a]+=n[o]-p[o]:g[a]+=p[o]+x}y[1-a]+=f[s]/2-p[s]/2,c.setPosition(m),h.setPosition(g),d.setPosition(y);var _={x:0,y:0};if(_[o]=v?n[o]:f[o],_[s]=Math.max(f[s],p[s]),_[l]=Math.min(0,p[l]+y[1-a]),h.__rectSize=n[o],v){var w={x:0,y:0};w[o]=Math.max(n[o]-p[o]-x,0),w[s]=_[s],h.setClipPath(new Tr({shape:w})),h.__rectSize=w[o]}else d.eachChild(function(A){A.attr({invisible:!0,silent:!0})});var S=this._getPageInfo(r);return S.pageIndex!=null&&Nr(c,{x:S.contentPosition[0],y:S.contentPosition[1]},v?r:null),this._updatePageInfoView(r,S),_},t.prototype._pageGo=function(r,i,n){var a=this._getPageInfo(i)[r];a!=null&&n.dispatchAction({type:"legendScroll",scrollDataIndex:a,legendId:i.id})},t.prototype._updatePageInfoView=function(r,i){var n=this._controllerGroup;q(["pagePrev","pageNext"],function(c){var h=c+"DataIndex",d=i[h]!=null,f=n.childOfName(c);f&&(f.setStyle("fill",d?r.get("pageIconColor",!0):r.get("pageIconInactiveColor",!0)),f.cursor=d?"pointer":"default")});var a=n.childOfName("pageText"),o=r.get("pageFormatter"),s=i.pageIndex,l=s!=null?s+1:0,u=i.pageCount;a&&o&&a.setStyle("text",it(o)?o.replace("{current}",l==null?"":l+"").replace("{total}",u==null?"":u+""):o({current:l,total:u}))},t.prototype._getPageInfo=function(r){var i=r.get("scrollDataIndex",!0),n=this.getContentGroup(),a=this._containerGroup.__rectSize,o=r.getOrient().index,s=PT[o],l=DT[o],u=this._findTargetItemIndex(i),c=n.children(),h=c[u],d=c.length,f=d?1:0,p={contentPosition:[n.x,n.y],pageCount:f,pageIndex:f-1,pagePrevDataIndex:null,pageNextDataIndex:null};if(!h)return p;var v=b(h);p.contentPosition[o]=-v.s;for(var m=u+1,g=v,y=v,x=null;m<=d;++m)x=b(c[m]),(!x&&y.e>g.s+a||x&&!_(x,g.s))&&(y.i>g.i?g=y:g=x,g&&(p.pageNextDataIndex==null&&(p.pageNextDataIndex=g.i),++p.pageCount)),y=x;for(var m=u-1,g=v,y=v,x=null;m>=-1;--m)x=b(c[m]),(!x||!_(y,x.s))&&g.i<y.i&&(y=g,p.pagePrevDataIndex==null&&(p.pagePrevDataIndex=g.i),++p.pageCount,++p.pageIndex),g=x;return p;function b(w){if(w){var S=w.getBoundingRect(),A=S[l]+w[l];return{s:A,e:A+S[s],i:w.__legendDataIndex}}}function _(w,S){return w.e>=S&&w.s<=S+a}},t.prototype._findTargetItemIndex=function(r){if(!this._showController)return 0;var i,n=this.getContentGroup(),a;return n.eachChild(function(o,s){var l=o.__legendDataIndex;a==null&&l!=null&&(a=s),l===r&&(i=s)}),i??a},t.type="legend.scroll",t}(Pfe);function $Fe(e){e.registerAction("legendScroll","legendscroll",function(t,r){var i=t.scrollDataIndex;i!=null&&r.eachComponent({mainType:"legend",subType:"scroll",query:t},function(n){n.setScrollDataIndex(i)})})}function eze(e){ir(Ife),e.registerComponentModel(KFe),e.registerComponentView(JFe),$Fe(e)}function tze(e){ir(Ife),ir(eze)}var rze=function(e){_e(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r}return t.type="dataZoom.inside",t.defaultOption=Mp(gw.defaultOption,{disabled:!1,zoomLock:!1,zoomOnMouseWheel:!0,moveOnMouseMove:!0,moveOnMouseWheel:!1,preventDefaultMouseMove:!0}),t}(gw),qV=Pr();function ize(e,t,r){qV(e).coordSysRecordMap.each(function(i){var n=i.dataZoomInfoMap.get(t.uid);n&&(n.getRange=r)})}function nze(e,t){for(var r=qV(e).coordSysRecordMap,i=r.keys(),n=0;n<i.length;n++){var a=i[n],o=r.get(a),s=o.dataZoomInfoMap;if(s){var l=t.uid,u=s.get(l);u&&(s.removeKey(l),s.keys().length||Lfe(r,o))}}}function Lfe(e,t){if(t){e.removeKey(t.model.uid);var r=t.controller;r&&r.dispose()}}function aze(e,t){var r={model:t,containsPoint:kt(sze,t),dispatchAction:kt(oze,e),dataZoomInfoMap:null,controller:null},i=r.controller=new C4(e.getZr());return q(["pan","zoom","scrollMove"],function(n){i.on(n,function(a){var o=[];r.dataZoomInfoMap.each(function(s){if(a.isAvailableBehavior(s.model.option)){var l=(s.getRange||{})[n],u=l&&l(s.dzReferCoordSysInfo,r.model.mainType,r.controller,a);!s.model.get("disabled",!0)&&u&&o.push({dataZoomId:s.model.id,start:u[0],end:u[1]})}}),o.length&&r.dispatchAction(o)})}),r}function oze(e,t){e.isDisposed()||e.dispatchAction({type:"dataZoom",animation:{easing:"cubicOut",duration:100},batch:t})}function sze(e,t,r,i){return e.coordinateSystem.containPoint([r,i])}function lze(e){var t,r="type_",i={type_true:2,type_move:1,type_false:0,type_undefined:-1},n=!0;return e.each(function(a){var o=a.model,s=o.get("disabled",!0)?!1:o.get("zoomLock",!0)?"move":!0;i[r+s]>i[r+t]&&(t=s),n=n&&o.get("preventDefaultMouseMove",!0)}),{controlType:t,opt:{zoomOnMouseWheel:!0,moveOnMouseMove:!0,moveOnMouseWheel:!0,preventDefaultMouseMove:!!n}}}function uze(e){e.registerProcessor(e.PRIORITY.PROCESSOR.FILTER,function(t,r){var i=qV(r),n=i.coordSysRecordMap||(i.coordSysRecordMap=dt());n.each(function(a){a.dataZoomInfoMap=null}),t.eachComponent({mainType:"dataZoom",subType:"inside"},function(a){var o=pfe(a);q(o.infoList,function(s){var l=s.model.uid,u=n.get(l)||n.set(l,aze(r,s.model)),c=u.dataZoomInfoMap||(u.dataZoomInfoMap=dt());c.set(a.uid,{dzReferCoordSysInfo:s,model:a,getRange:null})})}),n.each(function(a){var o=a.controller,s,l=a.dataZoomInfoMap;if(l){var u=l.keys()[0];u!=null&&(s=l.get(u))}if(!s){Lfe(n,a);return}var c=lze(l);o.enable(c.controlType,c.opt),o.setPointerChecker(a.containsPoint),ky(a,"dispatchAction",s.model.get("throttle",!0),"fixRate")})})}var cze=function(e){_e(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type="dataZoom.inside",r}return t.prototype.render=function(r,i,n){if(e.prototype.render.apply(this,arguments),r.noTarget()){this._clear();return}this.range=r.getPercentRange(),ize(n,r,{pan:at(IT.pan,this),zoom:at(IT.zoom,this),scrollMove:at(IT.scrollMove,this)})},t.prototype.dispose=function(){this._clear(),e.prototype.dispose.apply(this,arguments)},t.prototype._clear=function(){nze(this.api,this.dataZoomModel),this.range=null},t.type="dataZoom.inside",t}(NV),IT={zoom:function(e,t,r,i){var n=this.range,a=n.slice(),o=e.axisModels[0];if(o){var s=LT[t](null,[i.originX,i.originY],o,r,e),l=(s.signal>0?s.pixelStart+s.pixelLength-s.pixel:s.pixel-s.pixelStart)/s.pixelLength*(a[1]-a[0])+a[0],u=Math.max(1/i.scale,0);a[0]=(a[0]-l)*u+l,a[1]=(a[1]-l)*u+l;var c=this.dataZoomModel.findRepresentativeAxisProxy().getMinMaxSpan();if(nm(0,a,[0,100],0,c.minSpan,c.maxSpan),this.range=a,n[0]!==a[0]||n[1]!==a[1])return a}},pan:AZ(function(e,t,r,i,n,a){var o=LT[i]([a.oldX,a.oldY],[a.newX,a.newY],t,n,r);return o.signal*(e[1]-e[0])*o.pixel/o.pixelLength}),scrollMove:AZ(function(e,t,r,i,n,a){var o=LT[i]([0,0],[a.scrollDelta,a.scrollDelta],t,n,r);return o.signal*(e[1]-e[0])*a.scrollDelta})};function AZ(e){return function(t,r,i,n){var a=this.range,o=a.slice(),s=t.axisModels[0];if(s){var l=e(o,s,t,r,i,n);if(nm(l,o,[0,100],"all"),this.range=o,a[0]!==o[0]||a[1]!==o[1])return o}}}var LT={grid:function(e,t,r,i,n){var a=r.axis,o={},s=n.model.coordinateSystem.getRect();return e=e||[0,0],a.dim==="x"?(o.pixel=t[0]-e[0],o.pixelLength=s.width,o.pixelStart=s.x,o.signal=a.inverse?1:-1):(o.pixel=t[1]-e[1],o.pixelLength=s.height,o.pixelStart=s.y,o.signal=a.inverse?-1:1),o},polar:function(e,t,r,i,n){var a=r.axis,o={},s=n.model.coordinateSystem,l=s.getRadiusAxis().getExtent(),u=s.getAngleAxis().getExtent();return e=e?s.pointToCoord(e):[0,0],t=s.pointToCoord(t),r.mainType==="radiusAxis"?(o.pixel=t[0]-e[0],o.pixelLength=l[1]-l[0],o.pixelStart=l[0],o.signal=a.inverse?1:-1):(o.pixel=t[1]-e[1],o.pixelLength=u[1]-u[0],o.pixelStart=u[0],o.signal=a.inverse?-1:1),o},singleAxis:function(e,t,r,i,n){var a=r.axis,o=n.model.coordinateSystem.getRect(),s={};return e=e||[0,0],a.orient==="horizontal"?(s.pixel=t[0]-e[0],s.pixelLength=o.width,s.pixelStart=o.x,s.signal=a.inverse?1:-1):(s.pixel=t[1]-e[1],s.pixelLength=o.height,s.pixelStart=o.y,s.signal=a.inverse?-1:1),s}};function kfe(e){VV(e),e.registerComponentModel(rze),e.registerComponentView(cze),uze(e)}var hze=function(e){_e(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r}return t.type="dataZoom.slider",t.layoutMode="box",t.defaultOption=Mp(gw.defaultOption,{show:!0,right:"ph",top:"ph",width:"ph",height:"ph",left:null,bottom:null,borderColor:"#d2dbee",borderRadius:3,backgroundColor:"rgba(47,69,84,0)",dataBackground:{lineStyle:{color:"#d2dbee",width:.5},areaStyle:{color:"#d2dbee",opacity:.2}},selectedDataBackground:{lineStyle:{color:"#8fb0f7",width:.5},areaStyle:{color:"#8fb0f7",opacity:.2}},fillerColor:"rgba(135,175,274,0.2)",handleIcon:"path://M-9.35,34.56V42m0-40V9.5m-2,0h4a2,2,0,0,1,2,2v21a2,2,0,0,1-2,2h-4a2,2,0,0,1-2-2v-21A2,2,0,0,1-11.35,9.5Z",handleSize:"100%",handleStyle:{color:"#fff",borderColor:"#ACB8D1"},moveHandleSize:7,moveHandleIcon:"path://M-320.9-50L-320.9-50c18.1,0,27.1,9,27.1,27.1V85.7c0,18.1-9,27.1-27.1,27.1l0,0c-18.1,0-27.1-9-27.1-27.1V-22.9C-348-41-339-50-320.9-50z M-212.3-50L-212.3-50c18.1,0,27.1,9,27.1,27.1V85.7c0,18.1-9,27.1-27.1,27.1l0,0c-18.1,0-27.1-9-27.1-27.1V-22.9C-239.4-41-230.4-50-212.3-50z M-103.7-50L-103.7-50c18.1,0,27.1,9,27.1,27.1V85.7c0,18.1-9,27.1-27.1,27.1l0,0c-18.1,0-27.1-9-27.1-27.1V-22.9C-130.9-41-121.8-50-103.7-50z",moveHandleStyle:{color:"#D2DBEE",opacity:.7},showDetail:!0,showDataShadow:"auto",realtime:!0,zoomLock:!1,textStyle:{color:"#6E7079"},brushSelect:!0,brushStyle:{color:"rgba(135,175,274,0.15)"},emphasis:{handleStyle:{borderColor:"#8FB0F7"},moveHandleStyle:{color:"#8FB0F7"}}}),t}(gw),z2=Tr,SZ=7,dze=1,kT=30,fze=7,H2="horizontal",CZ="vertical",pze=5,vze=["line","bar","candlestick","scatter"],mze={easing:"cubicOut",duration:100,delay:0},gze=function(e){_e(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r._displayables={},r}return t.prototype.init=function(r,i){this.api=i,this._onBrush=at(this._onBrush,this),this._onBrushEnd=at(this._onBrushEnd,this)},t.prototype.render=function(r,i,n,a){if(e.prototype.render.apply(this,arguments),ky(this,"_dispatchZoomAction",r.get("throttle"),"fixRate"),this._orient=r.getOrient(),r.get("show")===!1){this.group.removeAll();return}if(r.noTarget()){this._clear(),this.group.removeAll();return}(!a||a.type!=="dataZoom"||a.from!==this.uid)&&this._buildView(),this._updateView()},t.prototype.dispose=function(){this._clear(),e.prototype.dispose.apply(this,arguments)},t.prototype._clear=function(){nw(this,"_dispatchZoomAction");var r=this.api.getZr();r.off("mousemove",this._onBrush),r.off("mouseup",this._onBrushEnd)},t.prototype._buildView=function(){var r=this.group;r.removeAll(),this._brushing=!1,this._displayables.brushRect=null,this._resetLocation(),this._resetInterval();var i=this._displayables.sliderGroup=new Ct;this._renderBackground(),this._renderHandle(),this._renderDataShadow(),r.add(i),this._positionGroup()},t.prototype._resetLocation=function(){var r=this.dataZoomModel,i=this.api,n=r.get("brushSelect"),a=n?fze:0,o=this._findCoordRect(),s={width:i.getWidth(),height:i.getHeight()},l=this._orient===H2?{right:s.width-o.x-o.width,top:s.height-kT-SZ-a,width:o.width,height:kT}:{right:SZ,top:o.y,width:kT,height:o.height},u=Dy(r.option);q(["right","top","width","height"],function(h){u[h]==="ph"&&(u[h]=l[h])});var c=zn(u,s);this._location={x:c.x,y:c.y},this._size=[c.width,c.height],this._orient===CZ&&this._size.reverse()},t.prototype._positionGroup=function(){var r=this.group,i=this._location,n=this._orient,a=this.dataZoomModel.getFirstTargetAxisModel(),o=a&&a.get("inverse"),s=this._displayables.sliderGroup,l=(this._dataShadowInfo||{}).otherAxisInverse;s.attr(n===H2&&!o?{scaleY:l?1:-1,scaleX:1}:n===H2&&o?{scaleY:l?1:-1,scaleX:-1}:n===CZ&&!o?{scaleY:l?-1:1,scaleX:1,rotation:Math.PI/2}:{scaleY:l?-1:1,scaleX:-1,rotation:Math.PI/2});var u=r.getBoundingRect([s]);r.x=i.x-u.x,r.y=i.y-u.y,r.markRedraw()},t.prototype._getViewExtent=function(){return[0,this._size[0]]},t.prototype._renderBackground=function(){var r=this.dataZoomModel,i=this._size,n=this._displayables.sliderGroup,a=r.get("brushSelect");n.add(new z2({silent:!0,shape:{x:0,y:0,width:i[0],height:i[1]},style:{fill:r.get("backgroundColor")},z2:-40}));var o=new z2({shape:{x:0,y:0,width:i[0],height:i[1]},style:{fill:"transparent"},z2:0,onclick:at(this._onClickPanel,this)}),s=this.api.getZr();a?(o.on("mousedown",this._onBrushStart,this),o.cursor="crosshair",s.on("mousemove",this._onBrush),s.on("mouseup",this._onBrushEnd)):(s.off("mousemove",this._onBrush),s.off("mouseup",this._onBrushEnd)),n.add(o)},t.prototype._renderDataShadow=function(){var r=this._dataShadowInfo=this._prepareDataShadowInfo();if(this._displayables.dataShadowSegs=[],!r)return;var i=this._size,n=this._shadowSize||[],a=r.series,o=a.getRawData(),s=a.getShadowDim&&a.getShadowDim(),l=s&&o.getDimensionInfo(s)?a.getShadowDim():r.otherDim;if(l==null)return;var u=this._shadowPolygonPts,c=this._shadowPolylinePts;if(o!==this._shadowData||l!==this._shadowDim||i[0]!==n[0]||i[1]!==n[1]){var h=o.getDataExtent(l),d=(h[1]-h[0])*.3;h=[h[0]-d,h[1]+d];var f=[0,i[1]],p=[0,i[0]],v=[[i[0],0],[0,0]],m=[],g=p[1]/(o.count()-1),y=0,x=Math.round(o.count()/i[0]),b;o.each([l],function(M,E){if(x>0&&E%x){y+=g;return}var T=M==null||isNaN(M)||M==="",L=T?0:ti(M,h,f,!0);T&&!b&&E?(v.push([v[v.length-1][0],0]),m.push([m[m.length-1][0],0])):!T&&b&&(v.push([y,0]),m.push([y,0])),v.push([y,L]),m.push([y,L]),y+=g,b=T}),u=this._shadowPolygonPts=v,c=this._shadowPolylinePts=m}this._shadowData=o,this._shadowDim=l,this._shadowSize=[i[0],i[1]];var _=this.dataZoomModel;function w(M){var E=_.getModel(M?"selectedDataBackground":"dataBackground"),T=new Ct,L=new Qo({shape:{points:u},segmentIgnoreThreshold:1,style:E.getModel("areaStyle").getAreaStyle(),silent:!0,z2:-20}),P=new $o({shape:{points:c},segmentIgnoreThreshold:1,style:E.getModel("lineStyle").getLineStyle(),silent:!0,z2:-19});return T.add(L),T.add(P),T}for(var S=0;S<3;S++){var A=w(S===1);this._displayables.sliderGroup.add(A),this._displayables.dataShadowSegs.push(A)}},t.prototype._prepareDataShadowInfo=function(){var r=this.dataZoomModel,i=r.get("showDataShadow");if(i!==!1){var n,a=this.ecModel;return r.eachTargetAxis(function(o,s){var l=r.getAxisProxy(o,s).getTargetSeriesModels();q(l,function(u){if(!n&&!(i!==!0&&tr(vze,u.get("type"))<0)){var c=a.getComponent(Hf(o),s).axis,h=yze(o),d,f=u.coordinateSystem;h!=null&&f.getOtherAxis&&(d=f.getOtherAxis(c).inverse),h=u.getData().mapDimension(h),n={thisAxis:c,series:u,thisDim:o,otherDim:h,otherAxisInverse:d}}},this)},this),n}},t.prototype._renderHandle=function(){var r=this.group,i=this._displayables,n=i.handles=[null,null],a=i.handleLabels=[null,null],o=this._displayables.sliderGroup,s=this._size,l=this.dataZoomModel,u=this.api,c=l.get("borderRadius")||0,h=l.get("brushSelect"),d=i.filler=new z2({silent:h,style:{fill:l.get("fillerColor")},textConfig:{position:"inside"}});o.add(d),o.add(new z2({silent:!0,subPixelOptimize:!0,shape:{x:0,y:0,width:s[0],height:s[1],r:c},style:{stroke:l.get("dataBackgroundColor")||l.get("borderColor"),lineWidth:dze,fill:"rgba(0,0,0,0)"}})),q([0,1],function(x){var b=l.get("handleIcon");!G8[b]&&b.indexOf("path://")<0&&b.indexOf("image://")<0&&(b="path://"+b);var _=Sn(b,-1,0,2,2,null,!0);_.attr({cursor:EZ(this._orient),draggable:!0,drift:at(this._onDragMove,this,x),ondragend:at(this._onDragEnd,this),onmouseover:at(this._showDataInfo,this,!0),onmouseout:at(this._showDataInfo,this,!1),z2:5});var w=_.getBoundingRect(),S=l.get("handleSize");this._handleHeight=et(S,this._size[1]),this._handleWidth=w.width/w.height*this._handleHeight,_.setStyle(l.getModel("handleStyle").getItemStyle()),_.style.strokeNoScale=!0,_.rectHover=!0,_.ensureState("emphasis").style=l.getModel(["emphasis","handleStyle"]).getItemStyle(),gv(_);var A=l.get("handleColor");A!=null&&(_.style.fill=A),o.add(n[x]=_);var M=l.getModel("textStyle");r.add(a[x]=new Dr({silent:!0,invisible:!0,style:Ti(M,{x:0,y:0,text:"",verticalAlign:"middle",align:"center",fill:M.getTextColor(),font:M.getFont()}),z2:10}))},this);var f=d;if(h){var p=et(l.get("moveHandleSize"),s[1]),v=i.moveHandle=new Tr({style:l.getModel("moveHandleStyle").getItemStyle(),silent:!0,shape:{r:[0,0,2,2],y:s[1]-.5,height:p}}),m=p*.8,g=i.moveHandleIcon=Sn(l.get("moveHandleIcon"),-m/2,-m/2,m,m,"#fff",!0);g.silent=!0,g.y=s[1]+p/2-.5,v.ensureState("emphasis").style=l.getModel(["emphasis","moveHandleStyle"]).getItemStyle();var y=Math.min(s[1]/2,Math.max(p,10));f=i.moveZone=new Tr({invisible:!0,shape:{y:s[1]-y,height:p+y}}),f.on("mouseover",function(){u.enterEmphasis(v)}).on("mouseout",function(){u.leaveEmphasis(v)}),o.add(v),o.add(g),o.add(f)}f.attr({draggable:!0,cursor:EZ(this._orient),drift:at(this._onDragMove,this,"all"),ondragstart:at(this._showDataInfo,this,!0),ondragend:at(this._onDragEnd,this),onmouseover:at(this._showDataInfo,this,!0),onmouseout:at(this._showDataInfo,this,!1)})},t.prototype._resetInterval=function(){var r=this._range=this.dataZoomModel.getPercentRange(),i=this._getViewExtent();this._handleEnds=[ti(r[0],[0,100],i,!0),ti(r[1],[0,100],i,!0)]},t.prototype._updateInterval=function(r,i){var n=this.dataZoomModel,a=this._handleEnds,o=this._getViewExtent(),s=n.findRepresentativeAxisProxy().getMinMaxSpan(),l=[0,100];nm(i,a,o,n.get("zoomLock")?"all":r,s.minSpan!=null?ti(s.minSpan,l,o,!0):null,s.maxSpan!=null?ti(s.maxSpan,l,o,!0):null);var u=this._range,c=this._range=Ml([ti(a[0],o,l,!0),ti(a[1],o,l,!0)]);return!u||u[0]!==c[0]||u[1]!==c[1]},t.prototype._updateView=function(r){var i=this._displayables,n=this._handleEnds,a=Ml(n.slice()),o=this._size;q([0,1],function(f){var p=i.handles[f],v=this._handleHeight;p.attr({scaleX:v/2,scaleY:v/2,x:n[f]+(f?-1:1),y:o[1]/2-v/2})},this),i.filler.setShape({x:a[0],y:0,width:a[1]-a[0],height:o[1]});var s={x:a[0],width:a[1]-a[0]};i.moveHandle&&(i.moveHandle.setShape(s),i.moveZone.setShape(s),i.moveZone.getBoundingRect(),i.moveHandleIcon&&i.moveHandleIcon.attr("x",s.x+s.width/2));for(var l=i.dataShadowSegs,u=[0,a[0],a[1],o[0]],c=0;c<l.length;c++){var h=l[c],d=h.getClipPath();d||(d=new Tr,h.setClipPath(d)),d.setShape({x:u[c],y:0,width:u[c+1]-u[c],height:o[1]})}this._updateDataInfo(r)},t.prototype._updateDataInfo=function(r){var i=this.dataZoomModel,n=this._displayables,a=n.handleLabels,o=this._orient,s=["",""];if(i.get("showDetail")){var l=i.findRepresentativeAxisProxy();if(l){var u=l.getAxisModel().axis,c=this._range,h=r?l.calculateDataWindow({start:c[0],end:c[1]}).valueWindow:l.getDataValueWindow();s=[this._formatLabel(h[0],u),this._formatLabel(h[1],u)]}}var d=Ml(this._handleEnds.slice());f.call(this,0),f.call(this,1);function f(p){var v=yv(n.handles[p].parent,this.group),m=_C(p===0?"right":"left",v),g=this._handleWidth/2+pze,y=Au([d[p]+(p===0?-g:g),this._size[1]/2],v);a[p].setStyle({x:y[0],y:y[1],verticalAlign:o===H2?"middle":m,align:o===H2?m:"center",text:s[p]})}},t.prototype._formatLabel=function(r,i){var n=this.dataZoomModel,a=n.get("labelFormatter"),o=n.get("labelPrecision");(o==null||o==="auto")&&(o=i.getPixelPrecision());var s=r==null||isNaN(r)?"":i.type==="category"||i.type==="time"?i.scale.getLabel({value:Math.round(r)}):r.toFixed(Math.min(o,20));return xt(a)?a(r,s):it(a)?a.replace("{value}",s):s},t.prototype._showDataInfo=function(r){r=this._dragging||r;var i=this._displayables,n=i.handleLabels;n[0].attr("invisible",!r),n[1].attr("invisible",!r),i.moveHandle&&this.api[r?"enterEmphasis":"leaveEmphasis"](i.moveHandle,1)},t.prototype._onDragMove=function(r,i,n,a){this._dragging=!0,pd(a.event);var o=this._displayables.sliderGroup.getLocalTransform(),s=Au([i,n],o,!0),l=this._updateInterval(r,s[0]),u=this.dataZoomModel.get("realtime");this._updateView(!u),l&&u&&this._dispatchZoomAction(!0)},t.prototype._onDragEnd=function(){this._dragging=!1,this._showDataInfo(!1);var r=this.dataZoomModel.get("realtime");!r&&this._dispatchZoomAction(!1)},t.prototype._onClickPanel=function(r){var i=this._size,n=this._displayables.sliderGroup.transformCoordToLocal(r.offsetX,r.offsetY);if(!(n[0]<0||n[0]>i[0]||n[1]<0||n[1]>i[1])){var a=this._handleEnds,o=(a[0]+a[1])/2,s=this._updateInterval("all",n[0]-o);this._updateView(),s&&this._dispatchZoomAction(!1)}},t.prototype._onBrushStart=function(r){var i=r.offsetX,n=r.offsetY;this._brushStart=new Ut(i,n),this._brushing=!0,this._brushStartTime=+new Date},t.prototype._onBrushEnd=function(r){if(this._brushing){var i=this._displayables.brushRect;if(this._brushing=!1,!!i){i.attr("ignore",!0);var n=i.shape,a=+new Date;if(!(a-this._brushStartTime<200&&Math.abs(n.width)<5)){var o=this._getViewExtent(),s=[0,100];this._range=Ml([ti(n.x,o,s,!0),ti(n.x+n.width,o,s,!0)]),this._handleEnds=[n.x,n.x+n.width],this._updateView(),this._dispatchZoomAction(!1)}}}},t.prototype._onBrush=function(r){this._brushing&&(pd(r.event),this._updateBrushRect(r.offsetX,r.offsetY))},t.prototype._updateBrushRect=function(r,i){var n=this._displayables,a=this.dataZoomModel,o=n.brushRect;o||(o=n.brushRect=new z2({silent:!0,style:a.getModel("brushStyle").getItemStyle()}),n.sliderGroup.add(o)),o.attr("ignore",!1);var s=this._brushStart,l=this._displayables.sliderGroup,u=l.transformCoordToLocal(r,i),c=l.transformCoordToLocal(s.x,s.y),h=this._size;u[0]=Math.max(Math.min(h[0],u[0]),0),o.setShape({x:c[0],y:0,width:u[0]-c[0],height:h[1]})},t.prototype._dispatchZoomAction=function(r){var i=this._range;this.api.dispatchAction({type:"dataZoom",from:this.uid,dataZoomId:this.dataZoomModel.id,animation:r?mze:null,start:i[0],end:i[1]})},t.prototype._findCoordRect=function(){var r,i=pfe(this.dataZoomModel).infoList;if(!r&&i.length){var n=i[0].model.coordinateSystem;r=n.getRect&&n.getRect()}if(!r){var a=this.api.getWidth(),o=this.api.getHeight();r={x:a*.2,y:o*.2,width:a*.6,height:o*.6}}return r},t.type="dataZoom.slider",t}(NV);function yze(e){var t={x:"y",y:"x",radius:"angle",angle:"radius"};return t[e]}function EZ(e){return e==="vertical"?"ns-resize":"ew-resize"}function Rfe(e){e.registerComponentModel(hze),e.registerComponentView(gze),VV(e)}function xze(e){ir(kfe),ir(Rfe)}var Ofe={get:function(e,t,r){var i=At((bze[e]||{})[t]);return r&&Ue(i)?i[i.length-1]:i}},bze={color:{active:["#006edd","#e0ffff"],inactive:["rgba(0,0,0,0)"]},colorHue:{active:[0,360],inactive:[0,0]},colorSaturation:{active:[.3,1],inactive:[0,0]},colorLightness:{active:[.9,.5],inactive:[0,0]},colorAlpha:{active:[.3,1],inactive:[0,0]},opacity:{active:[.3,1],inactive:[0,0]},symbol:{active:["circle","roundRect","diamond"],inactive:["none"]},symbolSize:{active:[10,50],inactive:[0,0]}},MZ=ra.mapVisual,wze=ra.eachVisual,_ze=Ue,TZ=q,Aze=Ml,Sze=ti,fS=function(e){_e(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r.stateList=["inRange","outOfRange"],r.replacableOptionKeys=["inRange","outOfRange","target","controller","color"],r.layoutMode={type:"box",ignoreSize:!0},r.dataBound=[-1/0,1/0],r.targetVisuals={},r.controllerVisuals={},r}return t.prototype.init=function(r,i,n){this.mergeDefaultAndTheme(r,n)},t.prototype.optionUpdated=function(r,i){var n=this.option;!i&&Sfe(n,r,this.replacableOptionKeys),this.textStyleModel=this.getModel("textStyle"),this.resetItemSize(),this.completeVisualOption()},t.prototype.resetVisual=function(r){var i=this.stateList;r=at(r,this),this.controllerVisuals=fk(this.option.controller,i,r),this.targetVisuals=fk(this.option.target,i,r)},t.prototype.getItemSymbol=function(){return null},t.prototype.getTargetSeriesIndices=function(){var r=this.option.seriesIndex,i=[];return r==null||r==="all"?this.ecModel.eachSeries(function(n,a){i.push(a)}):i=ci(r),i},t.prototype.eachTargetSeries=function(r,i){q(this.getTargetSeriesIndices(),function(n){var a=this.ecModel.getSeriesByIndex(n);a&&r.call(i,a)},this)},t.prototype.isTargetSeries=function(r){var i=!1;return this.eachTargetSeries(function(n){n===r&&(i=!0)}),i},t.prototype.formatValueText=function(r,i,n){var a=this.option,o=a.precision,s=this.dataBound,l=a.formatter,u;n=n||["<",">"],Ue(r)&&(r=r.slice(),u=!0);var c=i?r:u?[h(r[0]),h(r[1])]:h(r);if(it(l))return l.replace("{value}",u?c[0]:c).replace("{value2}",u?c[1]:c);if(xt(l))return u?l(r[0],r[1]):l(r);if(u)return r[0]===s[0]?n[0]+" "+c[1]:r[1]===s[1]?n[1]+" "+c[0]:c[0]+" - "+c[1];return c;function h(d){return d===s[0]?"min":d===s[1]?"max":(+d).toFixed(Math.min(o,20))}},t.prototype.resetExtent=function(){var r=this.option,i=Aze([r.min,r.max]);this._dataExtent=i},t.prototype.getDataDimensionIndex=function(r){var i=this.option.dimension;if(i!=null)return r.getDimensionIndex(i);for(var n=r.dimensions,a=n.length-1;a>=0;a--){var o=n[a],s=r.getDimensionInfo(o);if(!s.isCalculationCoord)return s.storeDimIndex}},t.prototype.getExtent=function(){return this._dataExtent.slice()},t.prototype.completeVisualOption=function(){var r=this.ecModel,i=this.option,n={inRange:i.inRange,outOfRange:i.outOfRange},a=i.target||(i.target={}),o=i.controller||(i.controller={});Wt(a,n),Wt(o,n);var s=this.isCategory();l.call(this,a),l.call(this,o),u.call(this,a,"inRange","outOfRange"),c.call(this,o);function l(h){_ze(i.color)&&!h.inRange&&(h.inRange={color:i.color.slice().reverse()}),h.inRange=h.inRange||{color:r.get("gradientColor")}}function u(h,d,f){var p=h[d],v=h[f];p&&!v&&(v=h[f]={},TZ(p,function(m,g){if(ra.isValidType(g)){var y=Ofe.get(g,"inactive",s);y!=null&&(v[g]=y,g==="color"&&!v.hasOwnProperty("opacity")&&!v.hasOwnProperty("colorAlpha")&&(v.opacity=[0,0]))}}))}function c(h){var d=(h.inRange||{}).symbol||(h.outOfRange||{}).symbol,f=(h.inRange||{}).symbolSize||(h.outOfRange||{}).symbolSize,p=this.get("inactiveColor"),v=this.getItemSymbol(),m=v||"roundRect";TZ(this.stateList,function(g){var y=this.itemSize,x=h[g];x||(x=h[g]={color:s?p:[p]}),x.symbol==null&&(x.symbol=d&&At(d)||(s?m:[m])),x.symbolSize==null&&(x.symbolSize=f&&At(f)||(s?y[0]:[y[0],y[0]])),x.symbol=MZ(x.symbol,function(w){return w==="none"?m:w});var b=x.symbolSize;if(b!=null){var _=-1/0;wze(b,function(w){w>_&&(_=w)}),x.symbolSize=MZ(b,function(w){return Sze(w,[0,_],[0,y[0]],!0)})}},this)}},t.prototype.resetItemSize=function(){this.itemSize=[parseFloat(this.get("itemWidth")),parseFloat(this.get("itemHeight"))]},t.prototype.isCategory=function(){return!!this.option.categories},t.prototype.setSelected=function(r){},t.prototype.getSelected=function(){return null},t.prototype.getValueState=function(r){return null},t.prototype.getVisualMeta=function(r){return null},t.type="visualMap",t.dependencies=["series"],t.defaultOption={show:!0,z:4,seriesIndex:"all",min:0,max:200,left:0,right:null,top:null,bottom:0,itemWidth:null,itemHeight:null,inverse:!1,orient:"vertical",backgroundColor:"rgba(0,0,0,0)",borderColor:"#ccc",contentColor:"#5793f3",inactiveColor:"#aaa",borderWidth:0,padding:5,textGap:10,precision:0,textStyle:{color:"#333"}},t}(vr),PZ=[20,140],Cze=function(e){_e(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r}return t.prototype.optionUpdated=function(r,i){e.prototype.optionUpdated.apply(this,arguments),this.resetExtent(),this.resetVisual(function(n){n.mappingMethod="linear",n.dataExtent=this.getExtent()}),this._resetRange()},t.prototype.resetItemSize=function(){e.prototype.resetItemSize.apply(this,arguments);var r=this.itemSize;(r[0]==null||isNaN(r[0]))&&(r[0]=PZ[0]),(r[1]==null||isNaN(r[1]))&&(r[1]=PZ[1])},t.prototype._resetRange=function(){var r=this.getExtent(),i=this.option.range;!i||i.auto?(r.auto=1,this.option.range=r):Ue(i)&&(i[0]>i[1]&&i.reverse(),i[0]=Math.max(i[0],r[0]),i[1]=Math.min(i[1],r[1]))},t.prototype.completeVisualOption=function(){e.prototype.completeVisualOption.apply(this,arguments),q(this.stateList,function(r){var i=this.option.controller[r].symbolSize;i&&i[0]!==i[1]&&(i[0]=i[1]/3)},this)},t.prototype.setSelected=function(r){this.option.range=r.slice(),this._resetRange()},t.prototype.getSelected=function(){var r=this.getExtent(),i=Ml((this.get("range")||[]).slice());return i[0]>r[1]&&(i[0]=r[1]),i[1]>r[1]&&(i[1]=r[1]),i[0]<r[0]&&(i[0]=r[0]),i[1]<r[0]&&(i[1]=r[0]),i},t.prototype.getValueState=function(r){var i=this.option.range,n=this.getExtent();return(i[0]<=n[0]||i[0]<=r)&&(i[1]>=n[1]||r<=i[1])?"inRange":"outOfRange"},t.prototype.findTargetDataIndices=function(r){var i=[];return this.eachTargetSeries(function(n){var a=[],o=n.getData();o.each(this.getDataDimensionIndex(o),function(s,l){r[0]<=s&&s<=r[1]&&a.push(l)},this),i.push({seriesId:n.id,dataIndex:a})},this),i},t.prototype.getVisualMeta=function(r){var i=DZ(this,"outOfRange",this.getExtent()),n=DZ(this,"inRange",this.option.range.slice()),a=[];function o(f,p){a.push({value:f,color:r(f,p)})}for(var s=0,l=0,u=n.length,c=i.length;l<c&&(!n.length||i[l]<=n[0]);l++)i[l]<n[s]&&o(i[l],"outOfRange");for(var h=1;s<u;s++,h=0)h&&a.length&&o(n[s],"outOfRange"),o(n[s],"inRange");for(var h=1;l<c;l++)(!n.length||n[n.length-1]<i[l])&&(h&&(a.length&&o(a[a.length-1].value,"outOfRange"),h=0),o(i[l],"outOfRange"));var d=a.length;return{stops:a,outerColors:[d?a[0].color:"transparent",d?a[d-1].color:"transparent"]}},t.type="visualMap.continuous",t.defaultOption=Mp(fS.defaultOption,{align:"auto",calculable:!1,hoverLink:!0,realtime:!0,handleIcon:"path://M-11.39,9.77h0a3.5,3.5,0,0,1-3.5,3.5h-22a3.5,3.5,0,0,1-3.5-3.5h0a3.5,3.5,0,0,1,3.5-3.5h22A3.5,3.5,0,0,1-11.39,9.77Z",handleSize:"120%",handleStyle:{borderColor:"#fff",borderWidth:1},indicatorIcon:"circle",indicatorSize:"50%",indicatorStyle:{borderColor:"#fff",borderWidth:2,shadowBlur:2,shadowOffsetX:1,shadowOffsetY:1,shadowColor:"rgba(0,0,0,0.2)"}}),t}(fS);function DZ(e,t,r){if(r[0]===r[1])return r.slice();for(var i=200,n=(r[1]-r[0])/i,a=r[0],o=[],s=0;s<=i&&a<r[1];s++)o.push(a),a+=n;return o.push(r[1]),o}var Bfe=function(e){_e(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r.autoPositionValues={left:1,right:1,top:1,bottom:1},r}return t.prototype.init=function(r,i){this.ecModel=r,this.api=i},t.prototype.render=function(r,i,n,a){if(this.visualMapModel=r,r.get("show")===!1){this.group.removeAll();return}this.doRender(r,i,n,a)},t.prototype.renderBackground=function(r){var i=this.visualMapModel,n=Py(i.get("padding")||0),a=r.getBoundingRect();r.add(new Tr({z2:-1,silent:!0,shape:{x:a.x-n[3],y:a.y-n[0],width:a.width+n[3]+n[1],height:a.height+n[0]+n[2]},style:{fill:i.get("backgroundColor"),stroke:i.get("borderColor"),lineWidth:i.get("borderWidth")}}))},t.prototype.getControllerVisual=function(r,i,n){n=n||{};var a=n.forceState,o=this.visualMapModel,s={};if(i==="color"){var l=o.get("contentColor");s.color=l}function u(f){return s[f]}function c(f,p){s[f]=p}var h=o.controllerVisuals[a||o.getValueState(r)],d=ra.prepareVisualTypes(h);return q(d,function(f){var p=h[f];n.convertOpacityToAlpha&&f==="opacity"&&(f="colorAlpha",p=h.__alphaForOpacity),ra.dependsOn(f,i)&&p&&p.applyVisual(r,u,c)}),s[i]},t.prototype.positionGroup=function(r){var i=this.visualMapModel,n=this.api;PC(r,i.getBoxLayoutParams(),{width:n.getWidth(),height:n.getHeight()})},t.prototype.doRender=function(r,i,n,a){},t.type="visualMap",t}(Gi),IZ=[["left","right","width"],["top","bottom","height"]];function Nfe(e,t,r){var i=e.option,n=i.align;if(n!=null&&n!=="auto")return n;for(var a={width:t.getWidth(),height:t.getHeight()},o=i.orient==="horizontal"?1:0,s=IZ[o],l=[0,null,10],u={},c=0;c<3;c++)u[IZ[1-o][c]]=l[c],u[s[c]]=c===2?r[0]:i[s[c]];var h=[["x","width",3],["y","height",0]][o],d=zn(u,a,i.padding);return s[(d.margin[h[2]]||0)+d[h[0]]+d[h[1]]*.5<a[h[1]]*.5?0:1]}function PA(e,t){return q(e||[],function(r){r.dataIndex!=null&&(r.dataIndexInside=r.dataIndex,r.dataIndex=null),r.highlightKey="visualMap"+(t?t.componentIndex:"")}),e}var lc=ti,Eze=q,LZ=Math.min,RT=Math.max,Mze=12,Tze=6,Pze=function(e){_e(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r._shapes={},r._dataInterval=[],r._handleEnds=[],r._hoverLinkDataIndices=[],r}return t.prototype.init=function(r,i){e.prototype.init.call(this,r,i),this._hoverLinkFromSeriesMouseOver=at(this._hoverLinkFromSeriesMouseOver,this),this._hideIndicator=at(this._hideIndicator,this)},t.prototype.doRender=function(r,i,n,a){(!a||a.type!=="selectDataRange"||a.from!==this.uid)&&this._buildView()},t.prototype._buildView=function(){this.group.removeAll();var r=this.visualMapModel,i=this.group;this._orient=r.get("orient"),this._useHandle=r.get("calculable"),this._resetInterval(),this._renderBar(i);var n=r.get("text");this._renderEndsText(i,n,0),this._renderEndsText(i,n,1),this._updateView(!0),this.renderBackground(i),this._updateView(),this._enableHoverLinkToSeries(),this._enableHoverLinkFromSeries(),this.positionGroup(i)},t.prototype._renderEndsText=function(r,i,n){if(i){var a=i[1-n];a=a!=null?a+"":"";var o=this.visualMapModel,s=o.get("textGap"),l=o.itemSize,u=this._shapes.mainGroup,c=this._applyTransform([l[0]/2,n===0?-s:l[1]+s],u),h=this._applyTransform(n===0?"bottom":"top",u),d=this._orient,f=this.visualMapModel.textStyleModel;this.group.add(new Dr({style:Ti(f,{x:c[0],y:c[1],verticalAlign:d==="horizontal"?"middle":h,align:d==="horizontal"?h:"center",text:a})}))}},t.prototype._renderBar=function(r){var i=this.visualMapModel,n=this._shapes,a=i.itemSize,o=this._orient,s=this._useHandle,l=Nfe(i,this.api,a),u=n.mainGroup=this._createBarGroup(l),c=new Ct;u.add(c),c.add(n.outOfRange=kZ()),c.add(n.inRange=kZ(null,s?OZ(this._orient):null,at(this._dragHandle,this,"all",!1),at(this._dragHandle,this,"all",!0))),c.setClipPath(new Tr({shape:{x:0,y:0,width:a[0],height:a[1],r:3}}));var h=i.textStyleModel.getTextRect("国"),d=RT(h.width,h.height);s&&(n.handleThumbs=[],n.handleLabels=[],n.handleLabelPoints=[],this._createHandle(i,u,0,a,d,o),this._createHandle(i,u,1,a,d,o)),this._createIndicator(i,u,a,d,o),r.add(u)},t.prototype._createHandle=function(r,i,n,a,o,s){var l=at(this._dragHandle,this,n,!1),u=at(this._dragHandle,this,n,!0),c=Tu(r.get("handleSize"),a[0]),h=Sn(r.get("handleIcon"),-c/2,-c/2,c,c,null,!0),d=OZ(this._orient);h.attr({cursor:d,draggable:!0,drift:l,ondragend:u,onmousemove:function(g){pd(g.event)}}),h.x=a[0]/2,h.useStyle(r.getModel("handleStyle").getItemStyle()),h.setStyle({strokeNoScale:!0,strokeFirst:!0}),h.style.lineWidth*=2,h.ensureState("emphasis").style=r.getModel(["emphasis","handleStyle"]).getItemStyle(),j0(h,!0),i.add(h);var f=this.visualMapModel.textStyleModel,p=new Dr({cursor:d,draggable:!0,drift:l,onmousemove:function(g){pd(g.event)},ondragend:u,style:Ti(f,{x:0,y:0,text:""})});p.ensureState("blur").style={opacity:.1},p.stateTransition={duration:200},this.group.add(p);var v=[c,0],m=this._shapes;m.handleThumbs[n]=h,m.handleLabelPoints[n]=v,m.handleLabels[n]=p},t.prototype._createIndicator=function(r,i,n,a,o){var s=Tu(r.get("indicatorSize"),n[0]),l=Sn(r.get("indicatorIcon"),-s/2,-s/2,s,s,null,!0);l.attr({cursor:"move",invisible:!0,silent:!0,x:n[0]/2});var u=r.getModel("indicatorStyle").getItemStyle();if(l instanceof Ta){var c=l.style;l.useStyle(Be({image:c.image,x:c.x,y:c.y,width:c.width,height:c.height},u))}else l.useStyle(u);i.add(l);var h=this.visualMapModel.textStyleModel,d=new Dr({silent:!0,invisible:!0,style:Ti(h,{x:0,y:0,text:""})});this.group.add(d);var f=[(o==="horizontal"?a/2:Tze)+n[0]/2,0],p=this._shapes;p.indicator=l,p.indicatorLabel=d,p.indicatorLabelPoint=f,this._firstShowIndicator=!0},t.prototype._dragHandle=function(r,i,n,a){if(this._useHandle){if(this._dragging=!i,!i){var o=this._applyTransform([n,a],this._shapes.mainGroup,!0);this._updateInterval(r,o[1]),this._hideIndicator(),this._updateView()}i===!this.visualMapModel.get("realtime")&&this.api.dispatchAction({type:"selectDataRange",from:this.uid,visualMapId:this.visualMapModel.id,selected:this._dataInterval.slice()}),i?!this._hovering&&this._clearHoverLinkToSeries():RZ(this.visualMapModel)&&this._doHoverLinkToSeries(this._handleEnds[r],!1)}},t.prototype._resetInterval=function(){var r=this.visualMapModel,i=this._dataInterval=r.getSelected(),n=r.getExtent(),a=[0,r.itemSize[1]];this._handleEnds=[lc(i[0],n,a,!0),lc(i[1],n,a,!0)]},t.prototype._updateInterval=function(r,i){i=i||0;var n=this.visualMapModel,a=this._handleEnds,o=[0,n.itemSize[1]];nm(i,a,o,r,0);var s=n.getExtent();this._dataInterval=[lc(a[0],o,s,!0),lc(a[1],o,s,!0)]},t.prototype._updateView=function(r){var i=this.visualMapModel,n=i.getExtent(),a=this._shapes,o=[0,i.itemSize[1]],s=r?o:this._handleEnds,l=this._createBarVisual(this._dataInterval,n,s,"inRange"),u=this._createBarVisual(n,n,o,"outOfRange");a.inRange.setStyle({fill:l.barColor}).setShape("points",l.barPoints),a.outOfRange.setStyle({fill:u.barColor}).setShape("points",u.barPoints),this._updateHandle(s,l)},t.prototype._createBarVisual=function(r,i,n,a){var o={forceState:a,convertOpacityToAlpha:!0},s=this._makeColorGradient(r,o),l=[this.getControllerVisual(r[0],"symbolSize",o),this.getControllerVisual(r[1],"symbolSize",o)],u=this._createBarPoints(n,l);return{barColor:new Sy(0,0,0,1,s),barPoints:u,handlesColor:[s[0].color,s[s.length-1].color]}},t.prototype._makeColorGradient=function(r,i){var n=100,a=[],o=(r[1]-r[0])/n;a.push({color:this.getControllerVisual(r[0],"color",i),offset:0});for(var s=1;s<n;s++){var l=r[0]+o*s;if(l>r[1])break;a.push({color:this.getControllerVisual(l,"color",i),offset:s/n})}return a.push({color:this.getControllerVisual(r[1],"color",i),offset:1}),a},t.prototype._createBarPoints=function(r,i){var n=this.visualMapModel.itemSize;return[[n[0]-i[0],r[0]],[n[0],r[0]],[n[0],r[1]],[n[0]-i[1],r[1]]]},t.prototype._createBarGroup=function(r){var i=this._orient,n=this.visualMapModel.get("inverse");return new Ct(i==="horizontal"&&!n?{scaleX:r==="bottom"?1:-1,rotation:Math.PI/2}:i==="horizontal"&&n?{scaleX:r==="bottom"?-1:1,rotation:-Math.PI/2}:i==="vertical"&&!n?{scaleX:r==="left"?1:-1,scaleY:-1}:{scaleX:r==="left"?1:-1})},t.prototype._updateHandle=function(r,i){if(this._useHandle){var n=this._shapes,a=this.visualMapModel,o=n.handleThumbs,s=n.handleLabels,l=a.itemSize,u=a.getExtent();Eze([0,1],function(c){var h=o[c];h.setStyle("fill",i.handlesColor[c]),h.y=r[c];var d=lc(r[c],[0,l[1]],u,!0),f=this.getControllerVisual(d,"symbolSize");h.scaleX=h.scaleY=f/l[0],h.x=l[0]-f/2;var p=Au(n.handleLabelPoints[c],yv(h,this.group));s[c].setStyle({x:p[0],y:p[1],text:a.formatValueText(this._dataInterval[c]),verticalAlign:"middle",align:this._orient==="vertical"?this._applyTransform("left",n.mainGroup):"center"})},this)}},t.prototype._showIndicator=function(r,i,n,a){var o=this.visualMapModel,s=o.getExtent(),l=o.itemSize,u=[0,l[1]],c=this._shapes,h=c.indicator;if(h){h.attr("invisible",!1);var d={convertOpacityToAlpha:!0},f=this.getControllerVisual(r,"color",d),p=this.getControllerVisual(r,"symbolSize"),v=lc(r,s,u,!0),m=l[0]-p/2,g={x:h.x,y:h.y};h.y=v,h.x=m;var y=Au(c.indicatorLabelPoint,yv(h,this.group)),x=c.indicatorLabel;x.attr("invisible",!1);var b=this._applyTransform("left",c.mainGroup),_=this._orient,w=_==="horizontal";x.setStyle({text:(n||"")+o.formatValueText(i),verticalAlign:w?b:"middle",align:w?"center":b});var S={x:m,y:v,style:{fill:f}},A={style:{x:y[0],y:y[1]}};if(o.ecModel.isAnimationEnabled()&&!this._firstShowIndicator){var M={duration:100,easing:"cubicInOut",additive:!0};h.x=g.x,h.y=g.y,h.animateTo(S,M),x.animateTo(A,M)}else h.attr(S),x.attr(A);this._firstShowIndicator=!1;var E=this._shapes.handleLabels;if(E)for(var T=0;T<E.length;T++)this.api.enterBlur(E[T])}},t.prototype._enableHoverLinkToSeries=function(){var r=this;this._shapes.mainGroup.on("mousemove",function(i){if(r._hovering=!0,!r._dragging){var n=r.visualMapModel.itemSize,a=r._applyTransform([i.offsetX,i.offsetY],r._shapes.mainGroup,!0,!0);a[1]=LZ(RT(0,a[1]),n[1]),r._doHoverLinkToSeries(a[1],0<=a[0]&&a[0]<=n[0])}}).on("mouseout",function(){r._hovering=!1,!r._dragging&&r._clearHoverLinkToSeries()})},t.prototype._enableHoverLinkFromSeries=function(){var r=this.api.getZr();this.visualMapModel.option.hoverLink?(r.on("mouseover",this._hoverLinkFromSeriesMouseOver,this),r.on("mouseout",this._hideIndicator,this)):this._clearHoverLinkFromSeries()},t.prototype._doHoverLinkToSeries=function(r,i){var n=this.visualMapModel,a=n.itemSize;if(n.option.hoverLink){var o=[0,a[1]],s=n.getExtent();r=LZ(RT(o[0],r),o[1]);var l=Dze(n,s,o),u=[r-l,r+l],c=lc(r,o,s,!0),h=[lc(u[0],o,s,!0),lc(u[1],o,s,!0)];u[0]<o[0]&&(h[0]=-1/0),u[1]>o[1]&&(h[1]=1/0),i&&(h[0]===-1/0?this._showIndicator(c,h[1],"< ",l):h[1]===1/0?this._showIndicator(c,h[0],"> ",l):this._showIndicator(c,c,"≈ ",l));var d=this._hoverLinkDataIndices,f=[];(i||RZ(n))&&(f=this._hoverLinkDataIndices=n.findTargetDataIndices(h));var p=FSe(d,f);this._dispatchHighDown("downplay",PA(p[0],n)),this._dispatchHighDown("highlight",PA(p[1],n))}},t.prototype._hoverLinkFromSeriesMouseOver=function(r){var i;if(q0(r.target,function(l){var u=Dt(l);if(u.dataIndex!=null)return i=u,!0},!0),!!i){var n=this.ecModel.getSeriesByIndex(i.seriesIndex),a=this.visualMapModel;if(a.isTargetSeries(n)){var o=n.getData(i.dataType),s=o.getStore().get(a.getDataDimensionIndex(o),i.dataIndex);isNaN(s)||this._showIndicator(s,s)}}},t.prototype._hideIndicator=function(){var r=this._shapes;r.indicator&&r.indicator.attr("invisible",!0),r.indicatorLabel&&r.indicatorLabel.attr("invisible",!0);var i=this._shapes.handleLabels;if(i)for(var n=0;n<i.length;n++)this.api.leaveBlur(i[n])},t.prototype._clearHoverLinkToSeries=function(){this._hideIndicator();var r=this._hoverLinkDataIndices;this._dispatchHighDown("downplay",PA(r,this.visualMapModel)),r.length=0},t.prototype._clearHoverLinkFromSeries=function(){this._hideIndicator();var r=this.api.getZr();r.off("mouseover",this._hoverLinkFromSeriesMouseOver),r.off("mouseout",this._hideIndicator)},t.prototype._applyTransform=function(r,i,n,a){var o=yv(i,a?null:this.group);return Ue(r)?Au(r,o,n):_C(r,o,n)},t.prototype._dispatchHighDown=function(r,i){i&&i.length&&this.api.dispatchAction({type:r,batch:i})},t.prototype.dispose=function(){this._clearHoverLinkFromSeries(),this._clearHoverLinkToSeries()},t.type="visualMap.continuous",t}(Bfe);function kZ(e,t,r,i){return new Qo({shape:{points:e},draggable:!!r,cursor:t,drift:r,onmousemove:function(n){pd(n.event)},ondragend:i})}function Dze(e,t,r){var i=Mze/2,n=e.get("hoverLinkDataSize");return n&&(i=lc(n,t,r,!0)/2),i}function RZ(e){var t=e.get("hoverLinkOnHandle");return!!(t??e.get("realtime"))}function OZ(e){return e==="vertical"?"ns-resize":"ew-resize"}var Ize={type:"selectDataRange",event:"dataRangeSelected",update:"update"},Lze=function(e,t){t.eachComponent({mainType:"visualMap",query:e},function(r){r.setSelected(e.selected)})},kze=[{createOnAllSeries:!0,reset:function(e,t){var r=[];return t.eachComponent("visualMap",function(i){var n=e.pipelineContext;!i.isTargetSeries(e)||n&&n.large||r.push(tFe(i.stateList,i.targetVisuals,at(i.getValueState,i),i.getDataDimensionIndex(e.getData())))}),r}},{createOnAllSeries:!0,reset:function(e,t){var r=e.getData(),i=[];t.eachComponent("visualMap",function(n){if(n.isTargetSeries(e)){var a=n.getVisualMeta(at(Rze,null,e,n))||{stops:[],outerColors:[]},o=n.getDataDimensionIndex(r);o>=0&&(a.dimension=o,i.push(a))}}),e.getData().setVisual("visualMeta",i)}}];function Rze(e,t,r,i){for(var n=t.targetVisuals[i],a=ra.prepareVisualTypes(n),o={color:m4(e.getData(),"color")},s=0,l=a.length;s<l;s++){var u=a[s],c=n[u==="opacity"?"__alphaForOpacity":u];c&&c.applyVisual(r,h,d)}return o.color;function h(f){return o[f]}function d(f,p){o[f]=p}}var BZ=q;function Oze(e){var t=e&&e.visualMap;Ue(t)||(t=t?[t]:[]),BZ(t,function(r){if(r){Vm(r,"splitList")&&!Vm(r,"pieces")&&(r.pieces=r.splitList,delete r.splitList);var i=r.pieces;i&&Ue(i)&&BZ(i,function(n){_t(n)&&(Vm(n,"start")&&!Vm(n,"min")&&(n.min=n.start),Vm(n,"end")&&!Vm(n,"max")&&(n.max=n.end))})}})}function Vm(e,t){return e&&e.hasOwnProperty&&e.hasOwnProperty(t)}var NZ=!1;function Vfe(e){NZ||(NZ=!0,e.registerSubTypeDefaulter("visualMap",function(t){return!t.categories&&(!(t.pieces?t.pieces.length>0:t.splitNumber>0)||t.calculable)?"continuous":"piecewise"}),e.registerAction(Ize,Lze),q(kze,function(t){e.registerVisual(e.PRIORITY.VISUAL.COMPONENT,t)}),e.registerPreprocessor(Oze))}function Ffe(e){e.registerComponentModel(Cze),e.registerComponentView(Pze),Vfe(e)}var Bze=function(e){_e(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r._pieceList=[],r}return t.prototype.optionUpdated=function(r,i){e.prototype.optionUpdated.apply(this,arguments),this.resetExtent();var n=this._mode=this._determineMode();this._pieceList=[],Nze[this._mode].call(this,this._pieceList),this._resetSelected(r,i);var a=this.option.categories;this.resetVisual(function(o,s){n==="categories"?(o.mappingMethod="category",o.categories=At(a)):(o.dataExtent=this.getExtent(),o.mappingMethod="piecewise",o.pieceList=qe(this._pieceList,function(l){return l=At(l),s!=="inRange"&&(l.visual=null),l}))})},t.prototype.completeVisualOption=function(){var r=this.option,i={},n=ra.listVisualTypes(),a=this.isCategory();q(r.pieces,function(s){q(n,function(l){s.hasOwnProperty(l)&&(i[l]=1)})}),q(i,function(s,l){var u=!1;q(this.stateList,function(c){u=u||o(r,c,l)||o(r.target,c,l)},this),!u&&q(this.stateList,function(c){(r[c]||(r[c]={}))[l]=Ofe.get(l,c==="inRange"?"active":"inactive",a)})},this);function o(s,l,u){return s&&s[l]&&s[l].hasOwnProperty(u)}e.prototype.completeVisualOption.apply(this,arguments)},t.prototype._resetSelected=function(r,i){var n=this.option,a=this._pieceList,o=(i?n:r).selected||{};if(n.selected=o,q(a,function(l,u){var c=this.getSelectedMapKey(l);o.hasOwnProperty(c)||(o[c]=!0)},this),n.selectedMode==="single"){var s=!1;q(a,function(l,u){var c=this.getSelectedMapKey(l);o[c]&&(s?o[c]=!1:s=!0)},this)}},t.prototype.getItemSymbol=function(){return this.get("itemSymbol")},t.prototype.getSelectedMapKey=function(r){return this._mode==="categories"?r.value+"":r.index+""},t.prototype.getPieceList=function(){return this._pieceList},t.prototype._determineMode=function(){var r=this.option;return r.pieces&&r.pieces.length>0?"pieces":this.option.categories?"categories":"splitNumber"},t.prototype.setSelected=function(r){this.option.selected=At(r)},t.prototype.getValueState=function(r){var i=ra.findPieceIndex(r,this._pieceList);return i!=null&&this.option.selected[this.getSelectedMapKey(this._pieceList[i])]?"inRange":"outOfRange"},t.prototype.findTargetDataIndices=function(r){var i=[],n=this._pieceList;return this.eachTargetSeries(function(a){var o=[],s=a.getData();s.each(this.getDataDimensionIndex(s),function(l,u){var c=ra.findPieceIndex(l,n);c===r&&o.push(u)},this),i.push({seriesId:a.id,dataIndex:o})},this),i},t.prototype.getRepresentValue=function(r){var i;if(this.isCategory())i=r.value;else if(r.value!=null)i=r.value;else{var n=r.interval||[];i=n[0]===-1/0&&n[1]===1/0?0:(n[0]+n[1])/2}return i},t.prototype.getVisualMeta=function(r){if(this.isCategory())return;var i=[],n=["",""],a=this;function o(c,h){var d=a.getRepresentValue({interval:c});h||(h=a.getValueState(d));var f=r(d,h);c[0]===-1/0?n[0]=f:c[1]===1/0?n[1]=f:i.push({value:c[0],color:f},{value:c[1],color:f})}var s=this._pieceList.slice();if(!s.length)s.push({interval:[-1/0,1/0]});else{var l=s[0].interval[0];l!==-1/0&&s.unshift({interval:[-1/0,l]}),l=s[s.length-1].interval[1],l!==1/0&&s.push({interval:[l,1/0]})}var u=-1/0;return q(s,function(c){var h=c.interval;h&&(h[0]>u&&o([u,h[0]],"outOfRange"),o(h.slice()),u=h[1])},this),{stops:i,outerColors:n}},t.type="visualMap.piecewise",t.defaultOption=Mp(fS.defaultOption,{selected:null,minOpen:!1,maxOpen:!1,align:"auto",itemWidth:20,itemHeight:14,itemSymbol:"roundRect",pieces:null,categories:null,splitNumber:5,selectedMode:"multiple",itemGap:10,hoverLink:!0}),t}(fS),Nze={splitNumber:function(e){var t=this.option,r=Math.min(t.precision,20),i=this.getExtent(),n=t.splitNumber;n=Math.max(parseInt(n,10),1),t.splitNumber=n;for(var a=(i[1]-i[0])/n;+a.toFixed(r)!==a&&r<5;)r++;t.precision=r,a=+a.toFixed(r),t.minOpen&&e.push({interval:[-1/0,i[0]],close:[0,0]});for(var o=0,s=i[0];o<n;s+=a,o++){var l=o===n-1?i[1]:s+a;e.push({interval:[s,l],close:[1,1]})}t.maxOpen&&e.push({interval:[i[1],1/0],close:[0,0]}),LG(e),q(e,function(u,c){u.index=c,u.text=this.formatValueText(u.interval)},this)},categories:function(e){var t=this.option;q(t.categories,function(r){e.push({text:this.formatValueText(r,!0),value:r})},this),VZ(t,e)},pieces:function(e){var t=this.option;q(t.pieces,function(r,i){_t(r)||(r={value:r});var n={text:"",index:i};if(r.label!=null&&(n.text=r.label),r.hasOwnProperty("value")){var a=n.value=r.value;n.interval=[a,a],n.close=[1,1]}else{for(var o=n.interval=[],s=n.close=[0,0],l=[1,0,1],u=[-1/0,1/0],c=[],h=0;h<2;h++){for(var d=[["gte","gt","min"],["lte","lt","max"]][h],f=0;f<3&&o[h]==null;f++)o[h]=r[d[f]],s[h]=l[f],c[h]=f===2;o[h]==null&&(o[h]=u[h])}c[0]&&o[1]===1/0&&(s[0]=0),c[1]&&o[0]===-1/0&&(s[1]=0),o[0]===o[1]&&s[0]&&s[1]&&(n.value=o[0])}n.visual=ra.retrieveVisuals(r),e.push(n)},this),VZ(t,e),LG(e),q(e,function(r){var i=r.close,n=[["<","≤"][i[1]],[">","≥"][i[0]]];r.text=r.text||this.formatValueText(r.value!=null?r.value:r.interval,!1,n)},this)}};function VZ(e,t){var r=e.inverse;(e.orient==="vertical"?!r:r)&&t.reverse()}var Vze=function(e){_e(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r}return t.prototype.doRender=function(){var r=this.group;r.removeAll();var i=this.visualMapModel,n=i.get("textGap"),a=i.textStyleModel,o=a.getFont(),s=a.getTextColor(),l=this._getItemAlign(),u=i.itemSize,c=this._getViewData(),h=c.endsText,d=xa(i.get("showLabel",!0),!h);h&&this._renderEndsText(r,h[0],u,d,l),q(c.viewPieceList,function(f){var p=f.piece,v=new Ct;v.onclick=at(this._onItemClick,this,p),this._enableHoverLink(v,f.indexInModelPieceList);var m=i.getRepresentValue(p);if(this._createItemSymbol(v,m,[0,0,u[0],u[1]]),d){var g=this.visualMapModel.getValueState(m);v.add(new Dr({style:{x:l==="right"?-n:u[0]+n,y:u[1]/2,text:p.text,verticalAlign:"middle",align:l,font:o,fill:s,opacity:g==="outOfRange"?.5:1}}))}r.add(v)},this),h&&this._renderEndsText(r,h[1],u,d,l),xv(i.get("orient"),r,i.get("itemGap")),this.renderBackground(r),this.positionGroup(r)},t.prototype._enableHoverLink=function(r,i){var n=this;r.on("mouseover",function(){return a("highlight")}).on("mouseout",function(){return a("downplay")});var a=function(o){var s=n.visualMapModel;s.option.hoverLink&&n.api.dispatchAction({type:o,batch:PA(s.findTargetDataIndices(i),s)})}},t.prototype._getItemAlign=function(){var r=this.visualMapModel,i=r.option;if(i.orient==="vertical")return Nfe(r,this.api,r.itemSize);var n=i.align;return(!n||n==="auto")&&(n="left"),n},t.prototype._renderEndsText=function(r,i,n,a,o){if(i){var s=new Ct,l=this.visualMapModel.textStyleModel;s.add(new Dr({style:Ti(l,{x:a?o==="right"?n[0]:0:n[0]/2,y:n[1]/2,verticalAlign:"middle",align:a?o:"center",text:i})})),r.add(s)}},t.prototype._getViewData=function(){var r=this.visualMapModel,i=qe(r.getPieceList(),function(s,l){return{piece:s,indexInModelPieceList:l}}),n=r.get("text"),a=r.get("orient"),o=r.get("inverse");return(a==="horizontal"?o:!o)?i.reverse():n&&(n=n.slice().reverse()),{viewPieceList:i,endsText:n}},t.prototype._createItemSymbol=function(r,i,n){r.add(Sn(this.getControllerVisual(i,"symbol"),n[0],n[1],n[2],n[3],this.getControllerVisual(i,"color")))},t.prototype._onItemClick=function(r){var i=this.visualMapModel,n=i.option,a=n.selectedMode;if(a){var o=At(n.selected),s=i.getSelectedMapKey(r);a==="single"||a===!0?(o[s]=!0,q(o,function(l,u){o[u]=u===s})):o[s]=!o[s],this.api.dispatchAction({type:"selectDataRange",from:this.uid,visualMapId:this.visualMapModel.id,selected:o})}},t.type="visualMap.piecewise",t}(Bfe);function zfe(e){e.registerComponentModel(Bze),e.registerComponentView(Vze),Vfe(e)}function Fze(e){ir(Ffe),ir(zfe)}var zze={label:{enabled:!0},decal:{show:!1}},FZ=Pr(),Hze={};function Uze(e,t){var r=e.getModel("aria");if(!r.get("enabled"))return;var i=At(zze);Wt(i.label,e.getLocaleModel().get("aria"),!1),Wt(r.option,i,!1),n(),a();function n(){var u=r.getModel("decal"),c=u.get("show");if(c){var h=dt();e.eachSeries(function(d){if(!d.isColorBySeries()){var f=h.get(d.type);f||(f={},h.set(d.type,f)),FZ(d).scope=f}}),e.eachRawSeries(function(d){if(e.isSeriesFiltered(d))return;if(xt(d.enableAriaDecal)){d.enableAriaDecal();return}var f=d.getData();if(d.isColorBySeries()){var y=xL(d.ecModel,d.name,Hze,e.getSeriesCount()),x=f.getVisual("decal");f.setVisual("decal",b(x,y))}else{var p=d.getRawData(),v={},m=FZ(d).scope;f.each(function(_){var w=f.getRawIndex(_);v[w]=_});var g=p.count();p.each(function(_){var w=v[_],S=p.getName(_)||_+"",A=xL(d.ecModel,S,m,g),M=f.getItemVisual(w,"decal");f.setItemVisual(w,"decal",b(M,A))})}function b(_,w){var S=_?Be(Be({},w),_):w;return S.dirty=!0,S}})}}function a(){var u=t.getZr().dom;if(u){var c=e.getLocaleModel().get("aria"),h=r.getModel("label");if(h.option=bt(h.option,c),!!h.get("enabled")){if(h.get("description")){u.setAttribute("aria-label",h.get("description"));return}var d=e.getSeriesCount(),f=h.get(["data","maxCount"])||10,p=h.get(["series","maxCount"])||10,v=Math.min(d,p),m;if(!(d<1)){var g=s();if(g){var y=h.get(["general","withTitle"]);m=o(y,{title:g})}else m=h.get(["general","withoutTitle"]);var x=[],b=d>1?h.get(["series","multiple","prefix"]):h.get(["series","single","prefix"]);m+=o(b,{seriesCount:d}),e.eachSeries(function(A,M){if(M<v){var E=void 0,T=A.get("name"),L=T?"withName":"withoutName";E=d>1?h.get(["series","multiple",L]):h.get(["series","single",L]),E=o(E,{seriesId:A.seriesIndex,seriesName:A.get("name"),seriesType:l(A.subType)});var P=A.getData();if(P.count()>f){var C=h.get(["data","partialData"]);E+=o(C,{displayCnt:f})}else E+=h.get(["data","allData"]);for(var D=h.get(["data","separator","middle"]),I=h.get(["data","separator","end"]),O=[],R=0;R<P.count();R++)if(R<f){var H=P.getName(R),j=P.getValues(R),N=h.get(["data",H?"withName":"withoutName"]);O.push(o(N,{name:H,value:j.join(D)}))}E+=O.join(D)+I,x.push(E)}});var _=h.getModel(["series","multiple","separator"]),w=_.get("middle"),S=_.get("end");m+=x.join(w)+S,u.setAttribute("aria-label",m)}}}}function o(u,c){if(!it(u))return u;var h=u;return q(c,function(d,f){h=h.replace(new RegExp("\\{\\s*"+f+"\\s*\\}","g"),d)}),h}function s(){var u=e.get("title");return u&&u.length&&(u=u[0]),u&&u.text}function l(u){var c=e.getLocaleModel().get(["series","typeNames"]);return c[u]||c.chart}}function Gze(e){if(!(!e||!e.aria)){var t=e.aria;t.show!=null&&(t.enabled=t.show),t.label=t.label||{},q(["description","general","series","data"],function(r){t[r]!=null&&(t.label[r]=t[r])})}}function jze(e){e.registerPreprocessor(Gze),e.registerVisual(e.PRIORITY.VISUAL.ARIA,Uze)}var zZ={value:"eq","<":"lt","<=":"lte",">":"gt",">=":"gte","=":"eq","!=":"ne","<>":"ne"},Wze=function(){function e(t){var r=this._condVal=it(t)?new RegExp(t):a8e(t)?t:null;if(r==null){var i="";jr(i)}}return e.prototype.evaluate=function(t){var r=typeof t;return it(r)?this._condVal.test(t):kr(r)?this._condVal.test(t+""):!1},e}(),qze=function(){function e(){}return e.prototype.evaluate=function(){return this.value},e}(),Yze=function(){function e(){}return e.prototype.evaluate=function(){for(var t=this.children,r=0;r<t.length;r++)if(!t[r].evaluate())return!1;return!0},e}(),Xze=function(){function e(){}return e.prototype.evaluate=function(){for(var t=this.children,r=0;r<t.length;r++)if(t[r].evaluate())return!0;return!1},e}(),Zze=function(){function e(){}return e.prototype.evaluate=function(){return!this.child.evaluate()},e}(),Qze=function(){function e(){}return e.prototype.evaluate=function(){for(var t=!!this.valueParser,r=this.getValue,i=r(this.valueGetterParam),n=t?this.valueParser(i):null,a=0;a<this.subCondList.length;a++)if(!this.subCondList[a].evaluate(t?n:i))return!1;return!0},e}();function YV(e,t){if(e===!0||e===!1){var r=new qze;return r.value=e,r}var i="";return Hfe(e)||jr(i),e.and?HZ("and",e,t):e.or?HZ("or",e,t):e.not?Kze(e,t):Jze(e,t)}function HZ(e,t,r){var i=t[e],n="";Ue(i)||jr(n),i.length||jr(n);var a=e==="and"?new Yze:new Xze;return a.children=qe(i,function(o){return YV(o,r)}),a.children.length||jr(n),a}function Kze(e,t){var r=e.not,i="";Hfe(r)||jr(i);var n=new Zze;return n.child=YV(r,t),n.child||jr(i),n}function Jze(e,t){for(var r="",i=t.prepareGetValue(e),n=[],a=mr(e),o=e.parser,s=o?_ue(o):null,l=0;l<a.length;l++){var u=a[l];if(!(u==="parser"||t.valueGetterAttrMap.get(u))){var c=lt(zZ,u)?zZ[u]:u,h=e[u],d=s?s(h):h,f=U7e(c,d)||c==="reg"&&new Wze(d);f||jr(r),n.push(f)}}n.length||jr(r);var p=new Qze;return p.valueGetterParam=i,p.valueParser=s,p.getValue=t.getValue,p.subCondList=n,p}function Hfe(e){return _t(e)&&!_o(e)}var $ze=function(){function e(t,r){this._cond=YV(t,r)}return e.prototype.evaluate=function(){return this._cond.evaluate()},e}();function eHe(e,t){return new $ze(e,t)}var tHe={type:"echarts:filter",transform:function(e){for(var t=e.upstream,r,i=eHe(e.config,{valueGetterAttrMap:dt({dimension:!0}),prepareGetValue:function(s){var l="",u=s.dimension;lt(s,"dimension")||jr(l);var c=t.getDimensionInfo(u);return c||jr(l),{dimIdx:c.index}},getValue:function(s){return t.retrieveValueFromItem(r,s.dimIdx)}}),n=[],a=0,o=t.count();a<o;a++)r=t.getRawDataItem(a),i.evaluate()&&n.push(r);return{data:n}}},rHe={type:"echarts:sort",transform:function(e){var t=e.upstream,r=e.config,i="",n=ci(r);n.length||jr(i);var a=[];q(n,function(c){var h=c.dimension,d=c.order,f=c.parser,p=c.incomparable;if(h==null&&jr(i),d!=="asc"&&d!=="desc"&&jr(i),p&&p!=="min"&&p!=="max"){var v="";jr(v)}if(d!=="asc"&&d!=="desc"){var m="";jr(m)}var g=t.getDimensionInfo(h);g||jr(i);var y=f?_ue(f):null;f&&!y&&jr(i),a.push({dimIdx:g.index,parser:y,comparator:new Sue(d,p)})});var o=t.sourceFormat;o!==Ao&&o!==zl&&jr(i);for(var s=[],l=0,u=t.count();l<u;l++)s.push(t.getRawDataItem(l));return s.sort(function(c,h){for(var d=0;d<a.length;d++){var f=a[d],p=t.retrieveValueFromItem(c,f.dimIdx),v=t.retrieveValueFromItem(h,f.dimIdx);f.parser&&(p=f.parser(p),v=f.parser(v));var m=f.comparator.evaluate(p,v);if(m!==0)return m}return 0}),{data:s}}};function iHe(e){e.registerTransform(tHe),e.registerTransform(rHe)}var nHe=function(e){_e(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type="dataset",r}return t.prototype.init=function(r,i,n){e.prototype.init.call(this,r,i,n),this._sourceManager=new Tue(this),jj(this)},t.prototype.mergeOption=function(r,i){e.prototype.mergeOption.call(this,r,i),jj(this)},t.prototype.optionUpdated=function(){this._sourceManager.dirty()},t.prototype.getSourceManager=function(){return this._sourceManager},t.type="dataset",t.defaultOption={seriesLayoutBy:Fc},t}(vr),aHe=function(e){_e(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type="dataset",r}return t.type="dataset",t}(Gi);function oHe(e){e.registerComponentModel(nHe),e.registerComponentView(aHe)}var Yu=$c.CMD;function Gg(e,t){return Math.abs(e-t)<1e-5}function bk(e){var t=e.data,r=e.len(),i=[],n,a=0,o=0,s=0,l=0;function u(P,C){n&&n.length>2&&i.push(n),n=[P,C]}function c(P,C,D,I){Gg(P,D)&&Gg(C,I)||n.push(P,C,D,I,D,I)}function h(P,C,D,I,O,R){var H=Math.abs(C-P),j=Math.tan(H/4)*4/3,N=C<P?-1:1,k=Math.cos(P),G=Math.sin(P),Y=Math.cos(C),F=Math.sin(C),Z=k*O+D,ne=G*R+I,re=Y*O+D,ae=F*R+I,he=O*j*N,se=R*j*N;n.push(Z-he*G,ne+se*k,re+he*F,ae-se*Y,re,ae)}for(var d,f,p,v,m=0;m<r;){var g=t[m++],y=m===1;switch(y&&(a=t[m],o=t[m+1],s=a,l=o,(g===Yu.L||g===Yu.C||g===Yu.Q)&&(n=[s,l])),g){case Yu.M:a=s=t[m++],o=l=t[m++],u(s,l);break;case Yu.L:d=t[m++],f=t[m++],c(a,o,d,f),a=d,o=f;break;case Yu.C:n.push(t[m++],t[m++],t[m++],t[m++],a=t[m++],o=t[m++]);break;case Yu.Q:d=t[m++],f=t[m++],p=t[m++],v=t[m++],n.push(a+2/3*(d-a),o+2/3*(f-o),p+2/3*(d-p),v+2/3*(f-v),p,v),a=p,o=v;break;case Yu.A:var x=t[m++],b=t[m++],_=t[m++],w=t[m++],S=t[m++],A=t[m++]+S;m+=1;var M=!t[m++];d=Math.cos(S)*_+x,f=Math.sin(S)*w+b,y?(s=d,l=f,u(s,l)):c(a,o,d,f),a=Math.cos(A)*_+x,o=Math.sin(A)*w+b;for(var E=(M?-1:1)*Math.PI/2,T=S;M?T>A:T<A;T+=E){var L=M?Math.max(T+E,A):Math.min(T+E,A);h(T,L,x,b,_,w)}break;case Yu.R:s=a=t[m++],l=o=t[m++],d=s+t[m++],f=l+t[m++],u(d,l),c(d,l,d,f),c(d,f,s,f),c(s,f,s,l),c(s,l,d,l);break;case Yu.Z:n&&c(a,o,s,l),a=s,o=l;break}}return n&&n.length>2&&i.push(n),i}function wk(e,t,r,i,n,a,o,s,l,u){if(Gg(e,r)&&Gg(t,i)&&Gg(n,o)&&Gg(a,s)){l.push(o,s);return}var c=2/u,h=c*c,d=o-e,f=s-t,p=Math.sqrt(d*d+f*f);d/=p,f/=p;var v=r-e,m=i-t,g=n-o,y=a-s,x=v*v+m*m,b=g*g+y*y;if(x<h&&b<h){l.push(o,s);return}var _=d*v+f*m,w=-d*g-f*y,S=x-_*_,A=b-w*w;if(S<h&&_>=0&&A<h&&w>=0){l.push(o,s);return}var M=[],E=[];dp(e,r,n,o,.5,M),dp(t,i,a,s,.5,E),wk(M[0],E[0],M[1],E[1],M[2],E[2],M[3],E[3],l,u),wk(M[4],E[4],M[5],E[5],M[6],E[6],M[7],E[7],l,u)}function sHe(e,t){var r=bk(e),i=[];t=t||1;for(var n=0;n<r.length;n++){var a=r[n],o=[],s=a[0],l=a[1];o.push(s,l);for(var u=2;u<a.length;){var c=a[u++],h=a[u++],d=a[u++],f=a[u++],p=a[u++],v=a[u++];wk(s,l,c,h,d,f,p,v,o,t),s=p,l=v}i.push(o)}return i}function Ufe(e,t,r){var i=e[t],n=e[1-t],a=Math.abs(i/n),o=Math.ceil(Math.sqrt(a*r)),s=Math.floor(r/o);s===0&&(s=1,o=r);for(var l=[],u=0;u<o;u++)l.push(s);var c=o*s,h=r-c;if(h>0)for(var u=0;u<h;u++)l[u%o]+=1;return l}function UZ(e,t,r){for(var i=e.r0,n=e.r,a=e.startAngle,o=e.endAngle,s=Math.abs(o-a),l=s*n,u=n-i,c=l>Math.abs(u),h=Ufe([l,u],c?0:1,t),d=(c?s:u)/h.length,f=0;f<h.length;f++)for(var p=(c?u:s)/h[f],v=0;v<h[f];v++){var m={};c?(m.startAngle=a+d*f,m.endAngle=a+d*(f+1),m.r0=i+p*v,m.r=i+p*(v+1)):(m.startAngle=a+p*v,m.endAngle=a+p*(v+1),m.r0=i+d*f,m.r=i+d*(f+1)),m.clockwise=e.clockwise,m.cx=e.cx,m.cy=e.cy,r.push(m)}}function lHe(e,t,r){for(var i=e.width,n=e.height,a=i>n,o=Ufe([i,n],a?0:1,t),s=a?"width":"height",l=a?"height":"width",u=a?"x":"y",c=a?"y":"x",h=e[s]/o.length,d=0;d<o.length;d++)for(var f=e[l]/o[d],p=0;p<o[d];p++){var v={};v[u]=d*h,v[c]=p*f,v[s]=h,v[l]=f,v.x+=e.x,v.y+=e.y,r.push(v)}}function GZ(e,t,r,i){return e*i-r*t}function uHe(e,t,r,i,n,a,o,s){var l=r-e,u=i-t,c=o-n,h=s-a,d=GZ(c,h,l,u);if(Math.abs(d)<1e-6)return null;var f=e-n,p=t-a,v=GZ(f,p,c,h)/d;return v<0||v>1?null:new Ut(v*l+e,v*u+t)}function cHe(e,t,r){var i=new Ut;Ut.sub(i,r,t),i.normalize();var n=new Ut;Ut.sub(n,e,t);var a=n.dot(i);return a}function Fm(e,t){var r=e[e.length-1];r&&r[0]===t[0]&&r[1]===t[1]||e.push(t)}function hHe(e,t,r){for(var i=e.length,n=[],a=0;a<i;a++){var o=e[a],s=e[(a+1)%i],l=uHe(o[0],o[1],s[0],s[1],t.x,t.y,r.x,r.y);l&&n.push({projPt:cHe(l,t,r),pt:l,idx:a})}if(n.length<2)return[{points:e},{points:e}];n.sort(function(m,g){return m.projPt-g.projPt});var u=n[0],c=n[n.length-1];if(c.idx<u.idx){var h=u;u=c,c=h}for(var d=[u.pt.x,u.pt.y],f=[c.pt.x,c.pt.y],p=[d],v=[f],a=u.idx+1;a<=c.idx;a++)Fm(p,e[a].slice());Fm(p,f),Fm(p,d);for(var a=c.idx+1;a<=u.idx+i;a++)Fm(v,e[a%i].slice());return Fm(v,d),Fm(v,f),[{points:p},{points:v}]}function jZ(e){var t=e.points,r=[],i=[];mC(t,r,i);var n=new qt(r[0],r[1],i[0]-r[0],i[1]-r[1]),a=n.width,o=n.height,s=n.x,l=n.y,u=new Ut,c=new Ut;return a>o?(u.x=c.x=s+a/2,u.y=l,c.y=l+o):(u.y=c.y=l+o/2,u.x=s,c.x=s+a),hHe(t,u,c)}function pS(e,t,r,i){if(r===1)i.push(t);else{var n=Math.floor(r/2),a=e(t);pS(e,a[0],n,i),pS(e,a[1],r-n,i)}return i}function dHe(e,t){for(var r=[],i=0;i<t;i++)r.push(dN(e));return r}function fHe(e,t){t.setStyle(e.style),t.z=e.z,t.z2=e.z2,t.zlevel=e.zlevel}function pHe(e){for(var t=[],r=0;r<e.length;)t.push([e[r++],e[r++]]);return t}function vHe(e,t){var r=[],i=e.shape,n;switch(e.type){case"rect":lHe(i,t,r),n=Tr;break;case"sector":UZ(i,t,r),n=Zo;break;case"circle":UZ({r0:0,r:i.r,startAngle:0,endAngle:Math.PI*2,cx:i.cx,cy:i.cy},t,r),n=Zo;break;default:var a=e.getComputedTransform(),o=a?Math.sqrt(Math.max(a[0]*a[0]+a[1]*a[1],a[2]*a[2]+a[3]*a[3])):1,s=qe(sHe(e.getUpdatedPathProxy(),o),function(g){return pHe(g)}),l=s.length;if(l===0)pS(jZ,{points:s[0]},t,r);else if(l===t)for(var u=0;u<l;u++)r.push({points:s[u]});else{var c=0,h=qe(s,function(g){var y=[],x=[];mC(g,y,x);var b=(x[1]-y[1])*(x[0]-y[0]);return c+=b,{poly:g,area:b}});h.sort(function(g,y){return y.area-g.area});for(var d=t,u=0;u<l;u++){var f=h[u];if(d<=0)break;var p=u===l-1?d:Math.ceil(f.area/c*t);p<0||(pS(jZ,{points:f.poly},p,r),d-=p)}}n=Qo;break}if(!n)return dHe(e,t);for(var v=[],u=0;u<r.length;u++){var m=new n;m.setShape(r[u]),fHe(e,m),v.push(m)}return v}function mHe(e,t){var r=e.length,i=t.length;if(r===i)return[e,t];for(var n=[],a=[],o=r<i?e:t,s=Math.min(r,i),l=Math.abs(i-r)/6,u=(s-2)/6,c=Math.ceil(l/u)+1,h=[o[0],o[1]],d=l,f=2;f<s;){var p=o[f-2],v=o[f-1],m=o[f++],g=o[f++],y=o[f++],x=o[f++],b=o[f++],_=o[f++];if(d<=0){h.push(m,g,y,x,b,_);continue}for(var w=Math.min(d,c-1)+1,S=1;S<=w;S++){var A=S/w;dp(p,m,y,b,A,n),dp(v,g,x,_,A,a),p=n[3],v=a[3],h.push(n[1],a[1],n[2],a[2],p,v),m=n[5],g=a[5],y=n[6],x=a[6]}d-=w-1}return o===e?[h,t]:[e,h]}function WZ(e,t){for(var r=e.length,i=e[r-2],n=e[r-1],a=[],o=0;o<t.length;)a[o++]=i,a[o++]=n;return a}function gHe(e,t){for(var r,i,n,a=[],o=[],s=0;s<Math.max(e.length,t.length);s++){var l=e[s],u=t[s],c=void 0,h=void 0;l?u?(r=mHe(l,u),c=r[0],h=r[1],i=c,n=h):(h=WZ(n||l,l),c=l):(c=WZ(i||u,u),h=u),a.push(c),o.push(h)}return[a,o]}function qZ(e){for(var t=0,r=0,i=0,n=e.length,a=0,o=n-2;a<n;o=a,a+=2){var s=e[o],l=e[o+1],u=e[a],c=e[a+1],h=s*c-u*l;t+=h,r+=(s+u)*h,i+=(l+c)*h}return t===0?[e[0]||0,e[1]||0]:[r/t/3,i/t/3,t]}function yHe(e,t,r,i){for(var n=(e.length-2)/6,a=1/0,o=0,s=e.length,l=s-2,u=0;u<n;u++){for(var c=u*6,h=0,d=0;d<s;d+=2){var f=d===0?c:(c+d-2)%l+2,p=e[f]-r[0],v=e[f+1]-r[1],m=t[d]-i[0],g=t[d+1]-i[1],y=m-p,x=g-v;h+=y*y+x*x}h<a&&(a=h,o=u)}return o}function xHe(e){for(var t=[],r=e.length,i=0;i<r;i+=2)t[i]=e[r-i-2],t[i+1]=e[r-i-1];return t}function bHe(e,t,r,i){for(var n=[],a,o=0;o<e.length;o++){var s=e[o],l=t[o],u=qZ(s),c=qZ(l);a==null&&(a=u[2]<0!=c[2]<0);var h=[],d=[],f=0,p=1/0,v=[],m=s.length;a&&(s=xHe(s));for(var g=yHe(s,l,u,c)*6,y=m-2,x=0;x<y;x+=2){var b=(g+x)%y+2;h[x+2]=s[b]-u[0],h[x+3]=s[b+1]-u[1]}h[0]=s[g]-u[0],h[1]=s[g+1]-u[1];for(var _=i/r,w=-i/2;w<=i/2;w+=_){for(var S=Math.sin(w),A=Math.cos(w),M=0,x=0;x<s.length;x+=2){var E=h[x],T=h[x+1],L=l[x]-c[0],P=l[x+1]-c[1],C=L*A-P*S,D=L*S+P*A;v[x]=C,v[x+1]=D;var I=C-E,O=D-T;M+=I*I+O*O}if(M<p){p=M,f=w;for(var R=0;R<v.length;R++)d[R]=v[R]}}n.push({from:h,to:d,fromCp:u,toCp:c,rotation:-f})}return n}function vS(e){return e.__isCombineMorphing}var Gfe="__mOriginal_";function mS(e,t,r){var i=Gfe+t,n=e[i]||e[t];e[i]||(e[i]=e[t]);var a=r.replace,o=r.after,s=r.before;e[t]=function(){var l=arguments,u;return s&&s.apply(this,l),a?u=a.apply(this,l):u=n.apply(this,l),o&&o.apply(this,l),u}}function yb(e,t){var r=Gfe+t;e[r]&&(e[t]=e[r],e[r]=null)}function YZ(e,t){for(var r=0;r<e.length;r++)for(var i=e[r],n=0;n<i.length;){var a=i[n],o=i[n+1];i[n++]=t[0]*a+t[2]*o+t[4],i[n++]=t[1]*a+t[3]*o+t[5]}}function jfe(e,t){var r=e.getUpdatedPathProxy(),i=t.getUpdatedPathProxy(),n=gHe(bk(r),bk(i)),a=n[0],o=n[1],s=e.getComputedTransform(),l=t.getComputedTransform();function u(){this.transform=null}s&&YZ(a,s),l&&YZ(o,l),mS(t,"updateTransform",{replace:u}),t.transform=null;var c=bHe(a,o,10,Math.PI),h=[];mS(t,"buildPath",{replace:function(d){for(var f=t.__morphT,p=1-f,v=[],m=0;m<c.length;m++){var g=c[m],y=g.from,x=g.to,b=g.rotation*f,_=g.fromCp,w=g.toCp,S=Math.sin(b),A=Math.cos(b);hA(v,_,w,f);for(var M=0;M<y.length;M+=2){var E=y[M],T=y[M+1],L=x[M],P=x[M+1],C=E*p+L*f,D=T*p+P*f;h[M]=C*A-D*S+v[0],h[M+1]=C*S+D*A+v[1]}var I=h[0],O=h[1];d.moveTo(I,O);for(var M=2;M<y.length;){var L=h[M++],P=h[M++],R=h[M++],H=h[M++],j=h[M++],N=h[M++];I===L&&O===P&&R===j&&H===N?d.lineTo(j,N):d.bezierCurveTo(L,P,R,H,j,N),I=j,O=N}}}})}function XV(e,t,r){if(!e||!t)return t;var i=r.done,n=r.during;jfe(e,t),t.__morphT=0;function a(){yb(t,"buildPath"),yb(t,"updateTransform"),t.__morphT=-1,t.createPathProxy(),t.dirtyShape()}return t.animateTo({__morphT:1},bt({during:function(o){t.dirtyShape(),n&&n(o)},done:function(){a(),i&&i()}},r)),t}function wHe(e,t,r,i,n,a){var o=16;e=n===r?0:Math.round(32767*(e-r)/(n-r)),t=a===i?0:Math.round(32767*(t-i)/(a-i));for(var s=0,l,u=(1<<o)/2;u>0;u/=2){var c=0,h=0;(e&u)>0&&(c=1),(t&u)>0&&(h=1),s+=u*u*(3*c^h),h===0&&(c===1&&(e=u-1-e,t=u-1-t),l=e,e=t,t=l)}return s}function gS(e){var t=1/0,r=1/0,i=-1/0,n=-1/0,a=qe(e,function(s){var l=s.getBoundingRect(),u=s.getComputedTransform(),c=l.x+l.width/2+(u?u[4]:0),h=l.y+l.height/2+(u?u[5]:0);return t=Math.min(c,t),r=Math.min(h,r),i=Math.max(c,i),n=Math.max(h,n),[c,h]}),o=qe(a,function(s,l){return{cp:s,z:wHe(s[0],s[1],t,r,i,n),path:e[l]}});return o.sort(function(s,l){return s.z-l.z}).map(function(s){return s.path})}function Wfe(e){return vHe(e.path,e.count)}function _k(){return{fromIndividuals:[],toIndividuals:[],count:0}}function _He(e,t,r){var i=[];function n(_){for(var w=0;w<_.length;w++){var S=_[w];vS(S)?n(S.childrenRef()):S instanceof or&&i.push(S)}}n(e);var a=i.length;if(!a)return _k();var o=r.dividePath||Wfe,s=o({path:t,count:a});if(s.length!==a)return console.error("Invalid morphing: unmatched splitted path"),_k();i=gS(i),s=gS(s);for(var l=r.done,u=r.during,c=r.individualDelay,h=new Qh,d=0;d<a;d++){var f=i[d],p=s[d];p.parent=t,p.copyTransform(h),c||jfe(f,p)}t.__isCombineMorphing=!0,t.childrenRef=function(){return s};function v(_){for(var w=0;w<s.length;w++)s[w].addSelfToZr(_)}mS(t,"addSelfToZr",{after:function(_){v(_)}}),mS(t,"removeSelfFromZr",{after:function(_){for(var w=0;w<s.length;w++)s[w].removeSelfFromZr(_)}});function m(){t.__isCombineMorphing=!1,t.__morphT=-1,t.childrenRef=null,yb(t,"addSelfToZr"),yb(t,"removeSelfFromZr")}var g=s.length;if(c)for(var y=g,x=function(){y--,y===0&&(m(),l&&l())},d=0;d<g;d++){var b=c?bt({delay:(r.delay||0)+c(d,g,i[d],s[d]),done:x},r):r;XV(i[d],s[d],b)}else t.__morphT=0,t.animateTo({__morphT:1},bt({during:function(_){for(var w=0;w<g;w++){var S=s[w];S.__morphT=t.__morphT,S.dirtyShape()}u&&u(_)},done:function(){m();for(var _=0;_<e.length;_++)yb(e[_],"updateTransform");l&&l()}},r));return t.__zr&&v(t.__zr),{fromIndividuals:i,toIndividuals:s,count:g}}function AHe(e,t,r){var i=t.length,n=[],a=r.dividePath||Wfe;function o(f){for(var p=0;p<f.length;p++){var v=f[p];vS(v)?o(v.childrenRef()):v instanceof or&&n.push(v)}}if(vS(e)){o(e.childrenRef());var s=n.length;if(s<i)for(var l=0,u=s;u<i;u++)n.push(dN(n[l++%s]));n.length=i}else{n=a({path:e,count:i});for(var c=e.getComputedTransform(),u=0;u<n.length;u++)n[u].setLocalTransform(c);if(n.length!==i)return console.error("Invalid morphing: unmatched splitted path"),_k()}n=gS(n),t=gS(t);for(var h=r.individualDelay,u=0;u<i;u++){var d=h?bt({delay:(r.delay||0)+h(u,i,n[u],t[u])},r):r;XV(n[u],t[u],d)}return{fromIndividuals:n,toIndividuals:t,count:t.length}}function XZ(e){return Ue(e[0])}function ZZ(e,t){for(var r=[],i=e.length,n=0;n<i;n++)r.push({one:e[n],many:[]});for(var n=0;n<t.length;n++){var a=t[n].length,o=void 0;for(o=0;o<a;o++)r[o%i].many.push(t[n][o])}for(var s=0,n=i-1;n>=0;n--)if(!r[n].many.length){var l=r[s].many;if(l.length<=1)if(s)s=0;else return r;var a=l.length,u=Math.ceil(a/2);r[n].many=l.slice(u,a),r[s].many=l.slice(0,u),s++}return r}var SHe={clone:function(e){for(var t=[],r=1-Math.pow(1-e.path.style.opacity,1/e.count),i=0;i<e.count;i++){var n=dN(e.path);n.setStyle("opacity",r),t.push(n)}return t},split:null};function OT(e,t,r,i,n,a){if(!e.length||!t.length)return;var o=Cy("update",i,n);if(!(o&&o.duration>0))return;var s=i.getModel("universalTransition").get("delay"),l=Object.assign({setToFinal:!0},o),u,c;XZ(e)&&(u=e,c=t),XZ(t)&&(u=t,c=e);function h(g,y,x,b,_){var w=g.many,S=g.one;if(w.length===1&&!_){var A=y?w[0]:S,M=y?S:w[0];if(vS(A))h({many:[A],one:M},!0,x,b,!0);else{var E=s?bt({delay:s(x,b)},l):l;XV(A,M,E),a(A,M,A,M,E)}}else for(var T=bt({dividePath:SHe[r],individualDelay:s&&function(O,R,H,j){return s(O+x,b)}},l),L=y?_He(w,S,T):AHe(S,w,T),P=L.fromIndividuals,C=L.toIndividuals,D=P.length,I=0;I<D;I++){var E=s?bt({delay:s(I,D)},l):l;a(P[I],C[I],y?w[I]:g.one,y?g.one:w[I],E)}}for(var d=u?u===e:e.length>t.length,f=u?ZZ(c,u):ZZ(d?t:e,[d?e:t]),p=0,v=0;v<f.length;v++)p+=f[v].many.length;for(var m=0,v=0;v<f.length;v++)h(f[v],d,m,p),m+=f[v].many.length}function M0(e){if(!e)return[];if(Ue(e)){for(var t=[],r=0;r<e.length;r++)t.push(M0(e[r]));return t}var i=[];return e.traverse(function(n){n instanceof or&&!n.disableMorphing&&!n.invisible&&!n.ignore&&i.push(n)}),i}var qfe=1e4,CHe=0,QZ=1,KZ=2,EHe=Pr();function MHe(e,t){for(var r=e.dimensions,i=0;i<r.length;i++){var n=e.getDimensionInfo(r[i]);if(n&&n.otherDims[t]===0)return r[i]}}function THe(e,t,r){var i=e.getDimensionInfo(r),n=i&&i.ordinalMeta;if(i){var a=e.get(i.name,t);return n&&n.categories[a]||a+""}}function JZ(e,t,r,i){var n=i?"itemChildGroupId":"itemGroupId",a=MHe(e,n);if(a){var o=THe(e,t,a);return o}var s=e.getRawDataItem(t),l=i?"childGroupId":"groupId";if(s&&s[l])return s[l]+"";if(!i)return r||e.getId(t)}function $Z(e){var t=[];return q(e,function(r){var i=r.data,n=r.dataGroupId;if(!(i.count()>qfe))for(var a=i.getIndices(),o=0;o<a.length;o++)t.push({data:i,groupId:JZ(i,o,n,!1),childGroupId:JZ(i,o,n,!0),divide:r.divide,dataIndex:o})}),t}function BT(e,t,r){e.traverse(function(i){i instanceof or&&Vi(i,{style:{opacity:0}},t,{dataIndex:r,isFrom:!0})})}function NT(e){if(e.parent){var t=e.getComputedTransform();e.setLocalTransform(t),e.parent.remove(e)}}function zm(e){e.stopAnimation(),e.isGroup&&e.traverse(function(t){t.stopAnimation()})}function PHe(e,t,r){var i=Cy("update",r,t);i&&e.traverse(function(n){if(n instanceof Rl){var a=CCe(n);a&&n.animateFrom({style:a},i)}})}function DHe(e,t){var r=e.length;if(r!==t.length)return!1;for(var i=0;i<r;i++){var n=e[i],a=t[i];if(n.data.getId(n.dataIndex)!==a.data.getId(a.dataIndex))return!1}return!0}function Yfe(e,t,r){var i=$Z(e),n=$Z(t);function a(x,b,_,w,S){(_||x)&&b.animateFrom({style:_&&_!==x?Be(Be({},_.style),x.style):x.style},S)}var o=!1,s=CHe,l=dt(),u=dt();i.forEach(function(x){x.groupId&&l.set(x.groupId,!0),x.childGroupId&&u.set(x.childGroupId,!0)});for(var c=0;c<n.length;c++){var h=n[c].groupId;if(u.get(h)){s=QZ;break}var d=n[c].childGroupId;if(d&&l.get(d)){s=KZ;break}}function f(x,b){return function(_){var w=_.data,S=_.dataIndex;return b?w.getId(S):x?s===QZ?_.childGroupId:_.groupId:s===KZ?_.childGroupId:_.groupId}}var p=DHe(i,n),v={};if(!p)for(var c=0;c<n.length;c++){var m=n[c],g=m.data.getItemGraphicEl(m.dataIndex);g&&(v[g.id]=!0)}function y(x,b){var _=i[b],w=n[x],S=w.data.hostModel,A=_.data.getItemGraphicEl(_.dataIndex),M=w.data.getItemGraphicEl(w.dataIndex);if(A===M){M&&PHe(M,w.dataIndex,S);return}A&&v[A.id]||M&&(zm(M),A?(zm(A),NT(A),o=!0,OT(M0(A),M0(M),w.divide,S,x,a)):BT(M,S,x))}new yd(i,n,f(!0,p),f(!1,p),null,"multiple").update(y).updateManyToOne(function(x,b){var _=n[x],w=_.data,S=w.hostModel,A=w.getItemGraphicEl(_.dataIndex),M=ni(qe(b,function(E){return i[E].data.getItemGraphicEl(i[E].dataIndex)}),function(E){return E&&E!==A&&!v[E.id]});A&&(zm(A),M.length?(q(M,function(E){zm(E),NT(E)}),o=!0,OT(M0(M),M0(A),_.divide,S,x,a)):BT(A,S,_.dataIndex))}).updateOneToMany(function(x,b){var _=i[b],w=_.data.getItemGraphicEl(_.dataIndex);if(!(w&&v[w.id])){var S=ni(qe(x,function(M){return n[M].data.getItemGraphicEl(n[M].dataIndex)}),function(M){return M&&M!==w}),A=n[x[0]].data.hostModel;S.length&&(q(S,function(M){return zm(M)}),w?(zm(w),NT(w),o=!0,OT(M0(w),M0(S),_.divide,A,x[0],a)):q(S,function(M){return BT(M,A,x[0])}))}}).updateManyToMany(function(x,b){new yd(b,x,function(_){return i[_].data.getId(i[_].dataIndex)},function(_){return n[_].data.getId(n[_].dataIndex)}).update(function(_,w){y(x[_],b[w])}).execute()}).execute(),o&&q(t,function(x){var b=x.data,_=b.hostModel,w=_&&r.getViewOfSeriesModel(_),S=Cy("update",_,0);w&&_.isAnimationEnabled()&&S&&S.duration>0&&w.group.traverse(function(A){A instanceof or&&!A.animators.length&&A.animateFrom({style:{opacity:0}},S)})})}function eQ(e){var t=e.getModel("universalTransition").get("seriesKey");return t||e.id}function tQ(e){return Ue(e)?e.sort().join(","):e}function Af(e){if(e.hostModel)return e.hostModel.getModel("universalTransition").get("divideShape")}function IHe(e,t){var r=dt(),i=dt(),n=dt();return q(e.oldSeries,function(a,o){var s=e.oldDataGroupIds[o],l=e.oldData[o],u=eQ(a),c=tQ(u);i.set(c,{dataGroupId:s,data:l}),Ue(u)&&q(u,function(h){n.set(h,{key:c,dataGroupId:s,data:l})})}),q(t.updatedSeries,function(a){if(a.isUniversalTransitionEnabled()&&a.isAnimationEnabled()){var o=a.get("dataGroupId"),s=a.getData(),l=eQ(a),u=tQ(l),c=i.get(u);if(c)r.set(u,{oldSeries:[{dataGroupId:c.dataGroupId,divide:Af(c.data),data:c.data}],newSeries:[{dataGroupId:o,divide:Af(s),data:s}]});else if(Ue(l)){var h=[];q(l,function(p){var v=i.get(p);v.data&&h.push({dataGroupId:v.dataGroupId,divide:Af(v.data),data:v.data})}),h.length&&r.set(u,{oldSeries:h,newSeries:[{dataGroupId:o,data:s,divide:Af(s)}]})}else{var d=n.get(l);if(d){var f=r.get(d.key);f||(f={oldSeries:[{dataGroupId:d.dataGroupId,data:d.data,divide:Af(d.data)}],newSeries:[]},r.set(d.key,f)),f.newSeries.push({dataGroupId:o,data:s,divide:Af(s)})}}}}),r}function rQ(e,t){for(var r=0;r<e.length;r++){var i=t.seriesIndex!=null&&t.seriesIndex===e[r].seriesIndex||t.seriesId!=null&&t.seriesId===e[r].id;if(i)return r}}function LHe(e,t,r,i){var n=[],a=[];q(ci(e.from),function(o){var s=rQ(t.oldSeries,o);s>=0&&n.push({dataGroupId:t.oldDataGroupIds[s],data:t.oldData[s],divide:Af(t.oldData[s]),groupIdDim:o.dimension})}),q(ci(e.to),function(o){var s=rQ(r.updatedSeries,o);if(s>=0){var l=r.updatedSeries[s].getData();a.push({dataGroupId:t.oldDataGroupIds[s],data:l,divide:Af(l),groupIdDim:o.dimension})}}),n.length>0&&a.length>0&&Yfe(n,a,i)}function kHe(e){e.registerUpdateLifecycle("series:beforeupdate",function(t,r,i){q(ci(i.seriesTransition),function(n){q(ci(n.to),function(a){for(var o=i.updatedSeries,s=0;s<o.length;s++)(a.seriesIndex!=null&&a.seriesIndex===o[s].seriesIndex||a.seriesId!=null&&a.seriesId===o[s].id)&&(o[s][_A]=!0)})})}),e.registerUpdateLifecycle("series:transition",function(t,r,i){var n=EHe(r);if(n.oldSeries&&i.updatedSeries&&i.optionChanged){var a=i.seriesTransition;if(a)q(ci(a),function(f){LHe(f,n,i,r)});else{var o=IHe(n,i);q(o.keys(),function(f){var p=o.get(f);Yfe(p.oldSeries,p.newSeries,r)})}q(i.updatedSeries,function(f){f[_A]&&(f[_A]=!1)})}for(var s=t.getSeries(),l=n.oldSeries=[],u=n.oldDataGroupIds=[],c=n.oldData=[],h=0;h<s.length;h++){var d=s[h].getData();d.count()<qfe&&(l.push(s[h]),u.push(s[h].get("dataGroupId")),c.push(d))}})}ir([G9e]);ir([V9e]);ir([uPe,SPe,RPe,fDe,SDe,cIe,VIe,wLe,GLe,ZLe,nke,Jke,ARe,RRe,QRe,eOe,cOe,gOe,TOe,ROe,jOe,MBe]);ir(qBe);ir(yNe);ir(Whe);ir(INe);ir(Dde);ir(ONe);ir(jNe);ir(IVe);ir(QVe);ir(M4);ir(fFe);ir(mFe);ir(EFe);ir(kFe);ir(FFe);ir(WFe);ir(tze);ir(xze);ir(kfe);ir(Rfe);ir(Fze);ir(Ffe);ir(zfe);ir(jze);ir(iHe);ir(oHe);ir(kHe);ir(n9e);var Xfe=typeof global=="object"&&global&&global.Object===Object&&global,RHe=typeof self=="object"&&self&&self.Object===Object&&self,Ny=Xfe||RHe||Function("return this")(),yS=Ny.Symbol,Zfe=Object.prototype,OHe=Zfe.hasOwnProperty,BHe=Zfe.toString,U2=yS?yS.toStringTag:void 0;function NHe(e){var t=OHe.call(e,U2),r=e[U2];try{e[U2]=void 0;var i=!0}catch{}var n=BHe.call(e);return i&&(t?e[U2]=r:delete e[U2]),n}var VHe=Object.prototype,FHe=VHe.toString;function zHe(e){return FHe.call(e)}var HHe="[object Null]",UHe="[object Undefined]",iQ=yS?yS.toStringTag:void 0;function YC(e){return e==null?e===void 0?UHe:HHe:iQ&&iQ in Object(e)?NHe(e):zHe(e)}function T4(e){return e!=null&&typeof e=="object"}var Ak=Array.isArray;function am(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")}function Qfe(e){return e}var GHe="[object AsyncFunction]",jHe="[object Function]",WHe="[object GeneratorFunction]",qHe="[object Proxy]";function XC(e){if(!am(e))return!1;var t=YC(e);return t==jHe||t==WHe||t==GHe||t==qHe}var VT=Ny["__core-js_shared__"],nQ=function(){var e=/[^.]+$/.exec(VT&&VT.keys&&VT.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}();function YHe(e){return!!nQ&&nQ in e}var XHe=Function.prototype,ZHe=XHe.toString;function QHe(e){if(e!=null){try{return ZHe.call(e)}catch{}try{return e+""}catch{}}return""}var KHe=/[\\^$.*+?()[\]{}|]/g,JHe=/^\[object .+?Constructor\]$/,$He=Function.prototype,eUe=Object.prototype,tUe=$He.toString,rUe=eUe.hasOwnProperty,iUe=RegExp("^"+tUe.call(rUe).replace(KHe,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function nUe(e){if(!am(e)||YHe(e))return!1;var t=XC(e)?iUe:JHe;return t.test(QHe(e))}function aUe(e,t){return e==null?void 0:e[t]}function ZV(e,t){var r=aUe(e,t);return nUe(r)?r:void 0}var aQ=Object.create,oUe=function(){function e(){}return function(t){if(!am(t))return{};if(aQ)return aQ(t);e.prototype=t;var r=new e;return e.prototype=void 0,r}}();function sUe(e,t,r){switch(r.length){case 0:return e.call(t);case 1:return e.call(t,r[0]);case 2:return e.call(t,r[0],r[1]);case 3:return e.call(t,r[0],r[1],r[2])}return e.apply(t,r)}function lUe(e,t){var r=-1,i=e.length;for(t||(t=Array(i));++r<i;)t[r]=e[r];return t}var uUe=800,cUe=16,hUe=Date.now;function dUe(e){var t=0,r=0;return function(){var i=hUe(),n=cUe-(i-r);if(r=i,n>0){if(++t>=uUe)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}function fUe(e){return function(){return e}}var xS=function(){try{var e=ZV(Object,"defineProperty");return e({},"",{}),e}catch{}}(),pUe=xS?function(e,t){return xS(e,"toString",{configurable:!0,enumerable:!1,value:fUe(t),writable:!0})}:Qfe,vUe=dUe(pUe),mUe=9007199254740991,gUe=/^(?:0|[1-9]\d*)$/;function Kfe(e,t){var r=typeof e;return t=t??mUe,!!t&&(r=="number"||r!="symbol"&&gUe.test(e))&&e>-1&&e%1==0&&e<t}function QV(e,t,r){t=="__proto__"&&xS?xS(e,t,{configurable:!0,enumerable:!0,value:r,writable:!0}):e[t]=r}function ZC(e,t){return e===t||e!==e&&t!==t}var yUe=Object.prototype,xUe=yUe.hasOwnProperty;function bUe(e,t,r){var i=e[t];(!(xUe.call(e,t)&&ZC(i,r))||r===void 0&&!(t in e))&&QV(e,t,r)}function wUe(e,t,r,i){var n=!r;r||(r={});for(var a=-1,o=t.length;++a<o;){var s=t[a],l=void 0;l===void 0&&(l=e[s]),n?QV(r,s,l):bUe(r,s,l)}return r}var oQ=Math.max;function _Ue(e,t,r){return t=oQ(t===void 0?e.length-1:t,0),function(){for(var i=arguments,n=-1,a=oQ(i.length-t,0),o=Array(a);++n<a;)o[n]=i[t+n];n=-1;for(var s=Array(t+1);++n<t;)s[n]=i[n];return s[t]=r(o),sUe(e,this,s)}}function AUe(e,t){return vUe(_Ue(e,t,Qfe),e+"")}var SUe=9007199254740991;function Jfe(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=SUe}function KV(e){return e!=null&&Jfe(e.length)&&!XC(e)}function CUe(e,t,r){if(!am(r))return!1;var i=typeof t;return(i=="number"?KV(r)&&Kfe(t,r.length):i=="string"&&t in r)?ZC(r[t],e):!1}function EUe(e){return AUe(function(t,r){var i=-1,n=r.length,a=n>1?r[n-1]:void 0,o=n>2?r[2]:void 0;for(a=e.length>3&&typeof a=="function"?(n--,a):void 0,o&&CUe(r[0],r[1],o)&&(a=n<3?void 0:a,n=1),t=Object(t);++i<n;){var s=r[i];s&&e(t,s,i,a)}return t})}var MUe=Object.prototype;function $fe(e){var t=e&&e.constructor,r=typeof t=="function"&&t.prototype||MUe;return e===r}function TUe(e,t){for(var r=-1,i=Array(e);++r<e;)i[r]=t(r);return i}var PUe="[object Arguments]";function sQ(e){return T4(e)&&YC(e)==PUe}var epe=Object.prototype,DUe=epe.hasOwnProperty,IUe=epe.propertyIsEnumerable,Sk=sQ(function(){return arguments}())?sQ:function(e){return T4(e)&&DUe.call(e,"callee")&&!IUe.call(e,"callee")};function LUe(){return!1}var tpe=typeof exports=="object"&&exports&&!exports.nodeType&&exports,lQ=tpe&&typeof module=="object"&&module&&!module.nodeType&&module,kUe=lQ&&lQ.exports===tpe,uQ=kUe?Ny.Buffer:void 0,RUe=uQ?uQ.isBuffer:void 0,rpe=RUe||LUe,OUe="[object Arguments]",BUe="[object Array]",NUe="[object Boolean]",VUe="[object Date]",FUe="[object Error]",zUe="[object Function]",HUe="[object Map]",UUe="[object Number]",GUe="[object Object]",jUe="[object RegExp]",WUe="[object Set]",qUe="[object String]",YUe="[object WeakMap]",XUe="[object ArrayBuffer]",ZUe="[object DataView]",QUe="[object Float32Array]",KUe="[object Float64Array]",JUe="[object Int8Array]",$Ue="[object Int16Array]",eGe="[object Int32Array]",tGe="[object Uint8Array]",rGe="[object Uint8ClampedArray]",iGe="[object Uint16Array]",nGe="[object Uint32Array]",qi={};qi[QUe]=qi[KUe]=qi[JUe]=qi[$Ue]=qi[eGe]=qi[tGe]=qi[rGe]=qi[iGe]=qi[nGe]=!0;qi[OUe]=qi[BUe]=qi[XUe]=qi[NUe]=qi[ZUe]=qi[VUe]=qi[FUe]=qi[zUe]=qi[HUe]=qi[UUe]=qi[GUe]=qi[jUe]=qi[WUe]=qi[qUe]=qi[YUe]=!1;function aGe(e){return T4(e)&&Jfe(e.length)&&!!qi[YC(e)]}function oGe(e){return function(t){return e(t)}}var ipe=typeof exports=="object"&&exports&&!exports.nodeType&&exports,xb=ipe&&typeof module=="object"&&module&&!module.nodeType&&module,sGe=xb&&xb.exports===ipe,FT=sGe&&Xfe.process,cQ=function(){try{var e=xb&&xb.require&&xb.require("util").types;return e||FT&&FT.binding&&FT.binding("util")}catch{}}(),hQ=cQ&&cQ.isTypedArray,npe=hQ?oGe(hQ):aGe;function lGe(e,t){var r=Ak(e),i=!r&&Sk(e),n=!r&&!i&&rpe(e),a=!r&&!i&&!n&&npe(e),o=r||i||n||a,s=o?TUe(e.length,String):[],l=s.length;for(var u in e)o&&(u=="length"||n&&(u=="offset"||u=="parent")||a&&(u=="buffer"||u=="byteLength"||u=="byteOffset")||Kfe(u,l))||s.push(u);return s}function uGe(e,t){return function(r){return e(t(r))}}function cGe(e){var t=[];if(e!=null)for(var r in Object(e))t.push(r);return t}var hGe=Object.prototype,dGe=hGe.hasOwnProperty;function fGe(e){if(!am(e))return cGe(e);var t=$fe(e),r=[];for(var i in e)i=="constructor"&&(t||!dGe.call(e,i))||r.push(i);return r}function ape(e){return KV(e)?lGe(e):fGe(e)}var bw=ZV(Object,"create");function pGe(){this.__data__=bw?bw(null):{},this.size=0}function vGe(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}var mGe="__lodash_hash_undefined__",gGe=Object.prototype,yGe=gGe.hasOwnProperty;function xGe(e){var t=this.__data__;if(bw){var r=t[e];return r===mGe?void 0:r}return yGe.call(t,e)?t[e]:void 0}var bGe=Object.prototype,wGe=bGe.hasOwnProperty;function _Ge(e){var t=this.__data__;return bw?t[e]!==void 0:wGe.call(t,e)}var AGe="__lodash_hash_undefined__";function SGe(e,t){var r=this.__data__;return this.size+=this.has(e)?0:1,r[e]=bw&&t===void 0?AGe:t,this}function Fv(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var i=e[t];this.set(i[0],i[1])}}Fv.prototype.clear=pGe;Fv.prototype.delete=vGe;Fv.prototype.get=xGe;Fv.prototype.has=_Ge;Fv.prototype.set=SGe;function CGe(){this.__data__=[],this.size=0}function QC(e,t){for(var r=e.length;r--;)if(ZC(e[r][0],t))return r;return-1}var EGe=Array.prototype,MGe=EGe.splice;function TGe(e){var t=this.__data__,r=QC(t,e);if(r<0)return!1;var i=t.length-1;return r==i?t.pop():MGe.call(t,r,1),--this.size,!0}function PGe(e){var t=this.__data__,r=QC(t,e);return r<0?void 0:t[r][1]}function DGe(e){return QC(this.__data__,e)>-1}function IGe(e,t){var r=this.__data__,i=QC(r,e);return i<0?(++this.size,r.push([e,t])):r[i][1]=t,this}function Nd(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var i=e[t];this.set(i[0],i[1])}}Nd.prototype.clear=CGe;Nd.prototype.delete=TGe;Nd.prototype.get=PGe;Nd.prototype.has=DGe;Nd.prototype.set=IGe;var ope=ZV(Ny,"Map");function LGe(){this.size=0,this.__data__={hash:new Fv,map:new(ope||Nd),string:new Fv}}function kGe(e){var t=typeof e;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?e!=="__proto__":e===null}function KC(e,t){var r=e.__data__;return kGe(t)?r[typeof t=="string"?"string":"hash"]:r.map}function RGe(e){var t=KC(this,e).delete(e);return this.size-=t?1:0,t}function OGe(e){return KC(this,e).get(e)}function BGe(e){return KC(this,e).has(e)}function NGe(e,t){var r=KC(this,e),i=r.size;return r.set(e,t),this.size+=r.size==i?0:1,this}function Vy(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var i=e[t];this.set(i[0],i[1])}}Vy.prototype.clear=LGe;Vy.prototype.delete=RGe;Vy.prototype.get=OGe;Vy.prototype.has=BGe;Vy.prototype.set=NGe;var spe=uGe(Object.getPrototypeOf,Object),VGe="[object Object]",FGe=Function.prototype,zGe=Object.prototype,lpe=FGe.toString,HGe=zGe.hasOwnProperty,UGe=lpe.call(Object);function GGe(e){if(!T4(e)||YC(e)!=VGe)return!1;var t=spe(e);if(t===null)return!0;var r=HGe.call(t,"constructor")&&t.constructor;return typeof r=="function"&&r instanceof r&&lpe.call(r)==UGe}function jGe(){this.__data__=new Nd,this.size=0}function WGe(e){var t=this.__data__,r=t.delete(e);return this.size=t.size,r}function qGe(e){return this.__data__.get(e)}function YGe(e){return this.__data__.has(e)}var XGe=200;function ZGe(e,t){var r=this.__data__;if(r instanceof Nd){var i=r.__data__;if(!ope||i.length<XGe-1)return i.push([e,t]),this.size=++r.size,this;r=this.__data__=new Vy(i)}return r.set(e,t),this.size=r.size,this}function Fy(e){var t=this.__data__=new Nd(e);this.size=t.size}Fy.prototype.clear=jGe;Fy.prototype.delete=WGe;Fy.prototype.get=qGe;Fy.prototype.has=YGe;Fy.prototype.set=ZGe;var upe=typeof exports=="object"&&exports&&!exports.nodeType&&exports,dQ=upe&&typeof module=="object"&&module&&!module.nodeType&&module,QGe=dQ&&dQ.exports===upe,fQ=QGe?Ny.Buffer:void 0;fQ&&fQ.allocUnsafe;function KGe(e,t){return e.slice()}var pQ=Ny.Uint8Array;function JGe(e){var t=new e.constructor(e.byteLength);return new pQ(t).set(new pQ(e)),t}function $Ge(e,t){var r=JGe(e.buffer);return new e.constructor(r,e.byteOffset,e.length)}function eje(e){return typeof e.constructor=="function"&&!$fe(e)?oUe(spe(e)):{}}function tje(e){return function(t,r,i){for(var n=-1,a=Object(t),o=i(t),s=o.length;s--;){var l=o[++n];if(r(a[l],l,a)===!1)break}return t}}var rje=tje();function Ck(e,t,r){(r!==void 0&&!ZC(e[t],r)||r===void 0&&!(t in e))&&QV(e,t,r)}function ije(e){return T4(e)&&KV(e)}function Ek(e,t){if(!(t==="constructor"&&typeof e[t]=="function")&&t!="__proto__")return e[t]}function nje(e){return wUe(e,ape(e))}function aje(e,t,r,i,n,a,o){var s=Ek(e,r),l=Ek(t,r),u=o.get(l);if(u){Ck(e,r,u);return}var c=a?a(s,l,r+"",e,t,o):void 0,h=c===void 0;if(h){var d=Ak(l),f=!d&&rpe(l),p=!d&&!f&&npe(l);c=l,d||f||p?Ak(s)?c=s:ije(s)?c=lUe(s):f?(h=!1,c=KGe(l)):p?(h=!1,c=$Ge(l)):c=[]:GGe(l)||Sk(l)?(c=s,Sk(s)?c=nje(s):(!am(s)||XC(s))&&(c=eje(l))):h=!1}h&&(o.set(l,c),n(c,l,i,a,o),o.delete(l)),Ck(e,r,c)}function cpe(e,t,r,i,n){e!==t&&rje(t,function(a,o){if(n||(n=new Fy),am(a))aje(e,t,o,r,cpe,i,n);else{var s=i?i(Ek(e,o),a,o+"",e,t,n):void 0;s===void 0&&(s=a),Ck(e,o,s)}},ape)}var oje=EUe(function(e,t,r){cpe(e,t,r)});const hpe=1440,sje=1440,lje=750,dpe=Fe(1);function vQ(){dpe.value=Math.max(1,window.innerWidth/hpe)}var Lne;window.onload=vQ,(Lne=window==null?void 0:window.document)!=null&&Lne.addEventListener&&window.document.addEventListener("resize",vQ);function Du(e,t){const r=t?lje:sje;return _s(()=>`${e/(r*dpe.value)*100}vw`)}function Hm(e){return e*(window.innerWidth/hpe)}function G2(e){const t={color:["#44DAC8","#FDCC1E"],title:{textStyle:{fontFamily:"Syncopate",fontSize:Hm(16),fontWeight:700,color:"#FFFFFF"}},grid:{left:0,right:0,top:"20%",bottom:0,containLabel:!0},xAxis:{type:"category",axisTick:{show:!1},axisLine:{lineStyle:{color:"rgba(255,255,255,0.08)"}},axisLabel:{color:"#444343",fontFamily:"Oxygen",fontSize:Hm(12)}},yAxis:{type:"value",splitLine:{show:!0,lineStyle:{color:["rgba(255,255,255,0.08)"],width:1}},splitNumber:4,axisLabel:{color:"#444343",fontFamily:"Oxygen",fontSize:Hm(12),margin:Hm(28),formatter:function(r){return r>=1e3&&r<1e6?r/1e3+"k":r>=1e6?parseFloat((r/1e6).toFixed(1))+"M":r.toString()}}},legend:{right:0,top:0,icon:"circle",itemWidth:Hm(8),selectedMode:!1,textStyle:{color:"rgba(255,255,255,0.6)",fontSize:Hm(13),fontFamily:"Oxygen"}},tooltip:{trigger:"axis",backgroundColor:"#fff",borderColor:"#fff",axisPointer:{type:"cross",label:{show:!1},crossStyle:{type:"dashed",color:"rgba(255,255,255,.2)"},lineStyle:{color:"rgba(255,255,255,.2)"}}},series:[{lineStyle:{color:"#44DAC8",width:2},symbol:"none",areaStyle:{color:new Sy(0,0,0,1,[{offset:0,color:"rgba(68, 218, 200, 0.2)"},{offset:1,color:"rgba(68, 218, 200, 0)"}])}}]};return oje(t,e)}const uje="World, Eckert III projection, low resolution",cje="1.1.2",hje="FeatureCollection",dje="Copyright (c) 2015 Highsoft AS, Based on data from Natural Earth",fje="Natural Earth",pje="http://www.naturalearthdata.com",vje={type:"name",properties:{name:"urn:ogc:def:crs:EPSG:54013"}},mje=[{type:"Feature",id:"FO",properties:{"hc-group":"admin0","hc-middle-x":.76,"hc-middle-y":.37,"hc-key":"fo","hc-a2":"FO",name:"Faroe Islands",labelrank:"6","country-abbrev":"Faeroe Is.",subregion:"Northern Europe","region-wb":"Europe & Central Asia","iso-a3":"FRO","iso-a2":"FO","woe-id":"23424816",continent:"Europe"},geometry:{type:"Polygon",coordinates:[[[3827,9148],[3834,9150],[3830,9142],[3816,9149],[3827,9148]]]}},{type:"Feature",id:"US",properties:{"hc-group":"admin0","hc-middle-x":.65,"hc-middle-y":.68,"hc-key":"us","hc-a2":"US",name:"United States of America",labelrank:"2","country-abbrev":"U.S.A.",subregion:"Northern America","region-wb":"North America","iso-a3":"USA","iso-a2":"US","woe-id":"23424977",continent:"North America"},geometry:{type:"MultiPolygon",coordinates:[[[[-866,8886],[-893,8867],[-978,8845],[-999,8848],[-917,8863],[-866,8886]]],[[[124,8945],[132,8959],[155,8940],[148,8905],[110,8925],[124,8945]]],[[[-400,9015],[-361,9034],[-378,9001],[-457,8977],[-461,8992],[-400,9015]]],[[[1466,8632],[1480,8618],[1420,8624],[1420,8598],[1447,8615],[1475,8600],[1471,8566],[1489,8523],[1483,8511],[1478,8508],[1474,8511],[1464,8500],[1463,8500],[1463,8499],[1447,8481],[1500,8474],[1586,8509],[1596,8520],[1593,8523],[1593,8526],[1594,8528],[1594,8532],[1667,8534],[1690,8563],[1701,8568],[1704,8571],[1723,8583],[1741,8588],[1741,8588],[1839,8588],[1882,8617],[1926,8668],[1966,8656],[1957,8613],[1960,8608],[1967,8608],[1963,8597],[1972,8594],[1975,8582],[1920,8558],[1912,8566],[1855,8532],[1849,8477],[1749,8455],[1789,8457],[1721,8441],[1722,8416],[1685,8385],[1671,8355],[1644,8375],[1645,8282],[1614,8248],[1596,8250],[1451,8154],[1436,8121],[1462,7993],[1445,7941],[1421,7938],[1393,7982],[1378,8028],[1390,8061],[1352,8101],[1319,8085],[1285,8114],[1213,8105],[1183,8065],[1159,8080],[1133,8067],[1108,8089],[1029,8087],[921,8035],[911,7966],[877,7969],[850,7985],[851,7998],[843,8001],[824,8041],[807,8080],[804,8082],[800,8085],[769,8094],[737,8064],[698,8087],[692,8116],[649,8156],[596,8156],[592,8141],[502,8141],[392,8179],[397,8186],[320,8180],[318,8199],[259,8242],[232,8243],[197,8333],[199,8353],[174,8389],[169,8439],[191,8471],[193,8517],[248,8606],[266,8698],[319,8689],[330,8718],[1159,8718],[1230,8704],[1261,8687],[1317,8686],[1335,8684],[1347,8651],[1369,8638],[1445,8646],[1456,8636],[1468,8638],[1466,8632]]],[[[321,8718],[319,8718],[320,8718],[321,8718]]],[[[112,9021],[128,9014],[100,8995],[115,8989],[96,8955],[90,9001],[107,9021],[81,9020],[54,9048],[9,9069],[-52,9082],[-87,9078],[-137,9094],[-128,9106],[-187,9104],[-194,9078],[-243,9078],[-283,9059],[-333,9056],[-280,9111],[-340,9075],[-394,9058],[-381,9043],[-431,9016],[-491,8999],[-520,8980],[-516,8945],[-563,8970],[-585,8957],[-676,8930],[-700,8935],[-736,8910],[-820,8895],[-802,8911],[-761,8919],[-698,8944],[-660,8947],[-542,8999],[-490,9042],[-527,9033],[-579,9048],[-607,9032],[-626,9038],[-608,9082],[-654,9072],[-679,9090],[-728,9070],[-752,9085],[-699,9088],[-652,9106],[-679,9128],[-572,9185],[-549,9178],[-464,9201],[-440,9240],[-510,9223],[-589,9228],[-592,9247],[-566,9251],[-608,9264],[-485,9293],[-473,9277],[-419,9277],[-363,9292],[-398,9292],[-390,9309],[-440,9311],[-434,9327],[-477,9351],[-447,9368],[-394,9370],[-344,9386],[-278,9416],[-202,9432],[-157,9433],[-108,9448],[-67,9432],[-6,9433],[-11,9420],[58,9422],[152,9405],[209,9409],[255,9394],[156,9284],[93,9208],[4,9088],[50,9081],[75,9043],[150,9071],[180,9026],[197,8967],[229,8945],[200,8912],[171,8910],[159,8957],[119,8975],[161,8993],[127,8990],[142,9021],[141,9055],[128,9021],[112,9021]]]]}},{type:"Feature",id:"JP",properties:{"hc-group":"admin0","hc-middle-x":.75,"hc-middle-y":.53,"hc-key":"jp","hc-a2":"JP",name:"Japan",labelrank:"2","country-abbrev":"Japan",subregion:"Eastern Asia","region-wb":"East Asia & Pacific","iso-a3":"JPN","iso-a2":"JP","woe-id":"23424856",continent:"Asia"},geometry:{type:"MultiPolygon",coordinates:[[[[8256,8238],[8251,8203],[8235,8213],[8212,8187],[8190,8211],[8239,8241],[8256,8238]]],[[[8102,8201],[8085,8232],[8118,8210],[8129,8224],[8168,8217],[8186,8194],[8179,8142],[8145,8138],[8129,8189],[8102,8201]]],[[[8412,8371],[8420,8303],[8435,8285],[8416,8258],[8404,8279],[8364,8252],[8327,8247],[8304,8215],[8273,8224],[8276,8250],[8199,8238],[8185,8221],[8150,8226],[8186,8278],[8238,8283],[8277,8277],[8293,8315],[8337,8332],[8334,8353],[8361,8360],[8366,8408],[8346,8444],[8353,8466],[8386,8462],[8429,8406],[8412,8371]]],[[[8433,8487],[8380,8509],[8338,8498],[8372,8483],[8338,8475],[8319,8512],[8328,8535],[8358,8534],[8350,8576],[8328,8594],[8341,8605],[8404,8566],[8463,8548],[8479,8528],[8447,8522],[8433,8487]]]]}},{type:"Feature",id:"FR",properties:{"hc-group":"admin0","hc-middle-x":.28,"hc-middle-y":.06,"hc-key":"fr","hc-a2":"FR",name:"France",labelrank:"2","country-abbrev":"Fr.",subregion:"Western Europe","region-wb":"Europe & Central Asia","iso-a3":"FRA","iso-a2":"FR","woe-id":"-90",continent:"Europe"},geometry:{type:"MultiPolygon",coordinates:[[[[4310,8511],[4314,8494],[4304,8469],[4283,8498],[4310,8511]]],[[[9387,6439],[9379,6409],[9388,6384],[9345,6411],[9321,6438],[9319,6461],[9366,6418],[9387,6439]]],[[[1977,7707],[1980,7709],[1980,7706],[1977,7707]]],[[[4249,8548],[4249,8548],[4247,8547],[4247,8548],[4245,8546],[4214,8526],[4141,8540],[4113,8521],[4118,8504],[4097,8500],[4080,8504],[4080,8504],[4080,8504],[4072,8506],[4073,8510],[4064,8509],[4018,8512],[3965,8535],[3974,8542],[3988,8622],[3934,8670],[3878,8688],[3877,8705],[3925,8714],[3939,8703],[3973,8710],[3962,8742],[4013,8728],[4056,8751],[4067,8780],[4095,8787],[4143,8751],[4193,8736],[4199,8733],[4210,8734],[4266,8717],[4249,8672],[4205,8640],[4209,8630],[4211,8633],[4213,8633],[4226,8634],[4225,8625],[4233,8618],[4221,8591],[4249,8548]]],[[[2250,7292],[2258,7305],[2290,7295],[2331,7260],[2331,7249],[2288,7188],[2234,7193],[2255,7230],[2240,7277],[2250,7292]]]]}},{type:"Feature",id:"CN",properties:{"hc-group":"admin0","hc-middle-x":.44,"hc-middle-y":.52,"hc-key":"cn","hc-a2":"CN",name:"China",labelrank:"2","country-abbrev":"China",subregion:"Eastern Asia","region-wb":"East Asia & Pacific","iso-a3":"CHN","iso-a2":"CN","woe-id":"23424781",continent:"Asia"},geometry:{type:"MultiPolygon",coordinates:[[[[7575,7719],[7535,7722],[7530,7747],[7562,7771],[7592,7776],[7604,7761],[7575,7719]]],[[[6857,8010],[6851,8032],[6830,8028],[6779,8036],[6761,8028],[6694,8073],[6677,8071],[6625,8108],[6591,8104],[6513,8141],[6496,8180],[6530,8187],[6503,8212],[6502,8240],[6460,8277],[6447,8276],[6427,8282],[6397,8309],[6349,8327],[6343,8331],[6358,8334],[6346,8376],[6316,8378],[6305,8406],[6312,8426],[6392,8455],[6432,8458],[6489,8496],[6499,8527],[6463,8589],[6525,8605],[6532,8660],[6588,8647],[6609,8655],[6604,8699],[6644,8721],[6649,8723],[6658,8724],[6669,8704],[6749,8675],[6782,8639],[6790,8594],[6873,8586],[6937,8564],[6981,8514],[7145,8507],[7216,8482],[7263,8481],[7306,8499],[7387,8505],[7449,8545],[7425,8570],[7435,8591],[7488,8579],[7509,8601],[7542,8603],[7560,8631],[7652,8650],[7597,8685],[7573,8685],[7571,8685],[7568,8679],[7519,8676],[7503,8690],[7515,8746],[7552,8735],[7582,8763],[7604,8821],[7571,8842],[7587,8858],[7653,8868],[7736,8849],[7774,8822],[7803,8786],[7861,8737],[7902,8733],[7963,8696],[7979,8675],[8023,8676],[8069,8698],[8090,8678],[8086,8629],[8071,8590],[8059,8598],[8043,8595],[8016,8582],[8036,8557],[8034,8507],[7964,8490],[7975,8469],[7924,8479],[7914,8454],[7873,8428],[7788,8383],[7781,8409],[7804,8441],[7765,8455],[7725,8421],[7717,8398],[7678,8396],[7698,8364],[7722,8364],[7751,8330],[7784,8354],[7849,8340],[7798,8309],[7763,8263],[7803,8238],[7836,8185],[7873,8161],[7886,8127],[7857,8115],[7884,8098],[7896,8043],[7872,8031],[7850,7988],[7848,7956],[7825,7920],[7778,7887],[7765,7867],[7711,7863],[7700,7837],[7673,7870],[7674,7843],[7587,7815],[7567,7779],[7556,7819],[7512,7832],[7499,7819],[7456,7836],[7444,7866],[7404,7881],[7364,7853],[7315,7861],[7306,7849],[7287,7844],[7298,7808],[7279,7821],[7248,7817],[7237,7837],[7211,7841],[7218,7871],[7197,7875],[7184,7904],[7155,7897],[7151,7936],[7178,7963],[7168,8018],[7126,8050],[7121,8039],[7077,8077],[7029,8075],[6973,8029],[6942,8024],[6894,8044],[6857,8010]]]]}},{type:"Feature",id:"SW",properties:{"hc-group":"admin0","hc-middle-x":.74,"hc-middle-y":.42,"hc-key":"sw","hc-a2":"SW",name:"Serranilla Bank",labelrank:"5","country-abbrev":"S.B.",subregion:"Caribbean","region-wb":"Latin America & Caribbean","iso-a3":"-99","iso-a2":"SW","woe-id":"-99",continent:"North America"},geometry:{type:"Polygon",coordinates:[[[1469,7635],[1469,7635],[1469,7635],[1469,7635]]]}},{type:"Feature",id:"SH",properties:{"hc-group":"admin0","hc-middle-x":.52,"hc-middle-y":.51,"hc-key":"sh","hc-a2":"SH",name:"Scarborough Reef",labelrank:"6","country-abbrev":"S.R.",subregion:"South-Eastern Asia","region-wb":"East Asia & Pacific","iso-a3":"-99","iso-a2":"SH","woe-id":"-99",continent:"Asia"},geometry:{type:"Polygon",coordinates:[[[7842,7612],[7842,7612],[7842,7612],[7842,7612],[7842,7612]]]}},{type:"Feature",id:"PH",properties:{"hc-group":"admin0","hc-middle-x":.38,"hc-middle-y":.08,"hc-key":"ph","hc-a2":"PH",name:"Philippines",labelrank:"2","country-abbrev":"Phil.",subregion:"South-Eastern Asia","region-wb":"East Asia & Pacific","iso-a3":"PHL","iso-a2":"PH","woe-id":"23424934",continent:"Asia"},geometry:{type:"MultiPolygon",coordinates:[[[[8042,7445],[8056,7475],[8055,7436],[8032,7412],[8009,7439],[8033,7476],[8042,7445]]],[[[7989,7514],[8030,7492],[8013,7467],[7993,7458],[7989,7514]]],[[[8072,7492],[8091,7500],[8063,7527],[8104,7517],[8114,7480],[8092,7484],[8069,7463],[8072,7492]]],[[[7925,7498],[7920,7461],[7848,7394],[7908,7467],[7925,7498]]],[[[8075,7359],[8048,7372],[8013,7360],[8009,7378],[8044,7401],[8061,7384],[8089,7414],[8113,7411],[8110,7446],[8140,7406],[8152,7355],[8142,7337],[8126,7357],[8113,7335],[8116,7299],[8077,7319],[8075,7359]]],[[[8035,7562],[8055,7542],[8036,7516],[8024,7556],[8002,7573],[8006,7547],[7975,7573],[7965,7516],[7923,7567],[7940,7568],[7919,7601],[7904,7652],[7924,7645],[7919,7721],[7970,7722],[7947,7747],[7976,7718],[7989,7675],[7959,7619],[7975,7581],[7998,7586],[8054,7567],[8035,7562]]]]}},{type:"Feature",id:"ES",properties:{"hc-group":"admin0","hc-middle-x":.73,"hc-middle-y":.26,"hc-key":"es","hc-a2":"ES",name:"Spain",labelrank:"2","country-abbrev":"Sp.",subregion:"Southern Europe","region-wb":"Europe & Central Asia","iso-a3":"ESP","iso-a2":"ES","woe-id":"23424950",continent:"Europe"},geometry:{type:"MultiPolygon",coordinates:[[[[3557,8034],[3529,8027],[3496,8037],[3449,8026],[3454,8060],[3468,8039],[3506,8051],[3530,8032],[3557,8034]]],[[[3850,8291],[3853,8290],[3852,8289],[3851,8290],[3850,8291]]],[[[3852,8298],[3827,8304],[3817,8325],[3788,8333],[3803,8392],[3805,8458],[3828,8476],[3817,8488],[3750,8489],[3737,8528],[3777,8548],[3797,8541],[3965,8535],[4018,8512],[4064,8509],[4066,8504],[4072,8506],[4080,8504],[4079,8505],[4080,8506],[4081,8504],[4080,8504],[4097,8500],[4118,8504],[4119,8489],[4083,8466],[4050,8458],[4010,8409],[4024,8386],[4067,8396],[4107,8420],[4138,8426],[4112,8396],[4094,8409],[4064,8388],[4004,8370],[3998,8347],[3967,8338],[3955,8319],[3881,8317],[3852,8298],[3852,8298]]],[[[3927,8270],[3927,8271],[3927,8272],[3927,8272],[3927,8272],[3928,8270],[3927,8270]]]]}},{type:"Feature",id:"BU",properties:{"hc-group":"admin0","hc-middle-x":.52,"hc-middle-y":.73,"hc-key":"bu","hc-a2":"BU",name:"Bajo Nuevo Bank (Petrel Is.)",labelrank:"8","country-abbrev":null,subregion:"Caribbean","region-wb":"Latin America & Caribbean","iso-a3":"-99","iso-a2":"BU","woe-id":"-99",continent:"North America"},geometry:{type:"Polygon",coordinates:[[[1425,7633],[1425,7633],[1425,7633],[1425,7633],[1425,7633]]]}},{type:"Feature",id:"MV",properties:{"hc-group":"admin0","hc-middle-x":.57,"hc-middle-y":.64,"hc-key":"mv","hc-a2":"MV",name:"Maldives",labelrank:"5","country-abbrev":"Mald.",subregion:"Southern Asia","region-wb":"South Asia","iso-a3":"MDV","iso-a2":"MV","woe-id":"23424899",continent:"Seven seas (open ocean)"},geometry:{type:"Polygon",coordinates:[[[6424,7289],[6415,7292],[6419,7298],[6425,7294],[6424,7289]]]}},{type:"Feature",id:"SP",properties:{"hc-group":"admin0","hc-middle-x":.5,"hc-middle-y":.5,"hc-key":"sp","hc-a2":"SP",name:"Spratly Islands",labelrank:"6","country-abbrev":"Spratly Is.",subregion:"South-Eastern Asia","region-wb":"East Asia & Pacific","iso-a3":"-99","iso-a2":"SP","woe-id":"23424921",continent:"Asia"},geometry:{type:"Polygon",coordinates:[[[7793,7471],[7793,7471],[7793,7471],[7793,7471],[7793,7471]]]}},{type:"Feature",id:"GB",properties:{"hc-group":"admin0","hc-middle-x":.62,"hc-middle-y":.06,"hc-key":"gb","hc-a2":"GB",name:"United Kingdom",labelrank:"2","country-abbrev":"U.K.",subregion:"Northern Europe","region-wb":"Europe & Central Asia","iso-a3":"GBR","iso-a2":"GB","woe-id":"-90",continent:"Europe"},geometry:{type:"MultiPolygon",coordinates:[[[[2261,5436],[2303,5427],[2248,5406],[2223,5409],[2220,5432],[2261,5436]]],[[[5084,8260],[5083,8259],[5081,8260],[5080,8261],[5080,8261],[5081,8260],[5078,8260],[5078,8261],[5079,8261],[5077,8262],[5080,8262],[5084,8263],[5084,8263],[5081,8262],[5084,8260]],[[5080,8261],[5080,8261],[5079,8261],[5079,8261],[5080,8261]]],[[[3852,8298],[3852,8297],[3852,8298],[3852,8298]]],[[[5057,8249],[5054,8250],[5049,8250],[5052,8251],[5057,8249]]],[[[3807,8917],[3839,8925],[3857,8904],[3835,8885],[3780,8897],[3807,8917]]],[[[3972,8934],[3984,8903],[4017,8886],[4029,8852],[4068,8842],[4047,8803],[4060,8788],[3981,8770],[3917,8772],[3906,8758],[3856,8756],[3896,8791],[3929,8791],[3862,8812],[3895,8826],[3897,8857],[3926,8862],[3936,8889],[3920,8911],[3869,8911],[3885,8931],[3855,8961],[3829,8969],[3815,9019],[3853,9009],[3876,9033],[3922,9034],[3932,9057],[3980,9075],[3930,9046],[3927,9023],[3902,9011],[3964,9003],[3956,8977],[3927,8950],[3972,8934]]]]}},{type:"Feature",id:"GR",properties:{"hc-group":"admin0","hc-middle-x":.33,"hc-middle-y":.63,"hc-key":"gr","hc-a2":"GR",name:"Greece",labelrank:"3","country-abbrev":"Greece",subregion:"Southern Europe","region-wb":"Europe & Central Asia","iso-a3":"GRC","iso-a2":"GR","woe-id":"23424833",continent:"Europe"},geometry:{type:"MultiPolygon",coordinates:[[[[4864,8275],[4841,8261],[4797,8259],[4758,8271],[4779,8279],[4864,8275]]],[[[4670,8447],[4673,8449],[4670,8447],[4667,8449],[4668,8450],[4670,8452],[4672,8452],[4696,8460],[4727,8468],[4776,8476],[4799,8465],[4832,8480],[4842,8470],[4825,8449],[4801,8425],[4809,8453],[4753,8446],[4775,8430],[4718,8440],[4719,8426],[4813,8340],[4779,8358],[4794,8325],[4833,8347],[4824,8378],[4837,8403],[4838,8404],[4838,8402],[4833,8323],[4787,8316],[4777,8347],[4744,8358],[4729,8345],[4746,8308],[4712,8327],[4704,8317],[4685,8366],[4640,8414],[4652,8419],[4670,8447]]]]}},{type:"Feature",id:"DK",properties:{"hc-group":"admin0","hc-middle-x":.28,"hc-middle-y":.54,"hc-key":"dk","hc-a2":"DK",name:"Denmark",labelrank:"4","country-abbrev":"Den.",subregion:"Northern Europe","region-wb":"Europe & Central Asia","iso-a3":"DNK","iso-a2":"DK","woe-id":"23424796",continent:"Europe"},geometry:{type:"MultiPolygon",coordinates:[[[[4375,8912],[4343,8936],[4376,8952],[4390,8935],[4375,8912]]],[[[4273,8911],[4256,8966],[4324,9005],[4320,8967],[4335,8907],[4296,8909],[4278,8912],[4273,8911]]]]}},{type:"Feature",id:"GL",properties:{"hc-group":"admin0","hc-middle-x":.51,"hc-middle-y":.4,"hc-key":"gl","hc-a2":"GL",name:"Greenland",labelrank:"3","country-abbrev":"Grlnd.",subregion:"Northern America","region-wb":"Europe & Central Asia","iso-a3":"GRL","iso-a2":"GL","woe-id":"23424828",continent:"North America"},geometry:{type:"MultiPolygon",coordinates:[[[[3419,9498],[3438,9475],[3386,9490],[3375,9514],[3452,9501],[3419,9498]]],[[[2562,9418],[2604,9412],[2629,9390],[2585,9380],[2557,9392],[2562,9418]]],[[[3069,9838],[3142,9832],[3150,9844],[3292,9851],[3442,9840],[3325,9835],[3450,9836],[3464,9827],[3533,9818],[3505,9809],[3332,9802],[3261,9792],[3379,9800],[3451,9797],[3405,9779],[3527,9800],[3504,9766],[3579,9792],[3619,9781],[3654,9792],[3754,9780],[3683,9758],[3617,9754],[3646,9745],[3534,9728],[3560,9723],[3549,9690],[3512,9692],[3494,9663],[3545,9663],[3514,9647],[3566,9641],[3548,9626],[3510,9632],[3476,9610],[3521,9610],[3531,9582],[3579,9570],[3524,9545],[3475,9539],[3490,9518],[3443,9512],[3402,9523],[3344,9511],[3380,9484],[3431,9467],[3451,9423],[3400,9420],[3350,9450],[3350,9427],[3277,9408],[3348,9419],[3425,9409],[3312,9363],[3226,9346],[3154,9342],[3071,9287],[3e3,9260],[2960,9264],[2898,9236],[2890,9200],[2835,9163],[2810,9108],[2760,9072],[2713,9101],[2650,9106],[2614,9174],[2584,9192],[2596,9222],[2571,9213],[2581,9241],[2548,9279],[2593,9305],[2549,9310],[2609,9361],[2642,9358],[2662,9393],[2650,9404],[2576,9429],[2632,9428],[2658,9450],[2623,9443],[2565,9450],[2553,9460],[2580,9482],[2566,9496],[2594,9516],[2574,9522],[2585,9548],[2544,9571],[2548,9593],[2433,9614],[2415,9606],[2363,9610],[2350,9600],[2303,9604],[2249,9634],[2271,9650],[2237,9672],[2253,9684],[2376,9702],[2427,9703],[2463,9716],[2470,9733],[2420,9743],[2547,9772],[2577,9767],[2595,9789],[2669,9801],[2771,9810],[2795,9793],[2802,9808],[2837,9798],[2851,9814],[2897,9812],[2958,9799],[2989,9801],[2944,9809],[2938,9823],[3026,9807],[2978,9823],[3011,9836],[3069,9838]]]]}},{type:"Feature",id:"PR",properties:{"hc-group":"admin0","hc-middle-x":.5,"hc-middle-y":.59,"hc-key":"pr","hc-a2":"PR",name:"Puerto Rico",labelrank:"5","country-abbrev":"P.R.",subregion:"Caribbean","region-wb":"Latin America & Caribbean","iso-a3":"PRI","iso-a2":"PR","woe-id":"23424935",continent:"North America"},geometry:{type:"Polygon",coordinates:[[[1852,7722],[1897,7718],[1889,7706],[1848,7704],[1852,7722]]]}},{type:"Feature",id:"UM",properties:{"hc-group":"admin0","hc-middle-x":.5,"hc-middle-y":.47,"hc-key":"um","hc-a2":"UM",name:"United States Minor Outlying Islands",labelrank:"5","country-abbrev":"U.S. MOI",subregion:"Seven seas (open ocean)","region-wb":"East Asia & Pacific","iso-a3":"UMI","iso-a2":"UM","woe-id":"28289407",continent:"North America"},geometry:{type:"Polygon",coordinates:[[[1593,7719],[1593,7719],[1593,7718],[1593,7718],[1593,7719]]]}},{type:"Feature",id:"VI",properties:{"hc-group":"admin0","hc-middle-x":.47,"hc-middle-y":.16,"hc-key":"vi","hc-a2":"VI",name:"United States Virgin Islands",labelrank:"6","country-abbrev":"V.I. (U.S.)",subregion:"Caribbean","region-wb":"Latin America & Caribbean","iso-a3":"VIR","iso-a2":"VI","woe-id":"23424985",continent:"North America"},geometry:{type:"Polygon",coordinates:[[[1924,7698],[1930,7697],[1919,7695],[1920,7698],[1924,7698]]]}},{type:"Feature",id:"CA",properties:{"hc-group":"admin0","hc-middle-x":.29,"hc-middle-y":.58,"hc-key":"ca","hc-a2":"CA",name:"Canada",labelrank:"2","country-abbrev":"Can.",subregion:"Northern America","region-wb":"North America","iso-a3":"CAN","iso-a2":"CA","woe-id":"23424775",continent:"North America"},geometry:{type:"MultiPolygon",coordinates:[[[[2099,8750],[2162,8730],[2149,8721],[2111,8731],[2099,8750]]],[[[1718,9175],[1678,9149],[1661,9160],[1685,9174],[1718,9175]]],[[[1979,9350],[1982,9325],[1925,9315],[1929,9336],[1979,9350]]],[[[1318,9514],[1288,9498],[1277,9527],[1315,9528],[1318,9514]]],[[[1634,9595],[1653,9577],[1635,9557],[1586,9552],[1576,9575],[1634,9595]]],[[[1299,9676],[1260,9680],[1341,9692],[1349,9677],[1299,9676]]],[[[2172,8613],[2162,8603],[2149,8622],[2184,8654],[2172,8613]]],[[[119,8855],[123,8823],[101,8865],[109,8889],[149,8888],[119,8855]]],[[[1453,9388],[1417,9355],[1321,9374],[1386,9384],[1410,9402],[1453,9388]]],[[[2045,9498],[1945,9498],[1940,9528],[2029,9520],[2045,9498]]],[[[1230,9661],[1335,9670],[1302,9651],[1249,9645],[1230,9661]]],[[[1741,8588],[1723,8583],[1704,8571],[1687,8564],[1690,8563],[1597,8550],[1594,8532],[1594,8528],[1593,8526],[1593,8523],[1596,8520],[1519,8511],[1475,8491],[1463,8499],[1463,8500],[1464,8500],[1483,8501],[1478,8508],[1483,8511],[1489,8523],[1513,8535],[1537,8575],[1533,8596],[1572,8571],[1586,8581],[1564,8618],[1528,8605],[1481,8617],[1537,8624],[1466,8632],[1468,8638],[1456,8636],[1459,8683],[1435,8678],[1419,8711],[1361,8709],[1317,8686],[1261,8687],[1230,8704],[1159,8718],[330,8718],[327,8722],[321,8718],[320,8718],[284,8743],[275,8769],[245,8769],[257,8765],[275,8766],[280,8731],[304,8724],[306,8701],[266,8705],[230,8728],[188,8771],[206,8782],[233,8773],[209,8800],[220,8847],[204,8826],[174,8863],[176,8889],[219,8924],[229,8945],[197,8967],[180,9026],[150,9071],[75,9043],[50,9081],[4,9088],[93,9208],[156,9284],[255,9394],[310,9392],[307,9380],[370,9370],[436,9396],[455,9386],[575,9414],[514,9392],[642,9414],[661,9383],[698,9406],[690,9385],[742,9400],[944,9358],[900,9333],[954,9329],[1016,9334],[1059,9348],[1081,9321],[1112,9345],[1104,9360],[1177,9369],[1194,9341],[1266,9329],[1354,9333],[1356,9352],[1431,9350],[1399,9323],[1421,9318],[1438,9342],[1499,9358],[1496,9377],[1521,9385],[1456,9401],[1481,9448],[1547,9471],[1573,9450],[1561,9433],[1590,9369],[1582,9348],[1637,9380],[1654,9364],[1633,9349],[1636,9311],[1668,9320],[1732,9378],[1739,9398],[1814,9394],[1840,9376],[1798,9352],[1813,9322],[1744,9281],[1719,9306],[1724,9262],[1682,9293],[1609,9253],[1556,9273],[1567,9252],[1616,9250],[1573,9215],[1518,9215],[1481,9178],[1426,9171],[1403,9142],[1361,9126],[1314,9077],[1306,9037],[1343,9037],[1345,8995],[1332,8978],[1384,8989],[1441,8976],[1468,8949],[1545,8923],[1610,8917],[1597,8890],[1601,8855],[1632,8847],[1685,8850],[1693,8887],[1686,8944],[1711,8970],[1732,8962],[1713,8943],[1724,8916],[1764,8934],[1795,8962],[1796,9012],[1757,9033],[1732,9073],[1765,9042],[1816,9078],[1815,9103],[1784,9102],[1756,9136],[1774,9157],[1817,9144],[1826,9163],[1914,9149],[1943,9159],[1995,9132],[1986,9125],[2049,9104],[2024,9063],[2077,9022],[2147,9055],[2175,9094],[2186,9068],[2241,8984],[2222,8971],[2269,8919],[2334,8903],[2295,8884],[2250,8874],[2248,8861],[2314,8890],[2375,8865],[2370,8824],[2324,8798],[2262,8784],[2231,8762],[2186,8758],[2032,8760],[1997,8730],[1942,8711],[1908,8679],[1857,8645],[1803,8628],[1798,8623],[1883,8654],[1938,8694],[2031,8725],[2069,8726],[2082,8700],[2050,8686],[2061,8631],[2077,8646],[2100,8634],[2139,8635],[2118,8622],[2161,8599],[2053,8565],[2008,8537],[2004,8574],[2042,8592],[2057,8617],[2011,8595],[1972,8594],[1963,8597],[1967,8608],[1960,8610],[1957,8613],[1966,8656],[1926,8668],[1882,8617],[1839,8588],[1741,8588],[1780,8602],[1792,8617],[1778,8602],[1741,8588]]],[[[1850,9196],[1837,9179],[1825,9189],[1850,9196],[1850,9196],[1850,9196]]],[[[1850,9196],[1861,9209],[1861,9209],[1862,9199],[1850,9196],[1850,9196],[1850,9196]]],[[[1861,9209],[1858,9240],[1885,9257],[1944,9250],[1994,9257],[1977,9279],[2047,9310],[2048,9348],[2003,9333],[1994,9373],[1958,9362],[1955,9411],[1923,9416],[1925,9382],[1902,9370],[1918,9402],[1882,9393],[1848,9404],[1810,9399],[1668,9420],[1656,9449],[1674,9482],[1721,9513],[1796,9531],[1833,9525],[1771,9498],[1760,9471],[1831,9516],[1922,9527],[1939,9485],[1961,9478],[2004,9495],[2062,9487],[2077,9456],[2103,9456],[2140,9454],[2157,9435],[2209,9424],[2229,9377],[2178,9360],[2231,9348],[2233,9334],[2268,9340],[2291,9304],[2321,9313],[2345,9297],[2305,9282],[2310,9264],[2236,9245],[2224,9274],[2177,9292],[2169,9245],[2212,9230],[2202,9219],[2232,9195],[2202,9194],[2211,9160],[2147,9174],[2158,9140],[2090,9152],[2012,9182],[2030,9195],[1997,9199],[1978,9231],[1946,9221],[1918,9229],[1861,9210],[1861,9209],[1861,9209]]],[[[2424,8689],[2415,8646],[2378,8651],[2393,8667],[2324,8652],[2335,8673],[2226,8682],[2252,8705],[2331,8795],[2372,8803],[2362,8781],[2340,8756],[2361,8727],[2399,8743],[2414,8727],[2397,8705],[2425,8706],[2393,8677],[2424,8689]]],[[[1033,9604],[944,9599],[962,9615],[1085,9646],[1152,9652],[1134,9624],[1074,9604],[1039,9588],[1009,9588],[1070,9606],[1091,9627],[1033,9604]]],[[[1626,9181],[1626,9199],[1589,9195],[1621,9212],[1656,9267],[1678,9267],[1784,9203],[1757,9191],[1695,9212],[1688,9202],[1626,9181]]],[[[1314,9388],[1297,9402],[1268,9385],[1299,9378],[1239,9365],[1168,9379],[1087,9364],[972,9356],[973,9379],[914,9382],[892,9398],[909,9409],[979,9416],[1029,9412],[1046,9422],[1004,9429],[933,9422],[896,9439],[978,9456],[912,9450],[902,9467],[976,9501],[1062,9516],[1070,9494],[1092,9504],[1131,9494],[1168,9503],[1193,9489],[1182,9464],[1212,9467],[1213,9495],[1237,9521],[1284,9497],[1269,9430],[1319,9409],[1362,9420],[1314,9388]]],[[[1388,9478],[1352,9492],[1378,9506],[1416,9497],[1400,9518],[1427,9531],[1499,9532],[1522,9524],[1467,9503],[1506,9501],[1490,9465],[1420,9447],[1388,9478]]],[[[1555,9524],[1593,9539],[1632,9542],[1704,9533],[1636,9498],[1575,9496],[1586,9486],[1530,9470],[1555,9524]]],[[[921,9491],[883,9479],[850,9454],[773,9441],[766,9461],[725,9469],[837,9528],[831,9547],[889,9551],[1025,9539],[1046,9519],[921,9491]]],[[[1532,9570],[1473,9569],[1475,9583],[1429,9585],[1402,9604],[1423,9638],[1463,9609],[1507,9625],[1582,9617],[1560,9584],[1532,9570]]],[[[1297,9603],[1365,9601],[1375,9569],[1353,9584],[1331,9571],[1263,9571],[1132,9549],[1104,9558],[1212,9577],[1082,9568],[1041,9577],[1162,9627],[1165,9608],[1192,9610],[1212,9586],[1267,9585],[1258,9611],[1317,9630],[1297,9603]]],[[[1782,9551],[1678,9561],[1704,9597],[1692,9614],[1632,9609],[1617,9634],[1743,9624],[1781,9607],[1757,9604],[1794,9586],[1845,9585],[1914,9596],[1978,9594],[2008,9584],[1979,9570],[2003,9565],[1932,9551],[1891,9555],[1782,9551]]],[[[1641,9694],[1644,9725],[1657,9693],[1703,9682],[1687,9660],[1713,9649],[1652,9650],[1650,9671],[1624,9682],[1641,9694]]],[[[1590,9663],[1508,9674],[1469,9676],[1506,9696],[1468,9701],[1525,9711],[1600,9686],[1590,9663]]],[[[1973,9708],[1930,9702],[1843,9673],[1760,9678],[1739,9699],[1793,9712],[1727,9709],[1716,9735],[1751,9754],[1870,9770],[1903,9739],[1942,9746],[1929,9718],[1973,9708]]],[[[2082,9623],[1998,9607],[2002,9615],[1904,9616],[1888,9611],[1770,9618],[1775,9654],[1797,9655],[1794,9629],[1854,9646],[1854,9660],[1928,9660],[1928,9671],[1879,9671],[1920,9693],[1981,9698],[1982,9720],[1951,9724],[1967,9742],[2030,9740],[2062,9719],[2077,9731],[2046,9743],[2177,9752],[2168,9765],[2102,9753],[2006,9749],[1918,9761],[1884,9786],[1913,9792],[2059,9807],[2114,9807],[2201,9828],[2342,9826],[2377,9834],[2551,9827],[2609,9804],[2489,9781],[2518,9780],[2411,9757],[2309,9724],[2165,9701],[2210,9692],[2159,9685],[2188,9679],[2063,9644],[2082,9623]]]]}},{type:"Feature",id:"CV",properties:{"hc-group":"admin0","hc-middle-x":.57,"hc-middle-y":.5,"hc-key":"cv","hc-a2":"CV",name:"Cape Verde",labelrank:"4","country-abbrev":"C.Vd.",subregion:"Western Africa","region-wb":"Sub-Saharan Africa","iso-a3":"CPV","iso-a2":"CV","woe-id":"23424794",continent:"Africa"},geometry:{type:"Polygon",coordinates:[[[3249,7618],[3256,7611],[3257,7604],[3248,7608],[3249,7618]]]}},{type:"Feature",id:"DM",properties:{"hc-group":"admin0","hc-middle-x":.54,"hc-middle-y":.47,"hc-key":"dm","hc-a2":"DM",name:"Dominica",labelrank:"6","country-abbrev":"D'inca",subregion:"Caribbean","region-wb":"Latin America & Caribbean","iso-a3":"DMA","iso-a2":"DM","woe-id":"23424798",continent:"North America"},geometry:{type:"Polygon",coordinates:[[[2028,7627],[2032,7620],[2028,7614],[2025,7623],[2028,7627]]]}},{type:"Feature",id:"SC",properties:{"hc-group":"admin0","hc-middle-x":.58,"hc-middle-y":.81,"hc-key":"sc","hc-a2":"SC",name:"Seychelles",labelrank:"6","country-abbrev":"Syc.",subregion:"Eastern Africa","region-wb":"Sub-Saharan Africa","iso-a3":"SYC","iso-a2":"SC","woe-id":"23424941",continent:"Seven seas (open ocean)"},geometry:{type:"Polygon",coordinates:[[[5534,6811],[5534,6809],[5527,6808],[5534,6810],[5534,6811]]]}},{type:"Feature",id:"JM",properties:{"hc-group":"admin0","hc-middle-x":.5,"hc-middle-y":.49,"hc-key":"jm","hc-a2":"JM",name:"Jamaica",labelrank:"4","country-abbrev":"Jam.",subregion:"Caribbean","region-wb":"Latin America & Caribbean","iso-a3":"JAM","iso-a2":"JM","woe-id":"23424858",continent:"North America"},geometry:{type:"Polygon",coordinates:[[[1515,7721],[1554,7702],[1504,7700],[1490,7720],[1515,7721]]]}},{type:"Feature",id:"OM",properties:{"hc-group":"admin0","hc-middle-x":.8,"hc-middle-y":.46,"hc-key":"om","hc-a2":"OM",name:"Oman",labelrank:"4","country-abbrev":"Oman",subregion:"Western Asia","region-wb":"Middle East & North Africa","iso-a3":"OMN","iso-a2":"OM","woe-id":"23424898",continent:"Asia"},geometry:{type:"MultiPolygon",coordinates:[[[[5823,7942],[5820,7942],[5822,7945],[5825,7944],[5823,7942]]],[[[5814,7969],[5822,7979],[5822,7955],[5817,7956],[5814,7969]]],[[[5700,7738],[5795,7770],[5811,7835],[5795,7859],[5808,7930],[5827,7933],[5854,7900],[5907,7886],[5945,7844],[5883,7762],[5889,7739],[5852,7725],[5844,7703],[5814,7700],[5802,7673],[5740,7661],[5727,7682],[5700,7738]]]]}},{type:"Feature",id:"VC",properties:{"hc-group":"admin0","hc-middle-x":.54,"hc-middle-y":.46,"hc-key":"vc","hc-a2":"VC",name:"Saint Vincent and the Grenadines",labelrank:"6","country-abbrev":"St.V.G.",subregion:"Caribbean","region-wb":"Latin America & Caribbean","iso-a3":"VCT","iso-a2":"VC","woe-id":"23424981",continent:"North America"},geometry:{type:"Polygon",coordinates:[[[2030,7543],[2027,7549],[2032,7554],[2032,7548],[2030,7543]]]}},{type:"Feature",id:"BD",properties:{"hc-group":"admin0","hc-middle-x":.42,"hc-middle-y":.75,"hc-key":"bd","hc-a2":"BD",name:"Bangladesh",labelrank:"3","country-abbrev":"Bang.",subregion:"Southern Asia","region-wb":"South Asia","iso-a3":"BGD","iso-a2":"BD","woe-id":"23424759",continent:"Asia"},geometry:{type:"Polygon",coordinates:[[[6994,7805],[6964,7859],[6924,7829],[6887,7834],[6887,7834],[6888,7836],[6887,7840],[6864,7890],[6867,7911],[6842,7922],[6869,7940],[6838,7964],[6848,7982],[6894,7965],[6915,7939],[6968,7940],[6984,7932],[6947,7889],[6964,7867],[6979,7893],[7e3,7835],[7005,7813],[6994,7805]]]}},{type:"Feature",id:"SB",properties:{"hc-group":"admin0","hc-middle-x":.83,"hc-middle-y":.88,"hc-key":"sb","hc-a2":"SB",name:"Solomon Islands",labelrank:"3","country-abbrev":"S. Is.",subregion:"Melanesia","region-wb":"East Asia & Pacific","iso-a3":"SLB","iso-a2":"SB","woe-id":"23424766",continent:"Oceania"},geometry:{type:"MultiPolygon",coordinates:[[[[9208,6819],[9263,6822],[9262,6794],[9230,6797],[9208,6819]]],[[[9107,6885],[9129,6901],[9148,6877],[9146,6845],[9107,6885]]]]}},{type:"Feature",id:"LC",properties:{"hc-group":"admin0","hc-middle-x":.51,"hc-middle-y":.47,"hc-key":"lc","hc-a2":"LC",name:"Saint Lucia",labelrank:"6","country-abbrev":"S.L.",subregion:"Caribbean","region-wb":"Latin America & Caribbean","iso-a3":"LCA","iso-a2":"LC","woe-id":"23424951",continent:"North America"},geometry:{type:"Polygon",coordinates:[[[2039,7565],[2035,7571],[2040,7578],[2041,7573],[2039,7565]]]}},{type:"Feature",id:"NO",properties:{"hc-group":"admin0","hc-middle-x":.16,"hc-middle-y":.88,"hc-key":"no","hc-a2":"NO",name:"Norway",labelrank:"3","country-abbrev":"Nor.",subregion:"Northern Europe","region-wb":"Europe & Central Asia","iso-a3":"NOR","iso-a2":"NO","woe-id":"-90",continent:"Europe"},geometry:{type:"MultiPolygon",coordinates:[[[[4534,9673],[4511,9683],[4557,9686],[4567,9673],[4619,9661],[4594,9643],[4536,9649],[4534,9673]]],[[[4842,9399],[4821,9385],[4797,9373],[4798,9394],[4763,9407],[4714,9395],[4690,9358],[4623,9363],[4599,9381],[4573,9374],[4558,9351],[4509,9357],[4458,9321],[4467,9308],[4419,9279],[4420,9252],[4398,9228],[4408,9209],[4373,9208],[4355,9186],[4376,9082],[4348,9045],[4323,9060],[4265,9021],[4208,9017],[4169,9050],[4156,9098],[4173,9130],[4155,9139],[4246,9180],[4364,9256],[4357,9275],[4419,9314],[4410,9322],[4455,9353],[4373,9343],[4418,9354],[4435,9369],[4465,9371],[4463,9358],[4486,9375],[4496,9392],[4526,9391],[4566,9413],[4616,9415],[4612,9428],[4660,9437],[4773,9437],[4845,9415],[4781,9409],[4842,9399]]],[[[4352,9669],[4405,9678],[4317,9674],[4275,9697],[4277,9718],[4367,9726],[4418,9697],[4395,9728],[4408,9734],[4504,9701],[4541,9695],[4482,9682],[4439,9620],[4363,9652],[4352,9669]]],[[[4600,9706],[4570,9713],[4494,9711],[4454,9744],[4480,9735],[4503,9754],[4515,9739],[4553,9732],[4597,9742],[4657,9738],[4665,9693],[4643,9716],[4600,9706]]]]}},{type:"Feature",id:"KN",properties:{"hc-group":"admin0","hc-middle-x":.57,"hc-middle-y":.49,"hc-key":"kn","hc-a2":"KN",name:"Saint Kitts and Nevis",labelrank:"6","country-abbrev":"St.K.N.",subregion:"Caribbean","region-wb":"Latin America & Caribbean","iso-a3":"KNA","iso-a2":"KN","woe-id":"23424940",continent:"North America"},geometry:{type:"Polygon",coordinates:[[[1992,7679],[1984,7684],[1985,7686],[1989,7683],[1992,7679]]]}},{type:"Feature",id:"BH",properties:{"hc-group":"admin0","hc-middle-x":.5,"hc-middle-y":.5,"hc-key":"bh","hc-a2":"BH",name:"Bahrain",labelrank:"4","country-abbrev":"Bahr.",subregion:"Western Asia","region-wb":"Middle East & North Africa","iso-a3":"BHR","iso-a2":"BH","woe-id":"23424753",continent:"Asia"},geometry:{type:"Polygon",coordinates:[[[5634,7975],[5639,7973],[5638,7960],[5634,7966],[5634,7975]]]}},{type:"Feature",id:"ID",properties:{"hc-group":"admin0","hc-middle-x":.39,"hc-middle-y":.4,"hc-key":"id","hc-a2":"ID",name:"Indonesia",labelrank:"2","country-abbrev":"Indo.",subregion:"South-Eastern Asia","region-wb":"East Asia & Pacific","iso-a3":"IDN","iso-a2":"ID","woe-id":"23424846",continent:"Asia"},geometry:{type:"MultiPolygon",coordinates:[[[[7933,6811],[7957,6790],[7945,6780],[7908,6811],[7933,6811]]],[[[8548,6850],[8510,6842],[8523,6867],[8550,6876],[8548,6850]]],[[[8022,6939],[8018,6962],[8035,6970],[8058,6945],[8022,6939]]],[[[7533,7025],[7501,7016],[7477,7046],[7486,7065],[7504,7022],[7533,7025]]],[[[8367,6934],[8421,6931],[8400,6891],[8401,6920],[8367,6934]]],[[[7855,6843],[7901,6845],[7883,6827],[7835,6819],[7798,6828],[7817,6849],[7855,6843]]],[[[8078,6817],[8083,6817],[8094,6824],[8094,6816],[8097,6807],[8075,6785],[8041,6779],[8064,6811],[8071,6806],[8078,6817]]],[[[7872,7253],[7862,7250],[7866,7253],[7872,7253]]],[[[8628,7032],[8623,6910],[8617,6819],[8589,6853],[8552,6846],[8559,6870],[8521,6945],[8462,6969],[8437,6971],[8387,7003],[8363,6983],[8360,7009],[8339,7029],[8400,7039],[8357,7041],[8298,7073],[8310,7090],[8358,7105],[8400,7093],[8404,7047],[8431,7008],[8448,7007],[8478,7044],[8526,7069],[8591,7039],[8628,7032]]],[[[8177,6858],[8190,6854],[8190,6854],[8190,6854],[8189,6852],[8177,6858],[8177,6858]]],[[[7486,7010],[7476,6932],[7439,6923],[7341,7011],[7316,7046],[7299,7090],[7267,7125],[7237,7116],[7264,7059],[7252,7062],[7233,7116],[7258,7137],[7241,7180],[7201,7183],[7221,7149],[7214,7135],[7195,7185],[7210,7210],[7137,7275],[7137,7302],[7169,7287],[7204,7288],[7230,7253],[7280,7221],[7320,7178],[7362,7156],[7423,7149],[7399,7134],[7413,7116],[7399,7093],[7432,7083],[7442,7039],[7472,7038],[7486,7010]]],[[[8190,6854],[8215,6884],[8249,6861],[8291,6851],[8296,6874],[8315,6868],[8286,6844],[8254,6853],[8218,6881],[8199,6851],[8190,6854],[8190,6854],[8190,6854]]],[[[7695,6841],[7632,6849],[7589,6865],[7555,6861],[7496,6874],[7464,6894],[7483,6924],[7557,6912],[7565,6896],[7626,6890],[7635,6906],[7690,6892],[7697,6926],[7699,6883],[7718,6862],[7794,6841],[7778,6828],[7714,6846],[7695,6841]]],[[[8313,6984],[8232,7012],[8200,6994],[8178,6999],[8161,6991],[8138,7013],[8187,7008],[8202,7021],[8254,7026],[8288,7014],[8313,6984]]],[[[8068,7050],[8032,7080],[7993,7054],[8022,7014],[8035,6973],[7989,6964],[7994,6983],[7955,7010],[7952,6942],[7918,6940],[7928,6976],[7903,7031],[7921,7053],[7944,7141],[7972,7161],[7996,7151],[8071,7144],[8110,7175],[8115,7163],[8084,7130],[7955,7132],[7943,7109],[7965,7071],[7998,7101],[8055,7095],[8047,7079],[8066,7055],[8094,7063],[8150,7057],[8134,7049],[8068,7050]]],[[[8194,7109],[8184,7137],[8190,7174],[8209,7191],[8205,7159],[8228,7168],[8215,7139],[8249,7114],[8203,7133],[8205,7094],[8177,7091],[8194,7109]]],[[[7861,7253],[7846,7236],[7880,7191],[7872,7179],[7910,7151],[7869,7141],[7859,7100],[7830,7069],[7810,7e3],[7765,6980],[7753,7007],[7714,7013],[7674,7001],[7671,7026],[7624,7019],[7614,7080],[7587,7100],[7578,7143],[7604,7185],[7634,7145],[7713,7168],[7734,7157],[7763,7164],[7793,7216],[7805,7260],[7861,7253]]],[[[8177,6858],[8159,6863],[8101,6843],[7963,6825],[7923,6834],[7941,6846],[8008,6834],[8031,6848],[8101,6850],[8152,6870],[8177,6858],[8177,6858]]]]}},{type:"Feature",id:"MU",properties:{"hc-group":"admin0","hc-middle-x":.61,"hc-middle-y":.6,"hc-key":"mu","hc-a2":"MU",name:"Mauritius",labelrank:"5","country-abbrev":"Mus.",subregion:"Eastern Africa","region-wb":"Sub-Saharan Africa","iso-a3":"MUS","iso-a2":"MU","woe-id":"23424894",continent:"Seven seas (open ocean)"},geometry:{type:"Polygon",coordinates:[[[5883,6460],[5881,6447],[5871,6446],[5877,6462],[5883,6460]]]}},{type:"Feature",id:"RU",properties:{"hc-group":"admin0","hc-middle-x":.85,"hc-middle-y":.5,"hc-key":"ru","hc-a2":"RU",name:"Russia",labelrank:"2","country-abbrev":"Rus.",subregion:"Eastern Europe","region-wb":"Europe & Central Asia","iso-a3":"RUS","iso-a2":"RU","woe-id":"23424936",continent:"Europe"},geometry:{type:"MultiPolygon",coordinates:[[[[5365,9371],[5327,9364],[5313,9380],[5337,9389],[5365,9371]]],[[[-674,9457],[-654,9446],[-731,9438],[-708,9455],[-674,9457]]],[[[5376,9737],[5346,9736],[5367,9748],[5426,9743],[5376,9737]]],[[[5365,9787],[5362,9767],[5307,9738],[5290,9759],[5336,9769],[5365,9787]]],[[[7637,9536],[7715,9521],[7723,9509],[7642,9519],[7637,9536]]],[[[6551,9695],[6576,9678],[6451,9668],[6469,9712],[6551,9695]]],[[[8034,8507],[8036,8557],[8016,8582],[8043,8595],[8063,8572],[8071,8590],[8086,8629],[8090,8678],[8069,8698],[8023,8676],[7979,8675],[7963,8696],[7902,8733],[7861,8737],[7803,8786],[7774,8822],[7736,8849],[7653,8868],[7587,8858],[7571,8842],[7604,8821],[7582,8763],[7552,8735],[7515,8746],[7437,8760],[7410,8738],[7346,8723],[7278,8729],[7252,8749],[7167,8767],[7122,8756],[7074,8772],[7063,8794],[6954,8821],[6936,8784],[6956,8768],[6937,8743],[6852,8752],[6835,8770],[6775,8780],[6658,8724],[6649,8723],[6644,8721],[6616,8738],[6577,8738],[6507,8784],[6451,8775],[6422,8794],[6406,8778],[6318,8858],[6272,8881],[6271,8896],[6208,8869],[6182,8880],[6112,8885],[6091,8924],[6017,8921],[6016,8913],[5935,8893],[5815,8878],[5853,8854],[5816,8839],[5806,8813],[5849,8798],[5851,8777],[5805,8769],[5767,8785],[5704,8786],[5682,8769],[5607,8801],[5524,8805],[5473,8770],[5471,8745],[5441,8766],[5425,8746],[5420,8699],[5471,8678],[5514,8631],[5469,8611],[5446,8577],[5478,8548],[5477,8523],[5517,8485],[5494,8463],[5450,8486],[5398,8514],[5371,8508],[5334,8528],[5246,8535],[5212,8560],[5135,8594],[5163,8600],[5168,8636],[5209,8654],[5177,8657],[5192,8681],[5220,8681],[5221,8735],[5138,8765],[5087,8763],[5065,8791],[5038,8792],[5022,8828],[4962,8820],[4943,8850],[4985,8864],[4955,8875],[4922,8934],[4839,8952],[4821,8975],[4811,8997],[4814,9007],[4817,9013],[4819,9028],[4815,9045],[4818,9051],[4820,9055],[4823,9056],[4824,9056],[4822,9057],[4822,9057],[4824,9056],[4827,9057],[4824,9060],[4821,9061],[4870,9084],[4811,9096],[4898,9160],[4905,9173],[4856,9201],[4870,9210],[4838,9242],[4840,9278],[4814,9302],[4834,9330],[4794,9347],[4797,9373],[4821,9385],[4842,9399],[4984,9378],[5133,9329],[5144,9301],[5078,9276],[4904,9303],[4968,9278],[4987,9237],[5042,9247],[5117,9227],[5139,9236],[5116,9262],[5184,9299],[5234,9270],[5235,9297],[5213,9313],[5214,9348],[5186,9360],[5258,9354],[5285,9335],[5242,9318],[5270,9304],[5321,9307],[5318,9325],[5391,9354],[5478,9373],[5466,9361],[5497,9346],[5527,9361],[5564,9358],[5600,9373],[5630,9351],[5653,9377],[5578,9408],[5584,9421],[5629,9404],[5733,9391],[5820,9369],[5862,9351],[5878,9371],[5804,9392],[5801,9430],[5781,9448],[5813,9465],[5825,9516],[5872,9511],[5839,9500],[5912,9494],[5907,9455],[5934,9442],[5969,9371],[6004,9357],[5976,9296],[5933,9288],[5996,9282],[6046,9330],[6023,9363],[6070,9372],[6103,9357],[6108,9333],[6129,9348],[6105,9370],[6042,9381],[6004,9375],[5981,9397],[5989,9422],[5940,9452],[5978,9474],[5957,9500],[5964,9520],[5998,9519],[5981,9495],[6002,9449],[6072,9442],[6009,9468],[6059,9474],[6069,9507],[6089,9483],[6163,9461],[6203,9462],[6186,9447],[6222,9416],[6241,9421],[6214,9459],[6120,9488],[6094,9522],[6130,9539],[6190,9527],[6256,9532],[6216,9556],[6289,9588],[6407,9605],[6429,9600],[6541,9618],[6528,9637],[6559,9656],[6672,9646],[6706,9626],[6766,9626],[6847,9616],[6894,9578],[6770,9510],[6806,9509],[6873,9526],[6877,9554],[6945,9520],[6989,9527],[7071,9523],[7135,9503],[7212,9501],[7195,9522],[7215,9530],[7257,9518],[7321,9519],[7372,9504],[7390,9473],[7350,9485],[7456,9437],[7491,9430],[7490,9467],[7533,9452],[7588,9459],[7700,9453],[7652,9487],[7695,9496],[7890,9481],[7947,9468],[7927,9461],[8006,9449],[8041,9434],[8132,9441],[8229,9432],[8275,9402],[8344,9390],[8395,9398],[8482,9389],[8498,9406],[8531,9380],[8581,9365],[8607,9374],[8557,9409],[8737,9395],[8747,9455],[8751,9393],[8852,9372],[8995,9244],[8973,9231],[8902,9237],[8968,9216],[9062,9167],[9054,9156],[8987,9160],[8924,9129],[8874,9093],[8804,9098],[8764,9073],[8754,9094],[8729,9081],[8734,9040],[8713,9012],[8738,9003],[8746,8972],[8776,8953],[8742,8952],[8771,8910],[8725,8888],[8733,8858],[8711,8846],[8712,8802],[8664,8739],[8674,8774],[8694,8784],[8569,8924],[8550,8973],[8567,9007],[8597,9026],[8629,9092],[8663,9122],[8641,9166],[8608,9161],[8621,9137],[8574,9097],[8542,9142],[8465,9137],[8431,9090],[8428,9062],[8366,9041],[8339,9060],[8294,9070],[8283,9053],[8139,9059],[8105,9053],[8076,9008],[8041,8980],[8027,8951],[7982,8911],[8036,8901],[8085,8869],[8096,8892],[8128,8892],[8197,8854],[8215,8769],[8242,8701],[8225,8679],[8214,8628],[8173,8568],[8168,8547],[8113,8512],[8063,8534],[8042,8499],[8039,8503],[8034,8507]]],[[[4600,8896],[4618,8905],[4596,8897],[4595,8897],[4605,8914],[4632,8924],[4634,8924],[4621,8914],[4642,8923],[4688,8911],[4688,8894],[4686,8893],[4600,8896]]],[[[6299,9735],[6382,9734],[6413,9722],[6437,9698],[6389,9693],[6317,9701],[6252,9717],[6274,9731],[6259,9729],[6238,9721],[6190,9734],[6256,9730],[6189,9744],[6164,9769],[6199,9761],[6257,9774],[6329,9755],[6328,9740],[6299,9735]]],[[[8492,8569],[8617,8648],[8574,8608],[8539,8595],[8511,8569],[8492,8569]]],[[[5420,9749],[5453,9785],[5465,9766],[5558,9762],[5466,9745],[5420,9749]]],[[[5399,9528],[5455,9553],[5434,9557],[5461,9582],[5506,9601],[5623,9612],[5682,9632],[5739,9620],[5703,9605],[5586,9583],[5530,9551],[5503,9555],[5503,9523],[5479,9511],[5464,9481],[5497,9446],[5536,9423],[5481,9423],[5428,9434],[5373,9456],[5385,9499],[5420,9512],[5399,9528]]],[[[8289,8714],[8258,8789],[8231,8809],[8203,8862],[8227,8873],[8252,8854],[8272,8813],[8346,8736],[8319,8731],[8320,8686],[8370,8638],[8321,8640],[8311,8684],[8289,8714]]],[[[-956,9244],[-813,9372],[-762,9330],[-735,9321],[-762,9284],[-726,9306],[-663,9306],[-641,9275],[-676,9262],[-724,9259],[-753,9236],[-798,9218],[-844,9242],[-854,9262],[-900,9259],[-893,9276],[-956,9244]]],[[[7669,9567],[7620,9569],[7568,9559],[7524,9564],[7516,9532],[7488,9541],[7494,9580],[7456,9583],[7498,9609],[7566,9593],[7559,9607],[7689,9586],[7669,9567]]],[[[5171,9735],[5126,9742],[5154,9754],[5084,9753],[5200,9763],[5239,9754],[5171,9735]]],[[[7718,9587],[7714,9588],[7718,9623],[7718,9587],[7718,9587],[7718,9587]]],[[[7718,9587],[7741,9580],[7838,9573],[7817,9561],[7718,9577],[7718,9587],[7718,9587],[7718,9587]]]]}},{type:"Feature",id:"TT",properties:{"hc-group":"admin0","hc-middle-x":.45,"hc-middle-y":.42,"hc-key":"tt","hc-a2":"TT",name:"Trinidad and Tobago",labelrank:"5","country-abbrev":"Tr.T.",subregion:"Caribbean","region-wb":"Latin America & Caribbean","iso-a3":"TTO","iso-a2":"TT","woe-id":"23424958",continent:"North America"},geometry:{type:"Polygon",coordinates:[[[2036,7471],[2032,7448],[2017,7453],[2011,7467],[2036,7471]]]}},{type:"Feature",id:"BR",properties:{"hc-group":"admin0","hc-middle-x":.56,"hc-middle-y":.38,"hc-key":"br","hc-a2":"BR",name:"Brazil",labelrank:"2","country-abbrev":"Brazil",subregion:"South America","region-wb":"Latin America & Caribbean","iso-a3":"BRA","iso-a2":"BR","woe-id":"23424768",continent:"South America"},geometry:{type:"MultiPolygon",coordinates:[[[[2354,7093],[2374,7113],[2438,7107],[2423,7069],[2365,7059],[2354,7093]]],[[[2332,6020],[2343,6044],[2341,6049],[2257,6108],[2245,6101],[2215,6133],[2191,6130],[2242,6194],[2300,6229],[2294,6279],[2271,6281],[2272,6282],[2271,6285],[2280,6310],[2278,6330],[2240,6334],[2230,6377],[2204,6395],[2153,6395],[2155,6432],[2142,6457],[2158,6522],[2129,6552],[2124,6583],[2069,6585],[2054,6666],[2010,6674],[1968,6703],[1924,6709],[1890,6752],[1886,6800],[1848,6793],[1795,6758],[1753,6759],[1719,6757],[1720,6808],[1699,6792],[1667,6790],[1604,6870],[1632,6908],[1638,6949],[1707,6981],[1734,6978],[1750,7070],[1729,7111],[1736,7173],[1791,7173],[1818,7185],[1833,7157],[1876,7138],[1923,7168],[1948,7196],[1926,7198],[1921,7234],[1907,7247],[2008,7256],[2036,7287],[2060,7283],[2074,7246],[2058,7205],[2066,7177],[2097,7156],[2153,7183],[2173,7180],[2190,7199],[2234,7193],[2288,7188],[2331,7249],[2350,7244],[2364,7186],[2388,7171],[2391,7117],[2348,7112],[2338,7099],[2364,7058],[2410,7053],[2451,7096],[2510,7087],[2538,7060],[2564,7055],[2566,7019],[2592,7043],[2659,7022],[2713,7024],[2762,6996],[2805,6956],[2857,6949],[2884,6882],[2868,6816],[2818,6765],[2773,6694],[2760,6705],[2751,6637],[2759,6598],[2753,6539],[2738,6522],[2737,6483],[2696,6413],[2701,6399],[2667,6366],[2594,6367],[2514,6323],[2464,6265],[2475,6215],[2467,6185],[2436,6154],[2423,6121],[2393,6130],[2390,6101],[2367,6079],[2360,6035],[2338,6014],[2333,6017],[2332,6020]]]]}},{type:"Feature",id:"BS",properties:{"hc-group":"admin0","hc-middle-x":.16,"hc-middle-y":.28,"hc-key":"bs","hc-a2":"BS",name:"The Bahamas",labelrank:"4","country-abbrev":"Bhs.",subregion:"Caribbean","region-wb":"Latin America & Caribbean","iso-a3":"BHS","iso-a2":"BS","woe-id":"23424758",continent:"North America"},geometry:{type:"MultiPolygon",coordinates:[[[[1569,7947],[1527,7924],[1524,7894],[1509,7923],[1542,7937],[1549,7964],[1569,7947]]],[[[1610,7872],[1677,7845],[1613,7864],[1610,7872],[1610,7872],[1610,7872]]],[[[1606,7882],[1610,7872],[1610,7872],[1610,7872],[1607,7873],[1606,7882],[1606,7882]]],[[[1606,7882],[1597,7905],[1603,7905],[1603,7905],[1603,7905],[1606,7882],[1606,7882]]],[[[1603,7905],[1603,7906],[1628,7905],[1603,7905],[1603,7905],[1603,7905]]]]}},{type:"Feature",id:"PW",properties:{"hc-group":"admin0","hc-middle-x":.48,"hc-middle-y":.51,"hc-key":"pw","hc-a2":"PW",name:"Palau",labelrank:"6","country-abbrev":"Palau",subregion:"Micronesia","region-wb":"East Asia & Pacific","iso-a3":"PLW","iso-a2":"PW","woe-id":"23424927",continent:"Oceania"},geometry:{type:"Polygon",coordinates:[[[8306,7216],[8306,7216],[8306,7217],[8308,7216],[8306,7216]]]}},{type:"Feature",id:"CL",properties:{"hc-group":"admin0","hc-middle-x":.53,"hc-middle-y":.92,"hc-key":"cl","hc-a2":"CL",name:"Chile",labelrank:"2","country-abbrev":"Chile",subregion:"South America","region-wb":"Latin America & Caribbean","iso-a3":"CHL","iso-a2":"CL","woe-id":"23424782",continent:"South America"},geometry:{type:"MultiPolygon",coordinates:[[[[1754,5731],[1758,5698],[1729,5689],[1740,5710],[1738,5746],[1754,5731]]],[[[1748,5552],[1760,5554],[1789,5484],[1767,5457],[1770,5506],[1740,5545],[1748,5552]]],[[[1988,5396],[2007,5326],[2005,5326],[2007,5325],[2008,5322],[1955,5318],[1909,5340],[1934,5348],[1938,5384],[1963,5402],[1988,5396]]],[[[1742,6517],[1756,6520],[1769,6544],[1789,6497],[1808,6481],[1801,6449],[1821,6421],[1836,6371],[1859,6371],[1858,6332],[1821,6307],[1838,6237],[1822,6230],[1801,6188],[1785,6085],[1810,6042],[1823,5998],[1810,5967],[1815,5938],[1797,5924],[1799,5884],[1815,5852],[1800,5845],[1794,5785],[1810,5741],[1804,5711],[1826,5681],[1820,5654],[1847,5636],[1844,5572],[1830,5550],[1836,5522],[1814,5505],[1836,5458],[1861,5461],[1865,5431],[1884,5417],[1943,5416],[1991,5405],[1969,5410],[1928,5393],[1928,5358],[1884,5368],[1878,5347],[1836,5382],[1857,5381],[1812,5414],[1822,5443],[1798,5444],[1797,5499],[1786,5502],[1762,5557],[1775,5581],[1724,5591],[1743,5609],[1756,5650],[1737,5656],[1767,5675],[1773,5625],[1788,5636],[1776,5657],[1787,5741],[1769,5761],[1746,5752],[1735,5777],[1747,5826],[1722,5883],[1741,5954],[1752,5969],[1763,6058],[1745,6116],[1755,6139],[1743,6171],[1757,6214],[1763,6287],[1751,6361],[1762,6416],[1742,6517]]],[[[2051,5320],[2074,5310],[2012,5314],[2060,5293],[2043,5289],[2007,5312],[1972,5317],[2044,5321],[2048,5321],[2051,5320]]]]}},{type:"Feature",id:"GD",properties:{"hc-group":"admin0","hc-middle-x":.5,"hc-middle-y":.5,"hc-key":"gd","hc-a2":"GD",name:"Grenada",labelrank:"6","country-abbrev":"Gren.",subregion:"Caribbean","region-wb":"Latin America & Caribbean","iso-a3":"GRD","iso-a2":"GD","woe-id":"23424826",continent:"North America"},geometry:{type:"Polygon",coordinates:[[[2014,7510],[2010,7510],[2011,7514],[2015,7516],[2014,7510]]]}},{type:"Feature",id:"AG",properties:{"hc-group":"admin0","hc-middle-x":.5,"hc-middle-y":.51,"hc-key":"ag","hc-a2":"AG",name:"Antigua and Barbuda",labelrank:"6","country-abbrev":"Ant.B.",subregion:"Caribbean","region-wb":"Latin America & Caribbean","iso-a3":"ATG","iso-a2":"AG","woe-id":"23424737",continent:"North America"},geometry:{type:"Polygon",coordinates:[[[2019,7677],[2021,7673],[2016,7673],[2015,7676],[2019,7677]]]}},{type:"Feature",id:"TW",properties:{"hc-group":"admin0","hc-middle-x":.47,"hc-middle-y":.48,"hc-key":"tw","hc-a2":"TW",name:"Taiwan",labelrank:"3","country-abbrev":"Taiwan",subregion:"Eastern Asia","region-wb":"East Asia & Pacific","iso-a3":"TWN","iso-a2":"TW","woe-id":"23424971",continent:"Asia"},geometry:{type:"Polygon",coordinates:[[[7863,7887],[7879,7894],[7899,7936],[7926,7938],[7922,7873],[7911,7833],[7863,7887]]]}},{type:"Feature",id:"FJ",properties:{"hc-group":"admin0","hc-middle-x":.19,"hc-middle-y":.89,"hc-key":"fj","hc-a2":"FJ",name:"Fiji",labelrank:"6","country-abbrev":"Fiji",subregion:"Melanesia","region-wb":"East Asia & Pacific","iso-a3":"FJI","iso-a2":"FJ","woe-id":"23424813",continent:"Oceania"},geometry:{type:"Polygon",coordinates:[[[9797,6568],[9851,6584],[9792,6546],[9809,6537],[9782,6515],[9758,6525],[9797,6568]]]}},{type:"Feature",id:"BB",properties:{"hc-group":"admin0","hc-middle-x":.26,"hc-middle-y":.57,"hc-key":"bb","hc-a2":"BB",name:"Barbados",labelrank:"5","country-abbrev":"Barb.",subregion:"Caribbean","region-wb":"Latin America & Caribbean","iso-a3":"BRB","iso-a2":"BB","woe-id":"23424754",continent:"North America"},geometry:{type:"Polygon",coordinates:[[[2084,7544],[2080,7546],[2081,7553],[2087,7545],[2084,7544]]]}},{type:"Feature",id:"IT",properties:{"hc-group":"admin0","hc-middle-x":.68,"hc-middle-y":.54,"hc-key":"it","hc-a2":"IT",name:"Italy",labelrank:"2","country-abbrev":"Italy",subregion:"Southern Europe","region-wb":"Europe & Central Asia","iso-a3":"ITA","iso-a2":"IT","woe-id":"23424853",continent:"Europe"},geometry:{type:"MultiPolygon",coordinates:[[[[4448,8332],[4407,8352],[4417,8365],[4449,8358],[4507,8368],[4492,8315],[4448,8332]]],[[[4277,8452],[4315,8461],[4324,8441],[4317,8397],[4281,8391],[4277,8452]]],[[[4249,8548],[4221,8591],[4233,8618],[4265,8629],[4322,8632],[4336,8649],[4388,8656],[4396,8643],[4435,8638],[4425,8630],[4437,8607],[4390,8598],[4399,8563],[4437,8540],[4452,8509],[4514,8471],[4577,8446],[4593,8429],[4547,8441],[4532,8414],[4552,8405],[4520,8357],[4523,8384],[4504,8427],[4443,8465],[4422,8465],[4343,8527],[4329,8556],[4287,8569],[4249,8548]],[[4403,8487],[4403,8487],[4403,8487],[4403,8487],[4403,8487]],[[4401,8552],[4402,8555],[4400,8554],[4399,8553],[4401,8552]]]]}},{type:"Feature",id:"MT",properties:{"hc-group":"admin0","hc-middle-x":.49,"hc-middle-y":.53,"hc-key":"mt","hc-a2":"MT",name:"Malta",labelrank:"5","country-abbrev":"Malta",subregion:"Southern Europe","region-wb":"Middle East & North Africa","iso-a3":"MLT","iso-a2":"MT","woe-id":"23424897",continent:"Europe"},geometry:{type:"Polygon",coordinates:[[[4467,8294],[4474,8291],[4475,8287],[4470,8289],[4467,8294]]]}},{type:"Feature",id:"SG",properties:{"hc-group":"admin0","hc-middle-x":.5,"hc-middle-y":.58,"hc-key":"sg","hc-a2":"SG",name:"Singapore",labelrank:"6","country-abbrev":"Sing.",subregion:"South-Eastern Asia","region-wb":"East Asia & Pacific","iso-a3":"SGP","iso-a2":"SG","woe-id":"23424948",continent:"Asia"},geometry:{type:"Polygon",coordinates:[[[7415,7164],[7420,7162],[7414,7158],[7408,7160],[7415,7164]]]}},{type:"Feature",id:"CY",properties:{"hc-group":"admin0","hc-middle-x":.39,"hc-middle-y":.51,"hc-key":"cy","hc-a2":"CY",name:"Cyprus",labelrank:"5","country-abbrev":"Cyp.",subregion:"Western Asia","region-wb":"Europe & Central Asia","iso-a3":"CYP","iso-a2":"CY","woe-id":"-90",continent:"Asia"},geometry:{type:"MultiPolygon",coordinates:[[[[5080,8261],[5079,8261],[5079,8261],[5080,8261],[5080,8261]]],[[[5088,8263],[5091,8260],[5084,8260],[5081,8262],[5084,8263],[5087,8263],[5088,8263]]],[[[5080,8261],[5080,8261],[5081,8260],[5081,8260],[5080,8261]]],[[[5078,8260],[5076,8255],[5057,8249],[5052,8251],[5049,8250],[5033,8263],[5043,8267],[5044,8266],[5045,8267],[5046,8267],[5047,8267],[5047,8267],[5047,8267],[5047,8267],[5047,8267],[5069,8266],[5078,8261],[5078,8260]]]]}},{type:"Feature",id:"KM",properties:{"hc-group":"admin0","hc-middle-x":.43,"hc-middle-y":.51,"hc-key":"km","hc-a2":"KM",name:"Comoros",labelrank:"6","country-abbrev":"Com.",subregion:"Eastern Africa","region-wb":"Sub-Saharan Africa","iso-a3":"COM","iso-a2":"KM","woe-id":"23424786",continent:"Africa"},geometry:{type:"Polygon",coordinates:[[[5434,6727],[5427,6733],[5429,6745],[5433,6743],[5434,6727]]]}},{type:"Feature",id:"UG",properties:{"hc-group":"admin0","hc-middle-x":.52,"hc-middle-y":.71,"hc-key":"ug","hc-a2":"UG",name:"Uganda",labelrank:"3","country-abbrev":"Uga.",subregion:"Eastern Africa","region-wb":"Sub-Saharan Africa","iso-a3":"UGA","iso-a2":"UG","woe-id":"23424974",continent:"Africa"},geometry:{type:"MultiPolygon",coordinates:[[[[5131,7125],[5063,7112],[5059,7084],[5027,7084],[5016,7082],[4998,7069],[4987,7071],[4986,7087],[4989,7101],[4997,7112],[4990,7114],[4999,7144],[5016,7157],[5046,7179],[5042,7188],[5023,7197],[5028,7231],[5114,7239],[5130,7255],[5161,7198],[5163,7171],[5131,7125]]],[[[5060,7084],[5060,7085],[5061,7084],[5060,7084]]]]}},{type:"Feature",id:"VA",properties:{"hc-group":"admin0","hc-middle-x":.59,"hc-middle-y":.44,"hc-key":"va","hc-a2":"VA",name:"Vatican",labelrank:"6","country-abbrev":"Vat.",subregion:"Southern Europe","region-wb":"Europe & Central Asia","iso-a3":"VAT","iso-a2":"VA","woe-id":"23424986",continent:"Europe"},geometry:{type:"Polygon",coordinates:[[[4403,8487],[4403,8487],[4403,8487],[4403,8487],[4403,8487]]]}},{type:"Feature",id:"SM",properties:{"hc-group":"admin0","hc-middle-x":.48,"hc-middle-y":.42,"hc-key":"sm","hc-a2":"SM",name:"San Marino",labelrank:"6","country-abbrev":"S.M.",subregion:"Southern Europe","region-wb":"Europe & Central Asia","iso-a3":"SMR","iso-a2":"SM","woe-id":"23424947",continent:"Europe"},geometry:{type:"Polygon",coordinates:[[[4401,8552],[4399,8553],[4400,8554],[4402,8555],[4401,8552]]]}},{type:"Feature",id:"AZ",properties:{"hc-group":"admin0","hc-middle-x":.77,"hc-middle-y":.49,"hc-key":"az","hc-a2":"AZ",name:"Azerbaijan",labelrank:"5","country-abbrev":"Aze.",subregion:"Western Asia","region-wb":"Europe & Central Asia","iso-a3":"AZE","iso-a2":"AZ","woe-id":"23424741",continent:"Asia"},geometry:{type:"MultiPolygon",coordinates:[[[[5411,8459],[5409,8458],[5409,8460],[5410,8460],[5411,8459]]],[[[5417,8456],[5416,8456],[5416,8457],[5417,8456]]],[[[5427,8444],[5427,8446],[5429,8446],[5428,8444],[5427,8444]]],[[[5410,8413],[5408,8415],[5440,8410],[5454,8387],[5432,8392],[5410,8413]]],[[[5450,8486],[5494,8463],[5517,8485],[5554,8445],[5541,8373],[5513,8386],[5507,8415],[5466,8388],[5434,8425],[5444,8432],[5409,8467],[5456,8459],[5450,8486]]]]}},{type:"Feature",id:"SD",properties:{"hc-group":"admin0","hc-middle-x":.5,"hc-middle-y":.4,"hc-key":"sd","hc-a2":"SD",name:"Sudan",labelrank:"3","country-abbrev":"Sudan",subregion:"Northern Africa","region-wb":"Sub-Saharan Africa","iso-a3":"SDN","iso-a2":"SD","woe-id":"-90",continent:"Africa"},geometry:{type:"Polygon",coordinates:[[[4794,7754],[4794,7770],[4826,7771],[4824,7836],[5026,7836],[5207,7836],[5222,7798],[5234,7729],[5269,7705],[5218,7675],[5202,7611],[5206,7583],[5194,7532],[5181,7531],[5155,7468],[5146,7473],[5130,7426],[5101,7471],[5100,7516],[5064,7509],[5075,7478],[5038,7437],[4998,7453],[4960,7422],[4929,7430],[4885,7428],[4862,7457],[4837,7453],[4821,7407],[4808,7401],[4786,7404],[4790,7439],[4764,7474],[4742,7533],[4737,7567],[4752,7579],[4769,7630],[4798,7631],[4794,7754]]]}},{type:"Feature",id:"LY",properties:{"hc-group":"admin0","hc-middle-x":.44,"hc-middle-y":.47,"hc-key":"ly","hc-a2":"LY",name:"Libya",labelrank:"3","country-abbrev":"Libya",subregion:"Northern Africa","region-wb":"Middle East & North Africa","iso-a3":"LBY","iso-a2":"LY","woe-id":"23424882",continent:"Africa"},geometry:{type:"Polygon",coordinates:[[[4824,7836],[4826,7771],[4794,7770],[4794,7754],[4533,7883],[4501,7869],[4477,7856],[4453,7875],[4404,7886],[4390,7911],[4341,7929],[4320,7970],[4334,7983],[4332,8069],[4322,8105],[4345,8127],[4340,8144],[4381,8175],[4383,8202],[4499,8176],[4528,8139],[4570,8133],[4625,8106],[4646,8114],[4650,8155],[4669,8181],[4702,8194],[4749,8184],[4749,8174],[4810,8162],[4816,8152],[4803,8104],[4814,8071],[4824,7836]]]}},{type:"Feature",id:"TJ",properties:{"hc-group":"admin0","hc-middle-x":.51,"hc-middle-y":.51,"hc-key":"tj","hc-a2":"TJ",name:"Tajikistan",labelrank:"4","country-abbrev":"Tjk.",subregion:"Central Asia","region-wb":"Europe & Central Asia","iso-a3":"TJK","iso-a2":"TJ","woe-id":"23424961",continent:"Asia"},geometry:{type:"MultiPolygon",coordinates:[[[[6203,8456],[6202,8455],[6199,8458],[6201,8457],[6203,8456]]],[[[6209,8420],[6212,8419],[6208,8417],[6205,8421],[6209,8420]]],[[[6305,8406],[6316,8378],[6346,8376],[6358,8334],[6307,8342],[6259,8317],[6252,8356],[6218,8370],[6208,8344],[6183,8330],[6137,8333],[6148,8367],[6136,8391],[6112,8399],[6143,8409],[6166,8451],[6196,8458],[6217,8432],[6187,8431],[6170,8409],[6237,8412],[6264,8398],[6305,8406]]]]}},{type:"Feature",id:"LS",properties:{"hc-group":"admin0","hc-middle-x":.42,"hc-middle-y":.5,"hc-key":"ls","hc-a2":"LS",name:"Lesotho",labelrank:"6","country-abbrev":"Les.",subregion:"Southern Africa","region-wb":"Sub-Saharan Africa","iso-a3":"LSO","iso-a2":"LS","woe-id":"23424880",continent:"Africa"},geometry:{type:"Polygon",coordinates:[[[4886,6151],[4932,6183],[4956,6157],[4910,6114],[4888,6126],[4886,6151]]]}},{type:"Feature",id:"UZ",properties:{"hc-group":"admin0","hc-middle-x":.53,"hc-middle-y":.53,"hc-key":"uz","hc-a2":"UZ",name:"Uzbekistan",labelrank:"3","country-abbrev":"Uzb.",subregion:"Central Asia","region-wb":"Europe & Central Asia","iso-a3":"UZB","iso-a2":"UZ","woe-id":"23424980",continent:"Asia"},geometry:{type:"MultiPolygon",coordinates:[[[[6244,8421],[6242,8422],[6241,8423],[6244,8424],[6244,8421]]],[[[6225,8426],[6227,8421],[6221,8421],[6218,8428],[6225,8426]]],[[[5832,8592],[5852,8563],[5853,8583],[5921,8538],[6009,8546],[6041,8519],[6079,8464],[6118,8464],[6142,8444],[6150,8469],[6203,8498],[6184,8476],[6225,8461],[6233,8472],[6280,8450],[6240,8429],[6217,8432],[6196,8458],[6166,8451],[6143,8409],[6112,8399],[6136,8391],[6148,8367],[6137,8333],[6120,8332],[6096,8338],[6094,8360],[6063,8367],[5955,8425],[5935,8457],[5874,8470],[5862,8500],[5820,8516],[5794,8495],[5786,8501],[5778,8487],[5780,8465],[5748,8468],[5727,8588],[5803,8606],[5802,8569],[5809,8603],[5832,8592]],[[6203,8456],[6201,8457],[6199,8458],[6202,8455],[6203,8456]]]]}},{type:"Feature",id:"IN",properties:{"hc-group":"admin0","hc-middle-x":.31,"hc-middle-y":.43,"hc-key":"in","hc-a2":"IN",name:"India",labelrank:"2","country-abbrev":"India",subregion:"Southern Asia","region-wb":"South Asia","iso-a3":"IND","iso-a2":"IN","woe-id":"23424848",continent:"Asia"},geometry:{type:"Polygon",coordinates:[[[6984,7932],[6915,7939],[6894,7965],[6848,7982],[6838,7964],[6869,7940],[6842,7922],[6867,7911],[6864,7890],[6887,7834],[6887,7834],[6887,7834],[6829,7821],[6808,7769],[6778,7767],[6740,7714],[6686,7674],[6688,7659],[6624,7630],[6619,7608],[6632,7553],[6619,7510],[6622,7453],[6607,7454],[6595,7420],[6571,7410],[6549,7381],[6516,7408],[6489,7480],[6453,7536],[6434,7593],[6402,7642],[6366,7766],[6371,7788],[6348,7847],[6344,7810],[6309,7794],[6248,7835],[6277,7854],[6226,7874],[6209,7896],[6229,7909],[6265,7907],[6298,7924],[6262,7984],[6239,7993],[6266,8033],[6311,8031],[6350,8095],[6381,8134],[6377,8153],[6400,8168],[6354,8201],[6340,8240],[6356,8254],[6402,8245],[6439,8265],[6460,8277],[6502,8240],[6503,8212],[6530,8187],[6496,8180],[6513,8141],[6591,8104],[6567,8060],[6660,8016],[6719,8010],[6763,7985],[6812,7978],[6837,7990],[6830,8028],[6851,8032],[6857,8010],[6890,7990],[6961,7997],[6942,8024],[6973,8029],[7029,8075],[7077,8077],[7121,8039],[7106,8011],[7058,7982],[7061,7958],[7041,7896],[7015,7901],[7018,7849],[7e3,7835],[6979,7893],[6964,7867],[6947,7889],[6984,7932]]]}},{type:"Feature",id:"PT",properties:{"hc-group":"admin0","hc-middle-x":.45,"hc-middle-y":.49,"hc-key":"pt","hc-a2":"PT",name:"Portugal",labelrank:"2","country-abbrev":"Port.",subregion:"Southern Europe","region-wb":"Europe & Central Asia","iso-a3":"PRT","iso-a2":"PT","woe-id":"23424925",continent:"Europe"},geometry:{type:"Polygon",coordinates:[[[3788,8333],[3738,8327],[3746,8373],[3724,8382],[3751,8451],[3750,8489],[3817,8488],[3828,8476],[3805,8458],[3803,8392],[3788,8333]]]}},{type:"Feature",id:"MX",properties:{"hc-group":"admin0","hc-middle-x":.48,"hc-middle-y":.5,"hc-key":"mx","hc-a2":"MX",name:"Mexico",labelrank:"2","country-abbrev":"Mex.",subregion:"Central America","region-wb":"Latin America & Caribbean","iso-a3":"MEX","iso-a2":"MX","woe-id":"23424900",continent:"North America"},geometry:{type:"Polygon",coordinates:[[[800,8085],[800,8081],[807,8080],[824,8041],[843,8001],[848,7993],[850,7985],[877,7969],[911,7966],[887,7918],[872,7853],[886,7792],[922,7730],[963,7710],[1049,7726],[1081,7743],[1107,7804],[1181,7823],[1225,7810],[1205,7787],[1177,7713],[1163,7721],[1143,7702],[1134,7699],[1075,7699],[1058,7681],[1089,7652],[1044,7642],[1024,7592],[975,7643],[945,7654],[887,7629],[747,7681],[724,7702],[671,7716],[627,7749],[609,7784],[625,7791],[589,7818],[618,7835],[616,7857],[549,7942],[517,7960],[522,7990],[491,8012],[450,8066],[433,8124],[438,8135],[394,8155],[380,8104],[406,8074],[457,7960],[496,7906],[502,7877],[486,7865],[476,7886],[435,7911],[429,7968],[364,8007],[343,8036],[379,8019],[387,8047],[343,8090],[340,8124],[320,8180],[397,8186],[392,8179],[502,8141],[592,8141],[596,8156],[649,8156],[692,8116],[698,8087],[737,8064],[769,8094],[800,8085]]]}},{type:"Feature",id:"MA",properties:{"hc-group":"admin0","hc-middle-x":.63,"hc-middle-y":.3,"hc-key":"ma","hc-a2":"MA",name:"Morocco",labelrank:"3","country-abbrev":"Mor.",subregion:"Northern Africa","region-wb":"Middle East & North Africa","iso-a3":"MAR","iso-a2":"MA","woe-id":"23424893",continent:"Africa"},geometry:{type:"Polygon",coordinates:[[[3927,8270],[3928,8270],[3930,8265],[3950,8264],[3964,8253],[3967,8203],[3980,8166],[3940,8167],[3904,8151],[3904,8121],[3837,8085],[3776,8077],[3743,8054],[3743,8021],[3739,8003],[3709,7995],[3656,7996],[3641,7967],[3641,7967],[3641,7967],[3641,7967],[3635,7955],[3635,7955],[3635,7955],[3635,7955],[3621,7929],[3569,7882],[3562,7846],[3541,7818],[3471,7817],[3518,7902],[3542,7924],[3556,7971],[3584,7989],[3607,8030],[3654,8043],[3683,8065],[3715,8109],[3708,8143],[3727,8182],[3751,8204],[3798,8224],[3834,8287],[3850,8291],[3851,8290],[3852,8289],[3882,8266],[3927,8272],[3927,8272],[3927,8272],[3927,8270]]]}},{type:"Feature",id:"TZ",properties:{"hc-group":"admin0","hc-middle-x":.5,"hc-middle-y":.49,"hc-key":"tz","hc-a2":"TZ",name:"United Republic of Tanzania",labelrank:"3","country-abbrev":"Tanz.",subregion:"Eastern Africa","region-wb":"Sub-Saharan Africa","iso-a3":"TZA","iso-a2":"TZ","woe-id":"23424973",continent:"Africa"},geometry:{type:"Polygon",coordinates:[[[5158,6738],[5158,6741],[5157,6743],[5156,6744],[5152,6746],[5151,6748],[5151,6748],[5150,6749],[5144,6792],[5137,6799],[5134,6803],[5134,6803],[5131,6805],[5131,6806],[5131,6806],[5126,6805],[5125,6799],[5109,6803],[5093,6809],[5063,6820],[5036,6836],[5017,6889],[4991,6919],[4989,6971],[5027,7011],[5018,7038],[5028,7065],[5016,7082],[5027,7084],[5059,7084],[5059,7082],[5060,7084],[5061,7084],[5060,7047],[5084,7034],[5126,7044],[5116,7062],[5134,7082],[5250,7017],[5254,6997],[5300,6964],[5322,6945],[5304,6930],[5312,6907],[5303,6832],[5337,6774],[5239,6734],[5158,6738]]]}},{type:"Feature",id:"AR",properties:{"hc-group":"admin0","hc-middle-x":.36,"hc-middle-y":.34,"hc-key":"ar","hc-a2":"AR",name:"Argentina",labelrank:"2","country-abbrev":"Arg.",subregion:"South America","region-wb":"Latin America & Caribbean","iso-a3":"ARG","iso-a2":"AR","woe-id":"23424747",continent:"South America"},geometry:{type:"MultiPolygon",coordinates:[[[[2007,5325],[2010,5323],[2008,5322],[2007,5325]]],[[[2007,5326],[1988,5396],[2031,5354],[2126,5322],[2071,5317],[2051,5320],[2044,5321],[2007,5326]]],[[[1859,6371],[1886,6404],[1940,6391],[1951,6369],[1961,6397],[2003,6390],[2061,6338],[2093,6332],[2176,6285],[2149,6224],[2240,6220],[2268,6246],[2271,6281],[2294,6279],[2300,6229],[2242,6194],[2191,6130],[2179,6074],[2181,6056],[2177,5996],[2227,5958],[2221,5944],[2248,5911],[2226,5869],[2182,5852],[2090,5844],[2100,5793],[2072,5771],[2013,5786],[2015,5745],[2032,5730],[2056,5741],[2065,5719],[2018,5689],[2026,5666],[1970,5625],[1965,5607],[1997,5580],[2022,5578],[2029,5546],[1989,5514],[1987,5482],[1960,5471],[1957,5450],[1991,5405],[1943,5416],[1884,5417],[1865,5431],[1861,5461],[1836,5458],[1814,5505],[1836,5522],[1830,5550],[1844,5572],[1847,5636],[1820,5654],[1826,5681],[1804,5711],[1810,5741],[1794,5785],[1800,5845],[1815,5852],[1799,5884],[1797,5924],[1815,5938],[1810,5967],[1823,5998],[1810,6042],[1785,6085],[1801,6188],[1822,6230],[1838,6237],[1821,6307],[1858,6332],[1859,6371]]]]}},{type:"Feature",id:"SA",properties:{"hc-group":"admin0","hc-middle-x":.41,"hc-middle-y":.48,"hc-key":"sa","hc-a2":"SA",name:"Saudi Arabia",labelrank:"2","country-abbrev":"Saud.",subregion:"Western Asia","region-wb":"Middle East & North Africa","iso-a3":"SAU","iso-a2":"SA","woe-id":"23424938",continent:"Asia"},geometry:{type:"Polygon",coordinates:[[[5562,8050],[5580,8019],[5623,7988],[5625,7958],[5649,7926],[5655,7920],[5662,7922],[5665,7921],[5666,7920],[5667,7921],[5668,7922],[5668,7922],[5665,7911],[5674,7910],[5710,7867],[5795,7859],[5811,7835],[5795,7770],[5700,7738],[5608,7725],[5578,7710],[5556,7676],[5482,7687],[5418,7683],[5407,7652],[5389,7687],[5352,7728],[5342,7754],[5299,7786],[5279,7814],[5277,7854],[5254,7894],[5224,7910],[5213,7940],[5137,8036],[5122,8036],[5131,8076],[5166,8071],[5225,8114],[5190,8146],[5257,8167],[5298,8160],[5353,8133],[5441,8071],[5500,8068],[5529,8065],[5562,8050]]]}},{type:"Feature",id:"NL",properties:{"hc-group":"admin0","hc-middle-x":.98,"hc-middle-y":.03,"hc-key":"nl","hc-a2":"NL",name:"Netherlands",labelrank:"5","country-abbrev":"Neth.",subregion:"Western Europe","region-wb":"Europe & Central Asia","iso-a3":"NLD","iso-a2":"NL","woe-id":"-90",continent:"Europe"},geometry:{type:"MultiPolygon",coordinates:[[[[1980,7706],[1978,7706],[1977,7707],[1980,7706]]],[[[4119,8796],[4131,8796],[4145,8796],[4133,8791],[4119,8796]]],[[[4146,8796],[4134,8804],[4187,8865],[4232,8857],[4228,8824],[4209,8811],[4199,8776],[4169,8800],[4146,8796]]]]}},{type:"Feature",id:"YE",properties:{"hc-group":"admin0","hc-middle-x":.37,"hc-middle-y":.49,"hc-key":"ye","hc-a2":"YE",name:"Yemen",labelrank:"3","country-abbrev":"Yem.",subregion:"Western Asia","region-wb":"Middle East & North Africa","iso-a3":"YEM","iso-a2":"YE","woe-id":"23425002",continent:"Asia"},geometry:{type:"Polygon",coordinates:[[[5700,7738],[5727,7682],[5740,7661],[5714,7627],[5630,7599],[5602,7576],[5580,7576],[5538,7556],[5509,7554],[5449,7529],[5426,7549],[5406,7626],[5407,7652],[5418,7683],[5482,7687],[5556,7676],[5578,7710],[5608,7725],[5700,7738]]]}},{type:"Feature",id:"AE",properties:{"hc-group":"admin0","hc-middle-x":.85,"hc-middle-y":.5,"hc-key":"ae","hc-a2":"AE",name:"United Arab Emirates",labelrank:"4","country-abbrev":"U.A.E.",subregion:"Western Asia","region-wb":"Middle East & North Africa","iso-a3":"ARE","iso-a2":"AE","woe-id":"23424738",continent:"Asia"},geometry:{type:"Polygon",coordinates:[[[5822,7955],[5825,7951],[5827,7933],[5808,7930],[5795,7859],[5710,7867],[5674,7910],[5757,7906],[5814,7969],[5817,7956],[5822,7955]],[[5823,7942],[5825,7944],[5822,7945],[5820,7942],[5823,7942]]]}},{type:"Feature",id:"KE",properties:{"hc-group":"admin0","hc-middle-x":.47,"hc-middle-y":.5,"hc-key":"ke","hc-a2":"KE",name:"Kenya",labelrank:"2","country-abbrev":"Ken.",subregion:"Eastern Africa","region-wb":"Sub-Saharan Africa","iso-a3":"KEN","iso-a2":"KE","woe-id":"23424863",continent:"Africa"},geometry:{type:"Polygon",coordinates:[[[5300,6964],[5254,6997],[5250,7017],[5134,7082],[5139,7108],[5131,7125],[5163,7171],[5161,7198],[5130,7255],[5176,7281],[5193,7268],[5223,7262],[5265,7235],[5312,7228],[5352,7257],[5388,7247],[5359,7209],[5359,7088],[5377,7061],[5333,7026],[5300,6964]]]}},{type:"Feature",id:"SS",properties:{"hc-group":"admin0","hc-middle-x":.48,"hc-middle-y":.57,"hc-key":"ss","hc-a2":"SS",name:"South Sudan",labelrank:"3","country-abbrev":"S. Sud.",subregion:"Eastern Africa","region-wb":"Sub-Saharan Africa","iso-a3":"SSD","iso-a2":"SS","woe-id":"-99",continent:"Africa"},geometry:{type:"Polygon",coordinates:[[[5193,7268],[5176,7281],[5130,7255],[5114,7239],[5028,7231],[4993,7266],[4946,7257],[4916,7283],[4883,7315],[4881,7334],[4847,7357],[4808,7401],[4821,7407],[4837,7453],[4862,7457],[4885,7428],[4929,7430],[4960,7422],[4998,7453],[5038,7437],[5075,7478],[5064,7509],[5100,7516],[5101,7471],[5130,7426],[5127,7392],[5104,7393],[5098,7372],[5120,7367],[5154,7334],[5193,7268]]]}},{type:"Feature",id:"TR",properties:{"hc-group":"admin0","hc-middle-x":.36,"hc-middle-y":.5,"hc-key":"tr","hc-a2":"TR",name:"Turkey",labelrank:"2","country-abbrev":"Tur.",subregion:"Western Asia","region-wb":"Europe & Central Asia","iso-a3":"TUR","iso-a2":"TR","woe-id":"23424969",continent:"Asia"},geometry:{type:"MultiPolygon",coordinates:[[[[4825,8449],[4842,8470],[4832,8480],[4853,8493],[4883,8489],[4918,8465],[4825,8449]]],[[[5410,8413],[5386,8404],[5398,8358],[5418,8331],[5353,8338],[5343,8330],[5338,8337],[5263,8318],[5165,8321],[5145,8291],[5144,8324],[5100,8319],[5047,8295],[4979,8323],[4949,8298],[4930,8315],[4886,8318],[4869,8359],[4837,8368],[4861,8388],[4838,8402],[4837,8403],[4830,8407],[4847,8438],[4922,8439],[4922,8465],[4984,8460],[5046,8490],[5128,8481],[5179,8458],[5260,8455],[5301,8474],[5340,8476],[5361,8461],[5372,8428],[5408,8415],[5410,8413]]]]}},{type:"Feature",id:"PG",properties:{"hc-group":"admin0","hc-middle-x":.31,"hc-middle-y":.54,"hc-key":"pg","hc-a2":"PG",name:"Papua New Guinea",labelrank:"2","country-abbrev":"P.N.G.",subregion:"Melanesia","region-wb":"East Asia & Pacific","iso-a3":"PNG","iso-a2":"PG","woe-id":"23424926",continent:"Oceania"},geometry:{type:"MultiPolygon",coordinates:[[[[8617,6819],[8623,6910],[8628,7032],[8742,6992],[8783,6958],[8781,6938],[8818,6926],[8826,6947],[8847,6898],[8818,6896],[8823,6873],[8853,6854],[8866,6820],[8885,6807],[8935,6809],[8948,6783],[8936,6772],[8842,6784],[8814,6807],[8786,6852],[8711,6869],[8696,6824],[8671,6812],[8617,6819]]],[[[8921,7036],[8912,7065],[8925,7038],[8977,7016],[9023,6977],[9015,6958],[8996,7e3],[8921,7036]]],[[[8933,6912],[8906,6910],[8856,6933],[8952,6940],[8975,6957],[8971,6980],[9e3,6975],[8990,6941],[8933,6912]]]]}},{type:"Feature",id:"FI",properties:{"hc-group":"admin0","hc-middle-x":.58,"hc-middle-y":.48,"hc-key":"fi","hc-a2":"FI",name:"Finland",labelrank:"3","country-abbrev":"Fin.",subregion:"Northern Europe","region-wb":"Europe & Central Asia","iso-a3":"FIN","iso-a2":"FI","woe-id":"23424812",continent:"Europe"},geometry:{type:"Polygon",coordinates:[[[4684,9269],[4660,9338],[4573,9374],[4599,9381],[4623,9363],[4690,9358],[4714,9395],[4763,9407],[4798,9394],[4797,9373],[4794,9347],[4834,9330],[4814,9302],[4840,9278],[4838,9242],[4870,9210],[4856,9201],[4905,9173],[4898,9160],[4811,9096],[4693,9077],[4631,9097],[4614,9181],[4645,9187],[4705,9237],[4718,9258],[4684,9269]]]}},{type:"Feature",id:"SE",properties:{"hc-group":"admin0","hc-middle-x":.45,"hc-middle-y":.4,"hc-key":"se","hc-a2":"SE",name:"Sweden",labelrank:"3","country-abbrev":"Swe.",subregion:"Northern Europe","region-wb":"Europe & Central Asia","iso-a3":"SWE","iso-a2":"SE","woe-id":"23424954",continent:"Europe"},geometry:{type:"Polygon",coordinates:[[[4573,9374],[4660,9338],[4684,9269],[4633,9268],[4606,9231],[4599,9205],[4521,9160],[4506,9112],[4562,9071],[4557,9052],[4501,9032],[4502,8976],[4511,8990],[4561,9010],[4553,8985],[4514,8988],[4498,8955],[4447,8952],[4434,8928],[4399,8928],[4384,8957],[4394,8969],[4343,9024],[4348,9045],[4376,9082],[4355,9186],[4373,9208],[4408,9209],[4398,9228],[4420,9252],[4419,9279],[4467,9308],[4458,9321],[4509,9357],[4558,9351],[4573,9374]]]}},{type:"Feature",id:"MY",properties:{"hc-group":"admin0","hc-middle-x":.92,"hc-middle-y":.22,"hc-key":"my","hc-a2":"MY",name:"Malaysia",labelrank:"3","country-abbrev":"Malay.",subregion:"South-Eastern Asia","region-wb":"East Asia & Pacific","iso-a3":"MYS","iso-a2":"MY","woe-id":"23424901",continent:"Asia"},geometry:{type:"MultiPolygon",coordinates:[[[[7872,7253],[7866,7253],[7867,7254],[7861,7253],[7805,7260],[7793,7216],[7763,7164],[7734,7157],[7713,7168],[7634,7145],[7604,7185],[7649,7168],[7658,7208],[7713,7220],[7744,7267],[7764,7248],[7776,7277],[7777,7277],[7778,7274],[7789,7258],[7781,7277],[7803,7299],[7835,7353],[7849,7334],[7916,7287],[7879,7276],[7893,7259],[7870,7254],[7872,7253]]],[[[7289,7327],[7320,7321],[7322,7301],[7353,7321],[7399,7274],[7400,7214],[7429,7161],[7399,7167],[7330,7210],[7292,7289],[7289,7327]]]]}},{type:"Feature",id:"VN",properties:{"hc-group":"admin0","hc-middle-x":.61,"hc-middle-y":.95,"hc-key":"vn","hc-a2":"VN",name:"Vietnam",labelrank:"2","country-abbrev":"Viet.",subregion:"South-Eastern Asia","region-wb":"East Asia & Pacific","iso-a3":"VNM","iso-a2":"VN","woe-id":"23424984",continent:"Asia"},geometry:{type:"Polygon",coordinates:[[[7306,7849],[7315,7861],[7364,7853],[7404,7881],[7444,7866],[7456,7836],[7499,7819],[7480,7812],[7443,7771],[7434,7738],[7473,7688],[7550,7620],[7580,7539],[7570,7488],[7515,7456],[7497,7461],[7491,7429],[7438,7409],[7435,7450],[7423,7457],[7464,7477],[7518,7520],[7511,7597],[7514,7616],[7471,7672],[7405,7731],[7375,7748],[7408,7773],[7375,7802],[7345,7799],[7337,7822],[7306,7849]]]}},{type:"Feature",id:"PA",properties:{"hc-group":"admin0","hc-middle-x":.28,"hc-middle-y":.5,"hc-key":"pa","hc-a2":"PA",name:"Panama",labelrank:"4","country-abbrev":"Pan.",subregion:"Central America","region-wb":"Latin America & Caribbean","iso-a3":"PAN","iso-a2":"PA","woe-id":"23424924",continent:"North America"},geometry:{type:"Polygon",coordinates:[[[1328,7430],[1342,7409],[1376,7405],[1424,7431],[1462,7424],[1496,7400],[1502,7376],[1477,7353],[1458,7397],[1425,7410],[1394,7381],[1408,7361],[1380,7353],[1353,7385],[1315,7379],[1310,7389],[1311,7390],[1311,7390],[1311,7390],[1311,7390],[1328,7430]]]}},{type:"Feature",id:"IR",properties:{"hc-group":"admin0","hc-middle-x":.53,"hc-middle-y":.54,"hc-key":"ir","hc-a2":"IR",name:"Iran",labelrank:"2","country-abbrev":"Iran",subregion:"Southern Asia","region-wb":"Middle East & North Africa","iso-a3":"IRN","iso-a2":"IR","woe-id":"23424851",continent:"Asia"},geometry:{type:"Polygon",coordinates:[[[5418,8331],[5398,8358],[5386,8404],[5410,8413],[5432,8392],[5454,8387],[5461,8389],[5466,8388],[5507,8415],[5513,8386],[5541,8373],[5548,8351],[5643,8313],[5708,8321],[5703,8338],[5747,8362],[5802,8368],[5854,8349],[5907,8315],[5934,8312],[5941,8281],[5930,8198],[5945,8146],[5979,8125],[5953,8093],[5991,8050],[6020,8040],[6036,7988],[5997,7974],[5993,7941],[5855,7959],[5842,7995],[5819,8006],[5771,7983],[5736,7990],[5693,8020],[5659,8030],[5609,8104],[5573,8111],[5561,8096],[5531,8130],[5518,8176],[5480,8194],[5448,8227],[5472,8287],[5439,8293],[5418,8331]]]}},{type:"Feature",id:"HT",properties:{"hc-group":"admin0","hc-middle-x":.23,"hc-middle-y":.87,"hc-key":"ht","hc-a2":"HT",name:"Haiti",labelrank:"5","country-abbrev":"Haiti",subregion:"Caribbean","region-wb":"Latin America & Caribbean","iso-a3":"HTI","iso-a2":"HT","woe-id":"23424839",continent:"North America"},geometry:{type:"MultiPolygon",coordinates:[[[[1694,7721],[1693,7722],[1693,7723],[1693,7723],[1694,7721]]],[[[1691,7725],[1692,7721],[1694,7721],[1700,7715],[1697,7706],[1648,7713],[1628,7706],[1618,7727],[1668,7720],[1670,7752],[1648,7764],[1702,7761],[1701,7730],[1691,7725]]]]}},{type:"Feature",id:"DO",properties:{"hc-group":"admin0","hc-middle-x":.46,"hc-middle-y":.38,"hc-key":"do","hc-a2":"DO",name:"Dominican Republic",labelrank:"5","country-abbrev":"Dom. Rep.",subregion:"Caribbean","region-wb":"Latin America & Caribbean","iso-a3":"DOM","iso-a2":"DO","woe-id":"23424800",continent:"North America"},geometry:{type:"Polygon",coordinates:[[[1693,7723],[1691,7725],[1701,7730],[1702,7761],[1727,7769],[1761,7760],[1770,7741],[1809,7727],[1790,7719],[1733,7719],[1707,7692],[1697,7706],[1700,7715],[1694,7721],[1694,7721],[1693,7723],[1693,7723]]]}},{type:"Feature",id:"GW",properties:{"hc-group":"admin0","hc-middle-x":.55,"hc-middle-y":.49,"hc-key":"gw","hc-a2":"GW",name:"Guinea Bissau",labelrank:"6","country-abbrev":"GnB.",subregion:"Western Africa","region-wb":"Sub-Saharan Africa","iso-a3":"GNB","iso-a2":"GW","woe-id":"23424929",continent:"Africa"},geometry:{type:"Polygon",coordinates:[[[3530,7475],[3500,7496],[3475,7520],[3525,7531],[3573,7531],[3573,7500],[3541,7493],[3530,7475]]]}},{type:"Feature",id:"BA",properties:{"hc-group":"admin0","hc-middle-x":.85,"hc-middle-y":.57,"hc-key":"ba","hc-a2":"BA",name:"Bosnia and Herzegovina",labelrank:"5","country-abbrev":"B.H.",subregion:"Southern Europe","region-wb":"Europe & Central Asia","iso-a3":"BIH","iso-a2":"BA","woe-id":"23424761",continent:"Europe"},geometry:{type:"Polygon",coordinates:[[[4587,8508],[4568,8517],[4562,8519],[4559,8520],[4560,8521],[4516,8562],[4501,8593],[4535,8597],[4600,8584],[4611,8584],[4608,8540],[4586,8522],[4587,8508]]]}},{type:"Feature",id:"HR",properties:{"hc-group":"admin0","hc-middle-x":.38,"hc-middle-y":.56,"hc-key":"hr","hc-a2":"HR",name:"Croatia",labelrank:"6","country-abbrev":"Cro.",subregion:"Southern Europe","region-wb":"Europe & Central Asia","iso-a3":"HRV","iso-a2":"HR","woe-id":"23424843",continent:"Europe"},geometry:{type:"MultiPolygon",coordinates:[[[[4562,8519],[4568,8517],[4587,8508],[4587,8506],[4589,8503],[4569,8516],[4562,8519]]],[[[4560,8521],[4522,8529],[4481,8555],[4461,8586],[4433,8604],[4486,8603],[4495,8627],[4521,8637],[4547,8619],[4594,8618],[4600,8592],[4600,8584],[4535,8597],[4501,8593],[4516,8562],[4560,8521]]]]}},{type:"Feature",id:"TH",properties:{"hc-group":"admin0","hc-middle-x":.45,"hc-middle-y":.29,"hc-key":"th","hc-a2":"TH",name:"Thailand",labelrank:"3","country-abbrev":"Thai.",subregion:"South-Eastern Asia","region-wb":"East Asia & Pacific","iso-a3":"THA","iso-a2":"TH","woe-id":"23424960",continent:"Asia"},geometry:{type:"Polygon",coordinates:[[[7353,7321],[7322,7301],[7320,7321],[7289,7327],[7260,7366],[7223,7396],[7237,7455],[7263,7503],[7242,7543],[7242,7565],[7210,7601],[7225,7645],[7171,7721],[7185,7764],[7202,7760],[7250,7781],[7265,7755],[7290,7756],[7295,7688],[7322,7712],[7352,7706],[7384,7716],[7414,7684],[7415,7657],[7446,7631],[7436,7586],[7386,7589],[7346,7560],[7370,7497],[7332,7531],[7305,7529],[7302,7557],[7272,7555],[7275,7515],[7252,7436],[7277,7419],[7298,7351],[7335,7340],[7353,7321]]]}},{type:"Feature",id:"EE",properties:{"hc-group":"admin0","hc-middle-x":.25,"hc-middle-y":.41,"hc-key":"ee","hc-a2":"EE",name:"Estonia",labelrank:"6","country-abbrev":"Est.",subregion:"Northern Europe","region-wb":"Europe & Central Asia","iso-a3":"EST","iso-a2":"EE","woe-id":"23424805",continent:"Europe"},geometry:{type:"Polygon",coordinates:[[[4821,9061],[4824,9060],[4827,9057],[4825,9057],[4822,9057],[4824,9056],[4824,9056],[4824,9056],[4823,9056],[4820,9056],[4818,9051],[4815,9045],[4794,9039],[4817,9013],[4814,9007],[4811,8997],[4786,8997],[4749,9015],[4721,9009],[4727,9024],[4652,9044],[4753,9067],[4821,9061]]]}},{type:"Feature",id:"CD",properties:{"hc-group":"admin0","hc-middle-x":.57,"hc-middle-y":.44,"hc-key":"cd","hc-a2":"CD",name:"Democratic Republic of the Congo",labelrank:"2","country-abbrev":"D.R.C.",subregion:"Middle Africa","region-wb":"Sub-Saharan Africa","iso-a3":"COD","iso-a2":"CD","woe-id":"23424780",continent:"Africa"},geometry:{type:"Polygon",coordinates:[[[4974,7008],[4970,6951],[4983,6898],[5017,6848],[4962,6839],[4943,6819],[4949,6810],[4955,6797],[4943,6742],[4964,6712],[4989,6719],[4988,6678],[4968,6677],[4905,6738],[4889,6724],[4845,6736],[4844,6751],[4810,6745],[4800,6761],[4744,6749],[4742,6792],[4730,6809],[4731,6879],[4657,6888],[4651,6855],[4594,6852],[4574,6878],[4562,6923],[4450,6925],[4426,6919],[4418,6928],[4426,6951],[4447,6965],[4457,6957],[4490,6977],[4504,6959],[4550,7008],[4550,7047],[4600,7100],[4610,7187],[4628,7230],[4625,7258],[4664,7285],[4692,7261],[4755,7254],[4855,7292],[4916,7283],[4946,7257],[4993,7266],[5028,7231],[5023,7197],[5042,7188],[5017,7166],[5016,7157],[4999,7144],[4990,7114],[4978,7100],[4989,7101],[4986,7087],[4987,7071],[4979,7067],[4975,7062],[4966,7053],[4963,7036],[4964,7030],[4968,7028],[4975,7017],[4974,7008]]]}},{type:"Feature",id:"KW",properties:{"hc-group":"admin0","hc-middle-x":.59,"hc-middle-y":.41,"hc-key":"kw","hc-a2":"KW",name:"Kuwait",labelrank:"6","country-abbrev":"Kwt.",subregion:"Western Asia","region-wb":"Middle East & North Africa","iso-a3":"KWT","iso-a2":"KW","woe-id":"23424870",continent:"Asia"},geometry:{type:"Polygon",coordinates:[[[5562,8050],[5529,8065],[5500,8068],[5516,8096],[5542,8097],[5549,8076],[5562,8050]]]}},{type:"Feature",id:"DE",properties:{"hc-group":"admin0","hc-middle-x":.52,"hc-middle-y":.35,"hc-key":"de","hc-a2":"DE",name:"Germany",labelrank:"2","country-abbrev":"Ger.",subregion:"Western Europe","region-wb":"Europe & Central Asia","iso-a3":"DEU","iso-a2":"DE","woe-id":"23424829",continent:"Europe"},geometry:{type:"MultiPolygon",coordinates:[[[[4273,8911],[4278,8912],[4296,8909],[4357,8879],[4387,8898],[4438,8880],[4437,8879],[4438,8878],[4426,8877],[4440,8872],[4437,8845],[4453,8836],[4461,8779],[4394,8764],[4391,8743],[4435,8711],[4404,8690],[4405,8675],[4352,8666],[4313,8671],[4298,8678],[4297,8675],[4275,8672],[4249,8672],[4266,8717],[4210,8734],[4214,8745],[4203,8755],[4210,8761],[4199,8776],[4209,8811],[4228,8824],[4232,8857],[4253,8875],[4284,8879],[4273,8911]]],[[[4297,8675],[4298,8675],[4298,8675],[4297,8675]]]]}},{type:"Feature",id:"CZ",properties:{"hc-group":"admin0","hc-middle-x":.5,"hc-middle-y":.49,"hc-key":"cz","hc-a2":"CZ",name:"Czech Republic",labelrank:"5","country-abbrev":"Cz. Rep.",subregion:"Eastern Europe","region-wb":"Europe & Central Asia","iso-a3":"CZE","iso-a2":"CZ","woe-id":"23424810",continent:"Europe"},geometry:{type:"Polygon",coordinates:[[[4435,8711],[4391,8743],[4394,8764],[4461,8779],[4533,8764],[4585,8735],[4564,8722],[4530,8706],[4470,8718],[4435,8711]]]}},{type:"Feature",id:"CH",properties:{"hc-group":"admin0","hc-middle-x":.17,"hc-middle-y":.56,"hc-key":"ch","hc-a2":"CH",name:"Switzerland",labelrank:"4","country-abbrev":"Switz.",subregion:"Western Europe","region-wb":"Europe & Central Asia","iso-a3":"CHE","iso-a2":"CH","woe-id":"23424957",continent:"Europe"},geometry:{type:"Polygon",coordinates:[[[4249,8672],[4275,8672],[4297,8675],[4297,8675],[4298,8675],[4298,8675],[4307,8669],[4308,8670],[4311,8667],[4308,8662],[4307,8655],[4310,8655],[4326,8648],[4336,8649],[4322,8632],[4265,8629],[4233,8618],[4225,8625],[4226,8634],[4221,8638],[4213,8633],[4209,8630],[4205,8640],[4249,8672]]]}},{type:"Feature",id:"IE",properties:{"hc-group":"admin0","hc-middle-x":.45,"hc-middle-y":.49,"hc-key":"ie","hc-a2":"IE",name:"Ireland",labelrank:"3","country-abbrev":"Ire.",subregion:"Northern Europe","region-wb":"Europe & Central Asia","iso-a3":"IRL","iso-a2":"IE","woe-id":"23424803",continent:"Europe"},geometry:{type:"Polygon",coordinates:[[[3807,8917],[3780,8897],[3835,8885],[3842,8848],[3831,8823],[3799,8821],[3761,8803],[3727,8800],[3710,8814],[3753,8858],[3719,8863],[3726,8892],[3766,8891],[3777,8920],[3807,8917]]]}},{type:"Feature",id:"MM",properties:{"hc-group":"admin0","hc-middle-x":.32,"hc-middle-y":.55,"hc-key":"mm","hc-a2":"MM",name:"Myanmar",labelrank:"3","country-abbrev":"Myan.",subregion:"South-Eastern Asia","region-wb":"East Asia & Pacific","iso-a3":"MMR","iso-a2":"MM","woe-id":"23424763",continent:"Asia"},geometry:{type:"Polygon",coordinates:[[[6994,7805],[7005,7813],[7e3,7835],[7018,7849],[7015,7901],[7041,7896],[7061,7958],[7058,7982],[7106,8011],[7121,8039],[7126,8050],[7168,8018],[7178,7963],[7151,7936],[7155,7897],[7184,7904],[7197,7875],[7218,7871],[7211,7841],[7237,7837],[7248,7817],[7279,7821],[7266,7813],[7250,7781],[7202,7760],[7185,7764],[7171,7721],[7225,7645],[7210,7601],[7242,7565],[7242,7543],[7263,7503],[7237,7455],[7225,7548],[7202,7570],[7186,7649],[7169,7673],[7115,7631],[7075,7641],[7083,7690],[7064,7732],[7040,7749],[6994,7805]]]}},{type:"Feature",id:"GQ",properties:{"hc-group":"admin0","hc-middle-x":.53,"hc-middle-y":.55,"hc-key":"gq","hc-a2":"GQ",name:"Equatorial Guinea",labelrank:"4","country-abbrev":"Eq. G.",subregion:"Middle Africa","region-wb":"Sub-Saharan Africa","iso-a3":"GNQ","iso-a2":"GQ","woe-id":"23424804",continent:"Africa"},geometry:{type:"Polygon",coordinates:[[[4340,7149],[4325,7155],[4340,7193],[4346,7188],[4390,7188],[4390,7149],[4340,7149]]]}},{type:"Feature",id:"AM",properties:{"hc-group":"admin0","hc-middle-x":.54,"hc-middle-y":.42,"hc-key":"am","hc-a2":"AM",name:"Armenia",labelrank:"6","country-abbrev":"Arm.",subregion:"Western Asia","region-wb":"Europe & Central Asia","iso-a3":"ARM","iso-a2":"AM","woe-id":"23424743",continent:"Asia"},geometry:{type:"Polygon",coordinates:[[[5408,8415],[5372,8428],[5361,8461],[5384,8465],[5409,8467],[5444,8432],[5434,8425],[5466,8388],[5461,8389],[5454,8387],[5440,8410],[5408,8415]],[[5411,8459],[5410,8460],[5409,8460],[5409,8458],[5411,8459]],[[5417,8456],[5416,8457],[5416,8456],[5417,8456]],[[5427,8444],[5428,8444],[5429,8446],[5427,8446],[5427,8444]]]}},{type:"Feature",id:"TN",properties:{"hc-group":"admin0","hc-middle-x":.51,"hc-middle-y":.07,"hc-key":"tn","hc-a2":"TN",name:"Tunisia",labelrank:"3","country-abbrev":"Tun.",subregion:"Northern Africa","region-wb":"Middle East & North Africa","iso-a3":"TUN","iso-a2":"TN","woe-id":"23424967",continent:"Africa"},geometry:{type:"Polygon",coordinates:[[[4383,8202],[4381,8175],[4340,8144],[4345,8127],[4322,8105],[4306,8165],[4283,8180],[4255,8225],[4279,8249],[4288,8324],[4324,8338],[4370,8269],[4338,8239],[4345,8219],[4368,8222],[4383,8202]]]}},{type:"Feature",id:"TL",properties:{"hc-group":"admin0","hc-middle-x":.65,"hc-middle-y":.36,"hc-key":"tl","hc-a2":"TL",name:"East Timor",labelrank:"5","country-abbrev":"T.L.",subregion:"South-Eastern Asia","region-wb":"East Asia & Pacific","iso-a3":"TLS","iso-a2":"TL","woe-id":"23424968",continent:"Asia"},geometry:{type:"MultiPolygon",coordinates:[[[[8064,6811],[8070,6815],[8078,6817],[8071,6806],[8064,6811]]],[[[8094,6824],[8102,6835],[8162,6845],[8144,6824],[8097,6807],[8094,6816],[8094,6824]]]]}},{type:"Feature",id:"MR",properties:{"hc-group":"admin0","hc-middle-x":.59,"hc-middle-y":.61,"hc-key":"mr","hc-a2":"MR",name:"Mauritania",labelrank:"3","country-abbrev":"Mrt.",subregion:"Western Africa","region-wb":"Sub-Saharan Africa","iso-a3":"MRT","iso-a2":"MR","woe-id":"23424896",continent:"Africa"},geometry:{type:"Polygon",coordinates:[[[3742,8009],[3843,7948],[3865,7934],[3808,7934],[3841,7623],[3672,7621],[3639,7625],[3621,7600],[3555,7660],[3490,7655],[3483,7634],[3501,7704],[3486,7751],[3497,7778],[3470,7796],[3473,7814],[3600,7814],[3601,7869],[3633,7884],[3635,7955],[3635,7955],[3635,7955],[3635,7955],[3635,7967],[3641,7967],[3641,7967],[3641,7967],[3641,7967],[3742,7967],[3742,8009]]]}},{type:"Feature",id:"DZ",properties:{"hc-group":"admin0","hc-middle-x":.63,"hc-middle-y":.53,"hc-key":"dz","hc-a2":"DZ",name:"Algeria",labelrank:"3","country-abbrev":"Alg.",subregion:"Northern Africa","region-wb":"Middle East & North Africa","iso-a3":"DZA","iso-a2":"DZ","woe-id":"23424740",continent:"Africa"},geometry:{type:"Polygon",coordinates:[[[3865,7934],[3843,7948],[3742,8009],[3743,8021],[3743,8054],[3776,8077],[3837,8085],[3904,8121],[3904,8151],[3940,8167],[3980,8166],[3967,8203],[3964,8253],[3950,8264],[4052,8310],[4169,8323],[4183,8315],[4250,8329],[4288,8324],[4279,8249],[4255,8225],[4283,8180],[4306,8165],[4322,8105],[4332,8069],[4334,7983],[4320,7970],[4341,7929],[4390,7911],[4404,7886],[4261,7799],[4207,7753],[4156,7743],[4120,7742],[4124,7764],[4081,7778],[4057,7807],[3865,7934]]]}},{type:"Feature",id:"PE",properties:{"hc-group":"admin0","hc-middle-x":.64,"hc-middle-y":.65,"hc-key":"pe","hc-a2":"PE",name:"Peru",labelrank:"2","country-abbrev":"Peru",subregion:"South America","region-wb":"Latin America & Caribbean","iso-a3":"PER","iso-a2":"PE","woe-id":"23424919",continent:"South America"},geometry:{type:"Polygon",coordinates:[[[1769,6609],[1749,6598],[1779,6586],[1781,6587],[1784,6586],[1780,6577],[1782,6576],[1763,6552],[1769,6544],[1756,6520],[1742,6517],[1704,6551],[1579,6614],[1541,6656],[1542,6680],[1491,6748],[1443,6848],[1409,6895],[1371,6918],[1365,6978],[1394,7006],[1389,6983],[1437,6953],[1459,7005],[1513,7033],[1549,7066],[1558,7113],[1612,7076],[1627,7044],[1654,7037],[1702,7044],[1730,7028],[1708,6993],[1734,6978],[1707,6981],[1638,6949],[1632,6908],[1604,6870],[1667,6790],[1699,6792],[1720,6808],[1719,6757],[1753,6759],[1785,6708],[1774,6670],[1782,6653],[1769,6609]]]}},{type:"Feature",id:"AO",properties:{"hc-group":"admin0","hc-middle-x":.5,"hc-middle-y":.65,"hc-key":"ao","hc-a2":"AO",name:"Angola",labelrank:"3","country-abbrev":"Ang.",subregion:"Middle Africa","region-wb":"Sub-Saharan Africa","iso-a3":"AGO","iso-a2":"AO","woe-id":"23424745",continent:"Africa"},geometry:{type:"MultiPolygon",coordinates:[[[[4418,6928],[4419,6938],[4412,6953],[4437,6973],[4447,6965],[4426,6951],[4418,6928]]],[[[4401,6553],[4401,6600],[4418,6634],[4427,6678],[4464,6716],[4468,6768],[4443,6819],[4456,6844],[4420,6917],[4450,6925],[4562,6923],[4574,6878],[4594,6852],[4651,6855],[4657,6888],[4731,6879],[4730,6809],[4742,6792],[4744,6749],[4800,6761],[4800,6692],[4734,6692],[4733,6588],[4777,6540],[4693,6527],[4627,6537],[4617,6548],[4471,6548],[4446,6563],[4401,6553]]]]}},{type:"Feature",id:"MZ",properties:{"hc-group":"admin0","hc-middle-x":.83,"hc-middle-y":.23,"hc-key":"mz","hc-a2":"MZ",name:"Mozambique",labelrank:"3","country-abbrev":"Moz.",subregion:"Eastern Africa","region-wb":"Sub-Saharan Africa","iso-a3":"MOZ","iso-a2":"MZ","woe-id":"23424902",continent:"Africa"},geometry:{type:"Polygon",coordinates:[[[5153,6675],[5149,6718],[5158,6738],[5239,6734],[5337,6774],[5346,6633],[5313,6580],[5220,6533],[5146,6467],[5138,6449],[5163,6394],[5146,6313],[5100,6296],[5060,6268],[5071,6239],[5053,6239],[5046,6239],[5044,6257],[5042,6268],[5046,6318],[5026,6384],[5064,6421],[5085,6462],[5088,6571],[5006,6606],[5001,6627],[5099,6659],[5112,6639],[5135,6646],[5141,6617],[5130,6597],[5158,6576],[5180,6592],[5184,6638],[5153,6675]]]}},{type:"Feature",id:"CR",properties:{"hc-group":"admin0","hc-middle-x":.22,"hc-middle-y":.05,"hc-key":"cr","hc-a2":"CR",name:"Costa Rica",labelrank:"5","country-abbrev":"C.R.",subregion:"Central America","region-wb":"Latin America & Caribbean","iso-a3":"CRI","iso-a2":"CR","woe-id":"23424791",continent:"North America"},geometry:{type:"MultiPolygon",coordinates:[[[[1295,7474],[1300,7460],[1328,7430],[1311,7390],[1311,7390],[1307,7399],[1221,7455],[1228,7479],[1272,7476],[1295,7474]]],[[[1315,7379],[1310,7389],[1311,7390],[1311,7390],[1315,7379]]]]}},{type:"Feature",id:"SV",properties:{"hc-group":"admin0","hc-middle-x":.5,"hc-middle-y":.54,"hc-key":"sv","hc-a2":"SV",name:"El Salvador",labelrank:"6","country-abbrev":"El. S.",subregion:"Central America","region-wb":"Latin America & Caribbean","iso-a3":"SLV","iso-a2":"SV","woe-id":"23424807",continent:"North America"},geometry:{type:"Polygon",coordinates:[[[1165,7555],[1133,7550],[1091,7566],[1091,7569],[1117,7588],[1169,7568],[1165,7555]]]}},{type:"Feature",id:"KH",properties:{"hc-group":"admin0","hc-middle-x":.26,"hc-middle-y":.54,"hc-key":"kh","hc-a2":"KH",name:"Cambodia",labelrank:"3","country-abbrev":"Camb.",subregion:"South-Eastern Asia","region-wb":"East Asia & Pacific","iso-a3":"KHM","iso-a2":"KH","woe-id":"23424776",continent:"Asia"},geometry:{type:"Polygon",coordinates:[[[7511,7597],[7518,7520],[7464,7477],[7423,7457],[7382,7469],[7370,7497],[7346,7560],[7386,7589],[7436,7586],[7489,7585],[7511,7597]]]}},{type:"Feature",id:"GT",properties:{"hc-group":"admin0","hc-middle-x":.45,"hc-middle-y":.79,"hc-key":"gt","hc-a2":"GT",name:"Guatemala",labelrank:"3","country-abbrev":"Guat.",subregion:"Central America","region-wb":"Latin America & Caribbean","iso-a3":"GTM","iso-a2":"GT","woe-id":"23424834",continent:"North America"},geometry:{type:"Polygon",coordinates:[[[1136,7636],[1145,7632],[1158,7631],[1125,7609],[1117,7588],[1091,7569],[1091,7566],[1052,7573],[1024,7592],[1044,7642],[1089,7652],[1058,7681],[1075,7699],[1134,7699],[1125,7636],[1136,7636]]]}},{type:"Feature",id:"BZ",properties:{"hc-group":"admin0","hc-middle-x":.56,"hc-middle-y":.5,"hc-key":"bz","hc-a2":"BZ",name:"Belize",labelrank:"6","country-abbrev":"Belize",subregion:"Central America","region-wb":"Latin America & Caribbean","iso-a3":"BLZ","iso-a2":"BZ","woe-id":"23424760",continent:"North America"},geometry:{type:"Polygon",coordinates:[[[1134,7699],[1143,7702],[1163,7721],[1161,7671],[1136,7636],[1125,7636],[1134,7699]]]}},{type:"Feature",id:"KP",properties:{"hc-group":"admin0","hc-middle-x":.61,"hc-middle-y":.48,"hc-key":"kp","hc-a2":"KP",name:"North Korea",labelrank:"3","country-abbrev":"N.K.",subregion:"Eastern Asia","region-wb":"East Asia & Pacific","iso-a3":"PRK","iso-a2":"KP","woe-id":"23424865",continent:"Asia"},geometry:{type:"Polygon",coordinates:[[[8034,8507],[8039,8503],[8042,8499],[8019,8475],[8030,8452],[7974,8416],[7979,8397],[8013,8379],[7979,8369],[7969,8353],[7906,8376],[7915,8404],[7873,8428],[7914,8454],[7924,8479],[7975,8469],[7964,8490],[8034,8507]]]}},{type:"Feature",id:"KR",properties:{"hc-group":"admin0","hc-middle-x":.47,"hc-middle-y":.5,"hc-key":"kr","hc-a2":"KR",name:"South Korea",labelrank:"2","country-abbrev":"S.K.",subregion:"Eastern Asia","region-wb":"East Asia & Pacific","iso-a3":"KOR","iso-a2":"KR","woe-id":"23424868",continent:"Asia"},geometry:{type:"Polygon",coordinates:[[[7969,8353],[7979,8369],[8013,8379],[8058,8336],[8080,8278],[8062,8252],[8041,8262],[8029,8242],[8003,8241],[7986,8266],[7980,8328],[7969,8353]]]}},{type:"Feature",id:"VE",properties:{"hc-group":"admin0","hc-middle-x":.58,"hc-middle-y":.45,"hc-key":"ve","hc-a2":"VE",name:"Venezuela",labelrank:"3","country-abbrev":"Ven.",subregion:"South America","region-wb":"Latin America & Caribbean","iso-a3":"VEN","iso-a2":"VE","woe-id":"23424982",continent:"South America"},geometry:{type:"Polygon",coordinates:[[[2062,7397],[2015,7310],[2036,7287],[2008,7256],[1907,7247],[1921,7234],[1926,7198],[1948,7196],[1923,7168],[1876,7138],[1833,7157],[1823,7195],[1802,7211],[1820,7229],[1802,7265],[1816,7319],[1752,7317],[1730,7345],[1666,7348],[1658,7390],[1639,7421],[1644,7458],[1677,7498],[1698,7504],[1679,7497],[1688,7467],[1669,7438],[1688,7413],[1704,7435],[1688,7470],[1735,7492],[1777,7491],[1806,7459],[1860,7465],[1909,7447],[1933,7465],[1977,7469],[1988,7434],[2011,7440],[2038,7421],[2027,7404],[2062,7397]]]}},{type:"Feature",id:"GY",properties:{"hc-group":"admin0","hc-middle-x":.67,"hc-middle-y":.25,"hc-key":"gy","hc-a2":"GY",name:"Guyana",labelrank:"4","country-abbrev":"Guy.",subregion:"South America","region-wb":"Latin America & Caribbean","iso-a3":"GUY","iso-a2":"GY","woe-id":"23424836",continent:"South America"},geometry:{type:"Polygon",coordinates:[[[2036,7287],[2015,7310],[2062,7397],[2091,7379],[2153,7316],[2150,7296],[2122,7253],[2173,7180],[2153,7183],[2097,7156],[2066,7177],[2058,7205],[2074,7246],[2060,7283],[2036,7287]]]}},{type:"Feature",id:"HN",properties:{"hc-group":"admin0","hc-middle-x":.67,"hc-middle-y":.15,"hc-key":"hn","hc-a2":"HN",name:"Honduras",labelrank:"5","country-abbrev":"Hond.",subregion:"Central America","region-wb":"Latin America & Caribbean","iso-a3":"HND","iso-a2":"HN","woe-id":"23424841",continent:"North America"},geometry:{type:"Polygon",coordinates:[[[1117,7588],[1125,7609],[1158,7631],[1233,7640],[1285,7634],[1321,7607],[1259,7598],[1234,7573],[1200,7566],[1180,7541],[1174,7551],[1165,7555],[1169,7568],[1117,7588]]]}},{type:"Feature",id:"GA",properties:{"hc-group":"admin0","hc-middle-x":.27,"hc-middle-y":.45,"hc-key":"ga","hc-a2":"GA",name:"Gabon",labelrank:"4","country-abbrev":"Gabon",subregion:"Middle Africa","region-wb":"Sub-Saharan Africa","iso-a3":"GAB","iso-a2":"GA","woe-id":"23424822",continent:"Africa"},geometry:{type:"Polygon",coordinates:[[[4340,7149],[4390,7149],[4390,7188],[4391,7192],[4454,7187],[4453,7157],[4486,7160],[4493,7147],[4472,7110],[4493,7097],[4480,7035],[4426,7055],[4398,7041],[4407,6995],[4383,6988],[4322,7057],[4304,7098],[4323,7103],[4324,7135],[4340,7149]]]}},{type:"Feature",id:"IL",properties:{"hc-group":"admin0","hc-middle-x":.65,"hc-middle-y":.15,"hc-key":"il","hc-a2":"IL",name:"Israel",labelrank:"4","country-abbrev":"Isr.",subregion:"Western Asia","region-wb":"Middle East & North Africa","iso-a3":"ISR","iso-a2":"IL","woe-id":"23424852",continent:"Asia"},geometry:{type:"Polygon",coordinates:[[[5103,8140],[5121,8172],[5127,8199],[5139,8198],[5149,8209],[5152,8194],[5149,8187],[5143,8184],[5145,8155],[5140,8147],[5142,8141],[5141,8139],[5141,8138],[5140,8136],[5142,8133],[5135,8112],[5131,8083],[5129,8081],[5129,8081],[5126,8089],[5103,8140]]]}},{type:"Feature",id:"EG",properties:{"hc-group":"admin0","hc-middle-x":.5,"hc-middle-y":.77,"hc-key":"eg","hc-a2":"EG",name:"Egypt",labelrank:"2","country-abbrev":"Egypt",subregion:"Northern Africa","region-wb":"Middle East & North Africa","iso-a3":"EGY","iso-a2":"EG","woe-id":"23424802",continent:"Africa"},geometry:{type:"Polygon",coordinates:[[[5103,8140],[5126,8089],[5129,8081],[5112,8023],[5078,8051],[5052,8096],[5058,8064],[5091,8025],[5107,7987],[5160,7901],[5167,7866],[5207,7836],[5026,7836],[4824,7836],[4814,8071],[4803,8104],[4816,8152],[4886,8142],[4940,8125],[4981,8147],[5037,8132],[5103,8140]]]}},{type:"Feature",id:"NI",properties:{"hc-group":"admin0","hc-middle-x":.69,"hc-middle-y":.81,"hc-key":"ni","hc-a2":"NI",name:"Nicaragua",labelrank:"5","country-abbrev":"Nic.",subregion:"Central America","region-wb":"Latin America & Caribbean","iso-a3":"NIC","iso-a2":"NI","woe-id":"23424915",continent:"North America"},geometry:{type:"Polygon",coordinates:[[[1228,7479],[1169,7538],[1180,7541],[1200,7566],[1234,7573],[1259,7598],[1321,7607],[1289,7489],[1295,7474],[1272,7476],[1228,7479]]]}},{type:"Feature",id:"MW",properties:{"hc-group":"admin0","hc-middle-x":.36,"hc-middle-y":.51,"hc-key":"mw","hc-a2":"MW",name:"Malawi",labelrank:"6","country-abbrev":"Mal.",subregion:"Eastern Africa","region-wb":"Sub-Saharan Africa","iso-a3":"MWI","iso-a2":"MW","woe-id":"23424889",continent:"Africa"},geometry:{type:"MultiPolygon",coordinates:[[[[5157,6743],[5156,6744],[5156,6744],[5157,6743]]],[[[5151,6748],[5151,6749],[5150,6749],[5151,6748],[5151,6748]]],[[[5137,6799],[5134,6803],[5134,6803],[5137,6799]]],[[[5131,6805],[5131,6806],[5131,6806],[5131,6805]]],[[[5093,6809],[5109,6803],[5125,6799],[5137,6735],[5128,6713],[5135,6680],[5153,6675],[5184,6638],[5180,6592],[5158,6576],[5130,6597],[5141,6617],[5135,6646],[5112,6639],[5099,6659],[5086,6668],[5105,6707],[5102,6761],[5117,6771],[5093,6809]]]]}},{type:"Feature",id:"TM",properties:{"hc-group":"admin0","hc-middle-x":.31,"hc-middle-y":.38,"hc-key":"tm","hc-a2":"TM",name:"Turkmenistan",labelrank:"4","country-abbrev":"Turkm.",subregion:"Central Asia","region-wb":"Europe & Central Asia","iso-a3":"TKM","iso-a2":"TM","woe-id":"23424972",continent:"Asia"},geometry:{type:"Polygon",coordinates:[[[5748,8468],[5780,8465],[5778,8487],[5804,8479],[5794,8495],[5820,8516],[5862,8500],[5874,8470],[5935,8457],[5955,8425],[6063,8367],[6094,8360],[6096,8338],[6051,8334],[6038,8303],[5975,8266],[5941,8281],[5934,8312],[5907,8315],[5854,8349],[5802,8368],[5747,8362],[5703,8338],[5698,8389],[5680,8423],[5654,8426],[5655,8456],[5681,8445],[5710,8461],[5679,8492],[5636,8482],[5687,8500],[5733,8466],[5737,8466],[5740,8467],[5744,8468],[5748,8468]]]}},{type:"Feature",id:"KZ",properties:{"hc-group":"admin0","hc-middle-x":.62,"hc-middle-y":.51,"hc-key":"kz","hc-a2":"KZ",name:"Kazakhstan",labelrank:"3","country-abbrev":"Kaz.",subregion:"Central Asia","region-wb":"Europe & Central Asia","iso-a3":"KAZ","iso-a2":"KZ","woe-id":"-90",continent:"Asia"},geometry:{type:"Polygon",coordinates:[[[5733,8466],[5687,8500],[5636,8482],[5640,8514],[5615,8517],[5556,8577],[5586,8599],[5619,8601],[5633,8621],[5627,8650],[5570,8657],[5514,8631],[5471,8678],[5420,8699],[5425,8746],[5441,8766],[5471,8745],[5473,8770],[5524,8805],[5607,8801],[5682,8769],[5704,8786],[5767,8785],[5805,8769],[5851,8777],[5849,8798],[5806,8813],[5816,8839],[5853,8854],[5815,8878],[5935,8893],[6016,8913],[6017,8921],[6091,8924],[6112,8885],[6182,8880],[6208,8869],[6271,8896],[6272,8881],[6318,8858],[6406,8778],[6422,8794],[6451,8775],[6507,8784],[6577,8738],[6616,8738],[6644,8721],[6604,8699],[6609,8655],[6588,8647],[6532,8660],[6525,8605],[6463,8589],[6499,8527],[6489,8496],[6429,8519],[6329,8518],[6296,8531],[6281,8503],[6227,8517],[6203,8498],[6150,8469],[6142,8444],[6118,8464],[6079,8464],[6041,8519],[6009,8546],[5921,8538],[5853,8583],[5839,8618],[5819,8611],[5817,8615],[5813,8609],[5803,8606],[5727,8588],[5748,8468],[5740,8467],[5733,8466]]]}},{type:"Feature",id:"ZM",properties:{"hc-group":"admin0","hc-middle-x":.35,"hc-middle-y":.65,"hc-key":"zm","hc-a2":"ZM",name:"Zambia",labelrank:"3","country-abbrev":"Zambia",subregion:"Eastern Africa","region-wb":"Sub-Saharan Africa","iso-a3":"ZMB","iso-a2":"ZM","woe-id":"23425003",continent:"Africa"},geometry:{type:"Polygon",coordinates:[[[4949,6810],[4970,6833],[4962,6839],[5017,6848],[5032,6829],[5036,6836],[5063,6820],[5093,6809],[5117,6771],[5102,6761],[5105,6707],[5086,6668],[5099,6659],[5001,6627],[5006,6606],[4956,6592],[4952,6576],[4930,6566],[4912,6557],[4894,6530],[4884,6526],[4837,6535],[4804,6545],[4777,6540],[4733,6588],[4734,6692],[4800,6692],[4800,6761],[4810,6745],[4844,6751],[4845,6736],[4889,6724],[4905,6738],[4968,6677],[4988,6678],[4989,6719],[4964,6712],[4943,6742],[4955,6797],[4949,6810]]]}},{type:"Feature",id:"NC",properties:{"hc-group":"admin0","hc-middle-x":.56,"hc-middle-y":.72,"hc-key":"nc","hc-a2":"NC",name:"Northern Cyprus",labelrank:"6","country-abbrev":"N. Cy.",subregion:"Western Asia","region-wb":"Europe & Central Asia","iso-a3":"-99","iso-a2":"NC","woe-id":"-90",continent:"Asia"},geometry:{type:"MultiPolygon",coordinates:[[[[5084,8263],[5080,8262],[5077,8262],[5069,8268],[5047,8267],[5047,8267],[5047,8267],[5047,8267],[5047,8267],[5047,8267],[5104,8284],[5088,8263],[5084,8263]]],[[[5043,8267],[5044,8267],[5044,8266],[5043,8267]]]]}},{type:"Feature",id:"ZA",properties:{"hc-group":"admin0","hc-middle-x":.39,"hc-middle-y":.64,"hc-key":"za","hc-a2":"ZA",name:"South Africa",labelrank:"2","country-abbrev":"S.Af.",subregion:"Southern Africa","region-wb":"Sub-Saharan Africa","iso-a3":"ZAF","iso-a2":"ZA","woe-id":"23424942",continent:"Africa"},geometry:{type:"Polygon",coordinates:[[[5046,6239],[5053,6239],[5071,6239],[5051,6183],[5011,6150],[4983,6108],[4932,6061],[4874,6021],[4802,5999],[4731,6005],[4708,5994],[4637,5980],[4602,6010],[4583,6044],[4595,6080],[4568,6125],[4545,6183],[4564,6200],[4574,6178],[4628,6170],[4656,6188],[4660,6307],[4686,6262],[4681,6238],[4712,6238],[4747,6267],[4757,6290],[4814,6272],[4839,6279],[4849,6308],[4881,6323],[4887,6344],[4927,6376],[4964,6391],[4996,6386],[5026,6384],[5046,6318],[5042,6268],[5026,6275],[5005,6254],[5014,6228],[5046,6239]],[[4886,6151],[4888,6126],[4910,6114],[4956,6157],[4932,6183],[4886,6151]]]}},{type:"Feature",id:"LT",properties:{"hc-group":"admin0","hc-middle-x":.23,"hc-middle-y":.48,"hc-key":"lt","hc-a2":"LT",name:"Lithuania",labelrank:"5","country-abbrev":"Lith.",subregion:"Northern Europe","region-wb":"Europe & Central Asia","iso-a3":"LTU","iso-a2":"LT","woe-id":"23424875",continent:"Europe"},geometry:{type:"MultiPolygon",coordinates:[[[[4642,8923],[4637,8937],[4633,8950],[4662,8961],[4767,8952],[4796,8937],[4768,8892],[4711,8880],[4709,8887],[4688,8894],[4688,8911],[4642,8923]]],[[[4632,8924],[4636,8931],[4634,8924],[4632,8924]]]]}},{type:"Feature",id:"ET",properties:{"hc-group":"admin0","hc-middle-x":.45,"hc-middle-y":.58,"hc-key":"et","hc-a2":"ET",name:"Ethiopia",labelrank:"2","country-abbrev":"Eth.",subregion:"Eastern Africa","region-wb":"Sub-Saharan Africa","iso-a3":"ETH","iso-a2":"ET","woe-id":"23424808",continent:"Africa"},geometry:{type:"Polygon",coordinates:[[[5380,7486],[5377,7482],[5381,7479],[5386,7474],[5418,7476],[5409,7464],[5455,7410],[5553,7378],[5585,7378],[5488,7277],[5456,7279],[5388,7247],[5352,7257],[5312,7228],[5265,7235],[5223,7262],[5193,7268],[5154,7334],[5120,7367],[5098,7372],[5104,7393],[5127,7392],[5130,7426],[5146,7473],[5155,7468],[5181,7531],[5194,7532],[5206,7583],[5250,7603],[5346,7578],[5398,7524],[5379,7494],[5380,7486]]]}},{type:"Feature",id:"ER",properties:{"hc-group":"admin0","hc-middle-x":.31,"hc-middle-y":.18,"hc-key":"er","hc-a2":"ER",name:"Eritrea",labelrank:"4","country-abbrev":"Erit.",subregion:"Eastern Africa","region-wb":"Sub-Saharan Africa","iso-a3":"ERI","iso-a2":"ER","woe-id":"23424806",continent:"Africa"},geometry:{type:"Polygon",coordinates:[[[5398,7524],[5346,7578],[5250,7603],[5206,7583],[5202,7611],[5218,7675],[5269,7705],[5308,7611],[5357,7595],[5422,7532],[5408,7521],[5398,7524]]]}},{type:"Feature",id:"GH",properties:{"hc-group":"admin0","hc-middle-x":.79,"hc-middle-y":.69,"hc-key":"gh","hc-a2":"GH",name:"Ghana",labelrank:"3","country-abbrev":"Ghana",subregion:"Western Africa","region-wb":"Sub-Saharan Africa","iso-a3":"GHA","iso-a2":"GH","woe-id":"23424824",continent:"Africa"},geometry:{type:"Polygon",coordinates:[[[4058,7316],[3951,7272],[3918,7283],[3918,7284],[3923,7283],[3927,7285],[3914,7341],[3938,7385],[3932,7427],[3930,7476],[4014,7481],[4031,7451],[4036,7340],[4058,7316]]]}},{type:"Feature",id:"SI",properties:{"hc-group":"admin0","hc-middle-x":.52,"hc-middle-y":.57,"hc-key":"si","hc-a2":"SI",name:"Slovenia",labelrank:"6","country-abbrev":"Slo.",subregion:"Southern Europe","region-wb":"Europe & Central Asia","iso-a3":"SVN","iso-a2":"SI","woe-id":"23424945",continent:"Europe"},geometry:{type:"Polygon",coordinates:[[[4433,8604],[4433,8606],[4437,8607],[4425,8630],[4435,8638],[4461,8633],[4507,8649],[4513,8649],[4521,8637],[4495,8627],[4486,8603],[4433,8604]]]}},{type:"Feature",id:"JO",properties:{"hc-group":"admin0","hc-middle-x":.15,"hc-middle-y":.59,"hc-key":"jo","hc-a2":"JO",name:"Jordan",labelrank:"4","country-abbrev":"Jord.",subregion:"Western Asia","region-wb":"Middle East & North Africa","iso-a3":"JOR","iso-a2":"JO","woe-id":"23424860",continent:"Asia"},geometry:{type:"Polygon",coordinates:[[[5142,8133],[5145,8136],[5141,8138],[5141,8139],[5142,8141],[5145,8141],[5145,8155],[5143,8184],[5149,8187],[5183,8173],[5242,8208],[5253,8179],[5257,8167],[5190,8146],[5225,8114],[5166,8071],[5131,8076],[5132,8082],[5131,8083],[5135,8112],[5142,8133]]]}},{type:"Feature",id:"SY",properties:{"hc-group":"admin0","hc-middle-x":.3,"hc-middle-y":.53,"hc-key":"sy","hc-a2":"SY",name:"Syria",labelrank:"3","country-abbrev":"Syria",subregion:"Western Asia","region-wb":"Middle East & North Africa","iso-a3":"SYR","iso-a2":"SY","woe-id":"23424956",continent:"Asia"},geometry:{type:"Polygon",coordinates:[[[5242,8208],[5183,8173],[5149,8187],[5152,8194],[5149,8209],[5171,8235],[5150,8250],[5147,8275],[5145,8291],[5165,8321],[5263,8318],[5338,8337],[5343,8330],[5314,8311],[5314,8254],[5242,8208]]]}},{type:"Feature",id:"MC",properties:{"hc-group":"admin0","hc-middle-x":.5,"hc-middle-y":.67,"hc-key":"mc","hc-a2":"MC",name:"Monaco",labelrank:"6","country-abbrev":"Mco.",subregion:"Western Europe","region-wb":"Europe & Central Asia","iso-a3":"MCO","iso-a2":"MC","woe-id":"23424892",continent:"Europe"},geometry:{type:"Polygon",coordinates:[[[4247,8547],[4246,8546],[4245,8546],[4247,8548],[4247,8547]]]}},{type:"Feature",id:"AL",properties:{"hc-group":"admin0","hc-middle-x":.39,"hc-middle-y":.48,"hc-key":"al","hc-a2":"AL",name:"Albania",labelrank:"6","country-abbrev":"Alb.",subregion:"Southern Europe","region-wb":"Europe & Central Asia","iso-a3":"ALB","iso-a2":"AL","woe-id":"23424742",continent:"Europe"},geometry:{type:"MultiPolygon",coordinates:[[[[4667,8454],[4667,8453],[4667,8454],[4667,8454]]],[[[4616,8493],[4616,8497],[4617,8501],[4625,8511],[4637,8508],[4651,8497],[4653,8486],[4652,8468],[4657,8460],[4658,8455],[4660,8454],[4664,8455],[4667,8454],[4666,8454],[4668,8453],[4668,8452],[4666,8450],[4668,8450],[4667,8449],[4670,8447],[4669,8447],[4670,8447],[4652,8419],[4640,8414],[4617,8446],[4616,8485],[4616,8489],[4616,8493]]],[[[4616,8499],[4616,8499],[4616,8499],[4616,8499]]]]}},{type:"Feature",id:"UY",properties:{"hc-group":"admin0","hc-middle-x":.49,"hc-middle-y":.54,"hc-key":"uy","hc-a2":"UY",name:"Uruguay",labelrank:"4","country-abbrev":"Ury.",subregion:"South America","region-wb":"Latin America & Caribbean","iso-a3":"URY","iso-a2":"UY","woe-id":"23424979",continent:"South America"},geometry:{type:"Polygon",coordinates:[[[2341,6049],[2328,6034],[2332,6020],[2333,6017],[2338,6014],[2329,5992],[2295,5974],[2256,5974],[2200,5990],[2181,6007],[2181,6056],[2179,6074],[2191,6130],[2215,6133],[2245,6101],[2257,6108],[2341,6049]]]}},{type:"Feature",id:"CNM",properties:{"hc-group":"admin0","hc-middle-x":.69,"hc-middle-y":.51,"hc-key":"cnm","hc-a2":"CN",name:"Cyprus No Mans Area",labelrank:"9","country-abbrev":null,subregion:"Western Asia","region-wb":"Europe & Central Asia","iso-a3":"-99","iso-a2":null,"woe-id":"-99",continent:"Asia"},geometry:{type:"MultiPolygon",coordinates:[[[[5088,8263],[5088,8263],[5087,8263],[5084,8263],[5084,8263],[5088,8263]]],[[[5043,8267],[5043,8267],[5044,8266],[5044,8267],[5045,8267],[5044,8266],[5043,8267]]],[[[5047,8267],[5046,8267],[5047,8267],[5047,8267],[5047,8267],[5047,8267]]],[[[5077,8262],[5079,8261],[5078,8261],[5069,8266],[5047,8267],[5047,8267],[5069,8268],[5077,8262]]]]}},{type:"Feature",id:"MN",properties:{"hc-group":"admin0","hc-middle-x":.49,"hc-middle-y":.52,"hc-key":"mn","hc-a2":"MN",name:"Mongolia",labelrank:"3","country-abbrev":"Mong.",subregion:"Eastern Asia","region-wb":"East Asia & Pacific","iso-a3":"MNG","iso-a2":"MN","woe-id":"23424887",continent:"Asia"},geometry:{type:"Polygon",coordinates:[[[7568,8679],[7578,8682],[7573,8685],[7597,8685],[7652,8650],[7560,8631],[7542,8603],[7509,8601],[7488,8579],[7435,8591],[7425,8570],[7449,8545],[7387,8505],[7306,8499],[7263,8481],[7216,8482],[7145,8507],[6981,8514],[6937,8564],[6873,8586],[6790,8594],[6782,8639],[6749,8675],[6669,8704],[6658,8724],[6775,8780],[6835,8770],[6852,8752],[6937,8743],[6956,8768],[6936,8784],[6954,8821],[7063,8794],[7074,8772],[7122,8756],[7167,8767],[7252,8749],[7278,8729],[7346,8723],[7410,8738],[7437,8760],[7515,8746],[7503,8690],[7519,8676],[7568,8679]]]}},{type:"Feature",id:"RW",properties:{"hc-group":"admin0","hc-middle-x":.48,"hc-middle-y":.56,"hc-key":"rw","hc-a2":"RW",name:"Rwanda",labelrank:"3","country-abbrev":"Rwa.",subregion:"Eastern Africa","region-wb":"Sub-Saharan Africa","iso-a3":"RWA","iso-a2":"RW","woe-id":"23424937",continent:"Africa"},geometry:{type:"Polygon",coordinates:[[[4968,7028],[4964,7030],[4963,7036],[4980,7050],[4975,7062],[4979,7067],[4987,7071],[4998,7069],[5016,7082],[5028,7065],[5018,7038],[4997,7029],[4968,7028]]]}},{type:"Feature",id:"SX",properties:{"hc-group":"admin0","hc-middle-x":.5,"hc-middle-y":.5,"hc-key":"sx","hc-a2":"SX",name:"Somaliland",labelrank:"5","country-abbrev":"Solnd.",subregion:"Eastern Africa","region-wb":"Sub-Saharan Africa","iso-a3":"-99","iso-a2":"SX","woe-id":"-99",continent:"Africa"},geometry:{type:"Polygon",coordinates:[[[5585,7378],[5553,7378],[5455,7410],[5409,7464],[5418,7476],[5428,7492],[5462,7459],[5511,7472],[5533,7466],[5563,7482],[5613,7485],[5615,7426],[5585,7378]]]}},{type:"Feature",id:"SO",properties:{"hc-group":"admin0","hc-middle-x":.41,"hc-middle-y":.68,"hc-key":"so","hc-a2":"SO",name:"Somalia",labelrank:"6","country-abbrev":"Som.",subregion:"Eastern Africa","region-wb":"Sub-Saharan Africa","iso-a3":"SOM","iso-a2":"SO","woe-id":"-90",continent:"Africa"},geometry:{type:"Polygon",coordinates:[[[5585,7378],[5615,7426],[5613,7485],[5689,7504],[5677,7426],[5586,7262],[5524,7196],[5441,7137],[5377,7061],[5359,7088],[5359,7209],[5388,7247],[5456,7279],[5488,7277],[5585,7378]]]}},{type:"Feature",id:"BO",properties:{"hc-group":"admin0","hc-middle-x":.48,"hc-middle-y":.56,"hc-key":"bo","hc-a2":"BO",name:"Bolivia",labelrank:"3","country-abbrev":"Bolivia",subregion:"South America","region-wb":"Latin America & Caribbean","iso-a3":"BOL","iso-a2":"BO","woe-id":"23424762",continent:"South America"},geometry:{type:"MultiPolygon",coordinates:[[[[1779,6586],[1778,6592],[1784,6586],[1781,6587],[1779,6586]]],[[[1769,6544],[1763,6552],[1782,6576],[1796,6583],[1769,6609],[1782,6653],[1774,6670],[1785,6708],[1753,6759],[1795,6758],[1848,6793],[1886,6800],[1890,6752],[1924,6709],[1968,6703],[2010,6674],[2054,6666],[2069,6585],[2124,6583],[2129,6552],[2158,6522],[2142,6457],[2110,6486],[2025,6474],[2011,6445],[2003,6390],[1961,6397],[1951,6369],[1940,6391],[1886,6404],[1859,6371],[1836,6371],[1821,6421],[1801,6449],[1808,6481],[1789,6497],[1769,6544]]]]}},{type:"Feature",id:"CM",properties:{"hc-group":"admin0","hc-middle-x":.49,"hc-middle-y":.75,"hc-key":"cm","hc-a2":"CM",name:"Cameroon",labelrank:"3","country-abbrev":"Cam.",subregion:"Middle Africa","region-wb":"Sub-Saharan Africa","iso-a3":"CMR","iso-a2":"CM","woe-id":"23424785",continent:"Africa"},geometry:{type:"MultiPolygon",coordinates:[[[[4454,7187],[4391,7192],[4390,7188],[4346,7188],[4340,7193],[4334,7243],[4300,7274],[4309,7307],[4365,7350],[4389,7327],[4418,7389],[4497,7515],[4477,7544],[4485,7544],[4484,7538],[4491,7541],[4512,7494],[4510,7470],[4531,7443],[4482,7443],[4474,7432],[4515,7394],[4525,7363],[4489,7314],[4515,7240],[4546,7209],[4549,7190],[4548,7173],[4496,7189],[4454,7187]]],[[[4487,7544],[4487,7544],[4486,7544],[4487,7544]]]]}},{type:"Feature",id:"CG",properties:{"hc-group":"admin0","hc-middle-x":.16,"hc-middle-y":.86,"hc-key":"cg","hc-a2":"CG",name:"Republic of Congo",labelrank:"4","country-abbrev":"Rep. Congo",subregion:"Middle Africa","region-wb":"Sub-Saharan Africa","iso-a3":"COG","iso-a2":"CG","woe-id":"23424779",continent:"Africa"},geometry:{type:"Polygon",coordinates:[[[4447,6965],[4437,6973],[4412,6953],[4405,6967],[4383,6988],[4407,6995],[4398,7041],[4426,7055],[4480,7035],[4493,7097],[4472,7110],[4493,7147],[4486,7160],[4453,7157],[4454,7187],[4496,7189],[4548,7173],[4549,7190],[4561,7230],[4590,7238],[4628,7230],[4610,7187],[4600,7100],[4550,7047],[4550,7008],[4504,6959],[4490,6977],[4457,6957],[4447,6965]]]}},{type:"Feature",id:"EH",properties:{"hc-group":"admin0","hc-middle-x":.39,"hc-middle-y":.76,"hc-key":"eh","hc-a2":"EH",name:"Western Sahara",labelrank:"7","country-abbrev":"W. Sah.",subregion:"Northern Africa","region-wb":"Middle East & North Africa","iso-a3":"ESH","iso-a2":"EH","woe-id":"23424990",continent:"Africa"},geometry:{type:"MultiPolygon",coordinates:[[[[3470,7796],[3468,7799],[3471,7817],[3541,7818],[3562,7846],[3569,7882],[3621,7929],[3635,7955],[3635,7955],[3633,7884],[3601,7869],[3600,7814],[3473,7814],[3470,7796]]],[[[3743,8021],[3742,8009],[3742,7967],[3641,7967],[3641,7967],[3641,7967],[3656,7996],[3709,7995],[3739,8003],[3743,8021]]],[[[3641,7967],[3635,7955],[3635,7955],[3635,7967],[3641,7967],[3641,7967],[3641,7967]]]]}},{type:"Feature",id:"ME",properties:{"hc-group":"admin0","hc-middle-x":.43,"hc-middle-y":.48,"hc-key":"me","hc-a2":"ME",name:"Montenegro",labelrank:"6","country-abbrev":"Mont.",subregion:"Southern Europe","region-wb":"Europe & Central Asia","iso-a3":"MNE","iso-a2":"ME","woe-id":"20069817",continent:"Europe"},geometry:{type:"Polygon",coordinates:[[[4637,8508],[4625,8511],[4617,8501],[4616,8499],[4616,8499],[4609,8499],[4616,8493],[4616,8489],[4616,8485],[4598,8499],[4589,8503],[4587,8506],[4587,8508],[4586,8522],[4608,8540],[4621,8528],[4645,8517],[4635,8513],[4637,8508]]]}},{type:"Feature",id:"RS",properties:{"hc-group":"admin0","hc-middle-x":.69,"hc-middle-y":.73,"hc-key":"rs","hc-a2":"RS",name:"Republic of Serbia",labelrank:"5","country-abbrev":"Serb.",subregion:"Southern Europe","region-wb":"Europe & Central Asia","iso-a3":"SRB","iso-a2":"RS","woe-id":"-90",continent:"Europe"},geometry:{type:"Polygon",coordinates:[[[4645,8517],[4621,8528],[4608,8540],[4611,8584],[4600,8584],[4600,8592],[4594,8618],[4614,8626],[4635,8624],[4671,8583],[4714,8563],[4704,8549],[4725,8529],[4707,8500],[4694,8501],[4683,8498],[4689,8512],[4657,8531],[4645,8517]]]}},{type:"Feature",id:"BJ",properties:{"hc-group":"admin0","hc-middle-x":.25,"hc-middle-y":.94,"hc-key":"bj","hc-a2":"BJ",name:"Benin",labelrank:"5","country-abbrev":"Benin",subregion:"Western Africa","region-wb":"Sub-Saharan Africa","iso-a3":"BEN","iso-a2":"BJ","woe-id":"23424764",continent:"Africa"},geometry:{type:"Polygon",coordinates:[[[4108,7325],[4081,7322],[4073,7320],[4072,7413],[4049,7476],[4067,7492],[4097,7506],[4112,7522],[4137,7499],[4145,7463],[4110,7413],[4108,7325]]]}},{type:"Feature",id:"TG",properties:{"hc-group":"admin0","hc-middle-x":.62,"hc-middle-y":.49,"hc-key":"tg","hc-a2":"TG",name:"Togo",labelrank:"6","country-abbrev":"Togo",subregion:"Western Africa","region-wb":"Sub-Saharan Africa","iso-a3":"TGO","iso-a2":"TG","woe-id":"23424965",continent:"Africa"},geometry:{type:"Polygon",coordinates:[[[4073,7320],[4066,7319],[4058,7316],[4036,7340],[4031,7451],[4014,7481],[4035,7476],[4049,7476],[4072,7413],[4073,7320]]]}},{type:"Feature",id:"AF",properties:{"hc-group":"admin0","hc-middle-x":.32,"hc-middle-y":.55,"hc-key":"af","hc-a2":"AF",name:"Afghanistan",labelrank:"3","country-abbrev":"Afg.",subregion:"Southern Asia","region-wb":"South Asia","iso-a3":"AFG","iso-a2":"AF","woe-id":"23424739",continent:"Asia"},geometry:{type:"Polygon",coordinates:[[[6358,8334],[6343,8331],[6349,8327],[6288,8321],[6249,8295],[6268,8267],[6257,8230],[6223,8230],[6236,8206],[6214,8198],[6212,8161],[6175,8157],[6123,8128],[6123,8092],[6057,8077],[6006,8078],[5953,8093],[5979,8125],[5945,8146],[5930,8198],[5941,8281],[5975,8266],[6038,8303],[6051,8334],[6096,8338],[6120,8332],[6137,8333],[6183,8330],[6208,8344],[6218,8370],[6252,8356],[6259,8317],[6307,8342],[6358,8334]]]}},{type:"Feature",id:"UA",properties:{"hc-group":"admin0","hc-middle-x":.59,"hc-middle-y":.47,"hc-key":"ua","hc-a2":"UA",name:"Ukraine",labelrank:"3","country-abbrev":"Ukr.",subregion:"Eastern Europe","region-wb":"Europe & Central Asia","iso-a3":"UKR","iso-a2":"UA","woe-id":"23424976",continent:"Europe"},geometry:{type:"Polygon",coordinates:[[[4686,8699],[4691,8708],[4697,8721],[4699,8736],[4740,8769],[4722,8801],[4785,8814],[4892,8796],[4962,8820],[5022,8828],[5038,8792],[5065,8791],[5087,8763],[5138,8765],[5221,8735],[5220,8681],[5192,8681],[5177,8657],[5108,8642],[5077,8626],[5105,8592],[5058,8568],[5020,8609],[5047,8618],[4984,8628],[4965,8641],[4921,8604],[4924,8595],[4897,8596],[4878,8603],[4898,8635],[4933,8633],[4902,8682],[4857,8700],[4822,8694],[4782,8683],[4710,8684],[4701,8689],[4686,8699]]]}},{type:"Feature",id:"SK",properties:{"hc-group":"admin0","hc-middle-x":.5,"hc-middle-y":.39,"hc-key":"sk","hc-a2":"SK",name:"Slovakia",labelrank:"6","country-abbrev":"Svk.",subregion:"Eastern Europe","region-wb":"Europe & Central Asia","iso-a3":"SVK","iso-a2":"SK","woe-id":"23424877",continent:"Europe"},geometry:{type:"Polygon",coordinates:[[[4697,8721],[4691,8708],[4686,8699],[4636,8703],[4621,8690],[4558,8678],[4537,8686],[4527,8698],[4530,8706],[4564,8722],[4585,8735],[4675,8731],[4697,8721]]]}},{type:"Feature",id:"JK",properties:{"hc-group":"admin0","hc-middle-x":.47,"hc-middle-y":.58,"hc-key":"jk","hc-a2":"JK",name:"Siachen Glacier",labelrank:"5","country-abbrev":"Siachen",subregion:"Southern Asia","region-wb":"South Asia","iso-a3":"-99","iso-a2":"JK","woe-id":"23424928",continent:"Asia"},geometry:{type:"Polygon",coordinates:[[[6460,8277],[6439,8265],[6427,8282],[6447,8276],[6460,8277]]]}},{type:"Feature",id:"PK",properties:{"hc-group":"admin0","hc-middle-x":.51,"hc-middle-y":.58,"hc-key":"pk","hc-a2":"PK",name:"Pakistan",labelrank:"2","country-abbrev":"Pak.",subregion:"Southern Asia","region-wb":"South Asia","iso-a3":"PAK","iso-a2":"PK","woe-id":"23424922",continent:"Asia"},geometry:{type:"Polygon",coordinates:[[[6427,8282],[6439,8265],[6402,8245],[6356,8254],[6340,8240],[6354,8201],[6400,8168],[6377,8153],[6381,8134],[6350,8095],[6311,8031],[6266,8033],[6239,7993],[6262,7984],[6298,7924],[6265,7907],[6229,7909],[6209,7896],[6182,7904],[6145,7949],[6054,7940],[5993,7941],[5997,7974],[6036,7988],[6020,8040],[5991,8050],[5953,8093],[6006,8078],[6057,8077],[6123,8092],[6123,8128],[6175,8157],[6212,8161],[6214,8198],[6236,8206],[6223,8230],[6257,8230],[6268,8267],[6249,8295],[6288,8321],[6349,8327],[6397,8309],[6427,8282]]]}},{type:"Feature",id:"BG",properties:{"hc-group":"admin0","hc-middle-x":.72,"hc-middle-y":.51,"hc-key":"bg","hc-a2":"BG",name:"Bulgaria",labelrank:"4","country-abbrev":"Bulg.",subregion:"Eastern Europe","region-wb":"Europe & Central Asia","iso-a3":"BGR","iso-a2":"BG","woe-id":"23424771",continent:"Europe"},geometry:{type:"Polygon",coordinates:[[[4895,8547],[4872,8504],[4883,8489],[4853,8493],[4832,8480],[4799,8465],[4776,8476],[4727,8468],[4729,8481],[4707,8500],[4725,8529],[4704,8549],[4714,8563],[4734,8552],[4797,8544],[4846,8561],[4895,8547]]]}},{type:"Feature",id:"RO",properties:{"hc-group":"admin0","hc-middle-x":.5,"hc-middle-y":.51,"hc-key":"ro","hc-a2":"RO",name:"Romania",labelrank:"3","country-abbrev":"Rom.",subregion:"Eastern Europe","region-wb":"Europe & Central Asia","iso-a3":"ROU","iso-a2":"RO","woe-id":"23424933",continent:"Europe"},geometry:{type:"Polygon",coordinates:[[[4710,8684],[4782,8683],[4822,8694],[4834,8691],[4876,8641],[4878,8603],[4897,8596],[4924,8595],[4895,8566],[4895,8547],[4846,8561],[4797,8544],[4734,8552],[4714,8563],[4671,8583],[4635,8624],[4662,8630],[4684,8669],[4710,8684]]]}},{type:"Feature",id:"QA",properties:{"hc-group":"admin0","hc-middle-x":.47,"hc-middle-y":.49,"hc-key":"qa","hc-a2":"QA",name:"Qatar",labelrank:"5","country-abbrev":"Qatar",subregion:"Western Asia","region-wb":"Middle East & North Africa","iso-a3":"QAT","iso-a2":"QA","woe-id":"23424930",continent:"Asia"},geometry:{type:"Polygon",coordinates:[[[5649,7926],[5645,7950],[5670,7963],[5668,7922],[5667,7921],[5666,7920],[5666,7922],[5662,7922],[5655,7920],[5649,7926]]]}},{type:"Feature",id:"LI",properties:{"hc-group":"admin0","hc-middle-x":.59,"hc-middle-y":.53,"hc-key":"li","hc-a2":"LI",name:"Liechtenstein",labelrank:"6","country-abbrev":"Liech.",subregion:"Western Europe","region-wb":"Europe & Central Asia","iso-a3":"LIE","iso-a2":"LI","woe-id":"23424879",continent:"Europe"},geometry:{type:"Polygon",coordinates:[[[4308,8662],[4311,8657],[4310,8655],[4307,8655],[4308,8662]]]}},{type:"Feature",id:"AT",properties:{"hc-group":"admin0","hc-middle-x":.51,"hc-middle-y":.63,"hc-key":"at","hc-a2":"AT",name:"Austria",labelrank:"4","country-abbrev":"Aust.",subregion:"Western Europe","region-wb":"Europe & Central Asia","iso-a3":"AUT","iso-a2":"AT","woe-id":"23424750",continent:"Europe"},geometry:{type:"Polygon",coordinates:[[[4310,8655],[4311,8657],[4308,8662],[4311,8667],[4308,8670],[4312,8670],[4313,8671],[4352,8666],[4405,8675],[4404,8690],[4435,8711],[4470,8718],[4530,8706],[4527,8698],[4537,8686],[4520,8678],[4507,8649],[4461,8633],[4435,8638],[4396,8643],[4388,8656],[4336,8649],[4326,8648],[4310,8655]]]}},{type:"Feature",id:"SZ",properties:{"hc-group":"admin0","hc-middle-x":.52,"hc-middle-y":.45,"hc-key":"sz","hc-a2":"SZ",name:"Swaziland",labelrank:"4","country-abbrev":"Swz.",subregion:"Southern Africa","region-wb":"Sub-Saharan Africa","iso-a3":"SWZ","iso-a2":"SZ","woe-id":"23424993",continent:"Africa"},geometry:{type:"Polygon",coordinates:[[[5042,6268],[5044,6257],[5046,6239],[5014,6228],[5005,6254],[5026,6275],[5042,6268]]]}},{type:"Feature",id:"HU",properties:{"hc-group":"admin0","hc-middle-x":.3,"hc-middle-y":.59,"hc-key":"hu","hc-a2":"HU",name:"Hungary",labelrank:"5","country-abbrev":"Hun.",subregion:"Eastern Europe","region-wb":"Europe & Central Asia","iso-a3":"HUN","iso-a2":"HU","woe-id":"23424844",continent:"Europe"},geometry:{type:"Polygon",coordinates:[[[4635,8624],[4614,8626],[4594,8618],[4547,8619],[4521,8637],[4513,8649],[4507,8649],[4520,8678],[4537,8686],[4558,8678],[4621,8690],[4636,8703],[4686,8699],[4701,8689],[4710,8684],[4684,8669],[4662,8630],[4635,8624]]]}},{type:"Feature",id:"NE",properties:{"hc-group":"admin0","hc-middle-x":.58,"hc-middle-y":.45,"hc-key":"ne","hc-a2":"NE",name:"Niger",labelrank:"3","country-abbrev":"Niger",subregion:"Western Africa","region-wb":"Sub-Saharan Africa","iso-a3":"NER","iso-a2":"NE","woe-id":"23424906",continent:"Africa"},geometry:{type:"Polygon",coordinates:[[[4404,7886],[4453,7875],[4477,7856],[4501,7869],[4509,7819],[4535,7782],[4528,7767],[4521,7670],[4457,7587],[4462,7565],[4425,7544],[4392,7554],[4349,7550],[4333,7536],[4274,7553],[4245,7542],[4199,7571],[4154,7557],[4137,7499],[4112,7522],[4097,7506],[4091,7529],[4052,7543],[4027,7604],[4063,7616],[4133,7619],[4155,7653],[4156,7743],[4207,7753],[4261,7799],[4404,7886]]]}},{type:"Feature",id:"LU",properties:{"hc-group":"admin0","hc-middle-x":.47,"hc-middle-y":.59,"hc-key":"lu","hc-a2":"LU",name:"Luxembourg",labelrank:"6","country-abbrev":"Lux.",subregion:"Western Europe","region-wb":"Europe & Central Asia","iso-a3":"LUX","iso-a2":"LU","woe-id":"23424881",continent:"Europe"},geometry:{type:"Polygon",coordinates:[[[4210,8734],[4199,8733],[4193,8736],[4191,8748],[4203,8755],[4214,8745],[4210,8734]]]}},{type:"Feature",id:"AD",properties:{"hc-group":"admin0","hc-middle-x":.52,"hc-middle-y":.51,"hc-key":"ad","hc-a2":"AD",name:"Andorra",labelrank:"6","country-abbrev":"And.",subregion:"Southern Europe","region-wb":"Europe & Central Asia","iso-a3":"AND","iso-a2":"AD","woe-id":"23424744",continent:"Europe"},geometry:{type:"Polygon",coordinates:[[[4064,8509],[4073,8510],[4072,8506],[4066,8504],[4064,8509]]]}},{type:"Feature",id:"CI",properties:{"hc-group":"admin0","hc-middle-x":.5,"hc-middle-y":.52,"hc-key":"ci","hc-a2":"CI",name:"Ivory Coast",labelrank:"3","country-abbrev":"I.C.",subregion:"Western Africa","region-wb":"Sub-Saharan Africa","iso-a3":"CIV","iso-a2":"CI","woe-id":"23424854",continent:"Africa"},geometry:{type:"MultiPolygon",coordinates:[[[[3918,7283],[3913,7284],[3918,7284],[3918,7283]]],[[[3773,7259],[3776,7308],[3738,7329],[3743,7364],[3752,7394],[3770,7391],[3759,7449],[3792,7449],[3816,7467],[3840,7458],[3867,7433],[3915,7441],[3932,7427],[3938,7385],[3914,7341],[3927,7285],[3828,7281],[3773,7259]]]]}},{type:"Feature",id:"LR",properties:{"hc-group":"admin0","hc-middle-x":.88,"hc-middle-y":.71,"hc-key":"lr","hc-a2":"LR",name:"Liberia",labelrank:"4","country-abbrev":"Liberia",subregion:"Western Africa","region-wb":"Sub-Saharan Africa","iso-a3":"LBR","iso-a2":"LR","woe-id":"23424876",continent:"Africa"},geometry:{type:"Polygon",coordinates:[[[3743,7364],[3738,7329],[3776,7308],[3773,7259],[3717,7285],[3645,7343],[3673,7371],[3684,7394],[3710,7390],[3722,7352],[3743,7364]]]}},{type:"Feature",id:"SL",properties:{"hc-group":"admin0","hc-middle-x":.17,"hc-middle-y":.78,"hc-key":"sl","hc-a2":"SL",name:"Sierra Leone",labelrank:"4","country-abbrev":"S.L.",subregion:"Western Africa","region-wb":"Sub-Saharan Africa","iso-a3":"SLE","iso-a2":"SL","woe-id":"23424946",continent:"Africa"},geometry:{type:"Polygon",coordinates:[[[3684,7394],[3673,7371],[3645,7343],[3597,7364],[3586,7412],[3612,7439],[3653,7443],[3684,7394]]]}},{type:"Feature",id:"BN",properties:{"hc-group":"admin0","hc-middle-x":.32,"hc-middle-y":.34,"hc-key":"bn","hc-a2":"BN",name:"Brunei",labelrank:"6","country-abbrev":"Brunei",subregion:"South-Eastern Asia","region-wb":"East Asia & Pacific","iso-a3":"BRN","iso-a2":"BN","woe-id":"23424773",continent:"Asia"},geometry:{type:"MultiPolygon",coordinates:[[[[7778,7274],[7781,7275],[7781,7277],[7789,7258],[7778,7274]]],[[[7744,7267],[7761,7270],[7776,7277],[7764,7248],[7744,7267]]]]}},{type:"Feature",id:"BE",properties:{"hc-group":"admin0","hc-middle-x":.52,"hc-middle-y":.37,"hc-key":"be","hc-a2":"BE",name:"Belgium",labelrank:"2","country-abbrev":"Belg.",subregion:"Western Europe","region-wb":"Europe & Central Asia","iso-a3":"BEL","iso-a2":"BE","woe-id":"23424757",continent:"Europe"},geometry:{type:"Polygon",coordinates:[[[4203,8755],[4191,8748],[4193,8736],[4143,8751],[4095,8787],[4113,8795],[4119,8796],[4133,8791],[4145,8796],[4147,8794],[4146,8796],[4169,8800],[4199,8776],[4210,8761],[4203,8755]]]}},{type:"Feature",id:"IQ",properties:{"hc-group":"admin0","hc-middle-x":.46,"hc-middle-y":.43,"hc-key":"iq","hc-a2":"IQ",name:"Iraq",labelrank:"3","country-abbrev":"Iraq",subregion:"Western Asia","region-wb":"Middle East & North Africa","iso-a3":"IRQ","iso-a2":"IQ","woe-id":"23424855",continent:"Asia"},geometry:{type:"Polygon",coordinates:[[[5561,8096],[5548,8099],[5542,8097],[5516,8096],[5500,8068],[5441,8071],[5353,8133],[5298,8160],[5257,8167],[5253,8179],[5242,8208],[5314,8254],[5314,8311],[5343,8330],[5353,8338],[5418,8331],[5439,8293],[5472,8287],[5448,8227],[5480,8194],[5518,8176],[5531,8130],[5561,8096]]]}},{type:"Feature",id:"GE",properties:{"hc-group":"admin0","hc-middle-x":.3,"hc-middle-y":.43,"hc-key":"ge","hc-a2":"GE",name:"Georgia",labelrank:"5","country-abbrev":"Geo.",subregion:"Western Asia","region-wb":"Europe & Central Asia","iso-a3":"GEO","iso-a2":"GE","woe-id":"23424823",continent:"Asia"},geometry:{type:"Polygon",coordinates:[[[5409,8467],[5384,8465],[5361,8461],[5340,8476],[5301,8474],[5295,8511],[5246,8535],[5334,8528],[5371,8508],[5398,8514],[5450,8486],[5456,8459],[5409,8467]]]}},{type:"Feature",id:"GM",properties:{"hc-group":"admin0","hc-middle-x":.51,"hc-middle-y":.51,"hc-key":"gm","hc-a2":"GM",name:"Gambia",labelrank:"6","country-abbrev":"Gambia",subregion:"Western Africa","region-wb":"Sub-Saharan Africa","iso-a3":"GMB","iso-a2":"GM","woe-id":"23424821",continent:"Africa"},geometry:{type:"Polygon",coordinates:[[[3475,7544],[3472,7553],[3481,7561],[3536,7567],[3505,7547],[3475,7544]]]}},{type:"Feature",id:"TD",properties:{"hc-group":"admin0","hc-middle-x":.46,"hc-middle-y":.69,"hc-key":"td","hc-a2":"TD",name:"Chad",labelrank:"3","country-abbrev":"Chad",subregion:"Middle Africa","region-wb":"Sub-Saharan Africa","iso-a3":"TCD","iso-a2":"TD","woe-id":"23424777",continent:"Africa"},geometry:{type:"Polygon",coordinates:[[[4491,7541],[4500,7544],[4487,7544],[4486,7544],[4484,7546],[4485,7544],[4477,7544],[4462,7565],[4457,7587],[4521,7670],[4528,7767],[4535,7782],[4509,7819],[4501,7869],[4533,7883],[4794,7754],[4798,7631],[4769,7630],[4752,7579],[4737,7567],[4742,7533],[4764,7474],[4751,7476],[4686,7415],[4643,7411],[4626,7380],[4567,7364],[4525,7363],[4515,7394],[4474,7432],[4482,7443],[4531,7443],[4510,7470],[4512,7494],[4491,7541]]]}},{type:"Feature",id:"NG",properties:{"hc-group":"admin0","hc-middle-x":.28,"hc-middle-y":.36,"hc-key":"ng","hc-a2":"NG",name:"Nigeria",labelrank:"2","country-abbrev":"Nigeria",subregion:"Western Africa","region-wb":"Sub-Saharan Africa","iso-a3":"NGA","iso-a2":"NG","woe-id":"23424908",continent:"Africa"},geometry:{type:"Polygon",coordinates:[[[4462,7565],[4477,7544],[4497,7515],[4418,7389],[4389,7327],[4365,7350],[4309,7307],[4300,7274],[4222,7257],[4202,7268],[4163,7325],[4108,7325],[4110,7413],[4145,7463],[4137,7499],[4154,7557],[4199,7571],[4245,7542],[4274,7553],[4333,7536],[4349,7550],[4392,7554],[4425,7544],[4462,7565]]]}},{type:"Feature",id:"KV",properties:{"hc-group":"admin0","hc-middle-x":.52,"hc-middle-y":.49,"hc-key":"kv","hc-a2":"KV",name:"Kosovo",labelrank:"6","country-abbrev":"Kos.",subregion:"Southern Europe","region-wb":"Europe & Central Asia","iso-a3":"-99","iso-a2":"KV","woe-id":"-90",continent:"Europe"},geometry:{type:"Polygon",coordinates:[[[4653,8486],[4651,8497],[4637,8508],[4635,8513],[4645,8517],[4657,8531],[4689,8512],[4683,8498],[4669,8496],[4653,8486]]]}},{type:"Feature",id:"LB",properties:{"hc-group":"admin0","hc-middle-x":.4,"hc-middle-y":.59,"hc-key":"lb","hc-a2":"LB",name:"Lebanon",labelrank:"5","country-abbrev":"Leb.",subregion:"Western Asia","region-wb":"Middle East & North Africa","iso-a3":"LBN","iso-a2":"LB","woe-id":"23424873",continent:"Asia"},geometry:{type:"Polygon",coordinates:[[[5127,8199],[5140,8225],[5150,8250],[5171,8235],[5149,8209],[5139,8198],[5127,8199]]]}},{type:"Feature",id:"DJ",properties:{"hc-group":"admin0","hc-middle-x":.56,"hc-middle-y":.54,"hc-key":"dj","hc-a2":"DJ",name:"Djibouti",labelrank:"5","country-abbrev":"Dji.",subregion:"Eastern Africa","region-wb":"Middle East & North Africa","iso-a3":"DJI","iso-a2":"DJ","woe-id":"23424797",continent:"Africa"},geometry:{type:"Polygon",coordinates:[[[5418,7476],[5386,7474],[5381,7479],[5384,7483],[5380,7486],[5379,7494],[5398,7524],[5408,7521],[5422,7532],[5431,7509],[5428,7492],[5418,7476]]]}},{type:"Feature",id:"BI",properties:{"hc-group":"admin0","hc-middle-x":.57,"hc-middle-y":.47,"hc-key":"bi","hc-a2":"BI",name:"Burundi",labelrank:"6","country-abbrev":"Bur.",subregion:"Eastern Africa","region-wb":"Sub-Saharan Africa","iso-a3":"BDI","iso-a2":"BI","woe-id":"23424774",continent:"Africa"},geometry:{type:"Polygon",coordinates:[[[4989,6971],[4980,6990],[4974,7008],[4975,7017],[4968,7028],[4997,7029],[5018,7038],[5027,7011],[4989,6971]]]}},{type:"Feature",id:"SR",properties:{"hc-group":"admin0","hc-middle-x":.82,"hc-middle-y":.19,"hc-key":"sr","hc-a2":"SR",name:"Suriname",labelrank:"4","country-abbrev":"Sur.",subregion:"South America","region-wb":"Latin America & Caribbean","iso-a3":"SUR","iso-a2":"SR","woe-id":"23424913",continent:"South America"},geometry:{type:"Polygon",coordinates:[[[2173,7180],[2122,7253],[2150,7296],[2160,7313],[2255,7307],[2250,7292],[2240,7277],[2255,7230],[2234,7193],[2190,7199],[2173,7180]]]}},{type:"Feature",id:"SN",properties:{"hc-group":"admin0","hc-middle-x":.26,"hc-middle-y":.55,"hc-key":"sn","hc-a2":"SN",name:"Senegal",labelrank:"3","country-abbrev":"Sen.",subregion:"Western Africa","region-wb":"Sub-Saharan Africa","iso-a3":"SEN","iso-a2":"SN","woe-id":"23424943",continent:"Africa"},geometry:{type:"Polygon",coordinates:[[[3573,7531],[3525,7531],[3475,7520],[3473,7536],[3475,7544],[3505,7547],[3536,7567],[3481,7561],[3460,7597],[3483,7634],[3490,7655],[3555,7660],[3621,7600],[3626,7565],[3649,7522],[3617,7519],[3573,7531]]]}},{type:"Feature",id:"GN",properties:{"hc-group":"admin0","hc-middle-x":.56,"hc-middle-y":.38,"hc-key":"gn","hc-a2":"GN",name:"Guinea",labelrank:"3","country-abbrev":"Gin.",subregion:"Western Africa","region-wb":"Sub-Saharan Africa","iso-a3":"GIN","iso-a2":"GN","woe-id":"23424835",continent:"Africa"},geometry:{type:"Polygon",coordinates:[[[3573,7531],[3617,7519],[3649,7522],[3671,7505],[3721,7525],[3747,7488],[3759,7449],[3770,7391],[3752,7394],[3743,7364],[3722,7352],[3710,7390],[3684,7394],[3653,7443],[3612,7439],[3586,7412],[3568,7439],[3530,7475],[3541,7493],[3573,7500],[3573,7531]]]}},{type:"Feature",id:"ZW",properties:{"hc-group":"admin0","hc-middle-x":.62,"hc-middle-y":.52,"hc-key":"zw","hc-a2":"ZW",name:"Zimbabwe",labelrank:"3","country-abbrev":"Zimb.",subregion:"Eastern Africa","region-wb":"Sub-Saharan Africa","iso-a3":"ZWE","iso-a2":"ZW","woe-id":"23425004",continent:"Africa"},geometry:{type:"Polygon",coordinates:[[[4837,6535],[4884,6526],[4894,6530],[4930,6566],[4931,6566],[4952,6576],[4956,6592],[5006,6606],[5088,6571],[5085,6462],[5064,6421],[5026,6384],[4996,6386],[4964,6391],[4923,6411],[4913,6446],[4864,6479],[4837,6535]]]}},{type:"Feature",id:"PL",properties:{"hc-group":"admin0","hc-middle-x":.5,"hc-middle-y":.47,"hc-key":"pl","hc-a2":"PL",name:"Poland",labelrank:"3","country-abbrev":"Pol.",subregion:"Eastern Europe","region-wb":"Europe & Central Asia","iso-a3":"POL","iso-a2":"PL","woe-id":"23424923",continent:"Europe"},geometry:{type:"Polygon",coordinates:[[[4596,8897],[4589,8891],[4600,8896],[4686,8893],[4688,8894],[4709,8887],[4711,8880],[4726,8839],[4707,8826],[4722,8801],[4740,8769],[4699,8736],[4697,8721],[4675,8731],[4585,8735],[4533,8764],[4461,8779],[4453,8836],[4437,8845],[4440,8872],[4450,8877],[4438,8878],[4437,8879],[4438,8880],[4556,8910],[4595,8897],[4596,8897]]]}},{type:"Feature",id:"MK",properties:{"hc-group":"admin0","hc-middle-x":.48,"hc-middle-y":.44,"hc-key":"mk","hc-a2":"MK",name:"Macedonia",labelrank:"6","country-abbrev":"Mkd.",subregion:"Southern Europe","region-wb":"Europe & Central Asia","iso-a3":"MKD","iso-a2":"MK","woe-id":"23424890",continent:"Europe"},geometry:{type:"MultiPolygon",coordinates:[[[[4668,8453],[4668,8453],[4668,8452],[4668,8453]]],[[[4707,8500],[4729,8481],[4727,8468],[4696,8460],[4672,8452],[4667,8458],[4667,8454],[4667,8454],[4667,8454],[4664,8455],[4660,8454],[4663,8461],[4657,8460],[4652,8468],[4653,8486],[4669,8496],[4683,8498],[4694,8501],[4707,8500]]]]}},{type:"Feature",id:"PY",properties:{"hc-group":"admin0","hc-middle-x":.38,"hc-middle-y":.39,"hc-key":"py","hc-a2":"PY",name:"Paraguay",labelrank:"4","country-abbrev":"Para.",subregion:"South America","region-wb":"Latin America & Caribbean","iso-a3":"PRY","iso-a2":"PY","woe-id":"23424917",continent:"South America"},geometry:{type:"Polygon",coordinates:[[[2278,6330],[2275,6318],[2271,6285],[2272,6282],[2271,6281],[2268,6246],[2240,6220],[2149,6224],[2176,6285],[2093,6332],[2061,6338],[2003,6390],[2011,6445],[2025,6474],[2110,6486],[2142,6457],[2155,6432],[2153,6395],[2204,6395],[2230,6377],[2240,6334],[2278,6330]]]}},{type:"Feature",id:"BY",properties:{"hc-group":"admin0","hc-middle-x":.5,"hc-middle-y":.5,"hc-key":"by","hc-a2":"BY",name:"Belarus",labelrank:"4","country-abbrev":"Bela.",subregion:"Eastern Europe","region-wb":"Europe & Central Asia","iso-a3":"BLR","iso-a2":"BY","woe-id":"23424765",continent:"Europe"},geometry:{type:"Polygon",coordinates:[[[4722,8801],[4707,8826],[4726,8839],[4711,8880],[4768,8892],[4796,8937],[4825,8941],[4839,8952],[4922,8934],[4955,8875],[4985,8864],[4943,8850],[4962,8820],[4892,8796],[4785,8814],[4722,8801]]]}},{type:"Feature",id:"LV",properties:{"hc-group":"admin0","hc-middle-x":.1,"hc-middle-y":.39,"hc-key":"lv","hc-a2":"LV",name:"Latvia",labelrank:"5","country-abbrev":"Lat.",subregion:"Northern Europe","region-wb":"Europe & Central Asia","iso-a3":"LVA","iso-a2":"LV","woe-id":"23424874",continent:"Europe"},geometry:{type:"Polygon",coordinates:[[[4839,8952],[4825,8941],[4796,8937],[4767,8952],[4662,8961],[4633,8950],[4631,8975],[4648,8999],[4673,9005],[4707,8979],[4721,9009],[4749,9015],[4786,8997],[4811,8997],[4821,8975],[4839,8952]]]}},{type:"Feature",id:"BF",properties:{"hc-group":"admin0","hc-middle-x":.6,"hc-middle-y":.44,"hc-key":"bf","hc-a2":"BF",name:"Burkina Faso",labelrank:"3","country-abbrev":"B.F.",subregion:"Western Africa","region-wb":"Sub-Saharan Africa","iso-a3":"BFA","iso-a2":"BF","woe-id":"23424978",continent:"Africa"},geometry:{type:"Polygon",coordinates:[[[4049,7476],[4035,7476],[4014,7481],[3930,7476],[3932,7427],[3915,7441],[3867,7433],[3840,7458],[3851,7507],[3871,7514],[3887,7555],[3914,7551],[3927,7576],[3951,7579],[3996,7610],[4027,7604],[4052,7543],[4091,7529],[4097,7506],[4067,7492],[4049,7476]]]}},{type:"Feature",id:"NA",properties:{"hc-group":"admin0","hc-middle-x":.42,"hc-middle-y":.4,"hc-key":"na","hc-a2":"NA",name:"Namibia",labelrank:"3","country-abbrev":"Nam.",subregion:"Southern Africa","region-wb":"Sub-Saharan Africa","iso-a3":"NAM","iso-a2":"NA","woe-id":"23424987",continent:"Africa"},geometry:{type:"Polygon",coordinates:[[[4777,6540],[4804,6545],[4837,6535],[4782,6513],[4773,6528],[4698,6518],[4695,6399],[4663,6397],[4660,6307],[4656,6188],[4628,6170],[4574,6178],[4564,6200],[4545,6183],[4508,6223],[4488,6314],[4483,6388],[4403,6524],[4401,6553],[4446,6563],[4471,6548],[4617,6548],[4627,6537],[4693,6527],[4777,6540]]]}},{type:"Feature",id:"LA",properties:{"hc-group":"admin0","hc-middle-x":.49,"hc-middle-y":.32,"hc-key":"la","hc-a2":"LA",name:"Laos",labelrank:"4","country-abbrev":"Laos",subregion:"South-Eastern Asia","region-wb":"East Asia & Pacific","iso-a3":"LAO","iso-a2":"LA","woe-id":"23424872",continent:"Asia"},geometry:{type:"Polygon",coordinates:[[[7511,7597],[7489,7585],[7436,7586],[7446,7631],[7415,7657],[7414,7684],[7384,7716],[7352,7706],[7322,7712],[7295,7688],[7290,7756],[7265,7755],[7250,7781],[7266,7813],[7279,7821],[7298,7808],[7287,7844],[7306,7849],[7337,7822],[7345,7799],[7375,7802],[7408,7773],[7375,7748],[7405,7731],[7471,7672],[7514,7616],[7511,7597]]]}},{type:"Feature",id:"EC",properties:{"hc-group":"admin0","hc-middle-x":.21,"hc-middle-y":.4,"hc-key":"ec","hc-a2":"EC",name:"Ecuador",labelrank:"3","country-abbrev":"Ecu.",subregion:"South America","region-wb":"Latin America & Caribbean","iso-a3":"ECU","iso-a2":"EC","woe-id":"23424801",continent:"South America"},geometry:{type:"Polygon",coordinates:[[[1443,7164],[1487,7138],[1525,7132],[1558,7113],[1549,7066],[1513,7033],[1459,7005],[1437,6953],[1389,6983],[1394,7006],[1412,7030],[1375,7041],[1374,7082],[1402,7118],[1401,7141],[1443,7164]]]}},{type:"Feature",id:"CO",properties:{"hc-group":"admin0","hc-middle-x":.49,"hc-middle-y":.55,"hc-key":"co","hc-a2":"CO",name:"Colombia",labelrank:"2","country-abbrev":"Col.",subregion:"South America","region-wb":"Latin America & Caribbean","iso-a3":"COL","iso-a2":"CO","woe-id":"23424787",continent:"South America"},geometry:{type:"Polygon",coordinates:[[[1558,7113],[1525,7132],[1487,7138],[1443,7164],[1447,7188],[1475,7206],[1500,7243],[1489,7319],[1477,7353],[1502,7376],[1496,7400],[1510,7396],[1554,7426],[1560,7463],[1606,7488],[1633,7486],[1693,7524],[1698,7504],[1677,7498],[1644,7458],[1639,7421],[1658,7390],[1666,7348],[1730,7345],[1752,7317],[1816,7319],[1802,7265],[1820,7229],[1802,7211],[1823,7195],[1833,7157],[1818,7185],[1791,7173],[1736,7173],[1729,7111],[1750,7070],[1734,6978],[1708,6993],[1730,7028],[1702,7044],[1654,7037],[1627,7044],[1612,7076],[1558,7113]]]}},{type:"Feature",id:"ML",properties:{"hc-group":"admin0","hc-middle-x":.61,"hc-middle-y":.38,"hc-key":"ml","hc-a2":"ML",name:"Mali",labelrank:"3","country-abbrev":"Mali",subregion:"Western Africa","region-wb":"Sub-Saharan Africa","iso-a3":"MLI","iso-a2":"ML","woe-id":"23424891",continent:"Africa"},geometry:{type:"Polygon",coordinates:[[[3840,7458],[3816,7467],[3792,7449],[3759,7449],[3747,7488],[3721,7525],[3671,7505],[3649,7522],[3626,7565],[3621,7600],[3639,7625],[3672,7621],[3841,7623],[3808,7934],[3865,7934],[4057,7807],[4081,7778],[4124,7764],[4120,7742],[4156,7743],[4155,7653],[4133,7619],[4063,7616],[4027,7604],[3996,7610],[3951,7579],[3927,7576],[3914,7551],[3887,7555],[3871,7514],[3851,7507],[3840,7458]]]}},{type:"Feature",id:"CF",properties:{"hc-group":"admin0","hc-middle-x":.57,"hc-middle-y":.43,"hc-key":"cf","hc-a2":"CF",name:"Central African Republic",labelrank:"4","country-abbrev":"C.A.R.",subregion:"Middle Africa","region-wb":"Sub-Saharan Africa","iso-a3":"CAF","iso-a2":"CF","woe-id":"23424792",continent:"Africa"},geometry:{type:"Polygon",coordinates:[[[4628,7230],[4590,7238],[4561,7230],[4549,7190],[4546,7209],[4515,7240],[4489,7314],[4525,7363],[4567,7364],[4626,7380],[4643,7411],[4686,7415],[4751,7476],[4764,7474],[4790,7439],[4786,7404],[4808,7401],[4847,7357],[4881,7334],[4883,7315],[4916,7283],[4855,7292],[4755,7254],[4692,7261],[4664,7285],[4625,7258],[4628,7230]]]}},{type:"Feature",id:"BT",properties:{"hc-group":"admin0","hc-middle-x":.52,"hc-middle-y":.64,"hc-key":"bt","hc-a2":"BT",name:"Bhutan",labelrank:"5","country-abbrev":"Bhutan",subregion:"Southern Asia","region-wb":"South Asia","iso-a3":"BTN","iso-a2":"BT","woe-id":"23424770",continent:"Asia"},geometry:{type:"Polygon",coordinates:[[[6942,8024],[6961,7997],[6890,7990],[6857,8010],[6894,8044],[6942,8024]]]}},{type:"Feature",id:"KG",properties:{"hc-group":"admin0","hc-middle-x":.49,"hc-middle-y":.43,"hc-key":"kg","hc-a2":"KG",name:"Kyrgyzstan",labelrank:"4","country-abbrev":"Kgz.",subregion:"Central Asia","region-wb":"Europe & Central Asia","iso-a3":"KGZ","iso-a2":"KG","woe-id":"23424864",continent:"Asia"},geometry:{type:"Polygon",coordinates:[[[6305,8406],[6264,8398],[6237,8412],[6170,8409],[6187,8431],[6217,8432],[6240,8429],[6280,8450],[6233,8472],[6225,8461],[6184,8476],[6203,8498],[6227,8517],[6281,8503],[6296,8531],[6329,8518],[6429,8519],[6489,8496],[6432,8458],[6392,8455],[6312,8426],[6305,8406]],[[6209,8420],[6205,8421],[6208,8417],[6212,8419],[6209,8420]],[[6244,8421],[6244,8424],[6241,8423],[6242,8422],[6244,8421]],[[6225,8426],[6218,8428],[6221,8421],[6227,8421],[6225,8426]]]}},{type:"Feature",id:"AU",properties:{"hc-group":"admin0","hc-middle-x":.59,"hc-middle-y":.44,"hc-key":"au","hc-a2":"AU",name:"Australia",labelrank:"2","country-abbrev":"Auz.",subregion:"Australia and New Zealand","region-wb":"East Asia & Pacific","iso-a3":"AUS","iso-a2":"AU","woe-id":"-90",continent:"Oceania"},geometry:{type:"MultiPolygon",coordinates:[[[[8734,6583],[8751,6540],[8754,6493],[8827,6452],[8835,6389],[8871,6375],[8866,6360],[8892,6331],[8910,6293],[8935,6299],[8919,6273],[8920,6220],[8909,6173],[8839,6056],[8811,6041],[8725,5943],[8700,5891],[8644,5880],[8575,5850],[8530,5858],[8539,5878],[8482,5846],[8453,5862],[8403,5872],[8384,5901],[8393,5939],[8379,5955],[8325,5937],[8301,5947],[8348,5948],[8373,5981],[8365,6001],[8342,5967],[8315,5963],[8374,6033],[8356,6033],[8280,5974],[8277,6009],[8255,6033],[8258,6056],[8201,6069],[8172,6088],[8102,6081],[8043,6062],[8008,6063],[7934,6033],[7909,6007],[7798,6008],[7739,5976],[7698,5970],[7664,5978],[7638,6002],[7667,6028],[7681,6082],[7669,6129],[7675,6153],[7657,6247],[7673,6274],[7658,6315],[7676,6379],[7757,6428],[7817,6441],[7926,6475],[7978,6523],[7977,6552],[8005,6575],[8020,6544],[8028,6589],[8053,6583],[8058,6618],[8082,6639],[8113,6642],[8146,6668],[8182,6636],[8228,6624],[8222,6646],[8252,6694],[8284,6712],[8265,6750],[8302,6744],[8297,6715],[8338,6720],[8338,6756],[8355,6734],[8415,6716],[8461,6726],[8475,6715],[8437,6668],[8417,6629],[8449,6603],[8524,6564],[8552,6538],[8581,6547],[8619,6626],[8626,6707],[8649,6752],[8652,6784],[8666,6765],[8685,6667],[8695,6642],[8714,6654],[8738,6628],[8734,6583]]],[[[8497,5790],[8484,5807],[8498,5793],[8497,5790],[8497,5790]]],[[[8497,5790],[8501,5785],[8546,5771],[8607,5793],[8588,5740],[8560,5704],[8551,5716],[8519,5690],[8496,5693],[8486,5724],[8497,5790],[8497,5790]]]]}},{type:"Feature",id:"NZ",properties:{"hc-group":"admin0","hc-middle-x":.17,"hc-middle-y":.88,"hc-key":"nz","hc-a2":"NZ",name:"New Zealand",labelrank:"2","country-abbrev":"N.Z.",subregion:"Australia and New Zealand","region-wb":"East Asia & Pacific","iso-a3":"NZL","iso-a2":"NZ","woe-id":"23424916",continent:"Oceania"},geometry:{type:"MultiPolygon",coordinates:[[[[9212,5622],[9165,5594],[9112,5590],[9114,5606],[9085,5606],[9110,5641],[9172,5677],[9221,5692],[9281,5724],[9339,5780],[9365,5792],[9363,5766],[9392,5779],[9388,5748],[9301,5687],[9259,5669],[9212,5622]]],[[[9458,5772],[9427,5756],[9410,5767],[9437,5787],[9443,5812],[9415,5829],[9449,5848],[9472,5882],[9473,5919],[9450,5989],[9494,5953],[9485,5913],[9503,5901],[9509,5932],[9515,5887],[9550,5875],[9589,5884],[9546,5838],[9514,5820],[9458,5772]]]]}},{type:"Feature",id:"CU",properties:{"hc-group":"admin0","hc-middle-x":.64,"hc-middle-y":.61,"hc-key":"cu","hc-a2":"CU",name:"Cuba",labelrank:"3","country-abbrev":"Cuba",subregion:"Caribbean","region-wb":"Latin America & Caribbean","iso-a3":"CUB","iso-a2":"CU","woe-id":"23424793",continent:"North America"},geometry:{type:"Polygon",coordinates:[[[1622,7773],[1510,7765],[1533,7786],[1496,7800],[1483,7824],[1386,7842],[1358,7859],[1297,7829],[1304,7848],[1344,7869],[1430,7875],[1457,7863],[1467,7849],[1499,7854],[1540,7818],[1608,7791],[1622,7773]]]}},{type:"Feature",id:"MG",properties:{"hc-group":"admin0","hc-middle-x":.45,"hc-middle-y":.48,"hc-key":"mg","hc-a2":"MG",name:"Madagascar",labelrank:"3","country-abbrev":"Mad.",subregion:"Eastern Africa","region-wb":"Sub-Saharan Africa","iso-a3":"MDG","iso-a2":"MG","woe-id":"23424883",continent:"Africa"},geometry:{type:"Polygon",coordinates:[[[5636,6576],[5547,6337],[5529,6300],[5465,6280],[5431,6299],[5426,6350],[5411,6389],[5422,6420],[5455,6463],[5443,6546],[5461,6587],[5499,6594],[5561,6624],[5587,6679],[5606,6680],[5622,6726],[5644,6691],[5658,6612],[5630,6609],[5636,6576]]]}},{type:"Feature",id:"VU",properties:{"hc-group":"admin0","hc-middle-x":.4,"hc-middle-y":.29,"hc-key":"vu","hc-a2":"VU",name:"Vanuatu",labelrank:"4","country-abbrev":"Van.",subregion:"Melanesia","region-wb":"East Asia & Pacific","iso-a3":"VUT","iso-a2":"VU","woe-id":"23424907",continent:"Oceania"},geometry:{type:"Polygon",coordinates:[[[9470,6534],[9472,6582],[9449,6574],[9434,6621],[9463,6654],[9438,6677],[9463,6669],[9478,6628],[9475,6535],[9494,6499],[9493,6474],[9470,6534]]]}},{type:"Feature",id:"IS",properties:{"hc-group":"admin0","hc-middle-x":.64,"hc-middle-y":.5,"hc-key":"is","hc-a2":"IS",name:"Iceland",labelrank:"3","country-abbrev":"Iceland",subregion:"Northern Europe","region-wb":"Europe & Central Asia","iso-a3":"ISL","iso-a2":"IS","woe-id":"23424845",continent:"Europe"},geometry:{type:"Polygon",coordinates:[[[3402,9290],[3434,9274],[3443,9253],[3468,9279],[3537,9274],[3577,9292],[3617,9276],[3646,9247],[3616,9222],[3495,9189],[3446,9200],[3386,9203],[3417,9222],[3398,9235],[3413,9255],[3343,9258],[3402,9290]]]}},{type:"Feature",id:"LK",properties:{"hc-group":"admin0","hc-middle-x":.61,"hc-middle-y":.81,"hc-key":"lk","hc-a2":"LK",name:"Sri Lanka",labelrank:"3","country-abbrev":"Sri L.",subregion:"Southern Asia","region-wb":"South Asia","iso-a3":"LKA","iso-a2":"LK","woe-id":"23424778",continent:"Asia"},geometry:{type:"Polygon",coordinates:[[[6623,7381],[6632,7437],[6652,7423],[6689,7365],[6687,7328],[6652,7310],[6635,7317],[6623,7381]]]}},{type:"Feature",id:"BW",properties:{"hc-group":"admin0","hc-middle-x":.44,"hc-middle-y":.44,"hc-key":"bw","hc-a2":"BW",name:"Botswana",labelrank:"4","country-abbrev":"Bwa.",subregion:"Southern Africa","region-wb":"Sub-Saharan Africa","iso-a3":"BWA","iso-a2":"BW","woe-id":"23424755",continent:"Africa"},geometry:{type:"Polygon",coordinates:[[[4660,6307],[4663,6397],[4695,6399],[4698,6518],[4773,6528],[4782,6513],[4837,6535],[4864,6479],[4913,6446],[4923,6411],[4964,6391],[4927,6376],[4887,6344],[4881,6323],[4849,6308],[4839,6279],[4814,6272],[4757,6290],[4747,6267],[4712,6238],[4681,6238],[4686,6262],[4660,6307]]]}},{type:"Feature",id:"NP",properties:{"hc-group":"admin0","hc-middle-x":.37,"hc-middle-y":.43,"hc-key":"np","hc-a2":"NP",name:"Nepal",labelrank:"3","country-abbrev":"Nepal",subregion:"Southern Asia","region-wb":"South Asia","iso-a3":"NPL","iso-a2":"NP","woe-id":"23424911",continent:"Asia"},geometry:{type:"Polygon",coordinates:[[[6830,8028],[6837,7990],[6812,7978],[6763,7985],[6719,8010],[6660,8016],[6567,8060],[6591,8104],[6625,8108],[6677,8071],[6694,8073],[6761,8028],[6779,8036],[6830,8028]]]}},{type:"Feature",id:"MD",properties:{"hc-group":"admin0","hc-middle-x":.5,"hc-middle-y":.38,"hc-key":"md","hc-a2":"MD",name:"Moldova",labelrank:"6","country-abbrev":"Mda.",subregion:"Eastern Europe","region-wb":"Europe & Central Asia","iso-a3":"MDA","iso-a2":"MD","woe-id":"23424885",continent:"Europe"},geometry:{type:"Polygon",coordinates:[[[4878,8603],[4876,8641],[4834,8691],[4822,8694],[4857,8700],[4902,8682],[4933,8633],[4898,8635],[4878,8603]]]}}],mQ={title:uje,version:cje,type:hje,copyright:dje,copyrightShort:fje,copyrightUrl:pje,crs:vje,features:mje},gje=[{key:"NG",value:145014},{key:"ID",value:194227},{key:"PK",value:121155},{key:"JP",value:65458},{key:"FR",value:33142},{key:"US",value:155951},{key:"GB",value:7313},{key:"NL",value:6148},{key:"DE",value:5156},{key:"SA",value:4662},{key:"IN",value:109639},{key:"VN",value:245255},{key:"BD",value:2415},{key:"KE",value:1993},{key:"KR",value:194225},{key:"PH",value:1877},{key:"RU",value:330211},{key:"IR",value:1750},{key:"MM",value:1677},{key:"CN",value:1643},{key:"SG",value:1509},{key:"CA",value:1001},{key:"MY",value:990},{key:"TR",value:966},{key:"CZ",value:903},{key:"TH",value:872},{key:"BR",value:775},{key:"GH",value:673},{key:"HU",value:444},{key:"ES",value:413},{key:"PL",value:402},{key:"AE",value:340},{key:"UA",value:110623},{key:"HK",value:306},{key:"CM",value:293},{key:"EG",value:236},{key:"CH",value:230},{key:"IT",value:194},{key:"AU",value:167},{key:"SE",value:152},{key:"TW",value:148},{key:"ET",value:138},{key:"TT",value:138},{key:"RO",value:134},{key:"OM",value:113},{key:"NZ",value:108},{key:"UG",value:107},{key:"AT",value:106},{key:"QA",value:97},{key:"DZ",value:95},{key:"BE",value:90},{key:"BG",value:78},{key:"ZA",value:77},{key:"NE",value:67},{key:"IE",value:64},{key:"MX",value:55},{key:"BY",value:54},{key:"MA",value:53},{key:"DK",value:52},{key:"FI",value:50},{key:"LY",value:42},{key:"BJ",value:41},{key:"CY",value:40},{key:"JO",value:40},{key:"RS",value:40},{key:"(not set)",value:32},{key:"SK",value:32},{key:"AR",value:31},{key:"NO",value:31},{key:"TM",value:31},{key:"ZM",value:31},{key:"AF",value:30},{key:"IQ",value:30},{key:"RW",value:30},{key:"PT",value:28},{key:"LV",value:26},{key:"NP",value:26},{key:"KH",value:24},{key:"AZ",value:23},{key:"SL",value:22},{key:"SY",value:22},{key:"TD",value:21},{key:"UZ",value:21},{key:"AM",value:20},{key:"BN",value:20},{key:"GR",value:20},{key:"LR",value:20},{key:"MD",value:20},{key:"TN",value:20},{key:"CI",value:19},{key:"CO",value:19},{key:"LU",value:19},{key:"GM",value:17},{key:"YE",value:17},{key:"ZW",value:17},{key:"KZ",value:16},{key:"LK",value:16},{key:"TZ",value:16},{key:"CL",value:14},{key:"ML",value:14},{key:"TG",value:14},{key:"KW",value:13},{key:"BW",value:12},{key:"MO",value:12},{key:"BI",value:10},{key:"MW",value:10},{key:"KG",value:9},{key:"PE",value:9},{key:"LB",value:8},{key:"LT",value:8},{key:"RE",value:8},{key:"SS",value:8},{key:"TL",value:8},{key:"BH",value:7},{key:"EE",value:7},{key:"IS",value:6},{key:"UY",value:6},{key:"BF",value:5},{key:"HR",value:5},{key:"MT",value:5},{key:"MV",value:5},{key:"NA",value:5},{key:"SN",value:5},{key:"AL",value:4},{key:"BT",value:4},{key:"GE",value:4},{key:"IL",value:4},{key:"MG",value:4},{key:"MZ",value:4},{key:"SO",value:4},{key:"VE",value:4},{key:"AO",value:3},{key:"CU",value:3},{key:"DO",value:3},{key:"EC",value:3},{key:"JM",value:3},{key:"PA",value:3},{key:"CD",value:2},{key:"CG",value:2},{key:"EH",value:2},{key:"GT",value:2},{key:"LS",value:2},{key:"MU",value:2},{key:"NI",value:2},{key:"PG",value:2},{key:"PY",value:2},{key:"SD",value:2},{key:"XK",value:2},{key:"BO",value:1},{key:"GY",value:1},{key:"HT",value:1},{key:"KP",value:1},{key:"LA",value:1},{key:"MK",value:1},{key:"MN",value:1},{key:"MR",value:1},{key:"SI",value:1},{key:"TJ",value:1}],yje={class:"feed_wrapper"},xje={class:"trend3_header",ref:"header"},bje={class:"page_container"},wje={class:"container1",style:{"padding-right":"0"}},_je={class:"container2"},Aje={class:"number_group"},Sje={class:"number_container"},Cje=["data-number"],Eje={class:"number_container"},Mje=["data-number"],Tje={class:"number_container"},Pje=["data-number"],Dje={class:"number_container"},Ije=["data-number"],Lje={class:"container2"},kje={class:"number_group"},Rje={class:"number_container"},Oje=["data-number"],Bje={class:"number_container"},Nje=["data-number"],Vje={class:"number_container"},Fje=["data-number"],zje={class:"number_container"},Hje=["data-number"],Uje={class:"container1 mt1"},Gje={class:"big_number_container"},jje=["data-number"],Wje={class:"big_number_container"},qje=["data-number"],Yje={class:"col2_container mt28"},Xje={class:"col2_container mt1"},Zje={class:"container2"},Qje={class:"country_container"},Kje={class:"country_list"},Jje={key:0,class:"list_item"},$je={class:"container2",style:{position:"relative"}},eWe={class:"tab_btns",style:{left:"5.5%",top:"17%"}},tWe={class:"container1 mt1"},rWe={style:{display:"grid","grid-template-columns":"1fr 1fr"}},iWe={class:"number_container"},nWe=["data-number"],aWe={class:"number_container"},oWe=["data-number"],sWe={class:"number_container"},lWe=["data-number"],uWe={class:"number_container"},cWe=["data-number"],hWe={class:"total_engagements_chart_container"},dWe={class:"tab_btns",style:{left:"30%",top:"1%"}},fWe={style:{display:"flex","justify-content":"space-between"}},pWe=["data-number"],vWe=sr({__name:"index",setup(e){const t=Fe("lense"),r=Fe("comment"),{data:i,refetch:n}=I5e({skip:!0}),{data:a,refetch:o}=k5e({skip:!0}),{data:s,refetch:l}=L5e({skip:!0}),u=new Map,c=Fe(),h=Fe(),d=Fe(),f=Fe(),p=Fe(),v=Fe(),m=Fe(),g=Fe(),y=Fe(),x=Fe(),b=gje.sort((D,I)=>I.value-D.value).map(D=>{var I,O;return{...D,key:((O=(I=mQ.features.find(R=>R.id===D.key))==null?void 0:I.properties)==null?void 0:O.name)??(D==null?void 0:D.key)}}),_=Fe(0),w=Fe(0),S=()=>{w.value<2?w.value++:C()};Zs(()=>{n(),l(),o(),E(),window.addEventListener("resize",()=>{u.forEach(D=>XC(D)&&D())})}),ja(i,()=>{i.value&&(S(),A(),M())}),ja(s,()=>{s.value&&(S(),L("comment_count"),T("lense_dau"))}),ja(a,()=>{a.value&&(S(),P())});function A(){const D=i.value.data.sbt_owners.map(R=>({...R,date:new Date(R.date).getTime()/1e3,dateName:eG(R.date,"yyyy.MM.dd"),total:0})).sort((R,H)=>R.date-H.date);D.reduce((R,H)=>{const j=R+H.volume;return H.total=j,j},0);const I=Dm(p.value),O=G2({title:{text:"REVOX TOTAL NUMBER OF USERS"},grid:{top:"15%",right:"3%"},xAxis:{data:D.map(R=>R.dateName)},yAxis:{max:D[D.length-1].total,type:"value"},series:[{type:"line",name:"Total Users",data:D.map(R=>({value:R.total,name:R.dateName}))}]});I.setOption(O),u.set("1",I.resize)}function M(){var H,j;const D=(H=i.value)==null?void 0:H.data.revox_txs_by_date.sort((N,k)=>new Date(N.date).getTime()-new Date(k.date).getTime()).slice(-15),I=(j=i.value)==null?void 0:j.data.revox_txs_uaw_by_date.sort((N,k)=>new Date(N.date).getTime()-new Date(k.date).getTime()).slice(-15),O=Dm(v.value),R=G2({title:{text:"Daily UAW & transaction",textStyle:{fontFamily:"Oxygen"}},xAxis:{data:D==null?void 0:D.map(N=>N.date)},legend:{data:["UAW","Total Transactions"]},series:[{type:"bar",barWidth:"24",name:"Total Transactions",data:D==null?void 0:D.map(N=>({name:N.date,value:N.volume}))},{type:"line",name:"UAW",data:I==null?void 0:I.map(N=>({name:N.date,value:N.volume})),symbol:"none",lineStyle:{color:"#FDCC1E",width:2}}]});O.setOption(R),u.set("2",O.resize)}function E(){vce("world",mQ);const D=Dm(x.value),I={visualMap:[{show:!1,pieces:[{gt:0,lt:1e3,color:"#44DAC83F"},{gt:1e3,lt:1e4,color:"#44DAC86F"},{gt:1e4,lt:1e5,color:"#44DAC89F"},{gt:1e5,lt:2e5,color:"#44DAC8CF"},{gte:2e5,color:"#44DAC8FF"}]}],series:[{name:"",type:"map",map:"world",roam:!1,zoom:1.2,emphasis:{label:{show:!1,color:"#fff"}},layoutSize:"200%",itemStyle:{normal:{areaColor:"#FFFFFF33"},emphasis:{areaColor:"#6DFFED"}},data:b.map(O=>({name:O.key,value:O.value}))}],tooltip:{formatter:O=>`<span'>${O.name}</span>`}};D.setOption(I),u.set("3",D.resize)}function T(D){const I=s.value.data[D].sort((H,j)=>Number(H.day)-Number(j.day)).map(({day:H,...j})=>({...j,date:`${H.slice(0,4)}.${H.slice(4,6)}.${H.slice(6)}`})),O=Dm(m.value),R=G2({xAxis:{data:I.map(H=>H.date)},grid:{top:"30%"},series:[{type:"line",name:"Daily Active Users",data:I.map(H=>H.dau),areaStyle:void 0},{type:"line",name:"Monthly Active Users",data:I.map(H=>H.mau),symbol:"none"}]});O.setOption(R),u.set("4",O.resize)}function L(D){var j,N;const O=(N=(j=s.value.data.user_engagements.map(({day_stats:k,...G})=>({...G,day_stats:k.map(({day:Y,count:F})=>({day:Y,count:F,date:`${Y.slice(0,4)}.${Y.slice(4,6)}.${Y.slice(6)}`}))})).find(k=>k.key===D))==null?void 0:j.day_stats)==null?void 0:N.sort((k,G)=>Number(k.day)-Number(G.day)),R=Dm(g.value),H=G2({title:{text:"User Engagement",textStyle:{fontFamily:"Oxygen"}},xAxis:{data:O==null?void 0:O.map(k=>k.date)},series:[{type:"bar",barWidth:"24",name:"Total Engagements",data:O==null?void 0:O.map(k=>k.count)}]});R.setOption(H),u.set("5",R.resize)}function P(){var O,R;_.value=a.value.data.http_requests_stats.reduce((H,j)=>H+j.value,0);const D=Dm(y.value),I=G2({xAxis:{data:(O=a.value)==null?void 0:O.data.http_requests_stats.map(H=>eG(new Date(H.date),"yyyy.MM.dd"))},series:[{type:"line",name:"Total Volume",data:(R=a.value)==null?void 0:R.data.http_requests_stats.map(H=>H.value)}]});D.setOption(I),u.set("6",D.resize)}function C(){const D=new IntersectionObserver(I=>{I.forEach(O=>{O.isIntersecting&&(D.unobserve(O.target),O.target.querySelectorAll(".number_value").forEach(H=>{new N5e(H,Number(H.getAttribute("data-number"))).start()}))})},{threshold:1});D.observe(c.value),D.observe(h.value),D.observe(d.value),D.observe(f.value)}return(D,I)=>{var O,R,H,j,N,k,G,Y,F,Z,ne,re,ae,he;return We(),tt("div",yje,[B("div",xje,I[5]||(I[5]=[B("div",{class:"trend3_header_inner"},[B("img",{src:sse,class:"trend3_logo",alt:""})],-1)]),512),B("div",bje,[B("div",wje,[B("div",{class:"total_number_of_users",ref_key:"total_number_of_users",ref:p},null,512)]),B("div",{class:"col2_container mt1",ref_key:"number1",ref:c},[B("div",_je,[I[10]||(I[10]=B("h1",null,"USER BASE",-1)),B("div",Aje,[B("div",Sje,[I[6]||(I[6]=B("div",{class:"number_title"},"Lense",-1)),B("div",{class:"number_value","data-number":(O=ue(s))==null?void 0:O.data.lense_uaw}," 0 ",8,Cje)]),B("div",Eje,[I[7]||(I[7]=B("div",{class:"number_title"},"ReadON DAO",-1)),B("div",{class:"number_value","data-number":(R=ue(s))==null?void 0:R.data.read_on_reg_total}," 0 ",8,Mje)]),B("div",Tje,[I[8]||(I[8]=B("div",{class:"number_title"},"Content hub",-1)),B("div",{class:"number_value","data-number":(H=ue(s))==null?void 0:H.data.content_hub_uaw}," 0 ",8,Pje)]),B("div",Dje,[I[9]||(I[9]=B("div",{class:"number_title"},"ShareON",-1)),B("div",{class:"number_value","data-number":(j=ue(s))==null?void 0:j.data.share_on_reg_total}," 0 ",8,Ije)])])]),I[16]||(I[16]=B("div",{class:"line"},null,-1)),B("div",Lje,[I[15]||(I[15]=B("h1",null,"CATTO",-1)),B("div",kje,[B("div",Rje,[I[11]||(I[11]=B("div",{class:"number_title"},"Catto Count",-1)),B("div",{class:"number_value","data-number":(N=ue(i))==null?void 0:N.data.nft_data.nft_total}," 0 ",8,Oje)]),B("div",Bje,[I[12]||(I[12]=B("div",{class:"number_title"},"Catto Holder Wallet",-1)),B("div",{class:"number_value","data-number":(k=ue(i))==null?void 0:k.data.nft_data.nft_holders}," 0 ",8,Nje)]),B("div",Vje,[I[13]||(I[13]=B("div",{class:"number_title"},"Tier 3 Catto Count",-1)),B("div",{class:"number_value","data-number":(G=ue(i))==null?void 0:G.data.nft_data.nft_3_star}," 0 ",8,Fje)]),B("div",zje,[I[14]||(I[14]=B("div",{class:"number_title"},"Tier 4 Catto Count",-1)),B("div",{class:"number_value","data-number":(Y=ue(i))==null?void 0:Y.data.nft_data.nft_4_star}," 0 ",8,Hje)])])])],512),B("div",Uje,[I[19]||(I[19]=B("h1",null,"ONCHAIN DATA",-1)),B("div",{class:"big_number_group",ref_key:"number2",ref:h},[B("div",Gje,[I[17]||(I[17]=B("div",{class:"number_title"},"Active Wallet Count",-1)),B("div",{class:"number_value","data-number":(F=ue(s))==null?void 0:F.data.revox_uaw_total}," 0 ",8,jje)]),B("div",Wje,[I[18]||(I[18]=B("div",{class:"number_title"},"Total Transaction",-1)),B("div",{class:"number_value","data-number":(Z=ue(i))==null?void 0:Z.data.revox_txs_total}," 0 ",8,qje)])],512),B("div",Yje,[B("div",{class:"daily_transaction_chart",ref_key:"daily_transaction_chart",ref:v},null,512)])]),B("div",Xje,[B("div",Zje,[I[21]||(I[21]=B("h1",null,"DEMOGRAPHY",-1)),B("div",Qje,[B("div",Kje,[I[20]||(I[20]=B("div",{class:"list_title"},"Top country",-1)),(We(!0),tt(ri,null,fd(ue(b),(se,fe)=>(We(),tt(ri,{key:fe},[fe<8?(We(),tt("div",Jje,Br(fe+1)+". "+Br(se.key),1)):Kt("",!0)],64))),128))]),B("div",{class:"country_chart",ref_key:"country_chart",ref:x},null,512)])]),I[23]||(I[23]=B("div",{class:"line"},null,-1)),B("div",$je,[I[22]||(I[22]=B("h1",{style:{"padding-bottom":"3%"}},"ACTIVE USERS",-1)),B("div",{class:"app_total_users_chart",ref_key:"app_total_users_chart",ref:m},null,512),B("div",eWe,[B("div",{class:Tt(["tab_btn",{active:t.value==="lense"}]),onClick:I[0]||(I[0]=se=>(T("lense_dau"),t.value="lense"))}," LENSE ",2),B("div",{class:Tt(["tab_btn",{active:t.value==="readondao"}]),onClick:I[1]||(I[1]=se=>(T("read_on_dau"),t.value="readondao"))}," ReadON DAO ",2),B("div",{class:Tt(["tab_btn",{active:t.value==="shareon"}]),onClick:I[2]||(I[2]=se=>(T("share_on_dau"),t.value="shareon"))}," ShareON ",2)])])]),B("div",tWe,[I[28]||(I[28]=B("h1",null,"CONTENT",-1)),B("div",rWe,[B("div",{class:"number_group",ref_key:"number3",ref:d},[B("div",iWe,[I[24]||(I[24]=B("div",{class:"number_title"},"Total Content",-1)),B("div",{class:"number_value","data-number":(ne=ue(s))==null?void 0:ne.data.total_content}," 0 ",8,nWe)]),B("div",aWe,[I[25]||(I[25]=B("div",{class:"number_title"},"Total Content Creator",-1)),B("div",{class:"number_value","data-number":(re=ue(s))==null?void 0:re.data.total_creator}," 0 ",8,oWe)]),B("div",sWe,[I[26]||(I[26]=B("div",{class:"number_title"},"Total Web3 Project Indexed",-1)),B("div",{class:"number_value","data-number":(ae=ue(s))==null?void 0:ae.data.total_project}," 0 ",8,lWe)]),B("div",uWe,[I[27]||(I[27]=B("div",{class:"number_title"},"Total Read",-1)),B("div",{class:"number_value","data-number":(he=ue(s))==null?void 0:he.data.total_read}," 0 ",8,cWe)])],512),B("div",hWe,[B("div",dWe,[B("div",{class:Tt(["tab_btn",{active:r.value==="comment"}]),onClick:I[3]||(I[3]=se=>(L("comment_count"),r.value="comment"))}," Comment ",2),B("div",{class:Tt(["tab_btn",{active:r.value==="like"}]),onClick:I[4]||(I[4]=se=>(L("like_count"),r.value="like"))}," Like ",2)]),B("div",{class:"total_engagements_chart",ref_key:"total_engagements_chart",ref:g},null,512)])])]),B("div",{class:"container1 mt1",ref_key:"number4",ref:f},[I[30]||(I[30]=B("h1",null,"CONTENT ENDPOINT API ACCESS VOLUME",-1)),B("div",fWe,[B("div",null,[I[29]||(I[29]=B("div",{class:"number_title mt81"},"Access Volume",-1)),B("div",{class:"number_value","data-number":_.value},"0",8,pWe)]),B("div",null,[B("div",{class:"total_visitors_chart",ref_key:"total_visitors_chart",ref:y},null,512)])])],512)])])}}}),Ar=(e,t)=>{const r=e.__vccOpts||e;for(const[i,n]of t)r[i]=n;return r},mWe=Ar(vWe,[["__scopeId","data-v-a3e329ad"]]),JV=(e,t,r)=>{const i=e[t];return i?typeof i=="function"?i():Promise.resolve(i):new Promise((n,a)=>{(typeof queueMicrotask=="function"?queueMicrotask:setTimeout)(a.bind(null,new Error("Unknown variable dynamic import: "+t+(t.split("/").length!==r?". Note that variables only represent file names one level deep.":""))))})};async function fpe(e,t="png"){return(await JV(Object.assign({"../assets/icons/add.svg":()=>Te(()=>import("./s2c8_3BR.js"),[],import.meta.url),"../assets/icons/arrow-down.svg":()=>Te(()=>import("./VxOk1Qay.js"),[],import.meta.url),"../assets/icons/arrow-down2.svg":()=>Te(()=>import("./B6T4Vqpe.js"),[],import.meta.url),"../assets/icons/arrow.svg":()=>Te(()=>import("./--vB_xvR.js"),[],import.meta.url),"../assets/icons/arrow2.svg":()=>Te(()=>import("./CanzCQFr.js"),[],import.meta.url),"../assets/icons/check.svg":()=>Te(()=>import("./-A3Fh_nZ.js"),[],import.meta.url),"../assets/icons/claude.svg":()=>Te(()=>import("./CVp7upBS.js"),[],import.meta.url),"../assets/icons/close.svg":()=>Te(()=>import("./B1ZTMq_c.js"),[],import.meta.url),"../assets/icons/close2.svg":()=>Te(()=>import("./CZyJVJU2.js"),[],import.meta.url),"../assets/icons/contract-error.svg":()=>Te(()=>import("./Dw9erSwl.js"),[],import.meta.url),"../assets/icons/contract.svg":()=>Te(()=>import("./CITzXpJ4.js"),[],import.meta.url),"../assets/icons/discord.svg":()=>Te(()=>import("./CtZHfKYi.js"),[],import.meta.url),"../assets/icons/discord1.svg":()=>Te(()=>import("./DktlpJYe.js"),[],import.meta.url),"../assets/icons/exit.svg":()=>Te(()=>import("./PI-Zg9Yc.js"),[],import.meta.url),"../assets/icons/experience.svg":()=>Te(()=>import("./CdU5IU-A.js"),[],import.meta.url),"../assets/icons/foun1.svg":()=>Te(()=>import("./BxdE2itj.js"),[],import.meta.url),"../assets/icons/foun2.svg":()=>Te(()=>import("./DTDOuTmb.js"),[],import.meta.url),"../assets/icons/foun3.svg":()=>Te(()=>import("./BpOIdRCl.js"),[],import.meta.url),"../assets/icons/foun4.svg":()=>Te(()=>import("./DnuIyf-3.js"),[],import.meta.url),"../assets/icons/gpt.png":()=>Te(()=>import("./Rif2lCWC.js"),[],import.meta.url),"../assets/icons/grok.svg":()=>Te(()=>import("./DtUTJyxA.js"),[],import.meta.url),"../assets/icons/hub.svg":()=>Te(()=>import("./Cl_LaRe5.js"),[],import.meta.url),"../assets/icons/hub1.svg":()=>Te(()=>import("./DOQB9TRM.js"),[],import.meta.url),"../assets/icons/link1.svg":()=>Te(()=>import("./C4_n8D51.js"),[],import.meta.url),"../assets/icons/link2.svg":()=>Te(()=>import("./B0YapBXX.js"),[],import.meta.url),"../assets/icons/link3.svg":()=>Te(()=>import("./BMKdTPU-.js"),[],import.meta.url),"../assets/icons/link4.svg":()=>Te(()=>import("./6t3m0e0Z.js"),[],import.meta.url),"../assets/icons/link5.svg":()=>Te(()=>import("./DEPx4SZH.js"),[],import.meta.url),"../assets/icons/link6.svg":()=>Te(()=>import("./mCkJNKj5.js"),[],import.meta.url),"../assets/icons/llama.svg":()=>Te(()=>import("./DZ0-u0uZ.js"),[],import.meta.url),"../assets/icons/medium.png":()=>Te(()=>import("./BP712mrv.js"),[],import.meta.url),"../assets/icons/medium1.png":()=>Te(()=>import("./Bfmed7WM.js"),[],import.meta.url),"../assets/icons/menu.svg":()=>Te(()=>import("./J_hInW8t.js"),[],import.meta.url),"../assets/icons/midjourney.svg":()=>Te(()=>import("./BAlh4gBO.js"),[],import.meta.url),"../assets/icons/minus.svg":()=>Te(()=>import("./DavULREr.js"),[],import.meta.url),"../assets/icons/polygon.png":()=>Te(()=>import("./guc5MQhW.js"),[],import.meta.url),"../assets/icons/prompt.svg":()=>Te(()=>import("./sDmyNDJe.js"),[],import.meta.url),"../assets/icons/prompt1.svg":()=>Te(()=>import("./8XokNxjB.js"),[],import.meta.url),"../assets/icons/provider-error.svg":()=>Te(()=>import("./CzvF04J3.js"),[],import.meta.url),"../assets/icons/provider.svg":()=>Te(()=>import("./Cemp0a8P.js"),[],import.meta.url),"../assets/icons/read.png":()=>Te(()=>import("./CrGKYifH.js"),[],import.meta.url),"../assets/icons/revox.svg":()=>Te(()=>import("./DgF0sjiv.js"),[],import.meta.url),"../assets/icons/revox1.svg":()=>Te(()=>import("./BAOUM943.js"),[],import.meta.url),"../assets/icons/right.svg":()=>Te(()=>Promise.resolve().then(()=>Eve),void 0,import.meta.url),"../assets/icons/sepolia.svg":()=>Te(()=>import("./e7uEYCgS.js"),[],import.meta.url),"../assets/icons/stable.svg":()=>Te(()=>import("./CqOhhU3V.js"),[],import.meta.url),"../assets/icons/studio.svg":()=>Te(()=>import("./CkVDiQUF.js"),[],import.meta.url),"../assets/icons/studio1.svg":()=>Te(()=>import("./BxDUgP02.js"),[],import.meta.url),"../assets/icons/toggle.svg":()=>Te(()=>import("./Dw11Iroy.js"),[],import.meta.url),"../assets/icons/twitter.png":()=>Te(()=>import("./BXiupj0b.js"),[],import.meta.url),"../assets/icons/twitter1.png":()=>Te(()=>import("./BE2KYSw0.js"),[],import.meta.url),"../assets/icons/users.svg":()=>Te(()=>import("./DHXjXdm6.js"),[],import.meta.url),"../assets/icons/wallet.svg":()=>Te(()=>import("./BwK6EKqz.js"),[],import.meta.url),"../assets/icons/wallet1.svg":()=>Te(()=>import("./BrmM0455.js"),[],import.meta.url)}),`../assets/icons/${e}.${t}`,4)).default}async function ppe(e,t="png"){return(await JV(Object.assign({"../assets/images/active-button.svg":()=>Te(()=>import("./D0NHkMAP.js"),[],import.meta.url),"../assets/images/avatar.png":()=>Te(()=>import("./D3Y2F6Rw.js"),[],import.meta.url),"../assets/images/awa-bg.svg":()=>Te(()=>import("./CWRgq5xx.js"),[],import.meta.url),"../assets/images/awa-bg2.svg":()=>Te(()=>import("./B5Jcn_N5.js"),[],import.meta.url),"../assets/images/awa-bg3.svg":()=>Te(()=>import("./Cbhtg3mB.js"),[],import.meta.url),"../assets/images/awa1.svg":()=>Te(()=>import("./BLOvDiz8.js"),[],import.meta.url),"../assets/images/awa1_2.svg":()=>Te(()=>import("./BnXq9wnD.js"),[],import.meta.url),"../assets/images/awa2.svg":()=>Te(()=>import("./CcUoFL1y.js"),[],import.meta.url),"../assets/images/awa3.svg":()=>Te(()=>import("./ByAuyjz_.js"),[],import.meta.url),"../assets/images/awa3_2.svg":()=>Te(()=>import("./_CAS3oMu.js"),[],import.meta.url),"../assets/images/bac1.png":()=>Te(()=>Promise.resolve().then(()=>yot),void 0,import.meta.url),"../assets/images/bac10.png":()=>Te(()=>Promise.resolve().then(()=>Mot),void 0,import.meta.url),"../assets/images/bac11.png":()=>Te(()=>Promise.resolve().then(()=>Tot),void 0,import.meta.url),"../assets/images/bac12.png":()=>Te(()=>Promise.resolve().then(()=>Pot),void 0,import.meta.url),"../assets/images/bac13.png":()=>Te(()=>Promise.resolve().then(()=>Dot),void 0,import.meta.url),"../assets/images/bac14.png":()=>Te(()=>Promise.resolve().then(()=>Iot),void 0,import.meta.url),"../assets/images/bac15.png":()=>Te(()=>Promise.resolve().then(()=>Lot),void 0,import.meta.url),"../assets/images/bac2.png":()=>Te(()=>Promise.resolve().then(()=>xot),void 0,import.meta.url),"../assets/images/bac3.png":()=>Te(()=>Promise.resolve().then(()=>bot),void 0,import.meta.url),"../assets/images/bac4.png":()=>Te(()=>Promise.resolve().then(()=>wot),void 0,import.meta.url),"../assets/images/bac5.png":()=>Te(()=>Promise.resolve().then(()=>_ot),void 0,import.meta.url),"../assets/images/bac6.png":()=>Te(()=>Promise.resolve().then(()=>Aot),void 0,import.meta.url),"../assets/images/bac7.png":()=>Te(()=>Promise.resolve().then(()=>Sot),void 0,import.meta.url),"../assets/images/bac8.png":()=>Te(()=>Promise.resolve().then(()=>Cot),void 0,import.meta.url),"../assets/images/bac9.png":()=>Te(()=>Promise.resolve().then(()=>Eot),void 0,import.meta.url),"../assets/images/box.png":()=>Te(()=>import("./hE1gIwE5.js"),[],import.meta.url),"../assets/images/disabled-button.svg":()=>Te(()=>import("./8povW4TT.js"),[],import.meta.url),"../assets/images/disabled-button2.svg":()=>Te(()=>import("./DvxpENdR.js"),[],import.meta.url),"../assets/images/disabled-button3.svg":()=>Te(()=>import("./BT1BdxJn.js"),[],import.meta.url),"../assets/images/fea1.svg":()=>Te(()=>Promise.resolve().then(()=>fot),void 0,import.meta.url),"../assets/images/fea2.svg":()=>Te(()=>Promise.resolve().then(()=>pot),void 0,import.meta.url),"../assets/images/fea3.svg":()=>Te(()=>Promise.resolve().then(()=>vot),void 0,import.meta.url),"../assets/images/fea4.svg":()=>Te(()=>Promise.resolve().then(()=>mot),void 0,import.meta.url),"../assets/images/fea5.svg":()=>Te(()=>Promise.resolve().then(()=>got),void 0,import.meta.url),"../assets/images/layer1.png":()=>Te(()=>Promise.resolve().then(()=>qKe),void 0,import.meta.url),"../assets/images/layer2.png":()=>Te(()=>Promise.resolve().then(()=>YKe),void 0,import.meta.url),"../assets/images/layer3.png":()=>Te(()=>Promise.resolve().then(()=>XKe),void 0,import.meta.url),"../assets/images/loading.png":()=>Te(()=>import("./hGx6YTXk.js"),[],import.meta.url),"../assets/images/logo.svg":()=>Te(()=>Promise.resolve().then(()=>_Qe),void 0,import.meta.url),"../assets/images/logo1.svg":()=>Te(()=>import("./BMl5Bpi2.js"),[],import.meta.url),"../assets/images/logo2.svg":()=>Te(()=>import("./BquiiIR2.js"),[],import.meta.url),"../assets/images/logo3.svg":()=>Te(()=>import("./rnIn3mqu.js"),[],import.meta.url),"../assets/images/logo4.svg":()=>Te(()=>import("./hoSyXXe8.js"),[],import.meta.url),"../assets/images/logo5.svg":()=>Te(()=>import("./DMJ21X-R.js"),[],import.meta.url),"../assets/images/logo6.svg":()=>Te(()=>import("./LfANbOGC.js"),[],import.meta.url),"../assets/images/metamask.svg":()=>Te(()=>import("./CRRpIRxL.js"),[],import.meta.url),"../assets/images/metamask_fox.png":()=>Te(()=>Promise.resolve().then(()=>iot),void 0,import.meta.url),"../assets/images/modal-bg.svg":()=>Te(()=>import("./4QSkOZbM.js"),[],import.meta.url),"../assets/images/modal.svg":()=>Te(()=>import("./BTsgWb7T.js"),[],import.meta.url),"../assets/images/modal_bg.svg":()=>Te(()=>import("./BuIqaRiB.js"),[],import.meta.url),"../assets/images/okx.svg":()=>Te(()=>import("./CFcSXeqW.js"),[],import.meta.url),"../assets/images/okx_wallet_logo.jpeg":()=>Te(()=>Promise.resolve().then(()=>not),void 0,import.meta.url),"../assets/images/okx_wallet_logo.png":()=>Te(()=>import("./CiBxr8Ai.js"),[],import.meta.url),"../assets/images/stats_logo.png":()=>Te(()=>Promise.resolve().then(()=>D5e),void 0,import.meta.url),"../assets/images/studio1.jpeg":()=>Te(()=>import("./VBVnDgNh.js"),[],import.meta.url),"../assets/images/studio2.jpeg":()=>Te(()=>import("./DI48umZE.js"),[],import.meta.url),"../assets/images/studio3.jpeg":()=>Te(()=>import("./Rlgx8UYf.js"),[],import.meta.url),"../assets/images/studio4.jpeg":()=>Te(()=>import("./eeSF-bhm.js"),[],import.meta.url)}),`../assets/images/${e}.${t}`,4)).default}function vpe(e,t="png"){const r=Fe("");return JV(Object.assign({"../assets/icons/add.svg":()=>Te(()=>import("./s2c8_3BR.js"),[],import.meta.url),"../assets/icons/arrow-down.svg":()=>Te(()=>import("./VxOk1Qay.js"),[],import.meta.url),"../assets/icons/arrow-down2.svg":()=>Te(()=>import("./B6T4Vqpe.js"),[],import.meta.url),"../assets/icons/arrow.svg":()=>Te(()=>import("./--vB_xvR.js"),[],import.meta.url),"../assets/icons/arrow2.svg":()=>Te(()=>import("./CanzCQFr.js"),[],import.meta.url),"../assets/icons/check.svg":()=>Te(()=>import("./-A3Fh_nZ.js"),[],import.meta.url),"../assets/icons/claude.svg":()=>Te(()=>import("./CVp7upBS.js"),[],import.meta.url),"../assets/icons/close.svg":()=>Te(()=>import("./B1ZTMq_c.js"),[],import.meta.url),"../assets/icons/close2.svg":()=>Te(()=>import("./CZyJVJU2.js"),[],import.meta.url),"../assets/icons/contract-error.svg":()=>Te(()=>import("./Dw9erSwl.js"),[],import.meta.url),"../assets/icons/contract.svg":()=>Te(()=>import("./CITzXpJ4.js"),[],import.meta.url),"../assets/icons/discord.svg":()=>Te(()=>import("./CtZHfKYi.js"),[],import.meta.url),"../assets/icons/discord1.svg":()=>Te(()=>import("./DktlpJYe.js"),[],import.meta.url),"../assets/icons/exit.svg":()=>Te(()=>import("./PI-Zg9Yc.js"),[],import.meta.url),"../assets/icons/experience.svg":()=>Te(()=>import("./CdU5IU-A.js"),[],import.meta.url),"../assets/icons/foun1.svg":()=>Te(()=>import("./BxdE2itj.js"),[],import.meta.url),"../assets/icons/foun2.svg":()=>Te(()=>import("./DTDOuTmb.js"),[],import.meta.url),"../assets/icons/foun3.svg":()=>Te(()=>import("./BpOIdRCl.js"),[],import.meta.url),"../assets/icons/foun4.svg":()=>Te(()=>import("./DnuIyf-3.js"),[],import.meta.url),"../assets/icons/gpt.png":()=>Te(()=>import("./Rif2lCWC.js"),[],import.meta.url),"../assets/icons/grok.svg":()=>Te(()=>import("./DtUTJyxA.js"),[],import.meta.url),"../assets/icons/hub.svg":()=>Te(()=>import("./Cl_LaRe5.js"),[],import.meta.url),"../assets/icons/hub1.svg":()=>Te(()=>import("./DOQB9TRM.js"),[],import.meta.url),"../assets/icons/link1.svg":()=>Te(()=>import("./C4_n8D51.js"),[],import.meta.url),"../assets/icons/link2.svg":()=>Te(()=>import("./B0YapBXX.js"),[],import.meta.url),"../assets/icons/link3.svg":()=>Te(()=>import("./BMKdTPU-.js"),[],import.meta.url),"../assets/icons/link4.svg":()=>Te(()=>import("./6t3m0e0Z.js"),[],import.meta.url),"../assets/icons/link5.svg":()=>Te(()=>import("./DEPx4SZH.js"),[],import.meta.url),"../assets/icons/link6.svg":()=>Te(()=>import("./mCkJNKj5.js"),[],import.meta.url),"../assets/icons/llama.svg":()=>Te(()=>import("./DZ0-u0uZ.js"),[],import.meta.url),"../assets/icons/medium.png":()=>Te(()=>import("./BP712mrv.js"),[],import.meta.url),"../assets/icons/medium1.png":()=>Te(()=>import("./Bfmed7WM.js"),[],import.meta.url),"../assets/icons/menu.svg":()=>Te(()=>import("./J_hInW8t.js"),[],import.meta.url),"../assets/icons/midjourney.svg":()=>Te(()=>import("./BAlh4gBO.js"),[],import.meta.url),"../assets/icons/minus.svg":()=>Te(()=>import("./DavULREr.js"),[],import.meta.url),"../assets/icons/polygon.png":()=>Te(()=>import("./guc5MQhW.js"),[],import.meta.url),"../assets/icons/prompt.svg":()=>Te(()=>import("./sDmyNDJe.js"),[],import.meta.url),"../assets/icons/prompt1.svg":()=>Te(()=>import("./8XokNxjB.js"),[],import.meta.url),"../assets/icons/provider-error.svg":()=>Te(()=>import("./CzvF04J3.js"),[],import.meta.url),"../assets/icons/provider.svg":()=>Te(()=>import("./Cemp0a8P.js"),[],import.meta.url),"../assets/icons/read.png":()=>Te(()=>import("./CrGKYifH.js"),[],import.meta.url),"../assets/icons/revox.svg":()=>Te(()=>import("./DgF0sjiv.js"),[],import.meta.url),"../assets/icons/revox1.svg":()=>Te(()=>import("./BAOUM943.js"),[],import.meta.url),"../assets/icons/right.svg":()=>Te(()=>Promise.resolve().then(()=>Eve),void 0,import.meta.url),"../assets/icons/sepolia.svg":()=>Te(()=>import("./e7uEYCgS.js"),[],import.meta.url),"../assets/icons/stable.svg":()=>Te(()=>import("./CqOhhU3V.js"),[],import.meta.url),"../assets/icons/studio.svg":()=>Te(()=>import("./CkVDiQUF.js"),[],import.meta.url),"../assets/icons/studio1.svg":()=>Te(()=>import("./BxDUgP02.js"),[],import.meta.url),"../assets/icons/toggle.svg":()=>Te(()=>import("./Dw11Iroy.js"),[],import.meta.url),"../assets/icons/twitter.png":()=>Te(()=>import("./BXiupj0b.js"),[],import.meta.url),"../assets/icons/twitter1.png":()=>Te(()=>import("./BE2KYSw0.js"),[],import.meta.url),"../assets/icons/users.svg":()=>Te(()=>import("./DHXjXdm6.js"),[],import.meta.url),"../assets/icons/wallet.svg":()=>Te(()=>import("./BwK6EKqz.js"),[],import.meta.url),"../assets/icons/wallet1.svg":()=>Te(()=>import("./BrmM0455.js"),[],import.meta.url)}),`../assets/icons/${e}.${t}`,4).then(i=>r.value=i.default),r}const gWe={class:"center"},yWe=["src"],xWe=["src"],Ir=sr({__name:"icon",props:{name:{},size:{},variant:{}},setup(e){const t=e,{size:r=16,variant:i="button"}=t,[n,a]=[Du(r,!0),Du(r,!0)],o=()=>t.name.includes(".")?t.name.split("."):[t.name,"svg"],s=vpe(...o());return ja(()=>t.name,async()=>s.value=await fpe(...o())),(l,u)=>(We(),tt("span",gWe,[ue(i)==="icon"?(We(),tt("img",{key:0,src:ue(s),style:sp({width:ue(n),height:ue(a)})},null,12,yWe)):Kt("",!0),ue(i)==="button"?(We(),tt("div",{key:1,class:"p4 r100p hand center",style:sp({width:ue(n),height:ue(a)})},[B("img",{src:ue(s),class:"wh100p"},null,8,xWe)],4)):Kt("",!0)]))}}),bWe={},wWe={class:"loader"};function _We(e,t){return We(),tt("div",wWe)}const AWe=Ar(bWe,[["render",_We],["__scopeId","data-v-63988a97"]]),SWe=sr({inheritAttrs:!1,__name:"modal",props:{open:{type:Boolean}},emits:["close"],setup(e){return(t,r)=>t.open?(We(),ii(dae,{key:0,to:"#modal"},[B("div",{class:"modal",onWheel:r[1]||(r[1]=PB(()=>{},["prevent"]))},[B("div",r4({class:"card pr"},t.$attrs),[r[2]||(r[2]=B("div",{class:"border1"},null,-1)),r[3]||(r[3]=B("div",{class:"border2"},null,-1)),Ie(ue(Ir),{onClick:r[0]||(r[0]=i=>t.$emit("close")),name:"close",class:"icon",size:24}),fs(t.$slots,"default",{},void 0)],16)],32)])):Kt("",!0)}}),CWe=Ar(SWe,[["__scopeId","data-v-f89edd32"]]),EWe={class:"pr"},MWe={class:"label"},TWe={class:"fb1"},PWe=["onClick"],DWe={class:"fb1"},IWe=sr({__name:"select",props:{label:{},selected:{},options:{}},emits:["onSelectedChange"],setup(e){const t=Fe(!1);return(r,i)=>(We(),tt("div",EWe,[t.value?(We(),tt("div",{key:0,class:"interactive",onClick:i[0]||(i[0]=n=>t.value=!1)})):Kt("",!0),B("p",MWe,Br(r.label),1),B("div",{class:"select-input fbh fbjsb fbac g16 hand",onClick:i[1]||(i[1]=n=>t.value=!0)},[r.selected.icon?(We(),ii(ue(Ir),{key:0,name:r.selected.icon,size:40},null,8,["name"])):Kt("",!0),B("p",TWe,Br(r.selected.label),1),Ie(ue(Ir),{name:"arrow-down",size:16})]),t.value?(We(),tt("ul",{key:1,class:"list py12 fbv",onFocusout:i[2]||(i[2]=n=>t.value=!1)},[(We(!0),tt(ri,null,fd(r.options,n=>(We(),tt("li",{class:Tt(["fbh fbac fbjsb g8 hand",{disabled:n.disabled}]),onClick:a=>(r.$emit("onSelectedChange",n),t.value=!1)},[n.icon?(We(),ii(ue(Ir),{key:0,name:n.icon,size:40},null,8,["name"])):Kt("",!0),B("p",DWe,Br(n.label),1),n.key===r.selected.key?(We(),ii(ue(Ir),{key:1,name:"check",size:24})):Kt("",!0)],10,PWe))),256))],32)):Kt("",!0)]))}}),gQ=Ar(IWe,[["__scopeId","data-v-0a7b0a46"]]),LWe=["onClick"],kWe={class:"underline active"},RWe=sr({__name:"tab",props:{defaultKey:{},data:{},variant:{}},emits:["onActiveKeyChange"],setup(e,{emit:t}){var l;vy(u=>({"3d19eaaf":ue(o),"6859e33e":ue(s),"651f5c80":ue(a),"1bc0575a":ue(n)}));const r=Fe(e.defaultKey||((l=e.data[0])==null?void 0:l.key)),i=t;ja(r,()=>i("onActiveKeyChange",r.value),{immediate:!0});const n=e.variant==="ai"?"#121212":"#44DAC8",a=e.variant==="ai"?"#12121299":"#FFFFFF66",o=e.variant==="ai"?"#12121233":"#2D2D2D",s=e.variant==="ai"?3:2;return(u,c)=>(We(),tt(ri,null,[B("div",r4(u.$attrs,{class:"tab-bar"}),[(We(!0),tt(ri,null,fd(u.data,({title:h,key:d})=>(We(),tt("div",{onClick:f=>r.value=d,class:Tt(["tab-item",{active:r.value===d}])},[B("p",null,Br(h),1),py(B("div",kWe,null,512),[[Q6,r.value===d]])],10,LWe))),256))],16),(We(!0),tt(ri,null,fd(u.data,({key:h})=>(We(),tt(ri,null,[r.value===h?fs(u.$slots,h,{key:0},void 0):Kt("",!0)],64))),256))],64))}}),Mk=Ar(RWe,[["__scopeId","data-v-6d6927b9"]]);Fe();const OWe=Fe(!1),BWe=Fe(""),mpe={toastVisible:OWe,toastContent:BWe},NWe={key:0,class:"toast"},VWe={class:"toast_txt"},FWe=sr({__name:"toast",setup(e){const{toastVisible:t,toastContent:r}=mpe;return(i,n)=>ue(t)?(We(),tt("div",NWe,[B("div",VWe,Br(ue(r)),1)])):Kt("",!0)}}),zWe=Ar(FWe,[["__scopeId","data-v-2f38a526"]]),HWe={key:0,class:"dot left-bottom"},UWe={key:1,class:"dot right-bottom"},GWe=sr({__name:"box",props:{variant:{}},setup(e){const t=Fe();return Zs(()=>{var r;{const i=function(){const n=t.value,a=n.getBoundingClientRect().top,o=window.innerHeight;a-o<=0&&n.classList.add("active")};(r=window==null?void 0:window.document)!=null&&r.addEventListener?(window.document.addEventListener("scroll",i),i()):t.value.classList.add("active")}}),(r,i)=>(We(),tt("div",{class:"box-root pr",ref_key:"containerRef",ref:t},[fs(r.$slots,"default",{},void 0),i[0]||(i[0]=B("svg",{class:"divider",width:"100%"},[B("line",{x1:"-1000",x2:"6000",stroke:"#2d2d2d","stroke-width":"1","stroke-dasharray":"4 4"})],-1)),r.variant!=="bottom"?(We(),tt("div",HWe)):Kt("",!0),r.variant!=="bottom"?(We(),tt("div",UWe)):Kt("",!0)],512))}}),hc=Ar(GWe,[["__scopeId","data-v-e936d4cb"]]);function P4(e){return new Promise(t=>setTimeout(t,e))}function xs(e){e.startsWith("http")?window.open(e,"_black"):window.open(new URL(location.origin+e),"_black")}const jWe={abi:[{inputs:[],stateMutability:"nonpayable",type:"constructor"},{inputs:[],name:"AccessControlBadConfirmation",type:"error"},{inputs:[{internalType:"address",name:"account",type:"address"},{internalType:"bytes32",name:"neededRole",type:"bytes32"}],name:"AccessControlUnauthorizedAccount",type:"error"},{inputs:[{internalType:"address",name:"target",type:"address"}],name:"AddressEmptyCode",type:"error"},{inputs:[{internalType:"address",name:"implementation",type:"address"}],name:"ERC1967InvalidImplementation",type:"error"},{inputs:[],name:"ERC1967NonPayable",type:"error"},{inputs:[],name:"FailedInnerCall",type:"error"},{inputs:[],name:"InvalidInitialization",type:"error"},{inputs:[],name:"NotInitializing",type:"error"},{inputs:[],name:"UUPSUnauthorizedCallContext",type:"error"},{inputs:[{internalType:"bytes32",name:"slot",type:"bytes32"}],name:"UUPSUnsupportedProxiableUUID",type:"error"},{inputs:[{internalType:"contract IAIOracle",name:"expected",type:"address"},{internalType:"contract IAIOracle",name:"found",type:"address"}],name:"UnauthorizedCallbackSource",type:"error"},{anonymous:!1,inputs:[{indexed:!1,internalType:"uint64",name:"version",type:"uint64"}],name:"Initialized",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"role",type:"bytes32"},{indexed:!0,internalType:"bytes32",name:"previousAdminRole",type:"bytes32"},{indexed:!0,internalType:"bytes32",name:"newAdminRole",type:"bytes32"}],name:"RoleAdminChanged",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"role",type:"bytes32"},{indexed:!0,internalType:"address",name:"account",type:"address"},{indexed:!0,internalType:"address",name:"sender",type:"address"}],name:"RoleGranted",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"role",type:"bytes32"},{indexed:!0,internalType:"address",name:"account",type:"address"},{indexed:!0,internalType:"address",name:"sender",type:"address"}],name:"RoleRevoked",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"implementation",type:"address"}],name:"Upgraded",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"address",name:"sender",type:"address"},{indexed:!1,internalType:"uint256",name:"modelId",type:"uint256"},{indexed:!1,internalType:"string",name:"prompt",type:"string"}],name:"promptRequest",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"uint256",name:"requestId",type:"uint256"},{indexed:!1,internalType:"string",name:"input",type:"string"},{indexed:!1,internalType:"string",name:"output",type:"string"}],name:"promptsUpdated",type:"event"},{inputs:[],name:"DEFAULT_ADMIN_ROLE",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[],name:"UPGRADER_ROLE",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[],name:"UPGRADE_INTERFACE_VERSION",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[],name:"aiOracle",outputs:[{internalType:"contract IAIOracle",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"modelId",type:"uint256"},{internalType:"string",name:"prompt",type:"string"}],name:"aigc",outputs:[],stateMutability:"payable",type:"function"},{inputs:[{internalType:"uint256",name:"requestId",type:"uint256"}],name:"getAIResult",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"requestId",type:"uint256"}],name:"getPrompt",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"}],name:"getRoleAdmin",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"},{internalType:"address",name:"account",type:"address"}],name:"grantRole",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"},{internalType:"address",name:"account",type:"address"}],name:"hasRole",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"_aiOracle",type:"address"}],name:"initialize",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"",type:"uint256"}],name:"prompts",outputs:[{internalType:"string",name:"prompt",type:"string"},{internalType:"string",name:"output",type:"string"}],stateMutability:"view",type:"function"},{inputs:[],name:"proxiableUUID",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"},{internalType:"address",name:"callerConfirmation",type:"address"}],name:"renounceRole",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"},{internalType:"address",name:"account",type:"address"}],name:"revokeRole",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"requestId",type:"uint256"},{internalType:"bytes",name:"input",type:"bytes"},{internalType:"bytes",name:"output",type:"bytes"}],name:"storeAIResult",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes4",name:"interfaceId",type:"bytes4"}],name:"supportsInterface",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"newImplementation",type:"address"},{internalType:"bytes",name:"data",type:"bytes"}],name:"upgradeToAndCall",outputs:[],stateMutability:"payable",type:"function"}]};var _r=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function D4(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function WWe(e){if(e.__esModule)return e;var t=e.default;if(typeof t=="function"){var r=function i(){return this instanceof i?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};r.prototype=t.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(e).forEach(function(i){var n=Object.getOwnPropertyDescriptor(e,i);Object.defineProperty(r,i,n.get?n:{enumerable:!0,get:function(){return e[i]}})}),r}var $V={exports:{}};const qWe={},YWe=Object.freeze(Object.defineProperty({__proto__:null,default:qWe},Symbol.toStringTag,{value:"Module"})),gpe=WWe(YWe);$V.exports;(function(e){(function(t,r){function i(P,C){if(!P)throw new Error(C||"Assertion failed")}function n(P,C){P.super_=C;var D=function(){};D.prototype=C.prototype,P.prototype=new D,P.prototype.constructor=P}function a(P,C,D){if(a.isBN(P))return P;this.negative=0,this.words=null,this.length=0,this.red=null,P!==null&&((C==="le"||C==="be")&&(D=C,C=10),this._init(P||0,C||10,D||"be"))}typeof t=="object"?t.exports=a:r.BN=a,a.BN=a,a.wordSize=26;var o;try{typeof window<"u"&&typeof window.Buffer<"u"?o=window.Buffer:o=gpe.Buffer}catch{}a.isBN=function(C){return C instanceof a?!0:C!==null&&typeof C=="object"&&C.constructor.wordSize===a.wordSize&&Array.isArray(C.words)},a.max=function(C,D){return C.cmp(D)>0?C:D},a.min=function(C,D){return C.cmp(D)<0?C:D},a.prototype._init=function(C,D,I){if(typeof C=="number")return this._initNumber(C,D,I);if(typeof C=="object")return this._initArray(C,D,I);D==="hex"&&(D=16),i(D===(D|0)&&D>=2&&D<=36),C=C.toString().replace(/\s+/g,"");var O=0;C[0]==="-"&&(O++,this.negative=1),O<C.length&&(D===16?this._parseHex(C,O,I):(this._parseBase(C,D,O),I==="le"&&this._initArray(this.toArray(),D,I)))},a.prototype._initNumber=function(C,D,I){C<0&&(this.negative=1,C=-C),C<67108864?(this.words=[C&67108863],this.length=1):C<4503599627370496?(this.words=[C&67108863,C/67108864&67108863],this.length=2):(i(C<9007199254740992),this.words=[C&67108863,C/67108864&67108863,1],this.length=3),I==="le"&&this._initArray(this.toArray(),D,I)},a.prototype._initArray=function(C,D,I){if(i(typeof C.length=="number"),C.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(C.length/3),this.words=new Array(this.length);for(var O=0;O<this.length;O++)this.words[O]=0;var R,H,j=0;if(I==="be")for(O=C.length-1,R=0;O>=0;O-=3)H=C[O]|C[O-1]<<8|C[O-2]<<16,this.words[R]|=H<<j&67108863,this.words[R+1]=H>>>26-j&67108863,j+=24,j>=26&&(j-=26,R++);else if(I==="le")for(O=0,R=0;O<C.length;O+=3)H=C[O]|C[O+1]<<8|C[O+2]<<16,this.words[R]|=H<<j&67108863,this.words[R+1]=H>>>26-j&67108863,j+=24,j>=26&&(j-=26,R++);return this._strip()};function s(P,C){var D=P.charCodeAt(C);if(D>=48&&D<=57)return D-48;if(D>=65&&D<=70)return D-55;if(D>=97&&D<=102)return D-87;i(!1,"Invalid character in "+P)}function l(P,C,D){var I=s(P,D);return D-1>=C&&(I|=s(P,D-1)<<4),I}a.prototype._parseHex=function(C,D,I){this.length=Math.ceil((C.length-D)/6),this.words=new Array(this.length);for(var O=0;O<this.length;O++)this.words[O]=0;var R=0,H=0,j;if(I==="be")for(O=C.length-1;O>=D;O-=2)j=l(C,D,O)<<R,this.words[H]|=j&67108863,R>=18?(R-=18,H+=1,this.words[H]|=j>>>26):R+=8;else{var N=C.length-D;for(O=N%2===0?D+1:D;O<C.length;O+=2)j=l(C,D,O)<<R,this.words[H]|=j&67108863,R>=18?(R-=18,H+=1,this.words[H]|=j>>>26):R+=8}this._strip()};function u(P,C,D,I){for(var O=0,R=0,H=Math.min(P.length,D),j=C;j<H;j++){var N=P.charCodeAt(j)-48;O*=I,N>=49?R=N-49+10:N>=17?R=N-17+10:R=N,i(N>=0&&R<I,"Invalid character"),O+=R}return O}a.prototype._parseBase=function(C,D,I){this.words=[0],this.length=1;for(var O=0,R=1;R<=67108863;R*=D)O++;O--,R=R/D|0;for(var H=C.length-I,j=H%O,N=Math.min(H,H-j)+I,k=0,G=I;G<N;G+=O)k=u(C,G,G+O,D),this.imuln(R),this.words[0]+k<67108864?this.words[0]+=k:this._iaddn(k);if(j!==0){var Y=1;for(k=u(C,G,C.length,D),G=0;G<j;G++)Y*=D;this.imuln(Y),this.words[0]+k<67108864?this.words[0]+=k:this._iaddn(k)}this._strip()},a.prototype.copy=function(C){C.words=new Array(this.length);for(var D=0;D<this.length;D++)C.words[D]=this.words[D];C.length=this.length,C.negative=this.negative,C.red=this.red};function c(P,C){P.words=C.words,P.length=C.length,P.negative=C.negative,P.red=C.red}if(a.prototype._move=function(C){c(C,this)},a.prototype.clone=function(){var C=new a(null);return this.copy(C),C},a.prototype._expand=function(C){for(;this.length<C;)this.words[this.length++]=0;return this},a.prototype._strip=function(){for(;this.length>1&&this.words[this.length-1]===0;)this.length--;return this._normSign()},a.prototype._normSign=function(){return this.length===1&&this.words[0]===0&&(this.negative=0),this},typeof Symbol<"u"&&typeof Symbol.for=="function")try{a.prototype[Symbol.for("nodejs.util.inspect.custom")]=h}catch{a.prototype.inspect=h}else a.prototype.inspect=h;function h(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"}var d=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],f=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],p=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];a.prototype.toString=function(C,D){C=C||10,D=D|0||1;var I;if(C===16||C==="hex"){I="";for(var O=0,R=0,H=0;H<this.length;H++){var j=this.words[H],N=((j<<O|R)&16777215).toString(16);R=j>>>24-O&16777215,O+=2,O>=26&&(O-=26,H--),R!==0||H!==this.length-1?I=d[6-N.length]+N+I:I=N+I}for(R!==0&&(I=R.toString(16)+I);I.length%D!==0;)I="0"+I;return this.negative!==0&&(I="-"+I),I}if(C===(C|0)&&C>=2&&C<=36){var k=f[C],G=p[C];I="";var Y=this.clone();for(Y.negative=0;!Y.isZero();){var F=Y.modrn(G).toString(C);Y=Y.idivn(G),Y.isZero()?I=F+I:I=d[k-F.length]+F+I}for(this.isZero()&&(I="0"+I);I.length%D!==0;)I="0"+I;return this.negative!==0&&(I="-"+I),I}i(!1,"Base should be between 2 and 36")},a.prototype.toNumber=function(){var C=this.words[0];return this.length===2?C+=this.words[1]*67108864:this.length===3&&this.words[2]===1?C+=4503599627370496+this.words[1]*67108864:this.length>2&&i(!1,"Number can only safely store up to 53 bits"),this.negative!==0?-C:C},a.prototype.toJSON=function(){return this.toString(16,2)},o&&(a.prototype.toBuffer=function(C,D){return this.toArrayLike(o,C,D)}),a.prototype.toArray=function(C,D){return this.toArrayLike(Array,C,D)};var v=function(C,D){return C.allocUnsafe?C.allocUnsafe(D):new C(D)};a.prototype.toArrayLike=function(C,D,I){this._strip();var O=this.byteLength(),R=I||Math.max(1,O);i(O<=R,"byte array longer than desired length"),i(R>0,"Requested array length <= 0");var H=v(C,R),j=D==="le"?"LE":"BE";return this["_toArrayLike"+j](H,O),H},a.prototype._toArrayLikeLE=function(C,D){for(var I=0,O=0,R=0,H=0;R<this.length;R++){var j=this.words[R]<<H|O;C[I++]=j&255,I<C.length&&(C[I++]=j>>8&255),I<C.length&&(C[I++]=j>>16&255),H===6?(I<C.length&&(C[I++]=j>>24&255),O=0,H=0):(O=j>>>24,H+=2)}if(I<C.length)for(C[I++]=O;I<C.length;)C[I++]=0},a.prototype._toArrayLikeBE=function(C,D){for(var I=C.length-1,O=0,R=0,H=0;R<this.length;R++){var j=this.words[R]<<H|O;C[I--]=j&255,I>=0&&(C[I--]=j>>8&255),I>=0&&(C[I--]=j>>16&255),H===6?(I>=0&&(C[I--]=j>>24&255),O=0,H=0):(O=j>>>24,H+=2)}if(I>=0)for(C[I--]=O;I>=0;)C[I--]=0},Math.clz32?a.prototype._countBits=function(C){return 32-Math.clz32(C)}:a.prototype._countBits=function(C){var D=C,I=0;return D>=4096&&(I+=13,D>>>=13),D>=64&&(I+=7,D>>>=7),D>=8&&(I+=4,D>>>=4),D>=2&&(I+=2,D>>>=2),I+D},a.prototype._zeroBits=function(C){if(C===0)return 26;var D=C,I=0;return D&8191||(I+=13,D>>>=13),D&127||(I+=7,D>>>=7),D&15||(I+=4,D>>>=4),D&3||(I+=2,D>>>=2),D&1||I++,I},a.prototype.bitLength=function(){var C=this.words[this.length-1],D=this._countBits(C);return(this.length-1)*26+D};function m(P){for(var C=new Array(P.bitLength()),D=0;D<C.length;D++){var I=D/26|0,O=D%26;C[D]=P.words[I]>>>O&1}return C}a.prototype.zeroBits=function(){if(this.isZero())return 0;for(var C=0,D=0;D<this.length;D++){var I=this._zeroBits(this.words[D]);if(C+=I,I!==26)break}return C},a.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},a.prototype.toTwos=function(C){return this.negative!==0?this.abs().inotn(C).iaddn(1):this.clone()},a.prototype.fromTwos=function(C){return this.testn(C-1)?this.notn(C).iaddn(1).ineg():this.clone()},a.prototype.isNeg=function(){return this.negative!==0},a.prototype.neg=function(){return this.clone().ineg()},a.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},a.prototype.iuor=function(C){for(;this.length<C.length;)this.words[this.length++]=0;for(var D=0;D<C.length;D++)this.words[D]=this.words[D]|C.words[D];return this._strip()},a.prototype.ior=function(C){return i((this.negative|C.negative)===0),this.iuor(C)},a.prototype.or=function(C){return this.length>C.length?this.clone().ior(C):C.clone().ior(this)},a.prototype.uor=function(C){return this.length>C.length?this.clone().iuor(C):C.clone().iuor(this)},a.prototype.iuand=function(C){var D;this.length>C.length?D=C:D=this;for(var I=0;I<D.length;I++)this.words[I]=this.words[I]&C.words[I];return this.length=D.length,this._strip()},a.prototype.iand=function(C){return i((this.negative|C.negative)===0),this.iuand(C)},a.prototype.and=function(C){return this.length>C.length?this.clone().iand(C):C.clone().iand(this)},a.prototype.uand=function(C){return this.length>C.length?this.clone().iuand(C):C.clone().iuand(this)},a.prototype.iuxor=function(C){var D,I;this.length>C.length?(D=this,I=C):(D=C,I=this);for(var O=0;O<I.length;O++)this.words[O]=D.words[O]^I.words[O];if(this!==D)for(;O<D.length;O++)this.words[O]=D.words[O];return this.length=D.length,this._strip()},a.prototype.ixor=function(C){return i((this.negative|C.negative)===0),this.iuxor(C)},a.prototype.xor=function(C){return this.length>C.length?this.clone().ixor(C):C.clone().ixor(this)},a.prototype.uxor=function(C){return this.length>C.length?this.clone().iuxor(C):C.clone().iuxor(this)},a.prototype.inotn=function(C){i(typeof C=="number"&&C>=0);var D=Math.ceil(C/26)|0,I=C%26;this._expand(D),I>0&&D--;for(var O=0;O<D;O++)this.words[O]=~this.words[O]&67108863;return I>0&&(this.words[O]=~this.words[O]&67108863>>26-I),this._strip()},a.prototype.notn=function(C){return this.clone().inotn(C)},a.prototype.setn=function(C,D){i(typeof C=="number"&&C>=0);var I=C/26|0,O=C%26;return this._expand(I+1),D?this.words[I]=this.words[I]|1<<O:this.words[I]=this.words[I]&~(1<<O),this._strip()},a.prototype.iadd=function(C){var D;if(this.negative!==0&&C.negative===0)return this.negative=0,D=this.isub(C),this.negative^=1,this._normSign();if(this.negative===0&&C.negative!==0)return C.negative=0,D=this.isub(C),C.negative=1,D._normSign();var I,O;this.length>C.length?(I=this,O=C):(I=C,O=this);for(var R=0,H=0;H<O.length;H++)D=(I.words[H]|0)+(O.words[H]|0)+R,this.words[H]=D&67108863,R=D>>>26;for(;R!==0&&H<I.length;H++)D=(I.words[H]|0)+R,this.words[H]=D&67108863,R=D>>>26;if(this.length=I.length,R!==0)this.words[this.length]=R,this.length++;else if(I!==this)for(;H<I.length;H++)this.words[H]=I.words[H];return this},a.prototype.add=function(C){var D;return C.negative!==0&&this.negative===0?(C.negative=0,D=this.sub(C),C.negative^=1,D):C.negative===0&&this.negative!==0?(this.negative=0,D=C.sub(this),this.negative=1,D):this.length>C.length?this.clone().iadd(C):C.clone().iadd(this)},a.prototype.isub=function(C){if(C.negative!==0){C.negative=0;var D=this.iadd(C);return C.negative=1,D._normSign()}else if(this.negative!==0)return this.negative=0,this.iadd(C),this.negative=1,this._normSign();var I=this.cmp(C);if(I===0)return this.negative=0,this.length=1,this.words[0]=0,this;var O,R;I>0?(O=this,R=C):(O=C,R=this);for(var H=0,j=0;j<R.length;j++)D=(O.words[j]|0)-(R.words[j]|0)+H,H=D>>26,this.words[j]=D&67108863;for(;H!==0&&j<O.length;j++)D=(O.words[j]|0)+H,H=D>>26,this.words[j]=D&67108863;if(H===0&&j<O.length&&O!==this)for(;j<O.length;j++)this.words[j]=O.words[j];return this.length=Math.max(this.length,j),O!==this&&(this.negative=1),this._strip()},a.prototype.sub=function(C){return this.clone().isub(C)};function g(P,C,D){D.negative=C.negative^P.negative;var I=P.length+C.length|0;D.length=I,I=I-1|0;var O=P.words[0]|0,R=C.words[0]|0,H=O*R,j=H&67108863,N=H/67108864|0;D.words[0]=j;for(var k=1;k<I;k++){for(var G=N>>>26,Y=N&67108863,F=Math.min(k,C.length-1),Z=Math.max(0,k-P.length+1);Z<=F;Z++){var ne=k-Z|0;O=P.words[ne]|0,R=C.words[Z]|0,H=O*R+Y,G+=H/67108864|0,Y=H&67108863}D.words[k]=Y|0,N=G|0}return N!==0?D.words[k]=N|0:D.length--,D._strip()}var y=function(C,D,I){var O=C.words,R=D.words,H=I.words,j=0,N,k,G,Y=O[0]|0,F=Y&8191,Z=Y>>>13,ne=O[1]|0,re=ne&8191,ae=ne>>>13,he=O[2]|0,se=he&8191,fe=he>>>13,J=O[3]|0,te=J&8191,le=J>>>13,Ae=O[4]|0,xe=Ae&8191,ye=Ae>>>13,Se=O[5]|0,Pe=Se&8191,Ce=Se>>>13,ee=O[6]|0,K=ee&8191,ve=ee>>>13,Me=O[7]|0,Q=Me&8191,W=Me>>>13,V=O[8]|0,z=V&8191,X=V>>>13,de=O[9]|0,pe=de&8191,we=de>>>13,Je=R[0]|0,Qe=Je&8191,Ye=Je>>>13,gt=R[1]|0,ct=gt&8191,be=gt>>>13,ze=R[2]|0,He=ze&8191,$e=ze>>>13,Pt=R[3]|0,St=Pt&8191,rr=Pt>>>13,Ai=R[4]|0,Vr=Ai&8191,Ft=Ai>>>13,on=R[5]|0,Sr=on&8191,qr=on>>>13,ji=R[6]|0,Fr=ji&8191,Jr=ji>>>13,ce=R[7]|0,De=ce&8191,Oe=ce>>>13,Le=R[8]|0,Ne=Le&8191,ot=Le>>>13,Gt=R[9]|0,wt=Gt&8191,ft=Gt>>>13;I.negative=C.negative^D.negative,I.length=19,N=Math.imul(F,Qe),k=Math.imul(F,Ye),k=k+Math.imul(Z,Qe)|0,G=Math.imul(Z,Ye);var Rr=(j+N|0)+((k&8191)<<13)|0;j=(G+(k>>>13)|0)+(Rr>>>26)|0,Rr&=67108863,N=Math.imul(re,Qe),k=Math.imul(re,Ye),k=k+Math.imul(ae,Qe)|0,G=Math.imul(ae,Ye),N=N+Math.imul(F,ct)|0,k=k+Math.imul(F,be)|0,k=k+Math.imul(Z,ct)|0,G=G+Math.imul(Z,be)|0;var nr=(j+N|0)+((k&8191)<<13)|0;j=(G+(k>>>13)|0)+(nr>>>26)|0,nr&=67108863,N=Math.imul(se,Qe),k=Math.imul(se,Ye),k=k+Math.imul(fe,Qe)|0,G=Math.imul(fe,Ye),N=N+Math.imul(re,ct)|0,k=k+Math.imul(re,be)|0,k=k+Math.imul(ae,ct)|0,G=G+Math.imul(ae,be)|0,N=N+Math.imul(F,He)|0,k=k+Math.imul(F,$e)|0,k=k+Math.imul(Z,He)|0,G=G+Math.imul(Z,$e)|0;var ur=(j+N|0)+((k&8191)<<13)|0;j=(G+(k>>>13)|0)+(ur>>>26)|0,ur&=67108863,N=Math.imul(te,Qe),k=Math.imul(te,Ye),k=k+Math.imul(le,Qe)|0,G=Math.imul(le,Ye),N=N+Math.imul(se,ct)|0,k=k+Math.imul(se,be)|0,k=k+Math.imul(fe,ct)|0,G=G+Math.imul(fe,be)|0,N=N+Math.imul(re,He)|0,k=k+Math.imul(re,$e)|0,k=k+Math.imul(ae,He)|0,G=G+Math.imul(ae,$e)|0,N=N+Math.imul(F,St)|0,k=k+Math.imul(F,rr)|0,k=k+Math.imul(Z,St)|0,G=G+Math.imul(Z,rr)|0;var Qt=(j+N|0)+((k&8191)<<13)|0;j=(G+(k>>>13)|0)+(Qt>>>26)|0,Qt&=67108863,N=Math.imul(xe,Qe),k=Math.imul(xe,Ye),k=k+Math.imul(ye,Qe)|0,G=Math.imul(ye,Ye),N=N+Math.imul(te,ct)|0,k=k+Math.imul(te,be)|0,k=k+Math.imul(le,ct)|0,G=G+Math.imul(le,be)|0,N=N+Math.imul(se,He)|0,k=k+Math.imul(se,$e)|0,k=k+Math.imul(fe,He)|0,G=G+Math.imul(fe,$e)|0,N=N+Math.imul(re,St)|0,k=k+Math.imul(re,rr)|0,k=k+Math.imul(ae,St)|0,G=G+Math.imul(ae,rr)|0,N=N+Math.imul(F,Vr)|0,k=k+Math.imul(F,Ft)|0,k=k+Math.imul(Z,Vr)|0,G=G+Math.imul(Z,Ft)|0;var Wi=(j+N|0)+((k&8191)<<13)|0;j=(G+(k>>>13)|0)+(Wi>>>26)|0,Wi&=67108863,N=Math.imul(Pe,Qe),k=Math.imul(Pe,Ye),k=k+Math.imul(Ce,Qe)|0,G=Math.imul(Ce,Ye),N=N+Math.imul(xe,ct)|0,k=k+Math.imul(xe,be)|0,k=k+Math.imul(ye,ct)|0,G=G+Math.imul(ye,be)|0,N=N+Math.imul(te,He)|0,k=k+Math.imul(te,$e)|0,k=k+Math.imul(le,He)|0,G=G+Math.imul(le,$e)|0,N=N+Math.imul(se,St)|0,k=k+Math.imul(se,rr)|0,k=k+Math.imul(fe,St)|0,G=G+Math.imul(fe,rr)|0,N=N+Math.imul(re,Vr)|0,k=k+Math.imul(re,Ft)|0,k=k+Math.imul(ae,Vr)|0,G=G+Math.imul(ae,Ft)|0,N=N+Math.imul(F,Sr)|0,k=k+Math.imul(F,qr)|0,k=k+Math.imul(Z,Sr)|0,G=G+Math.imul(Z,qr)|0;var Ja=(j+N|0)+((k&8191)<<13)|0;j=(G+(k>>>13)|0)+(Ja>>>26)|0,Ja&=67108863,N=Math.imul(K,Qe),k=Math.imul(K,Ye),k=k+Math.imul(ve,Qe)|0,G=Math.imul(ve,Ye),N=N+Math.imul(Pe,ct)|0,k=k+Math.imul(Pe,be)|0,k=k+Math.imul(Ce,ct)|0,G=G+Math.imul(Ce,be)|0,N=N+Math.imul(xe,He)|0,k=k+Math.imul(xe,$e)|0,k=k+Math.imul(ye,He)|0,G=G+Math.imul(ye,$e)|0,N=N+Math.imul(te,St)|0,k=k+Math.imul(te,rr)|0,k=k+Math.imul(le,St)|0,G=G+Math.imul(le,rr)|0,N=N+Math.imul(se,Vr)|0,k=k+Math.imul(se,Ft)|0,k=k+Math.imul(fe,Vr)|0,G=G+Math.imul(fe,Ft)|0,N=N+Math.imul(re,Sr)|0,k=k+Math.imul(re,qr)|0,k=k+Math.imul(ae,Sr)|0,G=G+Math.imul(ae,qr)|0,N=N+Math.imul(F,Fr)|0,k=k+Math.imul(F,Jr)|0,k=k+Math.imul(Z,Fr)|0,G=G+Math.imul(Z,Jr)|0;var Ts=(j+N|0)+((k&8191)<<13)|0;j=(G+(k>>>13)|0)+(Ts>>>26)|0,Ts&=67108863,N=Math.imul(Q,Qe),k=Math.imul(Q,Ye),k=k+Math.imul(W,Qe)|0,G=Math.imul(W,Ye),N=N+Math.imul(K,ct)|0,k=k+Math.imul(K,be)|0,k=k+Math.imul(ve,ct)|0,G=G+Math.imul(ve,be)|0,N=N+Math.imul(Pe,He)|0,k=k+Math.imul(Pe,$e)|0,k=k+Math.imul(Ce,He)|0,G=G+Math.imul(Ce,$e)|0,N=N+Math.imul(xe,St)|0,k=k+Math.imul(xe,rr)|0,k=k+Math.imul(ye,St)|0,G=G+Math.imul(ye,rr)|0,N=N+Math.imul(te,Vr)|0,k=k+Math.imul(te,Ft)|0,k=k+Math.imul(le,Vr)|0,G=G+Math.imul(le,Ft)|0,N=N+Math.imul(se,Sr)|0,k=k+Math.imul(se,qr)|0,k=k+Math.imul(fe,Sr)|0,G=G+Math.imul(fe,qr)|0,N=N+Math.imul(re,Fr)|0,k=k+Math.imul(re,Jr)|0,k=k+Math.imul(ae,Fr)|0,G=G+Math.imul(ae,Jr)|0,N=N+Math.imul(F,De)|0,k=k+Math.imul(F,Oe)|0,k=k+Math.imul(Z,De)|0,G=G+Math.imul(Z,Oe)|0;var Bi=(j+N|0)+((k&8191)<<13)|0;j=(G+(k>>>13)|0)+(Bi>>>26)|0,Bi&=67108863,N=Math.imul(z,Qe),k=Math.imul(z,Ye),k=k+Math.imul(X,Qe)|0,G=Math.imul(X,Ye),N=N+Math.imul(Q,ct)|0,k=k+Math.imul(Q,be)|0,k=k+Math.imul(W,ct)|0,G=G+Math.imul(W,be)|0,N=N+Math.imul(K,He)|0,k=k+Math.imul(K,$e)|0,k=k+Math.imul(ve,He)|0,G=G+Math.imul(ve,$e)|0,N=N+Math.imul(Pe,St)|0,k=k+Math.imul(Pe,rr)|0,k=k+Math.imul(Ce,St)|0,G=G+Math.imul(Ce,rr)|0,N=N+Math.imul(xe,Vr)|0,k=k+Math.imul(xe,Ft)|0,k=k+Math.imul(ye,Vr)|0,G=G+Math.imul(ye,Ft)|0,N=N+Math.imul(te,Sr)|0,k=k+Math.imul(te,qr)|0,k=k+Math.imul(le,Sr)|0,G=G+Math.imul(le,qr)|0,N=N+Math.imul(se,Fr)|0,k=k+Math.imul(se,Jr)|0,k=k+Math.imul(fe,Fr)|0,G=G+Math.imul(fe,Jr)|0,N=N+Math.imul(re,De)|0,k=k+Math.imul(re,Oe)|0,k=k+Math.imul(ae,De)|0,G=G+Math.imul(ae,Oe)|0,N=N+Math.imul(F,Ne)|0,k=k+Math.imul(F,ot)|0,k=k+Math.imul(Z,Ne)|0,G=G+Math.imul(Z,ot)|0;var Cr=(j+N|0)+((k&8191)<<13)|0;j=(G+(k>>>13)|0)+(Cr>>>26)|0,Cr&=67108863,N=Math.imul(pe,Qe),k=Math.imul(pe,Ye),k=k+Math.imul(we,Qe)|0,G=Math.imul(we,Ye),N=N+Math.imul(z,ct)|0,k=k+Math.imul(z,be)|0,k=k+Math.imul(X,ct)|0,G=G+Math.imul(X,be)|0,N=N+Math.imul(Q,He)|0,k=k+Math.imul(Q,$e)|0,k=k+Math.imul(W,He)|0,G=G+Math.imul(W,$e)|0,N=N+Math.imul(K,St)|0,k=k+Math.imul(K,rr)|0,k=k+Math.imul(ve,St)|0,G=G+Math.imul(ve,rr)|0,N=N+Math.imul(Pe,Vr)|0,k=k+Math.imul(Pe,Ft)|0,k=k+Math.imul(Ce,Vr)|0,G=G+Math.imul(Ce,Ft)|0,N=N+Math.imul(xe,Sr)|0,k=k+Math.imul(xe,qr)|0,k=k+Math.imul(ye,Sr)|0,G=G+Math.imul(ye,qr)|0,N=N+Math.imul(te,Fr)|0,k=k+Math.imul(te,Jr)|0,k=k+Math.imul(le,Fr)|0,G=G+Math.imul(le,Jr)|0,N=N+Math.imul(se,De)|0,k=k+Math.imul(se,Oe)|0,k=k+Math.imul(fe,De)|0,G=G+Math.imul(fe,Oe)|0,N=N+Math.imul(re,Ne)|0,k=k+Math.imul(re,ot)|0,k=k+Math.imul(ae,Ne)|0,G=G+Math.imul(ae,ot)|0,N=N+Math.imul(F,wt)|0,k=k+Math.imul(F,ft)|0,k=k+Math.imul(Z,wt)|0,G=G+Math.imul(Z,ft)|0;var Eo=(j+N|0)+((k&8191)<<13)|0;j=(G+(k>>>13)|0)+(Eo>>>26)|0,Eo&=67108863,N=Math.imul(pe,ct),k=Math.imul(pe,be),k=k+Math.imul(we,ct)|0,G=Math.imul(we,be),N=N+Math.imul(z,He)|0,k=k+Math.imul(z,$e)|0,k=k+Math.imul(X,He)|0,G=G+Math.imul(X,$e)|0,N=N+Math.imul(Q,St)|0,k=k+Math.imul(Q,rr)|0,k=k+Math.imul(W,St)|0,G=G+Math.imul(W,rr)|0,N=N+Math.imul(K,Vr)|0,k=k+Math.imul(K,Ft)|0,k=k+Math.imul(ve,Vr)|0,G=G+Math.imul(ve,Ft)|0,N=N+Math.imul(Pe,Sr)|0,k=k+Math.imul(Pe,qr)|0,k=k+Math.imul(Ce,Sr)|0,G=G+Math.imul(Ce,qr)|0,N=N+Math.imul(xe,Fr)|0,k=k+Math.imul(xe,Jr)|0,k=k+Math.imul(ye,Fr)|0,G=G+Math.imul(ye,Jr)|0,N=N+Math.imul(te,De)|0,k=k+Math.imul(te,Oe)|0,k=k+Math.imul(le,De)|0,G=G+Math.imul(le,Oe)|0,N=N+Math.imul(se,Ne)|0,k=k+Math.imul(se,ot)|0,k=k+Math.imul(fe,Ne)|0,G=G+Math.imul(fe,ot)|0,N=N+Math.imul(re,wt)|0,k=k+Math.imul(re,ft)|0,k=k+Math.imul(ae,wt)|0,G=G+Math.imul(ae,ft)|0;var gr=(j+N|0)+((k&8191)<<13)|0;j=(G+(k>>>13)|0)+(gr>>>26)|0,gr&=67108863,N=Math.imul(pe,He),k=Math.imul(pe,$e),k=k+Math.imul(we,He)|0,G=Math.imul(we,$e),N=N+Math.imul(z,St)|0,k=k+Math.imul(z,rr)|0,k=k+Math.imul(X,St)|0,G=G+Math.imul(X,rr)|0,N=N+Math.imul(Q,Vr)|0,k=k+Math.imul(Q,Ft)|0,k=k+Math.imul(W,Vr)|0,G=G+Math.imul(W,Ft)|0,N=N+Math.imul(K,Sr)|0,k=k+Math.imul(K,qr)|0,k=k+Math.imul(ve,Sr)|0,G=G+Math.imul(ve,qr)|0,N=N+Math.imul(Pe,Fr)|0,k=k+Math.imul(Pe,Jr)|0,k=k+Math.imul(Ce,Fr)|0,G=G+Math.imul(Ce,Jr)|0,N=N+Math.imul(xe,De)|0,k=k+Math.imul(xe,Oe)|0,k=k+Math.imul(ye,De)|0,G=G+Math.imul(ye,Oe)|0,N=N+Math.imul(te,Ne)|0,k=k+Math.imul(te,ot)|0,k=k+Math.imul(le,Ne)|0,G=G+Math.imul(le,ot)|0,N=N+Math.imul(se,wt)|0,k=k+Math.imul(se,ft)|0,k=k+Math.imul(fe,wt)|0,G=G+Math.imul(fe,ft)|0;var Ps=(j+N|0)+((k&8191)<<13)|0;j=(G+(k>>>13)|0)+(Ps>>>26)|0,Ps&=67108863,N=Math.imul(pe,St),k=Math.imul(pe,rr),k=k+Math.imul(we,St)|0,G=Math.imul(we,rr),N=N+Math.imul(z,Vr)|0,k=k+Math.imul(z,Ft)|0,k=k+Math.imul(X,Vr)|0,G=G+Math.imul(X,Ft)|0,N=N+Math.imul(Q,Sr)|0,k=k+Math.imul(Q,qr)|0,k=k+Math.imul(W,Sr)|0,G=G+Math.imul(W,qr)|0,N=N+Math.imul(K,Fr)|0,k=k+Math.imul(K,Jr)|0,k=k+Math.imul(ve,Fr)|0,G=G+Math.imul(ve,Jr)|0,N=N+Math.imul(Pe,De)|0,k=k+Math.imul(Pe,Oe)|0,k=k+Math.imul(Ce,De)|0,G=G+Math.imul(Ce,Oe)|0,N=N+Math.imul(xe,Ne)|0,k=k+Math.imul(xe,ot)|0,k=k+Math.imul(ye,Ne)|0,G=G+Math.imul(ye,ot)|0,N=N+Math.imul(te,wt)|0,k=k+Math.imul(te,ft)|0,k=k+Math.imul(le,wt)|0,G=G+Math.imul(le,ft)|0;var Gl=(j+N|0)+((k&8191)<<13)|0;j=(G+(k>>>13)|0)+(Gl>>>26)|0,Gl&=67108863,N=Math.imul(pe,Vr),k=Math.imul(pe,Ft),k=k+Math.imul(we,Vr)|0,G=Math.imul(we,Ft),N=N+Math.imul(z,Sr)|0,k=k+Math.imul(z,qr)|0,k=k+Math.imul(X,Sr)|0,G=G+Math.imul(X,qr)|0,N=N+Math.imul(Q,Fr)|0,k=k+Math.imul(Q,Jr)|0,k=k+Math.imul(W,Fr)|0,G=G+Math.imul(W,Jr)|0,N=N+Math.imul(K,De)|0,k=k+Math.imul(K,Oe)|0,k=k+Math.imul(ve,De)|0,G=G+Math.imul(ve,Oe)|0,N=N+Math.imul(Pe,Ne)|0,k=k+Math.imul(Pe,ot)|0,k=k+Math.imul(Ce,Ne)|0,G=G+Math.imul(Ce,ot)|0,N=N+Math.imul(xe,wt)|0,k=k+Math.imul(xe,ft)|0,k=k+Math.imul(ye,wt)|0,G=G+Math.imul(ye,ft)|0;var Ks=(j+N|0)+((k&8191)<<13)|0;j=(G+(k>>>13)|0)+(Ks>>>26)|0,Ks&=67108863,N=Math.imul(pe,Sr),k=Math.imul(pe,qr),k=k+Math.imul(we,Sr)|0,G=Math.imul(we,qr),N=N+Math.imul(z,Fr)|0,k=k+Math.imul(z,Jr)|0,k=k+Math.imul(X,Fr)|0,G=G+Math.imul(X,Jr)|0,N=N+Math.imul(Q,De)|0,k=k+Math.imul(Q,Oe)|0,k=k+Math.imul(W,De)|0,G=G+Math.imul(W,Oe)|0,N=N+Math.imul(K,Ne)|0,k=k+Math.imul(K,ot)|0,k=k+Math.imul(ve,Ne)|0,G=G+Math.imul(ve,ot)|0,N=N+Math.imul(Pe,wt)|0,k=k+Math.imul(Pe,ft)|0,k=k+Math.imul(Ce,wt)|0,G=G+Math.imul(Ce,ft)|0;var ts=(j+N|0)+((k&8191)<<13)|0;j=(G+(k>>>13)|0)+(ts>>>26)|0,ts&=67108863,N=Math.imul(pe,Fr),k=Math.imul(pe,Jr),k=k+Math.imul(we,Fr)|0,G=Math.imul(we,Jr),N=N+Math.imul(z,De)|0,k=k+Math.imul(z,Oe)|0,k=k+Math.imul(X,De)|0,G=G+Math.imul(X,Oe)|0,N=N+Math.imul(Q,Ne)|0,k=k+Math.imul(Q,ot)|0,k=k+Math.imul(W,Ne)|0,G=G+Math.imul(W,ot)|0,N=N+Math.imul(K,wt)|0,k=k+Math.imul(K,ft)|0,k=k+Math.imul(ve,wt)|0,G=G+Math.imul(ve,ft)|0;var $=(j+N|0)+((k&8191)<<13)|0;j=(G+(k>>>13)|0)+($>>>26)|0,$&=67108863,N=Math.imul(pe,De),k=Math.imul(pe,Oe),k=k+Math.imul(we,De)|0,G=Math.imul(we,Oe),N=N+Math.imul(z,Ne)|0,k=k+Math.imul(z,ot)|0,k=k+Math.imul(X,Ne)|0,G=G+Math.imul(X,ot)|0,N=N+Math.imul(Q,wt)|0,k=k+Math.imul(Q,ft)|0,k=k+Math.imul(W,wt)|0,G=G+Math.imul(W,ft)|0;var ie=(j+N|0)+((k&8191)<<13)|0;j=(G+(k>>>13)|0)+(ie>>>26)|0,ie&=67108863,N=Math.imul(pe,Ne),k=Math.imul(pe,ot),k=k+Math.imul(we,Ne)|0,G=Math.imul(we,ot),N=N+Math.imul(z,wt)|0,k=k+Math.imul(z,ft)|0,k=k+Math.imul(X,wt)|0,G=G+Math.imul(X,ft)|0;var ge=(j+N|0)+((k&8191)<<13)|0;j=(G+(k>>>13)|0)+(ge>>>26)|0,ge&=67108863,N=Math.imul(pe,wt),k=Math.imul(pe,ft),k=k+Math.imul(we,wt)|0,G=Math.imul(we,ft);var oe=(j+N|0)+((k&8191)<<13)|0;return j=(G+(k>>>13)|0)+(oe>>>26)|0,oe&=67108863,H[0]=Rr,H[1]=nr,H[2]=ur,H[3]=Qt,H[4]=Wi,H[5]=Ja,H[6]=Ts,H[7]=Bi,H[8]=Cr,H[9]=Eo,H[10]=gr,H[11]=Ps,H[12]=Gl,H[13]=Ks,H[14]=ts,H[15]=$,H[16]=ie,H[17]=ge,H[18]=oe,j!==0&&(H[19]=j,I.length++),I};Math.imul||(y=g);function x(P,C,D){D.negative=C.negative^P.negative,D.length=P.length+C.length;for(var I=0,O=0,R=0;R<D.length-1;R++){var H=O;O=0;for(var j=I&67108863,N=Math.min(R,C.length-1),k=Math.max(0,R-P.length+1);k<=N;k++){var G=R-k,Y=P.words[G]|0,F=C.words[k]|0,Z=Y*F,ne=Z&67108863;H=H+(Z/67108864|0)|0,ne=ne+j|0,j=ne&67108863,H=H+(ne>>>26)|0,O+=H>>>26,H&=67108863}D.words[R]=j,I=H,H=O}return I!==0?D.words[R]=I:D.length--,D._strip()}function b(P,C,D){return x(P,C,D)}a.prototype.mulTo=function(C,D){var I,O=this.length+C.length;return this.length===10&&C.length===10?I=y(this,C,D):O<63?I=g(this,C,D):O<1024?I=x(this,C,D):I=b(this,C,D),I},a.prototype.mul=function(C){var D=new a(null);return D.words=new Array(this.length+C.length),this.mulTo(C,D)},a.prototype.mulf=function(C){var D=new a(null);return D.words=new Array(this.length+C.length),b(this,C,D)},a.prototype.imul=function(C){return this.clone().mulTo(C,this)},a.prototype.imuln=function(C){var D=C<0;D&&(C=-C),i(typeof C=="number"),i(C<67108864);for(var I=0,O=0;O<this.length;O++){var R=(this.words[O]|0)*C,H=(R&67108863)+(I&67108863);I>>=26,I+=R/67108864|0,I+=H>>>26,this.words[O]=H&67108863}return I!==0&&(this.words[O]=I,this.length++),D?this.ineg():this},a.prototype.muln=function(C){return this.clone().imuln(C)},a.prototype.sqr=function(){return this.mul(this)},a.prototype.isqr=function(){return this.imul(this.clone())},a.prototype.pow=function(C){var D=m(C);if(D.length===0)return new a(1);for(var I=this,O=0;O<D.length&&D[O]===0;O++,I=I.sqr());if(++O<D.length)for(var R=I.sqr();O<D.length;O++,R=R.sqr())D[O]!==0&&(I=I.mul(R));return I},a.prototype.iushln=function(C){i(typeof C=="number"&&C>=0);var D=C%26,I=(C-D)/26,O=67108863>>>26-D<<26-D,R;if(D!==0){var H=0;for(R=0;R<this.length;R++){var j=this.words[R]&O,N=(this.words[R]|0)-j<<D;this.words[R]=N|H,H=j>>>26-D}H&&(this.words[R]=H,this.length++)}if(I!==0){for(R=this.length-1;R>=0;R--)this.words[R+I]=this.words[R];for(R=0;R<I;R++)this.words[R]=0;this.length+=I}return this._strip()},a.prototype.ishln=function(C){return i(this.negative===0),this.iushln(C)},a.prototype.iushrn=function(C,D,I){i(typeof C=="number"&&C>=0);var O;D?O=(D-D%26)/26:O=0;var R=C%26,H=Math.min((C-R)/26,this.length),j=67108863^67108863>>>R<<R,N=I;if(O-=H,O=Math.max(0,O),N){for(var k=0;k<H;k++)N.words[k]=this.words[k];N.length=H}if(H!==0)if(this.length>H)for(this.length-=H,k=0;k<this.length;k++)this.words[k]=this.words[k+H];else this.words[0]=0,this.length=1;var G=0;for(k=this.length-1;k>=0&&(G!==0||k>=O);k--){var Y=this.words[k]|0;this.words[k]=G<<26-R|Y>>>R,G=Y&j}return N&&G!==0&&(N.words[N.length++]=G),this.length===0&&(this.words[0]=0,this.length=1),this._strip()},a.prototype.ishrn=function(C,D,I){return i(this.negative===0),this.iushrn(C,D,I)},a.prototype.shln=function(C){return this.clone().ishln(C)},a.prototype.ushln=function(C){return this.clone().iushln(C)},a.prototype.shrn=function(C){return this.clone().ishrn(C)},a.prototype.ushrn=function(C){return this.clone().iushrn(C)},a.prototype.testn=function(C){i(typeof C=="number"&&C>=0);var D=C%26,I=(C-D)/26,O=1<<D;if(this.length<=I)return!1;var R=this.words[I];return!!(R&O)},a.prototype.imaskn=function(C){i(typeof C=="number"&&C>=0);var D=C%26,I=(C-D)/26;if(i(this.negative===0,"imaskn works only with positive numbers"),this.length<=I)return this;if(D!==0&&I++,this.length=Math.min(I,this.length),D!==0){var O=67108863^67108863>>>D<<D;this.words[this.length-1]&=O}return this._strip()},a.prototype.maskn=function(C){return this.clone().imaskn(C)},a.prototype.iaddn=function(C){return i(typeof C=="number"),i(C<67108864),C<0?this.isubn(-C):this.negative!==0?this.length===1&&(this.words[0]|0)<=C?(this.words[0]=C-(this.words[0]|0),this.negative=0,this):(this.negative=0,this.isubn(C),this.negative=1,this):this._iaddn(C)},a.prototype._iaddn=function(C){this.words[0]+=C;for(var D=0;D<this.length&&this.words[D]>=67108864;D++)this.words[D]-=67108864,D===this.length-1?this.words[D+1]=1:this.words[D+1]++;return this.length=Math.max(this.length,D+1),this},a.prototype.isubn=function(C){if(i(typeof C=="number"),i(C<67108864),C<0)return this.iaddn(-C);if(this.negative!==0)return this.negative=0,this.iaddn(C),this.negative=1,this;if(this.words[0]-=C,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var D=0;D<this.length&&this.words[D]<0;D++)this.words[D]+=67108864,this.words[D+1]-=1;return this._strip()},a.prototype.addn=function(C){return this.clone().iaddn(C)},a.prototype.subn=function(C){return this.clone().isubn(C)},a.prototype.iabs=function(){return this.negative=0,this},a.prototype.abs=function(){return this.clone().iabs()},a.prototype._ishlnsubmul=function(C,D,I){var O=C.length+I,R;this._expand(O);var H,j=0;for(R=0;R<C.length;R++){H=(this.words[R+I]|0)+j;var N=(C.words[R]|0)*D;H-=N&67108863,j=(H>>26)-(N/67108864|0),this.words[R+I]=H&67108863}for(;R<this.length-I;R++)H=(this.words[R+I]|0)+j,j=H>>26,this.words[R+I]=H&67108863;if(j===0)return this._strip();for(i(j===-1),j=0,R=0;R<this.length;R++)H=-(this.words[R]|0)+j,j=H>>26,this.words[R]=H&67108863;return this.negative=1,this._strip()},a.prototype._wordDiv=function(C,D){var I=this.length-C.length,O=this.clone(),R=C,H=R.words[R.length-1]|0,j=this._countBits(H);I=26-j,I!==0&&(R=R.ushln(I),O.iushln(I),H=R.words[R.length-1]|0);var N=O.length-R.length,k;if(D!=="mod"){k=new a(null),k.length=N+1,k.words=new Array(k.length);for(var G=0;G<k.length;G++)k.words[G]=0}var Y=O.clone()._ishlnsubmul(R,1,N);Y.negative===0&&(O=Y,k&&(k.words[N]=1));for(var F=N-1;F>=0;F--){var Z=(O.words[R.length+F]|0)*67108864+(O.words[R.length+F-1]|0);for(Z=Math.min(Z/H|0,67108863),O._ishlnsubmul(R,Z,F);O.negative!==0;)Z--,O.negative=0,O._ishlnsubmul(R,1,F),O.isZero()||(O.negative^=1);k&&(k.words[F]=Z)}return k&&k._strip(),O._strip(),D!=="div"&&I!==0&&O.iushrn(I),{div:k||null,mod:O}},a.prototype.divmod=function(C,D,I){if(i(!C.isZero()),this.isZero())return{div:new a(0),mod:new a(0)};var O,R,H;return this.negative!==0&&C.negative===0?(H=this.neg().divmod(C,D),D!=="mod"&&(O=H.div.neg()),D!=="div"&&(R=H.mod.neg(),I&&R.negative!==0&&R.iadd(C)),{div:O,mod:R}):this.negative===0&&C.negative!==0?(H=this.divmod(C.neg(),D),D!=="mod"&&(O=H.div.neg()),{div:O,mod:H.mod}):this.negative&C.negative?(H=this.neg().divmod(C.neg(),D),D!=="div"&&(R=H.mod.neg(),I&&R.negative!==0&&R.isub(C)),{div:H.div,mod:R}):C.length>this.length||this.cmp(C)<0?{div:new a(0),mod:this}:C.length===1?D==="div"?{div:this.divn(C.words[0]),mod:null}:D==="mod"?{div:null,mod:new a(this.modrn(C.words[0]))}:{div:this.divn(C.words[0]),mod:new a(this.modrn(C.words[0]))}:this._wordDiv(C,D)},a.prototype.div=function(C){return this.divmod(C,"div",!1).div},a.prototype.mod=function(C){return this.divmod(C,"mod",!1).mod},a.prototype.umod=function(C){return this.divmod(C,"mod",!0).mod},a.prototype.divRound=function(C){var D=this.divmod(C);if(D.mod.isZero())return D.div;var I=D.div.negative!==0?D.mod.isub(C):D.mod,O=C.ushrn(1),R=C.andln(1),H=I.cmp(O);return H<0||R===1&&H===0?D.div:D.div.negative!==0?D.div.isubn(1):D.div.iaddn(1)},a.prototype.modrn=function(C){var D=C<0;D&&(C=-C),i(C<=67108863);for(var I=(1<<26)%C,O=0,R=this.length-1;R>=0;R--)O=(I*O+(this.words[R]|0))%C;return D?-O:O},a.prototype.modn=function(C){return this.modrn(C)},a.prototype.idivn=function(C){var D=C<0;D&&(C=-C),i(C<=67108863);for(var I=0,O=this.length-1;O>=0;O--){var R=(this.words[O]|0)+I*67108864;this.words[O]=R/C|0,I=R%C}return this._strip(),D?this.ineg():this},a.prototype.divn=function(C){return this.clone().idivn(C)},a.prototype.egcd=function(C){i(C.negative===0),i(!C.isZero());var D=this,I=C.clone();D.negative!==0?D=D.umod(C):D=D.clone();for(var O=new a(1),R=new a(0),H=new a(0),j=new a(1),N=0;D.isEven()&&I.isEven();)D.iushrn(1),I.iushrn(1),++N;for(var k=I.clone(),G=D.clone();!D.isZero();){for(var Y=0,F=1;!(D.words[0]&F)&&Y<26;++Y,F<<=1);if(Y>0)for(D.iushrn(Y);Y-- >0;)(O.isOdd()||R.isOdd())&&(O.iadd(k),R.isub(G)),O.iushrn(1),R.iushrn(1);for(var Z=0,ne=1;!(I.words[0]&ne)&&Z<26;++Z,ne<<=1);if(Z>0)for(I.iushrn(Z);Z-- >0;)(H.isOdd()||j.isOdd())&&(H.iadd(k),j.isub(G)),H.iushrn(1),j.iushrn(1);D.cmp(I)>=0?(D.isub(I),O.isub(H),R.isub(j)):(I.isub(D),H.isub(O),j.isub(R))}return{a:H,b:j,gcd:I.iushln(N)}},a.prototype._invmp=function(C){i(C.negative===0),i(!C.isZero());var D=this,I=C.clone();D.negative!==0?D=D.umod(C):D=D.clone();for(var O=new a(1),R=new a(0),H=I.clone();D.cmpn(1)>0&&I.cmpn(1)>0;){for(var j=0,N=1;!(D.words[0]&N)&&j<26;++j,N<<=1);if(j>0)for(D.iushrn(j);j-- >0;)O.isOdd()&&O.iadd(H),O.iushrn(1);for(var k=0,G=1;!(I.words[0]&G)&&k<26;++k,G<<=1);if(k>0)for(I.iushrn(k);k-- >0;)R.isOdd()&&R.iadd(H),R.iushrn(1);D.cmp(I)>=0?(D.isub(I),O.isub(R)):(I.isub(D),R.isub(O))}var Y;return D.cmpn(1)===0?Y=O:Y=R,Y.cmpn(0)<0&&Y.iadd(C),Y},a.prototype.gcd=function(C){if(this.isZero())return C.abs();if(C.isZero())return this.abs();var D=this.clone(),I=C.clone();D.negative=0,I.negative=0;for(var O=0;D.isEven()&&I.isEven();O++)D.iushrn(1),I.iushrn(1);do{for(;D.isEven();)D.iushrn(1);for(;I.isEven();)I.iushrn(1);var R=D.cmp(I);if(R<0){var H=D;D=I,I=H}else if(R===0||I.cmpn(1)===0)break;D.isub(I)}while(!0);return I.iushln(O)},a.prototype.invm=function(C){return this.egcd(C).a.umod(C)},a.prototype.isEven=function(){return(this.words[0]&1)===0},a.prototype.isOdd=function(){return(this.words[0]&1)===1},a.prototype.andln=function(C){return this.words[0]&C},a.prototype.bincn=function(C){i(typeof C=="number");var D=C%26,I=(C-D)/26,O=1<<D;if(this.length<=I)return this._expand(I+1),this.words[I]|=O,this;for(var R=O,H=I;R!==0&&H<this.length;H++){var j=this.words[H]|0;j+=R,R=j>>>26,j&=67108863,this.words[H]=j}return R!==0&&(this.words[H]=R,this.length++),this},a.prototype.isZero=function(){return this.length===1&&this.words[0]===0},a.prototype.cmpn=function(C){var D=C<0;if(this.negative!==0&&!D)return-1;if(this.negative===0&&D)return 1;this._strip();var I;if(this.length>1)I=1;else{D&&(C=-C),i(C<=67108863,"Number is too big");var O=this.words[0]|0;I=O===C?0:O<C?-1:1}return this.negative!==0?-I|0:I},a.prototype.cmp=function(C){if(this.negative!==0&&C.negative===0)return-1;if(this.negative===0&&C.negative!==0)return 1;var D=this.ucmp(C);return this.negative!==0?-D|0:D},a.prototype.ucmp=function(C){if(this.length>C.length)return 1;if(this.length<C.length)return-1;for(var D=0,I=this.length-1;I>=0;I--){var O=this.words[I]|0,R=C.words[I]|0;if(O!==R){O<R?D=-1:O>R&&(D=1);break}}return D},a.prototype.gtn=function(C){return this.cmpn(C)===1},a.prototype.gt=function(C){return this.cmp(C)===1},a.prototype.gten=function(C){return this.cmpn(C)>=0},a.prototype.gte=function(C){return this.cmp(C)>=0},a.prototype.ltn=function(C){return this.cmpn(C)===-1},a.prototype.lt=function(C){return this.cmp(C)===-1},a.prototype.lten=function(C){return this.cmpn(C)<=0},a.prototype.lte=function(C){return this.cmp(C)<=0},a.prototype.eqn=function(C){return this.cmpn(C)===0},a.prototype.eq=function(C){return this.cmp(C)===0},a.red=function(C){return new T(C)},a.prototype.toRed=function(C){return i(!this.red,"Already a number in reduction context"),i(this.negative===0,"red works only with positives"),C.convertTo(this)._forceRed(C)},a.prototype.fromRed=function(){return i(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},a.prototype._forceRed=function(C){return this.red=C,this},a.prototype.forceRed=function(C){return i(!this.red,"Already a number in reduction context"),this._forceRed(C)},a.prototype.redAdd=function(C){return i(this.red,"redAdd works only with red numbers"),this.red.add(this,C)},a.prototype.redIAdd=function(C){return i(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,C)},a.prototype.redSub=function(C){return i(this.red,"redSub works only with red numbers"),this.red.sub(this,C)},a.prototype.redISub=function(C){return i(this.red,"redISub works only with red numbers"),this.red.isub(this,C)},a.prototype.redShl=function(C){return i(this.red,"redShl works only with red numbers"),this.red.shl(this,C)},a.prototype.redMul=function(C){return i(this.red,"redMul works only with red numbers"),this.red._verify2(this,C),this.red.mul(this,C)},a.prototype.redIMul=function(C){return i(this.red,"redMul works only with red numbers"),this.red._verify2(this,C),this.red.imul(this,C)},a.prototype.redSqr=function(){return i(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},a.prototype.redISqr=function(){return i(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},a.prototype.redSqrt=function(){return i(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},a.prototype.redInvm=function(){return i(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},a.prototype.redNeg=function(){return i(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},a.prototype.redPow=function(C){return i(this.red&&!C.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,C)};var _={k256:null,p224:null,p192:null,p25519:null};function w(P,C){this.name=P,this.p=new a(C,16),this.n=this.p.bitLength(),this.k=new a(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}w.prototype._tmp=function(){var C=new a(null);return C.words=new Array(Math.ceil(this.n/13)),C},w.prototype.ireduce=function(C){var D=C,I;do this.split(D,this.tmp),D=this.imulK(D),D=D.iadd(this.tmp),I=D.bitLength();while(I>this.n);var O=I<this.n?-1:D.ucmp(this.p);return O===0?(D.words[0]=0,D.length=1):O>0?D.isub(this.p):D.strip!==void 0?D.strip():D._strip(),D},w.prototype.split=function(C,D){C.iushrn(this.n,0,D)},w.prototype.imulK=function(C){return C.imul(this.k)};function S(){w.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}n(S,w),S.prototype.split=function(C,D){for(var I=4194303,O=Math.min(C.length,9),R=0;R<O;R++)D.words[R]=C.words[R];if(D.length=O,C.length<=9){C.words[0]=0,C.length=1;return}var H=C.words[9];for(D.words[D.length++]=H&I,R=10;R<C.length;R++){var j=C.words[R]|0;C.words[R-10]=(j&I)<<4|H>>>22,H=j}H>>>=22,C.words[R-10]=H,H===0&&C.length>10?C.length-=10:C.length-=9},S.prototype.imulK=function(C){C.words[C.length]=0,C.words[C.length+1]=0,C.length+=2;for(var D=0,I=0;I<C.length;I++){var O=C.words[I]|0;D+=O*977,C.words[I]=D&67108863,D=O*64+(D/67108864|0)}return C.words[C.length-1]===0&&(C.length--,C.words[C.length-1]===0&&C.length--),C};function A(){w.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}n(A,w);function M(){w.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}n(M,w);function E(){w.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}n(E,w),E.prototype.imulK=function(C){for(var D=0,I=0;I<C.length;I++){var O=(C.words[I]|0)*19+D,R=O&67108863;O>>>=26,C.words[I]=R,D=O}return D!==0&&(C.words[C.length++]=D),C},a._prime=function(C){if(_[C])return _[C];var D;if(C==="k256")D=new S;else if(C==="p224")D=new A;else if(C==="p192")D=new M;else if(C==="p25519")D=new E;else throw new Error("Unknown prime "+C);return _[C]=D,D};function T(P){if(typeof P=="string"){var C=a._prime(P);this.m=C.p,this.prime=C}else i(P.gtn(1),"modulus must be greater than 1"),this.m=P,this.prime=null}T.prototype._verify1=function(C){i(C.negative===0,"red works only with positives"),i(C.red,"red works only with red numbers")},T.prototype._verify2=function(C,D){i((C.negative|D.negative)===0,"red works only with positives"),i(C.red&&C.red===D.red,"red works only with red numbers")},T.prototype.imod=function(C){return this.prime?this.prime.ireduce(C)._forceRed(this):(c(C,C.umod(this.m)._forceRed(this)),C)},T.prototype.neg=function(C){return C.isZero()?C.clone():this.m.sub(C)._forceRed(this)},T.prototype.add=function(C,D){this._verify2(C,D);var I=C.add(D);return I.cmp(this.m)>=0&&I.isub(this.m),I._forceRed(this)},T.prototype.iadd=function(C,D){this._verify2(C,D);var I=C.iadd(D);return I.cmp(this.m)>=0&&I.isub(this.m),I},T.prototype.sub=function(C,D){this._verify2(C,D);var I=C.sub(D);return I.cmpn(0)<0&&I.iadd(this.m),I._forceRed(this)},T.prototype.isub=function(C,D){this._verify2(C,D);var I=C.isub(D);return I.cmpn(0)<0&&I.iadd(this.m),I},T.prototype.shl=function(C,D){return this._verify1(C),this.imod(C.ushln(D))},T.prototype.imul=function(C,D){return this._verify2(C,D),this.imod(C.imul(D))},T.prototype.mul=function(C,D){return this._verify2(C,D),this.imod(C.mul(D))},T.prototype.isqr=function(C){return this.imul(C,C.clone())},T.prototype.sqr=function(C){return this.mul(C,C)},T.prototype.sqrt=function(C){if(C.isZero())return C.clone();var D=this.m.andln(3);if(i(D%2===1),D===3){var I=this.m.add(new a(1)).iushrn(2);return this.pow(C,I)}for(var O=this.m.subn(1),R=0;!O.isZero()&&O.andln(1)===0;)R++,O.iushrn(1);i(!O.isZero());var H=new a(1).toRed(this),j=H.redNeg(),N=this.m.subn(1).iushrn(1),k=this.m.bitLength();for(k=new a(2*k*k).toRed(this);this.pow(k,N).cmp(j)!==0;)k.redIAdd(j);for(var G=this.pow(k,O),Y=this.pow(C,O.addn(1).iushrn(1)),F=this.pow(C,O),Z=R;F.cmp(H)!==0;){for(var ne=F,re=0;ne.cmp(H)!==0;re++)ne=ne.redSqr();i(re<Z);var ae=this.pow(G,new a(1).iushln(Z-re-1));Y=Y.redMul(ae),G=ae.redSqr(),F=F.redMul(G),Z=re}return Y},T.prototype.invm=function(C){var D=C._invmp(this.m);return D.negative!==0?(D.negative=0,this.imod(D).redNeg()):this.imod(D)},T.prototype.pow=function(C,D){if(D.isZero())return new a(1).toRed(this);if(D.cmpn(1)===0)return C.clone();var I=4,O=new Array(1<<I);O[0]=new a(1).toRed(this),O[1]=C;for(var R=2;R<O.length;R++)O[R]=this.mul(O[R-1],C);var H=O[0],j=0,N=0,k=D.bitLength()%26;for(k===0&&(k=26),R=D.length-1;R>=0;R--){for(var G=D.words[R],Y=k-1;Y>=0;Y--){var F=G>>Y&1;if(H!==O[0]&&(H=this.sqr(H)),F===0&&j===0){N=0;continue}j<<=1,j|=F,N++,!(N!==I&&(R!==0||Y!==0))&&(H=this.mul(H,O[j]),N=0,j=0)}k=26}return H},T.prototype.convertTo=function(C){var D=C.umod(this.m);return D===C?D.clone():D},T.prototype.convertFrom=function(C){var D=C.clone();return D.red=null,D},a.mont=function(C){return new L(C)};function L(P){T.call(this,P),this.shift=this.m.bitLength(),this.shift%26!==0&&(this.shift+=26-this.shift%26),this.r=new a(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}n(L,T),L.prototype.convertTo=function(C){return this.imod(C.ushln(this.shift))},L.prototype.convertFrom=function(C){var D=this.imod(C.mul(this.rinv));return D.red=null,D},L.prototype.imul=function(C,D){if(C.isZero()||D.isZero())return C.words[0]=0,C.length=1,C;var I=C.imul(D),O=I.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),R=I.isub(O).iushrn(this.shift),H=R;return R.cmp(this.m)>=0?H=R.isub(this.m):R.cmpn(0)<0&&(H=R.iadd(this.m)),H._forceRed(this)},L.prototype.mul=function(C,D){if(C.isZero()||D.isZero())return new a(0)._forceRed(this);var I=C.mul(D),O=I.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),R=I.isub(O).iushrn(this.shift),H=R;return R.cmp(this.m)>=0?H=R.isub(this.m):R.cmpn(0)<0&&(H=R.iadd(this.m)),H._forceRed(this)},L.prototype.invm=function(C){var D=this.imod(C._invmp(this.m).mul(this.r2));return D._forceRed(this)}})(e,_r)})($V);var XWe=$V.exports;const wr=D4(XWe),ZWe="logger/5.7.0";let yQ=!1,xQ=!1;const DA={debug:1,default:2,info:2,warning:3,error:4,off:5};let bQ=DA.default,zT=null;function QWe(){try{const e=[];if(["NFD","NFC","NFKD","NFKC"].forEach(t=>{try{if("test".normalize(t)!=="test")throw new Error("bad normalize")}catch{e.push(t)}}),e.length)throw new Error("missing "+e.join(", "));if("é".normalize("NFD")!=="é")throw new Error("broken implementation")}catch(e){return e.message}return null}const wQ=QWe();var Tk;(function(e){e.DEBUG="DEBUG",e.INFO="INFO",e.WARNING="WARNING",e.ERROR="ERROR",e.OFF="OFF"})(Tk||(Tk={}));var uu;(function(e){e.UNKNOWN_ERROR="UNKNOWN_ERROR",e.NOT_IMPLEMENTED="NOT_IMPLEMENTED",e.UNSUPPORTED_OPERATION="UNSUPPORTED_OPERATION",e.NETWORK_ERROR="NETWORK_ERROR",e.SERVER_ERROR="SERVER_ERROR",e.TIMEOUT="TIMEOUT",e.BUFFER_OVERRUN="BUFFER_OVERRUN",e.NUMERIC_FAULT="NUMERIC_FAULT",e.MISSING_NEW="MISSING_NEW",e.INVALID_ARGUMENT="INVALID_ARGUMENT",e.MISSING_ARGUMENT="MISSING_ARGUMENT",e.UNEXPECTED_ARGUMENT="UNEXPECTED_ARGUMENT",e.CALL_EXCEPTION="CALL_EXCEPTION",e.INSUFFICIENT_FUNDS="INSUFFICIENT_FUNDS",e.NONCE_EXPIRED="NONCE_EXPIRED",e.REPLACEMENT_UNDERPRICED="REPLACEMENT_UNDERPRICED",e.UNPREDICTABLE_GAS_LIMIT="UNPREDICTABLE_GAS_LIMIT",e.TRANSACTION_REPLACED="TRANSACTION_REPLACED",e.ACTION_REJECTED="ACTION_REJECTED"})(uu||(uu={}));const _Q="0123456789abcdef";class Re{constructor(t){Object.defineProperty(this,"version",{enumerable:!0,value:t,writable:!1})}_log(t,r){const i=t.toLowerCase();DA[i]==null&&this.throwArgumentError("invalid log level name","logLevel",t),!(bQ>DA[i])&&console.log.apply(console,r)}debug(...t){this._log(Re.levels.DEBUG,t)}info(...t){this._log(Re.levels.INFO,t)}warn(...t){this._log(Re.levels.WARNING,t)}makeError(t,r,i){if(xQ)return this.makeError("censored error",r,{});r||(r=Re.errors.UNKNOWN_ERROR),i||(i={});const n=[];Object.keys(i).forEach(l=>{const u=i[l];try{if(u instanceof Uint8Array){let c="";for(let h=0;h<u.length;h++)c+=_Q[u[h]>>4],c+=_Q[u[h]&15];n.push(l+"=Uint8Array(0x"+c+")")}else n.push(l+"="+JSON.stringify(u))}catch{n.push(l+"="+JSON.stringify(i[l].toString()))}}),n.push(`code=${r}`),n.push(`version=${this.version}`);const a=t;let o="";switch(r){case uu.NUMERIC_FAULT:{o="NUMERIC_FAULT";const l=t;switch(l){case"overflow":case"underflow":case"division-by-zero":o+="-"+l;break;case"negative-power":case"negative-width":o+="-unsupported";break;case"unbound-bitwise-result":o+="-unbound-result";break}break}case uu.CALL_EXCEPTION:case uu.INSUFFICIENT_FUNDS:case uu.MISSING_NEW:case uu.NONCE_EXPIRED:case uu.REPLACEMENT_UNDERPRICED:case uu.TRANSACTION_REPLACED:case uu.UNPREDICTABLE_GAS_LIMIT:o=r;break}o&&(t+=" [ See: https://links.ethers.org/v5-errors-"+o+" ]"),n.length&&(t+=" ("+n.join(", ")+")");const s=new Error(t);return s.reason=a,s.code=r,Object.keys(i).forEach(function(l){s[l]=i[l]}),s}throwError(t,r,i){throw this.makeError(t,r,i)}throwArgumentError(t,r,i){return this.throwError(t,Re.errors.INVALID_ARGUMENT,{argument:r,value:i})}assert(t,r,i,n){t||this.throwError(r,i,n)}assertArgument(t,r,i,n){t||this.throwArgumentError(r,i,n)}checkNormalize(t){wQ&&this.throwError("platform missing String.prototype.normalize",Re.errors.UNSUPPORTED_OPERATION,{operation:"String.prototype.normalize",form:wQ})}checkSafeUint53(t,r){typeof t=="number"&&(r==null&&(r="value not safe"),(t<0||t>=9007199254740991)&&this.throwError(r,Re.errors.NUMERIC_FAULT,{operation:"checkSafeInteger",fault:"out-of-safe-range",value:t}),t%1&&this.throwError(r,Re.errors.NUMERIC_FAULT,{operation:"checkSafeInteger",fault:"non-integer",value:t}))}checkArgumentCount(t,r,i){i?i=": "+i:i="",t<r&&this.throwError("missing argument"+i,Re.errors.MISSING_ARGUMENT,{count:t,expectedCount:r}),t>r&&this.throwError("too many arguments"+i,Re.errors.UNEXPECTED_ARGUMENT,{count:t,expectedCount:r})}checkNew(t,r){(t===Object||t==null)&&this.throwError("missing new",Re.errors.MISSING_NEW,{name:r.name})}checkAbstract(t,r){t===r?this.throwError("cannot instantiate abstract class "+JSON.stringify(r.name)+" directly; use a sub-class",Re.errors.UNSUPPORTED_OPERATION,{name:t.name,operation:"new"}):(t===Object||t==null)&&this.throwError("missing new",Re.errors.MISSING_NEW,{name:r.name})}static globalLogger(){return zT||(zT=new Re(ZWe)),zT}static setCensorship(t,r){if(!t&&r&&this.globalLogger().throwError("cannot permanently disable censorship",Re.errors.UNSUPPORTED_OPERATION,{operation:"setCensorship"}),yQ){if(!t)return;this.globalLogger().throwError("error censorship permanent",Re.errors.UNSUPPORTED_OPERATION,{operation:"setCensorship"})}xQ=!!t,yQ=!!r}static setLogLevel(t){const r=DA[t.toLowerCase()];if(r==null){Re.globalLogger().warn("invalid log level - "+t);return}bQ=r}static from(t){return new Re(t)}}Re.errors=uu;Re.levels=Tk;const KWe="bytes/5.7.0",un=new Re(KWe);function ype(e){return!!e.toHexString}function p1(e){return e.slice||(e.slice=function(){const t=Array.prototype.slice.call(arguments);return p1(new Uint8Array(Array.prototype.slice.apply(e,t)))}),e}function eF(e){return gi(e)&&!(e.length%2)||JC(e)}function AQ(e){return typeof e=="number"&&e==e&&e%1===0}function JC(e){if(e==null)return!1;if(e.constructor===Uint8Array)return!0;if(typeof e=="string"||!AQ(e.length)||e.length<0)return!1;for(let t=0;t<e.length;t++){const r=e[t];if(!AQ(r)||r<0||r>=256)return!1}return!0}function $t(e,t){if(t||(t={}),typeof e=="number"){un.checkSafeUint53(e,"invalid arrayify value");const r=[];for(;e;)r.unshift(e&255),e=parseInt(String(e/256));return r.length===0&&r.push(0),p1(new Uint8Array(r))}if(t.allowMissingPrefix&&typeof e=="string"&&e.substring(0,2)!=="0x"&&(e="0x"+e),ype(e)&&(e=e.toHexString()),gi(e)){let r=e.substring(2);r.length%2&&(t.hexPad==="left"?r="0"+r:t.hexPad==="right"?r+="0":un.throwArgumentError("hex data is odd-length","value",e));const i=[];for(let n=0;n<r.length;n+=2)i.push(parseInt(r.substring(n,n+2),16));return p1(new Uint8Array(i))}return JC(e)?p1(new Uint8Array(e)):un.throwArgumentError("invalid arrayify value","value",e)}function Hs(e){const t=e.map(n=>$t(n)),r=t.reduce((n,a)=>n+a.length,0),i=new Uint8Array(r);return t.reduce((n,a)=>(i.set(a,n),n+a.length),0),p1(i)}function Y1(e){let t=$t(e);if(t.length===0)return t;let r=0;for(;r<t.length&&t[r]===0;)r++;return r&&(t=t.slice(r)),t}function JWe(e,t){e=$t(e),e.length>t&&un.throwArgumentError("value out of range","value",arguments[0]);const r=new Uint8Array(t);return r.set(e,t-e.length),p1(r)}function gi(e,t){return!(typeof e!="string"||!e.match(/^0x[0-9A-Fa-f]*$/)||t&&e.length!==2+2*t)}const HT="0123456789abcdef";function Ot(e,t){if(t||(t={}),typeof e=="number"){un.checkSafeUint53(e,"invalid hexlify value");let r="";for(;e;)r=HT[e&15]+r,e=Math.floor(e/16);return r.length?(r.length%2&&(r="0"+r),"0x"+r):"0x00"}if(typeof e=="bigint")return e=e.toString(16),e.length%2?"0x0"+e:"0x"+e;if(t.allowMissingPrefix&&typeof e=="string"&&e.substring(0,2)!=="0x"&&(e="0x"+e),ype(e))return e.toHexString();if(gi(e))return e.length%2&&(t.hexPad==="left"?e="0x0"+e.substring(2):t.hexPad==="right"?e+="0":un.throwArgumentError("hex data is odd-length","value",e)),e.toLowerCase();if(JC(e)){let r="0x";for(let i=0;i<e.length;i++){let n=e[i];r+=HT[(n&240)>>4]+HT[n&15]}return r}return un.throwArgumentError("invalid hexlify value","value",e)}function zv(e){if(typeof e!="string")e=Ot(e);else if(!gi(e)||e.length%2)return null;return(e.length-2)/2}function lo(e,t,r){return typeof e!="string"?e=Ot(e):(!gi(e)||e.length%2)&&un.throwArgumentError("invalid hexData","value",e),t=2+2*t,r!=null?"0x"+e.substring(t,2+2*r):"0x"+e.substring(t)}function vs(e){let t="0x";return e.forEach(r=>{t+=Ot(r).substring(2)}),t}function tF(e){const t=$We(Ot(e,{hexPad:"left"}));return t==="0x"?"0x0":t}function $We(e){typeof e!="string"&&(e=Ot(e)),gi(e)||un.throwArgumentError("invalid hex string","value",e),e=e.substring(2);let t=0;for(;t<e.length&&e[t]==="0";)t++;return"0x"+e.substring(t)}function vn(e,t){for(typeof e!="string"?e=Ot(e):gi(e)||un.throwArgumentError("invalid hex string","value",e),e.length>2*t+2&&un.throwArgumentError("value out of range","value",arguments[1]);e.length<2*t+2;)e="0x0"+e.substring(2);return e}function $C(e){const t={r:"0x",s:"0x",_vs:"0x",recoveryParam:0,v:0,yParityAndS:"0x",compact:"0x"};if(eF(e)){let r=$t(e);r.length===64?(t.v=27+(r[32]>>7),r[32]&=127,t.r=Ot(r.slice(0,32)),t.s=Ot(r.slice(32,64))):r.length===65?(t.r=Ot(r.slice(0,32)),t.s=Ot(r.slice(32,64)),t.v=r[64]):un.throwArgumentError("invalid signature string","signature",e),t.v<27&&(t.v===0||t.v===1?t.v+=27:un.throwArgumentError("signature invalid v byte","signature",e)),t.recoveryParam=1-t.v%2,t.recoveryParam&&(r[32]|=128),t._vs=Ot(r.slice(32,64))}else{if(t.r=e.r,t.s=e.s,t.v=e.v,t.recoveryParam=e.recoveryParam,t._vs=e._vs,t._vs!=null){const n=JWe($t(t._vs),32);t._vs=Ot(n);const a=n[0]>=128?1:0;t.recoveryParam==null?t.recoveryParam=a:t.recoveryParam!==a&&un.throwArgumentError("signature recoveryParam mismatch _vs","signature",e),n[0]&=127;const o=Ot(n);t.s==null?t.s=o:t.s!==o&&un.throwArgumentError("signature v mismatch _vs","signature",e)}if(t.recoveryParam==null)t.v==null?un.throwArgumentError("signature missing v and recoveryParam","signature",e):t.v===0||t.v===1?t.recoveryParam=t.v:t.recoveryParam=1-t.v%2;else if(t.v==null)t.v=27+t.recoveryParam;else{const n=t.v===0||t.v===1?t.v:1-t.v%2;t.recoveryParam!==n&&un.throwArgumentError("signature recoveryParam mismatch v","signature",e)}t.r==null||!gi(t.r)?un.throwArgumentError("signature missing or invalid r","signature",e):t.r=vn(t.r,32),t.s==null||!gi(t.s)?un.throwArgumentError("signature missing or invalid s","signature",e):t.s=vn(t.s,32);const r=$t(t.s);r[0]>=128&&un.throwArgumentError("signature s out of range","signature",e),t.recoveryParam&&(r[0]|=128);const i=Ot(r);t._vs&&(gi(t._vs)||un.throwArgumentError("signature invalid _vs","signature",e),t._vs=vn(t._vs,32)),t._vs==null?t._vs=i:t._vs!==i&&un.throwArgumentError("signature _vs mismatch v and s","signature",e)}return t.yParityAndS=t._vs,t.compact=t.r+t.yParityAndS.substring(2),t}const eqe="bignumber/5.7.0";var bS=wr.BN;const Bh=new Re(eqe),UT={},SQ=9007199254740991;let CQ=!1;class pt{constructor(t,r){t!==UT&&Bh.throwError("cannot call constructor directly; use BigNumber.from",Re.errors.UNSUPPORTED_OPERATION,{operation:"new (BigNumber)"}),this._hex=r,this._isBigNumber=!0,Object.freeze(this)}fromTwos(t){return ns(Ur(this).fromTwos(t))}toTwos(t){return ns(Ur(this).toTwos(t))}abs(){return this._hex[0]==="-"?pt.from(this._hex.substring(1)):this}add(t){return ns(Ur(this).add(Ur(t)))}sub(t){return ns(Ur(this).sub(Ur(t)))}div(t){return pt.from(t).isZero()&&rl("division-by-zero","div"),ns(Ur(this).div(Ur(t)))}mul(t){return ns(Ur(this).mul(Ur(t)))}mod(t){const r=Ur(t);return r.isNeg()&&rl("division-by-zero","mod"),ns(Ur(this).umod(r))}pow(t){const r=Ur(t);return r.isNeg()&&rl("negative-power","pow"),ns(Ur(this).pow(r))}and(t){const r=Ur(t);return(this.isNegative()||r.isNeg())&&rl("unbound-bitwise-result","and"),ns(Ur(this).and(r))}or(t){const r=Ur(t);return(this.isNegative()||r.isNeg())&&rl("unbound-bitwise-result","or"),ns(Ur(this).or(r))}xor(t){const r=Ur(t);return(this.isNegative()||r.isNeg())&&rl("unbound-bitwise-result","xor"),ns(Ur(this).xor(r))}mask(t){return(this.isNegative()||t<0)&&rl("negative-width","mask"),ns(Ur(this).maskn(t))}shl(t){return(this.isNegative()||t<0)&&rl("negative-width","shl"),ns(Ur(this).shln(t))}shr(t){return(this.isNegative()||t<0)&&rl("negative-width","shr"),ns(Ur(this).shrn(t))}eq(t){return Ur(this).eq(Ur(t))}lt(t){return Ur(this).lt(Ur(t))}lte(t){return Ur(this).lte(Ur(t))}gt(t){return Ur(this).gt(Ur(t))}gte(t){return Ur(this).gte(Ur(t))}isNegative(){return this._hex[0]==="-"}isZero(){return Ur(this).isZero()}toNumber(){try{return Ur(this).toNumber()}catch{rl("overflow","toNumber",this.toString())}return null}toBigInt(){try{return BigInt(this.toString())}catch{}return Bh.throwError("this platform does not support BigInt",Re.errors.UNSUPPORTED_OPERATION,{value:this.toString()})}toString(){return arguments.length>0&&(arguments[0]===10?CQ||(CQ=!0,Bh.warn("BigNumber.toString does not accept any parameters; base-10 is assumed")):arguments[0]===16?Bh.throwError("BigNumber.toString does not accept any parameters; use bigNumber.toHexString()",Re.errors.UNEXPECTED_ARGUMENT,{}):Bh.throwError("BigNumber.toString does not accept parameters",Re.errors.UNEXPECTED_ARGUMENT,{})),Ur(this).toString(10)}toHexString(){return this._hex}toJSON(t){return{type:"BigNumber",hex:this.toHexString()}}static from(t){if(t instanceof pt)return t;if(typeof t=="string")return t.match(/^-?0x[0-9a-f]+$/i)?new pt(UT,ww(t)):t.match(/^-?[0-9]+$/)?new pt(UT,ww(new bS(t))):Bh.throwArgumentError("invalid BigNumber string","value",t);if(typeof t=="number")return t%1&&rl("underflow","BigNumber.from",t),(t>=SQ||t<=-SQ)&&rl("overflow","BigNumber.from",t),pt.from(String(t));const r=t;if(typeof r=="bigint")return pt.from(r.toString());if(JC(r))return pt.from(Ot(r));if(r)if(r.toHexString){const i=r.toHexString();if(typeof i=="string")return pt.from(i)}else{let i=r._hex;if(i==null&&r.type==="BigNumber"&&(i=r.hex),typeof i=="string"&&(gi(i)||i[0]==="-"&&gi(i.substring(1))))return pt.from(i)}return Bh.throwArgumentError("invalid BigNumber value","value",t)}static isBigNumber(t){return!!(t&&t._isBigNumber)}}function ww(e){if(typeof e!="string")return ww(e.toString(16));if(e[0]==="-")return e=e.substring(1),e[0]==="-"&&Bh.throwArgumentError("invalid hex","value",e),e=ww(e),e==="0x00"?e:"-"+e;if(e.substring(0,2)!=="0x"&&(e="0x"+e),e==="0x")return"0x00";for(e.length%2&&(e="0x0"+e.substring(2));e.length>4&&e.substring(0,4)==="0x00";)e="0x"+e.substring(4);return e}function ns(e){return pt.from(ww(e))}function Ur(e){const t=pt.from(e).toHexString();return t[0]==="-"?new bS("-"+t.substring(3),16):new bS(t.substring(2),16)}function rl(e,t,r){const i={fault:e,operation:t};return r!=null&&(i.value=r),Bh.throwError(e,Re.errors.NUMERIC_FAULT,i)}function tqe(e){return new bS(e,36).toString(16)}const rqe="properties/5.7.0";var iqe=function(e,t,r,i){function n(a){return a instanceof r?a:new r(function(o){o(a)})}return new(r||(r=Promise))(function(a,o){function s(c){try{u(i.next(c))}catch(h){o(h)}}function l(c){try{u(i.throw(c))}catch(h){o(h)}}function u(c){c.done?a(c.value):n(c.value).then(s,l)}u((i=i.apply(e,t||[])).next())})};const wS=new Re(rqe);function nt(e,t,r){Object.defineProperty(e,t,{enumerable:!0,value:r,writable:!1})}function kc(e,t){for(let r=0;r<32;r++){if(e[t])return e[t];if(!e.prototype||typeof e.prototype!="object")break;e=Object.getPrototypeOf(e.prototype).constructor}return null}function Dn(e){return iqe(this,void 0,void 0,function*(){const t=Object.keys(e).map(i=>{const n=e[i];return Promise.resolve(n).then(a=>({key:i,value:a}))});return(yield Promise.all(t)).reduce((i,n)=>(i[n.key]=n.value,i),{})})}function nqe(e,t){(!e||typeof e!="object")&&wS.throwArgumentError("invalid object","object",e),Object.keys(e).forEach(r=>{t[r]||wS.throwArgumentError("invalid object key - "+r,"transaction:"+r,e)})}function ta(e){const t={};for(const r in e)t[r]=e[r];return t}const aqe={bigint:!0,boolean:!0,function:!0,number:!0,string:!0};function xpe(e){if(e==null||aqe[typeof e])return!0;if(Array.isArray(e)||typeof e=="object"){if(!Object.isFrozen(e))return!1;const t=Object.keys(e);for(let r=0;r<t.length;r++){let i=null;try{i=e[t[r]]}catch{continue}if(!xpe(i))return!1}return!0}return wS.throwArgumentError(`Cannot deepCopy ${typeof e}`,"object",e)}function oqe(e){if(xpe(e))return e;if(Array.isArray(e))return Object.freeze(e.map(t=>_d(t)));if(typeof e=="object"){const t={};for(const r in e){const i=e[r];i!==void 0&&nt(t,r,_d(i))}return t}return wS.throwArgumentError(`Cannot deepCopy ${typeof e}`,"object",e)}function _d(e){return oqe(e)}class I4{constructor(t){for(const r in t)this[r]=_d(t[r])}}const L4="abi/5.7.0",Zr=new Re(L4),Hv={};let EQ={calldata:!0,memory:!0,storage:!0},sqe={calldata:!0,memory:!0};function v_(e,t){if(e==="bytes"||e==="string"){if(EQ[t])return!0}else if(e==="address"){if(t==="payable")return!0}else if((e.indexOf("[")>=0||e==="tuple")&&sqe[t])return!0;return(EQ[t]||t==="payable")&&Zr.throwArgumentError("invalid modifier","name",t),!1}function lqe(e,t){let r=e;function i(s){Zr.throwArgumentError(`unexpected character at position ${s}`,"param",e)}e=e.replace(/\s/g," ");function n(s){let l={type:"",name:"",parent:s,state:{allowType:!0}};return t&&(l.indexed=!1),l}let a={type:"",name:"",state:{allowType:!0}},o=a;for(let s=0;s<e.length;s++){let l=e[s];switch(l){case"(":o.state.allowType&&o.type===""?o.type="tuple":o.state.allowParams||i(s),o.state.allowType=!1,o.type=Pg(o.type),o.components=[n(o)],o=o.components[0];break;case")":delete o.state,o.name==="indexed"&&(t||i(s),o.indexed=!0,o.name=""),v_(o.type,o.name)&&(o.name=""),o.type=Pg(o.type);let u=o;o=o.parent,o||i(s),delete u.parent,o.state.allowParams=!1,o.state.allowName=!0,o.state.allowArray=!0;break;case",":delete o.state,o.name==="indexed"&&(t||i(s),o.indexed=!0,o.name=""),v_(o.type,o.name)&&(o.name=""),o.type=Pg(o.type);let c=n(o.parent);o.parent.components.push(c),delete o.parent,o=c;break;case" ":o.state.allowType&&o.type!==""&&(o.type=Pg(o.type),delete o.state.allowType,o.state.allowName=!0,o.state.allowParams=!0),o.state.allowName&&o.name!==""&&(o.name==="indexed"?(t||i(s),o.indexed&&i(s),o.indexed=!0,o.name=""):v_(o.type,o.name)?o.name="":o.state.allowName=!1);break;case"[":o.state.allowArray||i(s),o.type+=l,o.state.allowArray=!1,o.state.allowName=!1,o.state.readArray=!0;break;case"]":o.state.readArray||i(s),o.type+=l,o.state.readArray=!1,o.state.allowArray=!0,o.state.allowName=!0;break;default:o.state.allowType?(o.type+=l,o.state.allowParams=!0,o.state.allowArray=!0):o.state.allowName?(o.name+=l,delete o.state.allowArray):o.state.readArray?o.type+=l:i(s)}}return o.parent&&Zr.throwArgumentError("unexpected eof","param",e),delete a.state,o.name==="indexed"?(t||i(r.length-7),o.indexed&&i(r.length-7),o.indexed=!0,o.name=""):v_(o.type,o.name)&&(o.name=""),a.type=Pg(a.type),a}function IA(e,t){for(let r in t)nt(e,r,t[r])}const si=Object.freeze({sighash:"sighash",minimal:"minimal",full:"full",json:"json"}),uqe=new RegExp(/^(.*)\[([0-9]*)\]$/);class pa{constructor(t,r){t!==Hv&&Zr.throwError("use fromString",Re.errors.UNSUPPORTED_OPERATION,{operation:"new ParamType()"}),IA(this,r);let i=this.type.match(uqe);i?IA(this,{arrayLength:parseInt(i[2]||"-1"),arrayChildren:pa.fromObject({type:i[1],components:this.components}),baseType:"array"}):IA(this,{arrayLength:null,arrayChildren:null,baseType:this.components!=null?"tuple":this.type}),this._isParamType=!0,Object.freeze(this)}format(t){if(t||(t=si.sighash),si[t]||Zr.throwArgumentError("invalid format type","format",t),t===si.json){let i={type:this.baseType==="tuple"?"tuple":this.type,name:this.name||void 0};return typeof this.indexed=="boolean"&&(i.indexed=this.indexed),this.components&&(i.components=this.components.map(n=>JSON.parse(n.format(t)))),JSON.stringify(i)}let r="";return this.baseType==="array"?(r+=this.arrayChildren.format(t),r+="["+(this.arrayLength<0?"":String(this.arrayLength))+"]"):this.baseType==="tuple"?(t!==si.sighash&&(r+=this.type),r+="("+this.components.map(i=>i.format(t)).join(t===si.full?", ":",")+")"):r+=this.type,t!==si.sighash&&(this.indexed===!0&&(r+=" indexed"),t===si.full&&this.name&&(r+=" "+this.name)),r}static from(t,r){return typeof t=="string"?pa.fromString(t,r):pa.fromObject(t)}static fromObject(t){return pa.isParamType(t)?t:new pa(Hv,{name:t.name||null,type:Pg(t.type),indexed:t.indexed==null?null:!!t.indexed,components:t.components?t.components.map(pa.fromObject):null})}static fromString(t,r){function i(n){return pa.fromObject({name:n.name,type:n.type,indexed:n.indexed,components:n.components})}return i(lqe(t,!!r))}static isParamType(t){return!!(t!=null&&t._isParamType)}}function _w(e,t){return hqe(e).map(r=>pa.fromString(r,t))}class Jh{constructor(t,r){t!==Hv&&Zr.throwError("use a static from method",Re.errors.UNSUPPORTED_OPERATION,{operation:"new Fragment()"}),IA(this,r),this._isFragment=!0,Object.freeze(this)}static from(t){return Jh.isFragment(t)?t:typeof t=="string"?Jh.fromString(t):Jh.fromObject(t)}static fromObject(t){if(Jh.isFragment(t))return t;switch(t.type){case"function":return Sc.fromObject(t);case"event":return Yh.fromObject(t);case"constructor":return Ac.fromObject(t);case"error":return Tf.fromObject(t);case"fallback":case"receive":return null}return Zr.throwArgumentError("invalid fragment object","value",t)}static fromString(t){return t=t.replace(/\s/g," "),t=t.replace(/\(/g," (").replace(/\)/g,") ").replace(/\s+/g," "),t=t.trim(),t.split(" ")[0]==="event"?Yh.fromString(t.substring(5).trim()):t.split(" ")[0]==="function"?Sc.fromString(t.substring(8).trim()):t.split("(")[0].trim()==="constructor"?Ac.fromString(t.trim()):t.split(" ")[0]==="error"?Tf.fromString(t.substring(5).trim()):Zr.throwArgumentError("unsupported fragment","value",t)}static isFragment(t){return!!(t&&t._isFragment)}}class Yh extends Jh{format(t){if(t||(t=si.sighash),si[t]||Zr.throwArgumentError("invalid format type","format",t),t===si.json)return JSON.stringify({type:"event",anonymous:this.anonymous,name:this.name,inputs:this.inputs.map(i=>JSON.parse(i.format(t)))});let r="";return t!==si.sighash&&(r+="event "),r+=this.name+"("+this.inputs.map(i=>i.format(t)).join(t===si.full?", ":",")+") ",t!==si.sighash&&this.anonymous&&(r+="anonymous "),r.trim()}static from(t){return typeof t=="string"?Yh.fromString(t):Yh.fromObject(t)}static fromObject(t){if(Yh.isEventFragment(t))return t;t.type!=="event"&&Zr.throwArgumentError("invalid event object","value",t);const r={name:Aw(t.name),anonymous:t.anonymous,inputs:t.inputs?t.inputs.map(pa.fromObject):[],type:"event"};return new Yh(Hv,r)}static fromString(t){let r=t.match(Sw);r||Zr.throwArgumentError("invalid event string","value",t);let i=!1;return r[3].split(" ").forEach(n=>{switch(n.trim()){case"anonymous":i=!0;break;case"":break;default:Zr.warn("unknown modifier: "+n)}}),Yh.fromObject({name:r[1].trim(),anonymous:i,inputs:_w(r[2],!0),type:"event"})}static isEventFragment(t){return t&&t._isFragment&&t.type==="event"}}function bpe(e,t){t.gas=null;let r=e.split("@");return r.length!==1?(r.length>2&&Zr.throwArgumentError("invalid human-readable ABI signature","value",e),r[1].match(/^[0-9]+$/)||Zr.throwArgumentError("invalid human-readable ABI signature gas","value",e),t.gas=pt.from(r[1]),r[0]):e}function wpe(e,t){t.constant=!1,t.payable=!1,t.stateMutability="nonpayable",e.split(" ").forEach(r=>{switch(r.trim()){case"constant":t.constant=!0;break;case"payable":t.payable=!0,t.stateMutability="payable";break;case"nonpayable":t.payable=!1,t.stateMutability="nonpayable";break;case"pure":t.constant=!0,t.stateMutability="pure";break;case"view":t.constant=!0,t.stateMutability="view";break;case"external":case"public":case"":break;default:console.log("unknown modifier: "+r)}})}function _pe(e){let t={constant:!1,payable:!0,stateMutability:"payable"};return e.stateMutability!=null?(t.stateMutability=e.stateMutability,t.constant=t.stateMutability==="view"||t.stateMutability==="pure",e.constant!=null&&!!e.constant!==t.constant&&Zr.throwArgumentError("cannot have constant function with mutability "+t.stateMutability,"value",e),t.payable=t.stateMutability==="payable",e.payable!=null&&!!e.payable!==t.payable&&Zr.throwArgumentError("cannot have payable function with mutability "+t.stateMutability,"value",e)):e.payable!=null?(t.payable=!!e.payable,e.constant==null&&!t.payable&&e.type!=="constructor"&&Zr.throwArgumentError("unable to determine stateMutability","value",e),t.constant=!!e.constant,t.constant?t.stateMutability="view":t.stateMutability=t.payable?"payable":"nonpayable",t.payable&&t.constant&&Zr.throwArgumentError("cannot have constant payable function","value",e)):e.constant!=null?(t.constant=!!e.constant,t.payable=!t.constant,t.stateMutability=t.constant?"view":"payable"):e.type!=="constructor"&&Zr.throwArgumentError("unable to determine stateMutability","value",e),t}class Ac extends Jh{format(t){if(t||(t=si.sighash),si[t]||Zr.throwArgumentError("invalid format type","format",t),t===si.json)return JSON.stringify({type:"constructor",stateMutability:this.stateMutability!=="nonpayable"?this.stateMutability:void 0,payable:this.payable,gas:this.gas?this.gas.toNumber():void 0,inputs:this.inputs.map(i=>JSON.parse(i.format(t)))});t===si.sighash&&Zr.throwError("cannot format a constructor for sighash",Re.errors.UNSUPPORTED_OPERATION,{operation:"format(sighash)"});let r="constructor("+this.inputs.map(i=>i.format(t)).join(t===si.full?", ":",")+") ";return this.stateMutability&&this.stateMutability!=="nonpayable"&&(r+=this.stateMutability+" "),r.trim()}static from(t){return typeof t=="string"?Ac.fromString(t):Ac.fromObject(t)}static fromObject(t){if(Ac.isConstructorFragment(t))return t;t.type!=="constructor"&&Zr.throwArgumentError("invalid constructor object","value",t);let r=_pe(t);r.constant&&Zr.throwArgumentError("constructor cannot be constant","value",t);const i={name:null,type:t.type,inputs:t.inputs?t.inputs.map(pa.fromObject):[],payable:r.payable,stateMutability:r.stateMutability,gas:t.gas?pt.from(t.gas):null};return new Ac(Hv,i)}static fromString(t){let r={type:"constructor"};t=bpe(t,r);let i=t.match(Sw);return(!i||i[1].trim()!=="constructor")&&Zr.throwArgumentError("invalid constructor string","value",t),r.inputs=_w(i[2].trim(),!1),wpe(i[3].trim(),r),Ac.fromObject(r)}static isConstructorFragment(t){return t&&t._isFragment&&t.type==="constructor"}}class Sc extends Ac{format(t){if(t||(t=si.sighash),si[t]||Zr.throwArgumentError("invalid format type","format",t),t===si.json)return JSON.stringify({type:"function",name:this.name,constant:this.constant,stateMutability:this.stateMutability!=="nonpayable"?this.stateMutability:void 0,payable:this.payable,gas:this.gas?this.gas.toNumber():void 0,inputs:this.inputs.map(i=>JSON.parse(i.format(t))),outputs:this.outputs.map(i=>JSON.parse(i.format(t)))});let r="";return t!==si.sighash&&(r+="function "),r+=this.name+"("+this.inputs.map(i=>i.format(t)).join(t===si.full?", ":",")+") ",t!==si.sighash&&(this.stateMutability?this.stateMutability!=="nonpayable"&&(r+=this.stateMutability+" "):this.constant&&(r+="view "),this.outputs&&this.outputs.length&&(r+="returns ("+this.outputs.map(i=>i.format(t)).join(", ")+") "),this.gas!=null&&(r+="@"+this.gas.toString()+" ")),r.trim()}static from(t){return typeof t=="string"?Sc.fromString(t):Sc.fromObject(t)}static fromObject(t){if(Sc.isFunctionFragment(t))return t;t.type!=="function"&&Zr.throwArgumentError("invalid function object","value",t);let r=_pe(t);const i={type:t.type,name:Aw(t.name),constant:r.constant,inputs:t.inputs?t.inputs.map(pa.fromObject):[],outputs:t.outputs?t.outputs.map(pa.fromObject):[],payable:r.payable,stateMutability:r.stateMutability,gas:t.gas?pt.from(t.gas):null};return new Sc(Hv,i)}static fromString(t){let r={type:"function"};t=bpe(t,r);let i=t.split(" returns ");i.length>2&&Zr.throwArgumentError("invalid function string","value",t);let n=i[0].match(Sw);if(n||Zr.throwArgumentError("invalid function signature","value",t),r.name=n[1].trim(),r.name&&Aw(r.name),r.inputs=_w(n[2],!1),wpe(n[3].trim(),r),i.length>1){let a=i[1].match(Sw);(a[1].trim()!=""||a[3].trim()!="")&&Zr.throwArgumentError("unexpected tokens","value",t),r.outputs=_w(a[2],!1)}else r.outputs=[];return Sc.fromObject(r)}static isFunctionFragment(t){return t&&t._isFragment&&t.type==="function"}}function MQ(e){const t=e.format();return(t==="Error(string)"||t==="Panic(uint256)")&&Zr.throwArgumentError(`cannot specify user defined ${t} error`,"fragment",e),e}class Tf extends Jh{format(t){if(t||(t=si.sighash),si[t]||Zr.throwArgumentError("invalid format type","format",t),t===si.json)return JSON.stringify({type:"error",name:this.name,inputs:this.inputs.map(i=>JSON.parse(i.format(t)))});let r="";return t!==si.sighash&&(r+="error "),r+=this.name+"("+this.inputs.map(i=>i.format(t)).join(t===si.full?", ":",")+") ",r.trim()}static from(t){return typeof t=="string"?Tf.fromString(t):Tf.fromObject(t)}static fromObject(t){if(Tf.isErrorFragment(t))return t;t.type!=="error"&&Zr.throwArgumentError("invalid error object","value",t);const r={type:t.type,name:Aw(t.name),inputs:t.inputs?t.inputs.map(pa.fromObject):[]};return MQ(new Tf(Hv,r))}static fromString(t){let r={type:"error"},i=t.match(Sw);return i||Zr.throwArgumentError("invalid error signature","value",t),r.name=i[1].trim(),r.name&&Aw(r.name),r.inputs=_w(i[2],!1),MQ(Tf.fromObject(r))}static isErrorFragment(t){return t&&t._isFragment&&t.type==="error"}}function Pg(e){return e.match(/^uint($|[^1-9])/)?e="uint256"+e.substring(4):e.match(/^int($|[^1-9])/)&&(e="int256"+e.substring(3)),e}const cqe=new RegExp("^[a-zA-Z$_][a-zA-Z0-9$_]*$");function Aw(e){return(!e||!e.match(cqe))&&Zr.throwArgumentError(`invalid identifier "${e}"`,"value",e),e}const Sw=new RegExp("^([^)(]*)\\((.*)\\)([^)(]*)$");function hqe(e){e=e.trim();let t=[],r="",i=0;for(let n=0;n<e.length;n++){let a=e[n];a===","&&i===0?(t.push(r),r=""):(r+=a,a==="("?i++:a===")"&&(i--,i===-1&&Zr.throwArgumentError("unbalanced parenthesis","value",e)))}return r&&t.push(r),t}const rF=new Re(L4);function dqe(e){const t=[],r=function(i,n){if(Array.isArray(n))for(let a in n){const o=i.slice();o.push(a);try{r(o,n[a])}catch(s){t.push({path:o,error:s})}}};return r([],e),t}class Vd{constructor(t,r,i,n){this.name=t,this.type=r,this.localName=i,this.dynamic=n}_throwError(t,r){rF.throwArgumentError(t,this.localName,r)}}class Pk{constructor(t){nt(this,"wordSize",t||32),this._data=[],this._dataLength=0,this._padding=new Uint8Array(t)}get data(){return vs(this._data)}get length(){return this._dataLength}_writeData(t){return this._data.push(t),this._dataLength+=t.length,t.length}appendWriter(t){return this._writeData(Hs(t._data))}writeBytes(t){let r=$t(t);const i=r.length%this.wordSize;return i&&(r=Hs([r,this._padding.slice(i)])),this._writeData(r)}_getValue(t){let r=$t(pt.from(t));return r.length>this.wordSize&&rF.throwError("value out-of-bounds",Re.errors.BUFFER_OVERRUN,{length:this.wordSize,offset:r.length}),r.length%this.wordSize&&(r=Hs([this._padding.slice(r.length%this.wordSize),r])),r}writeValue(t){return this._writeData(this._getValue(t))}writeUpdatableValue(){const t=this._data.length;return this._data.push(this._padding),this._dataLength+=this.wordSize,r=>{this._data[t]=this._getValue(r)}}}class _S{constructor(t,r,i,n){nt(this,"_data",$t(t)),nt(this,"wordSize",r||32),nt(this,"_coerceFunc",i),nt(this,"allowLoose",n),this._offset=0}get data(){return Ot(this._data)}get consumed(){return this._offset}static coerce(t,r){let i=t.match("^u?int([0-9]+)$");return i&&parseInt(i[1])<=48&&(r=r.toNumber()),r}coerce(t,r){return this._coerceFunc?this._coerceFunc(t,r):_S.coerce(t,r)}_peekBytes(t,r,i){let n=Math.ceil(r/this.wordSize)*this.wordSize;return this._offset+n>this._data.length&&(this.allowLoose&&i&&this._offset+r<=this._data.length?n=r:rF.throwError("data out-of-bounds",Re.errors.BUFFER_OVERRUN,{length:this._data.length,offset:this._offset+n})),this._data.slice(this._offset,this._offset+n)}subReader(t){return new _S(this._data.slice(this._offset+t),this.wordSize,this._coerceFunc,this.allowLoose)}readBytes(t,r){let i=this._peekBytes(0,t,!!r);return this._offset+=i.length,i.slice(0,t)}readValue(){return pt.from(this.readBytes(this.wordSize))}}var Ape={exports:{}};/**
 * [js-sha3]{@link https://github.com/emn178/js-sha3}
 *
 * @version 0.8.0
 * @author Chen, Yi-Cyuan [emn178@gmail.com]
 * @copyright Chen, Yi-Cyuan 2015-2018
 * @license MIT
 */(function(e){(function(){var t="input is invalid type",r="finalize already called",i=typeof window=="object",n=i?window:{};n.JS_SHA3_NO_WINDOW&&(i=!1);var a=!i&&typeof self=="object",o=!n.JS_SHA3_NO_NODE_JS&&typeof process=="object"&&process.versions&&process.versions.node;o?n=_r:a&&(n=self);var s=!n.JS_SHA3_NO_COMMON_JS&&!0&&e.exports,l=!n.JS_SHA3_NO_ARRAY_BUFFER&&typeof ArrayBuffer<"u",u="0123456789abcdef".split(""),c=[31,7936,2031616,520093696],h=[4,1024,262144,67108864],d=[1,256,65536,16777216],f=[6,1536,393216,100663296],p=[0,8,16,24],v=[1,0,32898,0,32906,2147483648,2147516416,2147483648,32907,0,2147483649,0,2147516545,2147483648,32777,2147483648,138,0,136,0,2147516425,0,2147483658,0,2147516555,0,139,2147483648,32905,2147483648,32771,2147483648,32770,2147483648,128,2147483648,32778,0,2147483658,2147483648,2147516545,2147483648,32896,2147483648,2147483649,0,2147516424,2147483648],m=[224,256,384,512],g=[128,256],y=["hex","buffer","arrayBuffer","array","digest"],x={128:168,256:136};(n.JS_SHA3_NO_NODE_JS||!Array.isArray)&&(Array.isArray=function(F){return Object.prototype.toString.call(F)==="[object Array]"}),l&&(n.JS_SHA3_NO_ARRAY_BUFFER_IS_VIEW||!ArrayBuffer.isView)&&(ArrayBuffer.isView=function(F){return typeof F=="object"&&F.buffer&&F.buffer.constructor===ArrayBuffer});for(var b=function(F,Z,ne){return function(re){return new k(F,Z,F).update(re)[ne]()}},_=function(F,Z,ne){return function(re,ae){return new k(F,Z,ae).update(re)[ne]()}},w=function(F,Z,ne){return function(re,ae,he,se){return C["cshake"+F].update(re,ae,he,se)[ne]()}},S=function(F,Z,ne){return function(re,ae,he,se){return C["kmac"+F].update(re,ae,he,se)[ne]()}},A=function(F,Z,ne,re){for(var ae=0;ae<y.length;++ae){var he=y[ae];F[he]=Z(ne,re,he)}return F},M=function(F,Z){var ne=b(F,Z,"hex");return ne.create=function(){return new k(F,Z,F)},ne.update=function(re){return ne.create().update(re)},A(ne,b,F,Z)},E=function(F,Z){var ne=_(F,Z,"hex");return ne.create=function(re){return new k(F,Z,re)},ne.update=function(re,ae){return ne.create(ae).update(re)},A(ne,_,F,Z)},T=function(F,Z){var ne=x[F],re=w(F,Z,"hex");return re.create=function(ae,he,se){return!he&&!se?C["shake"+F].create(ae):new k(F,Z,ae).bytepad([he,se],ne)},re.update=function(ae,he,se,fe){return re.create(he,se,fe).update(ae)},A(re,w,F,Z)},L=function(F,Z){var ne=x[F],re=S(F,Z,"hex");return re.create=function(ae,he,se){return new G(F,Z,he).bytepad(["KMAC",se],ne).bytepad([ae],ne)},re.update=function(ae,he,se,fe){return re.create(ae,se,fe).update(he)},A(re,S,F,Z)},P=[{name:"keccak",padding:d,bits:m,createMethod:M},{name:"sha3",padding:f,bits:m,createMethod:M},{name:"shake",padding:c,bits:g,createMethod:E},{name:"cshake",padding:h,bits:g,createMethod:T},{name:"kmac",padding:h,bits:g,createMethod:L}],C={},D=[],I=0;I<P.length;++I)for(var O=P[I],R=O.bits,H=0;H<R.length;++H){var j=O.name+"_"+R[H];if(D.push(j),C[j]=O.createMethod(R[H],O.padding),O.name!=="sha3"){var N=O.name+R[H];D.push(N),C[N]=C[j]}}function k(F,Z,ne){this.blocks=[],this.s=[],this.padding=Z,this.outputBits=ne,this.reset=!0,this.finalized=!1,this.block=0,this.start=0,this.blockCount=1600-(F<<1)>>5,this.byteCount=this.blockCount<<2,this.outputBlocks=ne>>5,this.extraBytes=(ne&31)>>3;for(var re=0;re<50;++re)this.s[re]=0}k.prototype.update=function(F){if(this.finalized)throw new Error(r);var Z,ne=typeof F;if(ne!=="string"){if(ne==="object"){if(F===null)throw new Error(t);if(l&&F.constructor===ArrayBuffer)F=new Uint8Array(F);else if(!Array.isArray(F)&&(!l||!ArrayBuffer.isView(F)))throw new Error(t)}else throw new Error(t);Z=!0}for(var re=this.blocks,ae=this.byteCount,he=F.length,se=this.blockCount,fe=0,J=this.s,te,le;fe<he;){if(this.reset)for(this.reset=!1,re[0]=this.block,te=1;te<se+1;++te)re[te]=0;if(Z)for(te=this.start;fe<he&&te<ae;++fe)re[te>>2]|=F[fe]<<p[te++&3];else for(te=this.start;fe<he&&te<ae;++fe)le=F.charCodeAt(fe),le<128?re[te>>2]|=le<<p[te++&3]:le<2048?(re[te>>2]|=(192|le>>6)<<p[te++&3],re[te>>2]|=(128|le&63)<<p[te++&3]):le<55296||le>=57344?(re[te>>2]|=(224|le>>12)<<p[te++&3],re[te>>2]|=(128|le>>6&63)<<p[te++&3],re[te>>2]|=(128|le&63)<<p[te++&3]):(le=65536+((le&1023)<<10|F.charCodeAt(++fe)&1023),re[te>>2]|=(240|le>>18)<<p[te++&3],re[te>>2]|=(128|le>>12&63)<<p[te++&3],re[te>>2]|=(128|le>>6&63)<<p[te++&3],re[te>>2]|=(128|le&63)<<p[te++&3]);if(this.lastByteIndex=te,te>=ae){for(this.start=te-ae,this.block=re[se],te=0;te<se;++te)J[te]^=re[te];Y(J),this.reset=!0}else this.start=te}return this},k.prototype.encode=function(F,Z){var ne=F&255,re=1,ae=[ne];for(F=F>>8,ne=F&255;ne>0;)ae.unshift(ne),F=F>>8,ne=F&255,++re;return Z?ae.push(re):ae.unshift(re),this.update(ae),ae.length},k.prototype.encodeString=function(F){var Z,ne=typeof F;if(ne!=="string"){if(ne==="object"){if(F===null)throw new Error(t);if(l&&F.constructor===ArrayBuffer)F=new Uint8Array(F);else if(!Array.isArray(F)&&(!l||!ArrayBuffer.isView(F)))throw new Error(t)}else throw new Error(t);Z=!0}var re=0,ae=F.length;if(Z)re=ae;else for(var he=0;he<F.length;++he){var se=F.charCodeAt(he);se<128?re+=1:se<2048?re+=2:se<55296||se>=57344?re+=3:(se=65536+((se&1023)<<10|F.charCodeAt(++he)&1023),re+=4)}return re+=this.encode(re*8),this.update(F),re},k.prototype.bytepad=function(F,Z){for(var ne=this.encode(Z),re=0;re<F.length;++re)ne+=this.encodeString(F[re]);var ae=Z-ne%Z,he=[];return he.length=ae,this.update(he),this},k.prototype.finalize=function(){if(!this.finalized){this.finalized=!0;var F=this.blocks,Z=this.lastByteIndex,ne=this.blockCount,re=this.s;if(F[Z>>2]|=this.padding[Z&3],this.lastByteIndex===this.byteCount)for(F[0]=F[ne],Z=1;Z<ne+1;++Z)F[Z]=0;for(F[ne-1]|=2147483648,Z=0;Z<ne;++Z)re[Z]^=F[Z];Y(re)}},k.prototype.toString=k.prototype.hex=function(){this.finalize();for(var F=this.blockCount,Z=this.s,ne=this.outputBlocks,re=this.extraBytes,ae=0,he=0,se="",fe;he<ne;){for(ae=0;ae<F&&he<ne;++ae,++he)fe=Z[ae],se+=u[fe>>4&15]+u[fe&15]+u[fe>>12&15]+u[fe>>8&15]+u[fe>>20&15]+u[fe>>16&15]+u[fe>>28&15]+u[fe>>24&15];he%F===0&&(Y(Z),ae=0)}return re&&(fe=Z[ae],se+=u[fe>>4&15]+u[fe&15],re>1&&(se+=u[fe>>12&15]+u[fe>>8&15]),re>2&&(se+=u[fe>>20&15]+u[fe>>16&15])),se},k.prototype.arrayBuffer=function(){this.finalize();var F=this.blockCount,Z=this.s,ne=this.outputBlocks,re=this.extraBytes,ae=0,he=0,se=this.outputBits>>3,fe;re?fe=new ArrayBuffer(ne+1<<2):fe=new ArrayBuffer(se);for(var J=new Uint32Array(fe);he<ne;){for(ae=0;ae<F&&he<ne;++ae,++he)J[he]=Z[ae];he%F===0&&Y(Z)}return re&&(J[ae]=Z[ae],fe=fe.slice(0,se)),fe},k.prototype.buffer=k.prototype.arrayBuffer,k.prototype.digest=k.prototype.array=function(){this.finalize();for(var F=this.blockCount,Z=this.s,ne=this.outputBlocks,re=this.extraBytes,ae=0,he=0,se=[],fe,J;he<ne;){for(ae=0;ae<F&&he<ne;++ae,++he)fe=he<<2,J=Z[ae],se[fe]=J&255,se[fe+1]=J>>8&255,se[fe+2]=J>>16&255,se[fe+3]=J>>24&255;he%F===0&&Y(Z)}return re&&(fe=he<<2,J=Z[ae],se[fe]=J&255,re>1&&(se[fe+1]=J>>8&255),re>2&&(se[fe+2]=J>>16&255)),se};function G(F,Z,ne){k.call(this,F,Z,ne)}G.prototype=new k,G.prototype.finalize=function(){return this.encode(this.outputBits,!0),k.prototype.finalize.call(this)};var Y=function(F){var Z,ne,re,ae,he,se,fe,J,te,le,Ae,xe,ye,Se,Pe,Ce,ee,K,ve,Me,Q,W,V,z,X,de,pe,we,Je,Qe,Ye,gt,ct,be,ze,He,$e,Pt,St,rr,Ai,Vr,Ft,on,Sr,qr,ji,Fr,Jr,ce,De,Oe,Le,Ne,ot,Gt,wt,ft,Rr,nr,ur,Qt,Wi;for(re=0;re<48;re+=2)ae=F[0]^F[10]^F[20]^F[30]^F[40],he=F[1]^F[11]^F[21]^F[31]^F[41],se=F[2]^F[12]^F[22]^F[32]^F[42],fe=F[3]^F[13]^F[23]^F[33]^F[43],J=F[4]^F[14]^F[24]^F[34]^F[44],te=F[5]^F[15]^F[25]^F[35]^F[45],le=F[6]^F[16]^F[26]^F[36]^F[46],Ae=F[7]^F[17]^F[27]^F[37]^F[47],xe=F[8]^F[18]^F[28]^F[38]^F[48],ye=F[9]^F[19]^F[29]^F[39]^F[49],Z=xe^(se<<1|fe>>>31),ne=ye^(fe<<1|se>>>31),F[0]^=Z,F[1]^=ne,F[10]^=Z,F[11]^=ne,F[20]^=Z,F[21]^=ne,F[30]^=Z,F[31]^=ne,F[40]^=Z,F[41]^=ne,Z=ae^(J<<1|te>>>31),ne=he^(te<<1|J>>>31),F[2]^=Z,F[3]^=ne,F[12]^=Z,F[13]^=ne,F[22]^=Z,F[23]^=ne,F[32]^=Z,F[33]^=ne,F[42]^=Z,F[43]^=ne,Z=se^(le<<1|Ae>>>31),ne=fe^(Ae<<1|le>>>31),F[4]^=Z,F[5]^=ne,F[14]^=Z,F[15]^=ne,F[24]^=Z,F[25]^=ne,F[34]^=Z,F[35]^=ne,F[44]^=Z,F[45]^=ne,Z=J^(xe<<1|ye>>>31),ne=te^(ye<<1|xe>>>31),F[6]^=Z,F[7]^=ne,F[16]^=Z,F[17]^=ne,F[26]^=Z,F[27]^=ne,F[36]^=Z,F[37]^=ne,F[46]^=Z,F[47]^=ne,Z=le^(ae<<1|he>>>31),ne=Ae^(he<<1|ae>>>31),F[8]^=Z,F[9]^=ne,F[18]^=Z,F[19]^=ne,F[28]^=Z,F[29]^=ne,F[38]^=Z,F[39]^=ne,F[48]^=Z,F[49]^=ne,Se=F[0],Pe=F[1],qr=F[11]<<4|F[10]>>>28,ji=F[10]<<4|F[11]>>>28,we=F[20]<<3|F[21]>>>29,Je=F[21]<<3|F[20]>>>29,nr=F[31]<<9|F[30]>>>23,ur=F[30]<<9|F[31]>>>23,Vr=F[40]<<18|F[41]>>>14,Ft=F[41]<<18|F[40]>>>14,be=F[2]<<1|F[3]>>>31,ze=F[3]<<1|F[2]>>>31,Ce=F[13]<<12|F[12]>>>20,ee=F[12]<<12|F[13]>>>20,Fr=F[22]<<10|F[23]>>>22,Jr=F[23]<<10|F[22]>>>22,Qe=F[33]<<13|F[32]>>>19,Ye=F[32]<<13|F[33]>>>19,Qt=F[42]<<2|F[43]>>>30,Wi=F[43]<<2|F[42]>>>30,Ne=F[5]<<30|F[4]>>>2,ot=F[4]<<30|F[5]>>>2,He=F[14]<<6|F[15]>>>26,$e=F[15]<<6|F[14]>>>26,K=F[25]<<11|F[24]>>>21,ve=F[24]<<11|F[25]>>>21,ce=F[34]<<15|F[35]>>>17,De=F[35]<<15|F[34]>>>17,gt=F[45]<<29|F[44]>>>3,ct=F[44]<<29|F[45]>>>3,z=F[6]<<28|F[7]>>>4,X=F[7]<<28|F[6]>>>4,Gt=F[17]<<23|F[16]>>>9,wt=F[16]<<23|F[17]>>>9,Pt=F[26]<<25|F[27]>>>7,St=F[27]<<25|F[26]>>>7,Me=F[36]<<21|F[37]>>>11,Q=F[37]<<21|F[36]>>>11,Oe=F[47]<<24|F[46]>>>8,Le=F[46]<<24|F[47]>>>8,on=F[8]<<27|F[9]>>>5,Sr=F[9]<<27|F[8]>>>5,de=F[18]<<20|F[19]>>>12,pe=F[19]<<20|F[18]>>>12,ft=F[29]<<7|F[28]>>>25,Rr=F[28]<<7|F[29]>>>25,rr=F[38]<<8|F[39]>>>24,Ai=F[39]<<8|F[38]>>>24,W=F[48]<<14|F[49]>>>18,V=F[49]<<14|F[48]>>>18,F[0]=Se^~Ce&K,F[1]=Pe^~ee&ve,F[10]=z^~de&we,F[11]=X^~pe&Je,F[20]=be^~He&Pt,F[21]=ze^~$e&St,F[30]=on^~qr&Fr,F[31]=Sr^~ji&Jr,F[40]=Ne^~Gt&ft,F[41]=ot^~wt&Rr,F[2]=Ce^~K&Me,F[3]=ee^~ve&Q,F[12]=de^~we&Qe,F[13]=pe^~Je&Ye,F[22]=He^~Pt&rr,F[23]=$e^~St&Ai,F[32]=qr^~Fr&ce,F[33]=ji^~Jr&De,F[42]=Gt^~ft&nr,F[43]=wt^~Rr&ur,F[4]=K^~Me&W,F[5]=ve^~Q&V,F[14]=we^~Qe&gt,F[15]=Je^~Ye&ct,F[24]=Pt^~rr&Vr,F[25]=St^~Ai&Ft,F[34]=Fr^~ce&Oe,F[35]=Jr^~De&Le,F[44]=ft^~nr&Qt,F[45]=Rr^~ur&Wi,F[6]=Me^~W&Se,F[7]=Q^~V&Pe,F[16]=Qe^~gt&z,F[17]=Ye^~ct&X,F[26]=rr^~Vr&be,F[27]=Ai^~Ft&ze,F[36]=ce^~Oe&on,F[37]=De^~Le&Sr,F[46]=nr^~Qt&Ne,F[47]=ur^~Wi&ot,F[8]=W^~Se&Ce,F[9]=V^~Pe&ee,F[18]=gt^~z&de,F[19]=ct^~X&pe,F[28]=Vr^~be&He,F[29]=Ft^~ze&$e,F[38]=Oe^~on&qr,F[39]=Le^~Sr&ji,F[48]=Qt^~Ne&Gt,F[49]=Wi^~ot&wt,F[0]^=v[re],F[1]^=v[re+1]};if(s)e.exports=C;else for(I=0;I<D.length;++I)n[D[I]]=C[D[I]]})()})(Ape);var fqe=Ape.exports;const pqe=D4(fqe);function Zn(e){return"0x"+pqe.keccak_256($t(e))}const vqe="rlp/5.7.0",mc=new Re(vqe);function TQ(e){const t=[];for(;e;)t.unshift(e&255),e>>=8;return t}function PQ(e,t,r){let i=0;for(let n=0;n<r;n++)i=i*256+e[t+n];return i}function Spe(e){if(Array.isArray(e)){let i=[];if(e.forEach(function(a){i=i.concat(Spe(a))}),i.length<=55)return i.unshift(192+i.length),i;const n=TQ(i.length);return n.unshift(247+n.length),n.concat(i)}eF(e)||mc.throwArgumentError("RLP object must be BytesLike","object",e);const t=Array.prototype.slice.call($t(e));if(t.length===1&&t[0]<=127)return t;if(t.length<=55)return t.unshift(128+t.length),t;const r=TQ(t.length);return r.unshift(183+r.length),r.concat(t)}function e7(e){return Ot(Spe(e))}function DQ(e,t,r,i){const n=[];for(;r<t+1+i;){const a=Cpe(e,r);n.push(a.result),r+=a.consumed,r>t+1+i&&mc.throwError("child data too short",Re.errors.BUFFER_OVERRUN,{})}return{consumed:1+i,result:n}}function Cpe(e,t){if(e.length===0&&mc.throwError("data too short",Re.errors.BUFFER_OVERRUN,{}),e[t]>=248){const r=e[t]-247;t+1+r>e.length&&mc.throwError("data short segment too short",Re.errors.BUFFER_OVERRUN,{});const i=PQ(e,t+1,r);return t+1+r+i>e.length&&mc.throwError("data long segment too short",Re.errors.BUFFER_OVERRUN,{}),DQ(e,t,t+1+r,r+i)}else if(e[t]>=192){const r=e[t]-192;return t+1+r>e.length&&mc.throwError("data array too short",Re.errors.BUFFER_OVERRUN,{}),DQ(e,t,t+1,r)}else if(e[t]>=184){const r=e[t]-183;t+1+r>e.length&&mc.throwError("data array too short",Re.errors.BUFFER_OVERRUN,{});const i=PQ(e,t+1,r);t+1+r+i>e.length&&mc.throwError("data array too short",Re.errors.BUFFER_OVERRUN,{});const n=Ot(e.slice(t+1+r,t+1+r+i));return{consumed:1+r+i,result:n}}else if(e[t]>=128){const r=e[t]-128;t+1+r>e.length&&mc.throwError("data too short",Re.errors.BUFFER_OVERRUN,{});const i=Ot(e.slice(t+1,t+1+r));return{consumed:1+r,result:i}}return{consumed:1,result:Ot(e[t])}}function iF(e){const t=$t(e),r=Cpe(t,0);return r.consumed!==t.length&&mc.throwArgumentError("invalid rlp data","data",e),r.result}const mqe="address/5.7.0",jg=new Re(mqe);function IQ(e){gi(e,20)||jg.throwArgumentError("invalid address","address",e),e=e.toLowerCase();const t=e.substring(2).split(""),r=new Uint8Array(40);for(let n=0;n<40;n++)r[n]=t[n].charCodeAt(0);const i=$t(Zn(r));for(let n=0;n<40;n+=2)i[n>>1]>>4>=8&&(t[n]=t[n].toUpperCase()),(i[n>>1]&15)>=8&&(t[n+1]=t[n+1].toUpperCase());return"0x"+t.join("")}const gqe=9007199254740991;function yqe(e){return Math.log10?Math.log10(e):Math.log(e)/Math.LN10}const nF={};for(let e=0;e<10;e++)nF[String(e)]=String(e);for(let e=0;e<26;e++)nF[String.fromCharCode(65+e)]=String(10+e);const LQ=Math.floor(yqe(gqe));function xqe(e){e=e.toUpperCase(),e=e.substring(4)+e.substring(0,2)+"00";let t=e.split("").map(i=>nF[i]).join("");for(;t.length>=LQ;){let i=t.substring(0,LQ);t=parseInt(i,10)%97+t.substring(i.length)}let r=String(98-parseInt(t,10)%97);for(;r.length<2;)r="0"+r;return r}function Za(e){let t=null;if(typeof e!="string"&&jg.throwArgumentError("invalid address","address",e),e.match(/^(0x)?[0-9a-fA-F]{40}$/))e.substring(0,2)!=="0x"&&(e="0x"+e),t=IQ(e),e.match(/([A-F].*[a-f])|([a-f].*[A-F])/)&&t!==e&&jg.throwArgumentError("bad address checksum","address",e);else if(e.match(/^XE[0-9]{2}[0-9A-Za-z]{30,31}$/)){for(e.substring(2,4)!==xqe(e)&&jg.throwArgumentError("bad icap checksum","address",e),t=tqe(e.substring(4));t.length<40;)t="0"+t;t=IQ("0x"+t)}else jg.throwArgumentError("invalid address","address",e);return t}function Epe(e){let t=null;try{t=Za(e.from)}catch{jg.throwArgumentError("missing from address","transaction",e)}const r=Y1($t(pt.from(e.nonce).toHexString()));return Za(lo(Zn(e7([t,r])),12))}class bqe extends Vd{constructor(t){super("address","address",t,!1)}defaultValue(){return"0x0000000000000000000000000000000000000000"}encode(t,r){try{r=Za(r)}catch(i){this._throwError(i.message,r)}return t.writeValue(r)}decode(t){return Za(vn(t.readValue().toHexString(),20))}}class wqe extends Vd{constructor(t){super(t.name,t.type,void 0,t.dynamic),this.coder=t}defaultValue(){return this.coder.defaultValue()}encode(t,r){return this.coder.encode(t,r)}decode(t){return this.coder.decode(t)}}const Wg=new Re(L4);function Mpe(e,t,r){let i=null;if(Array.isArray(r))i=r;else if(r&&typeof r=="object"){let l={};i=t.map(u=>{const c=u.localName;return c||Wg.throwError("cannot encode object for signature with missing names",Re.errors.INVALID_ARGUMENT,{argument:"values",coder:u,value:r}),l[c]&&Wg.throwError("cannot encode object for signature with duplicate names",Re.errors.INVALID_ARGUMENT,{argument:"values",coder:u,value:r}),l[c]=!0,r[c]})}else Wg.throwArgumentError("invalid tuple value","tuple",r);t.length!==i.length&&Wg.throwArgumentError("types/value length mismatch","tuple",r);let n=new Pk(e.wordSize),a=new Pk(e.wordSize),o=[];t.forEach((l,u)=>{let c=i[u];if(l.dynamic){let h=a.length;l.encode(a,c);let d=n.writeUpdatableValue();o.push(f=>{d(f+h)})}else l.encode(n,c)}),o.forEach(l=>{l(n.length)});let s=e.appendWriter(n);return s+=e.appendWriter(a),s}function Tpe(e,t){let r=[],i=e.subReader(0);t.forEach(a=>{let o=null;if(a.dynamic){let s=e.readValue(),l=i.subReader(s.toNumber());try{o=a.decode(l)}catch(u){if(u.code===Re.errors.BUFFER_OVERRUN)throw u;o=u,o.baseType=a.name,o.name=a.localName,o.type=a.type}}else try{o=a.decode(e)}catch(s){if(s.code===Re.errors.BUFFER_OVERRUN)throw s;o=s,o.baseType=a.name,o.name=a.localName,o.type=a.type}o!=null&&r.push(o)});const n=t.reduce((a,o)=>{const s=o.localName;return s&&(a[s]||(a[s]=0),a[s]++),a},{});t.forEach((a,o)=>{let s=a.localName;if(!s||n[s]!==1||(s==="length"&&(s="_length"),r[s]!=null))return;const l=r[o];l instanceof Error?Object.defineProperty(r,s,{enumerable:!0,get:()=>{throw l}}):r[s]=l});for(let a=0;a<r.length;a++){const o=r[a];o instanceof Error&&Object.defineProperty(r,a,{enumerable:!0,get:()=>{throw o}})}return Object.freeze(r)}class _qe extends Vd{constructor(t,r,i){const n=t.type+"["+(r>=0?r:"")+"]",a=r===-1||t.dynamic;super("array",n,i,a),this.coder=t,this.length=r}defaultValue(){const t=this.coder.defaultValue(),r=[];for(let i=0;i<this.length;i++)r.push(t);return r}encode(t,r){Array.isArray(r)||this._throwError("expected array value",r);let i=this.length;i===-1&&(i=r.length,t.writeValue(r.length)),Wg.checkArgumentCount(r.length,i,"coder array"+(this.localName?" "+this.localName:""));let n=[];for(let a=0;a<r.length;a++)n.push(this.coder);return Mpe(t,n,r)}decode(t){let r=this.length;r===-1&&(r=t.readValue().toNumber(),r*32>t._data.length&&Wg.throwError("insufficient data length",Re.errors.BUFFER_OVERRUN,{length:t._data.length,count:r}));let i=[];for(let n=0;n<r;n++)i.push(new wqe(this.coder));return t.coerce(this.name,Tpe(t,i))}}class Aqe extends Vd{constructor(t){super("bool","bool",t,!1)}defaultValue(){return!1}encode(t,r){return t.writeValue(r?1:0)}decode(t){return t.coerce(this.type,!t.readValue().isZero())}}class Ppe extends Vd{constructor(t,r){super(t,t,r,!0)}defaultValue(){return"0x"}encode(t,r){r=$t(r);let i=t.writeValue(r.length);return i+=t.writeBytes(r),i}decode(t){return t.readBytes(t.readValue().toNumber(),!0)}}class Sqe extends Ppe{constructor(t){super("bytes",t)}decode(t){return t.coerce(this.name,Ot(super.decode(t)))}}class Cqe extends Vd{constructor(t,r){let i="bytes"+String(t);super(i,i,r,!1),this.size=t}defaultValue(){return"0x0000000000000000000000000000000000000000000000000000000000000000".substring(0,2+this.size*2)}encode(t,r){let i=$t(r);return i.length!==this.size&&this._throwError("incorrect data length",r),t.writeBytes(i)}decode(t){return t.coerce(this.name,Ot(t.readBytes(this.size)))}}class Eqe extends Vd{constructor(t){super("null","",t,!1)}defaultValue(){return null}encode(t,r){return r!=null&&this._throwError("not null",r),t.writeBytes([])}decode(t){return t.readBytes(0),t.coerce(this.name,null)}}const Mqe="0x0000000000000000000000000000000000000000",Tqe=pt.from(-1),Dpe=pt.from(0),Pqe=pt.from(1),Dqe=pt.from("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff"),Iqe="0x0000000000000000000000000000000000000000000000000000000000000000";class Lqe extends Vd{constructor(t,r,i){const n=(r?"int":"uint")+t*8;super(n,n,i,!1),this.size=t,this.signed=r}defaultValue(){return 0}encode(t,r){let i=pt.from(r),n=Dqe.mask(t.wordSize*8);if(this.signed){let a=n.mask(this.size*8-1);(i.gt(a)||i.lt(a.add(Pqe).mul(Tqe)))&&this._throwError("value out-of-bounds",r)}else(i.lt(Dpe)||i.gt(n.mask(this.size*8)))&&this._throwError("value out-of-bounds",r);return i=i.toTwos(this.size*8).mask(this.size*8),this.signed&&(i=i.fromTwos(this.size*8).toTwos(8*t.wordSize)),t.writeValue(i)}decode(t){let r=t.readValue().mask(this.size*8);return this.signed&&(r=r.fromTwos(this.size*8)),t.coerce(this.name,r)}}const kqe="strings/5.7.0",Ipe=new Re(kqe);var Cw;(function(e){e.current="",e.NFC="NFC",e.NFD="NFD",e.NFKC="NFKC",e.NFKD="NFKD"})(Cw||(Cw={}));var Os;(function(e){e.UNEXPECTED_CONTINUE="unexpected continuation byte",e.BAD_PREFIX="bad codepoint prefix",e.OVERRUN="string overrun",e.MISSING_CONTINUE="missing continuation byte",e.OUT_OF_RANGE="out of UTF-8 range",e.UTF16_SURROGATE="UTF-16 surrogate",e.OVERLONG="overlong representation"})(Os||(Os={}));function Rqe(e,t,r,i,n){return Ipe.throwArgumentError(`invalid codepoint at offset ${t}; ${e}`,"bytes",r)}function Lpe(e,t,r,i,n){if(e===Os.BAD_PREFIX||e===Os.UNEXPECTED_CONTINUE){let a=0;for(let o=t+1;o<r.length&&r[o]>>6===2;o++)a++;return a}return e===Os.OVERRUN?r.length-t-1:0}function Oqe(e,t,r,i,n){return e===Os.OVERLONG?(i.push(n),0):(i.push(65533),Lpe(e,t,r))}const Bqe=Object.freeze({error:Rqe,ignore:Lpe,replace:Oqe});function kpe(e,t){t==null&&(t=Bqe.error),e=$t(e);const r=[];let i=0;for(;i<e.length;){const n=e[i++];if(!(n>>7)){r.push(n);continue}let a=null,o=null;if((n&224)===192)a=1,o=127;else if((n&240)===224)a=2,o=2047;else if((n&248)===240)a=3,o=65535;else{(n&192)===128?i+=t(Os.UNEXPECTED_CONTINUE,i-1,e,r):i+=t(Os.BAD_PREFIX,i-1,e,r);continue}if(i-1+a>=e.length){i+=t(Os.OVERRUN,i-1,e,r);continue}let s=n&(1<<8-a-1)-1;for(let l=0;l<a;l++){let u=e[i];if((u&192)!=128){i+=t(Os.MISSING_CONTINUE,i,e,r),s=null;break}s=s<<6|u&63,i++}if(s!==null){if(s>1114111){i+=t(Os.OUT_OF_RANGE,i-1-a,e,r,s);continue}if(s>=55296&&s<=57343){i+=t(Os.UTF16_SURROGATE,i-1-a,e,r,s);continue}if(s<=o){i+=t(Os.OVERLONG,i-1-a,e,r,s);continue}r.push(s)}}return r}function eh(e,t=Cw.current){t!=Cw.current&&(Ipe.checkNormalize(),e=e.normalize(t));let r=[];for(let i=0;i<e.length;i++){const n=e.charCodeAt(i);if(n<128)r.push(n);else if(n<2048)r.push(n>>6|192),r.push(n&63|128);else if((n&64512)==55296){i++;const a=e.charCodeAt(i);if(i>=e.length||(a&64512)!==56320)throw new Error("invalid utf-8 string");const o=65536+((n&1023)<<10)+(a&1023);r.push(o>>18|240),r.push(o>>12&63|128),r.push(o>>6&63|128),r.push(o&63|128)}else r.push(n>>12|224),r.push(n>>6&63|128),r.push(n&63|128)}return $t(r)}function Nqe(e){return e.map(t=>t<=65535?String.fromCharCode(t):(t-=65536,String.fromCharCode((t>>10&1023)+55296,(t&1023)+56320))).join("")}function k4(e,t){return Nqe(kpe(e,t))}function Vqe(e,t=Cw.current){return kpe(eh(e,t))}class Fqe extends Ppe{constructor(t){super("string",t)}defaultValue(){return""}encode(t,r){return super.encode(t,eh(r))}decode(t){return k4(super.decode(t))}}class m_ extends Vd{constructor(t,r){let i=!1;const n=[];t.forEach(o=>{o.dynamic&&(i=!0),n.push(o.type)});const a="tuple("+n.join(",")+")";super("tuple",a,r,i),this.coders=t}defaultValue(){const t=[];this.coders.forEach(i=>{t.push(i.defaultValue())});const r=this.coders.reduce((i,n)=>{const a=n.localName;return a&&(i[a]||(i[a]=0),i[a]++),i},{});return this.coders.forEach((i,n)=>{let a=i.localName;!a||r[a]!==1||(a==="length"&&(a="_length"),t[a]==null&&(t[a]=t[n]))}),Object.freeze(t)}encode(t,r){return Mpe(t,this.coders,r)}decode(t){return t.coerce(this.name,Tpe(t,this.coders))}}const g_=new Re(L4),zqe=new RegExp(/^bytes([0-9]*)$/),Hqe=new RegExp(/^(u?int)([0-9]*)$/);class Uqe{constructor(t){nt(this,"coerceFunc",t||null)}_getCoder(t){switch(t.baseType){case"address":return new bqe(t.name);case"bool":return new Aqe(t.name);case"string":return new Fqe(t.name);case"bytes":return new Sqe(t.name);case"array":return new _qe(this._getCoder(t.arrayChildren),t.arrayLength,t.name);case"tuple":return new m_((t.components||[]).map(i=>this._getCoder(i)),t.name);case"":return new Eqe(t.name)}let r=t.type.match(Hqe);if(r){let i=parseInt(r[2]||"256");return(i===0||i>256||i%8!==0)&&g_.throwArgumentError("invalid "+r[1]+" bit length","param",t),new Lqe(i/8,r[1]==="int",t.name)}if(r=t.type.match(zqe),r){let i=parseInt(r[1]);return(i===0||i>32)&&g_.throwArgumentError("invalid bytes length","param",t),new Cqe(i,t.name)}return g_.throwArgumentError("invalid type","type",t.type)}_getWordSize(){return 32}_getReader(t,r){return new _S(t,this._getWordSize(),this.coerceFunc,r)}_getWriter(){return new Pk(this._getWordSize())}getDefaultValue(t){const r=t.map(n=>this._getCoder(pa.from(n)));return new m_(r,"_").defaultValue()}encode(t,r){t.length!==r.length&&g_.throwError("types/values length mismatch",Re.errors.INVALID_ARGUMENT,{count:{types:t.length,values:r.length},value:{types:t,values:r}});const i=t.map(o=>this._getCoder(pa.from(o))),n=new m_(i,"_"),a=this._getWriter();return n.encode(a,r),a.data}decode(t,r,i){const n=t.map(o=>this._getCoder(pa.from(o)));return new m_(n,"_").decode(this._getReader($t(r),i))}}const Rpe=new Uqe;function qg(e){return Zn(eh(e))}const Ope="hash/5.7.0";function Bpe(e){e=atob(e);const t=[];for(let r=0;r<e.length;r++)t.push(e.charCodeAt(r));return $t(t)}function Npe(e){e=$t(e);let t="";for(let r=0;r<e.length;r++)t+=String.fromCharCode(e[r]);return btoa(t)}function Vpe(e,t){t==null&&(t=1);const r=[],i=r.forEach,n=function(a,o){i.call(a,function(s){o>0&&Array.isArray(s)?n(s,o-1):r.push(s)})};return n(e,t),r}function Gqe(e){const t={};for(let r=0;r<e.length;r++){const i=e[r];t[i[0]]=i[1]}return t}function jqe(e){let t=0;function r(){return e[t++]<<8|e[t++]}let i=r(),n=1,a=[0,1];for(let _=1;_<i;_++)a.push(n+=r());let o=r(),s=t;t+=o;let l=0,u=0;function c(){return l==0&&(u=u<<8|e[t++],l=8),u>>--l&1}const h=31,d=Math.pow(2,h),f=d>>>1,p=f>>1,v=d-1;let m=0;for(let _=0;_<h;_++)m=m<<1|c();let g=[],y=0,x=d;for(;;){let _=Math.floor(((m-y+1)*n-1)/x),w=0,S=i;for(;S-w>1;){let E=w+S>>>1;_<a[E]?S=E:w=E}if(w==0)break;g.push(w);let A=y+Math.floor(x*a[w]/n),M=y+Math.floor(x*a[w+1]/n)-1;for(;!((A^M)&f);)m=m<<1&v|c(),A=A<<1&v,M=M<<1&v|1;for(;A&~M&p;)m=m&f|m<<1&v>>>1|c(),A=A<<1^f,M=(M^f)<<1|f|1;y=A,x=1+M-A}let b=i-4;return g.map(_=>{switch(_-b){case 3:return b+65792+(e[s++]<<16|e[s++]<<8|e[s++]);case 2:return b+256+(e[s++]<<8|e[s++]);case 1:return b+e[s++];default:return _-1}})}function Wqe(e){let t=0;return()=>e[t++]}function qqe(e){return Wqe(jqe(e))}function Yqe(e){return e&1?~e>>1:e>>1}function Xqe(e,t){let r=Array(e);for(let i=0;i<e;i++)r[i]=1+t();return r}function kQ(e,t){let r=Array(e);for(let i=0,n=-1;i<e;i++)r[i]=n+=1+t();return r}function Zqe(e,t){let r=Array(e);for(let i=0,n=0;i<e;i++)r[i]=n+=Yqe(t());return r}function AS(e,t){let r=kQ(e(),e),i=e(),n=kQ(i,e),a=Xqe(i,e);for(let o=0;o<i;o++)for(let s=0;s<a[o];s++)r.push(n[o]+s);return t?r.map(o=>t[o]):r}function Qqe(e){let t=[];for(;;){let r=e();if(r==0)break;t.push(Jqe(r,e))}for(;;){let r=e()-1;if(r<0)break;t.push($qe(r,e))}return Gqe(Vpe(t))}function Kqe(e){let t=[];for(;;){let r=e();if(r==0)break;t.push(r)}return t}function Fpe(e,t,r){let i=Array(e).fill(void 0).map(()=>[]);for(let n=0;n<t;n++)Zqe(e,r).forEach((a,o)=>i[o].push(a));return i}function Jqe(e,t){let r=1+t(),i=t(),n=Kqe(t),a=Fpe(n.length,1+e,t);return Vpe(a.map((o,s)=>{const l=o[0],u=o.slice(1);return Array(n[s]).fill(void 0).map((c,h)=>{let d=h*i;return[l+h*r,u.map(f=>f+d)]})}))}function $qe(e,t){let r=1+t();return Fpe(r,1+e,t).map(n=>[n[0],n.slice(1)])}function eYe(e){let t=AS(e).sort((i,n)=>i-n);return r();function r(){let i=[];for(;;){let u=AS(e,t);if(u.length==0)break;i.push({set:new Set(u),node:r()})}i.sort((u,c)=>c.set.size-u.set.size);let n=e(),a=n%3;n=n/3|0;let o=!!(n&1);n>>=1;let s=n==1,l=n==2;return{branches:i,valid:a,fe0f:o,save:s,check:l}}}function tYe(){return qqe(Bpe("AEQF2AO2DEsA2wIrAGsBRABxAN8AZwCcAEwAqgA0AGwAUgByADcATAAVAFYAIQAyACEAKAAYAFgAGwAjABQAMAAmADIAFAAfABQAKwATACoADgAbAA8AHQAYABoAGQAxADgALAAoADwAEwA9ABMAGgARAA4ADwAWABMAFgAIAA8AHgQXBYMA5BHJAS8JtAYoAe4AExozi0UAH21tAaMnBT8CrnIyhrMDhRgDygIBUAEHcoFHUPe8AXBjAewCjgDQR8IICIcEcQLwATXCDgzvHwBmBoHNAqsBdBcUAykgDhAMShskMgo8AY8jqAQfAUAfHw8BDw87MioGlCIPBwZCa4ELatMAAMspJVgsDl8AIhckSg8XAHdvTwBcIQEiDT4OPhUqbyECAEoAS34Aej8Ybx83JgT/Xw8gHxZ/7w8RICxPHA9vBw+Pfw8PHwAPFv+fAsAvCc8vEr8ivwD/EQ8Bol8OEBa/A78hrwAPCU8vESNvvwWfHwNfAVoDHr+ZAAED34YaAdJPAK7PLwSEgDLHAGo1Pz8Pvx9fUwMrpb8O/58VTzAPIBoXIyQJNF8hpwIVAT8YGAUADDNBaX3RAMomJCg9EhUeA29MABsZBTMNJipjOhc19gcIDR8bBwQHEggCWi6DIgLuAQYA+BAFCha3A5XiAEsqM7UFFgFLhAMjFTMYE1Klnw74nRVBG/ASCm0BYRN/BrsU3VoWy+S0vV8LQx+vN8gF2AC2AK5EAWwApgYDKmAAroQ0NDQ0AT+OCg7wAAIHRAbpNgVcBV0APTA5BfbPFgMLzcYL/QqqA82eBALKCjQCjqYCht0/k2+OAsXQAoP3ASTKDgDw6ACKAUYCMpIKJpRaAE4A5womABzZvs0REEKiACIQAd5QdAECAj4Ywg/wGqY2AVgAYADYvAoCGAEubA0gvAY2ALAAbpbvqpyEAGAEpgQAJgAG7gAgAEACmghUFwCqAMpAINQIwC4DthRAAPcycKgApoIdABwBfCisABoATwBqASIAvhnSBP8aH/ECeAKXAq40NjgDBTwFYQU6AXs3oABgAD4XNgmcCY1eCl5tIFZeUqGgyoNHABgAEQAaABNwWQAmABMATPMa3T34ADldyprmM1M2XociUQgLzvwAXT3xABgAEQAaABNwIGFAnADD8AAgAD4BBJWzaCcIAIEBFMAWwKoAAdq9BWAF5wLQpALEtQAKUSGkahR4GnJM+gsAwCgeFAiUAECQ0BQuL8AAIAAAADKeIheclvFqQAAETr4iAMxIARMgAMIoHhQIAn0E0pDQFC4HhznoAAAAIAI2C0/4lvFqQAAETgBJJwYCAy4ABgYAFAA8MBKYEH4eRhTkAjYeFcgACAYAeABsOqyQ5gRwDayqugEgaIIAtgoACgDmEABmBAWGme5OBJJA2m4cDeoAmITWAXwrMgOgAGwBCh6CBXYF1Tzg1wKAAFdiuABRAFwAXQBsAG8AdgBrAHYAbwCEAHEwfxQBVE5TEQADVFhTBwBDANILAqcCzgLTApQCrQL6vAAMAL8APLhNBKkE6glGKTAU4Dr4N2EYEwBCkABKk8rHAbYBmwIoAiU4Ajf/Aq4CowCAANIChzgaNBsCsTgeODcFXrgClQKdAqQBiQGYAqsCsjTsNHsfNPA0ixsAWTWiOAMFPDQSNCk2BDZHNow2TTZUNhk28Jk9VzI3QkEoAoICoQKwAqcAQAAxBV4FXbS9BW47YkIXP1ciUqs05DS/FwABUwJW11e6nHuYZmSh/RAYA8oMKvZ8KASoUAJYWAJ6ILAsAZSoqjpgA0ocBIhmDgDWAAawRDQoAAcuAj5iAHABZiR2AIgiHgCaAU68ACxuHAG0ygM8MiZIAlgBdF4GagJqAPZOHAMuBgoATkYAsABiAHgAMLoGDPj0HpKEBAAOJgAuALggTAHWAeAMEDbd20Uege0ADwAWADkAQgA9OHd+2MUQZBBhBgNNDkxxPxUQArEPqwvqERoM1irQ090ANK4H8ANYB/ADWANYB/AH8ANYB/ADWANYA1gDWBwP8B/YxRBkD00EcgWTBZAE2wiIJk4RhgctCNdUEnQjHEwDSgEBIypJITuYMxAlR0wRTQgIATZHbKx9PQNMMbBU+pCnA9AyVDlxBgMedhKlAC8PeCE1uk6DekxxpQpQT7NX9wBFBgASqwAS5gBJDSgAUCwGPQBI4zTYABNGAE2bAE3KAExdGABKaAbgAFBXAFCOAFBJABI2SWdObALDOq0//QomCZhvwHdTBkIQHCemEPgMNAG2ATwN7kvZBPIGPATKH34ZGg/OlZ0Ipi3eDO4m5C6igFsj9iqEBe5L9TzeC05RaQ9aC2YJ5DpkgU8DIgEOIowK3g06CG4Q9ArKbA3mEUYHOgPWSZsApgcCCxIdNhW2JhFirQsKOXgG/Br3C5AmsBMqev0F1BoiBk4BKhsAANAu6IWxWjJcHU9gBgQLJiPIFKlQIQ0mQLh4SRocBxYlqgKSQ3FKiFE3HpQh9zw+DWcuFFF9B/Y8BhlQC4I8n0asRQ8R0z6OPUkiSkwtBDaALDAnjAnQD4YMunxzAVoJIgmyDHITMhEYN8YIOgcaLpclJxYIIkaWYJsE+KAD9BPSAwwFQAlCBxQDthwuEy8VKgUOgSXYAvQ21i60ApBWgQEYBcwPJh/gEFFH4Q7qCJwCZgOEJewALhUiABginAhEZABgj9lTBi7MCMhqbSN1A2gU6GIRdAeSDlgHqBw0FcAc4nDJXgyGCSiksAlcAXYJmgFgBOQICjVcjKEgQmdUi1kYnCBiQUBd/QIyDGYVoES+h3kCjA9sEhwBNgF0BzoNAgJ4Ee4RbBCWCOyGBTW2M/k6JgRQIYQgEgooA1BszwsoJvoM+WoBpBJjAw00PnfvZ6xgtyUX/gcaMsZBYSHyC5NPzgydGsIYQ1QvGeUHwAP0GvQn60FYBgADpAQUOk4z7wS+C2oIjAlAAEoOpBgH2BhrCnKM0QEyjAG4mgNYkoQCcJAGOAcMAGgMiAV65gAeAqgIpAAGANADWAA6Aq4HngAaAIZCAT4DKDABIuYCkAOUCDLMAZYwAfQqBBzEDBYA+DhuSwLDsgKAa2ajBd5ZAo8CSjYBTiYEBk9IUgOwcuIA3ABMBhTgSAEWrEvMG+REAeBwLADIAPwABjYHBkIBzgH0bgC4AWALMgmjtLYBTuoqAIQAFmwB2AKKAN4ANgCA8gFUAE4FWvoF1AJQSgESMhksWGIBvAMgATQBDgB6BsyOpsoIIARuB9QCEBwV4gLvLwe2AgMi4BPOQsYCvd9WADIXUu5eZwqoCqdeaAC0YTQHMnM9UQAPH6k+yAdy/BZIiQImSwBQ5gBQQzSaNTFWSTYBpwGqKQK38AFtqwBI/wK37gK3rQK3sAK6280C0gK33AK3zxAAUEIAUD9SklKDArekArw5AEQAzAHCO147WTteO1k7XjtZO147WTteO1kDmChYI03AVU0oJqkKbV9GYewMpw3VRMk6ShPcYFJgMxPJLbgUwhXPJVcZPhq9JwYl5VUKDwUt1GYxCC00dhe9AEApaYNCY4ceMQpMHOhTklT5LRwAskujM7ANrRsWREEFSHXuYisWDwojAmSCAmJDXE6wXDchAqH4AmiZAmYKAp+FOBwMAmY8AmYnBG8EgAN/FAN+kzkHOXgYOYM6JCQCbB4CMjc4CwJtyAJtr/CLADRoRiwBaADfAOIASwYHmQyOAP8MwwAOtgJ3MAJ2o0ACeUxEAni7Hl3cRa9G9AJ8QAJ6yQJ9CgJ88UgBSH5kJQAsFklZSlwWGErNAtECAtDNSygDiFADh+dExpEzAvKiXQQDA69Lz0wuJgTQTU1NsAKLQAKK2cIcCB5EaAa4Ao44Ao5dQZiCAo7aAo5deVG1UzYLUtVUhgKT/AKTDQDqAB1VH1WwVdEHLBwplocy4nhnRTw6ApegAu+zWCKpAFomApaQApZ9nQCqWa1aCoJOADwClrYClk9cRVzSApnMApllXMtdCBoCnJw5wzqeApwXAp+cAp65iwAeEDIrEAKd8gKekwC2PmE1YfACntQCoG8BqgKeoCACnk+mY8lkKCYsAiewAiZ/AqD8AqBN2AKmMAKlzwKoAAB+AqfzaH1osgAESmodatICrOQCrK8CrWgCrQMCVx4CVd0CseLYAx9PbJgCsr4OArLpGGzhbWRtSWADJc4Ctl08QG6RAylGArhfArlIFgK5K3hwN3DiAr0aAy2zAzISAr6JcgMDM3ICvhtzI3NQAsPMAsMFc4N0TDZGdOEDPKgDPJsDPcACxX0CxkgCxhGKAshqUgLIRQLJUALJLwJkngLd03h6YniveSZL0QMYpGcDAmH1GfSVJXsMXpNevBICz2wCz20wTFTT9BSgAMeuAs90ASrrA04TfkwGAtwoAtuLAtJQA1JdA1NgAQIDVY2AikABzBfuYUZ2AILPg44C2sgC2d+EEYRKpz0DhqYAMANkD4ZyWvoAVgLfZgLeuXR4AuIw7RUB8zEoAfScAfLTiALr9ALpcXoAAur6AurlAPpIAboC7ooC652Wq5cEAu5AA4XhmHpw4XGiAvMEAGoDjheZlAL3FAORbwOSiAL3mQL52gL4Z5odmqy8OJsfA52EAv77ARwAOp8dn7QDBY4DpmsDptoA0sYDBmuhiaIGCgMMSgFgASACtgNGAJwEgLpoBgC8BGzAEowcggCEDC6kdjoAJAM0C5IKRoABZCgiAIzw3AYBLACkfng9ogigkgNmWAN6AEQCvrkEVqTGAwCsBRbAA+4iQkMCHR072jI2PTbUNsk2RjY5NvA23TZKNiU3EDcZN5I+RTxDRTBCJkK5VBYKFhZfwQCWygU3AJBRHpu+OytgNxa61A40GMsYjsn7BVwFXQVcBV0FaAVdBVwFXQVcBV0FXAVdBVwFXUsaCNyKAK4AAQUHBwKU7oICoW1e7jAEzgPxA+YDwgCkBFDAwADABKzAAOxFLhitA1UFTDeyPkM+bj51QkRCuwTQWWQ8X+0AWBYzsACNA8xwzAGm7EZ/QisoCTAbLDs6fnLfb8H2GccsbgFw13M1HAVkBW/Jxsm9CNRO8E8FDD0FBQw9FkcClOYCoMFegpDfADgcMiA2AJQACB8AsigKAIzIEAJKeBIApY5yPZQIAKQiHb4fvj5BKSRPQrZCOz0oXyxgOywfKAnGbgMClQaCAkILXgdeCD9IIGUgQj5fPoY+dT52Ao5CM0dAX9BTVG9SDzFwWTQAbxBzJF/lOEIQQglCCkKJIAls5AcClQICoKPMODEFxhi6KSAbiyfIRrMjtCgdWCAkPlFBIitCsEJRzAbMAV/OEyQzDg0OAQQEJ36i328/Mk9AybDJsQlq3tDRApUKAkFzXf1d/j9uALYP6hCoFgCTGD8kPsFKQiobrm0+zj0KSD8kPnVCRBwMDyJRTHFgMTJa5rwXQiQ2YfI/JD7BMEJEHGINTw4TOFlIRzwJO0icMQpyPyQ+wzJCRBv6DVgnKB01NgUKj2bwYzMqCoBkznBgEF+zYDIocwRIX+NgHj4HICNfh2C4CwdwFWpTG/lgUhYGAwRfv2Ts8mAaXzVgml/XYIJfuWC4HI1gUF9pYJZgMR6ilQHMAOwLAlDRefC0in4AXAEJA6PjCwc0IamOANMMCAECRQDFNRTZBgd+CwQlRA+r6+gLBDEFBnwUBXgKATIArwAGRAAHA3cDdAN2A3kDdwN9A3oDdQN7A30DfAN4A3oDfQAYEAAlAtYASwMAUAFsAHcKAHcAmgB3AHUAdQB2AHVu8UgAygDAAHcAdQB1AHYAdQALCgB3AAsAmgB3AAsCOwB3AAtu8UgAygDAAHgKAJoAdwB3AHUAdQB2AHUAeAB1AHUAdgB1bvFIAMoAwAALCgCaAHcACwB3AAsCOwB3AAtu8UgAygDAAH4ACwGgALcBpwC6AahdAu0COwLtbvFIAMoAwAALCgCaAu0ACwLtAAsCOwLtAAtu8UgAygDAA24ACwNvAAu0VsQAAzsAABCkjUIpAAsAUIusOggWcgMeBxVsGwL67U/2HlzmWOEeOgALASvuAAseAfpKUpnpGgYJDCIZM6YyARUE9ThqAD5iXQgnAJYJPnOzw0ZAEZxEKsIAkA4DhAHnTAIDxxUDK0lxCQlPYgIvIQVYJQBVqE1GakUAKGYiDToSBA1EtAYAXQJYAIF8GgMHRyAAIAjOe9YncekRAA0KACUrjwE7Ayc6AAYWAqaiKG4McEcqANoN3+Mg9TwCBhIkuCny+JwUQ29L008JluRxu3K+oAdqiHOqFH0AG5SUIfUJ5SxCGfxdipRzqTmT4V5Zb+r1Uo4Vm+NqSSEl2mNvR2JhIa8SpYO6ntdwFXHCWTCK8f2+Hxo7uiG3drDycAuKIMP5bhi06ACnqArH1rz4Rqg//lm6SgJGEVbF9xJHISaR6HxqxSnkw6shDnelHKNEfGUXSJRJ1GcsmtJw25xrZMDK9gXSm1/YMkdX4/6NKYOdtk/NQ3/NnDASjTc3fPjIjW/5sVfVObX2oTDWkr1dF9f3kxBsD3/3aQO8hPfRz+e0uEiJqt1161griu7gz8hDDwtpy+F+BWtefnKHZPAxcZoWbnznhJpy0e842j36bcNzGnIEusgGX0a8ZxsnjcSsPDZ09yZ36fCQbriHeQ72JRMILNl6ePPf2HWoVwgWAm1fb3V2sAY0+B6rAXqSwPBgseVmoqsBTSrm91+XasMYYySI8eeRxH3ZvHkMz3BQ5aJ3iUVbYPNM3/7emRtjlsMgv/9VyTsyt/mK+8fgWeT6SoFaclXqn42dAIsvAarF5vNNWHzKSkKQ/8Hfk5ZWK7r9yliOsooyBjRhfkHP4Q2DkWXQi6FG/9r/IwbmkV5T7JSopHKn1pJwm9tb5Ot0oyN1Z2mPpKXHTxx2nlK08fKk1hEYA8WgVVWL5lgx0iTv+KdojJeU23ZDjmiubXOxVXJKKi2Wjuh2HLZOFLiSC7Tls5SMh4f+Pj6xUSrNjFqLGehRNB8lC0QSLNmkJJx/wSG3MnjE9T1CkPwJI0wH2lfzwETIiVqUxg0dfu5q39Gt+hwdcxkhhNvQ4TyrBceof3Mhs/IxFci1HmHr4FMZgXEEczPiGCx0HRwzAqDq2j9AVm1kwN0mRVLWLylgtoPNapF5cY4Y1wJh/e0BBwZj44YgZrDNqvD/9Hv7GFYdUQeDJuQ3EWI4HaKqavU1XjC/n41kT4L79kqGq0kLhdTZvgP3TA3fS0ozVz+5piZsoOtIvBUFoMKbNcmBL6YxxaUAusHB38XrS8dQMnQwJfUUkpRoGr5AUeWicvBTzyK9g77+yCkf5PAysL7r/JjcZgrbvRpMW9iyaxZvKO6ceZN2EwIxKwVFPuvFuiEPGCoagbMo+SpydLrXqBzNCDGFCrO/rkcwa2xhokQZ5CdZ0AsU3JfSqJ6n5I14YA+P/uAgfhPU84Tlw7cEFfp7AEE8ey4sP12PTt4Cods1GRgDOB5xvyiR5m+Bx8O5nBCNctU8BevfV5A08x6RHd5jcwPTMDSZJOedIZ1cGQ704lxbAzqZOP05ZxaOghzSdvFBHYqomATARyAADK4elP8Ly3IrUZKfWh23Xy20uBUmLS4Pfagu9+oyVa2iPgqRP3F2CTUsvJ7+RYnN8fFZbU/HVvxvcFFDKkiTqV5UBZ3Gz54JAKByi9hkKMZJvuGgcSYXFmw08UyoQyVdfTD1/dMkCHXcTGAKeROgArsvmRrQTLUOXioOHGK2QkjHuoYFgXciZoTJd6Fs5q1QX1G+p/e26hYsEf7QZD1nnIyl/SFkNtYYmmBhpBrxl9WbY0YpHWRuw2Ll/tj9mD8P4snVzJl4F9J+1arVeTb9E5r2ILH04qStjxQNwn3m4YNqxmaNbLAqW2TN6LidwuJRqS+NXbtqxoeDXpxeGWmxzSkWxjkyCkX4NQRme6q5SAcC+M7+9ETfA/EwrzQajKakCwYyeunP6ZFlxU2oMEn1Pz31zeStW74G406ZJFCl1wAXIoUKkWotYEpOuXB1uVNxJ63dpJEqfxBeptwIHNrPz8BllZoIcBoXwgfJ+8VAUnVPvRvexnw0Ma/WiGYuJO5y8QTvEYBigFmhUxY5RqzE8OcywN/8m4UYrlaniJO75XQ6KSo9+tWHlu+hMi0UVdiKQp7NelnoZUzNaIyBPVeOwK6GNp+FfHuPOoyhaWuNvTYFkvxscMQWDh+zeFCFkgwbXftiV23ywJ4+uwRqmg9k3KzwIQpzppt8DBBOMbrqwQM5Gb05sEwdKzMiAqOloaA/lr0KA+1pr0/+HiWoiIjHA/wir2nIuS3PeU/ji3O6ZwoxcR1SZ9FhtLC5S0FIzFhbBWcGVP/KpxOPSiUoAdWUpqKH++6Scz507iCcxYI6rdMBICPJZea7OcmeFw5mObJSiqpjg2UoWNIs+cFhyDSt6geV5qgi3FunmwwDoGSMgerFOZGX1m0dMCYo5XOruxO063dwENK9DbnVM9wYFREzh4vyU1WYYJ/LRRp6oxgjqP/X5a8/4Af6p6NWkQferzBmXme0zY/4nwMJm/wd1tIqSwGz+E3xPEAOoZlJit3XddD7/BT1pllzOx+8bmQtANQ/S6fZexc6qi3W+Q2xcmXTUhuS5mpHQRvcxZUN0S5+PL9lXWUAaRZhEH8hTdAcuNMMCuVNKTEGtSUKNi3O6KhSaTzck8csZ2vWRZ+d7mW8c4IKwXIYd25S/zIftPkwPzufjEvOHWVD1m+FjpDVUTV0DGDuHj6QnaEwLu/dEgdLQOg9E1Sro9XHJ8ykLAwtPu+pxqKDuFexqON1sKQm7rwbE1E68UCfA/erovrTCG+DBSNg0l4goDQvZN6uNlbyLpcZAwj2UclycvLpIZMgv4yRlpb3YuMftozorbcGVHt/VeDV3+Fdf1TP0iuaCsPi2G4XeGhsyF1ubVDxkoJhmniQ0/jSg/eYML9KLfnCFgISWkp91eauR3IQvED0nAPXK+6hPCYs+n3+hCZbiskmVMG2da+0EsZPonUeIY8EbfusQXjsK/eFDaosbPjEfQS0RKG7yj5GG69M7MeO1HmiUYocgygJHL6M1qzUDDwUSmr99V7Sdr2F3JjQAJY+F0yH33Iv3+C9M38eML7gTgmNu/r2bUMiPvpYbZ6v1/IaESirBHNa7mPKn4dEmYg7v/+HQgPN1G79jBQ1+soydfDC2r+h2Bl/KIc5KjMK7OH6nb1jLsNf0EHVe2KBiE51ox636uyG6Lho0t3J34L5QY/ilE3mikaF4HKXG1mG1rCevT1Vv6GavltxoQe/bMrpZvRggnBxSEPEeEzkEdOxTnPXHVjUYdw8JYvjB/o7Eegc3Ma+NUxLLnsK0kJlinPmUHzHGtrk5+CAbVzFOBqpyy3QVUnzTDfC/0XD94/okH+OB+i7g9lolhWIjSnfIb+Eq43ZXOWmwvjyV/qqD+t0e+7mTEM74qP/Ozt8nmC7mRpyu63OB4KnUzFc074SqoyPUAgM+/TJGFo6T44EHnQU4X4z6qannVqgw/U7zCpwcmXV1AubIrvOmkKHazJAR55ePjp5tLBsN8vAqs3NAHdcEHOR2xQ0lsNAFzSUuxFQCFYvXLZJdOj9p4fNq6p0HBGUik2YzaI4xySy91KzhQ0+q1hjxvImRwPRf76tChlRkhRCi74NXZ9qUNeIwP+s5p+3m5nwPdNOHgSLD79n7O9m1n1uDHiMntq4nkYwV5OZ1ENbXxFd4PgrlvavZsyUO4MqYlqqn1O8W/I1dEZq5dXhrbETLaZIbC2Kj/Aa/QM+fqUOHdf0tXAQ1huZ3cmWECWSXy/43j35+Mvq9xws7JKseriZ1pEWKc8qlzNrGPUGcVgOa9cPJYIJsGnJTAUsEcDOEVULO5x0rXBijc1lgXEzQQKhROf8zIV82w8eswc78YX11KYLWQRcgHNJElBxfXr72lS2RBSl07qTKorO2uUDZr3sFhYsvnhLZn0A94KRzJ/7DEGIAhW5ZWFpL8gEwu1aLA9MuWZzNwl8Oze9Y+bX+v9gywRVnoB5I/8kXTXU3141yRLYrIOOz6SOnyHNy4SieqzkBXharjfjqq1q6tklaEbA8Qfm2DaIPs7OTq/nvJBjKfO2H9bH2cCMh1+5gspfycu8f/cuuRmtDjyqZ7uCIMyjdV3a+p3fqmXsRx4C8lujezIFHnQiVTXLXuI1XrwN3+siYYj2HHTvESUx8DlOTXpak9qFRK+L3mgJ1WsD7F4cu1aJoFoYQnu+wGDMOjJM3kiBQWHCcvhJ/HRdxodOQp45YZaOTA22Nb4XKCVxqkbwMYFhzYQYIAnCW8FW14uf98jhUG2zrKhQQ0q0CEq0t5nXyvUyvR8DvD69LU+g3i+HFWQMQ8PqZuHD+sNKAV0+M6EJC0szq7rEr7B5bQ8BcNHzvDMc9eqB5ZCQdTf80Obn4uzjwpYU7SISdtV0QGa9D3Wrh2BDQtpBKxaNFV+/Cy2P/Sv+8s7Ud0Fd74X4+o/TNztWgETUapy+majNQ68Lq3ee0ZO48VEbTZYiH1Co4OlfWef82RWeyUXo7woM03PyapGfikTnQinoNq5z5veLpeMV3HCAMTaZmA1oGLAn7XS3XYsz+XK7VMQsc4XKrmDXOLU/pSXVNUq8dIqTba///3x6LiLS6xs1xuCAYSfcQ3+rQgmu7uvf3THKt5Ooo97TqcbRqxx7EASizaQCBQllG/rYxVapMLgtLbZS64w1MDBMXX+PQpBKNwqUKOf2DDRDUXQf9EhOS0Qj4nTmlA8dzSLz/G1d+Ud8MTy/6ghhdiLpeerGY/UlDOfiuqFsMUU5/UYlP+BAmgRLuNpvrUaLlVkrqDievNVEAwF+4CoM1MZTmjxjJMsKJq+u8Zd7tNCUFy6LiyYXRJQ4VyvEQFFaCGKsxIwQkk7EzZ6LTJq2hUuPhvAW+gQnSG6J+MszC+7QCRHcnqDdyNRJ6T9xyS87A6MDutbzKGvGktpbXqtzWtXb9HsfK2cBMomjN9a4y+TaJLnXxAeX/HWzmf4cR4vALt/P4w4qgKY04ml4ZdLOinFYS6cup3G/1ie4+t1eOnpBNlqGqs75ilzkT4+DsZQxNvaSKJ//6zIbbk/M7LOhFmRc/1R+kBtz7JFGdZm/COotIdvQoXpTqP/1uqEUmCb/QWoGLMwO5ANcHzxdY48IGP5+J+zKOTBFZ4Pid+GTM+Wq12MV/H86xEJptBa6T+p3kgpwLedManBHC2GgNrFpoN2xnrMz9WFWX/8/ygSBkavq2Uv7FdCsLEYLu9LLIvAU0bNRDtzYl+/vXmjpIvuJFYjmI0im6QEYqnIeMsNjXG4vIutIGHijeAG/9EDBozKV5cldkHbLxHh25vT+ZEzbhXlqvpzKJwcEgfNwLAKFeo0/pvEE10XDB+EXRTXtSzJozQKFFAJhMxYkVaCW+E9AL7tMeU8acxidHqzb6lX4691UsDpy/LLRmT+epgW56+5Cw8tB4kMUv6s9lh3eRKbyGs+H/4mQMaYzPTf2OOdokEn+zzgvoD3FqNKk8QqGAXVsqcGdXrT62fSPkR2vROFi68A6se86UxRUk4cajfPyCC4G5wDhD+zNq4jodQ4u4n/m37Lr36n4LIAAsVr02dFi9AiwA81MYs2rm4eDlDNmdMRvEKRHfBwW5DdMNp0jPFZMeARqF/wL4XBfd+EMLBfMzpH5GH6NaW+1vrvMdg+VxDzatk3MXgO3ro3P/DpcC6+Mo4MySJhKJhSR01SGGGp5hPWmrrUgrv3lDnP+HhcI3nt3YqBoVAVTBAQT5iuhTg8nvPtd8ZeYj6w1x6RqGUBrSku7+N1+BaasZvjTk64RoIDlL8brpEcJx3OmY7jLoZsswdtmhfC/G21llXhITOwmvRDDeTTPbyASOa16cF5/A1fZAidJpqju3wYAy9avPR1ya6eNp9K8XYrrtuxlqi+bDKwlfrYdR0RRiKRVTLOH85+ZY7XSmzRpfZBJjaTa81VDcJHpZnZnSQLASGYW9l51ZV/h7eVzTi3Hv6hUsgc/51AqJRTkpbFVLXXszoBL8nBX0u/0jBLT8nH+fJePbrwURT58OY+UieRjd1vs04w0VG5VN2U6MoGZkQzKN/ptz0Q366dxoTGmj7i1NQGHi9GgnquXFYdrCfZBmeb7s0T6yrdlZH5cZuwHFyIJ/kAtGsTg0xH5taAAq44BAk1CPk9KVVbqQzrCUiFdF/6gtlPQ8bHHc1G1W92MXGZ5HEHftyLYs8mbD/9xYRUWkHmlM0zC2ilJlnNgV4bfALpQghxOUoZL7VTqtCHIaQSXm+YUMnpkXybnV+A6xlm2CVy8fn0Xlm2XRa0+zzOa21JWWmixfiPMSCZ7qA4rS93VN3pkpF1s5TonQjisHf7iU9ZGvUPOAKZcR1pbeVf/Ul7OhepGCaId9wOtqo7pJ7yLcBZ0pFkOF28y4zEI/kcUNmutBHaQpBdNM8vjCS6HZRokkeo88TBAjGyG7SR+6vUgTcyK9Imalj0kuxz0wmK+byQU11AiJFk/ya5dNduRClcnU64yGu/ieWSeOos1t3ep+RPIWQ2pyTYVbZltTbsb7NiwSi3AV+8KLWk7LxCnfZUetEM8ThnsSoGH38/nyAwFguJp8FjvlHtcWZuU4hPva0rHfr0UhOOJ/F6vS62FW7KzkmRll2HEc7oUq4fyi5T70Vl7YVIfsPHUCdHesf9Lk7WNVWO75JDkYbMI8TOW8JKVtLY9d6UJRITO8oKo0xS+o99Yy04iniGHAaGj88kEWgwv0OrHdY/nr76DOGNS59hXCGXzTKUvDl9iKpLSWYN1lxIeyywdNpTkhay74w2jFT6NS8qkjo5CxA1yfSYwp6AJIZNKIeEK5PJAW7ORgWgwp0VgzYpqovMrWxbu+DGZ6Lhie1RAqpzm8VUzKJOH3mCzWuTOLsN3VT/dv2eeYe9UjbR8YTBsLz7q60VN1sU51k+um1f8JxD5pPhbhSC8rRaB454tmh6YUWrJI3+GWY0qeWioj/tbkYITOkJaeuGt4JrJvHA+l0Gu7kY7XOaa05alMnRWVCXqFgLIwSY4uF59Ue5SU4QKuc/HamDxbr0x6csCetXGoP7Qn1Bk/J9DsynO/UD6iZ1Hyrz+jit0hDCwi/E9OjgKTbB3ZQKQ/0ZOvevfNHG0NK4Aj3Cp7NpRk07RT1i/S0EL93Ag8GRgKI9CfpajKyK6+Jj/PI1KO5/85VAwz2AwzP8FTBb075IxCXv6T9RVvWT2tUaqxDS92zrGUbWzUYk9mSs82pECH+fkqsDt93VW++4YsR/dHCYcQSYTO/KaBMDj9LSD/J/+z20Kq8XvZUAIHtm9hRPP3ItbuAu2Hm5lkPs92pd7kCxgRs0xOVBnZ13ccdA0aunrwv9SdqElJRC3g+oCu+nXyCgmXUs9yMjTMAIHfxZV+aPKcZeUBWt057Xo85Ks1Ir5gzEHCWqZEhrLZMuF11ziGtFQUds/EESajhagzcKsxamcSZxGth4UII+adPhQkUnx2WyN+4YWR+r3f8MnkyGFuR4zjzxJS8WsQYR5PTyRaD9ixa6Mh741nBHbzfjXHskGDq179xaRNrCIB1z1xRfWfjqw2pHc1zk9xlPpL8sQWAIuETZZhbnmL54rceXVNRvUiKrrqIkeogsl0XXb17ylNb0f4GA9Wd44vffEG8FSZGHEL2fbaTGRcSiCeA8PmA/f6Hz8HCS76fXUHwgwkzSwlI71ekZ7Fapmlk/KC+Hs8hUcw3N2LN5LhkVYyizYFl/uPeVP5lsoJHhhfWvvSWruCUW1ZcJOeuTbrDgywJ/qG07gZJplnTvLcYdNaH0KMYOYMGX+rB4NGPFmQsNaIwlWrfCezxre8zXBrsMT+edVLbLqN1BqB76JH4BvZTqUIMfGwPGEn+EnmTV86fPBaYbFL3DFEhjB45CewkXEAtJxk4/Ms2pPXnaRqdky0HOYdcUcE2zcXq4vaIvW2/v0nHFJH2XXe22ueDmq/18XGtELSq85j9X8q0tcNSSKJIX8FTuJF/Pf8j5PhqG2u+osvsLxYrvvfeVJL+4tkcXcr9JV7v0ERmj/X6fM3NC4j6dS1+9Umr2oPavqiAydTZPLMNRGY23LO9zAVDly7jD+70G5TPPLdhRIl4WxcYjLnM+SNcJ26FOrkrISUtPObIz5Zb3AG612krnpy15RMW+1cQjlnWFI6538qky9axd2oJmHIHP08KyP0ubGO+TQNOYuv2uh17yCIvR8VcStw7o1g0NM60sk+8Tq7YfIBJrtp53GkvzXH7OA0p8/n/u1satf/VJhtR1l8Wa6Gmaug7haSpaCaYQax6ta0mkutlb+eAOSG1aobM81D9A4iS1RRlzBBoVX6tU1S6WE2N9ORY6DfeLRC4l9Rvr5h95XDWB2mR1d4WFudpsgVYwiTwT31ljskD8ZyDOlm5DkGh9N/UB/0AI5Xvb8ZBmai2hQ4BWMqFwYnzxwB26YHSOv9WgY3JXnvoN+2R4rqGVh/LLDMtpFP+SpMGJNWvbIl5SOodbCczW2RKleksPoUeGEzrjtKHVdtZA+kfqO+rVx/iclCqwoopepvJpSTDjT+b9GWylGRF8EDbGlw6eUzmJM95Ovoz+kwLX3c2fTjFeYEsE7vUZm3mqdGJuKh2w9/QGSaqRHs99aScGOdDqkFcACoqdbBoQqqjamhH6Q9ng39JCg3lrGJwd50Qk9ovnqBTr8MME7Ps2wiVfygUmPoUBJJfJWX5Nda0nuncbFkA=="))}const t7=tYe(),rYe=new Set(AS(t7)),iYe=new Set(AS(t7)),nYe=Qqe(t7),aYe=eYe(t7),RQ=45,OQ=95;function zpe(e){return Vqe(e)}function oYe(e){return e.filter(t=>t!=65039)}function Hpe(e){for(let t of e.split(".")){let r=zpe(t);try{for(let i=r.lastIndexOf(OQ)-1;i>=0;i--)if(r[i]!==OQ)throw new Error("underscore only allowed at start");if(r.length>=4&&r.every(i=>i<128)&&r[2]===RQ&&r[3]===RQ)throw new Error("invalid label extension")}catch(i){throw new Error(`Invalid label "${t}": ${i.message}`)}}return e}function sYe(e){return Hpe(lYe(e,oYe))}function lYe(e,t){let r=zpe(e).reverse(),i=[];for(;r.length;){let n=cYe(r);if(n){i.push(...t(n));continue}let a=r.pop();if(rYe.has(a)){i.push(a);continue}if(iYe.has(a))continue;let o=nYe[a];if(o){i.push(...o);continue}throw new Error(`Disallowed codepoint: 0x${a.toString(16).toUpperCase()}`)}return Hpe(uYe(String.fromCodePoint(...i)))}function uYe(e){return e.normalize("NFC")}function cYe(e,t){var r;let i=aYe,n,a,o=[],s=e.length;for(;s;){let l=e[--s];if(i=(r=i.branches.find(u=>u.set.has(l)))===null||r===void 0?void 0:r.node,!i)break;if(i.save)a=l;else if(i.check&&l===a)break;o.push(l),i.fe0f&&(o.push(65039),s>0&&e[s-1]==65039&&s--),i.valid&&(n=o.slice(),i.valid==2&&n.splice(1,1),e.length=s)}return n}const hYe=new Re(Ope),Upe=new Uint8Array(32);Upe.fill(0);function BQ(e){if(e.length===0)throw new Error("invalid ENS name; empty component");return e}function Gpe(e){const t=eh(sYe(e)),r=[];if(e.length===0)return r;let i=0;for(let n=0;n<t.length;n++)t[n]===46&&(r.push(BQ(t.slice(i,n))),i=n+1);if(i>=t.length)throw new Error("invalid ENS name; empty component");return r.push(BQ(t.slice(i))),r}function LA(e){typeof e!="string"&&hYe.throwArgumentError("invalid ENS name; not a string","name",e);let t=Upe;const r=Gpe(e);for(;r.length;)t=Zn(Hs([t,Zn(r.pop())]));return Ot(t)}function dYe(e){return Ot(Hs(Gpe(e).map(t=>{if(t.length>63)throw new Error("invalid DNS encoded entry; length exceeds 63 bytes");const r=new Uint8Array(t.length+1);return r.set(t,1),r[0]=r.length-1,r})))+"00"}var fYe=function(e,t,r,i){function n(a){return a instanceof r?a:new r(function(o){o(a)})}return new(r||(r=Promise))(function(a,o){function s(c){try{u(i.next(c))}catch(h){o(h)}}function l(c){try{u(i.throw(c))}catch(h){o(h)}}function u(c){c.done?a(c.value):n(c.value).then(s,l)}u((i=i.apply(e,t||[])).next())})};const en=new Re(Ope),jpe=new Uint8Array(32);jpe.fill(0);const pYe=pt.from(-1),Wpe=pt.from(0),qpe=pt.from(1),vYe=pt.from("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff");function mYe(e){const t=$t(e),r=t.length%32;return r?vs([t,jpe.slice(r)]):Ot(t)}const gYe=vn(qpe.toHexString(),32),yYe=vn(Wpe.toHexString(),32),NQ={name:"string",version:"string",chainId:"uint256",verifyingContract:"address",salt:"bytes32"},GT=["name","version","chainId","verifyingContract","salt"];function VQ(e){return function(t){return typeof t!="string"&&en.throwArgumentError(`invalid domain value for ${JSON.stringify(e)}`,`domain.${e}`,t),t}}const xYe={name:VQ("name"),version:VQ("version"),chainId:function(e){try{return pt.from(e).toString()}catch{}return en.throwArgumentError('invalid domain value for "chainId"',"domain.chainId",e)},verifyingContract:function(e){try{return Za(e).toLowerCase()}catch{}return en.throwArgumentError('invalid domain value "verifyingContract"',"domain.verifyingContract",e)},salt:function(e){try{const t=$t(e);if(t.length!==32)throw new Error("bad length");return Ot(t)}catch{}return en.throwArgumentError('invalid domain value "salt"',"domain.salt",e)}};function jT(e){{const t=e.match(/^(u?)int(\d*)$/);if(t){const r=t[1]==="",i=parseInt(t[2]||"256");(i%8!==0||i>256||t[2]&&t[2]!==String(i))&&en.throwArgumentError("invalid numeric width","type",e);const n=vYe.mask(r?i-1:i),a=r?n.add(qpe).mul(pYe):Wpe;return function(o){const s=pt.from(o);return(s.lt(a)||s.gt(n))&&en.throwArgumentError(`value out-of-bounds for ${e}`,"value",o),vn(s.toTwos(256).toHexString(),32)}}}{const t=e.match(/^bytes(\d+)$/);if(t){const r=parseInt(t[1]);return(r===0||r>32||t[1]!==String(r))&&en.throwArgumentError("invalid bytes width","type",e),function(i){return $t(i).length!==r&&en.throwArgumentError(`invalid length for ${e}`,"value",i),mYe(i)}}}switch(e){case"address":return function(t){return vn(Za(t),32)};case"bool":return function(t){return t?gYe:yYe};case"bytes":return function(t){return Zn(t)};case"string":return function(t){return qg(t)}}return null}function FQ(e,t){return`${e}(${t.map(({name:r,type:i})=>i+" "+r).join(",")})`}class ks{constructor(t){nt(this,"types",Object.freeze(_d(t))),nt(this,"_encoderCache",{}),nt(this,"_types",{});const r={},i={},n={};Object.keys(t).forEach(s=>{r[s]={},i[s]=[],n[s]={}});for(const s in t){const l={};t[s].forEach(u=>{l[u.name]&&en.throwArgumentError(`duplicate variable name ${JSON.stringify(u.name)} in ${JSON.stringify(s)}`,"types",t),l[u.name]=!0;const c=u.type.match(/^([^\x5b]*)(\x5b|$)/)[1];c===s&&en.throwArgumentError(`circular type reference to ${JSON.stringify(c)}`,"types",t),!jT(c)&&(i[c]||en.throwArgumentError(`unknown type ${JSON.stringify(c)}`,"types",t),i[c].push(s),r[s][c]=!0)})}const a=Object.keys(i).filter(s=>i[s].length===0);a.length===0?en.throwArgumentError("missing primary type","types",t):a.length>1&&en.throwArgumentError(`ambiguous primary types or unused types: ${a.map(s=>JSON.stringify(s)).join(", ")}`,"types",t),nt(this,"primaryType",a[0]);function o(s,l){l[s]&&en.throwArgumentError(`circular type reference to ${JSON.stringify(s)}`,"types",t),l[s]=!0,Object.keys(r[s]).forEach(u=>{i[u]&&(o(u,l),Object.keys(l).forEach(c=>{n[c][u]=!0}))}),delete l[s]}o(this.primaryType,{});for(const s in n){const l=Object.keys(n[s]);l.sort(),this._types[s]=FQ(s,t[s])+l.map(u=>FQ(u,t[u])).join("")}}getEncoder(t){let r=this._encoderCache[t];return r||(r=this._encoderCache[t]=this._getEncoder(t)),r}_getEncoder(t){{const n=jT(t);if(n)return n}const r=t.match(/^(.*)(\x5b(\d*)\x5d)$/);if(r){const n=r[1],a=this.getEncoder(n),o=parseInt(r[3]);return s=>{o>=0&&s.length!==o&&en.throwArgumentError("array length mismatch; expected length ${ arrayLength }","value",s);let l=s.map(a);return this._types[n]&&(l=l.map(Zn)),Zn(vs(l))}}const i=this.types[t];if(i){const n=qg(this._types[t]);return a=>{const o=i.map(({name:s,type:l})=>{const u=this.getEncoder(l)(a[s]);return this._types[l]?Zn(u):u});return o.unshift(n),vs(o)}}return en.throwArgumentError(`unknown type: ${t}`,"type",t)}encodeType(t){const r=this._types[t];return r||en.throwArgumentError(`unknown type: ${JSON.stringify(t)}`,"name",t),r}encodeData(t,r){return this.getEncoder(t)(r)}hashStruct(t,r){return Zn(this.encodeData(t,r))}encode(t){return this.encodeData(this.primaryType,t)}hash(t){return this.hashStruct(this.primaryType,t)}_visit(t,r,i){if(jT(t))return i(t,r);const n=t.match(/^(.*)(\x5b(\d*)\x5d)$/);if(n){const o=n[1],s=parseInt(n[3]);return s>=0&&r.length!==s&&en.throwArgumentError("array length mismatch; expected length ${ arrayLength }","value",r),r.map(l=>this._visit(o,l,i))}const a=this.types[t];return a?a.reduce((o,{name:s,type:l})=>(o[s]=this._visit(l,r[s],i),o),{}):en.throwArgumentError(`unknown type: ${t}`,"type",t)}visit(t,r){return this._visit(this.primaryType,t,r)}static from(t){return new ks(t)}static getPrimaryType(t){return ks.from(t).primaryType}static hashStruct(t,r,i){return ks.from(r).hashStruct(t,i)}static hashDomain(t){const r=[];for(const i in t){const n=NQ[i];n||en.throwArgumentError(`invalid typed-data domain key: ${JSON.stringify(i)}`,"domain",t),r.push({name:i,type:n})}return r.sort((i,n)=>GT.indexOf(i.name)-GT.indexOf(n.name)),ks.hashStruct("EIP712Domain",{EIP712Domain:r},t)}static encode(t,r,i){return vs(["0x1901",ks.hashDomain(t),ks.from(r).hash(i)])}static hash(t,r,i){return Zn(ks.encode(t,r,i))}static resolveNames(t,r,i,n){return fYe(this,void 0,void 0,function*(){t=ta(t);const a={};t.verifyingContract&&!gi(t.verifyingContract,20)&&(a[t.verifyingContract]="0x");const o=ks.from(r);o.visit(i,(s,l)=>(s==="address"&&!gi(l,20)&&(a[l]="0x"),l));for(const s in a)a[s]=yield n(s);return t.verifyingContract&&a[t.verifyingContract]&&(t.verifyingContract=a[t.verifyingContract]),i=o.visit(i,(s,l)=>s==="address"&&a[l]?a[l]:l),{domain:t,value:i}})}static getPayload(t,r,i){ks.hashDomain(t);const n={},a=[];GT.forEach(l=>{const u=t[l];u!=null&&(n[l]=xYe[l](u),a.push({name:l,type:NQ[l]}))});const o=ks.from(r),s=ta(r);return s.EIP712Domain?en.throwArgumentError("types must not contain EIP712Domain type","types.EIP712Domain",r):s.EIP712Domain=a,o.encode(i),{types:s,domain:n,primaryType:o.primaryType,message:o.visit(i,(l,u)=>{if(l.match(/^bytes(\d*)/))return Ot($t(u));if(l.match(/^u?int/))return pt.from(u).toString();switch(l){case"address":return u.toLowerCase();case"bool":return!!u;case"string":return typeof u!="string"&&en.throwArgumentError("invalid string","value",u),u}return en.throwArgumentError("unsupported type","type",l)})}}}const $i=new Re(L4);class bYe extends I4{}class wYe extends I4{}class _Ye extends I4{}class Dk extends I4{static isIndexed(t){return!!(t&&t._isIndexed)}}const AYe={"0x08c379a0":{signature:"Error(string)",name:"Error",inputs:["string"],reason:!0},"0x4e487b71":{signature:"Panic(uint256)",name:"Panic",inputs:["uint256"]}};function zQ(e,t){const r=new Error(`deferred error during ABI decoding triggered accessing ${e}`);return r.error=t,r}class HQ{constructor(t){let r=[];typeof t=="string"?r=JSON.parse(t):r=t,nt(this,"fragments",r.map(i=>Jh.from(i)).filter(i=>i!=null)),nt(this,"_abiCoder",kc(new.target,"getAbiCoder")()),nt(this,"functions",{}),nt(this,"errors",{}),nt(this,"events",{}),nt(this,"structs",{}),this.fragments.forEach(i=>{let n=null;switch(i.type){case"constructor":if(this.deploy){$i.warn("duplicate definition - constructor");return}nt(this,"deploy",i);return;case"function":n=this.functions;break;case"event":n=this.events;break;case"error":n=this.errors;break;default:return}let a=i.format();if(n[a]){$i.warn("duplicate definition - "+a);return}n[a]=i}),this.deploy||nt(this,"deploy",Ac.from({payable:!1,type:"constructor"})),nt(this,"_isInterface",!0)}format(t){t||(t=si.full),t===si.sighash&&$i.throwArgumentError("interface does not support formatting sighash","format",t);const r=this.fragments.map(i=>i.format(t));return t===si.json?JSON.stringify(r.map(i=>JSON.parse(i))):r}static getAbiCoder(){return Rpe}static getAddress(t){return Za(t)}static getSighash(t){return lo(qg(t.format()),0,4)}static getEventTopic(t){return qg(t.format())}getFunction(t){if(gi(t)){for(const i in this.functions)if(t===this.getSighash(i))return this.functions[i];$i.throwArgumentError("no matching function","sighash",t)}if(t.indexOf("(")===-1){const i=t.trim(),n=Object.keys(this.functions).filter(a=>a.split("(")[0]===i);return n.length===0?$i.throwArgumentError("no matching function","name",i):n.length>1&&$i.throwArgumentError("multiple matching functions","name",i),this.functions[n[0]]}const r=this.functions[Sc.fromString(t).format()];return r||$i.throwArgumentError("no matching function","signature",t),r}getEvent(t){if(gi(t)){const i=t.toLowerCase();for(const n in this.events)if(i===this.getEventTopic(n))return this.events[n];$i.throwArgumentError("no matching event","topichash",i)}if(t.indexOf("(")===-1){const i=t.trim(),n=Object.keys(this.events).filter(a=>a.split("(")[0]===i);return n.length===0?$i.throwArgumentError("no matching event","name",i):n.length>1&&$i.throwArgumentError("multiple matching events","name",i),this.events[n[0]]}const r=this.events[Yh.fromString(t).format()];return r||$i.throwArgumentError("no matching event","signature",t),r}getError(t){if(gi(t)){const i=kc(this.constructor,"getSighash");for(const n in this.errors){const a=this.errors[n];if(t===i(a))return this.errors[n]}$i.throwArgumentError("no matching error","sighash",t)}if(t.indexOf("(")===-1){const i=t.trim(),n=Object.keys(this.errors).filter(a=>a.split("(")[0]===i);return n.length===0?$i.throwArgumentError("no matching error","name",i):n.length>1&&$i.throwArgumentError("multiple matching errors","name",i),this.errors[n[0]]}const r=this.errors[Sc.fromString(t).format()];return r||$i.throwArgumentError("no matching error","signature",t),r}getSighash(t){if(typeof t=="string")try{t=this.getFunction(t)}catch(r){try{t=this.getError(t)}catch{throw r}}return kc(this.constructor,"getSighash")(t)}getEventTopic(t){return typeof t=="string"&&(t=this.getEvent(t)),kc(this.constructor,"getEventTopic")(t)}_decodeParams(t,r){return this._abiCoder.decode(t,r)}_encodeParams(t,r){return this._abiCoder.encode(t,r)}encodeDeploy(t){return this._encodeParams(this.deploy.inputs,t||[])}decodeErrorResult(t,r){typeof t=="string"&&(t=this.getError(t));const i=$t(r);return Ot(i.slice(0,4))!==this.getSighash(t)&&$i.throwArgumentError(`data signature does not match error ${t.name}.`,"data",Ot(i)),this._decodeParams(t.inputs,i.slice(4))}encodeErrorResult(t,r){return typeof t=="string"&&(t=this.getError(t)),Ot(Hs([this.getSighash(t),this._encodeParams(t.inputs,r||[])]))}decodeFunctionData(t,r){typeof t=="string"&&(t=this.getFunction(t));const i=$t(r);return Ot(i.slice(0,4))!==this.getSighash(t)&&$i.throwArgumentError(`data signature does not match function ${t.name}.`,"data",Ot(i)),this._decodeParams(t.inputs,i.slice(4))}encodeFunctionData(t,r){return typeof t=="string"&&(t=this.getFunction(t)),Ot(Hs([this.getSighash(t),this._encodeParams(t.inputs,r||[])]))}decodeFunctionResult(t,r){typeof t=="string"&&(t=this.getFunction(t));let i=$t(r),n=null,a="",o=null,s=null,l=null;switch(i.length%this._abiCoder._getWordSize()){case 0:try{return this._abiCoder.decode(t.outputs,i)}catch{}break;case 4:{const u=Ot(i.slice(0,4)),c=AYe[u];if(c)o=this._abiCoder.decode(c.inputs,i.slice(4)),s=c.name,l=c.signature,c.reason&&(n=o[0]),s==="Error"?a=`; VM Exception while processing transaction: reverted with reason string ${JSON.stringify(o[0])}`:s==="Panic"&&(a=`; VM Exception while processing transaction: reverted with panic code ${o[0]}`);else try{const h=this.getError(u);o=this._abiCoder.decode(h.inputs,i.slice(4)),s=h.name,l=h.format()}catch{}break}}return $i.throwError("call revert exception"+a,Re.errors.CALL_EXCEPTION,{method:t.format(),data:Ot(r),errorArgs:o,errorName:s,errorSignature:l,reason:n})}encodeFunctionResult(t,r){return typeof t=="string"&&(t=this.getFunction(t)),Ot(this._abiCoder.encode(t.outputs,r||[]))}encodeFilterTopics(t,r){typeof t=="string"&&(t=this.getEvent(t)),r.length>t.inputs.length&&$i.throwError("too many arguments for "+t.format(),Re.errors.UNEXPECTED_ARGUMENT,{argument:"values",value:r});let i=[];t.anonymous||i.push(this.getEventTopic(t));const n=(a,o)=>a.type==="string"?qg(o):a.type==="bytes"?Zn(Ot(o)):(a.type==="bool"&&typeof o=="boolean"&&(o=o?"0x01":"0x00"),a.type.match(/^u?int/)&&(o=pt.from(o).toHexString()),a.type==="address"&&this._abiCoder.encode(["address"],[o]),vn(Ot(o),32));for(r.forEach((a,o)=>{let s=t.inputs[o];if(!s.indexed){a!=null&&$i.throwArgumentError("cannot filter non-indexed parameters; must be null","contract."+s.name,a);return}a==null?i.push(null):s.baseType==="array"||s.baseType==="tuple"?$i.throwArgumentError("filtering with tuples or arrays not supported","contract."+s.name,a):Array.isArray(a)?i.push(a.map(l=>n(s,l))):i.push(n(s,a))});i.length&&i[i.length-1]===null;)i.pop();return i}encodeEventLog(t,r){typeof t=="string"&&(t=this.getEvent(t));const i=[],n=[],a=[];return t.anonymous||i.push(this.getEventTopic(t)),r.length!==t.inputs.length&&$i.throwArgumentError("event arguments/values mismatch","values",r),t.inputs.forEach((o,s)=>{const l=r[s];if(o.indexed)if(o.type==="string")i.push(qg(l));else if(o.type==="bytes")i.push(Zn(l));else{if(o.baseType==="tuple"||o.baseType==="array")throw new Error("not implemented");i.push(this._abiCoder.encode([o.type],[l]))}else n.push(o),a.push(l)}),{data:this._abiCoder.encode(n,a),topics:i}}decodeEventLog(t,r,i){if(typeof t=="string"&&(t=this.getEvent(t)),i!=null&&!t.anonymous){let d=this.getEventTopic(t);(!gi(i[0],32)||i[0].toLowerCase()!==d)&&$i.throwError("fragment/topic mismatch",Re.errors.INVALID_ARGUMENT,{argument:"topics[0]",expected:d,value:i[0]}),i=i.slice(1)}let n=[],a=[],o=[];t.inputs.forEach((d,f)=>{d.indexed?d.type==="string"||d.type==="bytes"||d.baseType==="tuple"||d.baseType==="array"?(n.push(pa.fromObject({type:"bytes32",name:d.name})),o.push(!0)):(n.push(d),o.push(!1)):(a.push(d),o.push(!1))});let s=i!=null?this._abiCoder.decode(n,Hs(i)):null,l=this._abiCoder.decode(a,r,!0),u=[],c=0,h=0;t.inputs.forEach((d,f)=>{if(d.indexed)if(s==null)u[f]=new Dk({_isIndexed:!0,hash:null});else if(o[f])u[f]=new Dk({_isIndexed:!0,hash:s[h++]});else try{u[f]=s[h++]}catch(p){u[f]=p}else try{u[f]=l[c++]}catch(p){u[f]=p}if(d.name&&u[d.name]==null){const p=u[f];p instanceof Error?Object.defineProperty(u,d.name,{enumerable:!0,get:()=>{throw zQ(`property ${JSON.stringify(d.name)}`,p)}}):u[d.name]=p}});for(let d=0;d<u.length;d++){const f=u[d];f instanceof Error&&Object.defineProperty(u,d,{enumerable:!0,get:()=>{throw zQ(`index ${d}`,f)}})}return Object.freeze(u)}parseTransaction(t){let r=this.getFunction(t.data.substring(0,10).toLowerCase());return r?new wYe({args:this._abiCoder.decode(r.inputs,"0x"+t.data.substring(10)),functionFragment:r,name:r.name,signature:r.format(),sighash:this.getSighash(r),value:pt.from(t.value||"0")}):null}parseLog(t){let r=this.getEvent(t.topics[0]);return!r||r.anonymous?null:new bYe({eventFragment:r,name:r.name,signature:r.format(),topic:this.getEventTopic(r),args:this.decodeEventLog(r,t.data,t.topics)})}parseError(t){const r=Ot(t);let i=this.getError(r.substring(0,10).toLowerCase());return i?new _Ye({args:this._abiCoder.decode(i.inputs,"0x"+r.substring(10)),errorFragment:i,name:i.name,signature:i.format(),sighash:this.getSighash(i)}):null}static isInterface(t){return!!(t&&t._isInterface)}}const SYe="abstract-provider/5.7.0";var CYe=function(e,t,r,i){function n(a){return a instanceof r?a:new r(function(o){o(a)})}return new(r||(r=Promise))(function(a,o){function s(c){try{u(i.next(c))}catch(h){o(h)}}function l(c){try{u(i.throw(c))}catch(h){o(h)}}function u(c){c.done?a(c.value):n(c.value).then(s,l)}u((i=i.apply(e,t||[])).next())})};const EYe=new Re(SYe);class MYe extends I4{static isForkEvent(t){return!!(t&&t._isForkEvent)}}let Ype=class Xpe{constructor(){EYe.checkAbstract(new.target,Xpe),nt(this,"_isProvider",!0)}getFeeData(){return CYe(this,void 0,void 0,function*(){const{block:t,gasPrice:r}=yield Dn({block:this.getBlock("latest"),gasPrice:this.getGasPrice().catch(o=>null)});let i=null,n=null,a=null;return t&&t.baseFeePerGas&&(i=t.baseFeePerGas,a=pt.from("1500000000"),n=t.baseFeePerGas.mul(2).add(a)),{lastBaseFeePerGas:i,maxFeePerGas:n,maxPriorityFeePerGas:a,gasPrice:r}})}addListener(t,r){return this.on(t,r)}removeListener(t,r){return this.off(t,r)}static isProvider(t){return!!(t&&t._isProvider)}};const TYe="abstract-signer/5.7.0";var ql=function(e,t,r,i){function n(a){return a instanceof r?a:new r(function(o){o(a)})}return new(r||(r=Promise))(function(a,o){function s(c){try{u(i.next(c))}catch(h){o(h)}}function l(c){try{u(i.throw(c))}catch(h){o(h)}}function u(c){c.done?a(c.value):n(c.value).then(s,l)}u((i=i.apply(e,t||[])).next())})};const cl=new Re(TYe),PYe=["accessList","ccipReadEnabled","chainId","customData","data","from","gasLimit","gasPrice","maxFeePerGas","maxPriorityFeePerGas","nonce","to","type","value"],DYe=[Re.errors.INSUFFICIENT_FUNDS,Re.errors.NONCE_EXPIRED,Re.errors.REPLACEMENT_UNDERPRICED];class R4{constructor(){cl.checkAbstract(new.target,R4),nt(this,"_isSigner",!0)}getBalance(t){return ql(this,void 0,void 0,function*(){return this._checkProvider("getBalance"),yield this.provider.getBalance(this.getAddress(),t)})}getTransactionCount(t){return ql(this,void 0,void 0,function*(){return this._checkProvider("getTransactionCount"),yield this.provider.getTransactionCount(this.getAddress(),t)})}estimateGas(t){return ql(this,void 0,void 0,function*(){this._checkProvider("estimateGas");const r=yield Dn(this.checkTransaction(t));return yield this.provider.estimateGas(r)})}call(t,r){return ql(this,void 0,void 0,function*(){this._checkProvider("call");const i=yield Dn(this.checkTransaction(t));return yield this.provider.call(i,r)})}sendTransaction(t){return ql(this,void 0,void 0,function*(){this._checkProvider("sendTransaction");const r=yield this.populateTransaction(t),i=yield this.signTransaction(r);return yield this.provider.sendTransaction(i)})}getChainId(){return ql(this,void 0,void 0,function*(){return this._checkProvider("getChainId"),(yield this.provider.getNetwork()).chainId})}getGasPrice(){return ql(this,void 0,void 0,function*(){return this._checkProvider("getGasPrice"),yield this.provider.getGasPrice()})}getFeeData(){return ql(this,void 0,void 0,function*(){return this._checkProvider("getFeeData"),yield this.provider.getFeeData()})}resolveName(t){return ql(this,void 0,void 0,function*(){return this._checkProvider("resolveName"),yield this.provider.resolveName(t)})}checkTransaction(t){for(const i in t)PYe.indexOf(i)===-1&&cl.throwArgumentError("invalid transaction key: "+i,"transaction",t);const r=ta(t);return r.from==null?r.from=this.getAddress():r.from=Promise.all([Promise.resolve(r.from),this.getAddress()]).then(i=>(i[0].toLowerCase()!==i[1].toLowerCase()&&cl.throwArgumentError("from address mismatch","transaction",t),i[0])),r}populateTransaction(t){return ql(this,void 0,void 0,function*(){const r=yield Dn(this.checkTransaction(t));r.to!=null&&(r.to=Promise.resolve(r.to).then(n=>ql(this,void 0,void 0,function*(){if(n==null)return null;const a=yield this.resolveName(n);return a==null&&cl.throwArgumentError("provided ENS name resolves to null","tx.to",n),a})),r.to.catch(n=>{}));const i=r.maxFeePerGas!=null||r.maxPriorityFeePerGas!=null;if(r.gasPrice!=null&&(r.type===2||i)?cl.throwArgumentError("eip-1559 transaction do not support gasPrice","transaction",t):(r.type===0||r.type===1)&&i&&cl.throwArgumentError("pre-eip-1559 transaction do not support maxFeePerGas/maxPriorityFeePerGas","transaction",t),(r.type===2||r.type==null)&&r.maxFeePerGas!=null&&r.maxPriorityFeePerGas!=null)r.type=2;else if(r.type===0||r.type===1)r.gasPrice==null&&(r.gasPrice=this.getGasPrice());else{const n=yield this.getFeeData();if(r.type==null)if(n.maxFeePerGas!=null&&n.maxPriorityFeePerGas!=null)if(r.type=2,r.gasPrice!=null){const a=r.gasPrice;delete r.gasPrice,r.maxFeePerGas=a,r.maxPriorityFeePerGas=a}else r.maxFeePerGas==null&&(r.maxFeePerGas=n.maxFeePerGas),r.maxPriorityFeePerGas==null&&(r.maxPriorityFeePerGas=n.maxPriorityFeePerGas);else n.gasPrice!=null?(i&&cl.throwError("network does not support EIP-1559",Re.errors.UNSUPPORTED_OPERATION,{operation:"populateTransaction"}),r.gasPrice==null&&(r.gasPrice=n.gasPrice),r.type=0):cl.throwError("failed to get consistent fee data",Re.errors.UNSUPPORTED_OPERATION,{operation:"signer.getFeeData"});else r.type===2&&(r.maxFeePerGas==null&&(r.maxFeePerGas=n.maxFeePerGas),r.maxPriorityFeePerGas==null&&(r.maxPriorityFeePerGas=n.maxPriorityFeePerGas))}return r.nonce==null&&(r.nonce=this.getTransactionCount("pending")),r.gasLimit==null&&(r.gasLimit=this.estimateGas(r).catch(n=>{if(DYe.indexOf(n.code)>=0)throw n;return cl.throwError("cannot estimate gas; transaction may fail or may require manual gas limit",Re.errors.UNPREDICTABLE_GAS_LIMIT,{error:n,tx:r})})),r.chainId==null?r.chainId=this.getChainId():r.chainId=Promise.all([Promise.resolve(r.chainId),this.getChainId()]).then(n=>(n[1]!==0&&n[0]!==n[1]&&cl.throwArgumentError("chainId address mismatch","transaction",t),n[0])),yield Dn(r)})}_checkProvider(t){this.provider||cl.throwError("missing provider",Re.errors.UNSUPPORTED_OPERATION,{operation:t||"_checkProvider"})}static isSigner(t){return!!(t&&t._isSigner)}}class aF extends R4{constructor(t,r){super(),nt(this,"address",t),nt(this,"provider",r||null)}getAddress(){return Promise.resolve(this.address)}_fail(t,r){return Promise.resolve().then(()=>{cl.throwError(t,Re.errors.UNSUPPORTED_OPERATION,{operation:r})})}signMessage(t){return this._fail("VoidSigner cannot sign messages","signMessage")}signTransaction(t){return this._fail("VoidSigner cannot sign transactions","signTransaction")}_signTypedData(t,r,i){return this._fail("VoidSigner cannot sign typed data","signTypedData")}connect(t){return new aF(this.address,t)}}var Zpe={},Wr={},O4=Qpe;function Qpe(e,t){if(!e)throw new Error(t||"Assertion failed")}Qpe.equal=function(t,r,i){if(t!=r)throw new Error(i||"Assertion failed: "+t+" != "+r)};var Ik={exports:{}};typeof Object.create=="function"?Ik.exports=function(t,r){r&&(t.super_=r,t.prototype=Object.create(r.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}))}:Ik.exports=function(t,r){if(r){t.super_=r;var i=function(){};i.prototype=r.prototype,t.prototype=new i,t.prototype.constructor=t}};var IYe=Ik.exports,LYe=O4,kYe=IYe;Wr.inherits=kYe;function RYe(e,t){return(e.charCodeAt(t)&64512)!==55296||t<0||t+1>=e.length?!1:(e.charCodeAt(t+1)&64512)===56320}function OYe(e,t){if(Array.isArray(e))return e.slice();if(!e)return[];var r=[];if(typeof e=="string")if(t){if(t==="hex")for(e=e.replace(/[^a-z0-9]+/ig,""),e.length%2!==0&&(e="0"+e),n=0;n<e.length;n+=2)r.push(parseInt(e[n]+e[n+1],16))}else for(var i=0,n=0;n<e.length;n++){var a=e.charCodeAt(n);a<128?r[i++]=a:a<2048?(r[i++]=a>>6|192,r[i++]=a&63|128):RYe(e,n)?(a=65536+((a&1023)<<10)+(e.charCodeAt(++n)&1023),r[i++]=a>>18|240,r[i++]=a>>12&63|128,r[i++]=a>>6&63|128,r[i++]=a&63|128):(r[i++]=a>>12|224,r[i++]=a>>6&63|128,r[i++]=a&63|128)}else for(n=0;n<e.length;n++)r[n]=e[n]|0;return r}Wr.toArray=OYe;function BYe(e){for(var t="",r=0;r<e.length;r++)t+=Jpe(e[r].toString(16));return t}Wr.toHex=BYe;function Kpe(e){var t=e>>>24|e>>>8&65280|e<<8&16711680|(e&255)<<24;return t>>>0}Wr.htonl=Kpe;function NYe(e,t){for(var r="",i=0;i<e.length;i++){var n=e[i];t==="little"&&(n=Kpe(n)),r+=$pe(n.toString(16))}return r}Wr.toHex32=NYe;function Jpe(e){return e.length===1?"0"+e:e}Wr.zero2=Jpe;function $pe(e){return e.length===7?"0"+e:e.length===6?"00"+e:e.length===5?"000"+e:e.length===4?"0000"+e:e.length===3?"00000"+e:e.length===2?"000000"+e:e.length===1?"0000000"+e:e}Wr.zero8=$pe;function VYe(e,t,r,i){var n=r-t;LYe(n%4===0);for(var a=new Array(n/4),o=0,s=t;o<a.length;o++,s+=4){var l;i==="big"?l=e[s]<<24|e[s+1]<<16|e[s+2]<<8|e[s+3]:l=e[s+3]<<24|e[s+2]<<16|e[s+1]<<8|e[s],a[o]=l>>>0}return a}Wr.join32=VYe;function FYe(e,t){for(var r=new Array(e.length*4),i=0,n=0;i<e.length;i++,n+=4){var a=e[i];t==="big"?(r[n]=a>>>24,r[n+1]=a>>>16&255,r[n+2]=a>>>8&255,r[n+3]=a&255):(r[n+3]=a>>>24,r[n+2]=a>>>16&255,r[n+1]=a>>>8&255,r[n]=a&255)}return r}Wr.split32=FYe;function zYe(e,t){return e>>>t|e<<32-t}Wr.rotr32=zYe;function HYe(e,t){return e<<t|e>>>32-t}Wr.rotl32=HYe;function UYe(e,t){return e+t>>>0}Wr.sum32=UYe;function GYe(e,t,r){return e+t+r>>>0}Wr.sum32_3=GYe;function jYe(e,t,r,i){return e+t+r+i>>>0}Wr.sum32_4=jYe;function WYe(e,t,r,i,n){return e+t+r+i+n>>>0}Wr.sum32_5=WYe;function qYe(e,t,r,i){var n=e[t],a=e[t+1],o=i+a>>>0,s=(o<i?1:0)+r+n;e[t]=s>>>0,e[t+1]=o}Wr.sum64=qYe;function YYe(e,t,r,i){var n=t+i>>>0,a=(n<t?1:0)+e+r;return a>>>0}Wr.sum64_hi=YYe;function XYe(e,t,r,i){var n=t+i;return n>>>0}Wr.sum64_lo=XYe;function ZYe(e,t,r,i,n,a,o,s){var l=0,u=t;u=u+i>>>0,l+=u<t?1:0,u=u+a>>>0,l+=u<a?1:0,u=u+s>>>0,l+=u<s?1:0;var c=e+r+n+o+l;return c>>>0}Wr.sum64_4_hi=ZYe;function QYe(e,t,r,i,n,a,o,s){var l=t+i+a+s;return l>>>0}Wr.sum64_4_lo=QYe;function KYe(e,t,r,i,n,a,o,s,l,u){var c=0,h=t;h=h+i>>>0,c+=h<t?1:0,h=h+a>>>0,c+=h<a?1:0,h=h+s>>>0,c+=h<s?1:0,h=h+u>>>0,c+=h<u?1:0;var d=e+r+n+o+l+c;return d>>>0}Wr.sum64_5_hi=KYe;function JYe(e,t,r,i,n,a,o,s,l,u){var c=t+i+a+s+u;return c>>>0}Wr.sum64_5_lo=JYe;function $Ye(e,t,r){var i=t<<32-r|e>>>r;return i>>>0}Wr.rotr64_hi=$Ye;function eXe(e,t,r){var i=e<<32-r|t>>>r;return i>>>0}Wr.rotr64_lo=eXe;function tXe(e,t,r){return e>>>r}Wr.shr64_hi=tXe;function rXe(e,t,r){var i=e<<32-r|t>>>r;return i>>>0}Wr.shr64_lo=rXe;var zy={},UQ=Wr,iXe=O4;function r7(){this.pending=null,this.pendingTotal=0,this.blockSize=this.constructor.blockSize,this.outSize=this.constructor.outSize,this.hmacStrength=this.constructor.hmacStrength,this.padLength=this.constructor.padLength/8,this.endian="big",this._delta8=this.blockSize/8,this._delta32=this.blockSize/32}zy.BlockHash=r7;r7.prototype.update=function(t,r){if(t=UQ.toArray(t,r),this.pending?this.pending=this.pending.concat(t):this.pending=t,this.pendingTotal+=t.length,this.pending.length>=this._delta8){t=this.pending;var i=t.length%this._delta8;this.pending=t.slice(t.length-i,t.length),this.pending.length===0&&(this.pending=null),t=UQ.join32(t,0,t.length-i,this.endian);for(var n=0;n<t.length;n+=this._delta32)this._update(t,n,n+this._delta32)}return this};r7.prototype.digest=function(t){return this.update(this._pad()),iXe(this.pending===null),this._digest(t)};r7.prototype._pad=function(){var t=this.pendingTotal,r=this._delta8,i=r-(t+this.padLength)%r,n=new Array(i+this.padLength);n[0]=128;for(var a=1;a<i;a++)n[a]=0;if(t<<=3,this.endian==="big"){for(var o=8;o<this.padLength;o++)n[a++]=0;n[a++]=0,n[a++]=0,n[a++]=0,n[a++]=0,n[a++]=t>>>24&255,n[a++]=t>>>16&255,n[a++]=t>>>8&255,n[a++]=t&255}else for(n[a++]=t&255,n[a++]=t>>>8&255,n[a++]=t>>>16&255,n[a++]=t>>>24&255,n[a++]=0,n[a++]=0,n[a++]=0,n[a++]=0,o=8;o<this.padLength;o++)n[a++]=0;return n};var Hy={},hh={},nXe=Wr,zc=nXe.rotr32;function aXe(e,t,r,i){if(e===0)return e0e(t,r,i);if(e===1||e===3)return r0e(t,r,i);if(e===2)return t0e(t,r,i)}hh.ft_1=aXe;function e0e(e,t,r){return e&t^~e&r}hh.ch32=e0e;function t0e(e,t,r){return e&t^e&r^t&r}hh.maj32=t0e;function r0e(e,t,r){return e^t^r}hh.p32=r0e;function oXe(e){return zc(e,2)^zc(e,13)^zc(e,22)}hh.s0_256=oXe;function sXe(e){return zc(e,6)^zc(e,11)^zc(e,25)}hh.s1_256=sXe;function lXe(e){return zc(e,7)^zc(e,18)^e>>>3}hh.g0_256=lXe;function uXe(e){return zc(e,17)^zc(e,19)^e>>>10}hh.g1_256=uXe;var X1=Wr,cXe=zy,hXe=hh,WT=X1.rotl32,j2=X1.sum32,dXe=X1.sum32_5,fXe=hXe.ft_1,i0e=cXe.BlockHash,pXe=[1518500249,1859775393,2400959708,3395469782];function th(){if(!(this instanceof th))return new th;i0e.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],this.W=new Array(80)}X1.inherits(th,i0e);var vXe=th;th.blockSize=512;th.outSize=160;th.hmacStrength=80;th.padLength=64;th.prototype._update=function(t,r){for(var i=this.W,n=0;n<16;n++)i[n]=t[r+n];for(;n<i.length;n++)i[n]=WT(i[n-3]^i[n-8]^i[n-14]^i[n-16],1);var a=this.h[0],o=this.h[1],s=this.h[2],l=this.h[3],u=this.h[4];for(n=0;n<i.length;n++){var c=~~(n/20),h=dXe(WT(a,5),fXe(c,o,s,l),u,i[n],pXe[c]);u=l,l=s,s=WT(o,30),o=a,a=h}this.h[0]=j2(this.h[0],a),this.h[1]=j2(this.h[1],o),this.h[2]=j2(this.h[2],s),this.h[3]=j2(this.h[3],l),this.h[4]=j2(this.h[4],u)};th.prototype._digest=function(t){return t==="hex"?X1.toHex32(this.h,"big"):X1.split32(this.h,"big")};var Z1=Wr,mXe=zy,Uy=hh,gXe=O4,Yl=Z1.sum32,yXe=Z1.sum32_4,xXe=Z1.sum32_5,bXe=Uy.ch32,wXe=Uy.maj32,_Xe=Uy.s0_256,AXe=Uy.s1_256,SXe=Uy.g0_256,CXe=Uy.g1_256,n0e=mXe.BlockHash,EXe=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298];function rh(){if(!(this instanceof rh))return new rh;n0e.call(this),this.h=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],this.k=EXe,this.W=new Array(64)}Z1.inherits(rh,n0e);var a0e=rh;rh.blockSize=512;rh.outSize=256;rh.hmacStrength=192;rh.padLength=64;rh.prototype._update=function(t,r){for(var i=this.W,n=0;n<16;n++)i[n]=t[r+n];for(;n<i.length;n++)i[n]=yXe(CXe(i[n-2]),i[n-7],SXe(i[n-15]),i[n-16]);var a=this.h[0],o=this.h[1],s=this.h[2],l=this.h[3],u=this.h[4],c=this.h[5],h=this.h[6],d=this.h[7];for(gXe(this.k.length===i.length),n=0;n<i.length;n++){var f=xXe(d,AXe(u),bXe(u,c,h),this.k[n],i[n]),p=Yl(_Xe(a),wXe(a,o,s));d=h,h=c,c=u,u=Yl(l,f),l=s,s=o,o=a,a=Yl(f,p)}this.h[0]=Yl(this.h[0],a),this.h[1]=Yl(this.h[1],o),this.h[2]=Yl(this.h[2],s),this.h[3]=Yl(this.h[3],l),this.h[4]=Yl(this.h[4],u),this.h[5]=Yl(this.h[5],c),this.h[6]=Yl(this.h[6],h),this.h[7]=Yl(this.h[7],d)};rh.prototype._digest=function(t){return t==="hex"?Z1.toHex32(this.h,"big"):Z1.split32(this.h,"big")};var Lk=Wr,o0e=a0e;function Ad(){if(!(this instanceof Ad))return new Ad;o0e.call(this),this.h=[3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428]}Lk.inherits(Ad,o0e);var MXe=Ad;Ad.blockSize=512;Ad.outSize=224;Ad.hmacStrength=192;Ad.padLength=64;Ad.prototype._digest=function(t){return t==="hex"?Lk.toHex32(this.h.slice(0,7),"big"):Lk.split32(this.h.slice(0,7),"big")};var Cs=Wr,TXe=zy,PXe=O4,Hc=Cs.rotr64_hi,Uc=Cs.rotr64_lo,s0e=Cs.shr64_hi,l0e=Cs.shr64_lo,$d=Cs.sum64,qT=Cs.sum64_hi,YT=Cs.sum64_lo,DXe=Cs.sum64_4_hi,IXe=Cs.sum64_4_lo,LXe=Cs.sum64_5_hi,kXe=Cs.sum64_5_lo,u0e=TXe.BlockHash,RXe=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591];function Iu(){if(!(this instanceof Iu))return new Iu;u0e.call(this),this.h=[1779033703,4089235720,3144134277,2227873595,1013904242,4271175723,2773480762,1595750129,1359893119,2917565137,2600822924,725511199,528734635,4215389547,1541459225,327033209],this.k=RXe,this.W=new Array(160)}Cs.inherits(Iu,u0e);var c0e=Iu;Iu.blockSize=1024;Iu.outSize=512;Iu.hmacStrength=192;Iu.padLength=128;Iu.prototype._prepareBlock=function(t,r){for(var i=this.W,n=0;n<32;n++)i[n]=t[r+n];for(;n<i.length;n+=2){var a=WXe(i[n-4],i[n-3]),o=qXe(i[n-4],i[n-3]),s=i[n-14],l=i[n-13],u=GXe(i[n-30],i[n-29]),c=jXe(i[n-30],i[n-29]),h=i[n-32],d=i[n-31];i[n]=DXe(a,o,s,l,u,c,h,d),i[n+1]=IXe(a,o,s,l,u,c,h,d)}};Iu.prototype._update=function(t,r){this._prepareBlock(t,r);var i=this.W,n=this.h[0],a=this.h[1],o=this.h[2],s=this.h[3],l=this.h[4],u=this.h[5],c=this.h[6],h=this.h[7],d=this.h[8],f=this.h[9],p=this.h[10],v=this.h[11],m=this.h[12],g=this.h[13],y=this.h[14],x=this.h[15];PXe(this.k.length===i.length);for(var b=0;b<i.length;b+=2){var _=y,w=x,S=HXe(d,f),A=UXe(d,f),M=OXe(d,f,p,v,m),E=BXe(d,f,p,v,m,g),T=this.k[b],L=this.k[b+1],P=i[b],C=i[b+1],D=LXe(_,w,S,A,M,E,T,L,P,C),I=kXe(_,w,S,A,M,E,T,L,P,C);_=FXe(n,a),w=zXe(n,a),S=NXe(n,a,o,s,l),A=VXe(n,a,o,s,l,u);var O=qT(_,w,S,A),R=YT(_,w,S,A);y=m,x=g,m=p,g=v,p=d,v=f,d=qT(c,h,D,I),f=YT(h,h,D,I),c=l,h=u,l=o,u=s,o=n,s=a,n=qT(D,I,O,R),a=YT(D,I,O,R)}$d(this.h,0,n,a),$d(this.h,2,o,s),$d(this.h,4,l,u),$d(this.h,6,c,h),$d(this.h,8,d,f),$d(this.h,10,p,v),$d(this.h,12,m,g),$d(this.h,14,y,x)};Iu.prototype._digest=function(t){return t==="hex"?Cs.toHex32(this.h,"big"):Cs.split32(this.h,"big")};function OXe(e,t,r,i,n){var a=e&r^~e&n;return a<0&&(a+=4294967296),a}function BXe(e,t,r,i,n,a){var o=t&i^~t&a;return o<0&&(o+=4294967296),o}function NXe(e,t,r,i,n){var a=e&r^e&n^r&n;return a<0&&(a+=4294967296),a}function VXe(e,t,r,i,n,a){var o=t&i^t&a^i&a;return o<0&&(o+=4294967296),o}function FXe(e,t){var r=Hc(e,t,28),i=Hc(t,e,2),n=Hc(t,e,7),a=r^i^n;return a<0&&(a+=4294967296),a}function zXe(e,t){var r=Uc(e,t,28),i=Uc(t,e,2),n=Uc(t,e,7),a=r^i^n;return a<0&&(a+=4294967296),a}function HXe(e,t){var r=Hc(e,t,14),i=Hc(e,t,18),n=Hc(t,e,9),a=r^i^n;return a<0&&(a+=4294967296),a}function UXe(e,t){var r=Uc(e,t,14),i=Uc(e,t,18),n=Uc(t,e,9),a=r^i^n;return a<0&&(a+=4294967296),a}function GXe(e,t){var r=Hc(e,t,1),i=Hc(e,t,8),n=s0e(e,t,7),a=r^i^n;return a<0&&(a+=4294967296),a}function jXe(e,t){var r=Uc(e,t,1),i=Uc(e,t,8),n=l0e(e,t,7),a=r^i^n;return a<0&&(a+=4294967296),a}function WXe(e,t){var r=Hc(e,t,19),i=Hc(t,e,29),n=s0e(e,t,6),a=r^i^n;return a<0&&(a+=4294967296),a}function qXe(e,t){var r=Uc(e,t,19),i=Uc(t,e,29),n=l0e(e,t,6),a=r^i^n;return a<0&&(a+=4294967296),a}var kk=Wr,h0e=c0e;function Sd(){if(!(this instanceof Sd))return new Sd;h0e.call(this),this.h=[3418070365,3238371032,1654270250,914150663,2438529370,812702999,355462360,4144912697,1731405415,4290775857,2394180231,1750603025,3675008525,1694076839,1203062813,3204075428]}kk.inherits(Sd,h0e);var YXe=Sd;Sd.blockSize=1024;Sd.outSize=384;Sd.hmacStrength=192;Sd.padLength=128;Sd.prototype._digest=function(t){return t==="hex"?kk.toHex32(this.h.slice(0,12),"big"):kk.split32(this.h.slice(0,12),"big")};Hy.sha1=vXe;Hy.sha224=MXe;Hy.sha256=a0e;Hy.sha384=YXe;Hy.sha512=c0e;var d0e={},Uv=Wr,XXe=zy,y_=Uv.rotl32,GQ=Uv.sum32,W2=Uv.sum32_3,jQ=Uv.sum32_4,f0e=XXe.BlockHash;function ih(){if(!(this instanceof ih))return new ih;f0e.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],this.endian="little"}Uv.inherits(ih,f0e);d0e.ripemd160=ih;ih.blockSize=512;ih.outSize=160;ih.hmacStrength=192;ih.padLength=64;ih.prototype._update=function(t,r){for(var i=this.h[0],n=this.h[1],a=this.h[2],o=this.h[3],s=this.h[4],l=i,u=n,c=a,h=o,d=s,f=0;f<80;f++){var p=GQ(y_(jQ(i,WQ(f,n,a,o),t[KXe[f]+r],ZXe(f)),$Xe[f]),s);i=s,s=o,o=y_(a,10),a=n,n=p,p=GQ(y_(jQ(l,WQ(79-f,u,c,h),t[JXe[f]+r],QXe(f)),eZe[f]),d),l=d,d=h,h=y_(c,10),c=u,u=p}p=W2(this.h[1],a,h),this.h[1]=W2(this.h[2],o,d),this.h[2]=W2(this.h[3],s,l),this.h[3]=W2(this.h[4],i,u),this.h[4]=W2(this.h[0],n,c),this.h[0]=p};ih.prototype._digest=function(t){return t==="hex"?Uv.toHex32(this.h,"little"):Uv.split32(this.h,"little")};function WQ(e,t,r,i){return e<=15?t^r^i:e<=31?t&r|~t&i:e<=47?(t|~r)^i:e<=63?t&i|r&~i:t^(r|~i)}function ZXe(e){return e<=15?0:e<=31?1518500249:e<=47?1859775393:e<=63?2400959708:2840853838}function QXe(e){return e<=15?1352829926:e<=31?1548603684:e<=47?1836072691:e<=63?2053994217:0}var KXe=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13],JXe=[5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11],$Xe=[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6],eZe=[8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11],tZe=Wr,rZe=O4;function Q1(e,t,r){if(!(this instanceof Q1))return new Q1(e,t,r);this.Hash=e,this.blockSize=e.blockSize/8,this.outSize=e.outSize/8,this.inner=null,this.outer=null,this._init(tZe.toArray(t,r))}var iZe=Q1;Q1.prototype._init=function(t){t.length>this.blockSize&&(t=new this.Hash().update(t).digest()),rZe(t.length<=this.blockSize);for(var r=t.length;r<this.blockSize;r++)t.push(0);for(r=0;r<t.length;r++)t[r]^=54;for(this.inner=new this.Hash().update(t),r=0;r<t.length;r++)t[r]^=106;this.outer=new this.Hash().update(t)};Q1.prototype.update=function(t,r){return this.inner.update(t,r),this};Q1.prototype.digest=function(t){return this.outer.update(this.inner.digest()),this.outer.digest(t)};(function(e){var t=e;t.utils=Wr,t.common=zy,t.sha=Hy,t.ripemd=d0e,t.hmac=iZe,t.sha1=t.sha.sha1,t.sha256=t.sha.sha256,t.sha224=t.sha.sha224,t.sha384=t.sha.sha384,t.sha512=t.sha.sha512,t.ripemd160=t.ripemd.ripemd160})(Zpe);const dc=D4(Zpe);function Gy(e,t,r){return r={path:t,exports:{},require:function(i,n){return nZe(i,n??r.path)}},e(r,r.exports),r.exports}function nZe(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}var oF=p0e;function p0e(e,t){if(!e)throw new Error(t||"Assertion failed")}p0e.equal=function(t,r,i){if(t!=r)throw new Error(i||"Assertion failed: "+t+" != "+r)};var vu=Gy(function(e,t){var r=t;function i(o,s){if(Array.isArray(o))return o.slice();if(!o)return[];var l=[];if(typeof o!="string"){for(var u=0;u<o.length;u++)l[u]=o[u]|0;return l}if(s==="hex"){o=o.replace(/[^a-z0-9]+/ig,""),o.length%2!==0&&(o="0"+o);for(var u=0;u<o.length;u+=2)l.push(parseInt(o[u]+o[u+1],16))}else for(var u=0;u<o.length;u++){var c=o.charCodeAt(u),h=c>>8,d=c&255;h?l.push(h,d):l.push(d)}return l}r.toArray=i;function n(o){return o.length===1?"0"+o:o}r.zero2=n;function a(o){for(var s="",l=0;l<o.length;l++)s+=n(o[l].toString(16));return s}r.toHex=a,r.encode=function(s,l){return l==="hex"?a(s):s}}),Qs=Gy(function(e,t){var r=t;r.assert=oF,r.toArray=vu.toArray,r.zero2=vu.zero2,r.toHex=vu.toHex,r.encode=vu.encode;function i(l,u,c){var h=new Array(Math.max(l.bitLength(),c)+1);h.fill(0);for(var d=1<<u+1,f=l.clone(),p=0;p<h.length;p++){var v,m=f.andln(d-1);f.isOdd()?(m>(d>>1)-1?v=(d>>1)-m:v=m,f.isubn(v)):v=0,h[p]=v,f.iushrn(1)}return h}r.getNAF=i;function n(l,u){var c=[[],[]];l=l.clone(),u=u.clone();for(var h=0,d=0,f;l.cmpn(-h)>0||u.cmpn(-d)>0;){var p=l.andln(3)+h&3,v=u.andln(3)+d&3;p===3&&(p=-1),v===3&&(v=-1);var m;p&1?(f=l.andln(7)+h&7,(f===3||f===5)&&v===2?m=-p:m=p):m=0,c[0].push(m);var g;v&1?(f=u.andln(7)+d&7,(f===3||f===5)&&p===2?g=-v:g=v):g=0,c[1].push(g),2*h===m+1&&(h=1-h),2*d===g+1&&(d=1-d),l.iushrn(1),u.iushrn(1)}return c}r.getJSF=n;function a(l,u,c){var h="_"+u;l.prototype[u]=function(){return this[h]!==void 0?this[h]:this[h]=c.call(this)}}r.cachedProperty=a;function o(l){return typeof l=="string"?r.toArray(l,"hex"):l}r.parseBytes=o;function s(l){return new wr(l,"hex","le")}r.intFromLE=s}),SS=Qs.getNAF,aZe=Qs.getJSF,CS=Qs.assert;function Tp(e,t){this.type=e,this.p=new wr(t.p,16),this.red=t.prime?wr.red(t.prime):wr.mont(this.p),this.zero=new wr(0).toRed(this.red),this.one=new wr(1).toRed(this.red),this.two=new wr(2).toRed(this.red),this.n=t.n&&new wr(t.n,16),this.g=t.g&&this.pointFromJSON(t.g,t.gRed),this._wnafT1=new Array(4),this._wnafT2=new Array(4),this._wnafT3=new Array(4),this._wnafT4=new Array(4),this._bitLength=this.n?this.n.bitLength():0;var r=this.n&&this.p.div(this.n);!r||r.cmpn(100)>0?this.redN=null:(this._maxwellTrick=!0,this.redN=this.n.toRed(this.red))}var om=Tp;Tp.prototype.point=function(){throw new Error("Not implemented")};Tp.prototype.validate=function(){throw new Error("Not implemented")};Tp.prototype._fixedNafMul=function(t,r){CS(t.precomputed);var i=t._getDoubles(),n=SS(r,1,this._bitLength),a=(1<<i.step+1)-(i.step%2===0?2:1);a/=3;var o=[],s,l;for(s=0;s<n.length;s+=i.step){l=0;for(var u=s+i.step-1;u>=s;u--)l=(l<<1)+n[u];o.push(l)}for(var c=this.jpoint(null,null,null),h=this.jpoint(null,null,null),d=a;d>0;d--){for(s=0;s<o.length;s++)l=o[s],l===d?h=h.mixedAdd(i.points[s]):l===-d&&(h=h.mixedAdd(i.points[s].neg()));c=c.add(h)}return c.toP()};Tp.prototype._wnafMul=function(t,r){var i=4,n=t._getNAFPoints(i);i=n.wnd;for(var a=n.points,o=SS(r,i,this._bitLength),s=this.jpoint(null,null,null),l=o.length-1;l>=0;l--){for(var u=0;l>=0&&o[l]===0;l--)u++;if(l>=0&&u++,s=s.dblp(u),l<0)break;var c=o[l];CS(c!==0),t.type==="affine"?c>0?s=s.mixedAdd(a[c-1>>1]):s=s.mixedAdd(a[-c-1>>1].neg()):c>0?s=s.add(a[c-1>>1]):s=s.add(a[-c-1>>1].neg())}return t.type==="affine"?s.toP():s};Tp.prototype._wnafMulAdd=function(t,r,i,n,a){var o=this._wnafT1,s=this._wnafT2,l=this._wnafT3,u=0,c,h,d;for(c=0;c<n;c++){d=r[c];var f=d._getNAFPoints(t);o[c]=f.wnd,s[c]=f.points}for(c=n-1;c>=1;c-=2){var p=c-1,v=c;if(o[p]!==1||o[v]!==1){l[p]=SS(i[p],o[p],this._bitLength),l[v]=SS(i[v],o[v],this._bitLength),u=Math.max(l[p].length,u),u=Math.max(l[v].length,u);continue}var m=[r[p],null,null,r[v]];r[p].y.cmp(r[v].y)===0?(m[1]=r[p].add(r[v]),m[2]=r[p].toJ().mixedAdd(r[v].neg())):r[p].y.cmp(r[v].y.redNeg())===0?(m[1]=r[p].toJ().mixedAdd(r[v]),m[2]=r[p].add(r[v].neg())):(m[1]=r[p].toJ().mixedAdd(r[v]),m[2]=r[p].toJ().mixedAdd(r[v].neg()));var g=[-3,-1,-5,-7,0,7,5,1,3],y=aZe(i[p],i[v]);for(u=Math.max(y[0].length,u),l[p]=new Array(u),l[v]=new Array(u),h=0;h<u;h++){var x=y[0][h]|0,b=y[1][h]|0;l[p][h]=g[(x+1)*3+(b+1)],l[v][h]=0,s[p]=m}}var _=this.jpoint(null,null,null),w=this._wnafT4;for(c=u;c>=0;c--){for(var S=0;c>=0;){var A=!0;for(h=0;h<n;h++)w[h]=l[h][c]|0,w[h]!==0&&(A=!1);if(!A)break;S++,c--}if(c>=0&&S++,_=_.dblp(S),c<0)break;for(h=0;h<n;h++){var M=w[h];M!==0&&(M>0?d=s[h][M-1>>1]:M<0&&(d=s[h][-M-1>>1].neg()),d.type==="affine"?_=_.mixedAdd(d):_=_.add(d))}}for(c=0;c<n;c++)s[c]=null;return a?_:_.toP()};function Hl(e,t){this.curve=e,this.type=t,this.precomputed=null}Tp.BasePoint=Hl;Hl.prototype.eq=function(){throw new Error("Not implemented")};Hl.prototype.validate=function(){return this.curve.validate(this)};Tp.prototype.decodePoint=function(t,r){t=Qs.toArray(t,r);var i=this.p.byteLength();if((t[0]===4||t[0]===6||t[0]===7)&&t.length-1===2*i){t[0]===6?CS(t[t.length-1]%2===0):t[0]===7&&CS(t[t.length-1]%2===1);var n=this.point(t.slice(1,1+i),t.slice(1+i,1+2*i));return n}else if((t[0]===2||t[0]===3)&&t.length-1===i)return this.pointFromX(t.slice(1,1+i),t[0]===3);throw new Error("Unknown point format")};Hl.prototype.encodeCompressed=function(t){return this.encode(t,!0)};Hl.prototype._encode=function(t){var r=this.curve.p.byteLength(),i=this.getX().toArray("be",r);return t?[this.getY().isEven()?2:3].concat(i):[4].concat(i,this.getY().toArray("be",r))};Hl.prototype.encode=function(t,r){return Qs.encode(this._encode(r),t)};Hl.prototype.precompute=function(t){if(this.precomputed)return this;var r={doubles:null,naf:null,beta:null};return r.naf=this._getNAFPoints(8),r.doubles=this._getDoubles(4,t),r.beta=this._getBeta(),this.precomputed=r,this};Hl.prototype._hasDoubles=function(t){if(!this.precomputed)return!1;var r=this.precomputed.doubles;return r?r.points.length>=Math.ceil((t.bitLength()+1)/r.step):!1};Hl.prototype._getDoubles=function(t,r){if(this.precomputed&&this.precomputed.doubles)return this.precomputed.doubles;for(var i=[this],n=this,a=0;a<r;a+=t){for(var o=0;o<t;o++)n=n.dbl();i.push(n)}return{step:t,points:i}};Hl.prototype._getNAFPoints=function(t){if(this.precomputed&&this.precomputed.naf)return this.precomputed.naf;for(var r=[this],i=(1<<t)-1,n=i===1?null:this.dbl(),a=1;a<i;a++)r[a]=r[a-1].add(n);return{wnd:t,points:r}};Hl.prototype._getBeta=function(){return null};Hl.prototype.dblp=function(t){for(var r=this,i=0;i<t;i++)r=r.dbl();return r};var sF=Gy(function(e){typeof Object.create=="function"?e.exports=function(r,i){i&&(r.super_=i,r.prototype=Object.create(i.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}))}:e.exports=function(r,i){if(i){r.super_=i;var n=function(){};n.prototype=i.prototype,r.prototype=new n,r.prototype.constructor=r}}}),oZe=Qs.assert;function Ul(e){om.call(this,"short",e),this.a=new wr(e.a,16).toRed(this.red),this.b=new wr(e.b,16).toRed(this.red),this.tinv=this.two.redInvm(),this.zeroA=this.a.fromRed().cmpn(0)===0,this.threeA=this.a.fromRed().sub(this.p).cmpn(-3)===0,this.endo=this._getEndomorphism(e),this._endoWnafT1=new Array(4),this._endoWnafT2=new Array(4)}sF(Ul,om);var sZe=Ul;Ul.prototype._getEndomorphism=function(t){if(!(!this.zeroA||!this.g||!this.n||this.p.modn(3)!==1)){var r,i;if(t.beta)r=new wr(t.beta,16).toRed(this.red);else{var n=this._getEndoRoots(this.p);r=n[0].cmp(n[1])<0?n[0]:n[1],r=r.toRed(this.red)}if(t.lambda)i=new wr(t.lambda,16);else{var a=this._getEndoRoots(this.n);this.g.mul(a[0]).x.cmp(this.g.x.redMul(r))===0?i=a[0]:(i=a[1],oZe(this.g.mul(i).x.cmp(this.g.x.redMul(r))===0))}var o;return t.basis?o=t.basis.map(function(s){return{a:new wr(s.a,16),b:new wr(s.b,16)}}):o=this._getEndoBasis(i),{beta:r,lambda:i,basis:o}}};Ul.prototype._getEndoRoots=function(t){var r=t===this.p?this.red:wr.mont(t),i=new wr(2).toRed(r).redInvm(),n=i.redNeg(),a=new wr(3).toRed(r).redNeg().redSqrt().redMul(i),o=n.redAdd(a).fromRed(),s=n.redSub(a).fromRed();return[o,s]};Ul.prototype._getEndoBasis=function(t){for(var r=this.n.ushrn(Math.floor(this.n.bitLength()/2)),i=t,n=this.n.clone(),a=new wr(1),o=new wr(0),s=new wr(0),l=new wr(1),u,c,h,d,f,p,v,m=0,g,y;i.cmpn(0)!==0;){var x=n.div(i);g=n.sub(x.mul(i)),y=s.sub(x.mul(a));var b=l.sub(x.mul(o));if(!h&&g.cmp(r)<0)u=v.neg(),c=a,h=g.neg(),d=y;else if(h&&++m===2)break;v=g,n=i,i=g,s=a,a=y,l=o,o=b}f=g.neg(),p=y;var _=h.sqr().add(d.sqr()),w=f.sqr().add(p.sqr());return w.cmp(_)>=0&&(f=u,p=c),h.negative&&(h=h.neg(),d=d.neg()),f.negative&&(f=f.neg(),p=p.neg()),[{a:h,b:d},{a:f,b:p}]};Ul.prototype._endoSplit=function(t){var r=this.endo.basis,i=r[0],n=r[1],a=n.b.mul(t).divRound(this.n),o=i.b.neg().mul(t).divRound(this.n),s=a.mul(i.a),l=o.mul(n.a),u=a.mul(i.b),c=o.mul(n.b),h=t.sub(s).sub(l),d=u.add(c).neg();return{k1:h,k2:d}};Ul.prototype.pointFromX=function(t,r){t=new wr(t,16),t.red||(t=t.toRed(this.red));var i=t.redSqr().redMul(t).redIAdd(t.redMul(this.a)).redIAdd(this.b),n=i.redSqrt();if(n.redSqr().redSub(i).cmp(this.zero)!==0)throw new Error("invalid point");var a=n.fromRed().isOdd();return(r&&!a||!r&&a)&&(n=n.redNeg()),this.point(t,n)};Ul.prototype.validate=function(t){if(t.inf)return!0;var r=t.x,i=t.y,n=this.a.redMul(r),a=r.redSqr().redMul(r).redIAdd(n).redIAdd(this.b);return i.redSqr().redISub(a).cmpn(0)===0};Ul.prototype._endoWnafMulAdd=function(t,r,i){for(var n=this._endoWnafT1,a=this._endoWnafT2,o=0;o<t.length;o++){var s=this._endoSplit(r[o]),l=t[o],u=l._getBeta();s.k1.negative&&(s.k1.ineg(),l=l.neg(!0)),s.k2.negative&&(s.k2.ineg(),u=u.neg(!0)),n[o*2]=l,n[o*2+1]=u,a[o*2]=s.k1,a[o*2+1]=s.k2}for(var c=this._wnafMulAdd(1,n,a,o*2,i),h=0;h<o*2;h++)n[h]=null,a[h]=null;return c};function Pa(e,t,r,i){om.BasePoint.call(this,e,"affine"),t===null&&r===null?(this.x=null,this.y=null,this.inf=!0):(this.x=new wr(t,16),this.y=new wr(r,16),i&&(this.x.forceRed(this.curve.red),this.y.forceRed(this.curve.red)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.inf=!1)}sF(Pa,om.BasePoint);Ul.prototype.point=function(t,r,i){return new Pa(this,t,r,i)};Ul.prototype.pointFromJSON=function(t,r){return Pa.fromJSON(this,t,r)};Pa.prototype._getBeta=function(){if(this.curve.endo){var t=this.precomputed;if(t&&t.beta)return t.beta;var r=this.curve.point(this.x.redMul(this.curve.endo.beta),this.y);if(t){var i=this.curve,n=function(a){return i.point(a.x.redMul(i.endo.beta),a.y)};t.beta=r,r.precomputed={beta:null,naf:t.naf&&{wnd:t.naf.wnd,points:t.naf.points.map(n)},doubles:t.doubles&&{step:t.doubles.step,points:t.doubles.points.map(n)}}}return r}};Pa.prototype.toJSON=function(){return this.precomputed?[this.x,this.y,this.precomputed&&{doubles:this.precomputed.doubles&&{step:this.precomputed.doubles.step,points:this.precomputed.doubles.points.slice(1)},naf:this.precomputed.naf&&{wnd:this.precomputed.naf.wnd,points:this.precomputed.naf.points.slice(1)}}]:[this.x,this.y]};Pa.fromJSON=function(t,r,i){typeof r=="string"&&(r=JSON.parse(r));var n=t.point(r[0],r[1],i);if(!r[2])return n;function a(s){return t.point(s[0],s[1],i)}var o=r[2];return n.precomputed={beta:null,doubles:o.doubles&&{step:o.doubles.step,points:[n].concat(o.doubles.points.map(a))},naf:o.naf&&{wnd:o.naf.wnd,points:[n].concat(o.naf.points.map(a))}},n};Pa.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" y: "+this.y.fromRed().toString(16,2)+">"};Pa.prototype.isInfinity=function(){return this.inf};Pa.prototype.add=function(t){if(this.inf)return t;if(t.inf)return this;if(this.eq(t))return this.dbl();if(this.neg().eq(t))return this.curve.point(null,null);if(this.x.cmp(t.x)===0)return this.curve.point(null,null);var r=this.y.redSub(t.y);r.cmpn(0)!==0&&(r=r.redMul(this.x.redSub(t.x).redInvm()));var i=r.redSqr().redISub(this.x).redISub(t.x),n=r.redMul(this.x.redSub(i)).redISub(this.y);return this.curve.point(i,n)};Pa.prototype.dbl=function(){if(this.inf)return this;var t=this.y.redAdd(this.y);if(t.cmpn(0)===0)return this.curve.point(null,null);var r=this.curve.a,i=this.x.redSqr(),n=t.redInvm(),a=i.redAdd(i).redIAdd(i).redIAdd(r).redMul(n),o=a.redSqr().redISub(this.x.redAdd(this.x)),s=a.redMul(this.x.redSub(o)).redISub(this.y);return this.curve.point(o,s)};Pa.prototype.getX=function(){return this.x.fromRed()};Pa.prototype.getY=function(){return this.y.fromRed()};Pa.prototype.mul=function(t){return t=new wr(t,16),this.isInfinity()?this:this._hasDoubles(t)?this.curve._fixedNafMul(this,t):this.curve.endo?this.curve._endoWnafMulAdd([this],[t]):this.curve._wnafMul(this,t)};Pa.prototype.mulAdd=function(t,r,i){var n=[this,r],a=[t,i];return this.curve.endo?this.curve._endoWnafMulAdd(n,a):this.curve._wnafMulAdd(1,n,a,2)};Pa.prototype.jmulAdd=function(t,r,i){var n=[this,r],a=[t,i];return this.curve.endo?this.curve._endoWnafMulAdd(n,a,!0):this.curve._wnafMulAdd(1,n,a,2,!0)};Pa.prototype.eq=function(t){return this===t||this.inf===t.inf&&(this.inf||this.x.cmp(t.x)===0&&this.y.cmp(t.y)===0)};Pa.prototype.neg=function(t){if(this.inf)return this;var r=this.curve.point(this.x,this.y.redNeg());if(t&&this.precomputed){var i=this.precomputed,n=function(a){return a.neg()};r.precomputed={naf:i.naf&&{wnd:i.naf.wnd,points:i.naf.points.map(n)},doubles:i.doubles&&{step:i.doubles.step,points:i.doubles.points.map(n)}}}return r};Pa.prototype.toJ=function(){if(this.inf)return this.curve.jpoint(null,null,null);var t=this.curve.jpoint(this.x,this.y,this.curve.one);return t};function Qa(e,t,r,i){om.BasePoint.call(this,e,"jacobian"),t===null&&r===null&&i===null?(this.x=this.curve.one,this.y=this.curve.one,this.z=new wr(0)):(this.x=new wr(t,16),this.y=new wr(r,16),this.z=new wr(i,16)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)),this.zOne=this.z===this.curve.one}sF(Qa,om.BasePoint);Ul.prototype.jpoint=function(t,r,i){return new Qa(this,t,r,i)};Qa.prototype.toP=function(){if(this.isInfinity())return this.curve.point(null,null);var t=this.z.redInvm(),r=t.redSqr(),i=this.x.redMul(r),n=this.y.redMul(r).redMul(t);return this.curve.point(i,n)};Qa.prototype.neg=function(){return this.curve.jpoint(this.x,this.y.redNeg(),this.z)};Qa.prototype.add=function(t){if(this.isInfinity())return t;if(t.isInfinity())return this;var r=t.z.redSqr(),i=this.z.redSqr(),n=this.x.redMul(r),a=t.x.redMul(i),o=this.y.redMul(r.redMul(t.z)),s=t.y.redMul(i.redMul(this.z)),l=n.redSub(a),u=o.redSub(s);if(l.cmpn(0)===0)return u.cmpn(0)!==0?this.curve.jpoint(null,null,null):this.dbl();var c=l.redSqr(),h=c.redMul(l),d=n.redMul(c),f=u.redSqr().redIAdd(h).redISub(d).redISub(d),p=u.redMul(d.redISub(f)).redISub(o.redMul(h)),v=this.z.redMul(t.z).redMul(l);return this.curve.jpoint(f,p,v)};Qa.prototype.mixedAdd=function(t){if(this.isInfinity())return t.toJ();if(t.isInfinity())return this;var r=this.z.redSqr(),i=this.x,n=t.x.redMul(r),a=this.y,o=t.y.redMul(r).redMul(this.z),s=i.redSub(n),l=a.redSub(o);if(s.cmpn(0)===0)return l.cmpn(0)!==0?this.curve.jpoint(null,null,null):this.dbl();var u=s.redSqr(),c=u.redMul(s),h=i.redMul(u),d=l.redSqr().redIAdd(c).redISub(h).redISub(h),f=l.redMul(h.redISub(d)).redISub(a.redMul(c)),p=this.z.redMul(s);return this.curve.jpoint(d,f,p)};Qa.prototype.dblp=function(t){if(t===0)return this;if(this.isInfinity())return this;if(!t)return this.dbl();var r;if(this.curve.zeroA||this.curve.threeA){var i=this;for(r=0;r<t;r++)i=i.dbl();return i}var n=this.curve.a,a=this.curve.tinv,o=this.x,s=this.y,l=this.z,u=l.redSqr().redSqr(),c=s.redAdd(s);for(r=0;r<t;r++){var h=o.redSqr(),d=c.redSqr(),f=d.redSqr(),p=h.redAdd(h).redIAdd(h).redIAdd(n.redMul(u)),v=o.redMul(d),m=p.redSqr().redISub(v.redAdd(v)),g=v.redISub(m),y=p.redMul(g);y=y.redIAdd(y).redISub(f);var x=c.redMul(l);r+1<t&&(u=u.redMul(f)),o=m,l=x,c=y}return this.curve.jpoint(o,c.redMul(a),l)};Qa.prototype.dbl=function(){return this.isInfinity()?this:this.curve.zeroA?this._zeroDbl():this.curve.threeA?this._threeDbl():this._dbl()};Qa.prototype._zeroDbl=function(){var t,r,i;if(this.zOne){var n=this.x.redSqr(),a=this.y.redSqr(),o=a.redSqr(),s=this.x.redAdd(a).redSqr().redISub(n).redISub(o);s=s.redIAdd(s);var l=n.redAdd(n).redIAdd(n),u=l.redSqr().redISub(s).redISub(s),c=o.redIAdd(o);c=c.redIAdd(c),c=c.redIAdd(c),t=u,r=l.redMul(s.redISub(u)).redISub(c),i=this.y.redAdd(this.y)}else{var h=this.x.redSqr(),d=this.y.redSqr(),f=d.redSqr(),p=this.x.redAdd(d).redSqr().redISub(h).redISub(f);p=p.redIAdd(p);var v=h.redAdd(h).redIAdd(h),m=v.redSqr(),g=f.redIAdd(f);g=g.redIAdd(g),g=g.redIAdd(g),t=m.redISub(p).redISub(p),r=v.redMul(p.redISub(t)).redISub(g),i=this.y.redMul(this.z),i=i.redIAdd(i)}return this.curve.jpoint(t,r,i)};Qa.prototype._threeDbl=function(){var t,r,i;if(this.zOne){var n=this.x.redSqr(),a=this.y.redSqr(),o=a.redSqr(),s=this.x.redAdd(a).redSqr().redISub(n).redISub(o);s=s.redIAdd(s);var l=n.redAdd(n).redIAdd(n).redIAdd(this.curve.a),u=l.redSqr().redISub(s).redISub(s);t=u;var c=o.redIAdd(o);c=c.redIAdd(c),c=c.redIAdd(c),r=l.redMul(s.redISub(u)).redISub(c),i=this.y.redAdd(this.y)}else{var h=this.z.redSqr(),d=this.y.redSqr(),f=this.x.redMul(d),p=this.x.redSub(h).redMul(this.x.redAdd(h));p=p.redAdd(p).redIAdd(p);var v=f.redIAdd(f);v=v.redIAdd(v);var m=v.redAdd(v);t=p.redSqr().redISub(m),i=this.y.redAdd(this.z).redSqr().redISub(d).redISub(h);var g=d.redSqr();g=g.redIAdd(g),g=g.redIAdd(g),g=g.redIAdd(g),r=p.redMul(v.redISub(t)).redISub(g)}return this.curve.jpoint(t,r,i)};Qa.prototype._dbl=function(){var t=this.curve.a,r=this.x,i=this.y,n=this.z,a=n.redSqr().redSqr(),o=r.redSqr(),s=i.redSqr(),l=o.redAdd(o).redIAdd(o).redIAdd(t.redMul(a)),u=r.redAdd(r);u=u.redIAdd(u);var c=u.redMul(s),h=l.redSqr().redISub(c.redAdd(c)),d=c.redISub(h),f=s.redSqr();f=f.redIAdd(f),f=f.redIAdd(f),f=f.redIAdd(f);var p=l.redMul(d).redISub(f),v=i.redAdd(i).redMul(n);return this.curve.jpoint(h,p,v)};Qa.prototype.trpl=function(){if(!this.curve.zeroA)return this.dbl().add(this);var t=this.x.redSqr(),r=this.y.redSqr(),i=this.z.redSqr(),n=r.redSqr(),a=t.redAdd(t).redIAdd(t),o=a.redSqr(),s=this.x.redAdd(r).redSqr().redISub(t).redISub(n);s=s.redIAdd(s),s=s.redAdd(s).redIAdd(s),s=s.redISub(o);var l=s.redSqr(),u=n.redIAdd(n);u=u.redIAdd(u),u=u.redIAdd(u),u=u.redIAdd(u);var c=a.redIAdd(s).redSqr().redISub(o).redISub(l).redISub(u),h=r.redMul(c);h=h.redIAdd(h),h=h.redIAdd(h);var d=this.x.redMul(l).redISub(h);d=d.redIAdd(d),d=d.redIAdd(d);var f=this.y.redMul(c.redMul(u.redISub(c)).redISub(s.redMul(l)));f=f.redIAdd(f),f=f.redIAdd(f),f=f.redIAdd(f);var p=this.z.redAdd(s).redSqr().redISub(i).redISub(l);return this.curve.jpoint(d,f,p)};Qa.prototype.mul=function(t,r){return t=new wr(t,r),this.curve._wnafMul(this,t)};Qa.prototype.eq=function(t){if(t.type==="affine")return this.eq(t.toJ());if(this===t)return!0;var r=this.z.redSqr(),i=t.z.redSqr();if(this.x.redMul(i).redISub(t.x.redMul(r)).cmpn(0)!==0)return!1;var n=r.redMul(this.z),a=i.redMul(t.z);return this.y.redMul(a).redISub(t.y.redMul(n)).cmpn(0)===0};Qa.prototype.eqXToP=function(t){var r=this.z.redSqr(),i=t.toRed(this.curve.red).redMul(r);if(this.x.cmp(i)===0)return!0;for(var n=t.clone(),a=this.curve.redN.redMul(r);;){if(n.iadd(this.curve.n),n.cmp(this.curve.p)>=0)return!1;if(i.redIAdd(a),this.x.cmp(i)===0)return!0}};Qa.prototype.inspect=function(){return this.isInfinity()?"<EC JPoint Infinity>":"<EC JPoint x: "+this.x.toString(16,2)+" y: "+this.y.toString(16,2)+" z: "+this.z.toString(16,2)+">"};Qa.prototype.isInfinity=function(){return this.z.cmpn(0)===0};var kA=Gy(function(e,t){var r=t;r.base=om,r.short=sZe,r.mont=null,r.edwards=null}),RA=Gy(function(e,t){var r=t,i=Qs.assert;function n(s){s.type==="short"?this.curve=new kA.short(s):s.type==="edwards"?this.curve=new kA.edwards(s):this.curve=new kA.mont(s),this.g=this.curve.g,this.n=this.curve.n,this.hash=s.hash,i(this.g.validate(),"Invalid curve"),i(this.g.mul(this.n).isInfinity(),"Invalid curve, G*N != O")}r.PresetCurve=n;function a(s,l){Object.defineProperty(r,s,{configurable:!0,enumerable:!0,get:function(){var u=new n(l);return Object.defineProperty(r,s,{configurable:!0,enumerable:!0,value:u}),u}})}a("p192",{type:"short",prime:"p192",p:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff",a:"ffffffff ffffffff ffffffff fffffffe ffffffff fffffffc",b:"64210519 e59c80e7 0fa7e9ab 72243049 feb8deec c146b9b1",n:"ffffffff ffffffff ffffffff 99def836 146bc9b1 b4d22831",hash:dc.sha256,gRed:!1,g:["188da80e b03090f6 7cbf20eb 43a18800 f4ff0afd 82ff1012","07192b95 ffc8da78 631011ed 6b24cdd5 73f977a1 1e794811"]}),a("p224",{type:"short",prime:"p224",p:"ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001",a:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff fffffffe",b:"b4050a85 0c04b3ab f5413256 5044b0b7 d7bfd8ba 270b3943 2355ffb4",n:"ffffffff ffffffff ffffffff ffff16a2 e0b8f03e 13dd2945 5c5c2a3d",hash:dc.sha256,gRed:!1,g:["b70e0cbd 6bb4bf7f 321390b9 4a03c1d3 56c21122 343280d6 115c1d21","bd376388 b5f723fb 4c22dfe6 cd4375a0 5a074764 44d58199 85007e34"]}),a("p256",{type:"short",prime:null,p:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff ffffffff",a:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff fffffffc",b:"5ac635d8 aa3a93e7 b3ebbd55 769886bc 651d06b0 cc53b0f6 3bce3c3e 27d2604b",n:"ffffffff 00000000 ffffffff ffffffff bce6faad a7179e84 f3b9cac2 fc632551",hash:dc.sha256,gRed:!1,g:["6b17d1f2 e12c4247 f8bce6e5 63a440f2 77037d81 2deb33a0 f4a13945 d898c296","4fe342e2 fe1a7f9b 8ee7eb4a 7c0f9e16 2bce3357 6b315ece cbb64068 37bf51f5"]}),a("p384",{type:"short",prime:null,p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 ffffffff",a:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 fffffffc",b:"b3312fa7 e23ee7e4 988e056b e3f82d19 181d9c6e fe814112 0314088f 5013875a c656398d 8a2ed19d 2a85c8ed d3ec2aef",n:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff c7634d81 f4372ddf 581a0db2 48b0a77a ecec196a ccc52973",hash:dc.sha384,gRed:!1,g:["aa87ca22 be8b0537 8eb1c71e f320ad74 6e1d3b62 8ba79b98 59f741e0 82542a38 5502f25d bf55296c 3a545e38 72760ab7","3617de4a 96262c6f 5d9e98bf 9292dc29 f8f41dbd 289a147c e9da3113 b5f0b8c0 0a60b1ce 1d7e819d 7a431d7c 90ea0e5f"]}),a("p521",{type:"short",prime:null,p:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff",a:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffc",b:"00000051 953eb961 8e1c9a1f 929a21a0 b68540ee a2da725b 99b315f3 b8b48991 8ef109e1 56193951 ec7e937b 1652c0bd 3bb1bf07 3573df88 3d2c34f1 ef451fd4 6b503f00",n:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffa 51868783 bf2f966b 7fcc0148 f709a5d0 3bb5c9b8 899c47ae bb6fb71e 91386409",hash:dc.sha512,gRed:!1,g:["000000c6 858e06b7 0404e9cd 9e3ecb66 2395b442 9c648139 053fb521 f828af60 6b4d3dba a14b5e77 efe75928 fe1dc127 a2ffa8de 3348b3c1 856a429b f97e7e31 c2e5bd66","00000118 39296a78 9a3bc004 5c8a5fb4 2c7d1bd9 98f54449 579b4468 17afbd17 273e662c 97ee7299 5ef42640 c550b901 3fad0761 353c7086 a272c240 88be9476 9fd16650"]}),a("curve25519",{type:"mont",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"76d06",b:"1",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:dc.sha256,gRed:!1,g:["9"]}),a("ed25519",{type:"edwards",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"-1",c:"1",d:"52036cee2b6ffe73 8cc740797779e898 00700a4d4141d8ab 75eb4dca135978a3",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:dc.sha256,gRed:!1,g:["216936d3cd6e53fec0a4e231fdd6dc5c692cc7609525a7b2c9562d608f25d51a","6666666666666666666666666666666666666666666666666666666666666658"]});var o;try{o=null.crash()}catch{o=void 0}a("secp256k1",{type:"short",prime:"k256",p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f",a:"0",b:"7",n:"ffffffff ffffffff ffffffff fffffffe baaedce6 af48a03b bfd25e8c d0364141",h:"1",hash:dc.sha256,beta:"7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee",lambda:"5363ad4cc05c30e0a5261c028812645a122e22ea20816678df02967c1b23bd72",basis:[{a:"3086d221a7d46bcde86c90e49284eb15",b:"-e4437ed6010e88286f547fa90abfe4c3"},{a:"114ca50f7a8e2f3f657c1108d9d44cfd8",b:"3086d221a7d46bcde86c90e49284eb15"}],gRed:!1,g:["79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798","483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8",o]})});function yp(e){if(!(this instanceof yp))return new yp(e);this.hash=e.hash,this.predResist=!!e.predResist,this.outLen=this.hash.outSize,this.minEntropy=e.minEntropy||this.hash.hmacStrength,this._reseed=null,this.reseedInterval=null,this.K=null,this.V=null;var t=vu.toArray(e.entropy,e.entropyEnc||"hex"),r=vu.toArray(e.nonce,e.nonceEnc||"hex"),i=vu.toArray(e.pers,e.persEnc||"hex");oF(t.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._init(t,r,i)}var v0e=yp;yp.prototype._init=function(t,r,i){var n=t.concat(r).concat(i);this.K=new Array(this.outLen/8),this.V=new Array(this.outLen/8);for(var a=0;a<this.V.length;a++)this.K[a]=0,this.V[a]=1;this._update(n),this._reseed=1,this.reseedInterval=281474976710656};yp.prototype._hmac=function(){return new dc.hmac(this.hash,this.K)};yp.prototype._update=function(t){var r=this._hmac().update(this.V).update([0]);t&&(r=r.update(t)),this.K=r.digest(),this.V=this._hmac().update(this.V).digest(),t&&(this.K=this._hmac().update(this.V).update([1]).update(t).digest(),this.V=this._hmac().update(this.V).digest())};yp.prototype.reseed=function(t,r,i,n){typeof r!="string"&&(n=i,i=r,r=null),t=vu.toArray(t,r),i=vu.toArray(i,n),oF(t.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._update(t.concat(i||[])),this._reseed=1};yp.prototype.generate=function(t,r,i,n){if(this._reseed>this.reseedInterval)throw new Error("Reseed is required");typeof r!="string"&&(n=i,i=r,r=null),i&&(i=vu.toArray(i,n||"hex"),this._update(i));for(var a=[];a.length<t;)this.V=this._hmac().update(this.V).digest(),a=a.concat(this.V);var o=a.slice(0,t);return this._update(i),this._reseed++,vu.encode(o,r)};var Rk=Qs.assert;function bo(e,t){this.ec=e,this.priv=null,this.pub=null,t.priv&&this._importPrivate(t.priv,t.privEnc),t.pub&&this._importPublic(t.pub,t.pubEnc)}var lF=bo;bo.fromPublic=function(t,r,i){return r instanceof bo?r:new bo(t,{pub:r,pubEnc:i})};bo.fromPrivate=function(t,r,i){return r instanceof bo?r:new bo(t,{priv:r,privEnc:i})};bo.prototype.validate=function(){var t=this.getPublic();return t.isInfinity()?{result:!1,reason:"Invalid public key"}:t.validate()?t.mul(this.ec.curve.n).isInfinity()?{result:!0,reason:null}:{result:!1,reason:"Public key * N != O"}:{result:!1,reason:"Public key is not a point"}};bo.prototype.getPublic=function(t,r){return typeof t=="string"&&(r=t,t=null),this.pub||(this.pub=this.ec.g.mul(this.priv)),r?this.pub.encode(r,t):this.pub};bo.prototype.getPrivate=function(t){return t==="hex"?this.priv.toString(16,2):this.priv};bo.prototype._importPrivate=function(t,r){this.priv=new wr(t,r||16),this.priv=this.priv.umod(this.ec.curve.n)};bo.prototype._importPublic=function(t,r){if(t.x||t.y){this.ec.curve.type==="mont"?Rk(t.x,"Need x coordinate"):(this.ec.curve.type==="short"||this.ec.curve.type==="edwards")&&Rk(t.x&&t.y,"Need both x and y coordinate"),this.pub=this.ec.curve.point(t.x,t.y);return}this.pub=this.ec.curve.decodePoint(t,r)};bo.prototype.derive=function(t){return t.validate()||Rk(t.validate(),"public point not validated"),t.mul(this.priv).getX()};bo.prototype.sign=function(t,r,i){return this.ec.sign(t,this,r,i)};bo.prototype.verify=function(t,r){return this.ec.verify(t,r,this)};bo.prototype.inspect=function(){return"<Key priv: "+(this.priv&&this.priv.toString(16,2))+" pub: "+(this.pub&&this.pub.inspect())+" >"};var lZe=Qs.assert;function i7(e,t){if(e instanceof i7)return e;this._importDER(e,t)||(lZe(e.r&&e.s,"Signature without r or s"),this.r=new wr(e.r,16),this.s=new wr(e.s,16),e.recoveryParam===void 0?this.recoveryParam=null:this.recoveryParam=e.recoveryParam)}var n7=i7;function uZe(){this.place=0}function XT(e,t){var r=e[t.place++];if(!(r&128))return r;var i=r&15;if(i===0||i>4)return!1;for(var n=0,a=0,o=t.place;a<i;a++,o++)n<<=8,n|=e[o],n>>>=0;return n<=127?!1:(t.place=o,n)}function qQ(e){for(var t=0,r=e.length-1;!e[t]&&!(e[t+1]&128)&&t<r;)t++;return t===0?e:e.slice(t)}i7.prototype._importDER=function(t,r){t=Qs.toArray(t,r);var i=new uZe;if(t[i.place++]!==48)return!1;var n=XT(t,i);if(n===!1||n+i.place!==t.length||t[i.place++]!==2)return!1;var a=XT(t,i);if(a===!1)return!1;var o=t.slice(i.place,a+i.place);if(i.place+=a,t[i.place++]!==2)return!1;var s=XT(t,i);if(s===!1||t.length!==s+i.place)return!1;var l=t.slice(i.place,s+i.place);if(o[0]===0)if(o[1]&128)o=o.slice(1);else return!1;if(l[0]===0)if(l[1]&128)l=l.slice(1);else return!1;return this.r=new wr(o),this.s=new wr(l),this.recoveryParam=null,!0};function ZT(e,t){if(t<128){e.push(t);return}var r=1+(Math.log(t)/Math.LN2>>>3);for(e.push(r|128);--r;)e.push(t>>>(r<<3)&255);e.push(t)}i7.prototype.toDER=function(t){var r=this.r.toArray(),i=this.s.toArray();for(r[0]&128&&(r=[0].concat(r)),i[0]&128&&(i=[0].concat(i)),r=qQ(r),i=qQ(i);!i[0]&&!(i[1]&128);)i=i.slice(1);var n=[2];ZT(n,r.length),n=n.concat(r),n.push(2),ZT(n,i.length);var a=n.concat(i),o=[48];return ZT(o,a.length),o=o.concat(a),Qs.encode(o,t)};var cZe=function(){throw new Error("unsupported")},m0e=Qs.assert;function Ol(e){if(!(this instanceof Ol))return new Ol(e);typeof e=="string"&&(m0e(Object.prototype.hasOwnProperty.call(RA,e),"Unknown curve "+e),e=RA[e]),e instanceof RA.PresetCurve&&(e={curve:e}),this.curve=e.curve.curve,this.n=this.curve.n,this.nh=this.n.ushrn(1),this.g=this.curve.g,this.g=e.curve.g,this.g.precompute(e.curve.n.bitLength()+1),this.hash=e.hash||e.curve.hash}var hZe=Ol;Ol.prototype.keyPair=function(t){return new lF(this,t)};Ol.prototype.keyFromPrivate=function(t,r){return lF.fromPrivate(this,t,r)};Ol.prototype.keyFromPublic=function(t,r){return lF.fromPublic(this,t,r)};Ol.prototype.genKeyPair=function(t){t||(t={});for(var r=new v0e({hash:this.hash,pers:t.pers,persEnc:t.persEnc||"utf8",entropy:t.entropy||cZe(this.hash.hmacStrength),entropyEnc:t.entropy&&t.entropyEnc||"utf8",nonce:this.n.toArray()}),i=this.n.byteLength(),n=this.n.sub(new wr(2));;){var a=new wr(r.generate(i));if(!(a.cmp(n)>0))return a.iaddn(1),this.keyFromPrivate(a)}};Ol.prototype._truncateToN=function(t,r){var i=t.byteLength()*8-this.n.bitLength();return i>0&&(t=t.ushrn(i)),!r&&t.cmp(this.n)>=0?t.sub(this.n):t};Ol.prototype.sign=function(t,r,i,n){typeof i=="object"&&(n=i,i=null),n||(n={}),r=this.keyFromPrivate(r,i),t=this._truncateToN(new wr(t,16));for(var a=this.n.byteLength(),o=r.getPrivate().toArray("be",a),s=t.toArray("be",a),l=new v0e({hash:this.hash,entropy:o,nonce:s,pers:n.pers,persEnc:n.persEnc||"utf8"}),u=this.n.sub(new wr(1)),c=0;;c++){var h=n.k?n.k(c):new wr(l.generate(this.n.byteLength()));if(h=this._truncateToN(h,!0),!(h.cmpn(1)<=0||h.cmp(u)>=0)){var d=this.g.mul(h);if(!d.isInfinity()){var f=d.getX(),p=f.umod(this.n);if(p.cmpn(0)!==0){var v=h.invm(this.n).mul(p.mul(r.getPrivate()).iadd(t));if(v=v.umod(this.n),v.cmpn(0)!==0){var m=(d.getY().isOdd()?1:0)|(f.cmp(p)!==0?2:0);return n.canonical&&v.cmp(this.nh)>0&&(v=this.n.sub(v),m^=1),new n7({r:p,s:v,recoveryParam:m})}}}}}};Ol.prototype.verify=function(t,r,i,n){t=this._truncateToN(new wr(t,16)),i=this.keyFromPublic(i,n),r=new n7(r,"hex");var a=r.r,o=r.s;if(a.cmpn(1)<0||a.cmp(this.n)>=0||o.cmpn(1)<0||o.cmp(this.n)>=0)return!1;var s=o.invm(this.n),l=s.mul(t).umod(this.n),u=s.mul(a).umod(this.n),c;return this.curve._maxwellTrick?(c=this.g.jmulAdd(l,i.getPublic(),u),c.isInfinity()?!1:c.eqXToP(a)):(c=this.g.mulAdd(l,i.getPublic(),u),c.isInfinity()?!1:c.getX().umod(this.n).cmp(a)===0)};Ol.prototype.recoverPubKey=function(e,t,r,i){m0e((3&r)===r,"The recovery param is more than two bits"),t=new n7(t,i);var n=this.n,a=new wr(e),o=t.r,s=t.s,l=r&1,u=r>>1;if(o.cmp(this.curve.p.umod(this.curve.n))>=0&&u)throw new Error("Unable to find sencond key candinate");u?o=this.curve.pointFromX(o.add(this.curve.n),l):o=this.curve.pointFromX(o,l);var c=t.r.invm(n),h=n.sub(a).mul(c).umod(n),d=s.mul(c).umod(n);return this.g.mulAdd(h,o,d)};Ol.prototype.getKeyRecoveryParam=function(e,t,r,i){if(t=new n7(t,i),t.recoveryParam!==null)return t.recoveryParam;for(var n=0;n<4;n++){var a;try{a=this.recoverPubKey(e,t,n)}catch{continue}if(a.eq(r))return n}throw new Error("Unable to find valid recovery factor")};var dZe=Gy(function(e,t){var r=t;r.version="6.5.4",r.utils=Qs,r.rand=function(){throw new Error("unsupported")},r.curve=kA,r.curves=RA,r.ec=hZe,r.eddsa=null}),fZe=dZe.ec;const pZe="signing-key/5.7.0",Ok=new Re(pZe);let QT=null;function Sf(){return QT||(QT=new fZe("secp256k1")),QT}class vZe{constructor(t){nt(this,"curve","secp256k1"),nt(this,"privateKey",Ot(t)),zv(this.privateKey)!==32&&Ok.throwArgumentError("invalid private key","privateKey","[[ REDACTED ]]");const r=Sf().keyFromPrivate($t(this.privateKey));nt(this,"publicKey","0x"+r.getPublic(!1,"hex")),nt(this,"compressedPublicKey","0x"+r.getPublic(!0,"hex")),nt(this,"_isSigningKey",!0)}_addPoint(t){const r=Sf().keyFromPublic($t(this.publicKey)),i=Sf().keyFromPublic($t(t));return"0x"+r.pub.add(i.pub).encodeCompressed("hex")}signDigest(t){const r=Sf().keyFromPrivate($t(this.privateKey)),i=$t(t);i.length!==32&&Ok.throwArgumentError("bad digest length","digest",t);const n=r.sign(i,{canonical:!0});return $C({recoveryParam:n.recoveryParam,r:vn("0x"+n.r.toString(16),32),s:vn("0x"+n.s.toString(16),32)})}computeSharedSecret(t){const r=Sf().keyFromPrivate($t(this.privateKey)),i=Sf().keyFromPublic($t(g0e(t)));return vn("0x"+r.derive(i.getPublic()).toString(16),32)}static isSigningKey(t){return!!(t&&t._isSigningKey)}}function mZe(e,t){const r=$C(t),i={r:$t(r.r),s:$t(r.s)};return"0x"+Sf().recoverPubKey($t(e),i,r.recoveryParam).encode("hex",!1)}function g0e(e,t){const r=$t(e);return r.length===32?new vZe(r).publicKey:r.length===33?"0x"+Sf().keyFromPublic(r).getPublic(!1,"hex"):r.length===65?Ot(r):Ok.throwArgumentError("invalid public or private key","key","[REDACTED]")}const gZe="transactions/5.7.0",Fd=new Re(gZe);var YQ;(function(e){e[e.legacy=0]="legacy",e[e.eip2930=1]="eip2930",e[e.eip1559=2]="eip1559"})(YQ||(YQ={}));function uF(e){return e==="0x"?null:Za(e)}function ho(e){return e==="0x"?Dpe:pt.from(e)}function yZe(e){const t=g0e(e);return Za(lo(Zn(lo(t,1)),12))}function y0e(e,t){return yZe(mZe($t(e),t))}function Bs(e,t){const r=Y1(pt.from(e).toHexString());return r.length>32&&Fd.throwArgumentError("invalid length for "+t,"transaction:"+t,e),r}function KT(e,t){return{address:Za(e),storageKeys:(t||[]).map((r,i)=>(zv(r)!==32&&Fd.throwArgumentError("invalid access list storageKey",`accessList[${e}:${i}]`,r),r.toLowerCase()))}}function jy(e){if(Array.isArray(e))return e.map((r,i)=>Array.isArray(r)?(r.length>2&&Fd.throwArgumentError("access list expected to be [ address, storageKeys[] ]",`value[${i}]`,r),KT(r[0],r[1])):KT(r.address,r.storageKeys));const t=Object.keys(e).map(r=>{const i=e[r].reduce((n,a)=>(n[a]=!0,n),{});return KT(r,Object.keys(i).sort())});return t.sort((r,i)=>r.address.localeCompare(i.address)),t}function x0e(e){return jy(e).map(t=>[t.address,t.storageKeys])}function xZe(e,t){if(e.gasPrice!=null){const i=pt.from(e.gasPrice),n=pt.from(e.maxFeePerGas||0);i.eq(n)||Fd.throwArgumentError("mismatch EIP-1559 gasPrice != maxFeePerGas","tx",{gasPrice:i,maxFeePerGas:n})}const r=[Bs(e.chainId||0,"chainId"),Bs(e.nonce||0,"nonce"),Bs(e.maxPriorityFeePerGas||0,"maxPriorityFeePerGas"),Bs(e.maxFeePerGas||0,"maxFeePerGas"),Bs(e.gasLimit||0,"gasLimit"),e.to!=null?Za(e.to):"0x",Bs(e.value||0,"value"),e.data||"0x",x0e(e.accessList||[])];if(t){const i=$C(t);r.push(Bs(i.recoveryParam,"recoveryParam")),r.push(Y1(i.r)),r.push(Y1(i.s))}return vs(["0x02",e7(r)])}function bZe(e,t){const r=[Bs(e.chainId||0,"chainId"),Bs(e.nonce||0,"nonce"),Bs(e.gasPrice||0,"gasPrice"),Bs(e.gasLimit||0,"gasLimit"),e.to!=null?Za(e.to):"0x",Bs(e.value||0,"value"),e.data||"0x",x0e(e.accessList||[])];if(t){const i=$C(t);r.push(Bs(i.recoveryParam,"recoveryParam")),r.push(Y1(i.r)),r.push(Y1(i.s))}return vs(["0x01",e7(r)])}function b0e(e,t,r){try{const i=ho(t[0]).toNumber();if(i!==0&&i!==1)throw new Error("bad recid");e.v=i}catch{Fd.throwArgumentError("invalid v for transaction type: 1","v",t[0])}e.r=vn(t[1],32),e.s=vn(t[2],32);try{const i=Zn(r(e));e.from=y0e(i,{r:e.r,s:e.s,recoveryParam:e.v})}catch{}}function wZe(e){const t=iF(e.slice(1));t.length!==9&&t.length!==12&&Fd.throwArgumentError("invalid component count for transaction type: 2","payload",Ot(e));const r=ho(t[2]),i=ho(t[3]),n={type:2,chainId:ho(t[0]).toNumber(),nonce:ho(t[1]).toNumber(),maxPriorityFeePerGas:r,maxFeePerGas:i,gasPrice:null,gasLimit:ho(t[4]),to:uF(t[5]),value:ho(t[6]),data:t[7],accessList:jy(t[8])};return t.length===9||(n.hash=Zn(e),b0e(n,t.slice(9),xZe)),n}function _Ze(e){const t=iF(e.slice(1));t.length!==8&&t.length!==11&&Fd.throwArgumentError("invalid component count for transaction type: 1","payload",Ot(e));const r={type:1,chainId:ho(t[0]).toNumber(),nonce:ho(t[1]).toNumber(),gasPrice:ho(t[2]),gasLimit:ho(t[3]),to:uF(t[4]),value:ho(t[5]),data:t[6],accessList:jy(t[7])};return t.length===8||(r.hash=Zn(e),b0e(r,t.slice(8),bZe)),r}function AZe(e){const t=iF(e);t.length!==9&&t.length!==6&&Fd.throwArgumentError("invalid raw transaction","rawTransaction",e);const r={nonce:ho(t[0]).toNumber(),gasPrice:ho(t[1]),gasLimit:ho(t[2]),to:uF(t[3]),value:ho(t[4]),data:t[5],chainId:0};if(t.length===6)return r;try{r.v=pt.from(t[6]).toNumber()}catch{return r}if(r.r=vn(t[7],32),r.s=vn(t[8],32),pt.from(r.r).isZero()&&pt.from(r.s).isZero())r.chainId=r.v,r.v=0;else{r.chainId=Math.floor((r.v-35)/2),r.chainId<0&&(r.chainId=0);let i=r.v-27;const n=t.slice(0,6);r.chainId!==0&&(n.push(Ot(r.chainId)),n.push("0x"),n.push("0x"),i-=r.chainId*2+8);const a=Zn(e7(n));try{r.from=y0e(a,{r:Ot(r.r),s:Ot(r.s),recoveryParam:i})}catch{}r.hash=Zn(e)}return r.type=null,r}function SZe(e){const t=$t(e);if(t[0]>127)return AZe(t);switch(t[0]){case 1:return _Ze(t);case 2:return wZe(t)}return Fd.throwError(`unsupported transaction type: ${t[0]}`,Re.errors.UNSUPPORTED_OPERATION,{operation:"parseTransaction",transactionType:t[0]})}const CZe="contracts/5.7.0";var Gv=function(e,t,r,i){function n(a){return a instanceof r?a:new r(function(o){o(a)})}return new(r||(r=Promise))(function(a,o){function s(c){try{u(i.next(c))}catch(h){o(h)}}function l(c){try{u(i.throw(c))}catch(h){o(h)}}function u(c){c.done?a(c.value):n(c.value).then(s,l)}u((i=i.apply(e,t||[])).next())})};const bn=new Re(CZe);function ES(e,t){return Gv(this,void 0,void 0,function*(){const r=yield t;typeof r!="string"&&bn.throwArgumentError("invalid address or ENS name","name",r);try{return Za(r)}catch{}e||bn.throwError("a provider or signer is needed to resolve ENS names",Re.errors.UNSUPPORTED_OPERATION,{operation:"resolveName"});const i=yield e.resolveName(r);return i==null&&bn.throwArgumentError("resolver or addr is not configured for ENS name","name",r),i})}function OA(e,t,r){return Gv(this,void 0,void 0,function*(){return Array.isArray(r)?yield Promise.all(r.map((i,n)=>OA(e,Array.isArray(t)?t[n]:t[i.name],i))):r.type==="address"?yield ES(e,t):r.type==="tuple"?yield OA(e,t,r.components):r.baseType==="array"?Array.isArray(t)?yield Promise.all(t.map(i=>OA(e,i,r.arrayChildren))):Promise.reject(bn.makeError("invalid value for array",Re.errors.INVALID_ARGUMENT,{argument:"value",value:t})):t})}function a7(e,t,r){return Gv(this,void 0,void 0,function*(){let i={};r.length===t.inputs.length+1&&typeof r[r.length-1]=="object"&&(i=ta(r.pop())),bn.checkArgumentCount(r.length,t.inputs.length,"passed to contract"),e.signer?i.from?i.from=Dn({override:ES(e.signer,i.from),signer:e.signer.getAddress()}).then(u=>Gv(this,void 0,void 0,function*(){return Za(u.signer)!==u.override&&bn.throwError("Contract with a Signer cannot override from",Re.errors.UNSUPPORTED_OPERATION,{operation:"overrides.from"}),u.override})):i.from=e.signer.getAddress():i.from&&(i.from=ES(e.provider,i.from));const n=yield Dn({args:OA(e.signer||e.provider,r,t.inputs),address:e.resolvedAddress,overrides:Dn(i)||{}}),a=e.interface.encodeFunctionData(t,n.args),o={data:a,to:n.address},s=n.overrides;if(s.nonce!=null&&(o.nonce=pt.from(s.nonce).toNumber()),s.gasLimit!=null&&(o.gasLimit=pt.from(s.gasLimit)),s.gasPrice!=null&&(o.gasPrice=pt.from(s.gasPrice)),s.maxFeePerGas!=null&&(o.maxFeePerGas=pt.from(s.maxFeePerGas)),s.maxPriorityFeePerGas!=null&&(o.maxPriorityFeePerGas=pt.from(s.maxPriorityFeePerGas)),s.from!=null&&(o.from=s.from),s.type!=null&&(o.type=s.type),s.accessList!=null&&(o.accessList=jy(s.accessList)),o.gasLimit==null&&t.gas!=null){let u=21e3;const c=$t(a);for(let h=0;h<c.length;h++)u+=4,c[h]&&(u+=64);o.gasLimit=pt.from(t.gas).add(u)}if(s.value){const u=pt.from(s.value);!u.isZero()&&!t.payable&&bn.throwError("non-payable method cannot override value",Re.errors.UNSUPPORTED_OPERATION,{operation:"overrides.value",value:i.value}),o.value=u}s.customData&&(o.customData=ta(s.customData)),s.ccipReadEnabled&&(o.ccipReadEnabled=!!s.ccipReadEnabled),delete i.nonce,delete i.gasLimit,delete i.gasPrice,delete i.from,delete i.value,delete i.type,delete i.accessList,delete i.maxFeePerGas,delete i.maxPriorityFeePerGas,delete i.customData,delete i.ccipReadEnabled;const l=Object.keys(i).filter(u=>i[u]!=null);return l.length&&bn.throwError(`cannot override ${l.map(u=>JSON.stringify(u)).join(",")}`,Re.errors.UNSUPPORTED_OPERATION,{operation:"overrides",overrides:l}),o})}function EZe(e,t){return function(...r){return a7(e,t,r)}}function MZe(e,t){const r=e.signer||e.provider;return function(...i){return Gv(this,void 0,void 0,function*(){r||bn.throwError("estimate require a provider or signer",Re.errors.UNSUPPORTED_OPERATION,{operation:"estimateGas"});const n=yield a7(e,t,i);return yield r.estimateGas(n)})}}function TZe(e,t){const r=t.wait.bind(t);t.wait=i=>r(i).then(n=>(n.events=n.logs.map(a=>{let o=_d(a),s=null;try{s=e.interface.parseLog(a)}catch{}return s&&(o.args=s.args,o.decode=(l,u)=>e.interface.decodeEventLog(s.eventFragment,l,u),o.event=s.name,o.eventSignature=s.signature),o.removeListener=()=>e.provider,o.getBlock=()=>e.provider.getBlock(n.blockHash),o.getTransaction=()=>e.provider.getTransaction(n.transactionHash),o.getTransactionReceipt=()=>Promise.resolve(n),o}),n))}function w0e(e,t,r){const i=e.signer||e.provider;return function(...n){return Gv(this,void 0,void 0,function*(){let a;if(n.length===t.inputs.length+1&&typeof n[n.length-1]=="object"){const l=ta(n.pop());l.blockTag!=null&&(a=yield l.blockTag),delete l.blockTag,n.push(l)}e.deployTransaction!=null&&(yield e._deployed(a));const o=yield a7(e,t,n),s=yield i.call(o,a);try{let l=e.interface.decodeFunctionResult(t,s);return r&&t.outputs.length===1&&(l=l[0]),l}catch(l){throw l.code===Re.errors.CALL_EXCEPTION&&(l.address=e.address,l.args=n,l.transaction=o),l}})}}function PZe(e,t){return function(...r){return Gv(this,void 0,void 0,function*(){e.signer||bn.throwError("sending a transaction requires a signer",Re.errors.UNSUPPORTED_OPERATION,{operation:"sendTransaction"}),e.deployTransaction!=null&&(yield e._deployed());const i=yield a7(e,t,r),n=yield e.signer.sendTransaction(i);return TZe(e,n),n})}}function XQ(e,t,r){return t.constant?w0e(e,t,r):PZe(e,t)}function _0e(e){return e.address&&(e.topics==null||e.topics.length===0)?"*":(e.address||"*")+"@"+(e.topics?e.topics.map(t=>Array.isArray(t)?t.join("|"):t).join(":"):"")}class Ew{constructor(t,r){nt(this,"tag",t),nt(this,"filter",r),this._listeners=[]}addListener(t,r){this._listeners.push({listener:t,once:r})}removeListener(t){let r=!1;this._listeners=this._listeners.filter(i=>r||i.listener!==t?!0:(r=!0,!1))}removeAllListeners(){this._listeners=[]}listeners(){return this._listeners.map(t=>t.listener)}listenerCount(){return this._listeners.length}run(t){const r=this.listenerCount();return this._listeners=this._listeners.filter(i=>{const n=t.slice();return setTimeout(()=>{i.listener.apply(this,n)},0),!i.once}),r}prepareEvent(t){}getEmit(t){return[t]}}class DZe extends Ew{constructor(){super("error",null)}}class ZQ extends Ew{constructor(t,r,i,n){const a={address:t};let o=r.getEventTopic(i);n?(o!==n[0]&&bn.throwArgumentError("topic mismatch","topics",n),a.topics=n.slice()):a.topics=[o],super(_0e(a),a),nt(this,"address",t),nt(this,"interface",r),nt(this,"fragment",i)}prepareEvent(t){super.prepareEvent(t),t.event=this.fragment.name,t.eventSignature=this.fragment.format(),t.decode=(r,i)=>this.interface.decodeEventLog(this.fragment,r,i);try{t.args=this.interface.decodeEventLog(this.fragment,t.data,t.topics)}catch(r){t.args=null,t.decodeError=r}}getEmit(t){const r=dqe(t.args);if(r.length)throw r[0].error;const i=(t.args||[]).slice();return i.push(t),i}}class QQ extends Ew{constructor(t,r){super("*",{address:t}),nt(this,"address",t),nt(this,"interface",r)}prepareEvent(t){super.prepareEvent(t);try{const r=this.interface.parseLog(t);t.event=r.name,t.eventSignature=r.signature,t.decode=(i,n)=>this.interface.decodeEventLog(r.eventFragment,i,n),t.args=r.args}catch{}}}class IZe{constructor(t,r,i){nt(this,"interface",kc(new.target,"getInterface")(r)),i==null?(nt(this,"provider",null),nt(this,"signer",null)):R4.isSigner(i)?(nt(this,"provider",i.provider||null),nt(this,"signer",i)):Ype.isProvider(i)?(nt(this,"provider",i),nt(this,"signer",null)):bn.throwArgumentError("invalid signer or provider","signerOrProvider",i),nt(this,"callStatic",{}),nt(this,"estimateGas",{}),nt(this,"functions",{}),nt(this,"populateTransaction",{}),nt(this,"filters",{});{const o={};Object.keys(this.interface.events).forEach(s=>{const l=this.interface.events[s];nt(this.filters,s,(...u)=>({address:this.address,topics:this.interface.encodeFilterTopics(l,u)})),o[l.name]||(o[l.name]=[]),o[l.name].push(s)}),Object.keys(o).forEach(s=>{const l=o[s];l.length===1?nt(this.filters,s,this.filters[l[0]]):bn.warn(`Duplicate definition of ${s} (${l.join(", ")})`)})}if(nt(this,"_runningEvents",{}),nt(this,"_wrappedEmits",{}),t==null&&bn.throwArgumentError("invalid contract address or ENS name","addressOrName",t),nt(this,"address",t),this.provider)nt(this,"resolvedAddress",ES(this.provider,t));else try{nt(this,"resolvedAddress",Promise.resolve(Za(t)))}catch{bn.throwError("provider is required to use ENS name as contract address",Re.errors.UNSUPPORTED_OPERATION,{operation:"new Contract"})}this.resolvedAddress.catch(o=>{});const n={},a={};Object.keys(this.interface.functions).forEach(o=>{const s=this.interface.functions[o];if(a[o]){bn.warn(`Duplicate ABI entry for ${JSON.stringify(o)}`);return}a[o]=!0;{const l=s.name;n[`%${l}`]||(n[`%${l}`]=[]),n[`%${l}`].push(o)}this[o]==null&&nt(this,o,XQ(this,s,!0)),this.functions[o]==null&&nt(this.functions,o,XQ(this,s,!1)),this.callStatic[o]==null&&nt(this.callStatic,o,w0e(this,s,!0)),this.populateTransaction[o]==null&&nt(this.populateTransaction,o,EZe(this,s)),this.estimateGas[o]==null&&nt(this.estimateGas,o,MZe(this,s))}),Object.keys(n).forEach(o=>{const s=n[o];if(s.length>1)return;o=o.substring(1);const l=s[0];try{this[o]==null&&nt(this,o,this[l])}catch{}this.functions[o]==null&&nt(this.functions,o,this.functions[l]),this.callStatic[o]==null&&nt(this.callStatic,o,this.callStatic[l]),this.populateTransaction[o]==null&&nt(this.populateTransaction,o,this.populateTransaction[l]),this.estimateGas[o]==null&&nt(this.estimateGas,o,this.estimateGas[l])})}static getContractAddress(t){return Epe(t)}static getInterface(t){return HQ.isInterface(t)?t:new HQ(t)}deployed(){return this._deployed()}_deployed(t){return this._deployedPromise||(this.deployTransaction?this._deployedPromise=this.deployTransaction.wait().then(()=>this):this._deployedPromise=this.provider.getCode(this.address,t).then(r=>(r==="0x"&&bn.throwError("contract not deployed",Re.errors.UNSUPPORTED_OPERATION,{contractAddress:this.address,operation:"getDeployed"}),this))),this._deployedPromise}fallback(t){this.signer||bn.throwError("sending a transactions require a signer",Re.errors.UNSUPPORTED_OPERATION,{operation:"sendTransaction(fallback)"});const r=ta(t||{});return["from","to"].forEach(function(i){r[i]!=null&&bn.throwError("cannot override "+i,Re.errors.UNSUPPORTED_OPERATION,{operation:i})}),r.to=this.resolvedAddress,this.deployed().then(()=>this.signer.sendTransaction(r))}connect(t){typeof t=="string"&&(t=new aF(t,this.provider));const r=new this.constructor(this.address,this.interface,t);return this.deployTransaction&&nt(r,"deployTransaction",this.deployTransaction),r}attach(t){return new this.constructor(t,this.interface,this.signer||this.provider)}static isIndexed(t){return Dk.isIndexed(t)}_normalizeRunningEvent(t){return this._runningEvents[t.tag]?this._runningEvents[t.tag]:t}_getRunningEvent(t){if(typeof t=="string"){if(t==="error")return this._normalizeRunningEvent(new DZe);if(t==="event")return this._normalizeRunningEvent(new Ew("event",null));if(t==="*")return this._normalizeRunningEvent(new QQ(this.address,this.interface));const r=this.interface.getEvent(t);return this._normalizeRunningEvent(new ZQ(this.address,this.interface,r))}if(t.topics&&t.topics.length>0){try{const i=t.topics[0];if(typeof i!="string")throw new Error("invalid topic");const n=this.interface.getEvent(i);return this._normalizeRunningEvent(new ZQ(this.address,this.interface,n,t.topics))}catch{}const r={address:this.address,topics:t.topics};return this._normalizeRunningEvent(new Ew(_0e(r),r))}return this._normalizeRunningEvent(new QQ(this.address,this.interface))}_checkRunningEvents(t){if(t.listenerCount()===0){delete this._runningEvents[t.tag];const r=this._wrappedEmits[t.tag];r&&t.filter&&(this.provider.off(t.filter,r),delete this._wrappedEmits[t.tag])}}_wrapEvent(t,r,i){const n=_d(r);return n.removeListener=()=>{i&&(t.removeListener(i),this._checkRunningEvents(t))},n.getBlock=()=>this.provider.getBlock(r.blockHash),n.getTransaction=()=>this.provider.getTransaction(r.transactionHash),n.getTransactionReceipt=()=>this.provider.getTransactionReceipt(r.transactionHash),t.prepareEvent(n),n}_addEventListener(t,r,i){if(this.provider||bn.throwError("events require a provider or a signer with a provider",Re.errors.UNSUPPORTED_OPERATION,{operation:"once"}),t.addListener(r,i),this._runningEvents[t.tag]=t,!this._wrappedEmits[t.tag]){const n=a=>{let o=this._wrapEvent(t,a,r);if(o.decodeError==null)try{const s=t.getEmit(o);this.emit(t.filter,...s)}catch(s){o.decodeError=s.error}t.filter!=null&&this.emit("event",o),o.decodeError!=null&&this.emit("error",o.decodeError,o)};this._wrappedEmits[t.tag]=n,t.filter!=null&&this.provider.on(t.filter,n)}}queryFilter(t,r,i){const n=this._getRunningEvent(t),a=ta(n.filter);return typeof r=="string"&&gi(r,32)?(i!=null&&bn.throwArgumentError("cannot specify toBlock with blockhash","toBlock",i),a.blockHash=r):(a.fromBlock=r??0,a.toBlock=i??"latest"),this.provider.getLogs(a).then(o=>o.map(s=>this._wrapEvent(n,s,null)))}on(t,r){return this._addEventListener(this._getRunningEvent(t),r,!1),this}once(t,r){return this._addEventListener(this._getRunningEvent(t),r,!0),this}emit(t,...r){if(!this.provider)return!1;const i=this._getRunningEvent(t),n=i.run(r)>0;return this._checkRunningEvents(i),n}listenerCount(t){return this.provider?t==null?Object.keys(this._runningEvents).reduce((r,i)=>r+this._runningEvents[i].listenerCount(),0):this._getRunningEvent(t).listenerCount():0}listeners(t){if(!this.provider)return[];if(t==null){const r=[];for(let i in this._runningEvents)this._runningEvents[i].listeners().forEach(n=>{r.push(n)});return r}return this._getRunningEvent(t).listeners()}removeAllListeners(t){if(!this.provider)return this;if(t==null){for(const i in this._runningEvents){const n=this._runningEvents[i];n.removeAllListeners(),this._checkRunningEvents(n)}return this}const r=this._getRunningEvent(t);return r.removeAllListeners(),this._checkRunningEvents(r),this}off(t,r){if(!this.provider)return this;const i=this._getRunningEvent(t);return i.removeListener(r),this._checkRunningEvents(i),this}removeListener(t,r){return this.off(t,r)}}class LZe extends IZe{}class A0e{constructor(t){nt(this,"alphabet",t),nt(this,"base",t.length),nt(this,"_alphabetMap",{}),nt(this,"_leader",t.charAt(0));for(let r=0;r<t.length;r++)this._alphabetMap[t.charAt(r)]=r}encode(t){let r=$t(t);if(r.length===0)return"";let i=[0];for(let a=0;a<r.length;++a){let o=r[a];for(let s=0;s<i.length;++s)o+=i[s]<<8,i[s]=o%this.base,o=o/this.base|0;for(;o>0;)i.push(o%this.base),o=o/this.base|0}let n="";for(let a=0;r[a]===0&&a<r.length-1;++a)n+=this._leader;for(let a=i.length-1;a>=0;--a)n+=this.alphabet[i[a]];return n}decode(t){if(typeof t!="string")throw new TypeError("Expected String");let r=[];if(t.length===0)return new Uint8Array(r);r.push(0);for(let i=0;i<t.length;i++){let n=this._alphabetMap[t[i]];if(n===void 0)throw new Error("Non-base"+this.base+" character");let a=n;for(let o=0;o<r.length;++o)a+=r[o]*this.base,r[o]=a&255,a>>=8;for(;a>0;)r.push(a&255),a>>=8}for(let i=0;t[i]===this._leader&&i<t.length-1;++i)r.push(0);return $t(new Uint8Array(r.reverse()))}}new A0e("abcdefghijklmnopqrstuvwxyz234567");const Bk=new A0e("123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz");function KQ(e){return"0x"+dc.sha256().update($t(e)).digest("hex")}const kZe="networks/5.7.1",JQ=new Re(kZe);function RZe(e){return e&&typeof e.renetwork=="function"}function zh(e){const t=function(r,i){i==null&&(i={});const n=[];if(r.InfuraProvider&&i.infura!=="-")try{n.push(new r.InfuraProvider(e,i.infura))}catch{}if(r.EtherscanProvider&&i.etherscan!=="-")try{n.push(new r.EtherscanProvider(e,i.etherscan))}catch{}if(r.AlchemyProvider&&i.alchemy!=="-")try{n.push(new r.AlchemyProvider(e,i.alchemy))}catch{}if(r.PocketProvider&&i.pocket!=="-"){const a=["goerli","ropsten","rinkeby","sepolia"];try{const o=new r.PocketProvider(e,i.pocket);o.network&&a.indexOf(o.network.name)===-1&&n.push(o)}catch{}}if(r.CloudflareProvider&&i.cloudflare!=="-")try{n.push(new r.CloudflareProvider(e))}catch{}if(r.AnkrProvider&&i.ankr!=="-")try{const a=["ropsten"],o=new r.AnkrProvider(e,i.ankr);o.network&&a.indexOf(o.network.name)===-1&&n.push(o)}catch{}if(n.length===0)return null;if(r.FallbackProvider){let a=1;return i.quorum!=null?a=i.quorum:e==="homestead"&&(a=2),new r.FallbackProvider(n,a)}return n[0]};return t.renetwork=function(r){return zh(r)},t}function MS(e,t){const r=function(i,n){return i.JsonRpcProvider?new i.JsonRpcProvider(e,t):null};return r.renetwork=function(i){return MS(e,i)},r}const $Q={chainId:1,ensAddress:"0x00000000000C2E074eC69A0dFb2997BA6C7d2e1e",name:"homestead",_defaultProvider:zh("homestead")},eK={chainId:3,ensAddress:"0x00000000000C2E074eC69A0dFb2997BA6C7d2e1e",name:"ropsten",_defaultProvider:zh("ropsten")},tK={chainId:63,name:"classicMordor",_defaultProvider:MS("https://www.ethercluster.com/mordor","classicMordor")},x_={unspecified:{chainId:0,name:"unspecified"},homestead:$Q,mainnet:$Q,morden:{chainId:2,name:"morden"},ropsten:eK,testnet:eK,rinkeby:{chainId:4,ensAddress:"0x00000000000C2E074eC69A0dFb2997BA6C7d2e1e",name:"rinkeby",_defaultProvider:zh("rinkeby")},kovan:{chainId:42,name:"kovan",_defaultProvider:zh("kovan")},goerli:{chainId:5,ensAddress:"0x00000000000C2E074eC69A0dFb2997BA6C7d2e1e",name:"goerli",_defaultProvider:zh("goerli")},kintsugi:{chainId:1337702,name:"kintsugi"},sepolia:{chainId:11155111,name:"sepolia",_defaultProvider:zh("sepolia")},classic:{chainId:61,name:"classic",_defaultProvider:MS("https://www.ethercluster.com/etc","classic")},classicMorden:{chainId:62,name:"classicMorden"},classicMordor:tK,classicTestnet:tK,classicKotti:{chainId:6,name:"classicKotti",_defaultProvider:MS("https://www.ethercluster.com/kotti","classicKotti")},xdai:{chainId:100,name:"xdai"},matic:{chainId:137,name:"matic",_defaultProvider:zh("matic")},maticmum:{chainId:80001,name:"maticmum"},optimism:{chainId:10,name:"optimism",_defaultProvider:zh("optimism")},"optimism-kovan":{chainId:69,name:"optimism-kovan"},"optimism-goerli":{chainId:420,name:"optimism-goerli"},arbitrum:{chainId:42161,name:"arbitrum"},"arbitrum-rinkeby":{chainId:421611,name:"arbitrum-rinkeby"},"arbitrum-goerli":{chainId:421613,name:"arbitrum-goerli"},bnb:{chainId:56,name:"bnb"},bnbt:{chainId:97,name:"bnbt"}};function OZe(e){if(e==null)return null;if(typeof e=="number"){for(const i in x_){const n=x_[i];if(n.chainId===e)return{name:n.name,chainId:n.chainId,ensAddress:n.ensAddress||null,_defaultProvider:n._defaultProvider||null}}return{chainId:e,name:"unknown"}}if(typeof e=="string"){const i=x_[e];return i==null?null:{name:i.name,chainId:i.chainId,ensAddress:i.ensAddress,_defaultProvider:i._defaultProvider||null}}const t=x_[e.name];if(!t)return typeof e.chainId!="number"&&JQ.throwArgumentError("invalid network chainId","network",e),e;e.chainId!==0&&e.chainId!==t.chainId&&JQ.throwArgumentError("network chainId mismatch","network",e);let r=e._defaultProvider||null;return r==null&&t._defaultProvider&&(RZe(t._defaultProvider)?r=t._defaultProvider.renetwork(e):r=t._defaultProvider),{name:e.name,chainId:t.chainId,ensAddress:e.ensAddress||t.ensAddress||null,_defaultProvider:r}}const BZe="web/5.7.1";var NZe=function(e,t,r,i){function n(a){return a instanceof r?a:new r(function(o){o(a)})}return new(r||(r=Promise))(function(a,o){function s(c){try{u(i.next(c))}catch(h){o(h)}}function l(c){try{u(i.throw(c))}catch(h){o(h)}}function u(c){c.done?a(c.value):n(c.value).then(s,l)}u((i=i.apply(e,t||[])).next())})};function VZe(e,t){return NZe(this,void 0,void 0,function*(){t==null&&(t={});const r={method:t.method||"GET",headers:t.headers||{},body:t.body||void 0};if(t.skipFetchSetup!==!0&&(r.mode="cors",r.cache="no-cache",r.credentials="same-origin",r.redirect="follow",r.referrer="client"),t.fetchOptions!=null){const o=t.fetchOptions;o.mode&&(r.mode=o.mode),o.cache&&(r.cache=o.cache),o.credentials&&(r.credentials=o.credentials),o.redirect&&(r.redirect=o.redirect),o.referrer&&(r.referrer=o.referrer)}const i=yield fetch(e,r),n=yield i.arrayBuffer(),a={};return i.headers.forEach?i.headers.forEach((o,s)=>{a[s.toLowerCase()]=o}):i.headers.keys().forEach(o=>{a[o.toLowerCase()]=i.headers.get(o)}),{headers:a,statusCode:i.status,statusMessage:i.statusText,body:$t(new Uint8Array(n))}})}var FZe=function(e,t,r,i){function n(a){return a instanceof r?a:new r(function(o){o(a)})}return new(r||(r=Promise))(function(a,o){function s(c){try{u(i.next(c))}catch(h){o(h)}}function l(c){try{u(i.throw(c))}catch(h){o(h)}}function u(c){c.done?a(c.value):n(c.value).then(s,l)}u((i=i.apply(e,t||[])).next())})};const au=new Re(BZe);function rK(e){return new Promise(t=>{setTimeout(t,e)})}function ef(e,t){if(e==null)return null;if(typeof e=="string")return e;if(eF(e)){if(t&&(t.split("/")[0]==="text"||t.split(";")[0].trim()==="application/json"))try{return k4(e)}catch{}return Ot(e)}return e}function zZe(e){return eh(e.replace(/%([0-9a-f][0-9a-f])/gi,(t,r)=>String.fromCharCode(parseInt(r,16))))}function HZe(e,t,r){const i=typeof e=="object"&&e.throttleLimit!=null?e.throttleLimit:12;au.assertArgument(i>0&&i%1===0,"invalid connection throttle limit","connection.throttleLimit",i);const n=typeof e=="object"?e.throttleCallback:null,a=typeof e=="object"&&typeof e.throttleSlotInterval=="number"?e.throttleSlotInterval:100;au.assertArgument(a>0&&a%1===0,"invalid connection throttle slot interval","connection.throttleSlotInterval",a);const o=typeof e=="object"?!!e.errorPassThrough:!1,s={};let l=null;const u={method:"GET"};let c=!1,h=2*60*1e3;if(typeof e=="string")l=e;else if(typeof e=="object"){if((e==null||e.url==null)&&au.throwArgumentError("missing URL","connection.url",e),l=e.url,typeof e.timeout=="number"&&e.timeout>0&&(h=e.timeout),e.headers)for(const g in e.headers)s[g.toLowerCase()]={key:g,value:String(e.headers[g])},["if-none-match","if-modified-since"].indexOf(g.toLowerCase())>=0&&(c=!0);if(u.allowGzip=!!e.allowGzip,e.user!=null&&e.password!=null){l.substring(0,6)!=="https:"&&e.allowInsecureAuthentication!==!0&&au.throwError("basic authentication requires a secure https url",Re.errors.INVALID_ARGUMENT,{argument:"url",url:l,user:e.user,password:"[REDACTED]"});const g=e.user+":"+e.password;s.authorization={key:"Authorization",value:"Basic "+Npe(eh(g))}}e.skipFetchSetup!=null&&(u.skipFetchSetup=!!e.skipFetchSetup),e.fetchOptions!=null&&(u.fetchOptions=ta(e.fetchOptions))}const d=new RegExp("^data:([^;:]*)?(;base64)?,(.*)$","i"),f=l?l.match(d):null;if(f)try{const g={statusCode:200,statusMessage:"OK",headers:{"content-type":f[1]||"text/plain"},body:f[2]?Bpe(f[3]):zZe(f[3])};let y=g.body;return r&&(y=r(g.body,g)),Promise.resolve(y)}catch(g){au.throwError("processing response error",Re.errors.SERVER_ERROR,{body:ef(f[1],f[2]),error:g,requestBody:null,requestMethod:"GET",url:l})}t&&(u.method="POST",u.body=t,s["content-type"]==null&&(s["content-type"]={key:"Content-Type",value:"application/octet-stream"}),s["content-length"]==null&&(s["content-length"]={key:"Content-Length",value:String(t.length)}));const p={};Object.keys(s).forEach(g=>{const y=s[g];p[y.key]=y.value}),u.headers=p;const v=function(){let g=null;return{promise:new Promise(function(b,_){h&&(g=setTimeout(()=>{g!=null&&(g=null,_(au.makeError("timeout",Re.errors.TIMEOUT,{requestBody:ef(u.body,p["content-type"]),requestMethod:u.method,timeout:h,url:l})))},h))}),cancel:function(){g!=null&&(clearTimeout(g),g=null)}}}(),m=function(){return FZe(this,void 0,void 0,function*(){for(let g=0;g<i;g++){let y=null;try{if(y=yield VZe(l,u),g<i){if(y.statusCode===301||y.statusCode===302){const b=y.headers.location||"";if(u.method==="GET"&&b.match(/^https:/)){l=y.headers.location;continue}}else if(y.statusCode===429){let b=!0;if(n&&(b=yield n(g,l)),b){let _=0;const w=y.headers["retry-after"];typeof w=="string"&&w.match(/^[1-9][0-9]*$/)?_=parseInt(w)*1e3:_=a*parseInt(String(Math.random()*Math.pow(2,g))),yield rK(_);continue}}}}catch(b){y=b.response,y==null&&(v.cancel(),au.throwError("missing response",Re.errors.SERVER_ERROR,{requestBody:ef(u.body,p["content-type"]),requestMethod:u.method,serverError:b,url:l}))}let x=y.body;if(c&&y.statusCode===304?x=null:!o&&(y.statusCode<200||y.statusCode>=300)&&(v.cancel(),au.throwError("bad response",Re.errors.SERVER_ERROR,{status:y.statusCode,headers:y.headers,body:ef(x,y.headers?y.headers["content-type"]:null),requestBody:ef(u.body,p["content-type"]),requestMethod:u.method,url:l})),r)try{const b=yield r(x,y);return v.cancel(),b}catch(b){if(b.throttleRetry&&g<i){let _=!0;if(n&&(_=yield n(g,l)),_){const w=a*parseInt(String(Math.random()*Math.pow(2,g)));yield rK(w);continue}}v.cancel(),au.throwError("processing response error",Re.errors.SERVER_ERROR,{body:ef(x,y.headers?y.headers["content-type"]:null),error:b,requestBody:ef(u.body,p["content-type"]),requestMethod:u.method,url:l})}return v.cancel(),x}return au.throwError("failed response",Re.errors.SERVER_ERROR,{requestBody:ef(u.body,p["content-type"]),requestMethod:u.method,url:l})})}();return Promise.race([v.promise,m])}function cF(e,t,r){let i=(a,o)=>{let s=null;if(a!=null)try{s=JSON.parse(k4(a))}catch(l){au.throwError("invalid JSON",Re.errors.SERVER_ERROR,{body:a,error:l})}return r&&(s=r(s,o)),s},n=null;if(t!=null){n=eh(t);const a=typeof e=="string"?{url:e}:ta(e);a.headers?Object.keys(a.headers).filter(s=>s.toLowerCase()==="content-type").length!==0||(a.headers=ta(a.headers),a.headers["content-type"]="application/json"):a.headers={"content-type":"application/json"},e=a}return HZe(e,n,i)}function zx(e,t){return t||(t={}),t=ta(t),t.floor==null&&(t.floor=0),t.ceiling==null&&(t.ceiling=1e4),t.interval==null&&(t.interval=250),new Promise(function(r,i){let n=null,a=!1;const o=()=>a?!1:(a=!0,n&&clearTimeout(n),!0);t.timeout&&(n=setTimeout(()=>{o()&&i(new Error("timeout"))},t.timeout));const s=t.retryLimit;let l=0;function u(){return e().then(function(c){if(c!==void 0)o()&&r(c);else if(t.oncePoll)t.oncePoll.once("poll",u);else if(t.onceBlock)t.onceBlock.once("block",u);else if(!a){if(l++,l>s){o()&&i(new Error("retry limit reached"));return}let h=t.interval*parseInt(String(Math.random()*Math.pow(2,l)));h<t.floor&&(h=t.floor),h>t.ceiling&&(h=t.ceiling),setTimeout(u,h)}return null},function(c){o()&&i(c)})}u()})}var TS="qpzry9x8gf2tvdw0s3jn54khce6mua7l",Nk={};for(var b_=0;b_<TS.length;b_++){var JT=TS.charAt(b_);if(Nk[JT]!==void 0)throw new TypeError(JT+" is ambiguous");Nk[JT]=b_}function v1(e){var t=e>>25;return(e&33554431)<<5^-(t>>0&1)&996825010^-(t>>1&1)&642813549^-(t>>2&1)&513874426^-(t>>3&1)&1027748829^-(t>>4&1)&705979059}function S0e(e){for(var t=1,r=0;r<e.length;++r){var i=e.charCodeAt(r);if(i<33||i>126)return"Invalid prefix ("+e+")";t=v1(t)^i>>5}for(t=v1(t),r=0;r<e.length;++r){var n=e.charCodeAt(r);t=v1(t)^n&31}return t}function UZe(e,t,r){if(r=r||90,e.length+7+t.length>r)throw new TypeError("Exceeds length limit");e=e.toLowerCase();var i=S0e(e);if(typeof i=="string")throw new Error(i);for(var n=e+"1",a=0;a<t.length;++a){var o=t[a];if(o>>5)throw new Error("Non 5-bit word");i=v1(i)^o,n+=TS.charAt(o)}for(a=0;a<6;++a)i=v1(i);for(i^=1,a=0;a<6;++a){var s=i>>(5-a)*5&31;n+=TS.charAt(s)}return n}function C0e(e,t){if(t=t||90,e.length<8)return e+" too short";if(e.length>t)return"Exceeds length limit";var r=e.toLowerCase(),i=e.toUpperCase();if(e!==r&&e!==i)return"Mixed-case string "+e;e=r;var n=e.lastIndexOf("1");if(n===-1)return"No separator character for "+e;if(n===0)return"Missing prefix for "+e;var a=e.slice(0,n),o=e.slice(n+1);if(o.length<6)return"Data too short";var s=S0e(a);if(typeof s=="string")return s;for(var l=[],u=0;u<o.length;++u){var c=o.charAt(u),h=Nk[c];if(h===void 0)return"Unknown character "+c;s=v1(s)^h,!(u+6>=o.length)&&l.push(h)}return s!==1?"Invalid checksum for "+e:{prefix:a,words:l}}function GZe(){var e=C0e.apply(null,arguments);if(typeof e=="object")return e}function jZe(e){var t=C0e.apply(null,arguments);if(typeof t=="object")return t;throw new Error(t)}function o7(e,t,r,i){for(var n=0,a=0,o=(1<<r)-1,s=[],l=0;l<e.length;++l)for(n=n<<t|e[l],a+=t;a>=r;)a-=r,s.push(n>>a&o);if(i)a>0&&s.push(n<<r-a&o);else{if(a>=t)return"Excess padding";if(n<<r-a&o)return"Non-zero padding"}return s}function WZe(e){var t=o7(e,8,5,!0);if(Array.isArray(t))return t}function qZe(e){var t=o7(e,8,5,!0);if(Array.isArray(t))return t;throw new Error(t)}function YZe(e){var t=o7(e,5,8,!1);if(Array.isArray(t))return t}function XZe(e){var t=o7(e,5,8,!1);if(Array.isArray(t))return t;throw new Error(t)}var ZZe={decodeUnsafe:GZe,decode:jZe,encode:UZe,toWordsUnsafe:WZe,toWords:qZe,fromWordsUnsafe:YZe,fromWords:XZe};const iK=D4(ZZe),s7="providers/5.7.2",q2=new Re(s7);class Mt{constructor(){this.formats=this.getDefaultFormats()}getDefaultFormats(){const t={},r=this.address.bind(this),i=this.bigNumber.bind(this),n=this.blockTag.bind(this),a=this.data.bind(this),o=this.hash.bind(this),s=this.hex.bind(this),l=this.number.bind(this),u=this.type.bind(this),c=h=>this.data(h,!0);return t.transaction={hash:o,type:u,accessList:Mt.allowNull(this.accessList.bind(this),null),blockHash:Mt.allowNull(o,null),blockNumber:Mt.allowNull(l,null),transactionIndex:Mt.allowNull(l,null),confirmations:Mt.allowNull(l,null),from:r,gasPrice:Mt.allowNull(i),maxPriorityFeePerGas:Mt.allowNull(i),maxFeePerGas:Mt.allowNull(i),gasLimit:i,to:Mt.allowNull(r,null),value:i,nonce:l,data:a,r:Mt.allowNull(this.uint256),s:Mt.allowNull(this.uint256),v:Mt.allowNull(l),creates:Mt.allowNull(r,null),raw:Mt.allowNull(a)},t.transactionRequest={from:Mt.allowNull(r),nonce:Mt.allowNull(l),gasLimit:Mt.allowNull(i),gasPrice:Mt.allowNull(i),maxPriorityFeePerGas:Mt.allowNull(i),maxFeePerGas:Mt.allowNull(i),to:Mt.allowNull(r),value:Mt.allowNull(i),data:Mt.allowNull(c),type:Mt.allowNull(l),accessList:Mt.allowNull(this.accessList.bind(this),null)},t.receiptLog={transactionIndex:l,blockNumber:l,transactionHash:o,address:r,topics:Mt.arrayOf(o),data:a,logIndex:l,blockHash:o},t.receipt={to:Mt.allowNull(this.address,null),from:Mt.allowNull(this.address,null),contractAddress:Mt.allowNull(r,null),transactionIndex:l,root:Mt.allowNull(s),gasUsed:i,logsBloom:Mt.allowNull(a),blockHash:o,transactionHash:o,logs:Mt.arrayOf(this.receiptLog.bind(this)),blockNumber:l,confirmations:Mt.allowNull(l,null),cumulativeGasUsed:i,effectiveGasPrice:Mt.allowNull(i),status:Mt.allowNull(l),type:u},t.block={hash:Mt.allowNull(o),parentHash:o,number:l,timestamp:l,nonce:Mt.allowNull(s),difficulty:this.difficulty.bind(this),gasLimit:i,gasUsed:i,miner:Mt.allowNull(r),extraData:a,transactions:Mt.allowNull(Mt.arrayOf(o)),baseFeePerGas:Mt.allowNull(i)},t.blockWithTransactions=ta(t.block),t.blockWithTransactions.transactions=Mt.allowNull(Mt.arrayOf(this.transactionResponse.bind(this))),t.filter={fromBlock:Mt.allowNull(n,void 0),toBlock:Mt.allowNull(n,void 0),blockHash:Mt.allowNull(o,void 0),address:Mt.allowNull(r,void 0),topics:Mt.allowNull(this.topics.bind(this),void 0)},t.filterLog={blockNumber:Mt.allowNull(l),blockHash:Mt.allowNull(o),transactionIndex:l,removed:Mt.allowNull(this.boolean.bind(this)),address:r,data:Mt.allowFalsish(a,"0x"),topics:Mt.arrayOf(o),transactionHash:o,logIndex:l},t}accessList(t){return jy(t||[])}number(t){return t==="0x"?0:pt.from(t).toNumber()}type(t){return t==="0x"||t==null?0:pt.from(t).toNumber()}bigNumber(t){return pt.from(t)}boolean(t){if(typeof t=="boolean")return t;if(typeof t=="string"){if(t=t.toLowerCase(),t==="true")return!0;if(t==="false")return!1}throw new Error("invalid boolean - "+t)}hex(t,r){return typeof t=="string"&&(!r&&t.substring(0,2)!=="0x"&&(t="0x"+t),gi(t))?t.toLowerCase():q2.throwArgumentError("invalid hash","value",t)}data(t,r){const i=this.hex(t,r);if(i.length%2!==0)throw new Error("invalid data; odd-length - "+t);return i}address(t){return Za(t)}callAddress(t){if(!gi(t,32))return null;const r=Za(lo(t,12));return r===Mqe?null:r}contractAddress(t){return Epe(t)}blockTag(t){if(t==null)return"latest";if(t==="earliest")return"0x0";switch(t){case"earliest":return"0x0";case"latest":case"pending":case"safe":case"finalized":return t}if(typeof t=="number"||gi(t))return tF(t);throw new Error("invalid blockTag")}hash(t,r){const i=this.hex(t,r);return zv(i)!==32?q2.throwArgumentError("invalid hash","value",t):i}difficulty(t){if(t==null)return null;const r=pt.from(t);try{return r.toNumber()}catch{}return null}uint256(t){if(!gi(t))throw new Error("invalid uint256");return vn(t,32)}_block(t,r){t.author!=null&&t.miner==null&&(t.miner=t.author);const i=t._difficulty!=null?t._difficulty:t.difficulty,n=Mt.check(r,t);return n._difficulty=i==null?null:pt.from(i),n}block(t){return this._block(t,this.formats.block)}blockWithTransactions(t){return this._block(t,this.formats.blockWithTransactions)}transactionRequest(t){return Mt.check(this.formats.transactionRequest,t)}transactionResponse(t){t.gas!=null&&t.gasLimit==null&&(t.gasLimit=t.gas),t.to&&pt.from(t.to).isZero()&&(t.to="0x0000000000000000000000000000000000000000"),t.input!=null&&t.data==null&&(t.data=t.input),t.to==null&&t.creates==null&&(t.creates=this.contractAddress(t)),(t.type===1||t.type===2)&&t.accessList==null&&(t.accessList=[]);const r=Mt.check(this.formats.transaction,t);if(t.chainId!=null){let i=t.chainId;gi(i)&&(i=pt.from(i).toNumber()),r.chainId=i}else{let i=t.networkId;i==null&&r.v==null&&(i=t.chainId),gi(i)&&(i=pt.from(i).toNumber()),typeof i!="number"&&r.v!=null&&(i=(r.v-35)/2,i<0&&(i=0),i=parseInt(i)),typeof i!="number"&&(i=0),r.chainId=i}return r.blockHash&&r.blockHash.replace(/0/g,"")==="x"&&(r.blockHash=null),r}transaction(t){return SZe(t)}receiptLog(t){return Mt.check(this.formats.receiptLog,t)}receipt(t){const r=Mt.check(this.formats.receipt,t);if(r.root!=null)if(r.root.length<=4){const i=pt.from(r.root).toNumber();i===0||i===1?(r.status!=null&&r.status!==i&&q2.throwArgumentError("alt-root-status/status mismatch","value",{root:r.root,status:r.status}),r.status=i,delete r.root):q2.throwArgumentError("invalid alt-root-status","value.root",r.root)}else r.root.length!==66&&q2.throwArgumentError("invalid root hash","value.root",r.root);return r.status!=null&&(r.byzantium=!0),r}topics(t){return Array.isArray(t)?t.map(r=>this.topics(r)):t!=null?this.hash(t,!0):null}filter(t){return Mt.check(this.formats.filter,t)}filterLog(t){return Mt.check(this.formats.filterLog,t)}static check(t,r){const i={};for(const n in t)try{const a=t[n](r[n]);a!==void 0&&(i[n]=a)}catch(a){throw a.checkKey=n,a.checkValue=r[n],a}return i}static allowNull(t,r){return function(i){return i==null?r:t(i)}}static allowFalsish(t,r){return function(i){return i?t(i):r}}static arrayOf(t){return function(r){if(!Array.isArray(r))throw new Error("not an array");const i=[];return r.forEach(function(n){i.push(t(n))}),i}}}var yr=function(e,t,r,i){function n(a){return a instanceof r?a:new r(function(o){o(a)})}return new(r||(r=Promise))(function(a,o){function s(c){try{u(i.next(c))}catch(h){o(h)}}function l(c){try{u(i.throw(c))}catch(h){o(h)}}function u(c){c.done?a(c.value):n(c.value).then(s,l)}u((i=i.apply(e,t||[])).next())})};const Hr=new Re(s7),QZe=10;function nK(e){return e==null?"null":(zv(e)!==32&&Hr.throwArgumentError("invalid topic","topic",e),e.toLowerCase())}function aK(e){for(e=e.slice();e.length>0&&e[e.length-1]==null;)e.pop();return e.map(t=>{if(Array.isArray(t)){const r={};t.forEach(n=>{r[nK(n)]=!0});const i=Object.keys(r);return i.sort(),i.join("|")}else return nK(t)}).join("&")}function KZe(e){return e===""?[]:e.split(/&/g).map(t=>{if(t==="")return[];const r=t.split("|").map(i=>i==="null"?null:i);return r.length===1?r[0]:r})}function Um(e){if(typeof e=="string"){if(e=e.toLowerCase(),zv(e)===32)return"tx:"+e;if(e.indexOf(":")===-1)return e}else{if(Array.isArray(e))return"filter:*:"+aK(e);if(MYe.isForkEvent(e))throw Hr.warn("not implemented"),new Error("not implemented");if(e&&typeof e=="object")return"filter:"+(e.address||"*")+":"+aK(e.topics||[])}throw new Error("invalid event - "+e)}function Y2(){return new Date().getTime()}function oK(e){return new Promise(t=>{setTimeout(t,e)})}const JZe=["block","network","pending","poll"];let $Ze=class{constructor(t,r,i){nt(this,"tag",t),nt(this,"listener",r),nt(this,"once",i),this._lastBlockNumber=-2,this._inflight=!1}get event(){switch(this.type){case"tx":return this.hash;case"filter":return this.filter}return this.tag}get type(){return this.tag.split(":")[0]}get hash(){const t=this.tag.split(":");return t[0]!=="tx"?null:t[1]}get filter(){const t=this.tag.split(":");if(t[0]!=="filter")return null;const r=t[1],i=KZe(t[2]),n={};return i.length>0&&(n.topics=i),r&&r!=="*"&&(n.address=r),n}pollable(){return this.tag.indexOf(":")>=0||JZe.indexOf(this.tag)>=0}};const eQe={0:{symbol:"btc",p2pkh:0,p2sh:5,prefix:"bc"},2:{symbol:"ltc",p2pkh:48,p2sh:50,prefix:"ltc"},3:{symbol:"doge",p2pkh:30,p2sh:22},60:{symbol:"eth",ilk:"eth"},61:{symbol:"etc",ilk:"eth"},700:{symbol:"xdai",ilk:"eth"}};function $T(e){return vn(pt.from(e).toHexString(),32)}function sK(e){return Bk.encode(Hs([e,lo(KQ(KQ(e)),0,4)]))}const E0e=new RegExp("^(ipfs)://(.*)$","i"),lK=[new RegExp("^(https)://(.*)$","i"),new RegExp("^(data):(.*)$","i"),E0e,new RegExp("^eip155:[0-9]+/(erc[0-9]+):(.*)$","i")];function BA(e,t){try{return k4(Mw(e,t))}catch{}return null}function Mw(e,t){if(e==="0x")return null;const r=pt.from(lo(e,t,t+32)).toNumber(),i=pt.from(lo(e,r,r+32)).toNumber();return lo(e,r+32,r+32+i)}function e9(e){return e.match(/^ipfs:\/\/ipfs\//i)?e=e.substring(12):e.match(/^ipfs:\/\//i)?e=e.substring(7):Hr.throwArgumentError("unsupported IPFS format","link",e),`https://gateway.ipfs.io/ipfs/${e}`}function uK(e){const t=$t(e);if(t.length>32)throw new Error("internal; should not happen");const r=new Uint8Array(32);return r.set(t,32-t.length),r}function tQe(e){if(e.length%32===0)return e;const t=new Uint8Array(Math.ceil(e.length/32)*32);return t.set(e),t}function M0e(e){const t=[];let r=0;for(let i=0;i<e.length;i++)t.push(null),r+=32;for(let i=0;i<e.length;i++){const n=$t(e[i]);t[i]=uK(r),t.push(uK(n.length)),t.push(tQe(n)),r+=32+Math.ceil(n.length/32)*32}return vs(t)}class cK{constructor(t,r,i,n){nt(this,"provider",t),nt(this,"name",i),nt(this,"address",t.formatter.address(r)),nt(this,"_resolvedAddress",n)}supportsWildcard(){return this._supportsEip2544||(this._supportsEip2544=this.provider.call({to:this.address,data:"0x01ffc9a79061b92300000000000000000000000000000000000000000000000000000000"}).then(t=>pt.from(t).eq(1)).catch(t=>{if(t.code===Re.errors.CALL_EXCEPTION)return!1;throw this._supportsEip2544=null,t})),this._supportsEip2544}_fetch(t,r){return yr(this,void 0,void 0,function*(){const i={to:this.address,ccipReadEnabled:!0,data:vs([t,LA(this.name),r||"0x"])};let n=!1;(yield this.supportsWildcard())&&(n=!0,i.data=vs(["0x9061b923",M0e([dYe(this.name),i.data])]));try{let a=yield this.provider.call(i);return $t(a).length%32===4&&Hr.throwError("resolver threw error",Re.errors.CALL_EXCEPTION,{transaction:i,data:a}),n&&(a=Mw(a,0)),a}catch(a){if(a.code===Re.errors.CALL_EXCEPTION)return null;throw a}})}_fetchBytes(t,r){return yr(this,void 0,void 0,function*(){const i=yield this._fetch(t,r);return i!=null?Mw(i,0):null})}_getAddress(t,r){const i=eQe[String(t)];if(i==null&&Hr.throwError(`unsupported coin type: ${t}`,Re.errors.UNSUPPORTED_OPERATION,{operation:`getAddress(${t})`}),i.ilk==="eth")return this.provider.formatter.address(r);const n=$t(r);if(i.p2pkh!=null){const a=r.match(/^0x76a9([0-9a-f][0-9a-f])([0-9a-f]*)88ac$/);if(a){const o=parseInt(a[1],16);if(a[2].length===o*2&&o>=1&&o<=75)return sK(Hs([[i.p2pkh],"0x"+a[2]]))}}if(i.p2sh!=null){const a=r.match(/^0xa9([0-9a-f][0-9a-f])([0-9a-f]*)87$/);if(a){const o=parseInt(a[1],16);if(a[2].length===o*2&&o>=1&&o<=75)return sK(Hs([[i.p2sh],"0x"+a[2]]))}}if(i.prefix!=null){const a=n[1];let o=n[0];if(o===0?a!==20&&a!==32&&(o=-1):o=-1,o>=0&&n.length===2+a&&a>=1&&a<=75){const s=iK.toWords(n.slice(2));return s.unshift(o),iK.encode(i.prefix,s)}}return null}getAddress(t){return yr(this,void 0,void 0,function*(){if(t==null&&(t=60),t===60)try{const n=yield this._fetch("0x3b3b57de");return n==="0x"||n===Iqe?null:this.provider.formatter.callAddress(n)}catch(n){if(n.code===Re.errors.CALL_EXCEPTION)return null;throw n}const r=yield this._fetchBytes("0xf1cb7e06",$T(t));if(r==null||r==="0x")return null;const i=this._getAddress(t,r);return i==null&&Hr.throwError("invalid or unsupported coin data",Re.errors.UNSUPPORTED_OPERATION,{operation:`getAddress(${t})`,coinType:t,data:r}),i})}getAvatar(){return yr(this,void 0,void 0,function*(){const t=[{type:"name",content:this.name}];try{const r=yield this.getText("avatar");if(r==null)return null;for(let i=0;i<lK.length;i++){const n=r.match(lK[i]);if(n==null)continue;const a=n[1].toLowerCase();switch(a){case"https":return t.push({type:"url",content:r}),{linkage:t,url:r};case"data":return t.push({type:"data",content:r}),{linkage:t,url:r};case"ipfs":return t.push({type:"ipfs",content:r}),{linkage:t,url:e9(r)};case"erc721":case"erc1155":{const o=a==="erc721"?"0xc87b56dd":"0x0e89341c";t.push({type:a,content:r});const s=this._resolvedAddress||(yield this.getAddress()),l=(n[2]||"").split("/");if(l.length!==2)return null;const u=yield this.provider.formatter.address(l[0]),c=vn(pt.from(l[1]).toHexString(),32);if(a==="erc721"){const v=this.provider.formatter.callAddress(yield this.provider.call({to:u,data:vs(["0x6352211e",c])}));if(s!==v)return null;t.push({type:"owner",content:v})}else if(a==="erc1155"){const v=pt.from(yield this.provider.call({to:u,data:vs(["0x00fdd58e",vn(s,32),c])}));if(v.isZero())return null;t.push({type:"balance",content:v.toString()})}const h={to:this.provider.formatter.address(l[0]),data:vs([o,c])};let d=BA(yield this.provider.call(h),0);if(d==null)return null;t.push({type:"metadata-url-base",content:d}),a==="erc1155"&&(d=d.replace("{id}",c.substring(2)),t.push({type:"metadata-url-expanded",content:d})),d.match(/^ipfs:/i)&&(d=e9(d)),t.push({type:"metadata-url",content:d});const f=yield cF(d);if(!f)return null;t.push({type:"metadata",content:JSON.stringify(f)});let p=f.image;if(typeof p!="string")return null;if(!p.match(/^(https:\/\/|data:)/i)){if(p.match(E0e)==null)return null;t.push({type:"url-ipfs",content:p}),p=e9(p)}return t.push({type:"url",content:p}),{linkage:t,url:p}}}}}catch{}return null})}getContentHash(){return yr(this,void 0,void 0,function*(){const t=yield this._fetchBytes("0xbc1c58d1");if(t==null||t==="0x")return null;const r=t.match(/^0xe3010170(([0-9a-f][0-9a-f])([0-9a-f][0-9a-f])([0-9a-f]*))$/);if(r){const o=parseInt(r[3],16);if(r[4].length===o*2)return"ipfs://"+Bk.encode("0x"+r[1])}const i=t.match(/^0xe5010172(([0-9a-f][0-9a-f])([0-9a-f][0-9a-f])([0-9a-f]*))$/);if(i){const o=parseInt(i[3],16);if(i[4].length===o*2)return"ipns://"+Bk.encode("0x"+i[1])}const n=t.match(/^0xe40101fa011b20([0-9a-f]*)$/);if(n&&n[1].length===32*2)return"bzz://"+n[1];const a=t.match(/^0x90b2c605([0-9a-f]*)$/);if(a&&a[1].length===34*2){const o={"=":"","+":"-","/":"_"};return"sia://"+Npe("0x"+a[1]).replace(/[=+\/]/g,l=>o[l])}return Hr.throwError("invalid or unsupported content hash data",Re.errors.UNSUPPORTED_OPERATION,{operation:"getContentHash()",data:t})})}getText(t){return yr(this,void 0,void 0,function*(){let r=eh(t);r=Hs([$T(64),$T(r.length),r]),r.length%32!==0&&(r=Hs([r,vn("0x",32-t.length%32)]));const i=yield this._fetchBytes("0x59d1d43c",Ot(r));return i==null||i==="0x"?null:k4(i)})}}let t9=null,rQe=1;class iQe extends Ype{constructor(t){if(super(),this._events=[],this._emitted={block:-2},this.disableCcipRead=!1,this.formatter=new.target.getFormatter(),nt(this,"anyNetwork",t==="any"),this.anyNetwork&&(t=this.detectNetwork()),t instanceof Promise)this._networkPromise=t,t.catch(r=>{}),this._ready().catch(r=>{});else{const r=kc(new.target,"getNetwork")(t);r?(nt(this,"_network",r),this.emit("network",r,null)):Hr.throwArgumentError("invalid network","network",t)}this._maxInternalBlockNumber=-1024,this._lastBlockNumber=-2,this._maxFilterBlockRange=10,this._pollingInterval=4e3,this._fastQueryDate=0}_ready(){return yr(this,void 0,void 0,function*(){if(this._network==null){let t=null;if(this._networkPromise)try{t=yield this._networkPromise}catch{}t==null&&(t=yield this.detectNetwork()),t||Hr.throwError("no network detected",Re.errors.UNKNOWN_ERROR,{}),this._network==null&&(this.anyNetwork?this._network=t:nt(this,"_network",t),this.emit("network",t,null))}return this._network})}get ready(){return zx(()=>this._ready().then(t=>t,t=>{if(!(t.code===Re.errors.NETWORK_ERROR&&t.event==="noNetwork"))throw t}))}static getFormatter(){return t9==null&&(t9=new Mt),t9}static getNetwork(t){return OZe(t??"homestead")}ccipReadFetch(t,r,i){return yr(this,void 0,void 0,function*(){if(this.disableCcipRead||i.length===0)return null;const n=t.to.toLowerCase(),a=r.toLowerCase(),o=[];for(let s=0;s<i.length;s++){const l=i[s],u=l.replace("{sender}",n).replace("{data}",a),c=l.indexOf("{data}")>=0?null:JSON.stringify({data:a,sender:n}),h=yield cF({url:u,errorPassThrough:!0},c,(f,p)=>(f.status=p.statusCode,f));if(h.data)return h.data;const d=h.message||"unknown error";if(h.status>=400&&h.status<500)return Hr.throwError(`response not found during CCIP fetch: ${d}`,Re.errors.SERVER_ERROR,{url:l,errorMessage:d});o.push(d)}return Hr.throwError(`error encountered during CCIP fetch: ${o.map(s=>JSON.stringify(s)).join(", ")}`,Re.errors.SERVER_ERROR,{urls:i,errorMessages:o})})}_getInternalBlockNumber(t){return yr(this,void 0,void 0,function*(){if(yield this._ready(),t>0)for(;this._internalBlockNumber;){const n=this._internalBlockNumber;try{const a=yield n;if(Y2()-a.respTime<=t)return a.blockNumber;break}catch{if(this._internalBlockNumber===n)break}}const r=Y2(),i=Dn({blockNumber:this.perform("getBlockNumber",{}),networkError:this.getNetwork().then(n=>null,n=>n)}).then(({blockNumber:n,networkError:a})=>{if(a)throw this._internalBlockNumber===i&&(this._internalBlockNumber=null),a;const o=Y2();return n=pt.from(n).toNumber(),n<this._maxInternalBlockNumber&&(n=this._maxInternalBlockNumber),this._maxInternalBlockNumber=n,this._setFastBlockNumber(n),{blockNumber:n,reqTime:r,respTime:o}});return this._internalBlockNumber=i,i.catch(n=>{this._internalBlockNumber===i&&(this._internalBlockNumber=null)}),(yield i).blockNumber})}poll(){return yr(this,void 0,void 0,function*(){const t=rQe++,r=[];let i=null;try{i=yield this._getInternalBlockNumber(100+this.pollingInterval/2)}catch(n){this.emit("error",n);return}if(this._setFastBlockNumber(i),this.emit("poll",t,i),i===this._lastBlockNumber){this.emit("didPoll",t);return}if(this._emitted.block===-2&&(this._emitted.block=i-1),Math.abs(this._emitted.block-i)>1e3)Hr.warn(`network block skew detected; skipping block events (emitted=${this._emitted.block} blockNumber${i})`),this.emit("error",Hr.makeError("network block skew detected",Re.errors.NETWORK_ERROR,{blockNumber:i,event:"blockSkew",previousBlockNumber:this._emitted.block})),this.emit("block",i);else for(let n=this._emitted.block+1;n<=i;n++)this.emit("block",n);this._emitted.block!==i&&(this._emitted.block=i,Object.keys(this._emitted).forEach(n=>{if(n==="block")return;const a=this._emitted[n];a!=="pending"&&i-a>12&&delete this._emitted[n]})),this._lastBlockNumber===-2&&(this._lastBlockNumber=i-1),this._events.forEach(n=>{switch(n.type){case"tx":{const a=n.hash;let o=this.getTransactionReceipt(a).then(s=>(!s||s.blockNumber==null||(this._emitted["t:"+a]=s.blockNumber,this.emit(a,s)),null)).catch(s=>{this.emit("error",s)});r.push(o);break}case"filter":{if(!n._inflight){n._inflight=!0,n._lastBlockNumber===-2&&(n._lastBlockNumber=i-1);const a=n.filter;a.fromBlock=n._lastBlockNumber+1,a.toBlock=i;const o=a.toBlock-this._maxFilterBlockRange;o>a.fromBlock&&(a.fromBlock=o),a.fromBlock<0&&(a.fromBlock=0);const s=this.getLogs(a).then(l=>{n._inflight=!1,l.length!==0&&l.forEach(u=>{u.blockNumber>n._lastBlockNumber&&(n._lastBlockNumber=u.blockNumber),this._emitted["b:"+u.blockHash]=u.blockNumber,this._emitted["t:"+u.transactionHash]=u.blockNumber,this.emit(a,u)})}).catch(l=>{this.emit("error",l),n._inflight=!1});r.push(s)}break}}}),this._lastBlockNumber=i,Promise.all(r).then(()=>{this.emit("didPoll",t)}).catch(n=>{this.emit("error",n)})})}resetEventsBlock(t){this._lastBlockNumber=t-1,this.polling&&this.poll()}get network(){return this._network}detectNetwork(){return yr(this,void 0,void 0,function*(){return Hr.throwError("provider does not support network detection",Re.errors.UNSUPPORTED_OPERATION,{operation:"provider.detectNetwork"})})}getNetwork(){return yr(this,void 0,void 0,function*(){const t=yield this._ready(),r=yield this.detectNetwork();if(t.chainId!==r.chainId){if(this.anyNetwork)return this._network=r,this._lastBlockNumber=-2,this._fastBlockNumber=null,this._fastBlockNumberPromise=null,this._fastQueryDate=0,this._emitted.block=-2,this._maxInternalBlockNumber=-1024,this._internalBlockNumber=null,this.emit("network",r,t),yield oK(0),this._network;const i=Hr.makeError("underlying network changed",Re.errors.NETWORK_ERROR,{event:"changed",network:t,detectedNetwork:r});throw this.emit("error",i),i}return t})}get blockNumber(){return this._getInternalBlockNumber(100+this.pollingInterval/2).then(t=>{this._setFastBlockNumber(t)},t=>{}),this._fastBlockNumber!=null?this._fastBlockNumber:-1}get polling(){return this._poller!=null}set polling(t){t&&!this._poller?(this._poller=setInterval(()=>{this.poll()},this.pollingInterval),this._bootstrapPoll||(this._bootstrapPoll=setTimeout(()=>{this.poll(),this._bootstrapPoll=setTimeout(()=>{this._poller||this.poll(),this._bootstrapPoll=null},this.pollingInterval)},0))):!t&&this._poller&&(clearInterval(this._poller),this._poller=null)}get pollingInterval(){return this._pollingInterval}set pollingInterval(t){if(typeof t!="number"||t<=0||parseInt(String(t))!=t)throw new Error("invalid polling interval");this._pollingInterval=t,this._poller&&(clearInterval(this._poller),this._poller=setInterval(()=>{this.poll()},this._pollingInterval))}_getFastBlockNumber(){const t=Y2();return t-this._fastQueryDate>2*this._pollingInterval&&(this._fastQueryDate=t,this._fastBlockNumberPromise=this.getBlockNumber().then(r=>((this._fastBlockNumber==null||r>this._fastBlockNumber)&&(this._fastBlockNumber=r),this._fastBlockNumber))),this._fastBlockNumberPromise}_setFastBlockNumber(t){this._fastBlockNumber!=null&&t<this._fastBlockNumber||(this._fastQueryDate=Y2(),(this._fastBlockNumber==null||t>this._fastBlockNumber)&&(this._fastBlockNumber=t,this._fastBlockNumberPromise=Promise.resolve(t)))}waitForTransaction(t,r,i){return yr(this,void 0,void 0,function*(){return this._waitForTransaction(t,r??1,i||0,null)})}_waitForTransaction(t,r,i,n){return yr(this,void 0,void 0,function*(){const a=yield this.getTransactionReceipt(t);return(a?a.confirmations:0)>=r?a:new Promise((o,s)=>{const l=[];let u=!1;const c=function(){return u?!0:(u=!0,l.forEach(d=>{d()}),!1)},h=d=>{d.confirmations<r||c()||o(d)};if(this.on(t,h),l.push(()=>{this.removeListener(t,h)}),n){let d=n.startBlock,f=null;const p=v=>yr(this,void 0,void 0,function*(){u||(yield oK(1e3),this.getTransactionCount(n.from).then(m=>yr(this,void 0,void 0,function*(){if(!u){if(m<=n.nonce)d=v;else{{const g=yield this.getTransaction(t);if(g&&g.blockNumber!=null)return}for(f==null&&(f=d-3,f<n.startBlock&&(f=n.startBlock));f<=v;){if(u)return;const g=yield this.getBlockWithTransactions(f);for(let y=0;y<g.transactions.length;y++){const x=g.transactions[y];if(x.hash===t)return;if(x.from===n.from&&x.nonce===n.nonce){if(u)return;const b=yield this.waitForTransaction(x.hash,r);if(c())return;let _="replaced";x.data===n.data&&x.to===n.to&&x.value.eq(n.value)?_="repriced":x.data==="0x"&&x.from===x.to&&x.value.isZero()&&(_="cancelled"),s(Hr.makeError("transaction was replaced",Re.errors.TRANSACTION_REPLACED,{cancelled:_==="replaced"||_==="cancelled",reason:_,replacement:this._wrapTransaction(x),hash:t,receipt:b}));return}}f++}}u||this.once("block",p)}}),m=>{u||this.once("block",p)}))});if(u)return;this.once("block",p),l.push(()=>{this.removeListener("block",p)})}if(typeof i=="number"&&i>0){const d=setTimeout(()=>{c()||s(Hr.makeError("timeout exceeded",Re.errors.TIMEOUT,{timeout:i}))},i);d.unref&&d.unref(),l.push(()=>{clearTimeout(d)})}})})}getBlockNumber(){return yr(this,void 0,void 0,function*(){return this._getInternalBlockNumber(0)})}getGasPrice(){return yr(this,void 0,void 0,function*(){yield this.getNetwork();const t=yield this.perform("getGasPrice",{});try{return pt.from(t)}catch(r){return Hr.throwError("bad result from backend",Re.errors.SERVER_ERROR,{method:"getGasPrice",result:t,error:r})}})}getBalance(t,r){return yr(this,void 0,void 0,function*(){yield this.getNetwork();const i=yield Dn({address:this._getAddress(t),blockTag:this._getBlockTag(r)}),n=yield this.perform("getBalance",i);try{return pt.from(n)}catch(a){return Hr.throwError("bad result from backend",Re.errors.SERVER_ERROR,{method:"getBalance",params:i,result:n,error:a})}})}getTransactionCount(t,r){return yr(this,void 0,void 0,function*(){yield this.getNetwork();const i=yield Dn({address:this._getAddress(t),blockTag:this._getBlockTag(r)}),n=yield this.perform("getTransactionCount",i);try{return pt.from(n).toNumber()}catch(a){return Hr.throwError("bad result from backend",Re.errors.SERVER_ERROR,{method:"getTransactionCount",params:i,result:n,error:a})}})}getCode(t,r){return yr(this,void 0,void 0,function*(){yield this.getNetwork();const i=yield Dn({address:this._getAddress(t),blockTag:this._getBlockTag(r)}),n=yield this.perform("getCode",i);try{return Ot(n)}catch(a){return Hr.throwError("bad result from backend",Re.errors.SERVER_ERROR,{method:"getCode",params:i,result:n,error:a})}})}getStorageAt(t,r,i){return yr(this,void 0,void 0,function*(){yield this.getNetwork();const n=yield Dn({address:this._getAddress(t),blockTag:this._getBlockTag(i),position:Promise.resolve(r).then(o=>tF(o))}),a=yield this.perform("getStorageAt",n);try{return Ot(a)}catch(o){return Hr.throwError("bad result from backend",Re.errors.SERVER_ERROR,{method:"getStorageAt",params:n,result:a,error:o})}})}_wrapTransaction(t,r,i){if(r!=null&&zv(r)!==32)throw new Error("invalid response - sendTransaction");const n=t;return r!=null&&t.hash!==r&&Hr.throwError("Transaction hash mismatch from Provider.sendTransaction.",Re.errors.UNKNOWN_ERROR,{expectedHash:t.hash,returnedHash:r}),n.wait=(a,o)=>yr(this,void 0,void 0,function*(){a==null&&(a=1),o==null&&(o=0);let s;a!==0&&i!=null&&(s={data:t.data,from:t.from,nonce:t.nonce,to:t.to,value:t.value,startBlock:i});const l=yield this._waitForTransaction(t.hash,a,o,s);return l==null&&a===0?null:(this._emitted["t:"+t.hash]=l.blockNumber,l.status===0&&Hr.throwError("transaction failed",Re.errors.CALL_EXCEPTION,{transactionHash:t.hash,transaction:t,receipt:l}),l)}),n}sendTransaction(t){return yr(this,void 0,void 0,function*(){yield this.getNetwork();const r=yield Promise.resolve(t).then(a=>Ot(a)),i=this.formatter.transaction(t);i.confirmations==null&&(i.confirmations=0);const n=yield this._getInternalBlockNumber(100+2*this.pollingInterval);try{const a=yield this.perform("sendTransaction",{signedTransaction:r});return this._wrapTransaction(i,a,n)}catch(a){throw a.transaction=i,a.transactionHash=i.hash,a}})}_getTransactionRequest(t){return yr(this,void 0,void 0,function*(){const r=yield t,i={};return["from","to"].forEach(n=>{r[n]!=null&&(i[n]=Promise.resolve(r[n]).then(a=>a?this._getAddress(a):null))}),["gasLimit","gasPrice","maxFeePerGas","maxPriorityFeePerGas","value"].forEach(n=>{r[n]!=null&&(i[n]=Promise.resolve(r[n]).then(a=>a?pt.from(a):null))}),["type"].forEach(n=>{r[n]!=null&&(i[n]=Promise.resolve(r[n]).then(a=>a??null))}),r.accessList&&(i.accessList=this.formatter.accessList(r.accessList)),["data"].forEach(n=>{r[n]!=null&&(i[n]=Promise.resolve(r[n]).then(a=>a?Ot(a):null))}),this.formatter.transactionRequest(yield Dn(i))})}_getFilter(t){return yr(this,void 0,void 0,function*(){t=yield t;const r={};return t.address!=null&&(r.address=this._getAddress(t.address)),["blockHash","topics"].forEach(i=>{t[i]!=null&&(r[i]=t[i])}),["fromBlock","toBlock"].forEach(i=>{t[i]!=null&&(r[i]=this._getBlockTag(t[i]))}),this.formatter.filter(yield Dn(r))})}_call(t,r,i){return yr(this,void 0,void 0,function*(){i>=QZe&&Hr.throwError("CCIP read exceeded maximum redirections",Re.errors.SERVER_ERROR,{redirects:i,transaction:t});const n=t.to,a=yield this.perform("call",{transaction:t,blockTag:r});if(i>=0&&r==="latest"&&n!=null&&a.substring(0,10)==="0x556f1830"&&zv(a)%32===4)try{const o=lo(a,4),s=lo(o,0,32);pt.from(s).eq(n)||Hr.throwError("CCIP Read sender did not match",Re.errors.CALL_EXCEPTION,{name:"OffchainLookup",signature:"OffchainLookup(address,string[],bytes,bytes4,bytes)",transaction:t,data:a});const l=[],u=pt.from(lo(o,32,64)).toNumber(),c=pt.from(lo(o,u,u+32)).toNumber(),h=lo(o,u+32);for(let g=0;g<c;g++){const y=BA(h,g*32);y==null&&Hr.throwError("CCIP Read contained corrupt URL string",Re.errors.CALL_EXCEPTION,{name:"OffchainLookup",signature:"OffchainLookup(address,string[],bytes,bytes4,bytes)",transaction:t,data:a}),l.push(y)}const d=Mw(o,64);pt.from(lo(o,100,128)).isZero()||Hr.throwError("CCIP Read callback selector included junk",Re.errors.CALL_EXCEPTION,{name:"OffchainLookup",signature:"OffchainLookup(address,string[],bytes,bytes4,bytes)",transaction:t,data:a});const f=lo(o,96,100),p=Mw(o,128),v=yield this.ccipReadFetch(t,d,l);v==null&&Hr.throwError("CCIP Read disabled or provided no URLs",Re.errors.CALL_EXCEPTION,{name:"OffchainLookup",signature:"OffchainLookup(address,string[],bytes,bytes4,bytes)",transaction:t,data:a});const m={to:n,data:vs([f,M0e([v,p])])};return this._call(m,r,i+1)}catch(o){if(o.code===Re.errors.SERVER_ERROR)throw o}try{return Ot(a)}catch(o){return Hr.throwError("bad result from backend",Re.errors.SERVER_ERROR,{method:"call",params:{transaction:t,blockTag:r},result:a,error:o})}})}call(t,r){return yr(this,void 0,void 0,function*(){yield this.getNetwork();const i=yield Dn({transaction:this._getTransactionRequest(t),blockTag:this._getBlockTag(r),ccipReadEnabled:Promise.resolve(t.ccipReadEnabled)});return this._call(i.transaction,i.blockTag,i.ccipReadEnabled?0:-1)})}estimateGas(t){return yr(this,void 0,void 0,function*(){yield this.getNetwork();const r=yield Dn({transaction:this._getTransactionRequest(t)}),i=yield this.perform("estimateGas",r);try{return pt.from(i)}catch(n){return Hr.throwError("bad result from backend",Re.errors.SERVER_ERROR,{method:"estimateGas",params:r,result:i,error:n})}})}_getAddress(t){return yr(this,void 0,void 0,function*(){t=yield t,typeof t!="string"&&Hr.throwArgumentError("invalid address or ENS name","name",t);const r=yield this.resolveName(t);return r==null&&Hr.throwError("ENS name not configured",Re.errors.UNSUPPORTED_OPERATION,{operation:`resolveName(${JSON.stringify(t)})`}),r})}_getBlock(t,r){return yr(this,void 0,void 0,function*(){yield this.getNetwork(),t=yield t;let i=-128;const n={includeTransactions:!!r};if(gi(t,32))n.blockHash=t;else try{n.blockTag=yield this._getBlockTag(t),gi(n.blockTag)&&(i=parseInt(n.blockTag.substring(2),16))}catch{Hr.throwArgumentError("invalid block hash or block tag","blockHashOrBlockTag",t)}return zx(()=>yr(this,void 0,void 0,function*(){const a=yield this.perform("getBlock",n);if(a==null)return n.blockHash!=null&&this._emitted["b:"+n.blockHash]==null||n.blockTag!=null&&i>this._emitted.block?null:void 0;if(r){let o=null;for(let l=0;l<a.transactions.length;l++){const u=a.transactions[l];if(u.blockNumber==null)u.confirmations=0;else if(u.confirmations==null){o==null&&(o=yield this._getInternalBlockNumber(100+2*this.pollingInterval));let c=o-u.blockNumber+1;c<=0&&(c=1),u.confirmations=c}}const s=this.formatter.blockWithTransactions(a);return s.transactions=s.transactions.map(l=>this._wrapTransaction(l)),s}return this.formatter.block(a)}),{oncePoll:this})})}getBlock(t){return this._getBlock(t,!1)}getBlockWithTransactions(t){return this._getBlock(t,!0)}getTransaction(t){return yr(this,void 0,void 0,function*(){yield this.getNetwork(),t=yield t;const r={transactionHash:this.formatter.hash(t,!0)};return zx(()=>yr(this,void 0,void 0,function*(){const i=yield this.perform("getTransaction",r);if(i==null)return this._emitted["t:"+t]==null?null:void 0;const n=this.formatter.transactionResponse(i);if(n.blockNumber==null)n.confirmations=0;else if(n.confirmations==null){let o=(yield this._getInternalBlockNumber(100+2*this.pollingInterval))-n.blockNumber+1;o<=0&&(o=1),n.confirmations=o}return this._wrapTransaction(n)}),{oncePoll:this})})}getTransactionReceipt(t){return yr(this,void 0,void 0,function*(){yield this.getNetwork(),t=yield t;const r={transactionHash:this.formatter.hash(t,!0)};return zx(()=>yr(this,void 0,void 0,function*(){const i=yield this.perform("getTransactionReceipt",r);if(i==null)return this._emitted["t:"+t]==null?null:void 0;if(i.blockHash==null)return;const n=this.formatter.receipt(i);if(n.blockNumber==null)n.confirmations=0;else if(n.confirmations==null){let o=(yield this._getInternalBlockNumber(100+2*this.pollingInterval))-n.blockNumber+1;o<=0&&(o=1),n.confirmations=o}return n}),{oncePoll:this})})}getLogs(t){return yr(this,void 0,void 0,function*(){yield this.getNetwork();const r=yield Dn({filter:this._getFilter(t)}),i=yield this.perform("getLogs",r);return i.forEach(n=>{n.removed==null&&(n.removed=!1)}),Mt.arrayOf(this.formatter.filterLog.bind(this.formatter))(i)})}getEtherPrice(){return yr(this,void 0,void 0,function*(){return yield this.getNetwork(),this.perform("getEtherPrice",{})})}_getBlockTag(t){return yr(this,void 0,void 0,function*(){if(t=yield t,typeof t=="number"&&t<0){t%1&&Hr.throwArgumentError("invalid BlockTag","blockTag",t);let r=yield this._getInternalBlockNumber(100+2*this.pollingInterval);return r+=t,r<0&&(r=0),this.formatter.blockTag(r)}return this.formatter.blockTag(t)})}getResolver(t){return yr(this,void 0,void 0,function*(){let r=t;for(;;){if(r===""||r==="."||t!=="eth"&&r==="eth")return null;const i=yield this._getResolver(r,"getResolver");if(i!=null){const n=new cK(this,i,t);return r!==t&&!(yield n.supportsWildcard())?null:n}r=r.split(".").slice(1).join(".")}})}_getResolver(t,r){return yr(this,void 0,void 0,function*(){r==null&&(r="ENS");const i=yield this.getNetwork();i.ensAddress||Hr.throwError("network does not support ENS",Re.errors.UNSUPPORTED_OPERATION,{operation:r,network:i.name});try{const n=yield this.call({to:i.ensAddress,data:"0x0178b8bf"+LA(t).substring(2)});return this.formatter.callAddress(n)}catch{}return null})}resolveName(t){return yr(this,void 0,void 0,function*(){t=yield t;try{return Promise.resolve(this.formatter.address(t))}catch(i){if(gi(t))throw i}typeof t!="string"&&Hr.throwArgumentError("invalid ENS name","name",t);const r=yield this.getResolver(t);return r?yield r.getAddress():null})}lookupAddress(t){return yr(this,void 0,void 0,function*(){t=yield t,t=this.formatter.address(t);const r=t.substring(2).toLowerCase()+".addr.reverse",i=yield this._getResolver(r,"lookupAddress");if(i==null)return null;const n=BA(yield this.call({to:i,data:"0x691f3431"+LA(r).substring(2)}),0);return(yield this.resolveName(n))!=t?null:n})}getAvatar(t){return yr(this,void 0,void 0,function*(){let r=null;if(gi(t)){const a=this.formatter.address(t).substring(2).toLowerCase()+".addr.reverse",o=yield this._getResolver(a,"getAvatar");if(!o)return null;r=new cK(this,o,a);try{const s=yield r.getAvatar();if(s)return s.url}catch(s){if(s.code!==Re.errors.CALL_EXCEPTION)throw s}try{const s=BA(yield this.call({to:o,data:"0x691f3431"+LA(a).substring(2)}),0);r=yield this.getResolver(s)}catch(s){if(s.code!==Re.errors.CALL_EXCEPTION)throw s;return null}}else if(r=yield this.getResolver(t),!r)return null;const i=yield r.getAvatar();return i==null?null:i.url})}perform(t,r){return Hr.throwError(t+" not implemented",Re.errors.NOT_IMPLEMENTED,{operation:t})}_startEvent(t){this.polling=this._events.filter(r=>r.pollable()).length>0}_stopEvent(t){this.polling=this._events.filter(r=>r.pollable()).length>0}_addEventListener(t,r,i){const n=new $Ze(Um(t),r,i);return this._events.push(n),this._startEvent(n),this}on(t,r){return this._addEventListener(t,r,!1)}once(t,r){return this._addEventListener(t,r,!0)}emit(t,...r){let i=!1,n=[],a=Um(t);return this._events=this._events.filter(o=>o.tag!==a?!0:(setTimeout(()=>{o.listener.apply(this,r)},0),i=!0,o.once?(n.push(o),!1):!0)),n.forEach(o=>{this._stopEvent(o)}),i}listenerCount(t){if(!t)return this._events.length;let r=Um(t);return this._events.filter(i=>i.tag===r).length}listeners(t){if(t==null)return this._events.map(i=>i.listener);let r=Um(t);return this._events.filter(i=>i.tag===r).map(i=>i.listener)}off(t,r){if(r==null)return this.removeAllListeners(t);const i=[];let n=!1,a=Um(t);return this._events=this._events.filter(o=>o.tag!==a||o.listener!=r||n?!0:(n=!0,i.push(o),!1)),i.forEach(o=>{this._stopEvent(o)}),this}removeAllListeners(t){let r=[];if(t==null)r=this._events,this._events=[];else{const i=Um(t);this._events=this._events.filter(n=>n.tag!==i?!0:(r.push(n),!1))}return r.forEach(i=>{this._stopEvent(i)}),this}}var Nh=function(e,t,r,i){function n(a){return a instanceof r?a:new r(function(o){o(a)})}return new(r||(r=Promise))(function(a,o){function s(c){try{u(i.next(c))}catch(h){o(h)}}function l(c){try{u(i.throw(c))}catch(h){o(h)}}function u(c){c.done?a(c.value):n(c.value).then(s,l)}u((i=i.apply(e,t||[])).next())})};const In=new Re(s7),nQe=["call","estimateGas"];function bb(e,t){if(e==null)return null;if(typeof e.message=="string"&&e.message.match("reverted")){const r=gi(e.data)?e.data:null;if(!t||r)return{message:e.message,data:r}}if(typeof e=="object"){for(const r in e){const i=bb(e[r],t);if(i)return i}return null}if(typeof e=="string")try{return bb(JSON.parse(e),t)}catch{}return null}function T0e(e,t,r){const i=r.transaction||r.signedTransaction;if(e==="call"){const a=bb(t,!0);if(a)return a.data;In.throwError("missing revert data in call exception; Transaction reverted without a reason string",Re.errors.CALL_EXCEPTION,{data:"0x",transaction:i,error:t})}if(e==="estimateGas"){let a=bb(t.body,!1);a==null&&(a=bb(t,!1)),a&&In.throwError("cannot estimate gas; transaction may fail or may require manual gas limit",Re.errors.UNPREDICTABLE_GAS_LIMIT,{reason:a.message,method:e,transaction:i,error:t})}let n=t.message;throw t.code===Re.errors.SERVER_ERROR&&t.error&&typeof t.error.message=="string"?n=t.error.message:typeof t.body=="string"?n=t.body:typeof t.responseText=="string"&&(n=t.responseText),n=(n||"").toLowerCase(),n.match(/insufficient funds|base fee exceeds gas limit|InsufficientFunds/i)&&In.throwError("insufficient funds for intrinsic transaction cost",Re.errors.INSUFFICIENT_FUNDS,{error:t,method:e,transaction:i}),n.match(/nonce (is )?too low/i)&&In.throwError("nonce has already been used",Re.errors.NONCE_EXPIRED,{error:t,method:e,transaction:i}),n.match(/replacement transaction underpriced|transaction gas price.*too low/i)&&In.throwError("replacement fee too low",Re.errors.REPLACEMENT_UNDERPRICED,{error:t,method:e,transaction:i}),n.match(/only replay-protected/i)&&In.throwError("legacy pre-eip-155 transactions not supported",Re.errors.UNSUPPORTED_OPERATION,{error:t,method:e,transaction:i}),nQe.indexOf(e)>=0&&n.match(/gas required exceeds allowance|always failing transaction|execution reverted|revert/)&&In.throwError("cannot estimate gas; transaction may fail or may require manual gas limit",Re.errors.UNPREDICTABLE_GAS_LIMIT,{error:t,method:e,transaction:i}),t}function hK(e){return new Promise(function(t){setTimeout(t,e)})}function aQe(e){if(e.error){const t=new Error(e.error.message);throw t.code=e.error.code,t.data=e.error.data,t}return e.result}function X2(e){return e&&e.toLowerCase()}const Vk={};class P0e extends R4{constructor(t,r,i){if(super(),t!==Vk)throw new Error("do not call the JsonRpcSigner constructor directly; use provider.getSigner");nt(this,"provider",r),i==null&&(i=0),typeof i=="string"?(nt(this,"_address",this.provider.formatter.address(i)),nt(this,"_index",null)):typeof i=="number"?(nt(this,"_index",i),nt(this,"_address",null)):In.throwArgumentError("invalid address or index","addressOrIndex",i)}connect(t){return In.throwError("cannot alter JSON-RPC Signer connection",Re.errors.UNSUPPORTED_OPERATION,{operation:"connect"})}connectUnchecked(){return new oQe(Vk,this.provider,this._address||this._index)}getAddress(){return this._address?Promise.resolve(this._address):this.provider.send("eth_accounts",[]).then(t=>(t.length<=this._index&&In.throwError("unknown account #"+this._index,Re.errors.UNSUPPORTED_OPERATION,{operation:"getAddress"}),this.provider.formatter.address(t[this._index])))}sendUncheckedTransaction(t){t=ta(t);const r=this.getAddress().then(i=>(i&&(i=i.toLowerCase()),i));if(t.gasLimit==null){const i=ta(t);i.from=r,t.gasLimit=this.provider.estimateGas(i)}return t.to!=null&&(t.to=Promise.resolve(t.to).then(i=>Nh(this,void 0,void 0,function*(){if(i==null)return null;const n=yield this.provider.resolveName(i);return n==null&&In.throwArgumentError("provided ENS name resolves to null","tx.to",i),n}))),Dn({tx:Dn(t),sender:r}).then(({tx:i,sender:n})=>{i.from!=null?i.from.toLowerCase()!==n&&In.throwArgumentError("from address mismatch","transaction",t):i.from=n;const a=this.provider.constructor.hexlifyTransaction(i,{from:!0});return this.provider.send("eth_sendTransaction",[a]).then(o=>o,o=>(typeof o.message=="string"&&o.message.match(/user denied/i)&&In.throwError("user rejected transaction",Re.errors.ACTION_REJECTED,{action:"sendTransaction",transaction:i}),T0e("sendTransaction",o,a)))})}signTransaction(t){return In.throwError("signing transactions is unsupported",Re.errors.UNSUPPORTED_OPERATION,{operation:"signTransaction"})}sendTransaction(t){return Nh(this,void 0,void 0,function*(){const r=yield this.provider._getInternalBlockNumber(100+2*this.provider.pollingInterval),i=yield this.sendUncheckedTransaction(t);try{return yield zx(()=>Nh(this,void 0,void 0,function*(){const n=yield this.provider.getTransaction(i);if(n!==null)return this.provider._wrapTransaction(n,i,r)}),{oncePoll:this.provider})}catch(n){throw n.transactionHash=i,n}})}signMessage(t){return Nh(this,void 0,void 0,function*(){const r=typeof t=="string"?eh(t):t,i=yield this.getAddress();try{return yield this.provider.send("personal_sign",[Ot(r),i.toLowerCase()])}catch(n){throw typeof n.message=="string"&&n.message.match(/user denied/i)&&In.throwError("user rejected signing",Re.errors.ACTION_REJECTED,{action:"signMessage",from:i,messageData:t}),n}})}_legacySignMessage(t){return Nh(this,void 0,void 0,function*(){const r=typeof t=="string"?eh(t):t,i=yield this.getAddress();try{return yield this.provider.send("eth_sign",[i.toLowerCase(),Ot(r)])}catch(n){throw typeof n.message=="string"&&n.message.match(/user denied/i)&&In.throwError("user rejected signing",Re.errors.ACTION_REJECTED,{action:"_legacySignMessage",from:i,messageData:t}),n}})}_signTypedData(t,r,i){return Nh(this,void 0,void 0,function*(){const n=yield ks.resolveNames(t,r,i,o=>this.provider.resolveName(o)),a=yield this.getAddress();try{return yield this.provider.send("eth_signTypedData_v4",[a.toLowerCase(),JSON.stringify(ks.getPayload(n.domain,r,n.value))])}catch(o){throw typeof o.message=="string"&&o.message.match(/user denied/i)&&In.throwError("user rejected signing",Re.errors.ACTION_REJECTED,{action:"_signTypedData",from:a,messageData:{domain:n.domain,types:r,value:n.value}}),o}})}unlock(t){return Nh(this,void 0,void 0,function*(){const r=this.provider,i=yield this.getAddress();return r.send("personal_unlockAccount",[i.toLowerCase(),t,null])})}}class oQe extends P0e{sendTransaction(t){return this.sendUncheckedTransaction(t).then(r=>({hash:r,nonce:null,gasLimit:null,gasPrice:null,data:null,value:null,chainId:null,confirmations:0,from:null,wait:i=>this.provider.waitForTransaction(r,i)}))}}const sQe={chainId:!0,data:!0,gasLimit:!0,gasPrice:!0,nonce:!0,to:!0,value:!0,type:!0,accessList:!0,maxFeePerGas:!0,maxPriorityFeePerGas:!0};class lQe extends iQe{constructor(t,r){let i=r;i==null&&(i=new Promise((n,a)=>{setTimeout(()=>{this.detectNetwork().then(o=>{n(o)},o=>{a(o)})},0)})),super(i),t||(t=kc(this.constructor,"defaultUrl")()),typeof t=="string"?nt(this,"connection",Object.freeze({url:t})):nt(this,"connection",Object.freeze(ta(t))),this._nextId=42}get _cache(){return this._eventLoopCache==null&&(this._eventLoopCache={}),this._eventLoopCache}static defaultUrl(){return"http://localhost:8545"}detectNetwork(){return this._cache.detectNetwork||(this._cache.detectNetwork=this._uncachedDetectNetwork(),setTimeout(()=>{this._cache.detectNetwork=null},0)),this._cache.detectNetwork}_uncachedDetectNetwork(){return Nh(this,void 0,void 0,function*(){yield hK(0);let t=null;try{t=yield this.send("eth_chainId",[])}catch{try{t=yield this.send("net_version",[])}catch{}}if(t!=null){const r=kc(this.constructor,"getNetwork");try{return r(pt.from(t).toNumber())}catch(i){return In.throwError("could not detect network",Re.errors.NETWORK_ERROR,{chainId:t,event:"invalidNetwork",serverError:i})}}return In.throwError("could not detect network",Re.errors.NETWORK_ERROR,{event:"noNetwork"})})}getSigner(t){return new P0e(Vk,this,t)}getUncheckedSigner(t){return this.getSigner(t).connectUnchecked()}listAccounts(){return this.send("eth_accounts",[]).then(t=>t.map(r=>this.formatter.address(r)))}send(t,r){const i={method:t,params:r,id:this._nextId++,jsonrpc:"2.0"};this.emit("debug",{action:"request",request:_d(i),provider:this});const n=["eth_chainId","eth_blockNumber"].indexOf(t)>=0;if(n&&this._cache[t])return this._cache[t];const a=cF(this.connection,JSON.stringify(i),aQe).then(o=>(this.emit("debug",{action:"response",request:i,response:o,provider:this}),o),o=>{throw this.emit("debug",{action:"response",error:o,request:i,provider:this}),o});return n&&(this._cache[t]=a,setTimeout(()=>{this._cache[t]=null},0)),a}prepareRequest(t,r){switch(t){case"getBlockNumber":return["eth_blockNumber",[]];case"getGasPrice":return["eth_gasPrice",[]];case"getBalance":return["eth_getBalance",[X2(r.address),r.blockTag]];case"getTransactionCount":return["eth_getTransactionCount",[X2(r.address),r.blockTag]];case"getCode":return["eth_getCode",[X2(r.address),r.blockTag]];case"getStorageAt":return["eth_getStorageAt",[X2(r.address),vn(r.position,32),r.blockTag]];case"sendTransaction":return["eth_sendRawTransaction",[r.signedTransaction]];case"getBlock":return r.blockTag?["eth_getBlockByNumber",[r.blockTag,!!r.includeTransactions]]:r.blockHash?["eth_getBlockByHash",[r.blockHash,!!r.includeTransactions]]:null;case"getTransaction":return["eth_getTransactionByHash",[r.transactionHash]];case"getTransactionReceipt":return["eth_getTransactionReceipt",[r.transactionHash]];case"call":return["eth_call",[kc(this.constructor,"hexlifyTransaction")(r.transaction,{from:!0}),r.blockTag]];case"estimateGas":return["eth_estimateGas",[kc(this.constructor,"hexlifyTransaction")(r.transaction,{from:!0})]];case"getLogs":return r.filter&&r.filter.address!=null&&(r.filter.address=X2(r.filter.address)),["eth_getLogs",[r.filter]]}return null}perform(t,r){return Nh(this,void 0,void 0,function*(){if(t==="call"||t==="estimateGas"){const n=r.transaction;if(n&&n.type!=null&&pt.from(n.type).isZero()&&n.maxFeePerGas==null&&n.maxPriorityFeePerGas==null){const a=yield this.getFeeData();a.maxFeePerGas==null&&a.maxPriorityFeePerGas==null&&(r=ta(r),r.transaction=ta(n),delete r.transaction.type)}}const i=this.prepareRequest(t,r);i==null&&In.throwError(t+" not implemented",Re.errors.NOT_IMPLEMENTED,{operation:t});try{return yield this.send(i[0],i[1])}catch(n){return T0e(t,n,r)}})}_startEvent(t){t.tag==="pending"&&this._startPending(),super._startEvent(t)}_startPending(){if(this._pendingFilter!=null)return;const t=this,r=this.send("eth_newPendingTransactionFilter",[]);this._pendingFilter=r,r.then(function(i){function n(){t.send("eth_getFilterChanges",[i]).then(function(a){if(t._pendingFilter!=r)return null;let o=Promise.resolve();return a.forEach(function(s){t._emitted["t:"+s.toLowerCase()]="pending",o=o.then(function(){return t.getTransaction(s).then(function(l){return t.emit("pending",l),null})})}),o.then(function(){return hK(1e3)})}).then(function(){if(t._pendingFilter!=r){t.send("eth_uninstallFilter",[i]);return}return setTimeout(function(){n()},0),null}).catch(a=>{})}return n(),i}).catch(i=>{})}_stopEvent(t){t.tag==="pending"&&this.listenerCount("pending")===0&&(this._pendingFilter=null),super._stopEvent(t)}static hexlifyTransaction(t,r){const i=ta(sQe);if(r)for(const a in r)r[a]&&(i[a]=!0);nqe(t,i);const n={};return["chainId","gasLimit","gasPrice","type","maxFeePerGas","maxPriorityFeePerGas","nonce","value"].forEach(function(a){if(t[a]==null)return;const o=tF(pt.from(t[a]));a==="gasLimit"&&(a="gas"),n[a]=o}),["from","to","data"].forEach(function(a){t[a]!=null&&(n[a]=Ot(t[a]))}),t.accessList&&(n.accessList=jy(t.accessList)),n}}const dK=new Re(s7);let uQe=1;function fK(e,t){const r="Web3LegacyFetcher";return function(i,n){const a={method:i,params:n,id:uQe++,jsonrpc:"2.0"};return new Promise((o,s)=>{this.emit("debug",{action:"request",fetcher:r,request:_d(a),provider:this}),t(a,(l,u)=>{if(l)return this.emit("debug",{action:"response",fetcher:r,error:l,request:a,provider:this}),s(l);if(this.emit("debug",{action:"response",fetcher:r,request:a,response:u,provider:this}),u.error){const c=new Error(u.error.message);return c.code=u.error.code,c.data=u.error.data,s(c)}o(u.result)})})}}function cQe(e){return function(t,r){r==null&&(r=[]);const i={method:t,params:r};return this.emit("debug",{action:"request",fetcher:"Eip1193Fetcher",request:_d(i),provider:this}),e.request(i).then(n=>(this.emit("debug",{action:"response",fetcher:"Eip1193Fetcher",request:i,response:n,provider:this}),n),n=>{throw this.emit("debug",{action:"response",fetcher:"Eip1193Fetcher",request:i,error:n,provider:this}),n})}}class D0e extends lQe{constructor(t,r){t==null&&dK.throwArgumentError("missing provider","provider",t);let i=null,n=null,a=null;typeof t=="function"?(i="unknown:",n=t):(i=t.host||t.path||"",!i&&t.isMetaMask&&(i="metamask"),a=t,t.request?(i===""&&(i="eip-1193:"),n=cQe(t)):t.sendAsync?n=fK(t,t.sendAsync.bind(t)):t.send?n=fK(t,t.send.bind(t)):dK.throwArgumentError("unsupported provider","provider",t),i||(i="unknown:")),super(i,r),nt(this,"jsonRpcFetchFunc",n),nt(this,"provider",a)}send(t,r){return this.jsonRpcFetchFunc(t,r)}}function hQe({onError:e,setUrl:t}){const r=Fe();let i;function n(){const l=Roe.get("wallet_type");return l==="metamask"?window.ethereum:l==="okx"?window.okxwallet:null}async function a(l,u){await o().catch(e);const h=window.__provider.getSigner();i=new LZe(l,u,h)}async function o(l){let u=localStorage.getItem("wallet_type"),c;return u==="metamask"?c=window.ethereum:u==="okx"?c=window.okxwallet:c=window.particle.particleProvider,window.__provider=new D0e(c),window.__provider.provider.on("accountsChanged",async()=>{localStorage.clear(),window.location.reload()}),await c.send("eth_requestAccounts",[]),window.__provider}async function s(l,u,c){return await a(l,jWe.abi).catch(e),i.aigc(u,c,u===1?{value:"10000000000000000"}:{}).then(async h=>{const d=await h.wait(),f=d.logs.find(({topics:v})=>v.includes("0x33a5143e03946ad747ede04fce1efc4c3b501668b69b643112017b34828d5894")),p=Rpe.decode(["address","uint256"],f.data);r.value=d.transactionHash,t(String(parseInt(p[1]._hex)))}).catch(h=>{console.log(h),e(h)})}return{connect:s,transactionHash:r,getProvider:n}}const dQe=["viewBox"],fQe=["d","stroke","fill"],pQe={style:{"z-index":"0"}},vQe=sr({__name:"button",props:{width:{},height:{},disabled:{type:Boolean},keepState:{},defaultStroke:{},defaultColor:{},defaultFill:{},activeStroke:{},activeColor:{},activeFill:{},fullWidth:{type:Boolean}},setup(e){vy(v=>({"0cce8978":ue(c),"7333abb5":ue(h),"02df3994":ue(o),"3bdb102e":f.value}));const t=e,{width:r,height:i,fullWidth:n,defaultStroke:a="#17b09e",defaultColor:o="#17b09e",defaultFill:s="transparent",activeStroke:l="none",activeFill:u="#17b09e"}=t,[c,h]=[n?"100%":Du(r,!0),Du(i,!0)],d=Fe(t.keepState==="active"||!1),f=_s(()=>t.activeColor?t.activeColor:"black");async function p(v){v?d.value=!0:(await P4(200),d.value=!1)}return(v,m)=>(We(),tt("div",{class:Tt({disabled:v.disabled})},[B("div",{class:Tt(["button-container center pr hand",{hovered:d.value}]),onTouchstart:m[0]||(m[0]=()=>!v.keepState&&p(!0)),onTouchend:m[1]||(m[1]=()=>!v.keepState&&p(!1))},[(We(),tt("svg",{class:"svg",viewBox:`0 0 ${ue(r)} ${ue(i)}`,preserveAspectRatio:"none",xmlns:"http://www.w3.org/2000/svg",fill:"none"},[B("path",{d:`M0.5 16L16 0.5H${ue(r)-1}V${ue(i)-18}L${ue(r)-18} ${ue(i)-1}H0.5V16Z`,stroke:d.value?ue(l):ue(a),fill:d.value?ue(u):ue(s)},null,8,fQe)],8,dQe)),B("div",pQe,[fs(v.$slots,"default",{hovered:d.value},void 0)])],34)],2))}}),mQe=Ar(vQe,[["__scopeId","data-v-6c63dfc5"]]),gQe={class:"w100p pr"},yQe=sr({__name:"dynamic-input",props:{modelValue:{},modelModifiers:{}},emits:["update:modelValue"],setup(e){const t=Vae(e,"modelValue");return(r,i)=>(We(),tt("div",gQe,[py(B("input",{type:"text","onUpdate:modelValue":i[0]||(i[0]=n=>t.value=n),class:"query"},null,512),[[eoe,t.value]])]))}}),xQe=Ar(yQe,[["__scopeId","data-v-40f9ceb3"]]),bQe={class:"fbh fbac w100p"},wQe=sr({__name:"dynamic-line",props:{variant:{}},setup(e){return(t,r)=>(We(),tt("div",bQe,[B("div",{class:Tt(["w100p",t.variant==="dynamic"?"dynamic":"static"])},null,2),Ie(ue(Ir),{name:"arrow2",size:12,variant:"icon"})]))}}),pK=Ar(wQe,[["__scopeId","data-v-4c09751d"]]),Tw=""+new URL("logo.BsoScXUk.svg",import.meta.url).href,_Qe=Object.freeze(Object.defineProperty({__proto__:null,default:Tw},Symbol.toStringTag,{value:"Module"})),AQe={class:"fbh fbjsb bar"},SQe={key:0,class:"list2"},CQe={target:"_blank",href:"https://readon.me/"},EQe={class:"list-item"},MQe={target:"_blank",href:"https://t.me/share_on_bot"},TQe={class:"list-item"},PQe={target:"_blank",href:"https://content-hub.readon.me"},DQe={class:"list-item"},IQe={target:"_blank",href:"https://lense.revox.ai/"},LQe={class:"list-item"},kQe={key:1,class:"list2"},RQe={target:"_blank",href:"https://readon.me/catto"},OQe={class:"list-item"},BQe={target:"_blank",href:"https://readon.me/reon"},NQe={class:"list-item"},VQe={target:"_blank",href:"https://content-hub.readon.me/code"},FQe={class:"list-item"},zQe={target:"_blank",href:"https://docs.revox.ai/"},HQe={class:"list-item"},UQe={target:"_blank",href:"https://twitter.com/ReadOnMe3/"},GQe={class:"list-item"},jQe={target:"_blank",href:"https://discord.com/invite/readon/"},WQe={class:"list-item"},qQe={target:"_blank",href:"https://readonofficial.medium.com/"},YQe={class:"list-item"},XQe=sr({__name:"menu",emits:["jumpToAiPage"],setup(e){const t=Fe(!1),r=Fe(!1),i=Fe(!1);return(n,a)=>(We(),tt("div",{class:Tt(["menu-root",{visible:t.value}])},[B("div",AQe,[a[6]||(a[6]=B("img",{class:"logo",src:Tw},null,-1)),Ie(ue(Ir),{onClick:a[0]||(a[0]=o=>t.value=!t.value),name:t.value?"close2":"menu",size:45},null,8,["name"])]),B("div",{class:Tt(["list",{visible:t.value}])},[B("div",{class:"list-item",onClick:a[1]||(a[1]=o=>r.value=!r.value)},[a[7]||(a[7]=B("p",null,"Product",-1)),Ie(ue(Ir),{name:"arrow-down2",size:24})]),r.value?(We(),tt("div",SQe,[B("a",CQe,[B("div",EQe,[a[8]||(a[8]=B("p",null,"ReadON DAO",-1)),Ie(ue(Ir),{name:"arrow",size:24})])]),B("a",MQe,[B("div",TQe,[a[9]||(a[9]=B("p",null,"ShareON",-1)),Ie(ue(Ir),{name:"arrow",size:24})])]),B("div",{class:"list-item",onClick:a[2]||(a[2]=o=>n.$emit("jumpToAiPage"))},[a[10]||(a[10]=B("p",null,"DPrompt",-1)),Ie(ue(Ir),{name:"arrow",size:24})]),B("a",PQe,[B("div",DQe,[a[11]||(a[11]=B("p",null,"Content Hub",-1)),Ie(ue(Ir),{name:"arrow",size:24})])]),B("a",IQe,[B("div",LQe,[a[12]||(a[12]=B("p",null,"REVOX Lense",-1)),Ie(ue(Ir),{name:"arrow",size:24})])]),B("div",{class:"list-item",onClick:a[3]||(a[3]=o=>ue(xs)("https://studio.revox.ai"))},[a[13]||(a[13]=B("p",null,"REVOX Studio",-1)),Ie(ue(Ir),{name:"arrow",variant:"icon",size:24})])])):Kt("",!0),a[23]||(a[23]=B("div",{class:"divider"},null,-1)),B("div",{class:"list-item",onClick:a[4]||(a[4]=o=>i.value=!i.value)},[a[14]||(a[14]=B("p",null,"Assets",-1)),Ie(ue(Ir),{name:"arrow-down2",size:24})]),i.value?(We(),tt("div",kQe,[B("a",RQe,[B("div",OQe,[a[15]||(a[15]=B("p",null,"Catto",-1)),Ie(ue(Ir),{name:"arrow",size:24})])]),B("a",BQe,[B("div",NQe,[a[16]||(a[16]=B("p",null,"REON",-1)),Ie(ue(Ir),{name:"arrow",size:24})])]),B("a",VQe,[B("div",FQe,[a[17]||(a[17]=B("p",null,"READ",-1)),Ie(ue(Ir),{name:"arrow",size:24})])]),B("div",{class:"list-item",variant:"icon",onClick:a[5]||(a[5]=o=>ue(xs)("https://airdrop.revox.ai"))},[a[18]||(a[18]=B("p",null,"REX (pre-TGE)",-1)),Ie(ue(Ir),{name:"arrow",size:24})])])):Kt("",!0),a[24]||(a[24]=B("div",{class:"divider"},null,-1)),B("a",zQe,[B("div",HQe,[a[19]||(a[19]=B("p",null,"Whitepaper",-1)),Ie(ue(Ir),{name:"arrow",size:24})])]),a[25]||(a[25]=B("div",{class:"divider"},null,-1)),B("a",UQe,[B("div",GQe,[a[20]||(a[20]=B("p",null,"Twitter",-1)),Ie(ue(Ir),{name:"arrow",size:24})])]),a[26]||(a[26]=B("div",{class:"divider"},null,-1)),B("a",jQe,[B("div",WQe,[a[21]||(a[21]=B("p",null,"Discord",-1)),Ie(ue(Ir),{name:"arrow",size:24})])]),a[27]||(a[27]=B("div",{class:"divider"},null,-1)),B("a",qQe,[B("div",YQe,[a[22]||(a[22]=B("p",null,"Medium",-1)),Ie(ue(Ir),{name:"arrow",size:24})])]),a[28]||(a[28]=B("div",{class:"divider"},null,-1))],2)],2))}}),ZQe=Ar(XQe,[["__scopeId","data-v-bd65e4eb"]]),QQe={class:"pr",style:{"background-color":"white"}},KQe=sr({__name:"slide-card",props:{icon:{},title:{},description:{}},setup(e){const t=Fe(!1);return(r,i)=>(We(),tt("div",QQe,[B("div",{class:Tt(["fbv","zoom-card-root",{hovered:t.value}])},[B("div",{class:Tt(["icon",{hovered:t.value}])},[Ie(ue(Ir),{name:r.icon,size:150},null,8,["name"])],2),B("div",{class:Tt(["fbv content",{hovered:t.value}])},[B("div",{class:Tt(["title",{hovered:t.value}])},Br(r.title),3),B("div",{class:Tt(["description",{hovered:t.value}])},Br(r.description),3)],2)],2),Ie(ue(Ir),{name:t.value?"minus":"add",size:56,class:"action",onClick:i[0]||(i[0]=n=>t.value=!t.value)},null,8,["name"])]))}}),w_=Ar(KQe,[["__scopeId","data-v-d7c3bd6a"]]),JQe={class:"switch-prompt-root fbv g8 w100p"},$Qe={class:"query fbh g16"},eKe={class:"fb1"},tKe=sr({__name:"switch-prompt",emits:["onPromptChange"],setup(e,{emit:t}){const r=t,{data:i}=lse,n=_s(()=>{var o;return((o=i.value)==null?void 0:o.data)??[]}),a=Fe(0);return ja(a,()=>r("onPromptChange",n.value[a.value%n.value.length]),{immediate:!0}),(o,s)=>(We(),tt("div",JQe,[s[1]||(s[1]=B("p",null,"Prompt",-1)),B("div",$Qe,[B("p",eKe,Br(n.value[a.value%n.value.length]),1),Ie(ue(Ir),{name:"toggle",size:32,onClick:s[0]||(s[0]=l=>a.value++)})])]))}}),rKe=Ar(tKe,[["__scopeId","data-v-26a3a7cd"]]),iKe={class:Tt(["fbv fbjsb pr","zoom-card-root"])},nKe={class:Tt(["icon"])},aKe={class:Tt(["title"])},oKe={class:Tt(["description"])},sKe=sr({__name:"zoom-card",props:{icon:{},title:{},description:{},disabled:{type:Boolean}},emits:["click"],setup(e){return(t,r)=>(We(),tt("div",iKe,[B("div",nKe,[Ie(ue(Ir),{name:t.icon,size:124},null,8,["name"])]),B("div",aKe,Br(t.title),1),B("div",oKe,Br(t.description),1),B("div",{class:Tt(["center button",t.disabled?"disabled":"active",{hand:!t.disabled}]),onClick:r[0]||(r[0]=i=>t.$emit("click"))},Br(t.disabled?"Coming soon":"Visit"),3)]))}}),__=Ar(sKe,[["__scopeId","data-v-cc3a71fd"]]),lKe={class:"svg",viewBox:"0 0 181 35",xmlns:"http://www.w3.org/2000/svg",fill:"none"},uKe=["stroke"],cKe=["stroke"],hKe=sr({__name:"button",props:{layer:{},active:{type:Boolean}},setup(e){const t={1:"APPLICATION",2:"AGENTS",3:"COMPUTATION",4:"MODEL"};return(r,i)=>(We(),tt("div",{class:Tt(["text center pr",{active:r.active}])},[jo(Br(t[r.layer])+" ",1),(We(),tt("svg",lKe,[B("path",{d:"M1 12.5V4.5L5 0.5H13",stroke:r.active?"#44DAC8":"white","stroke-width":"0.5"},null,8,uKe),B("path",{d:"M180 22.5V30.5L176 34.5H168",stroke:r.active?"#44DAC8":"white","stroke-width":"0.5"},null,8,cKe)]))],2))}}),A_=Ar(hKe,[["__scopeId","data-v-baaf976e"]]);var I0e={update:null,begin:null,loopBegin:null,changeBegin:null,change:null,changeComplete:null,loopComplete:null,complete:null,loop:1,direction:"normal",autoplay:!0,timelineOffset:0},hF={duration:1e3,delay:0,endDelay:0,easing:"easeOutElastic(1, .5)",round:0},dKe=["translateX","translateY","translateZ","rotate","rotateX","rotateY","rotateZ","scale","scaleX","scaleY","scaleZ","skew","skewX","skewY","perspective","matrix","matrix3d"],PS={CSS:{},springs:{}};function Rc(e,t,r){return Math.min(Math.max(e,t),r)}function wb(e,t){return e.indexOf(t)>-1}function r9(e,t){return e.apply(null,t)}var Nt={arr:function(e){return Array.isArray(e)},obj:function(e){return wb(Object.prototype.toString.call(e),"Object")},pth:function(e){return Nt.obj(e)&&e.hasOwnProperty("totalLength")},svg:function(e){return e instanceof SVGElement},inp:function(e){return e instanceof HTMLInputElement},dom:function(e){return e.nodeType||Nt.svg(e)},str:function(e){return typeof e=="string"},fnc:function(e){return typeof e=="function"},und:function(e){return typeof e>"u"},nil:function(e){return Nt.und(e)||e===null},hex:function(e){return/(^#[0-9A-F]{6}$)|(^#[0-9A-F]{3}$)/i.test(e)},rgb:function(e){return/^rgb/.test(e)},hsl:function(e){return/^hsl/.test(e)},col:function(e){return Nt.hex(e)||Nt.rgb(e)||Nt.hsl(e)},key:function(e){return!I0e.hasOwnProperty(e)&&!hF.hasOwnProperty(e)&&e!=="targets"&&e!=="keyframes"}};function L0e(e){var t=/\(([^)]+)\)/.exec(e);return t?t[1].split(",").map(function(r){return parseFloat(r)}):[]}function k0e(e,t){var r=L0e(e),i=Rc(Nt.und(r[0])?1:r[0],.1,100),n=Rc(Nt.und(r[1])?100:r[1],.1,100),a=Rc(Nt.und(r[2])?10:r[2],.1,100),o=Rc(Nt.und(r[3])?0:r[3],.1,100),s=Math.sqrt(n/i),l=a/(2*Math.sqrt(n*i)),u=l<1?s*Math.sqrt(1-l*l):0,c=1,h=l<1?(l*s+-o)/u:-o+s;function d(p){var v=t?t*p/1e3:p;return l<1?v=Math.exp(-v*l*s)*(c*Math.cos(u*v)+h*Math.sin(u*v)):v=(c+h*v)*Math.exp(-v*s),p===0||p===1?p:1-v}function f(){var p=PS.springs[e];if(p)return p;for(var v=1/6,m=0,g=0;;)if(m+=v,d(m)===1){if(g++,g>=16)break}else g=0;var y=m*v*1e3;return PS.springs[e]=y,y}return t?d:f}function fKe(e){return e===void 0&&(e=10),function(t){return Math.ceil(Rc(t,1e-6,1)*e)*(1/e)}}var pKe=function(){var e=11,t=1/(e-1);function r(c,h){return 1-3*h+3*c}function i(c,h){return 3*h-6*c}function n(c){return 3*c}function a(c,h,d){return((r(h,d)*c+i(h,d))*c+n(h))*c}function o(c,h,d){return 3*r(h,d)*c*c+2*i(h,d)*c+n(h)}function s(c,h,d,f,p){var v,m,g=0;do m=h+(d-h)/2,v=a(m,f,p)-c,v>0?d=m:h=m;while(Math.abs(v)>1e-7&&++g<10);return m}function l(c,h,d,f){for(var p=0;p<4;++p){var v=o(h,d,f);if(v===0)return h;var m=a(h,d,f)-c;h-=m/v}return h}function u(c,h,d,f){if(!(0<=c&&c<=1&&0<=d&&d<=1))return;var p=new Float32Array(e);if(c!==h||d!==f)for(var v=0;v<e;++v)p[v]=a(v*t,c,d);function m(g){for(var y=0,x=1,b=e-1;x!==b&&p[x]<=g;++x)y+=t;--x;var _=(g-p[x])/(p[x+1]-p[x]),w=y+_*t,S=o(w,c,d);return S>=.001?l(g,w,c,d):S===0?w:s(g,y,y+t,c,d)}return function(g){return c===h&&d===f||g===0||g===1?g:a(m(g),h,f)}}return u}(),R0e=function(){var e={linear:function(){return function(i){return i}}},t={Sine:function(){return function(i){return 1-Math.cos(i*Math.PI/2)}},Expo:function(){return function(i){return i?Math.pow(2,10*i-10):0}},Circ:function(){return function(i){return 1-Math.sqrt(1-i*i)}},Back:function(){return function(i){return i*i*(3*i-2)}},Bounce:function(){return function(i){for(var n,a=4;i<((n=Math.pow(2,--a))-1)/11;);return 1/Math.pow(4,3-a)-7.5625*Math.pow((n*3-2)/22-i,2)}},Elastic:function(i,n){i===void 0&&(i=1),n===void 0&&(n=.5);var a=Rc(i,1,10),o=Rc(n,.1,2);return function(s){return s===0||s===1?s:-a*Math.pow(2,10*(s-1))*Math.sin((s-1-o/(Math.PI*2)*Math.asin(1/a))*(Math.PI*2)/o)}}},r=["Quad","Cubic","Quart","Quint"];return r.forEach(function(i,n){t[i]=function(){return function(a){return Math.pow(a,n+2)}}}),Object.keys(t).forEach(function(i){var n=t[i];e["easeIn"+i]=n,e["easeOut"+i]=function(a,o){return function(s){return 1-n(a,o)(1-s)}},e["easeInOut"+i]=function(a,o){return function(s){return s<.5?n(a,o)(s*2)/2:1-n(a,o)(s*-2+2)/2}},e["easeOutIn"+i]=function(a,o){return function(s){return s<.5?(1-n(a,o)(1-s*2))/2:(n(a,o)(s*2-1)+1)/2}}}),e}();function dF(e,t){if(Nt.fnc(e))return e;var r=e.split("(")[0],i=R0e[r],n=L0e(e);switch(r){case"spring":return k0e(e,t);case"cubicBezier":return r9(pKe,n);case"steps":return r9(fKe,n);default:return r9(i,n)}}function O0e(e){try{var t=document.querySelectorAll(e);return t}catch{return}}function l7(e,t){for(var r=e.length,i=arguments.length>=2?arguments[1]:void 0,n=[],a=0;a<r;a++)if(a in e){var o=e[a];t.call(i,o,a,e)&&n.push(o)}return n}function u7(e){return e.reduce(function(t,r){return t.concat(Nt.arr(r)?u7(r):r)},[])}function vK(e){return Nt.arr(e)?e:(Nt.str(e)&&(e=O0e(e)||e),e instanceof NodeList||e instanceof HTMLCollection?[].slice.call(e):[e])}function fF(e,t){return e.some(function(r){return r===t})}function pF(e){var t={};for(var r in e)t[r]=e[r];return t}function Fk(e,t){var r=pF(e);for(var i in e)r[i]=t.hasOwnProperty(i)?t[i]:e[i];return r}function c7(e,t){var r=pF(e);for(var i in t)r[i]=Nt.und(e[i])?t[i]:e[i];return r}function vKe(e){var t=/rgb\((\d+,\s*[\d]+,\s*[\d]+)\)/g.exec(e);return t?"rgba("+t[1]+",1)":e}function mKe(e){var t=/^#?([a-f\d])([a-f\d])([a-f\d])$/i,r=e.replace(t,function(s,l,u,c){return l+l+u+u+c+c}),i=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(r),n=parseInt(i[1],16),a=parseInt(i[2],16),o=parseInt(i[3],16);return"rgba("+n+","+a+","+o+",1)"}function gKe(e){var t=/hsl\((\d+),\s*([\d.]+)%,\s*([\d.]+)%\)/g.exec(e)||/hsla\((\d+),\s*([\d.]+)%,\s*([\d.]+)%,\s*([\d.]+)\)/g.exec(e),r=parseInt(t[1],10)/360,i=parseInt(t[2],10)/100,n=parseInt(t[3],10)/100,a=t[4]||1;function o(d,f,p){return p<0&&(p+=1),p>1&&(p-=1),p<1/6?d+(f-d)*6*p:p<1/2?f:p<2/3?d+(f-d)*(2/3-p)*6:d}var s,l,u;if(i==0)s=l=u=n;else{var c=n<.5?n*(1+i):n+i-n*i,h=2*n-c;s=o(h,c,r+1/3),l=o(h,c,r),u=o(h,c,r-1/3)}return"rgba("+s*255+","+l*255+","+u*255+","+a+")"}function yKe(e){if(Nt.rgb(e))return vKe(e);if(Nt.hex(e))return mKe(e);if(Nt.hsl(e))return gKe(e)}function cd(e){var t=/[+-]?\d*\.?\d+(?:\.\d+)?(?:[eE][+-]?\d+)?(%|px|pt|em|rem|in|cm|mm|ex|ch|pc|vw|vh|vmin|vmax|deg|rad|turn)?$/.exec(e);if(t)return t[1]}function xKe(e){if(wb(e,"translate")||e==="perspective")return"px";if(wb(e,"rotate")||wb(e,"skew"))return"deg"}function zk(e,t){return Nt.fnc(e)?e(t.target,t.id,t.total):e}function Oc(e,t){return e.getAttribute(t)}function vF(e,t,r){var i=cd(t);if(fF([r,"deg","rad","turn"],i))return t;var n=PS.CSS[t+r];if(!Nt.und(n))return n;var a=100,o=document.createElement(e.tagName),s=e.parentNode&&e.parentNode!==document?e.parentNode:document.body;s.appendChild(o),o.style.position="absolute",o.style.width=a+r;var l=a/o.offsetWidth;s.removeChild(o);var u=l*parseFloat(t);return PS.CSS[t+r]=u,u}function B0e(e,t,r){if(t in e.style){var i=t.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),n=e.style[t]||getComputedStyle(e).getPropertyValue(i)||"0";return r?vF(e,n,r):n}}function mF(e,t){if(Nt.dom(e)&&!Nt.inp(e)&&(!Nt.nil(Oc(e,t))||Nt.svg(e)&&e[t]))return"attribute";if(Nt.dom(e)&&fF(dKe,t))return"transform";if(Nt.dom(e)&&t!=="transform"&&B0e(e,t))return"css";if(e[t]!=null)return"object"}function N0e(e){if(Nt.dom(e)){for(var t=e.style.transform||"",r=/(\w+)\(([^)]*)\)/g,i=new Map,n;n=r.exec(t);)i.set(n[1],n[2]);return i}}function bKe(e,t,r,i){var n=wb(t,"scale")?1:0+xKe(t),a=N0e(e).get(t)||n;return r&&(r.transforms.list.set(t,a),r.transforms.last=t),i?vF(e,a,i):a}function gF(e,t,r,i){switch(mF(e,t)){case"transform":return bKe(e,t,i,r);case"css":return B0e(e,t,r);case"attribute":return Oc(e,t);default:return e[t]||0}}function yF(e,t){var r=/^(\*=|\+=|-=)/.exec(e);if(!r)return e;var i=cd(e)||0,n=parseFloat(t),a=parseFloat(e.replace(r[0],""));switch(r[0][0]){case"+":return n+a+i;case"-":return n-a+i;case"*":return n*a+i}}function V0e(e,t){if(Nt.col(e))return yKe(e);if(/\s/g.test(e))return e;var r=cd(e),i=r?e.substr(0,e.length-r.length):e;return t?i+t:i}function xF(e,t){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))}function wKe(e){return Math.PI*2*Oc(e,"r")}function _Ke(e){return Oc(e,"width")*2+Oc(e,"height")*2}function AKe(e){return xF({x:Oc(e,"x1"),y:Oc(e,"y1")},{x:Oc(e,"x2"),y:Oc(e,"y2")})}function F0e(e){for(var t=e.points,r=0,i,n=0;n<t.numberOfItems;n++){var a=t.getItem(n);n>0&&(r+=xF(i,a)),i=a}return r}function SKe(e){var t=e.points;return F0e(e)+xF(t.getItem(t.numberOfItems-1),t.getItem(0))}function z0e(e){if(e.getTotalLength)return e.getTotalLength();switch(e.tagName.toLowerCase()){case"circle":return wKe(e);case"rect":return _Ke(e);case"line":return AKe(e);case"polyline":return F0e(e);case"polygon":return SKe(e)}}function CKe(e){var t=z0e(e);return e.setAttribute("stroke-dasharray",t),t}function EKe(e){for(var t=e.parentNode;Nt.svg(t)&&Nt.svg(t.parentNode);)t=t.parentNode;return t}function H0e(e,t){var r=t||{},i=r.el||EKe(e),n=i.getBoundingClientRect(),a=Oc(i,"viewBox"),o=n.width,s=n.height,l=r.viewBox||(a?a.split(" "):[0,0,o,s]);return{el:i,viewBox:l,x:l[0]/1,y:l[1]/1,w:o,h:s,vW:l[2],vH:l[3]}}function MKe(e,t){var r=Nt.str(e)?O0e(e)[0]:e,i=t||100;return function(n){return{property:n,el:r,svg:H0e(r),totalLength:z0e(r)*(i/100)}}}function TKe(e,t,r){function i(c){c===void 0&&(c=0);var h=t+c>=1?t+c:0;return e.el.getPointAtLength(h)}var n=H0e(e.el,e.svg),a=i(),o=i(-1),s=i(1),l=r?1:n.w/n.vW,u=r?1:n.h/n.vH;switch(e.property){case"x":return(a.x-n.x)*l;case"y":return(a.y-n.y)*u;case"angle":return Math.atan2(s.y-o.y,s.x-o.x)*180/Math.PI}}function mK(e,t){var r=/[+-]?\d*\.?\d+(?:\.\d+)?(?:[eE][+-]?\d+)?/g,i=V0e(Nt.pth(e)?e.totalLength:e,t)+"";return{original:i,numbers:i.match(r)?i.match(r).map(Number):[0],strings:Nt.str(e)||t?i.split(r):[]}}function bF(e){var t=e?u7(Nt.arr(e)?e.map(vK):vK(e)):[];return l7(t,function(r,i,n){return n.indexOf(r)===i})}function U0e(e){var t=bF(e);return t.map(function(r,i){return{target:r,id:i,total:t.length,transforms:{list:N0e(r)}}})}function PKe(e,t){var r=pF(t);if(/^spring/.test(r.easing)&&(r.duration=k0e(r.easing)),Nt.arr(e)){var i=e.length,n=i===2&&!Nt.obj(e[0]);n?e={value:e}:Nt.fnc(t.duration)||(r.duration=t.duration/i)}var a=Nt.arr(e)?e:[e];return a.map(function(o,s){var l=Nt.obj(o)&&!Nt.pth(o)?o:{value:o};return Nt.und(l.delay)&&(l.delay=s?0:t.delay),Nt.und(l.endDelay)&&(l.endDelay=s===a.length-1?t.endDelay:0),l}).map(function(o){return c7(o,r)})}function DKe(e){for(var t=l7(u7(e.map(function(a){return Object.keys(a)})),function(a){return Nt.key(a)}).reduce(function(a,o){return a.indexOf(o)<0&&a.push(o),a},[]),r={},i=function(a){var o=t[a];r[o]=e.map(function(s){var l={};for(var u in s)Nt.key(u)?u==o&&(l.value=s[u]):l[u]=s[u];return l})},n=0;n<t.length;n++)i(n);return r}function IKe(e,t){var r=[],i=t.keyframes;i&&(t=c7(DKe(i),t));for(var n in t)Nt.key(n)&&r.push({name:n,tweens:PKe(t[n],e)});return r}function LKe(e,t){var r={};for(var i in e){var n=zk(e[i],t);Nt.arr(n)&&(n=n.map(function(a){return zk(a,t)}),n.length===1&&(n=n[0])),r[i]=n}return r.duration=parseFloat(r.duration),r.delay=parseFloat(r.delay),r}function kKe(e,t){var r;return e.tweens.map(function(i){var n=LKe(i,t),a=n.value,o=Nt.arr(a)?a[1]:a,s=cd(o),l=gF(t.target,e.name,s,t),u=r?r.to.original:l,c=Nt.arr(a)?a[0]:u,h=cd(c)||cd(l),d=s||h;return Nt.und(o)&&(o=u),n.from=mK(c,d),n.to=mK(yF(o,c),d),n.start=r?r.end:0,n.end=n.start+n.delay+n.duration+n.endDelay,n.easing=dF(n.easing,n.duration),n.isPath=Nt.pth(a),n.isPathTargetInsideSVG=n.isPath&&Nt.svg(t.target),n.isColor=Nt.col(n.from.original),n.isColor&&(n.round=1),r=n,n})}var G0e={css:function(e,t,r){return e.style[t]=r},attribute:function(e,t,r){return e.setAttribute(t,r)},object:function(e,t,r){return e[t]=r},transform:function(e,t,r,i,n){if(i.list.set(t,r),t===i.last||n){var a="";i.list.forEach(function(o,s){a+=s+"("+o+") "}),e.style.transform=a}}};function j0e(e,t){var r=U0e(e);r.forEach(function(i){for(var n in t){var a=zk(t[n],i),o=i.target,s=cd(a),l=gF(o,n,s,i),u=s||cd(l),c=yF(V0e(a,u),l),h=mF(o,n);G0e[h](o,n,c,i.transforms,!0)}})}function RKe(e,t){var r=mF(e.target,t.name);if(r){var i=kKe(t,e),n=i[i.length-1];return{type:r,property:t.name,animatable:e,tweens:i,duration:n.end,delay:i[0].delay,endDelay:n.endDelay}}}function OKe(e,t){return l7(u7(e.map(function(r){return t.map(function(i){return RKe(r,i)})})),function(r){return!Nt.und(r)})}function W0e(e,t){var r=e.length,i=function(a){return a.timelineOffset?a.timelineOffset:0},n={};return n.duration=r?Math.max.apply(Math,e.map(function(a){return i(a)+a.duration})):t.duration,n.delay=r?Math.min.apply(Math,e.map(function(a){return i(a)+a.delay})):t.delay,n.endDelay=r?n.duration-Math.max.apply(Math,e.map(function(a){return i(a)+a.duration-a.endDelay})):t.endDelay,n}var gK=0;function BKe(e){var t=Fk(I0e,e),r=Fk(hF,e),i=IKe(r,e),n=U0e(e.targets),a=OKe(n,i),o=W0e(a,r),s=gK;return gK++,c7(t,{id:s,children:[],animatables:n,animations:a,duration:o.duration,delay:o.delay,endDelay:o.endDelay})}var cu=[],q0e=function(){var e;function t(){!e&&(!yK()||!Qi.suspendWhenDocumentHidden)&&cu.length>0&&(e=requestAnimationFrame(r))}function r(n){for(var a=cu.length,o=0;o<a;){var s=cu[o];s.paused?(cu.splice(o,1),a--):(s.tick(n),o++)}e=o>0?requestAnimationFrame(r):void 0}function i(){Qi.suspendWhenDocumentHidden&&(yK()?e=cancelAnimationFrame(e):(cu.forEach(function(n){return n._onDocumentVisibility()}),q0e()))}return typeof document<"u"&&document.addEventListener("visibilitychange",i),t}();function yK(){return!!document&&document.hidden}function Qi(e){e===void 0&&(e={});var t=0,r=0,i=0,n,a=0,o=null;function s(y){var x=window.Promise&&new Promise(function(b){return o=b});return y.finished=x,x}var l=BKe(e);s(l);function u(){var y=l.direction;y!=="alternate"&&(l.direction=y!=="normal"?"normal":"reverse"),l.reversed=!l.reversed,n.forEach(function(x){return x.reversed=l.reversed})}function c(y){return l.reversed?l.duration-y:y}function h(){t=0,r=c(l.currentTime)*(1/Qi.speed)}function d(y,x){x&&x.seek(y-x.timelineOffset)}function f(y){if(l.reversePlayback)for(var b=a;b--;)d(y,n[b]);else for(var x=0;x<a;x++)d(y,n[x])}function p(y){for(var x=0,b=l.animations,_=b.length;x<_;){var w=b[x],S=w.animatable,A=w.tweens,M=A.length-1,E=A[M];M&&(E=l7(A,function(Z){return y<Z.end})[0]||E);for(var T=Rc(y-E.start-E.delay,0,E.duration)/E.duration,L=isNaN(T)?1:E.easing(T),P=E.to.strings,C=E.round,D=[],I=E.to.numbers.length,O=void 0,R=0;R<I;R++){var H=void 0,j=E.to.numbers[R],N=E.from.numbers[R]||0;E.isPath?H=TKe(E.value,L*j,E.isPathTargetInsideSVG):H=N+L*(j-N),C&&(E.isColor&&R>2||(H=Math.round(H*C)/C)),D.push(H)}var k=P.length;if(!k)O=D[0];else{O=P[0];for(var G=0;G<k;G++){P[G];var Y=P[G+1],F=D[G];isNaN(F)||(Y?O+=F+Y:O+=F+" ")}}G0e[w.type](S.target,w.property,O,S.transforms),w.currentValue=O,x++}}function v(y){l[y]&&!l.passThrough&&l[y](l)}function m(){l.remaining&&l.remaining!==!0&&l.remaining--}function g(y){var x=l.duration,b=l.delay,_=x-l.endDelay,w=c(y);l.progress=Rc(w/x*100,0,100),l.reversePlayback=w<l.currentTime,n&&f(w),!l.began&&l.currentTime>0&&(l.began=!0,v("begin")),!l.loopBegan&&l.currentTime>0&&(l.loopBegan=!0,v("loopBegin")),w<=b&&l.currentTime!==0&&p(0),(w>=_&&l.currentTime!==x||!x)&&p(x),w>b&&w<_?(l.changeBegan||(l.changeBegan=!0,l.changeCompleted=!1,v("changeBegin")),v("change"),p(w)):l.changeBegan&&(l.changeCompleted=!0,l.changeBegan=!1,v("changeComplete")),l.currentTime=Rc(w,0,x),l.began&&v("update"),y>=x&&(r=0,m(),l.remaining?(t=i,v("loopComplete"),l.loopBegan=!1,l.direction==="alternate"&&u()):(l.paused=!0,l.completed||(l.completed=!0,v("loopComplete"),v("complete"),!l.passThrough&&"Promise"in window&&(o(),s(l)))))}return l.reset=function(){var y=l.direction;l.passThrough=!1,l.currentTime=0,l.progress=0,l.paused=!0,l.began=!1,l.loopBegan=!1,l.changeBegan=!1,l.completed=!1,l.changeCompleted=!1,l.reversePlayback=!1,l.reversed=y==="reverse",l.remaining=l.loop,n=l.children,a=n.length;for(var x=a;x--;)l.children[x].reset();(l.reversed&&l.loop!==!0||y==="alternate"&&l.loop===1)&&l.remaining++,p(l.reversed?l.duration:0)},l._onDocumentVisibility=h,l.set=function(y,x){return j0e(y,x),l},l.tick=function(y){i=y,t||(t=i),g((i+(r-t))*Qi.speed)},l.seek=function(y){g(c(y))},l.pause=function(){l.paused=!0,h()},l.play=function(){l.paused&&(l.completed&&l.reset(),l.paused=!1,cu.push(l),h(),q0e())},l.reverse=function(){u(),l.completed=!l.reversed,h()},l.restart=function(){l.reset(),l.play()},l.remove=function(y){var x=bF(y);Y0e(x,l)},l.reset(),l.autoplay&&l.play(),l}function xK(e,t){for(var r=t.length;r--;)fF(e,t[r].animatable.target)&&t.splice(r,1)}function Y0e(e,t){var r=t.animations,i=t.children;xK(e,r);for(var n=i.length;n--;){var a=i[n],o=a.animations;xK(e,o),!o.length&&!a.children.length&&i.splice(n,1)}!r.length&&!i.length&&t.pause()}function NKe(e){for(var t=bF(e),r=cu.length;r--;){var i=cu[r];Y0e(t,i)}}function VKe(e,t){t===void 0&&(t={});var r=t.direction||"normal",i=t.easing?dF(t.easing):null,n=t.grid,a=t.axis,o=t.from||0,s=o==="first",l=o==="center",u=o==="last",c=Nt.arr(e),h=parseFloat(c?e[0]:e),d=c?parseFloat(e[1]):0,f=cd(c?e[1]:e)||0,p=t.start||0+(c?h:0),v=[],m=0;return function(g,y,x){if(s&&(o=0),l&&(o=(x-1)/2),u&&(o=x-1),!v.length){for(var b=0;b<x;b++){if(!n)v.push(Math.abs(o-b));else{var _=l?(n[0]-1)/2:o%n[0],w=l?(n[1]-1)/2:Math.floor(o/n[0]),S=b%n[0],A=Math.floor(b/n[0]),M=_-S,E=w-A,T=Math.sqrt(M*M+E*E);a==="x"&&(T=-M),a==="y"&&(T=-E),v.push(T)}m=Math.max.apply(Math,v)}i&&(v=v.map(function(P){return i(P/m)*m})),r==="reverse"&&(v=v.map(function(P){return a?P<0?P*-1:-P:Math.abs(m-P)}))}var L=c?(d-h)/m:h;return p+L*(Math.round(v[y]*100)/100)+f}}function FKe(e){e===void 0&&(e={});var t=Qi(e);return t.duration=0,t.add=function(r,i){var n=cu.indexOf(t),a=t.children;n>-1&&cu.splice(n,1);function o(d){d.passThrough=!0}for(var s=0;s<a.length;s++)o(a[s]);var l=c7(r,Fk(hF,e));l.targets=l.targets||e.targets;var u=t.duration;l.autoplay=!1,l.direction=t.direction,l.timelineOffset=Nt.und(i)?u:yF(i,u),o(t),t.seek(l.timelineOffset);var c=Qi(l);o(c),a.push(c);var h=W0e(a,e);return t.delay=h.delay,t.endDelay=h.endDelay,t.duration=h.duration,t.seek(0),t.reset(),t.autoplay&&t.play(),t},t}Qi.version="3.2.1";Qi.speed=1;Qi.suspendWhenDocumentHidden=!0;Qi.running=cu;Qi.remove=NKe;Qi.get=gF;Qi.set=j0e;Qi.convertPx=vF;Qi.path=MKe;Qi.setDashoffset=CKe;Qi.stagger=VKe;Qi.timeline=FKe;Qi.easing=dF;Qi.penner=R0e;Qi.random=function(e,t){return Math.floor(Math.random()*(t-e+1))+e};function Ba({node:e,duration:t,delay:r,length:i,reverse:n}){return e.style.strokeDasharray="1000px 1000px",e.style.strokeDashoffset="1000px",e.style.strokeWidth="3px",()=>new Promise(a=>{Qi({targets:e,complete:a,easing:"linear",strokeDashoffset:n?[`${-i}px`,0]:["1000px",`${1e3-i}px`],duration:t,delay:r})})}const zKe={width:"689",viewBox:"0 0 689 1250",xmlns:"http://www.w3.org/2000/svg",fill:"none"},Xu=1e3,a0=1e3,i9=500,HKe=700,UKe=sr({__name:"case1",setup(e){const t=Fe(),r=Fe(),i=Fe(),n=Fe(),a=Fe(),o=Fe(),s=Fe(),l=Fe(),u=Fe(),c=Fe(),h=Fe(),d=Fe(),f=Fe(),p=Fe(),v=Fe(),m=Fe(),g=Fe(),y=Fe();function x(b){return b.value.getTotalLength()}return Zs(async()=>{const b=Ba({node:t.value,length:x(t),duration:Xu,delay:0}),_=Ba({node:r.value,length:x(r),duration:Xu+a0,delay:0}),w=Ba({node:i.value,length:x(i),duration:Xu,delay:0}),S=Ba({node:n.value,length:x(n),duration:a0,delay:Xu}),A=Ba({node:a.value,length:x(a),duration:a0,delay:Xu}),M=Ba({node:o.value,length:x(o),duration:Xu,delay:0}),E=Ba({node:s.value,length:x(s),duration:a0,delay:Xu}),T=Ba({node:l.value,length:x(l),duration:i9,delay:Xu+a0}),L=Ba({node:u.value,length:x(u),duration:i9,delay:Xu+a0}),P=Ba({node:c.value,length:x(c),duration:HKe,delay:Xu+a0+i9});(function C(){[h,d,f,p,v,m,g,y].map(D=>D.value&&(D.value.style.fill="#6D6D6D")),Promise.all([b().then(()=>{h.value&&(h.value.style.fill="#44DAC8"),d.value&&(d.value.style.fill="#44DAC8"),f.value&&(f.value.style.fill="#44DAC8")}),_().then(()=>{p.value&&(p.value.style.fill="#44DAC8"),v.value&&(v.value.style.fill="#44DAC8")}),w(),S(),A(),M(),E(),T().then(()=>{g.value&&(g.value.style.fill="#44DAC8"),m.value&&(m.value.style.fill="#44DAC8")}),L(),P().then(()=>{y.value&&(y.value.style.fill="#44DAC8")})]).then(()=>setTimeout(C,500))})()}),(b,_)=>(We(),tt("svg",zKe,[_[0]||(_[0]=Mu('<path d="M345 1H485C489.971 1 494 5.02944 494 10V100C494 104.971 489.971 109 485 109H205C200.029 109 196 104.971 196 100V53.5526V10C196 5.02944 200.029 1 205 1H345Z" fill="#121212" stroke="white" stroke-width="2"></path><text fill="white" xml:space="preserve" style="white-space:pre;" font-family="Cantarell" font-size="30" font-weight="500" letter-spacing="0em"><tspan x="236" y="48.0723">Get Ticker from </tspan><tspan x="236" y="85.0723">user&#39;s prompt</tspan></text><path d="M345 1111H485C489.971 1111 494 1115.03 494 1120V1210C494 1214.97 489.971 1219 485 1219H205C200.029 1219 196 1214.97 196 1210V1163.55V1120C196 1115.03 200.029 1111 205 1111H345Z" fill="#121212" stroke="white" stroke-width="2"></path><text fill="white" xml:space="preserve" style="white-space:pre;" font-family="Cantarell" font-size="30" font-weight="500" letter-spacing="0em"><tspan x="236" y="1176.07">Analysis Report</tspan></text><path d="M0.758805 528.172C1.77246 525.728 3.72772 523.772 6.17212 522.759L6.55518 523.683C7.61496 523.243 8.77783 523 10 523H13.85V522H21.55V523H29.25V522H36.95V523H44.65V522H52.35V523H60.05V522H67.75V523H75.45V522H83.15V523H87H90.85V522H98.55V523H106.25V522H113.95V523H121.65V522H129.35V523H137.05V522H144.75V523H152.45V522H160.15V523H164C165.222 523 166.385 523.243 167.445 523.683L167.828 522.759C170.272 523.772 172.228 525.728 173.241 528.172L172.317 528.555C172.757 529.615 173 530.778 173 532V535.75H174V543.25H173V550.75H174V558.25H173V565.75H174V573.25H173V580.75H174V588.25H173V595.75H174V603.25H173V610.75H174V618.25H173V622C173 623.222 172.757 624.385 172.317 625.445L173.241 625.828C172.228 628.272 170.272 630.228 167.828 631.241L167.445 630.317C166.385 630.757 165.222 631 164 631H160.15V632H152.45V631H144.75V632H137.05V631H129.35V632H121.65V631H113.95V632H106.25V631H98.55V632H90.85V631H83.15V632H75.45V631H67.75V632H60.05V631H52.35V632H44.65V631H36.95V632H29.25V631H21.55V632H13.85V631H10C8.77784 631 7.61496 630.757 6.55518 630.317L6.17212 631.241C3.72772 630.228 1.77246 628.272 0.758806 625.828L1.68253 625.445C1.24306 624.385 1 623.222 1 622V618.129H0V610.388H1V602.647H0V594.906H1V587.164H0V579.423H1V575.553V571.923H0V564.664H1V557.406H0V550.147H1V542.888H0V535.629H1V532C1 530.778 1.24306 529.615 1.68253 528.555L0.758805 528.172Z" fill="#121212" stroke="white" stroke-width="2" stroke-dasharray="8 8"></path><text fill="white" xml:space="preserve" style="white-space:pre;" font-family="Cantarell" font-size="30" font-weight="500" letter-spacing="0em"><tspan x="46" y="570.072">Price </tspan><tspan x="46" y="607.072">Agent</tspan></text><path d="M0.758805 796.172C1.77246 793.728 3.72772 791.772 6.17212 790.759L6.55518 791.683C7.61496 791.243 8.77783 791 10 791H14.0893V790H22.2678V791H30.4464V790H38.625V791H46.8036V790H54.9821V791H63.1607V790H71.3393V791H79.5179V790H87.6964V791H95.875V790H104.054V791H112.232V790H120.411V791H124.5H128.589V790H136.768V791H144.946V790H153.125V791H161.304V790H169.482V791H177.661V790H185.839V791H194.018V790H202.196V791H210.375V790H218.554V791H226.732V790H234.911V791H239C240.222 791 241.385 791.243 242.445 791.683L242.828 790.759C245.272 791.772 247.228 793.728 248.241 796.172L247.317 796.555C247.757 797.615 248 798.778 248 800V803.75H249V811.25H248V818.75H249V826.25H248V833.75H249V841.25H248V848.75H249V856.25H248V863.75H249V871.25H248V878.75H249V886.25H248V890C248 891.222 247.757 892.385 247.317 893.445L248.241 893.828C247.228 896.272 245.272 898.228 242.828 899.241L242.445 898.317C241.385 898.757 240.222 899 239 899H234.911V900H226.732V899H218.554V900H210.375V899H202.196V900H194.018V899H185.839V900H177.661V899H169.482V900H161.304V899H153.125V900H144.946V899H136.768V900H128.589V899H120.411V900H112.232V899H104.054V900H95.875V899H87.6964V900H79.5179V899H71.3393V900H63.1607V899H54.9822V900H46.8036V899H38.625V900H30.4464V899H22.2679V900H14.0893V899H10C8.77784 899 7.61496 898.757 6.55518 898.317L6.17212 899.241C3.72772 898.228 1.77246 896.272 0.758806 893.828L1.68253 893.445C1.24306 892.385 1 891.222 1 890V886.129H0V878.388H1V870.647H0V862.906H1V855.164H0V847.423H1V843.553V839.923H0V832.664H1V825.406H0V818.147H1V810.888H0V803.629H1V800C1 798.778 1.24306 797.615 1.68253 796.555L0.758805 796.172Z" fill="#121212" stroke="white" stroke-width="2" stroke-dasharray="8 8"></path><text fill="white" xml:space="preserve" style="white-space:pre;" font-family="Cantarell" font-size="30" font-weight="500" letter-spacing="0em"><tspan x="20" y="838.072">Summarization </tspan><tspan x="20" y="875.072">Agent</tspan></text><path d="M440.759 796.172C441.772 793.728 443.728 791.772 446.172 790.759L446.555 791.683C447.615 791.243 448.778 791 450 791H454.089V790H462.268V791H470.446V790H478.625V791H486.804V790H494.982V791H503.161V790H511.339V791H519.518V790H527.696V791H535.875V790H544.054V791H552.232V790H560.411V791H564.5H568.589V790H576.768V791H584.946V790H593.125V791H601.304V790H609.482V791H617.661V790H625.839V791H634.018V790H642.196V791H650.375V790H658.554V791H666.732V790H674.911V791H679C680.222 791 681.385 791.243 682.445 791.683L682.828 790.759C685.272 791.772 687.228 793.728 688.241 796.172L687.317 796.555C687.757 797.615 688 798.778 688 800V803.75H689V811.25H688V818.75H689V826.25H688V833.75H689V841.25H688V848.75H689V856.25H688V863.75H689V871.25H688V878.75H689V886.25H688V890C688 891.222 687.757 892.385 687.317 893.445L688.241 893.828C687.228 896.272 685.272 898.228 682.828 899.241L682.445 898.317C681.385 898.757 680.222 899 679 899H674.911V900H666.732V899H658.554V900H650.375V899H642.196V900H634.018V899H625.839V900H617.661V899H609.482V900H601.304V899H593.125V900H584.946V899H576.768V900H568.589V899H560.411V900H552.232V899H544.054V900H535.875V899H527.696V900H519.518V899H511.339V900H503.161V899H494.982V900H486.804V899H478.625V900H470.446V899H462.268V900H454.089V899H450C448.778 899 447.615 898.757 446.555 898.317L446.172 899.241C443.728 898.228 441.772 896.272 440.759 893.828L441.683 893.445C441.243 892.385 441 891.222 441 890V886.129H440V878.388H441V870.647H440V862.906H441V855.164H440V847.423H441V843.553V839.923H440V832.664H441V825.406H440V818.147H441V810.888H440V803.629H441V800C441 798.778 441.243 797.615 441.683 796.555L440.759 796.172Z" fill="#121212" stroke="white" stroke-width="2" stroke-dasharray="8 8"></path><text fill="white" xml:space="preserve" style="white-space:pre;" font-family="Cantarell" font-size="30" font-weight="500" letter-spacing="0em"><tspan x="481" y="838.072">Sentimental </tspan><tspan x="481" y="875.072">Agent</tspan></text><path d="M119.759 340.172C120.772 337.728 122.728 335.772 125.172 334.759L125.555 335.683C126.615 335.243 127.778 335 129 335H132.85V334H140.55V335H148.25V334H155.95V335H163.65V334H171.35V335H179.05V334H186.75V335H194.45V334H202.15V335H206H209.85V334H217.55V335H225.25V334H232.95V335H240.65V334H248.35V335H256.05V334H263.75V335H271.45V334H279.15V335H283C284.222 335 285.385 335.243 286.445 335.683L286.828 334.759C289.272 335.772 291.228 337.728 292.241 340.172L291.317 340.555C291.757 341.615 292 342.778 292 344V347.75H293V355.25H292V362.75H293V370.25H292V377.75H293V385.25H292V392.75H293V400.25H292V407.75H293V415.25H292V422.75H293V430.25H292V434C292 435.222 291.757 436.385 291.317 437.445L292.241 437.828C291.228 440.272 289.272 442.228 286.828 443.241L286.445 442.317C285.385 442.757 284.222 443 283 443H279.15V444H271.45V443H263.75V444H256.05V443H248.35V444H240.65V443H232.95V444H225.25V443H217.55V444H209.85V443H202.15V444H194.45V443H186.75V444H179.05V443H171.35V444H163.65V443H155.95V444H148.25V443H140.55V444H132.85V443H129C127.778 443 126.615 442.757 125.555 442.317L125.172 443.241C122.728 442.228 120.772 440.272 119.759 437.828L120.683 437.445C120.243 436.385 120 435.222 120 434V430.129H119V422.388H120V414.647H119V406.906H120V399.164H119V391.423H120V387.553V383.923H119V376.664H120V369.406H119V362.147H120V354.888H119V347.629H120V344C120 342.778 120.243 341.615 120.683 340.555L119.759 340.172Z" fill="#121212" stroke="white" stroke-width="2" stroke-dasharray="8 8"></path><text fill="white" xml:space="preserve" style="white-space:pre;" font-family="Cantarell" font-size="30" font-weight="500" letter-spacing="0em"><tspan x="156" y="382.072">Twitter </tspan><tspan x="156" y="419.072">Agents</tspan></text><path d="M317.759 340.172C318.772 337.728 320.728 335.772 323.172 334.759L323.555 335.683C324.615 335.243 325.778 335 327 335H330.85V334H338.55V335H346.25V334H353.95V335H361.65V334H369.35V335H377.05V334H384.75V335H392.45V334H400.15V335H404H407.85V334H415.55V335H423.25V334H430.95V335H438.65V334H446.35V335H454.05V334H461.75V335H469.45V334H477.15V335H481C482.222 335 483.385 335.243 484.445 335.683L484.828 334.759C487.272 335.772 489.228 337.728 490.241 340.172L489.317 340.555C489.757 341.615 490 342.778 490 344V347.75H491V355.25H490V362.75H491V370.25H490V377.75H491V385.25H490V392.75H491V400.25H490V407.75H491V415.25H490V422.75H491V430.25H490V434C490 435.222 489.757 436.385 489.317 437.445L490.241 437.828C489.228 440.272 487.272 442.228 484.828 443.241L484.445 442.317C483.385 442.757 482.222 443 481 443H477.15V444H469.45V443H461.75V444H454.05V443H446.35V444H438.65V443H430.95V444H423.25V443H415.55V444H407.85V443H400.15V444H392.45V443H384.75V444H377.05V443H369.35V444H361.65V443H353.95V444H346.25V443H338.55V444H330.85V443H327C325.778 443 324.615 442.757 323.555 442.317L323.172 443.241C320.728 442.228 318.772 440.272 317.759 437.828L318.683 437.445C318.243 436.385 318 435.222 318 434V430.129H317V422.388H318V414.647H317V406.906H318V399.164H317V391.423H318V387.553V383.923H317V376.664H318V369.406H317V362.147H318V354.888H317V347.629H318V344C318 342.778 318.243 341.615 318.683 340.555L317.759 340.172Z" fill="#121212" stroke="white" stroke-width="2" stroke-dasharray="8 8"></path><text fill="white" xml:space="preserve" style="white-space:pre;" font-family="Cantarell" font-size="30" font-weight="500" letter-spacing="0em"><tspan x="337" y="382.072">Facebook </tspan><tspan x="337" y="419.072">Agents</tspan></text><path d="M515.759 340.172C516.772 337.728 518.728 335.772 521.172 334.759L521.555 335.683C522.615 335.243 523.778 335 525 335H528.85V334H536.55V335H544.25V334H551.95V335H559.65V334H567.35V335H575.05V334H582.75V335H590.45V334H598.15V335H602H605.85V334H613.55V335H621.25V334H628.95V335H636.65V334H644.35V335H652.05V334H659.75V335H667.45V334H675.15V335H679C680.222 335 681.385 335.243 682.445 335.683L682.828 334.759C685.272 335.772 687.228 337.728 688.241 340.172L687.317 340.555C687.757 341.615 688 342.778 688 344V347.75H689V355.25H688V362.75H689V370.25H688V377.75H689V385.25H688V392.75H689V400.25H688V407.75H689V415.25H688V422.75H689V430.25H688V434C688 435.222 687.757 436.385 687.317 437.445L688.241 437.828C687.228 440.272 685.272 442.228 682.828 443.241L682.445 442.317C681.385 442.757 680.222 443 679 443H675.15V444H667.45V443H659.75V444H652.05V443H644.35V444H636.65V443H628.95V444H621.25V443H613.55V444H605.85V443H598.15V444H590.45V443H582.75V444H575.05V443H567.35V444H559.65V443H551.95V444H544.25V443H536.55V444H528.85V443H525C523.778 443 522.615 442.757 521.555 442.317L521.172 443.241C518.728 442.228 516.772 440.272 515.759 437.828L516.683 437.445C516.243 436.385 516 435.222 516 434V430.129H515V422.388H516V414.647H515V406.906H516V399.164H515V391.423H516V387.553V383.923H515V376.664H516V369.406H515V362.147H516V354.888H515V347.629H516V344C516 342.778 516.243 341.615 516.683 340.555L515.759 340.172Z" fill="#121212" stroke="white" stroke-width="2" stroke-dasharray="8 8"></path><text fill="white" xml:space="preserve" style="white-space:pre;" font-family="Cantarell" font-size="30" font-weight="500" letter-spacing="0em"><tspan x="548" y="382.072">Discord </tspan><tspan x="548" y="419.072">Agents</tspan></text><path d="M345 110L345 222C345 233.046 353.954 242 365 242L384 242C395.046 242 404 250.954 404 262L404 322" stroke="#6D6D6D" stroke-width="2"></path>',17)),B("path",{ref_key:"line1",ref:t,d:"M345 110L345 222C345 233.046 353.954 242 365 242L384 242C395.046 242 404 250.954 404 262L404 322",stroke:"#44DAC8","stroke-width":"2"},null,512),_[1]||(_[1]=B("path",{d:"M344.999 110L344.999 222C344.999 233.046 336.045 242 324.999 242L225 242C213.954 242 205 250.954 205 262L205 322",stroke:"#6D6D6D","stroke-width":"2"},null,-1)),B("path",{ref_key:"line3",ref:i,d:"M344.999 110L344.999 222C344.999 233.046 336.045 242 324.999 242L225 242C213.954 242 205 250.954 205 262L205 322",stroke:"#44DAC8","stroke-width":"2"},null,512),_[2]||(_[2]=B("path",{d:"M205.499 444L205.499 610C205.499 621.046 214.453 630 225.499 630L544 630C555.046 630 564 638.954 564 650L564 778",stroke:"#6D6D6D","stroke-width":"2"},null,-1)),B("path",{ref_key:"line7",ref:s,d:"M205.499 444L205.499 610C205.499 621.046 214.453 630 225.499 630L544 630C555.046 630 564 638.954 564 650L564 778",stroke:"#44DAC8","stroke-width":"2"},null,512),_[3]||(_[3]=B("path",{d:"M88 900L88 972C88 983.046 96.9543 992 108 992L325 992C336.046 992 345 1000.95 345 1012L345 1098",stroke:"#6D6D6D","stroke-width":"2"},null,-1)),B("path",{ref_key:"line10",ref:c,d:"M88 900L88 972C88 983.046 96.9543 992 108 992L325 992C336.046 992 345 1000.95 345 1012L345 1098",stroke:"#44DAC8","stroke-width":"2"},null,512),_[4]||(_[4]=B("path",{d:"M603 444L603 610.5C603 621.27 594.27 630 583.5 630V630C572.73 630 564 638.73 564 649.5L564 778",stroke:"#6D6D6D","stroke-width":"2"},null,-1)),B("path",{ref_key:"line5",ref:a,d:"M603 444L603 610.5C603 621.27 594.27 630 583.5 630V630C572.73 630 564 638.73 564 649.5L564 778",stroke:"#44DAC8","stroke-width":"2"},null,512),_[5]||(_[5]=B("path",{d:"M404 444L404 610C404 621.046 412.954 630 424 630L544 630C555.046 630 564 638.954 564 650L564 778",stroke:"#6D6D6D","stroke-width":"2"},null,-1)),B("path",{ref_key:"line4",ref:n,d:"M404 444L404 610C404 621.046 412.954 630 424 630L544 630C555.046 630 564 638.954 564 650L564 778",stroke:"#44DAC8","stroke-width":"2"},null,512),_[6]||(_[6]=B("path",{d:"M344.999 110L344.999 222C344.999 233.046 336.045 242 324.999 242L107 242C95.9543 242 87 250.954 87 262L87 510",stroke:"#6D6D6D","stroke-width":"2"},null,-1)),B("path",{ref_key:"line2",ref:r,d:"M344.999 110L344.999 222C344.999 233.046 336.045 242 324.999 242L107 242C95.9543 242 87 250.954 87 262L87 510",stroke:"#44DAC8","stroke-width":"2"},null,512),_[7]||(_[7]=B("path",{d:"M87 632L87 778",stroke:"#6D6D6D","stroke-width":"2"},null,-1)),B("path",{ref_key:"line8",ref:l,d:"M87 632L87 778",stroke:"#44DAC8","stroke-width":"2"},null,512),_[8]||(_[8]=B("path",{d:"M440 845L261 845",stroke:"#6D6D6D","stroke-width":"2"},null,-1)),B("path",{ref_key:"line9",ref:u,d:"M440 845L261 845",stroke:"#44DAC8","stroke-width":"2"},null,512),_[9]||(_[9]=B("path",{d:"M345.499 110L345.499 222C345.499 233.046 354.453 242 365.499 242L582.999 242C594.045 242 602.999 250.954 602.999 262L602.999 322",stroke:"#6D6D6D","stroke-width":"2"},null,-1)),B("path",{ref_key:"line6",ref:o,d:"M345.499 110L345.499 222C345.499 233.046 354.453 242 365.499 242L582.999 242C594.045 242 602.999 250.954 602.999 262L602.999 322",stroke:"#44DAC8","stroke-width":"2"},null,512),_[10]||(_[10]=Mu('<text fill="white" xml:space="preserve" style="white-space:pre;" font-family="Cantarell" font-size="24" font-weight="500" letter-spacing="0em"><tspan x="369" y="181.758">Ticker</tspan></text><text fill="white" xml:space="preserve" style="white-space:pre;" font-family="Cantarell" font-size="24" font-weight="500" letter-spacing="0em"><tspan x="111" y="719.758">Price Fluctruaction</tspan></text><text fill="white" xml:space="preserve" style="white-space:pre;" font-family="Cantarell" font-size="24" font-weight="500" letter-spacing="0em"><tspan x="278" y="795.758">Sentimental </tspan><tspan x="278" y="826.758">Data</tspan></text>',3)),B("path",{ref_key:"arrow1",ref:h,d:"M215 322L205 334L195 322L215 322Z",fill:"#6D6D6D"},null,512),B("path",{ref_key:"arrow4",ref:p,d:"M97 510L87 522L77 510L97 510Z",fill:"#6D6D6D"},null,512),B("path",{ref_key:"arrow6",ref:m,d:"M97 778L87 790L77 778L97 778Z",fill:"#6D6D6D"},null,512),B("path",{ref_key:"arrow8",ref:y,d:"M355 1098L345 1110L335 1098L355 1098Z",fill:"#6D6D6D"},null,512),B("path",{ref_key:"arrow2",ref:d,d:"M414 322L404 334L394 322L414 322Z",fill:"#6D6D6D"},null,512),B("path",{ref_key:"arrow3",ref:f,d:"M613 322L603 334L593 322L613 322Z",fill:"#6D6D6D"},null,512),B("path",{ref_key:"arrow5",ref:v,d:"M574 778L564 790L554 778L574 778Z",fill:"#6D6D6D"},null,512),B("path",{ref_key:"arrow7",ref:g,d:"M261 855L249 845L261 835L261 855Z",fill:"#6D6D6D"},null,512)]))}}),GKe={width:"666",viewBox:"0 0 666 1100",xmlns:"http://www.w3.org/2000/svg",fill:"none"},o0=1e3,Z2=1e3,n9=500,jKe=700,WKe=sr({__name:"case2",setup(e){const t=Fe(),r=Fe(),i=Fe(),n=Fe(),a=Fe(),o=Fe(),s=Fe(),l=Fe(),u=Fe(),c=Fe(),h=Fe(),d=Fe(),f=Fe();function p(v){return v.value.getTotalLength()}return Zs(async()=>{const v=Ba({node:t.value,length:p(t),duration:o0,delay:0}),m=Ba({node:r.value,length:p(r),duration:o0,delay:0}),g=Ba({node:i.value,length:p(i),duration:Z2,delay:o0}),y=Ba({node:n.value,length:p(n),duration:Z2,delay:o0}),x=Ba({node:a.value,length:p(a),duration:jKe,delay:o0+Z2+n9,reverse:!0}),b=Ba({node:o.value,length:p(o),duration:n9,delay:o0+Z2}),_=Ba({node:s.value,length:p(s),duration:n9,delay:o0+Z2,reverse:!0});(function w(){[l,u,c,h,d,f].map(S=>S.value&&(S.value.style.fill="#6D6D6D")),Promise.all([v().then(()=>{l.value&&(l.value.style.fill="#44DAC8"),u.value&&(u.value.style.fill="#44DAC8")}),m(),g().then(()=>{h.value&&(h.value.style.fill="#44DAC8")}),y(),x().then(()=>{f.value&&(f.value.style.fill="#44DAC8")}),b().then(()=>{c.value&&(c.value.style.fill="#44DAC8"),d.value&&(d.value.style.fill="#44DAC8")}),_()]).then(()=>setTimeout(w,500))})()}),(v,m)=>(We(),tt("svg",GKe,[m[0]||(m[0]=Mu('<path d="M315 1H455C459.971 1 464 5.02944 464 10V100C464 104.971 459.971 109 455 109H175C170.029 109 166 104.971 166 100V53.5526V10C166 5.02944 170.029 1 175 1H315Z" fill="#121212" stroke="white" stroke-width="2"></path><text fill="white" xml:space="preserve" style="white-space:pre;" font-family="Cantarell" font-size="30" font-weight="500" letter-spacing="0em"><tspan x="199" y="48.0723">Get trading pairs </tspan><tspan x="199" y="85.0723">from prompt</tspan></text><path d="M315 977H455C459.971 977 464 981.029 464 986V1076C464 1080.97 459.971 1085 455 1085H175C170.029 1085 166 1080.97 166 1076V1029.55V986C166 981.029 170.029 977 175 977H315Z" fill="#121212" stroke="white" stroke-width="2"></path><text fill="white" xml:space="preserve" style="white-space:pre;" font-family="Cantarell" font-size="30" font-weight="500" letter-spacing="0em"><tspan x="189" y="1042.07">Final confirmation</tspan></text><path d="M381.759 648.172C382.772 645.728 384.728 643.772 387.172 642.759L387.555 643.683C388.615 643.243 389.778 643 391 643H395.089V642H403.268V643H411.446V642H419.625V643H427.804V642H435.982V643H444.161V642H452.339V643H460.518V642H468.696V643H476.875V642H485.054V643H493.232V642H501.411V643H505.5H509.589V642H517.768V643H525.946V642H534.125V643H542.304V642H550.482V643H558.661V642H566.839V643H575.018V642H583.196V643H591.375V642H599.554V643H607.732V642H615.911V643H620C621.222 643 622.385 643.243 623.445 643.683L623.828 642.759C626.272 643.772 628.228 645.728 629.241 648.172L628.317 648.555C628.757 649.615 629 650.778 629 652V655.75H630V663.25H629V670.75H630V678.25H629V685.75H630V693.25H629V700.75H630V708.25H629V715.75H630V723.25H629V730.75H630V738.25H629V742C629 743.222 628.757 744.385 628.317 745.445L629.241 745.828C628.228 748.272 626.272 750.228 623.828 751.241L623.445 750.317C622.385 750.757 621.222 751 620 751H615.911V752H607.732V751H599.554V752H591.375V751H583.196V752H575.018V751H566.839V752H558.661V751H550.482V752H542.304V751H534.125V752H525.946V751H517.768V752H509.589V751H501.411V752H493.232V751H485.054V752H476.875V751H468.696V752H460.518V751H452.339V752H444.161V751H435.982V752H427.804V751H419.625V752H411.446V751H403.268V752H395.089V751H391C389.778 751 388.615 750.757 387.555 750.317L387.172 751.241C384.728 750.228 382.772 748.272 381.759 745.828L382.683 745.445C382.243 744.385 382 743.222 382 742V738.129H381V730.388H382V722.647H381V714.906H382V707.164H381V699.423H382V695.553V691.923H381V684.664H382V677.406H381V670.147H382V662.888H381V655.629H382V652C382 650.778 382.243 649.615 382.683 648.555L381.759 648.172Z" fill="#121212" stroke="white" stroke-width="2" stroke-dasharray="8 8"></path><text fill="white" xml:space="preserve" style="white-space:pre;" font-family="Cantarell" font-size="30" font-weight="500" letter-spacing="0em"><tspan x="415" y="709.072">Wallet Agent</tspan></text><path d="M0.758805 648.172C1.77246 645.728 3.72772 643.772 6.17212 642.759L6.55518 643.683C7.61496 643.243 8.77783 643 10 643H14.0893V642H22.2678V643H30.4464V642H38.625V643H46.8036V642H54.9821V643H63.1607V642H71.3393V643H79.5179V642H87.6964V643H95.875V642H104.054V643H112.232V642H120.411V643H124.5H128.589V642H136.768V643H144.946V642H153.125V643H161.304V642H169.482V643H177.661V642H185.839V643H194.018V642H202.196V643H210.375V642H218.554V643H226.732V642H234.911V643H239C240.222 643 241.385 643.243 242.445 643.683L242.828 642.759C245.272 643.772 247.228 645.728 248.241 648.172L247.317 648.555C247.757 649.615 248 650.778 248 652V655.75H249V663.25H248V670.75H249V678.25H248V685.75H249V693.25H248V700.75H249V708.25H248V715.75H249V723.25H248V730.75H249V738.25H248V742C248 743.222 247.757 744.385 247.317 745.445L248.241 745.828C247.228 748.272 245.272 750.228 242.828 751.241L242.445 750.317C241.385 750.757 240.222 751 239 751H234.911V752H226.732V751H218.554V752H210.375V751H202.196V752H194.018V751H185.839V752H177.661V751H169.482V752H161.304V751H153.125V752H144.946V751H136.768V752H128.589V751H120.411V752H112.232V751H104.054V752H95.875V751H87.6964V752H79.5179V751H71.3393V752H63.1607V751H54.9822V752H46.8036V751H38.625V752H30.4464V751H22.2679V752H14.0893V751H10C8.77784 751 7.61496 750.757 6.55518 750.317L6.17212 751.241C3.72772 750.228 1.77246 748.272 0.758806 745.828L1.68253 745.445C1.24306 744.385 1 743.222 1 742V738.129H0V730.388H1V722.647H0V714.906H1V707.164H0V699.423H1V695.553V691.923H0V684.664H1V677.406H0V670.147H1V662.888H0V655.629H1V652C1 650.778 1.24306 649.615 1.68253 648.555L0.758805 648.172Z" fill="#121212" stroke="white" stroke-width="2" stroke-dasharray="8 8"></path><text fill="white" xml:space="preserve" style="white-space:pre;" font-family="Cantarell" font-size="30" font-weight="500" letter-spacing="0em"><tspan x="14" y="708.072">On-ramp Agent</tspan></text><path d="M38.7588 340.172C39.7725 337.728 41.7277 335.772 44.1721 334.759L44.5552 335.683C45.615 335.243 46.7778 335 48 335H51.85V334H59.55V335H67.25V334H74.95V335H82.65V334H90.35V335H98.05V334H105.75V335H113.45V334H121.15V335H125H128.85V334H136.55V335H144.25V334H151.95V335H159.65V334H167.35V335H175.05V334H182.75V335H190.45V334H198.15V335H202C203.222 335 204.385 335.243 205.445 335.683L205.828 334.759C208.272 335.772 210.228 337.728 211.241 340.172L210.317 340.555C210.757 341.615 211 342.778 211 344V347.75H212V355.25H211V362.75H212V370.25H211V377.75H212V385.25H211V392.75H212V400.25H211V407.75H212V415.25H211V422.75H212V430.25H211V434C211 435.222 210.757 436.385 210.317 437.445L211.241 437.828C210.228 440.272 208.272 442.228 205.828 443.241L205.445 442.317C204.385 442.757 203.222 443 202 443H198.15V444H190.45V443H182.75V444H175.05V443H167.35V444H159.65V443H151.95V444H144.25V443H136.55V444H128.85V443H121.15V444H113.45V443H105.75V444H98.05V443H90.35V444H82.65V443H74.95V444H67.25V443H59.55V444H51.85V443H48C46.7778 443 45.615 442.757 44.5552 442.317L44.1721 443.241C41.7277 442.228 39.7725 440.272 38.7588 437.828L39.6825 437.445C39.2431 436.385 39 435.222 39 434V430.129H38V422.388H39V414.647H38V406.906H39V399.164H38V391.423H39V387.553V383.923H38V376.664H39V369.406H38V362.147H39V354.888H38V347.629H39V344C39 342.778 39.2431 341.615 39.6825 340.555L38.7588 340.172Z" fill="#121212" stroke="white" stroke-width="2" stroke-dasharray="8 8"></path><text fill="white" xml:space="preserve" style="white-space:pre;" font-family="Cantarell" font-size="30" font-weight="500" letter-spacing="0em"><tspan x="64" y="382.072">Uniswap </tspan><tspan x="64" y="419.072">Agent</tspan></text><path d="M419.759 340.172C420.772 337.728 422.728 335.772 425.172 334.759L425.555 335.683C426.615 335.243 427.778 335 429 335H432.85V334H440.55V335H448.25V334H455.95V335H463.65V334H471.35V335H479.05V334H486.75V335H494.45V334H502.15V335H506H509.85V334H517.55V335H525.25V334H532.95V335H540.65V334H548.35V335H556.05V334H563.75V335H571.45V334H579.15V335H583C584.222 335 585.385 335.243 586.445 335.683L586.828 334.759C589.272 335.772 591.228 337.728 592.241 340.172L591.317 340.555C591.757 341.615 592 342.778 592 344V347.75H593V355.25H592V362.75H593V370.25H592V377.75H593V385.25H592V392.75H593V400.25H592V407.75H593V415.25H592V422.75H593V430.25H592V434C592 435.222 591.757 436.385 591.317 437.445L592.241 437.828C591.228 440.272 589.272 442.228 586.828 443.241L586.445 442.317C585.385 442.757 584.222 443 583 443H579.15V444H571.45V443H563.75V444H556.05V443H548.35V444H540.65V443H532.95V444H525.25V443H517.55V444H509.85V443H502.15V444H494.45V443H486.75V444H479.05V443H471.35V444H463.65V443H455.95V444H448.25V443H440.55V444H432.85V443H429C427.778 443 426.615 442.757 425.555 442.317L425.172 443.241C422.728 442.228 420.772 440.272 419.759 437.828L420.683 437.445C420.243 436.385 420 435.222 420 434V430.129H419V422.388H420V414.647H419V406.906H420V399.164H419V391.423H420V387.553V383.923H419V376.664H420V369.406H419V362.147H420V354.888H419V347.629H420V344C420 342.778 420.243 341.615 420.683 340.555L419.759 340.172Z" fill="#121212" stroke="white" stroke-width="2" stroke-dasharray="8 8"></path><text fill="white" xml:space="preserve" style="white-space:pre;" font-family="Cantarell" font-size="30" font-weight="500" letter-spacing="0em"><tspan x="468" y="401.072">1inch</tspan></text><path d="M314.999 110L314.999 222C314.999 233.046 306.045 242 294.999 242L145 242C133.954 242 125 250.954 125 262L125 322" stroke="#6D6D6D" stroke-width="2"></path>',13)),B("path",{ref_key:"line1",ref:t,d:"M314.999 110L314.999 222C314.999 233.046 306.045 242 294.999 242L145 242C133.954 242 125 250.954 125 262L125 322",stroke:"#44DAC8","stroke-width":"2"},null,512),m[1]||(m[1]=B("path",{d:"M315 964L315 884L315 717C315 705.954 323.954 697 335 697L381 697",stroke:"#6D6D6D","stroke-width":"2"},null,-1)),B("path",{ref_key:"line7",ref:s,d:"M315 964L315 884L315 717C315 705.954 323.954 697 335 697L381 697",stroke:"#44DAC8","stroke-width":"2"},null,512),m[2]||(m[2]=B("path",{d:"M506 763.5L506 1010C506 1021.05 497.046 1030 486 1030L465 1030",stroke:"#6D6D6D","stroke-width":"2"},null,-1)),B("path",{ref_key:"line5",ref:a,d:"M506 763.5L506 1010C506 1021.05 497.046 1030 486 1030L465 1030",stroke:"#44DAC8","stroke-width":"2"},null,512),m[3]||(m[3]=B("path",{d:"M125 444L125 516C125 527.046 133.954 536 145 536L486 536C497.046 536 506 544.954 506 556L506 622",stroke:"#6D6D6D","stroke-width":"2"},null,-1)),B("path",{ref_key:"line4",ref:n,d:"M125 444L125 516C125 527.046 133.954 536 145 536L486 536C497.046 536 506 544.954 506 556L506 622",stroke:"#44DAC8","stroke-width":"2"},null,512),m[4]||(m[4]=B("path",{d:"M381 697L261 697",stroke:"#6D6D6D","stroke-width":"2"},null,-1)),B("path",{ref_key:"line6",ref:o,d:"M381 697L261 697",stroke:"#44DAC8","stroke-width":"2"},null,512),m[5]||(m[5]=B("path",{d:"M506 444L506 536L506 630",stroke:"#6D6D6D","stroke-width":"2"},null,-1)),B("path",{ref_key:"line3",ref:i,d:"M506 444L506 536L506 630",stroke:"#44DAC8","stroke-width":"2"},null,512),m[6]||(m[6]=B("path",{d:"M315.499 110L315.499 222C315.499 233.046 324.453 242 335.499 242L485.999 242C497.045 242 505.999 250.954 505.999 262L505.999 322",stroke:"#6D6D6D","stroke-width":"2"},null,-1)),B("path",{ref_key:"line2",ref:r,d:"M315.499 110L315.499 222C315.499 233.046 324.453 242 335.499 242L485.999 242C497.045 242 505.999 250.954 505.999 262L505.999 322",stroke:"#44DAC8","stroke-width":"2"},null,512),m[7]||(m[7]=Mu('<text fill="white" xml:space="preserve" style="white-space:pre;" font-family="Cantarell" font-size="24" font-weight="500" letter-spacing="0em"><tspan x="339" y="181.758">Trading pairs</tspan></text><text fill="white" xml:space="preserve" style="white-space:pre;" font-family="Cantarell" font-size="24" font-weight="500" letter-spacing="0em"><tspan x="147.906" y="181.758">Trading pairs</tspan></text><text fill="white" xml:space="preserve" style="white-space:pre;" font-family="Cantarell" font-size="24" font-weight="500" letter-spacing="0em"><tspan x="519" y="885.758">Price </tspan><tspan x="519" y="916.758">Fluctruaction</tspan></text>',3)),B("path",{ref_key:"arrow1",ref:l,d:"M135 322L125 334L115 322L135 322Z",fill:"#6D6D6D"},null,512),B("path",{ref_key:"arrow3",ref:c,d:"M325 964L315 976L305 964L325 964Z",fill:"#6D6D6D"},null,512),B("path",{ref_key:"arrow6",ref:f,d:"M516 764L506 752L496 764L516 764Z",fill:"#6D6D6D"},null,512),B("path",{ref_key:"arrow2",ref:u,d:"M516 322L506 334L496 322L516 322Z",fill:"#6D6D6D"},null,512),B("path",{ref_key:"arrow4",ref:h,d:"M516 630L506 642L496 630L516 630Z",fill:"#6D6D6D"},null,512),B("path",{ref_key:"arrow5",ref:d,d:"M261 707L249 697L261 687L261 707Z",fill:"#6D6D6D"},null,512)]))}}),wF=""+new URL("layer1.BueqU39-.png",import.meta.url).href,qKe=Object.freeze(Object.defineProperty({__proto__:null,default:wF},Symbol.toStringTag,{value:"Module"})),_F=""+new URL("layer2.F-2ymfBx.png",import.meta.url).href,YKe=Object.freeze(Object.defineProperty({__proto__:null,default:_F},Symbol.toStringTag,{value:"Module"})),AF=""+new URL("layer3.B_ZBFaWo.png",import.meta.url).href,XKe=Object.freeze(Object.defineProperty({__proto__:null,default:AF},Symbol.toStringTag,{value:"Module"})),ZKe={width:"395",viewBox:"0 0 395 756",xmlns:"http://www.w3.org/2000/svg",fill:"none"},QKe=["fill"],KKe=["stroke"],JKe=["stroke"],$Ke=["stroke"],eJe=["fill"],tJe=["stroke"],rJe=["stroke"],iJe=["stroke"],nJe=["fill"],aJe=["stroke"],oJe=["stroke"],sJe=["stroke"],lJe=["fill"],uJe=["stroke"],cJe=["stroke"],hJe=["stroke"],dJe=["fill"],fJe=["stroke"],pJe=["stroke"],vJe=["stroke"],mJe=["fill"],gJe=["stroke"],yJe=["stroke"],xJe=["stroke"],bJe=sr({__name:"model",props:{activeLayer:{}},emits:["onActiveLayerChange"],setup(e){return(t,r)=>(We(),tt("svg",ZKe,[B("path",{d:"M49 667V633.5L199 720L347 632V667L199 754.5L49 667Z",fill:t.activeLayer===4?"#44DAC8":"#121212"},null,8,QKe),r[8]||(r[8]=B("path",{d:"M199 547L49 633L199 720L347 632L199 547Z",fill:"#121212"},null,-1)),B("path",{d:"M199 720V755",stroke:t.activeLayer===4?"#44DAC8":"white"},null,8,KKe),B("path",{d:"M49 633.312L198.947 547L347 632.181L199 720L49 633.312Z",stroke:t.activeLayer===4?"#44DAC8":"white","stroke-linejoin":"round"},null,8,JKe),B("path",{d:"M49 633V667L199 754.5L347 667V632",stroke:t.activeLayer===4?"#44DAC8":"white"},null,8,$Ke),r[9]||(r[9]=B("path",{d:"M166 630V542L199 561L230 543V630L199 649L166 630Z",fill:"#121212"},null,-1)),r[10]||(r[10]=B("path",{d:"M166 541.742V600.002L199 619.002L230 600.002V542.502",stroke:"#666666"},null,-1)),r[11]||(r[11]=B("path",{d:"M199 560.5V619",stroke:"#666666"},null,-1)),B("path",{d:"M49 474V440.5L199 527L347 439V474L199 561.5L49 474Z",fill:t.activeLayer===3?"#44DAC8":"#121212"},null,8,eJe),r[12]||(r[12]=B("path",{d:"M199 354L49 440L199 527L347 439L199 354Z",fill:"#121212"},null,-1)),B("path",{d:"M199 527V562",stroke:t.activeLayer===3?"#44DAC8":"white"},null,8,tJe),B("path",{d:"M49 440.312L198.947 354L347 439.181L199 527L49 440.312Z",stroke:t.activeLayer===3?"#44DAC8":"white","stroke-linejoin":"round"},null,8,rJe),B("path",{d:"M49 440V474L199 561.5L347 474V439",stroke:t.activeLayer===3?"#44DAC8":"white"},null,8,iJe),r[13]||(r[13]=B("path",{d:"M166 439V351L199 370L230 352V439L199 458L166 439Z",fill:"#121212"},null,-1)),r[14]||(r[14]=B("path",{d:"M166 350.742V409.002L199 428.002L230 409.002V351.502",stroke:"#666666"},null,-1)),r[15]||(r[15]=B("path",{d:"M199 369.5V428",stroke:"#666666"},null,-1)),B("path",{d:"M1 255.5V221L199.5 335L394 219V255.5L199 370L1 255.5Z",fill:t.activeLayer===2?"#44DAC8":"#121212"},null,8,nJe),r[16]||(r[16]=B("path",{d:"M199 105L1.5 220.5L199 335L394 219L199 105Z",fill:"#121212"},null,-1)),B("path",{d:"M1 220.749L198.748 105L394 219L199 335L1 220.749Z",stroke:t.activeLayer===2?"#44DAC8":"white","stroke-linejoin":"round"},null,8,aJe),B("path",{d:"M199 335V370",stroke:t.activeLayer===2?"#44DAC8":"white"},null,8,oJe),B("path",{d:"M1 221V255.5L199 370L394 255.5V219",stroke:t.activeLayer===2?"#44DAC8":"white","stroke-linejoin":"round"},null,8,sJe),r[17]||(r[17]=Mu('<image x="19" y="119" width="355" height="196" href="'+wF+'" data-v-ad32ea31></image><image x="66" y="392" width="261" height="115" href="'+_F+'" data-v-ad32ea31></image><image x="66" y="585" width="261" height="115" href="'+AF+'" data-v-ad32ea31></image><path d="M142.283 176V40" stroke="#44DAC8" data-v-ad32ea31></path><path d="M94.7827 219.866L145.937 20.0718" stroke="#44DAC8" data-v-ad32ea31></path><path d="M189.937 219.866L138.783 20.0718" stroke="#44DAC8" data-v-ad32ea31></path><path d="M198.283 215V79" stroke="#44DAC8" data-v-ad32ea31></path><path d="M150.783 258.866L201.937 59.0718" stroke="#44DAC8" data-v-ad32ea31></path><path d="M245.937 258.866L194.783 59.0718" stroke="#44DAC8" data-v-ad32ea31></path><path d="M257.283 176V40" stroke="#44DAC8" data-v-ad32ea31></path><path d="M209.783 219.866L260.937 20.0718" stroke="#44DAC8" data-v-ad32ea31></path><path d="M304.937 219.866L253.783 20.0718" stroke="#44DAC8" data-v-ad32ea31></path>',12)),B("path",{d:"M107.783 21V39L142.283 58.5L176.783 39V21L142.283 1L107.783 21Z",fill:t.activeLayer===1?"#44DAC8":"#121212"},null,8,lJe),B("path",{d:"M107.783 21L142.283 1L176.783 21L142.283 41.5L107.783 21Z",stroke:t.activeLayer===1?"#121212":"white","stroke-linejoin":"round"},null,8,uJe),B("path",{d:"M107.783 21V38.5L142.283 58.5L176.783 38.5V21",stroke:t.activeLayer===1?"#121212":"white","stroke-linejoin":"round"},null,8,cJe),B("path",{d:"M142.283 41.5V58.5",stroke:t.activeLayer===1?"#121212":"white","stroke-linejoin":"round"},null,8,hJe),B("path",{d:"M163.783 60V78L198.283 97.5L232.783 78V60L198.283 40L163.783 60Z",fill:t.activeLayer===1?"#44DAC8":"#121212"},null,8,dJe),B("path",{d:"M163.783 60L198.283 40L232.783 60L198.283 80.5L163.783 60Z",stroke:t.activeLayer===1?"#121212":"white","stroke-linejoin":"round"},null,8,fJe),B("path",{d:"M163.783 60V77.5L198.283 97.5L232.783 77.5V60",stroke:t.activeLayer===1?"#121212":"white","stroke-linejoin":"round"},null,8,pJe),B("path",{d:"M198.283 80.5V97.5",stroke:t.activeLayer===1?"#121212":"white","stroke-linejoin":"round"},null,8,vJe),B("path",{d:"M222.783 21V39L257.283 58.5L291.783 39V21L257.283 1L222.783 21Z",fill:t.activeLayer===1?"#44DAC8":"#121212"},null,8,mJe),B("path",{d:"M222.783 21L257.283 1L291.783 21L257.283 41.5L222.783 21Z",stroke:t.activeLayer===1?"#121212":"white","stroke-linejoin":"round"},null,8,gJe),B("path",{d:"M222.783 21V38.5L257.283 58.5L291.783 38.5V21",stroke:t.activeLayer===1?"#121212":"white","stroke-linejoin":"round"},null,8,yJe),B("path",{d:"M257.283 41.5V58.5",stroke:t.activeLayer===1?"#121212":"white","stroke-linejoin":"round"},null,8,xJe),B("rect",{x:"0",y:"0",width:"395",height:"100",class:"rect",onMouseover:r[0]||(r[0]=i=>t.$emit("onActiveLayerChange",1)),onMouseout:r[1]||(r[1]=i=>t.$emit("onActiveLayerChange",void 0))},null,32),B("rect",{x:"0",y:"100",width:"395",height:"270",class:"rect",onMouseover:r[2]||(r[2]=i=>t.$emit("onActiveLayerChange",2)),onMouseout:r[3]||(r[3]=i=>t.$emit("onActiveLayerChange",void 0))},null,32),B("rect",{x:"0",y:"370",width:"395",height:"200",class:"rect",onMouseover:r[4]||(r[4]=i=>t.$emit("onActiveLayerChange",3)),onMouseout:r[5]||(r[5]=i=>t.$emit("onActiveLayerChange",void 0))},null,32),B("rect",{x:"0",y:"570",width:"395",height:"200",class:"rect",onMouseover:r[6]||(r[6]=i=>t.$emit("onActiveLayerChange",4)),onMouseout:r[7]||(r[7]=i=>t.$emit("onActiveLayerChange",void 0))},null,32)]))}}),wJe=Ar(bJe,[["__scopeId","data-v-ad32ea31"]]),_Je={class:"center"},AJe=["src"],SJe=["src"],Or=sr({__name:"icon",props:{name:{},size:{},variant:{}},setup(e){const t=e,{size:r=16,variant:i="button"}=t,[n,a]=[Du(r),Du(r)],o=()=>t.name.includes(".")?t.name.split("."):[t.name,"svg"],s=vpe(...o());return ja(()=>t.name,async()=>s.value=await fpe(...o())),(l,u)=>(We(),tt("span",_Je,[ue(i)==="icon"?(We(),tt("img",{key:0,src:ue(s),style:sp({width:ue(n),height:ue(a)})},null,12,AJe)):Kt("",!0),ue(i)==="button"?(We(),tt("div",{key:1,class:"p4 r100p hand center",style:sp({width:ue(n),height:ue(a)})},[B("img",{src:ue(s),class:"wh100p"},null,8,SJe)],4)):Kt("",!0)]))}}),CJe={},EJe={class:"loader"};function MJe(e,t){return We(),tt("div",EJe)}const TJe=Ar(CJe,[["render",MJe],["__scopeId","data-v-fe56b7eb"]]),PJe={class:"loader"},DJe=sr({__name:"loading2",setup(e){vy(r=>({"277c6af6":ue(t)}));const t=Du(56);return(r,i)=>(We(),tt("div",PJe))}}),IJe=Ar(DJe,[["__scopeId","data-v-00a80eb5"]]),LJe=sr({inheritAttrs:!1,__name:"modal",props:{open:{type:Boolean}},emits:["close"],setup(e){return(t,r)=>t.open?(We(),ii(dae,{key:0,to:"#modal"},[B("div",{class:"modal",onWheel:r[1]||(r[1]=PB(()=>{},["prevent"]))},[B("div",r4({class:"card pr"},t.$attrs),[r[2]||(r[2]=B("div",{class:"border1"},null,-1)),r[3]||(r[3]=B("div",{class:"border2"},null,-1)),Ie(ue(Or),{onClick:r[0]||(r[0]=i=>t.$emit("close")),name:"close",class:"icon",size:14}),fs(t.$slots,"default",{},void 0)],16)],32)])):Kt("",!0)}}),kJe=Ar(LJe,[["__scopeId","data-v-7d5f8427"]]),RJe={class:"pr"},OJe={class:"label"},BJe={class:"fb1"},NJe=["onClick"],VJe={class:"fb1"},FJe=sr({__name:"select",props:{label:{},selected:{},options:{}},emits:["onSelectedChange"],setup(e){const t=Fe(!1);return(r,i)=>(We(),tt("div",RJe,[t.value?(We(),tt("div",{key:0,class:"interactive",onClick:i[0]||(i[0]=n=>t.value=!1)})):Kt("",!0),B("p",OJe,Br(r.label),1),B("div",{class:"select-input fbh fbjsb fbac g4 hand",onClick:i[1]||(i[1]=n=>t.value=!0)},[r.selected.icon?(We(),ii(ue(Or),{key:0,name:r.selected.icon,size:24},null,8,["name"])):Kt("",!0),B("p",BJe,Br(r.selected.label),1),Ie(ue(Or),{name:"arrow-down",size:12})]),t.value?(We(),tt("ul",{key:1,class:"list fbv g8 p16",onFocusout:i[2]||(i[2]=n=>t.value=!1)},[(We(!0),tt(ri,null,fd(r.options,n=>(We(),tt("li",{class:Tt(["fbh fbac fbjsb g8 hand",{disabled:n.disabled}]),onClick:a=>(r.$emit("onSelectedChange",n),t.value=!1)},[n.icon?(We(),ii(ue(Or),{key:0,name:n.icon,size:24},null,8,["name"])):Kt("",!0),B("p",VJe,Br(n.label),1),n.key===r.selected.key?(We(),ii(ue(Or),{key:1,name:"check",size:24})):Kt("",!0)],10,NJe))),256))],32)):Kt("",!0)]))}}),bK=Ar(FJe,[["__scopeId","data-v-c8af8942"]]),zJe=["onClick"],HJe={class:"underline active"},UJe=sr({__name:"tab",props:{defaultKey:{},data:{},variant:{}},emits:["onActiveKeyChange"],setup(e,{emit:t}){vy(l=>({e9a6a96a:ue(s),"342dff5a":ue(o),"534690ed":ue(a)}));const r=Fe(),i=t,n=l=>{r.value=l,i("onActiveKeyChange",l)};setTimeout(()=>{var l;r.value=e.defaultKey||((l=e.data[0])==null?void 0:l.key)});const a={ai:"#121212",process:"#44DAC8"}[e.variant],o={ai:"#12121299",process:"#FFFFFF66"}[e.variant],s={ai:3,process:2}[e.variant];return(l,u)=>(We(),tt(ri,null,[B("div",r4(l.$attrs,{class:"tab-bar"}),[(We(!0),tt(ri,null,fd(l.data,({title:c,key:h})=>(We(),tt("div",{onClick:d=>n(h),class:Tt(["tab-item",{active:r.value===h}])},[B("p",null,Br(c),1),py(B("div",HJe,null,512),[[Q6,r.value===h]])],10,zJe))),256))],16),(We(!0),tt(ri,null,fd(l.data,({key:c})=>(We(),tt(ri,null,[r.value===c?fs(l.$slots,c,{key:0},void 0):Kt("",!0)],64))),256))],64))}}),X0e=Ar(UJe,[["__scopeId","data-v-d1411d85"]]),GJe={key:0,class:"toast"},jJe={class:"toast_txt"},WJe=sr({__name:"toast",setup(e){const{toastVisible:t,toastContent:r}=mpe;return(i,n)=>ue(t)?(We(),tt("div",GJe,[B("div",jJe,Br(ue(r)),1)])):Kt("",!0)}}),qJe=Ar(WJe,[["__scopeId","data-v-47970789"]]),YJe={class:"pr oh"},XJe=sr({__name:"box-switch",props:{activeLayer:{}},setup(e){return(t,r)=>(We(),tt("div",YJe,[B("div",{class:Tt(["main",{hovered:!!t.activeLayer}])},[fs(t.$slots,"default",{},void 0)],2),B("div",{class:Tt(["oh r100p secondary-content",{hovered:t.activeLayer===1}])},[fs(t.$slots,"layer1",{},void 0)],2),B("div",{class:Tt(["oh r100p secondary-content",{hovered:t.activeLayer===2}])},[fs(t.$slots,"layer2",{},void 0)],2),B("div",{class:Tt(["oh r100p secondary-content",{hovered:t.activeLayer===3}])},[fs(t.$slots,"layer3",{},void 0)],2),B("div",{class:Tt(["oh r100p secondary-content",{hovered:t.activeLayer===4}])},[fs(t.$slots,"layer4",{},void 0)],2)]))}}),ZJe=Ar(XJe,[["__scopeId","data-v-78cbc7dc"]]),QJe={class:"box-root pr"},KJe={key:0,class:"dot left-bottom"},JJe={key:1,class:"dot right-bottom"},$Je=sr({__name:"box",props:{variant:{}},setup(e){return(t,r)=>(We(),tt("div",QJe,[fs(t.$slots,"default",{},void 0),r[0]||(r[0]=B("svg",{class:"divider",width:"100%"},[B("line",{x1:"-1000",x2:"6000",stroke:"#2d2d2d","stroke-width":"1","stroke-dasharray":"4 4"})],-1)),t.variant!=="bottom"?(We(),tt("div",KJe)):Kt("",!0),t.variant!=="bottom"?(We(),tt("div",JJe)):Kt("",!0)]))}}),fc=Ar($Je,[["__scopeId","data-v-11207e6c"]]),e$e=["viewBox"],t$e=["d","stroke","fill"],r$e={style:{"z-index":"0"}},i$e=sr({__name:"button",props:{width:{},height:{},disabled:{type:Boolean},keepState:{},defaultStroke:{},defaultColor:{},defaultFill:{},activeStroke:{},activeColor:{},activeFill:{},fullWidth:{type:Boolean}},setup(e){vy(v=>({"3b8b7864":ue(c),"1c149a49":ue(h),b11d5c6c:ue(o),"10cf66d5":f.value}));const t=e,{width:r,height:i,fullWidth:n,defaultStroke:a="#44DAC8",defaultColor:o="#44DAC8",defaultFill:s="transparent",activeStroke:l="none",activeFill:u="#44DAC8"}=t,[c,h]=[n?"100%":Du(r),Du(i)],d=Fe(t.keepState==="active"||!1),f=_s(()=>t.activeColor?t.activeColor:"black");async function p(v){v?d.value=!0:(await P4(50),d.value=!1)}return(v,m)=>(We(),tt("div",{class:Tt({disabled:v.disabled})},[B("div",{class:Tt(["button-container center pr hand",{hovered:d.value}]),onMouseenter:m[0]||(m[0]=()=>!v.keepState&&p(!0)),onMouseleave:m[1]||(m[1]=()=>!v.keepState&&p(!1))},[(We(),tt("svg",{class:"svg",viewBox:`0 0 ${ue(r)} ${ue(i)}`,preserveAspectRatio:"none",xmlns:"http://www.w3.org/2000/svg",fill:"none"},[B("path",{d:`M0.5 8.2L8.2 0.5H${ue(r)-1}V${ue(i)-9}L${ue(r)-9} ${ue(i)-1}H0.5V8.2Z`,stroke:d.value?ue(l):ue(a),fill:d.value?ue(u):ue(s)},null,8,t$e)],8,e$e)),B("div",r$e,[fs(v.$slots,"default",{hovered:d.value},void 0)])],34)],2))}}),n$e=Ar(i$e,[["__scopeId","data-v-9eb3a930"]]),a$e={class:"w100p pr"},o$e=sr({__name:"dynamic-input",props:{modelValue:{},modelModifiers:{}},emits:["update:modelValue"],setup(e){const t=Vae(e,"modelValue");return(r,i)=>(We(),tt("div",a$e,[py(B("input",{type:"text","onUpdate:modelValue":i[0]||(i[0]=n=>t.value=n),class:"query"},null,512),[[eoe,t.value]])]))}}),s$e=Ar(o$e,[["__scopeId","data-v-9c62d9c6"]]),l$e={class:"fbh fbac w100p"},u$e=sr({__name:"dynamic-line",props:{variant:{}},setup(e){return(t,r)=>(We(),tt("div",l$e,[B("div",{class:Tt(["w100p",t.variant==="dynamic"?"dynamic":"static"])},null,2),Ie(ue(Or),{name:"arrow2",size:12,variant:"icon"})]))}}),wK=Ar(u$e,[["__scopeId","data-v-729319db"]]),c$e=["viewBox"],h$e=["d","stroke","fill"],d$e={style:{"z-index":"0"}},f$e="rgba(255,255,255,0.3)",p$e=sr({__name:"button",props:{width:{},height:{},isMobile:{type:Boolean},disabled:{type:Boolean},themeStyle:{type:Boolean},keepState:{},animation:{},defaultStroke:{},defaultColor:{},defaultFill:{},activeStroke:{},activeColor:{},activeFill:{}},setup(e){vy(g=>({"074c0f15":ue(f),"6f324c90":ue(p),"53c39139":ue(s),"46e004f4":ue(c),"2914d2a2":f$e}));const t=e,{width:r,height:i,isMobile:n,animation:a="auto",defaultStroke:o="#FFFFFF29",defaultColor:s="var(--primary-text-color)",defaultFill:l="#FFFFFF1A",activeStroke:u="#04040529",activeColor:c="var(--reverse-text-color)",activeFill:h="#FFFFFF"}=t,d=Fe(!1),[f,p]=[Du(r,n),Du(i,n)],v=_s(()=>t.keepState?t.keepState==="active":d.value);async function m(g){g?d.value=!0:(await P4(n?200:50),d.value=!1)}return(g,y)=>(We(),tt("div",{class:Tt(["button-container center pr hand",{hovered:v.value,disabled:g.disabled,animation:ue(a)}]),onMouseenter:y[0]||(y[0]=()=>!g.keepState&&!ue(n)&&m(!0)),onMouseleave:y[1]||(y[1]=()=>!g.keepState&&!ue(n)&&m(!1)),onTouchstart:y[2]||(y[2]=()=>!g.keepState&&ue(n)&&m(!0)),onTouchend:y[3]||(y[3]=()=>!g.keepState&&ue(n)&&m(!1))},[(We(),tt("svg",{class:"svg",viewBox:`0 0 ${ue(r)} ${ue(i)}`,xmlns:"http://www.w3.org/2000/svg",fill:"none"},[B("path",{d:`M0.5 8.2L8.2 0.5H${ue(r)-1}V${ue(i)-9}L${ue(r)-9} ${ue(i)-1}H0.5V8.2Z`,stroke:v.value?ue(u):ue(o),fill:v.value?ue(h):ue(l)},null,8,h$e)],8,c$e)),B("div",d$e,[fs(g.$slots,"default",{hovered:v.value},void 0)])],34))}}),Z0e=Ar(p$e,[["__scopeId","data-v-4b483bee"]]),v$e={class:"link3-root fbh fbac",style:{"z-index":"999"}},m$e={class:"fbh fbac g8"},g$e={key:0,class:"menu-root"},y$e={class:"list"},x$e={target:"_blank",href:"https://readon.me/"},b$e={class:"list-item"},w$e={target:"_blank",href:"https://t.me/share_on_bot"},_$e={class:"list-item"},A$e={target:"_blank",href:"https://content-hub.readon.me"},S$e={class:"list-item"},C$e={target:"_blank",href:"https://lense.revox.ai/"},E$e={class:"list-item"},M$e={class:"fbh fbac g8"},T$e={key:0,class:"menu-root"},P$e={class:"list"},D$e={target:"_blank",href:"https://readon.me/catto"},I$e={class:"list-item"},L$e={target:"_blank",href:"https://readon.me/reon"},k$e={class:"list-item"},R$e={target:"_blank",href:"https://content-hub.readon.me/code"},O$e={class:"list-item"},B$e={class:"fbh fbac g4"},N$e=sr({__name:"link3",emits:["jumpToAiPage"],setup(e){const t=Fe();return(r,i)=>(We(),tt("div",v$e,[B("div",{class:"pr menu-container",onMouseenter:i[2]||(i[2]=n=>t.value="product"),onMouseleave:i[3]||(i[3]=n=>t.value=!1)},[B("div",m$e,[i[8]||(i[8]=B("p",null,"Product",-1)),Ie(ue(Or),{name:"arrow-down2",size:12})]),t.value==="product"?(We(),tt("div",g$e,[B("div",y$e,[B("a",x$e,[B("div",b$e,[i[9]||(i[9]=B("p",null,"ReadON DAO",-1)),Ie(ue(Or),{name:"arrow",size:16})])]),B("a",w$e,[B("div",_$e,[i[10]||(i[10]=B("p",null,"ShareON",-1)),Ie(ue(Or),{name:"arrow",size:16})])]),B("div",{class:"list-item",onClick:i[0]||(i[0]=n=>r.$emit("jumpToAiPage"))},[i[11]||(i[11]=B("p",null,"DPrompt",-1)),Ie(ue(Or),{name:"arrow",size:16})]),B("a",A$e,[B("div",S$e,[i[12]||(i[12]=B("p",null,"Content Hub",-1)),Ie(ue(Or),{name:"arrow",size:16})])]),B("a",C$e,[B("div",E$e,[i[13]||(i[13]=B("p",null,"REVOX Lense",-1)),Ie(ue(Or),{name:"arrow",size:16,variant:"icon"})])]),B("div",{class:"list-item",onClick:i[1]||(i[1]=n=>ue(xs)("https://studio.revox.ai"))},[i[14]||(i[14]=B("p",null,"REVOX Studio",-1)),Ie(ue(Or),{name:"arrow",size:16,variant:"icon"})])])])):Kt("",!0)],32),B("div",{class:"pr menu-container",onMouseenter:i[5]||(i[5]=n=>t.value="asset"),onMouseleave:i[6]||(i[6]=n=>t.value=!1)},[B("div",M$e,[i[15]||(i[15]=B("p",null,"Assets",-1)),Ie(ue(Or),{name:"arrow-down2",size:12})]),t.value==="asset"?(We(),tt("div",T$e,[B("div",P$e,[B("a",D$e,[B("div",I$e,[i[16]||(i[16]=B("p",null,"Catto",-1)),Ie(ue(Or),{name:"arrow",size:16})])]),B("a",L$e,[B("div",k$e,[i[17]||(i[17]=B("p",null,"REON",-1)),Ie(ue(Or),{name:"arrow",size:16})])]),B("a",R$e,[B("div",O$e,[i[18]||(i[18]=B("p",null,"READ",-1)),Ie(ue(Or),{name:"arrow",size:16})])]),B("div",{class:"list-item",variant:"icon",onClick:i[4]||(i[4]=n=>ue(xs)("https://airdrop.revox.ai"))},[i[19]||(i[19]=B("p",null,"REX (pre-TGE)",-1)),Ie(ue(Or),{name:"arrow",size:16})])])])):Kt("",!0)],32),i[21]||(i[21]=B("div",{class:"menu-container"},[B("a",{target:"_blank",href:"https://docs.revox.ai/"},[B("p",null,"Whitepaper")])],-1)),Ie(ue(Z0e),{width:240,height:36,"is-mobile":!1,"keep-state":"active","active-fill":"#44DAC8","active-color":"#121212",onClick:i[7]||(i[7]=n=>ue(xs)("https://lense.revox.ai/wallet")),style:{"margin-left":"48px"}},{default:Er(()=>[B("div",B$e,[Ie(ue(Or),{name:"wallet1",size:16}),i[20]||(i[20]=B("p",{class:"f16"},"Experience Smart Wallet",-1))])]),_:1})]))}}),V$e=Ar(N$e,[["__scopeId","data-v-4010181a"]]),F$e={key:0,class:"menu-root"},z$e={class:"list"},H$e={target:"_blank",href:"https://twitter.com/ReadOnMe3/"},U$e={target:"_blank",href:"https://discord.com/invite/readon/"},G$e={target:"_blank",href:"https://readonofficial.medium.com/"},j$e=sr({__name:"menu",setup(e){const t=Fe(!1),r=Fe();return(i,n)=>(We(),tt("div",{class:"pr menu-container",onMouseenter:n[6]||(n[6]=a=>t.value=!0),onMouseleave:n[7]||(n[7]=a=>t.value=!1)},[Ie(ue(Or),{name:"menu",size:28}),t.value?(We(),tt("div",F$e,[B("div",z$e,[B("a",H$e,[B("div",{class:"list-item",onMouseenter:n[0]||(n[0]=a=>r.value="twitter"),onMouseleave:n[1]||(n[1]=a=>r.value=void 0)},[n[8]||(n[8]=B("p",null,"Twitter",-1)),Ie(ue(Or),{name:r.value==="twitter"?"twitter1.png":"twitter.png",size:24},null,8,["name"])],32)]),B("a",U$e,[B("div",{class:"list-item",onMouseenter:n[2]||(n[2]=a=>r.value="discord"),onMouseleave:n[3]||(n[3]=a=>r.value=void 0)},[n[9]||(n[9]=B("p",null,"Discord",-1)),Ie(ue(Or),{name:r.value==="discord"?"discord1":"discord",size:24},null,8,["name"])],32)]),B("a",G$e,[B("div",{class:"list-item",onMouseenter:n[4]||(n[4]=a=>r.value="medium"),onMouseleave:n[5]||(n[5]=a=>r.value=void 0)},[n[10]||(n[10]=B("p",null,"Medium",-1)),Ie(ue(Or),{name:r.value==="medium"?"medium1.png":"medium.png",size:24},null,8,["name"])],32)])])])):Kt("",!0)],32))}}),W$e=Ar(j$e,[["__scopeId","data-v-b4789a1c"]]),q$e=sr({__name:"slide-card",props:{iconSize:{},icon:{},title:{},description:{}},setup(e){const t=Fe(!1);return(r,i)=>(We(),tt("div",{class:Tt(["fbv","zoom-card-root",{hovered:t.value}]),onMouseenter:i[0]||(i[0]=n=>t.value=!0),onMouseleave:i[1]||(i[1]=n=>t.value=!1)},[B("div",{class:Tt(["icon",{hovered:t.value,large:r.iconSize==="large"}])},[Ie(ue(Or),{name:r.icon,size:r.iconSize==="large"?150:72},null,8,["name","size"])],2),B("div",{class:Tt(["fbv content",{hovered:t.value,large:r.iconSize==="large"}])},[B("div",{class:Tt(["title",{hovered:t.value}])},Br(r.title),3),B("div",{class:Tt(["description",{hovered:t.value}])},Br(r.description),3)],2)],34))}}),S_=Ar(q$e,[["__scopeId","data-v-e83de164"]]),Y$e={class:"switch-prompt-root fbv g8 w100p"},X$e={class:"query fbh g16"},Z$e={class:"fb1"},Q$e=sr({__name:"switch-prompt",props:{initialQuery:{}},emits:["onPromptChange"],setup(e,{emit:t}){const r=t,{data:i}=lse,n=_s(()=>{var o;return((o=i.value)==null?void 0:o.data)??[]}),a=Fe(0);return ja(i,()=>{const o=n.value.findIndex(s=>s===e.initialQuery);a.value=o===-1?0:o},{immediate:!0}),ja(a,()=>r("onPromptChange",n.value[a.value%n.value.length]),{immediate:!0}),(o,s)=>(We(),tt("div",Y$e,[s[1]||(s[1]=B("p",null,"Prompt",-1)),B("div",X$e,[B("p",Z$e,Br(n.value[a.value%n.value.length]),1),Ie(ue(Or),{name:"toggle",size:16,onClick:s[0]||(s[0]=l=>a.value++)})])]))}}),K$e=Ar(Q$e,[["__scopeId","data-v-304b07b7"]]),J$e={class:"pa p16",style:{left:"0",top:"0"},preserveAspectRatio:"none",viewBox:"0 0 550 310"},$$e=["points","stroke"],eet=sr({__name:"zoom-card",props:{active:{},variant:{},icon:{},title:{},description:{},disabled:{type:Boolean}},emits:["click","hover"],setup(e){const t=e,r=_s(()=>t.active===t.variant);return(i,n)=>(We(),tt("div",{class:Tt([i.variant,"fbv fbjsb pr zoom-card-root wh100p",{hovered:r.value}]),onMouseenter:n[1]||(n[1]=a=>i.$emit("hover",i.variant)),onMouseleave:n[2]||(n[2]=a=>i.$emit("hover",void 0))},[(We(),tt("svg",J$e,[B("polygon",{points:i.variant==="box1"||i.variant==="box4"?"1,31 31,1 549,1 549,279 519,309 1,309":"1,1 519,1 549,31 549,309 31,309 1,279",stroke:r.value?"#00000033":"#FFFFFF33","stroke-dasharray":"5 5","stroke-width":"1",fill:"none"},null,8,$$e)])),B("div",{class:Tt(["icon",{hovered:r.value,center:!r.value}])},[Ie(ue(Or),{name:r.value?i.icon[1]:i.icon[0],size:r.value?88:124},null,8,["name","size"])],2),B("div",{class:Tt(["title",{hovered:r.value,center:!r.value}])},Br(i.title),3),B("div",{class:Tt(["fbv content",{hovered:r.value}])},[B("div",{class:Tt(["hidden-section",{hovered:r.value}])},[B("div",{class:Tt(["description",{hovered:r.value}])},Br(i.description),3),B("div",{class:Tt(["center button",i.disabled?"disabled":"active",{hand:!i.disabled}]),onClick:n[0]||(n[0]=a=>i.$emit("click"))},Br(i.disabled?"Coming soon":"Visit"),3)],2)],2)],34))}}),C_=Ar(eet,[["__scopeId","data-v-ec6ac64b"]]),tet={class:"svg",viewBox:"0 0 181 35",xmlns:"http://www.w3.org/2000/svg",fill:"none"},ret=["stroke"],iet=["stroke"],net=sr({__name:"button",props:{layer:{},active:{type:Boolean}},setup(e){const t={1:"APPLICATION",2:"AGENTS",3:"COMPUTATION",4:"MODEL"};return(r,i)=>(We(),tt("div",{class:Tt(["text center pr",{active:r.active}])},[jo(Br(t[r.layer])+" ",1),(We(),tt("svg",tet,[B("path",{d:"M1 12.5V4.5L5 0.5H13",stroke:r.active?"#44DAC8":"white","stroke-width":"0.5"},null,8,ret),B("path",{d:"M180 22.5V30.5L176 34.5H168",stroke:r.active?"#44DAC8":"white","stroke-width":"0.5"},null,8,iet)]))],2))}}),E_=Ar(net,[["__scopeId","data-v-45f71c4a"]]);function Na({node:e,duration:t,delay:r,length:i}){return e.style.strokeDasharray="1000px 1000px",e.style.strokeDashoffset="1000px",e.style.strokeWidth="3px",()=>new Promise(n=>{Qi({targets:e,complete:n,easing:"linear",strokeDashoffset:["1000px",`${1e3-i}px`],duration:t,delay:r})})}const aet={fill:"none",viewBox:"0 0 1120 430",xmlns:"http://www.w3.org/2000/svg"},Zu=1e3,s0=1e3,a9=500,oet=700,set=sr({__name:"case1",setup(e){const t=Fe(),r=Fe(),i=Fe(),n=Fe(),a=Fe(),o=Fe(),s=Fe(),l=Fe(),u=Fe(),c=Fe(),h=Fe(),d=Fe(),f=Fe(),p=Fe(),v=Fe(),m=Fe(),g=Fe(),y=Fe();function x(b){return b.value.getTotalLength()}return Zs(async()=>{const b=Na({node:t.value,length:x(t),duration:Zu,delay:0}),_=Na({node:r.value,length:x(r),duration:Zu+s0,delay:0}),w=Na({node:i.value,length:x(i),duration:Zu,delay:0}),S=Na({node:n.value,length:x(n),duration:s0,delay:Zu}),A=Na({node:a.value,length:x(a),duration:s0,delay:Zu}),M=Na({node:o.value,length:x(o),duration:Zu,delay:0}),E=Na({node:s.value,length:x(s),duration:s0,delay:Zu}),T=Na({node:l.value,length:x(l),duration:a9,delay:Zu+s0}),L=Na({node:u.value,length:x(u),duration:a9,delay:Zu+s0}),P=Na({node:c.value,length:x(c),duration:oet,delay:Zu+s0+a9});(function C(){[h,d,f,p,v,m,g,y].map(D=>D.value&&(D.value.style.fill="#6D6D6D")),Promise.all([b().then(()=>{d.value&&(d.value.style.fill="#44DAC8"),f.value&&(f.value.style.fill="#44DAC8"),p.value&&(p.value.style.fill="#44DAC8")}),_().then(()=>{h.value&&(h.value.style.fill="#44DAC8"),m.value&&(m.value.style.fill="#44DAC8")}),w(),S(),A(),M(),E(),T().then(()=>{g.value&&(g.value.style.fill="#44DAC8"),y.value&&(y.value.style.fill="#44DAC8")}),L(),P().then(()=>{v.value&&(v.value.style.fill="#44DAC8")})]).then(()=>setTimeout(C,500))})()}),(b,_)=>(We(),tt("svg",aet,[_[0]||(_[0]=Mu('<path d="M0.5 132C0.5 126.753 4.7533 122.5 10 122.5H130C135.247 122.5 139.5 126.753 139.5 132V168C139.5 173.247 135.247 177.5 130 177.5H10C4.7533 177.5 0.5 173.247 0.5 168V132Z" fill="#121212" stroke="white"></path><text fill="white" xml:space="preserve" style="white-space:pre;" font-family="Cantarell" font-size="14" font-weight="500" letter-spacing="0em"><tspan x="19" y="146.4">Get Ticker from </tspan><tspan x="19" y="164.4">user&#39;s prompt</tspan></text><path d="M346.684 173.556C345.966 172.483 345.45 171.264 345.19 169.952L345.681 169.855C345.562 169.255 345.5 168.635 345.5 168V166.2H345V162.6H345.5V159H345V155.4H345.5V151.8H345V148.2H345.5V144.6H345V141H345.5V137.4H345V133.8H345.5V132C345.5 131.365 345.562 130.745 345.681 130.145L345.19 130.048C345.45 128.736 345.966 127.517 346.684 126.444L347.1 126.722C347.794 125.686 348.686 124.794 349.722 124.1L349.444 123.684C350.517 122.966 351.736 122.45 353.048 122.19L353.145 122.681C353.745 122.562 354.365 122.5 355 122.5H357V122H361V122.5H365V122H369V122.5H373V122H377V122.5H381V122H385V122.5H389V122H393V122.5H397V122H401V122.5H405V122H409V122.5H413V122H417V122.5H421V122H425V122.5H429V122H433V122.5H437V122H441V122.5H445V122H449V122.5H453V122H457V122.5H461V122H465V122.5H469V122H473V122.5H475C475.635 122.5 476.255 122.562 476.855 122.681L476.952 122.19C478.264 122.45 479.483 122.966 480.556 123.684L480.278 124.1C481.314 124.794 482.206 125.686 482.9 126.722L483.316 126.444C484.034 127.517 484.55 128.736 484.81 130.048L484.319 130.145C484.438 130.745 484.5 131.365 484.5 132V133.8H485V137.4H484.5V141H485V144.6H484.5V148.2H485V151.8H484.5V155.4H485V159H484.5V162.6H485V166.2H484.5V168C484.5 168.635 484.438 169.255 484.319 169.855L484.81 169.952C484.55 171.264 484.034 172.483 483.316 173.556L482.9 173.278C482.206 174.314 481.314 175.206 480.278 175.9L480.556 176.316C479.483 177.034 478.264 177.55 476.952 177.81L476.855 177.319C476.255 177.438 475.635 177.5 475 177.5H473V178H469V177.5H465V178H461V177.5H457V178H453V177.5H449V178H445V177.5H441V178H437V177.5H433V178H429V177.5H425V178H421V177.5H417V178H413V177.5H409V178H405V177.5H401V178H397V177.5H393V178H389V177.5H385V178H381V177.5H377V178H373V177.5H369V178H365V177.5H361V178H357V177.5H355C354.365 177.5 353.745 177.438 353.145 177.319L353.048 177.81C351.736 177.55 350.517 177.034 349.444 176.316L349.722 175.9C348.686 175.206 347.794 174.314 347.1 173.278L346.684 173.556Z" fill="#121212" stroke="white" stroke-dasharray="4 4"></path><text fill="white" xml:space="preserve" style="white-space:pre;" font-family="Cantarell" font-size="14" font-weight="500" letter-spacing="0em"><tspan x="366" y="155.4">Twitter Agents</tspan></text><path d="M346.684 295.556C345.966 294.483 345.45 293.264 345.19 291.952L345.681 291.855C345.562 291.255 345.5 290.635 345.5 290V288.2H345V284.6H345.5V281H345V277.4H345.5V273.8H345V270.2H345.5V266.6H345V263H345.5V259.4H345V255.8H345.5V254C345.5 253.365 345.562 252.745 345.681 252.145L345.19 252.048C345.45 250.736 345.966 249.517 346.684 248.444L347.1 248.722C347.794 247.686 348.686 246.794 349.722 246.1L349.444 245.684C350.517 244.966 351.736 244.45 353.048 244.19L353.145 244.681C353.745 244.562 354.365 244.5 355 244.5H357V244H361V244.5H365V244H369V244.5H373V244H377V244.5H381V244H385V244.5H389V244H393V244.5H397V244H401V244.5H405V244H409V244.5H413V244H417V244.5H421V244H425V244.5H429V244H433V244.5H437V244H441V244.5H445V244H449V244.5H453V244H457V244.5H461V244H465V244.5H469V244H473V244.5H475C475.635 244.5 476.255 244.562 476.855 244.681L476.952 244.19C478.264 244.45 479.483 244.966 480.556 245.684L480.278 246.1C481.314 246.794 482.206 247.686 482.9 248.722L483.316 248.444C484.034 249.517 484.55 250.736 484.81 252.048L484.319 252.145C484.438 252.745 484.5 253.365 484.5 254V255.8H485V259.4H484.5V263H485V266.6H484.5V270.2H485V273.8H484.5V277.4H485V281H484.5V284.6H485V288.2H484.5V290C484.5 290.635 484.438 291.255 484.319 291.855L484.81 291.952C484.55 293.264 484.034 294.483 483.316 295.556L482.9 295.278C482.206 296.314 481.314 297.206 480.278 297.9L480.556 298.316C479.483 299.034 478.264 299.55 476.952 299.81L476.855 299.319C476.255 299.438 475.635 299.5 475 299.5H473V300H469V299.5H465V300H461V299.5H457V300H453V299.5H449V300H445V299.5H441V300H437V299.5H433V300H429V299.5H425V300H421V299.5H417V300H413V299.5H409V300H405V299.5H401V300H397V299.5H393V300H389V299.5H385V300H381V299.5H377V300H373V299.5H369V300H365V299.5H361V300H357V299.5H355C354.365 299.5 353.745 299.438 353.145 299.319L353.048 299.81C351.736 299.55 350.517 299.034 349.444 298.316L349.722 297.9C348.686 297.206 347.794 296.314 347.1 295.278L346.684 295.556Z" fill="#121212" stroke="white" stroke-dasharray="4 4"></path><text fill="white" xml:space="preserve" style="white-space:pre;" font-family="Cantarell" font-size="14" font-weight="500" letter-spacing="0em"><tspan x="359" y="277.4">Facebook Agents</tspan></text><path d="M346.684 417.556C345.966 416.483 345.45 415.264 345.19 413.952L345.681 413.855C345.562 413.255 345.5 412.635 345.5 412V410.2H345V406.6H345.5V403H345V399.4H345.5V395.8H345V392.2H345.5V388.6H345V385H345.5V381.4H345V377.8H345.5V376C345.5 375.365 345.562 374.745 345.681 374.145L345.19 374.048C345.45 372.736 345.966 371.517 346.684 370.444L347.1 370.722C347.794 369.686 348.686 368.794 349.722 368.1L349.444 367.684C350.517 366.966 351.736 366.45 353.048 366.19L353.145 366.681C353.745 366.562 354.365 366.5 355 366.5H357V366H361V366.5H365V366H369V366.5H373V366H377V366.5H381V366H385V366.5H389V366H393V366.5H397V366H401V366.5H405V366H409V366.5H413V366H417V366.5H421V366H425V366.5H429V366H433V366.5H437V366H441V366.5H445V366H449V366.5H453V366H457V366.5H461V366H465V366.5H469V366H473V366.5H475C475.635 366.5 476.255 366.562 476.855 366.681L476.952 366.19C478.264 366.45 479.483 366.966 480.556 367.684L480.278 368.1C481.314 368.794 482.206 369.686 482.9 370.722L483.316 370.444C484.034 371.517 484.55 372.736 484.81 374.048L484.319 374.145C484.438 374.745 484.5 375.365 484.5 376V377.8H485V381.4H484.5V385H485V388.6H484.5V392.2H485V395.8H484.5V399.4H485V403H484.5V406.6H485V410.2H484.5V412C484.5 412.635 484.438 413.255 484.319 413.855L484.81 413.952C484.55 415.264 484.034 416.483 483.316 417.556L482.9 417.278C482.206 418.314 481.314 419.206 480.278 419.9L480.556 420.316C479.483 421.034 478.264 421.55 476.952 421.81L476.855 421.319C476.255 421.438 475.635 421.5 475 421.5H473V422H469V421.5H465V422H461V421.5H457V422H453V421.5H449V422H445V421.5H441V422H437V421.5H433V422H429V421.5H425V422H421V421.5H417V422H413V421.5H409V422H405V421.5H401V422H397V421.5H393V422H389V421.5H385V422H381V421.5H377V422H373V421.5H369V422H365V421.5H361V422H357V421.5H355C354.365 421.5 353.745 421.438 353.145 421.319L353.048 421.81C351.736 421.55 350.517 421.034 349.444 420.316L349.722 419.9C348.686 419.206 347.794 418.314 347.1 417.278L346.684 417.556Z" fill="#121212" stroke="white" stroke-dasharray="4 4"></path><text fill="white" xml:space="preserve" style="white-space:pre;" font-family="Cantarell" font-size="14" font-weight="500" letter-spacing="0em"><tspan x="365" y="399.4">Discord Agents</tspan></text><path d="M659.684 295.556C658.966 294.483 658.45 293.264 658.19 291.952L658.681 291.855C658.562 291.255 658.5 290.635 658.5 290V288.2H658V284.6H658.5V281H658V277.4H658.5V273.8H658V270.2H658.5V266.6H658V263H658.5V259.4H658V255.8H658.5V254C658.5 253.365 658.562 252.745 658.681 252.145L658.19 252.048C658.45 250.736 658.966 249.517 659.684 248.444L660.1 248.722C660.794 247.686 661.686 246.794 662.722 246.1L662.444 245.684C663.517 244.966 664.736 244.45 666.048 244.19L666.145 244.681C666.745 244.562 667.365 244.5 668 244.5H670V244H674V244.5H678V244H682V244.5H686V244H690V244.5H694V244H698V244.5H702V244H706V244.5H710V244H714V244.5H718V244H722V244.5H726V244H730V244.5H734V244H738V244.5H742V244H746V244.5H750V244H754V244.5H758V244H762V244.5H766V244H770V244.5H774V244H778V244.5H782V244H786V244.5H788C788.635 244.5 789.255 244.562 789.855 244.681L789.952 244.19C791.264 244.45 792.483 244.966 793.556 245.684L793.278 246.1C794.314 246.794 795.206 247.686 795.9 248.722L796.316 248.444C797.034 249.517 797.55 250.736 797.81 252.048L797.319 252.145C797.438 252.745 797.5 253.365 797.5 254V255.8H798V259.4H797.5V263H798V266.6H797.5V270.2H798V273.8H797.5V277.4H798V281H797.5V284.6H798V288.2H797.5V290C797.5 290.635 797.438 291.255 797.319 291.855L797.81 291.952C797.55 293.264 797.034 294.483 796.316 295.556L795.9 295.278C795.206 296.314 794.314 297.206 793.278 297.9L793.556 298.316C792.483 299.034 791.264 299.55 789.952 299.81L789.855 299.319C789.255 299.438 788.635 299.5 788 299.5H786V300H782V299.5H778V300H774V299.5H770V300H766V299.5H762V300H758V299.5H754V300H750V299.5H746V300H742V299.5H738V300H734V299.5H730V300H726V299.5H722V300H718V299.5H714V300H710V299.5H706V300H702V299.5H698V300H694V299.5H690V300H686V299.5H682V300H678V299.5H674V300H670V299.5H668C667.365 299.5 666.745 299.438 666.145 299.319L666.048 299.81C664.736 299.55 663.517 299.034 662.444 298.316L662.722 297.9C661.686 297.206 660.794 296.314 660.1 295.278L659.684 295.556Z" fill="#121212" stroke="white" stroke-dasharray="4 4"></path><text fill="white" xml:space="preserve" style="white-space:pre;" font-family="Cantarell" font-size="14" font-weight="500" letter-spacing="0em"><tspan x="689" y="268.4">Sentimental </tspan><tspan x="689" y="286.4">Agent</tspan></text><path d="M659.684 173.556C658.966 172.483 658.45 171.264 658.19 169.952L658.681 169.855C658.562 169.255 658.5 168.635 658.5 168V166.2H658V162.6H658.5V159H658V155.4H658.5V151.8H658V148.2H658.5V144.6H658V141H658.5V137.4H658V133.8H658.5V132C658.5 131.365 658.562 130.745 658.681 130.145L658.19 130.048C658.45 128.736 658.966 127.517 659.684 126.444L660.1 126.722C660.794 125.686 661.686 124.794 662.722 124.1L662.444 123.684C663.517 122.966 664.736 122.45 666.048 122.19L666.145 122.681C666.745 122.562 667.365 122.5 668 122.5H670V122H674V122.5H678V122H682V122.5H686V122H690V122.5H694V122H698V122.5H702V122H706V122.5H710V122H714V122.5H718V122H722V122.5H726V122H730V122.5H734V122H738V122.5H742V122H746V122.5H750V122H754V122.5H758V122H762V122.5H766V122H770V122.5H774V122H778V122.5H782V122H786V122.5H788C788.635 122.5 789.255 122.562 789.855 122.681L789.952 122.19C791.264 122.45 792.483 122.966 793.556 123.684L793.278 124.1C794.314 124.794 795.206 125.686 795.9 126.722L796.316 126.444C797.034 127.517 797.55 128.736 797.81 130.048L797.319 130.145C797.438 130.745 797.5 131.365 797.5 132V133.8H798V137.4H797.5V141H798V144.6H797.5V148.2H798V151.8H797.5V155.4H798V159H797.5V162.6H798V166.2H797.5V168C797.5 168.635 797.438 169.255 797.319 169.855L797.81 169.952C797.55 171.264 797.034 172.483 796.316 173.556L795.9 173.278C795.206 174.314 794.314 175.206 793.278 175.9L793.556 176.316C792.483 177.034 791.264 177.55 789.952 177.81L789.855 177.319C789.255 177.438 788.635 177.5 788 177.5H786V178H782V177.5H778V178H774V177.5H770V178H766V177.5H762V178H758V177.5H754V178H750V177.5H746V178H742V177.5H738V178H734V177.5H730V178H726V177.5H722V178H718V177.5H714V178H710V177.5H706V178H702V177.5H698V178H694V177.5H690V178H686V177.5H682V178H678V177.5H674V178H670V177.5H668C667.365 177.5 666.745 177.438 666.145 177.319L666.048 177.81C664.736 177.55 663.517 177.034 662.444 176.316L662.722 175.9C661.686 175.206 660.794 174.314 660.1 173.278L659.684 173.556Z" fill="#121212" stroke="white" stroke-dasharray="4 4"></path><text fill="white" xml:space="preserve" style="white-space:pre;" font-family="Cantarell" font-size="14" font-weight="500" letter-spacing="0em"><tspan x="679" y="146.4">Summarization </tspan><tspan x="679" y="164.4">Agent</tspan></text><path d="M659.684 51.5562C658.966 50.4832 658.45 49.2636 658.19 47.9516L658.681 47.8546C658.562 47.2552 658.5 46.6351 658.5 46V44.2H658V40.6H658.5V37H658V33.4H658.5V29.8H658V26.2H658.5V22.6H658V19H658.5V15.4H658V11.8H658.5V10C658.5 9.3649 658.562 8.74483 658.681 8.14541L658.19 8.04838C658.45 6.73643 658.966 5.51676 659.684 4.44384L660.1 4.722C660.794 3.6858 661.686 2.79355 662.722 2.09983L662.444 1.68435C663.517 0.966046 664.736 0.449883 666.048 0.19034L666.145 0.680834C666.745 0.562252 667.365 0.5 668 0.5H670V0H674V0.5H678V0H682V0.5H686V0H690V0.5H694V0H698V0.5H702V0H706V0.5H710V0H714V0.5H718V0H722V0.5H726V0H730V0.5H734V0H738V0.5H742V0H746V0.5H750V0H754V0.5H758V0H762V0.5H766V0H770V0.5H774V0H778V0.5H782V0H786V0.5H788C788.635 0.5 789.255 0.562252 789.855 0.680835L789.952 0.190341C791.264 0.449884 792.483 0.966048 793.556 1.68435L793.278 2.09983C794.314 2.79355 795.206 3.6858 795.9 4.722L796.316 4.44384C797.034 5.51676 797.55 6.73643 797.81 8.04838L797.319 8.14541C797.438 8.74483 797.5 9.3649 797.5 10V11.8H798V15.4H797.5V19H798V22.6H797.5V26.2H798V29.8H797.5V33.4H798V37H797.5V40.6H798V44.2H797.5V46C797.5 46.6351 797.438 47.2552 797.319 47.8546L797.81 47.9516C797.55 49.2636 797.034 50.4832 796.316 51.5562L795.9 51.278C795.206 52.3142 794.314 53.2064 793.278 53.9002L793.556 54.3157C792.483 55.034 791.264 55.5501 789.952 55.8097L789.855 55.3192C789.255 55.4377 788.635 55.5 788 55.5H786V56H782V55.5H778V56H774V55.5H770V56H766V55.5H762V56H758V55.5H754V56H750V55.5H746V56H742V55.5H738V56H734V55.5H730V56H726V55.5H722V56H718V55.5H714V56H710V55.5H706V56H702V55.5H698V56H694V55.5H690V56H686V55.5H682V56H678V55.5H674V56H670V55.5H668C667.365 55.5 666.745 55.4377 666.145 55.3192L666.048 55.8097C664.736 55.5501 663.517 55.034 662.444 54.3157L662.722 53.9002C661.686 53.2064 660.794 52.3142 660.1 51.278L659.684 51.5562Z" fill="#121212" stroke="white" stroke-dasharray="4 4"></path><text fill="white" xml:space="preserve" style="white-space:pre;" font-family="Cantarell" font-size="14" font-weight="500" letter-spacing="0em"><tspan x="688" y="33.4004">Price Agent</tspan></text><path d="M978.5 132C978.5 126.753 982.753 122.5 988 122.5H1108C1113.25 122.5 1117.5 126.753 1117.5 132V168C1117.5 173.247 1113.25 177.5 1108 177.5H988C982.753 177.5 978.5 173.247 978.5 168V132Z" fill="#121212" stroke="white"></path><text fill="white" xml:space="preserve" style="white-space:pre;" font-family="Cantarell" font-size="14" font-weight="500" letter-spacing="0em"><tspan x="997" y="155.4">Analysis Report</tspan></text><path d="M142 151H188.25C197.087 151 204.25 158.163 204.25 167V380.5C204.25 389.337 211.413 396.5 220.25 396.5H344" stroke="#6D6D6D"></path>',17)),B("path",{ref_key:"line1",ref:t,d:"M142 151H188.25C197.087 151 204.25 158.163 204.25 167V380.5C204.25 389.337 211.413 396.5 220.25 396.5H344",stroke:"#44DAC8"},null,512),_[1]||(_[1]=B("path",{d:"M142 151H188.25C197.087 151 204.25 143.837 204.25 135V44.5C204.25 35.6634 211.413 28.5 220.25 28.5H657",stroke:"#6D6D6D"},null,-1)),B("path",{ref_key:"line2",ref:r,d:"M142 151H188.25C197.087 151 204.25 143.837 204.25 135V44.5C204.25 35.6634 211.413 28.5 220.25 28.5H657",stroke:"#44DAC8"},null,512),_[2]||(_[2]=B("path",{d:"M142 151H188.25C197.087 151 204.25 158.163 204.25 167V257.5C204.25 266.337 211.413 273.5 220.25 273.5H344",stroke:"#6D6D6D"},null,-1)),B("path",{ref_key:"line3",ref:i,d:"M142 151H188.25C197.087 151 204.25 158.163 204.25 167V257.5C204.25 266.337 211.413 273.5 220.25 273.5H344",stroke:"#44DAC8"},null,512),_[3]||(_[3]=B("path",{d:"M485 151H533.25C542.087 151 549.25 158.163 549.25 167V258C549.25 266.837 556.413 274 565.25 274H657",stroke:"#6D6D6D"},null,-1)),B("path",{ref_key:"line4",ref:n,d:"M485 151H533.25C542.087 151 549.25 158.163 549.25 167V258C549.25 266.837 556.413 274 565.25 274H657",stroke:"#44DAC8"},null,512),_[4]||(_[4]=B("path",{d:"M485 396.5H533.25C542.087 396.5 549.25 389.337 549.25 380.5V290C549.25 281.163 556.413 274 565.25 274H657",stroke:"#6D6D6D"},null,-1)),B("path",{ref_key:"line5",ref:a,d:"M485 396.5H533.25C542.087 396.5 549.25 389.337 549.25 380.5V290C549.25 281.163 556.413 274 565.25 274H657",stroke:"#44DAC8"},null,512),_[5]||(_[5]=B("path",{d:"M140 151H204.25H344",stroke:"#6D6D6D"},null,-1)),B("path",{ref_key:"line6",ref:o,d:"M140 151H204.25H344",stroke:"#44DAC8"},null,512),_[6]||(_[6]=B("path",{d:"M485 274H518.25H657",stroke:"#6D6D6D"},null,-1)),B("path",{ref_key:"line7",ref:s,d:"M485 274H518.25H657",stroke:"#44DAC8"},null,512),_[7]||(_[7]=B("path",{d:"M728 57V121",stroke:"#6D6D6D"},null,-1)),B("path",{ref_key:"line8",ref:l,d:"M728 57V121",stroke:"#44DAC8"},null,512),_[8]||(_[8]=B("path",{d:"M728 179V243",stroke:"#6D6D6D"},null,-1)),B("path",{ref_key:"line9",ref:u,d:"M728 243V179",stroke:"#44DAC8"},null,512),_[9]||(_[9]=B("path",{d:"M798 151H977",stroke:"#6D6D6D"},null,-1)),B("path",{ref_key:"line10",ref:c,d:"M798 151H977",stroke:"#44DAC8"},null,512),_[10]||(_[10]=Mu('<text fill="white" xml:space="preserve" style="white-space:pre;" font-family="Cantarell" font-size="13" font-weight="500" letter-spacing="0em"><tspan x="255" y="137.515">Ticker</tspan></text><text fill="white" xml:space="preserve" style="white-space:pre;" font-family="Cantarell" font-size="13" font-weight="500" letter-spacing="0em"><tspan x="255" y="14.5146">Ticker</tspan></text><text fill="white" xml:space="preserve" style="white-space:pre;" font-family="Cantarell" font-size="13" font-weight="500" letter-spacing="0em"><tspan x="740" y="93.5146">Price Fluctruaction</tspan></text><text fill="white" xml:space="preserve" style="white-space:pre;" font-family="Cantarell" font-size="13" font-weight="500" letter-spacing="0em"><tspan x="740" y="215.515">Sentimental Data</tspan></text><text fill="white" xml:space="preserve" style="white-space:pre;" font-family="Cantarell" font-size="13" font-weight="500" letter-spacing="0em"><tspan x="255" y="259.515">Ticker</tspan></text><text fill="white" xml:space="preserve" style="white-space:pre;" font-family="Cantarell" font-size="13" font-weight="500" letter-spacing="0em"><tspan x="255" y="382.515">Ticker</tspan></text>',6)),B("path",{ref_key:"arrow1",ref:h,d:"M650 22.5L658 28.5L650 34.5V22.5Z",fill:"#6D6D6D"},null,512),B("path",{ref_key:"arrow2",ref:d,d:"M337 145L345 151L337 157V145Z",fill:"#6D6D6D"},null,512),B("path",{ref_key:"arrow3",ref:f,d:"M337 267.5L345 273.5L337 279.5V267.5Z",fill:"#6D6D6D"},null,512),B("path",{ref_key:"arrow4",ref:p,d:"M337 390.5L345 396.5L337 402.5V390.5Z",fill:"#6D6D6D"},null,512),B("path",{ref_key:"arrow5",ref:v,d:"M970 145L978 151L970 157V145Z",fill:"#6D6D6D"},null,512),B("path",{ref_key:"arrow6",ref:m,d:"M650 268L658 274L650 280V268Z",fill:"#6D6D6D"},null,512),B("path",{ref_key:"arrow7",ref:g,d:"M722 186L728 178L734 186L722 186Z",fill:"#6D6D6D"},null,512),B("path",{ref_key:"arrow8",ref:y,d:"M722 114L728 122L734 114L722 114Z",fill:"#6D6D6D"},null,512)]))}}),uet={viewBox:"0 0 1120 300",fill:"none",xmlns:"http://www.w3.org/2000/svg"},l0=1e3,Q2=1e3,o9=500,cet=700,het=sr({__name:"case2",setup(e){const t=Fe(),r=Fe(),i=Fe(),n=Fe(),a=Fe(),o=Fe(),s=Fe(),l=Fe(),u=Fe(),c=Fe(),h=Fe(),d=Fe(),f=Fe();function p(v){return v.value.getTotalLength()}return Zs(async()=>{const v=Na({node:t.value,length:p(t),duration:l0,delay:0}),m=Na({node:r.value,length:p(r),duration:l0,delay:0}),g=Na({node:i.value,length:p(i),duration:Q2,delay:l0}),y=Na({node:n.value,length:p(n),duration:Q2,delay:l0}),x=Na({node:a.value,length:p(a),duration:cet,delay:l0+Q2+o9}),b=Na({node:o.value,length:p(o),duration:o9,delay:l0+Q2}),_=Na({node:s.value,length:p(s),duration:o9,delay:l0+Q2});(function w(){[l,u,c,h,d,f].map(S=>S.value&&(S.value.style.fill="#6D6D6D")),Promise.all([v().then(()=>{l.value&&(l.value.style.fill="#44DAC8"),u.value&&(u.value.style.fill="#44DAC8")}),m(),g().then(()=>{h.value&&(h.value.style.fill="#44DAC8")}),y(),x().then(()=>{f.value&&(f.value.style.fill="#44DAC8")}),b().then(()=>{c.value&&(c.value.style.fill="#44DAC8"),d.value&&(d.value.style.fill="#44DAC8")}),_()]).then(()=>setTimeout(w,500))})()}),(v,m)=>(We(),tt("svg",uet,[m[0]||(m[0]=Mu('<path d="M0.5 170C0.5 164.753 4.7533 160.5 10 160.5H130C135.247 160.5 139.5 164.753 139.5 170V206C139.5 211.247 135.247 215.5 130 215.5H10C4.7533 215.5 0.5 211.247 0.5 206V170Z" stroke="white"></path><text fill="white" xml:space="preserve" style="white-space:pre;" font-family="Cantarell" font-size="14" font-weight="500" letter-spacing="0em"><tspan x="16" y="184.4">Get trading pairs </tspan><tspan x="16" y="202.4">from prompt</tspan></text><path d="M346.684 131.556C345.966 130.483 345.45 129.264 345.19 127.952L345.681 127.855C345.562 127.255 345.5 126.635 345.5 126V124.2H345V120.6H345.5V117H345V113.4H345.5V109.8H345V106.2H345.5V102.6H345V99H345.5V95.4H345V91.8H345.5V90C345.5 89.3649 345.562 88.7448 345.681 88.1454L345.19 88.0484C345.45 86.7364 345.966 85.5168 346.684 84.4438L347.1 84.722C347.794 83.6858 348.686 82.7936 349.722 82.0998L349.444 81.6843C350.517 80.966 351.736 80.4499 353.048 80.1903L353.145 80.6808C353.745 80.5623 354.365 80.5 355 80.5H357V80H361V80.5H365V80H369V80.5H373V80H377V80.5H381V80H385V80.5H389V80H393V80.5H397V80H401V80.5H405V80H409V80.5H413V80H417V80.5H421V80H425V80.5H429V80H433V80.5H437V80H441V80.5H445V80H449V80.5H453V80H457V80.5H461V80H465V80.5H469V80H473V80.5H475C475.635 80.5 476.255 80.5623 476.855 80.6808L476.952 80.1903C478.264 80.4499 479.483 80.966 480.556 81.6843L480.278 82.0998C481.314 82.7936 482.206 83.6858 482.9 84.722L483.316 84.4438C484.034 85.5168 484.55 86.7364 484.81 88.0484L484.319 88.1454C484.438 88.7448 484.5 89.3649 484.5 90V91.8H485V95.4H484.5V99H485V102.6H484.5V106.2H485V109.8H484.5V113.4H485V117H484.5V120.6H485V124.2H484.5V126C484.5 126.635 484.438 127.255 484.319 127.855L484.81 127.952C484.55 129.264 484.034 130.483 483.316 131.556L482.9 131.278C482.206 132.314 481.314 133.206 480.278 133.9L480.556 134.316C479.483 135.034 478.264 135.55 476.952 135.81L476.855 135.319C476.255 135.438 475.635 135.5 475 135.5H473V136H469V135.5H465V136H461V135.5H457V136H453V135.5H449V136H445V135.5H441V136H437V135.5H433V136H429V135.5H425V136H421V135.5H417V136H413V135.5H409V136H405V135.5H401V136H397V135.5H393V136H389V135.5H385V136H381V135.5H377V136H373V135.5H369V136H365V135.5H361V136H357V135.5H355C354.365 135.5 353.745 135.438 353.145 135.319L353.048 135.81C351.736 135.55 350.517 135.034 349.444 134.316L349.722 133.9C348.686 133.206 347.794 132.314 347.1 131.278L346.684 131.556Z" stroke="white" stroke-dasharray="4 4"></path><text fill="white" xml:space="preserve" style="white-space:pre;" font-family="Cantarell" font-size="14" font-weight="500" letter-spacing="0em"><tspan x="366" y="113.4">Uniswap Agent</tspan></text><path d="M346.684 291.556C345.966 290.483 345.45 289.264 345.19 287.952L345.681 287.855C345.562 287.255 345.5 286.635 345.5 286V284.2H345V280.6H345.5V277H345V273.4H345.5V269.8H345V266.2H345.5V262.6H345V259H345.5V255.4H345V251.8H345.5V250C345.5 249.365 345.562 248.745 345.681 248.145L345.19 248.048C345.45 246.736 345.966 245.517 346.684 244.444L347.1 244.722C347.794 243.686 348.686 242.794 349.722 242.1L349.444 241.684C350.517 240.966 351.736 240.45 353.048 240.19L353.145 240.681C353.745 240.562 354.365 240.5 355 240.5H357V240H361V240.5H365V240H369V240.5H373V240H377V240.5H381V240H385V240.5H389V240H393V240.5H397V240H401V240.5H405V240H409V240.5H413V240H417V240.5H421V240H425V240.5H429V240H433V240.5H437V240H441V240.5H445V240H449V240.5H453V240H457V240.5H461V240H465V240.5H469V240H473V240.5H475C475.635 240.5 476.255 240.562 476.855 240.681L476.952 240.19C478.264 240.45 479.483 240.966 480.556 241.684L480.278 242.1C481.314 242.794 482.206 243.686 482.9 244.722L483.316 244.444C484.034 245.517 484.55 246.736 484.81 248.048L484.319 248.145C484.438 248.745 484.5 249.365 484.5 250V251.8H485V255.4H484.5V259H485V262.6H484.5V266.2H485V269.8H484.5V273.4H485V277H484.5V280.6H485V284.2H484.5V286C484.5 286.635 484.438 287.255 484.319 287.855L484.81 287.952C484.55 289.264 484.034 290.483 483.316 291.556L482.9 291.278C482.206 292.314 481.314 293.206 480.278 293.9L480.556 294.316C479.483 295.034 478.264 295.55 476.952 295.81L476.855 295.319C476.255 295.438 475.635 295.5 475 295.5H473V296H469V295.5H465V296H461V295.5H457V296H453V295.5H449V296H445V295.5H441V296H437V295.5H433V296H429V295.5H425V296H421V295.5H417V296H413V295.5H409V296H405V295.5H401V296H397V295.5H393V296H389V295.5H385V296H381V295.5H377V296H373V295.5H369V296H365V295.5H361V296H357V295.5H355C354.365 295.5 353.745 295.438 353.145 295.319L353.048 295.81C351.736 295.55 350.517 295.034 349.444 294.316L349.722 293.9C348.686 293.206 347.794 292.314 347.1 291.278L346.684 291.556Z" stroke="white" stroke-dasharray="4 4"></path><text fill="white" xml:space="preserve" style="white-space:pre;" font-family="Cantarell" font-size="14" font-weight="500" letter-spacing="0em"><tspan x="397" y="273.4">1inch</tspan></text><path d="M689.684 211.556C688.966 210.483 688.45 209.264 688.19 207.952L688.681 207.855C688.562 207.255 688.5 206.635 688.5 206V204.2H688V200.6H688.5V197H688V193.4H688.5V189.8H688V186.2H688.5V182.6H688V179H688.5V175.4H688V171.8H688.5V170C688.5 169.365 688.562 168.745 688.681 168.145L688.19 168.048C688.45 166.736 688.966 165.517 689.684 164.444L690.1 164.722C690.794 163.686 691.686 162.794 692.722 162.1L692.444 161.684C693.517 160.966 694.736 160.45 696.048 160.19L696.145 160.681C696.745 160.562 697.365 160.5 698 160.5H700V160H704V160.5H708V160H712V160.5H716V160H720V160.5H724V160H728V160.5H732V160H736V160.5H740V160H744V160.5H748V160H752V160.5H756V160H760V160.5H764V160H768V160.5H772V160H776V160.5H780V160H784V160.5H788V160H792V160.5H796V160H800V160.5H804V160H808V160.5H812V160H816V160.5H818C818.635 160.5 819.255 160.562 819.855 160.681L819.952 160.19C821.264 160.45 822.483 160.966 823.556 161.684L823.278 162.1C824.314 162.794 825.206 163.686 825.9 164.722L826.316 164.444C827.034 165.517 827.55 166.736 827.81 168.048L827.319 168.145C827.438 168.745 827.5 169.365 827.5 170V171.8H828V175.4H827.5V179H828V182.6H827.5V186.2H828V189.8H827.5V193.4H828V197H827.5V200.6H828V204.2H827.5V206C827.5 206.635 827.438 207.255 827.319 207.855L827.81 207.952C827.55 209.264 827.034 210.483 826.316 211.556L825.9 211.278C825.206 212.314 824.314 213.206 823.278 213.9L823.556 214.316C822.483 215.034 821.264 215.55 819.952 215.81L819.855 215.319C819.255 215.438 818.635 215.5 818 215.5H816V216H812V215.5H808V216H804V215.5H800V216H796V215.5H792V216H788V215.5H784V216H780V215.5H776V216H772V215.5H768V216H764V215.5H760V216H756V215.5H752V216H748V215.5H744V216H740V215.5H736V216H732V215.5H728V216H724V215.5H720V216H716V215.5H712V216H708V215.5H704V216H700V215.5H698C697.365 215.5 696.745 215.438 696.145 215.319L696.048 215.81C694.736 215.55 693.517 215.034 692.444 214.316L692.722 213.9C691.686 213.206 690.794 212.314 690.1 211.278L689.684 211.556Z" stroke="white" stroke-dasharray="4 4"></path><text fill="white" xml:space="preserve" style="white-space:pre;" font-family="Cantarell" font-size="14" font-weight="500" letter-spacing="0em"><tspan x="716" y="193.4">Wallet Agent</tspan></text><path d="M689.684 51.5562C688.966 50.4832 688.45 49.2636 688.19 47.9516L688.681 47.8546C688.562 47.2552 688.5 46.6351 688.5 46V44.2H688V40.6H688.5V37H688V33.4H688.5V29.8H688V26.2H688.5V22.6H688V19H688.5V15.4H688V11.8H688.5V10C688.5 9.3649 688.562 8.74483 688.681 8.14541L688.19 8.04838C688.45 6.73643 688.966 5.51676 689.684 4.44384L690.1 4.722C690.794 3.6858 691.686 2.79355 692.722 2.09983L692.444 1.68435C693.517 0.966046 694.736 0.449883 696.048 0.19034L696.145 0.680834C696.745 0.562252 697.365 0.5 698 0.5H700V0H704V0.5H708V0H712V0.5H716V0H720V0.5H724V0H728V0.5H732V0H736V0.5H740V0H744V0.5H748V0H752V0.5H756V0H760V0.5H764V0H768V0.5H772V0H776V0.5H780V0H784V0.5H788V0H792V0.5H796V0H800V0.5H804V0H808V0.5H812V0H816V0.5H818C818.635 0.5 819.255 0.562252 819.855 0.680835L819.952 0.190341C821.264 0.449884 822.483 0.966048 823.556 1.68435L823.278 2.09983C824.314 2.79355 825.206 3.6858 825.9 4.722L826.316 4.44384C827.034 5.51676 827.55 6.73643 827.81 8.04838L827.319 8.14541C827.438 8.74483 827.5 9.3649 827.5 10V11.8H828V15.4H827.5V19H828V22.6H827.5V26.2H828V29.8H827.5V33.4H828V37H827.5V40.6H828V44.2H827.5V46C827.5 46.6351 827.438 47.2552 827.319 47.8546L827.81 47.9516C827.55 49.2636 827.034 50.4832 826.316 51.5562L825.9 51.278C825.206 52.3142 824.314 53.2064 823.278 53.9002L823.556 54.3157C822.483 55.034 821.264 55.5501 819.952 55.8097L819.855 55.3192C819.255 55.4377 818.635 55.5 818 55.5H816V56H812V55.5H808V56H804V55.5H800V56H796V55.5H792V56H788V55.5H784V56H780V55.5H776V56H772V55.5H768V56H764V55.5H760V56H756V55.5H752V56H748V55.5H744V56H740V55.5H736V56H732V55.5H728V56H724V55.5H720V56H716V55.5H712V56H708V55.5H704V56H700V55.5H698C697.365 55.5 696.745 55.4377 696.145 55.3192L696.048 55.8097C694.736 55.5501 693.517 55.034 692.444 54.3157L692.722 53.9002C691.686 53.2064 690.794 52.3142 690.1 51.278L689.684 51.5562Z" stroke="white" stroke-dasharray="4 4"></path><text fill="white" xml:space="preserve" style="white-space:pre;" font-family="Cantarell" font-size="14" font-weight="500" letter-spacing="0em"><tspan x="707" y="33.4004">On-ramp Agent</tspan></text><path d="M978.5 170C978.5 164.753 982.753 160.5 988 160.5H1108C1113.25 160.5 1117.5 164.753 1117.5 170V206C1117.5 211.247 1113.25 215.5 1108 215.5H988C982.753 215.5 978.5 211.247 978.5 206V170Z" stroke="white"></path><text fill="white" xml:space="preserve" style="white-space:pre;" font-family="Cantarell" font-size="14" font-weight="500" letter-spacing="0em"><tspan x="989" y="193.4">Final confirmation</tspan></text><path d="M142 189H188.25C197.087 189 204.25 196.163 204.25 205V252.5C204.25 261.337 211.413 268.5 220.25 268.5H344" stroke="#6D6D6D"></path>',13)),B("path",{ref_key:"line1",ref:t,d:"M142 189H188.25C197.087 189 204.25 196.163 204.25 205V252.5C204.25 261.337 211.413 268.5 220.25 268.5H344",stroke:"#44DAC8"},null,512),m[1]||(m[1]=B("path",{d:"M142 188.5H188.25C197.087 188.5 204.25 181.337 204.25 172.5V125C204.25 116.163 211.413 109 220.25 109H344",stroke:"#6D6D6D"},null,-1)),B("path",{ref_key:"line2",ref:r,d:"M142 188.5H188.25C197.087 188.5 204.25 181.337 204.25 172.5V125C204.25 116.163 211.413 109 220.25 109H344",stroke:"#44DAC8"},null,512),m[2]||(m[2]=B("path",{d:"M485 109H531.25C540.087 109 547.25 116.163 547.25 125V172C547.25 180.837 554.413 188 563.25 188H687",stroke:"#6D6D6D"},null,-1)),B("path",{ref_key:"line3",ref:i,d:"M485 109H531.25C540.087 109 547.25 116.163 547.25 125V172C547.25 180.837 554.413 188 563.25 188H687",stroke:"#44DAC8"},null,512),m[3]||(m[3]=B("path",{d:"M485 267.5H531.25C540.087 267.5 547.25 260.337 547.25 251.5V204C547.25 195.163 554.413 188 563.25 188H687",stroke:"#6D6D6D"},null,-1)),B("path",{ref_key:"line4",ref:n,d:"M485 267.5H531.25C540.087 267.5 547.25 260.337 547.25 251.5V204C547.25 195.163 554.413 188 563.25 188H687",stroke:"#44DAC8"},null,512),m[4]||(m[4]=B("path",{d:"M1047.75 216V251.5C1047.75 260.337 1040.59 267.5 1031.75 267.5H774C765.163 267.5 758 260.337 758 251.5V217.5",stroke:"#6D6D6D"},null,-1)),B("path",{ref_key:"line5",ref:a,d:"M1047.75 216V251.5C1047.75 260.337 1040.59 267.5 1031.75 267.5H774C765.163 267.5 758 260.337 758 251.5V217.5",stroke:"#44DAC8"},null,512),m[5]||(m[5]=B("path",{d:"M758 58V159",stroke:"#6D6D6D"},null,-1)),B("path",{ref_key:"line6",ref:o,d:"M758 159V58",stroke:"#44DAC8"},null,512),m[6]||(m[6]=B("path",{d:"M830 188H977",stroke:"#6D6D6D"},null,-1)),B("path",{ref_key:"line7",ref:s,d:"M830 188H977",stroke:"#44DAC8"},null,512),m[7]||(m[7]=Mu('<text fill="white" xml:space="preserve" style="white-space:pre;" font-family="Cantarell" font-size="13" font-weight="500" letter-spacing="0em"><tspan x="847" y="292.515">Price Fluctruaction</tspan></text><text fill="white" xml:space="preserve" style="white-space:pre;" font-family="Cantarell" font-size="13" font-weight="500" letter-spacing="0em"><tspan x="237" y="95.5146">Trading pairs</tspan></text><text fill="white" xml:space="preserve" style="white-space:pre;" font-family="Cantarell" font-size="13" font-weight="500" letter-spacing="0em"><tspan x="237" y="254.515">Trading pairs</tspan></text>',3)),B("path",{ref_key:"arrow1",ref:l,d:"M337 103L345 109L337 115V103Z",fill:"#6D6D6D"},null,512),B("path",{ref_key:"arrow2",ref:u,d:"M337 262.5L345 268.5L337 274.5V262.5Z",fill:"#6D6D6D"},null,512),B("path",{ref_key:"arrow3",ref:c,d:"M970 182L978 188L970 194V182Z",fill:"#6D6D6D"},null,512),B("path",{ref_key:"arrow4",ref:h,d:"M680 182L688 188L680 194V182Z",fill:"#6D6D6D"},null,512),B("path",{ref_key:"arrow5",ref:d,d:"M752 64L758 56L764 64L752 64Z",fill:"#6D6D6D"},null,512),B("path",{ref_key:"arrow6",ref:f,d:"M752 224L758 216L764 224L752 224Z",fill:"#6D6D6D"},null,512)]))}}),det={viewBox:"0 0 395 756",xmlns:"http://www.w3.org/2000/svg",fill:"none"},fet=["fill"],pet=["stroke"],vet=["stroke"],met=["stroke"],get=["fill"],yet=["stroke"],xet=["stroke"],bet=["stroke"],wet=["fill"],_et=["stroke"],Aet=["stroke"],Cet=["stroke"],Eet=["fill"],Met=["stroke"],Tet=["stroke"],Pet=["stroke"],Det=["fill"],Iet=["stroke"],Let=["stroke"],ket=["stroke"],Ret=["fill"],Oet=["stroke"],Bet=["stroke"],Net=["stroke"],Vet=sr({__name:"model",props:{activeLayer:{}},emits:["onActiveLayerChange"],setup(e){return(t,r)=>(We(),tt("svg",det,[B("path",{d:"M49 667V633.5L199 720L347 632V667L199 754.5L49 667Z",fill:t.activeLayer===4?"#44DAC8":"#121212"},null,8,fet),r[8]||(r[8]=B("path",{d:"M199 547L49 633L199 720L347 632L199 547Z",fill:"#121212"},null,-1)),B("path",{d:"M199 720V755",stroke:t.activeLayer===4?"#44DAC8":"white"},null,8,pet),B("path",{d:"M49 633.312L198.947 547L347 632.181L199 720L49 633.312Z",stroke:t.activeLayer===4?"#44DAC8":"white","stroke-linejoin":"round"},null,8,vet),B("path",{d:"M49 633V667L199 754.5L347 667V632",stroke:t.activeLayer===4?"#44DAC8":"white"},null,8,met),r[9]||(r[9]=B("path",{d:"M166 630V542L199 561L230 543V630L199 649L166 630Z",fill:"#121212"},null,-1)),r[10]||(r[10]=B("path",{d:"M166 541.742V600.002L199 619.002L230 600.002V542.502",stroke:"#666666"},null,-1)),r[11]||(r[11]=B("path",{d:"M199 560.5V619",stroke:"#666666"},null,-1)),B("path",{d:"M49 474V440.5L199 527L347 439V474L199 561.5L49 474Z",fill:t.activeLayer===3?"#44DAC8":"#121212"},null,8,get),r[12]||(r[12]=B("path",{d:"M199 354L49 440L199 527L347 439L199 354Z",fill:"#121212"},null,-1)),B("path",{d:"M199 527V562",stroke:t.activeLayer===3?"#44DAC8":"white"},null,8,yet),B("path",{d:"M49 440.312L198.947 354L347 439.181L199 527L49 440.312Z",stroke:t.activeLayer===3?"#44DAC8":"white","stroke-linejoin":"round"},null,8,xet),B("path",{d:"M49 440V474L199 561.5L347 474V439",stroke:t.activeLayer===3?"#44DAC8":"white"},null,8,bet),r[13]||(r[13]=B("path",{d:"M166 439V351L199 370L230 352V439L199 458L166 439Z",fill:"#121212"},null,-1)),r[14]||(r[14]=B("path",{d:"M166 350.742V409.002L199 428.002L230 409.002V351.502",stroke:"#666666"},null,-1)),r[15]||(r[15]=B("path",{d:"M199 369.5V428",stroke:"#666666"},null,-1)),B("path",{d:"M1 255.5V221L199.5 335L394 219V255.5L199 370L1 255.5Z",fill:t.activeLayer===2?"#44DAC8":"#121212"},null,8,wet),r[16]||(r[16]=B("path",{d:"M199 105L1.5 220.5L199 335L394 219L199 105Z",fill:"#121212"},null,-1)),B("path",{d:"M1 220.749L198.748 105L394 219L199 335L1 220.749Z",stroke:t.activeLayer===2?"#44DAC8":"white","stroke-linejoin":"round"},null,8,_et),B("path",{d:"M199 335V370",stroke:t.activeLayer===2?"#44DAC8":"white"},null,8,Aet),B("path",{d:"M1 221V255.5L199 370L394 255.5V219",stroke:t.activeLayer===2?"#44DAC8":"white","stroke-linejoin":"round"},null,8,Cet),r[17]||(r[17]=Mu('<image x="19" y="119" width="355" height="196" href="'+wF+'" data-v-8cc099f2></image><image x="66" y="392" width="261" height="115" href="'+_F+'" data-v-8cc099f2></image><image x="66" y="585" width="261" height="115" href="'+AF+'" data-v-8cc099f2></image><path d="M142.283 176V40" stroke="#44DAC8" data-v-8cc099f2></path><path d="M94.7827 219.866L145.937 20.0718" stroke="#44DAC8" data-v-8cc099f2></path><path d="M189.937 219.866L138.783 20.0718" stroke="#44DAC8" data-v-8cc099f2></path><path d="M198.283 215V79" stroke="#44DAC8" data-v-8cc099f2></path><path d="M150.783 258.866L201.937 59.0718" stroke="#44DAC8" data-v-8cc099f2></path><path d="M245.937 258.866L194.783 59.0718" stroke="#44DAC8" data-v-8cc099f2></path><path d="M257.283 176V40" stroke="#44DAC8" data-v-8cc099f2></path><path d="M209.783 219.866L260.937 20.0718" stroke="#44DAC8" data-v-8cc099f2></path><path d="M304.937 219.866L253.783 20.0718" stroke="#44DAC8" data-v-8cc099f2></path>',12)),B("path",{d:"M107.783 21V39L142.283 58.5L176.783 39V21L142.283 1L107.783 21Z",fill:t.activeLayer===1?"#44DAC8":"#121212"},null,8,Eet),B("path",{d:"M107.783 21L142.283 1L176.783 21L142.283 41.5L107.783 21Z",stroke:t.activeLayer===1?"#121212":"white","stroke-linejoin":"round"},null,8,Met),B("path",{d:"M107.783 21V38.5L142.283 58.5L176.783 38.5V21",stroke:t.activeLayer===1?"#121212":"white","stroke-linejoin":"round"},null,8,Tet),B("path",{d:"M142.283 41.5V58.5",stroke:t.activeLayer===1?"#121212":"white","stroke-linejoin":"round"},null,8,Pet),B("path",{d:"M163.783 60V78L198.283 97.5L232.783 78V60L198.283 40L163.783 60Z",fill:t.activeLayer===1?"#44DAC8":"#121212"},null,8,Det),B("path",{d:"M163.783 60L198.283 40L232.783 60L198.283 80.5L163.783 60Z",stroke:t.activeLayer===1?"#121212":"white","stroke-linejoin":"round"},null,8,Iet),B("path",{d:"M163.783 60V77.5L198.283 97.5L232.783 77.5V60",stroke:t.activeLayer===1?"#121212":"white","stroke-linejoin":"round"},null,8,Let),B("path",{d:"M198.283 80.5V97.5",stroke:t.activeLayer===1?"#121212":"white","stroke-linejoin":"round"},null,8,ket),B("path",{d:"M222.783 21V39L257.283 58.5L291.783 39V21L257.283 1L222.783 21Z",fill:t.activeLayer===1?"#44DAC8":"#121212"},null,8,Ret),B("path",{d:"M222.783 21L257.283 1L291.783 21L257.283 41.5L222.783 21Z",stroke:t.activeLayer===1?"#121212":"white","stroke-linejoin":"round"},null,8,Oet),B("path",{d:"M222.783 21V38.5L257.283 58.5L291.783 38.5V21",stroke:t.activeLayer===1?"#121212":"white","stroke-linejoin":"round"},null,8,Bet),B("path",{d:"M257.283 41.5V58.5",stroke:t.activeLayer===1?"#121212":"white","stroke-linejoin":"round"},null,8,Net),B("rect",{x:"0",y:"0",width:"395",height:"100",class:"rect",onMouseover:r[0]||(r[0]=i=>t.$emit("onActiveLayerChange",1)),onMouseout:r[1]||(r[1]=i=>t.$emit("onActiveLayerChange",void 0))},null,32),B("rect",{x:"0",y:"100",width:"395",height:"270",class:"rect",onMouseover:r[2]||(r[2]=i=>t.$emit("onActiveLayerChange",2)),onMouseout:r[3]||(r[3]=i=>t.$emit("onActiveLayerChange",void 0))},null,32),B("rect",{x:"0",y:"370",width:"395",height:"200",class:"rect",onMouseover:r[4]||(r[4]=i=>t.$emit("onActiveLayerChange",3)),onMouseout:r[5]||(r[5]=i=>t.$emit("onActiveLayerChange",void 0))},null,32),B("rect",{x:"0",y:"570",width:"395",height:"200",class:"rect",onMouseover:r[6]||(r[6]=i=>t.$emit("onActiveLayerChange",4)),onMouseout:r[7]||(r[7]=i=>t.$emit("onActiveLayerChange",void 0))},null,32)]))}}),Fet=Ar(Vet,[["__scopeId","data-v-8cc099f2"]]);function zet(e){return e&&e.length>10?e.substring(0,6)+"..."+e.substring(e.length-4,e.length):""}function Het(e){return localStorage&&localStorage.setItem("token",e)}function Uet(){return localStorage&&localStorage.getItem("token")}function _K(e){return localStorage&&localStorage.setItem("wallet_type",e)}function Get(){return localStorage&&localStorage.getItem("wallet_type")}function jet(e){return localStorage&&localStorage.setItem("invite_code",e)}function Wet(){return localStorage&&localStorage.getItem("invite_code")}var M_,qet=new Uint8Array(16);function Yet(){if(!M_&&(M_=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||typeof msCrypto<"u"&&typeof msCrypto.getRandomValues=="function"&&msCrypto.getRandomValues.bind(msCrypto),!M_))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return M_(qet)}const Xet=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function Zet(e){return typeof e=="string"&&Xet.test(e)}var La=[];for(var s9=0;s9<256;++s9)La.push((s9+256).toString(16).substr(1));function Qet(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,r=(La[e[t+0]]+La[e[t+1]]+La[e[t+2]]+La[e[t+3]]+"-"+La[e[t+4]]+La[e[t+5]]+"-"+La[e[t+6]]+La[e[t+7]]+"-"+La[e[t+8]]+La[e[t+9]]+"-"+La[e[t+10]]+La[e[t+11]]+La[e[t+12]]+La[e[t+13]]+La[e[t+14]]+La[e[t+15]]).toLowerCase();if(!Zet(r))throw TypeError("Stringified UUID is invalid");return r}function K1(e,t,r){e=e||{};var i=e.random||(e.rng||Yet)();return i[6]=i[6]&15|64,i[8]=i[8]&63|128,Qet(i)}var Q0e=(e=>(e.PARTICLE="particle",e.PRIVATE_KEY="private_key",e.METAMASK="metamask",e.RAINBOW="rainbow",e.TRUST="trust",e.IM_TOKEN="im_token",e.BIT_KEEP="bit_keep",e.PHANTOM="phantom",e.OTHER="other",e))(Q0e||{}),Pw=(e=>(e.SIGN="sign",e.LOGIN="login",e.OPEN="open",e.OPEN_WALLET="open_wallet",e))(Pw||{}),Hk=(e=>(e.PAGE_LOGIN_BUTTON_CLICK="page_login_button_click",e.PAGE_LOGIN_BUTTON_CLICK_SUCCESS="page_login_button_click_success",e.PAGE_LOGIN_BUTTON_CLICK_FAILURE="page_login_button_click_failure",e.PAGE_LOGIN_SUCCESS_BACK="page_login_success_back",e.PAGE_SIGN_CONFIRM_BUTTON_CLICK="page_sign_confirm_button_click",e.PAGE_SIGN_CONFIRM_BUTTON_CLICK_SUCCESS="page_sign_confirm_button_click_success",e.PAGE_SIGN_CONFIRM_BUTTON_CLICK_FAILURE="page_sign_confirm_button_click_failure",e.PAGE_SETTING_MASTER_PASSWORD_ENTER="page_setting_master_password_enter",e.PAGE_SETTING_MASTER_PASSWORD_SET="page_setting_master_password_set",e.PAGE_SETTING_MASTER_PASSWORD_CHANGE="page_setting_master_password_change",e.PAGE_MASTER_PASSWORD_VERIFY="page_master_password_verify",e.PAGE_MASTER_PASSWORD_VERIFY_SUCCESS="page_master_password_verify_success",e))(Hk||{}),Ket=class{constructor(t){this.options=t}active(t){const r=Math.round(new Date().getTime()/1e3),i=K1(),{project_uuid:n,project_key:a,project_app_uuid:o}=this.options.project_config,s={timestamp:r,random_str:i,project_app_uuid:o,projectUuid:n,projectKey:a};let l=this.options.sdk_api_domain+"/active?";Object.keys(s).forEach(u=>{l+=`${u}=${encodeURI(s[u])}&`}),l=l.slice(0,-1),navigator.sendBeacon(l,new Blob([new URLSearchParams(t).toString()],{type:"application/x-www-form-urlencoded"}))}records(t){try{const r=Math.round(new Date().getTime()/1e3),i=K1(),{project_uuid:n,project_key:a,project_app_uuid:o}=this.options.project_config,s={timestamp:r,random_str:i,project_app_uuid:o,projectUuid:n,projectKey:a};let l=this.options.sdk_api_domain+"/records?";Object.keys(s).forEach(u=>{l+=`${u}=${encodeURI(s[u])}&`}),l=l.slice(0,-1),navigator.sendBeacon(l,new Blob([new URLSearchParams(t).toString()],{type:"application/x-www-form-urlencoded"}))}catch{}}},Jet=Object.defineProperty,$et=(e,t)=>{for(var r in t)Jet(e,r,{get:t[r],enumerable:!0})},ett={id:1,name:"Ethereum",chainType:"evm",icon:"https://static.particle.network/token-list/ethereum/native.png",nativeIcon:"",fullname:"Ethereum Mainnet",network:"Mainnet",website:"https://ethereum.org",nativeCurrency:{name:"Ether",symbol:"ETH",decimals:18},rpcUrl:"https://ethereum.publicnode.com",blockExplorerUrl:"https://etherscan.io",features:[{name:"EIP1559"},{name:"ERC4337",contracts:[{name:"BICONOMY",version:"1.0.0"},{name:"BICONOMY",version:"2.0.0"},{name:"SIMPLE",version:"1.0.0"},{name:"SIMPLE",version:"2.0.0"},{name:"CYBERCONNECT",version:"1.0.0"},{name:"LIGHT",version:"1.0.2"},{name:"XTERIO",version:"1.0.0"},{name:"BTC",version:"1.0.0"},{name:"BTC",version:"2.0.0"},{name:"COINBASE",version:"1.0.0"},{name:"UNIVERSAL",version:"1.0.2"},{name:"UNIVERSAL",version:"1.0.3"}]},{name:"SWAP"},{name:"ON-RAMP"}]},ttt={id:10,name:"Optimism",chainType:"evm",icon:"https://static.particle.network/token-list/optimism/native.png",nativeIcon:"",fullname:"Optimism Mainnet",network:"Mainnet",website:"https://optimism.io",nativeCurrency:{name:"Ether",symbol:"ETH",decimals:18},rpcUrl:"https://mainnet.optimism.io",blockExplorerUrl:"https://optimistic.etherscan.io",features:[{name:"EIP1559"},{name:"ERC4337",contracts:[{name:"BICONOMY",version:"1.0.0"},{name:"BICONOMY",version:"2.0.0"},{name:"SIMPLE",version:"1.0.0"},{name:"SIMPLE",version:"2.0.0"},{name:"CYBERCONNECT",version:"1.0.0"},{name:"LIGHT",version:"1.0.2"},{name:"COINBASE",version:"1.0.0"},{name:"UNIVERSAL",version:"1.0.2"},{name:"UNIVERSAL",version:"1.0.3"}]},{name:"SWAP"},{name:"ON-RAMP"}]},rtt={id:18,name:"ThunderCore",chainType:"evm",icon:"https://static.particle.network/token-list/thundercore/native.png",nativeIcon:"",fullname:"ThunderCore Testnet",network:"Testnet",website:"https://thundercore.com",nativeCurrency:{name:"ThunderCore Token",symbol:"TT",decimals:18},rpcUrl:"https://testnet-rpc.thundercore.com",faucetUrl:"https://faucet-testnet.thundercore.com",blockExplorerUrl:"https://explorer-testnet.thundercore.com"},itt={id:20,name:"Elastos",chainType:"evm",icon:"https://static.particle.network/token-list/elastos/native.png",nativeIcon:"",fullname:"Elastos Mainnet",network:"Mainnet",website:"https://elastos.org",nativeCurrency:{name:"ELA",symbol:"ELA",decimals:18},rpcUrl:"https://api.elastos.io/esc",blockExplorerUrl:"https://esc.elastos.io",features:[{name:"ERC4337",contracts:[{name:"SIMPLE",version:"1.0.0"},{name:"SIMPLE",version:"2.0.0"},{name:"BTC",version:"1.0.0"},{name:"BTC",version:"2.0.0"}]}]},ntt={id:25,name:"Cronos",chainType:"evm",icon:"https://static.particle.network/token-list/cronos/native.png",nativeIcon:"",fullname:"Cronos Mainnet",network:"Mainnet",website:"https://cronos.org",nativeCurrency:{name:"Cronos",symbol:"CRO",decimals:18},rpcUrl:"https://evm.cronos.org",blockExplorerUrl:"https://cronoscan.com",features:[{name:"EIP1559"},{name:"SWAP"}]},att={id:56,name:"BSC",chainType:"evm",icon:"https://static.particle.network/token-list/bsc/native.png",nativeIcon:"https://static.particle.network/token-list/bsc/native.png",fullname:"BNB Chain",network:"Mainnet",website:"https://www.bnbchain.org/en",nativeCurrency:{name:"BNB",symbol:"BNB",decimals:18},rpcUrl:"https://bsc-dataseed1.binance.org",blockExplorerUrl:"https://bscscan.com",features:[{name:"ERC4337",contracts:[{name:"BICONOMY",version:"1.0.0"},{name:"BICONOMY",version:"2.0.0"},{name:"SIMPLE",version:"1.0.0"},{name:"SIMPLE",version:"2.0.0"},{name:"CYBERCONNECT",version:"1.0.0"},{name:"XTERIO",version:"1.0.0"},{name:"BTC",version:"1.0.0"},{name:"BTC",version:"2.0.0"},{name:"COINBASE",version:"1.0.0"},{name:"UNIVERSAL",version:"1.0.2"},{name:"UNIVERSAL",version:"1.0.3"}]},{name:"SWAP"},{name:"ON-RAMP"}]},ott={id:65,name:"OKC",chainType:"evm",icon:"https://static.particle.network/token-list/okc/native.png",nativeIcon:"",fullname:"OKTC Testnet",network:"Testnet",website:"https://www.okex.com/okexchain",nativeCurrency:{name:"OKT",symbol:"OKT",decimals:18},rpcUrl:"https://exchaintestrpc.okex.org",faucetUrl:"https://docs.oxdex.com/v/en/help/gitter",blockExplorerUrl:"https://www.oklink.com/okc-test"},stt={id:66,name:"OKC",chainType:"evm",icon:"https://static.particle.network/token-list/okc/native.png",nativeIcon:"",fullname:"OKTC Mainnet",network:"Mainnet",website:"https://www.okex.com/okc",nativeCurrency:{name:"OKT",symbol:"OKT",decimals:18},rpcUrl:"https://exchainrpc.okex.org",blockExplorerUrl:"https://www.oklink.com/okc",features:[{name:"SWAP"}]},ltt={id:71,name:"ConfluxESpace",chainType:"evm",icon:"https://static.particle.network/token-list/confluxespace/native.png",nativeIcon:"",fullname:"Conflux eSpace Testnet",network:"Testnet",website:"https://confluxnetwork.org",nativeCurrency:{name:"CFX",symbol:"CFX",decimals:18},rpcUrl:"https://evmtestnet.confluxrpc.com",faucetUrl:"https://efaucet.confluxnetwork.org",blockExplorerUrl:"https://evmtestnet.confluxscan.net"},utt={id:88,name:"Viction",chainType:"evm",icon:"https://static.particle.network/token-list/viction/native.png",nativeIcon:"",fullname:"Viction Mainnet",network:"Mainnet",website:"https://tomochain.com",nativeCurrency:{name:"Viction",symbol:"VIC",decimals:18},rpcUrl:"https://rpc.viction.xyz",blockExplorerUrl:"https://vicscan.xyz",features:[{name:"ERC4337",contracts:[{name:"SIMPLE",version:"1.0.0"},{name:"SIMPLE",version:"2.0.0"}]}]},ctt={id:89,name:"Viction",chainType:"evm",icon:"https://static.particle.network/token-list/viction/native.png",nativeIcon:"",fullname:"Viction Testnet",network:"Testnet",website:"https://tomochain.com",nativeCurrency:{name:"Viction",symbol:"VIC",decimals:18},rpcUrl:"https://rpc-testnet.viction.xyz",blockExplorerUrl:"https://testnet.vicscan.xyz",features:[{name:"ERC4337",contracts:[{name:"SIMPLE",version:"1.0.0"},{name:"SIMPLE",version:"2.0.0"}]}]},htt={id:97,name:"BSC",chainType:"evm",icon:"https://static.particle.network/token-list/bsc/native.png",nativeIcon:"https://static.particle.network/token-list/bsc/native.png",fullname:"BNB Chain Testnet",network:"Testnet",website:"https://www.bnbchain.org/en",nativeCurrency:{name:"BNB",symbol:"BNB",decimals:18},rpcUrl:"https://data-seed-prebsc-1-s1.binance.org:8545",faucetUrl:"https://testnet.bnbchain.org/faucet-smart",blockExplorerUrl:"https://testnet.bscscan.com",features:[{name:"ERC4337",contracts:[{name:"BICONOMY",version:"1.0.0"},{name:"BICONOMY",version:"2.0.0"},{name:"SIMPLE",version:"1.0.0"},{name:"SIMPLE",version:"2.0.0"},{name:"CYBERCONNECT",version:"1.0.0"},{name:"BTC",version:"1.0.0"},{name:"BTC",version:"2.0.0"},{name:"COINBASE",version:"1.0.0"},{name:"UNIVERSAL",version:"1.0.0"},{name:"UNIVERSAL",version:"1.0.2"},{name:"UNIVERSAL",version:"1.0.3"}]}]},dtt={id:100,name:"Gnosis",chainType:"evm",icon:"https://static.particle.network/token-list/gnosis/native.png",nativeIcon:"",fullname:"Gnosis Mainnet",network:"Mainnet",website:"https://docs.gnosischain.com",nativeCurrency:{name:"Gnosis",symbol:"XDAI",decimals:18},rpcUrl:"https://rpc.ankr.com/gnosis",blockExplorerUrl:"https://gnosisscan.io",features:[{name:"EIP1559"},{name:"ERC4337",contracts:[{name:"BICONOMY",version:"2.0.0"},{name:"SIMPLE",version:"1.0.0"},{name:"SIMPLE",version:"2.0.0"}]},{name:"SWAP"}]},ftt={id:101,name:"Solana",chainType:"solana",icon:"https://static.particle.network/token-list/solana/native.png",nativeIcon:"",fullname:"Solana Mainnet",network:"Mainnet",website:"https://solana.com",nativeCurrency:{name:"SOL",symbol:"SOL",decimals:9},rpcUrl:"https://api.mainnet-beta.solana.com",blockExplorerUrl:"https://solscan.io",features:[{name:"SWAP"},{name:"ON-RAMP"}]},ptt={id:102,name:"Solana",chainType:"solana",icon:"https://static.particle.network/token-list/solana/native.png",nativeIcon:"",fullname:"Solana Testnet",network:"Testnet",website:"https://solana.com",nativeCurrency:{name:"SOL",symbol:"SOL",decimals:9},rpcUrl:"https://api.testnet.solana.com",faucetUrl:"https://solfaucet.com",blockExplorerUrl:"https://solscan.io"},vtt={id:103,name:"Solana",chainType:"solana",icon:"https://static.particle.network/token-list/solana/native.png",nativeIcon:"",fullname:"Solana Devnet",network:"Devnet",website:"https://solana.com",nativeCurrency:{name:"SOL",symbol:"SOL",decimals:9},rpcUrl:"https://api.devnet.solana.com",faucetUrl:"https://solfaucet.com",blockExplorerUrl:"https://solscan.io"},mtt={id:108,name:"ThunderCore",chainType:"evm",icon:"https://static.particle.network/token-list/thundercore/native.png",nativeIcon:"",fullname:"ThunderCore Mainnet",network:"Mainnet",website:"https://thundercore.com",nativeCurrency:{name:"ThunderCore Token",symbol:"TT",decimals:18},rpcUrl:"https://mainnet-rpc.thundercore.com",blockExplorerUrl:"https://viewblock.io/thundercore"},gtt={id:111,name:"BOB",chainType:"evm",icon:"https://static.particle.network/token-list/bob/native.png",nativeIcon:"",fullname:"BOB Testnet",network:"Testnet",website:"https://www.gobob.xyz",nativeCurrency:{name:"ETH",symbol:"ETH",decimals:18},rpcUrl:"https://testnet.rpc.gobob.xyz",blockExplorerUrl:"https://testnet-explorer.gobob.xyz",features:[{name:"EIP1559"},{name:"ERC4337",contracts:[{name:"BTC",version:"1.0.0"},{name:"BTC",version:"2.0.0"}]}]},ytt={id:122,name:"fuse",chainType:"evm",icon:"https://static.particle.network/token-list/fuse/native.png",nativeIcon:"",fullname:"Fuse Mainnet",network:"Mainnet",website:"https://www.fuse.io",nativeCurrency:{name:"FUSE",symbol:"FUSE",decimals:18},rpcUrl:"https://rpc.fuse.io",blockExplorerUrl:"https://explorer.fuse.io",features:[{name:"ERC4337",contracts:[{name:"SIMPLE",version:"1.0.0"},{name:"SIMPLE",version:"2.0.0"}]}]},xtt={id:123,name:"fuse",chainType:"evm",icon:"https://static.particle.network/token-list/fuse/native.png",nativeIcon:"",fullname:"Fuse Testnet",network:"Testnet",website:"https://www.fuse.io",nativeCurrency:{name:"FUSE",symbol:"FUSE",decimals:18},rpcUrl:"https://rpc.fusespark.io",blockExplorerUrl:"https://explorer.fusespark.io",features:[{name:"ERC4337",contracts:[{name:"SIMPLE",version:"1.0.0"},{name:"SIMPLE",version:"2.0.0"}]}]},btt={id:137,name:"Polygon",chainType:"evm",icon:"https://static.particle.network/token-list/polygon/native.png",nativeIcon:"",fullname:"Polygon Mainnet",network:"Mainnet",website:"https://polygon.technology",nativeCurrency:{name:"MATIC",symbol:"MATIC",decimals:18},rpcUrl:"https://polygon-rpc.com",blockExplorerUrl:"https://polygonscan.com",features:[{name:"EIP1559"},{name:"ERC4337",contracts:[{name:"BICONOMY",version:"1.0.0"},{name:"BICONOMY",version:"2.0.0"},{name:"SIMPLE",version:"1.0.0"},{name:"SIMPLE",version:"2.0.0"},{name:"CYBERCONNECT",version:"1.0.0"},{name:"LIGHT",version:"1.0.2"},{name:"XTERIO",version:"1.0.0"},{name:"BTC",version:"1.0.0"},{name:"BTC",version:"2.0.0"},{name:"COINBASE",version:"1.0.0"},{name:"UNIVERSAL",version:"1.0.2"},{name:"UNIVERSAL",version:"1.0.3"}]},{name:"SWAP"},{name:"ON-RAMP"}]},wtt={id:169,name:"Manta",chainType:"evm",icon:"https://static.particle.network/token-list/manta/native.png",nativeIcon:"",fullname:"Manta Mainnet",network:"Mainnet",website:"https://manta.network",nativeCurrency:{name:"ETH",symbol:"ETH",decimals:18},rpcUrl:"https://pacific-rpc.manta.network/http",blockExplorerUrl:"https://pacific-explorer.manta.network",features:[{name:"EIP1559"},{name:"ERC4337",contracts:[{name:"BICONOMY",version:"2.0.0"},{name:"SIMPLE",version:"1.0.0"},{name:"SIMPLE",version:"2.0.0"}]},{name:"SWAP"}]},_tt={id:195,name:"OKBC",chainType:"evm",icon:"https://static.particle.network/token-list/okc/native.png",nativeIcon:"",fullname:"X Layer Testnet",network:"Testnet",website:"https://www.okx.com",nativeCurrency:{name:"OKB",symbol:"OKB",decimals:18},rpcUrl:"https://testrpc.xlayer.tech",blockExplorerUrl:"https://www.okx.com/explorer/xlayer-test",features:[{name:"ERC4337",contracts:[{name:"BICONOMY",version:"2.0.0"},{name:"SIMPLE",version:"1.0.0"},{name:"SIMPLE",version:"2.0.0"},{name:"BTC",version:"1.0.0"},{name:"BTC",version:"2.0.0"}]}]},Att={id:196,name:"OKBC",chainType:"evm",icon:"https://static.particle.network/token-list/okc/native.png",nativeIcon:"",fullname:"X Layer Mainnet",network:"Mainnet",website:"https://www.okx.com",nativeCurrency:{name:"OKB",symbol:"OKB",decimals:18},rpcUrl:"https://rpc.xlayer.tech",blockExplorerUrl:"https://www.okx.com/zh-hans/explorer/xlayer",features:[{name:"ERC4337",contracts:[{name:"BICONOMY",version:"2.0.0"},{name:"SIMPLE",version:"1.0.0"},{name:"SIMPLE",version:"2.0.0"},{name:"BTC",version:"1.0.0"},{name:"BTC",version:"2.0.0"}]}]},Stt={id:204,name:"opBNB",chainType:"evm",icon:"https://static.particle.network/token-list/opbnb/native.png",nativeIcon:"https://static.particle.network/token-list/bsc/native.png",fullname:"opBNB Mainnet",network:"Mainnet",website:"https://opbnb.bnbchain.org",nativeCurrency:{name:"BNB",symbol:"BNB",decimals:18},rpcUrl:"https://opbnb-mainnet-rpc.bnbchain.org",blockExplorerUrl:"https://mainnet.opbnbscan.com",features:[{name:"EIP1559"},{name:"ERC4337",contracts:[{name:"BICONOMY",version:"2.0.0"},{name:"SIMPLE",version:"1.0.0"},{name:"SIMPLE",version:"2.0.0"},{name:"CYBERCONNECT",version:"1.0.0"},{name:"XTERIO",version:"1.0.0"},{name:"COINBASE",version:"1.0.0"}]},{name:"ON-RAMP"}]},Ctt={id:212,name:"MAPProtocol",chainType:"evm",icon:"https://static.particle.network/token-list/mapprotocol/native.png",nativeIcon:"",fullname:"MAP Protocol Testnet",network:"Testnet",website:"https://maplabs.io",nativeCurrency:{name:"MAPO",symbol:"MAPO",decimals:18},rpcUrl:"https://testnet-rpc.maplabs.io",faucetUrl:"https://faucet.mapprotocol.io",blockExplorerUrl:"https://testnet.maposcan.io",features:[{name:"EIP1559"},{name:"ERC4337",contracts:[{name:"BTC",version:"1.0.0"},{name:"BTC",version:"2.0.0"}]}]},Ett={id:223,name:"BSquared",chainType:"evm",icon:"https://static.particle.network/token-list/bsquared/native.png",nativeIcon:"https://static.particle.network/token-list/btc/native.png",fullname:"B² Network Mainnet",network:"Mainnet",website:"https://www.bsquared.network",nativeCurrency:{name:"BTC",symbol:"BTC",decimals:18},rpcUrl:"https://rpc.bsquared.network",blockExplorerUrl:"https://explorer.bsquared.network",features:[{name:"ERC4337",contracts:[{name:"BTC",version:"1.0.0"},{name:"BTC",version:"2.0.0"}]}]},Mtt={id:250,name:"Fantom",chainType:"evm",icon:"https://static.particle.network/token-list/fantom/native.png",nativeIcon:"",fullname:"Fantom Mainnet",network:"Mainnet",website:"https://fantom.foundation",nativeCurrency:{name:"FTM",symbol:"FTM",decimals:18},rpcUrl:"https://rpc.ftm.tools",blockExplorerUrl:"https://ftmscan.com",features:[{name:"ERC4337",contracts:[{name:"SIMPLE",version:"1.0.0"},{name:"SIMPLE",version:"2.0.0"}]},{name:"SWAP"}]},Ttt={id:300,name:"zkSync",chainType:"evm",icon:"https://static.particle.network/token-list/zksync/native.png",nativeIcon:"",fullname:"zkSync Era Sepolia",network:"Sepolia",website:"https://era.zksync.io",nativeCurrency:{name:"zkSync",symbol:"ETH",decimals:18},rpcUrl:"https://sepolia.era.zksync.dev",faucetUrl:"https://portal.zksync.io/faucet",blockExplorerUrl:"https://sepolia.explorer.zksync.io",features:[{name:"EIP1559"}]},Ptt={id:321,name:"KCC",chainType:"evm",icon:"https://static.particle.network/token-list/kcc/native.png",nativeIcon:"",fullname:"KCC Mainnet",network:"Mainnet",website:"https://kcc.io",nativeCurrency:{name:"KCS",symbol:"KCS",decimals:18},rpcUrl:"https://rpc-mainnet.kcc.network",blockExplorerUrl:"https://explorer.kcc.io/en"},Dtt={id:322,name:"KCC",chainType:"evm",icon:"https://static.particle.network/token-list/kcc/native.png",nativeIcon:"",fullname:"KCC Testnet",network:"Testnet",website:"https://scan-testnet.kcc.network",nativeCurrency:{name:"KCS",symbol:"KCS",decimals:18},rpcUrl:"https://rpc-testnet.kcc.network",faucetUrl:"https://faucet-testnet.kcc.network",blockExplorerUrl:"https://scan-testnet.kcc.network"},Itt={id:324,name:"zkSync",chainType:"evm",icon:"https://static.particle.network/token-list/zksync/native.png",nativeIcon:"",fullname:"zkSync Era",network:"Mainnet",website:"https://zksync.io",nativeCurrency:{name:"zkSync",symbol:"ETH",decimals:18},rpcUrl:"https://zksync2-mainnet.zksync.io",blockExplorerUrl:"https://explorer.zksync.io",features:[{name:"EIP1559"},{name:"SWAP"},{name:"ON-RAMP"}]},Ltt={id:338,name:"Cronos",chainType:"evm",icon:"https://static.particle.network/token-list/cronos/native.png",nativeIcon:"",fullname:"Cronos Testnet",network:"Testnet",website:"https://cronos.org",nativeCurrency:{name:"Cronos",symbol:"CRO",decimals:18},rpcUrl:"https://evm-t3.cronos.org",faucetUrl:"https://cronos.org/faucet",blockExplorerUrl:"https://testnet.cronoscan.com",features:[{name:"EIP1559"}]},ktt={id:919,name:"Mode",chainType:"evm",icon:"https://static.particle.network/token-list/mode/native.png",nativeIcon:"",fullname:"Mode Testnet",network:"Testnet",website:"https://www.mode.network",nativeCurrency:{name:"ETH",symbol:"ETH",decimals:18},rpcUrl:"https://sepolia.mode.network",blockExplorerUrl:"https://sepolia.explorer.mode.network",features:[{name:"EIP1559"},{name:"ERC4337",contracts:[{name:"SIMPLE",version:"1.0.0"},{name:"SIMPLE",version:"2.0.0"},{name:"BTC",version:"1.0.0"},{name:"BTC",version:"2.0.0"}]}]},Rtt={id:995,name:"fiveire",chainType:"evm",icon:"https://static.particle.network/token-list/fiveire/native.png",nativeIcon:"",fullname:"5ire Mainnet",network:"Mainnet",website:"https://www.5ire.org",nativeCurrency:{name:"5IRE",symbol:"5IRE",decimals:18},rpcUrl:"https://rpc.5ire.network",blockExplorerUrl:"https://5irescan.io",features:[{name:"EIP1559"},{name:"ERC4337",contracts:[{name:"SIMPLE",version:"1.0.0"},{name:"SIMPLE",version:"2.0.0"}]}]},Ott={id:997,name:"fiveire",chainType:"evm",icon:"https://static.particle.network/token-list/fiveire/native.png",nativeIcon:"",fullname:"5ire Testnet",network:"Testnet",website:"https://www.5ire.org",nativeCurrency:{name:"5IRE",symbol:"5IRE",decimals:18},rpcUrl:"https://rpc.qa.5ire.network",blockExplorerUrl:"https://scan.qa.5ire.network",features:[{name:"EIP1559"},{name:"ERC4337",contracts:[{name:"SIMPLE",version:"1.0.0"},{name:"SIMPLE",version:"2.0.0"}]}]},Btt={id:1001,name:"Klaytn",chainType:"evm",icon:"https://static.particle.network/token-list/klaytn/native.png",nativeIcon:"",fullname:"Klaytn Testnet",network:"Testnet",website:"https://www.klaytn.com",nativeCurrency:{name:"Klaytn",symbol:"KLAY",decimals:18},rpcUrl:"https://api.baobab.klaytn.net:8651",faucetUrl:"https://baobab.wallet.klaytn.foundation/faucet",blockExplorerUrl:"https://baobab.scope.klaytn.com"},Ntt={id:1030,name:"ConfluxESpace",chainType:"evm",icon:"https://static.particle.network/token-list/confluxespace/native.png",nativeIcon:"",fullname:"Conflux eSpace",network:"Mainnet",website:"https://confluxnetwork.org",nativeCurrency:{name:"CFX",symbol:"CFX",decimals:18},rpcUrl:"https://evm.confluxrpc.com",blockExplorerUrl:"https://evm.confluxscan.net"},Vtt={id:1088,name:"Metis",chainType:"evm",icon:"https://static.particle.network/token-list/metis/native.png",nativeIcon:"",fullname:"Metis Mainnet",network:"Mainnet",website:"https://www.metis.io",nativeCurrency:{name:"Metis",symbol:"METIS",decimals:18},rpcUrl:"https://andromeda.metis.io/?owner=1088",blockExplorerUrl:"https://andromeda-explorer.metis.io"},Ftt={id:1101,name:"PolygonZkEVM",chainType:"evm",icon:"https://static.particle.network/token-list/polygonzkevm/native.png",nativeIcon:"",fullname:"Polygon zkEVM",network:"Mainnet",website:"https://polygon.technology/polygon-zkevm",nativeCurrency:{name:"ETH",symbol:"ETH",decimals:18},rpcUrl:"https://zkevm-rpc.com",blockExplorerUrl:"https://zkevm.polygonscan.com",features:[{name:"ERC4337",contracts:[{name:"BICONOMY",version:"1.0.0"},{name:"BICONOMY",version:"2.0.0"},{name:"SIMPLE",version:"1.0.0"},{name:"SIMPLE",version:"2.0.0"}]},{name:"SWAP"}]},ztt={id:1115,name:"Core",chainType:"evm",icon:"https://static.particle.network/token-list/core/native.png",nativeIcon:"",fullname:"Core Testnet",network:"Testnet",website:"https://coredao.org",nativeCurrency:{name:"CORE",symbol:"CORE",decimals:18},rpcUrl:"https://rpc.test.btcs.network",blockExplorerUrl:"https://scan.test.btcs.network",features:[{name:"ERC4337",contracts:[{name:"SIMPLE",version:"1.0.0"},{name:"SIMPLE",version:"2.0.0"},{name:"BTC",version:"1.0.0"},{name:"BTC",version:"2.0.0"}]}]},Htt={id:1116,name:"Core",chainType:"evm",icon:"https://static.particle.network/token-list/core/native.png",nativeIcon:"",fullname:"Core Mainnet",network:"Mainnet",website:"https://coredao.org",nativeCurrency:{name:"CORE",symbol:"CORE",decimals:18},rpcUrl:"https://rpc.coredao.org",blockExplorerUrl:"https://scan.coredao.org",features:[{name:"ERC4337",contracts:[{name:"SIMPLE",version:"1.0.0"},{name:"SIMPLE",version:"2.0.0"},{name:"BTC",version:"1.0.0"},{name:"BTC",version:"2.0.0"}]}]},Utt={id:1123,name:"BSquared",chainType:"evm",icon:"https://static.particle.network/token-list/bsquared/native.png",nativeIcon:"https://static.particle.network/token-list/btc/native.png",fullname:"B² Network Testnet",network:"Testnet",website:"https://www.bsquared.network",nativeCurrency:{name:"BTC",symbol:"BTC",decimals:18},rpcUrl:"https://b2-testnet.alt.technology",blockExplorerUrl:"https://testnet-explorer.bsquared.network",features:[{name:"ERC4337",contracts:[{name:"BTC",version:"1.0.0"},{name:"BTC",version:"2.0.0"},{name:"UNIVERSAL",version:"1.0.0"}]}]},Gtt={id:1225,name:"Hybrid",chainType:"evm",icon:"https://static.particle.network/token-list/hybrid/native.png",nativeIcon:"",fullname:"Hybrid Testnet",network:"Testnet",website:"https://buildonhybrid.com",nativeCurrency:{name:"HYB",symbol:"HYB",decimals:18},rpcUrl:"https://hybrid-testnet.rpc.caldera.xyz/http",blockExplorerUrl:"https://explorer.buildonhybrid.com",features:[{name:"ERC4337",contracts:[{name:"SIMPLE",version:"1.0.0"},{name:"SIMPLE",version:"2.0.0"}]}]},jtt={id:1284,name:"Moonbeam",chainType:"evm",icon:"https://static.particle.network/token-list/moonbeam/native.png",nativeIcon:"",fullname:"Moonbeam Mainnet",network:"Mainnet",website:"https://moonbeam.network/networks/moonbeam",nativeCurrency:{name:"GLMR",symbol:"GLMR",decimals:18},rpcUrl:"https://rpc.api.moonbeam.network",blockExplorerUrl:"https://moonbeam.moonscan.io",features:[{name:"EIP1559"},{name:"ERC4337",contracts:[{name:"BICONOMY",version:"2.0.0"},{name:"SIMPLE",version:"1.0.0"},{name:"SIMPLE",version:"2.0.0"}]},{name:"SWAP"}]},Wtt={id:1285,name:"Moonriver",chainType:"evm",icon:"https://static.particle.network/token-list/moonriver/native.png",nativeIcon:"",fullname:"Moonriver Mainnet",network:"Mainnet",website:"https://moonbeam.network/networks/moonriver",nativeCurrency:{name:"MOVR",symbol:"MOVR",decimals:18},rpcUrl:"https://rpc.api.moonriver.moonbeam.network",blockExplorerUrl:"https://moonriver.moonscan.io",features:[{name:"EIP1559"},{name:"ERC4337",contracts:[{name:"SIMPLE",version:"1.0.0"},{name:"SIMPLE",version:"2.0.0"}]},{name:"SWAP"}]},qtt={id:1287,name:"Moonbeam",chainType:"evm",icon:"https://static.particle.network/token-list/moonbeam/native.png",nativeIcon:"",fullname:"Moonbeam Testnet",network:"Testnet",website:"https://docs.moonbeam.network/networks/testnet",nativeCurrency:{name:"Dev",symbol:"DEV",decimals:18},rpcUrl:"https://rpc.api.moonbase.moonbeam.network",faucetUrl:"https://apps.moonbeam.network/moonbase-alpha/faucet",blockExplorerUrl:"https://moonbase.moonscan.io",features:[{name:"EIP1559"},{name:"ERC4337",contracts:[{name:"SIMPLE",version:"1.0.0"},{name:"SIMPLE",version:"2.0.0"}]}]},Ytt={id:1328,name:"Sei",chainType:"evm",icon:"https://static.particle.network/token-list/sei/native.png",nativeIcon:"",fullname:"Sei Testnet",network:"Testnet",website:"https://www.sei.io",nativeCurrency:{name:"SEI",symbol:"SEI",decimals:18},rpcUrl:"https://evm-rpc-testnet.sei-apis.com",blockExplorerUrl:"https://testnet.seistream.app",features:[{name:"EIP1559"},{name:"ERC4337",contracts:[{name:"SIMPLE",version:"1.0.0"},{name:"SIMPLE",version:"2.0.0"},{name:"UNIVERSAL",version:"1.0.0"}]}]},Xtt={id:1329,name:"Sei",chainType:"evm",icon:"https://static.particle.network/token-list/sei/native.png",nativeIcon:"",fullname:"Sei Mainnet",network:"Mainnet",website:"https://www.sei.io",nativeCurrency:{name:"SEI",symbol:"SEI",decimals:18},rpcUrl:"https://evm-rpc.sei-apis.com",blockExplorerUrl:"https://seistream.app",features:[{name:"EIP1559"},{name:"ERC4337",contracts:[{name:"BICONOMY",version:"2.0.0"},{name:"SIMPLE",version:"1.0.0"},{name:"SIMPLE",version:"2.0.0"}]}]},Ztt={id:1501,name:"BEVM",chainType:"evm",icon:"https://static.particle.network/token-list/bevm/native.png",nativeIcon:"https://static.particle.network/token-list/btc/native.png",fullname:"BEVM Canary Mainnet",network:"Mainnet",website:"https://www.bevm.io",nativeCurrency:{name:"BTC",symbol:"BTC",decimals:18},rpcUrl:"https://rpc-canary-1.bevm.io",blockExplorerUrl:"https://scan-canary.bevm.io",features:[{name:"ERC4337",contracts:[{name:"BTC",version:"1.0.0"},{name:"BTC",version:"2.0.0"}]}]},Qtt={id:1502,name:"BEVM",chainType:"evm",icon:"https://static.particle.network/token-list/bevm/native.png",nativeIcon:"https://static.particle.network/token-list/btc/native.png",fullname:"BEVM Canary Testnet",network:"Testnet",website:"https://www.bevm.io",nativeCurrency:{name:"BTC",symbol:"BTC",decimals:18},rpcUrl:"https://canary-testnet.bevm.io",blockExplorerUrl:"https://scan-canary-testnet.bevm.io",features:[{name:"ERC4337",contracts:[{name:"BTC",version:"1.0.0"},{name:"BTC",version:"2.0.0"}]}]},Ktt={id:1513,name:"StoryNetwork",chainType:"evm",icon:"https://static.particle.network/token-list/storynetwork/native.png",nativeIcon:"",fullname:"Story Network Testnet",network:"Testnet",website:"https://explorer.testnet.storyprotocol.net",nativeCurrency:{name:"IP",symbol:"IP",decimals:18},rpcUrl:"https://testnet.storyrpc.io",blockExplorerUrl:"https://testnet.storyscan.xyz",features:[{name:"EIP1559"},{name:"ERC4337",contracts:[{name:"SIMPLE",version:"1.0.0"},{name:"SIMPLE",version:"2.0.0"}]}]},Jtt={id:1625,name:"Gravity",chainType:"evm",icon:"https://static.particle.network/token-list/gravity/native.png",nativeIcon:"",fullname:"Gravity Mainnet",network:"Mainnet",website:"https://gravity.xyz",nativeCurrency:{name:"G",symbol:"G",decimals:18},rpcUrl:"https://rpc.gravity.xyz",blockExplorerUrl:"https://gscan.xyz",features:[{name:"EIP1559"},{name:"ERC4337",contracts:[{name:"SIMPLE",version:"1.0.0"},{name:"SIMPLE",version:"2.0.0"}]}]},$tt={id:1715,name:"Combo",chainType:"evm",icon:"https://static.particle.network/token-list/combo/native.png",nativeIcon:"https://static.particle.network/token-list/bsc/native.png",fullname:"Combo Testnet",network:"Testnet",website:"https://docs.combonetwork.io",nativeCurrency:{name:"BNB",symbol:"BNB",decimals:18},rpcUrl:"https://test-rpc.combonetwork.io",blockExplorerUrl:"https://combotrace-testnet.nodereal.io",features:[{name:"EIP1559"},{name:"ERC4337",contracts:[{name:"BICONOMY",version:"2.0.0"},{name:"SIMPLE",version:"1.0.0"},{name:"SIMPLE",version:"2.0.0"},{name:"UNIVERSAL",version:"1.0.0"}]}]},ert={id:1946,name:"Soneium",chainType:"evm",icon:"https://static.particle.network/token-list/soneium/native.png",nativeIcon:"",fullname:"Soneium Minato Testnet",network:"Testnet",website:"https://soneium.org",nativeCurrency:{name:"ETH",symbol:"ETH",decimals:18},rpcUrl:"https://rpc.minato.soneium.org",blockExplorerUrl:"https://explorer-testnet.soneium.org",features:[{name:"EIP1559"},{name:"ERC4337",contracts:[{name:"SIMPLE",version:"1.0.0"},{name:"SIMPLE",version:"2.0.0"},{name:"COINBASE",version:"1.0.0"}]}]},trt={id:2221,name:"Kava",chainType:"evm",icon:"https://static.particle.network/token-list/kava/native.png",nativeIcon:"",fullname:"Kava Testnet",network:"Testnet",website:"https://www.kava.io",nativeCurrency:{name:"KAVA",symbol:"KAVA",decimals:18},rpcUrl:"https://evm.testnet.kava.io",faucetUrl:"https://faucet.kava.io",blockExplorerUrl:"https://testnet.kavascan.com"},rrt={id:2222,name:"Kava",chainType:"evm",icon:"https://static.particle.network/token-list/kava/native.png",nativeIcon:"",fullname:"Kava Mainnet",network:"Mainnet",website:"https://www.kava.io",nativeCurrency:{name:"KAVA",symbol:"KAVA",decimals:18},rpcUrl:"https://evm.kava.io",blockExplorerUrl:"https://kavascan.com"},irt={id:2241,name:"peaq",chainType:"evm",icon:"https://static.particle.network/token-list/peaq/native.png",nativeIcon:"",fullname:"Peaq Krest Mainnet",network:"Mainnet",website:"https://www.peaq.network",nativeCurrency:{name:"KRST",symbol:"KRST",decimals:18},rpcUrl:"https://erpc-krest.peaq.network",blockExplorerUrl:"https://krest.subscan.io",features:[{name:"EIP1559"},{name:"ERC4337",contracts:[{name:"SIMPLE",version:"1.0.0"},{name:"SIMPLE",version:"2.0.0"}]}]},nrt={id:2442,name:"PolygonZkEVM",chainType:"evm",icon:"https://static.particle.network/token-list/polygonzkevm/native.png",nativeIcon:"",fullname:"Polygon zkEVM Cardona",network:"Cardona",website:"https://polygon.technology",nativeCurrency:{name:"ETH",symbol:"ETH",decimals:18},rpcUrl:"https://rpc.cardona.zkevm-rpc.com",blockExplorerUrl:"https://cardona-zkevm.polygonscan.com",features:[{name:"ERC4337",contracts:[{name:"BICONOMY",version:"2.0.0"},{name:"BTC",version:"1.0.0"},{name:"BTC",version:"2.0.0"}]}]},art={id:2648,name:"ainn",chainType:"evm",icon:"https://static.particle.network/token-list/ainn/native.png",nativeIcon:"https://static.particle.network/token-list/btc/native.png",fullname:"AILayer Testnet",network:"Testnet",website:"https://anvm.io",nativeCurrency:{name:"BTC",symbol:"BTC",decimals:18},rpcUrl:"https://rpc.anvm.io",blockExplorerUrl:"https://explorer.anvm.io",features:[{name:"ERC4337",contracts:[{name:"BTC",version:"1.0.0"},{name:"BTC",version:"2.0.0"}]}]},ort={id:2649,name:"ainn",chainType:"evm",icon:"https://static.particle.network/token-list/ainn/native.png",nativeIcon:"https://static.particle.network/token-list/btc/native.png",fullname:"AILayer Mainnet",network:"Mainnet",website:"https://anvm.io",nativeCurrency:{name:"BTC",symbol:"BTC",decimals:18},rpcUrl:"https://mainnet-rpc.ailayer.xyz",blockExplorerUrl:"https://mainnet-explorer.ailayer.xyz",features:[{name:"ERC4337",contracts:[{name:"BTC",version:"1.0.0"},{name:"BTC",version:"2.0.0"}]}]},srt={id:2777,name:"GMNetwork",chainType:"evm",icon:"https://static.particle.network/token-list/gmnetwork/native.png",nativeIcon:"",fullname:"GM Network Mainnet",network:"Mainnet",website:"https://gmnetwork.ai",nativeCurrency:{name:"Ether",symbol:"ETH",decimals:18},rpcUrl:"https://rpc.gmnetwork.ai",blockExplorerUrl:"https://scan.gmnetwork.ai",features:[{name:"EIP1559"},{name:"ERC4337",contracts:[{name:"SIMPLE",version:"1.0.0"},{name:"SIMPLE",version:"2.0.0"}]}]},lrt={id:3109,name:"satoshivm",chainType:"evm",icon:"https://static.particle.network/token-list/satoshivm/native.png",nativeIcon:"https://static.particle.network/token-list/btc/native.png",fullname:"SatoshiVM Alpha",network:"Mainnet",website:"https://www.satoshivm.io",nativeCurrency:{name:"BTC",symbol:"BTC",decimals:18},rpcUrl:"https://alpha-rpc-node-http.svmscan.io",blockExplorerUrl:"https://svmscan.io",features:[{name:"EIP1559"},{name:"ERC4337",contracts:[{name:"BTC",version:"1.0.0"},{name:"BTC",version:"2.0.0"}]}]},urt={id:3110,name:"SatoshiVM",chainType:"evm",icon:"https://static.particle.network/token-list/satoshivm/native.png",nativeIcon:"https://static.particle.network/token-list/btc/native.png",fullname:"SatoshiVM Testnet",network:"Testnet",website:"https://www.satoshivm.io",nativeCurrency:{name:"BTC",symbol:"BTC",decimals:18},rpcUrl:"https://test-rpc-node-http.svmscan.io",blockExplorerUrl:"https://testnet.svmscan.io",features:[{name:"EIP1559"},{name:"ERC4337",contracts:[{name:"BTC",version:"1.0.0"},{name:"BTC",version:"2.0.0"}]}]},crt={id:3338,name:"peaq",chainType:"evm",icon:"https://static.particle.network/token-list/peaq/native.png",nativeIcon:"",fullname:"Peaq Mainnet",network:"Mainnet",website:"https://peaq.subscan.io",nativeCurrency:{name:"PEAQ",symbol:"PEAQ",decimals:18},rpcUrl:" https://evm.peaq.network",blockExplorerUrl:"https://peaq.subscan.io",features:[{name:"EIP1559"},{name:"ERC4337",contracts:[{name:"SIMPLE",version:"1.0.0"},{name:"SIMPLE",version:"2.0.0"}]}]},hrt={id:3636,name:"Botanix",chainType:"evm",icon:"https://static.particle.network/token-list/botanix/native.png",nativeIcon:"https://static.particle.network/token-list/btc/native.png",fullname:"Botanix Testnet",network:"Testnet",website:"https://botanixlabs.xyz",nativeCurrency:{name:"BTC",symbol:"BTC",decimals:18},rpcUrl:"https://node.botanixlabs.dev",blockExplorerUrl:"https://blockscout.botanixlabs.dev",features:[{name:"ERC4337",contracts:[{name:"BTC",version:"1.0.0"},{name:"BTC",version:"2.0.0"}]}]},drt={id:3776,name:"AstarZkEVM",chainType:"evm",icon:"https://static.particle.network/token-list/astarzkevm/native.png",nativeIcon:"",fullname:"Astar zkEVM Mainet",network:"Mainnet",website:"https://astar.network",nativeCurrency:{name:"Sepolia Ether",symbol:"ETH",decimals:18},rpcUrl:"https://rpc.startale.com/astar-zkevm",blockExplorerUrl:"https://astar-zkevm.explorer.startale.com",features:[{name:"ERC4337",contracts:[{name:"SIMPLE",version:"1.0.0"},{name:"SIMPLE",version:"2.0.0"}]}]},frt={id:4002,name:"Fantom",chainType:"evm",icon:"https://static.particle.network/token-list/fantom/native.png",nativeIcon:"",fullname:"Fantom Testnet",network:"Testnet",website:"https://docs.fantom.foundation/quick-start/short-guide#fantom-testnet",nativeCurrency:{name:"FTM",symbol:"FTM",decimals:18},rpcUrl:"https://rpc.testnet.fantom.network",faucetUrl:"https://faucet.fantom.network",blockExplorerUrl:"https://testnet.ftmscan.com",features:[{name:"ERC4337",contracts:[{name:"SIMPLE",version:"1.0.0"},{name:"SIMPLE",version:"2.0.0"}]}]},prt={id:4200,name:"Merlin",chainType:"evm",icon:"https://static.particle.network/token-list/merlin/native.png",nativeIcon:"https://static.particle.network/token-list/btc/native.png",fullname:"Merlin Mainnet",network:"Mainnet",website:"https://merlinprotocol.org",nativeCurrency:{name:"BTC",symbol:"BTC",decimals:18},rpcUrl:"https://rpc.merlinchain.io",blockExplorerUrl:"https://scan.merlinchain.io",features:[{name:"ERC4337",contracts:[{name:"BTC",version:"1.0.0"},{name:"BTC",version:"2.0.0"}]},{name:"SWAP"}]},vrt={id:4689,name:"iotex",chainType:"evm",icon:"https://static.particle.network/token-list/iotex/native.png",nativeIcon:"",fullname:"IoTeX Mainnet",network:"Mainnet",website:"https://iotex.io",nativeCurrency:{name:"IOTX",symbol:"IOTX",decimals:18},rpcUrl:"https://babel-api.mainnet.iotex.io",blockExplorerUrl:"https://iotexscan.io",features:[{name:"ERC4337",contracts:[{name:"SIMPLE",version:"1.0.0"},{name:"SIMPLE",version:"2.0.0"}]}]},mrt={id:4690,name:"iotex",chainType:"evm",icon:"https://static.particle.network/token-list/iotex/native.png",nativeIcon:"",fullname:"IoTeX Testnet",network:"Testnet",website:"https://iotex.io",nativeCurrency:{name:"IOTX",symbol:"IOTX",decimals:18},rpcUrl:"https://babel-api.testnet.iotex.io",blockExplorerUrl:"https://testnet.iotexscan.io",features:[{name:"ERC4337",contracts:[{name:"SIMPLE",version:"1.0.0"},{name:"SIMPLE",version:"2.0.0"}]}]},grt={id:5e3,name:"Mantle",chainType:"evm",icon:"https://static.particle.network/token-list/mantle/native.png",nativeIcon:"",fullname:"Mantle Mainnet",network:"Mainnet",website:"https://mantle.xyz",nativeCurrency:{name:"MNT",symbol:"MNT",decimals:18},rpcUrl:"https://rpc.mantle.xyz",blockExplorerUrl:"https://explorer.mantle.xyz",features:[{name:"ERC4337",contracts:[{name:"BICONOMY",version:"2.0.0"},{name:"SIMPLE",version:"1.0.0"},{name:"SIMPLE",version:"2.0.0"},{name:"CYBERCONNECT",version:"1.0.0"},{name:"BTC",version:"1.0.0"},{name:"BTC",version:"2.0.0"}]},{name:"SWAP"},{name:"ON-RAMP"}]},yrt={id:5003,name:"Mantle",chainType:"evm",icon:"https://static.particle.network/token-list/mantle/native.png",nativeIcon:"",fullname:"Mantle Sepolia Testnet",network:"Testnet",website:"https://mantle.xyz",nativeCurrency:{name:"MNT",symbol:"MNT",decimals:18},rpcUrl:"https://rpc.sepolia.mantle.xyz",faucetUrl:"https://faucet.sepolia.mantle.xyz",blockExplorerUrl:"https://explorer.sepolia.mantle.xyz",features:[{name:"ERC4337",contracts:[{name:"BICONOMY",version:"2.0.0"},{name:"SIMPLE",version:"1.0.0"},{name:"SIMPLE",version:"2.0.0"},{name:"BTC",version:"1.0.0"},{name:"BTC",version:"2.0.0"}]}]},xrt={id:5545,name:"Duckchain",chainType:"evm",icon:"https://static.particle.network/token-list/duckchain/native.png",nativeIcon:"https://static.particle.network/token-list/duckchain/ton.png",fullname:"Duckchain Mainnet",network:"Mainnet",website:"https://duckchain.io",nativeCurrency:{name:"TON",symbol:"TON",decimals:18},rpcUrl:"https://rpc.duckchain.io",blockExplorerUrl:"https://scan.duckchain.io",features:[{name:"EIP1559"},{name:"ERC4337",contracts:[{name:"SIMPLE",version:"1.0.0"},{name:"SIMPLE",version:"2.0.0"}]}]},brt={id:5611,name:"opBNB",chainType:"evm",icon:"https://static.particle.network/token-list/opbnb/native.png",nativeIcon:"https://static.particle.network/token-list/bsc/native.png",fullname:"opBNB Testnet",network:"Testnet",website:"https://opbnb.bnbchain.org",nativeCurrency:{name:"BNB",symbol:"BNB",decimals:18},rpcUrl:"https://opbnb-testnet-rpc.bnbchain.org",blockExplorerUrl:"https://opbnb-testnet.bscscan.com",features:[{name:"EIP1559"},{name:"ERC4337",contracts:[{name:"BICONOMY",version:"2.0.0"},{name:"SIMPLE",version:"1.0.0"},{name:"SIMPLE",version:"2.0.0"},{name:"CYBERCONNECT",version:"1.0.0"},{name:"COINBASE",version:"1.0.0"},{name:"UNIVERSAL",version:"1.0.0"}]}]},wrt={id:6321,name:"aura",chainType:"evm",icon:"https://static.particle.network/token-list/aura/native.png",nativeIcon:"",fullname:"Aura Testnet",network:"Testnet",website:"https://aura.network",nativeCurrency:{name:"AURA",symbol:"AURA",decimals:18},rpcUrl:"https://jsonrpc.euphoria.aura.network",blockExplorerUrl:"https://euphoria.aurascan.io",features:[{name:"ERC4337",contracts:[{name:"SIMPLE",version:"1.0.0"},{name:"SIMPLE",version:"2.0.0"}]}]},_rt={id:6322,name:"aura",chainType:"evm",icon:"https://static.particle.network/token-list/aura/native.png",nativeIcon:"",fullname:"Aura Mainnet",network:"Mainnet",website:"https://aura.network",nativeCurrency:{name:"AURA",symbol:"AURA",decimals:18},rpcUrl:"https://jsonrpc.aura.network",blockExplorerUrl:"https://aurascan.io",features:[{name:"ERC4337",contracts:[{name:"SIMPLE",version:"1.0.0"},{name:"SIMPLE",version:"2.0.0"}]}]},Art={id:7e3,name:"ZetaChain",chainType:"evm",icon:"https://static.particle.network/token-list/zetachain/native.png",nativeIcon:"",fullname:"ZetaChain Mainnet",network:"Mainnet",website:"https://zetachain.com",nativeCurrency:{name:"ZETA",symbol:"ZETA",decimals:18},rpcUrl:"https://zetachain-evm.blockpi.network/v1/rpc/public",blockExplorerUrl:"https://zetachain.blockscout.com",features:[{name:"EIP1559"},{name:"ERC4337",contracts:[{name:"BICONOMY",version:"2.0.0"},{name:"SIMPLE",version:"1.0.0"},{name:"SIMPLE",version:"2.0.0"}]}]},Srt={id:7001,name:"ZetaChain",chainType:"evm",icon:"https://static.particle.network/token-list/zetachain/native.png",nativeIcon:"",fullname:"ZetaChain Testnet",network:"Testnet",website:"https://zetachain.com",nativeCurrency:{name:"ZETA",symbol:"ZETA",decimals:18},rpcUrl:"https://zetachain-athens-evm.blockpi.network/v1/rpc/public",faucetUrl:"https://labs.zetachain.com/get-zeta",blockExplorerUrl:"https://zetachain-athens-3.blockscout.com",features:[{name:"EIP1559"},{name:"ERC4337",contracts:[{name:"BICONOMY",version:"2.0.0"},{name:"SIMPLE",version:"1.0.0"},{name:"SIMPLE",version:"2.0.0"}]}]},Crt={id:7560,name:"Cyber",chainType:"evm",icon:"https://static.particle.network/token-list/cyber/native.png",nativeIcon:"",fullname:"Cyber Mainnet",network:"Mainnet",website:"https://cyber-explorer.alt.technology",nativeCurrency:{name:"ETH",symbol:"ETH",decimals:18},rpcUrl:"https://cyber.alt.technology",blockExplorerUrl:"https://cyberscan.co",features:[{name:"EIP1559"},{name:"ERC4337",contracts:[{name:"SIMPLE",version:"1.0.0"},{name:"SIMPLE",version:"2.0.0"},{name:"CYBERCONNECT",version:"1.0.0"}]}]},Ert={id:8217,name:"Klaytn",chainType:"evm",icon:"https://static.particle.network/token-list/klaytn/native.png",nativeIcon:"",fullname:"Klaytn Mainnet",network:"Mainnet",website:"https://www.klaytn.com",nativeCurrency:{name:"Klaytn",symbol:"KLAY",decimals:18},rpcUrl:"https://cypress.fandom.finance/archive",blockExplorerUrl:"https://scope.klaytn.com",features:[{name:"SWAP"}]},Mrt={id:8329,name:"lorenzo",chainType:"evm",icon:"https://static.particle.network/token-list/lorenzo/native.png",nativeIcon:"https://static.particle.network/token-list/btc/native.png",fullname:"Lorenzo Mainnet",network:"Mainnet",website:"https://lorenzo-protocol.xyz",nativeCurrency:{name:"stBTC",symbol:"stBTC",decimals:18},rpcUrl:"https://rpc.lorenzo-protocol.xyz",blockExplorerUrl:"https://scan.lorenzo-protocol.xyz",features:[{name:"EIP1559"},{name:"ERC4337",contracts:[{name:"BTC",version:"1.0.0"},{name:"BTC",version:"2.0.0"}]}]},Trt={id:8453,name:"Base",chainType:"evm",icon:"https://static.particle.network/token-list/base/native.png",nativeIcon:"",fullname:"Base Mainnet",network:"Mainnet",website:"https://base.org",nativeCurrency:{name:"ETH",symbol:"ETH",decimals:18},rpcUrl:"https://developer-access-mainnet.base.org",blockExplorerUrl:"https://basescan.org",features:[{name:"EIP1559"},{name:"ERC4337",contracts:[{name:"BICONOMY",version:"1.0.0"},{name:"BICONOMY",version:"2.0.0"},{name:"SIMPLE",version:"1.0.0"},{name:"SIMPLE",version:"2.0.0"},{name:"CYBERCONNECT",version:"1.0.0"},{name:"LIGHT",version:"1.0.2"},{name:"XTERIO",version:"1.0.0"},{name:"BTC",version:"1.0.0"},{name:"BTC",version:"2.0.0"},{name:"COINBASE",version:"1.0.0"},{name:"UNIVERSAL",version:"1.0.2"},{name:"UNIVERSAL",version:"1.0.3"}]},{name:"SWAP"},{name:"ON-RAMP"}]},Prt={id:9980,name:"Combo",chainType:"evm",icon:"https://static.particle.network/token-list/combo/native.png",nativeIcon:"https://static.particle.network/token-list/bsc/native.png",fullname:"Combo Mainnet",network:"Mainnet",website:"https://docs.combonetwork.io",nativeCurrency:{name:"BNB",symbol:"BNB",decimals:18},rpcUrl:"https://rpc.combonetwork.io",blockExplorerUrl:"https://combotrace.nodereal.io",features:[{name:"EIP1559"},{name:"ERC4337",contracts:[{name:"BICONOMY",version:"2.0.0"},{name:"SIMPLE",version:"1.0.0"},{name:"SIMPLE",version:"2.0.0"}]}]},Drt={id:9990,name:"peaq",chainType:"evm",icon:"https://static.particle.network/token-list/peaq/native.png",nativeIcon:"",fullname:"Peaq Agung Testnet",network:"Testnet",website:"https://www.peaq.network",nativeCurrency:{name:"AGUNG",symbol:"AGUNG",decimals:18},rpcUrl:"https://rpcpc1-qa.agung.peaq.network",blockExplorerUrl:"https://agung-testnet.subscan.io",features:[{name:"EIP1559"},{name:"ERC4337",contracts:[{name:"SIMPLE",version:"1.0.0"},{name:"SIMPLE",version:"2.0.0"}]}]},Irt={id:10200,name:"Gnosis",chainType:"evm",icon:"https://static.particle.network/token-list/gnosis/native.png",nativeIcon:"",fullname:"Gnosis Testnet",network:"Testnet",website:"https://docs.gnosischain.com",nativeCurrency:{name:"Gnosis",symbol:"XDAI",decimals:18},rpcUrl:"https://optimism.gnosischain.com",faucetUrl:"https://gnosisfaucet.com",blockExplorerUrl:"https://blockscout.com/gnosis/chiado",features:[{name:"EIP1559"},{name:"ERC4337",contracts:[{name:"BICONOMY",version:"2.0.0"},{name:"SIMPLE",version:"1.0.0"},{name:"SIMPLE",version:"2.0.0"}]}]},Lrt={id:11501,name:"BEVM",chainType:"evm",icon:"https://static.particle.network/token-list/bevm/native.png",nativeIcon:"https://static.particle.network/token-list/btc/native.png",fullname:"BEVM Mainnet",network:"Mainnet",website:"https://www.bevm.io",nativeCurrency:{name:"BTC",symbol:"BTC",decimals:18},rpcUrl:"https://rpc-mainnet-1.bevm.io",blockExplorerUrl:"https://scan-mainnet.bevm.io",features:[{name:"ERC4337",contracts:[{name:"BTC",version:"1.0.0"},{name:"BTC",version:"2.0.0"}]}]},krt={id:11503,name:"BEVM",chainType:"evm",icon:"https://static.particle.network/token-list/bevm/native.png",nativeIcon:"https://static.particle.network/token-list/btc/native.png",fullname:"BEVM Testnet",network:"Testnet",website:"https://www.bevm.io",nativeCurrency:{name:"BTC",symbol:"BTC",decimals:18},rpcUrl:"https://testnet.bevm.io",blockExplorerUrl:"https://scan-testnet.bevm.io",features:[{name:"ERC4337",contracts:[{name:"BTC",version:"1.0.0"},{name:"BTC",version:"2.0.0"}]}]},Rrt={id:12015,name:"ReadON",chainType:"evm",icon:"https://static.particle.network/token-list/readon/native.png",nativeIcon:"",fullname:"ReadON Testnet",network:"Testnet",website:"https://opside.network",nativeCurrency:{name:"READ",symbol:"READ",decimals:18},rpcUrl:"https://pre-alpha-zkrollup-rpc.opside.network/readon-content-test-chain",blockExplorerUrl:"https://readon-content-test-chain.zkevm.opside.info",features:[{name:"ERC4337",contracts:[{name:"SIMPLE",version:"1.0.0"},{name:"SIMPLE",version:"2.0.0"}]}]},Ort={id:13473,name:"Immutable",chainType:"evm",icon:"https://static.particle.network/token-list/immutable/native.png",nativeIcon:"",fullname:"Immutable zkEVM Testnet",network:"Testnet",website:"https://www.immutable.com",nativeCurrency:{name:"IMX",symbol:"IMX",decimals:18},rpcUrl:"https://rpc.testnet.immutable.com",blockExplorerUrl:"https://explorer.testnet.immutable.com",features:[{name:"EIP1559"},{name:"ERC4337",contracts:[{name:"SIMPLE",version:"1.0.0"},{name:"SIMPLE",version:"2.0.0"}]}]},Brt={id:13505,name:"Gravity",chainType:"evm",icon:"https://static.particle.network/token-list/gravity/native.png",nativeIcon:"",fullname:"Gravity Testnet",network:"Testnet",website:"https://gravity.xyz",nativeCurrency:{name:"G",symbol:"G",decimals:18},rpcUrl:"https://rpc-sepolia.gravity.xyz",blockExplorerUrl:" https://explorer-sepolia.gravity.xyz",features:[{name:"EIP1559"}]},Nrt={id:15557,name:"Eosevm",chainType:"evm",icon:"https://static.particle.network/token-list/eosevm/native.png",nativeIcon:"",fullname:"EOS EVM Testnet",network:"Testnet",website:"https://eosnetwork.com",nativeCurrency:{name:"EOS",symbol:"EOS",decimals:18},rpcUrl:"https://api.testnet.evm.eosnetwork.com",faucetUrl:"https://bridge.testnet.evm.eosnetwork.com",blockExplorerUrl:"https://explorer.testnet.evm.eosnetwork.com"},Vrt={id:17e3,name:"Ethereum",chainType:"evm",icon:"https://static.particle.network/token-list/ethereum/native.png",nativeIcon:"",fullname:"Ethereum Holesky",network:"Holesky",website:"https://holesky.ethpandaops.io",nativeCurrency:{name:"Ether",symbol:"ETH",decimals:18},rpcUrl:"https://ethereum-holesky.blockpi.network/v1/rpc/public",faucetUrl:"https://faucet.quicknode.com/drip",blockExplorerUrl:"https://holesky.etherscan.io",features:[{name:"EIP1559"},{name:"ERC4337",contracts:[{name:"SIMPLE",version:"1.0.0"},{name:"SIMPLE",version:"2.0.0"},{name:"COINBASE",version:"1.0.0"}]}]},Frt={id:17777,name:"Eosevm",chainType:"evm",icon:"https://static.particle.network/token-list/eosevm/native.png",nativeIcon:"",fullname:"EOS EVM",network:"Mainnet",website:"https://eosnetwork.com",nativeCurrency:{name:"EOS",symbol:"EOS",decimals:18},rpcUrl:"https://api.evm.eosnetwork.com",blockExplorerUrl:"https://explorer.evm.eosnetwork.com"},zrt={id:22776,name:"MAPProtocol",chainType:"evm",icon:"https://static.particle.network/token-list/mapprotocol/native.png",nativeIcon:"",fullname:"MAP Protocol",network:"Mainnet",website:"https://maplabs.io",nativeCurrency:{name:"MAPO",symbol:"MAPO",decimals:18},rpcUrl:"https://rpc.maplabs.io",blockExplorerUrl:"https://mapscan.io",features:[{name:"EIP1559"},{name:"ERC4337",contracts:[{name:"BTC",version:"1.0.0"},{name:"BTC",version:"2.0.0"}]}]},Hrt={id:27827,name:"Zeroone",chainType:"evm",icon:"https://static.particle.network/token-list/zeroone/native.png",nativeIcon:"",fullname:"Zeroone Mainnet",network:"Mainnet",website:"https://zeroone.art",nativeCurrency:{name:"ZERO",symbol:"ZERO",decimals:18},rpcUrl:"https://subnets.avax.network/zeroonemai/mainnet/rpc",blockExplorerUrl:"https://subnets.avax.network/zeroonemai",features:[{name:"EIP1559"}]},Urt={id:30732,name:"Movement",chainType:"evm",icon:"https://static.particle.network/token-list/movement/native.png",nativeIcon:"",fullname:"Movement Devnet",network:"Devnet",website:"https://movementlabs.xyz",nativeCurrency:{name:"MOVE",symbol:"MOVE",decimals:18},rpcUrl:"https://mevm.devnet.imola.movementnetwork.xyz",blockExplorerUrl:"https://explorer.devnet.imola.movementnetwork.xyz",features:[{name:"EIP1559"},{name:"ERC4337",contracts:[{name:"SIMPLE",version:"1.0.0"},{name:"SIMPLE",version:"2.0.0"}]}]},Grt={id:34443,name:"Mode",chainType:"evm",icon:"https://static.particle.network/token-list/mode/native.png",nativeIcon:"",fullname:"Mode Mainnet",network:"Mainnet",website:"https://www.mode.network",nativeCurrency:{name:"ETH",symbol:"ETH",decimals:18},rpcUrl:"https://mainnet.mode.network",blockExplorerUrl:"https://explorer.mode.network",features:[{name:"EIP1559"},{name:"ERC4337",contracts:[{name:"SIMPLE",version:"1.0.0"},{name:"SIMPLE",version:"2.0.0"},{name:"BTC",version:"1.0.0"},{name:"BTC",version:"2.0.0"}]}]},jrt={id:42161,name:"Arbitrum",chainType:"evm",icon:"https://static.particle.network/token-list/arbitrum/native.png",nativeIcon:"",fullname:"Arbitrum One",network:"Mainnet",website:"https://arbitrum.io",nativeCurrency:{name:"Ether",symbol:"ETH",decimals:18},rpcUrl:"https://arb1.arbitrum.io/rpc",blockExplorerUrl:"https://arbiscan.io",features:[{name:"EIP1559"},{name:"ERC4337",contracts:[{name:"BICONOMY",version:"1.0.0"},{name:"BICONOMY",version:"2.0.0"},{name:"SIMPLE",version:"1.0.0"},{name:"SIMPLE",version:"2.0.0"},{name:"CYBERCONNECT",version:"1.0.0"},{name:"LIGHT",version:"1.0.2"},{name:"XTERIO",version:"1.0.0"},{name:"BTC",version:"1.0.0"},{name:"BTC",version:"2.0.0"},{name:"COINBASE",version:"1.0.0"},{name:"UNIVERSAL",version:"1.0.2"},{name:"UNIVERSAL",version:"1.0.3"}]},{name:"SWAP"},{name:"ON-RAMP"}]},Wrt={id:42170,name:"Arbitrum",chainType:"evm",icon:"https://static.particle.network/token-list/arbitrum/native.png",nativeIcon:"",fullname:"Arbitrum Nova",network:"Mainnet",website:"https://arbitrum.io",nativeCurrency:{name:"Ether",symbol:"ETH",decimals:18},rpcUrl:"https://nova.arbitrum.io/rpc",blockExplorerUrl:"https://nova.arbiscan.io",features:[{name:"EIP1559"},{name:"ERC4337",contracts:[{name:"BICONOMY",version:"1.0.0"},{name:"BICONOMY",version:"2.0.0"},{name:"SIMPLE",version:"1.0.0"},{name:"SIMPLE",version:"2.0.0"},{name:"COINBASE",version:"1.0.0"}]}]},qrt={id:42220,name:"Celo",chainType:"evm",icon:"https://static.particle.network/token-list/celo/native.png",nativeIcon:"",fullname:"Celo Mainnet",network:"Mainnet",website:"https://docs.celo.org",nativeCurrency:{name:"Celo",symbol:"CELO",decimals:18},rpcUrl:"https://rpc.ankr.com/celo",blockExplorerUrl:"https://explorer.celo.org/mainnet",features:[{name:"SWAP"},{name:"ON-RAMP"}]},Yrt={id:42261,name:"OasisEmerald",chainType:"evm",icon:"https://static.particle.network/token-list/oasisemerald/native.png",nativeIcon:"",fullname:"OasisEmerald Testnet",network:"Testnet",website:"https://docs.oasis.io/dapp/emerald",nativeCurrency:{name:"OasisEmerald",symbol:"ROSE",decimals:18},rpcUrl:"https://testnet.emerald.oasis.dev",faucetUrl:"https://faucet.testnet.oasis.dev",blockExplorerUrl:"https://testnet.explorer.emerald.oasis.dev"},Xrt={id:42262,name:"OasisEmerald",chainType:"evm",icon:"https://static.particle.network/token-list/oasisemerald/native.png",nativeIcon:"",fullname:"OasisEmerald Mainnet",network:"Mainnet",website:"https://docs.oasis.io/dapp/emerald",nativeCurrency:{name:"OasisEmerald",symbol:"ROSE",decimals:18},rpcUrl:"https://emerald.oasis.dev",blockExplorerUrl:"https://explorer.emerald.oasis.dev"},Zrt={id:42766,name:"ZKFair",chainType:"evm",icon:"https://static.particle.network/token-list/zkfair/native.png",nativeIcon:"https://static.particle.network/token-list/zkfair/usdc.png",fullname:"ZKFair Mainnet",network:"Mainnet",website:"https://zkfair.io",nativeCurrency:{name:"ZKF",symbol:"USDC",decimals:18},rpcUrl:"https://rpc.zkfair.io",blockExplorerUrl:"https://scan.zkfair.io",features:[{name:"ERC4337",contracts:[{name:"SIMPLE",version:"1.0.0"},{name:"SIMPLE",version:"2.0.0"}]},{name:"SWAP"}]},Qrt={id:43113,name:"Avalanche",chainType:"evm",icon:"https://static.particle.network/token-list/avalanche/native.png",nativeIcon:"",fullname:"Avalanche Testnet",network:"Testnet",website:"https://cchain.explorer.avax-test.network",nativeCurrency:{name:"AVAX",symbol:"AVAX",decimals:18},rpcUrl:"https://api.avax-test.network/ext/bc/C/rpc",faucetUrl:"https://faucet.avax.network",blockExplorerUrl:"https://testnet.snowtrace.io",features:[{name:"EIP1559"},{name:"ERC4337",contracts:[{name:"BICONOMY",version:"1.0.0"},{name:"BICONOMY",version:"2.0.0"},{name:"SIMPLE",version:"1.0.0"},{name:"SIMPLE",version:"2.0.0"},{name:"COINBASE",version:"1.0.0"},{name:"UNIVERSAL",version:"1.0.0"}]}]},Krt={id:43114,name:"Avalanche",chainType:"evm",icon:"https://static.particle.network/token-list/avalanche/native.png",nativeIcon:"",fullname:"Avalanche Mainnet",network:"Mainnet",website:"https://www.avax.network",nativeCurrency:{name:"AVAX",symbol:"AVAX",decimals:18},rpcUrl:"https://api.avax.network/ext/bc/C/rpc",blockExplorerUrl:"https://snowtrace.io",features:[{name:"EIP1559"},{name:"ERC4337",contracts:[{name:"BICONOMY",version:"1.0.0"},{name:"BICONOMY",version:"2.0.0"},{name:"SIMPLE",version:"1.0.0"},{name:"SIMPLE",version:"2.0.0"},{name:"COINBASE",version:"1.0.0"},{name:"UNIVERSAL",version:"1.0.2"},{name:"UNIVERSAL",version:"1.0.3"}]},{name:"SWAP"},{name:"ON-RAMP"}]},Jrt={id:43851,name:"ZKFair",chainType:"evm",icon:"https://static.particle.network/token-list/zkfair/native.png",nativeIcon:"https://static.particle.network/token-list/zkfair/usdc.png",fullname:"ZKFair Testnet",network:"Testnet",website:"https://zkfair.io",nativeCurrency:{name:"ZKF",symbol:"USDC",decimals:18},rpcUrl:"https://testnet-rpc.zkfair.io",blockExplorerUrl:"https://testnet-scan.zkfair.io",features:[{name:"ERC4337",contracts:[{name:"SIMPLE",version:"1.0.0"},{name:"SIMPLE",version:"2.0.0"}]}]},$rt={id:44787,name:"Celo",chainType:"evm",icon:"https://static.particle.network/token-list/celo/native.png",nativeIcon:"",fullname:"Celo Testnet",network:"Testnet",website:"https://docs.celo.org",nativeCurrency:{name:"Celo",symbol:"CELO",decimals:18},rpcUrl:"https://alfajores-forno.celo-testnet.org",faucetUrl:"https://celo.org/developers/faucet",blockExplorerUrl:"https://explorer.celo.org/alfajores"},eit={id:48899,name:"Zircuit",chainType:"evm",icon:"https://static.particle.network/token-list/zircuit/native.png",nativeIcon:"",fullname:"Zircuit Testnet",network:"Testnet",website:"https://www.zircuit.com",nativeCurrency:{name:"Ether",symbol:"ETH",decimals:18},rpcUrl:"https://zircuit1.p2pify.com",blockExplorerUrl:"https://explorer.testnet.zircuit.com",features:[{name:"ERC4337",contracts:[{name:"SIMPLE",version:"1.0.0"},{name:"SIMPLE",version:"2.0.0"}]}]},tit={id:53457,name:"DODOChain",chainType:"evm",icon:"https://static.particle.network/token-list/dodochain/native.png",nativeIcon:"",fullname:"DODOChain Testnet",network:"Testnet",website:"https://www.dodochain.com",nativeCurrency:{name:"DODO",symbol:"DODO",decimals:18},rpcUrl:"https://dodochain-testnet.alt.technology",blockExplorerUrl:"https://testnet-scan.dodochain.com",features:[{name:"EIP1559"},{name:"ERC4337",contracts:[{name:"SIMPLE",version:"1.0.0"},{name:"SIMPLE",version:"2.0.0"},{name:"UNIVERSAL",version:"1.0.0"}]}]},rit={id:56400,name:"Zeroone",chainType:"evm",icon:"https://static.particle.network/token-list/zeroone/native.png",nativeIcon:"",fullname:"Zeroone Testnet",network:"Testnet",website:"https://zeroone.art",nativeCurrency:{name:"ZERO",symbol:"ZERO",decimals:18},rpcUrl:"https://subnets.avax.network/testnetzer/testnet/rpc",blockExplorerUrl:"https://subnets-test.avax.network/testnetzer",features:[{name:"EIP1559"}]},iit={id:59141,name:"Linea",chainType:"evm",icon:"https://static.particle.network/token-list/linea/native.png",nativeIcon:"",fullname:"Linea Sepolia",network:"Sepolia",website:"https://linea.build",nativeCurrency:{name:"ETH",symbol:"ETH",decimals:18},rpcUrl:"https://rpc.sepolia.linea.build",faucetUrl:"https://faucet.goerli.linea.build",blockExplorerUrl:"https://sepolia.lineascan.build",features:[{name:"EIP1559"},{name:"ERC4337",contracts:[{name:"SIMPLE",version:"1.0.0"},{name:"SIMPLE",version:"2.0.0"},{name:"COINBASE",version:"1.0.0"},{name:"UNIVERSAL",version:"1.0.0"}]}]},nit={id:59144,name:"Linea",chainType:"evm",icon:"https://static.particle.network/token-list/linea/native.png",nativeIcon:"",fullname:"Linea Mainnet",network:"Mainnet",website:"https://linea.build",nativeCurrency:{name:"ETH",symbol:"ETH",decimals:18},rpcUrl:"https://rpc.linea.build",blockExplorerUrl:"https://lineascan.build",features:[{name:"EIP1559"},{name:"ERC4337",contracts:[{name:"BICONOMY",version:"2.0.0"},{name:"SIMPLE",version:"1.0.0"},{name:"SIMPLE",version:"2.0.0"},{name:"CYBERCONNECT",version:"1.0.0"},{name:"COINBASE",version:"1.0.0"},{name:"UNIVERSAL",version:"1.0.2"},{name:"UNIVERSAL",version:"1.0.3"}]},{name:"SWAP"},{name:"ON-RAMP"}]},ait={id:60808,name:"BOB",chainType:"evm",icon:"https://static.particle.network/token-list/bob/native.png",nativeIcon:"",fullname:"BOB Mainnet",network:"Mainnet",website:"https://www.gobob.xyz",nativeCurrency:{name:"ETH",symbol:"ETH",decimals:18},rpcUrl:"https://rpc.gobob.xyz",blockExplorerUrl:"https://explorer.gobob.xyz",features:[{name:"EIP1559"},{name:"ERC4337",contracts:[{name:"BTC",version:"1.0.0"},{name:"BTC",version:"2.0.0"}]}]},oit={id:80002,name:"Polygon",chainType:"evm",icon:"https://static.particle.network/token-list/polygon/native.png",nativeIcon:"",fullname:"Polygon Amoy",network:"Amoy",website:"https://polygon.technology",nativeCurrency:{name:"MATIC",symbol:"MATIC",decimals:18},rpcUrl:"https://rpc-amoy.polygon.technology",blockExplorerUrl:"https://www.oklink.com/amoy",features:[{name:"EIP1559"},{name:"ERC4337",contracts:[{name:"BICONOMY",version:"2.0.0"},{name:"SIMPLE",version:"1.0.0"},{name:"SIMPLE",version:"2.0.0"},{name:"CYBERCONNECT",version:"1.0.0"},{name:"BTC",version:"1.0.0"},{name:"BTC",version:"2.0.0"},{name:"COINBASE",version:"1.0.0"},{name:"UNIVERSAL",version:"1.0.0"}]}]},sit={id:80084,name:"Berachain",chainType:"evm",icon:"https://static.particle.network/token-list/berachain/native.png",nativeIcon:"",fullname:"Berachain bArtio",network:"bArtio",website:"https://www.berachain.com",nativeCurrency:{name:"BERA",symbol:"BERA",decimals:18},rpcUrl:"https://bartio.rpc.berachain.com",faucetUrl:"https://bartio.faucet.berachain.com",blockExplorerUrl:"https://bartio.beratrail.io",features:[{name:"ERC4337",contracts:[{name:"BICONOMY",version:"2.0.0"},{name:"SIMPLE",version:"1.0.0"},{name:"SIMPLE",version:"2.0.0"},{name:"UNIVERSAL",version:"1.0.0"}]}]},lit={id:81457,name:"Blast",chainType:"evm",icon:"https://static.particle.network/token-list/blast/native.png",nativeIcon:"",fullname:"Blast Mainnet",network:"Mainnet",website:"https://blastblockchain.com",nativeCurrency:{name:"Blast Ether",symbol:"ETH",decimals:18},rpcUrl:"https://rpc.blast.io",blockExplorerUrl:"https://blastscan.io",features:[{name:"EIP1559"},{name:"ERC4337",contracts:[{name:"BICONOMY",version:"2.0.0"},{name:"SIMPLE",version:"1.0.0"},{name:"SIMPLE",version:"2.0.0"},{name:"CYBERCONNECT",version:"1.0.0"},{name:"COINBASE",version:"1.0.0"}]}]},uit={id:83291,name:"lorenzo",chainType:"evm",icon:"https://static.particle.network/token-list/lorenzo/native.png",nativeIcon:"https://static.particle.network/token-list/btc/native.png",fullname:"Lorenzo Testnet",network:"Testnet",website:"https://lorenzo-protocol.xyz",nativeCurrency:{name:"stBTC",symbol:"stBTC",decimals:18},rpcUrl:"https://rpc-testnet.lorenzo-protocol.xyz",blockExplorerUrl:"https://scan-testnet.lorenzo-protocol.xyz",features:[{name:"EIP1559"},{name:"ERC4337",contracts:[{name:"BTC",version:"1.0.0"},{name:"BTC",version:"2.0.0"}]}]},cit={id:84532,name:"Base",chainType:"evm",icon:"https://static.particle.network/token-list/base/native.png",nativeIcon:"",fullname:"Base Sepolia",network:"Sepolia",website:"https://base.org",nativeCurrency:{name:"ETH",symbol:"ETH",decimals:18},rpcUrl:"https://sepolia.base.org",faucetUrl:"https://bridge.base.org/deposit",blockExplorerUrl:"https://sepolia.basescan.org",features:[{name:"EIP1559"},{name:"ERC4337",contracts:[{name:"BICONOMY",version:"2.0.0"},{name:"SIMPLE",version:"1.0.0"},{name:"SIMPLE",version:"2.0.0"},{name:"CYBERCONNECT",version:"1.0.0"},{name:"BTC",version:"1.0.0"},{name:"BTC",version:"2.0.0"},{name:"COINBASE",version:"1.0.0"},{name:"UNIVERSAL",version:"1.0.0"},{name:"UNIVERSAL",version:"1.0.2"},{name:"UNIVERSAL",version:"1.0.3"}]}]},hit={id:89682,name:"TUNA",chainType:"evm",icon:"https://static.particle.network/token-list/tuna/native.png",nativeIcon:"https://static.particle.network/token-list/btc/native.png",fullname:"TUNA Testnet",network:"Testnet",website:"https://tunachain.io",nativeCurrency:{name:"BTC",symbol:"BTC",decimals:18},rpcUrl:"https://babytuna.rpc.tunachain.io",blockExplorerUrl:"https://babytuna.explorer.tunachain.io",features:[{name:"ERC4337",contracts:[{name:"BTC",version:"1.0.0"},{name:"BTC",version:"2.0.0"}]}]},dit={id:112358,name:"xterio",chainType:"evm",icon:"https://static.particle.network/token-list/xterio/native.png",nativeIcon:"https://static.particle.network/token-list/bsc/native.png",fullname:"Xterio(BNB) Mainnet",network:"Mainnet",website:"https://xter.io",nativeCurrency:{name:"BNB",symbol:"BNB",decimals:18},rpcUrl:"https://xterio.alt.technology",blockExplorerUrl:"https://xterscan.io",features:[{name:"EIP1559"},{name:"ERC4337",contracts:[{name:"SIMPLE",version:"1.0.0"},{name:"SIMPLE",version:"2.0.0"},{name:"XTERIO",version:"1.0.0"}]}]},fit={id:167e3,name:"Taiko",chainType:"evm",icon:"https://static.particle.network/token-list/taiko/native.png",nativeIcon:"",fullname:"Taiko Mainnet",network:"Mainnet",website:"https://taiko.xyz",nativeCurrency:{name:"Ether",symbol:"ETH",decimals:18},rpcUrl:"https://rpc.mainnet.taiko.xyz",blockExplorerUrl:"https://taikoscan.network",features:[{name:"EIP1559"},{name:"ERC4337",contracts:[{name:"SIMPLE",version:"1.0.0"},{name:"SIMPLE",version:"2.0.0"},{name:"COINBASE",version:"1.0.0"}]}]},pit={id:167009,name:"Taiko",chainType:"evm",icon:"https://static.particle.network/token-list/taiko/native.png",nativeIcon:"",fullname:"Taiko Hekla",network:"Hekla",website:"https://taiko.xyz",nativeCurrency:{name:"Ether",symbol:"ETH",decimals:18},rpcUrl:"https://rpc.hekla.taiko.xyz",blockExplorerUrl:"https://explorer.hekla.taiko.xyz",features:[{name:"EIP1559"},{name:"ERC4337",contracts:[{name:"SIMPLE",version:"1.0.0"},{name:"SIMPLE",version:"2.0.0"},{name:"COINBASE",version:"1.0.0"}]}]},vit={id:200810,name:"Bitlayer",chainType:"evm",icon:"https://static.particle.network/token-list/bitlayer/native.png",nativeIcon:"https://static.particle.network/token-list/btc/native.png",fullname:"Bitlayer Testnet",network:"Testnet",website:"https://www.bitlayer.org",nativeCurrency:{name:"BTC",symbol:"BTC",decimals:18},rpcUrl:"https://testnet-rpc.bitlayer.org",blockExplorerUrl:"https://testnet-scan.bitlayer.org",features:[{name:"ERC4337",contracts:[{name:"SIMPLE",version:"1.0.0"},{name:"SIMPLE",version:"2.0.0"},{name:"BTC",version:"1.0.0"},{name:"BTC",version:"2.0.0"},{name:"UNIVERSAL",version:"1.0.0"}]}]},mit={id:200901,name:"Bitlayer",chainType:"evm",icon:"https://static.particle.network/token-list/bitlayer/native.png",nativeIcon:"https://static.particle.network/token-list/btc/native.png",fullname:"Bitlayer Mainnet",network:"Mainnet",website:"https://www.bitlayer.org",nativeCurrency:{name:"BTC",symbol:"BTC",decimals:18},rpcUrl:"https://rpc.bitlayer.org",blockExplorerUrl:"https://www.btrscan.com",features:[{name:"ERC4337",contracts:[{name:"SIMPLE",version:"1.0.0"},{name:"SIMPLE",version:"2.0.0"},{name:"BTC",version:"1.0.0"},{name:"BTC",version:"2.0.0"}]}]},git={id:202105,name:"Duckchain",chainType:"evm",icon:"https://static.particle.network/token-list/duckchain/native.png",nativeIcon:"https://static.particle.network/token-list/duckchain/ton.png",fullname:"Duckchain Testnet",network:"Testnet",website:"https://testnet-scan.duckchain.io",nativeCurrency:{name:"TON",symbol:"TON",decimals:18},rpcUrl:"https://testnet-rpc.duckchain.io",blockExplorerUrl:"https://testnet-scan.duckchain.io",features:[{name:"EIP1559"},{name:"ERC4337",contracts:[{name:"SIMPLE",version:"1.0.0"},{name:"SIMPLE",version:"2.0.0"},{name:"UNIVERSAL",version:"1.0.0"}]}]},yit={id:210425,name:"PlatON",chainType:"evm",icon:"https://static.particle.network/token-list/platon/native.png",nativeIcon:"",fullname:"PlatON Mainnet",network:"Mainnet",website:"https://www.platon.network",nativeCurrency:{name:"LAT",symbol:"LAT",decimals:18},rpcUrl:"https://openapi2.platon.network/rpc",blockExplorerUrl:"https://scan.platon.network"},xit={id:421614,name:"Arbitrum",chainType:"evm",icon:"https://static.particle.network/token-list/arbitrum/native.png",nativeIcon:"",fullname:"Arbitrum Sepolia",network:"Sepolia",website:"https://arbitrum.io",nativeCurrency:{name:"Ether",symbol:"ETH",decimals:18},rpcUrl:"https://sepolia-rollup.arbitrum.io/rpc",blockExplorerUrl:"https://sepolia.arbiscan.io",features:[{name:"EIP1559"},{name:"ERC4337",contracts:[{name:"BICONOMY",version:"2.0.0"},{name:"SIMPLE",version:"1.0.0"},{name:"SIMPLE",version:"2.0.0"},{name:"BTC",version:"1.0.0"},{name:"BTC",version:"2.0.0"},{name:"COINBASE",version:"1.0.0"},{name:"UNIVERSAL",version:"1.0.0"},{name:"UNIVERSAL",version:"1.0.2"},{name:"UNIVERSAL",version:"1.0.3"}]}]},bit={id:534351,name:"Scroll",chainType:"evm",icon:"https://static.particle.network/token-list/scroll/native.png",nativeIcon:"",fullname:"Scroll Sepolia",network:"Sepolia",website:"https://scroll.io",nativeCurrency:{name:"Scroll",symbol:"ETH",decimals:18},rpcUrl:"https://sepolia-rpc.scroll.io",blockExplorerUrl:"https://sepolia.scrollscan.com",features:[{name:"ERC4337",contracts:[{name:"BICONOMY",version:"2.0.0"},{name:"SIMPLE",version:"1.0.0"},{name:"SIMPLE",version:"2.0.0"},{name:"CYBERCONNECT",version:"1.0.0"}]}]},wit={id:534352,name:"Scroll",chainType:"evm",icon:"https://static.particle.network/token-list/scroll/native.png",nativeIcon:"",fullname:"Scroll Mainnet",network:"Mainnet",website:"https://scroll.io",nativeCurrency:{name:"Scroll",symbol:"ETH",decimals:18},rpcUrl:"https://rpc.scroll.io",blockExplorerUrl:"https://scrollscan.com",features:[{name:"ERC4337",contracts:[{name:"BICONOMY",version:"2.0.0"},{name:"SIMPLE",version:"1.0.0"},{name:"SIMPLE",version:"2.0.0"},{name:"CYBERCONNECT",version:"1.0.0"}]},{name:"SWAP"}]},_it={id:686868,name:"Merlin",chainType:"evm",icon:"https://static.particle.network/token-list/merlin/native.png",nativeIcon:"https://static.particle.network/token-list/btc/native.png",fullname:"Merlin Testnet",network:"Testnet",website:"https://merlinprotocol.org",nativeCurrency:{name:"BTC",symbol:"BTC",decimals:18},rpcUrl:"https://testnet-rpc.merlinchain.io",blockExplorerUrl:"https://testnet-scan.merlinchain.io",features:[{name:"ERC4337",contracts:[{name:"BTC",version:"1.0.0"},{name:"BTC",version:"2.0.0"},{name:"UNIVERSAL",version:"1.0.0"}]}]},Ait={id:713715,name:"Sei",chainType:"evm",icon:"https://static.particle.network/token-list/sei/native.png",nativeIcon:"",fullname:"Sei Devnet",network:"Devnet",website:"https://www.sei.io",nativeCurrency:{name:"SEI",symbol:"SEI",decimals:18},rpcUrl:"https://evm-rpc-arctic-1.sei-apis.com",blockExplorerUrl:"https://devnet.seistream.app",features:[{name:"EIP1559"},{name:"ERC4337",contracts:[{name:"BICONOMY",version:"2.0.0"},{name:"SIMPLE",version:"1.0.0"},{name:"SIMPLE",version:"2.0.0"}]}]},Sit={id:810180,name:"zkLink",chainType:"evm",icon:"https://static.particle.network/token-list/zklink/native.png",nativeIcon:"",fullname:"zkLink Nova Mainnet",network:"Mainnet",website:"https://zklink.io",nativeCurrency:{name:"ETH",symbol:"ETH",decimals:18},rpcUrl:"https://rpc.zklink.io",blockExplorerUrl:"https://explorer.zklink.io"},Cit={id:1637450,name:"xterio",chainType:"evm",icon:"https://static.particle.network/token-list/xterio/native.png",nativeIcon:"https://static.particle.network/token-list/bsc/native.png",fullname:"Xterio(BNB) Testnet",network:"Testnet",website:"https://xter.io",nativeCurrency:{name:"BNB",symbol:"BNB",decimals:18},rpcUrl:"https://xterio-testnet.alt.technology",blockExplorerUrl:"https://testnet.xterscan.io",features:[{name:"EIP1559"},{name:"ERC4337",contracts:[{name:"SIMPLE",version:"1.0.0"},{name:"SIMPLE",version:"2.0.0"},{name:"XTERIO",version:"1.0.0"},{name:"UNIVERSAL",version:"1.0.0"}]}]},Eit={id:2206132,name:"PlatON",chainType:"evm",icon:"https://static.particle.network/token-list/platon/native.png",nativeIcon:"",fullname:"PlatON Testnet",network:"Testnet",website:"https://www.platon.network",nativeCurrency:{name:"LAT",symbol:"LAT",decimals:18},rpcUrl:"https://devnetopenapi2.platon.network/rpc",faucetUrl:"https://devnet2faucet.platon.network/faucet",blockExplorerUrl:"https://devnet2scan.platon.network"},Mit={id:2702128,name:"xterioeth",chainType:"evm",icon:"https://static.particle.network/token-list/xterioeth/native.png",nativeIcon:"",fullname:"Xterio(ETH) Mainnet",network:"Mainnet",website:"https://xterscan.io",nativeCurrency:{name:"Ether",symbol:"ETH",decimals:18},rpcUrl:"https://xterio-eth.alt.technology",blockExplorerUrl:"https://eth.xterscan.io",features:[{name:"EIP1559"},{name:"ERC4337",contracts:[{name:"XTERIO",version:"1.0.0"}]}]},Tit={id:3441006,name:"Manta",chainType:"evm",icon:"https://static.particle.network/token-list/manta/native.png",nativeIcon:"",fullname:"Manta Sepolia",network:"Sepolia",website:"https://manta.network",nativeCurrency:{name:"ETH",symbol:"ETH",decimals:18},rpcUrl:"https://pacific-rpc.sepolia-testnet.manta.network/http",faucetUrl:"https://pacific-info.manta.network",blockExplorerUrl:"https://pacific-explorer.sepolia-testnet.manta.network",features:[{name:"EIP1559"},{name:"ERC4337",contracts:[{name:"SIMPLE",version:"1.0.0"},{name:"SIMPLE",version:"2.0.0"}]}]},Pit={id:6038361,name:"AstarZkEVM",chainType:"evm",icon:"https://static.particle.network/token-list/astarzkevm/native.png",nativeIcon:"",fullname:"Astar zkEVM Testnet",network:"Testnet",website:"https://astar.network",nativeCurrency:{name:"Sepolia Ether",symbol:"ETH",decimals:18},rpcUrl:"https://rpc.startale.com/zkyoto",blockExplorerUrl:"https://zkyoto.explorer.startale.com",features:[{name:"ERC4337",contracts:[{name:"SIMPLE",version:"1.0.0"},{name:"SIMPLE",version:"2.0.0"}]}]},Dit={id:7777777,name:"Zora",chainType:"evm",icon:"https://static.particle.network/token-list/zora/native.png",nativeIcon:"",fullname:"Zora Mainnet",network:"Mainnet",website:"https://zora.energy",nativeCurrency:{name:"ETH",symbol:"ETH",decimals:18},rpcUrl:"https://rpc.zora.energy",blockExplorerUrl:"https://explorer.zora.energy",features:[{name:"EIP1559"}]},Iit={id:11155111,name:"Ethereum",chainType:"evm",icon:"https://static.particle.network/token-list/ethereum/native.png",nativeIcon:"",fullname:"Ethereum Sepolia",network:"Sepolia",website:"https://sepolia.otterscan.io",nativeCurrency:{name:"Ether",symbol:"ETH",decimals:18},rpcUrl:"https://rpc.sepolia.org",faucetUrl:"https://faucet.quicknode.com/drip",blockExplorerUrl:"https://sepolia.etherscan.io",features:[{name:"EIP1559"},{name:"ERC4337",contracts:[{name:"BICONOMY",version:"2.0.0"},{name:"SIMPLE",version:"1.0.0"},{name:"SIMPLE",version:"2.0.0"},{name:"CYBERCONNECT",version:"1.0.0"},{name:"LIGHT",version:"1.0.2"},{name:"XTERIO",version:"1.0.0"},{name:"BTC",version:"1.0.0"},{name:"BTC",version:"2.0.0"},{name:"COINBASE",version:"1.0.0"},{name:"UNIVERSAL",version:"1.0.0"},{name:"UNIVERSAL",version:"1.0.2"},{name:"UNIVERSAL",version:"1.0.3"}]}]},Lit={id:11155420,name:"Optimism",chainType:"evm",icon:"https://static.particle.network/token-list/optimism/native.png",nativeIcon:"",fullname:"Optimism Sepolia",network:"Sepolia",website:"https://optimism.io",nativeCurrency:{name:"Ether",symbol:"ETH",decimals:18},rpcUrl:"https://sepolia.optimism.io",blockExplorerUrl:"https://sepolia-optimism.etherscan.io",features:[{name:"EIP1559"},{name:"ERC4337",contracts:[{name:"BICONOMY",version:"2.0.0"},{name:"SIMPLE",version:"1.0.0"},{name:"SIMPLE",version:"2.0.0"},{name:"CYBERCONNECT",version:"1.0.0"},{name:"COINBASE",version:"1.0.0"},{name:"UNIVERSAL",version:"1.0.0"},{name:"UNIVERSAL",version:"1.0.2"},{name:"UNIVERSAL",version:"1.0.3"}]}]},kit={id:28122024,name:"ancient8",chainType:"evm",icon:"https://static.particle.network/token-list/ancient8/native.png",nativeIcon:"",fullname:"Ancient8 Testnet",network:"Testnet",website:"https://ancient8.gg",nativeCurrency:{name:"ETH",symbol:"ETH",decimals:18},rpcUrl:"https://rpcv2-testnet.ancient8.gg",blockExplorerUrl:"https://scanv2-testnet.ancient8.gg",features:[{name:"EIP1559"},{name:"ERC4337",contracts:[{name:"SIMPLE",version:"1.0.0"},{name:"SIMPLE",version:"2.0.0"}]}]},Rit={id:111557560,name:"Cyber",chainType:"evm",icon:"https://static.particle.network/token-list/cyber/native.png",nativeIcon:"",fullname:"Cyber Testnet",network:"Testnet",website:"https://testnet.cyberscan.co",nativeCurrency:{name:"ETH",symbol:"ETH",decimals:18},rpcUrl:"https://cyber-testnet.alt.technology",blockExplorerUrl:"https://testnet.cyberscan.co",features:[{name:"EIP1559"},{name:"ERC4337",contracts:[{name:"SIMPLE",version:"1.0.0"},{name:"SIMPLE",version:"2.0.0"},{name:"CYBERCONNECT",version:"1.0.0"}]}]},Oit={id:161221135,name:"Plume",chainType:"evm",icon:"https://static.particle.network/token-list/plume/native.png",nativeIcon:"",fullname:"Plume Testnet",network:"Testnet",website:"https://testnet-explorer.plumenetwork.xyz",nativeCurrency:{name:"ETH",symbol:"ETH",decimals:18},rpcUrl:"https://testnet-rpc.plumenetwork.xyz/infra-partner-http",blockExplorerUrl:"https://testnet-explorer.plumenetwork.xyz",features:[{name:"EIP1559"},{name:"ERC4337",contracts:[{name:"SIMPLE",version:"1.0.0"},{name:"SIMPLE",version:"2.0.0"}]}]},Bit={id:168587773,name:"Blast",chainType:"evm",icon:"https://static.particle.network/token-list/blast/native.png",nativeIcon:"",fullname:"Blast Sepolia",network:"Sepolia",website:"https://blastblockchain.com",nativeCurrency:{name:"Blast Ether",symbol:"ETH",decimals:18},rpcUrl:"https://sepolia.blast.io",blockExplorerUrl:"https://testnet.blastscan.io",features:[{name:"EIP1559"},{name:"ERC4337",contracts:[{name:"BICONOMY",version:"2.0.0"},{name:"SIMPLE",version:"1.0.0"},{name:"SIMPLE",version:"2.0.0"},{name:"CYBERCONNECT",version:"1.0.0"},{name:"COINBASE",version:"1.0.0"},{name:"UNIVERSAL",version:"1.0.0"}]}]},Nit={id:728126428,name:"Tron",chainType:"evm",icon:"https://static.particle.network/token-list/tron/native.png",nativeIcon:"",fullname:"Tron Mainnet",network:"Mainnet",website:"https://tron.network",nativeCurrency:{name:"TRX",symbol:"TRX",decimals:6},rpcUrl:"https://api.trongrid.io",blockExplorerUrl:"https://tronscan.io",features:[{name:"ON-RAMP"}]},Vit={id:888888888,name:"ancient8",chainType:"evm",icon:"https://static.particle.network/token-list/ancient8/native.png",nativeIcon:"",fullname:"Ancient8 Mainnet",network:"Mainnet",website:"https://ancient8.gg",nativeCurrency:{name:"ETH",symbol:"ETH",decimals:18},rpcUrl:"https://rpc.ancient8.gg",blockExplorerUrl:"https://scan.ancient8.gg",features:[{name:"EIP1559"},{name:"ERC4337",contracts:[{name:"SIMPLE",version:"1.0.0"},{name:"SIMPLE",version:"2.0.0"}]}]},Fit={id:1313161554,name:"Aurora",chainType:"evm",icon:"https://static.particle.network/token-list/aurora/native.png",nativeIcon:"",fullname:"Aurora Mainnet",network:"Mainnet",website:"https://aurora.dev",nativeCurrency:{name:"Ether",symbol:"ETH",decimals:18},rpcUrl:"https://mainnet.aurora.dev",blockExplorerUrl:"https://explorer.aurora.dev",features:[{name:"SWAP"}]},zit={id:1313161555,name:"Aurora",chainType:"evm",icon:"https://static.particle.network/token-list/aurora/native.png",nativeIcon:"",fullname:"Aurora Testnet",network:"Testnet",website:"https://aurora.dev",nativeCurrency:{name:"Ether",symbol:"ETH",decimals:18},rpcUrl:"https://testnet.aurora.dev",faucetUrl:"https://aurora.dev/faucet",blockExplorerUrl:"https://explorer.testnet.aurora.dev"},Hit={id:1482601649,name:"Nebula",chainType:"evm",icon:"https://static.particle.network/token-list/nebula/native.png",nativeIcon:"",fullname:"SKALE Nebula",network:"Mainnet",website:"https://mainnet.skalenodes.com",nativeCurrency:{name:"sFUEL",symbol:"sFUEL",decimals:18},rpcUrl:"https://mainnet.skalenodes.com/v1/green-giddy-denebola",blockExplorerUrl:"https://green-giddy-denebola.explorer.mainnet.skalenodes.com"},Uit={id:16666e5,name:"Harmony",chainType:"evm",icon:"https://static.particle.network/token-list/harmony/native.png",nativeIcon:"",fullname:"Harmony Mainnet",network:"Mainnet",website:"https://www.harmony.one",nativeCurrency:{name:"ONE",symbol:"ONE",decimals:18},rpcUrl:"https://api.harmony.one",blockExplorerUrl:"https://explorer.harmony.one"},Git={id:16667e5,name:"Harmony",chainType:"evm",icon:"https://static.particle.network/token-list/harmony/native.png",nativeIcon:"",fullname:"Harmony Testnet",network:"Testnet",website:"https://www.harmony.one",nativeCurrency:{name:"ONE",symbol:"ONE",decimals:18},rpcUrl:"https://api.s0.b.hmny.io",faucetUrl:"https://faucet.pops.one",blockExplorerUrl:"https://explorer.pops.one"},jit={id:1802203764,name:"Kakarot",chainType:"evm",icon:"https://static.particle.network/token-list/kakarot/native.png",nativeIcon:"",fullname:"Kakarot Sepolia",network:"Sepolia",website:"https://www.kakarot.org",nativeCurrency:{name:"Ether",symbol:"ETH",decimals:18},rpcUrl:"https://sepolia-rpc.kakarot.org",blockExplorerUrl:"https://sepolia.kakarotscan.org",features:[{name:"ERC4337",contracts:[{name:"SIMPLE",version:"1.0.0"},{name:"SIMPLE",version:"2.0.0"}]}]},Wit={id:1952959480,name:"Lumia",chainType:"evm",icon:"https://static.particle.network/token-list/lumia/native.png",nativeIcon:"",fullname:"Lumia Testnet",network:"Testnet",website:"https://www.lumia.org",nativeCurrency:{name:"LUMIA",symbol:"LUMIA",decimals:18},rpcUrl:"https://testnet-rpc.lumia.org",blockExplorerUrl:"https://testnet-explorer.lumia.org",features:[{name:"ERC4337",contracts:[{name:"SIMPLE",version:"1.0.0"},{name:"SIMPLE",version:"2.0.0"}]}]},qit={id:2494104990,name:"Tron",chainType:"evm",icon:"https://static.particle.network/token-list/tron/native.png",nativeIcon:"",fullname:"Tron Shasta",network:"Shasta",website:"https://www.trongrid.io/shasta",nativeCurrency:{name:"TRX",symbol:"TRX",decimals:6},rpcUrl:"https://api.shasta.trongrid.io",blockExplorerUrl:"https://shasta.tronscan.org"},Yit={id:3448148188,name:"Tron",chainType:"evm",icon:"https://static.particle.network/token-list/tron/native.png",nativeIcon:"",fullname:"Tron Nile",network:"Nile",website:"https://nileex.io",nativeCurrency:{name:"TRX",symbol:"TRX",decimals:6},rpcUrl:"https://nile.trongrid.io",faucetUrl:"https://nileex.io/join/getJoinPage",blockExplorerUrl:"https://nile.tronscan.org"},h7={"ethereum-1":ett,"optimism-10":ttt,"thundercore-18":rtt,"elastos-20":itt,"cronos-25":ntt,"bsc-56":att,"okc-65":ott,"okc-66":stt,"confluxespace-71":ltt,"viction-88":utt,"viction-89":ctt,"bsc-97":htt,"gnosis-100":dtt,"solana-101":ftt,"solana-102":ptt,"solana-103":vtt,"thundercore-108":mtt,"bob-111":gtt,"fuse-122":ytt,"fuse-123":xtt,"polygon-137":btt,"manta-169":wtt,"okbc-195":_tt,"okbc-196":Att,"opbnb-204":Stt,"mapprotocol-212":Ctt,"bsquared-223":Ett,"fantom-250":Mtt,"zksync-300":Ttt,"kcc-321":Ptt,"kcc-322":Dtt,"zksync-324":Itt,"cronos-338":Ltt,"mode-919":ktt,"fiveire-995":Rtt,"fiveire-997":Ott,"klaytn-1001":Btt,"confluxespace-1030":Ntt,"metis-1088":Vtt,"polygonzkevm-1101":Ftt,"core-1115":ztt,"core-1116":Htt,"bsquared-1123":Utt,"hybrid-1225":Gtt,"moonbeam-1284":jtt,"moonriver-1285":Wtt,"moonbeam-1287":qtt,"sei-1328":Ytt,"sei-1329":Xtt,"bevm-1501":Ztt,"bevm-1502":Qtt,"storynetwork-1513":Ktt,"gravity-1625":Jtt,"combo-1715":$tt,"soneium-1946":ert,"kava-2221":trt,"kava-2222":rrt,"peaq-2241":irt,"polygonzkevm-2442":nrt,"ainn-2648":art,"ainn-2649":ort,"gmnetwork-2777":srt,"satoshivm-3109":lrt,"satoshivm-3110":urt,"peaq-3338":crt,"botanix-3636":hrt,"astarzkevm-3776":drt,"fantom-4002":frt,"merlin-4200":prt,"iotex-4689":vrt,"iotex-4690":mrt,"mantle-5000":grt,"mantle-5003":yrt,"duckchain-5545":xrt,"opbnb-5611":brt,"aura-6321":wrt,"aura-6322":_rt,"zetachain-7000":Art,"zetachain-7001":Srt,"cyber-7560":Crt,"klaytn-8217":Ert,"lorenzo-8329":Mrt,"base-8453":Trt,"combo-9980":Prt,"peaq-9990":Drt,"gnosis-10200":Irt,"bevm-11501":Lrt,"bevm-11503":krt,"readon-12015":Rrt,"immutable-13473":Ort,"gravity-13505":Brt,"eosevm-15557":Nrt,"ethereum-17000":Vrt,"eosevm-17777":Frt,"mapprotocol-22776":zrt,"zeroone-27827":Hrt,"movement-30732":Urt,"mode-34443":Grt,"arbitrum-42161":jrt,"arbitrum-42170":Wrt,"celo-42220":qrt,"oasisemerald-42261":Yrt,"oasisemerald-42262":Xrt,"zkfair-42766":Zrt,"avalanche-43113":Qrt,"avalanche-43114":Krt,"zkfair-43851":Jrt,"celo-44787":$rt,"zircuit-48899":eit,"dodochain-53457":tit,"zeroone-56400":rit,"linea-59141":iit,"linea-59144":nit,"bob-60808":ait,"polygon-80002":oit,"berachain-80084":sit,"blast-81457":lit,"lorenzo-83291":uit,"base-84532":cit,"tuna-89682":hit,"xterio-112358":dit,"taiko-167000":fit,"taiko-167009":pit,"bitlayer-200810":vit,"bitlayer-200901":mit,"duckchain-202105":git,"platon-210425":yit,"arbitrum-421614":xit,"scroll-534351":bit,"scroll-534352":wit,"merlin-686868":_it,"sei-713715":Ait,"zklink-810180":Sit,"xterio-1637450":Cit,"platon-2206132":Eit,"xterioeth-2702128":Mit,"manta-3441006":Tit,"astarzkevm-6038361":Pit,"zora-7777777":Dit,"ethereum-11155111":Iit,"optimism-11155420":Lit,"ancient8-28122024":kit,"cyber-111557560":Rit,"plume-161221135":Oit,"blast-168587773":Bit,"tron-728126428":Nit,"ancient8-888888888":Vit,"aurora-1313161554":Fit,"aurora-1313161555":zit,"nebula-1482601649":Hit,"harmony-1666600000":Uit,"harmony-1666700000":Git,"kakarot-1802203764":jit,"lumia-1952959480":Wit,"tron-2494104990":qit,"tron-3448148188":Yit},DS={};$et(DS,{getAASigners:()=>ont,getAllChainInfos:()=>nnt,getChainIcon:()=>tnt,getChainInfo:()=>zd,getChainNetwork:()=>Xit,getChainSymbol:()=>Zit,getChainType:()=>Qit,getEVMChainInfoById:()=>rnt,getParticleNode:()=>ant,getSolanaChainInfoById:()=>int,isChainSupportEIP1559:()=>Kit,isChainSupportERC4337:()=>ent,isChainSupportOnRamp:()=>$it,isChainSupportSwap:()=>Jit});function zd(e){return h7[`${e.name.toLowerCase()}-${e.id}`]}function Xit(e){const t=zd(e);return(t==null?void 0:t.network)||"UNKNOWN"}function Zit(e){var t;const r=zd(e);return((t=r==null?void 0:r.nativeCurrency)==null?void 0:t.symbol)||"UNKNOWN"}function Qit(e){const t=zd(e);return t==null?void 0:t.chainType}function Kit(e){var t,r;const i=zd(e);return(r=(t=i==null?void 0:i.features)==null?void 0:t.some(n=>n.name==="EIP1559"))!=null?r:!1}function Jit(e){var t,r;const i=zd(e);return(r=(t=i==null?void 0:i.features)==null?void 0:t.some(n=>n.name==="SWAP"))!=null?r:!1}function $it(e){var t,r;const i=zd(e);return(r=(t=i==null?void 0:i.features)==null?void 0:t.some(n=>n.name==="ON-RAMP"))!=null?r:!1}function ent(e,{name:t,version:r}){var i,n,a,o;const s=zd(e);return(o=(a=(n=(i=s==null?void 0:s.features)==null?void 0:i.find(l=>l.name==="ERC4337"))==null?void 0:n.contracts)==null?void 0:a.some(l=>l.name===t&&l.version===r))!=null?o:!1}function tnt(e){const t=zd(e);return t==null?void 0:t.icon}function rnt(e){return Object.values(h7).find(t=>t.chainType==="evm"&&t.id===e)}function int(e){return Object.values(h7).find(t=>t.chainType==="solana"&&t.id===e)}function nnt(e){const t=Object.values(h7);if(e)return t.sort(e);const r=["Solana","Ethereum","BSC","opBNB","Polygon","Avalanche","Moonbeam","Moonriver","Heco","Fantom","Arbitrum","Harmony","Aurora","Optimism","KCC","PlatON","Tron"];return t.sort((i,n)=>r.includes(i.name)&&r.includes(n.name)?i.name===n.name?i.network==="Mainnet"?-1:n.network==="Mainnet"?1:i.network==="Testnet"?-1:n.network==="Testnet"?1:0:r.indexOf(i.name)>r.indexOf(n.name)?1:-1:r.includes(i.name)?-1:r.includes(n.name)?1:i.name===n.name?i.network==="Mainnet"?-1:n.network==="Mainnet"?1:i.fullname.localeCompare(n.fullname):i.name.localeCompare(n.name)),t}function ant(e,t,r){return`https://rpc.particle.network/evm-chain?chainId=${e}&projectUuid=${t}&projectKey=${r}`}function ont({name:e,version:t}){const r=["UNIVERSAL 1.0.0","BICONOMY 2.0.0","XTERIO 1.0.0","COINBASE 1.0.0"],i=[];return r.includes(`${e} ${t}`)&&(i.push("PASSKEY"),`${e} ${t}`=="COINBASE 1.0.0")||i.unshift("EOA"),i}var K0e={exports:{}};function snt(e){throw new Error('Could not dynamically require "'+e+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var l9={exports:{}},AK;function Kr(){return AK||(AK=1,function(e,t){(function(r,i){e.exports=i()})(_r,function(){var r=r||function(i,n){var a;if(typeof window<"u"&&window.crypto&&(a=window.crypto),typeof self<"u"&&self.crypto&&(a=self.crypto),typeof globalThis<"u"&&globalThis.crypto&&(a=globalThis.crypto),!a&&typeof window<"u"&&window.msCrypto&&(a=window.msCrypto),!a&&typeof _r<"u"&&_r.crypto&&(a=_r.crypto),!a&&typeof snt=="function")try{a=gpe}catch{}var o=function(){if(a){if(typeof a.getRandomValues=="function")try{return a.getRandomValues(new Uint32Array(1))[0]}catch{}if(typeof a.randomBytes=="function")try{return a.randomBytes(4).readInt32LE()}catch{}}throw new Error("Native crypto module could not be used to get secure random number.")},s=Object.create||function(){function y(){}return function(x){var b;return y.prototype=x,b=new y,y.prototype=null,b}}(),l={},u=l.lib={},c=u.Base=function(){return{extend:function(y){var x=s(this);return y&&x.mixIn(y),(!x.hasOwnProperty("init")||this.init===x.init)&&(x.init=function(){x.$super.init.apply(this,arguments)}),x.init.prototype=x,x.$super=this,x},create:function(){var y=this.extend();return y.init.apply(y,arguments),y},init:function(){},mixIn:function(y){for(var x in y)y.hasOwnProperty(x)&&(this[x]=y[x]);y.hasOwnProperty("toString")&&(this.toString=y.toString)},clone:function(){return this.init.prototype.extend(this)}}}(),h=u.WordArray=c.extend({init:function(y,x){y=this.words=y||[],x!=n?this.sigBytes=x:this.sigBytes=y.length*4},toString:function(y){return(y||f).stringify(this)},concat:function(y){var x=this.words,b=y.words,_=this.sigBytes,w=y.sigBytes;if(this.clamp(),_%4)for(var S=0;S<w;S++){var A=b[S>>>2]>>>24-S%4*8&255;x[_+S>>>2]|=A<<24-(_+S)%4*8}else for(var M=0;M<w;M+=4)x[_+M>>>2]=b[M>>>2];return this.sigBytes+=w,this},clamp:function(){var y=this.words,x=this.sigBytes;y[x>>>2]&=4294967295<<32-x%4*8,y.length=i.ceil(x/4)},clone:function(){var y=c.clone.call(this);return y.words=this.words.slice(0),y},random:function(y){for(var x=[],b=0;b<y;b+=4)x.push(o());return new h.init(x,y)}}),d=l.enc={},f=d.Hex={stringify:function(y){for(var x=y.words,b=y.sigBytes,_=[],w=0;w<b;w++){var S=x[w>>>2]>>>24-w%4*8&255;_.push((S>>>4).toString(16)),_.push((S&15).toString(16))}return _.join("")},parse:function(y){for(var x=y.length,b=[],_=0;_<x;_+=2)b[_>>>3]|=parseInt(y.substr(_,2),16)<<24-_%8*4;return new h.init(b,x/2)}},p=d.Latin1={stringify:function(y){for(var x=y.words,b=y.sigBytes,_=[],w=0;w<b;w++){var S=x[w>>>2]>>>24-w%4*8&255;_.push(String.fromCharCode(S))}return _.join("")},parse:function(y){for(var x=y.length,b=[],_=0;_<x;_++)b[_>>>2]|=(y.charCodeAt(_)&255)<<24-_%4*8;return new h.init(b,x)}},v=d.Utf8={stringify:function(y){try{return decodeURIComponent(escape(p.stringify(y)))}catch{throw new Error("Malformed UTF-8 data")}},parse:function(y){return p.parse(unescape(encodeURIComponent(y)))}},m=u.BufferedBlockAlgorithm=c.extend({reset:function(){this._data=new h.init,this._nDataBytes=0},_append:function(y){typeof y=="string"&&(y=v.parse(y)),this._data.concat(y),this._nDataBytes+=y.sigBytes},_process:function(y){var x,b=this._data,_=b.words,w=b.sigBytes,S=this.blockSize,A=S*4,M=w/A;y?M=i.ceil(M):M=i.max((M|0)-this._minBufferSize,0);var E=M*S,T=i.min(E*4,w);if(E){for(var L=0;L<E;L+=S)this._doProcessBlock(_,L);x=_.splice(0,E),b.sigBytes-=T}return new h.init(x,T)},clone:function(){var y=c.clone.call(this);return y._data=this._data.clone(),y},_minBufferSize:0});u.Hasher=m.extend({cfg:c.extend(),init:function(y){this.cfg=this.cfg.extend(y),this.reset()},reset:function(){m.reset.call(this),this._doReset()},update:function(y){return this._append(y),this._process(),this},finalize:function(y){y&&this._append(y);var x=this._doFinalize();return x},blockSize:16,_createHelper:function(y){return function(x,b){return new y.init(b).finalize(x)}},_createHmacHelper:function(y){return function(x,b){return new g.HMAC.init(y,b).finalize(x)}}});var g=l.algo={};return l}(Math);return r})}(l9)),l9.exports}var u9={exports:{}},SK;function d7(){return SK||(SK=1,function(e,t){(function(r,i){e.exports=i(Kr())})(_r,function(r){return function(i){var n=r,a=n.lib,o=a.Base,s=a.WordArray,l=n.x64={};l.Word=o.extend({init:function(u,c){this.high=u,this.low=c}}),l.WordArray=o.extend({init:function(u,c){u=this.words=u||[],c!=i?this.sigBytes=c:this.sigBytes=u.length*8},toX32:function(){for(var u=this.words,c=u.length,h=[],d=0;d<c;d++){var f=u[d];h.push(f.high),h.push(f.low)}return s.create(h,this.sigBytes)},clone:function(){for(var u=o.clone.call(this),c=u.words=this.words.slice(0),h=c.length,d=0;d<h;d++)c[d]=c[d].clone();return u}})}(),r})}(u9)),u9.exports}var c9={exports:{}},CK;function lnt(){return CK||(CK=1,function(e,t){(function(r,i){e.exports=i(Kr())})(_r,function(r){return function(){if(typeof ArrayBuffer=="function"){var i=r,n=i.lib,a=n.WordArray,o=a.init,s=a.init=function(l){if(l instanceof ArrayBuffer&&(l=new Uint8Array(l)),(l instanceof Int8Array||typeof Uint8ClampedArray<"u"&&l instanceof Uint8ClampedArray||l instanceof Int16Array||l instanceof Uint16Array||l instanceof Int32Array||l instanceof Uint32Array||l instanceof Float32Array||l instanceof Float64Array)&&(l=new Uint8Array(l.buffer,l.byteOffset,l.byteLength)),l instanceof Uint8Array){for(var u=l.byteLength,c=[],h=0;h<u;h++)c[h>>>2]|=l[h]<<24-h%4*8;o.call(this,c,u)}else o.apply(this,arguments)};s.prototype=a}}(),r.lib.WordArray})}(c9)),c9.exports}var h9={exports:{}},EK;function unt(){return EK||(EK=1,function(e,t){(function(r,i){e.exports=i(Kr())})(_r,function(r){return function(){var i=r,n=i.lib,a=n.WordArray,o=i.enc;o.Utf16=o.Utf16BE={stringify:function(l){for(var u=l.words,c=l.sigBytes,h=[],d=0;d<c;d+=2){var f=u[d>>>2]>>>16-d%4*8&65535;h.push(String.fromCharCode(f))}return h.join("")},parse:function(l){for(var u=l.length,c=[],h=0;h<u;h++)c[h>>>1]|=l.charCodeAt(h)<<16-h%2*16;return a.create(c,u*2)}},o.Utf16LE={stringify:function(l){for(var u=l.words,c=l.sigBytes,h=[],d=0;d<c;d+=2){var f=s(u[d>>>2]>>>16-d%4*8&65535);h.push(String.fromCharCode(f))}return h.join("")},parse:function(l){for(var u=l.length,c=[],h=0;h<u;h++)c[h>>>1]|=s(l.charCodeAt(h)<<16-h%2*16);return a.create(c,u*2)}};function s(l){return l<<8&4278255360|l>>>8&16711935}}(),r.enc.Utf16})}(h9)),h9.exports}var d9={exports:{}},MK;function sm(){return MK||(MK=1,function(e,t){(function(r,i){e.exports=i(Kr())})(_r,function(r){return function(){var i=r,n=i.lib,a=n.WordArray,o=i.enc;o.Base64={stringify:function(l){var u=l.words,c=l.sigBytes,h=this._map;l.clamp();for(var d=[],f=0;f<c;f+=3)for(var p=u[f>>>2]>>>24-f%4*8&255,v=u[f+1>>>2]>>>24-(f+1)%4*8&255,m=u[f+2>>>2]>>>24-(f+2)%4*8&255,g=p<<16|v<<8|m,y=0;y<4&&f+y*.75<c;y++)d.push(h.charAt(g>>>6*(3-y)&63));var x=h.charAt(64);if(x)for(;d.length%4;)d.push(x);return d.join("")},parse:function(l){var u=l.length,c=this._map,h=this._reverseMap;if(!h){h=this._reverseMap=[];for(var d=0;d<c.length;d++)h[c.charCodeAt(d)]=d}var f=c.charAt(64);if(f){var p=l.indexOf(f);p!==-1&&(u=p)}return s(l,u,h)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="};function s(l,u,c){for(var h=[],d=0,f=0;f<u;f++)if(f%4){var p=c[l.charCodeAt(f-1)]<<f%4*2,v=c[l.charCodeAt(f)]>>>6-f%4*2,m=p|v;h[d>>>2]|=m<<24-d%4*8,d++}return a.create(h,d)}}(),r.enc.Base64})}(d9)),d9.exports}var f9={exports:{}},TK;function cnt(){return TK||(TK=1,function(e,t){(function(r,i){e.exports=i(Kr())})(_r,function(r){return function(){var i=r,n=i.lib,a=n.WordArray,o=i.enc;o.Base64url={stringify:function(l,u){u===void 0&&(u=!0);var c=l.words,h=l.sigBytes,d=u?this._safe_map:this._map;l.clamp();for(var f=[],p=0;p<h;p+=3)for(var v=c[p>>>2]>>>24-p%4*8&255,m=c[p+1>>>2]>>>24-(p+1)%4*8&255,g=c[p+2>>>2]>>>24-(p+2)%4*8&255,y=v<<16|m<<8|g,x=0;x<4&&p+x*.75<h;x++)f.push(d.charAt(y>>>6*(3-x)&63));var b=d.charAt(64);if(b)for(;f.length%4;)f.push(b);return f.join("")},parse:function(l,u){u===void 0&&(u=!0);var c=l.length,h=u?this._safe_map:this._map,d=this._reverseMap;if(!d){d=this._reverseMap=[];for(var f=0;f<h.length;f++)d[h.charCodeAt(f)]=f}var p=h.charAt(64);if(p){var v=l.indexOf(p);v!==-1&&(c=v)}return s(l,c,d)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",_safe_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_"};function s(l,u,c){for(var h=[],d=0,f=0;f<u;f++)if(f%4){var p=c[l.charCodeAt(f-1)]<<f%4*2,v=c[l.charCodeAt(f)]>>>6-f%4*2,m=p|v;h[d>>>2]|=m<<24-d%4*8,d++}return a.create(h,d)}}(),r.enc.Base64url})}(f9)),f9.exports}var p9={exports:{}},PK;function lm(){return PK||(PK=1,function(e,t){(function(r,i){e.exports=i(Kr())})(_r,function(r){return function(i){var n=r,a=n.lib,o=a.WordArray,s=a.Hasher,l=n.algo,u=[];(function(){for(var v=0;v<64;v++)u[v]=i.abs(i.sin(v+1))*4294967296|0})();var c=l.MD5=s.extend({_doReset:function(){this._hash=new o.init([1732584193,4023233417,2562383102,271733878])},_doProcessBlock:function(v,m){for(var g=0;g<16;g++){var y=m+g,x=v[y];v[y]=(x<<8|x>>>24)&16711935|(x<<24|x>>>8)&4278255360}var b=this._hash.words,_=v[m+0],w=v[m+1],S=v[m+2],A=v[m+3],M=v[m+4],E=v[m+5],T=v[m+6],L=v[m+7],P=v[m+8],C=v[m+9],D=v[m+10],I=v[m+11],O=v[m+12],R=v[m+13],H=v[m+14],j=v[m+15],N=b[0],k=b[1],G=b[2],Y=b[3];N=h(N,k,G,Y,_,7,u[0]),Y=h(Y,N,k,G,w,12,u[1]),G=h(G,Y,N,k,S,17,u[2]),k=h(k,G,Y,N,A,22,u[3]),N=h(N,k,G,Y,M,7,u[4]),Y=h(Y,N,k,G,E,12,u[5]),G=h(G,Y,N,k,T,17,u[6]),k=h(k,G,Y,N,L,22,u[7]),N=h(N,k,G,Y,P,7,u[8]),Y=h(Y,N,k,G,C,12,u[9]),G=h(G,Y,N,k,D,17,u[10]),k=h(k,G,Y,N,I,22,u[11]),N=h(N,k,G,Y,O,7,u[12]),Y=h(Y,N,k,G,R,12,u[13]),G=h(G,Y,N,k,H,17,u[14]),k=h(k,G,Y,N,j,22,u[15]),N=d(N,k,G,Y,w,5,u[16]),Y=d(Y,N,k,G,T,9,u[17]),G=d(G,Y,N,k,I,14,u[18]),k=d(k,G,Y,N,_,20,u[19]),N=d(N,k,G,Y,E,5,u[20]),Y=d(Y,N,k,G,D,9,u[21]),G=d(G,Y,N,k,j,14,u[22]),k=d(k,G,Y,N,M,20,u[23]),N=d(N,k,G,Y,C,5,u[24]),Y=d(Y,N,k,G,H,9,u[25]),G=d(G,Y,N,k,A,14,u[26]),k=d(k,G,Y,N,P,20,u[27]),N=d(N,k,G,Y,R,5,u[28]),Y=d(Y,N,k,G,S,9,u[29]),G=d(G,Y,N,k,L,14,u[30]),k=d(k,G,Y,N,O,20,u[31]),N=f(N,k,G,Y,E,4,u[32]),Y=f(Y,N,k,G,P,11,u[33]),G=f(G,Y,N,k,I,16,u[34]),k=f(k,G,Y,N,H,23,u[35]),N=f(N,k,G,Y,w,4,u[36]),Y=f(Y,N,k,G,M,11,u[37]),G=f(G,Y,N,k,L,16,u[38]),k=f(k,G,Y,N,D,23,u[39]),N=f(N,k,G,Y,R,4,u[40]),Y=f(Y,N,k,G,_,11,u[41]),G=f(G,Y,N,k,A,16,u[42]),k=f(k,G,Y,N,T,23,u[43]),N=f(N,k,G,Y,C,4,u[44]),Y=f(Y,N,k,G,O,11,u[45]),G=f(G,Y,N,k,j,16,u[46]),k=f(k,G,Y,N,S,23,u[47]),N=p(N,k,G,Y,_,6,u[48]),Y=p(Y,N,k,G,L,10,u[49]),G=p(G,Y,N,k,H,15,u[50]),k=p(k,G,Y,N,E,21,u[51]),N=p(N,k,G,Y,O,6,u[52]),Y=p(Y,N,k,G,A,10,u[53]),G=p(G,Y,N,k,D,15,u[54]),k=p(k,G,Y,N,w,21,u[55]),N=p(N,k,G,Y,P,6,u[56]),Y=p(Y,N,k,G,j,10,u[57]),G=p(G,Y,N,k,T,15,u[58]),k=p(k,G,Y,N,R,21,u[59]),N=p(N,k,G,Y,M,6,u[60]),Y=p(Y,N,k,G,I,10,u[61]),G=p(G,Y,N,k,S,15,u[62]),k=p(k,G,Y,N,C,21,u[63]),b[0]=b[0]+N|0,b[1]=b[1]+k|0,b[2]=b[2]+G|0,b[3]=b[3]+Y|0},_doFinalize:function(){var v=this._data,m=v.words,g=this._nDataBytes*8,y=v.sigBytes*8;m[y>>>5]|=128<<24-y%32;var x=i.floor(g/4294967296),b=g;m[(y+64>>>9<<4)+15]=(x<<8|x>>>24)&16711935|(x<<24|x>>>8)&4278255360,m[(y+64>>>9<<4)+14]=(b<<8|b>>>24)&16711935|(b<<24|b>>>8)&4278255360,v.sigBytes=(m.length+1)*4,this._process();for(var _=this._hash,w=_.words,S=0;S<4;S++){var A=w[S];w[S]=(A<<8|A>>>24)&16711935|(A<<24|A>>>8)&4278255360}return _},clone:function(){var v=s.clone.call(this);return v._hash=this._hash.clone(),v}});function h(v,m,g,y,x,b,_){var w=v+(m&g|~m&y)+x+_;return(w<<b|w>>>32-b)+m}function d(v,m,g,y,x,b,_){var w=v+(m&y|g&~y)+x+_;return(w<<b|w>>>32-b)+m}function f(v,m,g,y,x,b,_){var w=v+(m^g^y)+x+_;return(w<<b|w>>>32-b)+m}function p(v,m,g,y,x,b,_){var w=v+(g^(m|~y))+x+_;return(w<<b|w>>>32-b)+m}n.MD5=s._createHelper(c),n.HmacMD5=s._createHmacHelper(c)}(Math),r.MD5})}(p9)),p9.exports}var v9={exports:{}},DK;function J0e(){return DK||(DK=1,function(e,t){(function(r,i){e.exports=i(Kr())})(_r,function(r){return function(){var i=r,n=i.lib,a=n.WordArray,o=n.Hasher,s=i.algo,l=[],u=s.SHA1=o.extend({_doReset:function(){this._hash=new a.init([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(c,h){for(var d=this._hash.words,f=d[0],p=d[1],v=d[2],m=d[3],g=d[4],y=0;y<80;y++){if(y<16)l[y]=c[h+y]|0;else{var x=l[y-3]^l[y-8]^l[y-14]^l[y-16];l[y]=x<<1|x>>>31}var b=(f<<5|f>>>27)+g+l[y];y<20?b+=(p&v|~p&m)+1518500249:y<40?b+=(p^v^m)+1859775393:y<60?b+=(p&v|p&m|v&m)-1894007588:b+=(p^v^m)-899497514,g=m,m=v,v=p<<30|p>>>2,p=f,f=b}d[0]=d[0]+f|0,d[1]=d[1]+p|0,d[2]=d[2]+v|0,d[3]=d[3]+m|0,d[4]=d[4]+g|0},_doFinalize:function(){var c=this._data,h=c.words,d=this._nDataBytes*8,f=c.sigBytes*8;return h[f>>>5]|=128<<24-f%32,h[(f+64>>>9<<4)+14]=Math.floor(d/4294967296),h[(f+64>>>9<<4)+15]=d,c.sigBytes=h.length*4,this._process(),this._hash},clone:function(){var c=o.clone.call(this);return c._hash=this._hash.clone(),c}});i.SHA1=o._createHelper(u),i.HmacSHA1=o._createHmacHelper(u)}(),r.SHA1})}(v9)),v9.exports}var m9={exports:{}},IK;function SF(){return IK||(IK=1,function(e,t){(function(r,i){e.exports=i(Kr())})(_r,function(r){return function(i){var n=r,a=n.lib,o=a.WordArray,s=a.Hasher,l=n.algo,u=[],c=[];(function(){function f(g){for(var y=i.sqrt(g),x=2;x<=y;x++)if(!(g%x))return!1;return!0}function p(g){return(g-(g|0))*4294967296|0}for(var v=2,m=0;m<64;)f(v)&&(m<8&&(u[m]=p(i.pow(v,1/2))),c[m]=p(i.pow(v,1/3)),m++),v++})();var h=[],d=l.SHA256=s.extend({_doReset:function(){this._hash=new o.init(u.slice(0))},_doProcessBlock:function(f,p){for(var v=this._hash.words,m=v[0],g=v[1],y=v[2],x=v[3],b=v[4],_=v[5],w=v[6],S=v[7],A=0;A<64;A++){if(A<16)h[A]=f[p+A]|0;else{var M=h[A-15],E=(M<<25|M>>>7)^(M<<14|M>>>18)^M>>>3,T=h[A-2],L=(T<<15|T>>>17)^(T<<13|T>>>19)^T>>>10;h[A]=E+h[A-7]+L+h[A-16]}var P=b&_^~b&w,C=m&g^m&y^g&y,D=(m<<30|m>>>2)^(m<<19|m>>>13)^(m<<10|m>>>22),I=(b<<26|b>>>6)^(b<<21|b>>>11)^(b<<7|b>>>25),O=S+I+P+c[A]+h[A],R=D+C;S=w,w=_,_=b,b=x+O|0,x=y,y=g,g=m,m=O+R|0}v[0]=v[0]+m|0,v[1]=v[1]+g|0,v[2]=v[2]+y|0,v[3]=v[3]+x|0,v[4]=v[4]+b|0,v[5]=v[5]+_|0,v[6]=v[6]+w|0,v[7]=v[7]+S|0},_doFinalize:function(){var f=this._data,p=f.words,v=this._nDataBytes*8,m=f.sigBytes*8;return p[m>>>5]|=128<<24-m%32,p[(m+64>>>9<<4)+14]=i.floor(v/4294967296),p[(m+64>>>9<<4)+15]=v,f.sigBytes=p.length*4,this._process(),this._hash},clone:function(){var f=s.clone.call(this);return f._hash=this._hash.clone(),f}});n.SHA256=s._createHelper(d),n.HmacSHA256=s._createHmacHelper(d)}(Math),r.SHA256})}(m9)),m9.exports}var g9={exports:{}},LK;function hnt(){return LK||(LK=1,function(e,t){(function(r,i,n){e.exports=i(Kr(),SF())})(_r,function(r){return function(){var i=r,n=i.lib,a=n.WordArray,o=i.algo,s=o.SHA256,l=o.SHA224=s.extend({_doReset:function(){this._hash=new a.init([3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428])},_doFinalize:function(){var u=s._doFinalize.call(this);return u.sigBytes-=4,u}});i.SHA224=s._createHelper(l),i.HmacSHA224=s._createHmacHelper(l)}(),r.SHA224})}(g9)),g9.exports}var y9={exports:{}},kK;function $0e(){return kK||(kK=1,function(e,t){(function(r,i,n){e.exports=i(Kr(),d7())})(_r,function(r){return function(){var i=r,n=i.lib,a=n.Hasher,o=i.x64,s=o.Word,l=o.WordArray,u=i.algo;function c(){return s.create.apply(s,arguments)}var h=[c(1116352408,3609767458),c(1899447441,602891725),c(3049323471,3964484399),c(3921009573,2173295548),c(961987163,4081628472),c(1508970993,3053834265),c(2453635748,2937671579),c(2870763221,3664609560),c(3624381080,2734883394),c(310598401,1164996542),c(607225278,1323610764),c(1426881987,3590304994),c(1925078388,4068182383),c(2162078206,991336113),c(2614888103,633803317),c(3248222580,3479774868),c(3835390401,2666613458),c(4022224774,944711139),c(264347078,2341262773),c(604807628,2007800933),c(770255983,1495990901),c(1249150122,1856431235),c(1555081692,3175218132),c(1996064986,2198950837),c(2554220882,3999719339),c(2821834349,766784016),c(2952996808,2566594879),c(3210313671,3203337956),c(3336571891,1034457026),c(3584528711,2466948901),c(113926993,3758326383),c(338241895,168717936),c(666307205,1188179964),c(773529912,1546045734),c(1294757372,1522805485),c(1396182291,2643833823),c(1695183700,2343527390),c(1986661051,1014477480),c(2177026350,1206759142),c(2456956037,344077627),c(2730485921,1290863460),c(2820302411,3158454273),c(3259730800,3505952657),c(3345764771,106217008),c(3516065817,3606008344),c(3600352804,1432725776),c(4094571909,1467031594),c(275423344,851169720),c(430227734,3100823752),c(506948616,1363258195),c(659060556,3750685593),c(883997877,3785050280),c(958139571,3318307427),c(1322822218,3812723403),c(1537002063,2003034995),c(1747873779,3602036899),c(1955562222,1575990012),c(2024104815,1125592928),c(2227730452,2716904306),c(2361852424,442776044),c(2428436474,593698344),c(2756734187,3733110249),c(3204031479,2999351573),c(3329325298,3815920427),c(3391569614,3928383900),c(3515267271,566280711),c(3940187606,3454069534),c(4118630271,4000239992),c(116418474,1914138554),c(174292421,2731055270),c(289380356,3203993006),c(460393269,320620315),c(685471733,587496836),c(852142971,1086792851),c(1017036298,365543100),c(1126000580,2618297676),c(1288033470,3409855158),c(1501505948,4234509866),c(1607167915,987167468),c(1816402316,1246189591)],d=[];(function(){for(var p=0;p<80;p++)d[p]=c()})();var f=u.SHA512=a.extend({_doReset:function(){this._hash=new l.init([new s.init(1779033703,4089235720),new s.init(3144134277,2227873595),new s.init(1013904242,4271175723),new s.init(2773480762,1595750129),new s.init(1359893119,2917565137),new s.init(2600822924,725511199),new s.init(528734635,4215389547),new s.init(1541459225,327033209)])},_doProcessBlock:function(p,v){for(var m=this._hash.words,g=m[0],y=m[1],x=m[2],b=m[3],_=m[4],w=m[5],S=m[6],A=m[7],M=g.high,E=g.low,T=y.high,L=y.low,P=x.high,C=x.low,D=b.high,I=b.low,O=_.high,R=_.low,H=w.high,j=w.low,N=S.high,k=S.low,G=A.high,Y=A.low,F=M,Z=E,ne=T,re=L,ae=P,he=C,se=D,fe=I,J=O,te=R,le=H,Ae=j,xe=N,ye=k,Se=G,Pe=Y,Ce=0;Ce<80;Ce++){var ee,K,ve=d[Ce];if(Ce<16)K=ve.high=p[v+Ce*2]|0,ee=ve.low=p[v+Ce*2+1]|0;else{var Me=d[Ce-15],Q=Me.high,W=Me.low,V=(Q>>>1|W<<31)^(Q>>>8|W<<24)^Q>>>7,z=(W>>>1|Q<<31)^(W>>>8|Q<<24)^(W>>>7|Q<<25),X=d[Ce-2],de=X.high,pe=X.low,we=(de>>>19|pe<<13)^(de<<3|pe>>>29)^de>>>6,Je=(pe>>>19|de<<13)^(pe<<3|de>>>29)^(pe>>>6|de<<26),Qe=d[Ce-7],Ye=Qe.high,gt=Qe.low,ct=d[Ce-16],be=ct.high,ze=ct.low;ee=z+gt,K=V+Ye+(ee>>>0<z>>>0?1:0),ee=ee+Je,K=K+we+(ee>>>0<Je>>>0?1:0),ee=ee+ze,K=K+be+(ee>>>0<ze>>>0?1:0),ve.high=K,ve.low=ee}var He=J&le^~J&xe,$e=te&Ae^~te&ye,Pt=F&ne^F&ae^ne&ae,St=Z&re^Z&he^re&he,rr=(F>>>28|Z<<4)^(F<<30|Z>>>2)^(F<<25|Z>>>7),Ai=(Z>>>28|F<<4)^(Z<<30|F>>>2)^(Z<<25|F>>>7),Vr=(J>>>14|te<<18)^(J>>>18|te<<14)^(J<<23|te>>>9),Ft=(te>>>14|J<<18)^(te>>>18|J<<14)^(te<<23|J>>>9),on=h[Ce],Sr=on.high,qr=on.low,ji=Pe+Ft,Fr=Se+Vr+(ji>>>0<Pe>>>0?1:0),ji=ji+$e,Fr=Fr+He+(ji>>>0<$e>>>0?1:0),ji=ji+qr,Fr=Fr+Sr+(ji>>>0<qr>>>0?1:0),ji=ji+ee,Fr=Fr+K+(ji>>>0<ee>>>0?1:0),Jr=Ai+St,ce=rr+Pt+(Jr>>>0<Ai>>>0?1:0);Se=xe,Pe=ye,xe=le,ye=Ae,le=J,Ae=te,te=fe+ji|0,J=se+Fr+(te>>>0<fe>>>0?1:0)|0,se=ae,fe=he,ae=ne,he=re,ne=F,re=Z,Z=ji+Jr|0,F=Fr+ce+(Z>>>0<ji>>>0?1:0)|0}E=g.low=E+Z,g.high=M+F+(E>>>0<Z>>>0?1:0),L=y.low=L+re,y.high=T+ne+(L>>>0<re>>>0?1:0),C=x.low=C+he,x.high=P+ae+(C>>>0<he>>>0?1:0),I=b.low=I+fe,b.high=D+se+(I>>>0<fe>>>0?1:0),R=_.low=R+te,_.high=O+J+(R>>>0<te>>>0?1:0),j=w.low=j+Ae,w.high=H+le+(j>>>0<Ae>>>0?1:0),k=S.low=k+ye,S.high=N+xe+(k>>>0<ye>>>0?1:0),Y=A.low=Y+Pe,A.high=G+Se+(Y>>>0<Pe>>>0?1:0)},_doFinalize:function(){var p=this._data,v=p.words,m=this._nDataBytes*8,g=p.sigBytes*8;v[g>>>5]|=128<<24-g%32,v[(g+128>>>10<<5)+30]=Math.floor(m/4294967296),v[(g+128>>>10<<5)+31]=m,p.sigBytes=v.length*4,this._process();var y=this._hash.toX32();return y},clone:function(){var p=a.clone.call(this);return p._hash=this._hash.clone(),p},blockSize:1024/32});i.SHA512=a._createHelper(f),i.HmacSHA512=a._createHmacHelper(f)}(),r.SHA512})}(y9)),y9.exports}var x9={exports:{}},RK;function dnt(){return RK||(RK=1,function(e,t){(function(r,i,n){e.exports=i(Kr(),d7(),$0e())})(_r,function(r){return function(){var i=r,n=i.x64,a=n.Word,o=n.WordArray,s=i.algo,l=s.SHA512,u=s.SHA384=l.extend({_doReset:function(){this._hash=new o.init([new a.init(3418070365,3238371032),new a.init(1654270250,914150663),new a.init(2438529370,812702999),new a.init(355462360,4144912697),new a.init(1731405415,4290775857),new a.init(2394180231,1750603025),new a.init(3675008525,1694076839),new a.init(1203062813,3204075428)])},_doFinalize:function(){var c=l._doFinalize.call(this);return c.sigBytes-=16,c}});i.SHA384=l._createHelper(u),i.HmacSHA384=l._createHmacHelper(u)}(),r.SHA384})}(x9)),x9.exports}var b9={exports:{}},OK;function fnt(){return OK||(OK=1,function(e,t){(function(r,i,n){e.exports=i(Kr(),d7())})(_r,function(r){return function(i){var n=r,a=n.lib,o=a.WordArray,s=a.Hasher,l=n.x64,u=l.Word,c=n.algo,h=[],d=[],f=[];(function(){for(var m=1,g=0,y=0;y<24;y++){h[m+5*g]=(y+1)*(y+2)/2%64;var x=g%5,b=(2*m+3*g)%5;m=x,g=b}for(var m=0;m<5;m++)for(var g=0;g<5;g++)d[m+5*g]=g+(2*m+3*g)%5*5;for(var _=1,w=0;w<24;w++){for(var S=0,A=0,M=0;M<7;M++){if(_&1){var E=(1<<M)-1;E<32?A^=1<<E:S^=1<<E-32}_&128?_=_<<1^113:_<<=1}f[w]=u.create(S,A)}})();var p=[];(function(){for(var m=0;m<25;m++)p[m]=u.create()})();var v=c.SHA3=s.extend({cfg:s.cfg.extend({outputLength:512}),_doReset:function(){for(var m=this._state=[],g=0;g<25;g++)m[g]=new u.init;this.blockSize=(1600-2*this.cfg.outputLength)/32},_doProcessBlock:function(m,g){for(var y=this._state,x=this.blockSize/2,b=0;b<x;b++){var _=m[g+2*b],w=m[g+2*b+1];_=(_<<8|_>>>24)&16711935|(_<<24|_>>>8)&4278255360,w=(w<<8|w>>>24)&16711935|(w<<24|w>>>8)&4278255360;var S=y[b];S.high^=w,S.low^=_}for(var A=0;A<24;A++){for(var M=0;M<5;M++){for(var E=0,T=0,L=0;L<5;L++){var S=y[M+5*L];E^=S.high,T^=S.low}var P=p[M];P.high=E,P.low=T}for(var M=0;M<5;M++)for(var C=p[(M+4)%5],D=p[(M+1)%5],I=D.high,O=D.low,E=C.high^(I<<1|O>>>31),T=C.low^(O<<1|I>>>31),L=0;L<5;L++){var S=y[M+5*L];S.high^=E,S.low^=T}for(var R=1;R<25;R++){var E,T,S=y[R],H=S.high,j=S.low,N=h[R];N<32?(E=H<<N|j>>>32-N,T=j<<N|H>>>32-N):(E=j<<N-32|H>>>64-N,T=H<<N-32|j>>>64-N);var k=p[d[R]];k.high=E,k.low=T}var G=p[0],Y=y[0];G.high=Y.high,G.low=Y.low;for(var M=0;M<5;M++)for(var L=0;L<5;L++){var R=M+5*L,S=y[R],F=p[R],Z=p[(M+1)%5+5*L],ne=p[(M+2)%5+5*L];S.high=F.high^~Z.high&ne.high,S.low=F.low^~Z.low&ne.low}var S=y[0],re=f[A];S.high^=re.high,S.low^=re.low}},_doFinalize:function(){var m=this._data,g=m.words;this._nDataBytes*8;var y=m.sigBytes*8,x=this.blockSize*32;g[y>>>5]|=1<<24-y%32,g[(i.ceil((y+1)/x)*x>>>5)-1]|=128,m.sigBytes=g.length*4,this._process();for(var b=this._state,_=this.cfg.outputLength/8,w=_/8,S=[],A=0;A<w;A++){var M=b[A],E=M.high,T=M.low;E=(E<<8|E>>>24)&16711935|(E<<24|E>>>8)&4278255360,T=(T<<8|T>>>24)&16711935|(T<<24|T>>>8)&4278255360,S.push(T),S.push(E)}return new o.init(S,_)},clone:function(){for(var m=s.clone.call(this),g=m._state=this._state.slice(0),y=0;y<25;y++)g[y]=g[y].clone();return m}});n.SHA3=s._createHelper(v),n.HmacSHA3=s._createHmacHelper(v)}(Math),r.SHA3})}(b9)),b9.exports}var w9={exports:{}},BK;function pnt(){return BK||(BK=1,function(e,t){(function(r,i){e.exports=i(Kr())})(_r,function(r){/** @preserve
			(c) 2012 by Cédric Mesnil. All rights reserved.

			Redistribution and use in source and binary forms, with or without modification, are permitted provided that the following conditions are met:

			    - Redistributions of source code must retain the above copyright notice, this list of conditions and the following disclaimer.
			    - Redistributions in binary form must reproduce the above copyright notice, this list of conditions and the following disclaimer in the documentation and/or other materials provided with the distribution.

			THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
			*/return function(i){var n=r,a=n.lib,o=a.WordArray,s=a.Hasher,l=n.algo,u=o.create([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13]),c=o.create([5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11]),h=o.create([11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6]),d=o.create([8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11]),f=o.create([0,1518500249,1859775393,2400959708,2840853838]),p=o.create([1352829926,1548603684,1836072691,2053994217,0]),v=l.RIPEMD160=s.extend({_doReset:function(){this._hash=o.create([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(w,S){for(var A=0;A<16;A++){var M=S+A,E=w[M];w[M]=(E<<8|E>>>24)&16711935|(E<<24|E>>>8)&4278255360}var T=this._hash.words,L=f.words,P=p.words,C=u.words,D=c.words,I=h.words,O=d.words,R,H,j,N,k,G,Y,F,Z,ne;G=R=T[0],Y=H=T[1],F=j=T[2],Z=N=T[3],ne=k=T[4];for(var re,A=0;A<80;A+=1)re=R+w[S+C[A]]|0,A<16?re+=m(H,j,N)+L[0]:A<32?re+=g(H,j,N)+L[1]:A<48?re+=y(H,j,N)+L[2]:A<64?re+=x(H,j,N)+L[3]:re+=b(H,j,N)+L[4],re=re|0,re=_(re,I[A]),re=re+k|0,R=k,k=N,N=_(j,10),j=H,H=re,re=G+w[S+D[A]]|0,A<16?re+=b(Y,F,Z)+P[0]:A<32?re+=x(Y,F,Z)+P[1]:A<48?re+=y(Y,F,Z)+P[2]:A<64?re+=g(Y,F,Z)+P[3]:re+=m(Y,F,Z)+P[4],re=re|0,re=_(re,O[A]),re=re+ne|0,G=ne,ne=Z,Z=_(F,10),F=Y,Y=re;re=T[1]+j+Z|0,T[1]=T[2]+N+ne|0,T[2]=T[3]+k+G|0,T[3]=T[4]+R+Y|0,T[4]=T[0]+H+F|0,T[0]=re},_doFinalize:function(){var w=this._data,S=w.words,A=this._nDataBytes*8,M=w.sigBytes*8;S[M>>>5]|=128<<24-M%32,S[(M+64>>>9<<4)+14]=(A<<8|A>>>24)&16711935|(A<<24|A>>>8)&4278255360,w.sigBytes=(S.length+1)*4,this._process();for(var E=this._hash,T=E.words,L=0;L<5;L++){var P=T[L];T[L]=(P<<8|P>>>24)&16711935|(P<<24|P>>>8)&4278255360}return E},clone:function(){var w=s.clone.call(this);return w._hash=this._hash.clone(),w}});function m(w,S,A){return w^S^A}function g(w,S,A){return w&S|~w&A}function y(w,S,A){return(w|~S)^A}function x(w,S,A){return w&A|S&~A}function b(w,S,A){return w^(S|~A)}function _(w,S){return w<<S|w>>>32-S}n.RIPEMD160=s._createHelper(v),n.HmacRIPEMD160=s._createHmacHelper(v)}(),r.RIPEMD160})}(w9)),w9.exports}var _9={exports:{}},NK;function CF(){return NK||(NK=1,function(e,t){(function(r,i){e.exports=i(Kr())})(_r,function(r){(function(){var i=r,n=i.lib,a=n.Base,o=i.enc,s=o.Utf8,l=i.algo;l.HMAC=a.extend({init:function(u,c){u=this._hasher=new u.init,typeof c=="string"&&(c=s.parse(c));var h=u.blockSize,d=h*4;c.sigBytes>d&&(c=u.finalize(c)),c.clamp();for(var f=this._oKey=c.clone(),p=this._iKey=c.clone(),v=f.words,m=p.words,g=0;g<h;g++)v[g]^=1549556828,m[g]^=909522486;f.sigBytes=p.sigBytes=d,this.reset()},reset:function(){var u=this._hasher;u.reset(),u.update(this._iKey)},update:function(u){return this._hasher.update(u),this},finalize:function(u){var c=this._hasher,h=c.finalize(u);c.reset();var d=c.finalize(this._oKey.clone().concat(h));return d}})})()})}(_9)),_9.exports}var A9={exports:{}},VK;function vnt(){return VK||(VK=1,function(e,t){(function(r,i,n){e.exports=i(Kr(),SF(),CF())})(_r,function(r){return function(){var i=r,n=i.lib,a=n.Base,o=n.WordArray,s=i.algo,l=s.SHA256,u=s.HMAC,c=s.PBKDF2=a.extend({cfg:a.extend({keySize:128/32,hasher:l,iterations:25e4}),init:function(h){this.cfg=this.cfg.extend(h)},compute:function(h,d){for(var f=this.cfg,p=u.create(f.hasher,h),v=o.create(),m=o.create([1]),g=v.words,y=m.words,x=f.keySize,b=f.iterations;g.length<x;){var _=p.update(d).finalize(m);p.reset();for(var w=_.words,S=w.length,A=_,M=1;M<b;M++){A=p.finalize(A),p.reset();for(var E=A.words,T=0;T<S;T++)w[T]^=E[T]}v.concat(_),y[0]++}return v.sigBytes=x*4,v}});i.PBKDF2=function(h,d,f){return c.create(f).compute(h,d)}}(),r.PBKDF2})}(A9)),A9.exports}var S9={exports:{}},FK;function Pp(){return FK||(FK=1,function(e,t){(function(r,i,n){e.exports=i(Kr(),J0e(),CF())})(_r,function(r){return function(){var i=r,n=i.lib,a=n.Base,o=n.WordArray,s=i.algo,l=s.MD5,u=s.EvpKDF=a.extend({cfg:a.extend({keySize:128/32,hasher:l,iterations:1}),init:function(c){this.cfg=this.cfg.extend(c)},compute:function(c,h){for(var d,f=this.cfg,p=f.hasher.create(),v=o.create(),m=v.words,g=f.keySize,y=f.iterations;m.length<g;){d&&p.update(d),d=p.update(c).finalize(h),p.reset();for(var x=1;x<y;x++)d=p.finalize(d),p.reset();v.concat(d)}return v.sigBytes=g*4,v}});i.EvpKDF=function(c,h,d){return u.create(d).compute(c,h)}}(),r.EvpKDF})}(S9)),S9.exports}var C9={exports:{}},zK;function Da(){return zK||(zK=1,function(e,t){(function(r,i,n){e.exports=i(Kr(),Pp())})(_r,function(r){r.lib.Cipher||function(i){var n=r,a=n.lib,o=a.Base,s=a.WordArray,l=a.BufferedBlockAlgorithm,u=n.enc;u.Utf8;var c=u.Base64,h=n.algo,d=h.EvpKDF,f=a.Cipher=l.extend({cfg:o.extend(),createEncryptor:function(E,T){return this.create(this._ENC_XFORM_MODE,E,T)},createDecryptor:function(E,T){return this.create(this._DEC_XFORM_MODE,E,T)},init:function(E,T,L){this.cfg=this.cfg.extend(L),this._xformMode=E,this._key=T,this.reset()},reset:function(){l.reset.call(this),this._doReset()},process:function(E){return this._append(E),this._process()},finalize:function(E){E&&this._append(E);var T=this._doFinalize();return T},keySize:128/32,ivSize:128/32,_ENC_XFORM_MODE:1,_DEC_XFORM_MODE:2,_createHelper:function(){function E(T){return typeof T=="string"?M:w}return function(T){return{encrypt:function(L,P,C){return E(P).encrypt(T,L,P,C)},decrypt:function(L,P,C){return E(P).decrypt(T,L,P,C)}}}}()});a.StreamCipher=f.extend({_doFinalize:function(){var E=this._process(!0);return E},blockSize:1});var p=n.mode={},v=a.BlockCipherMode=o.extend({createEncryptor:function(E,T){return this.Encryptor.create(E,T)},createDecryptor:function(E,T){return this.Decryptor.create(E,T)},init:function(E,T){this._cipher=E,this._iv=T}}),m=p.CBC=function(){var E=v.extend();E.Encryptor=E.extend({processBlock:function(L,P){var C=this._cipher,D=C.blockSize;T.call(this,L,P,D),C.encryptBlock(L,P),this._prevBlock=L.slice(P,P+D)}}),E.Decryptor=E.extend({processBlock:function(L,P){var C=this._cipher,D=C.blockSize,I=L.slice(P,P+D);C.decryptBlock(L,P),T.call(this,L,P,D),this._prevBlock=I}});function T(L,P,C){var D,I=this._iv;I?(D=I,this._iv=i):D=this._prevBlock;for(var O=0;O<C;O++)L[P+O]^=D[O]}return E}(),g=n.pad={},y=g.Pkcs7={pad:function(E,T){for(var L=T*4,P=L-E.sigBytes%L,C=P<<24|P<<16|P<<8|P,D=[],I=0;I<P;I+=4)D.push(C);var O=s.create(D,P);E.concat(O)},unpad:function(E){var T=E.words[E.sigBytes-1>>>2]&255;E.sigBytes-=T}};a.BlockCipher=f.extend({cfg:f.cfg.extend({mode:m,padding:y}),reset:function(){var E;f.reset.call(this);var T=this.cfg,L=T.iv,P=T.mode;this._xformMode==this._ENC_XFORM_MODE?E=P.createEncryptor:(E=P.createDecryptor,this._minBufferSize=1),this._mode&&this._mode.__creator==E?this._mode.init(this,L&&L.words):(this._mode=E.call(P,this,L&&L.words),this._mode.__creator=E)},_doProcessBlock:function(E,T){this._mode.processBlock(E,T)},_doFinalize:function(){var E,T=this.cfg.padding;return this._xformMode==this._ENC_XFORM_MODE?(T.pad(this._data,this.blockSize),E=this._process(!0)):(E=this._process(!0),T.unpad(E)),E},blockSize:128/32});var x=a.CipherParams=o.extend({init:function(E){this.mixIn(E)},toString:function(E){return(E||this.formatter).stringify(this)}}),b=n.format={},_=b.OpenSSL={stringify:function(E){var T,L=E.ciphertext,P=E.salt;return P?T=s.create([1398893684,1701076831]).concat(P).concat(L):T=L,T.toString(c)},parse:function(E){var T,L=c.parse(E),P=L.words;return P[0]==1398893684&&P[1]==1701076831&&(T=s.create(P.slice(2,4)),P.splice(0,4),L.sigBytes-=16),x.create({ciphertext:L,salt:T})}},w=a.SerializableCipher=o.extend({cfg:o.extend({format:_}),encrypt:function(E,T,L,P){P=this.cfg.extend(P);var C=E.createEncryptor(L,P),D=C.finalize(T),I=C.cfg;return x.create({ciphertext:D,key:L,iv:I.iv,algorithm:E,mode:I.mode,padding:I.padding,blockSize:E.blockSize,formatter:P.format})},decrypt:function(E,T,L,P){P=this.cfg.extend(P),T=this._parse(T,P.format);var C=E.createDecryptor(L,P).finalize(T.ciphertext);return C},_parse:function(E,T){return typeof E=="string"?T.parse(E,this):E}}),S=n.kdf={},A=S.OpenSSL={execute:function(E,T,L,P,C){if(P||(P=s.random(64/8)),C)var D=d.create({keySize:T+L,hasher:C}).compute(E,P);else var D=d.create({keySize:T+L}).compute(E,P);var I=s.create(D.words.slice(T),L*4);return D.sigBytes=T*4,x.create({key:D,iv:I,salt:P})}},M=a.PasswordBasedCipher=w.extend({cfg:w.cfg.extend({kdf:A}),encrypt:function(E,T,L,P){P=this.cfg.extend(P);var C=P.kdf.execute(L,E.keySize,E.ivSize,P.salt,P.hasher);P.iv=C.iv;var D=w.encrypt.call(this,E,T,C.key,P);return D.mixIn(C),D},decrypt:function(E,T,L,P){P=this.cfg.extend(P),T=this._parse(T,P.format);var C=P.kdf.execute(L,E.keySize,E.ivSize,T.salt,P.hasher);P.iv=C.iv;var D=w.decrypt.call(this,E,T,C.key,P);return D}})}()})}(C9)),C9.exports}var E9={exports:{}},HK;function mnt(){return HK||(HK=1,function(e,t){(function(r,i,n){e.exports=i(Kr(),Da())})(_r,function(r){return r.mode.CFB=function(){var i=r.lib.BlockCipherMode.extend();i.Encryptor=i.extend({processBlock:function(a,o){var s=this._cipher,l=s.blockSize;n.call(this,a,o,l,s),this._prevBlock=a.slice(o,o+l)}}),i.Decryptor=i.extend({processBlock:function(a,o){var s=this._cipher,l=s.blockSize,u=a.slice(o,o+l);n.call(this,a,o,l,s),this._prevBlock=u}});function n(a,o,s,l){var u,c=this._iv;c?(u=c.slice(0),this._iv=void 0):u=this._prevBlock,l.encryptBlock(u,0);for(var h=0;h<s;h++)a[o+h]^=u[h]}return i}(),r.mode.CFB})}(E9)),E9.exports}var M9={exports:{}},UK;function gnt(){return UK||(UK=1,function(e,t){(function(r,i,n){e.exports=i(Kr(),Da())})(_r,function(r){return r.mode.CTR=function(){var i=r.lib.BlockCipherMode.extend(),n=i.Encryptor=i.extend({processBlock:function(a,o){var s=this._cipher,l=s.blockSize,u=this._iv,c=this._counter;u&&(c=this._counter=u.slice(0),this._iv=void 0);var h=c.slice(0);s.encryptBlock(h,0),c[l-1]=c[l-1]+1|0;for(var d=0;d<l;d++)a[o+d]^=h[d]}});return i.Decryptor=n,i}(),r.mode.CTR})}(M9)),M9.exports}var T9={exports:{}},GK;function ynt(){return GK||(GK=1,function(e,t){(function(r,i,n){e.exports=i(Kr(),Da())})(_r,function(r){/** @preserve
 * Counter block mode compatible with  Dr Brian Gladman fileenc.c
 * derived from CryptoJS.mode.CTR
 * Jan Hruby jhruby.web@gmail.com
 */return r.mode.CTRGladman=function(){var i=r.lib.BlockCipherMode.extend();function n(s){if((s>>24&255)===255){var l=s>>16&255,u=s>>8&255,c=s&255;l===255?(l=0,u===255?(u=0,c===255?c=0:++c):++u):++l,s=0,s+=l<<16,s+=u<<8,s+=c}else s+=1<<24;return s}function a(s){return(s[0]=n(s[0]))===0&&(s[1]=n(s[1])),s}var o=i.Encryptor=i.extend({processBlock:function(s,l){var u=this._cipher,c=u.blockSize,h=this._iv,d=this._counter;h&&(d=this._counter=h.slice(0),this._iv=void 0),a(d);var f=d.slice(0);u.encryptBlock(f,0);for(var p=0;p<c;p++)s[l+p]^=f[p]}});return i.Decryptor=o,i}(),r.mode.CTRGladman})}(T9)),T9.exports}var P9={exports:{}},jK;function xnt(){return jK||(jK=1,function(e,t){(function(r,i,n){e.exports=i(Kr(),Da())})(_r,function(r){return r.mode.OFB=function(){var i=r.lib.BlockCipherMode.extend(),n=i.Encryptor=i.extend({processBlock:function(a,o){var s=this._cipher,l=s.blockSize,u=this._iv,c=this._keystream;u&&(c=this._keystream=u.slice(0),this._iv=void 0),s.encryptBlock(c,0);for(var h=0;h<l;h++)a[o+h]^=c[h]}});return i.Decryptor=n,i}(),r.mode.OFB})}(P9)),P9.exports}var D9={exports:{}},WK;function bnt(){return WK||(WK=1,function(e,t){(function(r,i,n){e.exports=i(Kr(),Da())})(_r,function(r){return r.mode.ECB=function(){var i=r.lib.BlockCipherMode.extend();return i.Encryptor=i.extend({processBlock:function(n,a){this._cipher.encryptBlock(n,a)}}),i.Decryptor=i.extend({processBlock:function(n,a){this._cipher.decryptBlock(n,a)}}),i}(),r.mode.ECB})}(D9)),D9.exports}var I9={exports:{}},qK;function wnt(){return qK||(qK=1,function(e,t){(function(r,i,n){e.exports=i(Kr(),Da())})(_r,function(r){return r.pad.AnsiX923={pad:function(i,n){var a=i.sigBytes,o=n*4,s=o-a%o,l=a+s-1;i.clamp(),i.words[l>>>2]|=s<<24-l%4*8,i.sigBytes+=s},unpad:function(i){var n=i.words[i.sigBytes-1>>>2]&255;i.sigBytes-=n}},r.pad.Ansix923})}(I9)),I9.exports}var L9={exports:{}},YK;function _nt(){return YK||(YK=1,function(e,t){(function(r,i,n){e.exports=i(Kr(),Da())})(_r,function(r){return r.pad.Iso10126={pad:function(i,n){var a=n*4,o=a-i.sigBytes%a;i.concat(r.lib.WordArray.random(o-1)).concat(r.lib.WordArray.create([o<<24],1))},unpad:function(i){var n=i.words[i.sigBytes-1>>>2]&255;i.sigBytes-=n}},r.pad.Iso10126})}(L9)),L9.exports}var k9={exports:{}},XK;function Ant(){return XK||(XK=1,function(e,t){(function(r,i,n){e.exports=i(Kr(),Da())})(_r,function(r){return r.pad.Iso97971={pad:function(i,n){i.concat(r.lib.WordArray.create([2147483648],1)),r.pad.ZeroPadding.pad(i,n)},unpad:function(i){r.pad.ZeroPadding.unpad(i),i.sigBytes--}},r.pad.Iso97971})}(k9)),k9.exports}var R9={exports:{}},ZK;function Snt(){return ZK||(ZK=1,function(e,t){(function(r,i,n){e.exports=i(Kr(),Da())})(_r,function(r){return r.pad.ZeroPadding={pad:function(i,n){var a=n*4;i.clamp(),i.sigBytes+=a-(i.sigBytes%a||a)},unpad:function(i){for(var n=i.words,a=i.sigBytes-1,a=i.sigBytes-1;a>=0;a--)if(n[a>>>2]>>>24-a%4*8&255){i.sigBytes=a+1;break}}},r.pad.ZeroPadding})}(R9)),R9.exports}var O9={exports:{}},QK;function Cnt(){return QK||(QK=1,function(e,t){(function(r,i,n){e.exports=i(Kr(),Da())})(_r,function(r){return r.pad.NoPadding={pad:function(){},unpad:function(){}},r.pad.NoPadding})}(O9)),O9.exports}var B9={exports:{}},KK;function Ent(){return KK||(KK=1,function(e,t){(function(r,i,n){e.exports=i(Kr(),Da())})(_r,function(r){return function(i){var n=r,a=n.lib,o=a.CipherParams,s=n.enc,l=s.Hex,u=n.format;u.Hex={stringify:function(c){return c.ciphertext.toString(l)},parse:function(c){var h=l.parse(c);return o.create({ciphertext:h})}}}(),r.format.Hex})}(B9)),B9.exports}var N9={exports:{}},JK;function Mnt(){return JK||(JK=1,function(e,t){(function(r,i,n){e.exports=i(Kr(),sm(),lm(),Pp(),Da())})(_r,function(r){return function(){var i=r,n=i.lib,a=n.BlockCipher,o=i.algo,s=[],l=[],u=[],c=[],h=[],d=[],f=[],p=[],v=[],m=[];(function(){for(var x=[],b=0;b<256;b++)b<128?x[b]=b<<1:x[b]=b<<1^283;for(var _=0,w=0,b=0;b<256;b++){var S=w^w<<1^w<<2^w<<3^w<<4;S=S>>>8^S&255^99,s[_]=S,l[S]=_;var A=x[_],M=x[A],E=x[M],T=x[S]*257^S*16843008;u[_]=T<<24|T>>>8,c[_]=T<<16|T>>>16,h[_]=T<<8|T>>>24,d[_]=T;var T=E*16843009^M*65537^A*257^_*16843008;f[S]=T<<24|T>>>8,p[S]=T<<16|T>>>16,v[S]=T<<8|T>>>24,m[S]=T,_?(_=A^x[x[x[E^A]]],w^=x[x[w]]):_=w=1}})();var g=[0,1,2,4,8,16,32,64,128,27,54],y=o.AES=a.extend({_doReset:function(){var x;if(!(this._nRounds&&this._keyPriorReset===this._key)){for(var b=this._keyPriorReset=this._key,_=b.words,w=b.sigBytes/4,S=this._nRounds=w+6,A=(S+1)*4,M=this._keySchedule=[],E=0;E<A;E++)E<w?M[E]=_[E]:(x=M[E-1],E%w?w>6&&E%w==4&&(x=s[x>>>24]<<24|s[x>>>16&255]<<16|s[x>>>8&255]<<8|s[x&255]):(x=x<<8|x>>>24,x=s[x>>>24]<<24|s[x>>>16&255]<<16|s[x>>>8&255]<<8|s[x&255],x^=g[E/w|0]<<24),M[E]=M[E-w]^x);for(var T=this._invKeySchedule=[],L=0;L<A;L++){var E=A-L;if(L%4)var x=M[E];else var x=M[E-4];L<4||E<=4?T[L]=x:T[L]=f[s[x>>>24]]^p[s[x>>>16&255]]^v[s[x>>>8&255]]^m[s[x&255]]}}},encryptBlock:function(x,b){this._doCryptBlock(x,b,this._keySchedule,u,c,h,d,s)},decryptBlock:function(x,b){var _=x[b+1];x[b+1]=x[b+3],x[b+3]=_,this._doCryptBlock(x,b,this._invKeySchedule,f,p,v,m,l);var _=x[b+1];x[b+1]=x[b+3],x[b+3]=_},_doCryptBlock:function(x,b,_,w,S,A,M,E){for(var T=this._nRounds,L=x[b]^_[0],P=x[b+1]^_[1],C=x[b+2]^_[2],D=x[b+3]^_[3],I=4,O=1;O<T;O++){var R=w[L>>>24]^S[P>>>16&255]^A[C>>>8&255]^M[D&255]^_[I++],H=w[P>>>24]^S[C>>>16&255]^A[D>>>8&255]^M[L&255]^_[I++],j=w[C>>>24]^S[D>>>16&255]^A[L>>>8&255]^M[P&255]^_[I++],N=w[D>>>24]^S[L>>>16&255]^A[P>>>8&255]^M[C&255]^_[I++];L=R,P=H,C=j,D=N}var R=(E[L>>>24]<<24|E[P>>>16&255]<<16|E[C>>>8&255]<<8|E[D&255])^_[I++],H=(E[P>>>24]<<24|E[C>>>16&255]<<16|E[D>>>8&255]<<8|E[L&255])^_[I++],j=(E[C>>>24]<<24|E[D>>>16&255]<<16|E[L>>>8&255]<<8|E[P&255])^_[I++],N=(E[D>>>24]<<24|E[L>>>16&255]<<16|E[P>>>8&255]<<8|E[C&255])^_[I++];x[b]=R,x[b+1]=H,x[b+2]=j,x[b+3]=N},keySize:256/32});i.AES=a._createHelper(y)}(),r.AES})}(N9)),N9.exports}var V9={exports:{}},$K;function Tnt(){return $K||($K=1,function(e,t){(function(r,i,n){e.exports=i(Kr(),sm(),lm(),Pp(),Da())})(_r,function(r){return function(){var i=r,n=i.lib,a=n.WordArray,o=n.BlockCipher,s=i.algo,l=[57,49,41,33,25,17,9,1,58,50,42,34,26,18,10,2,59,51,43,35,27,19,11,3,60,52,44,36,63,55,47,39,31,23,15,7,62,54,46,38,30,22,14,6,61,53,45,37,29,21,13,5,28,20,12,4],u=[14,17,11,24,1,5,3,28,15,6,21,10,23,19,12,4,26,8,16,7,27,20,13,2,41,52,31,37,47,55,30,40,51,45,33,48,44,49,39,56,34,53,46,42,50,36,29,32],c=[1,2,4,6,8,10,12,14,15,17,19,21,23,25,27,28],h=[{0:8421888,268435456:32768,536870912:8421378,805306368:2,1073741824:512,1342177280:8421890,1610612736:8389122,1879048192:8388608,2147483648:514,2415919104:8389120,2684354560:33280,2952790016:8421376,3221225472:32770,3489660928:8388610,3758096384:0,4026531840:33282,134217728:0,402653184:8421890,671088640:33282,939524096:32768,1207959552:8421888,1476395008:512,1744830464:8421378,2013265920:2,2281701376:8389120,2550136832:33280,2818572288:8421376,3087007744:8389122,3355443200:8388610,3623878656:32770,3892314112:514,4160749568:8388608,1:32768,268435457:2,536870913:8421888,805306369:8388608,1073741825:8421378,1342177281:33280,1610612737:512,1879048193:8389122,2147483649:8421890,2415919105:8421376,2684354561:8388610,2952790017:33282,3221225473:514,3489660929:8389120,3758096385:32770,4026531841:0,134217729:8421890,402653185:8421376,671088641:8388608,939524097:512,1207959553:32768,1476395009:8388610,1744830465:2,2013265921:33282,2281701377:32770,2550136833:8389122,2818572289:514,3087007745:8421888,3355443201:8389120,3623878657:0,3892314113:33280,4160749569:8421378},{0:1074282512,16777216:16384,33554432:524288,50331648:1074266128,67108864:1073741840,83886080:1074282496,100663296:1073758208,117440512:16,134217728:540672,150994944:1073758224,167772160:1073741824,184549376:540688,201326592:524304,218103808:0,234881024:16400,251658240:1074266112,8388608:1073758208,25165824:540688,41943040:16,58720256:1073758224,75497472:1074282512,92274688:1073741824,109051904:524288,125829120:1074266128,142606336:524304,159383552:0,176160768:16384,192937984:1074266112,209715200:1073741840,226492416:540672,243269632:1074282496,260046848:16400,268435456:0,285212672:1074266128,301989888:1073758224,318767104:1074282496,335544320:1074266112,352321536:16,369098752:540688,385875968:16384,402653184:16400,419430400:524288,436207616:524304,452984832:1073741840,469762048:540672,486539264:1073758208,503316480:1073741824,520093696:1074282512,276824064:540688,293601280:524288,310378496:1074266112,327155712:16384,343932928:1073758208,360710144:1074282512,377487360:16,394264576:1073741824,411041792:1074282496,427819008:1073741840,444596224:1073758224,461373440:524304,478150656:0,494927872:16400,511705088:1074266128,528482304:540672},{0:260,1048576:0,2097152:67109120,3145728:65796,4194304:65540,5242880:67108868,6291456:67174660,7340032:67174400,8388608:67108864,9437184:67174656,10485760:65792,11534336:67174404,12582912:67109124,13631488:65536,14680064:4,15728640:256,524288:67174656,1572864:67174404,2621440:0,3670016:67109120,4718592:67108868,5767168:65536,6815744:65540,7864320:260,8912896:4,9961472:256,11010048:67174400,12058624:65796,13107200:65792,14155776:67109124,15204352:67174660,16252928:67108864,16777216:67174656,17825792:65540,18874368:65536,19922944:67109120,20971520:256,22020096:67174660,23068672:67108868,24117248:0,25165824:67109124,26214400:67108864,27262976:4,28311552:65792,29360128:67174400,30408704:260,31457280:65796,32505856:67174404,17301504:67108864,18350080:260,19398656:67174656,20447232:0,21495808:65540,22544384:67109120,23592960:256,24641536:67174404,25690112:65536,26738688:67174660,27787264:65796,28835840:67108868,29884416:67109124,30932992:67174400,31981568:4,33030144:65792},{0:2151682048,65536:2147487808,131072:4198464,196608:2151677952,262144:0,327680:4198400,393216:2147483712,458752:4194368,524288:2147483648,589824:4194304,655360:64,720896:2147487744,786432:2151678016,851968:4160,917504:4096,983040:2151682112,32768:2147487808,98304:64,163840:2151678016,229376:2147487744,294912:4198400,360448:2151682112,425984:0,491520:2151677952,557056:4096,622592:2151682048,688128:4194304,753664:4160,819200:2147483648,884736:4194368,950272:4198464,1015808:2147483712,1048576:4194368,1114112:4198400,1179648:2147483712,1245184:0,1310720:4160,1376256:2151678016,1441792:2151682048,1507328:2147487808,1572864:2151682112,1638400:2147483648,1703936:2151677952,1769472:4198464,1835008:2147487744,1900544:4194304,1966080:64,2031616:4096,1081344:2151677952,1146880:2151682112,1212416:0,1277952:4198400,1343488:4194368,1409024:2147483648,1474560:2147487808,1540096:64,1605632:2147483712,1671168:4096,1736704:2147487744,1802240:2151678016,1867776:4160,1933312:2151682048,1998848:4194304,2064384:4198464},{0:128,4096:17039360,8192:262144,12288:536870912,16384:537133184,20480:16777344,24576:553648256,28672:262272,32768:16777216,36864:537133056,40960:536871040,45056:553910400,49152:553910272,53248:0,57344:17039488,61440:553648128,2048:17039488,6144:553648256,10240:128,14336:17039360,18432:262144,22528:537133184,26624:553910272,30720:536870912,34816:537133056,38912:0,43008:553910400,47104:16777344,51200:536871040,55296:553648128,59392:16777216,63488:262272,65536:262144,69632:128,73728:536870912,77824:553648256,81920:16777344,86016:553910272,90112:537133184,94208:16777216,98304:553910400,102400:553648128,106496:17039360,110592:537133056,114688:262272,118784:536871040,122880:0,126976:17039488,67584:553648256,71680:16777216,75776:17039360,79872:537133184,83968:536870912,88064:17039488,92160:128,96256:553910272,100352:262272,104448:553910400,108544:0,112640:553648128,116736:16777344,120832:262144,124928:537133056,129024:536871040},{0:268435464,256:8192,512:270532608,768:270540808,1024:268443648,1280:2097152,1536:2097160,1792:268435456,2048:0,2304:268443656,2560:2105344,2816:8,3072:270532616,3328:2105352,3584:8200,3840:270540800,128:270532608,384:270540808,640:8,896:2097152,1152:2105352,1408:268435464,1664:268443648,1920:8200,2176:2097160,2432:8192,2688:268443656,2944:270532616,3200:0,3456:270540800,3712:2105344,3968:268435456,4096:268443648,4352:270532616,4608:270540808,4864:8200,5120:2097152,5376:268435456,5632:268435464,5888:2105344,6144:2105352,6400:0,6656:8,6912:270532608,7168:8192,7424:268443656,7680:270540800,7936:2097160,4224:8,4480:2105344,4736:2097152,4992:268435464,5248:268443648,5504:8200,5760:270540808,6016:270532608,6272:270540800,6528:270532616,6784:8192,7040:2105352,7296:2097160,7552:0,7808:268435456,8064:268443656},{0:1048576,16:33555457,32:1024,48:1049601,64:34604033,80:0,96:1,112:34603009,128:33555456,144:1048577,160:33554433,176:34604032,192:34603008,208:1025,224:1049600,240:33554432,8:34603009,24:0,40:33555457,56:34604032,72:1048576,88:33554433,104:33554432,120:1025,136:1049601,152:33555456,168:34603008,184:1048577,200:1024,216:34604033,232:1,248:1049600,256:33554432,272:1048576,288:33555457,304:34603009,320:1048577,336:33555456,352:34604032,368:1049601,384:1025,400:34604033,416:1049600,432:1,448:0,464:34603008,480:33554433,496:1024,264:1049600,280:33555457,296:34603009,312:1,328:33554432,344:1048576,360:1025,376:34604032,392:33554433,408:34603008,424:0,440:34604033,456:1049601,472:1024,488:33555456,504:1048577},{0:134219808,1:131072,2:134217728,3:32,4:131104,5:134350880,6:134350848,7:2048,8:134348800,9:134219776,10:133120,11:134348832,12:2080,13:0,14:134217760,15:133152,2147483648:2048,2147483649:134350880,2147483650:134219808,2147483651:134217728,2147483652:134348800,2147483653:133120,2147483654:133152,2147483655:32,2147483656:134217760,2147483657:2080,2147483658:131104,2147483659:134350848,2147483660:0,2147483661:134348832,2147483662:134219776,2147483663:131072,16:133152,17:134350848,18:32,19:2048,20:134219776,21:134217760,22:134348832,23:131072,24:0,25:131104,26:134348800,27:134219808,28:134350880,29:133120,30:2080,31:134217728,2147483664:131072,2147483665:2048,2147483666:134348832,2147483667:133152,2147483668:32,2147483669:134348800,2147483670:134217728,2147483671:134219808,2147483672:134350880,2147483673:134217760,2147483674:134219776,2147483675:0,2147483676:133120,2147483677:2080,2147483678:131104,2147483679:134350848}],d=[4160749569,528482304,33030144,2064384,129024,8064,504,2147483679],f=s.DES=o.extend({_doReset:function(){for(var g=this._key,y=g.words,x=[],b=0;b<56;b++){var _=l[b]-1;x[b]=y[_>>>5]>>>31-_%32&1}for(var w=this._subKeys=[],S=0;S<16;S++){for(var A=w[S]=[],M=c[S],b=0;b<24;b++)A[b/6|0]|=x[(u[b]-1+M)%28]<<31-b%6,A[4+(b/6|0)]|=x[28+(u[b+24]-1+M)%28]<<31-b%6;A[0]=A[0]<<1|A[0]>>>31;for(var b=1;b<7;b++)A[b]=A[b]>>>(b-1)*4+3;A[7]=A[7]<<5|A[7]>>>27}for(var E=this._invSubKeys=[],b=0;b<16;b++)E[b]=w[15-b]},encryptBlock:function(g,y){this._doCryptBlock(g,y,this._subKeys)},decryptBlock:function(g,y){this._doCryptBlock(g,y,this._invSubKeys)},_doCryptBlock:function(g,y,x){this._lBlock=g[y],this._rBlock=g[y+1],p.call(this,4,252645135),p.call(this,16,65535),v.call(this,2,858993459),v.call(this,8,16711935),p.call(this,1,1431655765);for(var b=0;b<16;b++){for(var _=x[b],w=this._lBlock,S=this._rBlock,A=0,M=0;M<8;M++)A|=h[M][((S^_[M])&d[M])>>>0];this._lBlock=S,this._rBlock=w^A}var E=this._lBlock;this._lBlock=this._rBlock,this._rBlock=E,p.call(this,1,1431655765),v.call(this,8,16711935),v.call(this,2,858993459),p.call(this,16,65535),p.call(this,4,252645135),g[y]=this._lBlock,g[y+1]=this._rBlock},keySize:64/32,ivSize:64/32,blockSize:64/32});function p(g,y){var x=(this._lBlock>>>g^this._rBlock)&y;this._rBlock^=x,this._lBlock^=x<<g}function v(g,y){var x=(this._rBlock>>>g^this._lBlock)&y;this._lBlock^=x,this._rBlock^=x<<g}i.DES=o._createHelper(f);var m=s.TripleDES=o.extend({_doReset:function(){var g=this._key,y=g.words;if(y.length!==2&&y.length!==4&&y.length<6)throw new Error("Invalid key length - 3DES requires the key length to be 64, 128, 192 or >192.");var x=y.slice(0,2),b=y.length<4?y.slice(0,2):y.slice(2,4),_=y.length<6?y.slice(0,2):y.slice(4,6);this._des1=f.createEncryptor(a.create(x)),this._des2=f.createEncryptor(a.create(b)),this._des3=f.createEncryptor(a.create(_))},encryptBlock:function(g,y){this._des1.encryptBlock(g,y),this._des2.decryptBlock(g,y),this._des3.encryptBlock(g,y)},decryptBlock:function(g,y){this._des3.decryptBlock(g,y),this._des2.encryptBlock(g,y),this._des1.decryptBlock(g,y)},keySize:192/32,ivSize:64/32,blockSize:64/32});i.TripleDES=o._createHelper(m)}(),r.TripleDES})}(V9)),V9.exports}var F9={exports:{}},eJ;function Pnt(){return eJ||(eJ=1,function(e,t){(function(r,i,n){e.exports=i(Kr(),sm(),lm(),Pp(),Da())})(_r,function(r){return function(){var i=r,n=i.lib,a=n.StreamCipher,o=i.algo,s=o.RC4=a.extend({_doReset:function(){for(var c=this._key,h=c.words,d=c.sigBytes,f=this._S=[],p=0;p<256;p++)f[p]=p;for(var p=0,v=0;p<256;p++){var m=p%d,g=h[m>>>2]>>>24-m%4*8&255;v=(v+f[p]+g)%256;var y=f[p];f[p]=f[v],f[v]=y}this._i=this._j=0},_doProcessBlock:function(c,h){c[h]^=l.call(this)},keySize:256/32,ivSize:0});function l(){for(var c=this._S,h=this._i,d=this._j,f=0,p=0;p<4;p++){h=(h+1)%256,d=(d+c[h])%256;var v=c[h];c[h]=c[d],c[d]=v,f|=c[(c[h]+c[d])%256]<<24-p*8}return this._i=h,this._j=d,f}i.RC4=a._createHelper(s);var u=o.RC4Drop=s.extend({cfg:s.cfg.extend({drop:192}),_doReset:function(){s._doReset.call(this);for(var c=this.cfg.drop;c>0;c--)l.call(this)}});i.RC4Drop=a._createHelper(u)}(),r.RC4})}(F9)),F9.exports}var z9={exports:{}},tJ;function Dnt(){return tJ||(tJ=1,function(e,t){(function(r,i,n){e.exports=i(Kr(),sm(),lm(),Pp(),Da())})(_r,function(r){return function(){var i=r,n=i.lib,a=n.StreamCipher,o=i.algo,s=[],l=[],u=[],c=o.Rabbit=a.extend({_doReset:function(){for(var d=this._key.words,f=this.cfg.iv,p=0;p<4;p++)d[p]=(d[p]<<8|d[p]>>>24)&16711935|(d[p]<<24|d[p]>>>8)&4278255360;var v=this._X=[d[0],d[3]<<16|d[2]>>>16,d[1],d[0]<<16|d[3]>>>16,d[2],d[1]<<16|d[0]>>>16,d[3],d[2]<<16|d[1]>>>16],m=this._C=[d[2]<<16|d[2]>>>16,d[0]&4294901760|d[1]&65535,d[3]<<16|d[3]>>>16,d[1]&4294901760|d[2]&65535,d[0]<<16|d[0]>>>16,d[2]&4294901760|d[3]&65535,d[1]<<16|d[1]>>>16,d[3]&4294901760|d[0]&65535];this._b=0;for(var p=0;p<4;p++)h.call(this);for(var p=0;p<8;p++)m[p]^=v[p+4&7];if(f){var g=f.words,y=g[0],x=g[1],b=(y<<8|y>>>24)&16711935|(y<<24|y>>>8)&4278255360,_=(x<<8|x>>>24)&16711935|(x<<24|x>>>8)&4278255360,w=b>>>16|_&4294901760,S=_<<16|b&65535;m[0]^=b,m[1]^=w,m[2]^=_,m[3]^=S,m[4]^=b,m[5]^=w,m[6]^=_,m[7]^=S;for(var p=0;p<4;p++)h.call(this)}},_doProcessBlock:function(d,f){var p=this._X;h.call(this),s[0]=p[0]^p[5]>>>16^p[3]<<16,s[1]=p[2]^p[7]>>>16^p[5]<<16,s[2]=p[4]^p[1]>>>16^p[7]<<16,s[3]=p[6]^p[3]>>>16^p[1]<<16;for(var v=0;v<4;v++)s[v]=(s[v]<<8|s[v]>>>24)&16711935|(s[v]<<24|s[v]>>>8)&4278255360,d[f+v]^=s[v]},blockSize:128/32,ivSize:64/32});function h(){for(var d=this._X,f=this._C,p=0;p<8;p++)l[p]=f[p];f[0]=f[0]+1295307597+this._b|0,f[1]=f[1]+3545052371+(f[0]>>>0<l[0]>>>0?1:0)|0,f[2]=f[2]+886263092+(f[1]>>>0<l[1]>>>0?1:0)|0,f[3]=f[3]+1295307597+(f[2]>>>0<l[2]>>>0?1:0)|0,f[4]=f[4]+3545052371+(f[3]>>>0<l[3]>>>0?1:0)|0,f[5]=f[5]+886263092+(f[4]>>>0<l[4]>>>0?1:0)|0,f[6]=f[6]+1295307597+(f[5]>>>0<l[5]>>>0?1:0)|0,f[7]=f[7]+3545052371+(f[6]>>>0<l[6]>>>0?1:0)|0,this._b=f[7]>>>0<l[7]>>>0?1:0;for(var p=0;p<8;p++){var v=d[p]+f[p],m=v&65535,g=v>>>16,y=((m*m>>>17)+m*g>>>15)+g*g,x=((v&4294901760)*v|0)+((v&65535)*v|0);u[p]=y^x}d[0]=u[0]+(u[7]<<16|u[7]>>>16)+(u[6]<<16|u[6]>>>16)|0,d[1]=u[1]+(u[0]<<8|u[0]>>>24)+u[7]|0,d[2]=u[2]+(u[1]<<16|u[1]>>>16)+(u[0]<<16|u[0]>>>16)|0,d[3]=u[3]+(u[2]<<8|u[2]>>>24)+u[1]|0,d[4]=u[4]+(u[3]<<16|u[3]>>>16)+(u[2]<<16|u[2]>>>16)|0,d[5]=u[5]+(u[4]<<8|u[4]>>>24)+u[3]|0,d[6]=u[6]+(u[5]<<16|u[5]>>>16)+(u[4]<<16|u[4]>>>16)|0,d[7]=u[7]+(u[6]<<8|u[6]>>>24)+u[5]|0}i.Rabbit=a._createHelper(c)}(),r.Rabbit})}(z9)),z9.exports}var H9={exports:{}},rJ;function Int(){return rJ||(rJ=1,function(e,t){(function(r,i,n){e.exports=i(Kr(),sm(),lm(),Pp(),Da())})(_r,function(r){return function(){var i=r,n=i.lib,a=n.StreamCipher,o=i.algo,s=[],l=[],u=[],c=o.RabbitLegacy=a.extend({_doReset:function(){var d=this._key.words,f=this.cfg.iv,p=this._X=[d[0],d[3]<<16|d[2]>>>16,d[1],d[0]<<16|d[3]>>>16,d[2],d[1]<<16|d[0]>>>16,d[3],d[2]<<16|d[1]>>>16],v=this._C=[d[2]<<16|d[2]>>>16,d[0]&4294901760|d[1]&65535,d[3]<<16|d[3]>>>16,d[1]&4294901760|d[2]&65535,d[0]<<16|d[0]>>>16,d[2]&4294901760|d[3]&65535,d[1]<<16|d[1]>>>16,d[3]&4294901760|d[0]&65535];this._b=0;for(var m=0;m<4;m++)h.call(this);for(var m=0;m<8;m++)v[m]^=p[m+4&7];if(f){var g=f.words,y=g[0],x=g[1],b=(y<<8|y>>>24)&16711935|(y<<24|y>>>8)&4278255360,_=(x<<8|x>>>24)&16711935|(x<<24|x>>>8)&4278255360,w=b>>>16|_&4294901760,S=_<<16|b&65535;v[0]^=b,v[1]^=w,v[2]^=_,v[3]^=S,v[4]^=b,v[5]^=w,v[6]^=_,v[7]^=S;for(var m=0;m<4;m++)h.call(this)}},_doProcessBlock:function(d,f){var p=this._X;h.call(this),s[0]=p[0]^p[5]>>>16^p[3]<<16,s[1]=p[2]^p[7]>>>16^p[5]<<16,s[2]=p[4]^p[1]>>>16^p[7]<<16,s[3]=p[6]^p[3]>>>16^p[1]<<16;for(var v=0;v<4;v++)s[v]=(s[v]<<8|s[v]>>>24)&16711935|(s[v]<<24|s[v]>>>8)&4278255360,d[f+v]^=s[v]},blockSize:128/32,ivSize:64/32});function h(){for(var d=this._X,f=this._C,p=0;p<8;p++)l[p]=f[p];f[0]=f[0]+1295307597+this._b|0,f[1]=f[1]+3545052371+(f[0]>>>0<l[0]>>>0?1:0)|0,f[2]=f[2]+886263092+(f[1]>>>0<l[1]>>>0?1:0)|0,f[3]=f[3]+1295307597+(f[2]>>>0<l[2]>>>0?1:0)|0,f[4]=f[4]+3545052371+(f[3]>>>0<l[3]>>>0?1:0)|0,f[5]=f[5]+886263092+(f[4]>>>0<l[4]>>>0?1:0)|0,f[6]=f[6]+1295307597+(f[5]>>>0<l[5]>>>0?1:0)|0,f[7]=f[7]+3545052371+(f[6]>>>0<l[6]>>>0?1:0)|0,this._b=f[7]>>>0<l[7]>>>0?1:0;for(var p=0;p<8;p++){var v=d[p]+f[p],m=v&65535,g=v>>>16,y=((m*m>>>17)+m*g>>>15)+g*g,x=((v&4294901760)*v|0)+((v&65535)*v|0);u[p]=y^x}d[0]=u[0]+(u[7]<<16|u[7]>>>16)+(u[6]<<16|u[6]>>>16)|0,d[1]=u[1]+(u[0]<<8|u[0]>>>24)+u[7]|0,d[2]=u[2]+(u[1]<<16|u[1]>>>16)+(u[0]<<16|u[0]>>>16)|0,d[3]=u[3]+(u[2]<<8|u[2]>>>24)+u[1]|0,d[4]=u[4]+(u[3]<<16|u[3]>>>16)+(u[2]<<16|u[2]>>>16)|0,d[5]=u[5]+(u[4]<<8|u[4]>>>24)+u[3]|0,d[6]=u[6]+(u[5]<<16|u[5]>>>16)+(u[4]<<16|u[4]>>>16)|0,d[7]=u[7]+(u[6]<<8|u[6]>>>24)+u[5]|0}i.RabbitLegacy=a._createHelper(c)}(),r.RabbitLegacy})}(H9)),H9.exports}var U9={exports:{}},iJ;function Lnt(){return iJ||(iJ=1,function(e,t){(function(r,i,n){e.exports=i(Kr(),sm(),lm(),Pp(),Da())})(_r,function(r){return function(){var i=r,n=i.lib,a=n.BlockCipher,o=i.algo;const s=16,l=[608135816,2242054355,320440878,57701188,2752067618,698298832,137296536,3964562569,1160258022,953160567,3193202383,887688300,3232508343,3380367581,1065670069,3041331479,2450970073,2306472731],u=[[3509652390,2564797868,805139163,3491422135,3101798381,1780907670,3128725573,4046225305,614570311,3012652279,134345442,2240740374,1667834072,1901547113,2757295779,4103290238,227898511,1921955416,1904987480,2182433518,2069144605,3260701109,2620446009,720527379,3318853667,677414384,3393288472,3101374703,2390351024,1614419982,1822297739,2954791486,3608508353,3174124327,2024746970,1432378464,3864339955,2857741204,1464375394,1676153920,1439316330,715854006,3033291828,289532110,2706671279,2087905683,3018724369,1668267050,732546397,1947742710,3462151702,2609353502,2950085171,1814351708,2050118529,680887927,999245976,1800124847,3300911131,1713906067,1641548236,4213287313,1216130144,1575780402,4018429277,3917837745,3693486850,3949271944,596196993,3549867205,258830323,2213823033,772490370,2760122372,1774776394,2652871518,566650946,4142492826,1728879713,2882767088,1783734482,3629395816,2517608232,2874225571,1861159788,326777828,3124490320,2130389656,2716951837,967770486,1724537150,2185432712,2364442137,1164943284,2105845187,998989502,3765401048,2244026483,1075463327,1455516326,1322494562,910128902,469688178,1117454909,936433444,3490320968,3675253459,1240580251,122909385,2157517691,634681816,4142456567,3825094682,3061402683,2540495037,79693498,3249098678,1084186820,1583128258,426386531,1761308591,1047286709,322548459,995290223,1845252383,2603652396,3431023940,2942221577,3202600964,3727903485,1712269319,422464435,3234572375,1170764815,3523960633,3117677531,1434042557,442511882,3600875718,1076654713,1738483198,4213154764,2393238008,3677496056,1014306527,4251020053,793779912,2902807211,842905082,4246964064,1395751752,1040244610,2656851899,3396308128,445077038,3742853595,3577915638,679411651,2892444358,2354009459,1767581616,3150600392,3791627101,3102740896,284835224,4246832056,1258075500,768725851,2589189241,3069724005,3532540348,1274779536,3789419226,2764799539,1660621633,3471099624,4011903706,913787905,3497959166,737222580,2514213453,2928710040,3937242737,1804850592,3499020752,2949064160,2386320175,2390070455,2415321851,4061277028,2290661394,2416832540,1336762016,1754252060,3520065937,3014181293,791618072,3188594551,3933548030,2332172193,3852520463,3043980520,413987798,3465142937,3030929376,4245938359,2093235073,3534596313,375366246,2157278981,2479649556,555357303,3870105701,2008414854,3344188149,4221384143,3956125452,2067696032,3594591187,2921233993,2428461,544322398,577241275,1471733935,610547355,4027169054,1432588573,1507829418,2025931657,3646575487,545086370,48609733,2200306550,1653985193,298326376,1316178497,3007786442,2064951626,458293330,2589141269,3591329599,3164325604,727753846,2179363840,146436021,1461446943,4069977195,705550613,3059967265,3887724982,4281599278,3313849956,1404054877,2845806497,146425753,1854211946],[1266315497,3048417604,3681880366,3289982499,290971e4,1235738493,2632868024,2414719590,3970600049,1771706367,1449415276,3266420449,422970021,1963543593,2690192192,3826793022,1062508698,1531092325,1804592342,2583117782,2714934279,4024971509,1294809318,4028980673,1289560198,2221992742,1669523910,35572830,157838143,1052438473,1016535060,1802137761,1753167236,1386275462,3080475397,2857371447,1040679964,2145300060,2390574316,1461121720,2956646967,4031777805,4028374788,33600511,2920084762,1018524850,629373528,3691585981,3515945977,2091462646,2486323059,586499841,988145025,935516892,3367335476,2599673255,2839830854,265290510,3972581182,2759138881,3795373465,1005194799,847297441,406762289,1314163512,1332590856,1866599683,4127851711,750260880,613907577,1450815602,3165620655,3734664991,3650291728,3012275730,3704569646,1427272223,778793252,1343938022,2676280711,2052605720,1946737175,3164576444,3914038668,3967478842,3682934266,1661551462,3294938066,4011595847,840292616,3712170807,616741398,312560963,711312465,1351876610,322626781,1910503582,271666773,2175563734,1594956187,70604529,3617834859,1007753275,1495573769,4069517037,2549218298,2663038764,504708206,2263041392,3941167025,2249088522,1514023603,1998579484,1312622330,694541497,2582060303,2151582166,1382467621,776784248,2618340202,3323268794,2497899128,2784771155,503983604,4076293799,907881277,423175695,432175456,1378068232,4145222326,3954048622,3938656102,3820766613,2793130115,2977904593,26017576,3274890735,3194772133,1700274565,1756076034,4006520079,3677328699,720338349,1533947780,354530856,688349552,3973924725,1637815568,332179504,3949051286,53804574,2852348879,3044236432,1282449977,3583942155,3416972820,4006381244,1617046695,2628476075,3002303598,1686838959,431878346,2686675385,1700445008,1080580658,1009431731,832498133,3223435511,2605976345,2271191193,2516031870,1648197032,4164389018,2548247927,300782431,375919233,238389289,3353747414,2531188641,2019080857,1475708069,455242339,2609103871,448939670,3451063019,1395535956,2413381860,1841049896,1491858159,885456874,4264095073,4001119347,1565136089,3898914787,1108368660,540939232,1173283510,2745871338,3681308437,4207628240,3343053890,4016749493,1699691293,1103962373,3625875870,2256883143,3830138730,1031889488,3479347698,1535977030,4236805024,3251091107,2132092099,1774941330,1199868427,1452454533,157007616,2904115357,342012276,595725824,1480756522,206960106,497939518,591360097,863170706,2375253569,3596610801,1814182875,2094937945,3421402208,1082520231,3463918190,2785509508,435703966,3908032597,1641649973,2842273706,3305899714,1510255612,2148256476,2655287854,3276092548,4258621189,236887753,3681803219,274041037,1734335097,3815195456,3317970021,1899903192,1026095262,4050517792,356393447,2410691914,3873677099,3682840055],[3913112168,2491498743,4132185628,2489919796,1091903735,1979897079,3170134830,3567386728,3557303409,857797738,1136121015,1342202287,507115054,2535736646,337727348,3213592640,1301675037,2528481711,1895095763,1721773893,3216771564,62756741,2142006736,835421444,2531993523,1442658625,3659876326,2882144922,676362277,1392781812,170690266,3921047035,1759253602,3611846912,1745797284,664899054,1329594018,3901205900,3045908486,2062866102,2865634940,3543621612,3464012697,1080764994,553557557,3656615353,3996768171,991055499,499776247,1265440854,648242737,3940784050,980351604,3713745714,1749149687,3396870395,4211799374,3640570775,1161844396,3125318951,1431517754,545492359,4268468663,3499529547,1437099964,2702547544,3433638243,2581715763,2787789398,1060185593,1593081372,2418618748,4260947970,69676912,2159744348,86519011,2512459080,3838209314,1220612927,3339683548,133810670,1090789135,1078426020,1569222167,845107691,3583754449,4072456591,1091646820,628848692,1613405280,3757631651,526609435,236106946,48312990,2942717905,3402727701,1797494240,859738849,992217954,4005476642,2243076622,3870952857,3732016268,765654824,3490871365,2511836413,1685915746,3888969200,1414112111,2273134842,3281911079,4080962846,172450625,2569994100,980381355,4109958455,2819808352,2716589560,2568741196,3681446669,3329971472,1835478071,660984891,3704678404,4045999559,3422617507,3040415634,1762651403,1719377915,3470491036,2693910283,3642056355,3138596744,1364962596,2073328063,1983633131,926494387,3423689081,2150032023,4096667949,1749200295,3328846651,309677260,2016342300,1779581495,3079819751,111262694,1274766160,443224088,298511866,1025883608,3806446537,1145181785,168956806,3641502830,3584813610,1689216846,3666258015,3200248200,1692713982,2646376535,4042768518,1618508792,1610833997,3523052358,4130873264,2001055236,3610705100,2202168115,4028541809,2961195399,1006657119,2006996926,3186142756,1430667929,3210227297,1314452623,4074634658,4101304120,2273951170,1399257539,3367210612,3027628629,1190975929,2062231137,2333990788,2221543033,2438960610,1181637006,548689776,2362791313,3372408396,3104550113,3145860560,296247880,1970579870,3078560182,3769228297,1714227617,3291629107,3898220290,166772364,1251581989,493813264,448347421,195405023,2709975567,677966185,3703036547,1463355134,2715995803,1338867538,1343315457,2802222074,2684532164,233230375,2599980071,2000651841,3277868038,1638401717,4028070440,3237316320,6314154,819756386,300326615,590932579,1405279636,3267499572,3150704214,2428286686,3959192993,3461946742,1862657033,1266418056,963775037,2089974820,2263052895,1917689273,448879540,3550394620,3981727096,150775221,3627908307,1303187396,508620638,2975983352,2726630617,1817252668,1876281319,1457606340,908771278,3720792119,3617206836,2455994898,1729034894,1080033504],[976866871,3556439503,2881648439,1522871579,1555064734,1336096578,3548522304,2579274686,3574697629,3205460757,3593280638,3338716283,3079412587,564236357,2993598910,1781952180,1464380207,3163844217,3332601554,1699332808,1393555694,1183702653,3581086237,1288719814,691649499,2847557200,2895455976,3193889540,2717570544,1781354906,1676643554,2592534050,3230253752,1126444790,2770207658,2633158820,2210423226,2615765581,2414155088,3127139286,673620729,2805611233,1269405062,4015350505,3341807571,4149409754,1057255273,2012875353,2162469141,2276492801,2601117357,993977747,3918593370,2654263191,753973209,36408145,2530585658,25011837,3520020182,2088578344,530523599,2918365339,1524020338,1518925132,3760827505,3759777254,1202760957,3985898139,3906192525,674977740,4174734889,2031300136,2019492241,3983892565,4153806404,3822280332,352677332,2297720250,60907813,90501309,3286998549,1016092578,2535922412,2839152426,457141659,509813237,4120667899,652014361,1966332200,2975202805,55981186,2327461051,676427537,3255491064,2882294119,3433927263,1307055953,942726286,933058658,2468411793,3933900994,4215176142,1361170020,2001714738,2830558078,3274259782,1222529897,1679025792,2729314320,3714953764,1770335741,151462246,3013232138,1682292957,1483529935,471910574,1539241949,458788160,3436315007,1807016891,3718408830,978976581,1043663428,3165965781,1927990952,4200891579,2372276910,3208408903,3533431907,1412390302,2931980059,4132332400,1947078029,3881505623,4168226417,2941484381,1077988104,1320477388,886195818,18198404,3786409e3,2509781533,112762804,3463356488,1866414978,891333506,18488651,661792760,1628790961,3885187036,3141171499,876946877,2693282273,1372485963,791857591,2686433993,3759982718,3167212022,3472953795,2716379847,445679433,3561995674,3504004811,3574258232,54117162,3331405415,2381918588,3769707343,4154350007,1140177722,4074052095,668550556,3214352940,367459370,261225585,2610173221,4209349473,3468074219,3265815641,314222801,3066103646,3808782860,282218597,3406013506,3773591054,379116347,1285071038,846784868,2669647154,3771962079,3550491691,2305946142,453669953,1268987020,3317592352,3279303384,3744833421,2610507566,3859509063,266596637,3847019092,517658769,3462560207,3443424879,370717030,4247526661,2224018117,4143653529,4112773975,2788324899,2477274417,1456262402,2901442914,1517677493,1846949527,2295493580,3734397586,2176403920,1280348187,1908823572,3871786941,846861322,1172426758,3287448474,3383383037,1655181056,3139813346,901632758,1897031941,2986607138,3066810236,3447102507,1393639104,373351379,950779232,625454576,3124240540,4148612726,2007998917,544563296,2244738638,2330496472,2058025392,1291430526,424198748,50039436,29584100,3605783033,2429876329,2791104160,1057563949,3255363231,3075367218,3463963227,1469046755,985887462]];var c={pbox:[],sbox:[]};function h(m,g){let y=g>>24&255,x=g>>16&255,b=g>>8&255,_=g&255,w=m.sbox[0][y]+m.sbox[1][x];return w=w^m.sbox[2][b],w=w+m.sbox[3][_],w}function d(m,g,y){let x=g,b=y,_;for(let w=0;w<s;++w)x=x^m.pbox[w],b=h(m,x)^b,_=x,x=b,b=_;return _=x,x=b,b=_,b=b^m.pbox[s],x=x^m.pbox[s+1],{left:x,right:b}}function f(m,g,y){let x=g,b=y,_;for(let w=s+1;w>1;--w)x=x^m.pbox[w],b=h(m,x)^b,_=x,x=b,b=_;return _=x,x=b,b=_,b=b^m.pbox[1],x=x^m.pbox[0],{left:x,right:b}}function p(m,g,y){for(let S=0;S<4;S++){m.sbox[S]=[];for(let A=0;A<256;A++)m.sbox[S][A]=u[S][A]}let x=0;for(let S=0;S<s+2;S++)m.pbox[S]=l[S]^g[x],x++,x>=y&&(x=0);let b=0,_=0,w=0;for(let S=0;S<s+2;S+=2)w=d(m,b,_),b=w.left,_=w.right,m.pbox[S]=b,m.pbox[S+1]=_;for(let S=0;S<4;S++)for(let A=0;A<256;A+=2)w=d(m,b,_),b=w.left,_=w.right,m.sbox[S][A]=b,m.sbox[S][A+1]=_;return!0}var v=o.Blowfish=a.extend({_doReset:function(){if(this._keyPriorReset!==this._key){var m=this._keyPriorReset=this._key,g=m.words,y=m.sigBytes/4;p(c,g,y)}},encryptBlock:function(m,g){var y=d(c,m[g],m[g+1]);m[g]=y.left,m[g+1]=y.right},decryptBlock:function(m,g){var y=f(c,m[g],m[g+1]);m[g]=y.left,m[g+1]=y.right},blockSize:64/32,keySize:128/32,ivSize:64/32});i.Blowfish=a._createHelper(v)}(),r.Blowfish})}(U9)),U9.exports}(function(e,t){(function(r,i,n){e.exports=i(Kr(),d7(),lnt(),unt(),sm(),cnt(),lm(),J0e(),SF(),hnt(),$0e(),dnt(),fnt(),pnt(),CF(),vnt(),Pp(),Da(),mnt(),gnt(),ynt(),xnt(),bnt(),wnt(),_nt(),Ant(),Snt(),Cnt(),Ent(),Mnt(),Tnt(),Pnt(),Dnt(),Int(),Lnt())})(_r,function(r){return r})})(K0e);var knt=K0e.exports;const ha=D4(knt);var Rnt=Object.defineProperty,Ont=(e,t)=>{for(var r in t)Rnt(e,r,{get:t[r],enumerable:!0})},Bnt=()=>K1().toString(),Nnt=Bnt,IS={};Ont(IS,{decryptData:()=>tve,decryptUrlParam:()=>Fnt,encryptData:()=>eve,encryptUrlParam:()=>Vnt});function Vnt(e={},t="base64"){const r=K1().replace(/-/g,"").toUpperCase();return eve(e,r,t)+r}function eve(e={},t,r="base64"){typeof e!="string"&&(e=JSON.stringify(e));const i=ha.enc.Utf8.parse(t),n=ha.AES.encrypt(e,i,{mode:ha.mode.ECB,algorithm:ha.algo.AES,padding:ha.pad.Pkcs7,formatter:ha.format.Hex}).ciphertext;return r==="base64"?encodeURIComponent(ha.enc.Base64.stringify(n)):ha.enc.Hex.stringify(n).toUpperCase()}function Fnt(e,t="base64"){if(e){const r=e.slice(-32),i=e.slice(0,e.length-32);return tve(i,r,t)}else return""}function tve(e,t,r="base64"){let i;r==="base64"?i=ha.enc.Base64.parse(e):i=ha.enc.Hex.parse(e);const n=ha.enc.Utf8.parse(t);return ha.AES.decrypt(ha.lib.CipherParams.create({ciphertext:i,key:n,algorithm:ha.algo.AES,padding:ha.pad.Pkcs7,formatter:ha.format.Hex}),n,{mode:ha.mode.ECB}).toString(ha.enc.Utf8)}var Su={},f7={};f7.byteLength=Unt;f7.toByteArray=jnt;f7.fromByteArray=Ynt;var Cc=[],pl=[],znt=typeof Uint8Array<"u"?Uint8Array:Array,G9="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(var Gm=0,Hnt=G9.length;Gm<Hnt;++Gm)Cc[Gm]=G9[Gm],pl[G9.charCodeAt(Gm)]=Gm;pl[45]=62;pl[95]=63;function rve(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var r=e.indexOf("=");r===-1&&(r=t);var i=r===t?0:4-r%4;return[r,i]}function Unt(e){var t=rve(e),r=t[0],i=t[1];return(r+i)*3/4-i}function Gnt(e,t,r){return(t+r)*3/4-r}function jnt(e){var t,r=rve(e),i=r[0],n=r[1],a=new znt(Gnt(e,i,n)),o=0,s=n>0?i-4:i,l;for(l=0;l<s;l+=4)t=pl[e.charCodeAt(l)]<<18|pl[e.charCodeAt(l+1)]<<12|pl[e.charCodeAt(l+2)]<<6|pl[e.charCodeAt(l+3)],a[o++]=t>>16&255,a[o++]=t>>8&255,a[o++]=t&255;return n===2&&(t=pl[e.charCodeAt(l)]<<2|pl[e.charCodeAt(l+1)]>>4,a[o++]=t&255),n===1&&(t=pl[e.charCodeAt(l)]<<10|pl[e.charCodeAt(l+1)]<<4|pl[e.charCodeAt(l+2)]>>2,a[o++]=t>>8&255,a[o++]=t&255),a}function Wnt(e){return Cc[e>>18&63]+Cc[e>>12&63]+Cc[e>>6&63]+Cc[e&63]}function qnt(e,t,r){for(var i,n=[],a=t;a<r;a+=3)i=(e[a]<<16&16711680)+(e[a+1]<<8&65280)+(e[a+2]&255),n.push(Wnt(i));return n.join("")}function Ynt(e){for(var t,r=e.length,i=r%3,n=[],a=16383,o=0,s=r-i;o<s;o+=a)n.push(qnt(e,o,o+a>s?s:o+a));return i===1?(t=e[r-1],n.push(Cc[t>>2]+Cc[t<<4&63]+"==")):i===2&&(t=(e[r-2]<<8)+e[r-1],n.push(Cc[t>>10]+Cc[t>>4&63]+Cc[t<<2&63]+"=")),n.join("")}var EF={};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */EF.read=function(e,t,r,i,n){var a,o,s=n*8-i-1,l=(1<<s)-1,u=l>>1,c=-7,h=r?n-1:0,d=r?-1:1,f=e[t+h];for(h+=d,a=f&(1<<-c)-1,f>>=-c,c+=s;c>0;a=a*256+e[t+h],h+=d,c-=8);for(o=a&(1<<-c)-1,a>>=-c,c+=i;c>0;o=o*256+e[t+h],h+=d,c-=8);if(a===0)a=1-u;else{if(a===l)return o?NaN:(f?-1:1)*(1/0);o=o+Math.pow(2,i),a=a-u}return(f?-1:1)*o*Math.pow(2,a-i)};EF.write=function(e,t,r,i,n,a){var o,s,l,u=a*8-n-1,c=(1<<u)-1,h=c>>1,d=n===23?Math.pow(2,-24)-Math.pow(2,-77):0,f=i?0:a-1,p=i?1:-1,v=t<0||t===0&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(s=isNaN(t)?1:0,o=c):(o=Math.floor(Math.log(t)/Math.LN2),t*(l=Math.pow(2,-o))<1&&(o--,l*=2),o+h>=1?t+=d/l:t+=d*Math.pow(2,1-h),t*l>=2&&(o++,l/=2),o+h>=c?(s=0,o=c):o+h>=1?(s=(t*l-1)*Math.pow(2,n),o=o+h):(s=t*Math.pow(2,h-1)*Math.pow(2,n),o=0));n>=8;e[r+f]=s&255,f+=p,s/=256,n-=8);for(o=o<<n|s,u+=n;u>0;e[r+f]=o&255,f+=p,o/=256,u-=8);e[r+f-p]|=v*128};/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */(function(e){const t=f7,r=EF,i=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;e.Buffer=s,e.SlowBuffer=y,e.INSPECT_MAX_BYTES=50;const n=2147483647;e.kMaxLength=n,s.TYPED_ARRAY_SUPPORT=a(),!s.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function a(){try{const W=new Uint8Array(1),V={foo:function(){return 42}};return Object.setPrototypeOf(V,Uint8Array.prototype),Object.setPrototypeOf(W,V),W.foo()===42}catch{return!1}}Object.defineProperty(s.prototype,"parent",{enumerable:!0,get:function(){if(s.isBuffer(this))return this.buffer}}),Object.defineProperty(s.prototype,"offset",{enumerable:!0,get:function(){if(s.isBuffer(this))return this.byteOffset}});function o(W){if(W>n)throw new RangeError('The value "'+W+'" is invalid for option "size"');const V=new Uint8Array(W);return Object.setPrototypeOf(V,s.prototype),V}function s(W,V,z){if(typeof W=="number"){if(typeof V=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return h(W)}return l(W,V,z)}s.poolSize=8192;function l(W,V,z){if(typeof W=="string")return d(W,V);if(ArrayBuffer.isView(W))return p(W);if(W==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof W);if(ee(W,ArrayBuffer)||W&&ee(W.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(ee(W,SharedArrayBuffer)||W&&ee(W.buffer,SharedArrayBuffer)))return v(W,V,z);if(typeof W=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');const X=W.valueOf&&W.valueOf();if(X!=null&&X!==W)return s.from(X,V,z);const de=m(W);if(de)return de;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof W[Symbol.toPrimitive]=="function")return s.from(W[Symbol.toPrimitive]("string"),V,z);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof W)}s.from=function(W,V,z){return l(W,V,z)},Object.setPrototypeOf(s.prototype,Uint8Array.prototype),Object.setPrototypeOf(s,Uint8Array);function u(W){if(typeof W!="number")throw new TypeError('"size" argument must be of type number');if(W<0)throw new RangeError('The value "'+W+'" is invalid for option "size"')}function c(W,V,z){return u(W),W<=0?o(W):V!==void 0?typeof z=="string"?o(W).fill(V,z):o(W).fill(V):o(W)}s.alloc=function(W,V,z){return c(W,V,z)};function h(W){return u(W),o(W<0?0:g(W)|0)}s.allocUnsafe=function(W){return h(W)},s.allocUnsafeSlow=function(W){return h(W)};function d(W,V){if((typeof V!="string"||V==="")&&(V="utf8"),!s.isEncoding(V))throw new TypeError("Unknown encoding: "+V);const z=x(W,V)|0;let X=o(z);const de=X.write(W,V);return de!==z&&(X=X.slice(0,de)),X}function f(W){const V=W.length<0?0:g(W.length)|0,z=o(V);for(let X=0;X<V;X+=1)z[X]=W[X]&255;return z}function p(W){if(ee(W,Uint8Array)){const V=new Uint8Array(W);return v(V.buffer,V.byteOffset,V.byteLength)}return f(W)}function v(W,V,z){if(V<0||W.byteLength<V)throw new RangeError('"offset" is outside of buffer bounds');if(W.byteLength<V+(z||0))throw new RangeError('"length" is outside of buffer bounds');let X;return V===void 0&&z===void 0?X=new Uint8Array(W):z===void 0?X=new Uint8Array(W,V):X=new Uint8Array(W,V,z),Object.setPrototypeOf(X,s.prototype),X}function m(W){if(s.isBuffer(W)){const V=g(W.length)|0,z=o(V);return z.length===0||W.copy(z,0,0,V),z}if(W.length!==void 0)return typeof W.length!="number"||K(W.length)?o(0):f(W);if(W.type==="Buffer"&&Array.isArray(W.data))return f(W.data)}function g(W){if(W>=n)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+n.toString(16)+" bytes");return W|0}function y(W){return+W!=W&&(W=0),s.alloc(+W)}s.isBuffer=function(V){return V!=null&&V._isBuffer===!0&&V!==s.prototype},s.compare=function(V,z){if(ee(V,Uint8Array)&&(V=s.from(V,V.offset,V.byteLength)),ee(z,Uint8Array)&&(z=s.from(z,z.offset,z.byteLength)),!s.isBuffer(V)||!s.isBuffer(z))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(V===z)return 0;let X=V.length,de=z.length;for(let pe=0,we=Math.min(X,de);pe<we;++pe)if(V[pe]!==z[pe]){X=V[pe],de=z[pe];break}return X<de?-1:de<X?1:0},s.isEncoding=function(V){switch(String(V).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},s.concat=function(V,z){if(!Array.isArray(V))throw new TypeError('"list" argument must be an Array of Buffers');if(V.length===0)return s.alloc(0);let X;if(z===void 0)for(z=0,X=0;X<V.length;++X)z+=V[X].length;const de=s.allocUnsafe(z);let pe=0;for(X=0;X<V.length;++X){let we=V[X];if(ee(we,Uint8Array))pe+we.length>de.length?(s.isBuffer(we)||(we=s.from(we)),we.copy(de,pe)):Uint8Array.prototype.set.call(de,we,pe);else if(s.isBuffer(we))we.copy(de,pe);else throw new TypeError('"list" argument must be an Array of Buffers');pe+=we.length}return de};function x(W,V){if(s.isBuffer(W))return W.length;if(ArrayBuffer.isView(W)||ee(W,ArrayBuffer))return W.byteLength;if(typeof W!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof W);const z=W.length,X=arguments.length>2&&arguments[2]===!0;if(!X&&z===0)return 0;let de=!1;for(;;)switch(V){case"ascii":case"latin1":case"binary":return z;case"utf8":case"utf-8":return xe(W).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return z*2;case"hex":return z>>>1;case"base64":return Pe(W).length;default:if(de)return X?-1:xe(W).length;V=(""+V).toLowerCase(),de=!0}}s.byteLength=x;function b(W,V,z){let X=!1;if((V===void 0||V<0)&&(V=0),V>this.length||((z===void 0||z>this.length)&&(z=this.length),z<=0)||(z>>>=0,V>>>=0,z<=V))return"";for(W||(W="utf8");;)switch(W){case"hex":return H(this,V,z);case"utf8":case"utf-8":return C(this,V,z);case"ascii":return O(this,V,z);case"latin1":case"binary":return R(this,V,z);case"base64":return P(this,V,z);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return j(this,V,z);default:if(X)throw new TypeError("Unknown encoding: "+W);W=(W+"").toLowerCase(),X=!0}}s.prototype._isBuffer=!0;function _(W,V,z){const X=W[V];W[V]=W[z],W[z]=X}s.prototype.swap16=function(){const V=this.length;if(V%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let z=0;z<V;z+=2)_(this,z,z+1);return this},s.prototype.swap32=function(){const V=this.length;if(V%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let z=0;z<V;z+=4)_(this,z,z+3),_(this,z+1,z+2);return this},s.prototype.swap64=function(){const V=this.length;if(V%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let z=0;z<V;z+=8)_(this,z,z+7),_(this,z+1,z+6),_(this,z+2,z+5),_(this,z+3,z+4);return this},s.prototype.toString=function(){const V=this.length;return V===0?"":arguments.length===0?C(this,0,V):b.apply(this,arguments)},s.prototype.toLocaleString=s.prototype.toString,s.prototype.equals=function(V){if(!s.isBuffer(V))throw new TypeError("Argument must be a Buffer");return this===V?!0:s.compare(this,V)===0},s.prototype.inspect=function(){let V="";const z=e.INSPECT_MAX_BYTES;return V=this.toString("hex",0,z).replace(/(.{2})/g,"$1 ").trim(),this.length>z&&(V+=" ... "),"<Buffer "+V+">"},i&&(s.prototype[i]=s.prototype.inspect),s.prototype.compare=function(V,z,X,de,pe){if(ee(V,Uint8Array)&&(V=s.from(V,V.offset,V.byteLength)),!s.isBuffer(V))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof V);if(z===void 0&&(z=0),X===void 0&&(X=V?V.length:0),de===void 0&&(de=0),pe===void 0&&(pe=this.length),z<0||X>V.length||de<0||pe>this.length)throw new RangeError("out of range index");if(de>=pe&&z>=X)return 0;if(de>=pe)return-1;if(z>=X)return 1;if(z>>>=0,X>>>=0,de>>>=0,pe>>>=0,this===V)return 0;let we=pe-de,Je=X-z;const Qe=Math.min(we,Je),Ye=this.slice(de,pe),gt=V.slice(z,X);for(let ct=0;ct<Qe;++ct)if(Ye[ct]!==gt[ct]){we=Ye[ct],Je=gt[ct];break}return we<Je?-1:Je<we?1:0};function w(W,V,z,X,de){if(W.length===0)return-1;if(typeof z=="string"?(X=z,z=0):z>2147483647?z=2147483647:z<-2147483648&&(z=-2147483648),z=+z,K(z)&&(z=de?0:W.length-1),z<0&&(z=W.length+z),z>=W.length){if(de)return-1;z=W.length-1}else if(z<0)if(de)z=0;else return-1;if(typeof V=="string"&&(V=s.from(V,X)),s.isBuffer(V))return V.length===0?-1:S(W,V,z,X,de);if(typeof V=="number")return V=V&255,typeof Uint8Array.prototype.indexOf=="function"?de?Uint8Array.prototype.indexOf.call(W,V,z):Uint8Array.prototype.lastIndexOf.call(W,V,z):S(W,[V],z,X,de);throw new TypeError("val must be string, number or Buffer")}function S(W,V,z,X,de){let pe=1,we=W.length,Je=V.length;if(X!==void 0&&(X=String(X).toLowerCase(),X==="ucs2"||X==="ucs-2"||X==="utf16le"||X==="utf-16le")){if(W.length<2||V.length<2)return-1;pe=2,we/=2,Je/=2,z/=2}function Qe(gt,ct){return pe===1?gt[ct]:gt.readUInt16BE(ct*pe)}let Ye;if(de){let gt=-1;for(Ye=z;Ye<we;Ye++)if(Qe(W,Ye)===Qe(V,gt===-1?0:Ye-gt)){if(gt===-1&&(gt=Ye),Ye-gt+1===Je)return gt*pe}else gt!==-1&&(Ye-=Ye-gt),gt=-1}else for(z+Je>we&&(z=we-Je),Ye=z;Ye>=0;Ye--){let gt=!0;for(let ct=0;ct<Je;ct++)if(Qe(W,Ye+ct)!==Qe(V,ct)){gt=!1;break}if(gt)return Ye}return-1}s.prototype.includes=function(V,z,X){return this.indexOf(V,z,X)!==-1},s.prototype.indexOf=function(V,z,X){return w(this,V,z,X,!0)},s.prototype.lastIndexOf=function(V,z,X){return w(this,V,z,X,!1)};function A(W,V,z,X){z=Number(z)||0;const de=W.length-z;X?(X=Number(X),X>de&&(X=de)):X=de;const pe=V.length;X>pe/2&&(X=pe/2);let we;for(we=0;we<X;++we){const Je=parseInt(V.substr(we*2,2),16);if(K(Je))return we;W[z+we]=Je}return we}function M(W,V,z,X){return Ce(xe(V,W.length-z),W,z,X)}function E(W,V,z,X){return Ce(ye(V),W,z,X)}function T(W,V,z,X){return Ce(Pe(V),W,z,X)}function L(W,V,z,X){return Ce(Se(V,W.length-z),W,z,X)}s.prototype.write=function(V,z,X,de){if(z===void 0)de="utf8",X=this.length,z=0;else if(X===void 0&&typeof z=="string")de=z,X=this.length,z=0;else if(isFinite(z))z=z>>>0,isFinite(X)?(X=X>>>0,de===void 0&&(de="utf8")):(de=X,X=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");const pe=this.length-z;if((X===void 0||X>pe)&&(X=pe),V.length>0&&(X<0||z<0)||z>this.length)throw new RangeError("Attempt to write outside buffer bounds");de||(de="utf8");let we=!1;for(;;)switch(de){case"hex":return A(this,V,z,X);case"utf8":case"utf-8":return M(this,V,z,X);case"ascii":case"latin1":case"binary":return E(this,V,z,X);case"base64":return T(this,V,z,X);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return L(this,V,z,X);default:if(we)throw new TypeError("Unknown encoding: "+de);de=(""+de).toLowerCase(),we=!0}},s.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function P(W,V,z){return V===0&&z===W.length?t.fromByteArray(W):t.fromByteArray(W.slice(V,z))}function C(W,V,z){z=Math.min(W.length,z);const X=[];let de=V;for(;de<z;){const pe=W[de];let we=null,Je=pe>239?4:pe>223?3:pe>191?2:1;if(de+Je<=z){let Qe,Ye,gt,ct;switch(Je){case 1:pe<128&&(we=pe);break;case 2:Qe=W[de+1],(Qe&192)===128&&(ct=(pe&31)<<6|Qe&63,ct>127&&(we=ct));break;case 3:Qe=W[de+1],Ye=W[de+2],(Qe&192)===128&&(Ye&192)===128&&(ct=(pe&15)<<12|(Qe&63)<<6|Ye&63,ct>2047&&(ct<55296||ct>57343)&&(we=ct));break;case 4:Qe=W[de+1],Ye=W[de+2],gt=W[de+3],(Qe&192)===128&&(Ye&192)===128&&(gt&192)===128&&(ct=(pe&15)<<18|(Qe&63)<<12|(Ye&63)<<6|gt&63,ct>65535&&ct<1114112&&(we=ct))}}we===null?(we=65533,Je=1):we>65535&&(we-=65536,X.push(we>>>10&1023|55296),we=56320|we&1023),X.push(we),de+=Je}return I(X)}const D=4096;function I(W){const V=W.length;if(V<=D)return String.fromCharCode.apply(String,W);let z="",X=0;for(;X<V;)z+=String.fromCharCode.apply(String,W.slice(X,X+=D));return z}function O(W,V,z){let X="";z=Math.min(W.length,z);for(let de=V;de<z;++de)X+=String.fromCharCode(W[de]&127);return X}function R(W,V,z){let X="";z=Math.min(W.length,z);for(let de=V;de<z;++de)X+=String.fromCharCode(W[de]);return X}function H(W,V,z){const X=W.length;(!V||V<0)&&(V=0),(!z||z<0||z>X)&&(z=X);let de="";for(let pe=V;pe<z;++pe)de+=ve[W[pe]];return de}function j(W,V,z){const X=W.slice(V,z);let de="";for(let pe=0;pe<X.length-1;pe+=2)de+=String.fromCharCode(X[pe]+X[pe+1]*256);return de}s.prototype.slice=function(V,z){const X=this.length;V=~~V,z=z===void 0?X:~~z,V<0?(V+=X,V<0&&(V=0)):V>X&&(V=X),z<0?(z+=X,z<0&&(z=0)):z>X&&(z=X),z<V&&(z=V);const de=this.subarray(V,z);return Object.setPrototypeOf(de,s.prototype),de};function N(W,V,z){if(W%1!==0||W<0)throw new RangeError("offset is not uint");if(W+V>z)throw new RangeError("Trying to access beyond buffer length")}s.prototype.readUintLE=s.prototype.readUIntLE=function(V,z,X){V=V>>>0,z=z>>>0,X||N(V,z,this.length);let de=this[V],pe=1,we=0;for(;++we<z&&(pe*=256);)de+=this[V+we]*pe;return de},s.prototype.readUintBE=s.prototype.readUIntBE=function(V,z,X){V=V>>>0,z=z>>>0,X||N(V,z,this.length);let de=this[V+--z],pe=1;for(;z>0&&(pe*=256);)de+=this[V+--z]*pe;return de},s.prototype.readUint8=s.prototype.readUInt8=function(V,z){return V=V>>>0,z||N(V,1,this.length),this[V]},s.prototype.readUint16LE=s.prototype.readUInt16LE=function(V,z){return V=V>>>0,z||N(V,2,this.length),this[V]|this[V+1]<<8},s.prototype.readUint16BE=s.prototype.readUInt16BE=function(V,z){return V=V>>>0,z||N(V,2,this.length),this[V]<<8|this[V+1]},s.prototype.readUint32LE=s.prototype.readUInt32LE=function(V,z){return V=V>>>0,z||N(V,4,this.length),(this[V]|this[V+1]<<8|this[V+2]<<16)+this[V+3]*16777216},s.prototype.readUint32BE=s.prototype.readUInt32BE=function(V,z){return V=V>>>0,z||N(V,4,this.length),this[V]*16777216+(this[V+1]<<16|this[V+2]<<8|this[V+3])},s.prototype.readBigUInt64LE=Me(function(V){V=V>>>0,J(V,"offset");const z=this[V],X=this[V+7];(z===void 0||X===void 0)&&te(V,this.length-8);const de=z+this[++V]*2**8+this[++V]*2**16+this[++V]*2**24,pe=this[++V]+this[++V]*2**8+this[++V]*2**16+X*2**24;return BigInt(de)+(BigInt(pe)<<BigInt(32))}),s.prototype.readBigUInt64BE=Me(function(V){V=V>>>0,J(V,"offset");const z=this[V],X=this[V+7];(z===void 0||X===void 0)&&te(V,this.length-8);const de=z*2**24+this[++V]*2**16+this[++V]*2**8+this[++V],pe=this[++V]*2**24+this[++V]*2**16+this[++V]*2**8+X;return(BigInt(de)<<BigInt(32))+BigInt(pe)}),s.prototype.readIntLE=function(V,z,X){V=V>>>0,z=z>>>0,X||N(V,z,this.length);let de=this[V],pe=1,we=0;for(;++we<z&&(pe*=256);)de+=this[V+we]*pe;return pe*=128,de>=pe&&(de-=Math.pow(2,8*z)),de},s.prototype.readIntBE=function(V,z,X){V=V>>>0,z=z>>>0,X||N(V,z,this.length);let de=z,pe=1,we=this[V+--de];for(;de>0&&(pe*=256);)we+=this[V+--de]*pe;return pe*=128,we>=pe&&(we-=Math.pow(2,8*z)),we},s.prototype.readInt8=function(V,z){return V=V>>>0,z||N(V,1,this.length),this[V]&128?(255-this[V]+1)*-1:this[V]},s.prototype.readInt16LE=function(V,z){V=V>>>0,z||N(V,2,this.length);const X=this[V]|this[V+1]<<8;return X&32768?X|4294901760:X},s.prototype.readInt16BE=function(V,z){V=V>>>0,z||N(V,2,this.length);const X=this[V+1]|this[V]<<8;return X&32768?X|4294901760:X},s.prototype.readInt32LE=function(V,z){return V=V>>>0,z||N(V,4,this.length),this[V]|this[V+1]<<8|this[V+2]<<16|this[V+3]<<24},s.prototype.readInt32BE=function(V,z){return V=V>>>0,z||N(V,4,this.length),this[V]<<24|this[V+1]<<16|this[V+2]<<8|this[V+3]},s.prototype.readBigInt64LE=Me(function(V){V=V>>>0,J(V,"offset");const z=this[V],X=this[V+7];(z===void 0||X===void 0)&&te(V,this.length-8);const de=this[V+4]+this[V+5]*2**8+this[V+6]*2**16+(X<<24);return(BigInt(de)<<BigInt(32))+BigInt(z+this[++V]*2**8+this[++V]*2**16+this[++V]*2**24)}),s.prototype.readBigInt64BE=Me(function(V){V=V>>>0,J(V,"offset");const z=this[V],X=this[V+7];(z===void 0||X===void 0)&&te(V,this.length-8);const de=(z<<24)+this[++V]*2**16+this[++V]*2**8+this[++V];return(BigInt(de)<<BigInt(32))+BigInt(this[++V]*2**24+this[++V]*2**16+this[++V]*2**8+X)}),s.prototype.readFloatLE=function(V,z){return V=V>>>0,z||N(V,4,this.length),r.read(this,V,!0,23,4)},s.prototype.readFloatBE=function(V,z){return V=V>>>0,z||N(V,4,this.length),r.read(this,V,!1,23,4)},s.prototype.readDoubleLE=function(V,z){return V=V>>>0,z||N(V,8,this.length),r.read(this,V,!0,52,8)},s.prototype.readDoubleBE=function(V,z){return V=V>>>0,z||N(V,8,this.length),r.read(this,V,!1,52,8)};function k(W,V,z,X,de,pe){if(!s.isBuffer(W))throw new TypeError('"buffer" argument must be a Buffer instance');if(V>de||V<pe)throw new RangeError('"value" argument is out of bounds');if(z+X>W.length)throw new RangeError("Index out of range")}s.prototype.writeUintLE=s.prototype.writeUIntLE=function(V,z,X,de){if(V=+V,z=z>>>0,X=X>>>0,!de){const Je=Math.pow(2,8*X)-1;k(this,V,z,X,Je,0)}let pe=1,we=0;for(this[z]=V&255;++we<X&&(pe*=256);)this[z+we]=V/pe&255;return z+X},s.prototype.writeUintBE=s.prototype.writeUIntBE=function(V,z,X,de){if(V=+V,z=z>>>0,X=X>>>0,!de){const Je=Math.pow(2,8*X)-1;k(this,V,z,X,Je,0)}let pe=X-1,we=1;for(this[z+pe]=V&255;--pe>=0&&(we*=256);)this[z+pe]=V/we&255;return z+X},s.prototype.writeUint8=s.prototype.writeUInt8=function(V,z,X){return V=+V,z=z>>>0,X||k(this,V,z,1,255,0),this[z]=V&255,z+1},s.prototype.writeUint16LE=s.prototype.writeUInt16LE=function(V,z,X){return V=+V,z=z>>>0,X||k(this,V,z,2,65535,0),this[z]=V&255,this[z+1]=V>>>8,z+2},s.prototype.writeUint16BE=s.prototype.writeUInt16BE=function(V,z,X){return V=+V,z=z>>>0,X||k(this,V,z,2,65535,0),this[z]=V>>>8,this[z+1]=V&255,z+2},s.prototype.writeUint32LE=s.prototype.writeUInt32LE=function(V,z,X){return V=+V,z=z>>>0,X||k(this,V,z,4,4294967295,0),this[z+3]=V>>>24,this[z+2]=V>>>16,this[z+1]=V>>>8,this[z]=V&255,z+4},s.prototype.writeUint32BE=s.prototype.writeUInt32BE=function(V,z,X){return V=+V,z=z>>>0,X||k(this,V,z,4,4294967295,0),this[z]=V>>>24,this[z+1]=V>>>16,this[z+2]=V>>>8,this[z+3]=V&255,z+4};function G(W,V,z,X,de){fe(V,X,de,W,z,7);let pe=Number(V&BigInt(4294967295));W[z++]=pe,pe=pe>>8,W[z++]=pe,pe=pe>>8,W[z++]=pe,pe=pe>>8,W[z++]=pe;let we=Number(V>>BigInt(32)&BigInt(4294967295));return W[z++]=we,we=we>>8,W[z++]=we,we=we>>8,W[z++]=we,we=we>>8,W[z++]=we,z}function Y(W,V,z,X,de){fe(V,X,de,W,z,7);let pe=Number(V&BigInt(4294967295));W[z+7]=pe,pe=pe>>8,W[z+6]=pe,pe=pe>>8,W[z+5]=pe,pe=pe>>8,W[z+4]=pe;let we=Number(V>>BigInt(32)&BigInt(4294967295));return W[z+3]=we,we=we>>8,W[z+2]=we,we=we>>8,W[z+1]=we,we=we>>8,W[z]=we,z+8}s.prototype.writeBigUInt64LE=Me(function(V,z=0){return G(this,V,z,BigInt(0),BigInt("0xffffffffffffffff"))}),s.prototype.writeBigUInt64BE=Me(function(V,z=0){return Y(this,V,z,BigInt(0),BigInt("0xffffffffffffffff"))}),s.prototype.writeIntLE=function(V,z,X,de){if(V=+V,z=z>>>0,!de){const Qe=Math.pow(2,8*X-1);k(this,V,z,X,Qe-1,-Qe)}let pe=0,we=1,Je=0;for(this[z]=V&255;++pe<X&&(we*=256);)V<0&&Je===0&&this[z+pe-1]!==0&&(Je=1),this[z+pe]=(V/we>>0)-Je&255;return z+X},s.prototype.writeIntBE=function(V,z,X,de){if(V=+V,z=z>>>0,!de){const Qe=Math.pow(2,8*X-1);k(this,V,z,X,Qe-1,-Qe)}let pe=X-1,we=1,Je=0;for(this[z+pe]=V&255;--pe>=0&&(we*=256);)V<0&&Je===0&&this[z+pe+1]!==0&&(Je=1),this[z+pe]=(V/we>>0)-Je&255;return z+X},s.prototype.writeInt8=function(V,z,X){return V=+V,z=z>>>0,X||k(this,V,z,1,127,-128),V<0&&(V=255+V+1),this[z]=V&255,z+1},s.prototype.writeInt16LE=function(V,z,X){return V=+V,z=z>>>0,X||k(this,V,z,2,32767,-32768),this[z]=V&255,this[z+1]=V>>>8,z+2},s.prototype.writeInt16BE=function(V,z,X){return V=+V,z=z>>>0,X||k(this,V,z,2,32767,-32768),this[z]=V>>>8,this[z+1]=V&255,z+2},s.prototype.writeInt32LE=function(V,z,X){return V=+V,z=z>>>0,X||k(this,V,z,4,2147483647,-2147483648),this[z]=V&255,this[z+1]=V>>>8,this[z+2]=V>>>16,this[z+3]=V>>>24,z+4},s.prototype.writeInt32BE=function(V,z,X){return V=+V,z=z>>>0,X||k(this,V,z,4,2147483647,-2147483648),V<0&&(V=4294967295+V+1),this[z]=V>>>24,this[z+1]=V>>>16,this[z+2]=V>>>8,this[z+3]=V&255,z+4},s.prototype.writeBigInt64LE=Me(function(V,z=0){return G(this,V,z,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),s.prototype.writeBigInt64BE=Me(function(V,z=0){return Y(this,V,z,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function F(W,V,z,X,de,pe){if(z+X>W.length)throw new RangeError("Index out of range");if(z<0)throw new RangeError("Index out of range")}function Z(W,V,z,X,de){return V=+V,z=z>>>0,de||F(W,V,z,4),r.write(W,V,z,X,23,4),z+4}s.prototype.writeFloatLE=function(V,z,X){return Z(this,V,z,!0,X)},s.prototype.writeFloatBE=function(V,z,X){return Z(this,V,z,!1,X)};function ne(W,V,z,X,de){return V=+V,z=z>>>0,de||F(W,V,z,8),r.write(W,V,z,X,52,8),z+8}s.prototype.writeDoubleLE=function(V,z,X){return ne(this,V,z,!0,X)},s.prototype.writeDoubleBE=function(V,z,X){return ne(this,V,z,!1,X)},s.prototype.copy=function(V,z,X,de){if(!s.isBuffer(V))throw new TypeError("argument should be a Buffer");if(X||(X=0),!de&&de!==0&&(de=this.length),z>=V.length&&(z=V.length),z||(z=0),de>0&&de<X&&(de=X),de===X||V.length===0||this.length===0)return 0;if(z<0)throw new RangeError("targetStart out of bounds");if(X<0||X>=this.length)throw new RangeError("Index out of range");if(de<0)throw new RangeError("sourceEnd out of bounds");de>this.length&&(de=this.length),V.length-z<de-X&&(de=V.length-z+X);const pe=de-X;return this===V&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(z,X,de):Uint8Array.prototype.set.call(V,this.subarray(X,de),z),pe},s.prototype.fill=function(V,z,X,de){if(typeof V=="string"){if(typeof z=="string"?(de=z,z=0,X=this.length):typeof X=="string"&&(de=X,X=this.length),de!==void 0&&typeof de!="string")throw new TypeError("encoding must be a string");if(typeof de=="string"&&!s.isEncoding(de))throw new TypeError("Unknown encoding: "+de);if(V.length===1){const we=V.charCodeAt(0);(de==="utf8"&&we<128||de==="latin1")&&(V=we)}}else typeof V=="number"?V=V&255:typeof V=="boolean"&&(V=Number(V));if(z<0||this.length<z||this.length<X)throw new RangeError("Out of range index");if(X<=z)return this;z=z>>>0,X=X===void 0?this.length:X>>>0,V||(V=0);let pe;if(typeof V=="number")for(pe=z;pe<X;++pe)this[pe]=V;else{const we=s.isBuffer(V)?V:s.from(V,de),Je=we.length;if(Je===0)throw new TypeError('The value "'+V+'" is invalid for argument "value"');for(pe=0;pe<X-z;++pe)this[pe+z]=we[pe%Je]}return this};const re={};function ae(W,V,z){re[W]=class extends z{constructor(){super(),Object.defineProperty(this,"message",{value:V.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${W}]`,this.stack,delete this.name}get code(){return W}set code(de){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:de,writable:!0})}toString(){return`${this.name} [${W}]: ${this.message}`}}}ae("ERR_BUFFER_OUT_OF_BOUNDS",function(W){return W?`${W} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),ae("ERR_INVALID_ARG_TYPE",function(W,V){return`The "${W}" argument must be of type number. Received type ${typeof V}`},TypeError),ae("ERR_OUT_OF_RANGE",function(W,V,z){let X=`The value of "${W}" is out of range.`,de=z;return Number.isInteger(z)&&Math.abs(z)>2**32?de=he(String(z)):typeof z=="bigint"&&(de=String(z),(z>BigInt(2)**BigInt(32)||z<-(BigInt(2)**BigInt(32)))&&(de=he(de)),de+="n"),X+=` It must be ${V}. Received ${de}`,X},RangeError);function he(W){let V="",z=W.length;const X=W[0]==="-"?1:0;for(;z>=X+4;z-=3)V=`_${W.slice(z-3,z)}${V}`;return`${W.slice(0,z)}${V}`}function se(W,V,z){J(V,"offset"),(W[V]===void 0||W[V+z]===void 0)&&te(V,W.length-(z+1))}function fe(W,V,z,X,de,pe){if(W>z||W<V){const we=typeof V=="bigint"?"n":"";let Je;throw V===0||V===BigInt(0)?Je=`>= 0${we} and < 2${we} ** ${(pe+1)*8}${we}`:Je=`>= -(2${we} ** ${(pe+1)*8-1}${we}) and < 2 ** ${(pe+1)*8-1}${we}`,new re.ERR_OUT_OF_RANGE("value",Je,W)}se(X,de,pe)}function J(W,V){if(typeof W!="number")throw new re.ERR_INVALID_ARG_TYPE(V,"number",W)}function te(W,V,z){throw Math.floor(W)!==W?(J(W,z),new re.ERR_OUT_OF_RANGE("offset","an integer",W)):V<0?new re.ERR_BUFFER_OUT_OF_BOUNDS:new re.ERR_OUT_OF_RANGE("offset",`>= 0 and <= ${V}`,W)}const le=/[^+/0-9A-Za-z-_]/g;function Ae(W){if(W=W.split("=")[0],W=W.trim().replace(le,""),W.length<2)return"";for(;W.length%4!==0;)W=W+"=";return W}function xe(W,V){V=V||1/0;let z;const X=W.length;let de=null;const pe=[];for(let we=0;we<X;++we){if(z=W.charCodeAt(we),z>55295&&z<57344){if(!de){if(z>56319){(V-=3)>-1&&pe.push(239,191,189);continue}else if(we+1===X){(V-=3)>-1&&pe.push(239,191,189);continue}de=z;continue}if(z<56320){(V-=3)>-1&&pe.push(239,191,189),de=z;continue}z=(de-55296<<10|z-56320)+65536}else de&&(V-=3)>-1&&pe.push(239,191,189);if(de=null,z<128){if((V-=1)<0)break;pe.push(z)}else if(z<2048){if((V-=2)<0)break;pe.push(z>>6|192,z&63|128)}else if(z<65536){if((V-=3)<0)break;pe.push(z>>12|224,z>>6&63|128,z&63|128)}else if(z<1114112){if((V-=4)<0)break;pe.push(z>>18|240,z>>12&63|128,z>>6&63|128,z&63|128)}else throw new Error("Invalid code point")}return pe}function ye(W){const V=[];for(let z=0;z<W.length;++z)V.push(W.charCodeAt(z)&255);return V}function Se(W,V){let z,X,de;const pe=[];for(let we=0;we<W.length&&!((V-=2)<0);++we)z=W.charCodeAt(we),X=z>>8,de=z%256,pe.push(de),pe.push(X);return pe}function Pe(W){return t.toByteArray(Ae(W))}function Ce(W,V,z,X){let de;for(de=0;de<X&&!(de+z>=V.length||de>=W.length);++de)V[de+z]=W[de];return de}function ee(W,V){return W instanceof V||W!=null&&W.constructor!=null&&W.constructor.name!=null&&W.constructor.name===V.name}function K(W){return W!==W}const ve=function(){const W="0123456789abcdef",V=new Array(256);for(let z=0;z<16;++z){const X=z*16;for(let de=0;de<16;++de)V[X+de]=W[z]+W[de]}return V}();function Me(W){return typeof BigInt>"u"?Q:W}function Q(){throw new Error("BigInt not supported")}})(Su);var MF={exports:{}},m1=typeof Reflect=="object"?Reflect:null,nJ=m1&&typeof m1.apply=="function"?m1.apply:function(t,r,i){return Function.prototype.apply.call(t,r,i)},NA;m1&&typeof m1.ownKeys=="function"?NA=m1.ownKeys:Object.getOwnPropertySymbols?NA=function(t){return Object.getOwnPropertyNames(t).concat(Object.getOwnPropertySymbols(t))}:NA=function(t){return Object.getOwnPropertyNames(t)};function Xnt(e){console&&console.warn&&console.warn(e)}var ive=Number.isNaN||function(t){return t!==t};function Oi(){Oi.init.call(this)}MF.exports=Oi;MF.exports.once=Jnt;Oi.EventEmitter=Oi;Oi.prototype._events=void 0;Oi.prototype._eventsCount=0;Oi.prototype._maxListeners=void 0;var aJ=10;function p7(e){if(typeof e!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof e)}Object.defineProperty(Oi,"defaultMaxListeners",{enumerable:!0,get:function(){return aJ},set:function(e){if(typeof e!="number"||e<0||ive(e))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");aJ=e}});Oi.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0};Oi.prototype.setMaxListeners=function(t){if(typeof t!="number"||t<0||ive(t))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+t+".");return this._maxListeners=t,this};function nve(e){return e._maxListeners===void 0?Oi.defaultMaxListeners:e._maxListeners}Oi.prototype.getMaxListeners=function(){return nve(this)};Oi.prototype.emit=function(t){for(var r=[],i=1;i<arguments.length;i++)r.push(arguments[i]);var n=t==="error",a=this._events;if(a!==void 0)n=n&&a.error===void 0;else if(!n)return!1;if(n){var o;if(r.length>0&&(o=r[0]),o instanceof Error)throw o;var s=new Error("Unhandled error."+(o?" ("+o.message+")":""));throw s.context=o,s}var l=a[t];if(l===void 0)return!1;if(typeof l=="function")nJ(l,this,r);else for(var u=l.length,c=uve(l,u),i=0;i<u;++i)nJ(c[i],this,r);return!0};function ave(e,t,r,i){var n,a,o;if(p7(r),a=e._events,a===void 0?(a=e._events=Object.create(null),e._eventsCount=0):(a.newListener!==void 0&&(e.emit("newListener",t,r.listener?r.listener:r),a=e._events),o=a[t]),o===void 0)o=a[t]=r,++e._eventsCount;else if(typeof o=="function"?o=a[t]=i?[r,o]:[o,r]:i?o.unshift(r):o.push(r),n=nve(e),n>0&&o.length>n&&!o.warned){o.warned=!0;var s=new Error("Possible EventEmitter memory leak detected. "+o.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit");s.name="MaxListenersExceededWarning",s.emitter=e,s.type=t,s.count=o.length,Xnt(s)}return e}Oi.prototype.addListener=function(t,r){return ave(this,t,r,!1)};Oi.prototype.on=Oi.prototype.addListener;Oi.prototype.prependListener=function(t,r){return ave(this,t,r,!0)};function Znt(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function ove(e,t,r){var i={fired:!1,wrapFn:void 0,target:e,type:t,listener:r},n=Znt.bind(i);return n.listener=r,i.wrapFn=n,n}Oi.prototype.once=function(t,r){return p7(r),this.on(t,ove(this,t,r)),this};Oi.prototype.prependOnceListener=function(t,r){return p7(r),this.prependListener(t,ove(this,t,r)),this};Oi.prototype.removeListener=function(t,r){var i,n,a,o,s;if(p7(r),n=this._events,n===void 0)return this;if(i=n[t],i===void 0)return this;if(i===r||i.listener===r)--this._eventsCount===0?this._events=Object.create(null):(delete n[t],n.removeListener&&this.emit("removeListener",t,i.listener||r));else if(typeof i!="function"){for(a=-1,o=i.length-1;o>=0;o--)if(i[o]===r||i[o].listener===r){s=i[o].listener,a=o;break}if(a<0)return this;a===0?i.shift():Qnt(i,a),i.length===1&&(n[t]=i[0]),n.removeListener!==void 0&&this.emit("removeListener",t,s||r)}return this};Oi.prototype.off=Oi.prototype.removeListener;Oi.prototype.removeAllListeners=function(t){var r,i,n;if(i=this._events,i===void 0)return this;if(i.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):i[t]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete i[t]),this;if(arguments.length===0){var a=Object.keys(i),o;for(n=0;n<a.length;++n)o=a[n],o!=="removeListener"&&this.removeAllListeners(o);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(r=i[t],typeof r=="function")this.removeListener(t,r);else if(r!==void 0)for(n=r.length-1;n>=0;n--)this.removeListener(t,r[n]);return this};function sve(e,t,r){var i=e._events;if(i===void 0)return[];var n=i[t];return n===void 0?[]:typeof n=="function"?r?[n.listener||n]:[n]:r?Knt(n):uve(n,n.length)}Oi.prototype.listeners=function(t){return sve(this,t,!0)};Oi.prototype.rawListeners=function(t){return sve(this,t,!1)};Oi.listenerCount=function(e,t){return typeof e.listenerCount=="function"?e.listenerCount(t):lve.call(e,t)};Oi.prototype.listenerCount=lve;function lve(e){var t=this._events;if(t!==void 0){var r=t[e];if(typeof r=="function")return 1;if(r!==void 0)return r.length}return 0}Oi.prototype.eventNames=function(){return this._eventsCount>0?NA(this._events):[]};function uve(e,t){for(var r=new Array(t),i=0;i<t;++i)r[i]=e[i];return r}function Qnt(e,t){for(;t+1<e.length;t++)e[t]=e[t+1];e.pop()}function Knt(e){for(var t=new Array(e.length),r=0;r<t.length;++r)t[r]=e[r].listener||e[r];return t}function Jnt(e,t){return new Promise(function(r,i){function n(o){e.removeListener(t,a),i(o)}function a(){typeof e.removeListener=="function"&&e.removeListener("error",n),r([].slice.call(arguments))}cve(e,t,a,{once:!0}),t!=="error"&&$nt(e,n,{once:!0})})}function $nt(e,t,r){typeof e.on=="function"&&cve(e,"error",t,r)}function cve(e,t,r,i){if(typeof e.on=="function")i.once?e.once(t,r):e.on(t,r);else if(typeof e.addEventListener=="function")e.addEventListener(t,function n(a){i.once&&e.removeEventListener(t,n),r(a)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof e)}var eat=MF.exports,v7=Object.defineProperty,tat=Object.getOwnPropertyDescriptor,hve=Object.getOwnPropertyNames,LS=Object.getOwnPropertySymbols,TF=Object.prototype.hasOwnProperty,dve=Object.prototype.propertyIsEnumerable,oJ=(e,t,r)=>t in e?v7(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,j9=(e,t)=>{for(var r in t||(t={}))TF.call(t,r)&&oJ(e,r,t[r]);if(LS)for(var r of LS(t))dve.call(t,r)&&oJ(e,r,t[r]);return e},fve=(e,t)=>{var r={};for(var i in e)TF.call(e,i)&&t.indexOf(i)<0&&(r[i]=e[i]);if(e!=null&&LS)for(var i of LS(e))t.indexOf(i)<0&&dve.call(e,i)&&(r[i]=e[i]);return r},rat=(e,t)=>function(){return e&&(t=(0,e[hve(e)[0]])(e=0)),t},iat=(e,t)=>{for(var r in t)v7(e,r,{get:t[r],enumerable:!0})},nat=(e,t,r,i)=>{if(t&&typeof t=="object"||typeof t=="function")for(let n of hve(t))!TF.call(e,n)&&n!==r&&v7(e,n,{get:()=>t[n],enumerable:!(i=tat(t,n))||i.enumerable});return e},aat=e=>nat(v7({},"__esModule",{value:!0}),e),pve=(e,t,r)=>{if(!t.has(e))throw TypeError("Cannot "+r)},W9=(e,t,r)=>(pve(e,t,"read from private field"),r?r.call(e):t.get(e)),oat=(e,t,r)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,r)},sat=(e,t,r,i)=>(pve(e,t,"write to private field"),t.set(e,r),r),oi=(e,t,r)=>new Promise((i,n)=>{var a=l=>{try{s(r.next(l))}catch(u){n(u)}},o=l=>{try{s(r.throw(l))}catch(u){n(u)}},s=l=>l.done?i(l.value):Promise.resolve(l.value).then(a,o);s((r=r.apply(e,t)).next())}),vve={};iat(vve,{default:()=>mve,dependencies:()=>Kk,devDependencies:()=>Jk,files:()=>jk,gitHead:()=>eR,license:()=>Zk,main:()=>qk,module:()=>Yk,name:()=>Uk,publishConfig:()=>Qk,scripts:()=>$k,type:()=>Wk,types:()=>Xk,version:()=>Gk});var Uk,Gk,jk,Wk,qk,Yk,Xk,Zk,Qk,Kk,Jk,$k,eR,mve,lat=rat({"package.json"(){Uk="@particle-network/auth",Gk="1.3.1",jk=["lib","es","LICENSE"],Wk="module",qk="lib/index.js",Yk="es/index.js",Xk="lib/types/index.d.ts",Zk="Apache-2.0",Qk={access:"public"},Kk={"@particle-network/analytics":"^1.0.1","@particle-network/chains":"*","@particle-network/crypto":"^1.0.1",buffer:"^6.0.3",draggabilly:"^3.0.0"},Jk={"@metamask/eth-sig-util":"^5.0.2","@types/draggabilly":"^2.1.3","ts-loader":"^9.3.1","webpack-cli":"^4.10.0"},$k={clean:"shx rm -rf lib/* && shx rm -rf es/*",package:`shx echo '{ "type": "commonjs" }' > lib/package.json`,build:"yarn clean && node ./esBuild.js && tsc --emitDeclarationOnly -p tsconfig.json && yarn package","dev:lib":'cross-env NODE_ENV=development concurrently "tsc -w" "node ./esBuild.js"',"build:min.js":"webpack",version:"yarn build"},eR="cc999e430ebfb1dd821783f7cf099ddd51f3495a",mve={name:Uk,version:Gk,files:jk,type:Wk,main:qk,module:Yk,types:Xk,license:Zk,publishConfig:Qk,dependencies:Kk,devDependencies:Jk,scripts:$k,gitHead:eR}}}),sJ=!1,vo={languageCode:"en",fiatCoin:"USD",get erc4337(){return sJ},set erc4337(e){sJ=e}},lJ={title:"Approve Pop-up",content_sign:"Click Continue to complete the signature or transaction",content_login:"Click Continue to complete creating or connecting wallet"},uat={title:"承認ポップアップ",content_sign:"[続行] をクリックして、署名またはトランザクションを完了します",content_login:"[続行] をクリックして、ウォレットの作成または接続を完了します"},cat={title:"팝업 승인",content_sign:"서명 또는 트랜잭션을 완료하려면 계속을 클릭하십시오.",content_login:"계속을 클릭하여 지갑 생성 또는 연결을 완료합니다."},hat={title:"批准弹出窗口",content_sign:"点击继续完成签名或交易",content_login:"点击继续完成创建或连接钱包"},dat={title:"批准彈出窗口",content_sign:"點擊繼續完成簽名或交易",content_login:"點擊繼續完成創建或連接錢包"};function gve(){const e=vo.languageCode;return e.startsWith("en")?lJ:e.startsWith("ja")?uat:e.startsWith("ko")?cat:e==="zh_CN"||e==="zh-CN"||e==="zh"?hat:e==="zh_HK"||e==="zh-HK"||e==="zh_TW"||e==="zh-TW"?dat:lJ}var fat="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAFQAAABUCAYAAAAcaxDBAAAAAXNSR0IArs4c6QAAIABJREFUeF7dXQl0W9WZ/u7Tvli25d3xEjsrAUIWAtkToAUKDA2UNRlmWmDKQHvYhi0wQCjtsJZC6TCFMO1QKISWrZStDVsggQQSsjiJ5XhNHO+2LMmStb87596nJ70nPdlylnbO6MCJnSe95bvf/3//dhWC/wOv1qWN02NEmCUSsQwQyimlZSC0HJSUiQD/mbL7pKSXAn2Ukl6A9lFCeiGSPiqIvYQaGudsnnLg7/045O91A00rmhYA4kUAuYgCMzleHDUg8YfqT/Z3lEq3qzyu/FkU4aLAGzrQN+dtmbn97/FsfzNAKaiuZVnLUkLiF8UJXUVAajlIiac+WjCVn2fnFCk9SCC8CYo3F3wxbTMBEf8WAB93QNtXthfExNCdFPghIcSpya5xmAkQzt7szE0xW1okBZMpEKfoJ8D6mGD6+bLNtcPHE9jjBmjnok5LyOC/CYTcCaBAE4w0IGVzVoGuMPOMcyRAVi8SkYBXHJOPi8AwpeQRHTX/cvGX1cHjAewxB5SupPpW0XUNBe4DIZXyTavMW2Hm8sNq+Ualz8y2IOmM5+zUBFpiuOQaaDcoHoiZpv/mjE9J7FgCe8wApaCkfXnTpRT0QUowXTY7LdbJApQrmNrM1RKnlGvIBFoteuz+KHAAFP++4suprxEQ5e0cMcbHBNDm05sdgiX2e1BcoPRhWRX5KNU8XYCk00mmnu5rZcvI/EzKNYig79hEsmbhtmm+I0Yy8cGjBrTtDNcMSumfQDFD+WDjganJOhmYoxAgWcqVLkZULKBsOfx9KtdAm0hU/90zt9c3HQ2oRwVo68rGC6iI34PAId1fZpyYBE5hUJpKnxZnHq0AKZmZOleCxWkxb1K0KHxUpGvO+Wr6O0cK6hEByvxl2wrXOgD3UmZrCjDH8plZWTsemFlNORcBSohRwiUo/Xe6UPLfRcL++8m5W6c+cCR+dcKADp3e7PAwfwlckDKZ1GmyqXk6mErgx8uAtPyiMjbNUYA46eRzaYJJUwxmfpVQrDlvgn51QoAm/SUwIxuYGQz9PyJA44MpuSwV0BRNQlz47ncm4FdzBpSCCq0rXe8R4BwZzGx+M8mYNL+Z6RfTHkCOTxMpqbaaJ3w1BcYXoEz1z8ZmlVgpri8C7//DtikX5Jq65gxo60rXw6CUpZCS6RwDAUoHWLAJsM+1IH+FHcQsYOSbUXg2BxDpj3FPrS/WwzHfCusME+IBEcNbAgi0RhAPU42QKbsAJVnIVV7xPrm2kJZliZQ+suqraXflIlQ5Adq2cv+1FGR9ijET95kqZmikk8RMULqmEGX/WASiS0QLIsXwJj8OPtIHwa5D1Y+KUbjUBsEg8GeLuGPoXD+I/g9GEI/IC51muhopaCpeVYOp5RaScbVIr1j19dRXxwN1XEBbznAtgSh+QkAMWkG7VngzlgDp8nSwzrPCPNUEGqMYbQjCvycI64kW1NxTDmOZQXXPVKRof6gXOrsO1T8qgaBXLCal8LvCaHmkD4HmCIxlelgmG0FjgL89gshQPOkTM0xdIUDqxZajAjkTk7IvEQiKom7JJdsn7xwL1DEBbVneUg0S3UGAEi0wJypADJTi1YUoONsBXaGe1dgQ6Y1i4HUPBKOA8n92cuDSX0MbfSBGAc4V9oxjkcEY2p4eBASg8pICGJ06UBEYPRhBx/+44d0XVtVZtdipjJWT8avCtSUjA0o7dcCSVV9P7cwGalZAWbUoYhr5ApTMkVYwkaplK/COJ0AgsM21oOZnlRCsAghJmDWlCLVFEGgMoWC5HXpHJqB9b3n43xedmZfxHOGBGAY/9qNwoRWWGkPqvCKFtyGEhrU9iHjEFFPT/GbOYCaFiu6ketOSy7JUq7IC2rq8cR0luP9YCBCYeemAktVOlP9LcQYoYoyi98UhFCyxwzrdrDoeC8TReGMXLPVG1N9eypksvyil8O0JIXg4itJz8lTuQPaHO2/qwtD2YCLNHF+AkpaY5ntTzOax7AOXb5/CEpuMlyagrd9qzafRyEEA+blUjdJ9Jrs40QP6EgN0+TqIYYrIQAxFqwq0AY2KXHiYcpdf5YSpwsCFiZlz/zs+9P7BA32+gElXF8G5zAZDoY77ydGOCLr+6IGt3oSqNQVJdiqfct9P+9D93ghAJDBFMeUj02umOYEpJQceU0you2hXnScdUW1AE+w8EjD5BYwEjpV5yD8zD4YKA8RREYGGIMI9UZRfUwx9ntqsgx1hHHy0DyMNIZhrjTwsIgaBAxZoCkOMSmERAzVvjgWWSQbEw4BvXwgjTWFUXJSP+uuLoLOk2MtuIx4SseuOHujtAgedncTXEsbA1mAq1JJNWXZrYzFT3bJ54EoNlmYA2r5yX3mcCi4Kkp80raSDzq0HZJtnReXachhK9CmfFqPwbvEj7hdRcEYedFYBzGRjnjh6XnRj8B0f4kHm6zLbHUmhUGRdSpE0Vxsw455S5J9kTl0vTtH7oR+xURElS6wwFev5zYcGYjj4hg+tv/NoRADqeqryuupUlTCmeyJxUveDNJZmANqyfP+TIMJNGeGQRkMtQ+UTwFfdVwHHmXkqE2TgRbqj6PxFP4gA2OdYOUu82wIYbQlDDCcW6wgyIBb0M1BrriqAc4F03t6NfkSG45hytRPGQrVFREdFfHHtYfjaooo+lTaY7A0sI1MmNLI/FUEfuCqNpSpAGTtjVNcOwKwJaJqSawJKCeqfr4Z1uiXDYUeHYjj0WB88WwL8WCpEUVeNdHkCCpfZYCzSY+DDEQS7YzCV6VF8dh73xwMf+xEejLOoS3Ue9kuqzkkw7cdO1F5aAMGY6dkanxlCM2ep+tparFRag7K4IlJ4CIRZV+2Y3CM/rOpKLctdT1KCm7IxT6vVqwI+ESxX3V2GwnOTHkN6aEoR7oyi48EeBFzhVBGCEO4b9QV6xAIiwv0x1FxfhIrVhZzhgZYQ9tzQhVk/r0T+ydIi9f3Vh6aHBqB3CNDn6xD1xhFiQTwTHEVYNP0GJ2ov1wZ036+G0PKSN6OZp1RzeYGSabamf6VP/fOOKTdnALpv1j6jsVg3wIrFan+RYIGCDVqqrizBWU8yo2ptOczVxiRLxaiI/j960POboaQgsNjWWK5H5Q+csM8y80jg0HNDPDyyKcKnXT/sxCm/rgIRpPUP9Uex755eTL7GCWuNEYH2CJr/cwj+jggfhpAXueh0C06+rxQmp15lLRFvHFuu74avVTJ51f8Zqaq6tZL5fuq1ButLL9tPePKbZGjLUte5VIf3lYxL/jwBMPmd6wHbfCsKz3bAXG9E3CfC87kf7o9GEHVL6SBfFELgPMuO+rvLkvn5wIc+RIfiqLhMCoMC7WHsvr4LJz5WwRnKmN630Y+oJ47qywqk88Qpmp4aROcbPohx6dzM9AUTQc3FDky71gm9VYoAwsMxtLzsRaAzytXf1x6F90AEsYi6wKLymVrMTLBKcjHkOz/4pu4DFaAHlrt+DYLrMsw9zW9m+FZFTqz6rAAILIwxEv7A8VERYlRiA8uUbDPNiLjjsE41Ycp9ZUkBG/rcj9bH+lG0wg6DU4+Bj0cQaIvCVKVHyZl2xEMUA5sCmHRJPmpXFyaZ1/j4ALx7QzBXGTDcEEKoX1o4YiCwVuvhnGfhF4/4RNRfkQ9blYEzPh4WcfBdP1wveBAdEbMKkJKZkguTy4dczJ66+ps6bvZJhjataOwASG0SlBwFSFmTVAGapTduLDdg8h1lcMy38Piy7zUPLPUmOOZYEPXFsf+2Lg6gdK7sJThjoYA5T1XCUmmErymE4V0hTL6ygLPSdyCMvQ8NwOOKqMyZsXT2HcWYdLY96T44m0WK7Q/0o+P9QOL9clqc5g4U5T1RnYo3XbOjjs9n8U82rWyaCUobZUDkFVD9npbD83RSFRSrY9R0PywrZfF5eai+oQSGfB0335G9ITQ/0MvFJdQXRXRYzrszqufqajq7eROBpdKA8FAcJ/+kDEULLJzpLKBv+rUbbRu8qkjCebKJA5o/zZRktvxDz5YAPrulL1XnHcfMlfVgxtY4wQnX7ahzSYAub7oLhD6Uq88cE8xxGmqFZ9hRe2MJjCV6sNLc8NYADqzrRSwgXV0Gnhgkc40FKXR2ATRKEQ0q3yNN4/G/EYCT7ilB5Tl5UsrqiWP/04PofNefYhwFiheYMfv2YuTVpsRSBnRwTwgfXdujKlSnC5AckyZnABTPKlKsvW5n3cMJQBu3UkJOz8ZMtSlnti1UQpbWU08tkvQ5loeXrHKgcImdC0v3K8MYZsWLBJiGIgloVj0qXGBFzzs+VF6cj1BfDIc2eHhOHnbHEeciIpkmczt504yYfEU+LBUG+JrDCPbFwIoufV8E4T8U49e21egxZ20JiuemMioZ0AMbvPjmCXdGEy9paUqfqWiRKEDfdt03dQtJx7L9FSEidIH1TI9UgHLoASk7l4KVQOfQ8QdmwkTjEjOtdUbMfLCcF0WiXhHFZ9jRvt6N+uucCPfFMPC5n4Pc8owb/ZtHFcIgfd7A4lmHDlXn5aHmuw4IBsDfGcXmG3oQG6UgOqDmwjzMvrEoqfoMUE9LGFvvH8RwMwu70gvMaQKkDSb7ENVDV0VcS13ngoVL44E54ZFCyUXz046TTgpmAtsJZpgrDZhxdxkCHWE0PTYAvU3A8I4gCk61QoyJKJxnRe3qArQ85+axbM+HfoQGElX5BBDGAgGnPlYOZyIJYJf/4pYe9H4RTPrTiqUWTL+qAOZiPQZ3BtH4ohfejljWFrOY1rLhrNQQ3XgM3yGNyxq/D0J+ezwEiD2BlnApb4hdt+TsPEy5pQSenUFu4sy8/S2SQifdDQUMBTqYyvWoWuXApPMd6Nnox+4H+tVKbhdw0r9JSi4wfzoSx6ZruuE7GFWBwNhaeqoFUy7OQ/4UIwJ9cbS84UPXliAiQSkmlYigLqynM1i+RwY6pfQHpJEJEhSCpHwIftIx1HwcAdJW+swpOMfJZlRekg/f/hA6Fcqs9N3KDKhkqRWV5+fxfL73swCG94URDUjRAfOxBbNMqLvEwdshnsYwXP/jQXQ0AVLC55YtsOD0dSWwlKSyKOaCvnnaDdcGKUGQQkJ16JYhVHxaWh5BomvJ/uWuJ4FU/p7+EGMxV3uiI6W+KoZp+tmUSuvzBO7nJLFRMDO5aCkBYkfZ+xc9W8lZt/eJQQxsD0lsZgQggLVSj/rLHHDUG3me3/SyF8NNKdaf+VwFSuZkFnA8bRF88m998HaysdGJgMnH0J8i+5e5NoDgcuVDcOUcZ4PAWEMIEx4pzMp0mc2JanuaC5hxg1Saa37Bg8BhlpenSnBVZ9tw0k1FMBfpONUOfejHV+sGOPPY+763qQYGS2b/KtAXw+b7B9CzPVXAyTa+k+lb6atk/7LGTykhK9RMnOhMe+4CJMeZcrgjsUpZb1T4XcmGOWNVUyKJ9xscAk65t4Q34fb9yo2wohk3dXU+TvzXQuhMUg4/uDuETTf28liWne+8DZOQX58Zj44cjuKj2/ox3KIonGgIkLZQ0U1k37LGDkpSKeeRZkC5CpAydkxnuVKA0oGXRULpw8wlOix5fhJGu6LY+bNB+A9L8Sb7v2i2CSf92In8qSbEgiJYnNn4O19y8erOt2H+bcUw2lNtk3iUovlPI9j6qFvqPWlkS7L1arkzUaRNZO9yF3M+JumGj78AaTEzF5+p9XCsjTJ1TT7Pptpe9yWFhy8UAcoWW1Bzjh3etiiaXvEiFkqxn2ViM650oHqZDaZCgX92YE8Iu573IsjS3zHAVOmMQhtEUC9pWO5inbt8JZjKD6SzJuNYlmqTHBql3q8WFa04LhVOpb03Le6TF8Do1OO0R8t45rT754MI9MaTQFjKdJh6WT5K5pq5K2ja4EXPtpAqxGJA1p9nR+F0I7wdUTS+OoJwgB4RmBJRqJfsWeZyERA+zp3OFCWY6asi/Z5bQy35Xo0sQx1VjO0z1fdIwHzo3HtLeNmt4VduBFnVPsGs2vPsOIWJUoFUhOn6fBSb7+5HLCI9pzGf4LTbi1Ey2wS9WeBuYWB/GF887JYYmoaHps9MLHQKJ9pEGpa6uCilq3zSVyUOKH2XDNB4GVDqnJnhR4bZJK9DMgRIdhOq81Gg7nt5yD/BhAMveeHrkIqtckNt6qUOzP6RE4ZEd3VgVwgf39iHaEg6y2l3ODH9YkdyMI3fj0jhemMEmx9yq8iVE5jSAmwiu5Y1bSDIDJuymqRGUyudZcoHl4+N3VCTAnK5aKslQEmRSjCQ+cCzXqniDbg9v3Sjc6Ncy5QsJ7/egDm3OFF0ggmxEMWe9cNofkuqPgkGgis+qYE+EQFwhBMvT0cU713fi5F+qfTPM6DEMSWpMiMTfv+vkt1LWWOOJBtzY/nM8TZVqZVezh4SQqBVcJbDn3wd8mebER6Ow7NXGu5S3XzCvcjnt07So3y5lVfdR/vjOPT+CE8dpQcnMLCu6QlGHhbprAQ9X4Uw2BBOdkSN+QIu31ijKjLLgHo7o/jgpn54DkZVsfi4YHKG4ymyaymrhSJVC80SF4430z5hMBUZEBtEOOG2YowejmLXvX28PayMKeVrsyIKC+Srz7VhxtVO9H8dxOZbeiUmJRBh7Kv7bh5OvKYApnwdBnaH8Nnafu4XZZfAWh8XvFiBohmZhebu7UF8cOsAwn5peTIWNsMFKpp4FLeQncsOfB+gyeLIkWRASjBl/5oMxLNtE0y0e9n7zZP0qPoHB6+0lyy2IjQYx4H1bg5soCsGc5mel9vskw2YurqAA8mKyn3bguj5UqoiyddlQrX4wRJULLJKf0cpPr2tD52bgqrcvGy+CSt+WgKbIpcP++LYeMcAOr8KTxxMNvpDyZXM5M8VCeHdzrHAzCZAmb5WISpjZkCSr5OBZ8Nl1moDlr5UzQdlB7aPony5DY3PDWPm1YWIjIgY3h9C1Vl27Ht2GM0bvIiFqWLYQWIKM/F5NzsxdRXfOsWF5u3LuzDczvpUKXFktVIWLk2/0I78yQZ42qPY/aIP3q5Efz+dnWMxM7GgsbhwBvlmiasSIIepYlNOiuaZUxVKM9Ayc66yaRdPmiRXBMBUakDBKWaw/rh7T4i3P+RrskoR9FLFaMqafLjWD2PaPxUg4hWx56khRP0iAt0xRBLVIznzYs25otlGFE4zIjxCUb3SCmupDo1/HEHzW5JgsZFUx2QD5t1QgJplVrDM6NDno9j1Wy+GmmOIJybzMkw9gxiZYzuswDw6ai/gyrF9adNWAFILJPn/2JuqJuwzEzdlrTVyf8naumzSo32DBweedSOeaDHLaq63EhiLdBjtifGGHlNzf1cqtUyqfmIBp1xsx7xbiqAzEfi7Y/j68SEc3hzkDJZBz6vSY+EdRZi00JwUJB6jbgvh058OYaRbPUIuW61a5TMHH6RogG67a8/khTKgbIcDFyZZKbOHTdKbVMArF2Icn1n+bTtm3lQEE+sdUcDrCmHHnb1crbWunbyOZrE69XDLHy/FpOVW3vUU4xS713uw5789yUYeO8+U821YeJsTprRxSlYH3Xj3AFo/TFX1tV2gNpiJe1x71+5aqUm3fVHTTKpDo9K5Z6sAaQmQ1kOr2K5gSeE8M2bdUQJ7rZH7t6EdQXS+OwLnXAuC/TG0/N7Lc3MtdU0tuMQ6xsqSuRYMHwjDVqnHVNZH0hOEhuPY/pQbLe8oYlMCnLQ6D6fd7NQczP3iSTd2/m4kdd1xfKaatay3bzjh7oZKqY3MXl8tcblAWAoqmbrWpiotAUoHU8v/KJWfBeRlK2yousCByHAM/V8FMf1aJyxler4rpONNH/b8wg29jfAZ0iBr4sV43QYmNrksACG3iPLFFix+sBR6C+HitOsZNww2AYUzTOjaMor2v44q/KxkUdMusGHRbU4Y0zZGMLP/yx0DaP1IigQyxVnNzIxnFGnT2obJqUEH9oatiw88SQj4XKiaCQk3kM3MtUyRgPs/x4kWqdHWEMJodxRxVgRXugQCVJxlw7wHU6M4gcMR7HhwAKc+UApLqR4d74xg+38MYsrFDsy+0cmrSHvXD8Ps1GHmamm2ib0aX/Fix9NuxCJpmQ0BdGyckQD2SXosutWJygUKHypS9OwOY+M9g/Apiisp0DQESDU2yTezPHJPQy3fGJZi6KKWc0VBzBgW49SeoM90LrRixk3FsCUGCtj8UNtLHrS/7EFUoejs3AUnmDDvwVLYKg18NKf9TR/MJXoeHslx5Iff78ayX5TBnJiiC3vj+OrhQZx6u1T8iPhFbHt0iLOS1TFlMHQWgsrTzJh6vh32Mh28h2LwHo6h9CQT7OXMh1MeTu18wYfefZHk/L0KzLRKV/KYAhMiCmes3Vv9qQpQNs7oKzD0szRYxdIJgslmPRc8WwVbjboazkBteHgAh9+XpzkkP6gzE5QstKBkvoX7vtbXfJhzWxGqz5a20DDB+Ojabix5tBTWUmlTWHAwhj9fdhiTllnhnGmC92AU7X8ZRXhEUSUSgGkX2rDgx04Ouvwa6Y1hy+Nu+HvZwC7lvaOQXyrZqU15TAFKpccUvmi8pmRd+jgjO9mXiw88TAn4fs50ZqoaVtlWDUDxUivmPpr87pbkgzAB6vnEjx33SG1fiX3qQJu5BBbmlJxqxok/dMJSqkPXZ6PY/bQbtefbMf1SqTrU/IYPTa+NQGQuRGCCkGmWtgodlt9fjIr5mVMiHZ+N4t2bB45YgFKCTRCn9JF7E+auYij7Zfv81vywKX6QszQj/MmtBFf2bTtO+Ul5Ekj5B2Ze/VtGse02KfdW1lIzLEIADA4diJ5wc2bVItZHZ2kl+1x4JC6NRmqNxyQWu+wUE5beU4TCKZl9o1F3DL/5VpcE6DjM5FYiE0D1fg6mLx60V69rKUp+V0nG8PnmRc3JwTFV8JzGSpll6u/uIDA6BSx7rRb69C0uEYrWlzwY7Y2idpWDK/bA9iCaXvDwXpBy/5DqupqVJ8mE5CEEtgnCVqZD1TIrjA4BfbvDiARELLmzCMWzjBlhUn9jGK+u7tUQ3yy7QBK+QBmns+cWKV17X0Ptw0r2ZAD6ycp2sy4caQch5aqRvXGdc6ptUXuJA3X/WAhTsY7v+Ij5RbgbQvC1RlB/WX6yE8lY63GFseOhQQyrZjlzmc+UWC7ogElLLDj9VidXcRbYx0IiWv8a4O6h7iwrDOZUI44x/vMn3Nj3phSjTlSAmOvjYIL2iz6xdl1HnTQQkHhpbvz6bOGBf6UC+S+Vk86hapQsdBiAYjY9d4pZShkPxTC4PYiFvyyHpUS925gNNjS/7MHe54b5FEfhSSYY7AKCg3EMNIQRSrQjmMnbq/VwTJZM2HswhuG2KHg6eacTkxZKs6Hyi22d2fU7L4x5Airnm2HKEzA6LOLg5iB2vuTjvaOcwFSVM1PFHFHE9fftrfl1um/TBJR98d9ni5sPUJB62c9oxaaSn83eUGMgsM+JcQLHdCNWvDBJM0s5+MEIDr7vR/0qB4rnmGGwEoQ8Iro/D2DPeg9G3SIvdsy80gFHFRscBUa6YnC97kNgQMTKnxbDyjZ2pb32vzWCr57xwFamh9EmIOiNY/hQLNUdlX35GCKrFCCZMCJox8w9NVMvA0lM9I/DUHb4k8UtVwD0lfGnQDJ7QJnJAQHrQn7r9RqNDa4UXZ8EuDhMWmFTHWeh1s7/HEb7B35854VK2MpTO/M4Sw9F0fz2CE5ckw9L2uYudtz19gg+f2xY6mTmKECqlDcpWGnPGMeV9+2r2ZCxgsrAXuvgxwubf08JVqtMP3lj2hMdsipK95KK5dj49oIHS1CZtuedzR0d/iSA4lPMKJiWqcj9u4M49PEoTr2lKOMWY2ERnZtHYS7Uo2KeehczC9M2PexG45t+xNj4TQ5qnhOYFC/f11CzRgsv6YnHeG2f320dNvp3EJCZatNPmXlmJiWnrpm11Lw6A06+uYiPDzLBYLXNtrd9cLsimHdrkeZozFBjGF1fBjH76lSaKd8yq2e63hxB/54w5l1XwLMfJlKRAEXH56PY9owHXlaSy6WeKafcKq2QmCk/o0ipi7oN89d1V44eEaDc9Be1z4zR2FaajE2zDyykVjj7dj+TU0DBTBPP8dlEh6c1CmuFHqfeWYQKJiyJzV3cKihF4ys+dG0N4qwnyjLcBQuNtj7hRtM7flQusKBqoQWsjjp0IIL2TUH4WONOC8wJ+kzpHNQrwrBwXUOlaywSjslQ+YMbT2s9P07Et0FYEKQ9uKUSrbSRnnRhS4UrUtzHsp3qM62Y82MW+khRADPZ/t0hbHvMDdbaXXJvMeq+rfCxFGj7KIAtj7kR4FPM6jGiXHymOmxSDq2pfabIty8JF96/t+rdscAc1+SVH/7LwuZ1FOR+rSk4dQSQfYu0ejHU72MtDOcMI6pWWmEu0vPRmM7PRnmvJx4HrOU6TD7TispTLXwBur4Ooe3DAEZ6jh2YklZkiqwIunZdWgB/xCYvf5B9EdZ7p7e+TQjOV65+autz9j2RHMik6WUfYpXFL9eZdmUtQJm55SJA2dLJDMJQ+u79e2svGI+Z8vGcTD5p+izX14tbIYtUlv5TulqqfKtGCptkuNZMe5aUV46BVddSBeEpcdQenEirzSaYqRRZJkLm0byFd7U5vccFUHbS905vdsRBXqfAt5I5d5Z8W/0guaWTY1W1kj4vkVDkBOa4KbPk+dLnCETQDxG0f09Z+MgF1AkxVD7hH0B1xtNafkYIuTPd7JIPqVWtGrPQoYhbNUKYXMCUXYa80EoxVB/LLkBSBYs+Oquh5m6tTGg8UI8IUPmkf1rQuiYO+hsQYsxm5rKjH8vsMnZbjMmqial5BpBZcnN2/6JIIyDC1fc3VLOv8zyi11EByq741oKWxXHgj5SQyqQwqGI/bbHiDzpGPVMdOai/qSFXAcoGppaaixTdlOouXbd30hdHhGTiQ0cNKDvPn+YeqozoI+9QkLmtqPi7AAABj0lEQVTHR4A0WJmDACWjhsQPqUVSZ0AUdKcYIResa6rpPhowJad1jF5/mEWNoq3tWkrpPSAC74GMZ+Zj1Vtz8ZnqwHyMVm+2dFKkPSIlP6O0er3cEzpaOI4ZoEnBWtRpESOR60XgLkpI4ksIFa3pHMw8FzCPRoAoMAgRD9s85JlbDx/bf3HhmAOaBHZWvz1s9t9ICW4HSfzTFTmAmQRqjNAoG5jjCVAclO0PfzweMz+1bn+p/2jZqPX54waofLHfzmkv0OlE1km9VgQpzql7mgYmO9d4Ex1jCZAIMkgpeT6msz+ybldhxvfVHUtgjzug8s2uAxVq53WcRikuFAVcCODEdB8r+d0jFyBlqY0C+yjFnwHd25GGSdvW/X/553+yrf7zc9tqRQjfo6AXgmApBXQTSifTVF4EjYKSzyjw51jU8Na/N1ayb5f8m7/+Zgwd68menU8N8cihaqITa+JUqKaE1lBCqwFSQ0VUg/0usfcQJehkf4qUdhJCDtG40ElBO/NN1Yeu20Gkr9P5O77+FxTFLrSBkpzzAAAAAElFTkSuQmCC",pat=e=>`
    <div class="particle-pam-left">
      <div class="particle-pam-wrap">
        <div class="particle-pam-img">
          <img src='${fat}' alt="" />
        </div>
        <div class="particle-pam-content">
          <div class="particle-pam-title">${gve().title}</div>
          <div class="particle-pam-text">${e}</div>
        </div>
      </div>
    </div>
    <div class="particle-pam-right parm-continue-btn">Continue</div>
`,vat=`
.particle-approve-popup {
  position: fixed;
  z-index: 999999;
  display: -webkit-box;
  display: -ms-flexbox;
  display: flex;
  border-radius: 6px;
  padding: 0px 18px;
  -webkit-box-sizing: border-box;
          box-sizing: border-box;
  -webkit-box-align: center;
      -ms-flex-align: center;
          align-items: center;
  background: #fff;
  -webkit-box-shadow: 4px 4px 20px 1px rgba(180, 180, 180, 0.6);
          box-shadow: 4px 4px 20px 1px rgba(180, 180, 180, 0.6);
  top: 30px;
  -webkit-transition: all 0.3s;
  transition: all 0.3s;
  right: -600px;
  width: 379px;
  height: 78px;
  padding-right: 0;
}
@media screen and (max-width: 600px) {
  .particle-approve-popup {
    max-width: 90%;
    left: 50%;
    -webkit-transform: translateX(-50%);
            transform: translateX(-50%);
    padding: 0px 12px;
    right: 0;
    top: -100px;
  }
}
.particle-approve-popup.particle-approve-popup-show {
  right: 30px;
}
@media screen and (max-width: 600px) {
  .particle-approve-popup.particle-approve-popup-show {
    right: 0;
    top: 30px;
  }
}
.particle-approve-popup .particle-pam-left {
  position: relative;
  padding-right: 20px;
  height: 100%;
  display: -webkit-box;
  display: -ms-flexbox;
  display: flex;
  flex:1;
}
@media screen and (max-width: 600px) {
  .particle-approve-popup .particle-pam-left {
    padding-right: 10px;
  }
}
.particle-approve-popup .particle-pam-left:after {
  content: '';
  position: absolute;
  width: 1px;
  border-left: 1px solid rgba(0, 0, 0, 0.1);
  right: 0px;
  top: 0;
  height: 100%;
}
.particle-approve-popup .particle-pam-left .particle-pam-wrap {
  display: -webkit-box;
  display: -ms-flexbox;
  display: flex;
  -webkit-box-align: center;
      -ms-flex-align: center;
          align-items: center;
}
.particle-approve-popup .particle-pam-left .particle-pam-wrap .particle-pam-img {
  display: -webkit-box;
  display: -ms-flexbox;
  display: flex;
  -webkit-box-align: center;
      -ms-flex-align: center;
          align-items: center;
  width: 42px;
  height: 42px;
  min-width: 42px;
  margin-right: 10px;
  border-radius: 42px;
  position: relative;
  overflow: hidden;
}
.particle-approve-popup .particle-pam-left .particle-pam-wrap .particle-pam-img img {
  width: 100%;
  height: 100%;
}
.particle-approve-popup .particle-pam-left .particle-pam-wrap .particle-pam-content {
  display: -webkit-box;
  display: -ms-flexbox;
  display: flex;
  -webkit-box-orient: vertical;
  -webkit-box-direction: normal;
      -ms-flex-direction: column;
          flex-direction: column;
  -webkit-box-pack: center;
      -ms-flex-pack: center;
          justify-content: center;
}
.particle-approve-popup .particle-pam-left .particle-pam-wrap .particle-pam-content .particle-pam-title {
  font-weight: bold;
  font-size: 17px;
  color: #000;
}
.particle-approve-popup .particle-pam-left .particle-pam-wrap .particle-pam-content .particle-pam-text {
  font-size: 12px;
  color: #666;
  opacity: 0.8;
  line-height: 12px;
}
.particle-approve-popup .particle-pam-right {
  position: relative;
  cursor: pointer;
  font-size: 14px;
  color: #2d6af6;
  font-weight: bold;
  margin-left: 20px;
  height: 100%;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
  display: -webkit-box;
  min-width: 88px;
  padding: 0 10px;
  margin: 0;
  display: -ms-flexbox;
  display: flex;
  justify-content: center;
  -webkit-box-align: center;
      -ms-flex-align: center;
          align-items: center;
}
.particle-approve-popup .particle-pam-right:hover {
  color: #2d6af6;
  font-weight: bold;
}
`,mat=()=>{const e="particle-approve-popup-style",t=document.querySelector("."+e);t&&t.remove();const r=document.createElement("style");r.classList.add(e),r.innerHTML=vat,document.head.appendChild(r)},gat=(e,t)=>{mat();const r="particle-approve-popup",i=document.querySelector("."+r);i&&i.remove();const n=document.createElement("div");n.classList.add(r),n.innerHTML=pat(gve()[`content_${t}`]),document.body.appendChild(n),setTimeout(()=>{n.classList.add("particle-approve-popup-show")});const a=document.querySelector(".parm-continue-btn");a&&a.addEventListener("click",o=>{o.stopPropagation(),n.classList.remove("particle-approve-popup-show"),e&&e()})};function _b(e){return e==null}function B4(){return typeof window<"u"&&(window.__PARTICLE_ENVIRONMENT__==="staging"||window.__PARTICLE_ENVIRONMENT__==="development")?window.__PARTICLE_ENVIRONMENT__:"production"}function yat(){const e=navigator.userAgent;return/Version\/([0-9\\._]+).*Mobile.*Safari.*/.test(e)||/Version\/([0-9\\._]+).*Safari/.test(e)||/iP(hone|od|ad)/.test(e)}var tR=()=>typeof window<"u"&&navigator.brave,xat=()=>typeof window<"u"&&/Firefox\/([0-9.]+)(?:\s|$)/.test(navigator.userAgent),bat=()=>typeof window<"u"&&/(?!Chrom.*OPR)Chrom(?:e|ium)\/([0-9\\.]+)(:?\s|$)/.test(navigator.userAgent),uJ=e=>yat()||tR()||xat()||bat()&&!tR()&&!e;function yve(){if(typeof window>"u")return K1();{const e="pn_device_id";let t=localStorage.getItem(e);return t||(t=K1(),localStorage.setItem(e,t)),t}}function rR(){return`web_${(lat(),aat(vve)).version}`}function cJ(e,t,r,i){const n=screen.width/2-r/2,a=screen.height/2-i/2;return open(e,t,"toolbar=no, location=no, directories=no, status=no, menubar=no, scrollbars=no, resizable=no, copyhistory=no, width="+r+", height="+i+", top="+a+", left="+n)}var wat="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz";wat.split("").reduce((e,t,r)=>(e[t]=r,e),{});var xve=()=>{const e="https://auth.particle.network",t="https://auth-staging.particle.network",r="https://auth-debug.particle.network",i=B4();if(typeof window<"u"&&window.__PARTICLE_AUTH_LOCALHOST__&&typeof window.__PARTICLE_AUTH_LOCALHOST__=="string"&&window.__PARTICLE_AUTH_LOCALHOST__.includes("localhost"))return window.__PARTICLE_AUTH_LOCALHOST__;switch(i){case"production":return e;case"staging":return t;case"development":return r}},m7=()=>B4()==="development"?"https://api-debug.particle.network":"https://api.particle.network",bve=()=>B4()==="development"?"https://rpc-debug.particle.network":"https://rpc.particle.network",wve=()=>{const e="https://wallet.particle.network",t="https://wallet-staging.particle.network",r="https://wallet-debug.particle.network";switch(B4()){case"production":return e;case"staging":return t;case"development":return r}},_at=()=>{const e="https://ramp.particle.network",t="https://ramp-staging.particle.network",r="https://ramp-debug.particle.network";switch(B4()){case"production":return e;case"staging":return t;case"development":return r}},fi=class{constructor(e,t){this.code=e,this.message=t,this.code=e,this.message=t}static userCancelOperation(){return new fi(4011,"The user cancel the operation")}static unauthorized(){return new fi(4100,"The requested method and/or account has not been authorized by the user")}static unsupportedMethod(){return new fi(4200,"The Provider does not support the requested method")}static unsupportedChain(){return new fi(4201,"The Provider does not support the chain")}static paramsError(){return new fi(8002,"Param error, see doc for more info")}static notLogin(){return new fi(8005,"User not login")}static walletNotCreated(){return new fi(8006,"Wallet not created")}static decrypt(e){return new fi(8007,"decrypt error: "+e)}};function _ve(e,t){var r,i,n,a,o;if(!e.isLogin())throw fi.notLogin();if(!e.walletExist())throw fi.walletNotCreated();const{projectId:s,clientKey:l,appId:u,chainName:c,chainId:h,securityAccount:d}=e.config;let f=((i=(r=e.config.wallet)==null?void 0:r.customStyle)==null?void 0:i.supportChains)||((n=e.config.wallet)==null?void 0:n.supportChains);f&&e.config.chainId&&e.config.chainName&&(f.find(b=>{var _;return b.id===e.config.chainId&&b.name.toLowerCase()===((_=e.config.chainName)==null?void 0:_.toLowerCase())})||f.unshift({id:e.config.chainId,name:e.config.chainName})),f=f==null?void 0:f.map(b=>{const{id:_,name:w}=b;return{id:_,name:w}});const p=(a=e.config.wallet)==null?void 0:a.customStyle;p&&(p.supportChains=f,p.fiatCoin||(p.fiatCoin=vo.fiatCoin));const v={projectId:s,clientKey:l,appId:u,chainName:c,chainId:h,securityAccount:d,authUserInfo:e.getUserInfo(),authType:e.getAuthType(),authSDKVersion:(o=window.particle)==null?void 0:o.version,supportChains:f},m=IS.encryptUrlParam(v);let g=`${wve()}/?params=${m}&theme=${PF(e)}&language=${vo.languageCode}`;p&&(g+=`&customStyle=${encodeURIComponent(Su.Buffer.from(JSON.stringify(p)).toString("base64"))}`);const{uiMode:y,modalBorderRadius:x}=e.getAuthTheme();return g+=`&authTheme=${encodeURIComponent(Su.Buffer.from(JSON.stringify({uiMode:y,modalBorderRadius:x})).toString("base64"))}`,t&&t.topMenuType&&(g+=`&topMenuType=${t.topMenuType}`),vo.erc4337&&(g+=`&erc4337=${encodeURIComponent(JSON.stringify(vo.erc4337))}`),g}function Aat(e,t){var r,i,n;let a=`${_at()}/?language=${vo.languageCode}&theme=${PF(e)}`;const o=(r=e.config.wallet)==null?void 0:r.customStyle;if(o){const{light:s,dark:l}=o;a+=`&customStyle=${encodeURIComponent(Su.Buffer.from(JSON.stringify({light:s,dark:l})).toString("base64"))}`,o.fiatCoin||(o.fiatCoin=vo.fiatCoin)}if(e.isLogin()&&e.walletExist())t?(t.walletAddress||(t.walletAddress=(i=e.getWallet())==null?void 0:i.public_address),t.network||(t.network=e.config.chainName)):t={walletAddress:(n=e.getWallet())==null?void 0:n.public_address,network:e.config.chainName};else if(!t||!t.network||!t.walletAddress)throw new Error("network or walletAddress not found");return t&&Object.keys(t).forEach(s=>{const l=t[s];l&&(a+=`&${s}=${encodeURIComponent(l)}`)}),a}function PF(e){var t,r,i;let n=e.getThemeType();return(t=e.config.wallet)!=null&&t.uiMode&&(n=((r=e.config.wallet)==null?void 0:r.uiMode)==="auto"?window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light":(i=e.config.wallet)==null?void 0:i.uiMode),n}var Sat=`
  <button class="particle-pwe-btn">
    <img class="particle-pwe-img particle-pwe-wallet-icon" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVR42mNkYAAAAAYAAjCB0C8AAAAASUVORK5CYII=" alt="" />
    <img class="particle-pwe-img particle-pwe-down-arrow particle-pwe-down-arrow-hide" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVR42mNkYAAAAAYAAjCB0C8AAAAASUVORK5CYII=" alt="" />
  </button>
  <div class="particle-pwe-iframe-content">
  </div>
`,Cat=()=>{const e="particle-wallet-entry-container",t=document.querySelector("."+e);t&&t.remove();const r=document.createElement("div");r.classList.add(e),r.innerHTML=Sat,document.body.appendChild(r)},Eat=Cat,Mat="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAHgAAAB4CAYAAAA5ZDbSAAAAAXNSR0IArs4c6QAAIABJREFUeF7dfQlwXdWZ5neenvanXbKNWWRWIxkIiwgTQmwSSIPorsmiOEhqZEjiHjuTiUUcsqjLnqbHrjipqXhipqobd1HdiQWWXY4gSXfaIsGAFDLNopiwWLLxIj0veJFkWct72t67Z+o/9913t3OX9yQZ05dyCVt3Oef+5/+/71/Ofxn+kxxvPHz2E/EgX8bjWAaGag4s5GD5Cud5jLE8hSMfDEWKmC8bUcAjjLFoXFF/KmBnAXZAAT8AKAdq2xa++5/h1bCP4yTerj+9JM6U+znY5xSghoNdT/Pg4g9L/NT+rv4EGFThIvFTfp52feK8w5yx1xWOfZkBtu+h58pOftze18dCwPtXnq5AULkfjN2nKPgcY+xqRYiNhKb9VIXIxX+q8My/N5+nXWc8X71Ofl7i/MOcYR8Utm86Pt351T2XDVzqAr9kBfzKvTxYvvDUgzzAmhTgv3KwHFVougZqGqlqrn8NdtN0iwaL58nOBxBROJ5njLW+u7R035NPMm04l5TMLzkBv//w8Tt5IKOJc9SDsQpdw1w1yyAEfxpsvK9c490tgK7p4nkfgmNnnLNf1O8uff9SkvAlI+BDDR/eE4fyQw72l2aNdNIgdwy13kM1396abtRg7fwEMXO9XrMsnLN/Uxh+0thW+tqlIOiPXMCHHj5RywOBv1XA7zFiplEYMqy1YrBuRo2abjTnzhisEzArptuvtz/H4b4cf+CM/6ixrazjoxT0RyJg/iQPfHDw5BcAtICxO81Y6ovd2giVEwY7Y7aZkGnX29m2E7ZbCZ0DO2fsLYXjR0eXFv/mo8Dpiy7g3lUny4Iz+F8cfC3AAlYWrLNbHQN9sNt5x2Bntu1kGVSXTcyHMUVR+D/yrODfPbqjcOhiavRFEzAHZ331J1crDFs4UOZfU2blxyZxczYYLGfdZkvj5YcnsH0IjP2gaWfRPzMwzSmYV3lfFAH3P9J/ezyW8X/BcLeXf2rWFKNw/bNoWVDD2V92uq/VJVPP8xq/+TlG827iBv8vHlD+5uvPlfXMq3TFiOf56P/rE7Vc4c9ysFIn4pQeu5VjqDWS5Ry58sZg93FZgyIpRcjIfJ9XFPbIN3YX7Z1PEcybgPlKnnE8eHIz5/wHnDFmjhD5Ybdufqic3fph20ZC536++fmpWhYj27ZziOT4OQd+HIoVbfzqHhafD0HPi4D7VvYtyghm7OLACmd2a40Nm82ZXRNTiSXLXSU3jUz6sYZwpbcG6361GYP1YIvb/A337wzEgvVf2xM6M9dCnnMBH3/4+LUsgBcV8Gt1YuMZ4zUkALSX44aNur+aLrv1GyHTgxz+ImSyGLcvy8JxVOF4YM3u4qNzKeQ5FfCJhhMrGPgeDlTYo1F21uknQiTzT9PXLHOGScaOjQTNDzewn+/Xj5di9kCc46G1u4q750rIcybgk43hlYyzVgU826q58+nHyvxmeWTKbBGMsWTnSJbZUvi576z9eM6jPIDH1uws3jMXQp4TAX/YEH4cwFZy6Z3ysTJMtWu5ez7Xj0bNNpbsV4NT9ePtWSoXTVfRYP2atqKfzVbIsxbwmYa+Bs4ynlU4D8wmlmzEOj9+rD+sSz+WbA+f+sPgVNm2UeMtlo6G8OjatqJnZyPkWQn4dH3fvYwFfq8AQZ+RHDFWGXG5ZGPJjvlgo/lOJ0vlw4/niIHxB77ZVvxyukJOW8CnHz5+ZyCD71M4L5Bhk08/MFmRYT/f3Q/2Pn92fqy2CI2WIjXLMmd+/BhjuP+bO4veTEfIaQn4dEN4WYChk3OKKWsa6c+PNbJiZwy2+5GpxZL1sKKTZZBFvLRFYzabzvloc42Xv/k7R9Ycw5pk8YbiCr9rXRouVMoC5isPZA0GQ/sV8GVu/p1zbZR8ZRs1MtUIU6rs1ox1Tv62cZF89H4853h/IF5wx5N72HQqmpyygAcbwj9TwJudNdG/HyjzQ/3HktPRLLsfLDO7fti9e4zb/Tnp+vEK+LZvtxWRx+L7SEnAg/X9X+IMzxsn5yefa9fIuY0lG2uqciuDuKIuhNKabMSiHCM90/iwYwLDPVOmktqMPIbrmwqQUxEQOZfR8AyOd0whMhBLZo00TXeJJc+aQ6Tqx3Owr3y7raDdr4R9C/jcyr5FgSDr5UAxrUB3P1COof7rknWzmYqlKF+Ri2vXFEnn/sH2MZzunBDpvvzKIG7bWIJgnnn6tCDe3jqKoZ5pSX21NRLnZqnc5y+3XK4YbFh0GA7EAtXf8hm39iVgKrE5fzD8OzDcZ2WX6eVZ5z6WHMgL4NanKkCa6XS80TyEiYE47nmmwiZc7ZqZKEfXuvOYjtLMZPlfN3ZsxOrUY+lmSye/XiwOxl46f0PoAT8lQL4EPFzf95jC2L8YsSNVDJJFmFLB4Iy8DJTX5qOiNg8ZeQHEowqG35rE8dZxxKIKSHuvcdBeTXhHW8dBArxxTYGrhXtv+zhOdk4Kbc+tyMDly7OTGnSiawrjA2pmbz5j6XLvxIDtjDU07yzY5WWqPQU88PWDBcGJnGMKeLk7azbUICVXvizv67wynbCahHvNxlLkVmba5hMNz+DgpmEsqM0T2Ot2nOqIYiaiYInHeUfaozjcHsWS2lxUNeXbbvn29gj6OydNOyfkfrnz/P358fagkG4x2Ymp3MllP/jnijG3OXsKeLih72ccaJbHkmV5T+86ZvdIlr0Gq6KuAIvqnLVusGsC0XAMVzW5a2Z/e0S8iyV1dqEZX9KR9ggmBjluXuO8YF7bPIYBKVZ7z18mXCtz9/b7RX5823faClxZtauARx85tjQeZwcAluHElucSg50waNkzi4RZdjv+3DyAW7dVuJ7zzuYLQoNrtpS6nvfm5hEhXDLPTsdgzwz+sHlMyqIvoh8fnwG/6Ym2woNO43QV8IWGvpc58FkjVhqxwQ8GmV0qdRh+/EDjc27eudgLanBw83mEqrIczfTZrgkcfHpMPPvWjcUorsqS3vNc9zR6WyNYsa3E85kvNA75YNv+arWM3oJzhEziXzO27/GdBfenLOBhkUhgr8grH9yzNN67++RhPVr5WZVBEOZODcYwPaAIDbnFh4D/tPqc8HsX1+VjcW2+iU0T9oZ/GRG/p5dH7tHStYWoqCHypB/DvTPY/9MRzESBB3eW+xDweRcNpsuNOyWM3MN5/s5xBSfXixOt/ux3dhW8KhuwowaPNPR1cOABp1iuHSO8Y7FumptbnY3L1pQg02AWIz1TON06CsLgopocxxc+2juNg5voZesvtag6W2jreH8MMwaXx6gp5A+XVGcJl2isP4bRcCyhkRz3P1Pu6ErRU6KDCl5cdwG5FQFcdkcWMvMZpiMcfV3T4n5anCAVP96IzX4wWL83XvxOW8GDvgUceaT/9liMd/NkdbZ9H67b/txUMSi3OgdXbpBrDLlD4a0XULm+WIrD9Hti0ePhGanGeLNVM6vXLNa1dbm43oWM7d8eQV55ADfW5ZreK7lhf26dwNEky7Zqsvr3VGvCnCNeYvyc8/gn10tKfaQaPFrf9yvO8AWZxhmxMRU/1q1S4upti0yaa12Jw11RDOyNYvGqQoGz2jHWO43jO8YQEcJNFeu8/dib14ZwxXK75TjaMYGZCMeNdXmOVuW1rRGc6FbzAnKu4h1Ld+cqFm+D49frdxV80Togm4AjD/ffHg/wbiq/MQ7OSWOda5DURzlFvrTFQZhbuWWhK96Rlr6/+owwn5kVAWRVZCLSP4O4wFSXiI8pWa+d53a+OYlPgyqpzkRpVSbKqjMxEo7heOcURsJxPPRMKTJdombD4ThebBl1nb+3pTP7wdr5Mo7DOTjn/Mbv7i78wPgybQIeE34vZYvssVd7LNnZD/aHQRxknq9wMM/Ggb7TeFrCvo1lNGaGSUTtsto8FFZlYqR3BuQDaxpBfjCx6LHwDI61R0V0y+qHus2/tDoT92wo9CRhbY3DLhrstDvR27LQWO3CFtdte8LiF5sEzP9bd+b4aOkpbtpZL8cQ7x4Xck2xBjlYHsN1z7i7QdODcfSuO5tS741btpQi3xD5IiZ9dMc4rlkVwhUP6qaVYtNvtAxjOqqO1xsbgfLqLHx6g3tQhd7arsZhmwbbOYHTe9LGoxUi+qgJY+xcKJR/xZp/YipmWfcmjTb0fZEBL9hXs17tSBf58WMNDM8Tg67YWI68KrPLYlSPs+1jONM+Lu2eQ5p6RVMBsisyQGz6zN4J5C0JonqD3Y/94+oBfPoZezCkZ/sYzr41hatq81BSlSlY95H2CWGSZf4p/ZuXiY4MKvjNuhExDTlX8Rvxcr/ezm34l55oK/yVVMCRxr5fxTn/gkbR08Vg99olfWVqZiaQl4HKHy9AZrk9cjQRnsHhlkGTZhkxqGpLGfIMmnq+exJnOiakAu5qPIflOxfYTCsJuPyOLCww+MVktjvXncdUQrOtHGRpXa4nyTrZPT0vGCyvYFH1lXO++4ldBfU2AY+tPFzBghmnOJApW3HyygdvDHZmkWYMolBk+aoiFNbkgFJ/M4NxDHdGQdrrNJ786iws3WAPO77bMoSl3y1GtmHBXOidxjubLuBai4mm4Mdr64Zw7zN2N+2NzSOgkKSGeVbLdfvafFwlMk3m4/32CfR3TaOoMoj88gDO9M5gOKwuEf3P3GCwxDsZz41NXPatPQvGTSZ6vOHo40Dg//jBICP7+yj3BhVUZ+MGiYD3N6saf2VdSJjukR4iWTRfdQObIFnVmcLV+aB1HBMDCu7faTfd+7eO4XT3lLQfl6bRRZUZWFSjBjrofn1dU7j+wRzcUGt2r872xNC5NSIsQro1Yd4RQnXRKIx97fs7Qz83CTjScOznHHjUaWeCmx+bnr+cOgaRdl+1tkgEPMZ6pnGidRRL1haZTDTh8IFNw46sWLco5uffsCofVxnIF0W1KCZN6cLCyqBg2gdaozieyBObNVHXzFtX5QkByw5ynX63aTwhZPPznS2d03tyZdu/+F5b6DGrgPs5WKW3BqfB7iQxWSPVl2OKmV2S/3vDFqrY0LNKlAs+snUYi+sKkEUkq2cap/dGRcxZ33tk9QKc/WAiWRU1WaLqo3fHOD65sVgI13j8UZhtjXyZzWx+RQZqt8lLhrR7dLdOoGcv1YdZx2X+uyYH+44Pd+8kYVnC32sLLUkKeKK+b4nCeJ8bO3aPPc++WtGoWbLIT8mKfFwpqdjobjyT7EHpNf5UsjRkyWolCYdD7VEcbFdru6zc4PraHHyiyTm6RXM82xvDi5uMHoFWFpS+dyLr+BfjwatbduX2Cz94vLHvMXD+L5ofmGqExQ82yIrJ3Z9jthREqK7dIOrskwdFsvavpj3T2uZwsx/rXFPlb8/S5yUJB6rm0M20uV66ui4X9MftIAGTmbZH+OSWxug3u3sn6vVJC8zxte/vCv08IeBjuxjHw3YnXB2qPhj1795+sNGM+PMDzRgkY+cMS9aXmLJK/dtHMJiolJSxU3KfqHx2qHsKY+EYLk9g7PGOqGEesg546vPJbfrE2lAyq3SmexpvbtVYvX1ei2uycPd697Kho13T+OPTUal/ne6eLRk7B5jAYSHgSMOxfgCV5jpgq3A1ofnFYPP1Rmz3U62oDdqKQYU12cipzMSF7ilRpmONRRNWl96Rg3Ndk1i2sUSUyBImH2sdww1r1PDiwe1jAmdDV2XiVBdhtjFwb16cORUZAocpBTgTAWrWh5BHzDwcw/6noxgOkxulV1/WPlUkXCOn44XmEYwNqAzBzYI5CM0j9m6yYIe+31ZwI+NNZ/KjsegogIDxpn5jyW6s24+mp19tqU9GwyAiYJ94ivK4AZzvnkJGPkNRVRYmB+M4/PQYbt5QLF7rkdZxXNekatrprkkcSFR6yOavWZbMvAA+91SJKcEQHVDQ0XwhISzV0hVXBnHvxgJpIuI/tkdxpJNqrnXhzsX8ze85uVjjlbH8bDbe2Hcr4/xt1fT6res1J/f9sGBz1sm7y47LvlkLbHBRAVJck41oOI6qjSWimoMiWkeeHkPJndnCD44OxBCqzBRCII2muiyq7DjdRbseYoKdhzuIPJktlWZBSquD+NQGO0N+uWUEF8JxE6bSYqj+Sg5KKoNC0JEBBQc7pnAmwb7NsOfE6p1iz06WVcfgZIQQvIpFG/vqOedtOrY6RVjc9xxpq8gcBLFGbvyybTkGqytf382ovXyKZhVUZ2FqII6j20eRVxnEuc7JRCWHJW+a4BAUACmuVnPLVYk66UOtEfTvNQpZfR49t6AyE8u32AX8r6vVRIVx/sbgDwl4WZ0qbDrGBxS88/wkxgbUJWyPL7jvGzbO38rirRxKYbyBReqPPgnG/k6dilMNkf3f5WbG+frUMdgoZHfLsmxLuQh2EKt+a7WWdZJrhhWzi6ozcUfCdH/QGkHfXiJg8gqWW9cW4EpDaPJoxyTe2UGluDqLN8asSaif3ViALEne+MXN4zjTQ5rvrcF+LKudIFPzyMDfs2jDsVYOPKJrsH3F+6lI0FaWeSV7a3D6GKTDBAU5ypbnYrh7SpTuyFa20Y83+41MaDKZ6+KqoCiVfe/pMVF4J9tLdeWKHOSUMwz2xjAg4tS6H2s9/6+2FSFfbG6zH6T1v2kZw/iAWghoff9O+Wj9/Xp7JwCeZZGGY9TP+AH1AfOHwUaz5QeD3HfdOWO4E4aaNcW+Y4CK7+5IYKy6s0GumfSCqbrjtjXEpgMgovX61nGcD6u7ErXnVK7Iwl1r3Avs32qdxPt7tR0SZgtqfl/p9bHmYC+SgF8HcJcbBsttvXMs2c8OeTNmG1ewfwxyrss2V3r48ePJHfovW9Qdh7TD8Gwy1WeeJ/2+9hlzBouEvLf5gqn3CAU8bvIIepzpjaFjk15pYjezdguYCgYDeIONNxw7yICls8FgPyzan2bJ+1L5sSwyDHIbl+xlknu1eEUOqIHkya4Jg5nWF11ZdRB3S9j0r1cPJ85XMfWG2mzc6hG27OmYwhs7JqQYnk4s3cqhONg7pMEiyDFXGGw0v25+sNlMe2OQDOtStSwyf9GIdaHKID61Ra0E6e+YQO8Oo3apWEtBjxUWNk2Zpt+s1spzVK2jYAhhsNvx8tYIjndTsMZ7/vYwpa9Kj0MkYArmJssavWKk9mCAkQX63fHghKFm/zr1WLJTRMqOYUYN1l4eEax7tqnmlzCYynas74Ouu21tyMSm/7Q9gr5Oyhub53XX2nxcLSkIoPPOh+P41xaKSZvfn2xcdlbv3opKO5+DnSUBE8qLsgT5zeUvXRe0bOe7kx9r//fU/ECnl2HFKjkGm4sT5BpQWp2F7IoATnWqKT3zPPX7EpvOLWc43R3DsCBY8pd+26pcLLXkhynh8MpPI5hMFvo5P8f6fHtWzzmWDo4p8oMnwVii7sTbj021p0Sa+cy08rmGlet5vRMG12wsQkFlEPtNRMucpSKsvqkpX7DoD7tncKRjUqLp+mIgc11SmSFcpjM9Mzgfpj1XVtasejHGalU/3MZ9x0NgymSirebXDUOtGmzEcGd2q6/UVDE4TQyyaJY9kmbEdvKHaxIEilg0CVlmqQiDqd5KO8gf7toszzLRIrjpyzmgYgDNNPd2UJcArUbLf4RQG4vVj5dxi8T7EiY6SbKsGCJbQXPhn8lXprOr5BZhk5ndVPLMZrYKVK8tABW27//pKEYNMWbtOU4smtwkijkbNZMiWQ9ssRfIU5CDkv6qJqeKwcbzncPK6n0DYRZtPHaQc9VNon9y1iy5f+pfsy5ujNseIXP3r2nuNzTli0gW1WJRIZ4Mg8uqs3C3ZFcDZZV0rVRZ9F9sKZSGKekd07m/bKYknrsGy5TOj2VNLPJDLFJ/7HUwNdDhT1Pcshzpd8+xJ7vNKzWVvVF+Ndh4HplnLZJ1qmsS7z5NrS/klSIrthSbTPRg7wxe3aSdr47bjx/8x+0T+ECwb03IZqxP1Y+3yy/whiVUacRIGTtzxzD3lWVl2zqLnUc/0DcGU4TqnqfKTJEsp/mIDeRfyRVCHuiJ4fBeylzpGSW67tPrQ7i8Rt5FQMPuP7dP4s/tVrbuHCGUYa1HFeyLFMlqZYlkg18MdsNQGTt0swwyDPKjgUaNp/roy74cAlVZ9reaNck+HrMFCuQBt6wvRsGSIN7ZOorpiJLAXjvWEXu+vk4VLIUn32uNYsqw2dv4/qrrcjxDlSTgt9uNsWg/fnwqGMyeZZHGvifBuUgXWjHYzQ/UfpcqBtvP988inWLcSzeWoiCxb/i9liHDZnBn4qaNv7g6G7cnmPOHXZN4P1ndYbdgn7GwZ70Ri/E56nusqM7CZze412e1N48my3fs2mnNUvnrT232x9HCxhqP1Ad4QCT8vTDY7Gdaz7f6df7zubPFoIW1IVzZVCBqtE53RFDxmVyc+8OESPpbsT2Z7anLx2XLc3CiY0L8pGQDafBgD23atueDCyozsHyLWvJjPGQVHep8OB7YUoTiSnmnniOi+I4iZapGqsqlPtcce5fLRebHW+XHEfiSpWTHzKLdMNWZbTvFSJ0x2A+2eLFN7R537VwkJkFlObTDYUlTCOPhGI61juPqphAo3kw1WVorJarXem3deQNWy3cMUITrUxL2/HLLaDKSZX1fVM1xz3dDWFBlLp4nP/itHVpttdyCaZbOaCn9vCfj+QxKFeMrD4QmgnkXOLhYak4RFmNFhh8MdvaX5ezYOPhUMdho9q9eW4SK5bn4sCOCnPKgKJulgwR8TaLQbrB7SrQ/XLQ8F8faI+hrj9qS+7KaMNJg404H2um/r+WCtOyGNJdcLsJ0xhhoDxMRsdM9M4Ykv5vr6e5FGDVYBnsKuBJdGsq0lM1aMcs7Rmq8uTeLNg7auyLBzgk4Spbni20qVH812EX1xXbLoC3SihW5uG5NIaYG43h30wXclii0e3/rCAa6NfZqr8jQXx5EbfTCOzJF3dXJrilcXZsrOutQ2WzvL9WUonHeRMDuXJsnqiu1g67d3zqBIyaXKL3521mzfP4cUMtmaRC08Yy+8OGMwX7YnR2DZWbGuQZJryixY5BqWZasLzUVvg91TqBvO5WtmjHMOA9aDJMD8WQihSouNZfGzVKQBaqszTP1qqTrXlp33pQnNs6HqikfeqrIsXfH69ujOJwQcmrehnt/bdn8OaAXvo/XH3mMsYDoJmthYdJYrPU8PxUc7mzbOcukaUeoOgfXSLaKvtc8gMkBrb9Vun68TnR0bWS422KS6d1oe5Po/zVN1+Z/i8vOQjqfNPlX60YTWST3LF1q3obZMtLi4YktpEKDtc1ns8Ng40uyhiW9qzXdY9wMeZK9SeKFbz4vtpI6WQaZH+wWITKef+9Tpci1dB0gAR+S5Inp+bXbShyL7DRz/XtRTakl+c2RK387Pvx5JzM8Q998ljDT/dxU2eE/Rpoqu3PHajM2aYuOCtNvfGqBbfvooU3DwkWiAnfaPnqqPSK65/hl3ZqwKTp1fVMIC+/MFg1LD7ZGEarMwPWWXlhdLSOS/K865rqd7k1OaS6agI2WQvb+UuM25iwdBws/Ydw+quMwe9SYj9QB3W+15VznM831xrmVWVhYF0KoOkto7cnWMVyzvti0AZzI19vNgzaN9qrLrlpbgMWWpmevNg+LZuALa7IEbn/QPiFaCMssAAnpU+tDoA1obsdvW0ZFFsmPH+tmaVSYdOxA+IsnrBvAxxuPNTGOHc4ryy2WLMcwu+tjxPjZYxA1CK/aYu+t0bP5PGIRoLIphKLqLLG7kNwk2nBGJKuyLh+LVuQiFlFAxe7nuidxv6Q5CzUFpz9GVq37mfbxl1dnYoVLeyWq5Pi9aW+wlVjKOYR3XbrFO+Fs1RO7Qq3qEkgc5A9HM3PPKxyZxpVhXynp+GfelSJldQUoXJ6fbGl4oTOKgefHBAM2j0fHINJo6rJjPd5rOY+qjcViE5p20H3ebB7CDWsLhP9rPN5sGcYt3y1EjgVvKW3Yt1eretTmbZ5/YWWGiE1Tm3/ao/SJVXlYIqnDorZK//7DMUyaYtd+skd278R9PzaP8GDBwu+1MtH93NQILVJ/zNCjcm4x2I2dX7VlAbIl7fqphWHfpiFQKyUny1K5thjlBoFRj46T7eOolnXf2TyMWyT9syjYMTmooNrwLQfaT/zGphHTviN9sUMI9aamPJDWaofo4/HLCVw4Hsf1D2ajeElQNGahnpWH9k651GDZs3SpYrD2fjlY0jzbBdzQ90UF/AUtlirfPiHXYDum2Km71TLQ/UvqClBW59wWcHogjkPNZ6URNu1+FIsOVWVirDeGc51RZOQHcNs2u+l+q3kIN28stmnqYbHpLAoKRxZVBRGPAic79bpo3Syrloj83fstW0mNFoG6zR5Kar4RlqwJA7/ehhzOZBgMoHZ9W4h2qyRQ2jAyamUYGSs9yYEFfiImMqLgpGlOrLZy22WunWZpeIdbBjBh6DpnZ+H2xXTt2iIsMGg2dXw/9PQYFq7IxVKDplKcunvTcHITuNv4tbw1pQzdOs2SJv/buhFTNx13Vi+PA/j3NpIcaCC/IHS5YytDepljDUd/BgSaU40lp1tted3Oy11ZJ/2yb/N5jPaoedNUxrVgRR6yygOYGuQ406mFNTkoRUhNSklTT3WqO/xlsWcnrPv0xiKUVdm/AGOcyCubx3DO4O9aK1KMyuEee7djsAu73rberRkp3Yo2hHPO3/aoFBBzkbFLqwbo2CvP0lQ+dZm0haHxZfVtHsKY+DSdxjqtMXKjGUx1XP7y0UYzfd9TJaIZuNvxyuZxnO0x9rH2n2XzZs1mtp2siAmwW9Y/F3rPOC5pQ/Cxxr5f8UTPShH2ShYDOHd+nzcMHozj0LqzWFBXID6MpfXJGuqM4vTzERGm9I5MpRdLz60IYvHybOSWB0QL/zPdM7gQnsEn1xeK7nZux+9EGlHb+Z96LNmt2lJqWTj/9fpdhd4NwWnQF+qP1gRY4E1qCm4WrjUIOewsAAAJp0lEQVRi4uzHyQiaGVPUezHqFruxXMqiVfM8hAVfDiG/2t4Tklg2RbIiYTX4oN0/9brsJIYl77F4Ra70u0nH9k7g9J9m8GmXftEDvTN4JdkqyU/Hd51DGN+3Xwwm3OI8UPOd3fn7rYvO5aMctG+YiY9yOGeZ5FWU7phifJkqplK32fJVhSioyRWNSOmI9E7hzI5R5FG9VZMzy6aIFsWj/WSp/I6L9grfKdlBqL08ikdTrlfWiJQ0nSosx5L+u/z9pYrBrvl4xl58fGcKH+UQZKu+716F4RWr1tn9M7/+sj8MyqwIYspgdq/bUiHaJrkd7zYPiPwwLY5FtXnJ+iwKbtCnZfVd/6rFoWhWeU0OymqyEItwjIXj+FBsF1UrI2s2FIvid6eDzvv31eeFmSYhFy0JIjIQFxWWH+ydTPjOep7ZXROd89kyiyd1XTlS/6wOTW6ksf8lzpX75BhnZXdGouMne6Rfb98aql+/zMc3k0iDKaCgdtixk5/D20dxplONSFGDlmXri0QNlvGgEp/uTRfEp3X+QtJ51irsV5PddXSLpBPK1OYvSw3KWLfUAnFl3+O7ilL/MBYNdrSh70YFeJ8DGfabW6Mv1pWoJQrctzo6s271fks2liHfpRs8jfNAyyCuW18iWgfLDhLeW+sGRded27eUibos2UGx6v9oGcbnJL2j5QLWO8I79dQwCl2+u9FIAM1KIvP3LTs24koGlj3+bOEhJ2vj6+OUDKzZaWeBV5bGrS7Zz8798roCLHT5MCV9z+HEjjFcu95e8WicNCUbIuFYshma0ws5sH0MVz2YK3YYupno366mQr35iCXbLaP2nqyVLhxsW/NsPk5Jj9I+L8vByzXC5Zfdqee7a7qspsro7xKuXr2xzBGHe1uGQO0NL/f4ZCxllAiLKz3OOyryyXHcut6Z2Jk7zrpXRc52/nYcTpYnnYjOxedlaYDDjX2PcQ7RjdaNrc4XBolP5KwqRMlyw9dSwjMIPz2K8fC06Be92JeAYyJV6HaQgGln/+IV2bhZ8iHpYx0TeH+HMYUo32zuFLlyj/i5f2fK+P7jjDc07yya/QeitZcx3ND/ew5+v7pJ2VszZcRhLjAovzpHsGxKQmjjoO8d3rLN/rENoyB7t46IfPDtHp+WJROtfv2bCSJGCX8qlaUqSqqqpC2iftmtG4bKvBNvPz5ZFP/St9uKPu+6UhO/9MRg7SbnVvYtCgZZjwJeYmTV/uql09916B4h0+97xaoCLHpQrp2EvftbhgRmUumsE8miIvguUQTvbKmsFkzfX6wHK9wtndPuTPn1Nn+Z4wyLB2771p4Q9VbxPHwLmO401NBfB+CXfjA43Xymjln+YsTGCNaVEiGP9E6jV3wyVhUNFQFUf7fI9v1gyv9S11n1C6R6zFuHHX9+vBmm0rF0HrF0nnH//9gV2ucp2VQ1WLvhYEPfzwDWbNcs9Qx7lx7zyky1Q4D/LJX6fDLXhSKsyRHpj2MsEca0jqusJlv0kqbRTQ0qOCW+Fuo9fue9RO7zl78v5w52Mu+EscC2b+50/6S7VfApabDQrpUHsoYy8v/EGW5y02R5bNie99TuIcdsa9ZIRmhS+9afX8uinWccnxuH8I69y7epmO9vz5Lpv8ebZbHCz3x1D1M/aerzSFnAdN+BR44t5fHAHwFWlg4GeWd/5JUPfrDRhlniRfiJLDlho/x6+3P8Y3DK82dsKBBX7lqzu/ioT7kmT0tLwHT1YOOxTyo88BIHKzBqcqoYZA9Tzn8+1w+H8D+uOYglJ8Qh7Z7DMBaP475v7S56K1XhqktzFsdgQ//n4hwvcsaCWlDDCYPnAoO8/HB6Rvp9ufxxiLnwY513MNjCujGFK5//5q6SV9MV06wETA892xB+hDY6cck3H9L1A40sVr+HtVwn1QiZUztDucWYLz9eZhmk+WvGFIXjkbVtRYnN+emJeNYCFkJuPP5NhSv/4JZ18vaXnf1APxgqq6nyg3Xe4zJjsJloee/48OvH2yKECv/va3YX/2N6YtWvmhMB0+1ON4ZXcgWtYMhOu6bI1hvSvV44tef4Y9syVu+O2bPvXGDCXgb6psBjq3cW75mtcGeNwdYBnG44sYLz+K85CxR5VxG6s9v5zlJpmmXci+VH450x2IlFq/+uchSvCFlgAJw/9I1dxd1zIdw5F7DQ5Ibwsjjwa4Bda175ZqzT2LZfP9CMxer051uztPtL2a3l+d5+vHz+Bq/jaEDBA4+l4Qq5LYY5M9HGh5xtOLZwGsHdAFbYX477Srd2xXFm53ILINcU9288uHe1MbPrVOqyjcEeD/+8M4bgw3/TFjo7V5qr3WdeBCy0ayXPOBE8sQnAD43VmW7bYfz4p/ZIlFOEyN57w7na0inl59dSGBetfz+ei1PZT3JjRRu+uofRLrs5P+ZNwNpITzx8olYJ8Gc5UOqNQebekO7n29mtHl6ce3br7cebLZMnh+D8DDIyvv7oc0V751yqhhvOu4DpWUdXfnhVMBh7TgHu8e0HunTP8ZOP9qoUsfMDe02ZG4ew/k5uju1eQAIOXovHslZ+zWfKbzYL4KIIWCVEnIUbT35d4fwnFMNOLeLl/a3DVLNUdkx04gZ2DE6dbavj54wNQVFa/npX6TNM3VMw78dFE7A2k5OrTpZNzSj/G2CPKSJU6o6h/jRFlqWyY7DfCFlq/rXbBz+SGky3fHomM/g/H91RSJUHF+246ALWZnak/tTdYMo2BaiRYe3FyFJpz3Vn0bofa65ulLN4mxfA+essmPGt+meLbdtKLoaUPzIBJwXdcOLBOPC3APuMG4um83Wz7s1u7X6pO7tN14918eNf4wp+VL+7dF5JlNci+cgFrA3wUEP4HrCMHygcf2XXKH9+bApZGlOXG2+2blwcnn78bwH246+2lb7m9fIvxu8vGQFrkz3YcOIWzgLf4BwNClCha4ifXXoO+2Z9xLgtOwZsPTCtkTTLuAaAwC4OPPOVttJ3L4bg/D7jkhOwNvBX7uXBhYtOPRAHmsDYFxQgx6hpl0AsOcKBF6Cw1uKzpS9/9lWmfh3rEjsuWQEb39PBrw8UTE1O/yU47uOM3cc5rvbjx2r+8hzGkg+DsX1xhe3LzZzZ+0DrItGq6FI+PhYCtr7At+tPL+FQ7gNj9xEL52DX66zbym7Vq+UxbvdaLQZ2OM7xOgLsZcbYSw89V3byUhambGwfSwHLJvJ6w9lbGPgyAMs4sEwBFnKOPASQTz8VsHyAFyWwdoT2mCscUc5AXxAkTTyrcNbDwA7EuXLgwd0L3/m4CVM23v8Px4l5/WI3HHkAAAAASUVORK5CYII=",Tat="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAHgAAAB4CAYAAAA5ZDbSAAAAAXNSR0IArs4c6QAAGm5JREFUeF7tXQ1wHdV1Pmf1/C9ZQrKxCU0wofyakpZCmMkQQzAZA+kUmEZYT7GxMaQ2pdTGMRAyTUNqhobpTIunMw3TySSAjSWNmwCdZggN5qd1EgMGyo/BDlhPsgzG2MZ/ksD2e3s6u/tWe3fv39l9P5aYKkOM0e7be/fcc77zfefc+xA+Iz8vzt/zpVKOZlMJZgPCeQQwgwCnuESTEXGySzAFEJpdf754yAUaQsThkhv86QLuAcCtLtBWAHfr1V0z3vgsvBoci5N4rWP3rBK6VxLgFS7ARQR4pjcP8v/B8p/h34M/ARAC40L5T/V14f3l694lxM0uwcZxDm685rG2XWPtfY0JA7/avns65NwrAXGu68IViHi665vNM1r4Z2BE8v8XGC/++/h14X3i9cF96uvK179LCBvBxY3HSsdeuGHDKXtHu8FHrYGfu5xy02a8fxU5uNAF+HMCnBgYLfLA0CMDz+V7sMnTEx7sP091PQAMuQS/QMS1b5zduvHeezEczqiy+agz8Fvzd15MTsNCIugAxOmRhxk9SzACz4PFz1V7vDkCRJ7uP+8DIFhfInyko6f1rdFk4VFj4O35Dy4tgftdAvxG3CN1HmTG0ORnBOHb7umiB4fXlxMz4/1hZCHC/3QRHujsat00Ggx9wg28ff7A1eQ433OBLhUxUzSGCmuTGByFUdHTxXCux+AoAUtiuny//BzN5xL8DyHd39nV9qsTaegTYmC6l5zfb9t1LQDcA4gXx7GUld1KCZUOg/WYHU/IwvvlbFuH7cmETpOdI77sEty/4+yW/zgROF13A79z46623HH4ewJaBoBOMguOstsIAxnZbc0xWJ9t6yJDQNn8+SC6rks/pvG5Hyx6dOr+enp03QxMQFjo2HWLi/APBNDG95SKeOwIblaCweqsOx5pbDy8jO37AfHuheubf4qAISmoqb3rYuC+BX0XlooN/wIIX7Hx07iniMblZ9EqUUPPl3Wfm6RkwXW28cefI4b3WG7w25LjfnvJY21v19S6/ohr/NP3rYGryaV1BNiqS5yyZbdqDE0qWXrlyo7B5nElRZFUCpkXvj92XVxwc0/zU7U0Qc0MTO3UsDO36z4iupsQMa4QcbJbEw9VZ7ecbFtM6MzXx5+fNrKI2bacQ4yMnwjgR43F5u/fsAFLtTB0TQxcaC/MbMg1dBPAZfrsNqkNx8OZ7IlptGQ1VTJ55AiPFeRKuwdHvDqOwZHYYpq/8PkvOMVcx00bGj+stpGrbuCd83eegQ487QKdESU2Vo1XKACEL8eEjRFfzZrdchWySOTgKWQqjZsVWQh2uATzlva07Kimkatq4IH8wGUItIEApstqlJx1chQiFT/N7lnxCpMqOxYTNE5uIF/P5fFKzN5bIrhmWXfLlmoZuWoG3tXZ346Ea12gCUnPrSWPVfFmtTIVjwiilqxXsuKRgvO5FfN4omFyYPHS9S0bqmHkqhj4g3z/CgD4J4/S6+qxKkyVvdxcz+V4VKVaMteD0/J4uUpl8PQADVYu7Wp+sFIjV2zgD/OFPGHDOpfIqURLFrGOw2N5WJddS5blUx4Gp822RY9PRDpvCIuWdTWvq8TIFRl4d0fhckTn1y5Ajqnk+GNVJS6jVkvW1oPF8J2lSsXg8QRFQJp3a1fLs1mNnNnAu+fvvNhpoI0uUZMKm5g8cKQjQ77ezIPt11fGY8NFKEaKdJGlajz+CCJceev65peyGDmTgXfn+2c7CC8QeZpy6JE8HitmxXoMlnlkOi05khV1kUGleIWLJh429fXoeI8Xb/56ZU0ra3oRb3/JpUv+JgOFSm1gat86fl+u8VUXaLaJ3+l7o9QrW/TItApT2uw2jnU6vi0ukhPP44ngrb2lpj+9dwMeS+PJqQ28L9//oAu0XO+JfB6o4qF8LTmLZ8k8WBV2Odm9WeM2Pycrj3eB1tze1ewxFvZPKgPv6+i7nhB+IU6OU8+VPbK6WjKnpyptdluvHCItjyfAb97e1fRzroXZBv6ovTDTyeE7BNDiTd7MA9UYyu9LjsJmtkhRGQarFkM6Hm+evzpyGTF4pFRJAAeconPebUzdmmVgr8Xm4239/wUIc5PZZbY662dQSy4v+iwKWbo+bgBCfObjsxrncVqAWAY+0FFY7CL+TMSOtBikUphqjcEc5SstBousoZZaupqdCNiOmF++vqnbFqqtBt67ZFtT7pOJvS7QNHPWLPQgjXQ+qOq+6qw1Cvvi7/X3q6/Xd0Um+pgVnRlJ3pwUL8Jx6ccfZucqWdLUBarPIWRRKPocHDg66dPZd/90+hGTka0GPpAvPEgAy9UYpKp72vuYzUoWtwdL19Wo66xIVrPkxZAuu9UpUfb5q0SaZOZu5/1+fXzNHV1NxqzaaODDC3rPLpVwKwA26LLlamJwPEJwPYXPY9NhnU57HlU8vnQc6PxVXVO36bzYaOCD+cKzBPA1ESvTYlCcUgXD4HiKFYMSGjFPIVLzUw5Wc/cs1Z3HI25csb7pytQGPuAXEvA5deeDuUpj9xS1rMfpfIgnevLuQj0vt2G7jMH6iMKpUqk9nV+lSo5HR73IS6u/dkd30/MqI2s9+FC+8CsCmBe9UBnD9IpPdbVkTraqEl9MnvlZ4vEA8PQdXU1XsQ08tKDvwmKRttBId7bJU+IYWBceGNvHW10MtvdqVQeD7c/hsg3/OiIqfXmlotVH6cGHOwpPEMK1Kg+wY6O+94qzn7emnRIC/n/meDzBkyu7m65LerFk4KH5fReWHNritd+oNWf7yqolD+RWqeTFyeOxcW147PB4IiAiOuc7PVN/LxpZMvARn/d61SIVbwxuTcNjwxet5nV6Hs3hgXFj87Lz+HjS8XhZSzeP36y9V4fHJ5xpzaoEL44ZmP5yy7jBw63vU2xnfRJzTNmdWDfVYWNwf1oM0nuuHYM52bm8aM3jt/eEnQAej/hRY+OUP1j6b3g89OKYgQ/nC9chwOP67JjPYyNP4e3ZET2Lg9Wq69XZdlxZSsvj048r3KCm6nTh9WWb3r9K8Yq/L7p+VdfUJ5QGHuosPFEiujYMj1kx2Ny7FKxs7/9Dz0qjxdYag5NhX1c9C8Ufcz23Nlq6uoOlHBmJelZ1N3VIBj7S/u50zDW8TwDjROXK7CmjC4PMipSKx6fDYFXipusDF3MIPY8X5dDI43m8X6ulD04qfnLKbRtOHgxMXv4ZzO9YAeD8sx0bK8PgaPGEkzNjaN32BpUjymeBx7uIN921vvHhmIGH8r0PE8Ai04rkYeOJxqDa9YRx5j9KePwjd3Y1Lk4auI8AT7N7cIShcv1TDBvVz27r1W1Zy71U/BwiiHDyjg9Wdt9/Z1fjrBEDf9JRmOUiFUwYJvNS3ekz3HpuZdltPAG0Z/dZPUvP4+3zN+cE8vzT5RDmE/+KlDv9nu5JfT4GD3YWFgPRz0J+avcUtdjBr+dmO3vDrJDJ/JqTnev3Bpk8RdcgZ49gAXuwn3Bg2LNkvH8kQhDcdFd348NlA/d2I8F8OQFKDsbuKXJ4M6909a47VXarxla+QsbNDZjnX1Vpz5K6J8w+/7iiqGwv8nHYN/BQvrcPAE6rR08RH4OCQWfEoDLPro+WzIkUYm7D6+OutCeMtt/V1XQO0sIPpwwXhw8DgCNiQLiy9Bhk7kmqlZbsTEYoDoeJnpiImLVovqdwc4jqa8npMNj6/kunFadMwMHOwh8j0WueJ/P27Ihhmr9nx16lifPrJAaNm+bArO+0waTTcnBoy6dQeOgglIY9D41jpZ0FxGFHjCim+Z86Zzx8fs5EOD5MsO3nw3Cwv5R4X+rxq3m8HYPNkU5/v8jjHaBzcbiz0EFEXYGBIyOrsZGnpXJ256VVyGatbIWpF00MdRn4pL8I21bv843MUZhED7Z7irhoAE6dMwG+tKxp5Nn73j4Om+47rDlHmrHvN1aXjk4PUr3/aKzpcwgXKY9DHTvuBcQfBKO3Z4H6Myi4K1iU5/SdIknPOuP7bTDl3PEjL9n7F8/I78SMnL5KpdeSAyN/LmHccAC/vOVjOK6IIMn+5+w5hJho2at0KoWQ0PkhDud71xLAgsiDuRik5rFmzNZHgOTzk4ra1IsmwayVJ8UM7P1l2Pfk/T4uc3m83Pim7rb0jHuB4Lnhwwf++yi88tBgzIOjrJbbl23msbp6fPR+7ewEANbhUL7XO894Xq0x2F6l0WNwGFla50yGzy9rURr57dX7y+E6DK9mHmvTuE/RGPdwfwk2rT4Ex8qJnq1f3AZ7pi5QTnZu4vEE+LRn4M0AcIkJg6NB1haDORjUOmcSfMFg5KKPyaoqTRLrdB4QhOU/UnhuaFwv0dJjY3oM5uQQ6fqyg/kDwIs4mO/dhgBnV4LB6vqknN3aFTL1uVTJ7Nbz5NM0Rt7qh+vAyKZxqT0LwfPc8zXG/c3qQ3B82POZeD1b9ZxwkVWCwZz3asohCPB1z4N9kaNaGGxWWKIIIF7HqdIkV3DbnElaI781YmTxeeYqk2fwU+ZM1Br3t75xkzgfsg6ReukjQ1xnyIbBItabImt5cWz3DOwdgDkjBDa5gyGOjbIYEqcU8uk0ZuoVxyAdVVPvGmybMxlmLWtWYvKbZUxWz0fWkmfOmQizNZ77Ox9zvU9KUpUs3/EQ5+Gm+es7N8yNj0KnzB7PwJ8CwIQkBsu8kYctYcFCriur70/3nPhi8v7mhevTFUYe6i/Cm6s/htIwWc/l0hn3SH8Jfrf6YNlzzfOPRy6dlqzODfgYHMyfw+N9DCY46vHgTwHRN7CJB0eYEj3EjKnVw2AbP59mMPIbvpFFxUt8SQgz50yA85ZNlaLAkf4ibBay5fRacjYeqz6Xy65PeLOS35NzNBaik+HXvFL09UxeT1F1McjD5C9qPPn1spHj8wHwPPdcjXFflDDX3ili96x4DpKWnYSfz+XxLoAfokeSrHjio85C02qkYrZqz6I5GCxHhhAOphmM/L8JT55hMO5LAuam65fmnB5k5ufy++JF1sCDk893+nG4s3cbUUCT5IuCm1SUIlxN/E6J+tRZPSOfofFkz8gehfKMe47Gc19efXBExOBgYyUad7o+7nRnY5adaTsOdfRuBgyEDg4G8+u56TCI7ym6yBKNf/qcyXCGwoCD/UX4YOMwnLVEjblbYp6rixQmD6zf6UEqp1Ng8IsJqdLEG2uHQRwezI8UwRw8I/+hwshSNuW1LPUXYcuI56bTkkV+Xi8M5uRG5ff1tKdkrcVysYGLwRx+ZqvSmPhp2uxc16t1MsPInnFfURi3mnVmGwtIhvlqzR8A1+FQZ+FeIPLLhUkMTotB5uwu2RyQZc8ShwfGq2Enz5kEZ2o8OTSuqFDFcw5Re+fyeJOSJYZ3ezVInTiZeXCcj8M9eKTzvQ6HHL/gb8NgQSFhnDOVDoNlTNFhXZzH6nOC6H7PyGcljDw0UIRXf+glVIFCpduDdCK05Gr1ZRM41ydaduKptinWx8O5mG3ztdisPJCLQeJ1X7yxCT531WR/oIN9RXjtvgOCQiXOOx0Gc7PotDlEeL3IVuLzNkcA734E91yk9q2Nn+QmHySgBhUG8z0ruTh0nRv6LDhOvcweLHuWigfGPXN8WwPkJgMMDgQIK2Md5/QcUxZdGY9PM3/RLvLi8bN5d/jsxnGJttkk7x1dGBRv41GvYH1k4WrJZgzN2qsmhl1OBMraLx7OnwCCtlnvP3gbz7xv+NBjsJi48HmgKsyYzpeO92XHExJelUqn2XI8K+7R8XpuZfPnsRNTDmRWyFT1aQKIGt8HO95bjOj4p8kmsjCpcyEKI7pwpvOsbN9VyMMguXpjr7rIJcOsPJbTRWrGYPX4Q1ZiV7xkZ6DyFlLfg8PNZ5VhcPrsVowYXIUs216iyr7BjNcvLs+fm53LO0r43aZiH7T4vOPUEG0+K4fpPop1dtiVK/vKEjE8CnPZMIifnacZV9bsVh/p7LkBZ/7c7FzuvvQbLPpXidtHIxzGRarTY3grWMYwzgpOr3hFnpJN8cnWl63zFFVEqRaPNb0/NQsY8fxHViU3gA929i5Egkej1WVXTMJUfTRiUD0xmJfdmyKiOYewR6Q4BhPhjau6G9cGLlf+8fjw8LhJH7sE4+LYaFa4kp38an6m70gQOyX0Gnf2Kk3WKhVHIVOxDotnZdxLpZ6/mvXQEOWaZty5FodiBvbDdEevcEZldTGYm50nI4h3X9bslqP88LEurnFH4+K+J55CFhc7RF3CnINE/BdHwrNs4HzhOhfo8SC86VJ3kxKl2xukV4h4GMzplDDzSLtn6XMIjsIkRi7VJvh68XgAuHplV6O3W8X/kY4yHDrSuosATlZ3Rep6inRdhKb6sr1TJHyxaTEofU+YSHHGNI/fO6Wp8VTtUYaexY/kdzwI4CwfuxiU9ESfNrDPxpQ9kZeDjBIev2al6TBSbyrehnAiek324PpgUFxsSY9B6bHRvuNBxPJ02XkwfnudPB4Z7RErHhlHPt/BC1Y+1vhmGJ6lEB3+4khn4Qkqn1np3TyWMEi9P3fsacmpd3wQPbmye6r9QHDPyAc7dlzkoPOSdyh4MqsTtWhVONPxaHnl8zE4eo6sjKmqNKMJg/XsQdbCk87EUbzKOxiIyLnojp4pr4req/Vg7xeH/H3D6H8ph6nTQ6V8cRQmmS+rs3M5+9RdZ8/us43LPP+0Ox6yaulGvQDx6RXrU3wph59sdRQudxGeS3JJmTfyeaDaE+P3p8XgtFpy1nqu3hPt80/L41NjMEH6r9Xxvbiz7xkidy5PYRITinR7aXRdkUlFzV51Ue2642rPcnODyeNVMm18cYYRRR9Z5M/PcL40uRtXdDen/2Isb7CH84VzXIC3CKBBNRjTypQ9S9dREeedZk9R8W1ulUreWZHOs3Q7C7i82Tx/9fuSF12iD7vkNsDsFeumbk9ib/h31pdTIuBy0+kxds/6fy3ZnqvYc4ikQkaAa5ZX8uWU3ioIv16WgKaFCRc3uwuuH9tassgaONl5knXUav4AODBcja+X9QZ4oLOwmAj802hNPVUnBINiZ3HUH4PjCpYZQz0P1Gvv5hwmyWZKSPnl65sr/4LoMJYfyPf9moCuDAZp98y0GJwFg8w9S8nsPHi52fcS8XII0YPlSMfLIfSRIryfnrm9q/nrOtwV/7sVg8OLP2ovzMzl8G0X6CQxq651PVcWU3g8OK2WnlZLrmTHg6oLktNt6r93gg+x5PzJbRsavbNVrD9sA3uftD/f9xcA8O8cDObXWZMHm+jqnvpsNcnVTcrXmOfx1HDlX3c3brRatnxBKgN79+zLFx4EwOUqmZKDwWZPycADDRhsVq680SYxMdv50vXi8YjOmlvXm7/SPWn41Aam9q3j9zdMeYUQzrfx4PD3ctuMutvSjqlxDLVfbyqUmLP70NPjmKrHULm7UdXTxsNgVQQCgJfailO/esMGPMb13mAJZ/jZu6D3bCo5vwHANlu34WjXku38NO7pWbXkSk7PIcT9Tsm9ZGlPy4605spkYD9Ud/Z+2SXnGQJsEj05Hqbt2bYc3ngYLD4nLQZzcgj+uPRaOmdcVi0d4UipBHNv62l+Oa1xM3tw+KB9+b4rSgRPE2IuFDV0+2zVmK0/KS5tlUYFB/XCYBXFU3WbhuNRZ9FxHlyef9El9+u3dp/0fBbjVmxg7wP25PsXeBudSPGdD1l5oDoLrp6WPCZ4PKLrEixY1tVc3pyfzcSZQ7T4uD2dO291yf1XU9XJzpe5VRczDxYjhXo88fvt40pm22KiJB5LkV5LNtbZXfqrpT0tP85m1uiuqhjY+7jdnf3t5MJaQJiQup5ZHg8HG+2K12jYGxQ2+uk6UDQ9VZ5ujzAMAItvWd+yoVLjViVEi4PYnR+4jKj0JKHTXM0dD3rMyl6lCj29kuyW0+li1p6TdXNnLxBdc3N3y5ZqGLfqBvY9Od8/uwTwJACeYcoiwyzYrN3qPcC73+zxcnZrUrhMPNbcFSl3m3IiWMQCRsSVHY4L8xZnoEKmxVC1EB3D5HzvjGOQ6wGAy+SXk0VLtn/PUPoqTbC+eRisPp+Z48GqRFORG7xQhNz8b3c17qmW54afUxMD+97VTg0DuYHVAPBdsTtT5Smc3Ymip6sWjW4nhsJTjN+zJPJrTrat2qbCiRTlCOS9mgcmFZv/9oYNWKq2cWsSopODHJg/cLXr0DoCaDXzUjm7Tcdjo/s5+5llXs7PzjnVICuPJ/oQGhqWLHqs+alaGLbmHiwOekf7B1/I5YqPuQCXqhQiTqdENs/S7aXiZbccJSpbDkGbSsXx7TcxS36VLICahejkoAgI+zt3LXGJHvA07HSKlx2D01apZL6s8+BgJnL9NwiAul61eE4Q3O9pyuC693yru/UnGOwpqPlP3QwczmTXjbvajh53/xEAF7t+scN8flXSi4Lr9d2G0e+4dWZZIeNkwfGcQFwcSh7ufeRDx8fl/m7Ro1P319yqwgPqbuDw2e91vP8VQHeNC3CRCmvrUaWKa8M1wmCizZhruK1jXYu0raQehj5hBh4xdH7gqhLA9wDwqyZemxaDrVWaBI9Oq5CF4zFg8CZy4f6OntaaJlG2RXLCDRwOcHu+/1LAhrtdgj/j7JCXmwhMOxh03zNk15Iz8PhfAuCPbuhq3WR7+fX4/agxcDjZbfmBCwidm4kg7wJMjzwky/nSwadyNG6525K3b7jsyXsBnG4C+Mk3u1rfqIfhuM8YdQYOB/7c5ZSbMfP9eSWAhYB4rQswMdlDFe8z5ilkvDNB5Ow4SHlj9eshAngcXFzbsqf12a89j0XuS6/ndaPWwOJL2LZkb9PRT499AwjmEuJcIjhd5qiqPujgU6qoJb8LiBtLLm6cNO74U/PWzvSPKhrNP2PCwMkX+FrH7lkE7lxAnOtl4QR4ZpR1S54mGDlJicw8FgHfLRFsBgefRcRnrnmsbddoNqZqbGPSwKqJbM7vuQCBZgPAbAKY7QLMIILJ4MAU708XcAoANZex9pB3LJhLMOzVXwnA88Q9LuHbCLi1RO7Wq3pmvD7WjKka7/8BbY+V/aWsSwsAAAAASUVORK5CYII=",Pat=`
.particle-wallet-entry-container .particle-pwe-btn {
  background: none;
  border: none;
  cursor: pointer;
  height: 60px;
  margin: 0;
  outline: none;
  padding: 0;
  position: fixed;
  width: 60px;
  -webkit-box-shadow: 2px 2px 10px 3px rgba(0, 0, 0, 0.1);
  box-shadow: 2px 2px 10px 3px rgba(0, 0, 0, 0.1);
  border-radius: 60px;
}
.particle-wallet-entry-container .particle-pwe-btn:not(.is-dragging) {
  -webkit-transition: all 0.2s;
  transition: all 0.2s;
}
.particle-wallet-entry-container .particle-pwe-btn > img {
  height: 100%;
  width: 100%;
}
.particle-wallet-entry-container .particle-pwe-btn .particle-pwe-wallet-icon {
  display: block;
}
.particle-wallet-entry-container .particle-pwe-btn .particle-pwe-wallet-icon:not(.particle-pwe-wallet-icon-hide) {
  -webkit-animation: particle-pwe-wallet-icon-show 0.3s ease-in-out;
          animation: particle-pwe-wallet-icon-show 0.3s ease-in-out;
}
@-webkit-keyframes particle-pwe-wallet-icon-show {
  0% {
    -webkit-transform: scale(0.6);
            transform: scale(0.6);
  }
  100% {
    -webkit-transform: scale(1);
            transform: scale(1);
  }
}
@keyframes particle-pwe-wallet-icon-show {
  0% {
    -webkit-transform: scale(0.6);
            transform: scale(0.6);
  }
  100% {
    -webkit-transform: scale(1);
            transform: scale(1);
  }
}
.particle-wallet-entry-container .particle-pwe-btn .particle-pwe-wallet-icon.particle-pwe-wallet-icon-hide {
  display: none;
}
.particle-wallet-entry-container .particle-pwe-btn .particle-pwe-down-arrow {
  display: block;
}
.particle-wallet-entry-container .particle-pwe-btn .particle-pwe-down-arrow:not(.particle-pwe-down-arrow-hide) {
  -webkit-animation: particle-pwe-down-arrow-show 0.3s ease-in-out;
          animation: particle-pwe-down-arrow-show 0.3s ease-in-out;
}
@-webkit-keyframes particle-pwe-down-arrow-show {
  0% {
    -webkit-transform: scale(0.6);
            transform: scale(0.6);
  }
  100% {
    -webkit-transform: scale(1);
            transform: scale(1);
  }
}
@keyframes particle-pwe-down-arrow-show {
  0% {
    -webkit-transform: scale(0.6);
            transform: scale(0.6);
  }
  100% {
    -webkit-transform: scale(1);
            transform: scale(1);
  }
}
.particle-wallet-entry-container .particle-pwe-btn .particle-pwe-down-arrow.particle-pwe-down-arrow-hide {
  display: none;
}
.particle-wallet-entry-container .particle-pwe-iframe-content {
  background-color: #fff;
  border: none;
  border-radius: 10px;
  -webkit-box-shadow: -1px 3px 11px 2px #00000073;
          box-shadow: -1px 3px 11px 2px #00000073;
  display: none;
  height: 650px;
  overflow: hidden;
  position: fixed;
  width: 400px;
  z-index: 1000;
}
.particle-wallet-entry-container .particle-pwe-iframe-content.particle-pwe-full-screen-iframe-content {
  top: 0 !important;
  left: 0 !important;
  width: 100% !important;
  height: 100% !important;
  border-radius: 0 !important;
}
@media screen and (max-height: 660px) {
  .particle-wallet-entry-container .particle-pwe-iframe-content {
    height: 600px;
    width: 360px;
  }
}
.particle-wallet-entry-container .particle-pwe-iframe-content.particle-pwe-iframe-content-show {
  display: block;
}
.particle-pwe-iframe-content-dark{
  background-color: #000 !important;
}
.particle-pwe-iframe-content-light{
  background-color: #fff !important;
}
.particle-wallet-entry-container .particle-pwe-iframe-content .particle-pwe-iframe {
  border: none;
  height: 100%;
  width: 100%;
}

`,Dat=()=>{const e="particle-wallet-entry-style",t=document.querySelector("."+e);t&&t.remove();const r=document.createElement("style");r.classList.add(e),r.innerHTML=Pat,document.head.appendChild(r)},Iat=Dat,T_="particle-pwe-full-screen-iframe-content",hJ=!1,Ave=(e=>(e.BR="bottom-right",e.BL="bottom-left",e.TR="top-right",e.TL="top-left",e))(Ave||{}),dJ=null,u0,yf=class{constructor(e,t,r){this.config=e,this.auth=t,this.walletEntryOptions=r,typeof window<"u"&&(this.destroy(),this.auth.isLogin()&&this.walletEntryRander(),this.auth.on("connect",()=>{this.walletEntryRander()}),this.auth.on("disconnect",()=>{this.destroy()}))}isMobile(){return/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)}openWallet(e){var t,r,i,n,a,o;if(!((r=(t=this.auth)==null?void 0:t.isLogin)!=null&&r.call(t)))return;const s=_ve(this.auth);if(this.isMobile()||tR())return window.open(s),!1;const l=document.querySelector(".particle-pwe-wallet-icon"),u=document.querySelector(".particle-pwe-down-arrow"),c=document.querySelector(".particle-pwe-iframe-content");(e==null?void 0:e.windowSize)==="large"&&(c==null||c.classList.add(T_)),_b((n=(i=this.auth)==null?void 0:i.getAuthTheme())==null?void 0:n.modalBorderRadius)||(c.style.borderRadius=`${(o=(a=this.auth)==null?void 0:a.getAuthTheme())==null?void 0:o.modalBorderRadius}px`),c==null||c.classList.add("particle-pwe-iframe-content-show");const h=PF(this.auth);h=="dark"?(c==null||c.classList.add("particle-pwe-iframe-content-dark"),c==null||c.classList.remove("particle-pwe-iframe-content-light")):(c==null||c.classList.add("particle-pwe-iframe-content-light"),c==null||c.classList.remove("particle-pwe-iframe-content-dark"));let d=document.querySelector(".particle-pwe-iframe");d!=null&&d.src&&new URLSearchParams(d==null?void 0:d.src).get("theme")!==h&&(d.remove(),d=null),d||(d=document.createElement("iframe"),d.className="particle-pwe-iframe",d.allow="camera",c==null||c.appendChild(d),d.src=s),l==null||l.classList.add("particle-pwe-wallet-icon-hide"),u==null||u.classList.remove("particle-pwe-down-arrow-hide"),this.updateIframeContentPosition()}setWalletIcon(){const e=document.querySelector(".particle-pwe-wallet-icon"),t=document.querySelector(".particle-pwe-down-arrow");e&&e.setAttribute("src",Mat),t&&t.setAttribute("src",Tat)}updateIframeContentPosition(){var e,t;const r=document.querySelector(".particle-pwe-iframe-content");if(!r||((e=r==null?void 0:r.style)==null?void 0:e.display)==="none")return;const i=document.querySelector(".particle-pwe-btn");(t=this.config.wallet)!=null&&t.displayWalletEntry||(i.style.display="none");const n=i.getBoundingClientRect(),a=r.getBoundingClientRect(),o=window.innerHeight,s=window.innerWidth,l=a.height,u=a.width,c=n.height,h=n.top,d=n.left,f=n.bottom,p=n.right;if(f+l+10<o&&p+u+10<s)r.style.top=f+10+"px",r.style.left=d+"px";else if(f+l+10<o&&d-u-10>0)r.style.top=f+10+"px",r.style.left=p-u+"px";else if(h-l-10>0&&p+u+10<s)r.style.top=h-l-10+"px",r.style.left=d+"px";else if(h-l-10>0&&d-u-10>0)r.style.top=h-l-10+"px",r.style.left=p-u+"px";else if(p+u+10<s){const v=h+c/2-l/2;r.style.top=v<30?"30px":v>o-l-30?o-l-30+"px":v+"px",r.style.left=p+10+"px"}else if(d-u-10>0){const v=h+c/2-l/2;r.style.top=v<30?"30px":v>o-l-30?o-l-30+"px":v+"px",r.style.left=d-u-10+"px"}}setButtonStorageData(e){const{innerWidth:t,innerHeight:r}=window,i=this.walletEntryOptions.position||"bottom-right";localStorage.setItem(yf.WALLET_BTN_POSITION,`${e.x},${e.y},${e.direction},${i}`),localStorage.setItem(yf.WALLET_BTN_POSITION+"_window",`${t},${r}`)}getButtonStorageData(){var e,t,r,i;const{innerWidth:n,innerHeight:a}=window,[o,s,l="right",u]=((t=(e=localStorage==null?void 0:localStorage.getItem(yf.WALLET_BTN_POSITION))==null?void 0:e.split)==null?void 0:t.call(e,","))||[];let[c,h]=((i=(r=localStorage.getItem(yf.WALLET_BTN_POSITION+"_window"))==null?void 0:r.split)==null?void 0:i.call(r,","))||[];return c=Number(c||0),h=Number(h||0),c&&h&&(c!=n||h!=a)?(localStorage.removeItem(yf.WALLET_BTN_POSITION),localStorage.removeItem(yf.WALLET_BTN_POSITION+"_window"),{x:n,y:a,position:u||this.walletEntryOptions.position||"bottom-right",direction:"right"}):{x:Number(o)||0,y:Number(s)||0,position:u||this.walletEntryOptions.position||"bottom-right",direction:l}}updateWalletBtnPosition(e,t,r=""){const{width:i}=document.body.getBoundingClientRect(),{direction:n}=this.getButtonStorageData();let o=e>i/2||r=="windowResize"&&n==="right"?i-60:0,s=t,l="left";return o<30?(o=30,l="left"):o>i-90&&(o=i-90,l="right"),s<30?s=30:s>window.innerHeight-90&&(s=window.innerHeight-90),{left:o,top:s,direction:l}}closeWallet(){const e=document.querySelector(".particle-pwe-iframe-content");e==null||e.classList.remove("particle-pwe-iframe-content-show");const t=document.querySelector(".particle-pwe-wallet-icon"),r=document.querySelector(".particle-pwe-down-arrow");t==null||t.classList.remove("particle-pwe-wallet-icon-hide"),r==null||r.classList.add("particle-pwe-down-arrow-hide")}resize(){const e=this;return()=>{clearTimeout(dJ),dJ=setTimeout(()=>{localStorage.removeItem(yf.WALLET_BTN_POSITION);const t=document.querySelector(".particle-pwe-btn"),{x:r,y:i}=this.getButtonStorageData(),n=r||window.innerWidth,a=i||window.innerHeight,{left:o,top:s,direction:l}=e.updateWalletBtnPosition(n,a,"windowResize");t&&(t.style.left=o+"px",t.style.top=s+"px"),this.setButtonStorageData({x:n,y:a,direction:l}),e.updateIframeContentPosition(),oi(this,null,function*(){let u=0;do u++,yield this.sleep(100),this.updateIframeContentPosition();while(u<15)})},10)}}sleep(e){return oi(this,null,function*(){return new Promise(t=>setTimeout(t,e))})}preload(){const e=wve(),t=document.createElement("script");t.src=`${e}/preload.js?_=${Math.floor(Date.now()/6e4)*6e4}`,t.setAttribute("data-target","web-wallet"),document.body.appendChild(t)}walletEntryRander(){return oi(this,null,function*(){var e;Iat(),Eat(),this.setWalletIcon(),((e=this.walletEntryOptions)==null?void 0:e.preload)!==!1&&this.preload();const t=document.querySelector(".particle-pwe-btn"),{x:r,y:i}=this.getButtonStorageData();if(r&&i)if((Number(r)||0)<window.innerWidth&&(Number(i)||0)<window.innerHeight){const{left:l,top:u}=this.updateWalletBtnPosition(Number(r)||0,Number(i)||0);t.style.left=l+"px",t.style.top=u+"px",this.updateIframeContentPosition()}else{const{left:l,top:u}=this.updateWalletBtnPosition(window.innerWidth,window.innerHeight);t.style.left=l+"px",t.style.top=u+"px",this.updateIframeContentPosition()}else{const l=this.walletEntryOptions.position||"bottom-left";let u,c;l==="bottom-right"?(u=window.innerHeight,c=window.innerWidth):l==="top-right"?(u=0,c=window.innerWidth):l==="top-left"?(u=0,c=0):(u=window.innerHeight,c=0);const h=this.updateWalletBtnPosition(c,u);t.style.left=h.left+"px",t.style.top=h.top+"px",this.updateIframeContentPosition()}const n=document.querySelector(".particle-pwe-wallet-icon"),a=document.querySelector(".particle-pwe-down-arrow");let o=!1;const s=(yield Te(()=>import("./C3jiFpph.js").then(l=>l.d),[],import.meta.url)).default;u0=new s(t),u0.on("dragStart",()=>{o=!0,t.style.cursor="move"}),u0.on("dragMove",()=>{this.updateIframeContentPosition()}),u0.on("dragEnd",(l,u)=>{l.stopPropagation(),t.style.cursor="pointer";const{clientX:c,clientY:h}=u,{left:d,top:f,direction:p}=this.updateWalletBtnPosition(c,h-35);t.style.left=d+"px",t.style.top=f+"px",this.updateIframeContentPosition(),oi(this,null,function*(){let v=0;do v++,yield this.sleep(20),this.updateIframeContentPosition();while(v<70)}),this.setButtonStorageData({x:d,y:f,direction:p}),setTimeout(()=>{o=!1})}),t.addEventListener("touchend",()=>{o||this.openWallet()}),n==null||n.addEventListener("click",l=>{var u;(u=l==null?void 0:l.stopPropagation)==null||u.call(l),!o&&!this.isMobile()&&this.openWallet()}),a==null||a.addEventListener("click",l=>{l.stopPropagation(),o||this.closeWallet()}),window.walletEntryPlugin=this,hJ||(hJ=!0,window.addEventListener("resize",window.walletEntryPlugin.resize(),!1),window.addEventListener("message",l=>{var u,c,h,d,f;if(((u=l==null?void 0:l.data)==null?void 0:u.type)==="PARTICLE_WALLET_RESIZE_IFRAME"){const p=document.querySelector(".particle-pwe-iframe-content"),v=p==null?void 0:p.classList;(c=v==null?void 0:v.contains)!=null&&c.call(v,T_)?(h=window.walletEntryPlugin.config.wallet)!=null&&h.displayWalletEntry?((d=v==null?void 0:v.remove)==null||d.call(v,T_),window.walletEntryPlugin.resize(),window.walletEntryPlugin.updateIframeContentPosition()):window.walletEntryPlugin.closeWallet():(f=v==null?void 0:v.add)==null||f.call(v,T_)}},!1))})}destroy(){var e,t,r;(e=u0==null?void 0:u0.destroy)==null||e.call(u0),window.removeEventListener("resize",this.resize(),!1),(r=(t=document.querySelector(".particle-wallet-entry-container"))==null?void 0:t.remove)==null||r.call(t)}},DF=yf;DF.WALLET_BTN_POSITION="walletBtnPosition";function kS(e,t,r,i,n){const a=i,o=fve(a,["token","thirdparty_user_info","security_account"]);e.active({chain_id:t,identity:o.uuid,login_type:Q0e.PARTICLE,action:n,wallet_address:r,user_info:JSON.stringify(o,(s,l)=>{if(!_b(l))return l})})}var Lat=e=>oi(void 0,null,function*(){return new Promise((t,r)=>{const i=new XMLHttpRequest;i.open("POST",`${m7()}/auth-sessions`,!0),i.timeout=3e4,i.setRequestHeader("Content-type","application/x-www-form-urlencoded"),i.onload=function(){const n=JSON.parse(this.responseText);n.error_code?r(n.message):t(n.key)},i.onerror=function(){r(this.statusText)},i.send(`data=${e}`)})}),kat=Lat,Rat=e=>oi(void 0,[e],function*({token:t,projectUuid:r,projectKey:i}){return new Promise((n,a)=>{const o=new XMLHttpRequest;let s=`${m7()}/fast_logout`;s+=`?projectUuid=${r}&projectKey=${i}`,o.open("POST",s,!0),o.timeout=3e4,o.setRequestHeader("Content-type","application/x-www-form-urlencoded"),o.onload=function(){const l=JSON.parse(this.responseText);l.error_code?a(l):n(l.success)},o.onerror=function(){a(this.statusText)},o.send(`token=${t}`)})}),Oat=Rat,Bat=e=>oi(void 0,[e],function*({token:t,projectUuid:r,projectKey:i,projectAppUuid:n}){return new Promise((a,o)=>{const s=new XMLHttpRequest;let l=`${m7()}/apps/${n}/user-simple-info`;l+=`?projectUuid=${r}&projectKey=${i}&token=${t}`,s.open("GET",l,!0),s.timeout=3e4,s.onload=function(){const u=JSON.parse(this.responseText);u.error_code?o(u):a(u)},s.onerror=function(){o(this.statusText)},s.send()})}),Nat=Bat,Vat=class{constructor(e,t){this.config=e,this.bi=t,this.PN_AUTH_USER_INFO="pn_auth_user_info",this.PN_AUTH_TYPE="pn_auth_type",this.PN_TEMP_SECRET_KEY="pn_temp_secret_key",this.events=new eat.EventEmitter,this.uiMode="auto",this.displayCloseButton=!0,this.displayWallet=!1,this.modalBorderRadius=24,this.authResultMap=new Map,typeof window<"u"&&addEventListener("message",r=>{var i,n,a;((i=r==null?void 0:r.data)==null?void 0:i.name)==="particle-network-provider"?this.handleAuthEvent(r):((n=r==null?void 0:r.data)==null?void 0:n.name)==="particle-network-wallet"?this.handleWalletEvent(r):((a=r==null?void 0:r.data)==null?void 0:a.name)==="particle-network-auth-load-completed"&&this.hideIframeBackground(r)})}handleAuthEvent(e){var t,r;const i=this.getAuthResult((t=e.data)==null?void 0:t.state,!0);if(!i)return;let n;try{n=this.decrypt(e.data)}catch(u){n={error:fi.decrypt(u)}}if(n.wallets){const u=this.getUserInfo();u&&(u.wallets=n.wallets,this.setUserInfo(u))}if(n.security_account){const u=this.getUserInfo();u&&(u.security_account=n.security_account,this.setUserInfo(u))}if(n.token&&n.uuid){const u=n,c=fve(u,["redirect_type"]);this.setUserInfo(c),this.setAuthType(((r=e.data)==null?void 0:r.authType)||""),this.bi.records({record_type:Hk.PAGE_LOGIN_SUCCESS_BACK})}const{resolve:a,reject:o,container:s}=i;if(n.error?((n.error.code===8005||n.error.code===10005)&&(this.setUserInfo(null),this.events.emit("disconnect")),o(n.error)):a(n),s)try{"remove"in s&&s.remove()}catch{}const l=document.getElementById("particle-network-container");l&&(l.style.display="none")}handleWalletEvent(e){var t,r;((r=(t=e==null?void 0:e.data)==null?void 0:t.data)==null?void 0:r.type)==="logout"&&(this.setUserInfo(null),this.events.emit("disconnect"))}hideIframeBackground(e){var t;const r=(t=e==null?void 0:e.data)==null?void 0:t.state,i=this.authResultMap.get(r);i&&i.container&&"remove"in i.container&&(i.container.style.backgroundColor="#00000000")}setAuthResult(e){if(e!=null&&e.container&&"close"in e.container&&!e.container.closed)try{e.intervalTimer=setInterval(()=>{if(e!=null&&e.container&&"close"in e.container&&e.container.closed){const t=this.getAuthResult(e.state,!0);t&&t.reject(fi.userCancelOperation())}},500)}catch{}this.authResultMap.set(e.state,e)}getAuthResult(e,t=!1){if(!e)return;const r=this.authResultMap.get(e);return t&&r&&(r.intervalTimer&&(clearInterval(r.intervalTimer),r.intervalTimer=void 0),this.authResultMap.delete(e)),r}login(e){return oi(this,null,function*(){var t;this.bi.records({record_type:Hk.PAGE_LOGIN_BUTTON_CLICK});const r=yield this.buildUrl("/login",{login_type:e==null?void 0:e.preferredAuthType,support_auth_types:(t=e==null?void 0:e.supportAuthTypes)!=null?t:"all",account:e==null?void 0:e.account,prompt:e==null?void 0:e.socialLoginPrompt,authorization:e==null?void 0:e.authorization}),i=new URL(r).searchParams.get("state")||"";let n;if(e&&e.preferredAuthType&&(this.isSocialLogin(e.preferredAuthType)||e.account&&uJ(e.preferredAuthType==="email"||e.preferredAuthType==="phone"||e.preferredAuthType==="jwt"))){const a=e.preferredAuthType=="facebook"?800:475;n=yield this.openUrl(r,a,770,!0,"login")}else n=this.getIframe(),n.src=r,(e==null?void 0:e.preferredAuthType)==="jwt"&&(e!=null&&e.hideLoading)&&this.hideLoading(n);return new Promise((a,o)=>{this.setAuthResult({resolve:s=>{var l;this.events.emit("connect",s),kS(this.bi,this.getChainId(),((l=this.getWallet())==null?void 0:l.public_address)||"",this.getUserInfo(),Pw.LOGIN),a(s)},reject:o,state:i,container:n})})})}isSocialLogin(e){return e!=="email"&&e!=="phone"&&e!=="jwt"}logout(e=!0){return oi(this,null,function*(){var t;if(this.isLogin())if(e){try{yield Oat({token:((t=this.getUserInfo())==null?void 0:t.token)||"",projectUuid:this.config.projectId,projectKey:this.config.clientKey})}catch(r){if((r==null?void 0:r.error_code)!==10005)throw r}this.setUserInfo(null),this.events.emit("disconnect")}else{const r=yield this.buildUrl("/logout"),i=yield this.openUrl(r),n=new URL(r).searchParams.get("state")||"";return e&&this.hideLoading(i),new Promise(a=>{this.setAuthResult({resolve:()=>{this.setUserInfo(null),this.events.emit("disconnect"),a()},reject:o=>{this.setUserInfo(null),this.events.emit("disconnect"),a()},state:n,container:i})})}})}accountSecurity(){return oi(this,null,function*(){yield this.openAccountAndSecurity()})}openAccountAndSecurity(){return oi(this,null,function*(){var e;if(!this.isLogin())return Promise.reject(fi.notLogin());const t=yield this.buildUrl("/account/security",{token:(e=this.getUserInfo())==null?void 0:e.token}),r=yield this.openUrl(t),i=new URL(t).searchParams.get("state")||"";return new Promise((n,a)=>{this.setAuthResult({resolve:n,reject:a,state:i,container:r})})})}getSecurityAccount(){return oi(this,null,function*(){var e;if(!this.isLogin())return Promise.reject(fi.notLogin());const{projectId:t,clientKey:r,appId:i}=this.config,n=yield Nat({projectUuid:t,projectKey:r,projectAppUuid:i,token:((e=this.getUserInfo())==null?void 0:e.token)||""}),a=this.getUserInfo();return a&&this.setUserInfo(j9(j9({},a),n)),n})}hasMasterPassword(){var e,t;if(!this.isLogin())throw fi.notLogin();return((t=(e=this.getUserInfo())==null?void 0:e.security_account)==null?void 0:t.has_set_master_password)||!1}hasPaymentPassword(){var e,t;if(!this.isLogin())throw fi.notLogin();return((t=(e=this.getUserInfo())==null?void 0:e.security_account)==null?void 0:t.has_set_payment_password)||!1}hasSecurityAccount(){var e,t,r,i;if(!this.isLogin())throw fi.notLogin();return!_b((t=(e=this.getUserInfo())==null?void 0:e.security_account)==null?void 0:t.phone)||!_b((i=(r=this.getUserInfo())==null?void 0:r.security_account)==null?void 0:i.email)}sign(e,t){return oi(this,null,function*(){var r,i,n;if(!this.walletExist())return Promise.reject(fi.walletNotCreated());let a;((r=this.config.chainName)==null?void 0:r.toLowerCase())==="solana"?a=yield this.buildUrl("/solana/sign",{token:(i=this.getUserInfo())==null?void 0:i.token,method:e,message:t}):a=yield this.buildUrl("/evm-chain/sign",{token:(n=this.getUserInfo())==null?void 0:n.token,method:e,message:t});const o=yield this.openUrl(a),s=new URL(a).searchParams.get("state")||"";return new Promise((l,u)=>{this.setAuthResult({resolve:c=>{var h,d;kS(this.bi,this.getChainId(),((h=this.getWallet())==null?void 0:h.public_address)||"",this.getUserInfo(),Pw.SIGN),l((d=c.signature)!=null?d:"")},reject:u,state:s,container:o})})})}signAllTransactions(e){return oi(this,null,function*(){var t;if(!this.walletExist())return Promise.reject(fi.walletNotCreated());if(((t=this.config.chainName)==null?void 0:t.toLowerCase())!=="solana")return Promise.reject(fi.unsupportedMethod());const r=yield this.sign("signAllTransactions",JSON.stringify(e));return JSON.parse(r)})}sendTransaction(e){return oi(this,null,function*(){var t;return this.walletExist()?((t=this.config.chainName)==null?void 0:t.toLowerCase())==="solana"?this.sign("signAndSendTransaction",e):this.sign("eth_sendTransaction",e):Promise.reject(fi.walletNotCreated())})}switchChain(e,t=!1){return oi(this,null,function*(){var r;const i=this.getUserInfo();if(!i)return Promise.reject(fi.notLogin());if(typeof e.name!="string"||typeof e.id!="number")throw fi.paramsError();if(!DS.getChainInfo(e))throw fi.unsupportedChain();const a=i.wallets;if(((r=this.config.chainName)==null?void 0:r.toLowerCase())===e.name.toLowerCase()&&this.config.chainId===e.id)return a;if(this.getWallet(e.name.toLowerCase()==="solana"?"solana":"evm_chain"))return this.config.chainName=e.name,this.config.chainId=e.id,this.events.emit("chainChanged",e),a;const s=yield this.createWallet(e.name,t);return this.config.chainName=e.name,this.config.chainId=e.id,this.events.emit("connect",this.getUserInfo()),this.events.emit("chainChanged",e),s})}setChainInfo(e){if(typeof e.name!="string"||typeof e.id!="number")throw fi.paramsError();if(!DS.getChainInfo(e))throw fi.unsupportedChain();this.config.chainName=e.name,this.config.chainId=e.id}createWallet(e,t=!1){return oi(this,null,function*(){const r=this.getUserInfo();if(!r)return Promise.reject(fi.notLogin());if(this.getWallet(e.toLowerCase()==="solana"?"solana":"evm_chain"))return r.wallets;const n=yield this.buildUrl("/wallet",{token:r.token,chain_name:e}),a=new URL(n).searchParams.get("state")||"",o=yield this.openUrl(n);return t&&this.hideLoading(o),new Promise((s,l)=>{this.setAuthResult({resolve:u=>{s(u)},reject:l,state:a,container:o})})})}hideLoading(e){const t=document.getElementById("particle-network-container");t&&(t.style.display="none");try{e&&"remove"in e&&(e.style.display="none")}catch{}}chainId(){return this.getChainId()}getChainId(){return this.config.chainId}chain(){return this.getChain()}getChain(){return{id:this.config.chainId,name:this.config.chainName}}basicCredentials(){return`Basic ${Su.Buffer.from(`${this.config.projectId}:${this.config.clientKey}`,"utf8").toString("base64")}`}isLogin(){return this.getUserInfo()!==null}isLoginAsync(){return oi(this,null,function*(){return yield this.getSecurityAccount(),this.getUserInfo()})}userInfo(){return this.getUserInfo()}getUserInfo(){const e=localStorage.getItem(this.concatStorageKey(this.PN_AUTH_USER_INFO));return e?JSON.parse(e):null}getAuthType(){return localStorage.getItem(this.concatStorageKey(this.PN_AUTH_TYPE))}setAuthType(e){localStorage.setItem(this.concatStorageKey(this.PN_AUTH_TYPE),e)}walletExist(){return this.getWallet()!=null}wallet(e){return this.getWallet(e)}getWallet(e){const t=this.getUserInfo();if(!t)return null;const r=t.wallets.find(i=>i.chain_name===(e||this.walletChainName()));return r!==void 0&&r.public_address.length>0?r:null}getEVMAddress(){const e=this.getWallet("evm_chain");return Promise.resolve(e==null?void 0:e.public_address)}getSolanaAddress(){const e=this.getWallet("solana");return Promise.resolve(e==null?void 0:e.public_address)}setAuthTheme(e){e.uiMode&&(this.uiMode=e.uiMode),e.displayCloseButton!==null&&e.displayCloseButton!==void 0&&(this.displayCloseButton=e.displayCloseButton),e.displayWallet!==null&&e.displayWallet!==void 0&&(this.displayWallet=e.displayWallet),_b(e.modalBorderRadius)||(this.modalBorderRadius=e.modalBorderRadius)}getAuthTheme(){return{uiMode:this.uiMode,displayCloseButton:this.displayCloseButton,displayWallet:this.displayWallet,modalBorderRadius:this.modalBorderRadius}}on(e,t){return this.events.on(e,t),this}once(e,t){return this.events.once(e,t),this}off(e,t){return this.events.off(e,t),this}removeListener(e,t){return this.events.removeListener(e,t),this}walletChainName(){var e;return((e=this.config.chainName)==null?void 0:e.toLowerCase())==="solana"?"solana":"evm_chain"}setUserInfo(e){e?localStorage.setItem(this.concatStorageKey(this.PN_AUTH_USER_INFO),JSON.stringify(e)):(localStorage.removeItem(this.concatStorageKey(this.PN_AUTH_USER_INFO)),localStorage.removeItem(DF.WALLET_BTN_POSITION),localStorage.removeItem(this.concatStorageKey(this.PN_AUTH_TYPE)))}concatStorageKey(e){return`${e}_${this.config.appId}`}getIframe(){let e=document.getElementById("particle-network-container");e?e.style.display="block":(e=document.createElement("div"),e.setAttribute("style","display: block;position: fixed;top: 0px;right: 0px;width: 100%;height: 100%;border-radius: 0px;border: none;z-index: 2147483647;background-color: rgba(0, 0, 0, 0.5);align-items: center;"),e.id="particle-network-container",document.body.appendChild(e));let t;const r=document.getElementsByName("particle-network-iframe");if(r.length>0)t=r[0],t.style.display="";else{t=document.createElement("iframe"),t.name="particle-network-iframe",t.className="particle-auth-iframe",t.allow="publickey-credentials-get";let i="#FFFFFF";this.getThemeType()==="dark"&&(i="#1C1D22");const{width:a}=window.screen;let o="400px",s="650px",l="50%",u="50%",c=this.modalBorderRadius,h="translate(-50%, -50%)";a<500&&(o="100%",s="100%",c=0,h="none",l="0px",u="0px");const d={position:"absolute",left:u,top:l,transform:h,width:o,height:s,border:"none","border-radius":`${c}px`,"z-index":"2147483647","background-color":i,"max-width":"100%","max-height":"100%"};t.setAttribute("style",Object.entries(d).map(([f,p])=>`${f}:${p}`).join(";")),e.appendChild(t)}return t}openUrl(e,t=475,r=770,i=!1,n="sign"){return oi(this,null,function*(){const a=this.getAuthType();if(i||uJ(a==="email"||a==="phone"||a==="jwt")){let s=cJ(e,"particle-auth",t,r);return s||(s=yield this.continuePopup(e,t,r,n)),s.name="particle-auth-popup",s}const o=this.getIframe();return o.src=e,o})}continuePopup(e,t=500,r=750,i="sign"){return oi(this,null,function*(){return new Promise((n,a)=>{gat(()=>{const o=cJ(e,"particle-auth",t,r);o?n(o):a(new Error("popup window blocked"))},i)})})}buildUrl(e){return oi(this,arguments,function*(t,r={}){const i={project_uuid:this.config.projectId,project_client_key:this.config.clientKey,project_app_uuid:this.config.appId,chain_name:this.config.chainName,chain_id:Number(this.config.chainId),sdk_version:rR(),device_id:yve()};Object.assign(i,j9({},r));const n=Nnt();let a=IS.encryptUrlParam(i);const o=a.slice(-32);sessionStorage.setItem(`${this.PN_TEMP_SECRET_KEY}-${n}`,o),a.length>1e4&&(a=`session_key_${yield kat(a)}`);let s=`${xve()}?params=${a}&encoding=base64&theme_type=${this.getThemeType()}&display_close_button=${this.displayCloseButton}&display_wallet=${this.displayWallet}&language=${vo.languageCode}&state=${n}&fiat_coin=${vo.fiatCoin}`;return this.config.securityAccount&&(s+=`&security_account=${encodeURIComponent(JSON.stringify(this.config.securityAccount))}`),vo.erc4337&&(s+=`&erc4337=${encodeURIComponent(JSON.stringify(vo.erc4337))}`),`${s}#${t}`})}getThemeType(){return this.uiMode==="auto"?window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light":this.uiMode}decrypt({data:e,state:t}){const r=sessionStorage.getItem(`${this.PN_TEMP_SECRET_KEY}-${t}`)||"",i=IS.decryptData(e,r,"hex");return JSON.parse(i)}};function Fat(e){if(typeof e!="string")throw new Error(`[isHexPrefixed] input must be type 'string', received type ${typeof e}`);return e[0]==="0"&&e[1]==="x"}function q9(e){return typeof e!="string"||Fat(e)?e:"0x"+e}var zat=class{constructor(e){this.auth=e}assertEVM(){var e,t;if(((t=(e=this.auth.getChain())==null?void 0:e.name)==null?void 0:t.toLowerCase())==="solana")throw fi.unsupportedMethod()}sendTransaction(e){return oi(this,null,function*(){return this.assertEVM(),this.auth.sendTransaction(q9(Su.Buffer.from(JSON.stringify(e)).toString("hex")))})}personalSign(e){return oi(this,null,function*(){return this.assertEVM(),this.auth.sign("personal_sign",e)})}personalSignUniq(e){return oi(this,null,function*(){return this.assertEVM(),this.auth.sign("personal_sign_uniq",e)})}signTypedData(e){return oi(this,arguments,function*({data:t,version:r}){return this.assertEVM(),this.auth.sign(`eth_signTypedData_${r.toLowerCase()}`,q9(Su.Buffer.from(JSON.stringify(t)).toString("hex")))})}signTypedDataUniq(e){return oi(this,null,function*(){return this.assertEVM(),this.auth.sign("eth_signTypedData_v4_uniq",q9(Su.Buffer.from(JSON.stringify(e)).toString("hex")))})}getAddress(){return oi(this,null,function*(){return this.auth.getEVMAddress()})}getRpcUrl(){return this.assertEVM(),`${`${bve()}/evm-chain`}?chainId=${this.auth.getChain().id}&projectUuid=${this.auth.config.projectId}&projectKey=${this.auth.config.clientKey}`}},Hat=zat,Uat=class{constructor(e){this.auth=e}assertSolana(){var e,t;if(((t=(e=this.auth.getChain())==null?void 0:e.name)==null?void 0:t.toLowerCase())!=="solana")throw fi.unsupportedMethod()}signAndSendTransaction(e){return this.assertSolana(),this.auth.sendTransaction(e)}signTransaction(e){return oi(this,null,function*(){this.assertSolana();const t=yield this.auth.sign("signTransaction",e);return Su.Buffer.from(t,"base64")})}signAllTransactions(e){return oi(this,null,function*(){return this.assertSolana(),(yield this.auth.signAllTransactions(e)).map(r=>Su.Buffer.from(r,"base64"))})}signMessage(e){return oi(this,null,function*(){this.assertSolana();const t=yield this.auth.sign("signMessage",e);return Su.Buffer.from(t,"base64")})}getAddress(){return oi(this,null,function*(){return this.auth.getSolanaAddress()})}getRpcUrl(){return this.assertSolana(),`${`${bve()}/solana`}?chainId=${this.auth.getChain().id}&projectUuid=${this.auth.config.projectId}&projectKey=${this.auth.config.clientKey}`}},Gat=Uat,Dg,jat=class{constructor(e){if(this.isParticleNetwork=!0,oat(this,Dg,void 0),e||(e={projectId:"34c6b829-5b89-44e8-90a9-6d982787b9c9",clientKey:"c6Z44Ml4TQeNhctvwYgdSv6DBzfjf6t6CB0JDscR",appId:"c1ad1496-5707-4db6-8a2b-3e9f7273d846",chainName:"Solana",chainId:101,preload:!0,wallet:{displayWalletEntry:!0,defaultWalletEntryPosition:"bottom-right"}}),(!e.chainName||typeof e.chainName=="string")&&(!e.chainId||typeof e.chainId=="number")&&typeof e.projectId=="string"&&typeof e.clientKey=="string"&&typeof e.appId=="string"){if(e.chainName&&e.chainId){if(!DS.getChainInfo({id:e.chainId,name:e.chainName}))throw fi.unsupportedChain()}else e.chainName="Ethereum",e.chainId=1;this.config=e,sat(this,Dg,new Ket({sdk_api_domain:m7(),device_id:yve(),sdk_version:rR(),project_config:{project_uuid:e.projectId,project_key:e.clientKey,project_app_uuid:e.appId}})),this.auth=new Vat(this.config,W9(this,Dg)),this.walletEntryCreate(),this.evm=new Hat(this.auth),this.solana=new Gat(this.auth),typeof window<"u"&&(this.openActive(),window.particle=this)}else throw fi.paramsError();(e==null?void 0:e.preload)!==!1&&typeof window<"u"&&setTimeout(()=>{this.preload()},2e3)}preload(){const e=xve(),t=document.createElement("script");t.src=`${e}/preload.js?_=${Math.floor(Date.now()/6e4)*6e4}`,t.setAttribute("data-target","web-auth"),document.body.appendChild(t)}openActive(){var e;this.auth.isLogin()&&((e=this.auth.getWallet())!=null&&e.public_address)&&kS(W9(this,Dg),this.auth.getChainId(),this.auth.getWallet().public_address,this.auth.getUserInfo(),Pw.OPEN)}setAuthTheme(e){this.auth.setAuthTheme(e)}getAuthTheme(){return this.auth.getAuthTheme()}switchChain(e,t=!1){return oi(this,null,function*(){return this.auth.switchChain(e,t)})}setChainInfo(e){this.auth.setChainInfo(e)}walletEntryDestroy(){var e;(e=this.walletEntry)==null||e.destroy(),this.walletEntry=void 0}walletEntryCreate(){var e,t;this.walletEntry=new DF(this.config,this.auth,{position:((e=this.config.wallet)==null?void 0:e.defaultWalletEntryPosition)||"bottom-right",preload:(t=this.config.wallet)==null?void 0:t.preload})}openWallet(){var e,t;typeof window<"u"&&(this.auth.isLogin()&&((e=this.auth.getWallet())!=null&&e.public_address)&&kS(W9(this,Dg),this.auth.getChainId(),this.auth.getWallet().public_address,this.auth.getUserInfo(),Pw.OPEN_WALLET),(t=this.walletEntry)==null||t.openWallet({windowSize:"large"}))}buildWalletUrl(e){return _ve(this.auth,e)}openBuy(e,t,r){const i=Aat(this.auth,e);typeof window<"u"&&window.open(i,t,r)}setLanguage(e){vo.languageCode=e}getLanguage(){return vo.languageCode}get version(){return rR()}setFiatCoin(e){vo.fiatCoin=e}getChain(){return this.auth.getChain()}setERC4337(e){typeof e=="boolean"&&e?vo.erc4337={name:"BICONOMY",version:"1.0.0"}:vo.erc4337=e}};Dg=new WeakMap;var Sve={},N4={},IF={};Object.defineProperty(IF,"__esModule",{value:!0});function Y9(e,t){var r=e[0],i=e[1],n=e[2],a=e[3];r=to(r,i,n,a,t[0],7,-680876936),a=to(a,r,i,n,t[1],12,-389564586),n=to(n,a,r,i,t[2],17,606105819),i=to(i,n,a,r,t[3],22,-1044525330),r=to(r,i,n,a,t[4],7,-176418897),a=to(a,r,i,n,t[5],12,1200080426),n=to(n,a,r,i,t[6],17,-1473231341),i=to(i,n,a,r,t[7],22,-45705983),r=to(r,i,n,a,t[8],7,1770035416),a=to(a,r,i,n,t[9],12,-1958414417),n=to(n,a,r,i,t[10],17,-42063),i=to(i,n,a,r,t[11],22,-1990404162),r=to(r,i,n,a,t[12],7,1804603682),a=to(a,r,i,n,t[13],12,-40341101),n=to(n,a,r,i,t[14],17,-1502002290),i=to(i,n,a,r,t[15],22,1236535329),r=ro(r,i,n,a,t[1],5,-165796510),a=ro(a,r,i,n,t[6],9,-1069501632),n=ro(n,a,r,i,t[11],14,643717713),i=ro(i,n,a,r,t[0],20,-373897302),r=ro(r,i,n,a,t[5],5,-701558691),a=ro(a,r,i,n,t[10],9,38016083),n=ro(n,a,r,i,t[15],14,-660478335),i=ro(i,n,a,r,t[4],20,-405537848),r=ro(r,i,n,a,t[9],5,568446438),a=ro(a,r,i,n,t[14],9,-1019803690),n=ro(n,a,r,i,t[3],14,-187363961),i=ro(i,n,a,r,t[8],20,1163531501),r=ro(r,i,n,a,t[13],5,-1444681467),a=ro(a,r,i,n,t[2],9,-51403784),n=ro(n,a,r,i,t[7],14,1735328473),i=ro(i,n,a,r,t[12],20,-1926607734),r=io(r,i,n,a,t[5],4,-378558),a=io(a,r,i,n,t[8],11,-2022574463),n=io(n,a,r,i,t[11],16,1839030562),i=io(i,n,a,r,t[14],23,-35309556),r=io(r,i,n,a,t[1],4,-1530992060),a=io(a,r,i,n,t[4],11,1272893353),n=io(n,a,r,i,t[7],16,-155497632),i=io(i,n,a,r,t[10],23,-1094730640),r=io(r,i,n,a,t[13],4,681279174),a=io(a,r,i,n,t[0],11,-358537222),n=io(n,a,r,i,t[3],16,-722521979),i=io(i,n,a,r,t[6],23,76029189),r=io(r,i,n,a,t[9],4,-640364487),a=io(a,r,i,n,t[12],11,-421815835),n=io(n,a,r,i,t[15],16,530742520),i=io(i,n,a,r,t[2],23,-995338651),r=no(r,i,n,a,t[0],6,-198630844),a=no(a,r,i,n,t[7],10,1126891415),n=no(n,a,r,i,t[14],15,-1416354905),i=no(i,n,a,r,t[5],21,-57434055),r=no(r,i,n,a,t[12],6,1700485571),a=no(a,r,i,n,t[3],10,-1894986606),n=no(n,a,r,i,t[10],15,-1051523),i=no(i,n,a,r,t[1],21,-2054922799),r=no(r,i,n,a,t[8],6,1873313359),a=no(a,r,i,n,t[15],10,-30611744),n=no(n,a,r,i,t[6],15,-1560198380),i=no(i,n,a,r,t[13],21,1309151649),r=no(r,i,n,a,t[4],6,-145523070),a=no(a,r,i,n,t[11],10,-1120210379),n=no(n,a,r,i,t[2],15,718787259),i=no(i,n,a,r,t[9],21,-343485551),e[0]=Uf(r,e[0]),e[1]=Uf(i,e[1]),e[2]=Uf(n,e[2]),e[3]=Uf(a,e[3])}function g7(e,t,r,i,n,a){return t=Uf(Uf(t,e),Uf(i,a)),Uf(t<<n|t>>>32-n,r)}function to(e,t,r,i,n,a,o){return g7(t&r|~t&i,e,t,n,a,o)}function ro(e,t,r,i,n,a,o){return g7(t&i|r&~i,e,t,n,a,o)}function io(e,t,r,i,n,a,o){return g7(t^r^i,e,t,n,a,o)}function no(e,t,r,i,n,a,o){return g7(r^(t|~i),e,t,n,a,o)}function Wat(e){var t=e.length,r=[1732584193,-271733879,-1732584194,271733878],i;for(i=64;i<=e.length;i+=64)Y9(r,qat(e.substring(i-64,i)));e=e.substring(i-64);var n=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(i=0;i<e.length;i++)n[i>>2]|=e.charCodeAt(i)<<(i%4<<3);if(n[i>>2]|=128<<(i%4<<3),i>55)for(Y9(r,n),i=0;i<16;i++)n[i]=0;return n[14]=t*8,Y9(r,n),r}function qat(e){for(var t=[],r=0;r<64;r+=4)t[r>>2]=e.charCodeAt(r)+(e.charCodeAt(r+1)<<8)+(e.charCodeAt(r+2)<<16)+(e.charCodeAt(r+3)<<24);return t}var fJ="0123456789abcdef".split("");function Yat(e){for(var t="",r=0;r<4;r++)t+=fJ[e>>r*8+4&15]+fJ[e>>r*8&15];return t}function Xat(e){for(var t=[],r=0;r<e.length;r++)t[r]=Yat(e[r]);return t.join("")}function Zat(e){return Xat(Wat(e))}IF.md5=Zat;function Uf(e,t){return e+t&4294967295}var Qat=_r&&_r.__spreadArrays||function(){for(var e=0,t=0,r=arguments.length;t<r;t++)e+=arguments[t].length;for(var i=Array(e),n=0,t=0;t<r;t++)for(var a=arguments[t],o=0,s=a.length;o<s;o++,n++)i[n]=a[o];return i};Object.defineProperty(N4,"__esModule",{value:!0});var Kat=IF;function P_(e){var t=parseInt(e,16),r=t>>16&255,i=t>>8&255,n=t&255;return r+","+i+","+n}function iR(e){return(+("0x1"+e)^16777215).toString(16).substr(1).toUpperCase()}N4.invertHex=iR;function VA(e,t,r){var i=e,n=300-i,a=t;return"m 150 "+(100+a+200*r)+" Q "+n+" "+i+" "+(200-a-200*r)+" 150 Q "+n+" "+n+" 150 "+(200-a-200*r)+" Q "+i+" "+n+" "+(100+a+200*r)+" 150 Q "+i+" "+i+" 150 "+(100+a+200*r)+" z"}N4.generatePath=VA;function Jat(e){return'<svg width="300" height="300" viewBox="0 0 300 300" xmlns="http://www.w3.org/2000/svg"><rect id="bg" width="300" height="300" fill="rgb('+P_(e.background)+')" /><path d="'+e.paths[0]+'" fill="rgb('+P_(e.colors[0])+')" /><path d="'+e.paths[1]+'" fill="rgb('+P_(e.colors[1])+')" /><path d="'+e.paths[2]+'" fill="rgb('+P_(e.colors[2])+')" /></svg>'}function $at(e){var t=Kat.md5(e).split("").filter(function(o){return o!=="-"}),r=t.splice(0,6).join(""),i=t.splice(t.length-6,t.length).join(""),n=Qat(Array(10)).map(function(){return parseInt(t.splice(0,2).join(""),16)}),a={paths:[VA(n[0],n[1],2),VA(n[2],n[3],1),VA(n[4],n[5],0)],colors:[i,iR(i),iR(r)],background:r};return Jat(a)}N4.generateFromString=$at;Object.defineProperty(Sve,"__esModule",{value:!0});var eot=N4,tot=Sve.generateFromString=eot.generateFromString;const Ab=Fe(!1),pJ=Fe(),rot={data(){return{isExpand:!0}},components:{IconButton:Or},emits:["connectMetaMask","connectOkx","closeConnectModal"],methods:{connectHandle(e){e==="metamask"?(_K("metamask"),this.$emit("connectMetaMask")):e==="okx"&&(_K("okx"),this.$emit("connectOkx"))},closeHandle(){this.$emit("closeConnectModal")}}},Cve=""+new URL("metamask_fox.CLFSiahS.png",import.meta.url).href,iot=Object.freeze(Object.defineProperty({__proto__:null,default:Cve},Symbol.toStringTag,{value:"Module"})),nR="data:image/svg+xml,%3csvg%20width='16'%20height='10'%20viewBox='0%200%2016%2010'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cmask%20id='mask0_31917_7341'%20style='mask-type:alpha'%20maskUnits='userSpaceOnUse'%20x='0'%20y='0'%20width='16'%20height='10'%3e%3crect%20width='16'%20height='10'%20fill='%23D9D9D9'/%3e%3c/mask%3e%3cg%20mask='url(%23mask0_31917_7341)'%3e%3cpath%20fill-rule='evenodd'%20clip-rule='evenodd'%20d='M11.3536%200.451134C11.1583%200.255872%2010.8417%200.255872%2010.6464%200.451134C10.4512%200.646396%2010.4512%200.962979%2010.6464%201.15824L14.0429%204.55469H1C0.723858%204.55469%200.5%204.77854%200.5%205.05469C0.5%205.33083%200.723858%205.55469%201%205.55469H14.0282L10.6464%208.93642C10.4512%209.13168%2010.4512%209.44826%2010.6464%209.64352C10.8417%209.83878%2011.1583%209.83878%2011.3536%209.64352L15.2426%205.75444C15.6332%205.36391%2015.6332%204.73075%2015.2426%204.34022L11.3536%200.451134Z'%20fill='white'/%3e%3c/g%3e%3c/svg%3e",Eve=Object.freeze(Object.defineProperty({__proto__:null,default:nR},Symbol.toStringTag,{value:"Module"})),Mve="data:image/jpeg;base64,/9j/4AAQSkZJRgABAQAAAQABAAD/4gHYSUNDX1BST0ZJTEUAAQEAAAHIAAAAAAQwAABtbnRyUkdCIFhZWiAAAAAAAAAAAAAAAABhY3NwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAA9tYAAQAAAADTLQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAlkZXNjAAAA8AAAACRyWFlaAAABFAAAABRnWFlaAAABKAAAABRiWFlaAAABPAAAABR3dHB0AAABUAAAABRyVFJDAAABZAAAAChnVFJDAAABZAAAAChiVFJDAAABZAAAAChjcHJ0AAABjAAAADxtbHVjAAAAAAAAAAEAAAAMZW5VUwAAAAgAAAAcAHMAUgBHAEJYWVogAAAAAAAAb6IAADj1AAADkFhZWiAAAAAAAABimQAAt4UAABjaWFlaIAAAAAAAACSgAAAPhAAAts9YWVogAAAAAAAA9tYAAQAAAADTLXBhcmEAAAAAAAQAAAACZmYAAPKnAAANWQAAE9AAAApbAAAAAAAAAABtbHVjAAAAAAAAAAEAAAAMZW5VUwAAACAAAAAcAEcAbwBvAGcAbABlACAASQBuAGMALgAgADIAMAAxADb/2wBDAAEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQH/2wBDAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQH/wAARCAC0ALQDASIAAhEBAxEB/8QAGwABAQEBAQEBAQAAAAAAAAAAAAsKCAkHAQT/xABCEAABAgUCAQYLBwIFBQAAAAAAAQIDBAYHCAUJEQoSITl4txgZGldYWZeYuNbYExQVMTiW1xYiJzI2QUJRYXGhsf/EABQBAQAAAAAAAAAAAAAAAAAAAAD/xAAUEQEAAAAAAAAAAAAAAAAAAAAA/9oADAMBAAIRAxEAPwCf+AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHUMrhXmNNystPyOKOSceWmpZZqTnZKx10o0Kdhq7mc6FFh0y5jmoiREa6GnCLzHcxYiKjhhZKy0zmLifIz8tBmpKZyZsRJahJR3cWTsGNdWmoceG5E4qjHQXOgPVq/k7gvObEc1bq4EKfwIszvRGye9gd1PlYeBFmd6I2T3sDup8rF1gAQqPAlzObxXwR8nuH5r/gFdXh/5/0r0f8Ao5nmIEaWjRYEeEsCPBVUexURFavDjzV4KqdKL/1X/svQvG/eRIt3qSgSW6luNyslLwZaXZm9k6yDJyy8Wsa68FVRP7GoioiPdFV3BOjnrEa1OCAecgAAH2G31k7zXdiaitnrS3QuizR0a7XGW/oWr65dpaOcrk/Glpqn5lYCPa5XIkeGjlhKvTzUVE+PFO3kWmlabL7ZeQWty8nKN1OczouHp01PslVh6hO6Xodg8b5jR4L057kekCJruuRIf/Nj9XiIj3MVGuCdl4EWZ3ojZPewO6nysPAizO9EbJ72B3U+Vi6wAIU/gRZneiNk97A7qfKx83uTZm7toJ3S5O6lrrjWwj6vKtn9Hk7g0ZUVExZ6A5yOfE0lKjlYKzEJE4PWMxzuC8Oc1HLDR16AxpctR0zS423ljFrcbT5ddXl8ztD06UnYkmjp+S0jXLE3tmNahK1rkVqPfoGgRHceDlfokFyxVhsRqBM0AAAAAAAAAAAAAdQ4S/rQxF7Tthe9ali6uQqMJf1oYi9p2wvetSxdXAAAARLt4nrWNx7tx5R97VSltEiXbxPWsbj3bjyj72qlA82AAAKfPIruquyA7fd1PhyxVJgxT55Fd1V2QHb7up8OWKoGv8AADG9y1rq28bu3DSHcXkObITG9y1rq28bu3DSHcXkOBMoAAAAAAAAAAAAAdSYS8YOZuIbkX/PkxYhV4Ii8GrdemYbm9PHjxRq9PQqcejgqc4uqEBCBHjS0aFHl4qwY8FeLHoqIrVROHFFVFTiqKv8Asv8A84+iklu8bqsjJy0lLbjubkpKS0t92lEXJy9Tmthsc3obEWrokR72oiMRzlcrWp0rz+CqFtsESnxw+656x7Nj3l7sfNI8cPuuesezY95e7HzSBbWIl28T1rG49248o+9qpT+fxwW676yPOH3n7z/N5Sk2ntqDborbbiw3uvdXDXHK9d1r64623vXdG5d5rX6DdS4FZ3FvBoGjXIqbWdZri40GrqofEiVBUEaCisnFYyEkN0KFCgosJ4SPAW1fE9bT/q3cJvditN8ojxPW0/6t3Cb3YrTfKIESop78iw6rS/3b5ux8OmKJ7veJ62n/AFbuE3uxWm+UTBjyjTW6z2ltxanbe7aVxrnYM27vZi1aq9dwLYYyXGrWzlv9fuK66l7beu1/+iLfVBI0uyJEpu32hs+y+7w2J9tMrChtdHiw3BTxBEp8cPuuesezY95e7HzSPHD7rnrHs2PeXux80gW1jG7y1p8PxcWNkLnqsXw3aTVU5v5ubYa+iKv5ojW817XfkvF3FqJw5ytwl+OH3XPWPZse8vdj5pPgF+MwMrsp4NPQMmckL53/AGUXF1JaUlr0XSrW4iU1G11kJNdiaIlUVBOM0Vsdmky8KLAgfZtiwoUNj2JCaxrA5cAAAAAAAAAAAAAAAAAAAtq7O3VS7cHYgxj7o6YIlRbV2duql24OxBjH3R0wB6RgAATBOWodaXYXsCWu+I/Kwp9kwTlqHWl2F7AlrviPysAyBAAAAAAAAAAAAAAAAAAAD7LYu277v3ntBaGJrH4DDuzdCgrcLq6Siag7Qkr6o9Epv8ZbpDHs+8JBTWWRISQ4kN0RsJ0JFhvdD4UkJfkWW2AsvLrP39z3dOJLtSPFkbkY6yEuq8P7ubCfi3Ee3ijlRyRY0SKrUVHuVEQCYUCn55FVtZ+f3cA9qmOv0qjyKraz8/u4B7VMdfpVAmBltXZ26qXbg7EGMfdHTB4PReRW7XCQoqQL/Z8xJjgqta66WOyNXh0K1yJizxTpXpXinTwTgnSp4LazykDcW2mKurzbQt9TWKd7LdYNXIuPi5bu4t47Y3RfcDXbd2YrXXrd0S7X326vzRVMKsGl6f0j7vChUw2OyC9GR5iZc1kd4U7QTBPLVt03zB4AeyzIr6qh5atum+YPAD2WZFfVUBT7JgnLUOtLsL2BLXfEflYPLVt03zB4AeyzIr6qjvnBLA7QuVP6LdHci3IbtV/QNV2/uA3EC2VssSdPoy3FK0ZRNtaNp28zebMXNpy9dS65MR6hvxrr3Qo8zMTUJzZiJFmpiBMSkpSgYCQU/PIqtrPz+7gHtUx1+lUeRVbWfn93APapjr9KoEwMFPzyKraz8/u4B7VMdfpVM+PKFeT/AOL21HjjZm/+Nt3L5VpJ1xeyDZ6p9CvnrVEVPGh/jdBVVXeh6tTurUBbGg4EOG51Ba0k7CjwojnfjUssOJCa2ZhqGREAAAAAAAAAAAAB1DhL+tDEXtO2F71qWLq5Cowl/WhiL2nbC961LF1cAAABEu3ietY3Hu3HlH3tVKW0SJdvE9axuPduPKPvaqUDzYAAAp88iu6q7IDt93U+HLFUmDFPnkV3VXZAdvu6nw5Yqga/wAAMb3LWurbxu7cNIdxeQ5shMb3LWurbxu7cNIdxeQ4EygAAAAAAAAAAAAB1DhL+tDEXtO2F71qWLq5BoslcmPZ+9No7uQtMh64+1Fx6AuQ3SHTy6e3XHUDUOgVMmjrqcLnugtjv0WHCY6GkR0BXLEhMdERrVo4SPLUtvH7hAfquM2aULUEl4aTcDTadsbqWlQNQVVVGwdZmL7yUZ8FzeCo98rDe3jzXQ0cjwNk4Mb/lrW276NOcH7Xsb/Pg8ta23fRpzg/a9jf58A2QES7eJ61jce7ceUfe1Upuvicta24Ps4qwcac3EjuVqf3UrYvm8EX8+c2/nORUTjwa1vN/Liqp0E8HL6/KZT5WZK5KM0BlIJkBfC6d50phZ/8AFVpxbj1vrtUP0L8VVjEislXa2+C6LzGwIithqioxWuQOZwAAKfPIruquyA7fd1PhyxVJgxrq5PxyhOwO1JjLdrHC/wDZS8le6bW19NZvnTlV2bh0Rq0/Bn6gt/by3+raBrmiVdVlHQIcJYlu9DiSUaXnIjojdYnHR4S/ZwIkQKhwMb/lrW276NOcH7Xsb/Pg8ta23fRpzg/a9jf58A2QGN7lrXVt43duGkO4vIc/fLWtt30ac4P2vY3+fDP7ygjlBNid2ewlmsfMfrQ3koCnqAvLCvNU1SXihUTpGqarqmg0LVFC6FpGkU/SVUVujGJ/XVRTMZ/9Xuc1Ul1fKxornRJMMlIAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAP/2Q==",not=Object.freeze(Object.defineProperty({__proto__:null,default:Mve},Symbol.toStringTag,{value:"Module"}));function aot(e,t,r,i,n,a){return We(),tt("div",{class:"connect_wallet_modal",onClick:t[4]||(t[4]=(...o)=>a.closeHandle&&a.closeHandle(...o))},[B("div",{class:"modal_panel",onClick:t[3]||(t[3]=PB(()=>{},["stop"]))},[B("div",{class:"modal_close_btn",onClick:t[0]||(t[0]=(...o)=>a.closeHandle&&a.closeHandle(...o))}),t[7]||(t[7]=B("div",{class:"modal_title"},"Connect Wallet",-1)),B("div",{class:"connect_btn",onClick:t[1]||(t[1]=o=>a.connectHandle("metamask"))},t[5]||(t[5]=[B("div",{class:"fbh fbac"},[B("img",{class:"btn_icon",src:Cve}),B("div",{class:"btn_name"},"MetaMask")],-1),B("img",{class:"btn_arrow",src:nR},null,-1)])),B("div",{class:"connect_btn",onClick:t[2]||(t[2]=o=>a.connectHandle("okx"))},t[6]||(t[6]=[B("div",{class:"fbh fbac"},[B("img",{class:"btn_icon",src:Mve}),B("div",{class:"btn_name"},"OKX Wallet")],-1),B("img",{class:"btn_arrow",src:nR},null,-1)]))])])}const oot=Ar(rot,[["render",aot],["__scopeId","data-v-b6652781"]]);async function sot(e){const t=await lot(e);return R5e({wallet_address:e,signature:t,wallet_type:{particle:4,metamask:5,bitKeep:6,okx:8}[Get()],login_type:4,from:"web"}).then(i=>i)}async function lot(e,t){let r;const n=`0x${Buffer.from("readon.me","utf8").toString("hex")}`,a=localStorage.getItem("wallet_type");if(a==="particle"||a===""){const o=[n,e];r=await window.web3.currentProvider.request({method:"personal_sign",params:o})}else a==="metamask"?r=await window.ethereum.request({method:"personal_sign",params:[n,e]}):a==="okx"&&(r=await window.okxwallet.request({method:"personal_sign",params:[n,e]}));return r}async function uot(e){var r,i,n;let t=Uet();if(!t){const a=await sot(e);t=((r=a==null?void 0:a.data)==null?void 0:r.token)||((i=a==null?void 0:a.data)==null?void 0:i.content_auth_token)||void 0,t&&(Het(t),jet((n=a==null?void 0:a.data)==null?void 0:n.invite_code))}return t}const Tve=new jat({projectId:"a8bae6e4-eb4d-43c3-89cc-8cde4151a21c",clientKey:"cnaEn6Wy01n9Sls6WrVkb8dyn9D1QgigCrssVAYC",appId:"1e5300de-9db6-431c-9022-55e474a3d287",chainName:"Ethereum",chainId:1,wallet:{displayWalletEntry:!0,defaultWalletEntryPosition:Ave.BR}});localStorage.getItem("dapp_particle_theme");Tve.setAuthTheme({displayWallet:!0,uiMode:"dark"});window.particle=Tve;const cot={name:"readon-lab",data(){return{account:"",showConnectModal:Ab}},components:{connectWalletModalVue:oot},methods:{closeConnectModal(){Ab.value=!1},async connectMetaMask(){var t;let e=null;if((t=window==null?void 0:window.ethereum)!=null&&t.providers?(e=window.ethereum.providers.filter(r=>r.isMetaMask)[0],window.ethereum.selectedProvider=e):e=window.ethereum,!e)return alert("no metamask"),!1;try{await window.ethereum.enable(),this.initProvider("metamask");const r=await this.getAccount();return await this.accountLogin(r),!0}catch(r){console.log(r)}},async connectOkx(){let e=window.okxwallet;if(!e)return alert("no okx"),!1;try{await e.enable(),this.initProvider("okx");const t=await this.getAccount();return await this.accountLogin(t),!0}catch(t){console.log(t)}},async accountLogin(e){if(this.account=e[0],this.account){try{window.__tokenResolve&&await window.__tokenResolve()}catch(t){console.log(t)}window.location.reload()}},async initProvider(e){let t;localStorage.getItem("wallet_type")==="metamask"||e==="metamask"?t=window.ethereum:localStorage.getItem("wallet_type")==="okx"||e==="okx"?t=window.okxwallet:t=window.particle.particleProvider,window.__provider=new D0e(t),window.__provider.provider.on("accountsChanged",async()=>{localStorage.clear(),window.location.reload()})},async getAccount(){const e=await window.__provider.listAccounts();return this.account=e[0],pJ.value={address:this.account,name:zet(this.account),img:`data:image/svg+xml;utf8,${tot(this.account)}`,inviteCode:Wet()},e},async getNewToken(){return Ab.value=!0,new Promise((e,t)=>{window.__tokenResolve=e,window.__tokenReject=t})},async connectHandle(){return this.getNewToken().then(async()=>{var e;await uot((e=pJ.value)==null?void 0:e.address),window.location.reload()})}}};function hot(e,t,r,i,n,a){const o=jxe("connectWalletModalVue");return n.showConnectModal?(We(),ii(o,{key:0,onConnectMetaMask:a.connectMetaMask,onConnectOkx:a.connectOkx,onCloseConnectModal:a.closeConnectModal},null,8,["onConnectMetaMask","onConnectOkx","onCloseConnectModal"])):Kt("",!0)}const dot=Ar(cot,[["render",hot]]),LF=""+new URL("fea1.BgABLjvq.svg",import.meta.url).href,fot=Object.freeze(Object.defineProperty({__proto__:null,default:LF},Symbol.toStringTag,{value:"Module"})),kF=""+new URL("fea2.CNOIdvmF.svg",import.meta.url).href,pot=Object.freeze(Object.defineProperty({__proto__:null,default:kF},Symbol.toStringTag,{value:"Module"})),RF=""+new URL("fea3.sdrI4o8S.svg",import.meta.url).href,vot=Object.freeze(Object.defineProperty({__proto__:null,default:RF},Symbol.toStringTag,{value:"Module"})),OF="data:image/svg+xml,%3csvg%20width='242'%20height='66'%20viewBox='0%200%20242%2066'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20fill-rule='evenodd'%20clip-rule='evenodd'%20d='M63.8633%2023.5393C65.9452%2023.5393%2067.633%2021.8516%2067.633%2019.7697C67.633%2017.6877%2065.9452%2016%2063.8633%2016C61.7814%2016%2060.0936%2017.6877%2060.0936%2019.7697C60.0936%2021.8516%2061.7814%2023.5393%2063.8633%2023.5393ZM66.2868%2025.6949H61.1709V45.6202H66.2868V25.6949ZM49.0541%2045.6199C54.5563%2045.6199%2059.0168%2041.1594%2059.0168%2035.6572C59.0168%2030.155%2054.5563%2025.6946%2049.0541%2025.6946C43.5519%2025.6946%2039.0915%2030.155%2039.0915%2035.6572C39.0915%2041.1594%2043.5519%2045.6199%2049.0541%2045.6199ZM49.054%2040.2363C51.582%2040.2363%2053.6314%2038.1869%2053.6314%2035.6589C53.6314%2033.1309%2051.582%2031.0815%2049.054%2031.0815C46.5259%2031.0815%2044.4765%2033.1309%2044.4765%2035.6589C44.4765%2038.1869%2046.5259%2040.2363%2049.054%2040.2363ZM30.9627%2045.0905C34.2649%2045.0905%2037.1919%2043.4838%2039.0046%2041.0095L35.0952%2037.1001C34.3587%2038.6418%2032.785%2039.7069%2030.9625%2039.7069C28.4344%2039.7069%2026.385%2037.6576%2026.385%2035.1295C26.385%2032.6015%2028.4344%2030.5521%2030.9625%2030.5521C32.7807%2030.5521%2034.3513%2031.6122%2035.09%2033.148L38.9993%2029.2388C37.1861%2026.7687%2034.2617%2025.1652%2030.9627%2025.1652C25.4604%2025.1652%2021%2029.6256%2021%2035.1278C21%2040.63%2025.4604%2045.0905%2030.9627%2045.0905ZM69.5719%2025.4866V45.8557H74.8028V32.8277H74.8315L84.5461%2045.8557H90.0357V25.4866H84.8048V38.4887H84.7473L75.0327%2025.4866H69.5719ZM106.73%2045.8557V25.4866H123.015V29.0839H111.409V33.5257H121.774V37.123H111.409V42.2583H123.041V45.8557H106.73ZM166.506%2025.4866V45.8557H182.817V42.2583H171.185V37.123H181.55V33.5257H171.185V29.0839H182.791V25.4866H166.506ZM123.153%2045.8649H128.09L129.769%2041.294H137.87L139.541%2045.8649H144.478L136.568%2025.4959H131.295L123.153%2045.8649ZM133.88%2030.7712H133.932L136.491%2037.1602H131.218L133.88%2030.7712ZM145.503%2045.8649V25.4959H153.541C161.415%2025.4959%20164.158%2030.4589%20164.158%2035.6804C164.158%2041.0312%20161.332%2045.8649%20153.486%2045.8649H145.503ZM153.047%2029.6328H150.469V41.7302H153.047C157.245%2041.7302%20159.165%2039.352%20159.165%2035.6556C159.165%2032.2694%20157.492%2029.6328%20153.047%2029.6328ZM202.532%2045.6146L198.344%2037.1748C200.331%2035.997%20201.285%2034.9087%20201.285%2031.501C201.285%2026.5854%20197.267%2025.0908%20192.738%2025.0908H184.51V45.6146H189.52V37.7177H192.986L196.82%2045.6146H202.532ZM189.521%2028.7589H191.813C194.747%2028.7589%20196.338%2029.8526%20196.338%2031.5032C196.338%2033.2308%20194.747%2034.4586%20191.813%2034.4586H189.521V28.7589ZM92.0822%2038.0488H95.5135L99.3478%2045.9457H105.06L100.871%2037.5059C102.859%2036.3281%20103.813%2035.2398%20103.813%2031.8321C103.813%2026.9164%2099.7943%2025.4219%2095.2656%2025.4219H92.0822V29.09H94.3409C97.275%2029.09%2098.866%2030.1837%2098.866%2031.8343C98.866%2033.5619%2097.275%2034.7897%2094.3409%2034.7897H92.0822V38.0488ZM212.676%2045.6364C208.386%2045.6364%20205.073%2045.6083%20202.802%2043.0683L205.509%2040.0272C206.787%2041.6899%20211.238%2041.7332%20212.857%2041.7332C214.848%2041.7332%20215.923%2040.8543%20215.923%2040.0272C215.923%2038.6486%20213.918%2038.171%20212.415%2037.8129C212.292%2037.7835%20212.171%2037.7548%20212.056%2037.7266C205.685%2036.1665%20203.53%2034.6987%20203.53%2031.0619C203.53%2027.071%20207.67%2025.0997%20211.702%2025.0997C215.76%2025.0997%20217.369%2025.3838%20220.121%2027.1732L217.489%2030.0488C216.473%2029.1234%20213.469%2028.9359%20211.84%2028.9359C210.289%2028.9359%20208.56%2029.6856%20208.56%2030.9575C208.56%2032.2293%20210.35%2032.7636%20212.987%2033.5391C213.095%2033.5712%20213.202%2033.603%20213.308%2033.6345C218.081%2035.0496%20221%2035.9149%20221%2039.6911C221%2043.1483%20218.234%2045.6364%20212.676%2045.6364Z'%20fill='white'/%3e%3cpath%20d='M1%2013V5L5%201H13'%20stroke='white'%20stroke-width='0.5'/%3e%3cpath%20d='M241%2053V61L237%2065H229'%20stroke='white'%20stroke-width='0.5'/%3e%3c/svg%3e",mot=Object.freeze(Object.defineProperty({__proto__:null,default:OF},Symbol.toStringTag,{value:"Module"})),BF=""+new URL("fea5.DzBkEBt7.svg",import.meta.url).href,got=Object.freeze(Object.defineProperty({__proto__:null,default:BF},Symbol.toStringTag,{value:"Module"})),NF="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAeIAAACCCAYAAACaastNAAAACXBIWXMAABYlAAAWJQFJUiTwAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAwUSURBVHgB7d3rddRIFsDxqz37fTwZaCIYE8GKCMZEgInAOAI3EWAicBMBEAEiAkwELSLAE0FtFZJBiG5dPUoqSfX/naPTGFWrX5JuvUsEAAAEk3RJZIw5tw8XMkKSJDsBAAC/+I+WoArC7wQAAMzLBWG7HapgDAAA5kIQBgAgEIIwAACBEIQBAAiEIAwAQCAEYQAAAiEIAwAQxuM4YjdZx9skSe4FAADMRp3QAwAATIdADABAQARiAAACIhADABAQgRgAgIAIxAAABEQgBgAgIAIxAAABEYgBAAiIQAwAQEAEYgAAAiIQAwAQEIEYAICACMQAAAREIAYAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8SgTRMcZk9uHGbud2O5Ow9kmSvBAgMHtduGvho5y+Jh7s9syer4X4eb0L+/C6Jcm9fa1nAmBb7MWfmmW5E2Ah7Pn4UjlfP4oHprwOD8prpYIoMMVlfG4EwFG2BHprH/KWJJkL1jKeuw7Tlv2vfJW8ASyMvYl8NstCiRiLYsrS6reWc9btO5eB7HOvlGvCS6kbwEKZ5SEQY3HseXmhnLcuQ9u7f4XRg/zBUCUdHaqmAaDBVgu/tw9vWpK4EvGQZp62zmAOVdLA1pnloUSMRbLn5pnRO1RlPY53w7WAYxi+FBl3tXdIdi/lUI05fKg6yACLUwXatjbbwm5P7Dn8oBwntQ8H5ThPKQ0DETC6wZ1QgC2y18Stcs28Vp7fpWR9KQDioNwMPguA3xh9tMFFy3NfK8+lRgiIiXJDYNgEcIS9Ns6NPqQpPfK8S+WaO5gBva8BrJhyU6BEDJxges66ZZg9C8AxRnchAI5ywVa5fm5qad8paXcCCL2mo+Ou/g7Jpu417Y7tekvvj+00ZVXdlYRblOLk+zPlEJO05bnX9nn34smQ1zNlT9/ndstkfkW1nRwPW3t/qczv+29rt3xID+WqBOtqjtrOy6La35rGvv5fAiA+Zlnujry/Lj1M53Jz5P1pPWh34okp2yXbHI4858Ysw8EcbzO9MctwMAPbZu3zdma8VADEySxP1nh/Wjvc3JrvL1PSfxNP7LHulNe6a6Rf2spaHxf+/nYygNEzSJqDADVMcYnQmm3S/8iy/DKu2lYn5tK+Oo8r0WfiR6bsf9X4e2ljwM+Vv0N7LsOM/RwuQ8J4ffxAII7PXDNmdfVH4+9UluXvI//3qf0p45eaNOUED2lLkvsjbZxLGwbTfD9bCT5DA3gdnSLxA4E4Pt46EkVMm4DBVV+PDYrazf6NYHambNvNZLwrASoE4vhcy/JKxatSzSucK8leykAdb/a5IITRtR0Vn00YWDkCcWSqoS5P7PZWCMhjvFL2/0+Gu1T271kcIJhM/PEV1LFyBOIIuZu43S7t9mcyIftSbpxkLn5dJx7JwCrepOy01ZaRyUaUeLRq6bcyTGE3b7+5lL+vz8xcIeUKRD7e25+iZ5Z6MeVkN6mSzJ1PLqP71G7vlbQ+mjCwAQRiTCYpS20+2zIfEv9LJmo3yzbaZ+vdIacK3mlLEpeJymWYN4myXF8f1e/b2ufA9Bsv+2rEZ/uF+5x224nfjIKWQXLv/6XdXEc6N2HIM5mwCQPbQSDG1HzeCF27mrcbl/k5g9dQWhB/PqDEM1Vp+PuxjceJJKpMQybL5uX8q743LWO1P/J/UzZhYCMIxJhaIX5pS8p1Zo/lJt8YPIwkKdvb85YkZ32OXwXtSyXZXoZzw4cOxhN7rJhW68qU/Ufb7ZNpmzCwEQRiYJwPyv4+Y061oD1ofuTA+pRIC1kurWNV23ngvQkD20IgBsbZi17i6Vo9PWW1dBA+26RDMd3a7duaKaZowsCGEIiBdv+27awCjRYg1XZto48ddjf7vSAELYOUt+3s2IRxKYgWgRhoV3RIo5V4unQI06o+c1mfLZSGu7TzdxkmpTVhLG2OdcyIQAy0U4c3VR1yipYkXWZR0vavcUrLMUPDlsIF4bZq467t9nvRmzBSQZQIxMBpr3p0jtKqp0+Wio0+UURRVW+uSSGeJ9QIxEu7fccmjEtBlP4rwLq4G1ozKBXSXyqnj//Vbu97Ti5xK+3Vy987bZ3ovKROFCH+uO/uobZN4YuUw3lWXTXdod3efb4+pX6Xtq2Zwu3bCaJDIMbUfPcGfbLEITwu6Ngbdy6nb9yPHXJu6/9puk0UkYsfLji+EHSltdu/75PZcBk7+3sXcjoT+L0Jw9fsYlgPqqYxtXPxa8mlLK3kenVkmIpWGv7gMePxRdBHpuwfMpxMew4LQUSIEnFkbCBwgXGuMYup+L+x3NnPMKrj0oQljsdq31Pfb2q3z/b9v6jSuOkNtaFNe/HnqiqRjcnMFCucVKS3ju32ufQ3pgkDG0Ugjs870VeQWbILGT8TUSITqKqnXYmnrR0wle5TQ2oTRfSVSvn7j+FK/TvZvkna7Ts0YTguc7YTRIOqacAvn4EzF8xuhnZ7FoLALwjEgEdVdWUufmxh+M8aZcr+Ue32LASBJgIx4J82i1IXa1zgYSu0fg17GU/rtDW2+QUrQiBGaF8bf69t4opj9jK+d/eQHrmFYBQPCzx0xUIQ+IFAjND2jb/XOJXjL6oer2MzFL1v9h2m2oRu1AIPXXVowui1ljXWjUCMUFywum5Wv1Y3qC20jY75DG9GDF95KusNxkFLgB4XeOjK51rWWDGGL8XHlThDV3kV0jIrkf3/nb0p7qXsNJM2dk85NaM31SxKT6ScTeuPHk/9Yp97KwNVGZu/OlSxDjWmpJ/LdMc+pe18b55HZ9JeI+N7DPVewl+LAAAAAAAAAAAAAAAAAAAAAAAAAABgI4wxbj3cR7dK2l0t7UEwGfv9vqt919oaxQA2hJm14lOfzUebuae+PxdMqT6xQyoAojHJAulYrmrGpfrC9E+raSWb6VL7UC8FP/O1SH117NcybFahF75mN7Lvw01neNPzfbjZmNzKSNfiQTWt4jv5fem9vHr8MGamrcZrudc5r/681n5PV3siP78b9/uPnvmq9nnTE0neupnVxIPqPLuT/hmbXMrvx8sMbvZ9XEk5w1rf893N5PVUAGyPq2bWqqdd9WgtzTfxyAVAM5yXoFS9j89muFQ8cMdRXudOPLHH+lg77mWH9HWZeGD0336qz9vXpXhij/XNDENzUCSomo5Tl+rp+v97KQnXjJlft8+8zRrm+Z1fjN855xlasehDnFxgvar+fWZz3lm9etqUpb3zWnofC923eaHsd9XHqUzLVbu2Tfjvvo8r8e/7KlRSVtU/KqRcj7iQbazP3MatZlTU/p7q8xbSvnKSC5avZXru2ut6PS1+cRP4QSCOULUykLvIH3Pqrq00ryXJGk/JZTpLudm4pQf3p3ZWmRPvgbhqh7y1x3c1EI+ZH2/tpEs34+d8GLnflz6vs/VMGCoE4ni5EtdjYPnHbvUhM/Vq6Q++Oq2c4DID3toFV4zSz7RcJmcJ59lltXXhAvETwebRRhyveruv6zCUuX9UJb/sRLol+FeA6fnMGA09Fm3LkaBEHKkj1dOZlFXQWSNpLtMreqTz1msa0XElzC5B8ZOvoXoV1zbtap3SDmnPhAAcHQJx3JrV0ztpTOLha8xui3v7GlS/ze/vUztMOdY3lW3JQ43JrcaBd8pAmt/H+SMCVE3HrZ7rPzfleOGs9n9vZXrnaxhHOUOGZG4vT33pdp87Dz7LtmQt59mkbcemByEIR4lAHLdmVV2zSiwXzOWrwDc6wGEVCMQRq3pDnxrTOGW1dCEI4ZMMU8g6h9IM/bxLQUYiEsw1HbkjvaQf3fuYW1h53VRJ9jDxe3BDWh5rAe61YVqmNs3jsfm5R76XVH5+H8VUmSAzbKpK9bvp8fqplOdbIRP/vrXXS5VkxZRND2b49KDevncAAAAAAAAAAAAAAAAAAAAAAAAAAAAAwHyMMTtm1gIAICACMQAAARGIAQAIiEAMAEBABGIAAAIiEAMAEBCBGACAgAjEAAAERCAGACAgAjEAAAERiAEACIhADABAQARiAAACIhADABAQgRgAAAAAEBdjzLndDgIAAOb1GITdowAAgPkQhAEACIQgDABAIARhAAACIQgDABCIFoQTAQAAJ9kAupNxntvtWZIk98d2/h+YrCrtXiN6CQAAAABJRU5ErkJggg==",yot=Object.freeze(Object.defineProperty({__proto__:null,default:NF},Symbol.toStringTag,{value:"Module"})),VF=""+new URL("bac2.B4HnfhlE.png",import.meta.url).href,xot=Object.freeze(Object.defineProperty({__proto__:null,default:VF},Symbol.toStringTag,{value:"Module"})),FF=""+new URL("bac3.Ba-MQJcM.png",import.meta.url).href,bot=Object.freeze(Object.defineProperty({__proto__:null,default:FF},Symbol.toStringTag,{value:"Module"})),zF=""+new URL("bac4.D5_KnHOG.png",import.meta.url).href,wot=Object.freeze(Object.defineProperty({__proto__:null,default:zF},Symbol.toStringTag,{value:"Module"})),HF=""+new URL("bac5.DXLIWixs.png",import.meta.url).href,_ot=Object.freeze(Object.defineProperty({__proto__:null,default:HF},Symbol.toStringTag,{value:"Module"})),UF=""+new URL("bac6.Dt_nGUKw.png",import.meta.url).href,Aot=Object.freeze(Object.defineProperty({__proto__:null,default:UF},Symbol.toStringTag,{value:"Module"})),GF=""+new URL("bac7.K3ZrliLF.png",import.meta.url).href,Sot=Object.freeze(Object.defineProperty({__proto__:null,default:GF},Symbol.toStringTag,{value:"Module"})),jF="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAeIAAACCCAYAAACaastNAAAACXBIWXMAABYlAAAWJQFJUiTwAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAApuSURBVHgB7d1bbBzVHcfx/5m9+hLbOG7SOBFJuBQwpAoCwqWo5aoItUJNJaI2FPEUqa888NSq5aHigZaqEkJUaiWatoTHAoVCAmqhMoQQKgzGsWHBiWNs7Pi2tnft3Z31nM6mabWenVXG7K6P1/l+pM1Yf5+cyya7P+/M0VgEAAAYo4I00lrvdg/flwoopR4TAACwjHWhBudD+K8CAABWVyGE3cep82EMAABWCyEMAIAhhDAAAIYQwgAAGEIIAwBgCCEMAIAhhDAAAGaEzx8LN+s4pJTqEQBYJZ8M5Q92tIUe8NY/H5En9nSpN4L0caw3e82OzuiT0fD/38/OSWf00qWbrfsEWOPCAgCGxOKh3e0tcq+33j8khyQgKxxtK/ThDWLLUjkB6sAF76wFAABqhyAGAMAgghgAAIMIYgAADGKzFoC6NtQr/x6eyN0QWop6PljYAtQDghhAXdu//9zu6I8EqFOcmgYAwCCCGAAAgwhiAAAM4hox1oWTg3q71MjHY3J2/21qsRZjZpXMXr9TJb31DxN6WyQkoSB9TE5L7ts3qi8loO4BvaE9Ku3eerl1luO3/nJzKTemo6XVp2tpiMrX/Pr3m2O5vpdi4uzaqoYFWOMIYtS9d3r01k3t0tcYl7jUwNSCPOQenq/FmGfG5Q/u4Sfeenurfnlji7ouSB/trTL251czdz90X/yTIO1bInJwR6c84a0v2s7P3cPjQfoot/7CXA6/pHcfuF9NBhkzEvY/K9e1U57UWn7trb83IN9xD28X10JL0tW5Sd7y3uJyfkEKm7gaBVjjCGLUPatJVCyqww0xFegT5EoppzQsqjVmyPL/1OuGSqQhFuwTcSYnobyllAQUjUrIr+9oRAL3UW79hbmsZMxy4lH/gA77vGNZlliFvt3nbFn/WVtq8v8BqDauEQMAYBBBDACAQedO9CilHhMAALDquEaMutI7qPfHIxIpri1mpXkqKf25Gv322VRGpoK2da9LZtMLknC/zAdsvzkxrB/01pNpnQpb0hOkj0V33ddsC+9z+zlTXE+lJXX91epFqVBPQu9tikvHsjHLPOcZWyadTVLyL7GYkdHp2dL1RKN6e3ODusRbT87LkOPIjLeuxE4LAMCcyaST1h6ZrJ5/9kj2allF7yb0tvkFJ+Ody/Sc/vLwS7ojaD+nx/XT2kf3R6XhXM7xfn2r31xGJ/Wnfu0HhvWjfmP2Di791K/9+LTTV6vnvFrrz9ra9vYxM6+zAtQBrhEDAGAQQQwAgEEEMQAABhHEAAAYxK5p1JVkWr+otWoormVyWt1yVfTgmTE9IxVITMg/7t6l3pGLVPsG6w73OSy5u9bUnJyylCzb+JXLy0JkKZoSABUjiFFXrtgaOuCtFXYwX7tVf9bcoGJSgdkFR7uHizaIOzvkHvdwj7f+dq/8uGuHek4A1ASnpgEAMIggBgDAIIIYAACDCGIAAAxisxbWg7mRSfVIJCwVbdayRN0xNauPeuufj8gTe7rUG7LOnfpSv6ZFHfHWR0fluACoGYIYde+WK9Wce3hGKjQype9pb5F7vfX+ITkkF4F0Rnfvusz6rQBYVZyaBgDAIIIYAACDCGIAAAwiiAEAMIjNWqgrZ8Z1T0ujNEoNJL5wjpydtPZ568Nj8p5gVV27U36VnNe/8NZfOyEP/PAu9aEA6whBjLrSGNNXtjarmgRxPCaHdl2mXhAY19YsW/zq+bw0C7DOcGoaAACDCGIAAAwiiAEAMIhrxKgrjpYZOy85qYGQZa2o36ytkrHI8ttqKpG5FXQhti0Zdz3Jkm+oJVsCWspKxm8u7nM179feneOi35grXX81lF1/GUuOXfK8FNafsyWpPO9nubzOC1AHCGLUleN92dvydrwmZ3Lcd/jJoG3PfCBnJzoze7xzcZMwf+B+Fbif3hF5/OOEPOWtt0loTAL64lPpm0qVziUqkvFrP5CWQye75WVvfSXrr5Zy6y/n0ljkC2+tsP7xGbmptHVWAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcHE41qdvnprTC7MpbRc/Bk7rV2WNGxx1XvDOu/A4eiL/IwFQM2EBUDWWJVZzg0Si4eWvrdm0hGSNi8VUuKWp9D2hMRayBEDN8AIDAMAgghgAAIMIYgAADCKIAQAwiCAGAMAgghgAAIMIYgAADCKIAQAwiCAGAMAg7qwFrEE9Cb23KS4dQdqm0pJKTMvR/bepxeL6v07qLVs2yF3e9pNJGbl1l3pTKvBi98SGb2zt+F44HOyH+WqMCaxXBDGwBm3ZqH+z6RLVFaTtzLyM9Qzl7nS/HCiuxyy5/Ypt8hdv+1hUXncPb0oFNm/uaN22WT/b3KBiQdpXY0xgveLUNAAABhHEAAAYRBADAGAQQQwAgEFs1gIM6hvM79/YGrrXW59Iyvt2/twGpwtazMnGb3VFfjk2pWeK60r09sKfldqxRQ66fd9RXLNtaRo6q//U1qgWgvQxnXI2un383lufmZd/XrNDHRYAAKrheL++NWtrW3ucGddH/dqfHtdPax/dH+kHAw55bsz5BSejAyo3l5Ep/XLQPjJZPf/skezVAacoA8P6Ub9+EsOl4QxcbDg1DQCAQQQxAAAGEcQAABhEEAMAYBC7poE6t5CWxMikeiQSlmW3m9Raui7vlINSoc9GncOWsk4U11KLkmvS0bMCoGIEMVDn7rxRTbqHZ7z14wP6gcul8iAen7L+fvs31XMCoCY4NQ0AgEEEMQAABhHEAAAYRBADAGAQm7WAOnesT9982RZ5PR6VhuJ6yKrCjaZdu6+UQ7Mp/cfimr0k8690yy0Pf1d9KgAqQhADdc6yxGqM62hzg6rJ67kpLiFvLZuTiBPOcUYNqAJeSAAAGKK1fowgBgDAIIIYAACDuEYMGGTbkrHzkvTWw2Gn4+Sg3h6kj7m0bMjaKhmLLL/FpSsWCS/fwPVV5GxJKyW2p5b6epu13Z3jYpA+tCPNfuvML0mgvw+sZwQxYFDviDz+cUKe8tZv6FJ/62iVJ4P0MZuSiaPv5w80WOHB4nrnJmfvni7rd1KhE/3ys4lpeaG41tYoHTddFX6rMV4S/r6Gz8qxV7rlep9vJQW4yBHEgEE/uFlNuYcpb3182rEaYqW7lf1kciLZvDN6YK86XVw/PqCnpRqUTOy7c3nf7yZ0PhbVoYaYCjRHdy2L3j4A/BfXiAEAMIggBgDAIIIYAACDuEYMVNGSLTOzc9ITCi1/baUy8rmswFxG+sOzkgvSNmPLZNSKlrR1cjIzPSs93nq5uWTdMd32W33al1zDXpyVzEyL+iCXk7gEsNL19yT03qa4dEgFsnlxrtupnhcAALAy49NOn67QzLzOCrDGcWctAAAMI4gBADCIIAYAwCCCGAAAg9g1DWDNSS3qD5UOtmu8nIWsygsAAADgR2u9232cEgAAsLr+F8KFowAAgNVDCAMAYAghDACAIYQwAACGEMIAABhyoRBWAgAAyir8YgapzMPuY59Sqsfvm/8Bw2xG/ViF/SoAAAAASUVORK5CYII=",Cot=Object.freeze(Object.defineProperty({__proto__:null,default:jF},Symbol.toStringTag,{value:"Module"})),WF=""+new URL("bac9.9kcu_SzB.png",import.meta.url).href,Eot=Object.freeze(Object.defineProperty({__proto__:null,default:WF},Symbol.toStringTag,{value:"Module"})),qF=""+new URL("bac10.COQMUFp-.png",import.meta.url).href,Mot=Object.freeze(Object.defineProperty({__proto__:null,default:qF},Symbol.toStringTag,{value:"Module"})),YF=""+new URL("bac11.BpYOMdbE.png",import.meta.url).href,Tot=Object.freeze(Object.defineProperty({__proto__:null,default:YF},Symbol.toStringTag,{value:"Module"})),XF=""+new URL("bac12.Box21fgD.png",import.meta.url).href,Pot=Object.freeze(Object.defineProperty({__proto__:null,default:XF},Symbol.toStringTag,{value:"Module"})),ZF="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAeIAAACCCAYAAACaastNAAAACXBIWXMAABYlAAAWJQFJUiTwAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAApiSURBVHgB7d2NcdvGFobhQ88twB1k3YFSQeAKrlyBpAosV2C4AscVyK5A7kBKBdatgOgguhWc7BrLCWURJPYHWCz0PjMYJjZNEBCFj/t3IAIAAIrZjHmSqp7Zh3NJsNlsWgEAAE+8OvUEH8K3AgAA5uVC2G5bH8YAAGAuhDAAAIUQwgAAFEIIAwBQCCEMAEAhhDAAAIUQwgAAlLFbR+yKdXzbbDYPAgAAZnOyoAcAAJgOQQwAQEEEMQAABRHEAAAURBADAFAQQQwAQEEEMQAABRHEAAAURBADAFAQQQwAQEEEMQAABRHEAAAURBADAFAQQQwAQEEEMQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAwOKoqhEAKGgjWDUbNI19MFKvbrPZ3EsmPnjf2+1cnp6XB799svvrZEHsez6zD2cjn/5ot4cpjsGfu9d+W6yhz4t9/+59jz2PO12Jz0Pke5WcvysAMrC/zJdav1YysK/z2m6fR+7TPW8RYWPfh9FwW0nk93ttt1v3elqP9sgxxfw+3EgB7jg0gqBK/xGskvatl89St+/2G34rify5uJPxPQPXdju3/+7tAlrHRsIZieTCyj5c2K2R+mT5vABzeyVYHe1bcy54Ft2FeEJntw+SKCKEd4z7d/pCxpDtcTbat6RdC7CR+nSS4fNSuU5QJYJ4nVxL2Ei93Dhncms0IYR3jPTBtGr2PH2UtPO0BEvovQCiEMQr4y+ql1K3XBOm3Lkwksa1FK9lpfznpZW6fSCEUTOCeEW0n13bSt2+2Ivqn5LIngs3M/pS8vjsz+2qrCSEv+b4vAAlEcQr4bthb6VubqlIcuvTn4tW8rrVhcykzmGiczS3ThgXxgoQxOvhQthIvTq7vZU8ppioZqTv6l6L2o9lN4/gUYDKEcQrYFs3bnJW7V2nVznG+Xx3q5FpuHW1jazDudRtcYVXgFgEceX8WGjtk4k+5agIZM+FC5dWpnVTexe1/zJR8zF8YVwYa0JBj/q58LmXfBoJ50pDxnYR/i9j0Y45CpgY6Zc0vZN6NRIv5Wedyu03y+cFWBKCuHL2opRrXHUXZqHlET8t5MI459ppV3XruuJWmZFwnbBWF5gEXdNIsYgQ9uPCc495fnwpVbc8xmSBiRDEiLWUEDZSZhmOG2NdfdWtPQ8CYBIEMWIsJYR3NbVjdXb7IvFWXXXrF6tZQw0sDUGMUEsZE3ZSlirt1qG6IL2XeDVW3Ypp3d6saOkWsChM1kKIxYSwv11fSmt0f8zzym4/JL7V56pu/V5RcYmYIDbS343qu338S+abOd3tHhmjBrB6evwm9K0shH+fW413c+A1rzXNJEuntL89YbARr/tD63RnN9cL0Ugg+28uNVyReQB2v62G+1tQJbqmMcZgS9j+8r/X+btm3cXRSJzObp9+/UO/FOle4tVWdStlbLykRvqekDvtv4xdCnYYx68UQYxTjoWwG6N1ATbbBcDvs5F4x0ppuiIdKV2uN1pJ1S17Dr5K3kIwJRjpz7kLZCNApQhiHHMqhFuZkaYvVTpaStOP8V5JPCN1LWlyx9pJ/YzdfugKb1WJl4Egxj6z999XASHcycQ0w1KlMRPN7HPcZKSUbtufVbekAr5nwFVm66R+Pz8fE4SxEWBiBDEOufJdl88cCOFvM81mTV6qFPD8VtLC6WMtXaV7YfxN6vfSiqxgJQhi7HPLWkJD+FImpnmXKp2UoYu6qkBw58b/HN9I/YF89oIncNWyfA5ADBfCvyyVmOWGBzrBUqWAff+paZK7qHWi5Usn9vnabuf++O807fyXcDdwXDHLl1KGQ6Jp3Gcv9IYtWAgKeuAkfd4SnrOwR/alSgFau/03Yf9uveu9PVdV1Wn2PQLf/Taa9uP4OWeNN9LfVSv0Nd2Xl9cHCqx0Uo/fJFwnANZHn7eEW5nJgX2HaiSRfY0zTbPVhCVNWqBFvCSxx68HJm3p8YI1Q4oUydC4XoigL04AKqBlQzjmojnJe9W4Kkf7oqtu6QsPYscezq2GawZe628N18iMNP7LRysA1kPLhrAbo9xqvOxjZdqPlaZoJIISxO4c3Gi4ZuC17jScW6M8S6EWTfvsnwuAddCAENZ+Uk/Wi5TGXXh3XIvHSGbat9BjWlM725jzpHRNx573ZuD1Yns3XBgbmZD2IZxSA9wIgPppWAhf+Oc0konGzWzdN1kxDU2/MUTwDG59oUGsfSh91PgvP2cDrxvb7etstf98GsnIH+u1pvUC/RBUayOA5y8w+926x0pcXtiHr/5/3x4rHRm4f7dcxEicr/Z9XB14XXdRdjO/x7ZIH+Xwmkz371O7/y7texy9Vlf7LznBS2jsPqJ+tzW9lncu7mcW3dNy7Ph9aKVW4LqXft39/6Wfrdz5P+/8/rsD+zX+P91xGb/9If35Tu1VGlz/D6Ai+nSCVHvkeRe/fBtvJANN65bb6oGWiqavQ84tqOtcZ2wRa397wTW4O3Gcqb0uS8P64cpRWQuHjG0J7yRX9NG+JZbSShm6q1JKC3sKi6y6Zc//e0mrXrYkR3scfMuxk/VIWSsPYEnUj1Ud+fuLgW/kRtL2azRNO/C6H3W5RoWeztAi1vS10ktjRhxzyljxkhSp/AWgAB0OYcdIJJ1oqZIu/0I7qotaJw5iXV7Xfao24NhTJ9+VtlVmSq8CXdM4SQ93R+fiil0Yiffsrkr+4rT0my64LupbKc+9ByPrMOpWlzv2ua5eeq3dup30kyQ7QfUIYhw1ZQhrf5ecS4n3YeBClBruc3FdwtFVt1Jp+rj8knQSdqvLn3xwf5C6uNnahDDwEujx7uh9RgLpRHdV0mWPCw9pjpynSbqm7VPe63psNc88hZRZ+3Nxd2WapcoXgMJ0fAg7RgLpdEuVarTVgYurThDEml4lbCncMbSaMZi0X9q0xEC+04EiJagfXdN4RqcdE87RJfqsS1r/LQZSIyN9wZHJ7Z2nmltVbrmcG9t947qWD9zuMJpb2mS336Xv5nbLoDopxx3XF+m7od/WdjtNjEdlLTyhfeH40ElEb8aOV+nz6l2hDq5x1r6r+lLq9s4e25Nb2Wnf2nPnKyQ43aSlN4f+otLz1Ek/LvqXe8xRxS2E9kMH7ovjH/7RyHR2x/l97uNEOQQxnvAX/qDWasgFwwexkTiPQ60CnflWdRPpBkojup9JSBA/DrUSC56nTiIscULS3u/ILpR/k3/LVp76WT3ubbsSmQ9+63K27lEPghgAJqBP5zE8ErIAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAKAeqtq+EgAAUAxBDABAQQQxAAAFEcQAABREEAMAUBBBDABAQQQxAAAFEcQAABREEAMAUBBBDABAQQQxAAAFEcQAABREEAMAUBBBDABAQQQxAAAAAOBlUdUzu20FAADMaxfC7lEAAMB8CGEAAAohhAEAKIQQBgCgEEIYAIBCToXwRgAAwCAboK2kubDbu81m83DoL/8Bp2Euml7jhcAAAAAASUVORK5CYII=",Dot=Object.freeze(Object.defineProperty({__proto__:null,default:ZF},Symbol.toStringTag,{value:"Module"})),QF=""+new URL("bac14.BmT7rCgI.png",import.meta.url).href,Iot=Object.freeze(Object.defineProperty({__proto__:null,default:QF},Symbol.toStringTag,{value:"Module"})),KF="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAeIAAACCCAYAAACaastNAAAACXBIWXMAABYlAAAWJQFJUiTwAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAz1SURBVHgB7d3xtdpGFsfxi8/+v28rCKlgXypYuYI4FYRUYHdgUkGcCsAV2KkAUoFfKoCtwN4K7moicUwI6N6RRprR4/s5h30bI40GIfSTRtKMCAAAyGbhmUhVH+s/r2SAxWKxFgAA8BcvrAnaEP4gAABgWiGE69ehDWMAADAVQhgAgEwIYQAAMiGEAQDIhBAGACATQhgAgEwIYQAA8jg9Rxw663i/WCyeBAAATMbs0AMAAIyHIAYAICOCGACAjAhiAAAyIogBAMiIIAYAICOCGACAjAhiAAAyIogBAMiIIAYAICOCGACAjAhiAAAyIogBAMiIIAYAICOCGAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPdJVd/Wr19koLqMZf36VL8eBQAA2NoQPtlIT20IH9pyPhPGAAAYLkK4dxhfhLASxgAAGG6EcHQY3whhwhgAgFuMED554yinK4QJYwAALjlDONxw9WCU4wlhwhgAgJNMIUwYAwCQOYQJYwAYyUJQvBDC9Z+1MdlT/Xq5WCy+dJSzrP/s6tdS+vvSLudJZqA9cHiQcTx1rW8A8CCICzdxCIf5f6pfvzimm0UYh9N4GU9YB3sBZqJtMauk+X2fH6CG3/RRmoPLo2BS/xAUK0MI/xmu9fRPxvThB7yrp5vNmXFJ6vW2rv/82DHJb/V6Ne96PysvTPu6Y5J9Xd5PMmP1Z9xK9zo7OXb8e9hWf5dmfYzekhEuFYndGvOlrst3Mm49Qh3C9lG1L2v6Y/3nY/36lVDGXZv4mvDfrv3qM3m0ScdVSQ/1fFuj3KhOWerp10Z5O5k5xzqLtdHmAHWs+r6KqEslI6jLfdBmP/JZ+9uMuZ7QeCEojmY6Ez7/x/ZI+KXcPsMITmfG3MCFuVnVr8OIQfN9xLSeM/0o4UCg/nOQZj8y5B6JlTTr6a1gNARxYUoI4RPCGAX5Rsaxkmb7XUki2rRSrSJmeaVGy1bk8sM+5IOkvUkxtLp8SFlPfEUQF6SkED4hjDuNfp0Rk1jWr03Cs75XkdM/9JjnKm0ua6xlHKGOO8I4PW7WKkSJIXwSwrgu96XM8wauUJc+O44H6Z7vyI1qz0446wvb+88yTJ+m5jDPVgZo9yErGVc42A77gVFvMAMmp5lvzIqo57O4gcsjNFUan3PIkJOzvlkrfL/t+jm9Kh35LCl8Bp1O77NTbX4jffVeh/W8rzXeQZv1+knjDR7/HCiGziSEp15ObmrvnJbSkxYSxI75NmfTeu7A3WnCa60Xdd1pt/WN+cJBQ7gGG3PXdfiMS+lB7QO4Lm+kB21+k947ow9hOXplf6LNetqpXyXA3GmBIayOswF95mGszRlel0FnmDqzIG7Xx0H9wrSVJKQ9g/iijKX6g6ZXi4f27z426LVdaXPnt8c7Z3nhYMIT7AcB5kzLDOG37fTmTkifcRirvWNbyQA6oyDWuOdhLyV75EUTBHHE5z6pJII2Z99dDmoHXOwyvU3h68hyH9UXxisB5kjLDuGTuwxjtXdsg88CdD5B/EmHdQYR9GpuvVLXnbGcdWR5Hxx1d51BnpW5McoLTcLWd79OvMzoMs/K9hyEzb6zGNwhnUcIn9xdGKtjZyoD6XyCOJVKBtL0QRyueVsHGZ8jyzwY5YXfSpV4mdZnGHTgqL6m/KVgEJ4jnpAW+IiSUaeVGqHwDJ8zroz3PwpiFXeHbfv7+tWY7MG7zWpzsLHsmOQ0mEL4PX4xllmJf5nWndZDH8XyzN/7LnM0COKJzDCET8wRup5LGGtzvWvZMcmWTvD//I730myrXo9a5rVET9Ozd3u1nh1+H/6n/W2/N6b1BlvlmGYvA7Sji+1leD3QgSCewIxD+H1dzkocnkkYWzcXWTvQ5yy0BHxbf8/h9bIdMehb8a+TPp1cjKr9rR2NyZbG+382c4sdnvuz/2+1qvyovmeK/228v0904PiHDKsHDATxyO4hhE/mHMaOpsXj4n7HHv65/uw/XO7Uw3+324in+bLSMrtGPBrvfyO2EMLuXtja7aizeVp8Z+LW+jxKGlbrR4nf66wQxCO6pxA+mXEYvzbeH3qtba5Cc/y6a4L2/b3Ynuu1ROts/7cr/2a1JKR49Ou/Mg2CeCCCeCT3GMIncwvjdh13hURYv1ZzYsn+J/15D0A80xV7f0Bf7bZTGZNtr/ybtT2laEEgIGeCIB7BPYfwyczC2Dr7+Nj1Pc1A1CMxZ5681xjb5lZr2qU8P5Xx/tXBQRzN08HKeN+afylpWIE+599GEQjixAjhr+YQxo6z4eBem6Wta4OXfjfe/6eUx9rurOZd65LGvuM9q3n6e+N9q6XjP5KGVU7sdoILBHFChPDfzSCMK+k+4k915+mYxmqCHNKkfc1SCtJub9a6e+qYfyl2kHeFrad5etnxvnkTlabp87sy3j8KBmE84kQI4dsKH884xyNLVlPevySO587ePmLPYK3pj1IW62w2OHa890Zs1cAwXMnt33AIcquzlHAj2V56ap//tg5WrJYQYBrqG9PT7GFI7WHUhnZbeW7rKOdRE3Xer4V1h+lY1wcZgTZ9Didbrtrb3rsb860T1+NglNe7X2JN38Wl1ae4+fl12EhLXinqUEkP6vu9BksBSqBN37WeMDZDTW8HRI4Q/uytt4cWFMaaeOcesVzrACConGV5AuXNjXmtII6pR+Uo6530pGlHX/IGzEaGfd5Uqo56eL7Dg/YIS/UNjLERoCQ6bhjnDGF3vT20gDBWX4AtZQTOZbvOHtW3s3y8Ma9nJ+6tx8FR1ivpSe0gdgWCNuve8xsNlh3lbHQ67zrq4Rm8Ijioc3tuy9yoTyVAaXScMC4hhN319tDMYaz2jmbUI331BVcI2eWN+cN29oujjENHHTxBHHReUlH/Tnsp/dfXzih7Y8wf1tdr9Q/raJU3dHjIGJ+Nuni/x4MafX5rc6bvPVDhbBjl0rRhHMYEnTKEQ0BaO5mUYWwJdVlKQs7lVjIijRuCMARyuK68av9uNEGgRNbhoBfrRON22r2vD7fL2hnlf2jrc/4Kv52wzjYaF5wH7T4bXun0qo76PGjc9eowbTiIC+vntJ7eqm/Iw5Pkv0sgOU0Yxo5lvXUsZxtR3tZRXnH1jliutSMd5Satizp4mxSHWnbUISaIzx00vu4rGUDjQmKoyqiL53JAatYZelcr1hhWAsyBThDGOlKY6chhrJlCuF32wVjuSiag9t3TQ62N5fcN4liDD2x0uiBeG/XwtKZ4Hmu6LNf6LkLIPhhlTHWmvhZgTnTEMNaRw0xHCmPNG8KendVSJuJcx318cCx7qiBeykA6TRCbAaojbT/quws7Vf2GWAswRzpCGOtEYaaJw1gzhnC7/J2x7MlvQNH0YbxTx4AB6niOWIc3d0afHd6o607Hc1D/Y1o7o6xP0pMmeg5bm2Zqq6xYYTtI8l0C2WjaG7jeOsrZSiKaKIw1fwg/Opa/lAw03dmp+1ldxzI32v/aY5hnJYnoeEH8Tp2jHKmvWXolPalvG4ipa6oDvJ0WNn440JsmCGPNd4PToDDWzCHc1mFjLH/Qnb0J6jdk57nTyDu91RHEZ/U6qN9O09/pvtN0wkHCOraO6gvKqDIvyvcE/TqyzEr7r7ud8pzwJOhrekKhj2n92udy1xFm+MGH6f8y6o9m7Ds6lBnqJN2DoBdX77M6hDOJSrr7Dv5VMmoHl1i1O9vQ+UUYfadrYIK9NP387tth9cas17fanO2F77+6MlnoPzv0Ef7zSHX5o+O9pXQ7tq9QxtOA+v1burcf97CR17R9sof+o7v2Dd9IXJn7+s9ev44y1rVNnb7DsJ4+jrlNAdlpjzNjLeCMsq1H1JlxKfWeM23OlKqz11ISUOcZ8ZX5HsaoD6ZzsU098h3iLmlEGKuvB6WtTESdYayEcNG0ZxADwLOh/jAuLsw0zY0gW0E2ShADRXghyKYdlzhcMx4y/u7o4wlf0y5zyFi9WeoNAKUhiDMbGMZZw2xAGBPCAICyaHwz9VYKoXHN1FtBEWiaBoALEWG8lcI4w3grKAZBDABXOMJ4K4UywngrKApBDAA3dITxVgp3I4y3guIQxADQ4UoYb2UmLsJ4KygSQQyUgS4uC3XRHeYfc7rL+Kw7TOHuaADoRhAXrH206TuZIQIYAHwIYuB+HaUZOOKWroEWAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOCuheFIXwgAAMiGIAYAICOCGACAjAhiAAAyIogBAMiIIAYAICOCGACAjAhiAAAyIogBAMiIIAYAICOCGACAjAhiAAAyIogBAMiIIAYAICOCGAAAAABwX1T1sX4dBAAATOsUwuGvAACA6RDCAABkQggDAJAJIQwAQCaEMAAAmVghvBAAAHBTHaBrGebH+vXDYrF4uvbm/wEjB3I8XyUXPAAAAABJRU5ErkJggg==",Lot=Object.freeze(Object.defineProperty({__proto__:null,default:KF},Symbol.toStringTag,{value:"Module"}));var kot=Object.create,y7=Object.defineProperty,Rot=Object.getOwnPropertyDescriptor,Oot=Object.getOwnPropertyNames,Bot=Object.getPrototypeOf,Not=Object.prototype.hasOwnProperty,Vot=(e,t,r)=>t in e?y7(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,um=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports),Fot=(e,t)=>{for(var r in t)y7(e,r,{get:t[r],enumerable:!0})},zot=(e,t,r,i)=>{if(t&&typeof t=="object"||typeof t=="function")for(let n of Oot(t))!Not.call(e,n)&&n!==r&&y7(e,n,{get:()=>t[n],enumerable:!(i=Rot(t,n))||i.enumerable});return e},Dp=(e,t,r)=>(r=e!=null?kot(Bot(e)):{},zot(t||!e||!e.__esModule?y7(r,"default",{value:e,enumerable:!0}):r,e)),Q0=(e,t,r)=>(Vot(e,typeof t!="symbol"?t+"":t,r),r),Hot=um((e,t)=>{(function(r,i){typeof e=="object"?t.exports=i():typeof define=="function"&&define.amd?define(i):r.Alea=i()})(e,function(){return r.importState=function(n){var a=new r;return a.importState(n),a},r;function r(){return function(n){var a=0,o=0,s=0,l=1;n.length==0&&(n=[+new Date]);var u=i();a=u(" "),o=u(" "),s=u(" ");for(var c=0;c<n.length;c++)a-=u(n[c]),a<0&&(a+=1),o-=u(n[c]),o<0&&(o+=1),s-=u(n[c]),s<0&&(s+=1);u=null;var h=function(){var d=2091639*a+l*23283064365386963e-26;return a=o,o=s,s=d-(l=d|0)};return h.next=h,h.uint32=function(){return h()*4294967296},h.fract53=function(){return h()+(h()*2097152|0)*11102230246251565e-32},h.version="Alea 0.9",h.args=n,h.exportState=function(){return[a,o,s,l]},h.importState=function(d){a=+d[0]||0,o=+d[1]||0,s=+d[2]||0,l=+d[3]||0},h}(Array.prototype.slice.call(arguments))}function i(){var n=4022871197,a=function(o){o=o.toString();for(var s=0;s<o.length;s++){n+=o.charCodeAt(s);var l=.02519603282416938*n;n=l>>>0,l-=n,l*=n,n=l>>>0,l-=n,n+=l*4294967296}return(n>>>0)*23283064365386963e-26};return a.version="Mash 0.9",a}})}),Pve=um((e,t)=>{(function(r,i){typeof e=="object"&&typeof t<"u"?i(e):typeof define=="function"&&define.amd?define(["exports"],i):i((r=typeof globalThis<"u"?globalThis:r||self).SVDJS={})})(e,function(r){r.SVD=function(i,n,a,o,s){if(n=n===void 0||n,a=a===void 0||a,s=1e-64/(o=o||Math.pow(2,-52)),!i)throw new TypeError("Matrix a is not defined");var l,u,c,h,d,f,p,v,m,g,y,x,b=i[0].length,_=i.length;if(_<b)throw new TypeError("Invalid matrix: m < n");for(var w=[],S=[],A=[],M=n==="f"?_:b,E=g=p=0;E<_;E++)S[E]=new Array(M).fill(0);for(E=0;E<b;E++)A[E]=new Array(b).fill(0);var T,L=new Array(b).fill(0);for(E=0;E<_;E++)for(l=0;l<b;l++)S[E][l]=i[E][l];for(E=0;E<b;E++){for(w[E]=p,m=0,c=E+1,l=E;l<_;l++)m+=Math.pow(S[l][E],2);if(m<s)p=0;else for(v=(f=S[E][E])*(p=f<0?Math.sqrt(m):-Math.sqrt(m))-m,S[E][E]=f-p,l=c;l<b;l++){for(m=0,u=E;u<_;u++)m+=S[u][E]*S[u][l];for(f=m/v,u=E;u<_;u++)S[u][l]=S[u][l]+f*S[u][E]}for(L[E]=p,m=0,l=c;l<b;l++)m+=Math.pow(S[E][l],2);if(m<s)p=0;else{for(v=(f=S[E][E+1])*(p=f<0?Math.sqrt(m):-Math.sqrt(m))-m,S[E][E+1]=f-p,l=c;l<b;l++)w[l]=S[E][l]/v;for(l=c;l<_;l++){for(m=0,u=c;u<b;u++)m+=S[l][u]*S[E][u];for(u=c;u<b;u++)S[l][u]=S[l][u]+m*w[u]}}g<(y=Math.abs(L[E])+Math.abs(w[E]))&&(g=y)}if(a)for(E=b-1;0<=E;E--){if(p!==0){for(v=S[E][E+1]*p,l=c;l<b;l++)A[l][E]=S[E][l]/v;for(l=c;l<b;l++){for(m=0,u=c;u<b;u++)m+=S[E][u]*A[u][l];for(u=c;u<b;u++)A[u][l]=A[u][l]+m*A[u][E]}}for(l=c;l<b;l++)A[E][l]=0,A[l][E]=0;A[E][E]=1,p=w[E],c=E}if(n){if(n==="f")for(E=b;E<_;E++){for(l=b;l<_;l++)S[E][l]=0;S[E][E]=1}for(E=b-1;0<=E;E--){for(c=E+1,p=L[E],l=c;l<M;l++)S[E][l]=0;if(p!==0){for(v=S[E][E]*p,l=c;l<M;l++){for(m=0,u=c;u<_;u++)m+=S[u][E]*S[u][l];for(f=m/v,u=E;u<_;u++)S[u][l]=S[u][l]+f*S[u][E]}for(l=E;l<_;l++)S[l][E]=S[l][E]/p}else for(l=E;l<_;l++)S[l][E]=0;S[E][E]=S[E][E]+1}}for(o*=g,u=b-1;0<=u;u--)for(var P=0;P<50;P++){for(T=!1,c=u;0<=c;c--){if(Math.abs(w[c])<=o){T=!0;break}if(Math.abs(L[c-1])<=o)break}if(!T){for(d=0,h=c-(m=1),E=c;E<u+1&&(f=m*w[E],w[E]=d*w[E],!(Math.abs(f)<=o));E++)if(p=L[E],L[E]=Math.sqrt(f*f+p*p),d=p/(v=L[E]),m=-f/v,n)for(l=0;l<_;l++)y=S[l][h],x=S[l][E],S[l][h]=y*d+x*m,S[l][E]=-y*m+x*d}if(x=L[u],c===u){if(x<0&&(L[u]=-x,a))for(l=0;l<b;l++)A[l][u]=-A[l][u];break}for(g=L[c],f=(((y=L[u-1])-x)*(y+x)+((p=w[u-1])-(v=w[u]))*(p+v))/(2*v*y),p=Math.sqrt(f*f+1),f=((g-x)*(g+x)+v*(y/(f<0?f-p:f+p)-v))/g,E=c+(m=d=1);E<u+1;E++){if(p=w[E],y=L[E],v=m*p,p*=d,x=Math.sqrt(f*f+v*v),f=g*(d=f/(w[E-1]=x))+p*(m=v/x),p=-g*m+p*d,v=y*m,y*=d,a)for(l=0;l<b;l++)g=A[l][E-1],x=A[l][E],A[l][E-1]=g*d+x*m,A[l][E]=-g*m+x*d;if(x=Math.sqrt(f*f+v*v),f=(d=f/(L[E-1]=x))*p+(m=v/x)*y,g=-m*p+d*y,n)for(l=0;l<_;l++)y=S[l][E-1],x=S[l][E],S[l][E-1]=y*d+x*m,S[l][E]=-y*m+x*d}w[c]=0,w[u]=f,L[u]=g}for(E=0;E<b;E++)L[E]<o&&(L[E]=0);return{u:S,q:L,v:A}},r.VERSION="1.1.1",Object.defineProperty(r,"__esModule",{value:!0})})}),Uot=um((e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.default=r;function r(i){if(i===null||i===!0||i===!1)return NaN;var n=Number(i);return isNaN(n)?n:n<0?Math.ceil(n):Math.floor(n)}t.exports=e.default}),Got=um((e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.default=r;function r(i){var n=new Date(Date.UTC(i.getFullYear(),i.getMonth(),i.getDate(),i.getHours(),i.getMinutes(),i.getSeconds(),i.getMilliseconds()));return n.setUTCFullYear(i.getFullYear()),i.getTime()-n.getTime()}t.exports=e.default}),jot=um((e,t)=>{function r(a,o){function s(){this.constructor=a}s.prototype=o.prototype,a.prototype=new s}function i(a,o,s,l){this.message=a,this.expected=o,this.found=s,this.location=l,this.name="SyntaxError",typeof Error.captureStackTrace=="function"&&Error.captureStackTrace(this,i)}r(i,Error),i.buildMessage=function(a,o){var s={literal:function(p){return'"'+u(p.text)+'"'},class:function(p){var v="",m;for(m=0;m<p.parts.length;m++)v+=p.parts[m]instanceof Array?c(p.parts[m][0])+"-"+c(p.parts[m][1]):c(p.parts[m]);return"["+(p.inverted?"^":"")+v+"]"},any:function(p){return"any character"},end:function(p){return"end of input"},other:function(p){return p.description}};function l(p){return p.charCodeAt(0).toString(16).toUpperCase()}function u(p){return p.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(v){return"\\x0"+l(v)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(v){return"\\x"+l(v)})}function c(p){return p.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(v){return"\\x0"+l(v)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(v){return"\\x"+l(v)})}function h(p){return s[p.type](p)}function d(p){var v=new Array(p.length),m,g;for(m=0;m<p.length;m++)v[m]=h(p[m]);if(v.sort(),v.length>0){for(m=1,g=1;m<v.length;m++)v[m-1]!==v[m]&&(v[g]=v[m],g++);v.length=g}switch(v.length){case 1:return v[0];case 2:return v[0]+" or "+v[1];default:return v.slice(0,-1).join(", ")+", or "+v[v.length-1]}}function f(p){return p?'"'+u(p)+'"':"end of input"}return"Expected "+d(a)+" but "+f(o)+" found."};function n(a,o){o=o!==void 0?o:{};var s={},l={svg_path:ct},u=ct,c=function($){if(!$)return[];for(var ie=[],ge=0;ge<$.length;ge++)ie=ie.concat.apply(ie,$[ge]);var oe=ie[0];return oe&&oe.code=="m"&&(delete oe.relative,oe.code="M"),ie},h=function($,ie){return Ps($,ie)},d=/^[Mm]/,f=pe(["M","m"],!1,!1),p=function($,ie,ge){var oe=ts($,[ie]);return ge&&(oe=oe.concat(ts($=="M"?"L":"l",ge[1]))),oe},v=/^[Zz]/,m=pe(["Z","z"],!1,!1),g=function(){return ts("Z")},y=/^[Ll]/,x=pe(["L","l"],!1,!1),b=function($,ie){return ts($,ie)},_=/^[Hh]/,w=pe(["H","h"],!1,!1),S=function($,ie){return ts($,ie.map(function(ge){return{x:ge}}))},A=/^[Vv]/,M=pe(["V","v"],!1,!1),E=function($,ie){return ts($,ie.map(function(ge){return{y:ge}}))},T=/^[Cc]/,L=pe(["C","c"],!1,!1),P=function($,ie,ge){return{x1:$.x,y1:$.y,x2:ie.x,y2:ie.y,x:ge.x,y:ge.y}},C=/^[Ss]/,D=pe(["S","s"],!1,!1),I=function($,ie){return{x2:$.x,y2:$.y,x:ie.x,y:ie.y}},O=/^[Qq]/,R=pe(["Q","q"],!1,!1),H=function($,ie){return{x1:$.x,y1:$.y,x:ie.x,y:ie.y}},j=/^[Tt]/,N=pe(["T","t"],!1,!1),k=/^[Aa]/,G=pe(["A","a"],!1,!1),Y=function($,ie,ge,oe,Ee,rt){return{rx:$,ry:ie,xAxisRotation:ge,largeArc:oe,sweep:Ee,x:rt.x,y:rt.y}},F=function($,ie){return{x:$,y:ie}},Z=function($){return $*1},ne=function($){return $.join("")*1},re=/^[01]/,ae=pe(["0","1"],!1,!1),he=function($){return $=="1"},se=function(){return""},fe=",",J=de(",",!1),te=function($){return $.join("")},le=".",Ae=de(".",!1),xe=/^[eE]/,ye=pe(["e","E"],!1,!1),Se=/^[+\-]/,Pe=pe(["+","-"],!1,!1),Ce=/^[0-9]/,ee=pe([["0","9"]],!1,!1),K=function($){return $.join("")},ve=/^[ \t\n\r]/,Me=pe([" ","	",`
`,"\r"],!1,!1),Q=0,W=[{line:1,column:1}],V=0,z=[],X;if("startRule"in o){if(!(o.startRule in l))throw new Error(`Can't start parsing from rule "`+o.startRule+'".');u=l[o.startRule]}function de($,ie){return{type:"literal",text:$,ignoreCase:ie}}function pe($,ie,ge){return{type:"class",parts:$,inverted:ie,ignoreCase:ge}}function we(){return{type:"end"}}function Je($){var ie=W[$],ge;if(ie)return ie;for(ge=$-1;!W[ge];)ge--;for(ie=W[ge],ie={line:ie.line,column:ie.column};ge<$;)a.charCodeAt(ge)===10?(ie.line++,ie.column=1):ie.column++,ge++;return W[$]=ie,ie}function Qe($,ie){var ge=Je($),oe=Je(ie);return{start:{offset:$,line:ge.line,column:ge.column},end:{offset:ie,line:oe.line,column:oe.column}}}function Ye($){Q<V||(Q>V&&(V=Q,z=[]),z.push($))}function gt($,ie,ge){return new i(i.buildMessage($,ie),$,ie,ge)}function ct(){var $,ie,ge,oe,Ee;for($=Q,ie=[],ge=gr();ge!==s;)ie.push(ge),ge=gr();if(ie!==s)if(ge=be(),ge===s&&(ge=null),ge!==s){for(oe=[],Ee=gr();Ee!==s;)oe.push(Ee),Ee=gr();oe!==s?(ie=c(ge),$=ie):(Q=$,$=s)}else Q=$,$=s;else Q=$,$=s;return $}function be(){var $,ie,ge,oe,Ee,rt;if($=Q,ie=ze(),ie!==s){for(ge=[],oe=Q,Ee=[],rt=gr();rt!==s;)Ee.push(rt),rt=gr();for(Ee!==s?(rt=ze(),rt!==s?(Ee=[Ee,rt],oe=Ee):(Q=oe,oe=s)):(Q=oe,oe=s);oe!==s;){for(ge.push(oe),oe=Q,Ee=[],rt=gr();rt!==s;)Ee.push(rt),rt=gr();Ee!==s?(rt=ze(),rt!==s?(Ee=[Ee,rt],oe=Ee):(Q=oe,oe=s)):(Q=oe,oe=s)}ge!==s?(ie=h(ie,ge),$=ie):(Q=$,$=s)}else Q=$,$=s;return $}function ze(){var $,ie,ge,oe,Ee,rt;if($=Q,ie=$e(),ie!==s){for(ge=[],oe=Q,Ee=[],rt=gr();rt!==s;)Ee.push(rt),rt=gr();for(Ee!==s?(rt=He(),rt!==s?(Ee=[Ee,rt],oe=Ee):(Q=oe,oe=s)):(Q=oe,oe=s);oe!==s;){for(ge.push(oe),oe=Q,Ee=[],rt=gr();rt!==s;)Ee.push(rt),rt=gr();Ee!==s?(rt=He(),rt!==s?(Ee=[Ee,rt],oe=Ee):(Q=oe,oe=s)):(Q=oe,oe=s)}ge!==s?(ie=h(ie,ge),$=ie):(Q=$,$=s)}else Q=$,$=s;return $}function He(){var $;return $=Pt(),$===s&&($=St(),$===s&&($=Ai(),$===s&&($=Ft(),$===s&&($=on(),$===s&&($=ji(),$===s&&($=ce(),$===s&&($=Le(),$===s&&($=ot())))))))),$}function $e(){var $,ie,ge,oe,Ee,rt,vh;if($=Q,d.test(a.charAt(Q))?(ie=a.charAt(Q),Q++):(ie=s,Ye(f)),ie!==s){for(ge=[],oe=gr();oe!==s;)ge.push(oe),oe=gr();ge!==s?(oe=ft(),oe!==s?(Ee=Q,rt=Qt(),rt===s&&(rt=null),rt!==s?(vh=rr(),vh!==s?(rt=[rt,vh],Ee=rt):(Q=Ee,Ee=s)):(Q=Ee,Ee=s),Ee===s&&(Ee=null),Ee!==s?(ie=p(ie,oe,Ee),$=ie):(Q=$,$=s)):(Q=$,$=s)):(Q=$,$=s)}else Q=$,$=s;return $}function Pt(){var $,ie;return $=Q,v.test(a.charAt(Q))?(ie=a.charAt(Q),Q++):(ie=s,Ye(m)),ie!==s&&(ie=g()),$=ie,$}function St(){var $,ie,ge,oe;if($=Q,y.test(a.charAt(Q))?(ie=a.charAt(Q),Q++):(ie=s,Ye(x)),ie!==s){for(ge=[],oe=gr();oe!==s;)ge.push(oe),oe=gr();ge!==s?(oe=rr(),oe!==s?(ie=b(ie,oe),$=ie):(Q=$,$=s)):(Q=$,$=s)}else Q=$,$=s;return $}function rr(){var $,ie,ge,oe,Ee,rt;if($=Q,ie=ft(),ie!==s){for(ge=[],oe=Q,Ee=Qt(),Ee===s&&(Ee=null),Ee!==s?(rt=ft(),rt!==s?(Ee=[Ee,rt],oe=Ee):(Q=oe,oe=s)):(Q=oe,oe=s);oe!==s;)ge.push(oe),oe=Q,Ee=Qt(),Ee===s&&(Ee=null),Ee!==s?(rt=ft(),rt!==s?(Ee=[Ee,rt],oe=Ee):(Q=oe,oe=s)):(Q=oe,oe=s);ge!==s?(ie=h(ie,ge),$=ie):(Q=$,$=s)}else Q=$,$=s;return $}function Ai(){var $,ie,ge,oe;if($=Q,_.test(a.charAt(Q))?(ie=a.charAt(Q),Q++):(ie=s,Ye(w)),ie!==s){for(ge=[],oe=gr();oe!==s;)ge.push(oe),oe=gr();ge!==s?(oe=Vr(),oe!==s?(ie=S(ie,oe),$=ie):(Q=$,$=s)):(Q=$,$=s)}else Q=$,$=s;return $}function Vr(){var $,ie,ge,oe,Ee,rt;if($=Q,ie=nr(),ie!==s){for(ge=[],oe=Q,Ee=Qt(),Ee===s&&(Ee=null),Ee!==s?(rt=nr(),rt!==s?(Ee=[Ee,rt],oe=Ee):(Q=oe,oe=s)):(Q=oe,oe=s);oe!==s;)ge.push(oe),oe=Q,Ee=Qt(),Ee===s&&(Ee=null),Ee!==s?(rt=nr(),rt!==s?(Ee=[Ee,rt],oe=Ee):(Q=oe,oe=s)):(Q=oe,oe=s);ge!==s?(ie=h(ie,ge),$=ie):(Q=$,$=s)}else Q=$,$=s;return $}function Ft(){var $,ie,ge,oe;if($=Q,A.test(a.charAt(Q))?(ie=a.charAt(Q),Q++):(ie=s,Ye(M)),ie!==s){for(ge=[],oe=gr();oe!==s;)ge.push(oe),oe=gr();ge!==s?(oe=Vr(),oe!==s?(ie=E(ie,oe),$=ie):(Q=$,$=s)):(Q=$,$=s)}else Q=$,$=s;return $}function on(){var $,ie,ge,oe;if($=Q,T.test(a.charAt(Q))?(ie=a.charAt(Q),Q++):(ie=s,Ye(L)),ie!==s){for(ge=[],oe=gr();oe!==s;)ge.push(oe),oe=gr();ge!==s?(oe=Sr(),oe!==s?(ie=b(ie,oe),$=ie):(Q=$,$=s)):(Q=$,$=s)}else Q=$,$=s;return $}function Sr(){var $,ie,ge,oe,Ee,rt;if($=Q,ie=qr(),ie!==s){for(ge=[],oe=Q,Ee=Qt(),Ee===s&&(Ee=null),Ee!==s?(rt=qr(),rt!==s?(Ee=[Ee,rt],oe=Ee):(Q=oe,oe=s)):(Q=oe,oe=s);oe!==s;)ge.push(oe),oe=Q,Ee=Qt(),Ee===s&&(Ee=null),Ee!==s?(rt=qr(),rt!==s?(Ee=[Ee,rt],oe=Ee):(Q=oe,oe=s)):(Q=oe,oe=s);ge!==s?(ie=h(ie,ge),$=ie):(Q=$,$=s)}else Q=$,$=s;return $}function qr(){var $,ie,ge,oe,Ee,rt;return $=Q,ie=ft(),ie!==s?(ge=Qt(),ge===s&&(ge=null),ge!==s?(oe=ft(),oe!==s?(Ee=Qt(),Ee===s&&(Ee=null),Ee!==s?(rt=ft(),rt!==s?(ie=P(ie,oe,rt),$=ie):(Q=$,$=s)):(Q=$,$=s)):(Q=$,$=s)):(Q=$,$=s)):(Q=$,$=s),$}function ji(){var $,ie,ge,oe;if($=Q,C.test(a.charAt(Q))?(ie=a.charAt(Q),Q++):(ie=s,Ye(D)),ie!==s){for(ge=[],oe=gr();oe!==s;)ge.push(oe),oe=gr();ge!==s?(oe=Fr(),oe!==s?(ie=b(ie,oe),$=ie):(Q=$,$=s)):(Q=$,$=s)}else Q=$,$=s;return $}function Fr(){var $,ie,ge,oe,Ee,rt;if($=Q,ie=Jr(),ie!==s){for(ge=[],oe=Q,Ee=Qt(),Ee===s&&(Ee=null),Ee!==s?(rt=Jr(),rt!==s?(Ee=[Ee,rt],oe=Ee):(Q=oe,oe=s)):(Q=oe,oe=s);oe!==s;)ge.push(oe),oe=Q,Ee=Qt(),Ee===s&&(Ee=null),Ee!==s?(rt=Jr(),rt!==s?(Ee=[Ee,rt],oe=Ee):(Q=oe,oe=s)):(Q=oe,oe=s);ge!==s?(ie=h(ie,ge),$=ie):(Q=$,$=s)}else Q=$,$=s;return $}function Jr(){var $,ie,ge,oe;return $=Q,ie=ft(),ie!==s?(ge=Qt(),ge===s&&(ge=null),ge!==s?(oe=ft(),oe!==s?(ie=I(ie,oe),$=ie):(Q=$,$=s)):(Q=$,$=s)):(Q=$,$=s),$}function ce(){var $,ie,ge,oe;if($=Q,O.test(a.charAt(Q))?(ie=a.charAt(Q),Q++):(ie=s,Ye(R)),ie!==s){for(ge=[],oe=gr();oe!==s;)ge.push(oe),oe=gr();ge!==s?(oe=De(),oe!==s?(ie=b(ie,oe),$=ie):(Q=$,$=s)):(Q=$,$=s)}else Q=$,$=s;return $}function De(){var $,ie,ge,oe,Ee,rt;if($=Q,ie=Oe(),ie!==s){for(ge=[],oe=Q,Ee=Qt(),Ee===s&&(Ee=null),Ee!==s?(rt=Oe(),rt!==s?(Ee=[Ee,rt],oe=Ee):(Q=oe,oe=s)):(Q=oe,oe=s);oe!==s;)ge.push(oe),oe=Q,Ee=Qt(),Ee===s&&(Ee=null),Ee!==s?(rt=Oe(),rt!==s?(Ee=[Ee,rt],oe=Ee):(Q=oe,oe=s)):(Q=oe,oe=s);ge!==s?(ie=h(ie,ge),$=ie):(Q=$,$=s)}else Q=$,$=s;return $}function Oe(){var $,ie,ge,oe;return $=Q,ie=ft(),ie!==s?(ge=Qt(),ge===s&&(ge=null),ge!==s?(oe=ft(),oe!==s?(ie=H(ie,oe),$=ie):(Q=$,$=s)):(Q=$,$=s)):(Q=$,$=s),$}function Le(){var $,ie,ge,oe;if($=Q,j.test(a.charAt(Q))?(ie=a.charAt(Q),Q++):(ie=s,Ye(N)),ie!==s){for(ge=[],oe=gr();oe!==s;)ge.push(oe),oe=gr();ge!==s?(oe=Ne(),oe!==s?(ie=b(ie,oe),$=ie):(Q=$,$=s)):(Q=$,$=s)}else Q=$,$=s;return $}function Ne(){var $,ie,ge,oe,Ee,rt;if($=Q,ie=ft(),ie!==s){for(ge=[],oe=Q,Ee=Qt(),Ee===s&&(Ee=null),Ee!==s?(rt=ft(),rt!==s?(Ee=[Ee,rt],oe=Ee):(Q=oe,oe=s)):(Q=oe,oe=s);oe!==s;)ge.push(oe),oe=Q,Ee=Qt(),Ee===s&&(Ee=null),Ee!==s?(rt=ft(),rt!==s?(Ee=[Ee,rt],oe=Ee):(Q=oe,oe=s)):(Q=oe,oe=s);ge!==s?(ie=h(ie,ge),$=ie):(Q=$,$=s)}else Q=$,$=s;return $}function ot(){var $,ie,ge,oe;if($=Q,k.test(a.charAt(Q))?(ie=a.charAt(Q),Q++):(ie=s,Ye(G)),ie!==s){for(ge=[],oe=gr();oe!==s;)ge.push(oe),oe=gr();ge!==s?(oe=Gt(),oe!==s?(ie=b(ie,oe),$=ie):(Q=$,$=s)):(Q=$,$=s)}else Q=$,$=s;return $}function Gt(){var $,ie,ge,oe,Ee,rt;if($=Q,ie=wt(),ie!==s){for(ge=[],oe=Q,Ee=Qt(),Ee===s&&(Ee=null),Ee!==s?(rt=wt(),rt!==s?(Ee=[Ee,rt],oe=Ee):(Q=oe,oe=s)):(Q=oe,oe=s);oe!==s;)ge.push(oe),oe=Q,Ee=Qt(),Ee===s&&(Ee=null),Ee!==s?(rt=wt(),rt!==s?(Ee=[Ee,rt],oe=Ee):(Q=oe,oe=s)):(Q=oe,oe=s);ge!==s?(ie=h(ie,ge),$=ie):(Q=$,$=s)}else Q=$,$=s;return $}function wt(){var $,ie,ge,oe,Ee,rt,vh,W7,t3,q7,r3,Y7;return $=Q,ie=Rr(),ie!==s?(ge=Qt(),ge===s&&(ge=null),ge!==s?(oe=Rr(),oe!==s?(Ee=Qt(),Ee===s&&(Ee=null),Ee!==s?(rt=nr(),rt!==s?(vh=Qt(),vh!==s?(W7=ur(),W7!==s?(t3=Qt(),t3===s&&(t3=null),t3!==s?(q7=ur(),q7!==s?(r3=Qt(),r3===s&&(r3=null),r3!==s?(Y7=ft(),Y7!==s?(ie=Y(ie,oe,rt,W7,q7,Y7),$=ie):(Q=$,$=s)):(Q=$,$=s)):(Q=$,$=s)):(Q=$,$=s)):(Q=$,$=s)):(Q=$,$=s)):(Q=$,$=s)):(Q=$,$=s)):(Q=$,$=s)):(Q=$,$=s)):(Q=$,$=s),$}function ft(){var $,ie,ge,oe;return $=Q,ie=nr(),ie!==s?(ge=Qt(),ge===s&&(ge=null),ge!==s?(oe=nr(),oe!==s?(ie=F(ie,oe),$=ie):(Q=$,$=s)):(Q=$,$=s)):(Q=$,$=s),$}function Rr(){var $,ie;return $=Q,ie=Ja(),ie===s&&(ie=Eo()),ie!==s&&(ie=Z(ie)),$=ie,$}function nr(){var $,ie,ge,oe;return $=Q,ie=Q,ge=Cr(),ge===s&&(ge=null),ge!==s?(oe=Ja(),oe!==s?(ge=[ge,oe],ie=ge):(Q=ie,ie=s)):(Q=ie,ie=s),ie===s&&(ie=Q,ge=Cr(),ge===s&&(ge=null),ge!==s?(oe=Eo(),oe!==s?(ge=[ge,oe],ie=ge):(Q=ie,ie=s)):(Q=ie,ie=s)),ie!==s&&(ie=ne(ie)),$=ie,$}function ur(){var $,ie;return $=Q,re.test(a.charAt(Q))?(ie=a.charAt(Q),Q++):(ie=s,Ye(ae)),ie!==s&&(ie=he(ie)),$=ie,$}function Qt(){var $,ie,ge,oe,Ee;if($=Q,ie=[],ge=gr(),ge!==s)for(;ge!==s;)ie.push(ge),ge=gr();else ie=s;if(ie!==s)if(ge=Wi(),ge===s&&(ge=null),ge!==s){for(oe=[],Ee=gr();Ee!==s;)oe.push(Ee),Ee=gr();oe!==s?(ie=[ie,ge,oe],$=ie):(Q=$,$=s)}else Q=$,$=s;else Q=$,$=s;if($===s){if($=Q,ie=Q,ge=Wi(),ge!==s){for(oe=[],Ee=gr();Ee!==s;)oe.push(Ee),Ee=gr();oe!==s?(ge=[ge,oe],ie=ge):(Q=ie,ie=s)}else Q=ie,ie=s;ie!==s&&(ie=se()),$=ie}return $}function Wi(){var $;return a.charCodeAt(Q)===44?($=fe,Q++):($=s,Ye(J)),$}function Ja(){var $,ie,ge,oe;return $=Q,ie=Q,ge=Ts(),ge!==s?(oe=Bi(),oe===s&&(oe=null),oe!==s?(ge=[ge,oe],ie=ge):(Q=ie,ie=s)):(Q=ie,ie=s),ie===s&&(ie=Q,ge=Eo(),ge!==s?(oe=Bi(),oe!==s?(ge=[ge,oe],ie=ge):(Q=ie,ie=s)):(Q=ie,ie=s)),ie!==s&&(ie=te(ie)),$=ie,$}function Ts(){var $,ie,ge,oe,Ee;return $=Q,ie=Q,ge=Eo(),ge===s&&(ge=null),ge!==s?(a.charCodeAt(Q)===46?(oe=le,Q++):(oe=s,Ye(Ae)),oe!==s?(Ee=Eo(),Ee!==s?(ge=[ge,oe,Ee],ie=ge):(Q=ie,ie=s)):(Q=ie,ie=s)):(Q=ie,ie=s),ie===s&&(ie=Q,ge=Eo(),ge!==s?(a.charCodeAt(Q)===46?(oe=le,Q++):(oe=s,Ye(Ae)),oe!==s?(ge=[ge,oe],ie=ge):(Q=ie,ie=s)):(Q=ie,ie=s)),ie!==s&&(ie=te(ie)),$=ie,$}function Bi(){var $,ie,ge,oe,Ee;return $=Q,ie=Q,xe.test(a.charAt(Q))?(ge=a.charAt(Q),Q++):(ge=s,Ye(ye)),ge!==s?(oe=Cr(),oe===s&&(oe=null),oe!==s?(Ee=Eo(),Ee!==s?(ge=[ge,oe,Ee],ie=ge):(Q=ie,ie=s)):(Q=ie,ie=s)):(Q=ie,ie=s),ie!==s&&(ie=te(ie)),$=ie,$}function Cr(){var $;return Se.test(a.charAt(Q))?($=a.charAt(Q),Q++):($=s,Ye(Pe)),$}function Eo(){var $,ie,ge;if($=Q,ie=[],Ce.test(a.charAt(Q))?(ge=a.charAt(Q),Q++):(ge=s,Ye(ee)),ge!==s)for(;ge!==s;)ie.push(ge),Ce.test(a.charAt(Q))?(ge=a.charAt(Q),Q++):(ge=s,Ye(ee));else ie=s;return ie!==s&&(ie=K(ie)),$=ie,$}function gr(){var $,ie;return $=Q,ve.test(a.charAt(Q))?(ie=a.charAt(Q),Q++):(ie=s,Ye(Me)),ie!==s&&(ie=se()),$=ie,$}function Ps($,ie){if(!ie)return[$];for(var ge=[$],oe=0,Ee=ie.length;oe<Ee;oe++)ge[oe+1]=ie[oe][1];return ge}var Gl={m:"moveto",l:"lineto",h:"horizontal lineto",v:"vertical lineto",c:"curveto",s:"smooth curveto",q:"quadratic curveto",t:"smooth quadratic curveto",a:"elliptical arc",z:"closepath"};for(var Ks in Gl)Gl[Ks.toUpperCase()]=Gl[Ks];function ts($,ie){ie||(ie=[{}]);for(var ge=ie.length;ge--;){var oe={code:$,command:Gl[$]};$==$.toLowerCase()&&(oe.relative=!0);for(var Ee in ie[ge])oe[Ee]=ie[ge][Ee];ie[ge]=oe}return ie}if(X=u(),X!==s&&Q===a.length)return X;throw X!==s&&Q<a.length&&Ye(we()),gt(z,V<a.length?a.charAt(V):null,V<a.length?Qe(V,V+1):Qe(V,V))}t.exports={SyntaxError:i,parse:n}}),Dve=um((e,t)=>{var r=jot().parse;r.parseSVG=r,r.makeAbsolute=i,t.exports=r;function i(n){var a,o={x:0,y:0},s={x:"x0",y:"y0",x1:"x0",y1:"y0",x2:"x0",y2:"y0"};return n.forEach(function(l){l.command==="moveto"&&(a=l),l.x0=o.x,l.y0=o.y;for(var u in s)u in l&&(l[u]+=l.relative?l[s[u]]:0);"x"in l||(l.x=o.x),"y"in l||(l.y=o.y),l.relative=!1,l.code=l.code.toUpperCase(),l.command=="closepath"&&(l.x=a.x,l.y=a.y),o=l}),n}}),Wot=um((e,t)=>{t.exports=function(r,i){for(var n=r.split("."),a=i.split("."),o=0;o<3;o++){var s=Number(n[o]),l=Number(a[o]);if(s>l)return 1;if(l>s)return-1;if(!isNaN(s)&&isNaN(l))return 1;if(isNaN(s)&&!isNaN(l))return-1}return 0}}),Wy="149",il={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},qot=0,vJ=1,Yot=2,JF=1,Xot=2,Hx=3,Lu=0,ba=1,go=2,Nn=0,_v=1,mJ=2,gJ=3,yJ=4,Zot=5,Ig=100,Qot=101,Kot=102,xJ=103,bJ=104,Jot=200,$ot=201,est=202,tst=203,Ive=204,Lve=205,rst=206,ist=207,nst=208,ast=209,ost=210,sst=0,lst=1,ust=2,aR=3,cst=4,hst=5,dst=6,fst=7,kve=0,pst=1,vst=2,Gc=0,mst=1,gst=2,yst=3,xst=4,bst=5,Rve=300,jv=301,Wv=302,oR=303,sR=304,V4=306,$h=1e3,Xi=1001,lR=1002,mi=1003,wJ=1004,X9=1005,br=1006,wst=1007,J1=1008,So=1009,_st=1010,Ast=1011,Ove=1012,Sst=1013,ed=1014,On=1015,Cd=1016,Cst=1017,Est=1018,Av=1020,Mst=1021,ga=1023,Tst=1024,Pst=1025,Sv=1026,qv=1027,Dst=1028,Ist=1029,RS=1030,Lst=1031,Bve=1033,Z9=33776,Q9=33777,K9=33778,J9=33779,_J=35840,AJ=35841,SJ=35842,CJ=35843,kst=36196,EJ=37492,MJ=37496,TJ=37808,PJ=37809,DJ=37810,IJ=37811,LJ=37812,kJ=37813,RJ=37814,OJ=37815,BJ=37816,NJ=37817,VJ=37818,FJ=37819,zJ=37820,HJ=37821,$9=36492,Rst=36283,UJ=36284,GJ=36285,jJ=36286,Nve=2200,Vve=2201,$F=2202,OS=2300,BS=2301,eP=2302,Yg=2400,Xg=2401,NS=2402,ez=2500,Ost=2501,ku=3e3,pr=3001,Hd=3200,Fve=3201,Bst=0,Nst=1,gc="srgb",VS="srgb-linear",tP=7680,Vst=519,uR=35044,Fst=35048,WJ="300 es",cR=1035,Ka=class{addEventListener(e,t){this._listeners===void 0&&(this._listeners={});let r=this._listeners;r[e]===void 0&&(r[e]=[]),r[e].indexOf(t)===-1&&r[e].push(t)}hasEventListener(e,t){if(this._listeners===void 0)return!1;let r=this._listeners;return r[e]!==void 0&&r[e].indexOf(t)!==-1}removeEventListener(e,t){if(this._listeners===void 0)return;let r=this._listeners[e];if(r!==void 0){let i=r.indexOf(t);i!==-1&&r.splice(i,1)}}dispatchEvent(e){if(this._listeners===void 0)return;let t=this._listeners[e.type];if(t!==void 0){e.target=this;let r=t.slice(0);for(let i=0,n=r.length;i<n;i++)r[i].call(this,e);e.target=null}}},ao=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"],qJ=1234567,Sb=Math.PI/180,Dw=180/Math.PI;function Il(){let e=Math.random()*4294967295|0,t=Math.random()*4294967295|0,r=Math.random()*4294967295|0,i=Math.random()*4294967295|0;return(ao[e&255]+ao[e>>8&255]+ao[e>>16&255]+ao[e>>24&255]+"-"+ao[t&255]+ao[t>>8&255]+"-"+ao[t>>16&15|64]+ao[t>>24&255]+"-"+ao[r&63|128]+ao[r>>8&255]+"-"+ao[r>>16&255]+ao[r>>24&255]+ao[i&255]+ao[i>>8&255]+ao[i>>16&255]+ao[i>>24&255]).toLowerCase()}function Ln(e,t,r){return Math.max(t,Math.min(r,e))}function tz(e,t){return(e%t+t)%t}function zst(e,t,r,i,n){return i+(e-t)*(n-i)/(r-t)}function Hst(e,t,r){return e!==t?(r-e)/(t-e):0}function Cb(e,t,r){return(1-r)*e+r*t}function Ust(e,t,r,i){return Cb(e,t,1-Math.exp(-r*i))}function Gst(e,t=1){return t-Math.abs(tz(e,t*2)-t)}function jst(e,t,r){return e<=t?0:e>=r?1:(e=(e-t)/(r-t),e*e*(3-2*e))}function Wst(e,t,r){return e<=t?0:e>=r?1:(e=(e-t)/(r-t),e*e*e*(e*(e*6-15)+10))}function qst(e,t){return e+Math.floor(Math.random()*(t-e+1))}function Yst(e,t){return e+Math.random()*(t-e)}function Xst(e){return e*(.5-Math.random())}function Zst(e){e!==void 0&&(qJ=e);let t=qJ+=1831565813;return t=Math.imul(t^t>>>15,t|1),t^=t+Math.imul(t^t>>>7,t|61),((t^t>>>14)>>>0)/4294967296}function Qst(e){return e*Sb}function Kst(e){return e*Dw}function hR(e){return(e&e-1)===0&&e!==0}function zve(e){return Math.pow(2,Math.ceil(Math.log(e)/Math.LN2))}function FS(e){return Math.pow(2,Math.floor(Math.log(e)/Math.LN2))}function Jst(e,t,r,i,n){let a=Math.cos,o=Math.sin,s=a(r/2),l=o(r/2),u=a((t+i)/2),c=o((t+i)/2),h=a((t-i)/2),d=o((t-i)/2),f=a((i-t)/2),p=o((i-t)/2);switch(n){case"XYX":e.set(s*c,l*h,l*d,s*u);break;case"YZY":e.set(l*d,s*c,l*h,s*u);break;case"ZXZ":e.set(l*h,l*d,s*c,s*u);break;case"XZX":e.set(s*c,l*p,l*f,s*u);break;case"YXY":e.set(l*f,s*c,l*p,s*u);break;case"ZYZ":e.set(l*p,l*f,s*c,s*u);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+n)}}function td(e,t){switch(t.constructor){case Float32Array:return e;case Uint16Array:return e/65535;case Uint8Array:return e/255;case Int16Array:return Math.max(e/32767,-1);case Int8Array:return Math.max(e/127,-1);default:throw new Error("Invalid component type.")}}function Ni(e,t){switch(t.constructor){case Float32Array:return e;case Uint16Array:return Math.round(e*65535);case Uint8Array:return Math.round(e*255);case Int16Array:return Math.round(e*32767);case Int8Array:return Math.round(e*127);default:throw new Error("Invalid component type.")}}var vt=Object.freeze({__proto__:null,DEG2RAD:Sb,RAD2DEG:Dw,ceilPowerOfTwo:zve,clamp:Ln,damp:Ust,degToRad:Qst,denormalize:td,euclideanModulo:tz,floorPowerOfTwo:FS,generateUUID:Il,inverseLerp:Hst,isPowerOfTwo:hR,lerp:Cb,mapLinear:zst,normalize:Ni,pingpong:Gst,radToDeg:Kst,randFloat:Yst,randFloatSpread:Xst,randInt:qst,seededRandom:Zst,setQuaternionFromProperEuler:Jst,smootherstep:Wst,smoothstep:jst}),me=class{constructor(e=0,t=0){me.prototype.isVector2=!0,this.x=e,this.y=t}get width(){return this.x}set width(e){this.x=e}get height(){return this.y}set height(e){this.y=e}set(e,t){return this.x=e,this.y=t,this}setScalar(e){return this.x=e,this.y=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y)}copy(e){return this.x=e.x,this.y=e.y,this}add(e){return this.x+=e.x,this.y+=e.y,this}addScalar(e){return this.x+=e,this.y+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this}subScalar(e){return this.x-=e,this.y-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this}multiply(e){return this.x*=e.x,this.y*=e.y,this}multiplyScalar(e){return this.x*=e,this.y*=e,this}divide(e){return this.x/=e.x,this.y/=e.y,this}divideScalar(e){return this.multiplyScalar(1/e)}applyMatrix3(e){let t=this.x,r=this.y,i=e.elements;return this.x=i[0]*t+i[3]*r+i[6],this.y=i[1]*t+i[4]*r+i[7],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this}clampLength(e,t){let r=this.length();return this.divideScalar(r||1).multiplyScalar(Math.max(e,Math.min(t,r)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){let t=this.x-e.x,r=this.y-e.y;return t*t+r*r}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this}lerpVectors(e,t,r){return this.x=e.x+(t.x-e.x)*r,this.y=e.y+(t.y-e.y)*r,this}equals(e){return e.x===this.x&&e.y===this.y}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this}rotateAround(e,t){let r=Math.cos(t),i=Math.sin(t),n=this.x-e.x,a=this.y-e.y;return this.x=n*r-a*i+e.x,this.y=n*i+a*r+e.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}},Bn=class{constructor(){Bn.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1]}set(e,t,r,i,n,a,o,s,l){let u=this.elements;return u[0]=e,u[1]=i,u[2]=o,u[3]=t,u[4]=n,u[5]=s,u[6]=r,u[7]=a,u[8]=l,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(e){let t=this.elements,r=e.elements;return t[0]=r[0],t[1]=r[1],t[2]=r[2],t[3]=r[3],t[4]=r[4],t[5]=r[5],t[6]=r[6],t[7]=r[7],t[8]=r[8],this}extractBasis(e,t,r){return e.setFromMatrix3Column(this,0),t.setFromMatrix3Column(this,1),r.setFromMatrix3Column(this,2),this}setFromMatrix4(e){let t=e.elements;return this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]),this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){let r=e.elements,i=t.elements,n=this.elements,a=r[0],o=r[3],s=r[6],l=r[1],u=r[4],c=r[7],h=r[2],d=r[5],f=r[8],p=i[0],v=i[3],m=i[6],g=i[1],y=i[4],x=i[7],b=i[2],_=i[5],w=i[8];return n[0]=a*p+o*g+s*b,n[3]=a*v+o*y+s*_,n[6]=a*m+o*x+s*w,n[1]=l*p+u*g+c*b,n[4]=l*v+u*y+c*_,n[7]=l*m+u*x+c*w,n[2]=h*p+d*g+f*b,n[5]=h*v+d*y+f*_,n[8]=h*m+d*x+f*w,this}multiplyScalar(e){let t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this}determinant(){let e=this.elements,t=e[0],r=e[1],i=e[2],n=e[3],a=e[4],o=e[5],s=e[6],l=e[7],u=e[8];return t*a*u-t*o*l-r*n*u+r*o*s+i*n*l-i*a*s}invert(){let e=this.elements,t=e[0],r=e[1],i=e[2],n=e[3],a=e[4],o=e[5],s=e[6],l=e[7],u=e[8],c=u*a-o*l,h=o*s-u*n,d=l*n-a*s,f=t*c+r*h+i*d;if(f===0)return this.set(0,0,0,0,0,0,0,0,0);let p=1/f;return e[0]=c*p,e[1]=(i*l-u*r)*p,e[2]=(o*r-i*a)*p,e[3]=h*p,e[4]=(u*t-i*s)*p,e[5]=(i*n-o*t)*p,e[6]=d*p,e[7]=(r*s-l*t)*p,e[8]=(a*t-r*n)*p,this}transpose(){let e,t=this.elements;return e=t[1],t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this}getNormalMatrix(e){return this.setFromMatrix4(e).invert().transpose()}transposeIntoArray(e){let t=this.elements;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this}setUvTransform(e,t,r,i,n,a,o){let s=Math.cos(n),l=Math.sin(n);return this.set(r*s,r*l,-r*(s*a+l*o)+a+e,-i*l,i*s,-i*(-l*a+s*o)+o+t,0,0,1),this}scale(e,t){return this.premultiply(rP.makeScale(e,t)),this}rotate(e){return this.premultiply(rP.makeRotation(-e)),this}translate(e,t){return this.premultiply(rP.makeTranslation(e,t)),this}makeTranslation(e,t){return this.set(1,0,e,0,1,t,0,0,1),this}makeRotation(e){let t=Math.cos(e),r=Math.sin(e);return this.set(t,-r,0,r,t,0,0,0,1),this}makeScale(e,t){return this.set(e,0,0,0,t,0,0,0,1),this}equals(e){let t=this.elements,r=e.elements;for(let i=0;i<9;i++)if(t[i]!==r[i])return!1;return!0}fromArray(e,t=0){for(let r=0;r<9;r++)this.elements[r]=e[r+t];return this}toArray(e=[],t=0){let r=this.elements;return e[t]=r[0],e[t+1]=r[1],e[t+2]=r[2],e[t+3]=r[3],e[t+4]=r[4],e[t+5]=r[5],e[t+6]=r[6],e[t+7]=r[7],e[t+8]=r[8],e}clone(){return new this.constructor().fromArray(this.elements)}},rP=new Bn;function Hve(e){for(let t=e.length-1;t>=0;--t)if(e[t]>=65535)return!0;return!1}var $st={Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array};function D_(e,t){return new $st[e](t)}function Iw(e){return document.createElementNS("http://www.w3.org/1999/xhtml",e)}function Cv(e){return e<.04045?e*.0773993808:Math.pow(e*.9478672986+.0521327014,2.4)}function FA(e){return e<.0031308?e*12.92:1.055*Math.pow(e,.41666)-.055}var iP={[gc]:{[VS]:Cv},[VS]:{[gc]:FA}},To={legacyMode:!0,get workingColorSpace(){return VS},set workingColorSpace(e){console.warn("THREE.ColorManagement: .workingColorSpace is readonly.")},convert:function(e,t,r){if(this.legacyMode||t===r||!t||!r)return e;if(iP[t]&&iP[t][r]!==void 0){let i=iP[t][r];return e.r=i(e.r),e.g=i(e.g),e.b=i(e.b),e}throw new Error("Unsupported color space conversion.")},fromWorkingColorSpace:function(e,t){return this.convert(e,this.workingColorSpace,t)},toWorkingColorSpace:function(e,t){return this.convert(e,t,this.workingColorSpace)}},Uve={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},Un={r:0,g:0,b:0},Xl={h:0,s:0,l:0},I_={h:0,s:0,l:0};function nP(e,t,r){return r<0&&(r+=1),r>1&&(r-=1),r<1/6?e+(t-e)*6*r:r<1/2?t:r<2/3?e+(t-e)*6*(2/3-r):e}function L_(e,t){return t.r=e.r,t.g=e.g,t.b=e.b,t}var Vt=class{constructor(e,t,r){return this.isColor=!0,this.r=1,this.g=1,this.b=1,t===void 0&&r===void 0?this.set(e):this.setRGB(e,t,r)}set(e){return e&&e.isColor?this.copy(e):typeof e=="number"?this.setHex(e):typeof e=="string"&&this.setStyle(e),this}setScalar(e){return this.r=e,this.g=e,this.b=e,this}setHex(e,t=gc){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(e&255)/255,To.toWorkingColorSpace(this,t),this}setRGB(e,t,r,i=To.workingColorSpace){return this.r=e,this.g=t,this.b=r,To.toWorkingColorSpace(this,i),this}setHSL(e,t,r,i=To.workingColorSpace){if(e=tz(e,1),t=Ln(t,0,1),r=Ln(r,0,1),t===0)this.r=this.g=this.b=r;else{let n=r<=.5?r*(1+t):r+t-r*t,a=2*r-n;this.r=nP(a,n,e+1/3),this.g=nP(a,n,e),this.b=nP(a,n,e-1/3)}return To.toWorkingColorSpace(this,i),this}setStyle(e,t=gc){function r(n){n!==void 0&&parseFloat(n)<1&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}let i;if(i=/^((?:rgb|hsl)a?)\(([^\)]*)\)/.exec(e)){let n,a=i[1],o=i[2];switch(a){case"rgb":case"rgba":if(n=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(o))return this.r=Math.min(255,parseInt(n[1],10))/255,this.g=Math.min(255,parseInt(n[2],10))/255,this.b=Math.min(255,parseInt(n[3],10))/255,To.toWorkingColorSpace(this,t),r(n[4]),this;if(n=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(o))return this.r=Math.min(100,parseInt(n[1],10))/100,this.g=Math.min(100,parseInt(n[2],10))/100,this.b=Math.min(100,parseInt(n[3],10))/100,To.toWorkingColorSpace(this,t),r(n[4]),this;break;case"hsl":case"hsla":if(n=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(o)){let s=parseFloat(n[1])/360,l=parseFloat(n[2])/100,u=parseFloat(n[3])/100;return r(n[4]),this.setHSL(s,l,u,t)}break}}else if(i=/^\#([A-Fa-f\d]+)$/.exec(e)){let n=i[1],a=n.length;if(a===3)return this.r=parseInt(n.charAt(0)+n.charAt(0),16)/255,this.g=parseInt(n.charAt(1)+n.charAt(1),16)/255,this.b=parseInt(n.charAt(2)+n.charAt(2),16)/255,To.toWorkingColorSpace(this,t),this;if(a===6)return this.r=parseInt(n.charAt(0)+n.charAt(1),16)/255,this.g=parseInt(n.charAt(2)+n.charAt(3),16)/255,this.b=parseInt(n.charAt(4)+n.charAt(5),16)/255,To.toWorkingColorSpace(this,t),this}return e&&e.length>0?this.setColorName(e,t):this}setColorName(e,t=gc){let r=Uve[e.toLowerCase()];return r!==void 0?this.setHex(r,t):console.warn("THREE.Color: Unknown color "+e),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}copySRGBToLinear(e){return this.r=Cv(e.r),this.g=Cv(e.g),this.b=Cv(e.b),this}copyLinearToSRGB(e){return this.r=FA(e.r),this.g=FA(e.g),this.b=FA(e.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(e=gc){return To.fromWorkingColorSpace(L_(this,Un),e),Ln(Un.r*255,0,255)<<16^Ln(Un.g*255,0,255)<<8^Ln(Un.b*255,0,255)<<0}getHexString(e=gc){return("000000"+this.getHex(e).toString(16)).slice(-6)}getHSL(e,t=To.workingColorSpace){To.fromWorkingColorSpace(L_(this,Un),t);let r=Un.r,i=Un.g,n=Un.b,a=Math.max(r,i,n),o=Math.min(r,i,n),s,l,u=(o+a)/2;if(o===a)s=0,l=0;else{let c=a-o;switch(l=u<=.5?c/(a+o):c/(2-a-o),a){case r:s=(i-n)/c+(i<n?6:0);break;case i:s=(n-r)/c+2;break;case n:s=(r-i)/c+4;break}s/=6}return e.h=s,e.s=l,e.l=u,e}getRGB(e,t=To.workingColorSpace){return To.fromWorkingColorSpace(L_(this,Un),t),e.r=Un.r,e.g=Un.g,e.b=Un.b,e}getStyle(e=gc){return To.fromWorkingColorSpace(L_(this,Un),e),e!==gc?`color(${e} ${Un.r} ${Un.g} ${Un.b})`:`rgb(${Un.r*255|0},${Un.g*255|0},${Un.b*255|0})`}offsetHSL(e,t,r){return this.getHSL(Xl),Xl.h+=e,Xl.s+=t,Xl.l+=r,this.setHSL(Xl.h,Xl.s,Xl.l),this}add(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this}addColors(e,t){return this.r=e.r+t.r,this.g=e.g+t.g,this.b=e.b+t.b,this}addScalar(e){return this.r+=e,this.g+=e,this.b+=e,this}sub(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this}multiply(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this}multiplyScalar(e){return this.r*=e,this.g*=e,this.b*=e,this}lerp(e,t){return this.r+=(e.r-this.r)*t,this.g+=(e.g-this.g)*t,this.b+=(e.b-this.b)*t,this}lerpColors(e,t,r){return this.r=e.r+(t.r-e.r)*r,this.g=e.g+(t.g-e.g)*r,this.b=e.b+(t.b-e.b)*r,this}lerpHSL(e,t){this.getHSL(Xl),e.getHSL(I_);let r=Cb(Xl.h,I_.h,t),i=Cb(Xl.s,I_.s,t),n=Cb(Xl.l,I_.l,t);return this.setHSL(r,i,n),this}equals(e){return e.r===this.r&&e.g===this.g&&e.b===this.b}fromArray(e,t=0){return this.r=e[t],this.g=e[t+1],this.b=e[t+2],this}toArray(e=[],t=0){return e[t]=this.r,e[t+1]=this.g,e[t+2]=this.b,e}fromBufferAttribute(e,t){return this.r=e.getX(t),this.g=e.getY(t),this.b=e.getZ(t),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}};Vt.NAMES=Uve;var jm,Gve=class{static getDataURL(e){if(/^data:/i.test(e.src)||typeof HTMLCanvasElement>"u")return e.src;let t;if(e instanceof HTMLCanvasElement)t=e;else{jm===void 0&&(jm=Iw("canvas")),jm.width=e.width,jm.height=e.height;let r=jm.getContext("2d");e instanceof ImageData?r.putImageData(e,0,0):r.drawImage(e,0,0,e.width,e.height),t=jm}return t.width>2048||t.height>2048?(console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",e),t.toDataURL("image/jpeg",.6)):t.toDataURL("image/png")}static sRGBToLinear(e){if(typeof HTMLImageElement<"u"&&e instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&e instanceof ImageBitmap){let t=Iw("canvas");t.width=e.width,t.height=e.height;let r=t.getContext("2d");r.drawImage(e,0,0,e.width,e.height);let i=r.getImageData(0,0,e.width,e.height),n=i.data;for(let a=0;a<n.length;a++)n[a]=Cv(n[a]/255)*255;return r.putImageData(i,0,0),t}else if(e.data){let t=e.data.slice(0);for(let r=0;r<t.length;r++)t instanceof Uint8Array||t instanceof Uint8ClampedArray?t[r]=Math.floor(Cv(t[r]/255)*255):t[r]=Cv(t[r]);return{data:t,width:e.width,height:e.height}}else return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),e}},jve=class{constructor(e=null){this.isSource=!0,this.uuid=Il(),this.data=e,this.version=0}set needsUpdate(e){e===!0&&this.version++}toJSON(e){let t=e===void 0||typeof e=="string";if(!t&&e.images[this.uuid]!==void 0)return e.images[this.uuid];let r={uuid:this.uuid,url:""},i=this.data;if(i!==null){let n;if(Array.isArray(i)){n=[];for(let a=0,o=i.length;a<o;a++)i[a].isDataTexture?n.push(aP(i[a].image)):n.push(aP(i[a]))}else n=aP(i);r.url=n}return t||(e.images[this.uuid]=r),r}};function aP(e){return typeof HTMLImageElement<"u"&&e instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&e instanceof ImageBitmap?Gve.getDataURL(e):e.data?{data:Array.from(e.data),width:e.width,height:e.height,type:e.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}var elt=0,an=class extends Ka{constructor(e=an.DEFAULT_IMAGE,t=an.DEFAULT_MAPPING,r=Xi,i=Xi,n=br,a=J1,o=ga,s=So,l=an.DEFAULT_ANISOTROPY,u=ku){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:elt++}),this.uuid=Il(),this.name="",this.source=new jve(e),this.mipmaps=[],this.mapping=t,this.wrapS=r,this.wrapT=i,this.magFilter=n,this.minFilter=a,this.anisotropy=l,this.format=o,this.internalFormat=null,this.type=s,this.offset=new me(0,0),this.repeat=new me(1,1),this.center=new me(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new Bn,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.encoding=u,this.userData={},this.version=0,this.onUpdate=null,this.isRenderTargetTexture=!1,this.needsPMREMUpdate=!1}get image(){return this.source.data}set image(e){this.source.data=e}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return new this.constructor().copy(this)}copy(e){return this.name=e.name,this.source=e.source,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.internalFormat=e.internalFormat,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.encoding=e.encoding,this.userData=JSON.parse(JSON.stringify(e.userData)),this.needsUpdate=!0,this}toJSON(e){let t=e===void 0||typeof e=="string";if(!t&&e.textures[this.uuid]!==void 0)return e.textures[this.uuid];let r={metadata:{version:4.5,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(e).uuid,mapping:this.mapping,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,type:this.type,encoding:this.encoding,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(r.userData=this.userData),t||(e.textures[this.uuid]=r),r}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(e){if(this.mapping!==Rve)return e;if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case $h:e.x=e.x-Math.floor(e.x);break;case Xi:e.x=e.x<0?0:1;break;case lR:Math.abs(Math.floor(e.x)%2)===1?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x);break}if(e.y<0||e.y>1)switch(this.wrapT){case $h:e.y=e.y-Math.floor(e.y);break;case Xi:e.y=e.y<0?0:1;break;case lR:Math.abs(Math.floor(e.y)%2)===1?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y);break}return this.flipY&&(e.y=1-e.y),e}set needsUpdate(e){e===!0&&(this.version++,this.source.needsUpdate=!0)}};an.DEFAULT_IMAGE=null;an.DEFAULT_MAPPING=Rve;an.DEFAULT_ANISOTROPY=1;var er=class{constructor(e=0,t=0,r=0,i=1){er.prototype.isVector4=!0,this.x=e,this.y=t,this.z=r,this.w=i}get width(){return this.z}set width(e){this.z=e}get height(){return this.w}set height(e){this.w=e}set(e,t,r,i){return this.x=e,this.y=t,this.z=r,this.w=i,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setW(e){return this.w=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=e.w!==void 0?e.w:1,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this.w=e.w+t.w,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this.w+=e.w*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}applyMatrix4(e){let t=this.x,r=this.y,i=this.z,n=this.w,a=e.elements;return this.x=a[0]*t+a[4]*r+a[8]*i+a[12]*n,this.y=a[1]*t+a[5]*r+a[9]*i+a[13]*n,this.z=a[2]*t+a[6]*r+a[10]*i+a[14]*n,this.w=a[3]*t+a[7]*r+a[11]*i+a[15]*n,this}divideScalar(e){return this.multiplyScalar(1/e)}setAxisAngleFromQuaternion(e){this.w=2*Math.acos(e.w);let t=Math.sqrt(1-e.w*e.w);return t<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/t,this.y=e.y/t,this.z=e.z/t),this}setAxisAngleFromRotationMatrix(e){let t,r,i,n,a=e.elements,o=a[0],s=a[4],l=a[8],u=a[1],c=a[5],h=a[9],d=a[2],f=a[6],p=a[10];if(Math.abs(s-u)<.01&&Math.abs(l-d)<.01&&Math.abs(h-f)<.01){if(Math.abs(s+u)<.1&&Math.abs(l+d)<.1&&Math.abs(h+f)<.1&&Math.abs(o+c+p-3)<.1)return this.set(1,0,0,0),this;t=Math.PI;let m=(o+1)/2,g=(c+1)/2,y=(p+1)/2,x=(s+u)/4,b=(l+d)/4,_=(h+f)/4;return m>g&&m>y?m<.01?(r=0,i=.707106781,n=.707106781):(r=Math.sqrt(m),i=x/r,n=b/r):g>y?g<.01?(r=.707106781,i=0,n=.707106781):(i=Math.sqrt(g),r=x/i,n=_/i):y<.01?(r=.707106781,i=.707106781,n=0):(n=Math.sqrt(y),r=b/n,i=_/n),this.set(r,i,n,t),this}let v=Math.sqrt((f-h)*(f-h)+(l-d)*(l-d)+(u-s)*(u-s));return Math.abs(v)<.001&&(v=1),this.x=(f-h)/v,this.y=(l-d)/v,this.z=(u-s)/v,this.w=Math.acos((o+c+p-1)/2),this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this.w=Math.max(e.w,Math.min(t.w,this.w)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this.w=Math.max(e,Math.min(t,this.w)),this}clampLength(e,t){let r=this.length();return this.divideScalar(r||1).multiplyScalar(Math.max(e,Math.min(t,r)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this.w=this.w<0?Math.ceil(this.w):Math.floor(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this.w+=(e.w-this.w)*t,this}lerpVectors(e,t,r){return this.x=e.x+(t.x-e.x)*r,this.y=e.y+(t.y-e.y)*r,this.z=e.z+(t.z-e.z)*r,this.w=e.w+(t.w-e.w)*r,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.w=e[t+3],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this.w=e.getW(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}},ui=class extends Ka{constructor(e=1,t=1,r={}){super(),this.isWebGLRenderTarget=!0,this.width=e,this.height=t,this.depth=1,this.scissor=new er(0,0,e,t),this.scissorTest=!1,this.viewport=new er(0,0,e,t);let i={width:e,height:t,depth:1};this.texture=new an(i,r.mapping,r.wrapS,r.wrapT,r.magFilter,r.minFilter,r.format,r.type,r.anisotropy,r.encoding),this.texture.isRenderTargetTexture=!0,this.texture.flipY=!1,this.texture.generateMipmaps=r.generateMipmaps!==void 0?r.generateMipmaps:!1,this.texture.internalFormat=r.internalFormat!==void 0?r.internalFormat:null,this.texture.minFilter=r.minFilter!==void 0?r.minFilter:br,this.depthBuffer=r.depthBuffer!==void 0?r.depthBuffer:!0,this.stencilBuffer=r.stencilBuffer!==void 0?r.stencilBuffer:!1,this.depthTexture=r.depthTexture!==void 0?r.depthTexture:null,this.samples=r.samples!==void 0?r.samples:0}setSize(e,t,r=1){(this.width!==e||this.height!==t||this.depth!==r)&&(this.width=e,this.height=t,this.depth=r,this.texture.image.width=e,this.texture.image.height=t,this.texture.image.depth=r,this.dispose()),this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)}clone(){return new this.constructor().copy(this)}copy(e){this.width=e.width,this.height=e.height,this.depth=e.depth,this.viewport.copy(e.viewport),this.texture=e.texture.clone(),this.texture.isRenderTargetTexture=!0;let t=Object.assign({},e.texture.image);return this.texture.source=new jve(t),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,e.depthTexture!==null&&(this.depthTexture=e.depthTexture.clone()),this.samples=e.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}},Wve=class extends an{constructor(e=null,t=1,r=1,i=1){super(null),this.isDataArrayTexture=!0,this.image={data:e,width:t,height:r,depth:i},this.magFilter=mi,this.minFilter=mi,this.wrapR=Xi,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}},tlt=class extends an{constructor(e=null,t=1,r=1,i=1){super(null),this.isData3DTexture=!0,this.image={data:e,width:t,height:r,depth:i},this.magFilter=mi,this.minFilter=mi,this.wrapR=Xi,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}},rlt=class extends ui{constructor(e=1,t=1,r=1,i={}){super(e,t,i),this.isWebGLMultipleRenderTargets=!0;let n=this.texture;this.texture=[];for(let a=0;a<r;a++)this.texture[a]=n.clone(),this.texture[a].isRenderTargetTexture=!0}setSize(e,t,r=1){if(this.width!==e||this.height!==t||this.depth!==r){this.width=e,this.height=t,this.depth=r;for(let i=0,n=this.texture.length;i<n;i++)this.texture[i].image.width=e,this.texture[i].image.height=t,this.texture[i].image.depth=r;this.dispose()}return this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t),this}copy(e){this.dispose(),this.width=e.width,this.height=e.height,this.depth=e.depth,this.viewport.set(0,0,this.width,this.height),this.scissor.set(0,0,this.width,this.height),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,e.depthTexture!==null&&(this.depthTexture=e.depthTexture.clone()),this.texture.length=0;for(let t=0,r=e.texture.length;t<r;t++)this.texture[t]=e.texture[t].clone(),this.texture[t].isRenderTargetTexture=!0;return this}},Jt=class{constructor(e=0,t=0,r=0,i=1){this.isQuaternion=!0,this._x=e,this._y=t,this._z=r,this._w=i}static slerpFlat(e,t,r,i,n,a,o){let s=r[i+0],l=r[i+1],u=r[i+2],c=r[i+3],h=n[a+0],d=n[a+1],f=n[a+2],p=n[a+3];if(o===0){e[t+0]=s,e[t+1]=l,e[t+2]=u,e[t+3]=c;return}if(o===1){e[t+0]=h,e[t+1]=d,e[t+2]=f,e[t+3]=p;return}if(c!==p||s!==h||l!==d||u!==f){let v=1-o,m=s*h+l*d+u*f+c*p,g=m>=0?1:-1,y=1-m*m;if(y>Number.EPSILON){let b=Math.sqrt(y),_=Math.atan2(b,m*g);v=Math.sin(v*_)/b,o=Math.sin(o*_)/b}let x=o*g;if(s=s*v+h*x,l=l*v+d*x,u=u*v+f*x,c=c*v+p*x,v===1-o){let b=1/Math.sqrt(s*s+l*l+u*u+c*c);s*=b,l*=b,u*=b,c*=b}}e[t]=s,e[t+1]=l,e[t+2]=u,e[t+3]=c}static multiplyQuaternionsFlat(e,t,r,i,n,a){let o=r[i],s=r[i+1],l=r[i+2],u=r[i+3],c=n[a],h=n[a+1],d=n[a+2],f=n[a+3];return e[t]=o*f+u*c+s*d-l*h,e[t+1]=s*f+u*h+l*c-o*d,e[t+2]=l*f+u*d+o*h-s*c,e[t+3]=u*f-o*c-s*h-l*d,e}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get w(){return this._w}set w(e){this._w=e,this._onChangeCallback()}set(e,t,r,i){return this._x=e,this._y=t,this._z=r,this._w=i,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}setFromEuler(e,t){let r=e._x,i=e._y,n=e._z,a=e._order,o=Math.cos,s=Math.sin,l=o(r/2),u=o(i/2),c=o(n/2),h=s(r/2),d=s(i/2),f=s(n/2);switch(a){case"XYZ":this._x=h*u*c+l*d*f,this._y=l*d*c-h*u*f,this._z=l*u*f+h*d*c,this._w=l*u*c-h*d*f;break;case"YXZ":this._x=h*u*c+l*d*f,this._y=l*d*c-h*u*f,this._z=l*u*f-h*d*c,this._w=l*u*c+h*d*f;break;case"ZXY":this._x=h*u*c-l*d*f,this._y=l*d*c+h*u*f,this._z=l*u*f+h*d*c,this._w=l*u*c-h*d*f;break;case"ZYX":this._x=h*u*c-l*d*f,this._y=l*d*c+h*u*f,this._z=l*u*f-h*d*c,this._w=l*u*c+h*d*f;break;case"YZX":this._x=h*u*c+l*d*f,this._y=l*d*c+h*u*f,this._z=l*u*f-h*d*c,this._w=l*u*c-h*d*f;break;case"XZY":this._x=h*u*c-l*d*f,this._y=l*d*c-h*u*f,this._z=l*u*f+h*d*c,this._w=l*u*c+h*d*f;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+a)}return t!==!1&&this._onChangeCallback(),this}setFromAxisAngle(e,t){let r=t/2,i=Math.sin(r);return this._x=e.x*i,this._y=e.y*i,this._z=e.z*i,this._w=Math.cos(r),this._onChangeCallback(),this}setFromRotationMatrix(e){let t=e.elements,r=t[0],i=t[4],n=t[8],a=t[1],o=t[5],s=t[9],l=t[2],u=t[6],c=t[10],h=r+o+c;if(h>0){let d=.5/Math.sqrt(h+1);this._w=.25/d,this._x=(u-s)*d,this._y=(n-l)*d,this._z=(a-i)*d}else if(r>o&&r>c){let d=2*Math.sqrt(1+r-o-c);this._w=(u-s)/d,this._x=.25*d,this._y=(i+a)/d,this._z=(n+l)/d}else if(o>c){let d=2*Math.sqrt(1+o-r-c);this._w=(n-l)/d,this._x=(i+a)/d,this._y=.25*d,this._z=(s+u)/d}else{let d=2*Math.sqrt(1+c-r-o);this._w=(a-i)/d,this._x=(n+l)/d,this._y=(s+u)/d,this._z=.25*d}return this._onChangeCallback(),this}setFromUnitVectors(e,t){let r=e.dot(t)+1;return r<Number.EPSILON?(r=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=r):(this._x=0,this._y=-e.z,this._z=e.y,this._w=r)):(this._x=e.y*t.z-e.z*t.y,this._y=e.z*t.x-e.x*t.z,this._z=e.x*t.y-e.y*t.x,this._w=r),this.normalize()}angleTo(e){return 2*Math.acos(Math.abs(Ln(this.dot(e),-1,1)))}rotateTowards(e,t){let r=this.angleTo(e);if(r===0)return this;let i=Math.min(1,t/r);return this.slerp(e,i),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let e=this.length();return e===0?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}multiply(e){return this.multiplyQuaternions(this,e)}premultiply(e){return this.multiplyQuaternions(e,this)}multiplyQuaternions(e,t){let r=e._x,i=e._y,n=e._z,a=e._w,o=t._x,s=t._y,l=t._z,u=t._w;return this._x=r*u+a*o+i*l-n*s,this._y=i*u+a*s+n*o-r*l,this._z=n*u+a*l+r*s-i*o,this._w=a*u-r*o-i*s-n*l,this._onChangeCallback(),this}slerp(e,t){if(t===0)return this;if(t===1)return this.copy(e);let r=this._x,i=this._y,n=this._z,a=this._w,o=a*e._w+r*e._x+i*e._y+n*e._z;if(o<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,o=-o):this.copy(e),o>=1)return this._w=a,this._x=r,this._y=i,this._z=n,this;let s=1-o*o;if(s<=Number.EPSILON){let d=1-t;return this._w=d*a+t*this._w,this._x=d*r+t*this._x,this._y=d*i+t*this._y,this._z=d*n+t*this._z,this.normalize(),this._onChangeCallback(),this}let l=Math.sqrt(s),u=Math.atan2(l,o),c=Math.sin((1-t)*u)/l,h=Math.sin(t*u)/l;return this._w=a*c+this._w*h,this._x=r*c+this._x*h,this._y=i*c+this._y*h,this._z=n*c+this._z*h,this._onChangeCallback(),this}slerpQuaternions(e,t,r){return this.copy(e).slerp(t,r)}random(){let e=Math.random(),t=Math.sqrt(1-e),r=Math.sqrt(e),i=2*Math.PI*Math.random(),n=2*Math.PI*Math.random();return this.set(t*Math.cos(i),r*Math.sin(n),r*Math.cos(n),t*Math.sin(i))}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}fromArray(e,t=0){return this._x=e[t],this._y=e[t+1],this._z=e[t+2],this._w=e[t+3],this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._w,e}fromBufferAttribute(e,t){return this._x=e.getX(t),this._y=e.getY(t),this._z=e.getZ(t),this._w=e.getW(t),this}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}},U=class{constructor(e=0,t=0,r=0){U.prototype.isVector3=!0,this.x=e,this.y=t,this.z=r}set(e,t,r){return r===void 0&&(r=this.z),this.x=e,this.y=t,this.z=r,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this}multiplyVectors(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this}applyEuler(e){return this.applyQuaternion(YJ.setFromEuler(e))}applyAxisAngle(e,t){return this.applyQuaternion(YJ.setFromAxisAngle(e,t))}applyMatrix3(e){let t=this.x,r=this.y,i=this.z,n=e.elements;return this.x=n[0]*t+n[3]*r+n[6]*i,this.y=n[1]*t+n[4]*r+n[7]*i,this.z=n[2]*t+n[5]*r+n[8]*i,this}applyNormalMatrix(e){return this.applyMatrix3(e).normalize()}applyMatrix4(e){let t=this.x,r=this.y,i=this.z,n=e.elements,a=1/(n[3]*t+n[7]*r+n[11]*i+n[15]);return this.x=(n[0]*t+n[4]*r+n[8]*i+n[12])*a,this.y=(n[1]*t+n[5]*r+n[9]*i+n[13])*a,this.z=(n[2]*t+n[6]*r+n[10]*i+n[14])*a,this}applyQuaternion(e){let t=this.x,r=this.y,i=this.z,n=e.x,a=e.y,o=e.z,s=e.w,l=s*t+a*i-o*r,u=s*r+o*t-n*i,c=s*i+n*r-a*t,h=-n*t-a*r-o*i;return this.x=l*s+h*-n+u*-o-c*-a,this.y=u*s+h*-a+c*-n-l*-o,this.z=c*s+h*-o+l*-a-u*-n,this}project(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}unproject(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}transformDirection(e){let t=this.x,r=this.y,i=this.z,n=e.elements;return this.x=n[0]*t+n[4]*r+n[8]*i,this.y=n[1]*t+n[5]*r+n[9]*i,this.z=n[2]*t+n[6]*r+n[10]*i,this.normalize()}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}divideScalar(e){return this.multiplyScalar(1/e)}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this}clampLength(e,t){let r=this.length();return this.divideScalar(r||1).multiplyScalar(Math.max(e,Math.min(t,r)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this}lerpVectors(e,t,r){return this.x=e.x+(t.x-e.x)*r,this.y=e.y+(t.y-e.y)*r,this.z=e.z+(t.z-e.z)*r,this}cross(e){return this.crossVectors(this,e)}crossVectors(e,t){let r=e.x,i=e.y,n=e.z,a=t.x,o=t.y,s=t.z;return this.x=i*s-n*o,this.y=n*a-r*s,this.z=r*o-i*a,this}projectOnVector(e){let t=e.lengthSq();if(t===0)return this.set(0,0,0);let r=e.dot(this)/t;return this.copy(e).multiplyScalar(r)}projectOnPlane(e){return oP.copy(this).projectOnVector(e),this.sub(oP)}reflect(e){return this.sub(oP.copy(e).multiplyScalar(2*this.dot(e)))}angleTo(e){let t=Math.sqrt(this.lengthSq()*e.lengthSq());if(t===0)return Math.PI/2;let r=this.dot(e)/t;return Math.acos(Ln(r,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){let t=this.x-e.x,r=this.y-e.y,i=this.z-e.z;return t*t+r*r+i*i}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}setFromSpherical(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}setFromSphericalCoords(e,t,r){let i=Math.sin(t)*e;return this.x=i*Math.sin(r),this.y=Math.cos(t)*e,this.z=i*Math.cos(r),this}setFromCylindrical(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}setFromCylindricalCoords(e,t,r){return this.x=e*Math.sin(t),this.y=r,this.z=e*Math.cos(t),this}setFromMatrixPosition(e){let t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this}setFromMatrixScale(e){let t=this.setFromMatrixColumn(e,0).length(),r=this.setFromMatrixColumn(e,1).length(),i=this.setFromMatrixColumn(e,2).length();return this.x=t,this.y=r,this.z=i,this}setFromMatrixColumn(e,t){return this.fromArray(e.elements,t*4)}setFromMatrix3Column(e,t){return this.fromArray(e.elements,t*3)}setFromEuler(e){return this.x=e._x,this.y=e._y,this.z=e._z,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){let e=(Math.random()-.5)*2,t=Math.random()*Math.PI*2,r=Math.sqrt(1-e**2);return this.x=r*Math.cos(t),this.y=r*Math.sin(t),this.z=e,this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}},oP=new U,YJ=new Jt,Cn=class{constructor(e=new U(1/0,1/0,1/0),t=new U(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromArray(e){let t=1/0,r=1/0,i=1/0,n=-1/0,a=-1/0,o=-1/0;for(let s=0,l=e.length;s<l;s+=3){let u=e[s],c=e[s+1],h=e[s+2];u<t&&(t=u),c<r&&(r=c),h<i&&(i=h),u>n&&(n=u),c>a&&(a=c),h>o&&(o=h)}return this.min.set(t,r,i),this.max.set(n,a,o),this}setFromBufferAttribute(e){let t=1/0,r=1/0,i=1/0,n=-1/0,a=-1/0,o=-1/0;for(let s=0,l=e.count;s<l;s++){let u=e.getX(s),c=e.getY(s),h=e.getZ(s);u<t&&(t=u),c<r&&(r=c),h<i&&(i=h),u>n&&(n=u),c>a&&(a=c),h>o&&(o=h)}return this.min.set(t,r,i),this.max.set(n,a,o),this}setFromPoints(e){this.makeEmpty();for(let t=0,r=e.length;t<r;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){let r=c0.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(r),this.max.copy(e).add(r),this}setFromObject(e,t=!1){return this.makeEmpty(),this.expandByObject(e,t)}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(e){return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}expandByObject(e,t=!1){e.updateWorldMatrix(!1,!1);let r=e.geometry;if(r!==void 0)if(t&&r.attributes!=null&&r.attributes.position!==void 0){let n=r.attributes.position;for(let a=0,o=n.count;a<o;a++)c0.fromBufferAttribute(n,a).applyMatrix4(e.matrixWorld),this.expandByPoint(c0)}else r.boundingBox===null&&r.computeBoundingBox(),sP.copy(r.boundingBox),sP.applyMatrix4(e.matrixWorld),this.union(sP);let i=e.children;for(let n=0,a=i.length;n<a;n++)this.expandByObject(i[n],t);return this}containsPoint(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y||e.z<this.min.z||e.z>this.max.z)}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y||e.max.z<this.min.z||e.min.z>this.max.z)}intersectsSphere(e){return this.clampPoint(e.center,c0),c0.distanceToSquared(e.center)<=e.radius*e.radius}intersectsPlane(e){let t,r;return e.normal.x>0?(t=e.normal.x*this.min.x,r=e.normal.x*this.max.x):(t=e.normal.x*this.max.x,r=e.normal.x*this.min.x),e.normal.y>0?(t+=e.normal.y*this.min.y,r+=e.normal.y*this.max.y):(t+=e.normal.y*this.max.y,r+=e.normal.y*this.min.y),e.normal.z>0?(t+=e.normal.z*this.min.z,r+=e.normal.z*this.max.z):(t+=e.normal.z*this.max.z,r+=e.normal.z*this.min.z),t<=-e.constant&&r>=-e.constant}intersectsTriangle(e){if(this.isEmpty())return!1;this.getCenter(K2),k_.subVectors(this.max,K2),Wm.subVectors(e.a,K2),qm.subVectors(e.b,K2),Ym.subVectors(e.c,K2),tf.subVectors(qm,Wm),rf.subVectors(Ym,qm),h0.subVectors(Wm,Ym);let t=[0,-tf.z,tf.y,0,-rf.z,rf.y,0,-h0.z,h0.y,tf.z,0,-tf.x,rf.z,0,-rf.x,h0.z,0,-h0.x,-tf.y,tf.x,0,-rf.y,rf.x,0,-h0.y,h0.x,0];return!lP(t,Wm,qm,Ym,k_)||(t=[1,0,0,0,1,0,0,0,1],!lP(t,Wm,qm,Ym,k_))?!1:(R_.crossVectors(tf,rf),t=[R_.x,R_.y,R_.z],lP(t,Wm,qm,Ym,k_))}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return c0.copy(e).clamp(this.min,this.max).sub(e).length()}getBoundingSphere(e){return this.getCenter(e.center),e.radius=this.getSize(c0).length()*.5,e}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}applyMatrix4(e){return this.isEmpty()?this:(bh[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),bh[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),bh[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),bh[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),bh[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),bh[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),bh[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),bh[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(bh),this)}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}},bh=[new U,new U,new U,new U,new U,new U,new U,new U],c0=new U,sP=new Cn,Wm=new U,qm=new U,Ym=new U,tf=new U,rf=new U,h0=new U,K2=new U,k_=new U,R_=new U,d0=new U;function lP(e,t,r,i,n){for(let a=0,o=e.length-3;a<=o;a+=3){d0.fromArray(e,a);let s=n.x*Math.abs(d0.x)+n.y*Math.abs(d0.y)+n.z*Math.abs(d0.z),l=t.dot(d0),u=r.dot(d0),c=i.dot(d0);if(Math.max(-Math.max(l,u,c),Math.min(l,u,c))>s)return!1}return!0}var ilt=new Cn,J2=new U,uP=new U,Es=class{constructor(e=new U,t=-1){this.center=e,this.radius=t}set(e,t){return this.center.copy(e),this.radius=t,this}setFromPoints(e,t){let r=this.center;t!==void 0?r.copy(t):ilt.setFromPoints(e).getCenter(r);let i=0;for(let n=0,a=e.length;n<a;n++)i=Math.max(i,r.distanceToSquared(e[n]));return this.radius=Math.sqrt(i),this}copy(e){return this.center.copy(e.center),this.radius=e.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(e){return e.distanceTo(this.center)-this.radius}intersectsSphere(e){let t=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=t*t}intersectsBox(e){return e.intersectsSphere(this)}intersectsPlane(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}clampPoint(e,t){let r=this.center.distanceToSquared(e);return t.copy(e),r>this.radius*this.radius&&(t.sub(this.center).normalize(),t.multiplyScalar(this.radius).add(this.center)),t}getBoundingBox(e){return this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}applyMatrix4(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}translate(e){return this.center.add(e),this}expandByPoint(e){if(this.isEmpty())return this.center.copy(e),this.radius=0,this;J2.subVectors(e,this.center);let t=J2.lengthSq();if(t>this.radius*this.radius){let r=Math.sqrt(t),i=(r-this.radius)*.5;this.center.addScaledVector(J2,i/r),this.radius+=i}return this}union(e){return e.isEmpty()?this:this.isEmpty()?(this.copy(e),this):(this.center.equals(e.center)===!0?this.radius=Math.max(this.radius,e.radius):(uP.subVectors(e.center,this.center).setLength(e.radius),this.expandByPoint(J2.copy(e.center).add(uP)),this.expandByPoint(J2.copy(e.center).sub(uP))),this)}equals(e){return e.center.equals(this.center)&&e.radius===this.radius}clone(){return new this.constructor().copy(this)}},wh=new U,cP=new U,O_=new U,nf=new U,hP=new U,B_=new U,dP=new U,qy=class{constructor(e=new U,t=new U(0,0,-1)){this.origin=e,this.direction=t}set(e,t){return this.origin.copy(e),this.direction.copy(t),this}copy(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}at(e,t){return t.copy(this.direction).multiplyScalar(e).add(this.origin)}lookAt(e){return this.direction.copy(e).sub(this.origin).normalize(),this}recast(e){return this.origin.copy(this.at(e,wh)),this}closestPointToPoint(e,t){t.subVectors(e,this.origin);let r=t.dot(this.direction);return r<0?t.copy(this.origin):t.copy(this.direction).multiplyScalar(r).add(this.origin)}distanceToPoint(e){return Math.sqrt(this.distanceSqToPoint(e))}distanceSqToPoint(e){let t=wh.subVectors(e,this.origin).dot(this.direction);return t<0?this.origin.distanceToSquared(e):(wh.copy(this.direction).multiplyScalar(t).add(this.origin),wh.distanceToSquared(e))}distanceSqToSegment(e,t,r,i){cP.copy(e).add(t).multiplyScalar(.5),O_.copy(t).sub(e).normalize(),nf.copy(this.origin).sub(cP);let n=e.distanceTo(t)*.5,a=-this.direction.dot(O_),o=nf.dot(this.direction),s=-nf.dot(O_),l=nf.lengthSq(),u=Math.abs(1-a*a),c,h,d,f;if(u>0)if(c=a*s-o,h=a*o-s,f=n*u,c>=0)if(h>=-f)if(h<=f){let p=1/u;c*=p,h*=p,d=c*(c+a*h+2*o)+h*(a*c+h+2*s)+l}else h=n,c=Math.max(0,-(a*h+o)),d=-c*c+h*(h+2*s)+l;else h=-n,c=Math.max(0,-(a*h+o)),d=-c*c+h*(h+2*s)+l;else h<=-f?(c=Math.max(0,-(-a*n+o)),h=c>0?-n:Math.min(Math.max(-n,-s),n),d=-c*c+h*(h+2*s)+l):h<=f?(c=0,h=Math.min(Math.max(-n,-s),n),d=h*(h+2*s)+l):(c=Math.max(0,-(a*n+o)),h=c>0?n:Math.min(Math.max(-n,-s),n),d=-c*c+h*(h+2*s)+l);else h=a>0?-n:n,c=Math.max(0,-(a*h+o)),d=-c*c+h*(h+2*s)+l;return r&&r.copy(this.direction).multiplyScalar(c).add(this.origin),i&&i.copy(O_).multiplyScalar(h).add(cP),d}intersectSphere(e,t){wh.subVectors(e.center,this.origin);let r=wh.dot(this.direction),i=wh.dot(wh)-r*r,n=e.radius*e.radius;if(i>n)return null;let a=Math.sqrt(n-i),o=r-a,s=r+a;return o<0&&s<0?null:o<0?this.at(s,t):this.at(o,t)}intersectsSphere(e){return this.distanceSqToPoint(e.center)<=e.radius*e.radius}distanceToPlane(e){let t=e.normal.dot(this.direction);if(t===0)return e.distanceToPoint(this.origin)===0?0:null;let r=-(this.origin.dot(e.normal)+e.constant)/t;return r>=0?r:null}intersectPlane(e,t){let r=this.distanceToPlane(e);return r===null?null:this.at(r,t)}intersectsPlane(e){let t=e.distanceToPoint(this.origin);return t===0||e.normal.dot(this.direction)*t<0}intersectBox(e,t){let r,i,n,a,o,s,l=1/this.direction.x,u=1/this.direction.y,c=1/this.direction.z,h=this.origin;return l>=0?(r=(e.min.x-h.x)*l,i=(e.max.x-h.x)*l):(r=(e.max.x-h.x)*l,i=(e.min.x-h.x)*l),u>=0?(n=(e.min.y-h.y)*u,a=(e.max.y-h.y)*u):(n=(e.max.y-h.y)*u,a=(e.min.y-h.y)*u),r>a||n>i||((n>r||isNaN(r))&&(r=n),(a<i||isNaN(i))&&(i=a),c>=0?(o=(e.min.z-h.z)*c,s=(e.max.z-h.z)*c):(o=(e.max.z-h.z)*c,s=(e.min.z-h.z)*c),r>s||o>i)||((o>r||r!==r)&&(r=o),(s<i||i!==i)&&(i=s),i<0)?null:this.at(r>=0?r:i,t)}intersectsBox(e){return this.intersectBox(e,wh)!==null}intersectTriangle(e,t,r,i,n){hP.subVectors(t,e),B_.subVectors(r,e),dP.crossVectors(hP,B_);let a=this.direction.dot(dP),o;if(a>0){if(i)return null;o=1}else if(a<0)o=-1,a=-a;else return null;nf.subVectors(this.origin,e);let s=o*this.direction.dot(B_.crossVectors(nf,B_));if(s<0)return null;let l=o*this.direction.dot(hP.cross(nf));if(l<0||s+l>a)return null;let u=-o*nf.dot(dP);return u<0?null:this.at(u/a,n)}applyMatrix4(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}equals(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}clone(){return new this.constructor().copy(this)}},Ke=class{constructor(){Ke.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}set(e,t,r,i,n,a,o,s,l,u,c,h,d,f,p,v){let m=this.elements;return m[0]=e,m[4]=t,m[8]=r,m[12]=i,m[1]=n,m[5]=a,m[9]=o,m[13]=s,m[2]=l,m[6]=u,m[10]=c,m[14]=h,m[3]=d,m[7]=f,m[11]=p,m[15]=v,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return new Ke().fromArray(this.elements)}copy(e){let t=this.elements,r=e.elements;return t[0]=r[0],t[1]=r[1],t[2]=r[2],t[3]=r[3],t[4]=r[4],t[5]=r[5],t[6]=r[6],t[7]=r[7],t[8]=r[8],t[9]=r[9],t[10]=r[10],t[11]=r[11],t[12]=r[12],t[13]=r[13],t[14]=r[14],t[15]=r[15],this}copyPosition(e){let t=this.elements,r=e.elements;return t[12]=r[12],t[13]=r[13],t[14]=r[14],this}setFromMatrix3(e){let t=e.elements;return this.set(t[0],t[3],t[6],0,t[1],t[4],t[7],0,t[2],t[5],t[8],0,0,0,0,1),this}extractBasis(e,t,r){return e.setFromMatrixColumn(this,0),t.setFromMatrixColumn(this,1),r.setFromMatrixColumn(this,2),this}makeBasis(e,t,r){return this.set(e.x,t.x,r.x,0,e.y,t.y,r.y,0,e.z,t.z,r.z,0,0,0,0,1),this}extractRotation(e){let t=this.elements,r=e.elements,i=1/Xm.setFromMatrixColumn(e,0).length(),n=1/Xm.setFromMatrixColumn(e,1).length(),a=1/Xm.setFromMatrixColumn(e,2).length();return t[0]=r[0]*i,t[1]=r[1]*i,t[2]=r[2]*i,t[3]=0,t[4]=r[4]*n,t[5]=r[5]*n,t[6]=r[6]*n,t[7]=0,t[8]=r[8]*a,t[9]=r[9]*a,t[10]=r[10]*a,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromEuler(e){let t=this.elements,r=e.x,i=e.y,n=e.z,a=Math.cos(r),o=Math.sin(r),s=Math.cos(i),l=Math.sin(i),u=Math.cos(n),c=Math.sin(n);if(e.order==="XYZ"){let h=a*u,d=a*c,f=o*u,p=o*c;t[0]=s*u,t[4]=-s*c,t[8]=l,t[1]=d+f*l,t[5]=h-p*l,t[9]=-o*s,t[2]=p-h*l,t[6]=f+d*l,t[10]=a*s}else if(e.order==="YXZ"){let h=s*u,d=s*c,f=l*u,p=l*c;t[0]=h+p*o,t[4]=f*o-d,t[8]=a*l,t[1]=a*c,t[5]=a*u,t[9]=-o,t[2]=d*o-f,t[6]=p+h*o,t[10]=a*s}else if(e.order==="ZXY"){let h=s*u,d=s*c,f=l*u,p=l*c;t[0]=h-p*o,t[4]=-a*c,t[8]=f+d*o,t[1]=d+f*o,t[5]=a*u,t[9]=p-h*o,t[2]=-a*l,t[6]=o,t[10]=a*s}else if(e.order==="ZYX"){let h=a*u,d=a*c,f=o*u,p=o*c;t[0]=s*u,t[4]=f*l-d,t[8]=h*l+p,t[1]=s*c,t[5]=p*l+h,t[9]=d*l-f,t[2]=-l,t[6]=o*s,t[10]=a*s}else if(e.order==="YZX"){let h=a*s,d=a*l,f=o*s,p=o*l;t[0]=s*u,t[4]=p-h*c,t[8]=f*c+d,t[1]=c,t[5]=a*u,t[9]=-o*u,t[2]=-l*u,t[6]=d*c+f,t[10]=h-p*c}else if(e.order==="XZY"){let h=a*s,d=a*l,f=o*s,p=o*l;t[0]=s*u,t[4]=-c,t[8]=l*u,t[1]=h*c+p,t[5]=a*u,t[9]=d*c-f,t[2]=f*c-d,t[6]=o*u,t[10]=p*c+h}return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromQuaternion(e){return this.compose(nlt,e,alt)}lookAt(e,t,r){let i=this.elements;return Is.subVectors(e,t),Is.lengthSq()===0&&(Is.z=1),Is.normalize(),af.crossVectors(r,Is),af.lengthSq()===0&&(Math.abs(r.z)===1?Is.x+=1e-4:Is.z+=1e-4,Is.normalize(),af.crossVectors(r,Is)),af.normalize(),N_.crossVectors(Is,af),i[0]=af.x,i[4]=N_.x,i[8]=Is.x,i[1]=af.y,i[5]=N_.y,i[9]=Is.y,i[2]=af.z,i[6]=N_.z,i[10]=Is.z,this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){let r=e.elements,i=t.elements,n=this.elements,a=r[0],o=r[4],s=r[8],l=r[12],u=r[1],c=r[5],h=r[9],d=r[13],f=r[2],p=r[6],v=r[10],m=r[14],g=r[3],y=r[7],x=r[11],b=r[15],_=i[0],w=i[4],S=i[8],A=i[12],M=i[1],E=i[5],T=i[9],L=i[13],P=i[2],C=i[6],D=i[10],I=i[14],O=i[3],R=i[7],H=i[11],j=i[15];return n[0]=a*_+o*M+s*P+l*O,n[4]=a*w+o*E+s*C+l*R,n[8]=a*S+o*T+s*D+l*H,n[12]=a*A+o*L+s*I+l*j,n[1]=u*_+c*M+h*P+d*O,n[5]=u*w+c*E+h*C+d*R,n[9]=u*S+c*T+h*D+d*H,n[13]=u*A+c*L+h*I+d*j,n[2]=f*_+p*M+v*P+m*O,n[6]=f*w+p*E+v*C+m*R,n[10]=f*S+p*T+v*D+m*H,n[14]=f*A+p*L+v*I+m*j,n[3]=g*_+y*M+x*P+b*O,n[7]=g*w+y*E+x*C+b*R,n[11]=g*S+y*T+x*D+b*H,n[15]=g*A+y*L+x*I+b*j,this}multiplyScalar(e){let t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this}determinant(){let e=this.elements,t=e[0],r=e[4],i=e[8],n=e[12],a=e[1],o=e[5],s=e[9],l=e[13],u=e[2],c=e[6],h=e[10],d=e[14],f=e[3],p=e[7],v=e[11],m=e[15];return f*(+n*s*c-i*l*c-n*o*h+r*l*h+i*o*d-r*s*d)+p*(+t*s*d-t*l*h+n*a*h-i*a*d+i*l*u-n*s*u)+v*(+t*l*c-t*o*d-n*a*c+r*a*d+n*o*u-r*l*u)+m*(-i*o*u-t*s*c+t*o*h+i*a*c-r*a*h+r*s*u)}transpose(){let e=this.elements,t;return t=e[1],e[1]=e[4],e[4]=t,t=e[2],e[2]=e[8],e[8]=t,t=e[6],e[6]=e[9],e[9]=t,t=e[3],e[3]=e[12],e[12]=t,t=e[7],e[7]=e[13],e[13]=t,t=e[11],e[11]=e[14],e[14]=t,this}setPosition(e,t,r){let i=this.elements;return e.isVector3?(i[12]=e.x,i[13]=e.y,i[14]=e.z):(i[12]=e,i[13]=t,i[14]=r),this}invert(){let e=this.elements,t=e[0],r=e[1],i=e[2],n=e[3],a=e[4],o=e[5],s=e[6],l=e[7],u=e[8],c=e[9],h=e[10],d=e[11],f=e[12],p=e[13],v=e[14],m=e[15],g=c*v*l-p*h*l+p*s*d-o*v*d-c*s*m+o*h*m,y=f*h*l-u*v*l-f*s*d+a*v*d+u*s*m-a*h*m,x=u*p*l-f*c*l+f*o*d-a*p*d-u*o*m+a*c*m,b=f*c*s-u*p*s-f*o*h+a*p*h+u*o*v-a*c*v,_=t*g+r*y+i*x+n*b;if(_===0)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);let w=1/_;return e[0]=g*w,e[1]=(p*h*n-c*v*n-p*i*d+r*v*d+c*i*m-r*h*m)*w,e[2]=(o*v*n-p*s*n+p*i*l-r*v*l-o*i*m+r*s*m)*w,e[3]=(c*s*n-o*h*n-c*i*l+r*h*l+o*i*d-r*s*d)*w,e[4]=y*w,e[5]=(u*v*n-f*h*n+f*i*d-t*v*d-u*i*m+t*h*m)*w,e[6]=(f*s*n-a*v*n-f*i*l+t*v*l+a*i*m-t*s*m)*w,e[7]=(a*h*n-u*s*n+u*i*l-t*h*l-a*i*d+t*s*d)*w,e[8]=x*w,e[9]=(f*c*n-u*p*n-f*r*d+t*p*d+u*r*m-t*c*m)*w,e[10]=(a*p*n-f*o*n+f*r*l-t*p*l-a*r*m+t*o*m)*w,e[11]=(u*o*n-a*c*n-u*r*l+t*c*l+a*r*d-t*o*d)*w,e[12]=b*w,e[13]=(u*p*i-f*c*i+f*r*h-t*p*h-u*r*v+t*c*v)*w,e[14]=(f*o*i-a*p*i-f*r*s+t*p*s+a*r*v-t*o*v)*w,e[15]=(a*c*i-u*o*i+u*r*s-t*c*s-a*r*h+t*o*h)*w,this}scale(e){let t=this.elements,r=e.x,i=e.y,n=e.z;return t[0]*=r,t[4]*=i,t[8]*=n,t[1]*=r,t[5]*=i,t[9]*=n,t[2]*=r,t[6]*=i,t[10]*=n,t[3]*=r,t[7]*=i,t[11]*=n,this}getMaxScaleOnAxis(){let e=this.elements,t=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],r=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],i=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(t,r,i))}makeTranslation(e,t,r){return this.set(1,0,0,e,0,1,0,t,0,0,1,r,0,0,0,1),this}makeRotationX(e){let t=Math.cos(e),r=Math.sin(e);return this.set(1,0,0,0,0,t,-r,0,0,r,t,0,0,0,0,1),this}makeRotationY(e){let t=Math.cos(e),r=Math.sin(e);return this.set(t,0,r,0,0,1,0,0,-r,0,t,0,0,0,0,1),this}makeRotationZ(e){let t=Math.cos(e),r=Math.sin(e);return this.set(t,-r,0,0,r,t,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(e,t){let r=Math.cos(t),i=Math.sin(t),n=1-r,a=e.x,o=e.y,s=e.z,l=n*a,u=n*o;return this.set(l*a+r,l*o-i*s,l*s+i*o,0,l*o+i*s,u*o+r,u*s-i*a,0,l*s-i*o,u*s+i*a,n*s*s+r,0,0,0,0,1),this}makeScale(e,t,r){return this.set(e,0,0,0,0,t,0,0,0,0,r,0,0,0,0,1),this}makeShear(e,t,r,i,n,a){return this.set(1,r,n,0,e,1,a,0,t,i,1,0,0,0,0,1),this}compose(e,t,r){let i=this.elements,n=t._x,a=t._y,o=t._z,s=t._w,l=n+n,u=a+a,c=o+o,h=n*l,d=n*u,f=n*c,p=a*u,v=a*c,m=o*c,g=s*l,y=s*u,x=s*c,b=r.x,_=r.y,w=r.z;return i[0]=(1-(p+m))*b,i[1]=(d+x)*b,i[2]=(f-y)*b,i[3]=0,i[4]=(d-x)*_,i[5]=(1-(h+m))*_,i[6]=(v+g)*_,i[7]=0,i[8]=(f+y)*w,i[9]=(v-g)*w,i[10]=(1-(h+p))*w,i[11]=0,i[12]=e.x,i[13]=e.y,i[14]=e.z,i[15]=1,this}decompose(e,t,r){let i=this.elements,n=Xm.set(i[0],i[1],i[2]).length(),a=Xm.set(i[4],i[5],i[6]).length(),o=Xm.set(i[8],i[9],i[10]).length();this.determinant()<0&&(n=-n),e.x=i[12],e.y=i[13],e.z=i[14],Zl.copy(this);let s=1/n,l=1/a,u=1/o;return Zl.elements[0]*=s,Zl.elements[1]*=s,Zl.elements[2]*=s,Zl.elements[4]*=l,Zl.elements[5]*=l,Zl.elements[6]*=l,Zl.elements[8]*=u,Zl.elements[9]*=u,Zl.elements[10]*=u,t.setFromRotationMatrix(Zl),r.x=n,r.y=a,r.z=o,this}makePerspective(e,t,r,i,n,a){let o=this.elements,s=2*n/(t-e),l=2*n/(r-i),u=(t+e)/(t-e),c=(r+i)/(r-i),h=-(a+n)/(a-n),d=-2*a*n/(a-n);return o[0]=s,o[4]=0,o[8]=u,o[12]=0,o[1]=0,o[5]=l,o[9]=c,o[13]=0,o[2]=0,o[6]=0,o[10]=h,o[14]=d,o[3]=0,o[7]=0,o[11]=-1,o[15]=0,this}makeOrthographic(e,t,r,i,n,a){let o=this.elements,s=1/(t-e),l=1/(r-i),u=1/(a-n),c=(t+e)*s,h=(r+i)*l,d=(a+n)*u;return o[0]=2*s,o[4]=0,o[8]=0,o[12]=-c,o[1]=0,o[5]=2*l,o[9]=0,o[13]=-h,o[2]=0,o[6]=0,o[10]=-2*u,o[14]=-d,o[3]=0,o[7]=0,o[11]=0,o[15]=1,this}equals(e){let t=this.elements,r=e.elements;for(let i=0;i<16;i++)if(t[i]!==r[i])return!1;return!0}fromArray(e,t=0){for(let r=0;r<16;r++)this.elements[r]=e[r+t];return this}toArray(e=[],t=0){let r=this.elements;return e[t]=r[0],e[t+1]=r[1],e[t+2]=r[2],e[t+3]=r[3],e[t+4]=r[4],e[t+5]=r[5],e[t+6]=r[6],e[t+7]=r[7],e[t+8]=r[8],e[t+9]=r[9],e[t+10]=r[10],e[t+11]=r[11],e[t+12]=r[12],e[t+13]=r[13],e[t+14]=r[14],e[t+15]=r[15],e}},Xm=new U,Zl=new Ke,nlt=new U(0,0,0),alt=new U(1,1,1),af=new U,N_=new U,Is=new U,XJ=new Ke,ZJ=new Jt,Qn=class{constructor(e=0,t=0,r=0,i=Qn.DEFAULT_ORDER){this.isEuler=!0,this._x=e,this._y=t,this._z=r,this._order=i}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get order(){return this._order}set order(e){this._order=e,this._onChangeCallback()}set(e,t,r,i=this._order){return this._x=e,this._y=t,this._z=r,this._order=i,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this}setFromRotationMatrix(e,t=this._order,r=!0){let i=e.elements,n=i[0],a=i[4],o=i[8],s=i[1],l=i[5],u=i[9],c=i[2],h=i[6],d=i[10];switch(t){case"XYZ":this._y=Math.asin(Ln(o,-1,1)),Math.abs(o)<.9999999?(this._x=Math.atan2(-u,d),this._z=Math.atan2(-a,n)):(this._x=Math.atan2(h,l),this._z=0);break;case"YXZ":this._x=Math.asin(-Ln(u,-1,1)),Math.abs(u)<.9999999?(this._y=Math.atan2(o,d),this._z=Math.atan2(s,l)):(this._y=Math.atan2(-c,n),this._z=0);break;case"ZXY":this._x=Math.asin(Ln(h,-1,1)),Math.abs(h)<.9999999?(this._y=Math.atan2(-c,d),this._z=Math.atan2(-a,l)):(this._y=0,this._z=Math.atan2(s,n));break;case"ZYX":this._y=Math.asin(-Ln(c,-1,1)),Math.abs(c)<.9999999?(this._x=Math.atan2(h,d),this._z=Math.atan2(s,n)):(this._x=0,this._z=Math.atan2(-a,l));break;case"YZX":this._z=Math.asin(Ln(s,-1,1)),Math.abs(s)<.9999999?(this._x=Math.atan2(-u,l),this._y=Math.atan2(-c,n)):(this._x=0,this._y=Math.atan2(o,d));break;case"XZY":this._z=Math.asin(-Ln(a,-1,1)),Math.abs(a)<.9999999?(this._x=Math.atan2(h,l),this._y=Math.atan2(o,n)):(this._x=Math.atan2(-u,d),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+t)}return this._order=t,r===!0&&this._onChangeCallback(),this}setFromQuaternion(e,t,r){return XJ.makeRotationFromQuaternion(e),this.setFromRotationMatrix(XJ,t,r)}setFromVector3(e,t=this._order){return this.set(e.x,e.y,e.z,t)}reorder(e){return ZJ.setFromEuler(this),this.setFromQuaternion(ZJ,e)}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order}fromArray(e){return this._x=e[0],this._y=e[1],this._z=e[2],e[3]!==void 0&&(this._order=e[3]),this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._order,e}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}};Qn.DEFAULT_ORDER="XYZ";var rz=class{constructor(){this.mask=1}set(e){this.mask=(1<<e|0)>>>0}enable(e){this.mask|=1<<e|0}enableAll(){this.mask=-1}toggle(e){this.mask^=1<<e|0}disable(e){this.mask&=~(1<<e|0)}disableAll(){this.mask=0}test(e){return(this.mask&e.mask)!==0}isEnabled(e){return(this.mask&(1<<e|0))!==0}},olt=0,QJ=new U,Zm=new Jt,_h=new Ke,V_=new U,$2=new U,slt=new U,llt=new Jt,KJ=new U(1,0,0),JJ=new U(0,1,0),$J=new U(0,0,1),ult={type:"added"},e$={type:"removed"},_i=class extends Ka{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:olt++}),this.uuid=Il(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=_i.DEFAULT_UP.clone();let e=new U,t=new Qn,r=new Jt,i=new U(1,1,1);function n(){r.setFromEuler(t,!1)}function a(){t.setFromQuaternion(r,void 0,!1)}t._onChange(n),r._onChange(a),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:e},rotation:{configurable:!0,enumerable:!0,value:t},quaternion:{configurable:!0,enumerable:!0,value:r},scale:{configurable:!0,enumerable:!0,value:i},modelViewMatrix:{value:new Ke},normalMatrix:{value:new Bn}}),this.matrix=new Ke,this.matrixWorld=new Ke,this.matrixAutoUpdate=_i.DEFAULT_MATRIX_AUTO_UPDATE,this.matrixWorldNeedsUpdate=!1,this.matrixWorldAutoUpdate=_i.DEFAULT_MATRIX_WORLD_AUTO_UPDATE,this.layers=new rz,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeRender(){}onAfterRender(){}applyMatrix4(e){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(e),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(e){return this.quaternion.premultiply(e),this}setRotationFromAxisAngle(e,t){this.quaternion.setFromAxisAngle(e,t)}setRotationFromEuler(e){this.quaternion.setFromEuler(e,!0)}setRotationFromMatrix(e){this.quaternion.setFromRotationMatrix(e)}setRotationFromQuaternion(e){this.quaternion.copy(e)}rotateOnAxis(e,t){return Zm.setFromAxisAngle(e,t),this.quaternion.multiply(Zm),this}rotateOnWorldAxis(e,t){return Zm.setFromAxisAngle(e,t),this.quaternion.premultiply(Zm),this}rotateX(e){return this.rotateOnAxis(KJ,e)}rotateY(e){return this.rotateOnAxis(JJ,e)}rotateZ(e){return this.rotateOnAxis($J,e)}translateOnAxis(e,t){return QJ.copy(e).applyQuaternion(this.quaternion),this.position.add(QJ.multiplyScalar(t)),this}translateX(e){return this.translateOnAxis(KJ,e)}translateY(e){return this.translateOnAxis(JJ,e)}translateZ(e){return this.translateOnAxis($J,e)}localToWorld(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(this.matrixWorld)}worldToLocal(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(_h.copy(this.matrixWorld).invert())}lookAt(e,t,r){e.isVector3?V_.copy(e):V_.set(e,t,r);let i=this.parent;this.updateWorldMatrix(!0,!1),$2.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?_h.lookAt($2,V_,this.up):_h.lookAt(V_,$2,this.up),this.quaternion.setFromRotationMatrix(_h),i&&(_h.extractRotation(i.matrixWorld),Zm.setFromRotationMatrix(_h),this.quaternion.premultiply(Zm.invert()))}add(e){if(arguments.length>1){for(let t=0;t<arguments.length;t++)this.add(arguments[t]);return this}return e===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(e.parent!==null&&e.parent.remove(e),e.parent=this,this.children.push(e),e.dispatchEvent(ult)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",e),this)}remove(e){if(arguments.length>1){for(let r=0;r<arguments.length;r++)this.remove(arguments[r]);return this}let t=this.children.indexOf(e);return t!==-1&&(e.parent=null,this.children.splice(t,1),e.dispatchEvent(e$)),this}removeFromParent(){let e=this.parent;return e!==null&&e.remove(this),this}clear(){for(let e=0;e<this.children.length;e++){let t=this.children[e];t.parent=null,t.dispatchEvent(e$)}return this.children.length=0,this}attach(e){return this.updateWorldMatrix(!0,!1),_h.copy(this.matrixWorld).invert(),e.parent!==null&&(e.parent.updateWorldMatrix(!0,!1),_h.multiply(e.parent.matrixWorld)),e.applyMatrix4(_h),this.add(e),e.updateWorldMatrix(!1,!0),this}getObjectById(e){return this.getObjectByProperty("id",e)}getObjectByName(e){return this.getObjectByProperty("name",e)}getObjectByProperty(e,t){if(this[e]===t)return this;for(let r=0,i=this.children.length;r<i;r++){let n=this.children[r].getObjectByProperty(e,t);if(n!==void 0)return n}}getObjectsByProperty(e,t){let r=[];this[e]===t&&r.push(this);for(let i=0,n=this.children.length;i<n;i++){let a=this.children[i].getObjectsByProperty(e,t);a.length>0&&(r=r.concat(a))}return r}getWorldPosition(e){return this.updateWorldMatrix(!0,!1),e.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose($2,e,slt),e}getWorldScale(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose($2,llt,e),e}getWorldDirection(e){this.updateWorldMatrix(!0,!1);let t=this.matrixWorld.elements;return e.set(t[8],t[9],t[10]).normalize()}raycast(){}traverse(e){e(this);let t=this.children;for(let r=0,i=t.length;r<i;r++)t[r].traverse(e)}traverseVisible(e){if(this.visible===!1)return;e(this);let t=this.children;for(let r=0,i=t.length;r<i;r++)t[r].traverseVisible(e)}traverseAncestors(e){let t=this.parent;t!==null&&(e(t),t.traverseAncestors(e))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,e=!0);let t=this.children;for(let r=0,i=t.length;r<i;r++){let n=t[r];(n.matrixWorldAutoUpdate===!0||e===!0)&&n.updateMatrixWorld(e)}}updateWorldMatrix(e,t){let r=this.parent;if(e===!0&&r!==null&&r.matrixWorldAutoUpdate===!0&&r.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),t===!0){let i=this.children;for(let n=0,a=i.length;n<a;n++){let o=i[n];o.matrixWorldAutoUpdate===!0&&o.updateWorldMatrix(!1,!0)}}}toJSON(e){let t=e===void 0||typeof e=="string",r={};t&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},r.metadata={version:4.5,type:"Object",generator:"Object3D.toJSON"});let i={};i.uuid=this.uuid,i.type=this.type,this.name!==""&&(i.name=this.name),this.castShadow===!0&&(i.castShadow=!0),this.receiveShadow===!0&&(i.receiveShadow=!0),this.visible===!1&&(i.visible=!1),this.frustumCulled===!1&&(i.frustumCulled=!1),this.renderOrder!==0&&(i.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(i.userData=this.userData),i.layers=this.layers.mask,i.matrix=this.matrix.toArray(),this.matrixAutoUpdate===!1&&(i.matrixAutoUpdate=!1),this.isInstancedMesh&&(i.type="InstancedMesh",i.count=this.count,i.instanceMatrix=this.instanceMatrix.toJSON(),this.instanceColor!==null&&(i.instanceColor=this.instanceColor.toJSON()));function n(o,s){return o[s.uuid]===void 0&&(o[s.uuid]=s.toJSON(e)),s.uuid}if(this.isScene)this.background&&(this.background.isColor?i.background=this.background.toJSON():this.background.isTexture&&(i.background=this.background.toJSON(e).uuid)),this.environment&&this.environment.isTexture&&this.environment.isRenderTargetTexture!==!0&&(i.environment=this.environment.toJSON(e).uuid);else if(this.isMesh||this.isLine||this.isPoints){i.geometry=n(e.geometries,this.geometry);let o=this.geometry.parameters;if(o!==void 0&&o.shapes!==void 0){let s=o.shapes;if(Array.isArray(s))for(let l=0,u=s.length;l<u;l++){let c=s[l];n(e.shapes,c)}else n(e.shapes,s)}}if(this.isSkinnedMesh&&(i.bindMode=this.bindMode,i.bindMatrix=this.bindMatrix.toArray(),this.skeleton!==void 0&&(n(e.skeletons,this.skeleton),i.skeleton=this.skeleton.uuid)),this.material!==void 0)if(Array.isArray(this.material)){let o=[];for(let s=0,l=this.material.length;s<l;s++)o.push(n(e.materials,this.material[s]));i.material=o}else i.material=n(e.materials,this.material);if(this.children.length>0){i.children=[];for(let o=0;o<this.children.length;o++)i.children.push(this.children[o].toJSON(e).object)}if(this.animations.length>0){i.animations=[];for(let o=0;o<this.animations.length;o++){let s=this.animations[o];i.animations.push(n(e.animations,s))}}if(t){let o=a(e.geometries),s=a(e.materials),l=a(e.textures),u=a(e.images),c=a(e.shapes),h=a(e.skeletons),d=a(e.animations),f=a(e.nodes);o.length>0&&(r.geometries=o),s.length>0&&(r.materials=s),l.length>0&&(r.textures=l),u.length>0&&(r.images=u),c.length>0&&(r.shapes=c),h.length>0&&(r.skeletons=h),d.length>0&&(r.animations=d),f.length>0&&(r.nodes=f)}return r.object=i,r;function a(o){let s=[];for(let l in o){let u=o[l];delete u.metadata,s.push(u)}return s}}clone(e){return new this.constructor().copy(this,e)}copy(e,t=!0){if(this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.rotation.order=e.rotation.order,this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.matrixWorldAutoUpdate=e.matrixWorldAutoUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.userData=JSON.parse(JSON.stringify(e.userData)),t===!0)for(let r=0;r<e.children.length;r++){let i=e.children[r];this.add(i.clone())}return this}};_i.DEFAULT_UP=new U(0,1,0);_i.DEFAULT_MATRIX_AUTO_UPDATE=!0;_i.DEFAULT_MATRIX_WORLD_AUTO_UPDATE=!0;var Ql=new U,Ah=new U,fP=new U,Sh=new U,Qm=new U,Km=new U,t$=new U,pP=new U,vP=new U,mP=new U,za=class{constructor(e=new U,t=new U,r=new U){this.a=e,this.b=t,this.c=r}static getNormal(e,t,r,i){i.subVectors(r,t),Ql.subVectors(e,t),i.cross(Ql);let n=i.lengthSq();return n>0?i.multiplyScalar(1/Math.sqrt(n)):i.set(0,0,0)}static getBarycoord(e,t,r,i,n){Ql.subVectors(i,t),Ah.subVectors(r,t),fP.subVectors(e,t);let a=Ql.dot(Ql),o=Ql.dot(Ah),s=Ql.dot(fP),l=Ah.dot(Ah),u=Ah.dot(fP),c=a*l-o*o;if(c===0)return n.set(-2,-1,-1);let h=1/c,d=(l*s-o*u)*h,f=(a*u-o*s)*h;return n.set(1-d-f,f,d)}static containsPoint(e,t,r,i){return this.getBarycoord(e,t,r,i,Sh),Sh.x>=0&&Sh.y>=0&&Sh.x+Sh.y<=1}static getUV(e,t,r,i,n,a,o,s){return this.getBarycoord(e,t,r,i,Sh),s.set(0,0),s.addScaledVector(n,Sh.x),s.addScaledVector(a,Sh.y),s.addScaledVector(o,Sh.z),s}static isFrontFacing(e,t,r,i){return Ql.subVectors(r,t),Ah.subVectors(e,t),Ql.cross(Ah).dot(i)<0}set(e,t,r){return this.a.copy(e),this.b.copy(t),this.c.copy(r),this}setFromPointsAndIndices(e,t,r,i){return this.a.copy(e[t]),this.b.copy(e[r]),this.c.copy(e[i]),this}setFromAttributeAndIndices(e,t,r,i){return this.a.fromBufferAttribute(e,t),this.b.fromBufferAttribute(e,r),this.c.fromBufferAttribute(e,i),this}clone(){return new this.constructor().copy(this)}copy(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}getArea(){return Ql.subVectors(this.c,this.b),Ah.subVectors(this.a,this.b),Ql.cross(Ah).length()*.5}getMidpoint(e){return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(e){return za.getNormal(this.a,this.b,this.c,e)}getPlane(e){return e.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(e,t){return za.getBarycoord(e,this.a,this.b,this.c,t)}getUV(e,t,r,i,n){return za.getUV(e,this.a,this.b,this.c,t,r,i,n)}containsPoint(e){return za.containsPoint(e,this.a,this.b,this.c)}isFrontFacing(e){return za.isFrontFacing(this.a,this.b,this.c,e)}intersectsBox(e){return e.intersectsTriangle(this)}closestPointToPoint(e,t){let r=this.a,i=this.b,n=this.c,a,o;Qm.subVectors(i,r),Km.subVectors(n,r),pP.subVectors(e,r);let s=Qm.dot(pP),l=Km.dot(pP);if(s<=0&&l<=0)return t.copy(r);vP.subVectors(e,i);let u=Qm.dot(vP),c=Km.dot(vP);if(u>=0&&c<=u)return t.copy(i);let h=s*c-u*l;if(h<=0&&s>=0&&u<=0)return a=s/(s-u),t.copy(r).addScaledVector(Qm,a);mP.subVectors(e,n);let d=Qm.dot(mP),f=Km.dot(mP);if(f>=0&&d<=f)return t.copy(n);let p=d*l-s*f;if(p<=0&&l>=0&&f<=0)return o=l/(l-f),t.copy(r).addScaledVector(Km,o);let v=u*f-d*c;if(v<=0&&c-u>=0&&d-f>=0)return t$.subVectors(n,i),o=(c-u)/(c-u+(d-f)),t.copy(i).addScaledVector(t$,o);let m=1/(v+p+h);return a=p*m,o=h*m,t.copy(r).addScaledVector(Qm,a).addScaledVector(Km,o)}equals(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}},clt=0,F4=class extends Ka{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:clt++}),this.uuid=Il(),this.name="",this.type="Material",this.blending=_v,this.side=Lu,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.blendSrc=Ive,this.blendDst=Lve,this.blendEquation=Ig,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.depthFunc=aR,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=Vst,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=tP,this.stencilZFail=tP,this.stencilZPass=tP,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.forceSinglePass=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(e){this._alphaTest>0!=e>0&&this.version++,this._alphaTest=e}onBuild(){}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(e){if(e!==void 0)for(let t in e){let r=e[t];if(r===void 0){console.warn("THREE.Material: '"+t+"' parameter is undefined.");continue}let i=this[t];if(i===void 0){console.warn("THREE."+this.type+": '"+t+"' is not a property of this material.");continue}i&&i.isColor?i.set(r):i&&i.isVector3&&r&&r.isVector3?i.copy(r):this[t]=r}}toJSON(e){let t=e===void 0||typeof e=="string";t&&(e={textures:{},images:{}});let r={metadata:{version:4.5,type:"Material",generator:"Material.toJSON"}};r.uuid=this.uuid,r.type=this.type,this.name!==""&&(r.name=this.name),this.color&&this.color.isColor&&(r.color=this.color.getHex()),this.roughness!==void 0&&(r.roughness=this.roughness),this.metalness!==void 0&&(r.metalness=this.metalness),this.sheen!==void 0&&(r.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(r.sheenColor=this.sheenColor.getHex()),this.sheenRoughness!==void 0&&(r.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(r.emissive=this.emissive.getHex()),this.emissiveIntensity&&this.emissiveIntensity!==1&&(r.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(r.specular=this.specular.getHex()),this.specularIntensity!==void 0&&(r.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(r.specularColor=this.specularColor.getHex()),this.shininess!==void 0&&(r.shininess=this.shininess),this.clearcoat!==void 0&&(r.clearcoat=this.clearcoat),this.clearcoatRoughness!==void 0&&(r.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(r.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(r.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(r.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,r.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.iridescence!==void 0&&(r.iridescence=this.iridescence),this.iridescenceIOR!==void 0&&(r.iridescenceIOR=this.iridescenceIOR),this.iridescenceThicknessRange!==void 0&&(r.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(r.iridescenceMap=this.iridescenceMap.toJSON(e).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(r.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(e).uuid),this.map&&this.map.isTexture&&(r.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(r.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(r.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(r.lightMap=this.lightMap.toJSON(e).uuid,r.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(r.aoMap=this.aoMap.toJSON(e).uuid,r.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(r.bumpMap=this.bumpMap.toJSON(e).uuid,r.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(r.normalMap=this.normalMap.toJSON(e).uuid,r.normalMapType=this.normalMapType,r.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(r.displacementMap=this.displacementMap.toJSON(e).uuid,r.displacementScale=this.displacementScale,r.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(r.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(r.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(r.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(r.specularMap=this.specularMap.toJSON(e).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(r.specularIntensityMap=this.specularIntensityMap.toJSON(e).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(r.specularColorMap=this.specularColorMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(r.envMap=this.envMap.toJSON(e).uuid,this.combine!==void 0&&(r.combine=this.combine)),this.envMapIntensity!==void 0&&(r.envMapIntensity=this.envMapIntensity),this.reflectivity!==void 0&&(r.reflectivity=this.reflectivity),this.refractionRatio!==void 0&&(r.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(r.gradientMap=this.gradientMap.toJSON(e).uuid),this.transmission!==void 0&&(r.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(r.transmissionMap=this.transmissionMap.toJSON(e).uuid),this.thickness!==void 0&&(r.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(r.thicknessMap=this.thicknessMap.toJSON(e).uuid),this.attenuationDistance!==void 0&&this.attenuationDistance!==1/0&&(r.attenuationDistance=this.attenuationDistance),this.attenuationColor!==void 0&&(r.attenuationColor=this.attenuationColor.getHex()),this.size!==void 0&&(r.size=this.size),this.shadowSide!==null&&(r.shadowSide=this.shadowSide),this.sizeAttenuation!==void 0&&(r.sizeAttenuation=this.sizeAttenuation),this.blending!==_v&&(r.blending=this.blending),this.side!==Lu&&(r.side=this.side),this.vertexColors&&(r.vertexColors=!0),this.opacity<1&&(r.opacity=this.opacity),this.transparent===!0&&(r.transparent=this.transparent),r.depthFunc=this.depthFunc,r.depthTest=this.depthTest,r.depthWrite=this.depthWrite,r.colorWrite=this.colorWrite,r.stencilWrite=this.stencilWrite,r.stencilWriteMask=this.stencilWriteMask,r.stencilFunc=this.stencilFunc,r.stencilRef=this.stencilRef,r.stencilFuncMask=this.stencilFuncMask,r.stencilFail=this.stencilFail,r.stencilZFail=this.stencilZFail,r.stencilZPass=this.stencilZPass,this.rotation!==void 0&&this.rotation!==0&&(r.rotation=this.rotation),this.polygonOffset===!0&&(r.polygonOffset=!0),this.polygonOffsetFactor!==0&&(r.polygonOffsetFactor=this.polygonOffsetFactor),this.polygonOffsetUnits!==0&&(r.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth!==void 0&&this.linewidth!==1&&(r.linewidth=this.linewidth),this.dashSize!==void 0&&(r.dashSize=this.dashSize),this.gapSize!==void 0&&(r.gapSize=this.gapSize),this.scale!==void 0&&(r.scale=this.scale),this.dithering===!0&&(r.dithering=!0),this.alphaTest>0&&(r.alphaTest=this.alphaTest),this.alphaToCoverage===!0&&(r.alphaToCoverage=this.alphaToCoverage),this.premultipliedAlpha===!0&&(r.premultipliedAlpha=this.premultipliedAlpha),this.forceSinglePass===!0&&(r.forceSinglePass=this.forceSinglePass),this.wireframe===!0&&(r.wireframe=this.wireframe),this.wireframeLinewidth>1&&(r.wireframeLinewidth=this.wireframeLinewidth),this.wireframeLinecap!=="round"&&(r.wireframeLinecap=this.wireframeLinecap),this.wireframeLinejoin!=="round"&&(r.wireframeLinejoin=this.wireframeLinejoin),this.flatShading===!0&&(r.flatShading=this.flatShading),this.visible===!1&&(r.visible=!1),this.toneMapped===!1&&(r.toneMapped=!1),this.fog===!1&&(r.fog=!1),Object.keys(this.userData).length>0&&(r.userData=this.userData);function i(n){let a=[];for(let o in n){let s=n[o];delete s.metadata,a.push(s)}return a}if(t){let n=i(e.textures),a=i(e.images);n.length>0&&(r.textures=n),a.length>0&&(r.images=a)}return r}clone(){return new this.constructor().copy(this)}copy(e){this.name=e.name,this.blending=e.blending,this.side=e.side,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;let t=e.clippingPlanes,r=null;if(t!==null){let i=t.length;r=new Array(i);for(let n=0;n!==i;++n)r[n]=t[n].clone()}return this.clippingPlanes=r,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.alphaToCoverage=e.alphaToCoverage,this.premultipliedAlpha=e.premultipliedAlpha,this.forceSinglePass=e.forceSinglePass,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(e){e===!0&&this.version++}},Ed=class extends F4{constructor(e){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new Vt(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=kve,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}},Tn=new U,F_=new me,Zt=class{constructor(e,t,r=!1){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,this.name="",this.array=e,this.itemSize=t,this.count=e!==void 0?e.length/t:0,this.normalized=r,this.usage=uR,this.updateRange={offset:0,count:-1},this.version=0}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}copy(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this}copyAt(e,t,r){e*=this.itemSize,r*=t.itemSize;for(let i=0,n=this.itemSize;i<n;i++)this.array[e+i]=t.array[r+i];return this}copyArray(e){return this.array.set(e),this}applyMatrix3(e){if(this.itemSize===2)for(let t=0,r=this.count;t<r;t++)F_.fromBufferAttribute(this,t),F_.applyMatrix3(e),this.setXY(t,F_.x,F_.y);else if(this.itemSize===3)for(let t=0,r=this.count;t<r;t++)Tn.fromBufferAttribute(this,t),Tn.applyMatrix3(e),this.setXYZ(t,Tn.x,Tn.y,Tn.z);return this}applyMatrix4(e){for(let t=0,r=this.count;t<r;t++)Tn.fromBufferAttribute(this,t),Tn.applyMatrix4(e),this.setXYZ(t,Tn.x,Tn.y,Tn.z);return this}applyNormalMatrix(e){for(let t=0,r=this.count;t<r;t++)Tn.fromBufferAttribute(this,t),Tn.applyNormalMatrix(e),this.setXYZ(t,Tn.x,Tn.y,Tn.z);return this}transformDirection(e){for(let t=0,r=this.count;t<r;t++)Tn.fromBufferAttribute(this,t),Tn.transformDirection(e),this.setXYZ(t,Tn.x,Tn.y,Tn.z);return this}set(e,t=0){return this.array.set(e,t),this}getX(e){let t=this.array[e*this.itemSize];return this.normalized&&(t=td(t,this.array)),t}setX(e,t){return this.normalized&&(t=Ni(t,this.array)),this.array[e*this.itemSize]=t,this}getY(e){let t=this.array[e*this.itemSize+1];return this.normalized&&(t=td(t,this.array)),t}setY(e,t){return this.normalized&&(t=Ni(t,this.array)),this.array[e*this.itemSize+1]=t,this}getZ(e){let t=this.array[e*this.itemSize+2];return this.normalized&&(t=td(t,this.array)),t}setZ(e,t){return this.normalized&&(t=Ni(t,this.array)),this.array[e*this.itemSize+2]=t,this}getW(e){let t=this.array[e*this.itemSize+3];return this.normalized&&(t=td(t,this.array)),t}setW(e,t){return this.normalized&&(t=Ni(t,this.array)),this.array[e*this.itemSize+3]=t,this}setXY(e,t,r){return e*=this.itemSize,this.normalized&&(t=Ni(t,this.array),r=Ni(r,this.array)),this.array[e+0]=t,this.array[e+1]=r,this}setXYZ(e,t,r,i){return e*=this.itemSize,this.normalized&&(t=Ni(t,this.array),r=Ni(r,this.array),i=Ni(i,this.array)),this.array[e+0]=t,this.array[e+1]=r,this.array[e+2]=i,this}setXYZW(e,t,r,i,n){return e*=this.itemSize,this.normalized&&(t=Ni(t,this.array),r=Ni(r,this.array),i=Ni(i,this.array),n=Ni(n,this.array)),this.array[e+0]=t,this.array[e+1]=r,this.array[e+2]=i,this.array[e+3]=n,this}onUpload(e){return this.onUploadCallback=e,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){let e={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return this.name!==""&&(e.name=this.name),this.usage!==uR&&(e.usage=this.usage),(this.updateRange.offset!==0||this.updateRange.count!==-1)&&(e.updateRange=this.updateRange),e}copyColorsArray(){console.error("THREE.BufferAttribute: copyColorsArray() was removed in r144.")}copyVector2sArray(){console.error("THREE.BufferAttribute: copyVector2sArray() was removed in r144.")}copyVector3sArray(){console.error("THREE.BufferAttribute: copyVector3sArray() was removed in r144.")}copyVector4sArray(){console.error("THREE.BufferAttribute: copyVector4sArray() was removed in r144.")}},qve=class extends Zt{constructor(e,t,r){super(new Uint16Array(e),t,r)}},g1=class extends Zt{constructor(e,t,r){super(new Uint32Array(e),t,r)}},ht=class extends Zt{constructor(e,t,r){super(new Float32Array(e),t,r)}},hlt=0,nl=new Ke,gP=new _i,Jm=new U,Ls=new Cn,ex=new Cn,la=new U,It=class extends Ka{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:hlt++}),this.uuid=Il(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(e){return Array.isArray(e)?this.index=new(Hve(e)?g1:qve)(e,1):this.index=e,this}getAttribute(e){return this.attributes[e]}setAttribute(e,t){return this.attributes[e]=t,this}deleteAttribute(e){return delete this.attributes[e],this}hasAttribute(e){return this.attributes[e]!==void 0}addGroup(e,t,r=0){this.groups.push({start:e,count:t,materialIndex:r})}clearGroups(){this.groups=[]}setDrawRange(e,t){this.drawRange.start=e,this.drawRange.count=t}applyMatrix4(e){let t=this.attributes.position;t!==void 0&&(t.applyMatrix4(e),t.needsUpdate=!0);let r=this.attributes.normal;if(r!==void 0){let n=new Bn().getNormalMatrix(e);r.applyNormalMatrix(n),r.needsUpdate=!0}let i=this.attributes.tangent;return i!==void 0&&(i.transformDirection(e),i.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this}applyQuaternion(e){return nl.makeRotationFromQuaternion(e),this.applyMatrix4(nl),this}rotateX(e){return nl.makeRotationX(e),this.applyMatrix4(nl),this}rotateY(e){return nl.makeRotationY(e),this.applyMatrix4(nl),this}rotateZ(e){return nl.makeRotationZ(e),this.applyMatrix4(nl),this}translate(e,t,r){return nl.makeTranslation(e,t,r),this.applyMatrix4(nl),this}scale(e,t,r){return nl.makeScale(e,t,r),this.applyMatrix4(nl),this}lookAt(e){return gP.lookAt(e),gP.updateMatrix(),this.applyMatrix4(gP.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(Jm).negate(),this.translate(Jm.x,Jm.y,Jm.z),this}setFromPoints(e){let t=[];for(let r=0,i=e.length;r<i;r++){let n=e[r];t.push(n.x,n.y,n.z||0)}return this.setAttribute("position",new ht(t,3)),this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new Cn);let e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error('THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box. Alternatively set "mesh.frustumCulled" to "false".',this),this.boundingBox.set(new U(-1/0,-1/0,-1/0),new U(1/0,1/0,1/0));return}if(e!==void 0){if(this.boundingBox.setFromBufferAttribute(e),t)for(let r=0,i=t.length;r<i;r++){let n=t[r];Ls.setFromBufferAttribute(n),this.morphTargetsRelative?(la.addVectors(this.boundingBox.min,Ls.min),this.boundingBox.expandByPoint(la),la.addVectors(this.boundingBox.max,Ls.max),this.boundingBox.expandByPoint(la)):(this.boundingBox.expandByPoint(Ls.min),this.boundingBox.expandByPoint(Ls.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new Es);let e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error('THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere. Alternatively set "mesh.frustumCulled" to "false".',this),this.boundingSphere.set(new U,1/0);return}if(e){let r=this.boundingSphere.center;if(Ls.setFromBufferAttribute(e),t)for(let n=0,a=t.length;n<a;n++){let o=t[n];ex.setFromBufferAttribute(o),this.morphTargetsRelative?(la.addVectors(Ls.min,ex.min),Ls.expandByPoint(la),la.addVectors(Ls.max,ex.max),Ls.expandByPoint(la)):(Ls.expandByPoint(ex.min),Ls.expandByPoint(ex.max))}Ls.getCenter(r);let i=0;for(let n=0,a=e.count;n<a;n++)la.fromBufferAttribute(e,n),i=Math.max(i,r.distanceToSquared(la));if(t)for(let n=0,a=t.length;n<a;n++){let o=t[n],s=this.morphTargetsRelative;for(let l=0,u=o.count;l<u;l++)la.fromBufferAttribute(o,l),s&&(Jm.fromBufferAttribute(e,l),la.add(Jm)),i=Math.max(i,r.distanceToSquared(la))}this.boundingSphere.radius=Math.sqrt(i),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){let e=this.index,t=this.attributes;if(e===null||t.position===void 0||t.normal===void 0||t.uv===void 0){console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");return}let r=e.array,i=t.position.array,n=t.normal.array,a=t.uv.array,o=i.length/3;this.hasAttribute("tangent")===!1&&this.setAttribute("tangent",new Zt(new Float32Array(4*o),4));let s=this.getAttribute("tangent").array,l=[],u=[];for(let M=0;M<o;M++)l[M]=new U,u[M]=new U;let c=new U,h=new U,d=new U,f=new me,p=new me,v=new me,m=new U,g=new U;function y(M,E,T){c.fromArray(i,M*3),h.fromArray(i,E*3),d.fromArray(i,T*3),f.fromArray(a,M*2),p.fromArray(a,E*2),v.fromArray(a,T*2),h.sub(c),d.sub(c),p.sub(f),v.sub(f);let L=1/(p.x*v.y-v.x*p.y);!isFinite(L)||(m.copy(h).multiplyScalar(v.y).addScaledVector(d,-p.y).multiplyScalar(L),g.copy(d).multiplyScalar(p.x).addScaledVector(h,-v.x).multiplyScalar(L),l[M].add(m),l[E].add(m),l[T].add(m),u[M].add(g),u[E].add(g),u[T].add(g))}let x=this.groups;x.length===0&&(x=[{start:0,count:r.length}]);for(let M=0,E=x.length;M<E;++M){let T=x[M],L=T.start,P=T.count;for(let C=L,D=L+P;C<D;C+=3)y(r[C+0],r[C+1],r[C+2])}let b=new U,_=new U,w=new U,S=new U;function A(M){w.fromArray(n,M*3),S.copy(w);let E=l[M];b.copy(E),b.sub(w.multiplyScalar(w.dot(E))).normalize(),_.crossVectors(S,E);let T=_.dot(u[M])<0?-1:1;s[M*4]=b.x,s[M*4+1]=b.y,s[M*4+2]=b.z,s[M*4+3]=T}for(let M=0,E=x.length;M<E;++M){let T=x[M],L=T.start,P=T.count;for(let C=L,D=L+P;C<D;C+=3)A(r[C+0]),A(r[C+1]),A(r[C+2])}}computeVertexNormals(){let e=this.index,t=this.getAttribute("position");if(t!==void 0){let r=this.getAttribute("normal");if(r===void 0)r=new Zt(new Float32Array(t.count*3),3),this.setAttribute("normal",r);else for(let h=0,d=r.count;h<d;h++)r.setXYZ(h,0,0,0);let i=new U,n=new U,a=new U,o=new U,s=new U,l=new U,u=new U,c=new U;if(e)for(let h=0,d=e.count;h<d;h+=3){let f=e.getX(h+0),p=e.getX(h+1),v=e.getX(h+2);i.fromBufferAttribute(t,f),n.fromBufferAttribute(t,p),a.fromBufferAttribute(t,v),u.subVectors(a,n),c.subVectors(i,n),u.cross(c),o.fromBufferAttribute(r,f),s.fromBufferAttribute(r,p),l.fromBufferAttribute(r,v),o.add(u),s.add(u),l.add(u),r.setXYZ(f,o.x,o.y,o.z),r.setXYZ(p,s.x,s.y,s.z),r.setXYZ(v,l.x,l.y,l.z)}else for(let h=0,d=t.count;h<d;h+=3)i.fromBufferAttribute(t,h+0),n.fromBufferAttribute(t,h+1),a.fromBufferAttribute(t,h+2),u.subVectors(a,n),c.subVectors(i,n),u.cross(c),r.setXYZ(h+0,u.x,u.y,u.z),r.setXYZ(h+1,u.x,u.y,u.z),r.setXYZ(h+2,u.x,u.y,u.z);this.normalizeNormals(),r.needsUpdate=!0}}merge(){return console.error("THREE.BufferGeometry.merge() has been removed. Use THREE.BufferGeometryUtils.mergeBufferGeometries() instead."),this}normalizeNormals(){let e=this.attributes.normal;for(let t=0,r=e.count;t<r;t++)la.fromBufferAttribute(e,t),la.normalize(),e.setXYZ(t,la.x,la.y,la.z)}toNonIndexed(){function e(o,s){let l=o.array,u=o.itemSize,c=o.normalized,h=new l.constructor(s.length*u),d=0,f=0;for(let p=0,v=s.length;p<v;p++){o.isInterleavedBufferAttribute?d=s[p]*o.data.stride+o.offset:d=s[p]*u;for(let m=0;m<u;m++)h[f++]=l[d++]}return new Zt(h,u,c)}if(this.index===null)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;let t=new It,r=this.index.array,i=this.attributes;for(let o in i){let s=i[o],l=e(s,r);t.setAttribute(o,l)}let n=this.morphAttributes;for(let o in n){let s=[],l=n[o];for(let u=0,c=l.length;u<c;u++){let h=l[u],d=e(h,r);s.push(d)}t.morphAttributes[o]=s}t.morphTargetsRelative=this.morphTargetsRelative;let a=this.groups;for(let o=0,s=a.length;o<s;o++){let l=a[o];t.addGroup(l.start,l.count,l.materialIndex)}return t}toJSON(){let e={metadata:{version:4.5,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,this.name!==""&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),this.parameters!==void 0){let s=this.parameters;for(let l in s)s[l]!==void 0&&(e[l]=s[l]);return e}e.data={attributes:{}};let t=this.index;t!==null&&(e.data.index={type:t.array.constructor.name,array:Array.prototype.slice.call(t.array)});let r=this.attributes;for(let s in r){let l=r[s];e.data.attributes[s]=l.toJSON(e.data)}let i={},n=!1;for(let s in this.morphAttributes){let l=this.morphAttributes[s],u=[];for(let c=0,h=l.length;c<h;c++){let d=l[c];u.push(d.toJSON(e.data))}u.length>0&&(i[s]=u,n=!0)}n&&(e.data.morphAttributes=i,e.data.morphTargetsRelative=this.morphTargetsRelative);let a=this.groups;a.length>0&&(e.data.groups=JSON.parse(JSON.stringify(a)));let o=this.boundingSphere;return o!==null&&(e.data.boundingSphere={center:o.center.toArray(),radius:o.radius}),e}clone(){return new this.constructor().copy(this)}copy(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;let t={};this.name=e.name;let r=e.index;r!==null&&this.setIndex(r.clone(t));let i=e.attributes;for(let l in i){let u=i[l];this.setAttribute(l,u.clone(t))}let n=e.morphAttributes;for(let l in n){let u=[],c=n[l];for(let h=0,d=c.length;h<d;h++)u.push(c[h].clone(t));this.morphAttributes[l]=u}this.morphTargetsRelative=e.morphTargetsRelative;let a=e.groups;for(let l=0,u=a.length;l<u;l++){let c=a[l];this.addGroup(c.start,c.count,c.materialIndex)}let o=e.boundingBox;o!==null&&(this.boundingBox=o.clone());let s=e.boundingSphere;return s!==null&&(this.boundingSphere=s.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,e.parameters!==void 0&&(this.parameters=Object.assign({},e.parameters)),this}dispose(){this.dispatchEvent({type:"dispose"})}},r$=new Ke,$m=new qy,yP=new Es,tx=new U,rx=new U,ix=new U,xP=new U,z_=new U,H_=new me,U_=new me,G_=new me,bP=new U,j_=new U,nn=class extends _i{constructor(e=new It,t=new Ed){super(),this.isMesh=!0,this.type="Mesh",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),e.morphTargetInfluences!==void 0&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),e.morphTargetDictionary!==void 0&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=e.material,this.geometry=e.geometry,this}updateMorphTargets(){let e=this.geometry.morphAttributes,t=Object.keys(e);if(t.length>0){let r=e[t[0]];if(r!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let i=0,n=r.length;i<n;i++){let a=r[i].name||String(i);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=i}}}}getVertexPosition(e,t){let r=this.geometry,i=r.attributes.position,n=r.morphAttributes.position,a=r.morphTargetsRelative;t.fromBufferAttribute(i,e);let o=this.morphTargetInfluences;if(n&&o){z_.set(0,0,0);for(let s=0,l=n.length;s<l;s++){let u=o[s],c=n[s];u!==0&&(xP.fromBufferAttribute(c,e),a?z_.addScaledVector(xP,u):z_.addScaledVector(xP.sub(t),u))}t.add(z_)}return this.isSkinnedMesh&&this.boneTransform(e,t),t}raycast(e,t){let r=this.geometry,i=this.material,n=this.matrixWorld;if(i===void 0||(r.boundingSphere===null&&r.computeBoundingSphere(),yP.copy(r.boundingSphere),yP.applyMatrix4(n),e.ray.intersectsSphere(yP)===!1)||(r$.copy(n).invert(),$m.copy(e.ray).applyMatrix4(r$),r.boundingBox!==null&&$m.intersectsBox(r.boundingBox)===!1))return;let a,o=r.index,s=r.attributes.position,l=r.attributes.uv,u=r.attributes.uv2,c=r.groups,h=r.drawRange;if(o!==null)if(Array.isArray(i))for(let d=0,f=c.length;d<f;d++){let p=c[d],v=i[p.materialIndex],m=Math.max(p.start,h.start),g=Math.min(o.count,Math.min(p.start+p.count,h.start+h.count));for(let y=m,x=g;y<x;y+=3){let b=o.getX(y),_=o.getX(y+1),w=o.getX(y+2);a=W_(this,v,e,$m,l,u,b,_,w),a&&(a.faceIndex=Math.floor(y/3),a.face.materialIndex=p.materialIndex,t.push(a))}}else{let d=Math.max(0,h.start),f=Math.min(o.count,h.start+h.count);for(let p=d,v=f;p<v;p+=3){let m=o.getX(p),g=o.getX(p+1),y=o.getX(p+2);a=W_(this,i,e,$m,l,u,m,g,y),a&&(a.faceIndex=Math.floor(p/3),t.push(a))}}else if(s!==void 0)if(Array.isArray(i))for(let d=0,f=c.length;d<f;d++){let p=c[d],v=i[p.materialIndex],m=Math.max(p.start,h.start),g=Math.min(s.count,Math.min(p.start+p.count,h.start+h.count));for(let y=m,x=g;y<x;y+=3){let b=y,_=y+1,w=y+2;a=W_(this,v,e,$m,l,u,b,_,w),a&&(a.faceIndex=Math.floor(y/3),a.face.materialIndex=p.materialIndex,t.push(a))}}else{let d=Math.max(0,h.start),f=Math.min(s.count,h.start+h.count);for(let p=d,v=f;p<v;p+=3){let m=p,g=p+1,y=p+2;a=W_(this,i,e,$m,l,u,m,g,y),a&&(a.faceIndex=Math.floor(p/3),t.push(a))}}}};function dlt(e,t,r,i,n,a,o,s){let l;if(t.side===ba?l=i.intersectTriangle(o,a,n,!0,s):l=i.intersectTriangle(n,a,o,t.side===Lu,s),l===null)return null;j_.copy(s),j_.applyMatrix4(e.matrixWorld);let u=r.ray.origin.distanceTo(j_);return u<r.near||u>r.far?null:{distance:u,point:j_.clone(),object:e}}function W_(e,t,r,i,n,a,o,s,l){e.getVertexPosition(o,tx),e.getVertexPosition(s,rx),e.getVertexPosition(l,ix);let u=dlt(e,t,r,i,tx,rx,ix,bP);if(u){n&&(H_.fromBufferAttribute(n,o),U_.fromBufferAttribute(n,s),G_.fromBufferAttribute(n,l),u.uv=za.getUV(bP,tx,rx,ix,H_,U_,G_,new me)),a&&(H_.fromBufferAttribute(a,o),U_.fromBufferAttribute(a,s),G_.fromBufferAttribute(a,l),u.uv2=za.getUV(bP,tx,rx,ix,H_,U_,G_,new me));let c={a:o,b:s,c:l,normal:new U,materialIndex:0};za.getNormal(tx,rx,ix,c.normal),u.face=c}return u}var Ru=class extends It{constructor(e=1,t=1,r=1,i=1,n=1,a=1){super(),this.type="BoxGeometry",this.parameters={width:e,height:t,depth:r,widthSegments:i,heightSegments:n,depthSegments:a};let o=this;i=Math.floor(i),n=Math.floor(n),a=Math.floor(a);let s=[],l=[],u=[],c=[],h=0,d=0;f("z","y","x",-1,-1,r,t,e,a,n,0),f("z","y","x",1,-1,r,t,-e,a,n,1),f("x","z","y",1,1,e,r,t,i,a,2),f("x","z","y",1,-1,e,r,-t,i,a,3),f("x","y","z",1,-1,e,t,r,i,n,4),f("x","y","z",-1,-1,e,t,-r,i,n,5),this.setIndex(s),this.setAttribute("position",new ht(l,3)),this.setAttribute("normal",new ht(u,3)),this.setAttribute("uv",new ht(c,2));function f(p,v,m,g,y,x,b,_,w,S,A){let M=x/w,E=b/S,T=x/2,L=b/2,P=_/2,C=w+1,D=S+1,I=0,O=0,R=new U;for(let H=0;H<D;H++){let j=H*E-L;for(let N=0;N<C;N++){let k=N*M-T;R[p]=k*g,R[v]=j*y,R[m]=P,l.push(R.x,R.y,R.z),R[p]=0,R[v]=0,R[m]=_>0?1:-1,u.push(R.x,R.y,R.z),c.push(N/w),c.push(1-H/S),I+=1}}for(let H=0;H<S;H++)for(let j=0;j<w;j++){let N=h+j+C*H,k=h+j+C*(H+1),G=h+(j+1)+C*(H+1),Y=h+(j+1)+C*H;s.push(N,k,Y),s.push(k,G,Y),O+=6}o.addGroup(d,O,A),d+=O,h+=I}}static fromJSON(e){return new Ru(e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments)}};function $1(e){let t={};for(let r in e){t[r]={};for(let i in e[r]){let n=e[r][i];n&&(n.isColor||n.isMatrix3||n.isMatrix4||n.isVector2||n.isVector3||n.isVector4||n.isTexture||n.isQuaternion)?t[r][i]=n.clone():Array.isArray(n)?t[r][i]=n.slice():t[r][i]=n}}return t}function Ro(e){let t={};for(let r=0;r<e.length;r++){let i=$1(e[r]);for(let n in i)t[n]=i[n]}return t}function flt(e){let t=[];for(let r=0;r<e.length;r++)t.push(e[r].clone());return t}function Yve(e){return e.getRenderTarget()===null&&e.outputEncoding===pr?gc:VS}var Yy={clone:$1,merge:Ro},plt=`void main() {
	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`,vlt=`void main() {
	gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );
}`,ai=class extends F4{constructor(e){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader=plt,this.fragmentShader=vlt,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv2:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,e!==void 0&&this.setValues(e)}copy(e){return super.copy(e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=$1(e.uniforms),this.uniformsGroups=flt(e.uniformsGroups),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.fog=e.fog,this.lights=e.lights,this.clipping=e.clipping,this.extensions=Object.assign({},e.extensions),this.glslVersion=e.glslVersion,this}toJSON(e){let t=super.toJSON(e);t.glslVersion=this.glslVersion,t.uniforms={};for(let i in this.uniforms){let n=this.uniforms[i].value;n&&n.isTexture?t.uniforms[i]={type:"t",value:n.toJSON(e).uuid}:n&&n.isColor?t.uniforms[i]={type:"c",value:n.getHex()}:n&&n.isVector2?t.uniforms[i]={type:"v2",value:n.toArray()}:n&&n.isVector3?t.uniforms[i]={type:"v3",value:n.toArray()}:n&&n.isVector4?t.uniforms[i]={type:"v4",value:n.toArray()}:n&&n.isMatrix3?t.uniforms[i]={type:"m3",value:n.toArray()}:n&&n.isMatrix4?t.uniforms[i]={type:"m4",value:n.toArray()}:t.uniforms[i]={value:n}}Object.keys(this.defines).length>0&&(t.defines=this.defines),t.vertexShader=this.vertexShader,t.fragmentShader=this.fragmentShader;let r={};for(let i in this.extensions)this.extensions[i]===!0&&(r[i]=!0);return Object.keys(r).length>0&&(t.extensions=r),t}},cm=class extends _i{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new Ke,this.projectionMatrix=new Ke,this.projectionMatrixInverse=new Ke}copy(e,t){return super.copy(e,t),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this}getWorldDirection(e){this.updateWorldMatrix(!0,!1);let t=this.matrixWorld.elements;return e.set(-t[8],-t[9],-t[10]).normalize()}updateMatrixWorld(e){super.updateMatrixWorld(e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(e,t){super.updateWorldMatrix(e,t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return new this.constructor().copy(this)}},fo=class extends cm{constructor(e=50,t=1,r=.1,i=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=e,this.zoom=1,this.near=r,this.far=i,this.focus=10,this.aspect=t,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=e.view===null?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this}setFocalLength(e){let t=.5*this.getFilmHeight()/e;this.fov=Dw*2*Math.atan(t),this.updateProjectionMatrix()}getFocalLength(){let e=Math.tan(Sb*.5*this.fov);return .5*this.getFilmHeight()/e}getEffectiveFOV(){return Dw*2*Math.atan(Math.tan(Sb*.5*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}setViewOffset(e,t,r,i,n,a){this.aspect=e/t,this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=r,this.view.offsetY=i,this.view.width=n,this.view.height=a,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){let e=this.near,t=e*Math.tan(Sb*.5*this.fov)/this.zoom,r=2*t,i=this.aspect*r,n=-.5*i,a=this.view;if(this.view!==null&&this.view.enabled){let s=a.fullWidth,l=a.fullHeight;n+=a.offsetX*i/s,t-=a.offsetY*r/l,i*=a.width/s,r*=a.height/l}let o=this.filmOffset;o!==0&&(n+=e*o/this.getFilmWidth()),this.projectionMatrix.makePerspective(n,n+i,t,t-r,e,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){let t=super.toJSON(e);return t.object.fov=this.fov,t.object.zoom=this.zoom,t.object.near=this.near,t.object.far=this.far,t.object.focus=this.focus,t.object.aspect=this.aspect,this.view!==null&&(t.object.view=Object.assign({},this.view)),t.object.filmGauge=this.filmGauge,t.object.filmOffset=this.filmOffset,t}},eg=-90,tg=1,mlt=class extends _i{constructor(e,t,r){super(),this.type="CubeCamera",this.renderTarget=r;let i=new fo(eg,tg,e,t);i.layers=this.layers,i.up.set(0,1,0),i.lookAt(1,0,0),this.add(i);let n=new fo(eg,tg,e,t);n.layers=this.layers,n.up.set(0,1,0),n.lookAt(-1,0,0),this.add(n);let a=new fo(eg,tg,e,t);a.layers=this.layers,a.up.set(0,0,-1),a.lookAt(0,1,0),this.add(a);let o=new fo(eg,tg,e,t);o.layers=this.layers,o.up.set(0,0,1),o.lookAt(0,-1,0),this.add(o);let s=new fo(eg,tg,e,t);s.layers=this.layers,s.up.set(0,1,0),s.lookAt(0,0,1),this.add(s);let l=new fo(eg,tg,e,t);l.layers=this.layers,l.up.set(0,1,0),l.lookAt(0,0,-1),this.add(l)}update(e,t){this.parent===null&&this.updateMatrixWorld();let r=this.renderTarget,[i,n,a,o,s,l]=this.children,u=e.getRenderTarget(),c=e.toneMapping,h=e.xr.enabled;e.toneMapping=Gc,e.xr.enabled=!1;let d=r.texture.generateMipmaps;r.texture.generateMipmaps=!1,e.setRenderTarget(r,0),e.render(t,i),e.setRenderTarget(r,1),e.render(t,n),e.setRenderTarget(r,2),e.render(t,a),e.setRenderTarget(r,3),e.render(t,o),e.setRenderTarget(r,4),e.render(t,s),r.texture.generateMipmaps=d,e.setRenderTarget(r,5),e.render(t,l),e.setRenderTarget(u),e.toneMapping=c,e.xr.enabled=h,r.texture.needsPMREMUpdate=!0}},iz=class extends an{constructor(e,t,r,i,n,a,o,s,l,u){e=e!==void 0?e:[],t=t!==void 0?t:jv,super(e,t,r,i,n,a,o,s,l,u),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(e){this.image=e}},glt=class extends ui{constructor(e=1,t={}){super(e,e,t),this.isWebGLCubeRenderTarget=!0;let r={width:e,height:e,depth:1},i=[r,r,r,r,r,r];this.texture=new iz(i,t.mapping,t.wrapS,t.wrapT,t.magFilter,t.minFilter,t.format,t.type,t.anisotropy,t.encoding),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=t.generateMipmaps!==void 0?t.generateMipmaps:!1,this.texture.minFilter=t.minFilter!==void 0?t.minFilter:br}fromEquirectangularTexture(e,t){this.texture.type=t.type,this.texture.encoding=t.encoding,this.texture.generateMipmaps=t.generateMipmaps,this.texture.minFilter=t.minFilter,this.texture.magFilter=t.magFilter;let r={uniforms:{tEquirect:{value:null}},vertexShader:`

				varying vec3 vWorldDirection;

				vec3 transformDirection( in vec3 dir, in mat4 matrix ) {

					return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );

				}

				void main() {

					vWorldDirection = transformDirection( position, modelMatrix );

					#include <begin_vertex>
					#include <project_vertex>

				}
			`,fragmentShader:`

				uniform sampler2D tEquirect;

				varying vec3 vWorldDirection;

				#include <common>

				void main() {

					vec3 direction = normalize( vWorldDirection );

					vec2 sampleUV = equirectUv( direction );

					gl_FragColor = texture2D( tEquirect, sampleUV );

				}
			`},i=new Ru(5,5,5),n=new ai({name:"CubemapFromEquirect",uniforms:$1(r.uniforms),vertexShader:r.vertexShader,fragmentShader:r.fragmentShader,side:ba,blending:Nn});n.uniforms.tEquirect.value=t;let a=new nn(i,n),o=t.minFilter;return t.minFilter===J1&&(t.minFilter=br),new mlt(1,10,this).update(e,a),t.minFilter=o,a.geometry.dispose(),a.material.dispose(),this}clear(e,t,r,i){let n=e.getRenderTarget();for(let a=0;a<6;a++)e.setRenderTarget(this,a),e.clear(t,r,i);e.setRenderTarget(n)}},wP=new U,ylt=new U,xlt=new Bn,hs=class{constructor(e=new U(1,0,0),t=0){this.isPlane=!0,this.normal=e,this.constant=t}set(e,t){return this.normal.copy(e),this.constant=t,this}setComponents(e,t,r,i){return this.normal.set(e,t,r),this.constant=i,this}setFromNormalAndCoplanarPoint(e,t){return this.normal.copy(e),this.constant=-t.dot(this.normal),this}setFromCoplanarPoints(e,t,r){let i=wP.subVectors(r,t).cross(ylt.subVectors(e,t)).normalize();return this.setFromNormalAndCoplanarPoint(i,e),this}copy(e){return this.normal.copy(e.normal),this.constant=e.constant,this}normalize(){let e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(e){return this.normal.dot(e)+this.constant}distanceToSphere(e){return this.distanceToPoint(e.center)-e.radius}projectPoint(e,t){return t.copy(this.normal).multiplyScalar(-this.distanceToPoint(e)).add(e)}intersectLine(e,t){let r=e.delta(wP),i=this.normal.dot(r);if(i===0)return this.distanceToPoint(e.start)===0?t.copy(e.start):null;let n=-(e.start.dot(this.normal)+this.constant)/i;return n<0||n>1?null:t.copy(r).multiplyScalar(n).add(e.start)}intersectsLine(e){let t=this.distanceToPoint(e.start),r=this.distanceToPoint(e.end);return t<0&&r>0||r<0&&t>0}intersectsBox(e){return e.intersectsPlane(this)}intersectsSphere(e){return e.intersectsPlane(this)}coplanarPoint(e){return e.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(e,t){let r=t||xlt.getNormalMatrix(e),i=this.coplanarPoint(wP).applyMatrix4(e),n=this.normal.applyMatrix3(r).normalize();return this.constant=-i.dot(n),this}translate(e){return this.constant-=e.dot(this.normal),this}equals(e){return e.normal.equals(this.normal)&&e.constant===this.constant}clone(){return new this.constructor().copy(this)}},rg=new Es,q_=new U,nz=class{constructor(e=new hs,t=new hs,r=new hs,i=new hs,n=new hs,a=new hs){this.planes=[e,t,r,i,n,a]}set(e,t,r,i,n,a){let o=this.planes;return o[0].copy(e),o[1].copy(t),o[2].copy(r),o[3].copy(i),o[4].copy(n),o[5].copy(a),this}copy(e){let t=this.planes;for(let r=0;r<6;r++)t[r].copy(e.planes[r]);return this}setFromProjectionMatrix(e){let t=this.planes,r=e.elements,i=r[0],n=r[1],a=r[2],o=r[3],s=r[4],l=r[5],u=r[6],c=r[7],h=r[8],d=r[9],f=r[10],p=r[11],v=r[12],m=r[13],g=r[14],y=r[15];return t[0].setComponents(o-i,c-s,p-h,y-v).normalize(),t[1].setComponents(o+i,c+s,p+h,y+v).normalize(),t[2].setComponents(o+n,c+l,p+d,y+m).normalize(),t[3].setComponents(o-n,c-l,p-d,y-m).normalize(),t[4].setComponents(o-a,c-u,p-f,y-g).normalize(),t[5].setComponents(o+a,c+u,p+f,y+g).normalize(),this}intersectsObject(e){let t=e.geometry;return t.boundingSphere===null&&t.computeBoundingSphere(),rg.copy(t.boundingSphere).applyMatrix4(e.matrixWorld),this.intersectsSphere(rg)}intersectsSprite(e){return rg.center.set(0,0,0),rg.radius=.7071067811865476,rg.applyMatrix4(e.matrixWorld),this.intersectsSphere(rg)}intersectsSphere(e){let t=this.planes,r=e.center,i=-e.radius;for(let n=0;n<6;n++)if(t[n].distanceToPoint(r)<i)return!1;return!0}intersectsBox(e){let t=this.planes;for(let r=0;r<6;r++){let i=t[r];if(q_.x=i.normal.x>0?e.max.x:e.min.x,q_.y=i.normal.y>0?e.max.y:e.min.y,q_.z=i.normal.z>0?e.max.z:e.min.z,i.distanceToPoint(q_)<0)return!1}return!0}containsPoint(e){let t=this.planes;for(let r=0;r<6;r++)if(t[r].distanceToPoint(e)<0)return!1;return!0}clone(){return new this.constructor().copy(this)}};function Xve(){let e=null,t=!1,r=null,i=null;function n(a,o){r(a,o),i=e.requestAnimationFrame(n)}return{start:function(){t!==!0&&r!==null&&(i=e.requestAnimationFrame(n),t=!0)},stop:function(){e.cancelAnimationFrame(i),t=!1},setAnimationLoop:function(a){r=a},setContext:function(a){e=a}}}function blt(e,t){let r=t.isWebGL2,i=new WeakMap;function n(u,c){let h=u.array,d=u.usage,f=e.createBuffer();e.bindBuffer(c,f),e.bufferData(c,h,d),u.onUploadCallback();let p;if(h instanceof Float32Array)p=5126;else if(h instanceof Uint16Array)if(u.isFloat16BufferAttribute)if(r)p=5131;else throw new Error("THREE.WebGLAttributes: Usage of Float16BufferAttribute requires WebGL2.");else p=5123;else if(h instanceof Int16Array)p=5122;else if(h instanceof Uint32Array)p=5125;else if(h instanceof Int32Array)p=5124;else if(h instanceof Int8Array)p=5120;else if(h instanceof Uint8Array)p=5121;else if(h instanceof Uint8ClampedArray)p=5121;else throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+h);return{buffer:f,type:p,bytesPerElement:h.BYTES_PER_ELEMENT,version:u.version}}function a(u,c,h){let d=c.array,f=c.updateRange;e.bindBuffer(h,u),f.count===-1?e.bufferSubData(h,0,d):(r?e.bufferSubData(h,f.offset*d.BYTES_PER_ELEMENT,d,f.offset,f.count):e.bufferSubData(h,f.offset*d.BYTES_PER_ELEMENT,d.subarray(f.offset,f.offset+f.count)),f.count=-1),c.onUploadCallback()}function o(u){return u.isInterleavedBufferAttribute&&(u=u.data),i.get(u)}function s(u){u.isInterleavedBufferAttribute&&(u=u.data);let c=i.get(u);c&&(e.deleteBuffer(c.buffer),i.delete(u))}function l(u,c){if(u.isGLBufferAttribute){let d=i.get(u);(!d||d.version<u.version)&&i.set(u,{buffer:u.buffer,type:u.type,bytesPerElement:u.elementSize,version:u.version});return}u.isInterleavedBufferAttribute&&(u=u.data);let h=i.get(u);h===void 0?i.set(u,n(u,c)):h.version<u.version&&(a(h.buffer,u,c),h.version=u.version)}return{get:o,remove:s,update:l}}var Md=class extends It{constructor(e=1,t=1,r=1,i=1){super(),this.type="PlaneGeometry",this.parameters={width:e,height:t,widthSegments:r,heightSegments:i};let n=e/2,a=t/2,o=Math.floor(r),s=Math.floor(i),l=o+1,u=s+1,c=e/o,h=t/s,d=[],f=[],p=[],v=[];for(let m=0;m<u;m++){let g=m*h-a;for(let y=0;y<l;y++){let x=y*c-n;f.push(x,-g,0),p.push(0,0,1),v.push(y/o),v.push(1-m/s)}}for(let m=0;m<s;m++)for(let g=0;g<o;g++){let y=g+l*m,x=g+l*(m+1),b=g+1+l*(m+1),_=g+1+l*m;d.push(y,x,_),d.push(x,b,_)}this.setIndex(d),this.setAttribute("position",new ht(f,3)),this.setAttribute("normal",new ht(p,3)),this.setAttribute("uv",new ht(v,2))}static fromJSON(e){return new Md(e.width,e.height,e.widthSegments,e.heightSegments)}},wlt=`#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, vUv ).g;
#endif`,_lt=`#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,Alt=`#ifdef USE_ALPHATEST
	if ( diffuseColor.a < alphaTest ) discard;
#endif`,Slt=`#ifdef USE_ALPHATEST
	uniform float alphaTest;
#endif`,Clt=`#ifdef USE_AOMAP
	float ambientOcclusion = ( texture2D( aoMap, vUv2 ).r - 1.0 ) * aoMapIntensity + 1.0;
	reflectedLight.indirectDiffuse *= ambientOcclusion;
	#if defined( USE_ENVMAP ) && defined( STANDARD )
		float dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );
		reflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );
	#endif
#endif`,Elt=`#ifdef USE_AOMAP
	uniform sampler2D aoMap;
	uniform float aoMapIntensity;
#endif`,Mlt="vec3 transformed = vec3( position );",Tlt=`vec3 objectNormal = vec3( normal );
#ifdef USE_TANGENT
	vec3 objectTangent = vec3( tangent.xyz );
#endif`,Plt=`vec3 BRDF_Lambert( const in vec3 diffuseColor ) {
	return RECIPROCAL_PI * diffuseColor;
}
vec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
}
float F_Schlick( const in float f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
}
vec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {
    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );
    float x2 = x * x;
    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );
    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );
}
float V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {
	float a2 = pow2( alpha );
	float gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );
	float gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );
	return 0.5 / max( gv + gl, EPSILON );
}
float D_GGX( const in float alpha, const in float dotNH ) {
	float a2 = pow2( alpha );
	float denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;
	return RECIPROCAL_PI * a2 / pow2( denom );
}
vec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 f0, const in float f90, const in float roughness ) {
	float alpha = pow2( roughness );
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( f0, f90, dotVH );
	float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
	float D = D_GGX( alpha, dotNH );
	return F * ( V * D );
}
#ifdef USE_IRIDESCENCE
	vec3 BRDF_GGX_Iridescence( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 f0, const in float f90, const in float iridescence, const in vec3 iridescenceFresnel, const in float roughness ) {
		float alpha = pow2( roughness );
		vec3 halfDir = normalize( lightDir + viewDir );
		float dotNL = saturate( dot( normal, lightDir ) );
		float dotNV = saturate( dot( normal, viewDir ) );
		float dotNH = saturate( dot( normal, halfDir ) );
		float dotVH = saturate( dot( viewDir, halfDir ) );
		vec3 F = mix( F_Schlick( f0, f90, dotVH ), iridescenceFresnel, iridescence );
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
		return F * ( V * D );
	}
#endif
vec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {
	const float LUT_SIZE = 64.0;
	const float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;
	const float LUT_BIAS = 0.5 / LUT_SIZE;
	float dotNV = saturate( dot( N, V ) );
	vec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );
	uv = uv * LUT_SCALE + LUT_BIAS;
	return uv;
}
float LTC_ClippedSphereFormFactor( const in vec3 f ) {
	float l = length( f );
	return max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );
}
vec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {
	float x = dot( v1, v2 );
	float y = abs( x );
	float a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;
	float b = 3.4175940 + ( 4.1616724 + y ) * y;
	float v = a / b;
	float theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;
	return cross( v1, v2 ) * theta_sintheta;
}
vec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {
	vec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];
	vec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];
	vec3 lightNormal = cross( v1, v2 );
	if( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );
	vec3 T1, T2;
	T1 = normalize( V - N * dot( V, N ) );
	T2 = - cross( N, T1 );
	mat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );
	vec3 coords[ 4 ];
	coords[ 0 ] = mat * ( rectCoords[ 0 ] - P );
	coords[ 1 ] = mat * ( rectCoords[ 1 ] - P );
	coords[ 2 ] = mat * ( rectCoords[ 2 ] - P );
	coords[ 3 ] = mat * ( rectCoords[ 3 ] - P );
	coords[ 0 ] = normalize( coords[ 0 ] );
	coords[ 1 ] = normalize( coords[ 1 ] );
	coords[ 2 ] = normalize( coords[ 2 ] );
	coords[ 3 ] = normalize( coords[ 3 ] );
	vec3 vectorFormFactor = vec3( 0.0 );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );
	float result = LTC_ClippedSphereFormFactor( vectorFormFactor );
	return vec3( result );
}
float G_BlinnPhong_Implicit( ) {
	return 0.25;
}
float D_BlinnPhong( const in float shininess, const in float dotNH ) {
	return RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );
}
vec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( specularColor, 1.0, dotVH );
	float G = G_BlinnPhong_Implicit( );
	float D = D_BlinnPhong( shininess, dotNH );
	return F * ( G * D );
}
#if defined( USE_SHEEN )
float D_Charlie( float roughness, float dotNH ) {
	float alpha = pow2( roughness );
	float invAlpha = 1.0 / alpha;
	float cos2h = dotNH * dotNH;
	float sin2h = max( 1.0 - cos2h, 0.0078125 );
	return ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );
}
float V_Neubelt( float dotNV, float dotNL ) {
	return saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );
}
vec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float D = D_Charlie( sheenRoughness, dotNH );
	float V = V_Neubelt( dotNV, dotNL );
	return sheenColor * ( D * V );
}
#endif`,Dlt=`#ifdef USE_IRIDESCENCE
	const mat3 XYZ_TO_REC709 = mat3(
		 3.2404542, -0.9692660,  0.0556434,
		-1.5371385,  1.8760108, -0.2040259,
		-0.4985314,  0.0415560,  1.0572252
	);
	vec3 Fresnel0ToIor( vec3 fresnel0 ) {
		vec3 sqrtF0 = sqrt( fresnel0 );
		return ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );
	}
	vec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );
	}
	float IorToFresnel0( float transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));
	}
	vec3 evalSensitivity( float OPD, vec3 shift ) {
		float phase = 2.0 * PI * OPD * 1.0e-9;
		vec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );
		vec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );
		vec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );
		vec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );
		xyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );
		xyz /= 1.0685e-7;
		vec3 rgb = XYZ_TO_REC709 * xyz;
		return rgb;
	}
	vec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {
		vec3 I;
		float iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );
		float sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );
		float cosTheta2Sq = 1.0 - sinTheta2Sq;
		if ( cosTheta2Sq < 0.0 ) {
			 return vec3( 1.0 );
		}
		float cosTheta2 = sqrt( cosTheta2Sq );
		float R0 = IorToFresnel0( iridescenceIOR, outsideIOR );
		float R12 = F_Schlick( R0, 1.0, cosTheta1 );
		float R21 = R12;
		float T121 = 1.0 - R12;
		float phi12 = 0.0;
		if ( iridescenceIOR < outsideIOR ) phi12 = PI;
		float phi21 = PI - phi12;
		vec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );		vec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );
		vec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );
		vec3 phi23 = vec3( 0.0 );
		if ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;
		if ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;
		if ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;
		float OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;
		vec3 phi = vec3( phi21 ) + phi23;
		vec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );
		vec3 r123 = sqrt( R123 );
		vec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );
		vec3 C0 = R12 + Rs;
		I = C0;
		vec3 Cm = Rs - T121;
		for ( int m = 1; m <= 2; ++ m ) {
			Cm *= r123;
			vec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );
			I += Cm * Sm;
		}
		return max( I, vec3( 0.0 ) );
	}
#endif`,Ilt=`#ifdef USE_BUMPMAP
	uniform sampler2D bumpMap;
	uniform float bumpScale;
	vec2 dHdxy_fwd() {
		vec2 dSTdx = dFdx( vUv );
		vec2 dSTdy = dFdy( vUv );
		float Hll = bumpScale * texture2D( bumpMap, vUv ).x;
		float dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;
		float dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;
		return vec2( dBx, dBy );
	}
	vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {
		vec3 vSigmaX = dFdx( surf_pos.xyz );
		vec3 vSigmaY = dFdy( surf_pos.xyz );
		vec3 vN = surf_norm;
		vec3 R1 = cross( vSigmaY, vN );
		vec3 R2 = cross( vN, vSigmaX );
		float fDet = dot( vSigmaX, R1 ) * faceDirection;
		vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );
		return normalize( abs( fDet ) * surf_norm - vGrad );
	}
#endif`,Llt=`#if NUM_CLIPPING_PLANES > 0
	vec4 plane;
	#pragma unroll_loop_start
	for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
		plane = clippingPlanes[ i ];
		if ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;
	}
	#pragma unroll_loop_end
	#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
		bool clipped = true;
		#pragma unroll_loop_start
		for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			clipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;
		}
		#pragma unroll_loop_end
		if ( clipped ) discard;
	#endif
#endif`,klt=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
	uniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];
#endif`,Rlt=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
#endif`,Olt=`#if NUM_CLIPPING_PLANES > 0
	vClipPosition = - mvPosition.xyz;
#endif`,Blt=`#if defined( USE_COLOR_ALPHA )
	diffuseColor *= vColor;
#elif defined( USE_COLOR )
	diffuseColor.rgb *= vColor;
#endif`,Nlt=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR )
	varying vec3 vColor;
#endif`,Vlt=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )
	varying vec3 vColor;
#endif`,Flt=`#if defined( USE_COLOR_ALPHA )
	vColor = vec4( 1.0 );
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )
	vColor = vec3( 1.0 );
#endif
#ifdef USE_COLOR
	vColor *= color;
#endif
#ifdef USE_INSTANCING_COLOR
	vColor.xyz *= instanceColor.xyz;
#endif`,zlt=`#define PI 3.141592653589793
#define PI2 6.283185307179586
#define PI_HALF 1.5707963267948966
#define RECIPROCAL_PI 0.3183098861837907
#define RECIPROCAL_PI2 0.15915494309189535
#define EPSILON 1e-6
#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
#define whiteComplement( a ) ( 1.0 - saturate( a ) )
float pow2( const in float x ) { return x*x; }
vec3 pow2( const in vec3 x ) { return x*x; }
float pow3( const in float x ) { return x*x*x; }
float pow4( const in float x ) { float x2 = x*x; return x2*x2; }
float max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }
float average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }
highp float rand( const in vec2 uv ) {
	const highp float a = 12.9898, b = 78.233, c = 43758.5453;
	highp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );
	return fract( sin( sn ) * c );
}
#ifdef HIGH_PRECISION
	float precisionSafeLength( vec3 v ) { return length( v ); }
#else
	float precisionSafeLength( vec3 v ) {
		float maxComponent = max3( abs( v ) );
		return length( v / maxComponent ) * maxComponent;
	}
#endif
struct IncidentLight {
	vec3 color;
	vec3 direction;
	bool visible;
};
struct ReflectedLight {
	vec3 directDiffuse;
	vec3 directSpecular;
	vec3 indirectDiffuse;
	vec3 indirectSpecular;
};
struct GeometricContext {
	vec3 position;
	vec3 normal;
	vec3 viewDir;
#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal;
#endif
};
vec3 transformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );
}
vec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );
}
mat3 transposeMat3( const in mat3 m ) {
	mat3 tmp;
	tmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );
	tmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );
	tmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );
	return tmp;
}
float luminance( const in vec3 rgb ) {
	const vec3 weights = vec3( 0.2126729, 0.7151522, 0.0721750 );
	return dot( weights, rgb );
}
bool isPerspectiveMatrix( mat4 m ) {
	return m[ 2 ][ 3 ] == - 1.0;
}
vec2 equirectUv( in vec3 dir ) {
	float u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;
	float v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;
	return vec2( u, v );
}`,Hlt=`#ifdef ENVMAP_TYPE_CUBE_UV
	#define cubeUV_minMipLevel 4.0
	#define cubeUV_minTileSize 16.0
	float getFace( vec3 direction ) {
		vec3 absDirection = abs( direction );
		float face = - 1.0;
		if ( absDirection.x > absDirection.z ) {
			if ( absDirection.x > absDirection.y )
				face = direction.x > 0.0 ? 0.0 : 3.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		} else {
			if ( absDirection.z > absDirection.y )
				face = direction.z > 0.0 ? 2.0 : 5.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		}
		return face;
	}
	vec2 getUV( vec3 direction, float face ) {
		vec2 uv;
		if ( face == 0.0 ) {
			uv = vec2( direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 1.0 ) {
			uv = vec2( - direction.x, - direction.z ) / abs( direction.y );
		} else if ( face == 2.0 ) {
			uv = vec2( - direction.x, direction.y ) / abs( direction.z );
		} else if ( face == 3.0 ) {
			uv = vec2( - direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 4.0 ) {
			uv = vec2( - direction.x, direction.z ) / abs( direction.y );
		} else {
			uv = vec2( direction.x, direction.y ) / abs( direction.z );
		}
		return 0.5 * ( uv + 1.0 );
	}
	vec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {
		float face = getFace( direction );
		float filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );
		mipInt = max( mipInt, cubeUV_minMipLevel );
		float faceSize = exp2( mipInt );
		highp vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;
		if ( face > 2.0 ) {
			uv.y += faceSize;
			face -= 3.0;
		}
		uv.x += face * faceSize;
		uv.x += filterInt * 3.0 * cubeUV_minTileSize;
		uv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );
		uv.x *= CUBEUV_TEXEL_WIDTH;
		uv.y *= CUBEUV_TEXEL_HEIGHT;
		#ifdef texture2DGradEXT
			return texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;
		#else
			return texture2D( envMap, uv ).rgb;
		#endif
	}
	#define cubeUV_r0 1.0
	#define cubeUV_v0 0.339
	#define cubeUV_m0 - 2.0
	#define cubeUV_r1 0.8
	#define cubeUV_v1 0.276
	#define cubeUV_m1 - 1.0
	#define cubeUV_r4 0.4
	#define cubeUV_v4 0.046
	#define cubeUV_m4 2.0
	#define cubeUV_r5 0.305
	#define cubeUV_v5 0.016
	#define cubeUV_m5 3.0
	#define cubeUV_r6 0.21
	#define cubeUV_v6 0.0038
	#define cubeUV_m6 4.0
	float roughnessToMip( float roughness ) {
		float mip = 0.0;
		if ( roughness >= cubeUV_r1 ) {
			mip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;
		} else if ( roughness >= cubeUV_r4 ) {
			mip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;
		} else if ( roughness >= cubeUV_r5 ) {
			mip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;
		} else if ( roughness >= cubeUV_r6 ) {
			mip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;
		} else {
			mip = - 2.0 * log2( 1.16 * roughness );		}
		return mip;
	}
	vec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {
		float mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );
		float mipF = fract( mip );
		float mipInt = floor( mip );
		vec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );
		if ( mipF == 0.0 ) {
			return vec4( color0, 1.0 );
		} else {
			vec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );
			return vec4( mix( color0, color1, mipF ), 1.0 );
		}
	}
#endif`,Ult=`vec3 transformedNormal = objectNormal;
#ifdef USE_INSTANCING
	mat3 m = mat3( instanceMatrix );
	transformedNormal /= vec3( dot( m[ 0 ], m[ 0 ] ), dot( m[ 1 ], m[ 1 ] ), dot( m[ 2 ], m[ 2 ] ) );
	transformedNormal = m * transformedNormal;
#endif
transformedNormal = normalMatrix * transformedNormal;
#ifdef FLIP_SIDED
	transformedNormal = - transformedNormal;
#endif
#ifdef USE_TANGENT
	vec3 transformedTangent = ( modelViewMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#ifdef FLIP_SIDED
		transformedTangent = - transformedTangent;
	#endif
#endif`,Glt=`#ifdef USE_DISPLACEMENTMAP
	uniform sampler2D displacementMap;
	uniform float displacementScale;
	uniform float displacementBias;
#endif`,jlt=`#ifdef USE_DISPLACEMENTMAP
	transformed += normalize( objectNormal ) * ( texture2D( displacementMap, vUv ).x * displacementScale + displacementBias );
#endif`,Wlt=`#ifdef USE_EMISSIVEMAP
	vec4 emissiveColor = texture2D( emissiveMap, vUv );
	totalEmissiveRadiance *= emissiveColor.rgb;
#endif`,qlt=`#ifdef USE_EMISSIVEMAP
	uniform sampler2D emissiveMap;
#endif`,Ylt="gl_FragColor = linearToOutputTexel( gl_FragColor );",Xlt=`vec4 LinearToLinear( in vec4 value ) {
	return value;
}
vec4 LinearTosRGB( in vec4 value ) {
	return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );
}`,Zlt=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vec3 cameraToFrag;
		if ( isOrthographic ) {
			cameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToFrag = normalize( vWorldPosition - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vec3 reflectVec = reflect( cameraToFrag, worldNormal );
		#else
			vec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );
		#endif
	#else
		vec3 reflectVec = vReflect;
	#endif
	#ifdef ENVMAP_TYPE_CUBE
		vec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );
	#else
		vec4 envColor = vec4( 0.0 );
	#endif
	#ifdef ENVMAP_BLENDING_MULTIPLY
		outgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_MIX )
		outgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_ADD )
		outgoingLight += envColor.xyz * specularStrength * reflectivity;
	#endif
#endif`,Qlt=`#ifdef USE_ENVMAP
	uniform float envMapIntensity;
	uniform float flipEnvMap;
	#ifdef ENVMAP_TYPE_CUBE
		uniform samplerCube envMap;
	#else
		uniform sampler2D envMap;
	#endif
	
#endif`,Klt=`#ifdef USE_ENVMAP
	uniform float reflectivity;
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		varying vec3 vWorldPosition;
		uniform float refractionRatio;
	#else
		varying vec3 vReflect;
	#endif
#endif`,Jlt=`#ifdef USE_ENVMAP
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		
		varying vec3 vWorldPosition;
	#else
		varying vec3 vReflect;
		uniform float refractionRatio;
	#endif
#endif`,$lt=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vWorldPosition = worldPosition.xyz;
	#else
		vec3 cameraToVertex;
		if ( isOrthographic ) {
			cameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToVertex = normalize( worldPosition.xyz - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vReflect = reflect( cameraToVertex, worldNormal );
		#else
			vReflect = refract( cameraToVertex, worldNormal, refractionRatio );
		#endif
	#endif
#endif`,eut=`#ifdef USE_FOG
	vFogDepth = - mvPosition.z;
#endif`,tut=`#ifdef USE_FOG
	varying float vFogDepth;
#endif`,rut=`#ifdef USE_FOG
	#ifdef FOG_EXP2
		float fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );
	#else
		float fogFactor = smoothstep( fogNear, fogFar, vFogDepth );
	#endif
	gl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );
#endif`,iut=`#ifdef USE_FOG
	uniform vec3 fogColor;
	varying float vFogDepth;
	#ifdef FOG_EXP2
		uniform float fogDensity;
	#else
		uniform float fogNear;
		uniform float fogFar;
	#endif
#endif`,nut=`#ifdef USE_GRADIENTMAP
	uniform sampler2D gradientMap;
#endif
vec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {
	float dotNL = dot( normal, lightDirection );
	vec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );
	#ifdef USE_GRADIENTMAP
		return vec3( texture2D( gradientMap, coord ).r );
	#else
		vec2 fw = fwidth( coord ) * 0.5;
		return mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );
	#endif
}`,aut=`#ifdef USE_LIGHTMAP
	vec4 lightMapTexel = texture2D( lightMap, vUv2 );
	vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
	reflectedLight.indirectDiffuse += lightMapIrradiance;
#endif`,out=`#ifdef USE_LIGHTMAP
	uniform sampler2D lightMap;
	uniform float lightMapIntensity;
#endif`,sut=`LambertMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularStrength = specularStrength;`,lut=`varying vec3 vViewPosition;
struct LambertMaterial {
	vec3 diffuseColor;
	float specularStrength;
};
void RE_Direct_Lambert( const in IncidentLight directLight, const in GeometricContext geometry, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometry.normal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in GeometricContext geometry, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Lambert
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Lambert`,uut=`uniform bool receiveShadow;
uniform vec3 ambientLightColor;
uniform vec3 lightProbe[ 9 ];
vec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {
	float x = normal.x, y = normal.y, z = normal.z;
	vec3 result = shCoefficients[ 0 ] * 0.886227;
	result += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;
	result += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;
	result += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;
	result += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;
	result += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;
	result += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );
	result += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;
	result += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );
	return result;
}
vec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {
	vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
	vec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );
	return irradiance;
}
vec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {
	vec3 irradiance = ambientLightColor;
	return irradiance;
}
float getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {
	#if defined ( PHYSICALLY_CORRECT_LIGHTS )
		float distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );
		if ( cutoffDistance > 0.0 ) {
			distanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );
		}
		return distanceFalloff;
	#else
		if ( cutoffDistance > 0.0 && decayExponent > 0.0 ) {
			return pow( saturate( - lightDistance / cutoffDistance + 1.0 ), decayExponent );
		}
		return 1.0;
	#endif
}
float getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {
	return smoothstep( coneCosine, penumbraCosine, angleCosine );
}
#if NUM_DIR_LIGHTS > 0
	struct DirectionalLight {
		vec3 direction;
		vec3 color;
	};
	uniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];
	void getDirectionalLightInfo( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight light ) {
		light.color = directionalLight.color;
		light.direction = directionalLight.direction;
		light.visible = true;
	}
#endif
#if NUM_POINT_LIGHTS > 0
	struct PointLight {
		vec3 position;
		vec3 color;
		float distance;
		float decay;
	};
	uniform PointLight pointLights[ NUM_POINT_LIGHTS ];
	void getPointLightInfo( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight light ) {
		vec3 lVector = pointLight.position - geometry.position;
		light.direction = normalize( lVector );
		float lightDistance = length( lVector );
		light.color = pointLight.color;
		light.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );
		light.visible = ( light.color != vec3( 0.0 ) );
	}
#endif
#if NUM_SPOT_LIGHTS > 0
	struct SpotLight {
		vec3 position;
		vec3 direction;
		vec3 color;
		float distance;
		float decay;
		float coneCos;
		float penumbraCos;
	};
	uniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];
	void getSpotLightInfo( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight light ) {
		vec3 lVector = spotLight.position - geometry.position;
		light.direction = normalize( lVector );
		float angleCos = dot( light.direction, spotLight.direction );
		float spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );
		if ( spotAttenuation > 0.0 ) {
			float lightDistance = length( lVector );
			light.color = spotLight.color * spotAttenuation;
			light.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );
			light.visible = ( light.color != vec3( 0.0 ) );
		} else {
			light.color = vec3( 0.0 );
			light.visible = false;
		}
	}
#endif
#if NUM_RECT_AREA_LIGHTS > 0
	struct RectAreaLight {
		vec3 color;
		vec3 position;
		vec3 halfWidth;
		vec3 halfHeight;
	};
	uniform sampler2D ltc_1;	uniform sampler2D ltc_2;
	uniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];
#endif
#if NUM_HEMI_LIGHTS > 0
	struct HemisphereLight {
		vec3 direction;
		vec3 skyColor;
		vec3 groundColor;
	};
	uniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];
	vec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {
		float dotNL = dot( normal, hemiLight.direction );
		float hemiDiffuseWeight = 0.5 * dotNL + 0.5;
		vec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );
		return irradiance;
	}
#endif`,cut=`#if defined( USE_ENVMAP )
	vec3 getIBLIrradiance( const in vec3 normal ) {
		#if defined( ENVMAP_TYPE_CUBE_UV )
			vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, worldNormal, 1.0 );
			return PI * envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	vec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {
		#if defined( ENVMAP_TYPE_CUBE_UV )
			vec3 reflectVec = reflect( - viewDir, normal );
			reflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );
			reflectVec = inverseTransformDirection( reflectVec, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, reflectVec, roughness );
			return envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
#endif`,hut=`ToonMaterial material;
material.diffuseColor = diffuseColor.rgb;`,dut=`varying vec3 vViewPosition;
struct ToonMaterial {
	vec3 diffuseColor;
};
void RE_Direct_Toon( const in IncidentLight directLight, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	vec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Toon
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Toon`,fut=`BlinnPhongMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularColor = specular;
material.specularShininess = shininess;
material.specularStrength = specularStrength;`,put=`varying vec3 vViewPosition;
struct BlinnPhongMaterial {
	vec3 diffuseColor;
	vec3 specularColor;
	float specularShininess;
	float specularStrength;
};
void RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometry.normal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
	reflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularShininess ) * material.specularStrength;
}
void RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_BlinnPhong
#define RE_IndirectDiffuse		RE_IndirectDiffuse_BlinnPhong`,vut=`PhysicalMaterial material;
material.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );
vec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );
float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );
material.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;
material.roughness = min( material.roughness, 1.0 );
#ifdef IOR
	material.ior = ior;
	#ifdef SPECULAR
		float specularIntensityFactor = specularIntensity;
		vec3 specularColorFactor = specularColor;
		#ifdef USE_SPECULARINTENSITYMAP
			specularIntensityFactor *= texture2D( specularIntensityMap, vUv ).a;
		#endif
		#ifdef USE_SPECULARCOLORMAP
			specularColorFactor *= texture2D( specularColorMap, vUv ).rgb;
		#endif
		material.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );
	#else
		float specularIntensityFactor = 1.0;
		vec3 specularColorFactor = vec3( 1.0 );
		material.specularF90 = 1.0;
	#endif
	material.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );
#else
	material.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );
	material.specularF90 = 1.0;
#endif
#ifdef USE_CLEARCOAT
	material.clearcoat = clearcoat;
	material.clearcoatRoughness = clearcoatRoughness;
	material.clearcoatF0 = vec3( 0.04 );
	material.clearcoatF90 = 1.0;
	#ifdef USE_CLEARCOATMAP
		material.clearcoat *= texture2D( clearcoatMap, vUv ).x;
	#endif
	#ifdef USE_CLEARCOAT_ROUGHNESSMAP
		material.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vUv ).y;
	#endif
	material.clearcoat = saturate( material.clearcoat );	material.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );
	material.clearcoatRoughness += geometryRoughness;
	material.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );
#endif
#ifdef USE_IRIDESCENCE
	material.iridescence = iridescence;
	material.iridescenceIOR = iridescenceIOR;
	#ifdef USE_IRIDESCENCEMAP
		material.iridescence *= texture2D( iridescenceMap, vUv ).r;
	#endif
	#ifdef USE_IRIDESCENCE_THICKNESSMAP
		material.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vUv ).g + iridescenceThicknessMinimum;
	#else
		material.iridescenceThickness = iridescenceThicknessMaximum;
	#endif
#endif
#ifdef USE_SHEEN
	material.sheenColor = sheenColor;
	#ifdef USE_SHEENCOLORMAP
		material.sheenColor *= texture2D( sheenColorMap, vUv ).rgb;
	#endif
	material.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );
	#ifdef USE_SHEENROUGHNESSMAP
		material.sheenRoughness *= texture2D( sheenRoughnessMap, vUv ).a;
	#endif
#endif`,mut=`struct PhysicalMaterial {
	vec3 diffuseColor;
	float roughness;
	vec3 specularColor;
	float specularF90;
	#ifdef USE_CLEARCOAT
		float clearcoat;
		float clearcoatRoughness;
		vec3 clearcoatF0;
		float clearcoatF90;
	#endif
	#ifdef USE_IRIDESCENCE
		float iridescence;
		float iridescenceIOR;
		float iridescenceThickness;
		vec3 iridescenceFresnel;
		vec3 iridescenceF0;
	#endif
	#ifdef USE_SHEEN
		vec3 sheenColor;
		float sheenRoughness;
	#endif
	#ifdef IOR
		float ior;
	#endif
	#ifdef USE_TRANSMISSION
		float transmission;
		float transmissionAlpha;
		float thickness;
		float attenuationDistance;
		vec3 attenuationColor;
	#endif
};
vec3 clearcoatSpecular = vec3( 0.0 );
vec3 sheenSpecular = vec3( 0.0 );
float IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	float r2 = roughness * roughness;
	float a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;
	float b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;
	float DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );
	return saturate( DG * RECIPROCAL_PI );
}
vec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	const vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );
	const vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );
	vec4 r = roughness * c0 + c1;
	float a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;
	vec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;
	return fab;
}
vec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	return specularColor * fab.x + specularF90 * fab.y;
}
#ifdef USE_IRIDESCENCE
void computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#else
void computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#endif
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	#ifdef USE_IRIDESCENCE
		vec3 Fr = mix( specularColor, iridescenceF0, iridescence );
	#else
		vec3 Fr = specularColor;
	#endif
	vec3 FssEss = Fr * fab.x + specularF90 * fab.y;
	float Ess = fab.x + fab.y;
	float Ems = 1.0 - Ess;
	vec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;	vec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );
	singleScatter += FssEss;
	multiScatter += Fms * Ems;
}
#if NUM_RECT_AREA_LIGHTS > 0
	void RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
		vec3 normal = geometry.normal;
		vec3 viewDir = geometry.viewDir;
		vec3 position = geometry.position;
		vec3 lightPos = rectAreaLight.position;
		vec3 halfWidth = rectAreaLight.halfWidth;
		vec3 halfHeight = rectAreaLight.halfHeight;
		vec3 lightColor = rectAreaLight.color;
		float roughness = material.roughness;
		vec3 rectCoords[ 4 ];
		rectCoords[ 0 ] = lightPos + halfWidth - halfHeight;		rectCoords[ 1 ] = lightPos - halfWidth - halfHeight;
		rectCoords[ 2 ] = lightPos - halfWidth + halfHeight;
		rectCoords[ 3 ] = lightPos + halfWidth + halfHeight;
		vec2 uv = LTC_Uv( normal, viewDir, roughness );
		vec4 t1 = texture2D( ltc_1, uv );
		vec4 t2 = texture2D( ltc_2, uv );
		mat3 mInv = mat3(
			vec3( t1.x, 0, t1.y ),
			vec3(    0, 1,    0 ),
			vec3( t1.z, 0, t1.w )
		);
		vec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );
		reflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );
		reflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );
	}
#endif
void RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometry.normal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	#ifdef USE_CLEARCOAT
		float dotNLcc = saturate( dot( geometry.clearcoatNormal, directLight.direction ) );
		vec3 ccIrradiance = dotNLcc * directLight.color;
		clearcoatSpecular += ccIrradiance * BRDF_GGX( directLight.direction, geometry.viewDir, geometry.clearcoatNormal, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
	#endif
	#ifdef USE_SHEEN
		sheenSpecular += irradiance * BRDF_Sheen( directLight.direction, geometry.viewDir, geometry.normal, material.sheenColor, material.sheenRoughness );
	#endif
	#ifdef USE_IRIDESCENCE
		reflectedLight.directSpecular += irradiance * BRDF_GGX_Iridescence( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness );
	#else
		reflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularF90, material.roughness );
	#endif
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {
	#ifdef USE_CLEARCOAT
		clearcoatSpecular += clearcoatRadiance * EnvironmentBRDF( geometry.clearcoatNormal, geometry.viewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
	#endif
	#ifdef USE_SHEEN
		sheenSpecular += irradiance * material.sheenColor * IBLSheenBRDF( geometry.normal, geometry.viewDir, material.sheenRoughness );
	#endif
	vec3 singleScattering = vec3( 0.0 );
	vec3 multiScattering = vec3( 0.0 );
	vec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;
	#ifdef USE_IRIDESCENCE
		computeMultiscatteringIridescence( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );
	#else
		computeMultiscattering( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );
	#endif
	vec3 totalScattering = singleScattering + multiScattering;
	vec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );
	reflectedLight.indirectSpecular += radiance * singleScattering;
	reflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;
	reflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;
}
#define RE_Direct				RE_Direct_Physical
#define RE_Direct_RectArea		RE_Direct_RectArea_Physical
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Physical
#define RE_IndirectSpecular		RE_IndirectSpecular_Physical
float computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {
	return saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );
}`,gut=`
GeometricContext geometry;
geometry.position = - vViewPosition;
geometry.normal = normal;
geometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );
#ifdef USE_CLEARCOAT
	geometry.clearcoatNormal = clearcoatNormal;
#endif
#ifdef USE_IRIDESCENCE
	float dotNVi = saturate( dot( normal, geometry.viewDir ) );
	if ( material.iridescenceThickness == 0.0 ) {
		material.iridescence = 0.0;
	} else {
		material.iridescence = saturate( material.iridescence );
	}
	if ( material.iridescence > 0.0 ) {
		material.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );
		material.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );
	}
#endif
IncidentLight directLight;
#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )
	PointLight pointLight;
	#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		pointLight = pointLights[ i ];
		getPointLightInfo( pointLight, geometry, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )
		pointLightShadow = pointLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )
	SpotLight spotLight;
	vec4 spotColor;
	vec3 spotLightCoord;
	bool inSpotLightMap;
	#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		spotLight = spotLights[ i ];
		getSpotLightInfo( spotLight, geometry, directLight );
		#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX
		#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS
		#else
		#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#endif
		#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )
			spotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;
			inSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );
			spotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );
			directLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;
		#endif
		#undef SPOT_LIGHT_MAP_INDEX
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		spotLightShadow = spotLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )
	DirectionalLight directionalLight;
	#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		directionalLight = directionalLights[ i ];
		getDirectionalLightInfo( directionalLight, geometry, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )
		directionalLightShadow = directionalLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )
	RectAreaLight rectAreaLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {
		rectAreaLight = rectAreaLights[ i ];
		RE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if defined( RE_IndirectDiffuse )
	vec3 iblIrradiance = vec3( 0.0 );
	vec3 irradiance = getAmbientLightIrradiance( ambientLightColor );
	irradiance += getLightProbeIrradiance( lightProbe, geometry.normal );
	#if ( NUM_HEMI_LIGHTS > 0 )
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
			irradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry.normal );
		}
		#pragma unroll_loop_end
	#endif
#endif
#if defined( RE_IndirectSpecular )
	vec3 radiance = vec3( 0.0 );
	vec3 clearcoatRadiance = vec3( 0.0 );
#endif`,yut=`#if defined( RE_IndirectDiffuse )
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vUv2 );
		vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
		irradiance += lightMapIrradiance;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )
		iblIrradiance += getIBLIrradiance( geometry.normal );
	#endif
#endif
#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )
	radiance += getIBLRadiance( geometry.viewDir, geometry.normal, material.roughness );
	#ifdef USE_CLEARCOAT
		clearcoatRadiance += getIBLRadiance( geometry.viewDir, geometry.clearcoatNormal, material.clearcoatRoughness );
	#endif
#endif`,xut=`#if defined( RE_IndirectDiffuse )
	RE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );
#endif
#if defined( RE_IndirectSpecular )
	RE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometry, material, reflectedLight );
#endif`,but=`#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )
	gl_FragDepthEXT = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;
#endif`,wut=`#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )
	uniform float logDepthBufFC;
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,_ut=`#ifdef USE_LOGDEPTHBUF
	#ifdef USE_LOGDEPTHBUF_EXT
		varying float vFragDepth;
		varying float vIsPerspective;
	#else
		uniform float logDepthBufFC;
	#endif
#endif`,Aut=`#ifdef USE_LOGDEPTHBUF
	#ifdef USE_LOGDEPTHBUF_EXT
		vFragDepth = 1.0 + gl_Position.w;
		vIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );
	#else
		if ( isPerspectiveMatrix( projectionMatrix ) ) {
			gl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;
			gl_Position.z *= gl_Position.w;
		}
	#endif
#endif`,Sut=`#ifdef USE_MAP
	vec4 sampledDiffuseColor = texture2D( map, vUv );
	#ifdef DECODE_VIDEO_TEXTURE
		sampledDiffuseColor = vec4( mix( pow( sampledDiffuseColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), sampledDiffuseColor.rgb * 0.0773993808, vec3( lessThanEqual( sampledDiffuseColor.rgb, vec3( 0.04045 ) ) ) ), sampledDiffuseColor.w );
	#endif
	diffuseColor *= sampledDiffuseColor;
#endif`,Cut=`#ifdef USE_MAP
	uniform sampler2D map;
#endif`,Eut=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	vec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;
#endif
#ifdef USE_MAP
	diffuseColor *= texture2D( map, uv );
#endif
#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, uv ).g;
#endif`,Mut=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	uniform mat3 uvTransform;
#endif
#ifdef USE_MAP
	uniform sampler2D map;
#endif
#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,Tut=`float metalnessFactor = metalness;
#ifdef USE_METALNESSMAP
	vec4 texelMetalness = texture2D( metalnessMap, vUv );
	metalnessFactor *= texelMetalness.b;
#endif`,Put=`#ifdef USE_METALNESSMAP
	uniform sampler2D metalnessMap;
#endif`,Dut=`#if defined( USE_MORPHCOLORS ) && defined( MORPHTARGETS_TEXTURE )
	vColor *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		#if defined( USE_COLOR_ALPHA )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];
		#elif defined( USE_COLOR )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];
		#endif
	}
#endif`,Iut=`#ifdef USE_MORPHNORMALS
	objectNormal *= morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
			if ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];
		}
	#else
		objectNormal += morphNormal0 * morphTargetInfluences[ 0 ];
		objectNormal += morphNormal1 * morphTargetInfluences[ 1 ];
		objectNormal += morphNormal2 * morphTargetInfluences[ 2 ];
		objectNormal += morphNormal3 * morphTargetInfluences[ 3 ];
	#endif
#endif`,Lut=`#ifdef USE_MORPHTARGETS
	uniform float morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		uniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];
		uniform sampler2DArray morphTargetsTexture;
		uniform ivec2 morphTargetsTextureSize;
		vec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {
			int texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;
			int y = texelIndex / morphTargetsTextureSize.x;
			int x = texelIndex - y * morphTargetsTextureSize.x;
			ivec3 morphUV = ivec3( x, y, morphTargetIndex );
			return texelFetch( morphTargetsTexture, morphUV, 0 );
		}
	#else
		#ifndef USE_MORPHNORMALS
			uniform float morphTargetInfluences[ 8 ];
		#else
			uniform float morphTargetInfluences[ 4 ];
		#endif
	#endif
#endif`,kut=`#ifdef USE_MORPHTARGETS
	transformed *= morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
			if ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];
		}
	#else
		transformed += morphTarget0 * morphTargetInfluences[ 0 ];
		transformed += morphTarget1 * morphTargetInfluences[ 1 ];
		transformed += morphTarget2 * morphTargetInfluences[ 2 ];
		transformed += morphTarget3 * morphTargetInfluences[ 3 ];
		#ifndef USE_MORPHNORMALS
			transformed += morphTarget4 * morphTargetInfluences[ 4 ];
			transformed += morphTarget5 * morphTargetInfluences[ 5 ];
			transformed += morphTarget6 * morphTargetInfluences[ 6 ];
			transformed += morphTarget7 * morphTargetInfluences[ 7 ];
		#endif
	#endif
#endif`,Rut=`float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;
#ifdef FLAT_SHADED
	vec3 fdx = dFdx( vViewPosition );
	vec3 fdy = dFdy( vViewPosition );
	vec3 normal = normalize( cross( fdx, fdy ) );
#else
	vec3 normal = normalize( vNormal );
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	#ifdef USE_TANGENT
		vec3 tangent = normalize( vTangent );
		vec3 bitangent = normalize( vBitangent );
		#ifdef DOUBLE_SIDED
			tangent = tangent * faceDirection;
			bitangent = bitangent * faceDirection;
		#endif
		#if defined( TANGENTSPACE_NORMALMAP ) || defined( USE_CLEARCOAT_NORMALMAP )
			mat3 vTBN = mat3( tangent, bitangent, normal );
		#endif
	#endif
#endif
vec3 geometryNormal = normal;`,Out=`#ifdef OBJECTSPACE_NORMALMAP
	normal = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;
	#ifdef FLIP_SIDED
		normal = - normal;
	#endif
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	normal = normalize( normalMatrix * normal );
#elif defined( TANGENTSPACE_NORMALMAP )
	vec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;
	mapN.xy *= normalScale;
	#ifdef USE_TANGENT
		normal = normalize( vTBN * mapN );
	#else
		normal = perturbNormal2Arb( - vViewPosition, normal, mapN, faceDirection );
	#endif
#elif defined( USE_BUMPMAP )
	normal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );
#endif`,But=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,Nut=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,Vut=`#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
	#ifdef USE_TANGENT
		vTangent = normalize( transformedTangent );
		vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );
	#endif
#endif`,Fut=`#ifdef USE_NORMALMAP
	uniform sampler2D normalMap;
	uniform vec2 normalScale;
#endif
#ifdef OBJECTSPACE_NORMALMAP
	uniform mat3 normalMatrix;
#endif
#if ! defined ( USE_TANGENT ) && ( defined ( TANGENTSPACE_NORMALMAP ) || defined ( USE_CLEARCOAT_NORMALMAP ) )
	vec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm, vec3 mapN, float faceDirection ) {
		vec3 q0 = dFdx( eye_pos.xyz );
		vec3 q1 = dFdy( eye_pos.xyz );
		vec2 st0 = dFdx( vUv.st );
		vec2 st1 = dFdy( vUv.st );
		vec3 N = surf_norm;
		vec3 q1perp = cross( q1, N );
		vec3 q0perp = cross( N, q0 );
		vec3 T = q1perp * st0.x + q0perp * st1.x;
		vec3 B = q1perp * st0.y + q0perp * st1.y;
		float det = max( dot( T, T ), dot( B, B ) );
		float scale = ( det == 0.0 ) ? 0.0 : faceDirection * inversesqrt( det );
		return normalize( T * ( mapN.x * scale ) + B * ( mapN.y * scale ) + N * mapN.z );
	}
#endif`,zut=`#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal = geometryNormal;
#endif`,Hut=`#ifdef USE_CLEARCOAT_NORMALMAP
	vec3 clearcoatMapN = texture2D( clearcoatNormalMap, vUv ).xyz * 2.0 - 1.0;
	clearcoatMapN.xy *= clearcoatNormalScale;
	#ifdef USE_TANGENT
		clearcoatNormal = normalize( vTBN * clearcoatMapN );
	#else
		clearcoatNormal = perturbNormal2Arb( - vViewPosition, clearcoatNormal, clearcoatMapN, faceDirection );
	#endif
#endif`,Uut=`#ifdef USE_CLEARCOATMAP
	uniform sampler2D clearcoatMap;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform sampler2D clearcoatRoughnessMap;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform sampler2D clearcoatNormalMap;
	uniform vec2 clearcoatNormalScale;
#endif`,Gut=`#ifdef USE_IRIDESCENCEMAP
	uniform sampler2D iridescenceMap;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform sampler2D iridescenceThicknessMap;
#endif`,jut=`#ifdef OPAQUE
diffuseColor.a = 1.0;
#endif
#ifdef USE_TRANSMISSION
diffuseColor.a *= material.transmissionAlpha + 0.1;
#endif
gl_FragColor = vec4( outgoingLight, diffuseColor.a );`,Wut=`vec3 packNormalToRGB( const in vec3 normal ) {
	return normalize( normal ) * 0.5 + 0.5;
}
vec3 unpackRGBToNormal( const in vec3 rgb ) {
	return 2.0 * rgb.xyz - 1.0;
}
const float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;
const vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256., 256. );
const vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );
const float ShiftRight8 = 1. / 256.;
vec4 packDepthToRGBA( const in float v ) {
	vec4 r = vec4( fract( v * PackFactors ), v );
	r.yzw -= r.xyz * ShiftRight8;	return r * PackUpscale;
}
float unpackRGBAToDepth( const in vec4 v ) {
	return dot( v, UnpackFactors );
}
vec2 packDepthToRG( in highp float v ) {
	return packDepthToRGBA( v ).yx;
}
float unpackRGToDepth( const in highp vec2 v ) {
	return unpackRGBAToDepth( vec4( v.xy, 0.0, 0.0 ) );
}
vec4 pack2HalfToRGBA( vec2 v ) {
	vec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );
	return vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );
}
vec2 unpackRGBATo2Half( vec4 v ) {
	return vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );
}
float viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {
	return ( viewZ + near ) / ( near - far );
}
float orthographicDepthToViewZ( const in float linearClipZ, const in float near, const in float far ) {
	return linearClipZ * ( near - far ) - near;
}
float viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {
	return ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );
}
float perspectiveDepthToViewZ( const in float invClipZ, const in float near, const in float far ) {
	return ( near * far ) / ( ( far - near ) * invClipZ - far );
}`,qut=`#ifdef PREMULTIPLIED_ALPHA
	gl_FragColor.rgb *= gl_FragColor.a;
#endif`,Yut=`vec4 mvPosition = vec4( transformed, 1.0 );
#ifdef USE_INSTANCING
	mvPosition = instanceMatrix * mvPosition;
#endif
mvPosition = modelViewMatrix * mvPosition;
gl_Position = projectionMatrix * mvPosition;`,Xut=`#ifdef DITHERING
	gl_FragColor.rgb = dithering( gl_FragColor.rgb );
#endif`,Zut=`#ifdef DITHERING
	vec3 dithering( vec3 color ) {
		float grid_position = rand( gl_FragCoord.xy );
		vec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );
		dither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );
		return color + dither_shift_RGB;
	}
#endif`,Qut=`float roughnessFactor = roughness;
#ifdef USE_ROUGHNESSMAP
	vec4 texelRoughness = texture2D( roughnessMap, vUv );
	roughnessFactor *= texelRoughness.g;
#endif`,Kut=`#ifdef USE_ROUGHNESSMAP
	uniform sampler2D roughnessMap;
#endif`,Jut=`#if NUM_SPOT_LIGHT_COORDS > 0
  varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#if NUM_SPOT_LIGHT_MAPS > 0
  uniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		uniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];
		struct SpotLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
	float texture2DCompare( sampler2D depths, vec2 uv, float compare ) {
		return step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );
	}
	vec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {
		return unpackRGBATo2Half( texture2D( shadow, uv ) );
	}
	float VSMShadow (sampler2D shadow, vec2 uv, float compare ){
		float occlusion = 1.0;
		vec2 distribution = texture2DDistribution( shadow, uv );
		float hard_shadow = step( compare , distribution.x );
		if (hard_shadow != 1.0 ) {
			float distance = compare - distribution.x ;
			float variance = max( 0.00000, distribution.y * distribution.y );
			float softness_probability = variance / (variance + distance * distance );			softness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );			occlusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );
		}
		return occlusion;
	}
	float getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
		float shadow = 1.0;
		shadowCoord.xyz /= shadowCoord.w;
		shadowCoord.z += shadowBias;
		bool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;
		bool frustumTest = inFrustum && shadowCoord.z <= 1.0;
		if ( frustumTest ) {
		#if defined( SHADOWMAP_TYPE_PCF )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx0 = - texelSize.x * shadowRadius;
			float dy0 = - texelSize.y * shadowRadius;
			float dx1 = + texelSize.x * shadowRadius;
			float dy1 = + texelSize.y * shadowRadius;
			float dx2 = dx0 / 2.0;
			float dy2 = dy0 / 2.0;
			float dx3 = dx1 / 2.0;
			float dy3 = dy1 / 2.0;
			shadow = (
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )
			) * ( 1.0 / 17.0 );
		#elif defined( SHADOWMAP_TYPE_PCF_SOFT )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx = texelSize.x;
			float dy = texelSize.y;
			vec2 uv = shadowCoord.xy;
			vec2 f = fract( uv * shadowMapSize + 0.5 );
			uv -= f * texelSize;
			shadow = (
				texture2DCompare( shadowMap, uv, shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),
						  f.x ),
					 mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),
						  f.x ),
					 f.y )
			) * ( 1.0 / 9.0 );
		#elif defined( SHADOWMAP_TYPE_VSM )
			shadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );
		#else
			shadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );
		#endif
		}
		return shadow;
	}
	vec2 cubeToUV( vec3 v, float texelSizeY ) {
		vec3 absV = abs( v );
		float scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );
		absV *= scaleToCube;
		v *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );
		vec2 planar = v.xy;
		float almostATexel = 1.5 * texelSizeY;
		float almostOne = 1.0 - almostATexel;
		if ( absV.z >= almostOne ) {
			if ( v.z > 0.0 )
				planar.x = 4.0 - v.x;
		} else if ( absV.x >= almostOne ) {
			float signX = sign( v.x );
			planar.x = v.z * signX + 2.0 * signX;
		} else if ( absV.y >= almostOne ) {
			float signY = sign( v.y );
			planar.x = v.x + 2.0 * signY + 2.0;
			planar.y = v.z * signY - 2.0;
		}
		return vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );
	}
	float getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {
		vec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );
		vec3 lightToPosition = shadowCoord.xyz;
		float dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );		dp += shadowBias;
		vec3 bd3D = normalize( lightToPosition );
		#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )
			vec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;
			return (
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )
			) * ( 1.0 / 9.0 );
		#else
			return texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );
		#endif
	}
#endif`,$ut=`#if NUM_SPOT_LIGHT_COORDS > 0
  uniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];
  varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		struct SpotLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
#endif`,ect=`#if ( defined( USE_SHADOWMAP ) && ( NUM_DIR_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0 ) ) || ( NUM_SPOT_LIGHT_COORDS > 0 )
	vec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
	vec4 shadowWorldPosition;
#endif
#if defined( USE_SHADOWMAP )
	#if NUM_DIR_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );
			vDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );
			vPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
#endif
#if NUM_SPOT_LIGHT_COORDS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {
		shadowWorldPosition = worldPosition;
		#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
			shadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;
		#endif
		vSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
#endif`,tct=`float getShadowMask() {
	float shadow = 1.0;
	#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		directionalLight = directionalLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		spotLight = spotLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		pointLight = pointLightShadows[ i ];
		shadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#endif
	return shadow;
}`,rct=`#ifdef USE_SKINNING
	mat4 boneMatX = getBoneMatrix( skinIndex.x );
	mat4 boneMatY = getBoneMatrix( skinIndex.y );
	mat4 boneMatZ = getBoneMatrix( skinIndex.z );
	mat4 boneMatW = getBoneMatrix( skinIndex.w );
#endif`,ict=`#ifdef USE_SKINNING
	uniform mat4 bindMatrix;
	uniform mat4 bindMatrixInverse;
	uniform highp sampler2D boneTexture;
	uniform int boneTextureSize;
	mat4 getBoneMatrix( const in float i ) {
		float j = i * 4.0;
		float x = mod( j, float( boneTextureSize ) );
		float y = floor( j / float( boneTextureSize ) );
		float dx = 1.0 / float( boneTextureSize );
		float dy = 1.0 / float( boneTextureSize );
		y = dy * ( y + 0.5 );
		vec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );
		vec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );
		vec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );
		vec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );
		mat4 bone = mat4( v1, v2, v3, v4 );
		return bone;
	}
#endif`,nct=`#ifdef USE_SKINNING
	vec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );
	vec4 skinned = vec4( 0.0 );
	skinned += boneMatX * skinVertex * skinWeight.x;
	skinned += boneMatY * skinVertex * skinWeight.y;
	skinned += boneMatZ * skinVertex * skinWeight.z;
	skinned += boneMatW * skinVertex * skinWeight.w;
	transformed = ( bindMatrixInverse * skinned ).xyz;
#endif`,act=`#ifdef USE_SKINNING
	mat4 skinMatrix = mat4( 0.0 );
	skinMatrix += skinWeight.x * boneMatX;
	skinMatrix += skinWeight.y * boneMatY;
	skinMatrix += skinWeight.z * boneMatZ;
	skinMatrix += skinWeight.w * boneMatW;
	skinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;
	objectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;
	#ifdef USE_TANGENT
		objectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#endif
#endif`,oct=`float specularStrength;
#ifdef USE_SPECULARMAP
	vec4 texelSpecular = texture2D( specularMap, vUv );
	specularStrength = texelSpecular.r;
#else
	specularStrength = 1.0;
#endif`,sct=`#ifdef USE_SPECULARMAP
	uniform sampler2D specularMap;
#endif`,lct=`#if defined( TONE_MAPPING )
	gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );
#endif`,uct=`#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
uniform float toneMappingExposure;
vec3 LinearToneMapping( vec3 color ) {
	return toneMappingExposure * color;
}
vec3 ReinhardToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	return saturate( color / ( vec3( 1.0 ) + color ) );
}
vec3 OptimizedCineonToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	color = max( vec3( 0.0 ), color - 0.004 );
	return pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );
}
vec3 RRTAndODTFit( vec3 v ) {
	vec3 a = v * ( v + 0.0245786 ) - 0.000090537;
	vec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;
	return a / b;
}
vec3 ACESFilmicToneMapping( vec3 color ) {
	const mat3 ACESInputMat = mat3(
		vec3( 0.59719, 0.07600, 0.02840 ),		vec3( 0.35458, 0.90834, 0.13383 ),
		vec3( 0.04823, 0.01566, 0.83777 )
	);
	const mat3 ACESOutputMat = mat3(
		vec3(  1.60475, -0.10208, -0.00327 ),		vec3( -0.53108,  1.10813, -0.07276 ),
		vec3( -0.07367, -0.00605,  1.07602 )
	);
	color *= toneMappingExposure / 0.6;
	color = ACESInputMat * color;
	color = RRTAndODTFit( color );
	color = ACESOutputMat * color;
	return saturate( color );
}
vec3 CustomToneMapping( vec3 color ) { return color; }`,cct=`#ifdef USE_TRANSMISSION
	material.transmission = transmission;
	material.transmissionAlpha = 1.0;
	material.thickness = thickness;
	material.attenuationDistance = attenuationDistance;
	material.attenuationColor = attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		material.transmission *= texture2D( transmissionMap, vUv ).r;
	#endif
	#ifdef USE_THICKNESSMAP
		material.thickness *= texture2D( thicknessMap, vUv ).g;
	#endif
	vec3 pos = vWorldPosition;
	vec3 v = normalize( cameraPosition - pos );
	vec3 n = inverseTransformDirection( normal, viewMatrix );
	vec4 transmission = getIBLVolumeRefraction(
		n, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,
		pos, modelMatrix, viewMatrix, projectionMatrix, material.ior, material.thickness,
		material.attenuationColor, material.attenuationDistance );
	material.transmissionAlpha = mix( material.transmissionAlpha, transmission.a, material.transmission );
	totalDiffuse = mix( totalDiffuse, transmission.rgb, material.transmission );
#endif`,hct=`#ifdef USE_TRANSMISSION
	uniform float transmission;
	uniform float thickness;
	uniform float attenuationDistance;
	uniform vec3 attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		uniform sampler2D transmissionMap;
	#endif
	#ifdef USE_THICKNESSMAP
		uniform sampler2D thicknessMap;
	#endif
	uniform vec2 transmissionSamplerSize;
	uniform sampler2D transmissionSamplerMap;
	uniform mat4 modelMatrix;
	uniform mat4 projectionMatrix;
	varying vec3 vWorldPosition;
	vec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {
		vec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );
		vec3 modelScale;
		modelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );
		modelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );
		modelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );
		return normalize( refractionVector ) * thickness * modelScale;
	}
	float applyIorToRoughness( const in float roughness, const in float ior ) {
		return roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );
	}
	vec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {
		float framebufferLod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );
		#ifdef texture2DLodEXT
			return texture2DLodEXT( transmissionSamplerMap, fragCoord.xy, framebufferLod );
		#else
			return texture2D( transmissionSamplerMap, fragCoord.xy, framebufferLod );
		#endif
	}
	vec3 applyVolumeAttenuation( const in vec3 radiance, const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {
		if ( isinf( attenuationDistance ) ) {
			return radiance;
		} else {
			vec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;
			vec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );			return transmittance * radiance;
		}
	}
	vec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,
		const in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,
		const in mat4 viewMatrix, const in mat4 projMatrix, const in float ior, const in float thickness,
		const in vec3 attenuationColor, const in float attenuationDistance ) {
		vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );
		vec3 refractedRayExit = position + transmissionRay;
		vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
		vec2 refractionCoords = ndcPos.xy / ndcPos.w;
		refractionCoords += 1.0;
		refractionCoords /= 2.0;
		vec4 transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );
		vec3 attenuatedColor = applyVolumeAttenuation( transmittedLight.rgb, length( transmissionRay ), attenuationColor, attenuationDistance );
		vec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );
		return vec4( ( 1.0 - F ) * attenuatedColor * diffuseColor, transmittedLight.a );
	}
#endif`,dct=`#if ( defined( USE_UV ) && ! defined( UVS_VERTEX_ONLY ) )
	varying vec2 vUv;
#endif`,fct=`#ifdef USE_UV
	#ifdef UVS_VERTEX_ONLY
		vec2 vUv;
	#else
		varying vec2 vUv;
	#endif
	uniform mat3 uvTransform;
#endif`,pct=`#ifdef USE_UV
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
#endif`,vct=`#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )
	varying vec2 vUv2;
#endif`,mct=`#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )
	attribute vec2 uv2;
	varying vec2 vUv2;
	uniform mat3 uv2Transform;
#endif`,gct=`#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )
	vUv2 = ( uv2Transform * vec3( uv2, 1 ) ).xy;
#endif`,yct=`#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0
	vec4 worldPosition = vec4( transformed, 1.0 );
	#ifdef USE_INSTANCING
		worldPosition = instanceMatrix * worldPosition;
	#endif
	worldPosition = modelMatrix * worldPosition;
#endif`,xct=`varying vec2 vUv;
uniform mat3 uvTransform;
void main() {
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	gl_Position = vec4( position.xy, 1.0, 1.0 );
}`,bct=`uniform sampler2D t2D;
uniform float backgroundIntensity;
varying vec2 vUv;
void main() {
	vec4 texColor = texture2D( t2D, vUv );
	#ifdef DECODE_VIDEO_TEXTURE
		texColor = vec4( mix( pow( texColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), texColor.rgb * 0.0773993808, vec3( lessThanEqual( texColor.rgb, vec3( 0.04045 ) ) ) ), texColor.w );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,wct=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,_ct=`#ifdef ENVMAP_TYPE_CUBE
	uniform samplerCube envMap;
#elif defined( ENVMAP_TYPE_CUBE_UV )
	uniform sampler2D envMap;
#endif
uniform float flipEnvMap;
uniform float backgroundBlurriness;
uniform float backgroundIntensity;
varying vec3 vWorldDirection;
#include <cube_uv_reflection_fragment>
void main() {
	#ifdef ENVMAP_TYPE_CUBE
		vec4 texColor = textureCube( envMap, vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );
	#elif defined( ENVMAP_TYPE_CUBE_UV )
		vec4 texColor = textureCubeUV( envMap, vWorldDirection, backgroundBlurriness );
	#else
		vec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,Act=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,Sct=`uniform samplerCube tCube;
uniform float tFlip;
uniform float opacity;
varying vec3 vWorldDirection;
void main() {
	vec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );
	gl_FragColor = texColor;
	gl_FragColor.a *= opacity;
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,Cct=`#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
varying vec2 vHighPrecisionZW;
void main() {
	#include <uv_vertex>
	#include <skinbase_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vHighPrecisionZW = gl_Position.zw;
}`,Ect=`#if DEPTH_PACKING == 3200
	uniform float opacity;
#endif
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
varying vec2 vHighPrecisionZW;
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( 1.0 );
	#if DEPTH_PACKING == 3200
		diffuseColor.a = opacity;
	#endif
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <logdepthbuf_fragment>
	float fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;
	#if DEPTH_PACKING == 3200
		gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );
	#elif DEPTH_PACKING == 3201
		gl_FragColor = packDepthToRGBA( fragCoordZ );
	#endif
}`,Mct=`#define DISTANCE
varying vec3 vWorldPosition;
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <skinbase_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <clipping_planes_vertex>
	vWorldPosition = worldPosition.xyz;
}`,Tct=`#define DISTANCE
uniform vec3 referencePosition;
uniform float nearDistance;
uniform float farDistance;
varying vec3 vWorldPosition;
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <clipping_planes_pars_fragment>
void main () {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( 1.0 );
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	float dist = length( vWorldPosition - referencePosition );
	dist = ( dist - nearDistance ) / ( farDistance - nearDistance );
	dist = saturate( dist );
	gl_FragColor = packDepthToRGBA( dist );
}`,Pct=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
}`,Dct=`uniform sampler2D tEquirect;
varying vec3 vWorldDirection;
#include <common>
void main() {
	vec3 direction = normalize( vWorldDirection );
	vec2 sampleUV = equirectUv( direction );
	gl_FragColor = texture2D( tEquirect, sampleUV );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,Ict=`uniform float scale;
attribute float lineDistance;
varying float vLineDistance;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	vLineDistance = scale * lineDistance;
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,Lct=`uniform vec3 diffuse;
uniform float opacity;
uniform float dashSize;
uniform float totalSize;
varying float vLineDistance;
#include <common>
#include <color_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	if ( mod( vLineDistance, totalSize ) > dashSize ) {
		discard;
	}
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <color_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,kct=`#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinbase_vertex>
		#include <skinnormal_vertex>
		#include <defaultnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <fog_vertex>
}`,Rct=`uniform vec3 diffuse;
uniform float opacity;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <specularmap_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vUv2 );
		reflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;
	#else
		reflectedLight.indirectDiffuse += vec3( 1.0 );
	#endif
	#include <aomap_fragment>
	reflectedLight.indirectDiffuse *= diffuseColor.rgb;
	vec3 outgoingLight = reflectedLight.indirectDiffuse;
	#include <envmap_fragment>
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,Oct=`#define LAMBERT
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,Bct=`#define LAMBERT
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_lambert_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_lambert_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,Nct=`#define MATCAP
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <displacementmap_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
	vViewPosition = - mvPosition.xyz;
}`,Vct=`#define MATCAP
uniform vec3 diffuse;
uniform float opacity;
uniform sampler2D matcap;
varying vec3 vViewPosition;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <fog_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	vec3 viewDir = normalize( vViewPosition );
	vec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );
	vec3 y = cross( viewDir, x );
	vec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;
	#ifdef USE_MATCAP
		vec4 matcapColor = texture2D( matcap, uv );
	#else
		vec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );
	#endif
	vec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,Fct=`#define NORMAL
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )
	varying vec3 vViewPosition;
#endif
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )
	vViewPosition = - mvPosition.xyz;
#endif
}`,zct=`#define NORMAL
uniform float opacity;
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )
	varying vec3 vViewPosition;
#endif
#include <packing>
#include <uv_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	gl_FragColor = vec4( packNormalToRGB( normal ), opacity );
	#ifdef OPAQUE
		gl_FragColor.a = 1.0;
	#endif
}`,Hct=`#define PHONG
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,Uct=`#define PHONG
uniform vec3 diffuse;
uniform vec3 emissive;
uniform vec3 specular;
uniform float shininess;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_phong_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_phong_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,Gct=`#define STANDARD
varying vec3 vViewPosition;
#ifdef USE_TRANSMISSION
	varying vec3 vWorldPosition;
#endif
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
#ifdef USE_TRANSMISSION
	vWorldPosition = worldPosition.xyz;
#endif
}`,jct=`#define STANDARD
#ifdef PHYSICAL
	#define IOR
	#define SPECULAR
#endif
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float roughness;
uniform float metalness;
uniform float opacity;
#ifdef IOR
	uniform float ior;
#endif
#ifdef SPECULAR
	uniform float specularIntensity;
	uniform vec3 specularColor;
	#ifdef USE_SPECULARINTENSITYMAP
		uniform sampler2D specularIntensityMap;
	#endif
	#ifdef USE_SPECULARCOLORMAP
		uniform sampler2D specularColorMap;
	#endif
#endif
#ifdef USE_CLEARCOAT
	uniform float clearcoat;
	uniform float clearcoatRoughness;
#endif
#ifdef USE_IRIDESCENCE
	uniform float iridescence;
	uniform float iridescenceIOR;
	uniform float iridescenceThicknessMinimum;
	uniform float iridescenceThicknessMaximum;
#endif
#ifdef USE_SHEEN
	uniform vec3 sheenColor;
	uniform float sheenRoughness;
	#ifdef USE_SHEENCOLORMAP
		uniform sampler2D sheenColorMap;
	#endif
	#ifdef USE_SHEENROUGHNESSMAP
		uniform sampler2D sheenRoughnessMap;
	#endif
#endif
varying vec3 vViewPosition;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <bsdfs>
#include <iridescence_fragment>
#include <cube_uv_reflection_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_physical_pars_fragment>
#include <fog_pars_fragment>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_physical_pars_fragment>
#include <transmission_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <clearcoat_pars_fragment>
#include <iridescence_pars_fragment>
#include <roughnessmap_pars_fragment>
#include <metalnessmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <roughnessmap_fragment>
	#include <metalnessmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <clearcoat_normal_fragment_begin>
	#include <clearcoat_normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_physical_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;
	vec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;
	#include <transmission_fragment>
	vec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;
	#ifdef USE_SHEEN
		float sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );
		outgoingLight = outgoingLight * sheenEnergyComp + sheenSpecular;
	#endif
	#ifdef USE_CLEARCOAT
		float dotNVcc = saturate( dot( geometry.clearcoatNormal, geometry.viewDir ) );
		vec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );
		outgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + clearcoatSpecular * material.clearcoat;
	#endif
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,Wct=`#define TOON
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,qct=`#define TOON
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <gradientmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_toon_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_toon_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,Yct=`uniform float size;
uniform float scale;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	gl_PointSize = size;
	#ifdef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );
	#endif
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <fog_vertex>
}`,Xct=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <color_pars_fragment>
#include <map_particle_pars_fragment>
#include <alphatest_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_particle_fragment>
	#include <color_fragment>
	#include <alphatest_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,Zct=`#include <common>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
void main() {
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,Qct=`uniform vec3 color;
uniform float opacity;
#include <common>
#include <packing>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
void main() {
	gl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
}`,Kct=`uniform float rotation;
uniform vec2 center;
#include <common>
#include <uv_pars_vertex>
#include <fog_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	vec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );
	vec2 scale;
	scale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );
	scale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );
	#ifndef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) scale *= - mvPosition.z;
	#endif
	vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;
	vec2 rotatedPosition;
	rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
	rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
	mvPosition.xy += rotatedPosition;
	gl_Position = projectionMatrix * mvPosition;
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,Jct=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
}`,xr={alphamap_fragment:wlt,alphamap_pars_fragment:_lt,alphatest_fragment:Alt,alphatest_pars_fragment:Slt,aomap_fragment:Clt,aomap_pars_fragment:Elt,begin_vertex:Mlt,beginnormal_vertex:Tlt,bsdfs:Plt,iridescence_fragment:Dlt,bumpmap_pars_fragment:Ilt,clipping_planes_fragment:Llt,clipping_planes_pars_fragment:klt,clipping_planes_pars_vertex:Rlt,clipping_planes_vertex:Olt,color_fragment:Blt,color_pars_fragment:Nlt,color_pars_vertex:Vlt,color_vertex:Flt,common:zlt,cube_uv_reflection_fragment:Hlt,defaultnormal_vertex:Ult,displacementmap_pars_vertex:Glt,displacementmap_vertex:jlt,emissivemap_fragment:Wlt,emissivemap_pars_fragment:qlt,encodings_fragment:Ylt,encodings_pars_fragment:Xlt,envmap_fragment:Zlt,envmap_common_pars_fragment:Qlt,envmap_pars_fragment:Klt,envmap_pars_vertex:Jlt,envmap_physical_pars_fragment:cut,envmap_vertex:$lt,fog_vertex:eut,fog_pars_vertex:tut,fog_fragment:rut,fog_pars_fragment:iut,gradientmap_pars_fragment:nut,lightmap_fragment:aut,lightmap_pars_fragment:out,lights_lambert_fragment:sut,lights_lambert_pars_fragment:lut,lights_pars_begin:uut,lights_toon_fragment:hut,lights_toon_pars_fragment:dut,lights_phong_fragment:fut,lights_phong_pars_fragment:put,lights_physical_fragment:vut,lights_physical_pars_fragment:mut,lights_fragment_begin:gut,lights_fragment_maps:yut,lights_fragment_end:xut,logdepthbuf_fragment:but,logdepthbuf_pars_fragment:wut,logdepthbuf_pars_vertex:_ut,logdepthbuf_vertex:Aut,map_fragment:Sut,map_pars_fragment:Cut,map_particle_fragment:Eut,map_particle_pars_fragment:Mut,metalnessmap_fragment:Tut,metalnessmap_pars_fragment:Put,morphcolor_vertex:Dut,morphnormal_vertex:Iut,morphtarget_pars_vertex:Lut,morphtarget_vertex:kut,normal_fragment_begin:Rut,normal_fragment_maps:Out,normal_pars_fragment:But,normal_pars_vertex:Nut,normal_vertex:Vut,normalmap_pars_fragment:Fut,clearcoat_normal_fragment_begin:zut,clearcoat_normal_fragment_maps:Hut,clearcoat_pars_fragment:Uut,iridescence_pars_fragment:Gut,output_fragment:jut,packing:Wut,premultiplied_alpha_fragment:qut,project_vertex:Yut,dithering_fragment:Xut,dithering_pars_fragment:Zut,roughnessmap_fragment:Qut,roughnessmap_pars_fragment:Kut,shadowmap_pars_fragment:Jut,shadowmap_pars_vertex:$ut,shadowmap_vertex:ect,shadowmask_pars_fragment:tct,skinbase_vertex:rct,skinning_pars_vertex:ict,skinning_vertex:nct,skinnormal_vertex:act,specularmap_fragment:oct,specularmap_pars_fragment:sct,tonemapping_fragment:lct,tonemapping_pars_fragment:uct,transmission_fragment:cct,transmission_pars_fragment:hct,uv_pars_fragment:dct,uv_pars_vertex:fct,uv_vertex:pct,uv2_pars_fragment:vct,uv2_pars_vertex:mct,uv2_vertex:gct,worldpos_vertex:yct,background_vert:xct,background_frag:bct,backgroundCube_vert:wct,backgroundCube_frag:_ct,cube_vert:Act,cube_frag:Sct,depth_vert:Cct,depth_frag:Ect,distanceRGBA_vert:Mct,distanceRGBA_frag:Tct,equirect_vert:Pct,equirect_frag:Dct,linedashed_vert:Ict,linedashed_frag:Lct,meshbasic_vert:kct,meshbasic_frag:Rct,meshlambert_vert:Oct,meshlambert_frag:Bct,meshmatcap_vert:Nct,meshmatcap_frag:Vct,meshnormal_vert:Fct,meshnormal_frag:zct,meshphong_vert:Hct,meshphong_frag:Uct,meshphysical_vert:Gct,meshphysical_frag:jct,meshtoon_vert:Wct,meshtoon_frag:qct,points_vert:Yct,points_frag:Xct,shadow_vert:Zct,shadow_frag:Qct,sprite_vert:Kct,sprite_frag:Jct},st={common:{diffuse:{value:new Vt(16777215)},opacity:{value:1},map:{value:null},uvTransform:{value:new Bn},uv2Transform:{value:new Bn},alphaMap:{value:null},alphaTest:{value:0}},specularmap:{specularMap:{value:null}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1}},emissivemap:{emissiveMap:{value:null}},bumpmap:{bumpMap:{value:null},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalScale:{value:new me(1,1)}},displacementmap:{displacementMap:{value:null},displacementScale:{value:1},displacementBias:{value:0}},roughnessmap:{roughnessMap:{value:null}},metalnessmap:{metalnessMap:{value:null}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new Vt(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new Vt(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaTest:{value:0},uvTransform:{value:new Bn}},sprite:{diffuse:{value:new Vt(16777215)},opacity:{value:1},center:{value:new me(.5,.5)},rotation:{value:0},map:{value:null},alphaMap:{value:null},alphaTest:{value:0},uvTransform:{value:new Bn}}},xc={basic:{uniforms:Ro([st.common,st.specularmap,st.envmap,st.aomap,st.lightmap,st.fog]),vertexShader:xr.meshbasic_vert,fragmentShader:xr.meshbasic_frag},lambert:{uniforms:Ro([st.common,st.specularmap,st.envmap,st.aomap,st.lightmap,st.emissivemap,st.bumpmap,st.normalmap,st.displacementmap,st.fog,st.lights,{emissive:{value:new Vt(0)}}]),vertexShader:xr.meshlambert_vert,fragmentShader:xr.meshlambert_frag},phong:{uniforms:Ro([st.common,st.specularmap,st.envmap,st.aomap,st.lightmap,st.emissivemap,st.bumpmap,st.normalmap,st.displacementmap,st.fog,st.lights,{emissive:{value:new Vt(0)},specular:{value:new Vt(1118481)},shininess:{value:30}}]),vertexShader:xr.meshphong_vert,fragmentShader:xr.meshphong_frag},standard:{uniforms:Ro([st.common,st.envmap,st.aomap,st.lightmap,st.emissivemap,st.bumpmap,st.normalmap,st.displacementmap,st.roughnessmap,st.metalnessmap,st.fog,st.lights,{emissive:{value:new Vt(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:xr.meshphysical_vert,fragmentShader:xr.meshphysical_frag},toon:{uniforms:Ro([st.common,st.aomap,st.lightmap,st.emissivemap,st.bumpmap,st.normalmap,st.displacementmap,st.gradientmap,st.fog,st.lights,{emissive:{value:new Vt(0)}}]),vertexShader:xr.meshtoon_vert,fragmentShader:xr.meshtoon_frag},matcap:{uniforms:Ro([st.common,st.bumpmap,st.normalmap,st.displacementmap,st.fog,{matcap:{value:null}}]),vertexShader:xr.meshmatcap_vert,fragmentShader:xr.meshmatcap_frag},points:{uniforms:Ro([st.points,st.fog]),vertexShader:xr.points_vert,fragmentShader:xr.points_frag},dashed:{uniforms:Ro([st.common,st.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:xr.linedashed_vert,fragmentShader:xr.linedashed_frag},depth:{uniforms:Ro([st.common,st.displacementmap]),vertexShader:xr.depth_vert,fragmentShader:xr.depth_frag},normal:{uniforms:Ro([st.common,st.bumpmap,st.normalmap,st.displacementmap,{opacity:{value:1}}]),vertexShader:xr.meshnormal_vert,fragmentShader:xr.meshnormal_frag},sprite:{uniforms:Ro([st.sprite,st.fog]),vertexShader:xr.sprite_vert,fragmentShader:xr.sprite_frag},background:{uniforms:{uvTransform:{value:new Bn},t2D:{value:null},backgroundIntensity:{value:1}},vertexShader:xr.background_vert,fragmentShader:xr.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0},backgroundIntensity:{value:1}},vertexShader:xr.backgroundCube_vert,fragmentShader:xr.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:xr.cube_vert,fragmentShader:xr.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:xr.equirect_vert,fragmentShader:xr.equirect_frag},distanceRGBA:{uniforms:Ro([st.common,st.displacementmap,{referencePosition:{value:new U},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:xr.distanceRGBA_vert,fragmentShader:xr.distanceRGBA_frag},shadow:{uniforms:Ro([st.lights,st.fog,{color:{value:new Vt(0)},opacity:{value:1}}]),vertexShader:xr.shadow_vert,fragmentShader:xr.shadow_frag}};xc.physical={uniforms:Ro([xc.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatNormalScale:{value:new me(1,1)},clearcoatNormalMap:{value:null},iridescence:{value:0},iridescenceMap:{value:null},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},sheen:{value:0},sheenColor:{value:new Vt(0)},sheenColorMap:{value:null},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},transmission:{value:0},transmissionMap:{value:null},transmissionSamplerSize:{value:new me},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},attenuationDistance:{value:0},attenuationColor:{value:new Vt(0)},specularIntensity:{value:1},specularIntensityMap:{value:null},specularColor:{value:new Vt(1,1,1)},specularColorMap:{value:null}}]),vertexShader:xr.meshphysical_vert,fragmentShader:xr.meshphysical_frag};var Y_={r:0,b:0,g:0};function $ct(e,t,r,i,n,a,o){let s=new Vt(0),l=a===!0?0:1,u,c,h=null,d=0,f=null;function p(m,g){let y=!1,x=g.isScene===!0?g.background:null;x&&x.isTexture&&(x=(g.backgroundBlurriness>0?r:t).get(x));let b=e.xr,_=b.getSession&&b.getSession();_&&_.environmentBlendMode==="additive"&&(x=null),x===null?v(s,l):x&&x.isColor&&(v(x,1),y=!0),(e.autoClear||y)&&e.clear(e.autoClearColor,e.autoClearDepth,e.autoClearStencil),x&&(x.isCubeTexture||x.mapping===V4)?(c===void 0&&(c=new nn(new Ru(1,1,1),new ai({name:"BackgroundCubeMaterial",uniforms:$1(xc.backgroundCube.uniforms),vertexShader:xc.backgroundCube.vertexShader,fragmentShader:xc.backgroundCube.fragmentShader,side:ba,depthTest:!1,depthWrite:!1,fog:!1})),c.geometry.deleteAttribute("normal"),c.geometry.deleteAttribute("uv"),c.onBeforeRender=function(w,S,A){this.matrixWorld.copyPosition(A.matrixWorld)},Object.defineProperty(c.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),n.update(c)),c.material.uniforms.envMap.value=x,c.material.uniforms.flipEnvMap.value=x.isCubeTexture&&x.isRenderTargetTexture===!1?-1:1,c.material.uniforms.backgroundBlurriness.value=g.backgroundBlurriness,c.material.uniforms.backgroundIntensity.value=g.backgroundIntensity,c.material.toneMapped=x.encoding!==pr,(h!==x||d!==x.version||f!==e.toneMapping)&&(c.material.needsUpdate=!0,h=x,d=x.version,f=e.toneMapping),c.layers.enableAll(),m.unshift(c,c.geometry,c.material,0,0,null)):x&&x.isTexture&&(u===void 0&&(u=new nn(new Md(2,2),new ai({name:"BackgroundMaterial",uniforms:$1(xc.background.uniforms),vertexShader:xc.background.vertexShader,fragmentShader:xc.background.fragmentShader,side:Lu,depthTest:!1,depthWrite:!1,fog:!1})),u.geometry.deleteAttribute("normal"),Object.defineProperty(u.material,"map",{get:function(){return this.uniforms.t2D.value}}),n.update(u)),u.material.uniforms.t2D.value=x,u.material.uniforms.backgroundIntensity.value=g.backgroundIntensity,u.material.toneMapped=x.encoding!==pr,x.matrixAutoUpdate===!0&&x.updateMatrix(),u.material.uniforms.uvTransform.value.copy(x.matrix),(h!==x||d!==x.version||f!==e.toneMapping)&&(u.material.needsUpdate=!0,h=x,d=x.version,f=e.toneMapping),u.layers.enableAll(),m.unshift(u,u.geometry,u.material,0,0,null))}function v(m,g){m.getRGB(Y_,Yve(e)),i.buffers.color.setClear(Y_.r,Y_.g,Y_.b,g,o)}return{getClearColor:function(){return s},setClearColor:function(m,g=1){s.set(m),l=g,v(s,l)},getClearAlpha:function(){return l},setClearAlpha:function(m){l=m,v(s,l)},render:p}}function eht(e,t,r,i){let n=e.getParameter(34921),a=i.isWebGL2?null:t.get("OES_vertex_array_object"),o=i.isWebGL2||a!==null,s={},l=m(null),u=l,c=!1;function h(C,D,I,O,R){let H=!1;if(o){let j=v(O,I,D);u!==j&&(u=j,f(u.object)),H=g(C,O,I,R),H&&y(C,O,I,R)}else{let j=D.wireframe===!0;(u.geometry!==O.id||u.program!==I.id||u.wireframe!==j)&&(u.geometry=O.id,u.program=I.id,u.wireframe=j,H=!0)}R!==null&&r.update(R,34963),(H||c)&&(c=!1,A(C,D,I,O),R!==null&&e.bindBuffer(34963,r.get(R).buffer))}function d(){return i.isWebGL2?e.createVertexArray():a.createVertexArrayOES()}function f(C){return i.isWebGL2?e.bindVertexArray(C):a.bindVertexArrayOES(C)}function p(C){return i.isWebGL2?e.deleteVertexArray(C):a.deleteVertexArrayOES(C)}function v(C,D,I){let O=I.wireframe===!0,R=s[C.id];R===void 0&&(R={},s[C.id]=R);let H=R[D.id];H===void 0&&(H={},R[D.id]=H);let j=H[O];return j===void 0&&(j=m(d()),H[O]=j),j}function m(C){let D=[],I=[],O=[];for(let R=0;R<n;R++)D[R]=0,I[R]=0,O[R]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:D,enabledAttributes:I,attributeDivisors:O,object:C,attributes:{},index:null}}function g(C,D,I,O){let R=u.attributes,H=D.attributes,j=0,N=I.getAttributes();for(let k in N)if(N[k].location>=0){let G=R[k],Y=H[k];if(Y===void 0&&(k==="instanceMatrix"&&C.instanceMatrix&&(Y=C.instanceMatrix),k==="instanceColor"&&C.instanceColor&&(Y=C.instanceColor)),G===void 0||G.attribute!==Y||Y&&G.data!==Y.data)return!0;j++}return u.attributesNum!==j||u.index!==O}function y(C,D,I,O){let R={},H=D.attributes,j=0,N=I.getAttributes();for(let k in N)if(N[k].location>=0){let G=H[k];G===void 0&&(k==="instanceMatrix"&&C.instanceMatrix&&(G=C.instanceMatrix),k==="instanceColor"&&C.instanceColor&&(G=C.instanceColor));let Y={};Y.attribute=G,G&&G.data&&(Y.data=G.data),R[k]=Y,j++}u.attributes=R,u.attributesNum=j,u.index=O}function x(){let C=u.newAttributes;for(let D=0,I=C.length;D<I;D++)C[D]=0}function b(C){_(C,0)}function _(C,D){let I=u.newAttributes,O=u.enabledAttributes,R=u.attributeDivisors;I[C]=1,O[C]===0&&(e.enableVertexAttribArray(C),O[C]=1),R[C]!==D&&((i.isWebGL2?e:t.get("ANGLE_instanced_arrays"))[i.isWebGL2?"vertexAttribDivisor":"vertexAttribDivisorANGLE"](C,D),R[C]=D)}function w(){let C=u.newAttributes,D=u.enabledAttributes;for(let I=0,O=D.length;I<O;I++)D[I]!==C[I]&&(e.disableVertexAttribArray(I),D[I]=0)}function S(C,D,I,O,R,H){i.isWebGL2===!0&&(I===5124||I===5125)?e.vertexAttribIPointer(C,D,I,R,H):e.vertexAttribPointer(C,D,I,O,R,H)}function A(C,D,I,O){if(i.isWebGL2===!1&&(C.isInstancedMesh||O.isInstancedBufferGeometry)&&t.get("ANGLE_instanced_arrays")===null)return;x();let R=O.attributes,H=I.getAttributes(),j=D.defaultAttributeValues;for(let N in H){let k=H[N];if(k.location>=0){let G=R[N];if(G===void 0&&(N==="instanceMatrix"&&C.instanceMatrix&&(G=C.instanceMatrix),N==="instanceColor"&&C.instanceColor&&(G=C.instanceColor)),G!==void 0){let Y=G.normalized,F=G.itemSize,Z=r.get(G);if(Z===void 0)continue;let ne=Z.buffer,re=Z.type,ae=Z.bytesPerElement;if(G.isInterleavedBufferAttribute){let he=G.data,se=he.stride,fe=G.offset;if(he.isInstancedInterleavedBuffer){for(let J=0;J<k.locationSize;J++)_(k.location+J,he.meshPerAttribute);C.isInstancedMesh!==!0&&O._maxInstanceCount===void 0&&(O._maxInstanceCount=he.meshPerAttribute*he.count)}else for(let J=0;J<k.locationSize;J++)b(k.location+J);e.bindBuffer(34962,ne);for(let J=0;J<k.locationSize;J++)S(k.location+J,F/k.locationSize,re,Y,se*ae,(fe+F/k.locationSize*J)*ae)}else{if(G.isInstancedBufferAttribute){for(let he=0;he<k.locationSize;he++)_(k.location+he,G.meshPerAttribute);C.isInstancedMesh!==!0&&O._maxInstanceCount===void 0&&(O._maxInstanceCount=G.meshPerAttribute*G.count)}else for(let he=0;he<k.locationSize;he++)b(k.location+he);e.bindBuffer(34962,ne);for(let he=0;he<k.locationSize;he++)S(k.location+he,F/k.locationSize,re,Y,F*ae,F/k.locationSize*he*ae)}}else if(j!==void 0){let Y=j[N];if(Y!==void 0)switch(Y.length){case 2:e.vertexAttrib2fv(k.location,Y);break;case 3:e.vertexAttrib3fv(k.location,Y);break;case 4:e.vertexAttrib4fv(k.location,Y);break;default:e.vertexAttrib1fv(k.location,Y)}}}}w()}function M(){L();for(let C in s){let D=s[C];for(let I in D){let O=D[I];for(let R in O)p(O[R].object),delete O[R];delete D[I]}delete s[C]}}function E(C){if(s[C.id]===void 0)return;let D=s[C.id];for(let I in D){let O=D[I];for(let R in O)p(O[R].object),delete O[R];delete D[I]}delete s[C.id]}function T(C){for(let D in s){let I=s[D];if(I[C.id]===void 0)continue;let O=I[C.id];for(let R in O)p(O[R].object),delete O[R];delete I[C.id]}}function L(){P(),c=!0,u!==l&&(u=l,f(u.object))}function P(){l.geometry=null,l.program=null,l.wireframe=!1}return{setup:h,reset:L,resetDefaultState:P,dispose:M,releaseStatesOfGeometry:E,releaseStatesOfProgram:T,initAttributes:x,enableAttribute:b,disableUnusedAttributes:w}}function tht(e,t,r,i){let n=i.isWebGL2,a;function o(u){a=u}function s(u,c){e.drawArrays(a,u,c),r.update(c,a,1)}function l(u,c,h){if(h===0)return;let d,f;if(n)d=e,f="drawArraysInstanced";else if(d=t.get("ANGLE_instanced_arrays"),f="drawArraysInstancedANGLE",d===null){console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}d[f](a,u,c,h),r.update(c,a,h)}this.setMode=o,this.render=s,this.renderInstances=l}function rht(e,t,r){let i;function n(){if(i!==void 0)return i;if(t.has("EXT_texture_filter_anisotropic")===!0){let S=t.get("EXT_texture_filter_anisotropic");i=e.getParameter(S.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else i=0;return i}function a(S){if(S==="highp"){if(e.getShaderPrecisionFormat(35633,36338).precision>0&&e.getShaderPrecisionFormat(35632,36338).precision>0)return"highp";S="mediump"}return S==="mediump"&&e.getShaderPrecisionFormat(35633,36337).precision>0&&e.getShaderPrecisionFormat(35632,36337).precision>0?"mediump":"lowp"}let o=typeof WebGL2RenderingContext<"u"&&e instanceof WebGL2RenderingContext,s=r.precision!==void 0?r.precision:"highp",l=a(s);l!==s&&(console.warn("THREE.WebGLRenderer:",s,"not supported, using",l,"instead."),s=l);let u=o||t.has("WEBGL_draw_buffers"),c=r.logarithmicDepthBuffer===!0,h=e.getParameter(34930),d=e.getParameter(35660),f=e.getParameter(3379),p=e.getParameter(34076),v=e.getParameter(34921),m=e.getParameter(36347),g=e.getParameter(36348),y=e.getParameter(36349),x=d>0,b=o||t.has("OES_texture_float"),_=x&&b,w=o?e.getParameter(36183):0;return{isWebGL2:o,drawBuffers:u,getMaxAnisotropy:n,getMaxPrecision:a,precision:s,logarithmicDepthBuffer:c,maxTextures:h,maxVertexTextures:d,maxTextureSize:f,maxCubemapSize:p,maxAttributes:v,maxVertexUniforms:m,maxVaryings:g,maxFragmentUniforms:y,vertexTextures:x,floatFragmentTextures:b,floatVertexTextures:_,maxSamples:w}}function iht(e){let t=this,r=null,i=0,n=!1,a=!1,o=new hs,s=new Bn,l={value:null,needsUpdate:!1};this.uniform=l,this.numPlanes=0,this.numIntersection=0,this.init=function(h,d){let f=h.length!==0||d||i!==0||n;return n=d,i=h.length,f},this.beginShadows=function(){a=!0,c(null)},this.endShadows=function(){a=!1},this.setGlobalState=function(h,d){r=c(h,d,0)},this.setState=function(h,d,f){let p=h.clippingPlanes,v=h.clipIntersection,m=h.clipShadows,g=e.get(h);if(!n||p===null||p.length===0||a&&!m)a?c(null):u();else{let y=a?0:i,x=y*4,b=g.clippingState||null;l.value=b,b=c(p,d,x,f);for(let _=0;_!==x;++_)b[_]=r[_];g.clippingState=b,this.numIntersection=v?this.numPlanes:0,this.numPlanes+=y}};function u(){l.value!==r&&(l.value=r,l.needsUpdate=i>0),t.numPlanes=i,t.numIntersection=0}function c(h,d,f,p){let v=h!==null?h.length:0,m=null;if(v!==0){if(m=l.value,p!==!0||m===null){let g=f+v*4,y=d.matrixWorldInverse;s.getNormalMatrix(y),(m===null||m.length<g)&&(m=new Float32Array(g));for(let x=0,b=f;x!==v;++x,b+=4)o.copy(h[x]).applyMatrix4(y,s),o.normal.toArray(m,b),m[b+3]=o.constant}l.value=m,l.needsUpdate=!0}return t.numPlanes=v,t.numIntersection=0,m}}function nht(e){let t=new WeakMap;function r(o,s){return s===oR?o.mapping=jv:s===sR&&(o.mapping=Wv),o}function i(o){if(o&&o.isTexture&&o.isRenderTargetTexture===!1){let s=o.mapping;if(s===oR||s===sR)if(t.has(o)){let l=t.get(o).texture;return r(l,o.mapping)}else{let l=o.image;if(l&&l.height>0){let u=new glt(l.height/2);return u.fromEquirectangularTexture(e,o),t.set(o,u),o.addEventListener("dispose",n),r(u.texture,o.mapping)}else return null}}return o}function n(o){let s=o.target;s.removeEventListener("dispose",n);let l=t.get(s);l!==void 0&&(t.delete(s),l.dispose())}function a(){t=new WeakMap}return{get:i,dispose:a}}var x7=class extends cm{constructor(e=-1,t=1,r=1,i=-1,n=.1,a=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=t,this.top=r,this.bottom=i,this.near=n,this.far=a,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=e.view===null?null:Object.assign({},e.view),this}setViewOffset(e,t,r,i,n,a){this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=r,this.view.offsetY=i,this.view.width=n,this.view.height=a,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){let e=(this.right-this.left)/(2*this.zoom),t=(this.top-this.bottom)/(2*this.zoom),r=(this.right+this.left)/2,i=(this.top+this.bottom)/2,n=r-e,a=r+e,o=i+t,s=i-t;if(this.view!==null&&this.view.enabled){let l=(this.right-this.left)/this.view.fullWidth/this.zoom,u=(this.top-this.bottom)/this.view.fullHeight/this.zoom;n+=l*this.view.offsetX,a=n+l*this.view.width,o-=u*this.view.offsetY,s=o-u*this.view.height}this.projectionMatrix.makeOrthographic(n,a,o,s,this.near,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){let t=super.toJSON(e);return t.object.zoom=this.zoom,t.object.left=this.left,t.object.right=this.right,t.object.top=this.top,t.object.bottom=this.bottom,t.object.near=this.near,t.object.far=this.far,this.view!==null&&(t.object.view=Object.assign({},this.view)),t}},Zg=4,i$=[.125,.215,.35,.446,.526,.582],B0=20,_P=new x7,n$=new Vt,AP=null,T0=(1+Math.sqrt(5))/2,ig=1/T0,a$=[new U(1,1,1),new U(-1,1,1),new U(1,1,-1),new U(-1,1,-1),new U(0,T0,ig),new U(0,T0,-ig),new U(ig,0,T0),new U(-ig,0,T0),new U(T0,ig,0),new U(-T0,ig,0)],o$=class{constructor(e){this._renderer=e,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(e,t=0,r=.1,i=100){AP=this._renderer.getRenderTarget(),this._setSize(256);let n=this._allocateTargets();return n.depthBuffer=!0,this._sceneToCubeUV(e,r,i,n),t>0&&this._blur(n,0,0,t),this._applyPMREM(n),this._cleanup(n),n}fromEquirectangular(e,t=null){return this._fromTexture(e,t)}fromCubemap(e,t=null){return this._fromTexture(e,t)}compileCubemapShader(){this._cubemapMaterial===null&&(this._cubemapMaterial=u$(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){this._equirectMaterial===null&&(this._equirectMaterial=l$(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),this._cubemapMaterial!==null&&this._cubemapMaterial.dispose(),this._equirectMaterial!==null&&this._equirectMaterial.dispose()}_setSize(e){this._lodMax=Math.floor(Math.log2(e)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){this._blurMaterial!==null&&this._blurMaterial.dispose(),this._pingPongRenderTarget!==null&&this._pingPongRenderTarget.dispose();for(let e=0;e<this._lodPlanes.length;e++)this._lodPlanes[e].dispose()}_cleanup(e){this._renderer.setRenderTarget(AP),e.scissorTest=!1,X_(e,0,0,e.width,e.height)}_fromTexture(e,t){e.mapping===jv||e.mapping===Wv?this._setSize(e.image.length===0?16:e.image[0].width||e.image[0].image.width):this._setSize(e.image.width/4),AP=this._renderer.getRenderTarget();let r=t||this._allocateTargets();return this._textureToCubeUV(e,r),this._applyPMREM(r),this._cleanup(r),r}_allocateTargets(){let e=3*Math.max(this._cubeSize,112),t=4*this._cubeSize,r={magFilter:br,minFilter:br,generateMipmaps:!1,type:Cd,format:ga,encoding:ku,depthBuffer:!1},i=s$(e,t,r);if(this._pingPongRenderTarget===null||this._pingPongRenderTarget.width!==e||this._pingPongRenderTarget.height!==t){this._pingPongRenderTarget!==null&&this._dispose(),this._pingPongRenderTarget=s$(e,t,r);let{_lodMax:n}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=aht(n)),this._blurMaterial=oht(n,e,t)}return i}_compileMaterial(e){let t=new nn(this._lodPlanes[0],e);this._renderer.compile(t,_P)}_sceneToCubeUV(e,t,r,i){let n=new fo(90,1,t,r),a=[1,-1,1,1,1,1],o=[1,1,1,-1,-1,-1],s=this._renderer,l=s.autoClear,u=s.toneMapping;s.getClearColor(n$),s.toneMapping=Gc,s.autoClear=!1;let c=new Ed({name:"PMREM.Background",side:ba,depthWrite:!1,depthTest:!1}),h=new nn(new Ru,c),d=!1,f=e.background;f?f.isColor&&(c.color.copy(f),e.background=null,d=!0):(c.color.copy(n$),d=!0);for(let p=0;p<6;p++){let v=p%3;v===0?(n.up.set(0,a[p],0),n.lookAt(o[p],0,0)):v===1?(n.up.set(0,0,a[p]),n.lookAt(0,o[p],0)):(n.up.set(0,a[p],0),n.lookAt(0,0,o[p]));let m=this._cubeSize;X_(i,v*m,p>2?m:0,m,m),s.setRenderTarget(i),d&&s.render(h,n),s.render(e,n)}h.geometry.dispose(),h.material.dispose(),s.toneMapping=u,s.autoClear=l,e.background=f}_textureToCubeUV(e,t){let r=this._renderer,i=e.mapping===jv||e.mapping===Wv;i?(this._cubemapMaterial===null&&(this._cubemapMaterial=u$()),this._cubemapMaterial.uniforms.flipEnvMap.value=e.isRenderTargetTexture===!1?-1:1):this._equirectMaterial===null&&(this._equirectMaterial=l$());let n=i?this._cubemapMaterial:this._equirectMaterial,a=new nn(this._lodPlanes[0],n),o=n.uniforms;o.envMap.value=e;let s=this._cubeSize;X_(t,0,0,3*s,2*s),r.setRenderTarget(t),r.render(a,_P)}_applyPMREM(e){let t=this._renderer,r=t.autoClear;t.autoClear=!1;for(let i=1;i<this._lodPlanes.length;i++){let n=Math.sqrt(this._sigmas[i]*this._sigmas[i]-this._sigmas[i-1]*this._sigmas[i-1]),a=a$[(i-1)%a$.length];this._blur(e,i-1,i,n,a)}t.autoClear=r}_blur(e,t,r,i,n){let a=this._pingPongRenderTarget;this._halfBlur(e,a,t,r,i,"latitudinal",n),this._halfBlur(a,e,r,r,i,"longitudinal",n)}_halfBlur(e,t,r,i,n,a,o){let s=this._renderer,l=this._blurMaterial;a!=="latitudinal"&&a!=="longitudinal"&&console.error("blur direction must be either latitudinal or longitudinal!");let u=3,c=new nn(this._lodPlanes[i],l),h=l.uniforms,d=this._sizeLods[r]-1,f=isFinite(n)?Math.PI/(2*d):2*Math.PI/(2*B0-1),p=n/f,v=isFinite(n)?1+Math.floor(u*p):B0;v>B0&&console.warn(`sigmaRadians, ${n}, is too large and will clip, as it requested ${v} samples when the maximum is set to ${B0}`);let m=[],g=0;for(let w=0;w<B0;++w){let S=w/p,A=Math.exp(-S*S/2);m.push(A),w===0?g+=A:w<v&&(g+=2*A)}for(let w=0;w<m.length;w++)m[w]=m[w]/g;h.envMap.value=e.texture,h.samples.value=v,h.weights.value=m,h.latitudinal.value=a==="latitudinal",o&&(h.poleAxis.value=o);let{_lodMax:y}=this;h.dTheta.value=f,h.mipInt.value=y-r;let x=this._sizeLods[i],b=3*x*(i>y-Zg?i-y+Zg:0),_=4*(this._cubeSize-x);X_(t,b,_,3*x,2*x),s.setRenderTarget(t),s.render(c,_P)}};function aht(e){let t=[],r=[],i=[],n=e,a=e-Zg+1+i$.length;for(let o=0;o<a;o++){let s=Math.pow(2,n);r.push(s);let l=1/s;o>e-Zg?l=i$[o-e+Zg-1]:o===0&&(l=0),i.push(l);let u=1/(s-2),c=-u,h=1+u,d=[c,c,h,c,h,h,c,c,h,h,c,h],f=6,p=6,v=3,m=2,g=1,y=new Float32Array(v*p*f),x=new Float32Array(m*p*f),b=new Float32Array(g*p*f);for(let w=0;w<f;w++){let S=w%3*2/3-1,A=w>2?0:-1,M=[S,A,0,S+2/3,A,0,S+2/3,A+1,0,S,A,0,S+2/3,A+1,0,S,A+1,0];y.set(M,v*p*w),x.set(d,m*p*w);let E=[w,w,w,w,w,w];b.set(E,g*p*w)}let _=new It;_.setAttribute("position",new Zt(y,v)),_.setAttribute("uv",new Zt(x,m)),_.setAttribute("faceIndex",new Zt(b,g)),t.push(_),n>Zg&&n--}return{lodPlanes:t,sizeLods:r,sigmas:i}}function s$(e,t,r){let i=new ui(e,t,r);return i.texture.mapping=V4,i.texture.name="PMREM.cubeUv",i.scissorTest=!0,i}function X_(e,t,r,i,n){e.viewport.set(t,r,i,n),e.scissor.set(t,r,i,n)}function oht(e,t,r){let i=new Float32Array(B0),n=new U(0,1,0);return new ai({name:"SphericalGaussianBlur",defines:{n:B0,CUBEUV_TEXEL_WIDTH:1/t,CUBEUV_TEXEL_HEIGHT:1/r,CUBEUV_MAX_MIP:`${e}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:i},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:n}},vertexShader:az(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;
			uniform int samples;
			uniform float weights[ n ];
			uniform bool latitudinal;
			uniform float dTheta;
			uniform float mipInt;
			uniform vec3 poleAxis;

			#define ENVMAP_TYPE_CUBE_UV
			#include <cube_uv_reflection_fragment>

			vec3 getSample( float theta, vec3 axis ) {

				float cosTheta = cos( theta );
				// Rodrigues' axis-angle rotation
				vec3 sampleDirection = vOutputDirection * cosTheta
					+ cross( axis, vOutputDirection ) * sin( theta )
					+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );

				return bilinearCubeUV( envMap, sampleDirection, mipInt );

			}

			void main() {

				vec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );

				if ( all( equal( axis, vec3( 0.0 ) ) ) ) {

					axis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );

				}

				axis = normalize( axis );

				gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );
				gl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );

				for ( int i = 1; i < n; i++ ) {

					if ( i >= samples ) {

						break;

					}

					float theta = dTheta * float( i );
					gl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );
					gl_FragColor.rgb += weights[ i ] * getSample( theta, axis );

				}

			}
		`,blending:Nn,depthTest:!1,depthWrite:!1})}function l$(){return new ai({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:az(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;

			#include <common>

			void main() {

				vec3 outputDirection = normalize( vOutputDirection );
				vec2 uv = equirectUv( outputDirection );

				gl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );

			}
		`,blending:Nn,depthTest:!1,depthWrite:!1})}function u$(){return new ai({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:az(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			uniform float flipEnvMap;

			varying vec3 vOutputDirection;

			uniform samplerCube envMap;

			void main() {

				gl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );

			}
		`,blending:Nn,depthTest:!1,depthWrite:!1})}function az(){return`

		precision mediump float;
		precision mediump int;

		attribute float faceIndex;

		varying vec3 vOutputDirection;

		// RH coordinate system; PMREM face-indexing convention
		vec3 getDirection( vec2 uv, float face ) {

			uv = 2.0 * uv - 1.0;

			vec3 direction = vec3( uv, 1.0 );

			if ( face == 0.0 ) {

				direction = direction.zyx; // ( 1, v, u ) pos x

			} else if ( face == 1.0 ) {

				direction = direction.xzy;
				direction.xz *= -1.0; // ( -u, 1, -v ) pos y

			} else if ( face == 2.0 ) {

				direction.x *= -1.0; // ( -u, v, 1 ) pos z

			} else if ( face == 3.0 ) {

				direction = direction.zyx;
				direction.xz *= -1.0; // ( -1, v, -u ) neg x

			} else if ( face == 4.0 ) {

				direction = direction.xzy;
				direction.xy *= -1.0; // ( -u, -1, v ) neg y

			} else if ( face == 5.0 ) {

				direction.z *= -1.0; // ( u, v, -1 ) neg z

			}

			return direction;

		}

		void main() {

			vOutputDirection = getDirection( uv, faceIndex );
			gl_Position = vec4( position, 1.0 );

		}
	`}function sht(e){let t=new WeakMap,r=null;function i(s){if(s&&s.isTexture){let l=s.mapping,u=l===oR||l===sR,c=l===jv||l===Wv;if(u||c)if(s.isRenderTargetTexture&&s.needsPMREMUpdate===!0){s.needsPMREMUpdate=!1;let h=t.get(s);return r===null&&(r=new o$(e)),h=u?r.fromEquirectangular(s,h):r.fromCubemap(s,h),t.set(s,h),h.texture}else{if(t.has(s))return t.get(s).texture;{let h=s.image;if(u&&h&&h.height>0||c&&h&&n(h)){r===null&&(r=new o$(e));let d=u?r.fromEquirectangular(s):r.fromCubemap(s);return t.set(s,d),s.addEventListener("dispose",a),d.texture}else return null}}}return s}function n(s){let l=0,u=6;for(let c=0;c<u;c++)s[c]!==void 0&&l++;return l===u}function a(s){let l=s.target;l.removeEventListener("dispose",a);let u=t.get(l);u!==void 0&&(t.delete(l),u.dispose())}function o(){t=new WeakMap,r!==null&&(r.dispose(),r=null)}return{get:i,dispose:o}}function lht(e){let t={};function r(i){if(t[i]!==void 0)return t[i];let n;switch(i){case"WEBGL_depth_texture":n=e.getExtension("WEBGL_depth_texture")||e.getExtension("MOZ_WEBGL_depth_texture")||e.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":n=e.getExtension("EXT_texture_filter_anisotropic")||e.getExtension("MOZ_EXT_texture_filter_anisotropic")||e.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":n=e.getExtension("WEBGL_compressed_texture_s3tc")||e.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||e.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":n=e.getExtension("WEBGL_compressed_texture_pvrtc")||e.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:n=e.getExtension(i)}return t[i]=n,n}return{has:function(i){return r(i)!==null},init:function(i){i.isWebGL2?r("EXT_color_buffer_float"):(r("WEBGL_depth_texture"),r("OES_texture_float"),r("OES_texture_half_float"),r("OES_texture_half_float_linear"),r("OES_standard_derivatives"),r("OES_element_index_uint"),r("OES_vertex_array_object"),r("ANGLE_instanced_arrays")),r("OES_texture_float_linear"),r("EXT_color_buffer_half_float"),r("WEBGL_multisampled_render_to_texture")},get:function(i){let n=r(i);return n===null&&console.warn("THREE.WebGLRenderer: "+i+" extension not supported."),n}}}function uht(e,t,r,i){let n={},a=new WeakMap;function o(h){let d=h.target;d.index!==null&&t.remove(d.index);for(let p in d.attributes)t.remove(d.attributes[p]);d.removeEventListener("dispose",o),delete n[d.id];let f=a.get(d);f&&(t.remove(f),a.delete(d)),i.releaseStatesOfGeometry(d),d.isInstancedBufferGeometry===!0&&delete d._maxInstanceCount,r.memory.geometries--}function s(h,d){return n[d.id]===!0||(d.addEventListener("dispose",o),n[d.id]=!0,r.memory.geometries++),d}function l(h){let d=h.attributes;for(let p in d)t.update(d[p],34962);let f=h.morphAttributes;for(let p in f){let v=f[p];for(let m=0,g=v.length;m<g;m++)t.update(v[m],34962)}}function u(h){let d=[],f=h.index,p=h.attributes.position,v=0;if(f!==null){let y=f.array;v=f.version;for(let x=0,b=y.length;x<b;x+=3){let _=y[x+0],w=y[x+1],S=y[x+2];d.push(_,w,w,S,S,_)}}else{let y=p.array;v=p.version;for(let x=0,b=y.length/3-1;x<b;x+=3){let _=x+0,w=x+1,S=x+2;d.push(_,w,w,S,S,_)}}let m=new(Hve(d)?g1:qve)(d,1);m.version=v;let g=a.get(h);g&&t.remove(g),a.set(h,m)}function c(h){let d=a.get(h);if(d){let f=h.index;f!==null&&d.version<f.version&&u(h)}else u(h);return a.get(h)}return{get:s,update:l,getWireframeAttribute:c}}function cht(e,t,r,i){let n=i.isWebGL2,a;function o(d){a=d}let s,l;function u(d){s=d.type,l=d.bytesPerElement}function c(d,f){e.drawElements(a,f,s,d*l),r.update(f,a,1)}function h(d,f,p){if(p===0)return;let v,m;if(n)v=e,m="drawElementsInstanced";else if(v=t.get("ANGLE_instanced_arrays"),m="drawElementsInstancedANGLE",v===null){console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}v[m](a,f,s,d*l,p),r.update(f,a,p)}this.setMode=o,this.setIndex=u,this.render=c,this.renderInstances=h}function hht(e){let t={geometries:0,textures:0},r={frame:0,calls:0,triangles:0,points:0,lines:0};function i(a,o,s){switch(r.calls++,o){case 4:r.triangles+=s*(a/3);break;case 1:r.lines+=s*(a/2);break;case 3:r.lines+=s*(a-1);break;case 2:r.lines+=s*a;break;case 0:r.points+=s*a;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",o);break}}function n(){r.frame++,r.calls=0,r.triangles=0,r.points=0,r.lines=0}return{memory:t,render:r,programs:null,autoReset:!0,reset:n,update:i}}function dht(e,t){return e[0]-t[0]}function fht(e,t){return Math.abs(t[1])-Math.abs(e[1])}function pht(e,t,r){let i={},n=new Float32Array(8),a=new WeakMap,o=new er,s=[];for(let u=0;u<8;u++)s[u]=[u,0];function l(u,c,h,d){let f=u.morphTargetInfluences;if(t.isWebGL2===!0){let p=c.morphAttributes.position||c.morphAttributes.normal||c.morphAttributes.color,v=p!==void 0?p.length:0,m=a.get(c);if(m===void 0||m.count!==v){let x=function(){C.dispose(),a.delete(c),c.removeEventListener("dispose",x)};m!==void 0&&m.texture.dispose();let b=c.morphAttributes.position!==void 0,_=c.morphAttributes.normal!==void 0,w=c.morphAttributes.color!==void 0,S=c.morphAttributes.position||[],A=c.morphAttributes.normal||[],M=c.morphAttributes.color||[],E=0;b===!0&&(E=1),_===!0&&(E=2),w===!0&&(E=3);let T=c.attributes.position.count*E,L=1;T>t.maxTextureSize&&(L=Math.ceil(T/t.maxTextureSize),T=t.maxTextureSize);let P=new Float32Array(T*L*4*v),C=new Wve(P,T,L,v);C.type=On,C.needsUpdate=!0;let D=E*4;for(let I=0;I<v;I++){let O=S[I],R=A[I],H=M[I],j=T*L*4*I;for(let N=0;N<O.count;N++){let k=N*D;b===!0&&(o.fromBufferAttribute(O,N),P[j+k+0]=o.x,P[j+k+1]=o.y,P[j+k+2]=o.z,P[j+k+3]=0),_===!0&&(o.fromBufferAttribute(R,N),P[j+k+4]=o.x,P[j+k+5]=o.y,P[j+k+6]=o.z,P[j+k+7]=0),w===!0&&(o.fromBufferAttribute(H,N),P[j+k+8]=o.x,P[j+k+9]=o.y,P[j+k+10]=o.z,P[j+k+11]=H.itemSize===4?o.w:1)}}m={count:v,texture:C,size:new me(T,L)},a.set(c,m),c.addEventListener("dispose",x)}let g=0;for(let x=0;x<f.length;x++)g+=f[x];let y=c.morphTargetsRelative?1:1-g;d.getUniforms().setValue(e,"morphTargetBaseInfluence",y),d.getUniforms().setValue(e,"morphTargetInfluences",f),d.getUniforms().setValue(e,"morphTargetsTexture",m.texture,r),d.getUniforms().setValue(e,"morphTargetsTextureSize",m.size)}else{let p=f===void 0?0:f.length,v=i[c.id];if(v===void 0||v.length!==p){v=[];for(let b=0;b<p;b++)v[b]=[b,0];i[c.id]=v}for(let b=0;b<p;b++){let _=v[b];_[0]=b,_[1]=f[b]}v.sort(fht);for(let b=0;b<8;b++)b<p&&v[b][1]?(s[b][0]=v[b][0],s[b][1]=v[b][1]):(s[b][0]=Number.MAX_SAFE_INTEGER,s[b][1]=0);s.sort(dht);let m=c.morphAttributes.position,g=c.morphAttributes.normal,y=0;for(let b=0;b<8;b++){let _=s[b],w=_[0],S=_[1];w!==Number.MAX_SAFE_INTEGER&&S?(m&&c.getAttribute("morphTarget"+b)!==m[w]&&c.setAttribute("morphTarget"+b,m[w]),g&&c.getAttribute("morphNormal"+b)!==g[w]&&c.setAttribute("morphNormal"+b,g[w]),n[b]=S,y+=S):(m&&c.hasAttribute("morphTarget"+b)===!0&&c.deleteAttribute("morphTarget"+b),g&&c.hasAttribute("morphNormal"+b)===!0&&c.deleteAttribute("morphNormal"+b),n[b]=0)}let x=c.morphTargetsRelative?1:1-y;d.getUniforms().setValue(e,"morphTargetBaseInfluence",x),d.getUniforms().setValue(e,"morphTargetInfluences",n)}}return{update:l}}function vht(e,t,r,i){let n=new WeakMap;function a(l){let u=i.render.frame,c=l.geometry,h=t.get(l,c);return n.get(h)!==u&&(t.update(h),n.set(h,u)),l.isInstancedMesh&&(l.hasEventListener("dispose",s)===!1&&l.addEventListener("dispose",s),r.update(l.instanceMatrix,34962),l.instanceColor!==null&&r.update(l.instanceColor,34962)),h}function o(){n=new WeakMap}function s(l){let u=l.target;u.removeEventListener("dispose",s),r.remove(u.instanceMatrix),u.instanceColor!==null&&r.remove(u.instanceColor)}return{update:a,dispose:o}}var Zve=new an,Qve=new Wve,Kve=new tlt,Jve=new iz,c$=[],h$=[],d$=new Float32Array(16),f$=new Float32Array(9),p$=new Float32Array(4);function Xy(e,t,r){let i=e[0];if(i<=0||i>0)return e;let n=t*r,a=c$[n];if(a===void 0&&(a=new Float32Array(n),c$[n]=a),t!==0){i.toArray(a,0);for(let o=1,s=0;o!==t;++o)s+=r,e[o].toArray(a,s)}return a}function aa(e,t){if(e.length!==t.length)return!1;for(let r=0,i=e.length;r<i;r++)if(e[r]!==t[r])return!1;return!0}function oa(e,t){for(let r=0,i=t.length;r<i;r++)e[r]=t[r]}function b7(e,t){let r=h$[t];r===void 0&&(r=new Int32Array(t),h$[t]=r);for(let i=0;i!==t;++i)r[i]=e.allocateTextureUnit();return r}function mht(e,t){let r=this.cache;r[0]!==t&&(e.uniform1f(this.addr,t),r[0]=t)}function ght(e,t){let r=this.cache;if(t.x!==void 0)(r[0]!==t.x||r[1]!==t.y)&&(e.uniform2f(this.addr,t.x,t.y),r[0]=t.x,r[1]=t.y);else{if(aa(r,t))return;e.uniform2fv(this.addr,t),oa(r,t)}}function yht(e,t){let r=this.cache;if(t.x!==void 0)(r[0]!==t.x||r[1]!==t.y||r[2]!==t.z)&&(e.uniform3f(this.addr,t.x,t.y,t.z),r[0]=t.x,r[1]=t.y,r[2]=t.z);else if(t.r!==void 0)(r[0]!==t.r||r[1]!==t.g||r[2]!==t.b)&&(e.uniform3f(this.addr,t.r,t.g,t.b),r[0]=t.r,r[1]=t.g,r[2]=t.b);else{if(aa(r,t))return;e.uniform3fv(this.addr,t),oa(r,t)}}function xht(e,t){let r=this.cache;if(t.x!==void 0)(r[0]!==t.x||r[1]!==t.y||r[2]!==t.z||r[3]!==t.w)&&(e.uniform4f(this.addr,t.x,t.y,t.z,t.w),r[0]=t.x,r[1]=t.y,r[2]=t.z,r[3]=t.w);else{if(aa(r,t))return;e.uniform4fv(this.addr,t),oa(r,t)}}function bht(e,t){let r=this.cache,i=t.elements;if(i===void 0){if(aa(r,t))return;e.uniformMatrix2fv(this.addr,!1,t),oa(r,t)}else{if(aa(r,i))return;p$.set(i),e.uniformMatrix2fv(this.addr,!1,p$),oa(r,i)}}function wht(e,t){let r=this.cache,i=t.elements;if(i===void 0){if(aa(r,t))return;e.uniformMatrix3fv(this.addr,!1,t),oa(r,t)}else{if(aa(r,i))return;f$.set(i),e.uniformMatrix3fv(this.addr,!1,f$),oa(r,i)}}function _ht(e,t){let r=this.cache,i=t.elements;if(i===void 0){if(aa(r,t))return;e.uniformMatrix4fv(this.addr,!1,t),oa(r,t)}else{if(aa(r,i))return;d$.set(i),e.uniformMatrix4fv(this.addr,!1,d$),oa(r,i)}}function Aht(e,t){let r=this.cache;r[0]!==t&&(e.uniform1i(this.addr,t),r[0]=t)}function Sht(e,t){let r=this.cache;if(t.x!==void 0)(r[0]!==t.x||r[1]!==t.y)&&(e.uniform2i(this.addr,t.x,t.y),r[0]=t.x,r[1]=t.y);else{if(aa(r,t))return;e.uniform2iv(this.addr,t),oa(r,t)}}function Cht(e,t){let r=this.cache;if(t.x!==void 0)(r[0]!==t.x||r[1]!==t.y||r[2]!==t.z)&&(e.uniform3i(this.addr,t.x,t.y,t.z),r[0]=t.x,r[1]=t.y,r[2]=t.z);else{if(aa(r,t))return;e.uniform3iv(this.addr,t),oa(r,t)}}function Eht(e,t){let r=this.cache;if(t.x!==void 0)(r[0]!==t.x||r[1]!==t.y||r[2]!==t.z||r[3]!==t.w)&&(e.uniform4i(this.addr,t.x,t.y,t.z,t.w),r[0]=t.x,r[1]=t.y,r[2]=t.z,r[3]=t.w);else{if(aa(r,t))return;e.uniform4iv(this.addr,t),oa(r,t)}}function Mht(e,t){let r=this.cache;r[0]!==t&&(e.uniform1ui(this.addr,t),r[0]=t)}function Tht(e,t){let r=this.cache;if(t.x!==void 0)(r[0]!==t.x||r[1]!==t.y)&&(e.uniform2ui(this.addr,t.x,t.y),r[0]=t.x,r[1]=t.y);else{if(aa(r,t))return;e.uniform2uiv(this.addr,t),oa(r,t)}}function Pht(e,t){let r=this.cache;if(t.x!==void 0)(r[0]!==t.x||r[1]!==t.y||r[2]!==t.z)&&(e.uniform3ui(this.addr,t.x,t.y,t.z),r[0]=t.x,r[1]=t.y,r[2]=t.z);else{if(aa(r,t))return;e.uniform3uiv(this.addr,t),oa(r,t)}}function Dht(e,t){let r=this.cache;if(t.x!==void 0)(r[0]!==t.x||r[1]!==t.y||r[2]!==t.z||r[3]!==t.w)&&(e.uniform4ui(this.addr,t.x,t.y,t.z,t.w),r[0]=t.x,r[1]=t.y,r[2]=t.z,r[3]=t.w);else{if(aa(r,t))return;e.uniform4uiv(this.addr,t),oa(r,t)}}function Iht(e,t,r){let i=this.cache,n=r.allocateTextureUnit();i[0]!==n&&(e.uniform1i(this.addr,n),i[0]=n),r.setTexture2D(t||Zve,n)}function Lht(e,t,r){let i=this.cache,n=r.allocateTextureUnit();i[0]!==n&&(e.uniform1i(this.addr,n),i[0]=n),r.setTexture3D(t||Kve,n)}function kht(e,t,r){let i=this.cache,n=r.allocateTextureUnit();i[0]!==n&&(e.uniform1i(this.addr,n),i[0]=n),r.setTextureCube(t||Jve,n)}function Rht(e,t,r){let i=this.cache,n=r.allocateTextureUnit();i[0]!==n&&(e.uniform1i(this.addr,n),i[0]=n),r.setTexture2DArray(t||Qve,n)}function Oht(e){switch(e){case 5126:return mht;case 35664:return ght;case 35665:return yht;case 35666:return xht;case 35674:return bht;case 35675:return wht;case 35676:return _ht;case 5124:case 35670:return Aht;case 35667:case 35671:return Sht;case 35668:case 35672:return Cht;case 35669:case 35673:return Eht;case 5125:return Mht;case 36294:return Tht;case 36295:return Pht;case 36296:return Dht;case 35678:case 36198:case 36298:case 36306:case 35682:return Iht;case 35679:case 36299:case 36307:return Lht;case 35680:case 36300:case 36308:case 36293:return kht;case 36289:case 36303:case 36311:case 36292:return Rht}}function Bht(e,t){e.uniform1fv(this.addr,t)}function Nht(e,t){let r=Xy(t,this.size,2);e.uniform2fv(this.addr,r)}function Vht(e,t){let r=Xy(t,this.size,3);e.uniform3fv(this.addr,r)}function Fht(e,t){let r=Xy(t,this.size,4);e.uniform4fv(this.addr,r)}function zht(e,t){let r=Xy(t,this.size,4);e.uniformMatrix2fv(this.addr,!1,r)}function Hht(e,t){let r=Xy(t,this.size,9);e.uniformMatrix3fv(this.addr,!1,r)}function Uht(e,t){let r=Xy(t,this.size,16);e.uniformMatrix4fv(this.addr,!1,r)}function Ght(e,t){e.uniform1iv(this.addr,t)}function jht(e,t){e.uniform2iv(this.addr,t)}function Wht(e,t){e.uniform3iv(this.addr,t)}function qht(e,t){e.uniform4iv(this.addr,t)}function Yht(e,t){e.uniform1uiv(this.addr,t)}function Xht(e,t){e.uniform2uiv(this.addr,t)}function Zht(e,t){e.uniform3uiv(this.addr,t)}function Qht(e,t){e.uniform4uiv(this.addr,t)}function Kht(e,t,r){let i=this.cache,n=t.length,a=b7(r,n);aa(i,a)||(e.uniform1iv(this.addr,a),oa(i,a));for(let o=0;o!==n;++o)r.setTexture2D(t[o]||Zve,a[o])}function Jht(e,t,r){let i=this.cache,n=t.length,a=b7(r,n);aa(i,a)||(e.uniform1iv(this.addr,a),oa(i,a));for(let o=0;o!==n;++o)r.setTexture3D(t[o]||Kve,a[o])}function $ht(e,t,r){let i=this.cache,n=t.length,a=b7(r,n);aa(i,a)||(e.uniform1iv(this.addr,a),oa(i,a));for(let o=0;o!==n;++o)r.setTextureCube(t[o]||Jve,a[o])}function edt(e,t,r){let i=this.cache,n=t.length,a=b7(r,n);aa(i,a)||(e.uniform1iv(this.addr,a),oa(i,a));for(let o=0;o!==n;++o)r.setTexture2DArray(t[o]||Qve,a[o])}function tdt(e){switch(e){case 5126:return Bht;case 35664:return Nht;case 35665:return Vht;case 35666:return Fht;case 35674:return zht;case 35675:return Hht;case 35676:return Uht;case 5124:case 35670:return Ght;case 35667:case 35671:return jht;case 35668:case 35672:return Wht;case 35669:case 35673:return qht;case 5125:return Yht;case 36294:return Xht;case 36295:return Zht;case 36296:return Qht;case 35678:case 36198:case 36298:case 36306:case 35682:return Kht;case 35679:case 36299:case 36307:return Jht;case 35680:case 36300:case 36308:case 36293:return $ht;case 36289:case 36303:case 36311:case 36292:return edt}}var rdt=class{constructor(e,t,r){this.id=e,this.addr=r,this.cache=[],this.setValue=Oht(t.type)}},idt=class{constructor(e,t,r){this.id=e,this.addr=r,this.cache=[],this.size=t.size,this.setValue=tdt(t.type)}},ndt=class{constructor(e){this.id=e,this.seq=[],this.map={}}setValue(e,t,r){let i=this.seq;for(let n=0,a=i.length;n!==a;++n){let o=i[n];o.setValue(e,t[o.id],r)}}},SP=/(\w+)(\])?(\[|\.)?/g;function v$(e,t){e.seq.push(t),e.map[t.id]=t}function adt(e,t,r){let i=e.name,n=i.length;for(SP.lastIndex=0;;){let a=SP.exec(i),o=SP.lastIndex,s=a[1],l=a[2]==="]",u=a[3];if(l&&(s=s|0),u===void 0||u==="["&&o+2===n){v$(r,u===void 0?new rdt(s,e,t):new idt(s,e,t));break}else{let c=r.map[s];c===void 0&&(c=new ndt(s),v$(r,c)),r=c}}}var zA=class{constructor(e,t){this.seq=[],this.map={};let r=e.getProgramParameter(t,35718);for(let i=0;i<r;++i){let n=e.getActiveUniform(t,i),a=e.getUniformLocation(t,n.name);adt(n,a,this)}}setValue(e,t,r,i){let n=this.map[t];n!==void 0&&n.setValue(e,r,i)}setOptional(e,t,r){let i=t[r];i!==void 0&&this.setValue(e,r,i)}static upload(e,t,r,i){for(let n=0,a=t.length;n!==a;++n){let o=t[n],s=r[o.id];s.needsUpdate!==!1&&o.setValue(e,s.value,i)}}static seqWithValue(e,t){let r=[];for(let i=0,n=e.length;i!==n;++i){let a=e[i];a.id in t&&r.push(a)}return r}};function m$(e,t,r){let i=e.createShader(t);return e.shaderSource(i,r),e.compileShader(i),i}var odt=0;function sdt(e,t){let r=e.split(`
`),i=[],n=Math.max(t-6,0),a=Math.min(t+6,r.length);for(let o=n;o<a;o++){let s=o+1;i.push(`${s===t?">":" "} ${s}: ${r[o]}`)}return i.join(`
`)}function ldt(e){switch(e){case ku:return["Linear","( value )"];case pr:return["sRGB","( value )"];default:return console.warn("THREE.WebGLProgram: Unsupported encoding:",e),["Linear","( value )"]}}function g$(e,t,r){let i=e.getShaderParameter(t,35713),n=e.getShaderInfoLog(t).trim();if(i&&n==="")return"";let a=/ERROR: 0:(\d+)/.exec(n);if(a){let o=parseInt(a[1]);return r.toUpperCase()+`

`+n+`

`+sdt(e.getShaderSource(t),o)}else return n}function udt(e,t){let r=ldt(t);return"vec4 "+e+"( vec4 value ) { return LinearTo"+r[0]+r[1]+"; }"}function cdt(e,t){let r;switch(t){case mst:r="Linear";break;case gst:r="Reinhard";break;case yst:r="OptimizedCineon";break;case xst:r="ACESFilmic";break;case bst:r="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",t),r="Linear"}return"vec3 "+e+"( vec3 color ) { return "+r+"ToneMapping( color ); }"}function hdt(e){return[e.extensionDerivatives||e.envMapCubeUVHeight||e.bumpMap||e.tangentSpaceNormalMap||e.clearcoatNormalMap||e.flatShading||e.shaderID==="physical"?"#extension GL_OES_standard_derivatives : enable":"",(e.extensionFragDepth||e.logarithmicDepthBuffer)&&e.rendererExtensionFragDepth?"#extension GL_EXT_frag_depth : enable":"",e.extensionDrawBuffers&&e.rendererExtensionDrawBuffers?"#extension GL_EXT_draw_buffers : require":"",(e.extensionShaderTextureLOD||e.envMap||e.transmission)&&e.rendererExtensionShaderTextureLod?"#extension GL_EXT_shader_texture_lod : enable":""].filter(Ux).join(`
`)}function ddt(e){let t=[];for(let r in e){let i=e[r];i!==!1&&t.push("#define "+r+" "+i)}return t.join(`
`)}function fdt(e,t){let r={},i=e.getProgramParameter(t,35721);for(let n=0;n<i;n++){let a=e.getActiveAttrib(t,n),o=a.name,s=1;a.type===35674&&(s=2),a.type===35675&&(s=3),a.type===35676&&(s=4),r[o]={type:a.type,location:e.getAttribLocation(t,o),locationSize:s}}return r}function Ux(e){return e!==""}function y$(e,t){let r=t.numSpotLightShadows+t.numSpotLightMaps-t.numSpotLightShadowsWithMaps;return e.replace(/NUM_DIR_LIGHTS/g,t.numDirLights).replace(/NUM_SPOT_LIGHTS/g,t.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,t.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,r).replace(/NUM_RECT_AREA_LIGHTS/g,t.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,t.numPointLights).replace(/NUM_HEMI_LIGHTS/g,t.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,t.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,t.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,t.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,t.numPointLightShadows)}function x$(e,t){return e.replace(/NUM_CLIPPING_PLANES/g,t.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,t.numClippingPlanes-t.numClipIntersection)}var pdt=/^[ \t]*#include +<([\w\d./]+)>/gm;function dR(e){return e.replace(pdt,vdt)}function vdt(e,t){let r=xr[t];if(r===void 0)throw new Error("Can not resolve #include <"+t+">");return dR(r)}var mdt=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function b$(e){return e.replace(mdt,gdt)}function gdt(e,t,r,i){let n="";for(let a=parseInt(t);a<parseInt(r);a++)n+=i.replace(/\[\s*i\s*\]/g,"[ "+a+" ]").replace(/UNROLLED_LOOP_INDEX/g,a);return n}function w$(e){let t="precision "+e.precision+` float;
precision `+e.precision+" int;";return e.precision==="highp"?t+=`
#define HIGH_PRECISION`:e.precision==="mediump"?t+=`
#define MEDIUM_PRECISION`:e.precision==="lowp"&&(t+=`
#define LOW_PRECISION`),t}function ydt(e){let t="SHADOWMAP_TYPE_BASIC";return e.shadowMapType===JF?t="SHADOWMAP_TYPE_PCF":e.shadowMapType===Xot?t="SHADOWMAP_TYPE_PCF_SOFT":e.shadowMapType===Hx&&(t="SHADOWMAP_TYPE_VSM"),t}function xdt(e){let t="ENVMAP_TYPE_CUBE";if(e.envMap)switch(e.envMapMode){case jv:case Wv:t="ENVMAP_TYPE_CUBE";break;case V4:t="ENVMAP_TYPE_CUBE_UV";break}return t}function bdt(e){let t="ENVMAP_MODE_REFLECTION";if(e.envMap)switch(e.envMapMode){case Wv:t="ENVMAP_MODE_REFRACTION";break}return t}function wdt(e){let t="ENVMAP_BLENDING_NONE";if(e.envMap)switch(e.combine){case kve:t="ENVMAP_BLENDING_MULTIPLY";break;case pst:t="ENVMAP_BLENDING_MIX";break;case vst:t="ENVMAP_BLENDING_ADD";break}return t}function _dt(e){let t=e.envMapCubeUVHeight;if(t===null)return null;let r=Math.log2(t)-2,i=1/t;return{texelWidth:1/(3*Math.max(Math.pow(2,r),7*16)),texelHeight:i,maxMip:r}}function Adt(e,t,r,i){let n=e.getContext(),a=r.defines,o=r.vertexShader,s=r.fragmentShader,l=ydt(r),u=xdt(r),c=bdt(r),h=wdt(r),d=_dt(r),f=r.isWebGL2?"":hdt(r),p=ddt(a),v=n.createProgram(),m,g,y=r.glslVersion?"#version "+r.glslVersion+`
`:"";r.isRawShaderMaterial?(m=[p].filter(Ux).join(`
`),m.length>0&&(m+=`
`),g=[f,p].filter(Ux).join(`
`),g.length>0&&(g+=`
`)):(m=[w$(r),"#define SHADER_NAME "+r.shaderName,p,r.instancing?"#define USE_INSTANCING":"",r.instancingColor?"#define USE_INSTANCING_COLOR":"",r.supportsVertexTextures?"#define VERTEX_TEXTURES":"",r.useFog&&r.fog?"#define USE_FOG":"",r.useFog&&r.fogExp2?"#define FOG_EXP2":"",r.map?"#define USE_MAP":"",r.envMap?"#define USE_ENVMAP":"",r.envMap?"#define "+c:"",r.lightMap?"#define USE_LIGHTMAP":"",r.aoMap?"#define USE_AOMAP":"",r.emissiveMap?"#define USE_EMISSIVEMAP":"",r.bumpMap?"#define USE_BUMPMAP":"",r.normalMap?"#define USE_NORMALMAP":"",r.normalMap&&r.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",r.normalMap&&r.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",r.clearcoatMap?"#define USE_CLEARCOATMAP":"",r.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",r.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",r.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",r.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",r.displacementMap&&r.supportsVertexTextures?"#define USE_DISPLACEMENTMAP":"",r.specularMap?"#define USE_SPECULARMAP":"",r.specularIntensityMap?"#define USE_SPECULARINTENSITYMAP":"",r.specularColorMap?"#define USE_SPECULARCOLORMAP":"",r.roughnessMap?"#define USE_ROUGHNESSMAP":"",r.metalnessMap?"#define USE_METALNESSMAP":"",r.alphaMap?"#define USE_ALPHAMAP":"",r.transmission?"#define USE_TRANSMISSION":"",r.transmissionMap?"#define USE_TRANSMISSIONMAP":"",r.thicknessMap?"#define USE_THICKNESSMAP":"",r.sheenColorMap?"#define USE_SHEENCOLORMAP":"",r.sheenRoughnessMap?"#define USE_SHEENROUGHNESSMAP":"",r.vertexTangents?"#define USE_TANGENT":"",r.vertexColors?"#define USE_COLOR":"",r.vertexAlphas?"#define USE_COLOR_ALPHA":"",r.vertexUvs?"#define USE_UV":"",r.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",r.flatShading?"#define FLAT_SHADED":"",r.skinning?"#define USE_SKINNING":"",r.morphTargets?"#define USE_MORPHTARGETS":"",r.morphNormals&&r.flatShading===!1?"#define USE_MORPHNORMALS":"",r.morphColors&&r.isWebGL2?"#define USE_MORPHCOLORS":"",r.morphTargetsCount>0&&r.isWebGL2?"#define MORPHTARGETS_TEXTURE":"",r.morphTargetsCount>0&&r.isWebGL2?"#define MORPHTARGETS_TEXTURE_STRIDE "+r.morphTextureStride:"",r.morphTargetsCount>0&&r.isWebGL2?"#define MORPHTARGETS_COUNT "+r.morphTargetsCount:"",r.doubleSided?"#define DOUBLE_SIDED":"",r.flipSided?"#define FLIP_SIDED":"",r.shadowMapEnabled?"#define USE_SHADOWMAP":"",r.shadowMapEnabled?"#define "+l:"",r.sizeAttenuation?"#define USE_SIZEATTENUATION":"",r.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",r.logarithmicDepthBuffer&&r.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","	attribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","	attribute vec3 instanceColor;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_TANGENT","	attribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","	attribute vec4 color;","#elif defined( USE_COLOR )","	attribute vec3 color;","#endif","#if ( defined( USE_MORPHTARGETS ) && ! defined( MORPHTARGETS_TEXTURE ) )","	attribute vec3 morphTarget0;","	attribute vec3 morphTarget1;","	attribute vec3 morphTarget2;","	attribute vec3 morphTarget3;","	#ifdef USE_MORPHNORMALS","		attribute vec3 morphNormal0;","		attribute vec3 morphNormal1;","		attribute vec3 morphNormal2;","		attribute vec3 morphNormal3;","	#else","		attribute vec3 morphTarget4;","		attribute vec3 morphTarget5;","		attribute vec3 morphTarget6;","		attribute vec3 morphTarget7;","	#endif","#endif","#ifdef USE_SKINNING","	attribute vec4 skinIndex;","	attribute vec4 skinWeight;","#endif",`
`].filter(Ux).join(`
`),g=[f,w$(r),"#define SHADER_NAME "+r.shaderName,p,r.useFog&&r.fog?"#define USE_FOG":"",r.useFog&&r.fogExp2?"#define FOG_EXP2":"",r.map?"#define USE_MAP":"",r.matcap?"#define USE_MATCAP":"",r.envMap?"#define USE_ENVMAP":"",r.envMap?"#define "+u:"",r.envMap?"#define "+c:"",r.envMap?"#define "+h:"",d?"#define CUBEUV_TEXEL_WIDTH "+d.texelWidth:"",d?"#define CUBEUV_TEXEL_HEIGHT "+d.texelHeight:"",d?"#define CUBEUV_MAX_MIP "+d.maxMip+".0":"",r.lightMap?"#define USE_LIGHTMAP":"",r.aoMap?"#define USE_AOMAP":"",r.emissiveMap?"#define USE_EMISSIVEMAP":"",r.bumpMap?"#define USE_BUMPMAP":"",r.normalMap?"#define USE_NORMALMAP":"",r.normalMap&&r.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",r.normalMap&&r.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",r.clearcoat?"#define USE_CLEARCOAT":"",r.clearcoatMap?"#define USE_CLEARCOATMAP":"",r.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",r.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",r.iridescence?"#define USE_IRIDESCENCE":"",r.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",r.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",r.specularMap?"#define USE_SPECULARMAP":"",r.specularIntensityMap?"#define USE_SPECULARINTENSITYMAP":"",r.specularColorMap?"#define USE_SPECULARCOLORMAP":"",r.roughnessMap?"#define USE_ROUGHNESSMAP":"",r.metalnessMap?"#define USE_METALNESSMAP":"",r.alphaMap?"#define USE_ALPHAMAP":"",r.alphaTest?"#define USE_ALPHATEST":"",r.sheen?"#define USE_SHEEN":"",r.sheenColorMap?"#define USE_SHEENCOLORMAP":"",r.sheenRoughnessMap?"#define USE_SHEENROUGHNESSMAP":"",r.transmission?"#define USE_TRANSMISSION":"",r.transmissionMap?"#define USE_TRANSMISSIONMAP":"",r.thicknessMap?"#define USE_THICKNESSMAP":"",r.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",r.vertexTangents?"#define USE_TANGENT":"",r.vertexColors||r.instancingColor?"#define USE_COLOR":"",r.vertexAlphas?"#define USE_COLOR_ALPHA":"",r.vertexUvs?"#define USE_UV":"",r.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",r.gradientMap?"#define USE_GRADIENTMAP":"",r.flatShading?"#define FLAT_SHADED":"",r.doubleSided?"#define DOUBLE_SIDED":"",r.flipSided?"#define FLIP_SIDED":"",r.shadowMapEnabled?"#define USE_SHADOWMAP":"",r.shadowMapEnabled?"#define "+l:"",r.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",r.physicallyCorrectLights?"#define PHYSICALLY_CORRECT_LIGHTS":"",r.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",r.logarithmicDepthBuffer&&r.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",r.toneMapping!==Gc?"#define TONE_MAPPING":"",r.toneMapping!==Gc?xr.tonemapping_pars_fragment:"",r.toneMapping!==Gc?cdt("toneMapping",r.toneMapping):"",r.dithering?"#define DITHERING":"",r.opaque?"#define OPAQUE":"",xr.encodings_pars_fragment,udt("linearToOutputTexel",r.outputEncoding),r.useDepthPacking?"#define DEPTH_PACKING "+r.depthPacking:"",`
`].filter(Ux).join(`
`)),o=dR(o),o=y$(o,r),o=x$(o,r),s=dR(s),s=y$(s,r),s=x$(s,r),o=b$(o),s=b$(s),r.isWebGL2&&r.isRawShaderMaterial!==!0&&(y=`#version 300 es
`,m=["precision mediump sampler2DArray;","#define attribute in","#define varying out","#define texture2D texture"].join(`
`)+`
`+m,g=["#define varying in",r.glslVersion===WJ?"":"layout(location = 0) out highp vec4 pc_fragColor;",r.glslVersion===WJ?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join(`
`)+`
`+g);let x=y+m+o,b=y+g+s,_=m$(n,35633,x),w=m$(n,35632,b);if(n.attachShader(v,_),n.attachShader(v,w),r.index0AttributeName!==void 0?n.bindAttribLocation(v,0,r.index0AttributeName):r.morphTargets===!0&&n.bindAttribLocation(v,0,"position"),n.linkProgram(v),e.debug.checkShaderErrors){let M=n.getProgramInfoLog(v).trim(),E=n.getShaderInfoLog(_).trim(),T=n.getShaderInfoLog(w).trim(),L=!0,P=!0;if(n.getProgramParameter(v,35714)===!1){L=!1;let C=g$(n,_,"vertex"),D=g$(n,w,"fragment");console.error("THREE.WebGLProgram: Shader Error "+n.getError()+" - VALIDATE_STATUS "+n.getProgramParameter(v,35715)+`

Program Info Log: `+M+`
`+C+`
`+D)}else M!==""?console.warn("THREE.WebGLProgram: Program Info Log:",M):(E===""||T==="")&&(P=!1);P&&(this.diagnostics={runnable:L,programLog:M,vertexShader:{log:E,prefix:m},fragmentShader:{log:T,prefix:g}})}n.deleteShader(_),n.deleteShader(w);let S;this.getUniforms=function(){return S===void 0&&(S=new zA(n,v)),S};let A;return this.getAttributes=function(){return A===void 0&&(A=fdt(n,v)),A},this.destroy=function(){i.releaseStatesOfProgram(this),n.deleteProgram(v),this.program=void 0},this.name=r.shaderName,this.id=odt++,this.cacheKey=t,this.usedTimes=1,this.program=v,this.vertexShader=_,this.fragmentShader=w,this}var Sdt=0,Cdt=class{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(e){let t=e.vertexShader,r=e.fragmentShader,i=this._getShaderStage(t),n=this._getShaderStage(r),a=this._getShaderCacheForMaterial(e);return a.has(i)===!1&&(a.add(i),i.usedTimes++),a.has(n)===!1&&(a.add(n),n.usedTimes++),this}remove(e){let t=this.materialCache.get(e);for(let r of t)r.usedTimes--,r.usedTimes===0&&this.shaderCache.delete(r.code);return this.materialCache.delete(e),this}getVertexShaderID(e){return this._getShaderStage(e.vertexShader).id}getFragmentShaderID(e){return this._getShaderStage(e.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(e){let t=this.materialCache,r=t.get(e);return r===void 0&&(r=new Set,t.set(e,r)),r}_getShaderStage(e){let t=this.shaderCache,r=t.get(e);return r===void 0&&(r=new Edt(e),t.set(e,r)),r}},Edt=class{constructor(e){this.id=Sdt++,this.code=e,this.usedTimes=0}};function Mdt(e,t,r,i,n,a,o){let s=new rz,l=new Cdt,u=[],c=n.isWebGL2,h=n.logarithmicDepthBuffer,d=n.vertexTextures,f=n.precision,p={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function v(A,M,E,T,L){let P=T.fog,C=L.geometry,D=A.isMeshStandardMaterial?T.environment:null,I=(A.isMeshStandardMaterial?r:t).get(A.envMap||D),O=I&&I.mapping===V4?I.image.height:null,R=p[A.type];A.precision!==null&&(f=n.getMaxPrecision(A.precision),f!==A.precision&&console.warn("THREE.WebGLProgram.getParameters:",A.precision,"not supported, using",f,"instead."));let H=C.morphAttributes.position||C.morphAttributes.normal||C.morphAttributes.color,j=H!==void 0?H.length:0,N=0;C.morphAttributes.position!==void 0&&(N=1),C.morphAttributes.normal!==void 0&&(N=2),C.morphAttributes.color!==void 0&&(N=3);let k,G,Y,F;if(R){let he=xc[R];k=he.vertexShader,G=he.fragmentShader}else k=A.vertexShader,G=A.fragmentShader,l.update(A),Y=l.getVertexShaderID(A),F=l.getFragmentShaderID(A);let Z=e.getRenderTarget(),ne=A.alphaTest>0,re=A.clearcoat>0,ae=A.iridescence>0;return{isWebGL2:c,shaderID:R,shaderName:A.type,vertexShader:k,fragmentShader:G,defines:A.defines,customVertexShaderID:Y,customFragmentShaderID:F,isRawShaderMaterial:A.isRawShaderMaterial===!0,glslVersion:A.glslVersion,precision:f,instancing:L.isInstancedMesh===!0,instancingColor:L.isInstancedMesh===!0&&L.instanceColor!==null,supportsVertexTextures:d,outputEncoding:Z===null?e.outputEncoding:Z.isXRRenderTarget===!0?Z.texture.encoding:ku,map:!!A.map,matcap:!!A.matcap,envMap:!!I,envMapMode:I&&I.mapping,envMapCubeUVHeight:O,lightMap:!!A.lightMap,aoMap:!!A.aoMap,emissiveMap:!!A.emissiveMap,bumpMap:!!A.bumpMap,normalMap:!!A.normalMap,objectSpaceNormalMap:A.normalMapType===Nst,tangentSpaceNormalMap:A.normalMapType===Bst,decodeVideoTexture:!!A.map&&A.map.isVideoTexture===!0&&A.map.encoding===pr,clearcoat:re,clearcoatMap:re&&!!A.clearcoatMap,clearcoatRoughnessMap:re&&!!A.clearcoatRoughnessMap,clearcoatNormalMap:re&&!!A.clearcoatNormalMap,iridescence:ae,iridescenceMap:ae&&!!A.iridescenceMap,iridescenceThicknessMap:ae&&!!A.iridescenceThicknessMap,displacementMap:!!A.displacementMap,roughnessMap:!!A.roughnessMap,metalnessMap:!!A.metalnessMap,specularMap:!!A.specularMap,specularIntensityMap:!!A.specularIntensityMap,specularColorMap:!!A.specularColorMap,opaque:A.transparent===!1&&A.blending===_v,alphaMap:!!A.alphaMap,alphaTest:ne,gradientMap:!!A.gradientMap,sheen:A.sheen>0,sheenColorMap:!!A.sheenColorMap,sheenRoughnessMap:!!A.sheenRoughnessMap,transmission:A.transmission>0,transmissionMap:!!A.transmissionMap,thicknessMap:!!A.thicknessMap,combine:A.combine,vertexTangents:!!A.normalMap&&!!C.attributes.tangent,vertexColors:A.vertexColors,vertexAlphas:A.vertexColors===!0&&!!C.attributes.color&&C.attributes.color.itemSize===4,vertexUvs:!!A.map||!!A.bumpMap||!!A.normalMap||!!A.specularMap||!!A.alphaMap||!!A.emissiveMap||!!A.roughnessMap||!!A.metalnessMap||!!A.clearcoatMap||!!A.clearcoatRoughnessMap||!!A.clearcoatNormalMap||!!A.iridescenceMap||!!A.iridescenceThicknessMap||!!A.displacementMap||!!A.transmissionMap||!!A.thicknessMap||!!A.specularIntensityMap||!!A.specularColorMap||!!A.sheenColorMap||!!A.sheenRoughnessMap,uvsVertexOnly:!(A.map||A.bumpMap||A.normalMap||A.specularMap||A.alphaMap||A.emissiveMap||A.roughnessMap||A.metalnessMap||A.clearcoatNormalMap||A.iridescenceMap||A.iridescenceThicknessMap||A.transmission>0||A.transmissionMap||A.thicknessMap||A.specularIntensityMap||A.specularColorMap||A.sheen>0||A.sheenColorMap||A.sheenRoughnessMap)&&!!A.displacementMap,fog:!!P,useFog:A.fog===!0,fogExp2:P&&P.isFogExp2,flatShading:!!A.flatShading,sizeAttenuation:A.sizeAttenuation,logarithmicDepthBuffer:h,skinning:L.isSkinnedMesh===!0,morphTargets:C.morphAttributes.position!==void 0,morphNormals:C.morphAttributes.normal!==void 0,morphColors:C.morphAttributes.color!==void 0,morphTargetsCount:j,morphTextureStride:N,numDirLights:M.directional.length,numPointLights:M.point.length,numSpotLights:M.spot.length,numSpotLightMaps:M.spotLightMap.length,numRectAreaLights:M.rectArea.length,numHemiLights:M.hemi.length,numDirLightShadows:M.directionalShadowMap.length,numPointLightShadows:M.pointShadowMap.length,numSpotLightShadows:M.spotShadowMap.length,numSpotLightShadowsWithMaps:M.numSpotLightShadowsWithMaps,numClippingPlanes:o.numPlanes,numClipIntersection:o.numIntersection,dithering:A.dithering,shadowMapEnabled:e.shadowMap.enabled&&E.length>0,shadowMapType:e.shadowMap.type,toneMapping:A.toneMapped?e.toneMapping:Gc,physicallyCorrectLights:e.physicallyCorrectLights,premultipliedAlpha:A.premultipliedAlpha,doubleSided:A.side===go,flipSided:A.side===ba,useDepthPacking:!!A.depthPacking,depthPacking:A.depthPacking||0,index0AttributeName:A.index0AttributeName,extensionDerivatives:A.extensions&&A.extensions.derivatives,extensionFragDepth:A.extensions&&A.extensions.fragDepth,extensionDrawBuffers:A.extensions&&A.extensions.drawBuffers,extensionShaderTextureLOD:A.extensions&&A.extensions.shaderTextureLOD,rendererExtensionFragDepth:c||i.has("EXT_frag_depth"),rendererExtensionDrawBuffers:c||i.has("WEBGL_draw_buffers"),rendererExtensionShaderTextureLod:c||i.has("EXT_shader_texture_lod"),customProgramCacheKey:A.customProgramCacheKey()}}function m(A){let M=[];if(A.shaderID?M.push(A.shaderID):(M.push(A.customVertexShaderID),M.push(A.customFragmentShaderID)),A.defines!==void 0)for(let E in A.defines)M.push(E),M.push(A.defines[E]);return A.isRawShaderMaterial===!1&&(g(M,A),y(M,A),M.push(e.outputEncoding)),M.push(A.customProgramCacheKey),M.join()}function g(A,M){A.push(M.precision),A.push(M.outputEncoding),A.push(M.envMapMode),A.push(M.envMapCubeUVHeight),A.push(M.combine),A.push(M.vertexUvs),A.push(M.fogExp2),A.push(M.sizeAttenuation),A.push(M.morphTargetsCount),A.push(M.morphAttributeCount),A.push(M.numDirLights),A.push(M.numPointLights),A.push(M.numSpotLights),A.push(M.numSpotLightMaps),A.push(M.numHemiLights),A.push(M.numRectAreaLights),A.push(M.numDirLightShadows),A.push(M.numPointLightShadows),A.push(M.numSpotLightShadows),A.push(M.numSpotLightShadowsWithMaps),A.push(M.shadowMapType),A.push(M.toneMapping),A.push(M.numClippingPlanes),A.push(M.numClipIntersection),A.push(M.depthPacking)}function y(A,M){s.disableAll(),M.isWebGL2&&s.enable(0),M.supportsVertexTextures&&s.enable(1),M.instancing&&s.enable(2),M.instancingColor&&s.enable(3),M.map&&s.enable(4),M.matcap&&s.enable(5),M.envMap&&s.enable(6),M.lightMap&&s.enable(7),M.aoMap&&s.enable(8),M.emissiveMap&&s.enable(9),M.bumpMap&&s.enable(10),M.normalMap&&s.enable(11),M.objectSpaceNormalMap&&s.enable(12),M.tangentSpaceNormalMap&&s.enable(13),M.clearcoat&&s.enable(14),M.clearcoatMap&&s.enable(15),M.clearcoatRoughnessMap&&s.enable(16),M.clearcoatNormalMap&&s.enable(17),M.iridescence&&s.enable(18),M.iridescenceMap&&s.enable(19),M.iridescenceThicknessMap&&s.enable(20),M.displacementMap&&s.enable(21),M.specularMap&&s.enable(22),M.roughnessMap&&s.enable(23),M.metalnessMap&&s.enable(24),M.gradientMap&&s.enable(25),M.alphaMap&&s.enable(26),M.alphaTest&&s.enable(27),M.vertexColors&&s.enable(28),M.vertexAlphas&&s.enable(29),M.vertexUvs&&s.enable(30),M.vertexTangents&&s.enable(31),M.uvsVertexOnly&&s.enable(32),A.push(s.mask),s.disableAll(),M.fog&&s.enable(0),M.useFog&&s.enable(1),M.flatShading&&s.enable(2),M.logarithmicDepthBuffer&&s.enable(3),M.skinning&&s.enable(4),M.morphTargets&&s.enable(5),M.morphNormals&&s.enable(6),M.morphColors&&s.enable(7),M.premultipliedAlpha&&s.enable(8),M.shadowMapEnabled&&s.enable(9),M.physicallyCorrectLights&&s.enable(10),M.doubleSided&&s.enable(11),M.flipSided&&s.enable(12),M.useDepthPacking&&s.enable(13),M.dithering&&s.enable(14),M.specularIntensityMap&&s.enable(15),M.specularColorMap&&s.enable(16),M.transmission&&s.enable(17),M.transmissionMap&&s.enable(18),M.thicknessMap&&s.enable(19),M.sheen&&s.enable(20),M.sheenColorMap&&s.enable(21),M.sheenRoughnessMap&&s.enable(22),M.decodeVideoTexture&&s.enable(23),M.opaque&&s.enable(24),A.push(s.mask)}function x(A){let M=p[A.type],E;if(M){let T=xc[M];E=Yy.clone(T.uniforms)}else E=A.uniforms;return E}function b(A,M){let E;for(let T=0,L=u.length;T<L;T++){let P=u[T];if(P.cacheKey===M){E=P,++E.usedTimes;break}}return E===void 0&&(E=new Adt(e,M,A,a),u.push(E)),E}function _(A){if(--A.usedTimes===0){let M=u.indexOf(A);u[M]=u[u.length-1],u.pop(),A.destroy()}}function w(A){l.remove(A)}function S(){l.dispose()}return{getParameters:v,getProgramCacheKey:m,getUniforms:x,acquireProgram:b,releaseProgram:_,releaseShaderCache:w,programs:u,dispose:S}}function Tdt(){let e=new WeakMap;function t(a){let o=e.get(a);return o===void 0&&(o={},e.set(a,o)),o}function r(a){e.delete(a)}function i(a,o,s){e.get(a)[o]=s}function n(){e=new WeakMap}return{get:t,remove:r,update:i,dispose:n}}function Pdt(e,t){return e.groupOrder!==t.groupOrder?e.groupOrder-t.groupOrder:e.renderOrder!==t.renderOrder?e.renderOrder-t.renderOrder:e.material.id!==t.material.id?e.material.id-t.material.id:e.z!==t.z?e.z-t.z:e.id-t.id}function _$(e,t){return e.groupOrder!==t.groupOrder?e.groupOrder-t.groupOrder:e.renderOrder!==t.renderOrder?e.renderOrder-t.renderOrder:e.z!==t.z?t.z-e.z:e.id-t.id}function A$(){let e=[],t=0,r=[],i=[],n=[];function a(){t=0,r.length=0,i.length=0,n.length=0}function o(h,d,f,p,v,m){let g=e[t];return g===void 0?(g={id:h.id,object:h,geometry:d,material:f,groupOrder:p,renderOrder:h.renderOrder,z:v,group:m},e[t]=g):(g.id=h.id,g.object=h,g.geometry=d,g.material=f,g.groupOrder=p,g.renderOrder=h.renderOrder,g.z=v,g.group=m),t++,g}function s(h,d,f,p,v,m){let g=o(h,d,f,p,v,m);f.transmission>0?i.push(g):f.transparent===!0?n.push(g):r.push(g)}function l(h,d,f,p,v,m){let g=o(h,d,f,p,v,m);f.transmission>0?i.unshift(g):f.transparent===!0?n.unshift(g):r.unshift(g)}function u(h,d){r.length>1&&r.sort(h||Pdt),i.length>1&&i.sort(d||_$),n.length>1&&n.sort(d||_$)}function c(){for(let h=t,d=e.length;h<d;h++){let f=e[h];if(f.id===null)break;f.id=null,f.object=null,f.geometry=null,f.material=null,f.group=null}}return{opaque:r,transmissive:i,transparent:n,init:a,push:s,unshift:l,finish:c,sort:u}}function Ddt(){let e=new WeakMap;function t(i,n){let a=e.get(i),o;return a===void 0?(o=new A$,e.set(i,[o])):n>=a.length?(o=new A$,a.push(o)):o=a[n],o}function r(){e=new WeakMap}return{get:t,dispose:r}}function Idt(){let e={};return{get:function(t){if(e[t.id]!==void 0)return e[t.id];let r;switch(t.type){case"DirectionalLight":r={direction:new U,color:new Vt};break;case"SpotLight":r={position:new U,direction:new U,color:new Vt,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":r={position:new U,color:new Vt,distance:0,decay:0};break;case"HemisphereLight":r={direction:new U,skyColor:new Vt,groundColor:new Vt};break;case"RectAreaLight":r={color:new Vt,position:new U,halfWidth:new U,halfHeight:new U};break}return e[t.id]=r,r}}}function Ldt(){let e={};return{get:function(t){if(e[t.id]!==void 0)return e[t.id];let r;switch(t.type){case"DirectionalLight":r={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new me};break;case"SpotLight":r={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new me};break;case"PointLight":r={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new me,shadowCameraNear:1,shadowCameraFar:1e3};break}return e[t.id]=r,r}}}var kdt=0;function Rdt(e,t){return(t.castShadow?2:0)-(e.castShadow?2:0)+(t.map?1:0)-(e.map?1:0)}function Odt(e,t){let r=new Idt,i=Ldt(),n={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0};for(let c=0;c<9;c++)n.probe.push(new U);let a=new U,o=new Ke,s=new Ke;function l(c,h){let d=0,f=0,p=0;for(let T=0;T<9;T++)n.probe[T].set(0,0,0);let v=0,m=0,g=0,y=0,x=0,b=0,_=0,w=0,S=0,A=0;c.sort(Rdt);let M=h!==!0?Math.PI:1;for(let T=0,L=c.length;T<L;T++){let P=c[T],C=P.color,D=P.intensity,I=P.distance,O=P.shadow&&P.shadow.map?P.shadow.map.texture:null;if(P.isAmbientLight)d+=C.r*D*M,f+=C.g*D*M,p+=C.b*D*M;else if(P.isLightProbe)for(let R=0;R<9;R++)n.probe[R].addScaledVector(P.sh.coefficients[R],D);else if(P.isDirectionalLight){let R=r.get(P);if(R.color.copy(P.color).multiplyScalar(P.intensity*M),P.castShadow){let H=P.shadow,j=i.get(P);j.shadowBias=H.bias,j.shadowNormalBias=H.normalBias,j.shadowRadius=H.radius,j.shadowMapSize=H.mapSize,n.directionalShadow[v]=j,n.directionalShadowMap[v]=O,n.directionalShadowMatrix[v]=P.shadow.matrix,b++}n.directional[v]=R,v++}else if(P.isSpotLight){let R=r.get(P);R.position.setFromMatrixPosition(P.matrixWorld),R.color.copy(C).multiplyScalar(D*M),R.distance=I,R.coneCos=Math.cos(P.angle),R.penumbraCos=Math.cos(P.angle*(1-P.penumbra)),R.decay=P.decay,n.spot[g]=R;let H=P.shadow;if(P.map&&(n.spotLightMap[S]=P.map,S++,H.updateMatrices(P),P.castShadow&&A++),n.spotLightMatrix[g]=H.matrix,P.castShadow){let j=i.get(P);j.shadowBias=H.bias,j.shadowNormalBias=H.normalBias,j.shadowRadius=H.radius,j.shadowMapSize=H.mapSize,n.spotShadow[g]=j,n.spotShadowMap[g]=O,w++}g++}else if(P.isRectAreaLight){let R=r.get(P);R.color.copy(C).multiplyScalar(D),R.halfWidth.set(P.width*.5,0,0),R.halfHeight.set(0,P.height*.5,0),n.rectArea[y]=R,y++}else if(P.isPointLight){let R=r.get(P);if(R.color.copy(P.color).multiplyScalar(P.intensity*M),R.distance=P.distance,R.decay=P.decay,P.castShadow){let H=P.shadow,j=i.get(P);j.shadowBias=H.bias,j.shadowNormalBias=H.normalBias,j.shadowRadius=H.radius,j.shadowMapSize=H.mapSize,j.shadowCameraNear=H.camera.near,j.shadowCameraFar=H.camera.far,n.pointShadow[m]=j,n.pointShadowMap[m]=O,n.pointShadowMatrix[m]=P.shadow.matrix,_++}n.point[m]=R,m++}else if(P.isHemisphereLight){let R=r.get(P);R.skyColor.copy(P.color).multiplyScalar(D*M),R.groundColor.copy(P.groundColor).multiplyScalar(D*M),n.hemi[x]=R,x++}}y>0&&(t.isWebGL2||e.has("OES_texture_float_linear")===!0?(n.rectAreaLTC1=st.LTC_FLOAT_1,n.rectAreaLTC2=st.LTC_FLOAT_2):e.has("OES_texture_half_float_linear")===!0?(n.rectAreaLTC1=st.LTC_HALF_1,n.rectAreaLTC2=st.LTC_HALF_2):console.error("THREE.WebGLRenderer: Unable to use RectAreaLight. Missing WebGL extensions.")),n.ambient[0]=d,n.ambient[1]=f,n.ambient[2]=p;let E=n.hash;(E.directionalLength!==v||E.pointLength!==m||E.spotLength!==g||E.rectAreaLength!==y||E.hemiLength!==x||E.numDirectionalShadows!==b||E.numPointShadows!==_||E.numSpotShadows!==w||E.numSpotMaps!==S)&&(n.directional.length=v,n.spot.length=g,n.rectArea.length=y,n.point.length=m,n.hemi.length=x,n.directionalShadow.length=b,n.directionalShadowMap.length=b,n.pointShadow.length=_,n.pointShadowMap.length=_,n.spotShadow.length=w,n.spotShadowMap.length=w,n.directionalShadowMatrix.length=b,n.pointShadowMatrix.length=_,n.spotLightMatrix.length=w+S-A,n.spotLightMap.length=S,n.numSpotLightShadowsWithMaps=A,E.directionalLength=v,E.pointLength=m,E.spotLength=g,E.rectAreaLength=y,E.hemiLength=x,E.numDirectionalShadows=b,E.numPointShadows=_,E.numSpotShadows=w,E.numSpotMaps=S,n.version=kdt++)}function u(c,h){let d=0,f=0,p=0,v=0,m=0,g=h.matrixWorldInverse;for(let y=0,x=c.length;y<x;y++){let b=c[y];if(b.isDirectionalLight){let _=n.directional[d];_.direction.setFromMatrixPosition(b.matrixWorld),a.setFromMatrixPosition(b.target.matrixWorld),_.direction.sub(a),_.direction.transformDirection(g),d++}else if(b.isSpotLight){let _=n.spot[p];_.position.setFromMatrixPosition(b.matrixWorld),_.position.applyMatrix4(g),_.direction.setFromMatrixPosition(b.matrixWorld),a.setFromMatrixPosition(b.target.matrixWorld),_.direction.sub(a),_.direction.transformDirection(g),p++}else if(b.isRectAreaLight){let _=n.rectArea[v];_.position.setFromMatrixPosition(b.matrixWorld),_.position.applyMatrix4(g),s.identity(),o.copy(b.matrixWorld),o.premultiply(g),s.extractRotation(o),_.halfWidth.set(b.width*.5,0,0),_.halfHeight.set(0,b.height*.5,0),_.halfWidth.applyMatrix4(s),_.halfHeight.applyMatrix4(s),v++}else if(b.isPointLight){let _=n.point[f];_.position.setFromMatrixPosition(b.matrixWorld),_.position.applyMatrix4(g),f++}else if(b.isHemisphereLight){let _=n.hemi[m];_.direction.setFromMatrixPosition(b.matrixWorld),_.direction.transformDirection(g),m++}}}return{setup:l,setupView:u,state:n}}function S$(e,t){let r=new Odt(e,t),i=[],n=[];function a(){i.length=0,n.length=0}function o(c){i.push(c)}function s(c){n.push(c)}function l(c){r.setup(i,c)}function u(c){r.setupView(i,c)}return{init:a,state:{lightsArray:i,shadowsArray:n,lights:r},setupLights:l,setupLightsView:u,pushLight:o,pushShadow:s}}function Bdt(e,t){let r=new WeakMap;function i(a,o=0){let s=r.get(a),l;return s===void 0?(l=new S$(e,t),r.set(a,[l])):o>=s.length?(l=new S$(e,t),s.push(l)):l=s[o],l}function n(){r=new WeakMap}return{get:i,dispose:n}}var $ve=class extends F4{constructor(e){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=Hd,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(e)}copy(e){return super.copy(e),this.depthPacking=e.depthPacking,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this}},Ndt=class extends F4{constructor(e){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.referencePosition=new U,this.nearDistance=1,this.farDistance=1e3,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(e)}copy(e){return super.copy(e),this.referencePosition.copy(e.referencePosition),this.nearDistance=e.nearDistance,this.farDistance=e.farDistance,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this}},Vdt=`void main() {
	gl_Position = vec4( position, 1.0 );
}`,Fdt=`uniform sampler2D shadow_pass;
uniform vec2 resolution;
uniform float radius;
#include <packing>
void main() {
	const float samples = float( VSM_SAMPLES );
	float mean = 0.0;
	float squared_mean = 0.0;
	float uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );
	float uvStart = samples <= 1.0 ? 0.0 : - 1.0;
	for ( float i = 0.0; i < samples; i ++ ) {
		float uvOffset = uvStart + i * uvStride;
		#ifdef HORIZONTAL_PASS
			vec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );
			mean += distribution.x;
			squared_mean += distribution.y * distribution.y + distribution.x * distribution.x;
		#else
			float depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );
			mean += depth;
			squared_mean += depth * depth;
		#endif
	}
	mean = mean / samples;
	squared_mean = squared_mean / samples;
	float std_dev = sqrt( squared_mean - mean * mean );
	gl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );
}`;function zdt(e,t,r){let i=new nz,n=new me,a=new me,o=new er,s=new $ve({depthPacking:Fve}),l=new Ndt,u={},c=r.maxTextureSize,h={[Lu]:ba,[ba]:Lu,[go]:go},d=new ai({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new me},radius:{value:4}},vertexShader:Vdt,fragmentShader:Fdt}),f=d.clone();f.defines.HORIZONTAL_PASS=1;let p=new It;p.setAttribute("position",new Zt(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));let v=new nn(p,d),m=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=JF,this.render=function(b,_,w){if(m.enabled===!1||m.autoUpdate===!1&&m.needsUpdate===!1||b.length===0)return;let S=e.getRenderTarget(),A=e.getActiveCubeFace(),M=e.getActiveMipmapLevel(),E=e.state;E.setBlending(Nn),E.buffers.color.setClear(1,1,1,1),E.buffers.depth.setTest(!0),E.setScissorTest(!1);for(let T=0,L=b.length;T<L;T++){let P=b[T],C=P.shadow;if(C===void 0){console.warn("THREE.WebGLShadowMap:",P,"has no shadow.");continue}if(C.autoUpdate===!1&&C.needsUpdate===!1)continue;n.copy(C.mapSize);let D=C.getFrameExtents();if(n.multiply(D),a.copy(C.mapSize),(n.x>c||n.y>c)&&(n.x>c&&(a.x=Math.floor(c/D.x),n.x=a.x*D.x,C.mapSize.x=a.x),n.y>c&&(a.y=Math.floor(c/D.y),n.y=a.y*D.y,C.mapSize.y=a.y)),C.map===null){let O=this.type!==Hx?{minFilter:mi,magFilter:mi}:{};C.map=new ui(n.x,n.y,O),C.map.texture.name=P.name+".shadowMap",C.camera.updateProjectionMatrix()}e.setRenderTarget(C.map),e.clear();let I=C.getViewportCount();for(let O=0;O<I;O++){let R=C.getViewport(O);o.set(a.x*R.x,a.y*R.y,a.x*R.z,a.y*R.w),E.viewport(o),C.updateMatrices(P,O),i=C.getFrustum(),x(_,w,C.camera,P,this.type)}C.isPointLightShadow!==!0&&this.type===Hx&&g(C,w),C.needsUpdate=!1}m.needsUpdate=!1,e.setRenderTarget(S,A,M)};function g(b,_){let w=t.update(v);d.defines.VSM_SAMPLES!==b.blurSamples&&(d.defines.VSM_SAMPLES=b.blurSamples,f.defines.VSM_SAMPLES=b.blurSamples,d.needsUpdate=!0,f.needsUpdate=!0),b.mapPass===null&&(b.mapPass=new ui(n.x,n.y)),d.uniforms.shadow_pass.value=b.map.texture,d.uniforms.resolution.value=b.mapSize,d.uniforms.radius.value=b.radius,e.setRenderTarget(b.mapPass),e.clear(),e.renderBufferDirect(_,null,w,d,v,null),f.uniforms.shadow_pass.value=b.mapPass.texture,f.uniforms.resolution.value=b.mapSize,f.uniforms.radius.value=b.radius,e.setRenderTarget(b.map),e.clear(),e.renderBufferDirect(_,null,w,f,v,null)}function y(b,_,w,S,A,M){let E=null,T=w.isPointLight===!0?b.customDistanceMaterial:b.customDepthMaterial;if(T!==void 0)E=T;else if(E=w.isPointLight===!0?l:s,e.localClippingEnabled&&_.clipShadows===!0&&Array.isArray(_.clippingPlanes)&&_.clippingPlanes.length!==0||_.displacementMap&&_.displacementScale!==0||_.alphaMap&&_.alphaTest>0||_.map&&_.alphaTest>0){let L=E.uuid,P=_.uuid,C=u[L];C===void 0&&(C={},u[L]=C);let D=C[P];D===void 0&&(D=E.clone(),C[P]=D),E=D}return E.visible=_.visible,E.wireframe=_.wireframe,M===Hx?E.side=_.shadowSide!==null?_.shadowSide:_.side:E.side=_.shadowSide!==null?_.shadowSide:h[_.side],E.alphaMap=_.alphaMap,E.alphaTest=_.alphaTest,E.map=_.map,E.clipShadows=_.clipShadows,E.clippingPlanes=_.clippingPlanes,E.clipIntersection=_.clipIntersection,E.displacementMap=_.displacementMap,E.displacementScale=_.displacementScale,E.displacementBias=_.displacementBias,E.wireframeLinewidth=_.wireframeLinewidth,E.linewidth=_.linewidth,w.isPointLight===!0&&E.isMeshDistanceMaterial===!0&&(E.referencePosition.setFromMatrixPosition(w.matrixWorld),E.nearDistance=S,E.farDistance=A),E}function x(b,_,w,S,A){if(b.visible===!1)return;if(b.layers.test(_.layers)&&(b.isMesh||b.isLine||b.isPoints)&&(b.castShadow||b.receiveShadow&&A===Hx)&&(!b.frustumCulled||i.intersectsObject(b))){b.modelViewMatrix.multiplyMatrices(w.matrixWorldInverse,b.matrixWorld);let E=t.update(b),T=b.material;if(Array.isArray(T)){let L=E.groups;for(let P=0,C=L.length;P<C;P++){let D=L[P],I=T[D.materialIndex];if(I&&I.visible){let O=y(b,I,S,w.near,w.far,A);e.renderBufferDirect(w,null,E,O,b,D)}}}else if(T.visible){let L=y(b,T,S,w.near,w.far,A);e.renderBufferDirect(w,null,E,L,b,null)}}let M=b.children;for(let E=0,T=M.length;E<T;E++)x(M[E],_,w,S,A)}}function Hdt(e,t,r){let i=r.isWebGL2;function n(){let be=!1,ze=new er,He=null,$e=new er(0,0,0,0);return{setMask:function(Pt){He!==Pt&&!be&&(e.colorMask(Pt,Pt,Pt,Pt),He=Pt)},setLocked:function(Pt){be=Pt},setClear:function(Pt,St,rr,Ai,Vr){Vr===!0&&(Pt*=Ai,St*=Ai,rr*=Ai),ze.set(Pt,St,rr,Ai),$e.equals(ze)===!1&&(e.clearColor(Pt,St,rr,Ai),$e.copy(ze))},reset:function(){be=!1,He=null,$e.set(-1,0,0,0)}}}function a(){let be=!1,ze=null,He=null,$e=null;return{setTest:function(Pt){Pt?ne(2929):re(2929)},setMask:function(Pt){ze!==Pt&&!be&&(e.depthMask(Pt),ze=Pt)},setFunc:function(Pt){if(He!==Pt){switch(Pt){case sst:e.depthFunc(512);break;case lst:e.depthFunc(519);break;case ust:e.depthFunc(513);break;case aR:e.depthFunc(515);break;case cst:e.depthFunc(514);break;case hst:e.depthFunc(518);break;case dst:e.depthFunc(516);break;case fst:e.depthFunc(517);break;default:e.depthFunc(515)}He=Pt}},setLocked:function(Pt){be=Pt},setClear:function(Pt){$e!==Pt&&(e.clearDepth(Pt),$e=Pt)},reset:function(){be=!1,ze=null,He=null,$e=null}}}function o(){let be=!1,ze=null,He=null,$e=null,Pt=null,St=null,rr=null,Ai=null,Vr=null;return{setTest:function(Ft){be||(Ft?ne(2960):re(2960))},setMask:function(Ft){ze!==Ft&&!be&&(e.stencilMask(Ft),ze=Ft)},setFunc:function(Ft,on,Sr){(He!==Ft||$e!==on||Pt!==Sr)&&(e.stencilFunc(Ft,on,Sr),He=Ft,$e=on,Pt=Sr)},setOp:function(Ft,on,Sr){(St!==Ft||rr!==on||Ai!==Sr)&&(e.stencilOp(Ft,on,Sr),St=Ft,rr=on,Ai=Sr)},setLocked:function(Ft){be=Ft},setClear:function(Ft){Vr!==Ft&&(e.clearStencil(Ft),Vr=Ft)},reset:function(){be=!1,ze=null,He=null,$e=null,Pt=null,St=null,rr=null,Ai=null,Vr=null}}}let s=new n,l=new a,u=new o,c=new WeakMap,h=new WeakMap,d={},f={},p=new WeakMap,v=[],m=null,g=!1,y=null,x=null,b=null,_=null,w=null,S=null,A=null,M=!1,E=null,T=null,L=null,P=null,C=null,D=e.getParameter(35661),I=!1,O=0,R=e.getParameter(7938);R.indexOf("WebGL")!==-1?(O=parseFloat(/^WebGL (\d)/.exec(R)[1]),I=O>=1):R.indexOf("OpenGL ES")!==-1&&(O=parseFloat(/^OpenGL ES (\d)/.exec(R)[1]),I=O>=2);let H=null,j={},N=e.getParameter(3088),k=e.getParameter(2978),G=new er().fromArray(N),Y=new er().fromArray(k);function F(be,ze,He){let $e=new Uint8Array(4),Pt=e.createTexture();e.bindTexture(be,Pt),e.texParameteri(be,10241,9728),e.texParameteri(be,10240,9728);for(let St=0;St<He;St++)e.texImage2D(ze+St,0,6408,1,1,0,6408,5121,$e);return Pt}let Z={};Z[3553]=F(3553,3553,1),Z[34067]=F(34067,34069,6),s.setClear(0,0,0,1),l.setClear(1),u.setClear(0),ne(2929),l.setFunc(aR),Ae(!1),xe(vJ),ne(2884),te(Nn);function ne(be){d[be]!==!0&&(e.enable(be),d[be]=!0)}function re(be){d[be]!==!1&&(e.disable(be),d[be]=!1)}function ae(be,ze){return f[be]!==ze?(e.bindFramebuffer(be,ze),f[be]=ze,i&&(be===36009&&(f[36160]=ze),be===36160&&(f[36009]=ze)),!0):!1}function he(be,ze){let He=v,$e=!1;if(be)if(He=p.get(ze),He===void 0&&(He=[],p.set(ze,He)),be.isWebGLMultipleRenderTargets){let Pt=be.texture;if(He.length!==Pt.length||He[0]!==36064){for(let St=0,rr=Pt.length;St<rr;St++)He[St]=36064+St;He.length=Pt.length,$e=!0}}else He[0]!==36064&&(He[0]=36064,$e=!0);else He[0]!==1029&&(He[0]=1029,$e=!0);$e&&(r.isWebGL2?e.drawBuffers(He):t.get("WEBGL_draw_buffers").drawBuffersWEBGL(He))}function se(be){return m!==be?(e.useProgram(be),m=be,!0):!1}let fe={[Ig]:32774,[Qot]:32778,[Kot]:32779};if(i)fe[xJ]=32775,fe[bJ]=32776;else{let be=t.get("EXT_blend_minmax");be!==null&&(fe[xJ]=be.MIN_EXT,fe[bJ]=be.MAX_EXT)}let J={[Jot]:0,[$ot]:1,[est]:768,[Ive]:770,[ost]:776,[nst]:774,[rst]:772,[tst]:769,[Lve]:771,[ast]:775,[ist]:773};function te(be,ze,He,$e,Pt,St,rr,Ai){if(be===Nn){g===!0&&(re(3042),g=!1);return}if(g===!1&&(ne(3042),g=!0),be!==Zot){if(be!==y||Ai!==M){if((x!==Ig||w!==Ig)&&(e.blendEquation(32774),x=Ig,w=Ig),Ai)switch(be){case _v:e.blendFuncSeparate(1,771,1,771);break;case mJ:e.blendFunc(1,1);break;case gJ:e.blendFuncSeparate(0,769,0,1);break;case yJ:e.blendFuncSeparate(0,768,0,770);break;default:console.error("THREE.WebGLState: Invalid blending: ",be);break}else switch(be){case _v:e.blendFuncSeparate(770,771,1,771);break;case mJ:e.blendFunc(770,1);break;case gJ:e.blendFuncSeparate(0,769,0,1);break;case yJ:e.blendFunc(0,768);break;default:console.error("THREE.WebGLState: Invalid blending: ",be);break}b=null,_=null,S=null,A=null,y=be,M=Ai}return}Pt=Pt||ze,St=St||He,rr=rr||$e,(ze!==x||Pt!==w)&&(e.blendEquationSeparate(fe[ze],fe[Pt]),x=ze,w=Pt),(He!==b||$e!==_||St!==S||rr!==A)&&(e.blendFuncSeparate(J[He],J[$e],J[St],J[rr]),b=He,_=$e,S=St,A=rr),y=be,M=!1}function le(be,ze){be.side===go?re(2884):ne(2884);let He=be.side===ba;ze&&(He=!He),Ae(He),be.blending===_v&&be.transparent===!1?te(Nn):te(be.blending,be.blendEquation,be.blendSrc,be.blendDst,be.blendEquationAlpha,be.blendSrcAlpha,be.blendDstAlpha,be.premultipliedAlpha),l.setFunc(be.depthFunc),l.setTest(be.depthTest),l.setMask(be.depthWrite),s.setMask(be.colorWrite);let $e=be.stencilWrite;u.setTest($e),$e&&(u.setMask(be.stencilWriteMask),u.setFunc(be.stencilFunc,be.stencilRef,be.stencilFuncMask),u.setOp(be.stencilFail,be.stencilZFail,be.stencilZPass)),Se(be.polygonOffset,be.polygonOffsetFactor,be.polygonOffsetUnits),be.alphaToCoverage===!0?ne(32926):re(32926)}function Ae(be){E!==be&&(be?e.frontFace(2304):e.frontFace(2305),E=be)}function xe(be){be!==qot?(ne(2884),be!==T&&(be===vJ?e.cullFace(1029):be===Yot?e.cullFace(1028):e.cullFace(1032))):re(2884),T=be}function ye(be){be!==L&&(I&&e.lineWidth(be),L=be)}function Se(be,ze,He){be?(ne(32823),(P!==ze||C!==He)&&(e.polygonOffset(ze,He),P=ze,C=He)):re(32823)}function Pe(be){be?ne(3089):re(3089)}function Ce(be){be===void 0&&(be=33984+D-1),H!==be&&(e.activeTexture(be),H=be)}function ee(be,ze,He){He===void 0&&(H===null?He=33984+D-1:He=H);let $e=j[He];$e===void 0&&($e={type:void 0,texture:void 0},j[He]=$e),($e.type!==be||$e.texture!==ze)&&(H!==He&&(e.activeTexture(He),H=He),e.bindTexture(be,ze||Z[be]),$e.type=be,$e.texture=ze)}function K(){let be=j[H];be!==void 0&&be.type!==void 0&&(e.bindTexture(be.type,null),be.type=void 0,be.texture=void 0)}function ve(){try{e.compressedTexImage2D.apply(e,arguments)}catch(be){console.error("THREE.WebGLState:",be)}}function Me(){try{e.compressedTexImage3D.apply(e,arguments)}catch(be){console.error("THREE.WebGLState:",be)}}function Q(){try{e.texSubImage2D.apply(e,arguments)}catch(be){console.error("THREE.WebGLState:",be)}}function W(){try{e.texSubImage3D.apply(e,arguments)}catch(be){console.error("THREE.WebGLState:",be)}}function V(){try{e.compressedTexSubImage2D.apply(e,arguments)}catch(be){console.error("THREE.WebGLState:",be)}}function z(){try{e.compressedTexSubImage3D.apply(e,arguments)}catch(be){console.error("THREE.WebGLState:",be)}}function X(){try{e.texStorage2D.apply(e,arguments)}catch(be){console.error("THREE.WebGLState:",be)}}function de(){try{e.texStorage3D.apply(e,arguments)}catch(be){console.error("THREE.WebGLState:",be)}}function pe(){try{e.texImage2D.apply(e,arguments)}catch(be){console.error("THREE.WebGLState:",be)}}function we(){try{e.texImage3D.apply(e,arguments)}catch(be){console.error("THREE.WebGLState:",be)}}function Je(be){G.equals(be)===!1&&(e.scissor(be.x,be.y,be.z,be.w),G.copy(be))}function Qe(be){Y.equals(be)===!1&&(e.viewport(be.x,be.y,be.z,be.w),Y.copy(be))}function Ye(be,ze){let He=h.get(ze);He===void 0&&(He=new WeakMap,h.set(ze,He));let $e=He.get(be);$e===void 0&&($e=e.getUniformBlockIndex(ze,be.name),He.set(be,$e))}function gt(be,ze){let He=h.get(ze).get(be);c.get(ze)!==He&&(e.uniformBlockBinding(ze,He,be.__bindingPointIndex),c.set(ze,He))}function ct(){e.disable(3042),e.disable(2884),e.disable(2929),e.disable(32823),e.disable(3089),e.disable(2960),e.disable(32926),e.blendEquation(32774),e.blendFunc(1,0),e.blendFuncSeparate(1,0,1,0),e.colorMask(!0,!0,!0,!0),e.clearColor(0,0,0,0),e.depthMask(!0),e.depthFunc(513),e.clearDepth(1),e.stencilMask(4294967295),e.stencilFunc(519,0,4294967295),e.stencilOp(7680,7680,7680),e.clearStencil(0),e.cullFace(1029),e.frontFace(2305),e.polygonOffset(0,0),e.activeTexture(33984),e.bindFramebuffer(36160,null),i===!0&&(e.bindFramebuffer(36009,null),e.bindFramebuffer(36008,null)),e.useProgram(null),e.lineWidth(1),e.scissor(0,0,e.canvas.width,e.canvas.height),e.viewport(0,0,e.canvas.width,e.canvas.height),d={},H=null,j={},f={},p=new WeakMap,v=[],m=null,g=!1,y=null,x=null,b=null,_=null,w=null,S=null,A=null,M=!1,E=null,T=null,L=null,P=null,C=null,G.set(0,0,e.canvas.width,e.canvas.height),Y.set(0,0,e.canvas.width,e.canvas.height),s.reset(),l.reset(),u.reset()}return{buffers:{color:s,depth:l,stencil:u},enable:ne,disable:re,bindFramebuffer:ae,drawBuffers:he,useProgram:se,setBlending:te,setMaterial:le,setFlipSided:Ae,setCullFace:xe,setLineWidth:ye,setPolygonOffset:Se,setScissorTest:Pe,activeTexture:Ce,bindTexture:ee,unbindTexture:K,compressedTexImage2D:ve,compressedTexImage3D:Me,texImage2D:pe,texImage3D:we,updateUBOMapping:Ye,uniformBlockBinding:gt,texStorage2D:X,texStorage3D:de,texSubImage2D:Q,texSubImage3D:W,compressedTexSubImage2D:V,compressedTexSubImage3D:z,scissor:Je,viewport:Qe,reset:ct}}function Udt(e,t,r,i,n,a,o){let s=n.isWebGL2,l=n.maxTextures,u=n.maxCubemapSize,c=n.maxTextureSize,h=n.maxSamples,d=t.has("WEBGL_multisampled_render_to_texture")?t.get("WEBGL_multisampled_render_to_texture"):null,f=typeof navigator>"u"?!1:/OculusBrowser/g.test(navigator.userAgent),p=new WeakMap,v,m=new WeakMap,g=!1;try{g=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")!==null}catch{}function y(ee,K){return g?new OffscreenCanvas(ee,K):Iw("canvas")}function x(ee,K,ve,Me){let Q=1;if((ee.width>Me||ee.height>Me)&&(Q=Me/Math.max(ee.width,ee.height)),Q<1||K===!0)if(typeof HTMLImageElement<"u"&&ee instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&ee instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&ee instanceof ImageBitmap){let W=K?FS:Math.floor,V=W(Q*ee.width),z=W(Q*ee.height);v===void 0&&(v=y(V,z));let X=ve?y(V,z):v;return X.width=V,X.height=z,X.getContext("2d").drawImage(ee,0,0,V,z),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+ee.width+"x"+ee.height+") to ("+V+"x"+z+")."),X}else return"data"in ee&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+ee.width+"x"+ee.height+")."),ee;return ee}function b(ee){return hR(ee.width)&&hR(ee.height)}function _(ee){return s?!1:ee.wrapS!==Xi||ee.wrapT!==Xi||ee.minFilter!==mi&&ee.minFilter!==br}function w(ee,K){return ee.generateMipmaps&&K&&ee.minFilter!==mi&&ee.minFilter!==br}function S(ee){e.generateMipmap(ee)}function A(ee,K,ve,Me,Q=!1){if(s===!1)return K;if(ee!==null){if(e[ee]!==void 0)return e[ee];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+ee+"'")}let W=K;return K===6403&&(ve===5126&&(W=33326),ve===5131&&(W=33325),ve===5121&&(W=33321)),K===33319&&(ve===5126&&(W=33328),ve===5131&&(W=33327),ve===5121&&(W=33323)),K===6408&&(ve===5126&&(W=34836),ve===5131&&(W=34842),ve===5121&&(W=Me===pr&&Q===!1?35907:32856),ve===32819&&(W=32854),ve===32820&&(W=32855)),(W===33325||W===33326||W===33327||W===33328||W===34842||W===34836)&&t.get("EXT_color_buffer_float"),W}function M(ee,K,ve){return w(ee,ve)===!0||ee.isFramebufferTexture&&ee.minFilter!==mi&&ee.minFilter!==br?Math.log2(Math.max(K.width,K.height))+1:ee.mipmaps!==void 0&&ee.mipmaps.length>0?ee.mipmaps.length:ee.isCompressedTexture&&Array.isArray(ee.image)?K.mipmaps.length:1}function E(ee){return ee===mi||ee===wJ||ee===X9?9728:9729}function T(ee){let K=ee.target;K.removeEventListener("dispose",T),P(K),K.isVideoTexture&&p.delete(K)}function L(ee){let K=ee.target;K.removeEventListener("dispose",L),D(K)}function P(ee){let K=i.get(ee);if(K.__webglInit===void 0)return;let ve=ee.source,Me=m.get(ve);if(Me){let Q=Me[K.__cacheKey];Q.usedTimes--,Q.usedTimes===0&&C(ee),Object.keys(Me).length===0&&m.delete(ve)}i.remove(ee)}function C(ee){let K=i.get(ee);e.deleteTexture(K.__webglTexture);let ve=ee.source,Me=m.get(ve);delete Me[K.__cacheKey],o.memory.textures--}function D(ee){let K=ee.texture,ve=i.get(ee),Me=i.get(K);if(Me.__webglTexture!==void 0&&(e.deleteTexture(Me.__webglTexture),o.memory.textures--),ee.depthTexture&&ee.depthTexture.dispose(),ee.isWebGLCubeRenderTarget)for(let Q=0;Q<6;Q++)e.deleteFramebuffer(ve.__webglFramebuffer[Q]),ve.__webglDepthbuffer&&e.deleteRenderbuffer(ve.__webglDepthbuffer[Q]);else{if(e.deleteFramebuffer(ve.__webglFramebuffer),ve.__webglDepthbuffer&&e.deleteRenderbuffer(ve.__webglDepthbuffer),ve.__webglMultisampledFramebuffer&&e.deleteFramebuffer(ve.__webglMultisampledFramebuffer),ve.__webglColorRenderbuffer)for(let Q=0;Q<ve.__webglColorRenderbuffer.length;Q++)ve.__webglColorRenderbuffer[Q]&&e.deleteRenderbuffer(ve.__webglColorRenderbuffer[Q]);ve.__webglDepthRenderbuffer&&e.deleteRenderbuffer(ve.__webglDepthRenderbuffer)}if(ee.isWebGLMultipleRenderTargets)for(let Q=0,W=K.length;Q<W;Q++){let V=i.get(K[Q]);V.__webglTexture&&(e.deleteTexture(V.__webglTexture),o.memory.textures--),i.remove(K[Q])}i.remove(K),i.remove(ee)}let I=0;function O(){I=0}function R(){let ee=I;return ee>=l&&console.warn("THREE.WebGLTextures: Trying to use "+ee+" texture units while this GPU supports only "+l),I+=1,ee}function H(ee){let K=[];return K.push(ee.wrapS),K.push(ee.wrapT),K.push(ee.wrapR||0),K.push(ee.magFilter),K.push(ee.minFilter),K.push(ee.anisotropy),K.push(ee.internalFormat),K.push(ee.format),K.push(ee.type),K.push(ee.generateMipmaps),K.push(ee.premultiplyAlpha),K.push(ee.flipY),K.push(ee.unpackAlignment),K.push(ee.encoding),K.join()}function j(ee,K){let ve=i.get(ee);if(ee.isVideoTexture&&Pe(ee),ee.isRenderTargetTexture===!1&&ee.version>0&&ve.__version!==ee.version){let Me=ee.image;if(Me===null)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else if(Me.complete===!1)console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete");else{re(ve,ee,K);return}}r.bindTexture(3553,ve.__webglTexture,33984+K)}function N(ee,K){let ve=i.get(ee);if(ee.version>0&&ve.__version!==ee.version){re(ve,ee,K);return}r.bindTexture(35866,ve.__webglTexture,33984+K)}function k(ee,K){let ve=i.get(ee);if(ee.version>0&&ve.__version!==ee.version){re(ve,ee,K);return}r.bindTexture(32879,ve.__webglTexture,33984+K)}function G(ee,K){let ve=i.get(ee);if(ee.version>0&&ve.__version!==ee.version){ae(ve,ee,K);return}r.bindTexture(34067,ve.__webglTexture,33984+K)}let Y={[$h]:10497,[Xi]:33071,[lR]:33648},F={[mi]:9728,[wJ]:9984,[X9]:9986,[br]:9729,[wst]:9985,[J1]:9987};function Z(ee,K,ve){if(ve?(e.texParameteri(ee,10242,Y[K.wrapS]),e.texParameteri(ee,10243,Y[K.wrapT]),(ee===32879||ee===35866)&&e.texParameteri(ee,32882,Y[K.wrapR]),e.texParameteri(ee,10240,F[K.magFilter]),e.texParameteri(ee,10241,F[K.minFilter])):(e.texParameteri(ee,10242,33071),e.texParameteri(ee,10243,33071),(ee===32879||ee===35866)&&e.texParameteri(ee,32882,33071),(K.wrapS!==Xi||K.wrapT!==Xi)&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping."),e.texParameteri(ee,10240,E(K.magFilter)),e.texParameteri(ee,10241,E(K.minFilter)),K.minFilter!==mi&&K.minFilter!==br&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.")),t.has("EXT_texture_filter_anisotropic")===!0){let Me=t.get("EXT_texture_filter_anisotropic");if(K.magFilter===mi||K.minFilter!==X9&&K.minFilter!==J1||K.type===On&&t.has("OES_texture_float_linear")===!1||s===!1&&K.type===Cd&&t.has("OES_texture_half_float_linear")===!1)return;(K.anisotropy>1||i.get(K).__currentAnisotropy)&&(e.texParameterf(ee,Me.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(K.anisotropy,n.getMaxAnisotropy())),i.get(K).__currentAnisotropy=K.anisotropy)}}function ne(ee,K){let ve=!1;ee.__webglInit===void 0&&(ee.__webglInit=!0,K.addEventListener("dispose",T));let Me=K.source,Q=m.get(Me);Q===void 0&&(Q={},m.set(Me,Q));let W=H(K);if(W!==ee.__cacheKey){Q[W]===void 0&&(Q[W]={texture:e.createTexture(),usedTimes:0},o.memory.textures++,ve=!0),Q[W].usedTimes++;let V=Q[ee.__cacheKey];V!==void 0&&(Q[ee.__cacheKey].usedTimes--,V.usedTimes===0&&C(K)),ee.__cacheKey=W,ee.__webglTexture=Q[W].texture}return ve}function re(ee,K,ve){let Me=3553;(K.isDataArrayTexture||K.isCompressedArrayTexture)&&(Me=35866),K.isData3DTexture&&(Me=32879);let Q=ne(ee,K),W=K.source;r.bindTexture(Me,ee.__webglTexture,33984+ve);let V=i.get(W);if(W.version!==V.__version||Q===!0){r.activeTexture(33984+ve),e.pixelStorei(37440,K.flipY),e.pixelStorei(37441,K.premultiplyAlpha),e.pixelStorei(3317,K.unpackAlignment),e.pixelStorei(37443,0);let z=_(K)&&b(K.image)===!1,X=x(K.image,z,!1,c);X=Ce(K,X);let de=b(X)||s,pe=a.convert(K.format,K.encoding),we=a.convert(K.type),Je=A(K.internalFormat,pe,we,K.encoding,K.isVideoTexture);Z(Me,K,de);let Qe,Ye=K.mipmaps,gt=s&&K.isVideoTexture!==!0,ct=V.__version===void 0||Q===!0,be=M(K,X,de);if(K.isDepthTexture)Je=6402,s?K.type===On?Je=36012:K.type===ed?Je=33190:K.type===Av?Je=35056:Je=33189:K.type===On&&console.error("WebGLRenderer: Floating point depth texture requires WebGL2."),K.format===Sv&&Je===6402&&K.type!==Ove&&K.type!==ed&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),K.type=ed,we=a.convert(K.type)),K.format===qv&&Je===6402&&(Je=34041,K.type!==Av&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),K.type=Av,we=a.convert(K.type))),ct&&(gt?r.texStorage2D(3553,1,Je,X.width,X.height):r.texImage2D(3553,0,Je,X.width,X.height,0,pe,we,null));else if(K.isDataTexture)if(Ye.length>0&&de){gt&&ct&&r.texStorage2D(3553,be,Je,Ye[0].width,Ye[0].height);for(let ze=0,He=Ye.length;ze<He;ze++)Qe=Ye[ze],gt?r.texSubImage2D(3553,ze,0,0,Qe.width,Qe.height,pe,we,Qe.data):r.texImage2D(3553,ze,Je,Qe.width,Qe.height,0,pe,we,Qe.data);K.generateMipmaps=!1}else gt?(ct&&r.texStorage2D(3553,be,Je,X.width,X.height),r.texSubImage2D(3553,0,0,0,X.width,X.height,pe,we,X.data)):r.texImage2D(3553,0,Je,X.width,X.height,0,pe,we,X.data);else if(K.isCompressedTexture)if(K.isCompressedArrayTexture){gt&&ct&&r.texStorage3D(35866,be,Je,Ye[0].width,Ye[0].height,X.depth);for(let ze=0,He=Ye.length;ze<He;ze++)Qe=Ye[ze],K.format!==ga?pe!==null?gt?r.compressedTexSubImage3D(35866,ze,0,0,0,Qe.width,Qe.height,X.depth,pe,Qe.data,0,0):r.compressedTexImage3D(35866,ze,Je,Qe.width,Qe.height,X.depth,0,Qe.data,0,0):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):gt?r.texSubImage3D(35866,ze,0,0,0,Qe.width,Qe.height,X.depth,pe,we,Qe.data):r.texImage3D(35866,ze,Je,Qe.width,Qe.height,X.depth,0,pe,we,Qe.data)}else{gt&&ct&&r.texStorage2D(3553,be,Je,Ye[0].width,Ye[0].height);for(let ze=0,He=Ye.length;ze<He;ze++)Qe=Ye[ze],K.format!==ga?pe!==null?gt?r.compressedTexSubImage2D(3553,ze,0,0,Qe.width,Qe.height,pe,Qe.data):r.compressedTexImage2D(3553,ze,Je,Qe.width,Qe.height,0,Qe.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):gt?r.texSubImage2D(3553,ze,0,0,Qe.width,Qe.height,pe,we,Qe.data):r.texImage2D(3553,ze,Je,Qe.width,Qe.height,0,pe,we,Qe.data)}else if(K.isDataArrayTexture)gt?(ct&&r.texStorage3D(35866,be,Je,X.width,X.height,X.depth),r.texSubImage3D(35866,0,0,0,0,X.width,X.height,X.depth,pe,we,X.data)):r.texImage3D(35866,0,Je,X.width,X.height,X.depth,0,pe,we,X.data);else if(K.isData3DTexture)gt?(ct&&r.texStorage3D(32879,be,Je,X.width,X.height,X.depth),r.texSubImage3D(32879,0,0,0,0,X.width,X.height,X.depth,pe,we,X.data)):r.texImage3D(32879,0,Je,X.width,X.height,X.depth,0,pe,we,X.data);else if(K.isFramebufferTexture){if(ct)if(gt)r.texStorage2D(3553,be,Je,X.width,X.height);else{let ze=X.width,He=X.height;for(let $e=0;$e<be;$e++)r.texImage2D(3553,$e,Je,ze,He,0,pe,we,null),ze>>=1,He>>=1}}else if(Ye.length>0&&de){gt&&ct&&r.texStorage2D(3553,be,Je,Ye[0].width,Ye[0].height);for(let ze=0,He=Ye.length;ze<He;ze++)Qe=Ye[ze],gt?r.texSubImage2D(3553,ze,0,0,pe,we,Qe):r.texImage2D(3553,ze,Je,pe,we,Qe);K.generateMipmaps=!1}else gt?(ct&&r.texStorage2D(3553,be,Je,X.width,X.height),r.texSubImage2D(3553,0,0,0,pe,we,X)):r.texImage2D(3553,0,Je,pe,we,X);w(K,de)&&S(Me),V.__version=W.version,K.onUpdate&&K.onUpdate(K)}ee.__version=K.version}function ae(ee,K,ve){if(K.image.length!==6)return;let Me=ne(ee,K),Q=K.source;r.bindTexture(34067,ee.__webglTexture,33984+ve);let W=i.get(Q);if(Q.version!==W.__version||Me===!0){r.activeTexture(33984+ve),e.pixelStorei(37440,K.flipY),e.pixelStorei(37441,K.premultiplyAlpha),e.pixelStorei(3317,K.unpackAlignment),e.pixelStorei(37443,0);let V=K.isCompressedTexture||K.image[0].isCompressedTexture,z=K.image[0]&&K.image[0].isDataTexture,X=[];for(let ze=0;ze<6;ze++)!V&&!z?X[ze]=x(K.image[ze],!1,!0,u):X[ze]=z?K.image[ze].image:K.image[ze],X[ze]=Ce(K,X[ze]);let de=X[0],pe=b(de)||s,we=a.convert(K.format,K.encoding),Je=a.convert(K.type),Qe=A(K.internalFormat,we,Je,K.encoding),Ye=s&&K.isVideoTexture!==!0,gt=W.__version===void 0||Me===!0,ct=M(K,de,pe);Z(34067,K,pe);let be;if(V){Ye&&gt&&r.texStorage2D(34067,ct,Qe,de.width,de.height);for(let ze=0;ze<6;ze++){be=X[ze].mipmaps;for(let He=0;He<be.length;He++){let $e=be[He];K.format!==ga?we!==null?Ye?r.compressedTexSubImage2D(34069+ze,He,0,0,$e.width,$e.height,we,$e.data):r.compressedTexImage2D(34069+ze,He,Qe,$e.width,$e.height,0,$e.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):Ye?r.texSubImage2D(34069+ze,He,0,0,$e.width,$e.height,we,Je,$e.data):r.texImage2D(34069+ze,He,Qe,$e.width,$e.height,0,we,Je,$e.data)}}}else{be=K.mipmaps,Ye&&gt&&(be.length>0&&ct++,r.texStorage2D(34067,ct,Qe,X[0].width,X[0].height));for(let ze=0;ze<6;ze++)if(z){Ye?r.texSubImage2D(34069+ze,0,0,0,X[ze].width,X[ze].height,we,Je,X[ze].data):r.texImage2D(34069+ze,0,Qe,X[ze].width,X[ze].height,0,we,Je,X[ze].data);for(let He=0;He<be.length;He++){let $e=be[He].image[ze].image;Ye?r.texSubImage2D(34069+ze,He+1,0,0,$e.width,$e.height,we,Je,$e.data):r.texImage2D(34069+ze,He+1,Qe,$e.width,$e.height,0,we,Je,$e.data)}}else{Ye?r.texSubImage2D(34069+ze,0,0,0,we,Je,X[ze]):r.texImage2D(34069+ze,0,Qe,we,Je,X[ze]);for(let He=0;He<be.length;He++){let $e=be[He];Ye?r.texSubImage2D(34069+ze,He+1,0,0,we,Je,$e.image[ze]):r.texImage2D(34069+ze,He+1,Qe,we,Je,$e.image[ze])}}}w(K,pe)&&S(34067),W.__version=Q.version,K.onUpdate&&K.onUpdate(K)}ee.__version=K.version}function he(ee,K,ve,Me,Q){let W=a.convert(ve.format,ve.encoding),V=a.convert(ve.type),z=A(ve.internalFormat,W,V,ve.encoding);i.get(K).__hasExternalTextures||(Q===32879||Q===35866?r.texImage3D(Q,0,z,K.width,K.height,K.depth,0,W,V,null):r.texImage2D(Q,0,z,K.width,K.height,0,W,V,null)),r.bindFramebuffer(36160,ee),Se(K)?d.framebufferTexture2DMultisampleEXT(36160,Me,Q,i.get(ve).__webglTexture,0,ye(K)):(Q===3553||Q>=34069&&Q<=34074)&&e.framebufferTexture2D(36160,Me,Q,i.get(ve).__webglTexture,0),r.bindFramebuffer(36160,null)}function se(ee,K,ve){if(e.bindRenderbuffer(36161,ee),K.depthBuffer&&!K.stencilBuffer){let Me=33189;if(ve||Se(K)){let Q=K.depthTexture;Q&&Q.isDepthTexture&&(Q.type===On?Me=36012:Q.type===ed&&(Me=33190));let W=ye(K);Se(K)?d.renderbufferStorageMultisampleEXT(36161,W,Me,K.width,K.height):e.renderbufferStorageMultisample(36161,W,Me,K.width,K.height)}else e.renderbufferStorage(36161,Me,K.width,K.height);e.framebufferRenderbuffer(36160,36096,36161,ee)}else if(K.depthBuffer&&K.stencilBuffer){let Me=ye(K);ve&&Se(K)===!1?e.renderbufferStorageMultisample(36161,Me,35056,K.width,K.height):Se(K)?d.renderbufferStorageMultisampleEXT(36161,Me,35056,K.width,K.height):e.renderbufferStorage(36161,34041,K.width,K.height),e.framebufferRenderbuffer(36160,33306,36161,ee)}else{let Me=K.isWebGLMultipleRenderTargets===!0?K.texture:[K.texture];for(let Q=0;Q<Me.length;Q++){let W=Me[Q],V=a.convert(W.format,W.encoding),z=a.convert(W.type),X=A(W.internalFormat,V,z,W.encoding),de=ye(K);ve&&Se(K)===!1?e.renderbufferStorageMultisample(36161,de,X,K.width,K.height):Se(K)?d.renderbufferStorageMultisampleEXT(36161,de,X,K.width,K.height):e.renderbufferStorage(36161,X,K.width,K.height)}}e.bindRenderbuffer(36161,null)}function fe(ee,K){if(K&&K.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(r.bindFramebuffer(36160,ee),!(K.depthTexture&&K.depthTexture.isDepthTexture))throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");(!i.get(K.depthTexture).__webglTexture||K.depthTexture.image.width!==K.width||K.depthTexture.image.height!==K.height)&&(K.depthTexture.image.width=K.width,K.depthTexture.image.height=K.height,K.depthTexture.needsUpdate=!0),j(K.depthTexture,0);let ve=i.get(K.depthTexture).__webglTexture,Me=ye(K);if(K.depthTexture.format===Sv)Se(K)?d.framebufferTexture2DMultisampleEXT(36160,36096,3553,ve,0,Me):e.framebufferTexture2D(36160,36096,3553,ve,0);else if(K.depthTexture.format===qv)Se(K)?d.framebufferTexture2DMultisampleEXT(36160,33306,3553,ve,0,Me):e.framebufferTexture2D(36160,33306,3553,ve,0);else throw new Error("Unknown depthTexture format")}function J(ee){let K=i.get(ee),ve=ee.isWebGLCubeRenderTarget===!0;if(ee.depthTexture&&!K.__autoAllocateDepthBuffer){if(ve)throw new Error("target.depthTexture not supported in Cube render targets");fe(K.__webglFramebuffer,ee)}else if(ve){K.__webglDepthbuffer=[];for(let Me=0;Me<6;Me++)r.bindFramebuffer(36160,K.__webglFramebuffer[Me]),K.__webglDepthbuffer[Me]=e.createRenderbuffer(),se(K.__webglDepthbuffer[Me],ee,!1)}else r.bindFramebuffer(36160,K.__webglFramebuffer),K.__webglDepthbuffer=e.createRenderbuffer(),se(K.__webglDepthbuffer,ee,!1);r.bindFramebuffer(36160,null)}function te(ee,K,ve){let Me=i.get(ee);K!==void 0&&he(Me.__webglFramebuffer,ee,ee.texture,36064,3553),ve!==void 0&&J(ee)}function le(ee){let K=ee.texture,ve=i.get(ee),Me=i.get(K);ee.addEventListener("dispose",L),ee.isWebGLMultipleRenderTargets!==!0&&(Me.__webglTexture===void 0&&(Me.__webglTexture=e.createTexture()),Me.__version=K.version,o.memory.textures++);let Q=ee.isWebGLCubeRenderTarget===!0,W=ee.isWebGLMultipleRenderTargets===!0,V=b(ee)||s;if(Q){ve.__webglFramebuffer=[];for(let z=0;z<6;z++)ve.__webglFramebuffer[z]=e.createFramebuffer()}else{if(ve.__webglFramebuffer=e.createFramebuffer(),W)if(n.drawBuffers){let z=ee.texture;for(let X=0,de=z.length;X<de;X++){let pe=i.get(z[X]);pe.__webglTexture===void 0&&(pe.__webglTexture=e.createTexture(),o.memory.textures++)}}else console.warn("THREE.WebGLRenderer: WebGLMultipleRenderTargets can only be used with WebGL2 or WEBGL_draw_buffers extension.");if(s&&ee.samples>0&&Se(ee)===!1){let z=W?K:[K];ve.__webglMultisampledFramebuffer=e.createFramebuffer(),ve.__webglColorRenderbuffer=[],r.bindFramebuffer(36160,ve.__webglMultisampledFramebuffer);for(let X=0;X<z.length;X++){let de=z[X];ve.__webglColorRenderbuffer[X]=e.createRenderbuffer(),e.bindRenderbuffer(36161,ve.__webglColorRenderbuffer[X]);let pe=a.convert(de.format,de.encoding),we=a.convert(de.type),Je=A(de.internalFormat,pe,we,de.encoding,ee.isXRRenderTarget===!0),Qe=ye(ee);e.renderbufferStorageMultisample(36161,Qe,Je,ee.width,ee.height),e.framebufferRenderbuffer(36160,36064+X,36161,ve.__webglColorRenderbuffer[X])}e.bindRenderbuffer(36161,null),ee.depthBuffer&&(ve.__webglDepthRenderbuffer=e.createRenderbuffer(),se(ve.__webglDepthRenderbuffer,ee,!0)),r.bindFramebuffer(36160,null)}}if(Q){r.bindTexture(34067,Me.__webglTexture),Z(34067,K,V);for(let z=0;z<6;z++)he(ve.__webglFramebuffer[z],ee,K,36064,34069+z);w(K,V)&&S(34067),r.unbindTexture()}else if(W){let z=ee.texture;for(let X=0,de=z.length;X<de;X++){let pe=z[X],we=i.get(pe);r.bindTexture(3553,we.__webglTexture),Z(3553,pe,V),he(ve.__webglFramebuffer,ee,pe,36064+X,3553),w(pe,V)&&S(3553)}r.unbindTexture()}else{let z=3553;(ee.isWebGL3DRenderTarget||ee.isWebGLArrayRenderTarget)&&(s?z=ee.isWebGL3DRenderTarget?32879:35866:console.error("THREE.WebGLTextures: THREE.Data3DTexture and THREE.DataArrayTexture only supported with WebGL2.")),r.bindTexture(z,Me.__webglTexture),Z(z,K,V),he(ve.__webglFramebuffer,ee,K,36064,z),w(K,V)&&S(z),r.unbindTexture()}ee.depthBuffer&&J(ee)}function Ae(ee){let K=b(ee)||s,ve=ee.isWebGLMultipleRenderTargets===!0?ee.texture:[ee.texture];for(let Me=0,Q=ve.length;Me<Q;Me++){let W=ve[Me];if(w(W,K)){let V=ee.isWebGLCubeRenderTarget?34067:3553,z=i.get(W).__webglTexture;r.bindTexture(V,z),S(V),r.unbindTexture()}}}function xe(ee){if(s&&ee.samples>0&&Se(ee)===!1){let K=ee.isWebGLMultipleRenderTargets?ee.texture:[ee.texture],ve=ee.width,Me=ee.height,Q=16384,W=[],V=ee.stencilBuffer?33306:36096,z=i.get(ee),X=ee.isWebGLMultipleRenderTargets===!0;if(X)for(let de=0;de<K.length;de++)r.bindFramebuffer(36160,z.__webglMultisampledFramebuffer),e.framebufferRenderbuffer(36160,36064+de,36161,null),r.bindFramebuffer(36160,z.__webglFramebuffer),e.framebufferTexture2D(36009,36064+de,3553,null,0);r.bindFramebuffer(36008,z.__webglMultisampledFramebuffer),r.bindFramebuffer(36009,z.__webglFramebuffer);for(let de=0;de<K.length;de++){W.push(36064+de),ee.depthBuffer&&W.push(V);let pe=z.__ignoreDepthValues!==void 0?z.__ignoreDepthValues:!1;if(pe===!1&&(ee.depthBuffer&&(Q|=256),ee.stencilBuffer&&(Q|=1024)),X&&e.framebufferRenderbuffer(36008,36064,36161,z.__webglColorRenderbuffer[de]),pe===!0&&(e.invalidateFramebuffer(36008,[V]),e.invalidateFramebuffer(36009,[V])),X){let we=i.get(K[de]).__webglTexture;e.framebufferTexture2D(36009,36064,3553,we,0)}e.blitFramebuffer(0,0,ve,Me,0,0,ve,Me,Q,9728),f&&e.invalidateFramebuffer(36008,W)}if(r.bindFramebuffer(36008,null),r.bindFramebuffer(36009,null),X)for(let de=0;de<K.length;de++){r.bindFramebuffer(36160,z.__webglMultisampledFramebuffer),e.framebufferRenderbuffer(36160,36064+de,36161,z.__webglColorRenderbuffer[de]);let pe=i.get(K[de]).__webglTexture;r.bindFramebuffer(36160,z.__webglFramebuffer),e.framebufferTexture2D(36009,36064+de,3553,pe,0)}r.bindFramebuffer(36009,z.__webglMultisampledFramebuffer)}}function ye(ee){return Math.min(h,ee.samples)}function Se(ee){let K=i.get(ee);return s&&ee.samples>0&&t.has("WEBGL_multisampled_render_to_texture")===!0&&K.__useRenderToTexture!==!1}function Pe(ee){let K=o.render.frame;p.get(ee)!==K&&(p.set(ee,K),ee.update())}function Ce(ee,K){let ve=ee.encoding,Me=ee.format,Q=ee.type;return ee.isCompressedTexture===!0||ee.isVideoTexture===!0||ee.format===cR||ve!==ku&&(ve===pr?s===!1?t.has("EXT_sRGB")===!0&&Me===ga?(ee.format=cR,ee.minFilter=br,ee.generateMipmaps=!1):K=Gve.sRGBToLinear(K):(Me!==ga||Q!==So)&&console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture encoding:",ve)),K}this.allocateTextureUnit=R,this.resetTextureUnits=O,this.setTexture2D=j,this.setTexture2DArray=N,this.setTexture3D=k,this.setTextureCube=G,this.rebindTextures=te,this.setupRenderTarget=le,this.updateRenderTargetMipmap=Ae,this.updateMultisampleRenderTarget=xe,this.setupDepthRenderbuffer=J,this.setupFrameBufferTexture=he,this.useMultisampledRTT=Se}function Gdt(e,t,r){let i=r.isWebGL2;function n(a,o=null){let s;if(a===So)return 5121;if(a===Cst)return 32819;if(a===Est)return 32820;if(a===_st)return 5120;if(a===Ast)return 5122;if(a===Ove)return 5123;if(a===Sst)return 5124;if(a===ed)return 5125;if(a===On)return 5126;if(a===Cd)return i?5131:(s=t.get("OES_texture_half_float"),s!==null?s.HALF_FLOAT_OES:null);if(a===Mst)return 6406;if(a===ga)return 6408;if(a===Tst)return 6409;if(a===Pst)return 6410;if(a===Sv)return 6402;if(a===qv)return 34041;if(a===cR)return s=t.get("EXT_sRGB"),s!==null?s.SRGB_ALPHA_EXT:null;if(a===Dst)return 6403;if(a===Ist)return 36244;if(a===RS)return 33319;if(a===Lst)return 33320;if(a===Bve)return 36249;if(a===Z9||a===Q9||a===K9||a===J9)if(o===pr)if(s=t.get("WEBGL_compressed_texture_s3tc_srgb"),s!==null){if(a===Z9)return s.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(a===Q9)return s.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(a===K9)return s.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(a===J9)return s.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else return null;else if(s=t.get("WEBGL_compressed_texture_s3tc"),s!==null){if(a===Z9)return s.COMPRESSED_RGB_S3TC_DXT1_EXT;if(a===Q9)return s.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(a===K9)return s.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(a===J9)return s.COMPRESSED_RGBA_S3TC_DXT5_EXT}else return null;if(a===_J||a===AJ||a===SJ||a===CJ)if(s=t.get("WEBGL_compressed_texture_pvrtc"),s!==null){if(a===_J)return s.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(a===AJ)return s.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(a===SJ)return s.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(a===CJ)return s.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}else return null;if(a===kst)return s=t.get("WEBGL_compressed_texture_etc1"),s!==null?s.COMPRESSED_RGB_ETC1_WEBGL:null;if(a===EJ||a===MJ)if(s=t.get("WEBGL_compressed_texture_etc"),s!==null){if(a===EJ)return o===pr?s.COMPRESSED_SRGB8_ETC2:s.COMPRESSED_RGB8_ETC2;if(a===MJ)return o===pr?s.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:s.COMPRESSED_RGBA8_ETC2_EAC}else return null;if(a===TJ||a===PJ||a===DJ||a===IJ||a===LJ||a===kJ||a===RJ||a===OJ||a===BJ||a===NJ||a===VJ||a===FJ||a===zJ||a===HJ)if(s=t.get("WEBGL_compressed_texture_astc"),s!==null){if(a===TJ)return o===pr?s.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:s.COMPRESSED_RGBA_ASTC_4x4_KHR;if(a===PJ)return o===pr?s.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:s.COMPRESSED_RGBA_ASTC_5x4_KHR;if(a===DJ)return o===pr?s.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:s.COMPRESSED_RGBA_ASTC_5x5_KHR;if(a===IJ)return o===pr?s.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:s.COMPRESSED_RGBA_ASTC_6x5_KHR;if(a===LJ)return o===pr?s.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:s.COMPRESSED_RGBA_ASTC_6x6_KHR;if(a===kJ)return o===pr?s.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:s.COMPRESSED_RGBA_ASTC_8x5_KHR;if(a===RJ)return o===pr?s.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:s.COMPRESSED_RGBA_ASTC_8x6_KHR;if(a===OJ)return o===pr?s.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:s.COMPRESSED_RGBA_ASTC_8x8_KHR;if(a===BJ)return o===pr?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:s.COMPRESSED_RGBA_ASTC_10x5_KHR;if(a===NJ)return o===pr?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:s.COMPRESSED_RGBA_ASTC_10x6_KHR;if(a===VJ)return o===pr?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:s.COMPRESSED_RGBA_ASTC_10x8_KHR;if(a===FJ)return o===pr?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:s.COMPRESSED_RGBA_ASTC_10x10_KHR;if(a===zJ)return o===pr?s.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:s.COMPRESSED_RGBA_ASTC_12x10_KHR;if(a===HJ)return o===pr?s.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:s.COMPRESSED_RGBA_ASTC_12x12_KHR}else return null;if(a===$9)if(s=t.get("EXT_texture_compression_bptc"),s!==null){if(a===$9)return o===pr?s.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:s.COMPRESSED_RGBA_BPTC_UNORM_EXT}else return null;if(a===Rst||a===UJ||a===GJ||a===jJ)if(s=t.get("EXT_texture_compression_rgtc"),s!==null){if(a===$9)return s.COMPRESSED_RED_RGTC1_EXT;if(a===UJ)return s.COMPRESSED_SIGNED_RED_RGTC1_EXT;if(a===GJ)return s.COMPRESSED_RED_GREEN_RGTC2_EXT;if(a===jJ)return s.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT}else return null;return a===Av?i?34042:(s=t.get("WEBGL_depth_texture"),s!==null?s.UNSIGNED_INT_24_8_WEBGL:null):e[a]!==void 0?e[a]:null}return{convert:n}}var jdt=class extends fo{constructor(e=[]){super(),this.isArrayCamera=!0,this.cameras=e}},rd=class extends _i{constructor(){super(),this.isGroup=!0,this.type="Group"}},Wdt={type:"move"},CP=class{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return this._hand===null&&(this._hand=new rd,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return this._targetRay===null&&(this._targetRay=new rd,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new U,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new U),this._targetRay}getGripSpace(){return this._grip===null&&(this._grip=new rd,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new U,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new U),this._grip}dispatchEvent(e){return this._targetRay!==null&&this._targetRay.dispatchEvent(e),this._grip!==null&&this._grip.dispatchEvent(e),this._hand!==null&&this._hand.dispatchEvent(e),this}connect(e){if(e&&e.hand){let t=this._hand;if(t)for(let r of e.hand.values())this._getHandJoint(t,r)}return this.dispatchEvent({type:"connected",data:e}),this}disconnect(e){return this.dispatchEvent({type:"disconnected",data:e}),this._targetRay!==null&&(this._targetRay.visible=!1),this._grip!==null&&(this._grip.visible=!1),this._hand!==null&&(this._hand.visible=!1),this}update(e,t,r){let i=null,n=null,a=null,o=this._targetRay,s=this._grip,l=this._hand;if(e&&t.session.visibilityState!=="visible-blurred"){if(l&&e.hand){a=!0;for(let p of e.hand.values()){let v=t.getJointPose(p,r),m=this._getHandJoint(l,p);v!==null&&(m.matrix.fromArray(v.transform.matrix),m.matrix.decompose(m.position,m.rotation,m.scale),m.jointRadius=v.radius),m.visible=v!==null}let u=l.joints["index-finger-tip"],c=l.joints["thumb-tip"],h=u.position.distanceTo(c.position),d=.02,f=.005;l.inputState.pinching&&h>d+f?(l.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:e.handedness,target:this})):!l.inputState.pinching&&h<=d-f&&(l.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:e.handedness,target:this}))}else s!==null&&e.gripSpace&&(n=t.getPose(e.gripSpace,r),n!==null&&(s.matrix.fromArray(n.transform.matrix),s.matrix.decompose(s.position,s.rotation,s.scale),n.linearVelocity?(s.hasLinearVelocity=!0,s.linearVelocity.copy(n.linearVelocity)):s.hasLinearVelocity=!1,n.angularVelocity?(s.hasAngularVelocity=!0,s.angularVelocity.copy(n.angularVelocity)):s.hasAngularVelocity=!1));o!==null&&(i=t.getPose(e.targetRaySpace,r),i===null&&n!==null&&(i=n),i!==null&&(o.matrix.fromArray(i.transform.matrix),o.matrix.decompose(o.position,o.rotation,o.scale),i.linearVelocity?(o.hasLinearVelocity=!0,o.linearVelocity.copy(i.linearVelocity)):o.hasLinearVelocity=!1,i.angularVelocity?(o.hasAngularVelocity=!0,o.angularVelocity.copy(i.angularVelocity)):o.hasAngularVelocity=!1,this.dispatchEvent(Wdt)))}return o!==null&&(o.visible=i!==null),s!==null&&(s.visible=n!==null),l!==null&&(l.visible=a!==null),this}_getHandJoint(e,t){if(e.joints[t.jointName]===void 0){let r=new rd;r.matrixAutoUpdate=!1,r.visible=!1,e.joints[t.jointName]=r,e.add(r)}return e.joints[t.jointName]}},ey=class extends an{constructor(e,t,r,i,n,a,o,s,l,u){if(u=u!==void 0?u:Sv,u!==Sv&&u!==qv)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");r===void 0&&u===Sv&&(r=ed),r===void 0&&u===qv&&(r=Av),super(null,i,n,a,o,s,u,r,l),this.isDepthTexture=!0,this.image={width:e,height:t},this.magFilter=o!==void 0?o:mi,this.minFilter=s!==void 0?s:mi,this.flipY=!1,this.generateMipmaps=!1}},qdt=class extends Ka{constructor(e,t){super();let r=this,i=null,n=1,a=null,o="local-floor",s=1,l=null,u=null,c=null,h=null,d=null,f=null,p=t.getContextAttributes(),v=null,m=null,g=[],y=[],x=new Set,b=new Map,_=new fo;_.layers.enable(1),_.viewport=new er;let w=new fo;w.layers.enable(2),w.viewport=new er;let S=[_,w],A=new jdt;A.layers.enable(1),A.layers.enable(2);let M=null,E=null;this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(N){let k=g[N];return k===void 0&&(k=new CP,g[N]=k),k.getTargetRaySpace()},this.getControllerGrip=function(N){let k=g[N];return k===void 0&&(k=new CP,g[N]=k),k.getGripSpace()},this.getHand=function(N){let k=g[N];return k===void 0&&(k=new CP,g[N]=k),k.getHandSpace()};function T(N){let k=y.indexOf(N.inputSource);if(k===-1)return;let G=g[k];G!==void 0&&G.dispatchEvent({type:N.type,data:N.inputSource})}function L(){i.removeEventListener("select",T),i.removeEventListener("selectstart",T),i.removeEventListener("selectend",T),i.removeEventListener("squeeze",T),i.removeEventListener("squeezestart",T),i.removeEventListener("squeezeend",T),i.removeEventListener("end",L),i.removeEventListener("inputsourceschange",P);for(let N=0;N<g.length;N++){let k=y[N];k!==null&&(y[N]=null,g[N].disconnect(k))}M=null,E=null,e.setRenderTarget(v),d=null,h=null,c=null,i=null,m=null,j.stop(),r.isPresenting=!1,r.dispatchEvent({type:"sessionend"})}this.setFramebufferScaleFactor=function(N){n=N,r.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(N){o=N,r.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return l||a},this.setReferenceSpace=function(N){l=N},this.getBaseLayer=function(){return h!==null?h:d},this.getBinding=function(){return c},this.getFrame=function(){return f},this.getSession=function(){return i},this.setSession=async function(N){if(i=N,i!==null){if(v=e.getRenderTarget(),i.addEventListener("select",T),i.addEventListener("selectstart",T),i.addEventListener("selectend",T),i.addEventListener("squeeze",T),i.addEventListener("squeezestart",T),i.addEventListener("squeezeend",T),i.addEventListener("end",L),i.addEventListener("inputsourceschange",P),p.xrCompatible!==!0&&await t.makeXRCompatible(),i.renderState.layers===void 0||e.capabilities.isWebGL2===!1){let k={antialias:i.renderState.layers===void 0?p.antialias:!0,alpha:p.alpha,depth:p.depth,stencil:p.stencil,framebufferScaleFactor:n};d=new XRWebGLLayer(i,t,k),i.updateRenderState({baseLayer:d}),m=new ui(d.framebufferWidth,d.framebufferHeight,{format:ga,type:So,encoding:e.outputEncoding,stencilBuffer:p.stencil})}else{let k=null,G=null,Y=null;p.depth&&(Y=p.stencil?35056:33190,k=p.stencil?qv:Sv,G=p.stencil?Av:ed);let F={colorFormat:32856,depthFormat:Y,scaleFactor:n};c=new XRWebGLBinding(i,t),h=c.createProjectionLayer(F),i.updateRenderState({layers:[h]}),m=new ui(h.textureWidth,h.textureHeight,{format:ga,type:So,depthTexture:new ey(h.textureWidth,h.textureHeight,G,void 0,void 0,void 0,void 0,void 0,void 0,k),stencilBuffer:p.stencil,encoding:e.outputEncoding,samples:p.antialias?4:0});let Z=e.properties.get(m);Z.__ignoreDepthValues=h.ignoreDepthValues}m.isXRRenderTarget=!0,this.setFoveation(s),l=null,a=await i.requestReferenceSpace(o),j.setContext(i),j.start(),r.isPresenting=!0,r.dispatchEvent({type:"sessionstart"})}};function P(N){for(let k=0;k<N.removed.length;k++){let G=N.removed[k],Y=y.indexOf(G);Y>=0&&(y[Y]=null,g[Y].disconnect(G))}for(let k=0;k<N.added.length;k++){let G=N.added[k],Y=y.indexOf(G);if(Y===-1){for(let Z=0;Z<g.length;Z++)if(Z>=y.length){y.push(G),Y=Z;break}else if(y[Z]===null){y[Z]=G,Y=Z;break}if(Y===-1)break}let F=g[Y];F&&F.connect(G)}}let C=new U,D=new U;function I(N,k,G){C.setFromMatrixPosition(k.matrixWorld),D.setFromMatrixPosition(G.matrixWorld);let Y=C.distanceTo(D),F=k.projectionMatrix.elements,Z=G.projectionMatrix.elements,ne=F[14]/(F[10]-1),re=F[14]/(F[10]+1),ae=(F[9]+1)/F[5],he=(F[9]-1)/F[5],se=(F[8]-1)/F[0],fe=(Z[8]+1)/Z[0],J=ne*se,te=ne*fe,le=Y/(-se+fe),Ae=le*-se;k.matrixWorld.decompose(N.position,N.quaternion,N.scale),N.translateX(Ae),N.translateZ(le),N.matrixWorld.compose(N.position,N.quaternion,N.scale),N.matrixWorldInverse.copy(N.matrixWorld).invert();let xe=ne+le,ye=re+le,Se=J-Ae,Pe=te+(Y-Ae),Ce=ae*re/ye*xe,ee=he*re/ye*xe;N.projectionMatrix.makePerspective(Se,Pe,Ce,ee,xe,ye)}function O(N,k){k===null?N.matrixWorld.copy(N.matrix):N.matrixWorld.multiplyMatrices(k.matrixWorld,N.matrix),N.matrixWorldInverse.copy(N.matrixWorld).invert()}this.updateCamera=function(N){if(i===null)return;A.near=w.near=_.near=N.near,A.far=w.far=_.far=N.far,(M!==A.near||E!==A.far)&&(i.updateRenderState({depthNear:A.near,depthFar:A.far}),M=A.near,E=A.far);let k=N.parent,G=A.cameras;O(A,k);for(let F=0;F<G.length;F++)O(G[F],k);A.matrixWorld.decompose(A.position,A.quaternion,A.scale),N.matrix.copy(A.matrix),N.matrix.decompose(N.position,N.quaternion,N.scale);let Y=N.children;for(let F=0,Z=Y.length;F<Z;F++)Y[F].updateMatrixWorld(!0);G.length===2?I(A,_,w):A.projectionMatrix.copy(_.projectionMatrix)},this.getCamera=function(){return A},this.getFoveation=function(){if(!(h===null&&d===null))return s},this.setFoveation=function(N){s=N,h!==null&&(h.fixedFoveation=N),d!==null&&d.fixedFoveation!==void 0&&(d.fixedFoveation=N)},this.getPlanes=function(){return x};let R=null;function H(N,k){if(u=k.getViewerPose(l||a),f=k,u!==null){let G=u.views;d!==null&&(e.setRenderTargetFramebuffer(m,d.framebuffer),e.setRenderTarget(m));let Y=!1;G.length!==A.cameras.length&&(A.cameras.length=0,Y=!0);for(let F=0;F<G.length;F++){let Z=G[F],ne=null;if(d!==null)ne=d.getViewport(Z);else{let ae=c.getViewSubImage(h,Z);ne=ae.viewport,F===0&&(e.setRenderTargetTextures(m,ae.colorTexture,h.ignoreDepthValues?void 0:ae.depthStencilTexture),e.setRenderTarget(m))}let re=S[F];re===void 0&&(re=new fo,re.layers.enable(F),re.viewport=new er,S[F]=re),re.matrix.fromArray(Z.transform.matrix),re.projectionMatrix.fromArray(Z.projectionMatrix),re.viewport.set(ne.x,ne.y,ne.width,ne.height),F===0&&A.matrix.copy(re.matrix),Y===!0&&A.cameras.push(re)}}for(let G=0;G<g.length;G++){let Y=y[G],F=g[G];Y!==null&&F!==void 0&&F.update(Y,k,l||a)}if(R&&R(N,k),k.detectedPlanes){r.dispatchEvent({type:"planesdetected",data:k.detectedPlanes});let G=null;for(let Y of x)k.detectedPlanes.has(Y)||(G===null&&(G=[]),G.push(Y));if(G!==null)for(let Y of G)x.delete(Y),b.delete(Y),r.dispatchEvent({type:"planeremoved",data:Y});for(let Y of k.detectedPlanes)if(!x.has(Y))x.add(Y),b.set(Y,k.lastChangedTime),r.dispatchEvent({type:"planeadded",data:Y});else{let F=b.get(Y);Y.lastChangedTime>F&&(b.set(Y,Y.lastChangedTime),r.dispatchEvent({type:"planechanged",data:Y}))}}f=null}let j=new Xve;j.setAnimationLoop(H),this.setAnimationLoop=function(N){R=N},this.dispose=function(){}}};function Ydt(e,t){function r(v,m){m.color.getRGB(v.fogColor.value,Yve(e)),m.isFog?(v.fogNear.value=m.near,v.fogFar.value=m.far):m.isFogExp2&&(v.fogDensity.value=m.density)}function i(v,m,g,y,x){m.isMeshBasicMaterial||m.isMeshLambertMaterial?n(v,m):m.isMeshToonMaterial?(n(v,m),c(v,m)):m.isMeshPhongMaterial?(n(v,m),u(v,m)):m.isMeshStandardMaterial?(n(v,m),h(v,m),m.isMeshPhysicalMaterial&&d(v,m,x)):m.isMeshMatcapMaterial?(n(v,m),f(v,m)):m.isMeshDepthMaterial?n(v,m):m.isMeshDistanceMaterial?(n(v,m),p(v,m)):m.isMeshNormalMaterial?n(v,m):m.isLineBasicMaterial?(a(v,m),m.isLineDashedMaterial&&o(v,m)):m.isPointsMaterial?s(v,m,g,y):m.isSpriteMaterial?l(v,m):m.isShadowMaterial?(v.color.value.copy(m.color),v.opacity.value=m.opacity):m.isShaderMaterial&&(m.uniformsNeedUpdate=!1)}function n(v,m){v.opacity.value=m.opacity,m.color&&v.diffuse.value.copy(m.color),m.emissive&&v.emissive.value.copy(m.emissive).multiplyScalar(m.emissiveIntensity),m.map&&(v.map.value=m.map),m.alphaMap&&(v.alphaMap.value=m.alphaMap),m.bumpMap&&(v.bumpMap.value=m.bumpMap,v.bumpScale.value=m.bumpScale,m.side===ba&&(v.bumpScale.value*=-1)),m.displacementMap&&(v.displacementMap.value=m.displacementMap,v.displacementScale.value=m.displacementScale,v.displacementBias.value=m.displacementBias),m.emissiveMap&&(v.emissiveMap.value=m.emissiveMap),m.normalMap&&(v.normalMap.value=m.normalMap,v.normalScale.value.copy(m.normalScale),m.side===ba&&v.normalScale.value.negate()),m.specularMap&&(v.specularMap.value=m.specularMap),m.alphaTest>0&&(v.alphaTest.value=m.alphaTest);let g=t.get(m).envMap;if(g&&(v.envMap.value=g,v.flipEnvMap.value=g.isCubeTexture&&g.isRenderTargetTexture===!1?-1:1,v.reflectivity.value=m.reflectivity,v.ior.value=m.ior,v.refractionRatio.value=m.refractionRatio),m.lightMap){v.lightMap.value=m.lightMap;let b=e.physicallyCorrectLights!==!0?Math.PI:1;v.lightMapIntensity.value=m.lightMapIntensity*b}m.aoMap&&(v.aoMap.value=m.aoMap,v.aoMapIntensity.value=m.aoMapIntensity);let y;m.map?y=m.map:m.specularMap?y=m.specularMap:m.displacementMap?y=m.displacementMap:m.normalMap?y=m.normalMap:m.bumpMap?y=m.bumpMap:m.roughnessMap?y=m.roughnessMap:m.metalnessMap?y=m.metalnessMap:m.alphaMap?y=m.alphaMap:m.emissiveMap?y=m.emissiveMap:m.clearcoatMap?y=m.clearcoatMap:m.clearcoatNormalMap?y=m.clearcoatNormalMap:m.clearcoatRoughnessMap?y=m.clearcoatRoughnessMap:m.iridescenceMap?y=m.iridescenceMap:m.iridescenceThicknessMap?y=m.iridescenceThicknessMap:m.specularIntensityMap?y=m.specularIntensityMap:m.specularColorMap?y=m.specularColorMap:m.transmissionMap?y=m.transmissionMap:m.thicknessMap?y=m.thicknessMap:m.sheenColorMap?y=m.sheenColorMap:m.sheenRoughnessMap&&(y=m.sheenRoughnessMap),y!==void 0&&(y.isWebGLRenderTarget&&(y=y.texture),y.matrixAutoUpdate===!0&&y.updateMatrix(),v.uvTransform.value.copy(y.matrix));let x;m.aoMap?x=m.aoMap:m.lightMap&&(x=m.lightMap),x!==void 0&&(x.isWebGLRenderTarget&&(x=x.texture),x.matrixAutoUpdate===!0&&x.updateMatrix(),v.uv2Transform.value.copy(x.matrix))}function a(v,m){v.diffuse.value.copy(m.color),v.opacity.value=m.opacity}function o(v,m){v.dashSize.value=m.dashSize,v.totalSize.value=m.dashSize+m.gapSize,v.scale.value=m.scale}function s(v,m,g,y){v.diffuse.value.copy(m.color),v.opacity.value=m.opacity,v.size.value=m.size*g,v.scale.value=y*.5,m.map&&(v.map.value=m.map),m.alphaMap&&(v.alphaMap.value=m.alphaMap),m.alphaTest>0&&(v.alphaTest.value=m.alphaTest);let x;m.map?x=m.map:m.alphaMap&&(x=m.alphaMap),x!==void 0&&(x.matrixAutoUpdate===!0&&x.updateMatrix(),v.uvTransform.value.copy(x.matrix))}function l(v,m){v.diffuse.value.copy(m.color),v.opacity.value=m.opacity,v.rotation.value=m.rotation,m.map&&(v.map.value=m.map),m.alphaMap&&(v.alphaMap.value=m.alphaMap),m.alphaTest>0&&(v.alphaTest.value=m.alphaTest);let g;m.map?g=m.map:m.alphaMap&&(g=m.alphaMap),g!==void 0&&(g.matrixAutoUpdate===!0&&g.updateMatrix(),v.uvTransform.value.copy(g.matrix))}function u(v,m){v.specular.value.copy(m.specular),v.shininess.value=Math.max(m.shininess,1e-4)}function c(v,m){m.gradientMap&&(v.gradientMap.value=m.gradientMap)}function h(v,m){v.roughness.value=m.roughness,v.metalness.value=m.metalness,m.roughnessMap&&(v.roughnessMap.value=m.roughnessMap),m.metalnessMap&&(v.metalnessMap.value=m.metalnessMap),t.get(m).envMap&&(v.envMapIntensity.value=m.envMapIntensity)}function d(v,m,g){v.ior.value=m.ior,m.sheen>0&&(v.sheenColor.value.copy(m.sheenColor).multiplyScalar(m.sheen),v.sheenRoughness.value=m.sheenRoughness,m.sheenColorMap&&(v.sheenColorMap.value=m.sheenColorMap),m.sheenRoughnessMap&&(v.sheenRoughnessMap.value=m.sheenRoughnessMap)),m.clearcoat>0&&(v.clearcoat.value=m.clearcoat,v.clearcoatRoughness.value=m.clearcoatRoughness,m.clearcoatMap&&(v.clearcoatMap.value=m.clearcoatMap),m.clearcoatRoughnessMap&&(v.clearcoatRoughnessMap.value=m.clearcoatRoughnessMap),m.clearcoatNormalMap&&(v.clearcoatNormalScale.value.copy(m.clearcoatNormalScale),v.clearcoatNormalMap.value=m.clearcoatNormalMap,m.side===ba&&v.clearcoatNormalScale.value.negate())),m.iridescence>0&&(v.iridescence.value=m.iridescence,v.iridescenceIOR.value=m.iridescenceIOR,v.iridescenceThicknessMinimum.value=m.iridescenceThicknessRange[0],v.iridescenceThicknessMaximum.value=m.iridescenceThicknessRange[1],m.iridescenceMap&&(v.iridescenceMap.value=m.iridescenceMap),m.iridescenceThicknessMap&&(v.iridescenceThicknessMap.value=m.iridescenceThicknessMap)),m.transmission>0&&(v.transmission.value=m.transmission,v.transmissionSamplerMap.value=g.texture,v.transmissionSamplerSize.value.set(g.width,g.height),m.transmissionMap&&(v.transmissionMap.value=m.transmissionMap),v.thickness.value=m.thickness,m.thicknessMap&&(v.thicknessMap.value=m.thicknessMap),v.attenuationDistance.value=m.attenuationDistance,v.attenuationColor.value.copy(m.attenuationColor)),v.specularIntensity.value=m.specularIntensity,v.specularColor.value.copy(m.specularColor),m.specularIntensityMap&&(v.specularIntensityMap.value=m.specularIntensityMap),m.specularColorMap&&(v.specularColorMap.value=m.specularColorMap)}function f(v,m){m.matcap&&(v.matcap.value=m.matcap)}function p(v,m){v.referencePosition.value.copy(m.referencePosition),v.nearDistance.value=m.nearDistance,v.farDistance.value=m.farDistance}return{refreshFogUniforms:r,refreshMaterialUniforms:i}}function Xdt(e,t,r,i){let n={},a={},o=[],s=r.isWebGL2?e.getParameter(35375):0;function l(y,x){let b=x.program;i.uniformBlockBinding(y,b)}function u(y,x){let b=n[y.id];b===void 0&&(p(y),b=c(y),n[y.id]=b,y.addEventListener("dispose",m));let _=x.program;i.updateUBOMapping(y,_);let w=t.render.frame;a[y.id]!==w&&(d(y),a[y.id]=w)}function c(y){let x=h();y.__bindingPointIndex=x;let b=e.createBuffer(),_=y.__size,w=y.usage;return e.bindBuffer(35345,b),e.bufferData(35345,_,w),e.bindBuffer(35345,null),e.bindBufferBase(35345,x,b),b}function h(){for(let y=0;y<s;y++)if(o.indexOf(y)===-1)return o.push(y),y;return console.error("THREE.WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}function d(y){let x=n[y.id],b=y.uniforms,_=y.__cache;e.bindBuffer(35345,x);for(let w=0,S=b.length;w<S;w++){let A=b[w];if(f(A,w,_)===!0){let M=A.__offset,E=Array.isArray(A.value)?A.value:[A.value],T=0;for(let L=0;L<E.length;L++){let P=E[L],C=v(P);typeof P=="number"?(A.__data[0]=P,e.bufferSubData(35345,M+T,A.__data)):P.isMatrix3?(A.__data[0]=P.elements[0],A.__data[1]=P.elements[1],A.__data[2]=P.elements[2],A.__data[3]=P.elements[0],A.__data[4]=P.elements[3],A.__data[5]=P.elements[4],A.__data[6]=P.elements[5],A.__data[7]=P.elements[0],A.__data[8]=P.elements[6],A.__data[9]=P.elements[7],A.__data[10]=P.elements[8],A.__data[11]=P.elements[0]):(P.toArray(A.__data,T),T+=C.storage/Float32Array.BYTES_PER_ELEMENT)}e.bufferSubData(35345,M,A.__data)}}e.bindBuffer(35345,null)}function f(y,x,b){let _=y.value;if(b[x]===void 0){if(typeof _=="number")b[x]=_;else{let w=Array.isArray(_)?_:[_],S=[];for(let A=0;A<w.length;A++)S.push(w[A].clone());b[x]=S}return!0}else if(typeof _=="number"){if(b[x]!==_)return b[x]=_,!0}else{let w=Array.isArray(b[x])?b[x]:[b[x]],S=Array.isArray(_)?_:[_];for(let A=0;A<w.length;A++){let M=w[A];if(M.equals(S[A])===!1)return M.copy(S[A]),!0}}return!1}function p(y){let x=y.uniforms,b=0,_=16,w=0;for(let S=0,A=x.length;S<A;S++){let M=x[S],E={boundary:0,storage:0},T=Array.isArray(M.value)?M.value:[M.value];for(let L=0,P=T.length;L<P;L++){let C=T[L],D=v(C);E.boundary+=D.boundary,E.storage+=D.storage}if(M.__data=new Float32Array(E.storage/Float32Array.BYTES_PER_ELEMENT),M.__offset=b,S>0){w=b%_;let L=_-w;w!==0&&L-E.boundary<0&&(b+=_-w,M.__offset=b)}b+=E.storage}return w=b%_,w>0&&(b+=_-w),y.__size=b,y.__cache={},this}function v(y){let x={boundary:0,storage:0};return typeof y=="number"?(x.boundary=4,x.storage=4):y.isVector2?(x.boundary=8,x.storage=8):y.isVector3||y.isColor?(x.boundary=16,x.storage=12):y.isVector4?(x.boundary=16,x.storage=16):y.isMatrix3?(x.boundary=48,x.storage=48):y.isMatrix4?(x.boundary=64,x.storage=64):y.isTexture?console.warn("THREE.WebGLRenderer: Texture samplers can not be part of an uniforms group."):console.warn("THREE.WebGLRenderer: Unsupported uniform value type.",y),x}function m(y){let x=y.target;x.removeEventListener("dispose",m);let b=o.indexOf(x.__bindingPointIndex);o.splice(b,1),e.deleteBuffer(n[x.id]),delete n[x.id],delete a[x.id]}function g(){for(let y in n)e.deleteBuffer(n[y]);o=[],n={},a={}}return{bind:l,update:u,dispose:g}}function Zdt(){let e=Iw("canvas");return e.style.display="block",e}function eme(e={}){this.isWebGLRenderer=!0;let t=e.canvas!==void 0?e.canvas:Zdt(),r=e.context!==void 0?e.context:null,i=e.depth!==void 0?e.depth:!0,n=e.stencil!==void 0?e.stencil:!0,a=e.antialias!==void 0?e.antialias:!1,o=e.premultipliedAlpha!==void 0?e.premultipliedAlpha:!0,s=e.preserveDrawingBuffer!==void 0?e.preserveDrawingBuffer:!1,l=e.powerPreference!==void 0?e.powerPreference:"default",u=e.failIfMajorPerformanceCaveat!==void 0?e.failIfMajorPerformanceCaveat:!1,c;r!==null?c=r.getContextAttributes().alpha:c=e.alpha!==void 0?e.alpha:!1;let h=null,d=null,f=[],p=[];this.domElement=t,this.debug={checkShaderErrors:!0},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.outputEncoding=ku,this.physicallyCorrectLights=!1,this.toneMapping=Gc,this.toneMappingExposure=1;let v=this,m=!1,g=0,y=0,x=null,b=-1,_=null,w=new er,S=new er,A=null,M=t.width,E=t.height,T=1,L=null,P=null,C=new er(0,0,M,E),D=new er(0,0,M,E),I=!1,O=new nz,R=!1,H=!1,j=null,N=new Ke,k=new me,G=new U,Y={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};function F(){return x===null?T:1}let Z=r;function ne(ce,De){for(let Oe=0;Oe<ce.length;Oe++){let Le=ce[Oe],Ne=t.getContext(Le,De);if(Ne!==null)return Ne}return null}try{let ce={alpha:!0,depth:i,stencil:n,antialias:a,premultipliedAlpha:o,preserveDrawingBuffer:s,powerPreference:l,failIfMajorPerformanceCaveat:u};if("setAttribute"in t&&t.setAttribute("data-engine",`three.js r${Wy}`),t.addEventListener("webglcontextlost",Je,!1),t.addEventListener("webglcontextrestored",Qe,!1),t.addEventListener("webglcontextcreationerror",Ye,!1),Z===null){let De=["webgl2","webgl","experimental-webgl"];if(v.isWebGL1Renderer===!0&&De.shift(),Z=ne(De,ce),Z===null)throw ne(De)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}Z.getShaderPrecisionFormat===void 0&&(Z.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(ce){throw console.error("THREE.WebGLRenderer: "+ce.message),ce}let re,ae,he,se,fe,J,te,le,Ae,xe,ye,Se,Pe,Ce,ee,K,ve,Me,Q,W,V,z,X,de;function pe(){re=new lht(Z),ae=new rht(Z,re,e),re.init(ae),z=new Gdt(Z,re,ae),he=new Hdt(Z,re,ae),se=new hht,fe=new Tdt,J=new Udt(Z,re,he,fe,ae,z,se),te=new nht(v),le=new sht(v),Ae=new blt(Z,ae),X=new eht(Z,re,Ae,ae),xe=new uht(Z,Ae,se,X),ye=new vht(Z,xe,Ae,se),Q=new pht(Z,ae,J),K=new iht(fe),Se=new Mdt(v,te,le,re,ae,X,K),Pe=new Ydt(v,fe),Ce=new Ddt,ee=new Bdt(re,ae),Me=new $ct(v,te,le,he,ye,c,o),ve=new zdt(v,ye,ae),de=new Xdt(Z,se,ae,he),W=new tht(Z,re,se,ae),V=new cht(Z,re,se,ae),se.programs=Se.programs,v.capabilities=ae,v.extensions=re,v.properties=fe,v.renderLists=Ce,v.shadowMap=ve,v.state=he,v.info=se}pe();let we=new qdt(v,Z);this.xr=we,this.getContext=function(){return Z},this.getContextAttributes=function(){return Z.getContextAttributes()},this.forceContextLoss=function(){let ce=re.get("WEBGL_lose_context");ce&&ce.loseContext()},this.forceContextRestore=function(){let ce=re.get("WEBGL_lose_context");ce&&ce.restoreContext()},this.getPixelRatio=function(){return T},this.setPixelRatio=function(ce){ce!==void 0&&(T=ce,this.setSize(M,E,!1))},this.getSize=function(ce){return ce.set(M,E)},this.setSize=function(ce,De,Oe){if(we.isPresenting){console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting.");return}M=ce,E=De,t.width=Math.floor(ce*T),t.height=Math.floor(De*T),Oe!==!1&&(t.style.width=ce+"px",t.style.height=De+"px"),this.setViewport(0,0,ce,De)},this.getDrawingBufferSize=function(ce){return ce.set(M*T,E*T).floor()},this.setDrawingBufferSize=function(ce,De,Oe){M=ce,E=De,T=Oe,t.width=Math.floor(ce*Oe),t.height=Math.floor(De*Oe),this.setViewport(0,0,ce,De)},this.getCurrentViewport=function(ce){return ce.copy(w)},this.getViewport=function(ce){return ce.copy(C)},this.setViewport=function(ce,De,Oe,Le){ce.isVector4?C.set(ce.x,ce.y,ce.z,ce.w):C.set(ce,De,Oe,Le),he.viewport(w.copy(C).multiplyScalar(T).floor())},this.getScissor=function(ce){return ce.copy(D)},this.setScissor=function(ce,De,Oe,Le){ce.isVector4?D.set(ce.x,ce.y,ce.z,ce.w):D.set(ce,De,Oe,Le),he.scissor(S.copy(D).multiplyScalar(T).floor())},this.getScissorTest=function(){return I},this.setScissorTest=function(ce){he.setScissorTest(I=ce)},this.setOpaqueSort=function(ce){L=ce},this.setTransparentSort=function(ce){P=ce},this.getClearColor=function(ce){return ce.copy(Me.getClearColor())},this.setClearColor=function(){Me.setClearColor.apply(Me,arguments)},this.getClearAlpha=function(){return Me.getClearAlpha()},this.setClearAlpha=function(){Me.setClearAlpha.apply(Me,arguments)},this.clear=function(ce=!0,De=!0,Oe=!0){let Le=0;ce&&(Le|=16384),De&&(Le|=256),Oe&&(Le|=1024),Z.clear(Le)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){t.removeEventListener("webglcontextlost",Je,!1),t.removeEventListener("webglcontextrestored",Qe,!1),t.removeEventListener("webglcontextcreationerror",Ye,!1),Ce.dispose(),ee.dispose(),fe.dispose(),te.dispose(),le.dispose(),ye.dispose(),X.dispose(),de.dispose(),Se.dispose(),we.dispose(),we.removeEventListener("sessionstart",$e),we.removeEventListener("sessionend",Pt),j&&(j.dispose(),j=null),St.stop()};function Je(ce){ce.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),m=!0}function Qe(){console.log("THREE.WebGLRenderer: Context Restored."),m=!1;let ce=se.autoReset,De=ve.enabled,Oe=ve.autoUpdate,Le=ve.needsUpdate,Ne=ve.type;pe(),se.autoReset=ce,ve.enabled=De,ve.autoUpdate=Oe,ve.needsUpdate=Le,ve.type=Ne}function Ye(ce){console.error("THREE.WebGLRenderer: A WebGL context could not be created. Reason: ",ce.statusMessage)}function gt(ce){let De=ce.target;De.removeEventListener("dispose",gt),ct(De)}function ct(ce){be(ce),fe.remove(ce)}function be(ce){let De=fe.get(ce).programs;De!==void 0&&(De.forEach(function(Oe){Se.releaseProgram(Oe)}),ce.isShaderMaterial&&Se.releaseShaderCache(ce))}this.renderBufferDirect=function(ce,De,Oe,Le,Ne,ot){De===null&&(De=Y);let Gt=Ne.isMesh&&Ne.matrixWorld.determinant()<0,wt=ji(ce,De,Oe,Le,Ne);he.setMaterial(Le,Gt);let ft=Oe.index,Rr=1;Le.wireframe===!0&&(ft=xe.getWireframeAttribute(Oe),Rr=2);let nr=Oe.drawRange,ur=Oe.attributes.position,Qt=nr.start*Rr,Wi=(nr.start+nr.count)*Rr;ot!==null&&(Qt=Math.max(Qt,ot.start*Rr),Wi=Math.min(Wi,(ot.start+ot.count)*Rr)),ft!==null?(Qt=Math.max(Qt,0),Wi=Math.min(Wi,ft.count)):ur!=null&&(Qt=Math.max(Qt,0),Wi=Math.min(Wi,ur.count));let Ja=Wi-Qt;if(Ja<0||Ja===1/0)return;X.setup(Ne,Le,wt,Oe,ft);let Ts,Bi=W;if(ft!==null&&(Ts=Ae.get(ft),Bi=V,Bi.setIndex(Ts)),Ne.isMesh)Le.wireframe===!0?(he.setLineWidth(Le.wireframeLinewidth*F()),Bi.setMode(1)):Bi.setMode(4);else if(Ne.isLine){let Cr=Le.linewidth;Cr===void 0&&(Cr=1),he.setLineWidth(Cr*F()),Ne.isLineSegments?Bi.setMode(1):Ne.isLineLoop?Bi.setMode(2):Bi.setMode(3)}else Ne.isPoints?Bi.setMode(0):Ne.isSprite&&Bi.setMode(4);if(Ne.isInstancedMesh)Bi.renderInstances(Qt,Ja,Ne.count);else if(Oe.isInstancedBufferGeometry){let Cr=Oe._maxInstanceCount!==void 0?Oe._maxInstanceCount:1/0,Eo=Math.min(Oe.instanceCount,Cr);Bi.renderInstances(Qt,Ja,Eo)}else Bi.render(Qt,Ja)},this.compile=function(ce,De){function Oe(Le,Ne,ot){Le.transparent===!0&&Le.side===go&&Le.forceSinglePass===!1?(Le.side=ba,Le.needsUpdate=!0,Sr(Le,Ne,ot),Le.side=Lu,Le.needsUpdate=!0,Sr(Le,Ne,ot),Le.side=go):Sr(Le,Ne,ot)}d=ee.get(ce),d.init(),p.push(d),ce.traverseVisible(function(Le){Le.isLight&&Le.layers.test(De.layers)&&(d.pushLight(Le),Le.castShadow&&d.pushShadow(Le))}),d.setupLights(v.physicallyCorrectLights),ce.traverse(function(Le){let Ne=Le.material;if(Ne)if(Array.isArray(Ne))for(let ot=0;ot<Ne.length;ot++){let Gt=Ne[ot];Oe(Gt,ce,Le)}else Oe(Ne,ce,Le)}),p.pop(),d=null};let ze=null;function He(ce){ze&&ze(ce)}function $e(){St.stop()}function Pt(){St.start()}let St=new Xve;St.setAnimationLoop(He),typeof self<"u"&&St.setContext(self),this.setAnimationLoop=function(ce){ze=ce,we.setAnimationLoop(ce),ce===null?St.stop():St.start()},we.addEventListener("sessionstart",$e),we.addEventListener("sessionend",Pt),this.render=function(ce,De){if(De!==void 0&&De.isCamera!==!0){console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");return}if(m===!0)return;ce.matrixWorldAutoUpdate===!0&&ce.updateMatrixWorld(),De.parent===null&&De.matrixWorldAutoUpdate===!0&&De.updateMatrixWorld(),we.enabled===!0&&we.isPresenting===!0&&(we.cameraAutoUpdate===!0&&we.updateCamera(De),De=we.getCamera()),ce.isScene===!0&&ce.onBeforeRender(v,ce,De,x),d=ee.get(ce,p.length),d.init(),p.push(d),N.multiplyMatrices(De.projectionMatrix,De.matrixWorldInverse),O.setFromProjectionMatrix(N),H=this.localClippingEnabled,R=K.init(this.clippingPlanes,H),h=Ce.get(ce,f.length),h.init(),f.push(h),rr(ce,De,0,v.sortObjects),h.finish(),v.sortObjects===!0&&h.sort(L,P),R===!0&&K.beginShadows();let Oe=d.state.shadowsArray;if(ve.render(Oe,ce,De),R===!0&&K.endShadows(),this.info.autoReset===!0&&this.info.reset(),Me.render(h,ce),d.setupLights(v.physicallyCorrectLights),De.isArrayCamera){let Le=De.cameras;for(let Ne=0,ot=Le.length;Ne<ot;Ne++){let Gt=Le[Ne];Ai(h,ce,Gt,Gt.viewport)}}else Ai(h,ce,De);x!==null&&(J.updateMultisampleRenderTarget(x),J.updateRenderTargetMipmap(x)),ce.isScene===!0&&ce.onAfterRender(v,ce,De),X.resetDefaultState(),b=-1,_=null,p.pop(),p.length>0?d=p[p.length-1]:d=null,f.pop(),f.length>0?h=f[f.length-1]:h=null};function rr(ce,De,Oe,Le){if(ce.visible===!1)return;if(ce.layers.test(De.layers)){if(ce.isGroup)Oe=ce.renderOrder;else if(ce.isLOD)ce.autoUpdate===!0&&ce.update(De);else if(ce.isLight)d.pushLight(ce),ce.castShadow&&d.pushShadow(ce);else if(ce.isSprite){if(!ce.frustumCulled||O.intersectsSprite(ce)){Le&&G.setFromMatrixPosition(ce.matrixWorld).applyMatrix4(N);let ot=ye.update(ce),Gt=ce.material;Gt.visible&&h.push(ce,ot,Gt,Oe,G.z,null)}}else if((ce.isMesh||ce.isLine||ce.isPoints)&&(ce.isSkinnedMesh&&ce.skeleton.frame!==se.render.frame&&(ce.skeleton.update(),ce.skeleton.frame=se.render.frame),!ce.frustumCulled||O.intersectsObject(ce))){Le&&G.setFromMatrixPosition(ce.matrixWorld).applyMatrix4(N);let ot=ye.update(ce),Gt=ce.material;if(Array.isArray(Gt)){let wt=ot.groups;for(let ft=0,Rr=wt.length;ft<Rr;ft++){let nr=wt[ft],ur=Gt[nr.materialIndex];ur&&ur.visible&&h.push(ce,ot,ur,Oe,G.z,nr)}}else Gt.visible&&h.push(ce,ot,Gt,Oe,G.z,null)}}let Ne=ce.children;for(let ot=0,Gt=Ne.length;ot<Gt;ot++)rr(Ne[ot],De,Oe,Le)}function Ai(ce,De,Oe,Le){let Ne=ce.opaque,ot=ce.transmissive,Gt=ce.transparent;d.setupLightsView(Oe),R===!0&&K.setGlobalState(v.clippingPlanes,Oe),ot.length>0&&Vr(Ne,De,Oe),Le&&he.viewport(w.copy(Le)),Ne.length>0&&Ft(Ne,De,Oe),ot.length>0&&Ft(ot,De,Oe),Gt.length>0&&Ft(Gt,De,Oe),he.buffers.depth.setTest(!0),he.buffers.depth.setMask(!0),he.buffers.color.setMask(!0),he.setPolygonOffset(!1)}function Vr(ce,De,Oe){let Le=ae.isWebGL2;j===null&&(j=new ui(1,1,{generateMipmaps:!0,type:re.has("EXT_color_buffer_half_float")?Cd:So,minFilter:J1,samples:Le&&a===!0?4:0})),v.getDrawingBufferSize(k),Le?j.setSize(k.x,k.y):j.setSize(FS(k.x),FS(k.y));let Ne=v.getRenderTarget();v.setRenderTarget(j),v.clear();let ot=v.toneMapping;v.toneMapping=Gc,Ft(ce,De,Oe),v.toneMapping=ot,J.updateMultisampleRenderTarget(j),J.updateRenderTargetMipmap(j),v.setRenderTarget(Ne)}function Ft(ce,De,Oe){let Le=De.isScene===!0?De.overrideMaterial:null;for(let Ne=0,ot=ce.length;Ne<ot;Ne++){let Gt=ce[Ne],wt=Gt.object,ft=Gt.geometry,Rr=Le===null?Gt.material:Le,nr=Gt.group;wt.layers.test(Oe.layers)&&on(wt,De,Oe,ft,Rr,nr)}}function on(ce,De,Oe,Le,Ne,ot){ce.onBeforeRender(v,De,Oe,Le,Ne,ot),ce.modelViewMatrix.multiplyMatrices(Oe.matrixWorldInverse,ce.matrixWorld),ce.normalMatrix.getNormalMatrix(ce.modelViewMatrix),Ne.onBeforeRender(v,De,Oe,Le,ce,ot),Ne.transparent===!0&&Ne.side===go&&Ne.forceSinglePass===!1?(Ne.side=ba,Ne.needsUpdate=!0,v.renderBufferDirect(Oe,De,Le,Ne,ce,ot),Ne.side=Lu,Ne.needsUpdate=!0,v.renderBufferDirect(Oe,De,Le,Ne,ce,ot),Ne.side=go):v.renderBufferDirect(Oe,De,Le,Ne,ce,ot),ce.onAfterRender(v,De,Oe,Le,Ne,ot)}function Sr(ce,De,Oe){De.isScene!==!0&&(De=Y);let Le=fe.get(ce),Ne=d.state.lights,ot=d.state.shadowsArray,Gt=Ne.state.version,wt=Se.getParameters(ce,Ne.state,ot,De,Oe),ft=Se.getProgramCacheKey(wt),Rr=Le.programs;Le.environment=ce.isMeshStandardMaterial?De.environment:null,Le.fog=De.fog,Le.envMap=(ce.isMeshStandardMaterial?le:te).get(ce.envMap||Le.environment),Rr===void 0&&(ce.addEventListener("dispose",gt),Rr=new Map,Le.programs=Rr);let nr=Rr.get(ft);if(nr!==void 0){if(Le.currentProgram===nr&&Le.lightsStateVersion===Gt)return qr(ce,wt),nr}else wt.uniforms=Se.getUniforms(ce),ce.onBuild(Oe,wt,v),ce.onBeforeCompile(wt,v),nr=Se.acquireProgram(wt,ft),Rr.set(ft,nr),Le.uniforms=wt.uniforms;let ur=Le.uniforms;(!ce.isShaderMaterial&&!ce.isRawShaderMaterial||ce.clipping===!0)&&(ur.clippingPlanes=K.uniform),qr(ce,wt),Le.needsLights=Jr(ce),Le.lightsStateVersion=Gt,Le.needsLights&&(ur.ambientLightColor.value=Ne.state.ambient,ur.lightProbe.value=Ne.state.probe,ur.directionalLights.value=Ne.state.directional,ur.directionalLightShadows.value=Ne.state.directionalShadow,ur.spotLights.value=Ne.state.spot,ur.spotLightShadows.value=Ne.state.spotShadow,ur.rectAreaLights.value=Ne.state.rectArea,ur.ltc_1.value=Ne.state.rectAreaLTC1,ur.ltc_2.value=Ne.state.rectAreaLTC2,ur.pointLights.value=Ne.state.point,ur.pointLightShadows.value=Ne.state.pointShadow,ur.hemisphereLights.value=Ne.state.hemi,ur.directionalShadowMap.value=Ne.state.directionalShadowMap,ur.directionalShadowMatrix.value=Ne.state.directionalShadowMatrix,ur.spotShadowMap.value=Ne.state.spotShadowMap,ur.spotLightMatrix.value=Ne.state.spotLightMatrix,ur.spotLightMap.value=Ne.state.spotLightMap,ur.pointShadowMap.value=Ne.state.pointShadowMap,ur.pointShadowMatrix.value=Ne.state.pointShadowMatrix);let Qt=nr.getUniforms(),Wi=zA.seqWithValue(Qt.seq,ur);return Le.currentProgram=nr,Le.uniformsList=Wi,nr}function qr(ce,De){let Oe=fe.get(ce);Oe.outputEncoding=De.outputEncoding,Oe.instancing=De.instancing,Oe.skinning=De.skinning,Oe.morphTargets=De.morphTargets,Oe.morphNormals=De.morphNormals,Oe.morphColors=De.morphColors,Oe.morphTargetsCount=De.morphTargetsCount,Oe.numClippingPlanes=De.numClippingPlanes,Oe.numIntersection=De.numClipIntersection,Oe.vertexAlphas=De.vertexAlphas,Oe.vertexTangents=De.vertexTangents,Oe.toneMapping=De.toneMapping}function ji(ce,De,Oe,Le,Ne){De.isScene!==!0&&(De=Y),J.resetTextureUnits();let ot=De.fog,Gt=Le.isMeshStandardMaterial?De.environment:null,wt=x===null?v.outputEncoding:x.isXRRenderTarget===!0?x.texture.encoding:ku,ft=(Le.isMeshStandardMaterial?le:te).get(Le.envMap||Gt),Rr=Le.vertexColors===!0&&!!Oe.attributes.color&&Oe.attributes.color.itemSize===4,nr=!!Le.normalMap&&!!Oe.attributes.tangent,ur=!!Oe.morphAttributes.position,Qt=!!Oe.morphAttributes.normal,Wi=!!Oe.morphAttributes.color,Ja=Le.toneMapped?v.toneMapping:Gc,Ts=Oe.morphAttributes.position||Oe.morphAttributes.normal||Oe.morphAttributes.color,Bi=Ts!==void 0?Ts.length:0,Cr=fe.get(Le),Eo=d.state.lights;if(R===!0&&(H===!0||ce!==_)){let oe=ce===_&&Le.id===b;K.setState(Le,ce,oe)}let gr=!1;Le.version===Cr.__version?(Cr.needsLights&&Cr.lightsStateVersion!==Eo.state.version||Cr.outputEncoding!==wt||Ne.isInstancedMesh&&Cr.instancing===!1||!Ne.isInstancedMesh&&Cr.instancing===!0||Ne.isSkinnedMesh&&Cr.skinning===!1||!Ne.isSkinnedMesh&&Cr.skinning===!0||Cr.envMap!==ft||Le.fog===!0&&Cr.fog!==ot||Cr.numClippingPlanes!==void 0&&(Cr.numClippingPlanes!==K.numPlanes||Cr.numIntersection!==K.numIntersection)||Cr.vertexAlphas!==Rr||Cr.vertexTangents!==nr||Cr.morphTargets!==ur||Cr.morphNormals!==Qt||Cr.morphColors!==Wi||Cr.toneMapping!==Ja||ae.isWebGL2===!0&&Cr.morphTargetsCount!==Bi)&&(gr=!0):(gr=!0,Cr.__version=Le.version);let Ps=Cr.currentProgram;gr===!0&&(Ps=Sr(Le,De,Ne));let Gl=!1,Ks=!1,ts=!1,$=Ps.getUniforms(),ie=Cr.uniforms;if(he.useProgram(Ps.program)&&(Gl=!0,Ks=!0,ts=!0),Le.id!==b&&(b=Le.id,Ks=!0),Gl||_!==ce){if($.setValue(Z,"projectionMatrix",ce.projectionMatrix),ae.logarithmicDepthBuffer&&$.setValue(Z,"logDepthBufFC",2/(Math.log(ce.far+1)/Math.LN2)),_!==ce&&(_=ce,Ks=!0,ts=!0),Le.isShaderMaterial||Le.isMeshPhongMaterial||Le.isMeshToonMaterial||Le.isMeshStandardMaterial||Le.envMap){let oe=$.map.cameraPosition;oe!==void 0&&oe.setValue(Z,G.setFromMatrixPosition(ce.matrixWorld))}(Le.isMeshPhongMaterial||Le.isMeshToonMaterial||Le.isMeshLambertMaterial||Le.isMeshBasicMaterial||Le.isMeshStandardMaterial||Le.isShaderMaterial)&&$.setValue(Z,"isOrthographic",ce.isOrthographicCamera===!0),(Le.isMeshPhongMaterial||Le.isMeshToonMaterial||Le.isMeshLambertMaterial||Le.isMeshBasicMaterial||Le.isMeshStandardMaterial||Le.isShaderMaterial||Le.isShadowMaterial||Ne.isSkinnedMesh)&&$.setValue(Z,"viewMatrix",ce.matrixWorldInverse)}if(Ne.isSkinnedMesh){$.setOptional(Z,Ne,"bindMatrix"),$.setOptional(Z,Ne,"bindMatrixInverse");let oe=Ne.skeleton;oe&&(ae.floatVertexTextures?(oe.boneTexture===null&&oe.computeBoneTexture(),$.setValue(Z,"boneTexture",oe.boneTexture,J),$.setValue(Z,"boneTextureSize",oe.boneTextureSize)):console.warn("THREE.WebGLRenderer: SkinnedMesh can only be used with WebGL 2. With WebGL 1 OES_texture_float and vertex textures support is required."))}let ge=Oe.morphAttributes;if((ge.position!==void 0||ge.normal!==void 0||ge.color!==void 0&&ae.isWebGL2===!0)&&Q.update(Ne,Oe,Le,Ps),(Ks||Cr.receiveShadow!==Ne.receiveShadow)&&(Cr.receiveShadow=Ne.receiveShadow,$.setValue(Z,"receiveShadow",Ne.receiveShadow)),Le.isMeshGouraudMaterial&&Le.envMap!==null&&(ie.envMap.value=ft,ie.flipEnvMap.value=ft.isCubeTexture&&ft.isRenderTargetTexture===!1?-1:1),Ks&&($.setValue(Z,"toneMappingExposure",v.toneMappingExposure),Cr.needsLights&&Fr(ie,ts),ot&&Le.fog===!0&&Pe.refreshFogUniforms(ie,ot),Pe.refreshMaterialUniforms(ie,Le,T,E,j),zA.upload(Z,Cr.uniformsList,ie,J)),Le.isShaderMaterial&&Le.uniformsNeedUpdate===!0&&(zA.upload(Z,Cr.uniformsList,ie,J),Le.uniformsNeedUpdate=!1),Le.isSpriteMaterial&&$.setValue(Z,"center",Ne.center),$.setValue(Z,"modelViewMatrix",Ne.modelViewMatrix),$.setValue(Z,"normalMatrix",Ne.normalMatrix),$.setValue(Z,"modelMatrix",Ne.matrixWorld),Ne.previousModelViewMatrix&&$.setValue(Z,"previousModelViewMatrix",Ne.previousModelViewMatrix),ce.previousProjectionMatrix&&$.setValue(Z,"previousProjectionMatrix",ce.previousProjectionMatrix),Le.isShaderMaterial||Le.isRawShaderMaterial){let oe=Le.uniformsGroups;for(let Ee=0,rt=oe.length;Ee<rt;Ee++)if(ae.isWebGL2){let vh=oe[Ee];de.update(vh,Ps),de.bind(vh,Ps)}else console.warn("THREE.WebGLRenderer: Uniform Buffer Objects can only be used with WebGL 2.")}return Ps}function Fr(ce,De){ce.ambientLightColor.needsUpdate=De,ce.lightProbe.needsUpdate=De,ce.directionalLights.needsUpdate=De,ce.directionalLightShadows.needsUpdate=De,ce.pointLights.needsUpdate=De,ce.pointLightShadows.needsUpdate=De,ce.spotLights.needsUpdate=De,ce.spotLightShadows.needsUpdate=De,ce.rectAreaLights.needsUpdate=De,ce.hemisphereLights.needsUpdate=De}function Jr(ce){return ce.isMeshLambertMaterial||ce.isMeshToonMaterial||ce.isMeshPhongMaterial||ce.isMeshStandardMaterial||ce.isShadowMaterial||ce.isShaderMaterial&&ce.lights===!0}this.getActiveCubeFace=function(){return g},this.getActiveMipmapLevel=function(){return y},this.getRenderTarget=function(){return x},this.setRenderTargetTextures=function(ce,De,Oe){fe.get(ce.texture).__webglTexture=De,fe.get(ce.depthTexture).__webglTexture=Oe;let Le=fe.get(ce);Le.__hasExternalTextures=!0,Le.__hasExternalTextures&&(Le.__autoAllocateDepthBuffer=Oe===void 0,Le.__autoAllocateDepthBuffer||re.has("WEBGL_multisampled_render_to_texture")===!0&&(console.warn("THREE.WebGLRenderer: Render-to-texture extension was disabled because an external texture was provided"),Le.__useRenderToTexture=!1))},this.setRenderTargetFramebuffer=function(ce,De){let Oe=fe.get(ce);Oe.__webglFramebuffer=De,Oe.__useDefaultFramebuffer=De===void 0},this.setRenderTarget=function(ce,De=0,Oe=0){x=ce,g=De,y=Oe;let Le=!0,Ne=null,ot=!1,Gt=!1;if(ce){let wt=fe.get(ce);wt.__useDefaultFramebuffer!==void 0?(he.bindFramebuffer(36160,null),Le=!1):wt.__webglFramebuffer===void 0?J.setupRenderTarget(ce):wt.__hasExternalTextures&&J.rebindTextures(ce,fe.get(ce.texture).__webglTexture,fe.get(ce.depthTexture).__webglTexture);let ft=ce.texture;(ft.isData3DTexture||ft.isDataArrayTexture||ft.isCompressedArrayTexture)&&(Gt=!0);let Rr=fe.get(ce).__webglFramebuffer;ce.isWebGLCubeRenderTarget?(Ne=Rr[De],ot=!0):ae.isWebGL2&&ce.samples>0&&J.useMultisampledRTT(ce)===!1?Ne=fe.get(ce).__webglMultisampledFramebuffer:Ne=Rr,w.copy(ce.viewport),S.copy(ce.scissor),A=ce.scissorTest}else w.copy(C).multiplyScalar(T).floor(),S.copy(D).multiplyScalar(T).floor(),A=I;if(he.bindFramebuffer(36160,Ne)&&ae.drawBuffers&&Le&&he.drawBuffers(ce,Ne),he.viewport(w),he.scissor(S),he.setScissorTest(A),ot){let wt=fe.get(ce.texture);Z.framebufferTexture2D(36160,36064,34069+De,wt.__webglTexture,Oe)}else if(Gt){let wt=fe.get(ce.texture),ft=De||0;Z.framebufferTextureLayer(36160,36064,wt.__webglTexture,Oe||0,ft)}b=-1},this.readRenderTargetPixels=function(ce,De,Oe,Le,Ne,ot,Gt){if(!(ce&&ce.isWebGLRenderTarget)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");return}let wt=fe.get(ce).__webglFramebuffer;if(ce.isWebGLCubeRenderTarget&&Gt!==void 0&&(wt=wt[Gt]),wt){he.bindFramebuffer(36160,wt);try{let ft=ce.texture,Rr=ft.format,nr=ft.type;if(Rr!==ga&&z.convert(Rr)!==Z.getParameter(35739)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");return}let ur=nr===Cd&&(re.has("EXT_color_buffer_half_float")||ae.isWebGL2&&re.has("EXT_color_buffer_float"));if(nr!==So&&z.convert(nr)!==Z.getParameter(35738)&&!(nr===On&&(ae.isWebGL2||re.has("OES_texture_float")||re.has("WEBGL_color_buffer_float")))&&!ur){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");return}De>=0&&De<=ce.width-Le&&Oe>=0&&Oe<=ce.height-Ne&&Z.readPixels(De,Oe,Le,Ne,z.convert(Rr),z.convert(nr),ot)}finally{let ft=x!==null?fe.get(x).__webglFramebuffer:null;he.bindFramebuffer(36160,ft)}}},this.copyFramebufferToTexture=function(ce,De,Oe=0){let Le=Math.pow(2,-Oe),Ne=Math.floor(De.image.width*Le),ot=Math.floor(De.image.height*Le);J.setTexture2D(De,0),Z.copyTexSubImage2D(3553,Oe,0,0,ce.x,ce.y,Ne,ot),he.unbindTexture()},this.copyTextureToTexture=function(ce,De,Oe,Le=0){let Ne=De.image.width,ot=De.image.height,Gt=z.convert(Oe.format),wt=z.convert(Oe.type);J.setTexture2D(Oe,0),Z.pixelStorei(37440,Oe.flipY),Z.pixelStorei(37441,Oe.premultiplyAlpha),Z.pixelStorei(3317,Oe.unpackAlignment),De.isDataTexture?Z.texSubImage2D(3553,Le,ce.x,ce.y,Ne,ot,Gt,wt,De.image.data):De.isCompressedTexture?Z.compressedTexSubImage2D(3553,Le,ce.x,ce.y,De.mipmaps[0].width,De.mipmaps[0].height,Gt,De.mipmaps[0].data):Z.texSubImage2D(3553,Le,ce.x,ce.y,Gt,wt,De.image),Le===0&&Oe.generateMipmaps&&Z.generateMipmap(3553),he.unbindTexture()},this.copyTextureToTexture3D=function(ce,De,Oe,Le,Ne=0){if(v.isWebGL1Renderer){console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: can only be used with WebGL2.");return}let ot=ce.max.x-ce.min.x+1,Gt=ce.max.y-ce.min.y+1,wt=ce.max.z-ce.min.z+1,ft=z.convert(Le.format),Rr=z.convert(Le.type),nr;if(Le.isData3DTexture)J.setTexture3D(Le,0),nr=32879;else if(Le.isDataArrayTexture)J.setTexture2DArray(Le,0),nr=35866;else{console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: only supports THREE.DataTexture3D and THREE.DataTexture2DArray.");return}Z.pixelStorei(37440,Le.flipY),Z.pixelStorei(37441,Le.premultiplyAlpha),Z.pixelStorei(3317,Le.unpackAlignment);let ur=Z.getParameter(3314),Qt=Z.getParameter(32878),Wi=Z.getParameter(3316),Ja=Z.getParameter(3315),Ts=Z.getParameter(32877),Bi=Oe.isCompressedTexture?Oe.mipmaps[0]:Oe.image;Z.pixelStorei(3314,Bi.width),Z.pixelStorei(32878,Bi.height),Z.pixelStorei(3316,ce.min.x),Z.pixelStorei(3315,ce.min.y),Z.pixelStorei(32877,ce.min.z),Oe.isDataTexture||Oe.isData3DTexture?Z.texSubImage3D(nr,Ne,De.x,De.y,De.z,ot,Gt,wt,ft,Rr,Bi.data):Oe.isCompressedArrayTexture?(console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: untested support for compressed srcTexture."),Z.compressedTexSubImage3D(nr,Ne,De.x,De.y,De.z,ot,Gt,wt,ft,Bi.data)):Z.texSubImage3D(nr,Ne,De.x,De.y,De.z,ot,Gt,wt,ft,Rr,Bi),Z.pixelStorei(3314,ur),Z.pixelStorei(32878,Qt),Z.pixelStorei(3316,Wi),Z.pixelStorei(3315,Ja),Z.pixelStorei(32877,Ts),Ne===0&&Le.generateMipmaps&&Z.generateMipmap(nr),he.unbindTexture()},this.initTexture=function(ce){ce.isCubeTexture?J.setTextureCube(ce,0):ce.isData3DTexture?J.setTexture3D(ce,0):ce.isDataArrayTexture||ce.isCompressedArrayTexture?J.setTexture2DArray(ce,0):J.setTexture2D(ce,0),he.unbindTexture()},this.resetState=function(){g=0,y=0,x=null,he.reset(),X.reset()},typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}var Qdt=class extends eme{};Qdt.prototype.isWebGL1Renderer=!0;var tme=class{constructor(e,t=1,r=1e3){this.isFog=!0,this.name="",this.color=new Vt(e),this.near=t,this.far=r}clone(){return new tme(this.color,this.near,this.far)}toJSON(){return{type:"Fog",color:this.color.getHex(),near:this.near,far:this.far}}},jc=class extends _i{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.backgroundBlurriness=0,this.backgroundIntensity=1,this.overrideMaterial=null,typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(e,t){return super.copy(e,t),e.background!==null&&(this.background=e.background.clone()),e.environment!==null&&(this.environment=e.environment.clone()),e.fog!==null&&(this.fog=e.fog.clone()),this.backgroundBlurriness=e.backgroundBlurriness,this.backgroundIntensity=e.backgroundIntensity,e.overrideMaterial!==null&&(this.overrideMaterial=e.overrideMaterial.clone()),this.matrixAutoUpdate=e.matrixAutoUpdate,this}toJSON(e){let t=super.toJSON(e);return this.fog!==null&&(t.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(t.object.backgroundBlurriness=this.backgroundBlurriness),this.backgroundIntensity!==1&&(t.object.backgroundIntensity=this.backgroundIntensity),t}get autoUpdate(){return console.warn("THREE.Scene: autoUpdate was renamed to matrixWorldAutoUpdate in r144."),this.matrixWorldAutoUpdate}set autoUpdate(e){console.warn("THREE.Scene: autoUpdate was renamed to matrixWorldAutoUpdate in r144."),this.matrixWorldAutoUpdate=e}},Kdt=class{constructor(e,t){this.isInterleavedBuffer=!0,this.array=e,this.stride=t,this.count=e!==void 0?e.length/t:0,this.usage=uR,this.updateRange={offset:0,count:-1},this.version=0,this.uuid=Il()}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}copy(e){return this.array=new e.array.constructor(e.array),this.count=e.count,this.stride=e.stride,this.usage=e.usage,this}copyAt(e,t,r){e*=this.stride,r*=t.stride;for(let i=0,n=this.stride;i<n;i++)this.array[e+i]=t.array[r+i];return this}set(e,t=0){return this.array.set(e,t),this}clone(e){e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=Il()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);let t=new this.array.constructor(e.arrayBuffers[this.array.buffer._uuid]),r=new this.constructor(t,this.stride);return r.setUsage(this.usage),r}onUpload(e){return this.onUploadCallback=e,this}toJSON(e){return e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=Il()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=Array.from(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}},Po=new U,fR=class{constructor(e,t,r,i=!1){this.isInterleavedBufferAttribute=!0,this.name="",this.data=e,this.itemSize=t,this.offset=r,this.normalized=i}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(e){this.data.needsUpdate=e}applyMatrix4(e){for(let t=0,r=this.data.count;t<r;t++)Po.fromBufferAttribute(this,t),Po.applyMatrix4(e),this.setXYZ(t,Po.x,Po.y,Po.z);return this}applyNormalMatrix(e){for(let t=0,r=this.count;t<r;t++)Po.fromBufferAttribute(this,t),Po.applyNormalMatrix(e),this.setXYZ(t,Po.x,Po.y,Po.z);return this}transformDirection(e){for(let t=0,r=this.count;t<r;t++)Po.fromBufferAttribute(this,t),Po.transformDirection(e),this.setXYZ(t,Po.x,Po.y,Po.z);return this}setX(e,t){return this.normalized&&(t=Ni(t,this.array)),this.data.array[e*this.data.stride+this.offset]=t,this}setY(e,t){return this.normalized&&(t=Ni(t,this.array)),this.data.array[e*this.data.stride+this.offset+1]=t,this}setZ(e,t){return this.normalized&&(t=Ni(t,this.array)),this.data.array[e*this.data.stride+this.offset+2]=t,this}setW(e,t){return this.normalized&&(t=Ni(t,this.array)),this.data.array[e*this.data.stride+this.offset+3]=t,this}getX(e){let t=this.data.array[e*this.data.stride+this.offset];return this.normalized&&(t=td(t,this.array)),t}getY(e){let t=this.data.array[e*this.data.stride+this.offset+1];return this.normalized&&(t=td(t,this.array)),t}getZ(e){let t=this.data.array[e*this.data.stride+this.offset+2];return this.normalized&&(t=td(t,this.array)),t}getW(e){let t=this.data.array[e*this.data.stride+this.offset+3];return this.normalized&&(t=td(t,this.array)),t}setXY(e,t,r){return e=e*this.data.stride+this.offset,this.normalized&&(t=Ni(t,this.array),r=Ni(r,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=r,this}setXYZ(e,t,r,i){return e=e*this.data.stride+this.offset,this.normalized&&(t=Ni(t,this.array),r=Ni(r,this.array),i=Ni(i,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=r,this.data.array[e+2]=i,this}setXYZW(e,t,r,i,n){return e=e*this.data.stride+this.offset,this.normalized&&(t=Ni(t,this.array),r=Ni(r,this.array),i=Ni(i,this.array),n=Ni(n,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=r,this.data.array[e+2]=i,this.data.array[e+3]=n,this}clone(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interleaved buffer attribute will de-interleave buffer data.");let t=[];for(let r=0;r<this.count;r++){let i=r*this.data.stride+this.offset;for(let n=0;n<this.itemSize;n++)t.push(this.data.array[i+n])}return new Zt(new this.array.constructor(t),this.itemSize,this.normalized)}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.clone(e)),new fR(e.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}toJSON(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interleaved buffer attribute will de-interleave buffer data.");let t=[];for(let r=0;r<this.count;r++){let i=r*this.data.stride+this.offset;for(let n=0;n<this.itemSize;n++)t.push(this.data.array[i+n])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:t,normalized:this.normalized}}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.toJSON(e)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}},rme=class extends _i{constructor(){super(),this.isBone=!0,this.type="Bone"}},Tl=class extends an{constructor(e=null,t=1,r=1,i,n,a,o,s,l=mi,u=mi,c,h){super(null,a,o,s,l,u,i,n,c,h),this.isDataTexture=!0,this.image={data:e,width:t,height:r},this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}},C$=new Ke,Jdt=new Ke,oz=class{constructor(e=[],t=[]){this.uuid=Il(),this.bones=e.slice(0),this.boneInverses=t,this.boneMatrices=null,this.boneTexture=null,this.boneTextureSize=0,this.frame=-1,this.init()}init(){let e=this.bones,t=this.boneInverses;if(this.boneMatrices=new Float32Array(e.length*16),t.length===0)this.calculateInverses();else if(e.length!==t.length){console.warn("THREE.Skeleton: Number of inverse bone matrices does not match amount of bones."),this.boneInverses=[];for(let r=0,i=this.bones.length;r<i;r++)this.boneInverses.push(new Ke)}}calculateInverses(){this.boneInverses.length=0;for(let e=0,t=this.bones.length;e<t;e++){let r=new Ke;this.bones[e]&&r.copy(this.bones[e].matrixWorld).invert(),this.boneInverses.push(r)}}pose(){for(let e=0,t=this.bones.length;e<t;e++){let r=this.bones[e];r&&r.matrixWorld.copy(this.boneInverses[e]).invert()}for(let e=0,t=this.bones.length;e<t;e++){let r=this.bones[e];r&&(r.parent&&r.parent.isBone?(r.matrix.copy(r.parent.matrixWorld).invert(),r.matrix.multiply(r.matrixWorld)):r.matrix.copy(r.matrixWorld),r.matrix.decompose(r.position,r.quaternion,r.scale))}}update(){let e=this.bones,t=this.boneInverses,r=this.boneMatrices,i=this.boneTexture;for(let n=0,a=e.length;n<a;n++){let o=e[n]?e[n].matrixWorld:Jdt;C$.multiplyMatrices(o,t[n]),C$.toArray(r,n*16)}i!==null&&(i.needsUpdate=!0)}clone(){return new oz(this.bones,this.boneInverses)}computeBoneTexture(){let e=Math.sqrt(this.bones.length*4);e=zve(e),e=Math.max(e,4);let t=new Float32Array(e*e*4);t.set(this.boneMatrices);let r=new Tl(t,e,e,ga,On);return r.needsUpdate=!0,this.boneMatrices=t,this.boneTexture=r,this.boneTextureSize=e,this}getBoneByName(e){for(let t=0,r=this.bones.length;t<r;t++){let i=this.bones[t];if(i.name===e)return i}}dispose(){this.boneTexture!==null&&(this.boneTexture.dispose(),this.boneTexture=null)}fromJSON(e,t){this.uuid=e.uuid;for(let r=0,i=e.bones.length;r<i;r++){let n=e.bones[r],a=t[n];a===void 0&&(console.warn("THREE.Skeleton: No bone found with UUID:",n),a=new rme),this.bones.push(a),this.boneInverses.push(new Ke().fromArray(e.boneInverses[r]))}return this.init(),this}toJSON(){let e={metadata:{version:4.5,type:"Skeleton",generator:"Skeleton.toJSON"},bones:[],boneInverses:[]};e.uuid=this.uuid;let t=this.bones,r=this.boneInverses;for(let i=0,n=t.length;i<n;i++){let a=t[i];e.bones.push(a.uuid);let o=r[i];e.boneInverses.push(o.toArray())}return e}},Lw=class extends Zt{constructor(e,t,r,i=1){super(e,t,r),this.isInstancedBufferAttribute=!0,this.meshPerAttribute=i}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}toJSON(){let e=super.toJSON();return e.meshPerAttribute=this.meshPerAttribute,e.isInstancedBufferAttribute=!0,e}},E$=new Ke,M$=new Ke,Z_=[],$dt=new Ke,nx=new nn,eft=class extends nn{constructor(e,t,r){super(e,t),this.isInstancedMesh=!0,this.instanceMatrix=new Lw(new Float32Array(r*16),16),this.instanceColor=null,this.count=r,this.frustumCulled=!1;for(let i=0;i<r;i++)this.setMatrixAt(i,$dt)}copy(e,t){return super.copy(e,t),this.instanceMatrix.copy(e.instanceMatrix),e.instanceColor!==null&&(this.instanceColor=e.instanceColor.clone()),this.count=e.count,this}getColorAt(e,t){t.fromArray(this.instanceColor.array,e*3)}getMatrixAt(e,t){t.fromArray(this.instanceMatrix.array,e*16)}raycast(e,t){let r=this.matrixWorld,i=this.count;if(nx.geometry=this.geometry,nx.material=this.material,nx.material!==void 0)for(let n=0;n<i;n++){this.getMatrixAt(n,E$),M$.multiplyMatrices(r,E$),nx.matrixWorld=M$,nx.raycast(e,Z_);for(let a=0,o=Z_.length;a<o;a++){let s=Z_[a];s.instanceId=n,s.object=this,t.push(s)}Z_.length=0}}setColorAt(e,t){this.instanceColor===null&&(this.instanceColor=new Lw(new Float32Array(this.instanceMatrix.count*3),3)),t.toArray(this.instanceColor.array,e*3)}setMatrixAt(e,t){t.toArray(this.instanceMatrix.array,e*16)}updateMorphTargets(){}dispose(){this.dispatchEvent({type:"dispose"})}},Ip=class extends F4{constructor(e){super(),this.isLineBasicMaterial=!0,this.type="LineBasicMaterial",this.color=new Vt(16777215),this.linewidth=1,this.linecap="round",this.linejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this.fog=e.fog,this}},T$=new U,P$=new U,D$=new Ke,EP=new qy,Q_=new Es,zS=class extends _i{constructor(e=new It,t=new Ip){super(),this.isLine=!0,this.type="Line",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=e.material,this.geometry=e.geometry,this}computeLineDistances(){let e=this.geometry;if(e.index===null){let t=e.attributes.position,r=[0];for(let i=1,n=t.count;i<n;i++)T$.fromBufferAttribute(t,i-1),P$.fromBufferAttribute(t,i),r[i]=r[i-1],r[i]+=T$.distanceTo(P$);e.setAttribute("lineDistance",new ht(r,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}raycast(e,t){let r=this.geometry,i=this.matrixWorld,n=e.params.Line.threshold,a=r.drawRange;if(r.boundingSphere===null&&r.computeBoundingSphere(),Q_.copy(r.boundingSphere),Q_.applyMatrix4(i),Q_.radius+=n,e.ray.intersectsSphere(Q_)===!1)return;D$.copy(i).invert(),EP.copy(e.ray).applyMatrix4(D$);let o=n/((this.scale.x+this.scale.y+this.scale.z)/3),s=o*o,l=new U,u=new U,c=new U,h=new U,d=this.isLineSegments?2:1,f=r.index,p=r.attributes.position;if(f!==null){let v=Math.max(0,a.start),m=Math.min(f.count,a.start+a.count);for(let g=v,y=m-1;g<y;g+=d){let x=f.getX(g),b=f.getX(g+1);if(l.fromBufferAttribute(p,x),u.fromBufferAttribute(p,b),EP.distanceSqToSegment(l,u,h,c)>s)continue;h.applyMatrix4(this.matrixWorld);let _=e.ray.origin.distanceTo(h);_<e.near||_>e.far||t.push({distance:_,point:c.clone().applyMatrix4(this.matrixWorld),index:g,face:null,faceIndex:null,object:this})}}else{let v=Math.max(0,a.start),m=Math.min(p.count,a.start+a.count);for(let g=v,y=m-1;g<y;g+=d){if(l.fromBufferAttribute(p,g),u.fromBufferAttribute(p,g+1),EP.distanceSqToSegment(l,u,h,c)>s)continue;h.applyMatrix4(this.matrixWorld);let x=e.ray.origin.distanceTo(h);x<e.near||x>e.far||t.push({distance:x,point:c.clone().applyMatrix4(this.matrixWorld),index:g,face:null,faceIndex:null,object:this})}}}updateMorphTargets(){let e=this.geometry.morphAttributes,t=Object.keys(e);if(t.length>0){let r=e[t[0]];if(r!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let i=0,n=r.length;i<n;i++){let a=r[i].name||String(i);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=i}}}}},I$=new U,L$=new U,z4=class extends zS{constructor(e,t){super(e,t),this.isLineSegments=!0,this.type="LineSegments"}computeLineDistances(){let e=this.geometry;if(e.index===null){let t=e.attributes.position,r=[];for(let i=0,n=t.count;i<n;i+=2)I$.fromBufferAttribute(t,i),L$.fromBufferAttribute(t,i+1),r[i]=i===0?0:r[i-1],r[i+1]=r[i]+I$.distanceTo(L$);e.setAttribute("lineDistance",new ht(r,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}},tft=class extends an{constructor(e,t,r,i,n,a,o,s,l){super(e,t,r,i,n,a,o,s,l),this.isVideoTexture=!0,this.minFilter=a!==void 0?a:br,this.magFilter=n!==void 0?n:br,this.generateMipmaps=!1;let u=this;function c(){u.needsUpdate=!0,e.requestVideoFrameCallback(c)}"requestVideoFrameCallback"in e&&e.requestVideoFrameCallback(c)}clone(){return new this.constructor(this.image).copy(this)}update(){let e=this.image;!("requestVideoFrameCallback"in e)&&e.readyState>=e.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}},rft=class extends an{constructor(e,t,r,i,n,a,o,s,l){super(e,t,r,i,n,a,o,s,l),this.isCanvasTexture=!0,this.needsUpdate=!0}},dh=class{constructor(){this.type="Curve",this.arcLengthDivisions=200}getPoint(){return console.warn("THREE.Curve: .getPoint() not implemented."),null}getPointAt(e,t){let r=this.getUtoTmapping(e);return this.getPoint(r,t)}getPoints(e=5){let t=[];for(let r=0;r<=e;r++)t.push(this.getPoint(r/e));return t}getSpacedPoints(e=5){let t=[];for(let r=0;r<=e;r++)t.push(this.getPointAt(r/e));return t}getLength(){let e=this.getLengths();return e[e.length-1]}getLengths(e=this.arcLengthDivisions){if(this.cacheArcLengths&&this.cacheArcLengths.length===e+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;let t=[],r,i=this.getPoint(0),n=0;t.push(0);for(let a=1;a<=e;a++)r=this.getPoint(a/e),n+=r.distanceTo(i),t.push(n),i=r;return this.cacheArcLengths=t,t}updateArcLengths(){this.needsUpdate=!0,this.getLengths()}getUtoTmapping(e,t){let r=this.getLengths(),i=0,n=r.length,a;t?a=t:a=e*r[n-1];let o=0,s=n-1,l;for(;o<=s;)if(i=Math.floor(o+(s-o)/2),l=r[i]-a,l<0)o=i+1;else if(l>0)s=i-1;else{s=i;break}if(i=s,r[i]===a)return i/(n-1);let u=r[i],c=r[i+1]-u,h=(a-u)/c;return(i+h)/(n-1)}getTangent(e,t){let r=e-1e-4,i=e+1e-4;r<0&&(r=0),i>1&&(i=1);let n=this.getPoint(r),a=this.getPoint(i),o=t||(n.isVector2?new me:new U);return o.copy(a).sub(n).normalize(),o}getTangentAt(e,t){let r=this.getUtoTmapping(e);return this.getTangent(r,t)}computeFrenetFrames(e,t){let r=new U,i=[],n=[],a=[],o=new U,s=new Ke;for(let d=0;d<=e;d++){let f=d/e;i[d]=this.getTangentAt(f,new U)}n[0]=new U,a[0]=new U;let l=Number.MAX_VALUE,u=Math.abs(i[0].x),c=Math.abs(i[0].y),h=Math.abs(i[0].z);u<=l&&(l=u,r.set(1,0,0)),c<=l&&(l=c,r.set(0,1,0)),h<=l&&r.set(0,0,1),o.crossVectors(i[0],r).normalize(),n[0].crossVectors(i[0],o),a[0].crossVectors(i[0],n[0]);for(let d=1;d<=e;d++){if(n[d]=n[d-1].clone(),a[d]=a[d-1].clone(),o.crossVectors(i[d-1],i[d]),o.length()>Number.EPSILON){o.normalize();let f=Math.acos(Ln(i[d-1].dot(i[d]),-1,1));n[d].applyMatrix4(s.makeRotationAxis(o,f))}a[d].crossVectors(i[d],n[d])}if(t===!0){let d=Math.acos(Ln(n[0].dot(n[e]),-1,1));d/=e,i[0].dot(o.crossVectors(n[0],n[e]))>0&&(d=-d);for(let f=1;f<=e;f++)n[f].applyMatrix4(s.makeRotationAxis(i[f],d*f)),a[f].crossVectors(i[f],n[f])}return{tangents:i,normals:n,binormals:a}}clone(){return new this.constructor().copy(this)}copy(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}toJSON(){let e={metadata:{version:4.5,type:"Curve",generator:"Curve.toJSON"}};return e.arcLengthDivisions=this.arcLengthDivisions,e.type=this.type,e}fromJSON(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}},w7=class extends dh{constructor(e=0,t=0,r=1,i=1,n=0,a=Math.PI*2,o=!1,s=0){super(),this.isEllipseCurve=!0,this.type="EllipseCurve",this.aX=e,this.aY=t,this.xRadius=r,this.yRadius=i,this.aStartAngle=n,this.aEndAngle=a,this.aClockwise=o,this.aRotation=s}getPoint(e,t){let r=t||new me,i=Math.PI*2,n=this.aEndAngle-this.aStartAngle,a=Math.abs(n)<Number.EPSILON;for(;n<0;)n+=i;for(;n>i;)n-=i;n<Number.EPSILON&&(a?n=0:n=i),this.aClockwise===!0&&!a&&(n===i?n=-i:n=n-i);let o=this.aStartAngle+e*n,s=this.aX+this.xRadius*Math.cos(o),l=this.aY+this.yRadius*Math.sin(o);if(this.aRotation!==0){let u=Math.cos(this.aRotation),c=Math.sin(this.aRotation),h=s-this.aX,d=l-this.aY;s=h*u-d*c+this.aX,l=h*c+d*u+this.aY}return r.set(s,l)}copy(e){return super.copy(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}toJSON(){let e=super.toJSON();return e.aX=this.aX,e.aY=this.aY,e.xRadius=this.xRadius,e.yRadius=this.yRadius,e.aStartAngle=this.aStartAngle,e.aEndAngle=this.aEndAngle,e.aClockwise=this.aClockwise,e.aRotation=this.aRotation,e}fromJSON(e){return super.fromJSON(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}},ift=class extends w7{constructor(e,t,r,i,n,a){super(e,t,r,r,i,n,a),this.isArcCurve=!0,this.type="ArcCurve"}};function sz(){let e=0,t=0,r=0,i=0;function n(a,o,s,l){e=a,t=s,r=-3*a+3*o-2*s-l,i=2*a-2*o+s+l}return{initCatmullRom:function(a,o,s,l,u){n(o,s,u*(s-a),u*(l-o))},initNonuniformCatmullRom:function(a,o,s,l,u,c,h){let d=(o-a)/u-(s-a)/(u+c)+(s-o)/c,f=(s-o)/c-(l-o)/(c+h)+(l-s)/h;d*=c,f*=c,n(o,s,d,f)},calc:function(a){let o=a*a,s=o*a;return e+t*a+r*o+i*s}}}var K_=new U,MP=new sz,TP=new sz,PP=new sz,nft=class extends dh{constructor(e=[],t=!1,r="centripetal",i=.5){super(),this.isCatmullRomCurve3=!0,this.type="CatmullRomCurve3",this.points=e,this.closed=t,this.curveType=r,this.tension=i}getPoint(e,t=new U){let r=t,i=this.points,n=i.length,a=(n-(this.closed?0:1))*e,o=Math.floor(a),s=a-o;this.closed?o+=o>0?0:(Math.floor(Math.abs(o)/n)+1)*n:s===0&&o===n-1&&(o=n-2,s=1);let l,u;this.closed||o>0?l=i[(o-1)%n]:(K_.subVectors(i[0],i[1]).add(i[0]),l=K_);let c=i[o%n],h=i[(o+1)%n];if(this.closed||o+2<n?u=i[(o+2)%n]:(K_.subVectors(i[n-1],i[n-2]).add(i[n-1]),u=K_),this.curveType==="centripetal"||this.curveType==="chordal"){let d=this.curveType==="chordal"?.5:.25,f=Math.pow(l.distanceToSquared(c),d),p=Math.pow(c.distanceToSquared(h),d),v=Math.pow(h.distanceToSquared(u),d);p<1e-4&&(p=1),f<1e-4&&(f=p),v<1e-4&&(v=p),MP.initNonuniformCatmullRom(l.x,c.x,h.x,u.x,f,p,v),TP.initNonuniformCatmullRom(l.y,c.y,h.y,u.y,f,p,v),PP.initNonuniformCatmullRom(l.z,c.z,h.z,u.z,f,p,v)}else this.curveType==="catmullrom"&&(MP.initCatmullRom(l.x,c.x,h.x,u.x,this.tension),TP.initCatmullRom(l.y,c.y,h.y,u.y,this.tension),PP.initCatmullRom(l.z,c.z,h.z,u.z,this.tension));return r.set(MP.calc(s),TP.calc(s),PP.calc(s)),r}copy(e){super.copy(e),this.points=[];for(let t=0,r=e.points.length;t<r;t++){let i=e.points[t];this.points.push(i.clone())}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}toJSON(){let e=super.toJSON();e.points=[];for(let t=0,r=this.points.length;t<r;t++){let i=this.points[t];e.points.push(i.toArray())}return e.closed=this.closed,e.curveType=this.curveType,e.tension=this.tension,e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,r=e.points.length;t<r;t++){let i=e.points[t];this.points.push(new U().fromArray(i))}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}};function k$(e,t,r,i,n){let a=(i-t)*.5,o=(n-r)*.5,s=e*e,l=e*s;return(2*r-2*i+a+o)*l+(-3*r+3*i-2*a-o)*s+a*e+r}function aft(e,t){let r=1-e;return r*r*t}function oft(e,t){return 2*(1-e)*e*t}function sft(e,t){return e*e*t}function Eb(e,t,r,i){return aft(e,t)+oft(e,r)+sft(e,i)}function lft(e,t){let r=1-e;return r*r*r*t}function uft(e,t){let r=1-e;return 3*r*r*e*t}function cft(e,t){return 3*(1-e)*e*e*t}function hft(e,t){return e*e*e*t}function Mb(e,t,r,i,n){return lft(e,t)+uft(e,r)+cft(e,i)+hft(e,n)}var mu=class extends dh{constructor(e=new me,t=new me,r=new me,i=new me){super(),this.isCubicBezierCurve=!0,this.type="CubicBezierCurve",this.v0=e,this.v1=t,this.v2=r,this.v3=i}getPoint(e,t=new me){let r=t,i=this.v0,n=this.v1,a=this.v2,o=this.v3;return r.set(Mb(e,i.x,n.x,a.x,o.x),Mb(e,i.y,n.y,a.y,o.y)),r}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){let e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}},HA=class extends dh{constructor(e=new U,t=new U,r=new U,i=new U){super(),this.isCubicBezierCurve3=!0,this.type="CubicBezierCurve3",this.v0=e,this.v1=t,this.v2=r,this.v3=i}getPoint(e,t=new U){let r=t,i=this.v0,n=this.v1,a=this.v2,o=this.v3;return r.set(Mb(e,i.x,n.x,a.x,o.x),Mb(e,i.y,n.y,a.y,o.y),Mb(e,i.z,n.z,a.z,o.z)),r}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){let e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}},Cu=class extends dh{constructor(e=new me,t=new me){super(),this.isLineCurve=!0,this.type="LineCurve",this.v1=e,this.v2=t}getPoint(e,t=new me){let r=t;return e===1?r.copy(this.v2):(r.copy(this.v2).sub(this.v1),r.multiplyScalar(e).add(this.v1)),r}getPointAt(e,t){return this.getPoint(e,t)}getTangent(e,t){let r=t||new me;return r.copy(this.v2).sub(this.v1).normalize(),r}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){let e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}},ime=class extends dh{constructor(e=new U,t=new U){super(),this.isLineCurve3=!0,this.type="LineCurve3",this.v1=e,this.v2=t}getPoint(e,t=new U){let r=t;return e===1?r.copy(this.v2):(r.copy(this.v2).sub(this.v1),r.multiplyScalar(e).add(this.v1)),r}getPointAt(e,t){return this.getPoint(e,t)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){let e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}},xp=class extends dh{constructor(e=new me,t=new me,r=new me){super(),this.isQuadraticBezierCurve=!0,this.type="QuadraticBezierCurve",this.v0=e,this.v1=t,this.v2=r}getPoint(e,t=new me){let r=t,i=this.v0,n=this.v1,a=this.v2;return r.set(Eb(e,i.x,n.x,a.x),Eb(e,i.y,n.y,a.y)),r}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){let e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}},dft=class extends dh{constructor(e=new U,t=new U,r=new U){super(),this.isQuadraticBezierCurve3=!0,this.type="QuadraticBezierCurve3",this.v0=e,this.v1=t,this.v2=r}getPoint(e,t=new U){let r=t,i=this.v0,n=this.v1,a=this.v2;return r.set(Eb(e,i.x,n.x,a.x),Eb(e,i.y,n.y,a.y),Eb(e,i.z,n.z,a.z)),r}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){let e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}},lz=class extends dh{constructor(e=[]){super(),this.isSplineCurve=!0,this.type="SplineCurve",this.points=e}getPoint(e,t=new me){let r=t,i=this.points,n=(i.length-1)*e,a=Math.floor(n),o=n-a,s=i[a===0?a:a-1],l=i[a],u=i[a>i.length-2?i.length-1:a+1],c=i[a>i.length-3?i.length-1:a+2];return r.set(k$(o,s.x,l.x,u.x,c.x),k$(o,s.y,l.y,u.y,c.y)),r}copy(e){super.copy(e),this.points=[];for(let t=0,r=e.points.length;t<r;t++){let i=e.points[t];this.points.push(i.clone())}return this}toJSON(){let e=super.toJSON();e.points=[];for(let t=0,r=this.points.length;t<r;t++){let i=this.points[t];e.points.push(i.toArray())}return e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,r=e.points.length;t<r;t++){let i=e.points[t];this.points.push(new me().fromArray(i))}return this}},fft=Object.freeze({__proto__:null,ArcCurve:ift,CatmullRomCurve3:nft,CubicBezierCurve:mu,CubicBezierCurve3:HA,EllipseCurve:w7,LineCurve:Cu,LineCurve3:ime,QuadraticBezierCurve:xp,QuadraticBezierCurve3:dft,SplineCurve:lz}),nme=class extends dh{constructor(){super(),this.type="CurvePath",this.curves=[],this.autoClose=!1}add(e){this.curves.push(e)}closePath(){let e=this.curves[0].getPoint(0),t=this.curves[this.curves.length-1].getPoint(1);e.equals(t)||this.curves.push(new Cu(t,e))}getPoint(e,t){let r=e*this.getLength(),i=this.getCurveLengths(),n=0;for(;n<i.length;){if(i[n]>=r){let a=i[n]-r,o=this.curves[n],s=o.getLength(),l=s===0?0:1-a/s;return o.getPointAt(l,t)}n++}return null}getLength(){let e=this.getCurveLengths();return e[e.length-1]}updateArcLengths(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()}getCurveLengths(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;let e=[],t=0;for(let r=0,i=this.curves.length;r<i;r++)t+=this.curves[r].getLength(),e.push(t);return this.cacheLengths=e,e}getSpacedPoints(e=40){let t=[];for(let r=0;r<=e;r++)t.push(this.getPoint(r/e));return this.autoClose&&t.push(t[0]),t}getPoints(e=12){let t=[],r;for(let i=0,n=this.curves;i<n.length;i++){let a=n[i],o=a.isEllipseCurve?e*2:a.isLineCurve||a.isLineCurve3?1:a.isSplineCurve?e*a.points.length:e,s=a.getPoints(o);for(let l=0;l<s.length;l++){let u=s[l];r&&r.equals(u)||(t.push(u),r=u)}}return this.autoClose&&t.length>1&&!t[t.length-1].equals(t[0])&&t.push(t[0]),t}copy(e){super.copy(e),this.curves=[];for(let t=0,r=e.curves.length;t<r;t++){let i=e.curves[t];this.curves.push(i.clone())}return this.autoClose=e.autoClose,this}toJSON(){let e=super.toJSON();e.autoClose=this.autoClose,e.curves=[];for(let t=0,r=this.curves.length;t<r;t++){let i=this.curves[t];e.curves.push(i.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.autoClose=e.autoClose,this.curves=[];for(let t=0,r=e.curves.length;t<r;t++){let i=e.curves[t];this.curves.push(new fft[i.type]().fromJSON(i))}return this}},HS=class extends nme{constructor(e){super(),this.type="Path",this.currentPoint=new me,e&&this.setFromPoints(e)}setFromPoints(e){this.moveTo(e[0].x,e[0].y);for(let t=1,r=e.length;t<r;t++)this.lineTo(e[t].x,e[t].y);return this}moveTo(e,t){return this.currentPoint.set(e,t),this}lineTo(e,t){let r=new Cu(this.currentPoint.clone(),new me(e,t));return this.curves.push(r),this.currentPoint.set(e,t),this}quadraticCurveTo(e,t,r,i){let n=new xp(this.currentPoint.clone(),new me(e,t),new me(r,i));return this.curves.push(n),this.currentPoint.set(r,i),this}bezierCurveTo(e,t,r,i,n,a){let o=new mu(this.currentPoint.clone(),new me(e,t),new me(r,i),new me(n,a));return this.curves.push(o),this.currentPoint.set(n,a),this}splineThru(e){let t=[this.currentPoint.clone()].concat(e),r=new lz(t);return this.curves.push(r),this.currentPoint.copy(e[e.length-1]),this}arc(e,t,r,i,n,a){let o=this.currentPoint.x,s=this.currentPoint.y;return this.absarc(e+o,t+s,r,i,n,a),this}absarc(e,t,r,i,n,a){return this.absellipse(e,t,r,r,i,n,a),this}ellipse(e,t,r,i,n,a,o,s){let l=this.currentPoint.x,u=this.currentPoint.y;return this.absellipse(e+l,t+u,r,i,n,a,o,s),this}absellipse(e,t,r,i,n,a,o,s){let l=new w7(e,t,r,i,n,a,o,s);if(this.curves.length>0){let c=l.getPoint(0);c.equals(this.currentPoint)||this.lineTo(c.x,c.y)}this.curves.push(l);let u=l.getPoint(1);return this.currentPoint.copy(u),this}copy(e){return super.copy(e),this.currentPoint.copy(e.currentPoint),this}toJSON(){let e=super.toJSON();return e.currentPoint=this.currentPoint.toArray(),e}fromJSON(e){return super.fromJSON(e),this.currentPoint.fromArray(e.currentPoint),this}},ame=class extends It{constructor(e=[new me(0,-.5),new me(.5,0),new me(0,.5)],t=12,r=0,i=Math.PI*2){super(),this.type="LatheGeometry",this.parameters={points:e,segments:t,phiStart:r,phiLength:i},t=Math.floor(t),i=Ln(i,0,Math.PI*2);let n=[],a=[],o=[],s=[],l=[],u=1/t,c=new U,h=new me,d=new U,f=new U,p=new U,v=0,m=0;for(let g=0;g<=e.length-1;g++)switch(g){case 0:v=e[g+1].x-e[g].x,m=e[g+1].y-e[g].y,d.x=m*1,d.y=-v,d.z=m*0,p.copy(d),d.normalize(),s.push(d.x,d.y,d.z);break;case e.length-1:s.push(p.x,p.y,p.z);break;default:v=e[g+1].x-e[g].x,m=e[g+1].y-e[g].y,d.x=m*1,d.y=-v,d.z=m*0,f.copy(d),d.x+=p.x,d.y+=p.y,d.z+=p.z,d.normalize(),s.push(d.x,d.y,d.z),p.copy(f)}for(let g=0;g<=t;g++){let y=r+g*u*i,x=Math.sin(y),b=Math.cos(y);for(let _=0;_<=e.length-1;_++){c.x=e[_].x*x,c.y=e[_].y,c.z=e[_].x*b,a.push(c.x,c.y,c.z),h.x=g/t,h.y=_/(e.length-1),o.push(h.x,h.y);let w=s[3*_+0]*x,S=s[3*_+1],A=s[3*_+0]*b;l.push(w,S,A)}}for(let g=0;g<t;g++)for(let y=0;y<e.length-1;y++){let x=y+g*e.length,b=x,_=x+e.length,w=x+e.length+1,S=x+1;n.push(b,_,S),n.push(w,S,_)}this.setIndex(n),this.setAttribute("position",new ht(a,3)),this.setAttribute("uv",new ht(o,2)),this.setAttribute("normal",new ht(l,3))}static fromJSON(e){return new ame(e.points,e.segments,e.phiStart,e.phiLength)}},uz=class extends It{constructor(e=1,t=1,r=1,i=32,n=1,a=!1,o=0,s=Math.PI*2){super(),this.type="CylinderGeometry",this.parameters={radiusTop:e,radiusBottom:t,height:r,radialSegments:i,heightSegments:n,openEnded:a,thetaStart:o,thetaLength:s};let l=this;i=Math.floor(i),n=Math.floor(n);let u=[],c=[],h=[],d=[],f=0,p=[],v=r/2,m=0;g(),a===!1&&(e>0&&y(!0),t>0&&y(!1)),this.setIndex(u),this.setAttribute("position",new ht(c,3)),this.setAttribute("normal",new ht(h,3)),this.setAttribute("uv",new ht(d,2));function g(){let x=new U,b=new U,_=0,w=(t-e)/r;for(let S=0;S<=n;S++){let A=[],M=S/n,E=M*(t-e)+e;for(let T=0;T<=i;T++){let L=T/i,P=L*s+o,C=Math.sin(P),D=Math.cos(P);b.x=E*C,b.y=-M*r+v,b.z=E*D,c.push(b.x,b.y,b.z),x.set(C,w,D).normalize(),h.push(x.x,x.y,x.z),d.push(L,1-M),A.push(f++)}p.push(A)}for(let S=0;S<i;S++)for(let A=0;A<n;A++){let M=p[A][S],E=p[A+1][S],T=p[A+1][S+1],L=p[A][S+1];u.push(M,E,L),u.push(E,T,L),_+=6}l.addGroup(m,_,0),m+=_}function y(x){let b=f,_=new me,w=new U,S=0,A=x===!0?e:t,M=x===!0?1:-1;for(let T=1;T<=i;T++)c.push(0,v*M,0),h.push(0,M,0),d.push(.5,.5),f++;let E=f;for(let T=0;T<=i;T++){let L=T/i*s+o,P=Math.cos(L),C=Math.sin(L);w.x=A*C,w.y=v*M,w.z=A*P,c.push(w.x,w.y,w.z),h.push(0,M,0),_.x=P*.5+.5,_.y=C*.5*M+.5,d.push(_.x,_.y),f++}for(let T=0;T<i;T++){let L=b+T,P=E+T;x===!0?u.push(P,P+1,L):u.push(P+1,P,L),S+=3}l.addGroup(m,S,x===!0?1:2),m+=S}}static fromJSON(e){return new uz(e.radiusTop,e.radiusBottom,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}},cz=class extends uz{constructor(e=1,t=1,r=32,i=1,n=!1,a=0,o=Math.PI*2){super(0,e,t,r,i,n,a,o),this.type="ConeGeometry",this.parameters={radius:e,height:t,radialSegments:r,heightSegments:i,openEnded:n,thetaStart:a,thetaLength:o}}static fromJSON(e){return new cz(e.radius,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}},hz=class extends It{constructor(e=[],t=[],r=1,i=0){super(),this.type="PolyhedronGeometry",this.parameters={vertices:e,indices:t,radius:r,detail:i};let n=[],a=[];o(i),l(r),u(),this.setAttribute("position",new ht(n,3)),this.setAttribute("normal",new ht(n.slice(),3)),this.setAttribute("uv",new ht(a,2)),i===0?this.computeVertexNormals():this.normalizeNormals();function o(g){let y=new U,x=new U,b=new U;for(let _=0;_<t.length;_+=3)d(t[_+0],y),d(t[_+1],x),d(t[_+2],b),s(y,x,b,g)}function s(g,y,x,b){let _=b+1,w=[];for(let S=0;S<=_;S++){w[S]=[];let A=g.clone().lerp(x,S/_),M=y.clone().lerp(x,S/_),E=_-S;for(let T=0;T<=E;T++)T===0&&S===_?w[S][T]=A:w[S][T]=A.clone().lerp(M,T/E)}for(let S=0;S<_;S++)for(let A=0;A<2*(_-S)-1;A++){let M=Math.floor(A/2);A%2===0?(h(w[S][M+1]),h(w[S+1][M]),h(w[S][M])):(h(w[S][M+1]),h(w[S+1][M+1]),h(w[S+1][M]))}}function l(g){let y=new U;for(let x=0;x<n.length;x+=3)y.x=n[x+0],y.y=n[x+1],y.z=n[x+2],y.normalize().multiplyScalar(g),n[x+0]=y.x,n[x+1]=y.y,n[x+2]=y.z}function u(){let g=new U;for(let y=0;y<n.length;y+=3){g.x=n[y+0],g.y=n[y+1],g.z=n[y+2];let x=v(g)/2/Math.PI+.5,b=m(g)/Math.PI+.5;a.push(x,1-b)}f(),c()}function c(){for(let g=0;g<a.length;g+=6){let y=a[g+0],x=a[g+2],b=a[g+4],_=Math.max(y,x,b),w=Math.min(y,x,b);_>.9&&w<.1&&(y<.2&&(a[g+0]+=1),x<.2&&(a[g+2]+=1),b<.2&&(a[g+4]+=1))}}function h(g){n.push(g.x,g.y,g.z)}function d(g,y){let x=g*3;y.x=e[x+0],y.y=e[x+1],y.z=e[x+2]}function f(){let g=new U,y=new U,x=new U,b=new U,_=new me,w=new me,S=new me;for(let A=0,M=0;A<n.length;A+=9,M+=6){g.set(n[A+0],n[A+1],n[A+2]),y.set(n[A+3],n[A+4],n[A+5]),x.set(n[A+6],n[A+7],n[A+8]),_.set(a[M+0],a[M+1]),w.set(a[M+2],a[M+3]),S.set(a[M+4],a[M+5]),b.copy(g).add(y).add(x).divideScalar(3);let E=v(b);p(_,M+0,g,E),p(w,M+2,y,E),p(S,M+4,x,E)}}function p(g,y,x,b){b<0&&g.x===1&&(a[y]=g.x-1),x.x===0&&x.z===0&&(a[y]=b/2/Math.PI+.5)}function v(g){return Math.atan2(g.z,-g.x)}function m(g){return Math.atan2(-g.y,Math.sqrt(g.x*g.x+g.z*g.z))}}static fromJSON(e){return new hz(e.vertices,e.indices,e.radius,e.details)}},ome=class extends hz{constructor(e=1,t=0){let r=(1+Math.sqrt(5))/2,i=1/r,n=[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-i,-r,0,-i,r,0,i,-r,0,i,r,-i,-r,0,-i,r,0,i,-r,0,i,r,0,-r,0,-i,r,0,-i,-r,0,i,r,0,i],a=[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9];super(n,a,e,t),this.type="DodecahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new ome(e.radius,e.detail)}},US=class extends HS{constructor(e){super(e),this.uuid=Il(),this.type="Shape",this.holes=[]}getPointsHoles(e){let t=[];for(let r=0,i=this.holes.length;r<i;r++)t[r]=this.holes[r].getPoints(e);return t}extractPoints(e){return{shape:this.getPoints(e),holes:this.getPointsHoles(e)}}copy(e){super.copy(e),this.holes=[];for(let t=0,r=e.holes.length;t<r;t++){let i=e.holes[t];this.holes.push(i.clone())}return this}toJSON(){let e=super.toJSON();e.uuid=this.uuid,e.holes=[];for(let t=0,r=this.holes.length;t<r;t++){let i=this.holes[t];e.holes.push(i.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.uuid=e.uuid,this.holes=[];for(let t=0,r=e.holes.length;t<r;t++){let i=e.holes[t];this.holes.push(new HS().fromJSON(i))}return this}},pft={triangulate:function(e,t,r=2){let i=t&&t.length,n=i?t[0]*r:e.length,a=sme(e,0,n,r,!0),o=[];if(!a||a.next===a.prev)return o;let s,l,u,c,h,d,f;if(i&&(a=xft(e,t,a,r)),e.length>80*r){s=u=e[0],l=c=e[1];for(let p=r;p<n;p+=r)h=e[p],d=e[p+1],h<s&&(s=h),d<l&&(l=d),h>u&&(u=h),d>c&&(c=d);f=Math.max(u-s,c-l),f=f!==0?32767/f:0}return kw(a,o,r,s,l,f,0),o}};function sme(e,t,r,i,n){let a,o;if(n===Dft(e,t,r,i)>0)for(a=t;a<r;a+=i)o=R$(a,e[a],e[a+1],o);else for(a=r-i;a>=t;a-=i)o=R$(a,e[a],e[a+1],o);return o&&_7(o,o.next)&&(Ow(o),o=o.next),o}function Yv(e,t){if(!e)return e;t||(t=e);let r=e,i;do if(i=!1,!r.steiner&&(_7(r,r.next)||tn(r.prev,r,r.next)===0)){if(Ow(r),r=t=r.prev,r===r.next)break;i=!0}else r=r.next;while(i||r!==t);return t}function kw(e,t,r,i,n,a,o){if(!e)return;!o&&a&&Sft(e,i,n,a);let s=e,l,u;for(;e.prev!==e.next;){if(l=e.prev,u=e.next,a?mft(e,i,n,a):vft(e)){t.push(l.i/r|0),t.push(e.i/r|0),t.push(u.i/r|0),Ow(e),e=u.next,s=u.next;continue}if(e=u,e===s){o?o===1?(e=gft(Yv(e),t,r),kw(e,t,r,i,n,a,2)):o===2&&yft(e,t,r,i,n,a):kw(Yv(e),t,r,i,n,a,1);break}}}function vft(e){let t=e.prev,r=e,i=e.next;if(tn(t,r,i)>=0)return!1;let n=t.x,a=r.x,o=i.x,s=t.y,l=r.y,u=i.y,c=n<a?n<o?n:o:a<o?a:o,h=s<l?s<u?s:u:l<u?l:u,d=n>a?n>o?n:o:a>o?a:o,f=s>l?s>u?s:u:l>u?l:u,p=i.next;for(;p!==t;){if(p.x>=c&&p.x<=d&&p.y>=h&&p.y<=f&&Qg(n,s,a,l,o,u,p.x,p.y)&&tn(p.prev,p,p.next)>=0)return!1;p=p.next}return!0}function mft(e,t,r,i){let n=e.prev,a=e,o=e.next;if(tn(n,a,o)>=0)return!1;let s=n.x,l=a.x,u=o.x,c=n.y,h=a.y,d=o.y,f=s<l?s<u?s:u:l<u?l:u,p=c<h?c<d?c:d:h<d?h:d,v=s>l?s>u?s:u:l>u?l:u,m=c>h?c>d?c:d:h>d?h:d,g=pR(f,p,t,r,i),y=pR(v,m,t,r,i),x=e.prevZ,b=e.nextZ;for(;x&&x.z>=g&&b&&b.z<=y;){if(x.x>=f&&x.x<=v&&x.y>=p&&x.y<=m&&x!==n&&x!==o&&Qg(s,c,l,h,u,d,x.x,x.y)&&tn(x.prev,x,x.next)>=0||(x=x.prevZ,b.x>=f&&b.x<=v&&b.y>=p&&b.y<=m&&b!==n&&b!==o&&Qg(s,c,l,h,u,d,b.x,b.y)&&tn(b.prev,b,b.next)>=0))return!1;b=b.nextZ}for(;x&&x.z>=g;){if(x.x>=f&&x.x<=v&&x.y>=p&&x.y<=m&&x!==n&&x!==o&&Qg(s,c,l,h,u,d,x.x,x.y)&&tn(x.prev,x,x.next)>=0)return!1;x=x.prevZ}for(;b&&b.z<=y;){if(b.x>=f&&b.x<=v&&b.y>=p&&b.y<=m&&b!==n&&b!==o&&Qg(s,c,l,h,u,d,b.x,b.y)&&tn(b.prev,b,b.next)>=0)return!1;b=b.nextZ}return!0}function gft(e,t,r){let i=e;do{let n=i.prev,a=i.next.next;!_7(n,a)&&lme(n,i,i.next,a)&&Rw(n,a)&&Rw(a,n)&&(t.push(n.i/r|0),t.push(i.i/r|0),t.push(a.i/r|0),Ow(i),Ow(i.next),i=e=a),i=i.next}while(i!==e);return Yv(i)}function yft(e,t,r,i,n,a){let o=e;do{let s=o.next.next;for(;s!==o.prev;){if(o.i!==s.i&&Mft(o,s)){let l=ume(o,s);o=Yv(o,o.next),l=Yv(l,l.next),kw(o,t,r,i,n,a,0),kw(l,t,r,i,n,a,0);return}s=s.next}o=o.next}while(o!==e)}function xft(e,t,r,i){let n=[],a,o,s,l,u;for(a=0,o=t.length;a<o;a++)s=t[a]*i,l=a<o-1?t[a+1]*i:e.length,u=sme(e,s,l,i,!1),u===u.next&&(u.steiner=!0),n.push(Eft(u));for(n.sort(bft),a=0;a<n.length;a++)r=wft(n[a],r);return r}function bft(e,t){return e.x-t.x}function wft(e,t){let r=_ft(e,t);if(!r)return t;let i=ume(r,e);return Yv(i,i.next),Yv(r,r.next)}function _ft(e,t){let r=t,i=-1/0,n,a=e.x,o=e.y;do{if(o<=r.y&&o>=r.next.y&&r.next.y!==r.y){let d=r.x+(o-r.y)*(r.next.x-r.x)/(r.next.y-r.y);if(d<=a&&d>i&&(i=d,n=r.x<r.next.x?r:r.next,d===a))return n}r=r.next}while(r!==t);if(!n)return null;let s=n,l=n.x,u=n.y,c=1/0,h;r=n;do a>=r.x&&r.x>=l&&a!==r.x&&Qg(o<u?a:i,o,l,u,o<u?i:a,o,r.x,r.y)&&(h=Math.abs(o-r.y)/(a-r.x),Rw(r,e)&&(h<c||h===c&&(r.x>n.x||r.x===n.x&&Aft(n,r)))&&(n=r,c=h)),r=r.next;while(r!==s);return n}function Aft(e,t){return tn(e.prev,e,t.prev)<0&&tn(t.next,e,e.next)<0}function Sft(e,t,r,i){let n=e;do n.z===0&&(n.z=pR(n.x,n.y,t,r,i)),n.prevZ=n.prev,n.nextZ=n.next,n=n.next;while(n!==e);n.prevZ.nextZ=null,n.prevZ=null,Cft(n)}function Cft(e){let t,r,i,n,a,o,s,l,u=1;do{for(r=e,e=null,a=null,o=0;r;){for(o++,i=r,s=0,t=0;t<u&&(s++,i=i.nextZ,!!i);t++);for(l=u;s>0||l>0&&i;)s!==0&&(l===0||!i||r.z<=i.z)?(n=r,r=r.nextZ,s--):(n=i,i=i.nextZ,l--),a?a.nextZ=n:e=n,n.prevZ=a,a=n;r=i}a.nextZ=null,u*=2}while(o>1);return e}function pR(e,t,r,i,n){return e=(e-r)*n|0,t=(t-i)*n|0,e=(e|e<<8)&16711935,e=(e|e<<4)&252645135,e=(e|e<<2)&858993459,e=(e|e<<1)&1431655765,t=(t|t<<8)&16711935,t=(t|t<<4)&252645135,t=(t|t<<2)&858993459,t=(t|t<<1)&1431655765,e|t<<1}function Eft(e){let t=e,r=e;do(t.x<r.x||t.x===r.x&&t.y<r.y)&&(r=t),t=t.next;while(t!==e);return r}function Qg(e,t,r,i,n,a,o,s){return(n-o)*(t-s)>=(e-o)*(a-s)&&(e-o)*(i-s)>=(r-o)*(t-s)&&(r-o)*(a-s)>=(n-o)*(i-s)}function Mft(e,t){return e.next.i!==t.i&&e.prev.i!==t.i&&!Tft(e,t)&&(Rw(e,t)&&Rw(t,e)&&Pft(e,t)&&(tn(e.prev,e,t.prev)||tn(e,t.prev,t))||_7(e,t)&&tn(e.prev,e,e.next)>0&&tn(t.prev,t,t.next)>0)}function tn(e,t,r){return(t.y-e.y)*(r.x-t.x)-(t.x-e.x)*(r.y-t.y)}function _7(e,t){return e.x===t.x&&e.y===t.y}function lme(e,t,r,i){let n=$_(tn(e,t,r)),a=$_(tn(e,t,i)),o=$_(tn(r,i,e)),s=$_(tn(r,i,t));return!!(n!==a&&o!==s||n===0&&J_(e,r,t)||a===0&&J_(e,i,t)||o===0&&J_(r,e,i)||s===0&&J_(r,t,i))}function J_(e,t,r){return t.x<=Math.max(e.x,r.x)&&t.x>=Math.min(e.x,r.x)&&t.y<=Math.max(e.y,r.y)&&t.y>=Math.min(e.y,r.y)}function $_(e){return e>0?1:e<0?-1:0}function Tft(e,t){let r=e;do{if(r.i!==e.i&&r.next.i!==e.i&&r.i!==t.i&&r.next.i!==t.i&&lme(r,r.next,e,t))return!0;r=r.next}while(r!==e);return!1}function Rw(e,t){return tn(e.prev,e,e.next)<0?tn(e,t,e.next)>=0&&tn(e,e.prev,t)>=0:tn(e,t,e.prev)<0||tn(e,e.next,t)<0}function Pft(e,t){let r=e,i=!1,n=(e.x+t.x)/2,a=(e.y+t.y)/2;do r.y>a!=r.next.y>a&&r.next.y!==r.y&&n<(r.next.x-r.x)*(a-r.y)/(r.next.y-r.y)+r.x&&(i=!i),r=r.next;while(r!==e);return i}function ume(e,t){let r=new vR(e.i,e.x,e.y),i=new vR(t.i,t.x,t.y),n=e.next,a=t.prev;return e.next=t,t.prev=e,r.next=n,n.prev=r,i.next=r,r.prev=i,a.next=i,i.prev=a,i}function R$(e,t,r,i){let n=new vR(e,t,r);return i?(n.next=i.next,n.prev=i,i.next.prev=n,i.next=n):(n.prev=n,n.next=n),n}function Ow(e){e.next.prev=e.prev,e.prev.next=e.next,e.prevZ&&(e.prevZ.nextZ=e.nextZ),e.nextZ&&(e.nextZ.prevZ=e.prevZ)}function vR(e,t,r){this.i=e,this.x=t,this.y=r,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function Dft(e,t,r,i){let n=0;for(let a=t,o=r-i;a<r;a+=i)n+=(e[o]-e[a])*(e[a+1]+e[o+1]),o=a;return n}var cme=class{static area(e){let t=e.length,r=0;for(let i=t-1,n=0;n<t;i=n++)r+=e[i].x*e[n].y-e[n].x*e[i].y;return r*.5}static isClockWise(e){return cme.area(e)<0}static triangulateShape(e,t){let r=[],i=[],n=[];O$(e),B$(r,e);let a=e.length;t.forEach(O$);for(let s=0;s<t.length;s++)i.push(a),a+=t[s].length,B$(r,t[s]);let o=pft.triangulate(r,i);for(let s=0;s<o.length;s+=3)n.push(o.slice(s,s+3));return n}};function O$(e){let t=e.length;t>2&&e[t-1].equals(e[0])&&e.pop()}function B$(e,t){for(let r=0;r<t.length;r++)e.push(t[r].x),e.push(t[r].y)}var hme=class extends hz{constructor(e=1,t=0){let r=(1+Math.sqrt(5))/2,i=[-1,r,0,1,r,0,-1,-r,0,1,-r,0,0,-1,r,0,1,r,0,-1,-r,0,1,-r,r,0,-1,r,0,1,-r,0,-1,-r,0,1],n=[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1];super(i,n,e,t),this.type="IcosahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new hme(e.radius,e.detail)}},y1=class extends It{constructor(e=1,t=32,r=16,i=0,n=Math.PI*2,a=0,o=Math.PI){super(),this.type="SphereGeometry",this.parameters={radius:e,widthSegments:t,heightSegments:r,phiStart:i,phiLength:n,thetaStart:a,thetaLength:o},t=Math.max(3,Math.floor(t)),r=Math.max(2,Math.floor(r));let s=Math.min(a+o,Math.PI),l=0,u=[],c=new U,h=new U,d=[],f=[],p=[],v=[];for(let m=0;m<=r;m++){let g=[],y=m/r,x=0;m==0&&a==0?x=.5/t:m==r&&s==Math.PI&&(x=-.5/t);for(let b=0;b<=t;b++){let _=b/t;c.x=-e*Math.cos(i+_*n)*Math.sin(a+y*o),c.y=e*Math.cos(a+y*o),c.z=e*Math.sin(i+_*n)*Math.sin(a+y*o),f.push(c.x,c.y,c.z),h.copy(c).normalize(),p.push(h.x,h.y,h.z),v.push(_+x,1-y),g.push(l++)}u.push(g)}for(let m=0;m<r;m++)for(let g=0;g<t;g++){let y=u[m][g+1],x=u[m][g],b=u[m+1][g],_=u[m+1][g+1];(m!==0||a>0)&&d.push(y,x,_),(m!==r-1||s<Math.PI)&&d.push(x,b,_)}this.setIndex(d),this.setAttribute("position",new ht(f,3)),this.setAttribute("normal",new ht(p,3)),this.setAttribute("uv",new ht(v,2))}static fromJSON(e){return new y1(e.radius,e.widthSegments,e.heightSegments,e.phiStart,e.phiLength,e.thetaStart,e.thetaLength)}},dme=class extends It{constructor(e=1,t=.4,r=12,i=48,n=Math.PI*2){super(),this.type="TorusGeometry",this.parameters={radius:e,tube:t,radialSegments:r,tubularSegments:i,arc:n},r=Math.floor(r),i=Math.floor(i);let a=[],o=[],s=[],l=[],u=new U,c=new U,h=new U;for(let d=0;d<=r;d++)for(let f=0;f<=i;f++){let p=f/i*n,v=d/r*Math.PI*2;c.x=(e+t*Math.cos(v))*Math.cos(p),c.y=(e+t*Math.cos(v))*Math.sin(p),c.z=t*Math.sin(v),o.push(c.x,c.y,c.z),u.x=e*Math.cos(p),u.y=e*Math.sin(p),h.subVectors(c,u).normalize(),s.push(h.x,h.y,h.z),l.push(f/i),l.push(d/r)}for(let d=1;d<=r;d++)for(let f=1;f<=i;f++){let p=(i+1)*d+f-1,v=(i+1)*(d-1)+f-1,m=(i+1)*(d-1)+f,g=(i+1)*d+f;a.push(p,v,g),a.push(v,m,g)}this.setIndex(a),this.setAttribute("position",new ht(o,3)),this.setAttribute("normal",new ht(s,3)),this.setAttribute("uv",new ht(l,2))}static fromJSON(e){return new dme(e.radius,e.tube,e.radialSegments,e.tubularSegments,e.arc)}},fme=class extends It{constructor(e=1,t=.4,r=64,i=8,n=2,a=3){super(),this.type="TorusKnotGeometry",this.parameters={radius:e,tube:t,tubularSegments:r,radialSegments:i,p:n,q:a},r=Math.floor(r),i=Math.floor(i);let o=[],s=[],l=[],u=[],c=new U,h=new U,d=new U,f=new U,p=new U,v=new U,m=new U;for(let y=0;y<=r;++y){let x=y/r*n*Math.PI*2;g(x,n,a,e,d),g(x+.01,n,a,e,f),v.subVectors(f,d),m.addVectors(f,d),p.crossVectors(v,m),m.crossVectors(p,v),p.normalize(),m.normalize();for(let b=0;b<=i;++b){let _=b/i*Math.PI*2,w=-t*Math.cos(_),S=t*Math.sin(_);c.x=d.x+(w*m.x+S*p.x),c.y=d.y+(w*m.y+S*p.y),c.z=d.z+(w*m.z+S*p.z),s.push(c.x,c.y,c.z),h.subVectors(c,d).normalize(),l.push(h.x,h.y,h.z),u.push(y/r),u.push(b/i)}}for(let y=1;y<=r;y++)for(let x=1;x<=i;x++){let b=(i+1)*(y-1)+(x-1),_=(i+1)*y+(x-1),w=(i+1)*y+x,S=(i+1)*(y-1)+x;o.push(b,_,S),o.push(_,w,S)}this.setIndex(o),this.setAttribute("position",new ht(s,3)),this.setAttribute("normal",new ht(l,3)),this.setAttribute("uv",new ht(u,2));function g(y,x,b,_,w){let S=Math.cos(y),A=Math.sin(y),M=b/x*y,E=Math.cos(M);w.x=_*(2+E)*.5*S,w.y=_*(2+E)*A*.5,w.z=_*Math.sin(M)*.5}}static fromJSON(e){return new fme(e.radius,e.tube,e.tubularSegments,e.radialSegments,e.p,e.q)}};function of(e,t,r){return pme(e)?new e.constructor(e.subarray(t,r!==void 0?r:e.length)):e.slice(t,r)}function e5(e,t,r){return!e||e.constructor===t?e:typeof t.BYTES_PER_ELEMENT=="number"?new t(e):Array.prototype.slice.call(e)}function pme(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function Ift(e){function t(n,a){return e[n]-e[a]}let r=e.length,i=new Array(r);for(let n=0;n!==r;++n)i[n]=n;return i.sort(t),i}function N$(e,t,r){let i=e.length,n=new e.constructor(i);for(let a=0,o=0;o!==i;++a){let s=r[a]*t;for(let l=0;l!==t;++l)n[o++]=e[s+l]}return n}function vme(e,t,r,i){let n=1,a=e[0];for(;a!==void 0&&a[i]===void 0;)a=e[n++];if(a===void 0)return;let o=a[i];if(o!==void 0)if(Array.isArray(o))do o=a[i],o!==void 0&&(t.push(a.time),r.push.apply(r,o)),a=e[n++];while(a!==void 0);else if(o.toArray!==void 0)do o=a[i],o!==void 0&&(t.push(a.time),o.toArray(r,r.length)),a=e[n++];while(a!==void 0);else do o=a[i],o!==void 0&&(t.push(a.time),r.push(o)),a=e[n++];while(a!==void 0)}var A7=class{constructor(e,t,r,i){this.parameterPositions=e,this._cachedIndex=0,this.resultBuffer=i!==void 0?i:new t.constructor(r),this.sampleValues=t,this.valueSize=r,this.settings=null,this.DefaultSettings_={}}evaluate(e){let t=this.parameterPositions,r=this._cachedIndex,i=t[r],n=t[r-1];e:{t:{let a;r:{i:if(!(e<i)){for(let o=r+2;;){if(i===void 0){if(e<n)break i;return r=t.length,this._cachedIndex=r,this.copySampleValue_(r-1)}if(r===o)break;if(n=i,i=t[++r],e<i)break t}a=t.length;break r}if(!(e>=n)){let o=t[1];e<o&&(r=2,n=o);for(let s=r-2;;){if(n===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(r===s)break;if(i=n,n=t[--r-1],e>=n)break t}a=r,r=0;break r}break e}for(;r<a;){let o=r+a>>>1;e<t[o]?a=o:r=o+1}if(i=t[r],n=t[r-1],n===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(i===void 0)return r=t.length,this._cachedIndex=r,this.copySampleValue_(r-1)}this._cachedIndex=r,this.intervalChanged_(r,n,i)}return this.interpolate_(r,n,e,i)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(e){let t=this.resultBuffer,r=this.sampleValues,i=this.valueSize,n=e*i;for(let a=0;a!==i;++a)t[a]=r[n+a];return t}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}},Lft=class extends A7{constructor(e,t,r,i){super(e,t,r,i),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:Yg,endingEnd:Yg}}intervalChanged_(e,t,r){let i=this.parameterPositions,n=e-2,a=e+1,o=i[n],s=i[a];if(o===void 0)switch(this.getSettings_().endingStart){case Xg:n=e,o=2*t-r;break;case NS:n=i.length-2,o=t+i[n]-i[n+1];break;default:n=e,o=r}if(s===void 0)switch(this.getSettings_().endingEnd){case Xg:a=e,s=2*r-t;break;case NS:a=1,s=r+i[1]-i[0];break;default:a=e-1,s=t}let l=(r-t)*.5,u=this.valueSize;this._weightPrev=l/(t-o),this._weightNext=l/(s-r),this._offsetPrev=n*u,this._offsetNext=a*u}interpolate_(e,t,r,i){let n=this.resultBuffer,a=this.sampleValues,o=this.valueSize,s=e*o,l=s-o,u=this._offsetPrev,c=this._offsetNext,h=this._weightPrev,d=this._weightNext,f=(r-t)/(i-t),p=f*f,v=p*f,m=-h*v+2*h*p-h*f,g=(1+h)*v+(-1.5-2*h)*p+(-.5+h)*f+1,y=(-1-d)*v+(1.5+d)*p+.5*f,x=d*v-d*p;for(let b=0;b!==o;++b)n[b]=m*a[u+b]+g*a[l+b]+y*a[s+b]+x*a[c+b];return n}},mme=class extends A7{constructor(e,t,r,i){super(e,t,r,i)}interpolate_(e,t,r,i){let n=this.resultBuffer,a=this.sampleValues,o=this.valueSize,s=e*o,l=s-o,u=(r-t)/(i-t),c=1-u;for(let h=0;h!==o;++h)n[h]=a[l+h]*c+a[s+h]*u;return n}},kft=class extends A7{constructor(e,t,r,i){super(e,t,r,i)}interpolate_(e){return this.copySampleValue_(e-1)}},fh=class{constructor(e,t,r,i){if(e===void 0)throw new Error("THREE.KeyframeTrack: track name is undefined");if(t===void 0||t.length===0)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+e);this.name=e,this.times=e5(t,this.TimeBufferType),this.values=e5(r,this.ValueBufferType),this.setInterpolation(i||this.DefaultInterpolation)}static toJSON(e){let t=e.constructor,r;if(t.toJSON!==this.toJSON)r=t.toJSON(e);else{r={name:e.name,times:e5(e.times,Array),values:e5(e.values,Array)};let i=e.getInterpolation();i!==e.DefaultInterpolation&&(r.interpolation=i)}return r.type=e.ValueTypeName,r}InterpolantFactoryMethodDiscrete(e){return new kft(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodLinear(e){return new mme(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodSmooth(e){return new Lft(this.times,this.values,this.getValueSize(),e)}setInterpolation(e){let t;switch(e){case OS:t=this.InterpolantFactoryMethodDiscrete;break;case BS:t=this.InterpolantFactoryMethodLinear;break;case eP:t=this.InterpolantFactoryMethodSmooth;break}if(t===void 0){let r="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(this.createInterpolant===void 0)if(e!==this.DefaultInterpolation)this.setInterpolation(this.DefaultInterpolation);else throw new Error(r);return console.warn("THREE.KeyframeTrack:",r),this}return this.createInterpolant=t,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return OS;case this.InterpolantFactoryMethodLinear:return BS;case this.InterpolantFactoryMethodSmooth:return eP}}getValueSize(){return this.values.length/this.times.length}shift(e){if(e!==0){let t=this.times;for(let r=0,i=t.length;r!==i;++r)t[r]+=e}return this}scale(e){if(e!==1){let t=this.times;for(let r=0,i=t.length;r!==i;++r)t[r]*=e}return this}trim(e,t){let r=this.times,i=r.length,n=0,a=i-1;for(;n!==i&&r[n]<e;)++n;for(;a!==-1&&r[a]>t;)--a;if(++a,n!==0||a!==i){n>=a&&(a=Math.max(a,1),n=a-1);let o=this.getValueSize();this.times=of(r,n,a),this.values=of(this.values,n*o,a*o)}return this}validate(){let e=!0,t=this.getValueSize();t-Math.floor(t)!==0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),e=!1);let r=this.times,i=this.values,n=r.length;n===0&&(console.error("THREE.KeyframeTrack: Track is empty.",this),e=!1);let a=null;for(let o=0;o!==n;o++){let s=r[o];if(typeof s=="number"&&isNaN(s)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,o,s),e=!1;break}if(a!==null&&a>s){console.error("THREE.KeyframeTrack: Out of order keys.",this,o,s,a),e=!1;break}a=s}if(i!==void 0&&pme(i))for(let o=0,s=i.length;o!==s;++o){let l=i[o];if(isNaN(l)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,o,l),e=!1;break}}return e}optimize(){let e=of(this.times),t=of(this.values),r=this.getValueSize(),i=this.getInterpolation()===eP,n=e.length-1,a=1;for(let o=1;o<n;++o){let s=!1,l=e[o],u=e[o+1];if(l!==u&&(o!==1||l!==e[0]))if(i)s=!0;else{let c=o*r,h=c-r,d=c+r;for(let f=0;f!==r;++f){let p=t[c+f];if(p!==t[h+f]||p!==t[d+f]){s=!0;break}}}if(s){if(o!==a){e[a]=e[o];let c=o*r,h=a*r;for(let d=0;d!==r;++d)t[h+d]=t[c+d]}++a}}if(n>0){e[a]=e[n];for(let o=n*r,s=a*r,l=0;l!==r;++l)t[s+l]=t[o+l];++a}return a!==e.length?(this.times=of(e,0,a),this.values=of(t,0,a*r)):(this.times=e,this.values=t),this}clone(){let e=of(this.times,0),t=of(this.values,0),r=this.constructor,i=new r(this.name,e,t);return i.createInterpolant=this.createInterpolant,i}};fh.prototype.TimeBufferType=Float32Array;fh.prototype.ValueBufferType=Float32Array;fh.prototype.DefaultInterpolation=BS;var Zy=class extends fh{};Zy.prototype.ValueTypeName="bool";Zy.prototype.ValueBufferType=Array;Zy.prototype.DefaultInterpolation=OS;Zy.prototype.InterpolantFactoryMethodLinear=void 0;Zy.prototype.InterpolantFactoryMethodSmooth=void 0;var gme=class extends fh{};gme.prototype.ValueTypeName="color";var GS=class extends fh{};GS.prototype.ValueTypeName="number";var Rft=class extends A7{constructor(e,t,r,i){super(e,t,r,i)}interpolate_(e,t,r,i){let n=this.resultBuffer,a=this.sampleValues,o=this.valueSize,s=(r-t)/(i-t),l=e*o;for(let u=l+o;l!==u;l+=4)Jt.slerpFlat(n,0,a,l-o,a,l,s);return n}},H4=class extends fh{InterpolantFactoryMethodLinear(e){return new Rft(this.times,this.values,this.getValueSize(),e)}};H4.prototype.ValueTypeName="quaternion";H4.prototype.DefaultInterpolation=BS;H4.prototype.InterpolantFactoryMethodSmooth=void 0;var Qy=class extends fh{};Qy.prototype.ValueTypeName="string";Qy.prototype.ValueBufferType=Array;Qy.prototype.DefaultInterpolation=OS;Qy.prototype.InterpolantFactoryMethodLinear=void 0;Qy.prototype.InterpolantFactoryMethodSmooth=void 0;var jS=class extends fh{};jS.prototype.ValueTypeName="vector";var mR=class{constructor(e,t=-1,r,i=ez){this.name=e,this.tracks=r,this.duration=t,this.blendMode=i,this.uuid=Il(),this.duration<0&&this.resetDuration()}static parse(e){let t=[],r=e.tracks,i=1/(e.fps||1);for(let a=0,o=r.length;a!==o;++a)t.push(Bft(r[a]).scale(i));let n=new this(e.name,e.duration,t,e.blendMode);return n.uuid=e.uuid,n}static toJSON(e){let t=[],r=e.tracks,i={name:e.name,duration:e.duration,tracks:t,uuid:e.uuid,blendMode:e.blendMode};for(let n=0,a=r.length;n!==a;++n)t.push(fh.toJSON(r[n]));return i}static CreateFromMorphTargetSequence(e,t,r,i){let n=t.length,a=[];for(let o=0;o<n;o++){let s=[],l=[];s.push((o+n-1)%n,o,(o+1)%n),l.push(0,1,0);let u=Ift(s);s=N$(s,1,u),l=N$(l,1,u),!i&&s[0]===0&&(s.push(n),l.push(l[0])),a.push(new GS(".morphTargetInfluences["+t[o].name+"]",s,l).scale(1/r))}return new this(e,-1,a)}static findByName(e,t){let r=e;if(!Array.isArray(e)){let i=e;r=i.geometry&&i.geometry.animations||i.animations}for(let i=0;i<r.length;i++)if(r[i].name===t)return r[i];return null}static CreateClipsFromMorphTargetSequences(e,t,r){let i={},n=/^([\w-]*?)([\d]+)$/;for(let o=0,s=e.length;o<s;o++){let l=e[o],u=l.name.match(n);if(u&&u.length>1){let c=u[1],h=i[c];h||(i[c]=h=[]),h.push(l)}}let a=[];for(let o in i)a.push(this.CreateFromMorphTargetSequence(o,i[o],t,r));return a}static parseAnimation(e,t){if(!e)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;let r=function(u,c,h,d,f){if(h.length!==0){let p=[],v=[];vme(h,p,v,d),p.length!==0&&f.push(new u(c,p,v))}},i=[],n=e.name||"default",a=e.fps||30,o=e.blendMode,s=e.length||-1,l=e.hierarchy||[];for(let u=0;u<l.length;u++){let c=l[u].keys;if(!(!c||c.length===0))if(c[0].morphTargets){let h={},d;for(d=0;d<c.length;d++)if(c[d].morphTargets)for(let f=0;f<c[d].morphTargets.length;f++)h[c[d].morphTargets[f]]=-1;for(let f in h){let p=[],v=[];for(let m=0;m!==c[d].morphTargets.length;++m){let g=c[d];p.push(g.time),v.push(g.morphTarget===f?1:0)}i.push(new GS(".morphTargetInfluence["+f+"]",p,v))}s=h.length*a}else{let h=".bones["+t[u].name+"]";r(jS,h+".position",c,"pos",i),r(H4,h+".quaternion",c,"rot",i),r(jS,h+".scale",c,"scl",i)}}return i.length===0?null:new this(n,s,i,o)}resetDuration(){let e=this.tracks,t=0;for(let r=0,i=e.length;r!==i;++r){let n=this.tracks[r];t=Math.max(t,n.times[n.times.length-1])}return this.duration=t,this}trim(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].trim(0,this.duration);return this}validate(){let e=!0;for(let t=0;t<this.tracks.length;t++)e=e&&this.tracks[t].validate();return e}optimize(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].optimize();return this}clone(){let e=[];for(let t=0;t<this.tracks.length;t++)e.push(this.tracks[t].clone());return new this.constructor(this.name,this.duration,e,this.blendMode)}toJSON(){return this.constructor.toJSON(this)}};function Oft(e){switch(e.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return GS;case"vector":case"vector2":case"vector3":case"vector4":return jS;case"color":return gme;case"quaternion":return H4;case"bool":case"boolean":return Zy;case"string":return Qy}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+e)}function Bft(e){if(e.type===void 0)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");let t=Oft(e.type);if(e.times===void 0){let r=[],i=[];vme(e.keys,r,i,"value"),e.times=r,e.values=i}return t.parse!==void 0?t.parse(e):new t(e.name,e.times,e.values,e.interpolation)}var WS={enabled:!1,files:{},add:function(e,t){this.enabled!==!1&&(this.files[e]=t)},get:function(e){if(this.enabled!==!1)return this.files[e]},remove:function(e){delete this.files[e]},clear:function(){this.files={}}},yme=class{constructor(e,t,r){let i=this,n=!1,a=0,o=0,s,l=[];this.onStart=void 0,this.onLoad=e,this.onProgress=t,this.onError=r,this.itemStart=function(u){o++,n===!1&&i.onStart!==void 0&&i.onStart(u,a,o),n=!0},this.itemEnd=function(u){a++,i.onProgress!==void 0&&i.onProgress(u,a,o),a===o&&(n=!1,i.onLoad!==void 0&&i.onLoad())},this.itemError=function(u){i.onError!==void 0&&i.onError(u)},this.resolveURL=function(u){return s?s(u):u},this.setURLModifier=function(u){return s=u,this},this.addHandler=function(u,c){return l.push(u,c),this},this.removeHandler=function(u){let c=l.indexOf(u);return c!==-1&&l.splice(c,2),this},this.getHandler=function(u){for(let c=0,h=l.length;c<h;c+=2){let d=l[c],f=l[c+1];if(d.global&&(d.lastIndex=0),d.test(u))return f}return null}}},Nft=new yme,U4=class{constructor(e){this.manager=e!==void 0?e:Nft,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(e,t){let r=this;return new Promise(function(i,n){r.load(e,i,t,n)})}parse(){}setCrossOrigin(e){return this.crossOrigin=e,this}setWithCredentials(e){return this.withCredentials=e,this}setPath(e){return this.path=e,this}setResourcePath(e){return this.resourcePath=e,this}setRequestHeader(e){return this.requestHeader=e,this}},Ch={},Vft=class extends Error{constructor(e,t){super(e),this.response=t}},gR=class extends U4{constructor(e){super(e)}load(e,t,r,i){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);let n=WS.get(e);if(n!==void 0)return this.manager.itemStart(e),setTimeout(()=>{t&&t(n),this.manager.itemEnd(e)},0),n;if(Ch[e]!==void 0){Ch[e].push({onLoad:t,onProgress:r,onError:i});return}Ch[e]=[],Ch[e].push({onLoad:t,onProgress:r,onError:i});let a=new Request(e,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin"}),o=this.mimeType,s=this.responseType;fetch(a).then(l=>{if(l.status===200||l.status===0){if(l.status===0&&console.warn("THREE.FileLoader: HTTP Status 0 received."),typeof ReadableStream>"u"||l.body===void 0||l.body.getReader===void 0)return l;let u=Ch[e],c=l.body.getReader(),h=l.headers.get("Content-Length")||l.headers.get("X-File-Size"),d=h?parseInt(h):0,f=d!==0,p=0,v=new ReadableStream({start(m){g();function g(){c.read().then(({done:y,value:x})=>{if(y)m.close();else{p+=x.byteLength;let b=new ProgressEvent("progress",{lengthComputable:f,loaded:p,total:d});for(let _=0,w=u.length;_<w;_++){let S=u[_];S.onProgress&&S.onProgress(b)}m.enqueue(x),g()}})}}});return new Response(v)}else throw new Vft(`fetch for "${l.url}" responded with ${l.status}: ${l.statusText}`,l)}).then(l=>{switch(s){case"arraybuffer":return l.arrayBuffer();case"blob":return l.blob();case"document":return l.text().then(u=>new DOMParser().parseFromString(u,o));case"json":return l.json();default:if(o===void 0)return l.text();{let u=/charset="?([^;"\s]*)"?/i.exec(o),c=u&&u[1]?u[1].toLowerCase():void 0,h=new TextDecoder(c);return l.arrayBuffer().then(d=>h.decode(d))}}}).then(l=>{WS.add(e,l);let u=Ch[e];delete Ch[e];for(let c=0,h=u.length;c<h;c++){let d=u[c];d.onLoad&&d.onLoad(l)}}).catch(l=>{let u=Ch[e];if(u===void 0)throw this.manager.itemError(e),l;delete Ch[e];for(let c=0,h=u.length;c<h;c++){let d=u[c];d.onError&&d.onError(l)}this.manager.itemError(e)}).finally(()=>{this.manager.itemEnd(e)}),this.manager.itemStart(e)}setResponseType(e){return this.responseType=e,this}setMimeType(e){return this.mimeType=e,this}},Fft=class extends U4{constructor(e){super(e)}load(e,t,r,i){this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);let n=this,a=WS.get(e);if(a!==void 0)return n.manager.itemStart(e),setTimeout(function(){t&&t(a),n.manager.itemEnd(e)},0),a;let o=Iw("img");function s(){u(),WS.add(e,this),t&&t(this),n.manager.itemEnd(e)}function l(c){u(),i&&i(c),n.manager.itemError(e),n.manager.itemEnd(e)}function u(){o.removeEventListener("load",s,!1),o.removeEventListener("error",l,!1)}return o.addEventListener("load",s,!1),o.addEventListener("error",l,!1),e.slice(0,5)!=="data:"&&this.crossOrigin!==void 0&&(o.crossOrigin=this.crossOrigin),n.manager.itemStart(e),o.src=e,o}},zft=class extends U4{constructor(e){super(e)}load(e,t,r,i){let n=new an,a=new Fft(this.manager);return a.setCrossOrigin(this.crossOrigin),a.setPath(this.path),a.load(e,function(o){n.image=o,n.needsUpdate=!0,t!==void 0&&t(n)},r,i),n}},G4=class extends _i{constructor(e,t=1){super(),this.isLight=!0,this.type="Light",this.color=new Vt(e),this.intensity=t}dispose(){}copy(e,t){return super.copy(e,t),this.color.copy(e.color),this.intensity=e.intensity,this}toJSON(e){let t=super.toJSON(e);return t.object.color=this.color.getHex(),t.object.intensity=this.intensity,this.groundColor!==void 0&&(t.object.groundColor=this.groundColor.getHex()),this.distance!==void 0&&(t.object.distance=this.distance),this.angle!==void 0&&(t.object.angle=this.angle),this.decay!==void 0&&(t.object.decay=this.decay),this.penumbra!==void 0&&(t.object.penumbra=this.penumbra),this.shadow!==void 0&&(t.object.shadow=this.shadow.toJSON()),t}},Hft=class extends G4{constructor(e,t,r){super(e,r),this.isHemisphereLight=!0,this.type="HemisphereLight",this.position.copy(_i.DEFAULT_UP),this.updateMatrix(),this.groundColor=new Vt(t)}copy(e,t){return super.copy(e,t),this.groundColor.copy(e.groundColor),this}},DP=new Ke,V$=new U,F$=new U,dz=class{constructor(e){this.camera=e,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new me(512,512),this.map=null,this.mapPass=null,this.matrix=new Ke,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new nz,this._frameExtents=new me(1,1),this._viewportCount=1,this._viewports=[new er(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(e){let t=this.camera,r=this.matrix;V$.setFromMatrixPosition(e.matrixWorld),t.position.copy(V$),F$.setFromMatrixPosition(e.target.matrixWorld),t.lookAt(F$),t.updateMatrixWorld(),DP.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),this._frustum.setFromProjectionMatrix(DP),r.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),r.multiply(DP)}getViewport(e){return this._viewports[e]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(e){return this.camera=e.camera.clone(),this.bias=e.bias,this.radius=e.radius,this.mapSize.copy(e.mapSize),this}clone(){return new this.constructor().copy(this)}toJSON(){let e={};return this.bias!==0&&(e.bias=this.bias),this.normalBias!==0&&(e.normalBias=this.normalBias),this.radius!==1&&(e.radius=this.radius),(this.mapSize.x!==512||this.mapSize.y!==512)&&(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}},Uft=class extends dz{constructor(){super(new fo(50,1,.5,500)),this.isSpotLightShadow=!0,this.focus=1}updateMatrices(e){let t=this.camera,r=Dw*2*e.angle*this.focus,i=this.mapSize.width/this.mapSize.height,n=e.distance||t.far;(r!==t.fov||i!==t.aspect||n!==t.far)&&(t.fov=r,t.aspect=i,t.far=n,t.updateProjectionMatrix()),super.updateMatrices(e)}copy(e){return super.copy(e),this.focus=e.focus,this}},Gft=class extends G4{constructor(e,t,r=0,i=Math.PI/3,n=0,a=2){super(e,t),this.isSpotLight=!0,this.type="SpotLight",this.position.copy(_i.DEFAULT_UP),this.updateMatrix(),this.target=new _i,this.distance=r,this.angle=i,this.penumbra=n,this.decay=a,this.map=null,this.shadow=new Uft}get power(){return this.intensity*Math.PI}set power(e){this.intensity=e/Math.PI}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.angle=e.angle,this.penumbra=e.penumbra,this.decay=e.decay,this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}},z$=new Ke,ax=new U,IP=new U,jft=class extends dz{constructor(){super(new fo(90,1,.5,500)),this.isPointLightShadow=!0,this._frameExtents=new me(4,2),this._viewportCount=6,this._viewports=[new er(2,1,1,1),new er(0,1,1,1),new er(3,1,1,1),new er(1,1,1,1),new er(3,0,1,1),new er(1,0,1,1)],this._cubeDirections=[new U(1,0,0),new U(-1,0,0),new U(0,0,1),new U(0,0,-1),new U(0,1,0),new U(0,-1,0)],this._cubeUps=[new U(0,1,0),new U(0,1,0),new U(0,1,0),new U(0,1,0),new U(0,0,1),new U(0,0,-1)]}updateMatrices(e,t=0){let r=this.camera,i=this.matrix,n=e.distance||r.far;n!==r.far&&(r.far=n,r.updateProjectionMatrix()),ax.setFromMatrixPosition(e.matrixWorld),r.position.copy(ax),IP.copy(r.position),IP.add(this._cubeDirections[t]),r.up.copy(this._cubeUps[t]),r.lookAt(IP),r.updateMatrixWorld(),i.makeTranslation(-ax.x,-ax.y,-ax.z),z$.multiplyMatrices(r.projectionMatrix,r.matrixWorldInverse),this._frustum.setFromProjectionMatrix(z$)}},Wft=class extends G4{constructor(e,t,r=0,i=2){super(e,t),this.isPointLight=!0,this.type="PointLight",this.distance=r,this.decay=i,this.shadow=new jft}get power(){return this.intensity*4*Math.PI}set power(e){this.intensity=e/(4*Math.PI)}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}},qft=class extends dz{constructor(){super(new x7(-5,5,5,-5,.5,500)),this.isDirectionalLightShadow=!0}},Yft=class extends G4{constructor(e,t){super(e,t),this.isDirectionalLight=!0,this.type="DirectionalLight",this.position.copy(_i.DEFAULT_UP),this.updateMatrix(),this.target=new _i,this.shadow=new qft}dispose(){this.shadow.dispose()}copy(e){return super.copy(e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}},xme=class extends It{constructor(){super(),this.isInstancedBufferGeometry=!0,this.type="InstancedBufferGeometry",this.instanceCount=1/0}copy(e){return super.copy(e),this.instanceCount=e.instanceCount,this}toJSON(){let e=super.toJSON();return e.instanceCount=this.instanceCount,e.isInstancedBufferGeometry=!0,e}},bme=class extends U4{constructor(e){super(e)}load(e,t,r,i){let n=this,a=new gR(n.manager);a.setPath(n.path),a.setRequestHeader(n.requestHeader),a.setWithCredentials(n.withCredentials),a.load(e,function(o){try{t(n.parse(JSON.parse(o)))}catch(s){i?i(s):console.error(s),n.manager.itemError(e)}},r,i)}parse(e){let t={},r={};function i(h,d){if(t[d]!==void 0)return t[d];let f=h.interleavedBuffers[d],p=n(h,f.buffer),v=D_(f.type,p),m=new Kdt(v,f.stride);return m.uuid=f.uuid,t[d]=m,m}function n(h,d){if(r[d]!==void 0)return r[d];let f=h.arrayBuffers[d],p=new Uint32Array(f).buffer;return r[d]=p,p}let a=e.isInstancedBufferGeometry?new xme:new It,o=e.data.index;if(o!==void 0){let h=D_(o.type,o.array);a.setIndex(new Zt(h,1))}let s=e.data.attributes;for(let h in s){let d=s[h],f;if(d.isInterleavedBufferAttribute){let p=i(e.data,d.data);f=new fR(p,d.itemSize,d.offset,d.normalized)}else{let p=D_(d.type,d.array),v=d.isInstancedBufferAttribute?Lw:Zt;f=new v(p,d.itemSize,d.normalized)}d.name!==void 0&&(f.name=d.name),d.usage!==void 0&&f.setUsage(d.usage),d.updateRange!==void 0&&(f.updateRange.offset=d.updateRange.offset,f.updateRange.count=d.updateRange.count),a.setAttribute(h,f)}let l=e.data.morphAttributes;if(l)for(let h in l){let d=l[h],f=[];for(let p=0,v=d.length;p<v;p++){let m=d[p],g;if(m.isInterleavedBufferAttribute){let y=i(e.data,m.data);g=new fR(y,m.itemSize,m.offset,m.normalized)}else{let y=D_(m.type,m.array);g=new Zt(y,m.itemSize,m.normalized)}m.name!==void 0&&(g.name=m.name),f.push(g)}a.morphAttributes[h]=f}e.data.morphTargetsRelative&&(a.morphTargetsRelative=!0);let u=e.data.groups||e.data.drawcalls||e.data.offsets;if(u!==void 0)for(let h=0,d=u.length;h!==d;++h){let f=u[h];a.addGroup(f.start,f.count,f.materialIndex)}let c=e.data.boundingSphere;if(c!==void 0){let h=new U;c.center!==void 0&&h.fromArray(c.center),a.boundingSphere=new Es(h,c.radius)}return e.name&&(a.name=e.name),e.userData&&(a.userData=e.userData),a}},Xft=class{constructor(e=!0){this.autoStart=e,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}start(){this.startTime=H$(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}stop(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}getElapsedTime(){return this.getDelta(),this.elapsedTime}getDelta(){let e=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){let t=H$();e=(t-this.oldTime)/1e3,this.oldTime=t,this.elapsedTime+=e}return e}};function H$(){return(typeof performance>"u"?Date:performance).now()}var Zft=class{constructor(e,t,r){this.binding=e,this.valueSize=r;let i,n,a;switch(t){case"quaternion":i=this._slerp,n=this._slerpAdditive,a=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(r*6),this._workIndex=5;break;case"string":case"bool":i=this._select,n=this._select,a=this._setAdditiveIdentityOther,this.buffer=new Array(r*5);break;default:i=this._lerp,n=this._lerpAdditive,a=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(r*5)}this._mixBufferRegion=i,this._mixBufferRegionAdditive=n,this._setIdentity=a,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}accumulate(e,t){let r=this.buffer,i=this.valueSize,n=e*i+i,a=this.cumulativeWeight;if(a===0){for(let o=0;o!==i;++o)r[n+o]=r[o];a=t}else{a+=t;let o=t/a;this._mixBufferRegion(r,n,0,o,i)}this.cumulativeWeight=a}accumulateAdditive(e){let t=this.buffer,r=this.valueSize,i=r*this._addIndex;this.cumulativeWeightAdditive===0&&this._setIdentity(),this._mixBufferRegionAdditive(t,i,0,e,r),this.cumulativeWeightAdditive+=e}apply(e){let t=this.valueSize,r=this.buffer,i=e*t+t,n=this.cumulativeWeight,a=this.cumulativeWeightAdditive,o=this.binding;if(this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,n<1){let s=t*this._origIndex;this._mixBufferRegion(r,i,s,1-n,t)}a>0&&this._mixBufferRegionAdditive(r,i,this._addIndex*t,1,t);for(let s=t,l=t+t;s!==l;++s)if(r[s]!==r[s+t]){o.setValue(r,i);break}}saveOriginalState(){let e=this.binding,t=this.buffer,r=this.valueSize,i=r*this._origIndex;e.getValue(t,i);for(let n=r,a=i;n!==a;++n)t[n]=t[i+n%r];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0}restoreOriginalState(){let e=this.valueSize*3;this.binding.setValue(this.buffer,e)}_setAdditiveIdentityNumeric(){let e=this._addIndex*this.valueSize,t=e+this.valueSize;for(let r=e;r<t;r++)this.buffer[r]=0}_setAdditiveIdentityQuaternion(){this._setAdditiveIdentityNumeric(),this.buffer[this._addIndex*this.valueSize+3]=1}_setAdditiveIdentityOther(){let e=this._origIndex*this.valueSize,t=this._addIndex*this.valueSize;for(let r=0;r<this.valueSize;r++)this.buffer[t+r]=this.buffer[e+r]}_select(e,t,r,i,n){if(i>=.5)for(let a=0;a!==n;++a)e[t+a]=e[r+a]}_slerp(e,t,r,i){Jt.slerpFlat(e,t,e,t,e,r,i)}_slerpAdditive(e,t,r,i,n){let a=this._workIndex*n;Jt.multiplyQuaternionsFlat(e,a,e,t,e,r),Jt.slerpFlat(e,t,e,t,e,a,i)}_lerp(e,t,r,i,n){let a=1-i;for(let o=0;o!==n;++o){let s=t+o;e[s]=e[s]*a+e[r+o]*i}}_lerpAdditive(e,t,r,i,n){for(let a=0;a!==n;++a){let o=t+a;e[o]=e[o]+e[r+a]*i}}},fz="\\[\\]\\.:\\/",Qft=new RegExp("["+fz+"]","g"),pz="[^"+fz+"]",Kft="[^"+fz.replace("\\.","")+"]",Jft=/((?:WC+[\/:])*)/.source.replace("WC",pz),$ft=/(WCOD+)?/.source.replace("WCOD",Kft),ept=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",pz),tpt=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",pz),rpt=new RegExp("^"+Jft+$ft+ept+tpt+"$"),ipt=["material","materials","bones","map"],npt=class{constructor(e,t,r){let i=r||Li.parseTrackName(t);this._targetGroup=e,this._bindings=e.subscribe_(t,i)}getValue(e,t){this.bind();let r=this._targetGroup.nCachedObjects_,i=this._bindings[r];i!==void 0&&i.getValue(e,t)}setValue(e,t){let r=this._bindings;for(let i=this._targetGroup.nCachedObjects_,n=r.length;i!==n;++i)r[i].setValue(e,t)}bind(){let e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,r=e.length;t!==r;++t)e[t].bind()}unbind(){let e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,r=e.length;t!==r;++t)e[t].unbind()}},Li=class{constructor(e,t,r){this.path=t,this.parsedPath=r||Li.parseTrackName(t),this.node=Li.findNode(e,this.parsedPath.nodeName)||e,this.rootNode=e,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(e,t,r){return e&&e.isAnimationObjectGroup?new Li.Composite(e,t,r):new Li(e,t,r)}static sanitizeNodeName(e){return e.replace(/\s/g,"_").replace(Qft,"")}static parseTrackName(e){let t=rpt.exec(e);if(t===null)throw new Error("PropertyBinding: Cannot parse trackName: "+e);let r={nodeName:t[2],objectName:t[3],objectIndex:t[4],propertyName:t[5],propertyIndex:t[6]},i=r.nodeName&&r.nodeName.lastIndexOf(".");if(i!==void 0&&i!==-1){let n=r.nodeName.substring(i+1);ipt.indexOf(n)!==-1&&(r.nodeName=r.nodeName.substring(0,i),r.objectName=n)}if(r.propertyName===null||r.propertyName.length===0)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+e);return r}static findNode(e,t){if(t===void 0||t===""||t==="."||t===-1||t===e.name||t===e.uuid)return e;if(e.skeleton){let r=e.skeleton.getBoneByName(t);if(r!==void 0)return r}if(e.children){let r=function(n){for(let a=0;a<n.length;a++){let o=n[a];if(o.name===t||o.uuid===t)return o;let s=r(o.children);if(s)return s}return null},i=r(e.children);if(i)return i}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(e,t){e[t]=this.targetObject[this.propertyName]}_getValue_array(e,t){let r=this.resolvedProperty;for(let i=0,n=r.length;i!==n;++i)e[t++]=r[i]}_getValue_arrayElement(e,t){e[t]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(e,t){this.resolvedProperty.toArray(e,t)}_setValue_direct(e,t){this.targetObject[this.propertyName]=e[t]}_setValue_direct_setNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(e,t){let r=this.resolvedProperty;for(let i=0,n=r.length;i!==n;++i)r[i]=e[t++]}_setValue_array_setNeedsUpdate(e,t){let r=this.resolvedProperty;for(let i=0,n=r.length;i!==n;++i)r[i]=e[t++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(e,t){let r=this.resolvedProperty;for(let i=0,n=r.length;i!==n;++i)r[i]=e[t++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(e,t){this.resolvedProperty[this.propertyIndex]=e[t]}_setValue_arrayElement_setNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(e,t){this.resolvedProperty.fromArray(e,t)}_setValue_fromArray_setNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(e,t){this.bind(),this.getValue(e,t)}_setValue_unbound(e,t){this.bind(),this.setValue(e,t)}bind(){let e=this.node,t=this.parsedPath,r=t.objectName,i=t.propertyName,n=t.propertyIndex;if(e||(e=Li.findNode(this.rootNode,t.nodeName)||this.rootNode,this.node=e),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!e){console.error("THREE.PropertyBinding: Trying to update node for track: "+this.path+" but it wasn't found.");return}if(r){let l=t.objectIndex;switch(r){case"materials":if(!e.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.materials){console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);return}e=e.material.materials;break;case"bones":if(!e.skeleton){console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);return}e=e.skeleton.bones;for(let u=0;u<e.length;u++)if(e[u].name===l){l=u;break}break;case"map":if("map"in e){e=e.map;break}if(!e.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.map){console.error("THREE.PropertyBinding: Can not bind to material.map as node.material does not have a map.",this);return}e=e.material.map;break;default:if(e[r]===void 0){console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);return}e=e[r]}if(l!==void 0){if(e[l]===void 0){console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,e);return}e=e[l]}}let a=e[i];if(a===void 0){let l=t.nodeName;console.error("THREE.PropertyBinding: Trying to update property for track: "+l+"."+i+" but it wasn't found.",e);return}let o=this.Versioning.None;this.targetObject=e,e.needsUpdate!==void 0?o=this.Versioning.NeedsUpdate:e.matrixWorldNeedsUpdate!==void 0&&(o=this.Versioning.MatrixWorldNeedsUpdate);let s=this.BindingType.Direct;if(n!==void 0){if(i==="morphTargetInfluences"){if(!e.geometry){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);return}if(!e.geometry.morphAttributes){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);return}e.morphTargetDictionary[n]!==void 0&&(n=e.morphTargetDictionary[n])}s=this.BindingType.ArrayElement,this.resolvedProperty=a,this.propertyIndex=n}else a.fromArray!==void 0&&a.toArray!==void 0?(s=this.BindingType.HasFromToArray,this.resolvedProperty=a):Array.isArray(a)?(s=this.BindingType.EntireArray,this.resolvedProperty=a):this.propertyName=i;this.getValue=this.GetterByBindingType[s],this.setValue=this.SetterByBindingTypeAndVersioning[s][o]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}};Li.Composite=npt;Li.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3};Li.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2};Li.prototype.GetterByBindingType=[Li.prototype._getValue_direct,Li.prototype._getValue_array,Li.prototype._getValue_arrayElement,Li.prototype._getValue_toArray];Li.prototype.SetterByBindingTypeAndVersioning=[[Li.prototype._setValue_direct,Li.prototype._setValue_direct_setNeedsUpdate,Li.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[Li.prototype._setValue_array,Li.prototype._setValue_array_setNeedsUpdate,Li.prototype._setValue_array_setMatrixWorldNeedsUpdate],[Li.prototype._setValue_arrayElement,Li.prototype._setValue_arrayElement_setNeedsUpdate,Li.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[Li.prototype._setValue_fromArray,Li.prototype._setValue_fromArray_setNeedsUpdate,Li.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];var apt=class{constructor(e,t,r=null,i=t.blendMode){this._mixer=e,this._clip=t,this._localRoot=r,this.blendMode=i;let n=t.tracks,a=n.length,o=new Array(a),s={endingStart:Yg,endingEnd:Yg};for(let l=0;l!==a;++l){let u=n[l].createInterpolant(null);o[l]=u,u.settings=s}this._interpolantSettings=s,this._interpolants=o,this._propertyBindings=new Array(a),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=Vve,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}play(){return this._mixer._activateAction(this),this}stop(){return this._mixer._deactivateAction(this),this.reset()}reset(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()}isRunning(){return this.enabled&&!this.paused&&this.timeScale!==0&&this._startTime===null&&this._mixer._isActiveAction(this)}isScheduled(){return this._mixer._isActiveAction(this)}startAt(e){return this._startTime=e,this}setLoop(e,t){return this.loop=e,this.repetitions=t,this}setEffectiveWeight(e){return this.weight=e,this._effectiveWeight=this.enabled?e:0,this.stopFading()}getEffectiveWeight(){return this._effectiveWeight}fadeIn(e){return this._scheduleFading(e,0,1)}fadeOut(e){return this._scheduleFading(e,1,0)}crossFadeFrom(e,t,r){if(e.fadeOut(t),this.fadeIn(t),r){let i=this._clip.duration,n=e._clip.duration,a=n/i,o=i/n;e.warp(1,a,t),this.warp(o,1,t)}return this}crossFadeTo(e,t,r){return e.crossFadeFrom(this,t,r)}stopFading(){let e=this._weightInterpolant;return e!==null&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}setEffectiveTimeScale(e){return this.timeScale=e,this._effectiveTimeScale=this.paused?0:e,this.stopWarping()}getEffectiveTimeScale(){return this._effectiveTimeScale}setDuration(e){return this.timeScale=this._clip.duration/e,this.stopWarping()}syncWith(e){return this.time=e.time,this.timeScale=e.timeScale,this.stopWarping()}halt(e){return this.warp(this._effectiveTimeScale,0,e)}warp(e,t,r){let i=this._mixer,n=i.time,a=this.timeScale,o=this._timeScaleInterpolant;o===null&&(o=i._lendControlInterpolant(),this._timeScaleInterpolant=o);let s=o.parameterPositions,l=o.sampleValues;return s[0]=n,s[1]=n+r,l[0]=e/a,l[1]=t/a,this}stopWarping(){let e=this._timeScaleInterpolant;return e!==null&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}getMixer(){return this._mixer}getClip(){return this._clip}getRoot(){return this._localRoot||this._mixer._root}_update(e,t,r,i){if(!this.enabled){this._updateWeight(e);return}let n=this._startTime;if(n!==null){let s=(e-n)*r;s<0||r===0?t=0:(this._startTime=null,t=r*s)}t*=this._updateTimeScale(e);let a=this._updateTime(t),o=this._updateWeight(e);if(o>0){let s=this._interpolants,l=this._propertyBindings;switch(this.blendMode){case Ost:for(let u=0,c=s.length;u!==c;++u)s[u].evaluate(a),l[u].accumulateAdditive(o);break;case ez:default:for(let u=0,c=s.length;u!==c;++u)s[u].evaluate(a),l[u].accumulate(i,o)}}}_updateWeight(e){let t=0;if(this.enabled){t=this.weight;let r=this._weightInterpolant;if(r!==null){let i=r.evaluate(e)[0];t*=i,e>r.parameterPositions[1]&&(this.stopFading(),i===0&&(this.enabled=!1))}}return this._effectiveWeight=t,t}_updateTimeScale(e){let t=0;if(!this.paused){t=this.timeScale;let r=this._timeScaleInterpolant;if(r!==null){let i=r.evaluate(e)[0];t*=i,e>r.parameterPositions[1]&&(this.stopWarping(),t===0?this.paused=!0:this.timeScale=t)}}return this._effectiveTimeScale=t,t}_updateTime(e){let t=this._clip.duration,r=this.loop,i=this.time+e,n=this._loopCount,a=r===$F;if(e===0)return n===-1?i:a&&(n&1)===1?t-i:i;if(r===Nve){n===-1&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(i>=t)i=t;else if(i<0)i=0;else{this.time=i;break e}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=i,this._mixer.dispatchEvent({type:"finished",action:this,direction:e<0?-1:1})}}else{if(n===-1&&(e>=0?(n=0,this._setEndings(!0,this.repetitions===0,a)):this._setEndings(this.repetitions===0,!0,a)),i>=t||i<0){let o=Math.floor(i/t);i-=t*o,n+=Math.abs(o);let s=this.repetitions-n;if(s<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,i=e>0?t:0,this.time=i,this._mixer.dispatchEvent({type:"finished",action:this,direction:e>0?1:-1});else{if(s===1){let l=e<0;this._setEndings(l,!l,a)}else this._setEndings(!1,!1,a);this._loopCount=n,this.time=i,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:o})}}else this.time=i;if(a&&(n&1)===1)return t-i}return i}_setEndings(e,t,r){let i=this._interpolantSettings;r?(i.endingStart=Xg,i.endingEnd=Xg):(e?i.endingStart=this.zeroSlopeAtStart?Xg:Yg:i.endingStart=NS,t?i.endingEnd=this.zeroSlopeAtEnd?Xg:Yg:i.endingEnd=NS)}_scheduleFading(e,t,r){let i=this._mixer,n=i.time,a=this._weightInterpolant;a===null&&(a=i._lendControlInterpolant(),this._weightInterpolant=a);let o=a.parameterPositions,s=a.sampleValues;return o[0]=n,s[0]=t,o[1]=n+e,s[1]=r,this}},opt=new Float32Array(1),spt=class extends Ka{constructor(e){super(),this._root=e,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}_bindAction(e,t){let r=e._localRoot||this._root,i=e._clip.tracks,n=i.length,a=e._propertyBindings,o=e._interpolants,s=r.uuid,l=this._bindingsByRootAndName,u=l[s];u===void 0&&(u={},l[s]=u);for(let c=0;c!==n;++c){let h=i[c],d=h.name,f=u[d];if(f!==void 0)++f.referenceCount,a[c]=f;else{if(f=a[c],f!==void 0){f._cacheIndex===null&&(++f.referenceCount,this._addInactiveBinding(f,s,d));continue}let p=t&&t._propertyBindings[c].binding.parsedPath;f=new Zft(Li.create(r,d,p),h.ValueTypeName,h.getValueSize()),++f.referenceCount,this._addInactiveBinding(f,s,d),a[c]=f}o[c].resultBuffer=f.buffer}}_activateAction(e){if(!this._isActiveAction(e)){if(e._cacheIndex===null){let r=(e._localRoot||this._root).uuid,i=e._clip.uuid,n=this._actionsByClip[i];this._bindAction(e,n&&n.knownActions[0]),this._addInactiveAction(e,i,r)}let t=e._propertyBindings;for(let r=0,i=t.length;r!==i;++r){let n=t[r];n.useCount++===0&&(this._lendBinding(n),n.saveOriginalState())}this._lendAction(e)}}_deactivateAction(e){if(this._isActiveAction(e)){let t=e._propertyBindings;for(let r=0,i=t.length;r!==i;++r){let n=t[r];--n.useCount===0&&(n.restoreOriginalState(),this._takeBackBinding(n))}this._takeBackAction(e)}}_initMemoryManager(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;let e=this;this.stats={actions:{get total(){return e._actions.length},get inUse(){return e._nActiveActions}},bindings:{get total(){return e._bindings.length},get inUse(){return e._nActiveBindings}},controlInterpolants:{get total(){return e._controlInterpolants.length},get inUse(){return e._nActiveControlInterpolants}}}}_isActiveAction(e){let t=e._cacheIndex;return t!==null&&t<this._nActiveActions}_addInactiveAction(e,t,r){let i=this._actions,n=this._actionsByClip,a=n[t];if(a===void 0)a={knownActions:[e],actionByRoot:{}},e._byClipCacheIndex=0,n[t]=a;else{let o=a.knownActions;e._byClipCacheIndex=o.length,o.push(e)}e._cacheIndex=i.length,i.push(e),a.actionByRoot[r]=e}_removeInactiveAction(e){let t=this._actions,r=t[t.length-1],i=e._cacheIndex;r._cacheIndex=i,t[i]=r,t.pop(),e._cacheIndex=null;let n=e._clip.uuid,a=this._actionsByClip,o=a[n],s=o.knownActions,l=s[s.length-1],u=e._byClipCacheIndex;l._byClipCacheIndex=u,s[u]=l,s.pop(),e._byClipCacheIndex=null;let c=o.actionByRoot,h=(e._localRoot||this._root).uuid;delete c[h],s.length===0&&delete a[n],this._removeInactiveBindingsForAction(e)}_removeInactiveBindingsForAction(e){let t=e._propertyBindings;for(let r=0,i=t.length;r!==i;++r){let n=t[r];--n.referenceCount===0&&this._removeInactiveBinding(n)}}_lendAction(e){let t=this._actions,r=e._cacheIndex,i=this._nActiveActions++,n=t[i];e._cacheIndex=i,t[i]=e,n._cacheIndex=r,t[r]=n}_takeBackAction(e){let t=this._actions,r=e._cacheIndex,i=--this._nActiveActions,n=t[i];e._cacheIndex=i,t[i]=e,n._cacheIndex=r,t[r]=n}_addInactiveBinding(e,t,r){let i=this._bindingsByRootAndName,n=this._bindings,a=i[t];a===void 0&&(a={},i[t]=a),a[r]=e,e._cacheIndex=n.length,n.push(e)}_removeInactiveBinding(e){let t=this._bindings,r=e.binding,i=r.rootNode.uuid,n=r.path,a=this._bindingsByRootAndName,o=a[i],s=t[t.length-1],l=e._cacheIndex;s._cacheIndex=l,t[l]=s,t.pop(),delete o[n],Object.keys(o).length===0&&delete a[i]}_lendBinding(e){let t=this._bindings,r=e._cacheIndex,i=this._nActiveBindings++,n=t[i];e._cacheIndex=i,t[i]=e,n._cacheIndex=r,t[r]=n}_takeBackBinding(e){let t=this._bindings,r=e._cacheIndex,i=--this._nActiveBindings,n=t[i];e._cacheIndex=i,t[i]=e,n._cacheIndex=r,t[r]=n}_lendControlInterpolant(){let e=this._controlInterpolants,t=this._nActiveControlInterpolants++,r=e[t];return r===void 0&&(r=new mme(new Float32Array(2),new Float32Array(2),1,opt),r.__cacheIndex=t,e[t]=r),r}_takeBackControlInterpolant(e){let t=this._controlInterpolants,r=e.__cacheIndex,i=--this._nActiveControlInterpolants,n=t[i];e.__cacheIndex=i,t[i]=e,n.__cacheIndex=r,t[r]=n}clipAction(e,t,r){let i=t||this._root,n=i.uuid,a=typeof e=="string"?mR.findByName(i,e):e,o=a!==null?a.uuid:e,s=this._actionsByClip[o],l=null;if(r===void 0&&(a!==null?r=a.blendMode:r=ez),s!==void 0){let c=s.actionByRoot[n];if(c!==void 0&&c.blendMode===r)return c;l=s.knownActions[0],a===null&&(a=l._clip)}if(a===null)return null;let u=new apt(this,a,t,r);return this._bindAction(u,l),this._addInactiveAction(u,o,n),u}existingAction(e,t){let r=t||this._root,i=r.uuid,n=typeof e=="string"?mR.findByName(r,e):e,a=n?n.uuid:e,o=this._actionsByClip[a];return o!==void 0&&o.actionByRoot[i]||null}stopAllAction(){let e=this._actions,t=this._nActiveActions;for(let r=t-1;r>=0;--r)e[r].stop();return this}update(e){e*=this.timeScale;let t=this._actions,r=this._nActiveActions,i=this.time+=e,n=Math.sign(e),a=this._accuIndex^=1;for(let l=0;l!==r;++l)t[l]._update(i,e,n,a);let o=this._bindings,s=this._nActiveBindings;for(let l=0;l!==s;++l)o[l].apply(a);return this}setTime(e){this.time=0;for(let t=0;t<this._actions.length;t++)this._actions[t].time=0;return this.update(e)}getRoot(){return this._root}uncacheClip(e){let t=this._actions,r=e.uuid,i=this._actionsByClip,n=i[r];if(n!==void 0){let a=n.knownActions;for(let o=0,s=a.length;o!==s;++o){let l=a[o];this._deactivateAction(l);let u=l._cacheIndex,c=t[t.length-1];l._cacheIndex=null,l._byClipCacheIndex=null,c._cacheIndex=u,t[u]=c,t.pop(),this._removeInactiveBindingsForAction(l)}delete i[r]}}uncacheRoot(e){let t=e.uuid,r=this._actionsByClip;for(let a in r){let o=r[a].actionByRoot,s=o[t];s!==void 0&&(this._deactivateAction(s),this._removeInactiveAction(s))}let i=this._bindingsByRootAndName,n=i[t];if(n!==void 0)for(let a in n){let o=n[a];o.restoreOriginalState(),this._removeInactiveBinding(o)}}uncacheAction(e,t){let r=this.existingAction(e,t);r!==null&&(this._deactivateAction(r),this._removeInactiveAction(r))}},Xe=class{constructor(e){this.value=e}clone(){return new Xe(this.value.clone===void 0?this.value:this.value.clone())}},wme=class{constructor(e,t,r=0,i=1/0){this.ray=new qy(e,t),this.near=r,this.far=i,this.camera=null,this.layers=new rz,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}}}set(e,t){this.ray.set(e,t)}setFromCamera(e,t){t.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(t.matrixWorld),this.ray.direction.set(e.x,e.y,.5).unproject(t).sub(this.ray.origin).normalize(),this.camera=t):t.isOrthographicCamera?(this.ray.origin.set(e.x,e.y,(t.near+t.far)/(t.near-t.far)).unproject(t),this.ray.direction.set(0,0,-1).transformDirection(t.matrixWorld),this.camera=t):console.error("THREE.Raycaster: Unsupported camera type: "+t.type)}intersectObject(e,t=!0,r=[]){return yR(e,this,r,t),r.sort(U$),r}intersectObjects(e,t=!0,r=[]){for(let i=0,n=e.length;i<n;i++)yR(e[i],this,r,t);return r.sort(U$),r}};function U$(e,t){return e.distance-t.distance}function yR(e,t,r,i){if(e.layers.test(t.layers)&&e.raycast(t,r),i===!0){let n=e.children;for(let a=0,o=n.length;a<o;a++)yR(n[a],t,r,!0)}}var G$=class{constructor(e=1,t=0,r=0){return this.radius=e,this.phi=t,this.theta=r,this}set(e,t,r){return this.radius=e,this.phi=t,this.theta=r,this}copy(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this}makeSafe(){return this.phi=Math.max(1e-6,Math.min(Math.PI-1e-6,this.phi)),this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,r){return this.radius=Math.sqrt(e*e+t*t+r*r),this.radius===0?(this.theta=0,this.phi=0):(this.theta=Math.atan2(e,r),this.phi=Math.acos(Ln(t/this.radius,-1,1))),this}clone(){return new this.constructor().copy(this)}},j$=new me,_me=class{constructor(e=new me(1/0,1/0),t=new me(-1/0,-1/0)){this.isBox2=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromPoints(e){this.makeEmpty();for(let t=0,r=e.length;t<r;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){let r=j$.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(r),this.max.copy(e).add(r),this}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y}getCenter(e){return this.isEmpty()?e.set(0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}containsPoint(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y)}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y))}intersectsBox(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y)}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return j$.copy(e).clamp(this.min,this.max).sub(e).length()}intersect(e){return this.min.max(e.min),this.max.min(e.max),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}},W$=new U,t5=new U,Ll=class{constructor(e=new U,t=new U){this.start=e,this.end=t}set(e,t){return this.start.copy(e),this.end.copy(t),this}copy(e){return this.start.copy(e.start),this.end.copy(e.end),this}getCenter(e){return e.addVectors(this.start,this.end).multiplyScalar(.5)}delta(e){return e.subVectors(this.end,this.start)}distanceSq(){return this.start.distanceToSquared(this.end)}distance(){return this.start.distanceTo(this.end)}at(e,t){return this.delta(t).multiplyScalar(e).add(this.start)}closestPointToPointParameter(e,t){W$.subVectors(e,this.start),t5.subVectors(this.end,this.start);let r=t5.dot(t5),i=t5.dot(W$)/r;return t&&(i=Ln(i,0,1)),i}closestPointToPoint(e,t,r){let i=this.closestPointToPointParameter(e,t);return this.delta(r).multiplyScalar(i).add(this.start)}applyMatrix4(e){return this.start.applyMatrix4(e),this.end.applyMatrix4(e),this}equals(e){return e.start.equals(this.start)&&e.end.equals(this.end)}clone(){return new this.constructor().copy(this)}},q$=new U,lpt=class extends _i{constructor(e,t){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=t,this.type="SpotLightHelper";let r=new It,i=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1];for(let a=0,o=1,s=32;a<s;a++,o++){let l=a/s*Math.PI*2,u=o/s*Math.PI*2;i.push(Math.cos(l),Math.sin(l),1,Math.cos(u),Math.sin(u),1)}r.setAttribute("position",new ht(i,3));let n=new Ip({fog:!1,toneMapped:!1});this.cone=new z4(r,n),this.add(this.cone),this.update()}dispose(){this.cone.geometry.dispose(),this.cone.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1);let e=this.light.distance?this.light.distance:1e3,t=e*Math.tan(this.light.angle);this.cone.scale.set(t,t,e),q$.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(q$),this.color!==void 0?this.cone.material.color.set(this.color):this.cone.material.color.copy(this.light.color)}},upt=class extends nn{constructor(e,t,r){let i=new y1(t,4,2),n=new Ed({wireframe:!0,fog:!1,toneMapped:!1});super(i,n),this.light=e,this.color=r,this.type="PointLightHelper",this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1,this.update()}dispose(){this.geometry.dispose(),this.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.color!==void 0?this.material.color.set(this.color):this.material.color.copy(this.light.color)}},Y$=new U,r5=new U,X$=new U,cpt=class extends _i{constructor(e,t,r){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=r,this.type="DirectionalLightHelper",t===void 0&&(t=1);let i=new It;i.setAttribute("position",new ht([-t,t,0,t,t,0,t,-t,0,-t,-t,0,-t,t,0],3));let n=new Ip({fog:!1,toneMapped:!1});this.lightPlane=new zS(i,n),this.add(this.lightPlane),i=new It,i.setAttribute("position",new ht([0,0,0,0,0,1],3)),this.targetLine=new zS(i,n),this.add(this.targetLine),this.update()}dispose(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1),Y$.setFromMatrixPosition(this.light.matrixWorld),r5.setFromMatrixPosition(this.light.target.matrixWorld),X$.subVectors(r5,Y$),this.lightPlane.lookAt(r5),this.color!==void 0?(this.lightPlane.material.color.set(this.color),this.targetLine.material.color.set(this.color)):(this.lightPlane.material.color.copy(this.light.color),this.targetLine.material.color.copy(this.light.color)),this.targetLine.lookAt(r5),this.targetLine.scale.z=X$.length()}},i5=new U,sn=new cm,qS=class extends z4{constructor(e){let t=new It,r=new Ip({color:16777215,vertexColors:!0,toneMapped:!1}),i=[],n=[],a={};o("n1","n2"),o("n2","n4"),o("n4","n3"),o("n3","n1"),o("f1","f2"),o("f2","f4"),o("f4","f3"),o("f3","f1"),o("n1","f1"),o("n2","f2"),o("n3","f3"),o("n4","f4"),o("p","n1"),o("p","n2"),o("p","n3"),o("p","n4"),o("u1","u2"),o("u2","u3"),o("u3","u1"),o("c","t"),o("p","c"),o("cn1","cn2"),o("cn3","cn4"),o("cf1","cf2"),o("cf3","cf4");function o(f,p){s(f),s(p)}function s(f){i.push(0,0,0),n.push(0,0,0),a[f]===void 0&&(a[f]=[]),a[f].push(i.length/3-1)}t.setAttribute("position",new ht(i,3)),t.setAttribute("color",new ht(n,3)),super(t,r),this.type="CameraHelper",this.camera=e,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=a,this.update();let l=new Vt(16755200),u=new Vt(16711680),c=new Vt(43775),h=new Vt(16777215),d=new Vt(3355443);this.setColors(l,u,c,h,d)}setColors(e,t,r,i,n){let a=this.geometry.getAttribute("color");a.setXYZ(0,e.r,e.g,e.b),a.setXYZ(1,e.r,e.g,e.b),a.setXYZ(2,e.r,e.g,e.b),a.setXYZ(3,e.r,e.g,e.b),a.setXYZ(4,e.r,e.g,e.b),a.setXYZ(5,e.r,e.g,e.b),a.setXYZ(6,e.r,e.g,e.b),a.setXYZ(7,e.r,e.g,e.b),a.setXYZ(8,e.r,e.g,e.b),a.setXYZ(9,e.r,e.g,e.b),a.setXYZ(10,e.r,e.g,e.b),a.setXYZ(11,e.r,e.g,e.b),a.setXYZ(12,e.r,e.g,e.b),a.setXYZ(13,e.r,e.g,e.b),a.setXYZ(14,e.r,e.g,e.b),a.setXYZ(15,e.r,e.g,e.b),a.setXYZ(16,e.r,e.g,e.b),a.setXYZ(17,e.r,e.g,e.b),a.setXYZ(18,e.r,e.g,e.b),a.setXYZ(19,e.r,e.g,e.b),a.setXYZ(20,e.r,e.g,e.b),a.setXYZ(21,e.r,e.g,e.b),a.setXYZ(22,e.r,e.g,e.b),a.setXYZ(23,e.r,e.g,e.b),a.setXYZ(24,t.r,t.g,t.b),a.setXYZ(25,t.r,t.g,t.b),a.setXYZ(26,t.r,t.g,t.b),a.setXYZ(27,t.r,t.g,t.b),a.setXYZ(28,t.r,t.g,t.b),a.setXYZ(29,t.r,t.g,t.b),a.setXYZ(30,t.r,t.g,t.b),a.setXYZ(31,t.r,t.g,t.b),a.setXYZ(32,r.r,r.g,r.b),a.setXYZ(33,r.r,r.g,r.b),a.setXYZ(34,r.r,r.g,r.b),a.setXYZ(35,r.r,r.g,r.b),a.setXYZ(36,r.r,r.g,r.b),a.setXYZ(37,r.r,r.g,r.b),a.setXYZ(38,i.r,i.g,i.b),a.setXYZ(39,i.r,i.g,i.b),a.setXYZ(40,n.r,n.g,n.b),a.setXYZ(41,n.r,n.g,n.b),a.setXYZ(42,n.r,n.g,n.b),a.setXYZ(43,n.r,n.g,n.b),a.setXYZ(44,n.r,n.g,n.b),a.setXYZ(45,n.r,n.g,n.b),a.setXYZ(46,n.r,n.g,n.b),a.setXYZ(47,n.r,n.g,n.b),a.setXYZ(48,n.r,n.g,n.b),a.setXYZ(49,n.r,n.g,n.b),a.needsUpdate=!0}update(){let e=this.geometry,t=this.pointMap,r=1,i=1;sn.projectionMatrixInverse.copy(this.camera.projectionMatrixInverse),mn("c",t,e,sn,0,0,-1),mn("t",t,e,sn,0,0,1),mn("n1",t,e,sn,-r,-i,-1),mn("n2",t,e,sn,r,-i,-1),mn("n3",t,e,sn,-r,i,-1),mn("n4",t,e,sn,r,i,-1),mn("f1",t,e,sn,-r,-i,1),mn("f2",t,e,sn,r,-i,1),mn("f3",t,e,sn,-r,i,1),mn("f4",t,e,sn,r,i,1),mn("u1",t,e,sn,r*.7,i*1.1,-1),mn("u2",t,e,sn,-r*.7,i*1.1,-1),mn("u3",t,e,sn,0,i*2,-1),mn("cf1",t,e,sn,-r,0,1),mn("cf2",t,e,sn,r,0,1),mn("cf3",t,e,sn,0,-i,1),mn("cf4",t,e,sn,0,i,1),mn("cn1",t,e,sn,-r,0,-1),mn("cn2",t,e,sn,r,0,-1),mn("cn3",t,e,sn,0,-i,-1),mn("cn4",t,e,sn,0,i,-1),e.getAttribute("position").needsUpdate=!0}dispose(){this.geometry.dispose(),this.material.dispose()}};function mn(e,t,r,i,n,a,o){i5.set(n,a,o).unproject(i);let s=t[e];if(s!==void 0){let l=r.getAttribute("position");for(let u=0,c=s.length;u<c;u++)l.setXYZ(s[u],i5.x,i5.y,i5.z)}}var YS=class extends z4{constructor(e,t=16776960){let r=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),i=[1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],n=new It;n.setIndex(new Zt(r,1)),n.setAttribute("position",new ht(i,3)),super(n,new Ip({color:t,toneMapped:!1})),this.box=e,this.type="Box3Helper",this.geometry.computeBoundingSphere()}updateMatrixWorld(e){let t=this.box;t.isEmpty()||(t.getCenter(this.position),t.getSize(this.scale),this.scale.multiplyScalar(.5),super.updateMatrixWorld(e))}dispose(){this.geometry.dispose(),this.material.dispose()}},hpt=class extends z4{constructor(e=1){let t=[0,0,0,e,0,0,0,0,0,0,e,0,0,0,0,0,0,e],r=[1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],i=new It;i.setAttribute("position",new ht(t,3)),i.setAttribute("color",new ht(r,3));let n=new Ip({vertexColors:!0,toneMapped:!1});super(i,n),this.type="AxesHelper"}setColors(e,t,r){let i=new Vt,n=this.geometry.attributes.color.array;return i.set(e),i.toArray(n,0),i.toArray(n,3),i.set(t),i.toArray(n,6),i.toArray(n,9),i.set(r),i.toArray(n,12),i.toArray(n,15),this.geometry.attributes.color.needsUpdate=!0,this}dispose(){this.geometry.dispose(),this.material.dispose()}},Xh=dpt();function dpt(){let e=new ArrayBuffer(4),t=new Float32Array(e),r=new Uint32Array(e),i=new Uint32Array(512),n=new Uint32Array(512);for(let l=0;l<256;++l){let u=l-127;u<-27?(i[l]=0,i[l|256]=32768,n[l]=24,n[l|256]=24):u<-14?(i[l]=1024>>-u-14,i[l|256]=1024>>-u-14|32768,n[l]=-u-1,n[l|256]=-u-1):u<=15?(i[l]=u+15<<10,i[l|256]=u+15<<10|32768,n[l]=13,n[l|256]=13):u<128?(i[l]=31744,i[l|256]=64512,n[l]=24,n[l|256]=24):(i[l]=31744,i[l|256]=64512,n[l]=13,n[l|256]=13)}let a=new Uint32Array(2048),o=new Uint32Array(64),s=new Uint32Array(64);for(let l=1;l<1024;++l){let u=l<<13,c=0;for(;!(u&8388608);)u<<=1,c-=8388608;u&=-8388609,c+=947912704,a[l]=u|c}for(let l=1024;l<2048;++l)a[l]=939524096+(l-1024<<13);for(let l=1;l<31;++l)o[l]=l<<23;o[31]=1199570944,o[32]=2147483648;for(let l=33;l<63;++l)o[l]=2147483648+(l-32<<23);o[63]=3347054592;for(let l=1;l<64;++l)l!==32&&(s[l]=1024);return{floatView:t,uint32View:r,baseTable:i,shiftTable:n,mantissaTable:a,exponentTable:o,offsetTable:s}}function fpt(e){Math.abs(e)>65504&&console.warn("THREE.DataUtils.toHalfFloat(): Value out of range."),e=Ln(e,-65504,65504),Xh.floatView[0]=e;let t=Xh.uint32View[0],r=t>>23&511;return Xh.baseTable[r]+((t&8388607)>>Xh.shiftTable[r])}function ppt(e){let t=e>>10;return Xh.uint32View[0]=Xh.mantissaTable[Xh.offsetTable[t]+(e&1023)]+Xh.exponentTable[t],Xh.floatView[0]}var vpt=Object.freeze({__proto__:null,fromHalfFloat:ppt,toHalfFloat:fpt});typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:Wy}}));typeof window<"u"&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=Wy);var ox=".",vz=Symbol("target"),Ame=Symbol("unsubscribe");function xR(e){return e instanceof Date||e instanceof Set||e instanceof Map||e instanceof WeakSet||e instanceof WeakMap||ArrayBuffer.isView(e)}function mpt(e){return(typeof e=="object"?e===null:typeof e!="function")||e instanceof RegExp}var Ec=Array.isArray;function mz(e){return typeof e=="symbol"}var gpt={after:(e,t)=>Ec(e)?e.slice(t.length):t===""?e:e.slice(t.length+1),concat:(e,t)=>Ec(e)?(e=[...e],t&&e.push(t),e):t&&t.toString!==void 0?(e!==""&&(e+=ox),mz(t)?e+t.toString():e+t):e,initial:e=>{if(Ec(e))return e.slice(0,-1);if(e==="")return e;let t=e.lastIndexOf(ox);return t===-1?"":e.slice(0,t)},last:e=>{if(Ec(e))return e[e.length-1]||"";if(e==="")return e;let t=e.lastIndexOf(ox);return t===-1?e:e.slice(t+1)},walk:(e,t)=>{if(Ec(e))for(let r of e)t(r);else if(e!==""){let r=0,i=e.indexOf(ox);if(i===-1)t(e);else for(;r<e.length;)i===-1&&(i=e.length),t(e.slice(r,i)),r=i+1,i=e.indexOf(ox,r)}},get(e,t){return this.walk(t,r=>{e&&(e=e[r])}),e}},yl=gpt;function ypt(e){return typeof e=="object"&&typeof e.next=="function"}function xpt(e,t,r,i,n){let a=e.next;if(t.name==="entries")e.next=function(){let o=a.call(this);return o.done===!1&&(o.value[0]=n(o.value[0],t,o.value[0],i),o.value[1]=n(o.value[1],t,o.value[0],i)),o};else if(t.name==="values"){let o=r[vz].keys();e.next=function(){let s=a.call(this);return s.done===!1&&(s.value=n(s.value,t,o.next().value,i)),s}}else e.next=function(){let o=a.call(this);return o.done===!1&&(o.value=n(o.value,t,o.value,i)),o};return e}function Z$(e,t,r){return e.isUnsubscribed||t.ignoreSymbols&&mz(r)||t.ignoreUnderscores&&r.charAt(0)==="_"||"ignoreKeys"in t&&t.ignoreKeys.includes(r)}var bpt=class{constructor(e){this._equals=e,this._proxyCache=new WeakMap,this._pathCache=new WeakMap,this.isUnsubscribed=!1}_getDescriptorCache(){return this._descriptorCache===void 0&&(this._descriptorCache=new WeakMap),this._descriptorCache}_getProperties(e){let t=this._getDescriptorCache(),r=t.get(e);return r===void 0&&(r={},t.set(e,r)),r}_getOwnPropertyDescriptor(e,t){if(this.isUnsubscribed)return Reflect.getOwnPropertyDescriptor(e,t);let r=this._getProperties(e),i=r[t];return i===void 0&&(i=Reflect.getOwnPropertyDescriptor(e,t),r[t]=i),i}getProxy(e,t,r,i){if(this.isUnsubscribed)return e;let n=e[i],a=n||e;this._pathCache.set(a,t);let o=this._proxyCache.get(a);return o===void 0&&(o=n===void 0?new Proxy(e,r):e,this._proxyCache.set(a,o)),o}getPath(e){return this.isUnsubscribed?void 0:this._pathCache.get(e)}isDetached(e,t){return!Object.is(e,yl.get(t,this.getPath(e)))}defineProperty(e,t,r){return Reflect.defineProperty(e,t,r)?(this.isUnsubscribed||(this._getProperties(e)[t]=r),!0):!1}setProperty(e,t,r,i,n){if(!this._equals(n,r)||!(t in e)){let a=this._getOwnPropertyDescriptor(e,t);return a!==void 0&&"set"in a?Reflect.set(e,t,r,i):Reflect.set(e,t,r)}return!0}deleteProperty(e,t,r){if(Reflect.deleteProperty(e,t)){if(!this.isUnsubscribed){let i=this._getDescriptorCache().get(e);i&&(delete i[t],this._pathCache.delete(r))}return!0}return!1}isSameDescriptor(e,t,r){let i=this._getOwnPropertyDescriptor(t,r);return e!==void 0&&i!==void 0&&Object.is(e.value,i.value)&&(e.writable||!1)===(i.writable||!1)&&(e.enumerable||!1)===(i.enumerable||!1)&&(e.configurable||!1)===(i.configurable||!1)&&e.get===i.get&&e.set===i.set}isGetInvariant(e,t){let r=this._getOwnPropertyDescriptor(e,t);return r!==void 0&&r.configurable!==!0&&r.writable!==!0}unsubscribe(){this._descriptorCache=null,this._pathCache=null,this._proxyCache=null,this.isUnsubscribed=!0}};function bR(e){return toString.call(e)==="[object Object]"}function n5(){return!0}function ng(e,t){return e.length!==t.length||e.some((r,i)=>t[i]!==r)}var Sme=new Set(["hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]),wpt=new Set(["concat","includes","indexOf","join","keys","lastIndexOf"]),Cme={push:n5,pop:n5,shift:n5,unshift:n5,copyWithin:ng,reverse:ng,sort:ng,splice:ng,flat:ng,fill:ng},_pt=new Set([...Sme,...wpt,...Object.keys(Cme)]);function a5(e,t){if(e.size!==t.size)return!0;for(let r of e)if(!t.has(r))return!0;return!1}var Eme=["keys","values","entries"],Mme=new Set(["has","toString"]),Tme={add:a5,clear:a5,delete:a5,forEach:a5},Apt=new Set([...Mme,...Object.keys(Tme),...Eme]);function o5(e,t){if(e.size!==t.size)return!0;let r;for(let[i,n]of e)if(r=t.get(i),r!==n||r===void 0&&!t.has(i))return!0;return!1}var Spt=new Set([...Mme,"get"]),Pme={set:o5,clear:o5,delete:o5,forEach:o5},Cpt=new Set([...Spt,...Object.keys(Pme),...Eme]),bp=class{constructor(e,t,r,i){this._path=t,this._isChanged=!1,this._clonedCache=new Set,this._hasOnValidate=i,this._changes=i?[]:null,this.clone=t===void 0?e:this._shallowClone(e)}static isHandledMethod(e){return Sme.has(e)}_shallowClone(e){let t=e;if(bR(e))t={...e};else if(Ec(e))t=[...e];else if(e instanceof Date)t=new Date(e);else if(e instanceof Set)t=new Set([...e].map(r=>this._shallowClone(r)));else if(e instanceof Map){t=new Map;for(let[r,i]of e.entries())t.set(r,this._shallowClone(i))}return this._clonedCache.add(t),t}preferredThisArg(e,t,r,i){return e?(Ec(i)?this._onIsChanged=Cme[t]:i instanceof Set?this._onIsChanged=Tme[t]:i instanceof Map&&(this._onIsChanged=Pme[t]),i):r}update(e,t,r){let i=yl.after(e,this._path);if(t!=="length"){let n=this.clone;yl.walk(i,a=>{n&&n[a]&&(this._clonedCache.has(n[a])||(n[a]=this._shallowClone(n[a])),n=n[a])}),this._hasOnValidate&&this._changes.push({path:i,property:t,previous:r}),n&&n[t]&&(n[t]=r)}this._isChanged=!0}undo(e){let t;for(let r=this._changes.length-1;r!==-1;r--)t=this._changes[r],yl.get(e,t.path)[t.property]=t.previous}isChanged(e){return this._onIsChanged===void 0?this._isChanged:this._onIsChanged(this.clone,e)}},Q$=class extends bp{static isHandledMethod(e){return _pt.has(e)}},Ept=class extends bp{undo(e){e.setTime(this.clone.getTime())}isChanged(e,t){return!t(this.clone.valueOf(),e.valueOf())}},K$=class extends bp{static isHandledMethod(e){return Apt.has(e)}undo(e){for(let t of this.clone)e.add(t);for(let t of e)this.clone.has(t)||e.delete(t)}},J$=class extends bp{static isHandledMethod(e){return Cpt.has(e)}undo(e){for(let[t,r]of this.clone.entries())e.set(t,r);for(let t of e.keys())this.clone.has(t)||e.delete(t)}},Mpt=class extends bp{constructor(e,t,r,i){super(void 0,t,r,i),this._arg1=r[0],this._weakValue=e.has(this._arg1)}isChanged(e){return this._weakValue!==e.has(this._arg1)}undo(e){this._weakValue&&!e.has(this._arg1)?e.add(this._arg1):e.delete(this._arg1)}},Tpt=class extends bp{constructor(e,t,r,i){super(void 0,t,r,i),this._weakKey=r[0],this._weakHas=e.has(this._weakKey),this._weakValue=e.get(this._weakKey)}isChanged(e){return this._weakValue!==e.get(this._weakKey)}undo(e){let t=e.has(this._weakKey);this._weakHas&&!t?e.set(this._weakKey,this._weakValue):!this._weakHas&&t?e.delete(this._weakKey):this._weakValue!==e.get(this._weakKey)&&e.set(this._weakKey,this._weakValue)}},Lg=class{constructor(e){this._stack=[],this._hasOnValidate=e}static isHandledType(e){return bR(e)||Ec(e)||xR(e)}static isHandledMethod(e,t){return bR(e)?bp.isHandledMethod(t):Ec(e)?Q$.isHandledMethod(t):e instanceof Set?K$.isHandledMethod(t):e instanceof Map?J$.isHandledMethod(t):xR(e)}get isCloning(){return this._stack.length>0}start(e,t,r){let i=bp;Ec(e)?i=Q$:e instanceof Date?i=Ept:e instanceof Set?i=K$:e instanceof Map?i=J$:e instanceof WeakSet?i=Mpt:e instanceof WeakMap&&(i=Tpt),this._stack.push(new i(e,t,r,this._hasOnValidate))}update(e,t,r){this._stack[this._stack.length-1].update(e,t,r)}preferredThisArg(e,t,r){let{name:i}=e,n=Lg.isHandledMethod(r,i);return this._stack[this._stack.length-1].preferredThisArg(n,i,t,r)}isChanged(e,t,r){return this._stack[this._stack.length-1].isChanged(e,t,r)}undo(e){this._previousClone!==void 0&&this._previousClone.undo(e)}stop(){return this._previousClone=this._stack.pop(),this._previousClone.clone}},Ppt={equals:Object.is,isShallow:!1,pathAsArray:!1,ignoreSymbols:!1,ignoreUnderscores:!1,ignoreDetached:!1,details:!1},gz=(e,t,r={})=>{r={...Ppt,...r};let i=Symbol("ProxyTarget"),{equals:n,isShallow:a,ignoreDetached:o,details:s}=r,l=new bpt(n),u=typeof r.onValidate=="function",c=new Lg(u),h=(y,x,b,_,w)=>!u||c.isCloning||r.onValidate(yl.concat(l.getPath(y),x),b,_,w)===!0,d=(y,x,b,_)=>{!Z$(l,r,x)&&!(o&&l.isDetached(y,e))&&f(l.getPath(y),x,b,_)},f=(y,x,b,_,w)=>{c.isCloning?c.update(y,x,_):t(yl.concat(y,x),b,_,w)},p=y=>y&&(y[i]||y),v=(y,x,b,_)=>mpt(y)||b==="constructor"||a&&!Lg.isHandledMethod(x,b)||Z$(l,r,b)||l.isGetInvariant(x,b)||o&&l.isDetached(x,e)?y:(_===void 0&&(_=l.getPath(x)),l.getProxy(y,yl.concat(_,b),m,i)),m={get(y,x,b){if(mz(x)){if(x===i||x===vz)return y;if(x===Ame&&!l.isUnsubscribed&&l.getPath(y).length===0)return l.unsubscribe(),y}let _=xR(y)?Reflect.get(y,x):Reflect.get(y,x,b);return v(_,y,x)},set(y,x,b,_){b=p(b);let w=y[i]||y,S=w[x];if(n(S,b)&&x in y)return!0;let A=h(y,x,b,S);return A&&l.setProperty(w,x,b,_,S)?(d(y,x,y[x],S),!0):!A},defineProperty(y,x,b){if(!l.isSameDescriptor(b,y,x)){let _=y[x];h(y,x,b.value,_)&&l.defineProperty(y,x,b,_)&&d(y,x,b.value,_)}return!0},deleteProperty(y,x){if(!Reflect.has(y,x))return!0;let b=Reflect.get(y,x),_=h(y,x,void 0,b);return _&&l.deleteProperty(y,x,b)?(d(y,x,void 0,b),!0):!_},apply(y,x,b){let _=x[i]||x;if(l.isUnsubscribed)return Reflect.apply(y,_,b);if((s===!1||s!==!0&&!s.includes(y.name))&&Lg.isHandledType(_)){let w=yl.initial(l.getPath(y)),S=Lg.isHandledMethod(_,y.name);c.start(_,w,b);let A=Reflect.apply(y,c.preferredThisArg(y,x,_),S?b.map(T=>p(T)):b),M=c.isChanged(_,n),E=c.stop();if(Lg.isHandledType(A)&&S&&(x instanceof Map&&y.name==="get"&&(w=yl.concat(w,b[0])),A=l.getProxy(A,w,m)),M){let T={name:y.name,args:b,result:A},L=c.isCloning?yl.initial(w):w,P=c.isCloning?yl.last(w):"";h(yl.get(e,L),P,_,E,T)?f(L,P,_,E,T):c.undo(_)}return(x instanceof Map||x instanceof Set)&&ypt(A)?xpt(A,y,x,w,v):A}return Reflect.apply(y,x,b)}},g=l.getProxy(e,r.pathAsArray?[]:"",m);return t=t.bind(g),u&&(r.onValidate=r.onValidate.bind(g)),g};gz.target=e=>e&&e[vz]||e;gz.unsubscribe=e=>e[Ame]||e;var $$=gz,Dpt=typeof global=="object"&&global&&global.Object===Object&&global,Dme=Dpt,Ipt=typeof self=="object"&&self&&self.Object===Object&&self,Lpt=Dme||Ipt||Function("return this")(),zu=Lpt,kpt=zu.Symbol,Bl=kpt,Ime=Object.prototype,Rpt=Ime.hasOwnProperty,Opt=Ime.toString,sx=Bl?Bl.toStringTag:void 0;function Bpt(e){var t=Rpt.call(e,sx),r=e[sx];try{e[sx]=void 0;var i=!0}catch{}var n=Opt.call(e);return i&&(t?e[sx]=r:delete e[sx]),n}var Npt=Bpt,Vpt=Object.prototype,Fpt=Vpt.toString;function zpt(e){return Fpt.call(e)}var Hpt=zpt,Upt="[object Null]",Gpt="[object Undefined]",eee=Bl?Bl.toStringTag:void 0;function jpt(e){return e==null?e===void 0?Gpt:Upt:eee&&eee in Object(e)?Npt(e):Hpt(e)}var hm=jpt;function Wpt(e){return e!=null&&typeof e=="object"}var Td=Wpt,qpt="[object Symbol]";function Ypt(e){return typeof e=="symbol"||Td(e)&&hm(e)==qpt}var j4=Ypt;function Xpt(e,t){for(var r=-1,i=e==null?0:e.length,n=Array(i);++r<i;)n[r]=t(e[r],r,e);return n}var Lme=Xpt,Zpt=Array.isArray,nh=Zpt,Qpt=1/0,tee=Bl?Bl.prototype:void 0,ree=tee?tee.toString:void 0;function kme(e){if(typeof e=="string")return e;if(nh(e))return Lme(e,kme)+"";if(j4(e))return ree?ree.call(e):"";var t=e+"";return t=="0"&&1/e==-Qpt?"-0":t}var Kpt=kme,Jpt=/\s/;function $pt(e){for(var t=e.length;t--&&Jpt.test(e.charAt(t)););return t}var e0t=$pt,t0t=/^\s+/;function r0t(e){return e&&e.slice(0,e0t(e)+1).replace(t0t,"")}var i0t=r0t;function n0t(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")}var Ou=n0t,iee=NaN,a0t=/^[-+]0x[0-9a-f]+$/i,o0t=/^0b[01]+$/i,s0t=/^0o[0-7]+$/i,l0t=parseInt;function u0t(e){if(typeof e=="number")return e;if(j4(e))return iee;if(Ou(e)){var t=typeof e.valueOf=="function"?e.valueOf():e;e=Ou(t)?t+"":t}if(typeof e!="string")return e===0?e:+e;e=i0t(e);var r=o0t.test(e);return r||s0t.test(e)?l0t(e.slice(2),r?2:8):a0t.test(e)?iee:+e}var nee=u0t;function c0t(e){return e}var Rme=c0t,h0t="[object AsyncFunction]",d0t="[object Function]",f0t="[object GeneratorFunction]",p0t="[object Proxy]";function v0t(e){if(!Ou(e))return!1;var t=hm(e);return t==d0t||t==f0t||t==h0t||t==p0t}var Ome=v0t,m0t=zu["__core-js_shared__"],LP=m0t,aee=function(){var e=/[^.]+$/.exec(LP&&LP.keys&&LP.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}();function g0t(e){return!!aee&&aee in e}var y0t=g0t,x0t=Function.prototype,b0t=x0t.toString;function w0t(e){if(e!=null){try{return b0t.call(e)}catch{}try{return e+""}catch{}}return""}var dm=w0t,_0t=/[\\^$.*+?()[\]{}|]/g,A0t=/^\[object .+?Constructor\]$/,S0t=Function.prototype,C0t=Object.prototype,E0t=S0t.toString,M0t=C0t.hasOwnProperty,T0t=RegExp("^"+E0t.call(M0t).replace(_0t,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function P0t(e){if(!Ou(e)||y0t(e))return!1;var t=Ome(e)?T0t:A0t;return t.test(dm(e))}var D0t=P0t;function I0t(e,t){return e==null?void 0:e[t]}var L0t=I0t;function k0t(e,t){var r=L0t(e,t);return D0t(r)?r:void 0}var fm=k0t,R0t=fm(zu,"WeakMap"),wR=R0t,oee=Object.create,O0t=function(){function e(){}return function(t){if(!Ou(t))return{};if(oee)return oee(t);e.prototype=t;var r=new e;return e.prototype=void 0,r}}(),B0t=O0t;function N0t(e,t,r){switch(r.length){case 0:return e.call(t);case 1:return e.call(t,r[0]);case 2:return e.call(t,r[0],r[1]);case 3:return e.call(t,r[0],r[1],r[2])}return e.apply(t,r)}var V0t=N0t;function F0t(e,t){var r=-1,i=e.length;for(t||(t=Array(i));++r<i;)t[r]=e[r];return t}var z0t=F0t,H0t=800,U0t=16,G0t=Date.now;function j0t(e){var t=0,r=0;return function(){var i=G0t(),n=U0t-(i-r);if(r=i,n>0){if(++t>=H0t)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}var W0t=j0t;function q0t(e){return function(){return e}}var Y0t=q0t,X0t=function(){try{var e=fm(Object,"defineProperty");return e({},"",{}),e}catch{}}(),XS=X0t,Z0t=XS?function(e,t){return XS(e,"toString",{configurable:!0,enumerable:!1,value:Y0t(t),writable:!0})}:Rme,Q0t=Z0t,K0t=W0t(Q0t),J0t=K0t;function $0t(e,t){for(var r=-1,i=e==null?0:e.length;++r<i&&t(e[r],r,e)!==!1;);return e}var evt=$0t,tvt=9007199254740991,rvt=/^(?:0|[1-9]\d*)$/;function ivt(e,t){var r=typeof e;return t=t??tvt,!!t&&(r=="number"||r!="symbol"&&rvt.test(e))&&e>-1&&e%1==0&&e<t}var yz=ivt;function nvt(e,t,r){t=="__proto__"&&XS?XS(e,t,{configurable:!0,enumerable:!0,value:r,writable:!0}):e[t]=r}var Bme=nvt;function avt(e,t){return e===t||e!==e&&t!==t}var xz=avt,ovt=Object.prototype,svt=ovt.hasOwnProperty;function lvt(e,t,r){var i=e[t];(!(svt.call(e,t)&&xz(i,r))||r===void 0&&!(t in e))&&Bme(e,t,r)}var bz=lvt;function uvt(e,t,r,i){var n=!r;r||(r={});for(var a=-1,o=t.length;++a<o;){var s=t[a],l=i?i(r[s],e[s],s,r,e):void 0;l===void 0&&(l=e[s]),n?Bme(r,s,l):bz(r,s,l)}return r}var W4=uvt,see=Math.max;function cvt(e,t,r){return t=see(t===void 0?e.length-1:t,0),function(){for(var i=arguments,n=-1,a=see(i.length-t,0),o=Array(a);++n<a;)o[n]=i[t+n];n=-1;for(var s=Array(t+1);++n<t;)s[n]=i[n];return s[t]=r(o),V0t(e,this,s)}}var hvt=cvt,dvt=9007199254740991;function fvt(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=dvt}var wz=fvt;function pvt(e){return e!=null&&wz(e.length)&&!Ome(e)}var Nme=pvt,vvt=Object.prototype;function mvt(e){var t=e&&e.constructor,r=typeof t=="function"&&t.prototype||vvt;return e===r}var _z=mvt;function gvt(e,t){for(var r=-1,i=Array(e);++r<e;)i[r]=t(r);return i}var yvt=gvt,xvt="[object Arguments]";function bvt(e){return Td(e)&&hm(e)==xvt}var lee=bvt,Vme=Object.prototype,wvt=Vme.hasOwnProperty,_vt=Vme.propertyIsEnumerable,Avt=lee(function(){return arguments}())?lee:function(e){return Td(e)&&wvt.call(e,"callee")&&!_vt.call(e,"callee")},Az=Avt;function Svt(){return!1}var Cvt=Svt,Fme=typeof exports=="object"&&exports&&!exports.nodeType&&exports,uee=Fme&&typeof module=="object"&&module&&!module.nodeType&&module,Evt=uee&&uee.exports===Fme,cee=Evt?zu.Buffer:void 0,Mvt=cee?cee.isBuffer:void 0,Tvt=Mvt||Cvt,ZS=Tvt,Pvt="[object Arguments]",Dvt="[object Array]",Ivt="[object Boolean]",Lvt="[object Date]",kvt="[object Error]",Rvt="[object Function]",Ovt="[object Map]",Bvt="[object Number]",Nvt="[object Object]",Vvt="[object RegExp]",Fvt="[object Set]",zvt="[object String]",Hvt="[object WeakMap]",Uvt="[object ArrayBuffer]",Gvt="[object DataView]",jvt="[object Float32Array]",Wvt="[object Float64Array]",qvt="[object Int8Array]",Yvt="[object Int16Array]",Xvt="[object Int32Array]",Zvt="[object Uint8Array]",Qvt="[object Uint8ClampedArray]",Kvt="[object Uint16Array]",Jvt="[object Uint32Array]",Yi={};Yi[jvt]=Yi[Wvt]=Yi[qvt]=Yi[Yvt]=Yi[Xvt]=Yi[Zvt]=Yi[Qvt]=Yi[Kvt]=Yi[Jvt]=!0;Yi[Pvt]=Yi[Dvt]=Yi[Uvt]=Yi[Ivt]=Yi[Gvt]=Yi[Lvt]=Yi[kvt]=Yi[Rvt]=Yi[Ovt]=Yi[Bvt]=Yi[Nvt]=Yi[Vvt]=Yi[Fvt]=Yi[zvt]=Yi[Hvt]=!1;function $vt(e){return Td(e)&&wz(e.length)&&!!Yi[hm(e)]}var emt=$vt;function tmt(e){return function(t){return e(t)}}var Sz=tmt,zme=typeof exports=="object"&&exports&&!exports.nodeType&&exports,Tb=zme&&typeof module=="object"&&module&&!module.nodeType&&module,rmt=Tb&&Tb.exports===zme,kP=rmt&&Dme.process,imt=function(){try{var e=Tb&&Tb.require&&Tb.require("util").types;return e||kP&&kP.binding&&kP.binding("util")}catch{}}(),ty=imt,hee=ty&&ty.isTypedArray,nmt=hee?Sz(hee):emt,Hme=nmt,amt=Object.prototype,omt=amt.hasOwnProperty;function smt(e,t){var r=nh(e),i=!r&&Az(e),n=!r&&!i&&ZS(e),a=!r&&!i&&!n&&Hme(e),o=r||i||n||a,s=o?yvt(e.length,String):[],l=s.length;for(var u in e)(t||omt.call(e,u))&&!(o&&(u=="length"||n&&(u=="offset"||u=="parent")||a&&(u=="buffer"||u=="byteLength"||u=="byteOffset")||yz(u,l)))&&s.push(u);return s}var Ume=smt;function lmt(e,t){return function(r){return e(t(r))}}var Gme=lmt,umt=Gme(Object.keys,Object),cmt=umt,hmt=Object.prototype,dmt=hmt.hasOwnProperty;function fmt(e){if(!_z(e))return cmt(e);var t=[];for(var r in Object(e))dmt.call(e,r)&&r!="constructor"&&t.push(r);return t}var pmt=fmt;function vmt(e){return Nme(e)?Ume(e):pmt(e)}var Cz=vmt;function mmt(e){var t=[];if(e!=null)for(var r in Object(e))t.push(r);return t}var gmt=mmt,ymt=Object.prototype,xmt=ymt.hasOwnProperty;function bmt(e){if(!Ou(e))return gmt(e);var t=_z(e),r=[];for(var i in e)i=="constructor"&&(t||!xmt.call(e,i))||r.push(i);return r}var wmt=bmt;function _mt(e){return Nme(e)?Ume(e,!0):wmt(e)}var K0=_mt,Amt=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Smt=/^\w*$/;function Cmt(e,t){if(nh(e))return!1;var r=typeof e;return r=="number"||r=="symbol"||r=="boolean"||e==null||j4(e)?!0:Smt.test(e)||!Amt.test(e)||t!=null&&e in Object(t)}var Emt=Cmt,Mmt=fm(Object,"create"),Bw=Mmt;function Tmt(){this.__data__=Bw?Bw(null):{},this.size=0}var Pmt=Tmt;function Dmt(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}var Imt=Dmt,Lmt="__lodash_hash_undefined__",kmt=Object.prototype,Rmt=kmt.hasOwnProperty;function Omt(e){var t=this.__data__;if(Bw){var r=t[e];return r===Lmt?void 0:r}return Rmt.call(t,e)?t[e]:void 0}var Bmt=Omt,Nmt=Object.prototype,Vmt=Nmt.hasOwnProperty;function Fmt(e){var t=this.__data__;return Bw?t[e]!==void 0:Vmt.call(t,e)}var zmt=Fmt,Hmt="__lodash_hash_undefined__";function Umt(e,t){var r=this.__data__;return this.size+=this.has(e)?0:1,r[e]=Bw&&t===void 0?Hmt:t,this}var Gmt=Umt;function Ky(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var i=e[t];this.set(i[0],i[1])}}Ky.prototype.clear=Pmt;Ky.prototype.delete=Imt;Ky.prototype.get=Bmt;Ky.prototype.has=zmt;Ky.prototype.set=Gmt;var dee=Ky;function jmt(){this.__data__=[],this.size=0}var Wmt=jmt;function qmt(e,t){for(var r=e.length;r--;)if(xz(e[r][0],t))return r;return-1}var S7=qmt,Ymt=Array.prototype,Xmt=Ymt.splice;function Zmt(e){var t=this.__data__,r=S7(t,e);if(r<0)return!1;var i=t.length-1;return r==i?t.pop():Xmt.call(t,r,1),--this.size,!0}var Qmt=Zmt;function Kmt(e){var t=this.__data__,r=S7(t,e);return r<0?void 0:t[r][1]}var Jmt=Kmt;function $mt(e){return S7(this.__data__,e)>-1}var egt=$mt;function tgt(e,t){var r=this.__data__,i=S7(r,e);return i<0?(++this.size,r.push([e,t])):r[i][1]=t,this}var rgt=tgt;function Jy(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var i=e[t];this.set(i[0],i[1])}}Jy.prototype.clear=Wmt;Jy.prototype.delete=Qmt;Jy.prototype.get=Jmt;Jy.prototype.has=egt;Jy.prototype.set=rgt;var C7=Jy,igt=fm(zu,"Map"),Nw=igt;function ngt(){this.size=0,this.__data__={hash:new dee,map:new(Nw||C7),string:new dee}}var agt=ngt;function ogt(e){var t=typeof e;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?e!=="__proto__":e===null}var sgt=ogt;function lgt(e,t){var r=e.__data__;return sgt(t)?r[typeof t=="string"?"string":"hash"]:r.map}var E7=lgt;function ugt(e){var t=E7(this,e).delete(e);return this.size-=t?1:0,t}var cgt=ugt;function hgt(e){return E7(this,e).get(e)}var dgt=hgt;function fgt(e){return E7(this,e).has(e)}var pgt=fgt;function vgt(e,t){var r=E7(this,e),i=r.size;return r.set(e,t),this.size+=r.size==i?0:1,this}var mgt=vgt;function $y(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var i=e[t];this.set(i[0],i[1])}}$y.prototype.clear=agt;$y.prototype.delete=cgt;$y.prototype.get=dgt;$y.prototype.has=pgt;$y.prototype.set=mgt;var M7=$y,ggt="Expected a function";function Ez(e,t){if(typeof e!="function"||t!=null&&typeof t!="function")throw new TypeError(ggt);var r=function(){var i=arguments,n=t?t.apply(this,i):i[0],a=r.cache;if(a.has(n))return a.get(n);var o=e.apply(this,i);return r.cache=a.set(n,o)||a,o};return r.cache=new(Ez.Cache||M7),r}Ez.Cache=M7;var ygt=Ez,xgt=500;function bgt(e){var t=ygt(e,function(i){return r.size===xgt&&r.clear(),i}),r=t.cache;return t}var wgt=bgt,_gt=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Agt=/\\(\\)?/g,Sgt=wgt(function(e){var t=[];return e.charCodeAt(0)===46&&t.push(""),e.replace(_gt,function(r,i,n,a){t.push(n?a.replace(Agt,"$1"):i||r)}),t}),Cgt=Sgt;function Egt(e){return e==null?"":Kpt(e)}var Mgt=Egt;function Tgt(e,t){return nh(e)?e:Emt(e,t)?[e]:Cgt(Mgt(e))}var e2=Tgt,Pgt=1/0;function Dgt(e){if(typeof e=="string"||j4(e))return e;var t=e+"";return t=="0"&&1/e==-Pgt?"-0":t}var T7=Dgt;function Igt(e,t){t=e2(t,e);for(var r=0,i=t.length;e!=null&&r<i;)e=e[T7(t[r++])];return r&&r==i?e:void 0}var jme=Igt;function Lgt(e,t){for(var r=-1,i=t.length,n=e.length;++r<i;)e[n+r]=t[r];return e}var Mz=Lgt,fee=Bl?Bl.isConcatSpreadable:void 0;function kgt(e){return nh(e)||Az(e)||!!(fee&&e&&e[fee])}var Rgt=kgt;function Wme(e,t,r,i,n){var a=-1,o=e.length;for(r||(r=Rgt),n||(n=[]);++a<o;){var s=e[a];t>0&&r(s)?t>1?Wme(s,t-1,r,i,n):Mz(n,s):i||(n[n.length]=s)}return n}var Ogt=Wme;function Bgt(e){var t=e==null?0:e.length;return t?Ogt(e,1):[]}var Ngt=Bgt;function Vgt(e){return J0t(hvt(e,void 0,Ngt),e+"")}var qme=Vgt,Fgt=Gme(Object.getPrototypeOf,Object),Tz=Fgt,zgt="[object Object]",Hgt=Function.prototype,Ugt=Object.prototype,Yme=Hgt.toString,Ggt=Ugt.hasOwnProperty,jgt=Yme.call(Object);function Wgt(e){if(!Td(e)||hm(e)!=zgt)return!1;var t=Tz(e);if(t===null)return!0;var r=Ggt.call(t,"constructor")&&t.constructor;return typeof r=="function"&&r instanceof r&&Yme.call(r)==jgt}var qgt=Wgt;function Ygt(e,t,r){var i=-1,n=e.length;t<0&&(t=-t>n?0:n+t),r=r>n?n:r,r<0&&(r+=n),n=t>r?0:r-t>>>0,t>>>=0;for(var a=Array(n);++i<n;)a[i]=e[i+t];return a}var Xgt=Ygt;function Zgt(){this.__data__=new C7,this.size=0}var Qgt=Zgt;function Kgt(e){var t=this.__data__,r=t.delete(e);return this.size=t.size,r}var Jgt=Kgt;function $gt(e){return this.__data__.get(e)}var e1t=$gt;function t1t(e){return this.__data__.has(e)}var r1t=t1t,i1t=200;function n1t(e,t){var r=this.__data__;if(r instanceof C7){var i=r.__data__;if(!Nw||i.length<i1t-1)return i.push([e,t]),this.size=++r.size,this;r=this.__data__=new M7(i)}return r.set(e,t),this.size=r.size,this}var a1t=n1t;function t2(e){var t=this.__data__=new C7(e);this.size=t.size}t2.prototype.clear=Qgt;t2.prototype.delete=Jgt;t2.prototype.get=e1t;t2.prototype.has=r1t;t2.prototype.set=a1t;var UA=t2;function o1t(e,t){return e&&W4(t,Cz(t),e)}var s1t=o1t;function l1t(e,t){return e&&W4(t,K0(t),e)}var u1t=l1t,Xme=typeof exports=="object"&&exports&&!exports.nodeType&&exports,pee=Xme&&typeof module=="object"&&module&&!module.nodeType&&module,c1t=pee&&pee.exports===Xme,vee=c1t?zu.Buffer:void 0,mee=vee?vee.allocUnsafe:void 0;function h1t(e,t){if(t)return e.slice();var r=e.length,i=mee?mee(r):new e.constructor(r);return e.copy(i),i}var d1t=h1t;function f1t(e,t){for(var r=-1,i=e==null?0:e.length,n=0,a=[];++r<i;){var o=e[r];t(o,r,e)&&(a[n++]=o)}return a}var p1t=f1t;function v1t(){return[]}var Zme=v1t,m1t=Object.prototype,g1t=m1t.propertyIsEnumerable,gee=Object.getOwnPropertySymbols,y1t=gee?function(e){return e==null?[]:(e=Object(e),p1t(gee(e),function(t){return g1t.call(e,t)}))}:Zme,Pz=y1t;function x1t(e,t){return W4(e,Pz(e),t)}var b1t=x1t,w1t=Object.getOwnPropertySymbols,_1t=w1t?function(e){for(var t=[];e;)Mz(t,Pz(e)),e=Tz(e);return t}:Zme,Qme=_1t;function A1t(e,t){return W4(e,Qme(e),t)}var S1t=A1t;function C1t(e,t,r){var i=t(e);return nh(e)?i:Mz(i,r(e))}var Kme=C1t;function E1t(e){return Kme(e,Cz,Pz)}var _R=E1t;function M1t(e){return Kme(e,K0,Qme)}var Jme=M1t,T1t=fm(zu,"DataView"),AR=T1t,P1t=fm(zu,"Promise"),SR=P1t,D1t=fm(zu,"Set"),CR=D1t,yee="[object Map]",I1t="[object Object]",xee="[object Promise]",bee="[object Set]",wee="[object WeakMap]",_ee="[object DataView]",L1t=dm(AR),k1t=dm(Nw),R1t=dm(SR),O1t=dm(CR),B1t=dm(wR),P0=hm;(AR&&P0(new AR(new ArrayBuffer(1)))!=_ee||Nw&&P0(new Nw)!=yee||SR&&P0(SR.resolve())!=xee||CR&&P0(new CR)!=bee||wR&&P0(new wR)!=wee)&&(P0=function(e){var t=hm(e),r=t==I1t?e.constructor:void 0,i=r?dm(r):"";if(i)switch(i){case L1t:return _ee;case k1t:return yee;case R1t:return xee;case O1t:return bee;case B1t:return wee}return t});var Vw=P0,N1t=Object.prototype,V1t=N1t.hasOwnProperty;function F1t(e){var t=e.length,r=new e.constructor(t);return t&&typeof e[0]=="string"&&V1t.call(e,"index")&&(r.index=e.index,r.input=e.input),r}var z1t=F1t,H1t=zu.Uint8Array,QS=H1t;function U1t(e){var t=new e.constructor(e.byteLength);return new QS(t).set(new QS(e)),t}var Dz=U1t;function G1t(e,t){var r=t?Dz(e.buffer):e.buffer;return new e.constructor(r,e.byteOffset,e.byteLength)}var j1t=G1t,W1t=/\w*$/;function q1t(e){var t=new e.constructor(e.source,W1t.exec(e));return t.lastIndex=e.lastIndex,t}var Y1t=q1t,Aee=Bl?Bl.prototype:void 0,See=Aee?Aee.valueOf:void 0;function X1t(e){return See?Object(See.call(e)):{}}var Z1t=X1t;function Q1t(e,t){var r=t?Dz(e.buffer):e.buffer;return new e.constructor(r,e.byteOffset,e.length)}var K1t=Q1t,J1t="[object Boolean]",$1t="[object Date]",eyt="[object Map]",tyt="[object Number]",ryt="[object RegExp]",iyt="[object Set]",nyt="[object String]",ayt="[object Symbol]",oyt="[object ArrayBuffer]",syt="[object DataView]",lyt="[object Float32Array]",uyt="[object Float64Array]",cyt="[object Int8Array]",hyt="[object Int16Array]",dyt="[object Int32Array]",fyt="[object Uint8Array]",pyt="[object Uint8ClampedArray]",vyt="[object Uint16Array]",myt="[object Uint32Array]";function gyt(e,t,r){var i=e.constructor;switch(t){case oyt:return Dz(e);case J1t:case $1t:return new i(+e);case syt:return j1t(e,r);case lyt:case uyt:case cyt:case hyt:case dyt:case fyt:case pyt:case vyt:case myt:return K1t(e,r);case eyt:return new i;case tyt:case nyt:return new i(e);case ryt:return Y1t(e);case iyt:return new i;case ayt:return Z1t(e)}}var yyt=gyt;function xyt(e){return typeof e.constructor=="function"&&!_z(e)?B0t(Tz(e)):{}}var byt=xyt,wyt="[object Map]";function _yt(e){return Td(e)&&Vw(e)==wyt}var Ayt=_yt,Cee=ty&&ty.isMap,Syt=Cee?Sz(Cee):Ayt,Cyt=Syt,Eyt="[object Set]";function Myt(e){return Td(e)&&Vw(e)==Eyt}var Tyt=Myt,Eee=ty&&ty.isSet,Pyt=Eee?Sz(Eee):Tyt,Dyt=Pyt,Iyt=1,Lyt=2,kyt=4,$me="[object Arguments]",Ryt="[object Array]",Oyt="[object Boolean]",Byt="[object Date]",Nyt="[object Error]",ege="[object Function]",Vyt="[object GeneratorFunction]",Fyt="[object Map]",zyt="[object Number]",tge="[object Object]",Hyt="[object RegExp]",Uyt="[object Set]",Gyt="[object String]",jyt="[object Symbol]",Wyt="[object WeakMap]",qyt="[object ArrayBuffer]",Yyt="[object DataView]",Xyt="[object Float32Array]",Zyt="[object Float64Array]",Qyt="[object Int8Array]",Kyt="[object Int16Array]",Jyt="[object Int32Array]",$yt="[object Uint8Array]",e2t="[object Uint8ClampedArray]",t2t="[object Uint16Array]",r2t="[object Uint32Array]",Fi={};Fi[$me]=Fi[Ryt]=Fi[qyt]=Fi[Yyt]=Fi[Oyt]=Fi[Byt]=Fi[Xyt]=Fi[Zyt]=Fi[Qyt]=Fi[Kyt]=Fi[Jyt]=Fi[Fyt]=Fi[zyt]=Fi[tge]=Fi[Hyt]=Fi[Uyt]=Fi[Gyt]=Fi[jyt]=Fi[$yt]=Fi[e2t]=Fi[t2t]=Fi[r2t]=!0;Fi[Nyt]=Fi[ege]=Fi[Wyt]=!1;function GA(e,t,r,i,n,a){var o,s=t&Iyt,l=t&Lyt,u=t&kyt;if(r&&(o=n?r(e,i,n,a):r(e)),o!==void 0)return o;if(!Ou(e))return e;var c=nh(e);if(c){if(o=z1t(e),!s)return z0t(e,o)}else{var h=Vw(e),d=h==ege||h==Vyt;if(ZS(e))return d1t(e,s);if(h==tge||h==$me||d&&!n){if(o=l||d?{}:byt(e),!s)return l?S1t(e,u1t(o,e)):b1t(e,s1t(o,e))}else{if(!Fi[h])return n?e:{};o=yyt(e,h,s)}}a||(a=new UA);var f=a.get(e);if(f)return f;a.set(e,o),Dyt(e)?e.forEach(function(m){o.add(GA(m,t,r,m,e,a))}):Cyt(e)&&e.forEach(function(m,g){o.set(g,GA(m,t,r,g,e,a))});var p=u?l?Jme:_R:l?K0:Cz,v=c?void 0:p(e);return evt(v||e,function(m,g){v&&(g=m,m=e[g]),bz(o,g,GA(m,t,r,g,e,a))}),o}var rge=GA,i2t=1,n2t=4;function a2t(e){return rge(e,i2t|n2t)}var P7=a2t,o2t="__lodash_hash_undefined__";function s2t(e){return this.__data__.set(e,o2t),this}var l2t=s2t;function u2t(e){return this.__data__.has(e)}var c2t=u2t;function KS(e){var t=-1,r=e==null?0:e.length;for(this.__data__=new M7;++t<r;)this.add(e[t])}KS.prototype.add=KS.prototype.push=l2t;KS.prototype.has=c2t;var h2t=KS;function d2t(e,t){for(var r=-1,i=e==null?0:e.length;++r<i;)if(t(e[r],r,e))return!0;return!1}var f2t=d2t;function p2t(e,t){return e.has(t)}var v2t=p2t,m2t=1,g2t=2;function y2t(e,t,r,i,n,a){var o=r&m2t,s=e.length,l=t.length;if(s!=l&&!(o&&l>s))return!1;var u=a.get(e),c=a.get(t);if(u&&c)return u==t&&c==e;var h=-1,d=!0,f=r&g2t?new h2t:void 0;for(a.set(e,t),a.set(t,e);++h<s;){var p=e[h],v=t[h];if(i)var m=o?i(v,p,h,t,e,a):i(p,v,h,e,t,a);if(m!==void 0){if(m)continue;d=!1;break}if(f){if(!f2t(t,function(g,y){if(!v2t(f,y)&&(p===g||n(p,g,r,i,a)))return f.push(y)})){d=!1;break}}else if(!(p===v||n(p,v,r,i,a))){d=!1;break}}return a.delete(e),a.delete(t),d}var ige=y2t;function x2t(e){var t=-1,r=Array(e.size);return e.forEach(function(i,n){r[++t]=[n,i]}),r}var b2t=x2t;function w2t(e){var t=-1,r=Array(e.size);return e.forEach(function(i){r[++t]=i}),r}var _2t=w2t,A2t=1,S2t=2,C2t="[object Boolean]",E2t="[object Date]",M2t="[object Error]",T2t="[object Map]",P2t="[object Number]",D2t="[object RegExp]",I2t="[object Set]",L2t="[object String]",k2t="[object Symbol]",R2t="[object ArrayBuffer]",O2t="[object DataView]",Mee=Bl?Bl.prototype:void 0,RP=Mee?Mee.valueOf:void 0;function B2t(e,t,r,i,n,a,o){switch(r){case O2t:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case R2t:return!(e.byteLength!=t.byteLength||!a(new QS(e),new QS(t)));case C2t:case E2t:case P2t:return xz(+e,+t);case M2t:return e.name==t.name&&e.message==t.message;case D2t:case L2t:return e==t+"";case T2t:var s=b2t;case I2t:var l=i&A2t;if(s||(s=_2t),e.size!=t.size&&!l)return!1;var u=o.get(e);if(u)return u==t;i|=S2t,o.set(e,t);var c=ige(s(e),s(t),i,n,a,o);return o.delete(e),c;case k2t:if(RP)return RP.call(e)==RP.call(t)}return!1}var N2t=B2t,V2t=1,F2t=Object.prototype,z2t=F2t.hasOwnProperty;function H2t(e,t,r,i,n,a){var o=r&V2t,s=_R(e),l=s.length,u=_R(t),c=u.length;if(l!=c&&!o)return!1;for(var h=l;h--;){var d=s[h];if(!(o?d in t:z2t.call(t,d)))return!1}var f=a.get(e),p=a.get(t);if(f&&p)return f==t&&p==e;var v=!0;a.set(e,t),a.set(t,e);for(var m=o;++h<l;){d=s[h];var g=e[d],y=t[d];if(i)var x=o?i(y,g,d,t,e,a):i(g,y,d,e,t,a);if(!(x===void 0?g===y||n(g,y,r,i,a):x)){v=!1;break}m||(m=d=="constructor")}if(v&&!m){var b=e.constructor,_=t.constructor;b!=_&&"constructor"in e&&"constructor"in t&&!(typeof b=="function"&&b instanceof b&&typeof _=="function"&&_ instanceof _)&&(v=!1)}return a.delete(e),a.delete(t),v}var U2t=H2t,G2t=1,Tee="[object Arguments]",Pee="[object Array]",s5="[object Object]",j2t=Object.prototype,Dee=j2t.hasOwnProperty;function W2t(e,t,r,i,n,a){var o=nh(e),s=nh(t),l=o?Pee:Vw(e),u=s?Pee:Vw(t);l=l==Tee?s5:l,u=u==Tee?s5:u;var c=l==s5,h=u==s5,d=l==u;if(d&&ZS(e)){if(!ZS(t))return!1;o=!0,c=!1}if(d&&!c)return a||(a=new UA),o||Hme(e)?ige(e,t,r,i,n,a):N2t(e,t,l,r,i,n,a);if(!(r&G2t)){var f=c&&Dee.call(e,"__wrapped__"),p=h&&Dee.call(t,"__wrapped__");if(f||p){var v=f?e.value():e,m=p?t.value():t;return a||(a=new UA),n(v,m,r,i,a)}}return d?(a||(a=new UA),U2t(e,t,r,i,n,a)):!1}var q2t=W2t;function nge(e,t,r,i,n){return e===t?!0:e==null||t==null||!Td(e)&&!Td(t)?e!==e&&t!==t:q2t(e,t,r,i,nge,n)}var Y2t=nge;function X2t(e,t){return e!=null&&t in Object(e)}var Z2t=X2t;function Q2t(e,t,r){t=e2(t,e);for(var i=-1,n=t.length,a=!1;++i<n;){var o=T7(t[i]);if(!(a=e!=null&&r(e,o)))break;e=e[o]}return a||++i!=n?a:(n=e==null?0:e.length,!!n&&wz(n)&&yz(o,n)&&(nh(e)||Az(e)))}var K2t=Q2t;function J2t(e,t){return e!=null&&K2t(e,t,Z2t)}var $2t=J2t,ext=function(){return zu.Date.now()},OP=ext,txt="Expected a function",rxt=Math.max,ixt=Math.min;function nxt(e,t,r){var i,n,a,o,s,l,u=0,c=!1,h=!1,d=!0;if(typeof e!="function")throw new TypeError(txt);t=nee(t)||0,Ou(r)&&(c=!!r.leading,h="maxWait"in r,a=h?rxt(nee(r.maxWait)||0,t):a,d="trailing"in r?!!r.trailing:d);function f(w){var S=i,A=n;return i=n=void 0,u=w,o=e.apply(A,S),o}function p(w){return u=w,s=setTimeout(g,t),c?f(w):o}function v(w){var S=w-l,A=w-u,M=t-S;return h?ixt(M,a-A):M}function m(w){var S=w-l,A=w-u;return l===void 0||S>=t||S<0||h&&A>=a}function g(){var w=OP();if(m(w))return y(w);s=setTimeout(g,v(w))}function y(w){return s=void 0,d&&i?f(w):(i=n=void 0,o)}function x(){s!==void 0&&clearTimeout(s),u=0,i=l=n=s=void 0}function b(){return s===void 0?o:y(OP())}function _(){var w=OP(),S=m(w);if(i=arguments,n=this,l=w,S){if(s===void 0)return p(l);if(h)return clearTimeout(s),s=setTimeout(g,t),f(l)}return s===void 0&&(s=setTimeout(g,t)),o}return _.cancel=x,_.flush=b,_}var Fw=nxt;function axt(e){var t=e==null?0:e.length;return t?e[t-1]:void 0}var oxt=axt;function sxt(e,t){return e>t}var lxt=sxt;function uxt(e,t){return t.length<2?e:jme(e,Xgt(t,0,-1))}var cxt=uxt;function hxt(e,t){return Y2t(e,t)}var Iz=hxt;function dxt(e,t,r){for(var i=-1,n=e.length;++i<n;){var a=e[i],o=t(a);if(o!=null&&(s===void 0?o===o&&!j4(o):r(o,s)))var s=o,l=a}return l}var fxt=dxt;function pxt(e){return e&&e.length?fxt(e,Rme,lxt):void 0}var vxt=pxt;function mxt(e,t){return t=e2(t,e),e=cxt(e,t),e==null||delete e[T7(oxt(t))]}var gxt=mxt;function yxt(e){return qgt(e)?void 0:e}var xxt=yxt,bxt=1,wxt=2,_xt=4,Axt=qme(function(e,t){var r={};if(e==null)return r;var i=!1;t=Lme(t,function(a){return a=e2(a,e),i||(i=a.length>1),a}),W4(e,Jme(e),r),i&&(r=rge(r,bxt|wxt|_xt,xxt));for(var n=t.length;n--;)gxt(r,t[n]);return r}),ER=Axt;function Sxt(e,t,r,i){if(!Ou(e))return e;t=e2(t,e);for(var n=-1,a=t.length,o=a-1,s=e;s!=null&&++n<a;){var l=T7(t[n]),u=r;if(l==="__proto__"||l==="constructor"||l==="prototype")return e;if(n!=o){var c=s[l];u=i?i(c,l,s):void 0,u===void 0&&(u=Ou(c)?c:yz(t[n+1])?[]:{})}bz(s,l,u),s=s[l]}return e}var Cxt=Sxt;function Ext(e,t,r){for(var i=-1,n=t.length,a={};++i<n;){var o=t[i],s=jme(e,o);r(s,o)&&Cxt(a,e2(o,e),s)}return a}var Mxt=Ext;function Txt(e,t){return Mxt(e,t,function(r,i){return $2t(e,i)})}var Pxt=Txt,Dxt=qme(function(e,t){return e==null?{}:Pxt(e,t)}),Wc=Dxt,Ixt="Expected a function";function Lxt(e,t,r){var i=!0,n=!0;if(typeof e!="function")throw new TypeError(Ixt);return Ou(r)&&(i="leading"in r?!!r.leading:i,n="trailing"in r?!!r.trailing:n),Fw(e,t,{leading:i,maxWait:t,trailing:n})}var kxt=Lxt;function age(e){for(let t of Object.keys(e))e[t]===void 0&&delete e[t];return e}function Nl(e,t){return Object.setPrototypeOf(e,t),e}var Rxt=()=>typeof window>"u"?!1:window.navigator.userAgent.toLowerCase().includes(" electron/"),Oxt=()=>typeof window>"u"?!1:window.navigator.platform.toUpperCase().includes("MAC"),Bxt=()=>typeof window>"u"?!1:/iPad|iPhone|iPod/.test(window.navigator.userAgent)||D7&&"ontouchend"in document,Nxt=()=>typeof window>"u"?!1:window.navigator.userAgent.toLowerCase().indexOf("firefox")>-1,Vxt=()=>typeof window>"u"?!1:"ontouchstart"in window||navigator.maxTouchPoints>0,Fxt=()=>{if(typeof window>"u")return!1;let e=navigator.userAgent,t=navigator.vendor;return/Safari/i.test(e)&&/Apple Computer/.test(t)},zxt=()=>{if(typeof window>"u")return null;let e=navigator.userAgent.match(/Version\/(\d+\.\d)/);return e&&e[1]},Hxt=()=>{if(typeof window>"u")return;let e=new URLSearchParams(window.location.search).get("desktop-app-version");return e?(window.localStorage.setItem("desktop-app-version",e),e):window.localStorage.getItem("desktop-app-version")??"0.0.6"},oge=Rxt();oge&&Hxt();var D7=Oxt(),q4=Bxt(),Uxt=Nxt(),Us=Vxt(),Iee=Fxt(),Gxt=Number(zxt());function sge(e){return Array.isArray(e)?e:[e]}function lge(e,t){let r=0;for(;r<e.length&&r<t.length;){if(e[r]<t[r])return-1;if(e[r]>t[r])return 1;r+=1}return r!==t.length?-1:r!==e.length?1:0}function l5(e){return D7?e.metaKey:e.ctrlKey}function jxt(e){return e.wheelDeltaY===0||e.deltaY===0?D7&&e.shiftKey&&Math.abs(e.wheelDeltaX)>=120?!1:e.wheelDeltaX?e.wheelDeltaX===-3*e.deltaX||e.wheelDeltaX===-3*window.devicePixelRatio*e.deltaX:e.deltaMode===0:e.wheelDeltaY?e.wheelDeltaY===-3*e.deltaY||e.wheelDeltaY===-3*window.devicePixelRatio*e.deltaY:e.deltaMode===0}var jt=[],JS={},Gx={},jA={};function uge(e){jt.includes(e)||jt.push(e)}function x1(e){delete JS[e.pointerId];for(let t=0;t<jt.length;t++)if(jt[t].pointerId===e.pointerId){jt.splice(t,1);break}}function Wxt(){jt.splice(0,jt.length)}function $S(e){if(e.pointerType!=="touch")return;let t=JS[e.pointerId];t===void 0&&(t={x:0,y:0},JS[e.pointerId]=t),t.x=e.pageX,t.y=e.pageY}function BP(e){let t=e.pointerId===jt[0].pointerId?jt[1]:jt[0];return JS[t.pointerId]}function cge(e){Gx[e.key]=!0,jA[e.key]=jA[e.key]===void 0?1:jA[e.key]+1}function hge(e){if(D7&&Gx.Meta)for(let t in Gx)Gx[t]=!1;else Gx[e.key]=!1;jA={}}function qxt(e){e.addEventListener("pointerdown",uge,!0),e.addEventListener("pointerdown",$S,!0),e.addEventListener("pointermove",$S,!0),e.addEventListener("pointerup",x1,!0),e.addEventListener("pointercancel",x1,!0),e.addEventListener("pointerleave",x1,!0),window.addEventListener("keydown",cge,!0),window.addEventListener("keyup",hge,!0)}function Yxt(e){e.removeEventListener("pointerdown",uge,!0),e.removeEventListener("pointerdown",$S,!0),e.removeEventListener("pointermove",$S,!0),e.removeEventListener("pointerup",x1,!0),e.removeEventListener("pointercancel",x1,!0),e.removeEventListener("pointerleave",x1,!0),window.removeEventListener("keydown",cge,!0),window.removeEventListener("keyup",hge,!0)}var dge,Xxt=new Promise(e=>{dge=e}),u5;function Zxt(){if(u5)return u5;async function e(){let t="https://unpkg.com/@splinetool/navmesh-wasm@1.9.47/build",r=Te(()=>import("./BFd9Mv4x.js"),[],import.meta.url),[i,n]=await Promise.all([r,fetch(`${t}/navmesh.wasm`).then(s=>s.arrayBuffer())]),a=i.default,o=await a({wasmBinary:n});dge(o)}return u5=e(),u5}var fge,Qxt=new Promise(e=>{fge=e}),c5;function Kxt(){if(c5)return c5;async function e(){let t=await Te(()=>import("./BM4kW-A5.js"),[],import.meta.url);await t.init(),fge(t)}return c5=e(),c5}var Bt=class{modifyById(e,t){let r=this;if(r[e]===void 0)throw new Error("not expected");{let i={...r,[e]:t};return Object.setPrototypeOf(i,Bt.prototype),i}}add(e,t){var r;return((r=this.runOp({type:1,id:e,data:t}))==null?void 0:r.data)??this}runOp(e){let t=this;if(e.type===1){let r=t[e.id],i;r===void 0?i={type:2,id:e.id}:i={type:1,id:e.id,data:r};let{id:n,data:a}=e,o={...t,[n]:a};return Object.setPrototypeOf(o,Bt.prototype),{data:o,actual:e,reverse:i}}else if(e.type===2){let{id:r}=e,i=t[r];if(i===void 0)return null;{let n={...t};return Object.setPrototypeOf(n,Bt.prototype),delete n[r],{data:n,actual:e,reverse:{type:1,id:r,data:i}}}}return null}};function Lz(e){if(e.deepFreeze!==void 0){e.deepFreeze(e);return}let t=Object.getOwnPropertyNames(e);for(let r of t){let i=e[r];i&&typeof i=="object"&&Lz(i)}return Object.freeze(e)}function Jxt(e,t){let r=0;for(;r<e.length&&r<t.length;){if(e[r]<t[r])return-1;if(e[r]>t[r])return 1;r+=1}return r!==t.length?-1:r!==e.length?1:0}var pge=class extends Error{};function NP(e){let t={...e};return Object.setPrototypeOf(t,Object.getPrototypeOf(e)),t}function Gf(e,t,r){if(e===void 0?t===void 0?(e=0,t=10):e=t-10:t===void 0&&(t=e+10),e>t){let a=e;e=t,t=a}let i=[],n=1/(r+1);for(let a=0;a<r;a++){let o=e+(t-e)*(a+.75+Math.random()*.5)*n;i.push(o)}return i}function kz(e){return e instanceof Uint8Array||e instanceof Uint16Array||e instanceof Uint32Array||e instanceof Int8Array||e instanceof Int16Array||e instanceof Int32Array||e instanceof Float32Array||e instanceof Float64Array}function $xt(){return typeof process<"u"}function vge(e,t){for(let r of e)t(r.id,r.data)!==!0&&vge(r.children,t)}function mge(e,t){if(t(e.id,e.data)!==!0)for(let r of e.children)mge(r,t)}var Ha=class extends Array{constructor(...e){super(...e),Object.setPrototypeOf(this,Ha.prototype)}deepFreeze(){let e=0;for(;e<this.length;)Lz(this[e]),e++}fillCaches0(e,t){this.objCaches.set(e.id,e),this.parentCaches.set(e.id,t);for(let r of e.children)this.fillCaches0(r,e.id)}fillCaches(){if(this.objCaches===void 0){this.objCaches=new Map,this.parentCaches=new Map;for(let e of this)this.fillCaches0(e,null)}}randomId(){this.fillCaches();let e=Array.from(this.objCaches.keys());if(e.length!==0)return e[Math.max(0,Math.floor(Math.random()*e.length)-1)]}nonExistOrDescendantOf(e,t){if(!this.has(e))return!0;for(;e;){let r=this.parent(e);if(r===t)return!0;e=r}return!1}rootAcestor(e){for(;e;){let t=this.parent(e);if(t)e=t;else return e}return e}isDescendantOf(e,t){for(;e;){let r=this.parent(e);if(r===t)return!0;e=r}return!1}data(e){var t;return(t=this.get(e))==null?void 0:t.data}has(e){return this.childrenOf(e)!==void 0}get(e){return this.fillCaches(),this.objCaches.get(e)}childrenOf(e){var t;return e===null?this:(t=this.get(e))==null?void 0:t.children}traverseFrom(e,t){if(e===null)this.traverse(t);else{let r=this.get(e);r&&mge(r,t)}}traverse(e){vge(this,e)}totalSize(){return this.fillCaches(),this.objCaches.size}parent(e){return this.fillCaches(),this.parentCaches.get(e)}childrenArray(e){return e===null?this:this.get(e).children}modifyById(e,t){if(this.get(e)===void 0)throw new Error("not expected");{let r=this.parent(e),i=this.childrenArray(r),n=i.findIndex(o=>o.id===e);if(n<0)throw new Error("not expected");let a=i[n];return i=[...i],i[n]={...a,data:t},this.modifyArrayBy(r,i)}}modifyArrayBy(e,t){let r=e,i=t;for(;r!==null;){let a=i,o=r;if(r=this.parent(r),r===void 0)throw new Error;i=this.childrenArray(r);let s=i.findIndex(l=>l.id===o);if(s<0)throw new Error;i=[...i],i[s]={...i[s],children:a}}Object.setPrototypeOf(i,Ha.prototype);let n=i;return n.fillCaches(),n}runOp(e){switch(e.type){case 7:return this.addOp(e);case 8:return this.deleteOp(e);case 9:return this.moveOp(e)}return null}checkDuplicatedIdRec({id:e,children:t}){if(this.get(e)!==void 0)return!0;for(let r of t)if(this.checkDuplicatedIdRec(r))return!0;return!1}addOp(e){let{parent:t,fi:r,id:i,data:n,children:a}=e;if(t!==null&&this.get(t)===void 0||this.checkDuplicatedIdRec(e))return null;{let o=t,s=this.childrenArray(o),l={fi:r,id:i,data:n,children:a};return s=[...s,l],s.sort((u,c)=>u.fi-c.fi),e.localIndex=s.indexOf(l),{data:this.modifyArrayBy(o,s),actual:e,reverse:{type:8,id:i}}}}deleteOp(e){let{id:t}=e;if(this.get(t)===null)return null;{let r=this.parent(t);if(r===void 0)return null;let i=this.childrenArray(r),n=i.findIndex(o=>o.id===t);e.localIndex=n,i=[...i];let a=i.splice(n,1)[0];return{data:this.modifyArrayBy(r,i),actual:e,reverse:{type:7,...a,parent:r}}}}moveOp(e){let{parent:t,fi:r,id:i}=e;if(t!==null&&this.get(t)===void 0)return this.deleteOp({type:8,id:i});if(t!==null){let h=t;for(;h!==null;){if(h===void 0)throw new Error;if(h===i)throw new pge("cyclic tree");h=this.parent(h)}}let n=this.parent(i);if(n===void 0)return null;let a=n,o=this.childrenArray(n),s=o.findIndex(h=>h.id===i);o=[...o];let l=o.splice(s,1)[0],u=this.modifyArrayBy(n,o);n=t,o=u.childrenArray(n);let c=l.fi;return l={...l,fi:r},o=[...o,l],o.sort((h,d)=>h.fi-d.fi),e.localIndex=o.indexOf(l),u=u.modifyArrayBy(n,o),{data:u,actual:e,reverse:{type:9,parent:a,fi:c,id:i}}}previous(e,t){if(t===null){let i=this.childrenArray(e);return i.length===0?null:i[i.length-1].id}let r=null;for(let i of this.childrenArray(e)){if(i.id===t)return r;r=i.id}return null}traverseSortNext(e){let t=this.parent(e);if(t!==void 0){let r=this.childrenArray(t),i=r.findIndex(n=>n.id===e)+1;if(i<r.length)return r[i].id;if(t)return this.traverseSortNext(t)}}sortNext(e){let t=this.childrenArray(e);return t.length>0?t[0].id:this.traverseSortNext(e)}traverseSortPrevious(e){let t=this.childrenArray(e);return t.length>0?this.traverseSortPrevious(t[t.length-1].id):e}sortPrevious(e){let t=this.parent(e);if(t!==void 0){let r=this.childrenArray(t),i=r.findIndex(n=>n.id===e)-1;return i>=0?this.traverseSortPrevious(r[i].id):t}}getAllSorted(e){let t=[];for(let r of e){let i=this.getWithSortKey(r.id);i!==void 0&&t.push({...r,...i})}t.sort((r,i)=>Jxt(r.sortKey,i.sortKey));for(let r of t)delete r.sortKey;return t}getWithSortKey(e){var t=e;let r=[],i=this.get(t),n=i;if(i!==void 0){for(;t;)r.splice(0,0,i.fi),t=this.parent(t),t!==null&&(i=this.get(t));return{...n,sortKey:r}}}insertBeforeHelper(e,t,r){return this.insertAfterHelper(e,this.previous(e,t),r)}insertAfterHelper(e,t,r){let i=this.childrenArray(e);if(t===null){if(i.length===0)return Gf(0,r,r);{let n=i[0].fi;return Gf(n-r,n,r)}}else{let n=this.get(t);if(n===void 0||this.parent(t)!==e)throw new Error("illegal args");let a=i.find(o=>o.fi>n.fi);if(a===void 0){let o=i[i.length-1].fi;return Gf(o,o+r,r)}else return Gf(n.fi,a.fi,r)}}},e6;(e=>{function t(r,i){if(i.type!==0)return null;if(Array.isArray(r)){let n=i.props,a={},o=[...r],s=!1;if(n)for(let l of Object.keys(n)){let u=parseInt(l);if(isNaN(u))throw new Error("wrong index");a[l]=o[u],o[u]=n[l],s=!0}return s?{data:o,actual:i,reverse:{type:0,props:a}}:null}else{let n=i.props,a={},o={...r},s=!1;if(n)for(let l of Object.keys(n)){a[l]=o[l];let u=n[l];u===void 0?delete o[l]:o[l]=u,s=!0}return s?{data:o,actual:i,reverse:{type:0,props:a}}:null}}e.runOp=t})(e6||(e6={}));var Et=class extends Array{constructor(...e){super(...e),Object.setPrototypeOf(this,Et.prototype)}deepFreeze(){let e=0;for(;e<this.length;)Lz(this[e]),e++}fillCaches0(e){this.objCaches.set(e.id,e)}fillCaches(){if(this.objCaches===void 0){this.objCaches=new Map,Object.getOwnPropertyDescriptor(this,"objCaches").enumerable=!1;for(let e of this)this.fillCaches0(e)}}randomId(){this.fillCaches();let e=Array.from(this.objCaches.keys());if(e.length!==0)return e[Math.max(0,Math.floor(Math.random()*e.length)-1)]}data(e){var t;return(t=this.get(e))==null?void 0:t.data}get(e){return this.fillCaches(),this.objCaches.get(e)}modifyById(e,t){if(this.get(e)===void 0)throw new Error("not expected");{let r=this,i=r.findIndex(a=>a.id===e);if(i<0)throw new Error("not expected");let n=r[i];return r=[...r],r[i]={...n,data:t},this.modifyArrayBy(r)}}modifyArrayBy(e){Object.setPrototypeOf(e,Et.prototype);let t=e;return $xt()||t.fillCaches(),t}runOp(e){switch(e.type){case 4:return this.addOp(e);case 5:return this.deleteOp(e);case 6:return this.moveOp(e)}return null}addOp(e){let{fi:t,id:r,data:i}=e,n=this,a={fi:t,id:r,data:i};return n=[...n,a],n.sort((o,s)=>o.fi-s.fi),e.localIndex=n.indexOf(a),{data:this.modifyArrayBy(n),actual:e,reverse:{type:5,id:r}}}deleteOp(e){let{id:t}=e,r=this,i=r.findIndex(a=>a.id===t);if(i===-1)return null;e.localIndex=i,r=[...r];let n=r.splice(i,1)[0];return{data:this.modifyArrayBy(r),actual:e,reverse:{type:4,...n}}}moveOp(e){let{fi:t,id:r}=e,i=this;i=[...i];let n=i.findIndex(s=>s.id===r);if(n===-1)return null;let a=i[n].fi,o={...i[n],fi:t};return i[n]=o,i.sort((s,l)=>s.fi-l.fi),e.localIndex=i.indexOf(o),{data:this.modifyArrayBy(i),actual:e,reverse:{type:6,fi:a,id:r}}}previous(e){if(e===null)return this.length===0?null:this[this.length-1].id;let t=null;for(let r of this){if(r.id===e)return t;t=r.id}return null}insertBeforeHelper(e,t){return this.insertAfterHelper(this.previous(e),t)}insertAfterHelper(e,t){let r=this;if(e===null){if(r.length===0)return Gf(0,t,t);{let i=r[0].fi;return Gf(i-t,i,t)}}else{let i=this.get(e);if(i===void 0)throw new Error("illegal args");let n=r.find(a=>a.fi>i.fi);if(n===void 0){let a=r[r.length-1].fi;return Gf(a,a+t,t)}else return Gf(i.fi,n.fi,t)}}};function ry(e){return e&&typeof e=="object"&&e instanceof Vn}var Vn=class{unusedFunOverridesTable(e){}runOp(e){let t=[],r=this,i=0,n={};for(;i<e.path.length;){if(t.push(r),r=r===void 0?void 0:r[e.path[i]],r!==void 0&&!ry(r))return null;i+=1}r=r?NP(r):new Vn;for(let[s,l]of Object.entries(e.props)){let u=r[s];n[s]=u,l===void 0?delete r[s]:r[s]=l}for(;i>0;){if(Object.keys(r).length===0){let s=t[i-1];s&&(r=NP(s),delete r[e.path[i-1]])}else{let s=t[i-1];if(s){let l=NP(s);l[e.path[i-1]]=r,r=l}else{let l=new Vn;l[e.path[i-1]]=r,r=l}}i-=1}let a=Object.setPrototypeOf(r,Vn.prototype),o={...e,props:n};return{data:a,actual:e,reverse:o}}},rp;(e=>{function t(n,a){return zw(n,a)??n}e.apply=t;function r(n,a){return Oz(n,a)}e.merge=r;function i(n,a){let o=0,s=a.path,l=n;for(;o<s.length&&l!==void 0;){if(l=Kn.zoomOnce(l,s[o]),l===void 0)return a;if(!ry(l))return;o+=1}if(l===void 0)return a;if(ry(l))if(a.type===0){let u={...a.props};for(let c of Object.keys(l))delete u[c];return{...a,props:u}}else if(a.type===1||a.type===4||a.type===7){let u=Rz([a],l);return u?(console.log(u),u):a}else return a}e.filterOp=i})(rp||(rp={}));function Rz(e,t){if(t===void 0)return;let r=!1,i=e.map(n=>{let a=n.id,o=zw(n.data,t[a]);if(r=r||o!==void 0,o===void 0&&(o=n.data),n.children){let s=Rz(n.children,t);return s!==void 0?r=!0:s=n.children,{...n,id:a,data:o,children:s}}else return{...n,id:a,data:o}});if(r)return i}function ebt(e,t){if(t===void 0)return;let r=!1,i=e.map(n=>{let a=n.id,o=zw(n.data,t[a]);return r=r||o!==void 0,o===void 0&&(o=n.data),{...n,id:a,data:o}});if(r)return Object.setPrototypeOf(i,Object.getPrototypeOf(e)),i}function zw(e,t){if(!ry(t))return t;if(e instanceof Ha){let r=Rz(e,t);return r!==void 0&&Object.setPrototypeOf(r,Object.getPrototypeOf(e)),r}else{if(e instanceof Et)return ebt(e,t);if(Array.isArray(e)){let r=!1,i=e.map((n,a)=>{let o=zw(n,t[a]);return r=r||o!==void 0,o===void 0&&(o=n),o});return r?(Object.setPrototypeOf(i,Object.getPrototypeOf(e)),i):void 0}else{if(e instanceof Vn)return Oz(e,t);if(e&&typeof e=="object"){let r={},i=!1;for(let[n,a]of Object.entries(e)){let o=zw(a,t[n]);i=i||o!==void 0,o===void 0&&(o=a),r[n]=o}return i?(Object.setPrototypeOf(r,Object.getPrototypeOf(e)),r):void 0}}}}function Oz(e,t){if(e===void 0)return t;if(t===void 0)return e;if(!ry(t))return t;if(!ry(e))return rp.apply(e,t);let r=new Set;for(let n of Object.keys(e))r.add(n);for(let n of Object.keys(t))r.add(n);let i=new Vn;for(let n of r){let a=Oz(e===void 0?void 0:e[n],t===void 0?void 0:t[n]);i[n]=a}return i}function tbt(e,t){let r={cur:[],result:[],len:0};return e=Hw(e,t,r)??e,[e,r.result]}function t6(e,t){return e===null?null:(e.cur[e.len]=t,e.len+=1,e)}function r6(e){e&&(e.len-=1)}function rbt(e){if(e===null)return null;e.result.push(e.cur.slice(0,e.len))}function gge(e,t,r){let i=!1,n=e.map(a=>{let o=a.id,s=t[o];if(s!==void 0&&typeof s=="string"&&(i=!0,o=s,r!==null))throw new Error("not supported");let l=Hw(a.data,t,t6(r,o));r6(r),i=i||l!==void 0,l===void 0&&(l=a.data);let u=gge(a.children,t,r);return u!==void 0?i=!0:u=a.children,{...a,id:o,data:l,children:u}});if(i)return n}function ibt(e,t,r){let i=!1,n=e.map(a=>{let o=a.id,s=t[o];if(s!==void 0&&typeof s=="string"&&(i=!0,o=s,r!==null))throw new Error("not supported");let l=Hw(a.data,t,t6(r,o));return r6(r),i=i||l!==void 0,l===void 0&&(l=a.data),{...a,id:o,data:l}});if(i)return Object.setPrototypeOf(n,Object.getPrototypeOf(e)),n}function Hw(e,t,r){if(e instanceof Ha){let i=gge(e,t,r);return i!==void 0&&Object.setPrototypeOf(i,Object.getPrototypeOf(e)),i}else{if(e instanceof Et)return ibt(e,t,r);if(Array.isArray(e)){let i=!1,n=e.map((a,o)=>{let s=Hw(a,t,t6(r,o));return r6(r),i=i||s!==void 0,s===void 0&&(s=a),s});return i?(Object.setPrototypeOf(n,Object.getPrototypeOf(e)),n):void 0}else if(e&&typeof e=="object"&&!kz(e)){let i={},n=!1;for(let[a,o]of Object.entries(e))if(a!=="name"&&a!=="variableId"){let s=t[a];if(typeof s=="string"){if(r!==null)throw new Error("not supported");n=!0,a=s}let l=Hw(o,t,t6(r,a));r6(r),n=n||l!==void 0,l===void 0&&(l=o),i[a]=l}else i[a]=o;return n?(Object.setPrototypeOf(i,Object.getPrototypeOf(e)),i):void 0}else if(typeof e=="string"){let i=t[e];return i!==void 0&&rbt(r),i}else return}}var i6;(e=>{function t(r,i){let n=Kn.zoom(i,r.path);if(typeof n=="object"){let a={};for(let o of Object.keys(r.props))a[o]=n[o];return{...r,props:a}}else return{...r,props:{}}}e.replaceProps=t})(i6||(i6={}));var ya;(e=>{function t(l,u){return{...l,path:l.path.slice(u)}}e.drop=t;function r(l,u){var c;return((c=i(l,u))==null?void 0:c.data)??l}e.applySimple=r;function i(l,u){var d,f;let c=u.path;for(var h=[];;){let p;if(l instanceof Vn&&u.type===0&&(p=l.runOp({...u,path:c.slice(h.length)}),p===null&&(p=void 0)),p===void 0&&h.length===c.length&&(l instanceof Ha||l instanceof Et||l instanceof Bt?p=l.runOp(u):p=e6.runOp(l,u)),p!==void 0)if(p!==null){let g=p.data;for(let y=h.length-1;y>=0;y--){let x=c[y],b=h[y];if(b instanceof Ha){if(typeof x=="number")throw new Error("illegal arg");g=b.modifyById(x,g)}else if(b instanceof Et){if(typeof x=="number")throw new Error("illegal arg");g=b.modifyById(x,g)}else if(b instanceof Bt){if(typeof x=="number")throw new Error("illegal arg");g=b.modifyById(x,g)}else if(b instanceof Vn){let _={...b,[x]:g};g=Object.setPrototypeOf(_,Vn.prototype)}else if(typeof b=="object")if(Array.isArray(b)){if(typeof x=="string"&&(x=parseInt(x),isNaN(x)))throw new Error("Invalid path");let _=g;g=[...b],g[x]=_}else g={...b,[x]:g};else return null}return{data:g,actual:{...p.actual,path:c},reverse:{...p.reverse,path:c}}}else return null;let v=c[h.length],m;if(l instanceof Ha){if(typeof v=="number")throw new Error("");m=(d=l.get(v))==null?void 0:d.data}else if(l instanceof Et){if(typeof v=="number")throw new Error("");m=(f=l.get(v))==null?void 0:f.data}else l!==null&&(m=l[v]);if(m!==void 0)h.push(l),l=m;else return null}}e.apply=i;function n(l,u){for(let c=0;c<l.length&&c<u.length;c++)if(l[c]!==u[c])return!0;return!1}e.pathDisjoint=n;function a(l,u){if(l.length!==u.length)return!1;for(let c=0;c<l.length;c++)if(l[c]!==u[c])return!1;return!0}e.pathEq=a;function o(l,u){return n(l.path,u.path)}e.commutative=o;function s(l,u){return l.type===0&&u.type===0&&a(l.path,u.path)?Object.keys(l.props).every(c=>u.props[c]!==void 0):!1}e.subsumed=s})(ya||(ya={}));var MR;(e=>{function t(){return[]}e.empty=t;function r(u,c){let h=[];for(let d of u){let[f,...p]=d.path;f===c&&h.push({...d,path:p})}return h}e.removePrefix=r;function i(u,c){return u.map(h=>({...h,path:[c,...h.path]}))}e.addPrefix=i;function n(u,c){return[...u,...c]}e.concat=n;function a(u,c){return[...u.filter(h=>!c.some(d=>ya.subsumed(h,d))),...c]}e.compress=a;function o(u,c){return u.every(h=>c.every(d=>ya.commutative(h,d)))}e.commutative=o;function s(u,c){for(let h of c){let d=l(u,h);d!==null&&(u=d.data)}return u}e.applyAll=s;function l(u,c){var h=u;let d=[],f=[];for(let p of c)try{if(p.type===3||p.type===5&&p.path[p.path.length-1]==="variables"){let v,m,g;if(p.type===3?(v=Kn.zoom(h,[...p.path,p.id]),g=ya.apply(h,{...p,type:2})):(v=Kn.zoom(h,[...p.path,p.id,"value"]),g=ya.apply(h,p)),g!==null){h=g.data;let[y,x]=tbt(h,{[p.id]:v});h=y;for(let b=0;b<x.length;b++){let _=x[b],w=_.pop();if(typeof w=="number"){let S=[w];for(let M=b+1;M<x.length;M++){let E=x[M],T=E[E.length-1];if(typeof T=="number"&&Kn.equal(_,E.slice(0,E.length-1)))S.push(T),x.splice(M,1);else break}let A=Kn.zoom(h,_);m=A.map((M,E)=>S.includes(E)?p.id:M),v=A,w=_.pop()}else{if(w==="alphaOverride"||w==="alpha"){v/=100;let S=v,A=Kn.zoom(h,_.slice(0,_.length-2)),M=A.layers.map(E=>E.id===_[_.length-1]?{...E,data:{...E.data,[w]:S}}:E);Object.setPrototypeOf(M,Object.getPrototypeOf(A.layers)),A.layers=M}m=p.id}d.push({type:0,path:_,props:{[w]:v}}),f.push({type:0,path:_,props:{[w]:m}})}f.push(g.reverse),d.push(g.actual)}}else{let v=ya.apply(h,p);v!==null&&(d.push(v.actual),h=v.data,f.push(v.reverse))}}catch(v){if(v instanceof pge)return null;throw v}return{data:h,actual:d,reverse:f.reverse()}}e.apply=l})(MR||(MR={}));var yge=Symbol(),nbt=Symbol(),I7=Symbol(),Y4=class{reportOp(e,t,r=[]){let i=this;if(t===null)return;i._current=t.data;let n=r;for(;!(i instanceof bge);){let a=i._path,o=i._current;if(a!==""&&n.splice(0,0,a),i=i._parent,i===null)return;i.update(a,o)}i.push(n,e,t.actual,t.reverse)}deleteChildren(e){if(this._children){let t=this._children[e];if(t){let r=t[I7];r&&r(),delete this._children[e]}}}},abt=class extends Y4{constructor(e,t,r){super(),this._parent=e,this._path=t,this._current=r}update(e,t){if(Array.isArray(this._current)){if(typeof e=="string"&&(e=parseInt(e),isNaN(e)))throw new Error("Invalid path");this._current=[...this._current],this._current[e]=t}else this._current={...this._current,[e]:t}}runOp(e){this.reportOp(e,e6.runOp(this._current,e),e.path)}},obt=class extends Y4{constructor(e,t,r){super(),this._parent=e,this._path=t,this._current=r}update(e,t){this._current={...this._current,[e]:t},Object.setPrototypeOf(this._current,Bt.prototype)}runOp(e){this.reportOp(e,this._current.runOp(e))}},xge={get(e,t){if(t===I7)return()=>{e._parent=null};if(t===yge)return e._current;if(t===nbt)return e;let{_current:r,_children:i}=e;if(t==="push"&&Array.isArray(r))throw new Error("not supported to expand array");let n=i===void 0?void 0:i[t];if(n!==void 0)return n;let a=r[t],o=L7(e,t,a);return o!==a?(i===void 0&&(i={},e._children=i),i[t]=o,o):a},has(e,t){return t in e._current},ownKeys(e){return Reflect.ownKeys(e._current)},defineProperty(){throw Error("not supported")},getPrototypeOf(e){return Object.getPrototypeOf(e._current)},setPrototypeOf(){throw Error("not supported")},getOwnPropertyDescriptor(e,t){let r=e._current,i=Reflect.getOwnPropertyDescriptor(r,t);return i&&{writable:!0,configurable:!0,enumerable:i.enumerable,value:r[t]}}},sbt={...xge,set(e,t,r){let i={type:0,props:{[t]:_n(r)??r}};return e.deleteChildren(t),e.runOp(i),!0},deleteProperty(e,t){let r={type:0,props:{[t]:void 0}};return e.deleteChildren(t),e.runOp(r),!0}},lbt={...xge,set(e,t,r){return r===void 0?this.deleteProperty(e,t):(e.deleteChildren(t),e.runOp({type:1,id:t,data:r})),!0},deleteProperty(e,t){return e.runOp({type:2,id:t}),!0}},Bz=class extends Y4{constructor(e,t,r){super(),this._children={},this._parent=e,this._path=t,this._current=r,this[I7]=()=>{this._parent=null}}unproxy(){return this._current}update(e,t){this._current=this._current.modifyById(e,t)}runOp(e){this.reportOp(e,this._current.runOp(e))}randomId(){return this._current.randomId()}isDescendantOf(e,t){return this._current.isDescendantOf(e,t)}childrenOf(e){return this._current.childrenOf(e)}traverse(e){return this._current.traverse(e)}get(e){return this._current.get(e)}parent(e){return this._current.parent(e)}traverse(e){this._current.traverse((t,r)=>{e(t,this.data(t))})}data(e){var o;let{_current:t,_children:r}=this,i=r===void 0?void 0:r[e];if(i!==void 0)return i;let n=(o=t.get(e))==null?void 0:o.data,a=L7(this,e,n);return a!==n?(r===void 0&&(r={},this._children=r),r[e]=a,a):n}add(e,t,r,i,n){this.runOp({type:7,parent:e,fi:t,id:r,data:i,children:n})}move(e,t,r){this.runOp({type:9,parent:e,fi:t,id:r})}insertAfter(e,t,r){let i=this._current.insertAfterHelper(e,t,r.length);for(let n=0;n<r.length;n++){let a=r[n];this.add(e,i[n],a.id,a.data,a.children)}}insertBefore(e,t,r){let i=this._current.insertBeforeHelper(e,t,r.length);for(let n=0;n<r.length;n++){let a=r[n];this.add(e,i[n],a.id,a.data,a.children)}}moveAfter(e,t,r){let i=this._current.insertAfterHelper(e,t,r.length);for(let n=0;n<r.length;n++){let a=r[n];this.move(e,i[n],a)}}moveBefore(e,t,r){let i=this._current.insertBeforeHelper(e,t,r.length);for(let n=0;n<r.length;n++){let a=r[n];this.move(e,i[n],a)}}delete(e){this.deleteChildren(e),this.runOp({type:8,id:e})}sortNext(e){return this._current.sortNext(e)}sortPrevious(e){return this._current.sortPrevious(e)}getAllSorted(e){return this._current.getAllSorted(e)}},Nz=class extends Y4{constructor(e,t,r){super(),this._children={},this._parent=e,this._path=t,this._current=r,this[I7]=()=>{this._parent=null}}unproxy(){return this._current}get length(){return this._current.length}forEach(e){let t=this.length;for(let r=0;r<t;r++){let i=this._current[r].id,n=this._current[r].fi;e(this.data(this._current[r].id),i,n)}}find(e){let t=this.length;for(let r=0;r<t;r++){let i=this._current[r].id;if(e(this.data(i),i))return this.get(i)}}update(e,t){this._current=this._current.modifyById(e,t)}randomId(){return this._current.randomId()}get(e){return{...this._current.get(e),data:this.data(e)}}data(e){var o;let{_current:t,_children:r}=this,i=r===void 0?void 0:r[e];if(i!==void 0)return i;let n=(o=t.get(e))==null?void 0:o.data,a=L7(this,e,n);return a!==n?(r===void 0&&(r={},this._children=r),r[e]=a,a):n}runOp(e){this.reportOp(e,this._current.runOp(e))}add(e,t,r){this.runOp({type:4,fi:e,id:t,data:r})}move(e,t){this.runOp({type:6,fi:e,id:t})}insertAfter(e,t){let r=this._current.insertAfterHelper(e,t.length);for(let i=0;i<t.length;i++){let n=t[i];this.add(r[i],n.id,n.data)}}insertBefore(e,t){let r=this._current.insertBeforeHelper(e,t.length);for(let i=0;i<t.length;i++){let n=t[i];this.add(r[i],n.id,n.data)}}moveAfter(e,t){let r=this._current.insertAfterHelper(e,t.length);for(let i=0;i<t.length;i++){let n=t[i];this.move(r[i],n)}}moveBefore(e,t){let r=this._current.insertBeforeHelper(e,t.length);for(let i=0;i<t.length;i++){let n=t[i];this.move(r[i],n)}}delete(e){this.deleteChildren(e),this.runOp({type:5,id:e})}};function VP(e,t,r){if(e.length>0){let i=e[e.length-1];if(i.type===0&&t.type===0&&Kn.equal(i.path,r)){Object.assign(i.props,t.props);return}}e.push({...t,path:r})}var bge=class extends Y4{constructor(e){super(),this.ts=[],this.actual=[],this.reverse=[],this._current=e}update(e,t){if(e!=="")throw new Error("");this._current=t}push(e,t,r,i){VP(this.ts,t,e),VP(this.actual,r,e),VP(this.reverse,i,e)}result(){return{data:this._current,ts:this.ts,actual:this.actual,reverse:this.reverse.reverse()}}};function L7(e,t,r){return r instanceof Ha?new Bz(e,t,r):r instanceof Et?new Nz(e,t,r):r instanceof Bt?new Proxy(new obt(e,t,r),lbt):r!==null&&typeof r=="object"?kz(r)?r:new Proxy(new abt(e,t,r),sbt):r}function wge(e){let t=new bge(e);return[L7(t,"",e),t]}function Uw(e,t){let[r,i]=wge(e);return t(r),i.result()}function _n(e){return e instanceof Bz||e instanceof Nz?e._current:e!==null&&typeof e=="object"?e[yge]:e}var Kn;(e=>{function t(a,o){if(o.length===a.length)for(var s=0;s<a.length;){if(a[s]!==o[s])return!1;s+=1}else return!1;return!0}e.equal=t;function r(a,o,s){let l=n(s,a);if(l!==void 0&&typeof l=="object"&&l!==null){let u={...o};return Object.keys(l).forEach(c=>{delete u[c]}),u}else return o}e.removeOverridden=r;function i(a,o){if((a instanceof Ha||a instanceof Bz)&&typeof o=="string"||(a instanceof Et||a instanceof Nz)&&typeof o=="string")return a.data(o);if(typeof o=="number"&&Array.isArray(a)||typeof o=="string"&&typeof a=="object"&&a!==null)return a[o]}e.zoomOnce=i;function n(a,o,s=0){for(;s<o.length&&a!==void 0;)a=i(a,o[s]),s+=1;return a}e.zoom=n})(Kn||(Kn={}));function ubt(e,t){let r=[];if(t.length===e.length)for(var i=0;i<e.length;){if(t[i]==="*")r.push(e[i]);else if(e[i]!==t[i])return null;i+=1}else return null;return r}function Ri(e,t){let r=[];if(t.length<=e.length)for(var i=0;i<t.length;){if(t[i]==="*")r.push(e[i]);else if(e[i]!==t[i])return null;i+=1}else return null;return r}var _ge=class{},Lee=class extends _ge{constructor(e){super(),this.id=e}},kee=class extends _ge{constructor(e){super(),this.data=e}},TR;try{TR=new TextDecoder}catch{}var yt,ip,ke=0,ms={},li,jf,xl=0,Mc=0,Ns,hd,Ko=[],bi,Ree={useRecords:!1,mapsAsObjects:!0},Age=class{},Sge=new Age;Sge.name="MessagePack 0xC1";var iy=!1,n6=class{constructor(e){e&&(e.useRecords===!1&&e.mapsAsObjects===void 0&&(e.mapsAsObjects=!0),e.structures?e.structures.sharedLength=e.structures.length:e.getStructures&&((e.structures=[]).uninitialized=!0,e.structures.sharedLength=0)),Object.assign(this,e)}unpack(e,t){if(yt)return Dge(()=>(DR(),this?this.unpack(e,t):n6.prototype.unpack.call(Ree,e,t)));ip=t>-1?t:e.length,ke=0,Mc=0,jf=null,Ns=null,yt=e;try{bi=e.dataView||(e.dataView=new DataView(e.buffer,e.byteOffset,e.byteLength))}catch(r){throw yt=null,e instanceof Uint8Array?r:new Error("Source must be a Uint8Array or Buffer but was a "+(e&&typeof e=="object"?e.constructor.name:typeof e))}if(this instanceof n6){if(ms=this,this.structures)return li=this.structures,h5();(!li||li.length>0)&&(li=[])}else ms=Ree,(!li||li.length>0)&&(li=[]);return h5()}unpackMultiple(e,t){let r,i=0;try{iy=!0;let n=e.length,a=this?this.unpack(e,n):R7.unpack(e,n);if(t){for(t(a);ke<n;)if(i=ke,t(h5())===!1)return}else{for(r=[a];ke<n;)i=ke,r.push(h5());return r}}catch(n){throw n.lastPosition=i,n.values=r,n}finally{iy=!1,DR()}}_mergeStructures(e,t){e=e||[];for(let r=0,i=e.length;r<i;r++){let n=e[r];n&&(n.isShared=!0,r>=32&&(n.highByte=r-32>>5))}e.sharedLength=e.length;for(let r in t||[])if(r>=0){let i=e[r],n=t[r];n&&(i&&((e.restoreStructures||(e.restoreStructures=[]))[r]=i),e[r]=n)}return this.structures=e}decode(e,t){return this.unpack(e,t)}};function h5(){try{if(!ms.trusted&&!iy){let t=li.sharedLength||0;t<li.length&&(li.length=t)}let e=hn();if(ke==ip)li.restoreStructures&&Oee(),li=null,yt=null,hd&&(hd=null);else if(ke>ip){let t=new Error("Unexpected end of MessagePack data");throw t.incomplete=!0,t}else if(!iy)throw new Error("Data read, but end of buffer not reached");return e}catch(e){throw li.restoreStructures&&Oee(),DR(),(e instanceof RangeError||e.message.startsWith("Unexpected end of buffer"))&&(e.incomplete=!0),e}}function Oee(){for(let e in li.restoreStructures)li[e]=li.restoreStructures[e];li.restoreStructures=null}function hn(){let e=yt[ke++];if(e<160)if(e<128){if(e<64)return e;{let t=li[e&63]||ms.getStructures&&Cge()[e&63];return t?(t.read||(t.read=Vz(t,e&63)),t.read()):e}}else if(e<144)if(e-=128,ms.mapsAsObjects){let t={};for(let r=0;r<e;r++)t[Mge()]=hn();return t}else{let t=new Map;for(let r=0;r<e;r++)t.set(hn(),hn());return t}else{e-=144;let t=new Array(e);for(let r=0;r<e;r++)t[r]=hn();return t}else if(e<192){let t=e-160;if(Mc>=ke)return jf.slice(ke-xl,(ke+=t)-xl);if(Mc==0&&ip<140){let r=t<16?Fz(t):Ege(t);if(r!=null)return r}return PR(t)}else{let t;switch(e){case 192:return null;case 193:return Ns?(t=hn(),t>0?Ns[1].slice(Ns.position1,Ns.position1+=t):Ns[0].slice(Ns.position0,Ns.position0-=t)):Sge;case 194:return!1;case 195:return!0;case 196:return FP(yt[ke++]);case 197:return t=bi.getUint16(ke),ke+=2,FP(t);case 198:return t=bi.getUint32(ke),ke+=4,FP(t);case 199:return f0(yt[ke++]);case 200:return t=bi.getUint16(ke),ke+=2,f0(t);case 201:return t=bi.getUint32(ke),ke+=4,f0(t);case 202:if(t=bi.getFloat32(ke),ms.useFloat32>2){let r=zz[(yt[ke]&127)<<1|yt[ke+1]>>7];return ke+=4,(r*t+(t>0?.5:-.5)>>0)/r}return ke+=4,t;case 203:return t=bi.getFloat64(ke),ke+=8,t;case 204:return yt[ke++];case 205:return t=bi.getUint16(ke),ke+=2,t;case 206:return t=bi.getUint32(ke),ke+=4,t;case 207:return ms.int64AsNumber?(t=bi.getUint32(ke)*4294967296,t+=bi.getUint32(ke+4)):t=bi.getBigUint64(ke),ke+=8,t;case 208:return bi.getInt8(ke++);case 209:return t=bi.getInt16(ke),ke+=2,t;case 210:return t=bi.getInt32(ke),ke+=4,t;case 211:return ms.int64AsNumber?(t=bi.getInt32(ke)*4294967296,t+=bi.getUint32(ke+4)):t=bi.getBigInt64(ke),ke+=8,t;case 212:if(t=yt[ke++],t==114)return zee(yt[ke++]&63);{let r=Ko[t];if(r)return r.read?(ke++,r.read(hn())):r.noBuffer?(ke++,r()):r(yt.subarray(ke,++ke));throw new Error("Unknown extension "+t)}case 213:return t=yt[ke],t==114?(ke++,zee(yt[ke++]&63,yt[ke++])):f0(2);case 214:return f0(4);case 215:return f0(8);case 216:return f0(16);case 217:return t=yt[ke++],Mc>=ke?jf.slice(ke-xl,(ke+=t)-xl):hbt(t);case 218:return t=bi.getUint16(ke),ke+=2,Mc>=ke?jf.slice(ke-xl,(ke+=t)-xl):dbt(t);case 219:return t=bi.getUint32(ke),ke+=4,Mc>=ke?jf.slice(ke-xl,(ke+=t)-xl):fbt(t);case 220:return t=bi.getUint16(ke),ke+=2,Nee(t);case 221:return t=bi.getUint32(ke),ke+=4,Nee(t);case 222:return t=bi.getUint16(ke),ke+=2,Vee(t);case 223:return t=bi.getUint32(ke),ke+=4,Vee(t);default:if(e>=224)return e-256;if(e===void 0){let r=new Error("Unexpected end of MessagePack data");throw r.incomplete=!0,r}throw new Error("Unknown MessagePack token "+e)}}}var cbt=/^[a-zA-Z_$][a-zA-Z\d_$]*$/;function Vz(e,t){function r(){if(r.count++>2){let n=e.read=new Function("r","return function(){return {"+e.map(a=>cbt.test(a)?a+":r()":"["+JSON.stringify(a)+"]:r()").join(",")+"}}")(hn);return e.highByte===0&&(e.read=Bee(t,e.read)),n()}let i={};for(let n=0,a=e.length;n<a;n++){let o=e[n];i[o]=hn()}return i}return r.count=0,e.highByte===0?Bee(t,r):r}var Bee=(e,t)=>function(){let r=yt[ke++];if(r===0)return t();let i=e<32?-(e+(r<<5)):e+(r<<5),n=li[i]||Cge()[i];if(!n)throw new Error("Record id is not defined for "+i);return n.read||(n.read=Vz(n,e)),n.read()};function Cge(){let e=Dge(()=>(yt=null,ms.getStructures()));return li=ms._mergeStructures(e,li)}var PR=k7,hbt=k7,dbt=k7,fbt=k7;function k7(e){let t;if(e<16&&(t=Fz(e)))return t;if(e>64&&TR)return TR.decode(yt.subarray(ke,ke+=e));let r=ke+e,i=[];for(t="";ke<r;){let n=yt[ke++];if(!(n&128))i.push(n);else if((n&224)===192){let a=yt[ke++]&63;i.push((n&31)<<6|a)}else if((n&240)===224){let a=yt[ke++]&63,o=yt[ke++]&63;i.push((n&31)<<12|a<<6|o)}else if((n&248)===240){let a=yt[ke++]&63,o=yt[ke++]&63,s=yt[ke++]&63,l=(n&7)<<18|a<<12|o<<6|s;l>65535&&(l-=65536,i.push(l>>>10&1023|55296),l=56320|l&1023),i.push(l)}else i.push(n);i.length>=4096&&(t+=ca.apply(String,i),i.length=0)}return i.length>0&&(t+=ca.apply(String,i)),t}function Nee(e){let t=new Array(e);for(let r=0;r<e;r++)t[r]=hn();return t}function Vee(e){if(ms.mapsAsObjects){let t={};for(let r=0;r<e;r++)t[Mge()]=hn();return t}else{let t=new Map;for(let r=0;r<e;r++)t.set(hn(),hn());return t}}var ca=String.fromCharCode;function Ege(e){let t=ke,r=new Array(e);for(let i=0;i<e;i++){let n=yt[ke++];if((n&128)>0){ke=t;return}r[i]=n}return ca.apply(String,r)}function Fz(e){if(e<4)if(e<2){if(e===0)return"";{let t=yt[ke++];if((t&128)>1){ke-=1;return}return ca(t)}}else{let t=yt[ke++],r=yt[ke++];if((t&128)>0||(r&128)>0){ke-=2;return}if(e<3)return ca(t,r);let i=yt[ke++];if((i&128)>0){ke-=3;return}return ca(t,r,i)}else{let t=yt[ke++],r=yt[ke++],i=yt[ke++],n=yt[ke++];if((t&128)>0||(r&128)>0||(i&128)>0||(n&128)>0){ke-=4;return}if(e<6){if(e===4)return ca(t,r,i,n);{let a=yt[ke++];if((a&128)>0){ke-=5;return}return ca(t,r,i,n,a)}}else if(e<8){let a=yt[ke++],o=yt[ke++];if((a&128)>0||(o&128)>0){ke-=6;return}if(e<7)return ca(t,r,i,n,a,o);let s=yt[ke++];if((s&128)>0){ke-=7;return}return ca(t,r,i,n,a,o,s)}else{let a=yt[ke++],o=yt[ke++],s=yt[ke++],l=yt[ke++];if((a&128)>0||(o&128)>0||(s&128)>0||(l&128)>0){ke-=8;return}if(e<10){if(e===8)return ca(t,r,i,n,a,o,s,l);{let u=yt[ke++];if((u&128)>0){ke-=9;return}return ca(t,r,i,n,a,o,s,l,u)}}else if(e<12){let u=yt[ke++],c=yt[ke++];if((u&128)>0||(c&128)>0){ke-=10;return}if(e<11)return ca(t,r,i,n,a,o,s,l,u,c);let h=yt[ke++];if((h&128)>0){ke-=11;return}return ca(t,r,i,n,a,o,s,l,u,c,h)}else{let u=yt[ke++],c=yt[ke++],h=yt[ke++],d=yt[ke++];if((u&128)>0||(c&128)>0||(h&128)>0||(d&128)>0){ke-=12;return}if(e<14){if(e===12)return ca(t,r,i,n,a,o,s,l,u,c,h,d);{let f=yt[ke++];if((f&128)>0){ke-=13;return}return ca(t,r,i,n,a,o,s,l,u,c,h,d,f)}}else{let f=yt[ke++],p=yt[ke++];if((f&128)>0||(p&128)>0){ke-=14;return}if(e<15)return ca(t,r,i,n,a,o,s,l,u,c,h,d,f,p);let v=yt[ke++];if((v&128)>0){ke-=15;return}return ca(t,r,i,n,a,o,s,l,u,c,h,d,f,p,v)}}}}}function FP(e){return ms.copyBuffers?Uint8Array.prototype.slice.call(yt,ke,ke+=e):yt.subarray(ke,ke+=e)}function f0(e){let t=yt[ke++];if(Ko[t])return Ko[t](yt.subarray(ke,ke+=e));throw new Error("Unknown extension type "+t)}var Fee=new Array(4096);function Mge(){let e=yt[ke++];if(e>=160&&e<192){if(e=e-160,Mc>=ke)return jf.slice(ke-xl,(ke+=e)-xl);if(!(Mc==0&&ip<180))return PR(e)}else return ke--,hn();let t=(e<<5^(e>1?bi.getUint16(ke):e>0?yt[ke]:0))&4095,r=Fee[t],i=ke,n=ke+e-3,a,o=0;if(r&&r.bytes==e){for(;i<n;){if(a=bi.getUint32(i),a!=r[o++]){i=1879048192;break}i+=4}for(n+=3;i<n;)if(a=yt[i++],a!=r[o++]){i=1879048192;break}if(i===n)return ke=i,r.string;n-=3,i=ke}for(r=[],Fee[t]=r,r.bytes=e;i<n;)a=bi.getUint32(i),r.push(a),i+=4;for(n+=3;i<n;)a=yt[i++],r.push(a);let s=e<16?Fz(e):Ege(e);return s!=null?r.string=s:r.string=PR(e)}var zee=(e,t)=>{var r=hn();let i=e;t!==void 0&&(e=e<32?-((t<<5)+e):(t<<5)+e,r.highByte=t);let n=li[e];return n&&n.isShared&&((li.restoreStructures||(li.restoreStructures=[]))[e]=n),li[e]=r,r.read=Vz(r,i),r.read()},Tge=typeof self=="object"?self:global;Ko[0]=()=>{};Ko[0].noBuffer=!0;Ko[101]=()=>{let e=hn();return(Tge[e[0]]||Error)(e[1])};Ko[105]=e=>{let t=bi.getUint32(ke-4);hd||(hd=new Map);let r=yt[ke],i;r>=144&&r<160||r==220||r==221?i=[]:i={};let n={target:i};hd.set(t,n);let a=hn();return n.used?Object.assign(i,a):(n.target=a,a)};Ko[112]=e=>{let t=bi.getUint32(ke-4),r=hd.get(t);return r.used=!0,r.target};Ko[115]=()=>new Set(hn());var Pge=["Int8","Uint8","Uint8Clamped","Int16","Uint16","Int32","Uint32","Float32","Float64","BigInt64","BigUint64"].map(e=>e+"Array");Ko[116]=e=>{let t=e[0],r=Pge[t];if(!r)throw new Error("Could not find typed array for code "+t);return new Tge[r](Uint8Array.prototype.slice.call(e,1).buffer)};Ko[120]=()=>{let e=hn();return new RegExp(e[0],e[1])};Ko[98]=e=>{let t=(e[0]<<24)+(e[1]<<16)+(e[2]<<8)+e[3],r=ke;ke+=t-4,Ns=[hn(),hn()],Ns.position0=0,Ns.position1=0;let i=ke;ke=r;try{return hn()}finally{ke=i}};Ko[255]=e=>e.length==4?new Date((e[0]*16777216+(e[1]<<16)+(e[2]<<8)+e[3])*1e3):e.length==8?new Date(((e[0]<<22)+(e[1]<<14)+(e[2]<<6)+(e[3]>>2))/1e6+((e[3]&3)*4294967296+e[4]*16777216+(e[5]<<16)+(e[6]<<8)+e[7])*1e3):e.length==12?new Date(((e[0]<<24)+(e[1]<<16)+(e[2]<<8)+e[3])/1e6+((e[4]&128?-281474976710656:0)+e[6]*1099511627776+e[7]*4294967296+e[8]*16777216+(e[9]<<16)+(e[10]<<8)+e[11])*1e3):new Date("invalid");function Dge(e){let t=ip,r=ke,i=xl,n=Mc,a=jf,o=hd,s=Ns,l=new Uint8Array(yt.slice(0,ip)),u=li,c=li.slice(0,li.length),h=ms,d=iy,f=e();return ip=t,ke=r,xl=i,Mc=n,jf=a,hd=o,Ns=s,yt=l,iy=d,li=u,li.splice(0,li.length,...c),ms=h,bi=new DataView(yt.buffer,yt.byteOffset,yt.byteLength),f}function DR(){yt=null,hd=null,li=null}function pbt(e){e.unpack?Ko[e.type]=e.unpack:Ko[e.type]=e}var zz=new Array(147);for(let e=0;e<256;e++)zz[e]=+("1e"+Math.floor(45.15-e*.30103));var R7=new n6({useRecords:!1});R7.unpack;R7.unpackMultiple;R7.unpack;var vbt=new Float32Array(1);new Uint8Array(vbt.buffer,0,4);var WA;try{WA=new TextEncoder}catch{}var a6,Hz,O7=typeof Buffer<"u",zP=O7?Buffer.allocUnsafeSlow:Uint8Array,Ige=O7?Buffer:Uint8Array,Hee=O7?4294967296:2144337920,Ze,gn,Ve=0,Qu,Ku=null,mbt=/[\u0080-\uFFFF]/,lx=Symbol("record-id"),Lge=class extends n6{constructor(e){super(e),this.offset=0;let t,r,i,n,a,o=0,s=Ige.prototype.utf8Write?function(w,S,A){return Ze.utf8Write(w,S,A)}:WA&&WA.encodeInto?function(w,S){return WA.encodeInto(w,Ze.subarray(S)).written}:!1,l=this;e||(e={});let u=e&&e.sequential,c=e.structures||e.saveStructures,h=e.maxSharedStructures;if(h==null&&(h=c?32:0),h>8160)throw new Error("Maximum maxSharedStructure is 8160");let d=e.maxOwnStructures;d==null&&(d=c?32:64),u&&!e.saveStructures&&(this.structures=[]);let f=h>32||d+h>64,p=h+64,v=h+d+64;if(v>8256)throw new Error("Maximum maxSharedStructure + maxOwnStructure is 8192");let m=[],g=0,y=0;this.pack=this.encode=function(w,S){if(Ze||(Ze=new zP(8192),gn=new DataView(Ze.buffer,0,8192),Ve=0),Qu=Ze.length-10,Qu-Ve<2048?(Ze=new zP(Ze.length),gn=new DataView(Ze.buffer,0,Ze.length),Qu=Ze.length-10,Ve=0):Ve=Ve+7&2147483640,t=Ve,a=l.structuredClone?new Map:null,l.bundleStrings?(Ku=["",""],Ze[Ve++]=214,Ze[Ve++]=98,Ku.position=Ve-t,Ve+=4):Ku=null,r=l.structures,r){r.uninitialized&&(r=l._mergeStructures(l.getStructures()));let A=r.sharedLength||0;if(A>h)throw new Error("Shared structures is larger than maximum shared structures, try increasing maxSharedStructures to "+r.sharedLength);if(!r.transitions){r.transitions=Object.create(null);for(let M=0;M<A;M++){let E=r[M];if(!E)continue;let T,L=r.transitions;for(let P=0,C=E.length;P<C;P++){let D=E[P];T=L[D],T||(T=L[D]=Object.create(null)),L=T}L[lx]=M+64}o=A}u||(r.nextId=A+64)}i&&(i=!1),n=r||[];try{if(x(w),Ku){gn.setUint32(Ku.position+t,Ve-Ku.position-t);let A=Ku;Ku=null,x(A[0]),x(A[1])}if(l.offset=Ve,a&&a.idsToInsert){Ve+=a.idsToInsert.length*6,Ve>Qu&&_(Ve),l.offset=Ve;let A=ybt(Ze.subarray(t,Ve),a.idsToInsert);return a=null,A}return S&xbt?(Ze.start=t,Ze.end=Ve,Ze):Ze.subarray(t,Ve)}finally{if(r){if(y<10&&y++,g>1e4)r.transitions=null,y=0,g=0,m.length>0&&(m=[]);else if(m.length>0&&!u){for(let A=0,M=m.length;A<M;A++)m[A][lx]=0;m=[]}if(i&&l.saveStructures){let A=r.sharedLength||h;r.length>A&&(r=r.slice(0,A));let M=Ze.subarray(t,Ve);return l.saveStructures(r,o)===!1?(l._mergeStructures(l.getStructures()),l.pack(w)):(o=A,M)}}S&bbt&&(Ve=t)}};let x=w=>{Ve>Qu&&(Ze=_(Ve));var S=typeof w,A;if(S==="string"){let M=w.length;if(Ku&&M>=8&&M<4096){let L=mbt.test(w);Ku[L?0:1]+=w,Ze[Ve++]=193,x(L?-M:M);return}let E;M<32?E=1:M<256?E=2:M<65536?E=3:E=5;let T=M*3;if(Ve+T>Qu&&(Ze=_(Ve+T)),M<64||!s){let L,P,C,D=Ve+E;for(L=0;L<M;L++)P=w.charCodeAt(L),P<128?Ze[D++]=P:P<2048?(Ze[D++]=P>>6|192,Ze[D++]=P&63|128):(P&64512)===55296&&((C=w.charCodeAt(L+1))&64512)===56320?(P=65536+((P&1023)<<10)+(C&1023),L++,Ze[D++]=P>>18|240,Ze[D++]=P>>12&63|128,Ze[D++]=P>>6&63|128,Ze[D++]=P&63|128):(Ze[D++]=P>>12|224,Ze[D++]=P>>6&63|128,Ze[D++]=P&63|128);A=D-Ve-E}else A=s(w,Ve+E,T);A<32?Ze[Ve++]=160|A:A<256?(E<2&&Ze.copyWithin(Ve+2,Ve+1,Ve+1+A),Ze[Ve++]=217,Ze[Ve++]=A):A<65536?(E<3&&Ze.copyWithin(Ve+3,Ve+2,Ve+2+A),Ze[Ve++]=218,Ze[Ve++]=A>>8,Ze[Ve++]=A&255):(E<5&&Ze.copyWithin(Ve+5,Ve+3,Ve+3+A),Ze[Ve++]=219,gn.setUint32(Ve,A),Ve+=4),Ve+=A}else if(S==="number")if(w>>>0===w)w<64?Ze[Ve++]=w:w<256?(Ze[Ve++]=204,Ze[Ve++]=w):w<65536?(Ze[Ve++]=205,Ze[Ve++]=w>>8,Ze[Ve++]=w&255):(Ze[Ve++]=206,gn.setUint32(Ve,w),Ve+=4);else if(w>>0===w)w>=-32?Ze[Ve++]=256+w:w>=-128?(Ze[Ve++]=208,Ze[Ve++]=w+256):w>=-32768?(Ze[Ve++]=209,gn.setInt16(Ve,w),Ve+=2):(Ze[Ve++]=210,gn.setInt32(Ve,w),Ve+=4);else{let M;if((M=this.useFloat32)>0&&w<4294967296&&w>=-2147483648){Ze[Ve++]=202,gn.setFloat32(Ve,w);let E;if(M<4||(E=w*zz[(Ze[Ve]&127)<<1|Ze[Ve+1]>>7])>>0===E){Ve+=4;return}else Ve--}Ze[Ve++]=203,gn.setFloat64(Ve,w),Ve+=8}else if(S==="object")if(!w)Ze[Ve++]=192;else{if(a){let E=a.get(w);if(E){if(!E.id){let T=a.idsToInsert||(a.idsToInsert=[]);E.id=T.push(E)}Ze[Ve++]=214,Ze[Ve++]=112,gn.setUint32(Ve,E.id),Ve+=4;return}else a.set(w,{offset:Ve-t})}let M=w.constructor;if(M===Object)b(w,!0);else if(M===Array){A=w.length,A<16?Ze[Ve++]=144|A:A<65536?(Ze[Ve++]=220,Ze[Ve++]=A>>8,Ze[Ve++]=A&255):(Ze[Ve++]=221,gn.setUint32(Ve,A),Ve+=4);for(let E=0;E<A;E++)x(w[E])}else if(M===Map){A=w.size,A<16?Ze[Ve++]=128|A:A<65536?(Ze[Ve++]=222,Ze[Ve++]=A>>8,Ze[Ve++]=A&255):(Ze[Ve++]=223,gn.setUint32(Ve,A),Ve+=4);for(let[E,T]of w)x(E),x(T)}else{for(let E=0,T=a6.length;E<T;E++){let L=Hz[E];if(w instanceof L){let P=a6[E];if(P.write){P.type&&(Ze[Ve++]=212,Ze[Ve++]=P.type,Ze[Ve++]=0),x(P.write.call(this,w));return}let C=Ze,D=gn,I=Ve;Ze=null;let O;try{O=P.pack.call(this,w,R=>(Ze=C,C=null,Ve+=R,Ve>Qu&&_(Ve),{target:Ze,targetView:gn,position:Ve-R}),x)}finally{C&&(Ze=C,gn=D,Ve=I,Qu=Ze.length-10)}O&&(O.length+Ve>Qu&&_(O.length+Ve),Ve=gbt(O,Ze,Ve,P.type));return}}b(w,!w.hasOwnProperty)}}else if(S==="boolean")Ze[Ve++]=w?195:194;else if(S==="bigint"){if(w<BigInt(1)<<BigInt(63)&&w>=-(BigInt(1)<<BigInt(63)))Ze[Ve++]=211,gn.setBigInt64(Ve,w);else if(w<BigInt(1)<<BigInt(64)&&w>0)Ze[Ve++]=207,gn.setBigUint64(Ve,w);else if(this.largeBigIntToFloat)Ze[Ve++]=203,gn.setFloat64(Ve,Number(w));else throw new RangeError(w+" was too large to fit in MessagePack 64-bit integer format, set largeBigIntToFloat to convert to float-64");Ve+=8}else if(S==="undefined")this.encodeUndefinedAsNil?Ze[Ve++]=192:(Ze[Ve++]=212,Ze[Ve++]=0,Ze[Ve++]=0);else if(S==="function")x(this.writeFunction&&this.writeFunction());else throw new Error("Unknown type: "+S)},b=this.useRecords===!1?this.variableMapSize?w=>{let S=Object.keys(w),A=S.length;A<16?Ze[Ve++]=128|A:A<65536?(Ze[Ve++]=222,Ze[Ve++]=A>>8,Ze[Ve++]=A&255):(Ze[Ve++]=223,gn.setUint32(Ve,A),Ve+=4);let M;for(let E=0;E<A;E++)x(M=S[E]),x(w[M])}:(w,S)=>{Ze[Ve++]=222;let A=Ve-t;Ve+=2;let M=0;for(let E in w)(S||w.hasOwnProperty(E))&&(x(E),x(w[E]),M++);Ze[A+++t]=M>>8,Ze[A+t]=M&255}:w=>{let S=Object.keys(w),A,M=n.transitions||(n.transitions=Object.create(null)),E=0;for(let L=0,P=S.length;L<P;L++){let C=S[L];A=M[C],A||(A=M[C]=Object.create(null),E++),M=A}let T=M[lx];if(T)T>=96&&f?(Ze[Ve++]=((T-=96)&31)+96,Ze[Ve++]=T>>5):Ze[Ve++]=T;else{T=n.nextId,T||(T=64),T<p&&this.shouldShareStructure&&!this.shouldShareStructure(S)?(T=n.nextOwnId,T<v||(T=p),n.nextOwnId=T+1):(T>=v&&(T=p),n.nextId=T+1);let L=S.highByte=T>=96&&f?T-96>>5:-1;M[lx]=T,n[T-64]=S,T<p?(S.isShared=!0,n.sharedLength=T-63,i=!0,L>=0?(Ze[Ve++]=(T&31)+96,Ze[Ve++]=L):Ze[Ve++]=T):(L>=0?(Ze[Ve++]=213,Ze[Ve++]=114,Ze[Ve++]=(T&31)+96,Ze[Ve++]=L):(Ze[Ve++]=212,Ze[Ve++]=114,Ze[Ve++]=T),E&&(g+=y*E),m.length>=d&&(m.shift()[lx]=0),m.push(M),x(S))}for(let L=0,P=S.length;L<P;L++)x(w[S[L]])},_=w=>{let S;if(w>16777216){if(w-t>Hee)throw new Error("Packed buffer would be larger than maximum buffer size");S=Math.min(Hee,Math.round(Math.max((w-t)*(w>67108864?1.25:2),4194304)/4096)*4096)}else S=(Math.max(w-t<<2,Ze.length-1)>>12)+1<<12;let A=new zP(S);return gn=new DataView(A.buffer,0,S),Ze.copy?Ze.copy(A,0,t,w):A.set(Ze.slice(t,w)),Ve-=t,t=0,Qu=A.length-10,Ze=A}}useBuffer(e){Ze=e,gn=new DataView(Ze.buffer,Ze.byteOffset,Ze.byteLength),Ve=0}};Hz=[Date,Set,Error,RegExp,ArrayBuffer,Object.getPrototypeOf(Uint8Array.prototype).constructor,Age];a6=[{pack(e,t,r){let i=e.getTime()/1e3;if((this.useTimestamp32||e.getMilliseconds()===0)&&i>=0&&i<4294967296){let{target:n,targetView:a,position:o}=t(6);n[o++]=214,n[o++]=255,a.setUint32(o,i)}else if(i>0&&i<17179869184){let{target:n,targetView:a,position:o}=t(10);n[o++]=215,n[o++]=255,a.setUint32(o,e.getMilliseconds()*4e6+(i/1e3/4294967296>>0)),a.setUint32(o+4,i)}else if(isNaN(i)){if(this.onInvalidDate)return t(0),r(this.onInvalidDate());let{target:n,targetView:a,position:o}=t(3);n[o++]=212,n[o++]=255,n[o++]=255}else{let{target:n,targetView:a,position:o}=t(15);n[o++]=199,n[o++]=12,n[o++]=255,a.setUint32(o,e.getMilliseconds()*1e6),a.setBigInt64(o+4,BigInt(Math.floor(i)))}}},{pack(e,t,r){let i=Array.from(e),{target:n,position:a}=t(this.structuredClone?3:0);this.structuredClone&&(n[a++]=212,n[a++]=115,n[a++]=0),r(i)}},{pack(e,t,r){let{target:i,position:n}=t(this.structuredClone?3:0);this.structuredClone&&(i[n++]=212,i[n++]=101,i[n++]=0),r([e.name,e.message])}},{pack(e,t,r){let{target:i,position:n}=t(this.structuredClone?3:0);this.structuredClone&&(i[n++]=212,i[n++]=120,i[n++]=0),r([e.source,e.flags])}},{pack(e,t){this.structuredClone?Uee(e,16,t):Gee(O7?Buffer.from(e):new Uint8Array(e),t)}},{pack(e,t){let r=e.constructor;r!==Ige&&this.structuredClone?Uee(e,Pge.indexOf(r.name),t):Gee(e,t)}},{pack(e,t){let{target:r,position:i}=t(1);r[i]=193}}];function Uee(e,t,r,i){let n=e.byteLength;if(n+1<256){var{target:a,position:o}=r(4+n);a[o++]=199,a[o++]=n+1}else if(n+1<65536){var{target:a,position:o}=r(5+n);a[o++]=200,a[o++]=n+1>>8,a[o++]=n+1&255}else{var{target:a,position:o,targetView:s}=r(7+n);a[o++]=201,s.setUint32(o,n+1),o+=4}a[o++]=116,a[o++]=t,a.set(new Uint8Array(e.buffer,e.byteOffset,e.byteLength),o)}function Gee(e,t){let r=e.byteLength;var i,n;if(r<256){var{target:i,position:n}=t(r+2);i[n++]=196,i[n++]=r}else if(r<65536){var{target:i,position:n}=t(r+3);i[n++]=197,i[n++]=r>>8,i[n++]=r&255}else{var{target:i,position:n,targetView:a}=t(r+5);i[n++]=198,a.setUint32(n,r),n+=4}i.set(e,n)}function gbt(e,t,r,i){let n=e.length;switch(n){case 1:t[r++]=212;break;case 2:t[r++]=213;break;case 4:t[r++]=214;break;case 8:t[r++]=215;break;case 16:t[r++]=216;break;default:n<256?(t[r++]=199,t[r++]=n):n<65536?(t[r++]=200,t[r++]=n>>8,t[r++]=n&255):(t[r++]=201,t[r++]=n>>24,t[r++]=n>>16&255,t[r++]=n>>8&255,t[r++]=n&255)}return t[r++]=i,t.set(e,r),r+=n,r}function ybt(e,t){let r,i=t.length*6,n=e.length-i;for(t.sort((a,o)=>a.offset>o.offset?1:-1);r=t.pop();){let a=r.offset,o=r.id;e.copyWithin(a+i,a,n),i-=6;let s=a+i;e[s++]=214,e[s++]=105,e[s++]=o>>24,e[s++]=o>>16&255,e[s++]=o>>8&255,e[s++]=o&255,n=a}return e}function r2(e){if(e.Class){if(!e.pack&&!e.write)throw new Error("Extension has no pack or write function");if(e.pack&&!e.type)throw new Error("Extension has no type (numeric code to identify the extension)");Hz.unshift(e.Class),a6.unshift(e)}pbt(e)}var kge=new Lge({useRecords:!1});kge.pack;kge.pack;var xbt=512,bbt=1024,jee=new Lge({structuredClone:!0});r2({Class:Bt.prototype.constructor,type:1,write(e){return{...e}},read(e){return Object.setPrototypeOf(e,Bt.prototype),e}});r2({Class:Et.prototype.constructor,type:2,write(e){return[...e]},read(e){return Object.setPrototypeOf(e,Et.prototype),e}});r2({Class:Ha.prototype.constructor,type:3,write(e){return[...e]},read(e){return Object.setPrototypeOf(e,Ha.prototype),e}});r2({Class:Lee.prototype.constructor,type:4,write(e){return e.id},read(e){return new Lee(e)}});r2({Class:kee.prototype.constructor,type:5,write(e){return e.data},read(e){return new kee(e)}});r2({Class:Vn.prototype.constructor,type:6,write(e){return{...e}},read(e){return Object.setPrototypeOf(e,Vn.prototype),e}});function wbt(e){var t=0;if(e.length===0)return t;for(let r=0;r<e.length;r++){let i=e[r];t=(t<<5)-t+i,t=t&t}return t}function IR(e){if(kz(e))return e;if(Array.isArray(e))return e.map(IR);if(typeof e=="object"&&e!==null){let t={};for(let r of Object.keys(e).sort())t[r]=IR(e[r]);return Object.setPrototypeOf(t,Object.getPrototypeOf(e)),t}else return e}var LR;(e=>{function t(n){return jee.pack(n)}e.serialize=t;function r(n){return jee.unpack(n)}e.deserialize=r;function i(n){return wbt(t(IR(n))).toString()}e.checksum=i})(LR||(LR={}));var Wee;(e=>{function t(i){return i.type==="Conditional"?i.condition.type==="Distance"?"Distance":"StateChange":i.type}e.toEventUIType=t;function r(i){return i==="Distance"||i==="StateChange"?"Conditional":i}e.fromEventUIType=r})(Wee||(Wee={}));function qee(e){return e==="MouseDown"||e==="MouseUp"||e==="KeyDown"||e==="KeyUp"||e==="Collision"||e==="Trigger"}var oo={LookAt:[],Follow:["Create"],DragDrop:["Transition","Animation","Audio","Particles","Create","SetVariable","DynamicVariablePlay","Conditional","ClearLocalStorage","UserAPI"],MouseHover:["Transition","Animation","Particles","Create","Destroy","SwitchCamera","SceneTransition","SetVariable","DynamicVariablePlay","Conditional","ClearLocalStorage","UserAPI"],Scroll:["Transition","Animation","Create","SetVariable","DynamicVariablePlay","Conditional","ClearLocalStorage","UserAPI"],Start:["Transition","Animation","Audio","Particles","Video","Create","Destroy","SwitchCamera","SceneTransition","Reset","SetVariable","DynamicVariablePlay","Conditional","ClearLocalStorage","UserAPI"],Conditional:["Transition","Animation","Audio","Particles","Video","Link","Create","Destroy","SwitchCamera","SceneTransition","Reset","SetVariable","DynamicVariablePlay","Conditional","ClearLocalStorage","UserAPI"],MouseDown:["Transition","Animation","Audio","Particles","Video","Link","Create","Destroy","SwitchCamera","SceneTransition","Reset","SetVariable","DynamicVariablePlay","Conditional","ClearLocalStorage","UserAPI"],MouseUp:["Transition","Animation","Audio","Particles","Video","Link","Create","Destroy","SwitchCamera","SceneTransition","Reset","SetVariable","DynamicVariablePlay","Conditional","ClearLocalStorage","UserAPI"],MousePress:["Transition","Animation","Audio","Particles","Video","Link","Create","SwitchCamera","SceneTransition","Reset","SetVariable","DynamicVariablePlay","Conditional","ClearLocalStorage","UserAPI"],KeyDown:["Transition","Animation","Audio","Particles","Video","Link","Create","Destroy","SwitchCamera","SceneTransition","Reset","SetVariable","DynamicVariablePlay","Conditional","ClearLocalStorage","UserAPI"],KeyUp:["Transition","Animation","Audio","Particles","Video","Link","Create","Destroy","SwitchCamera","SceneTransition","Reset","SetVariable","DynamicVariablePlay","Conditional","ClearLocalStorage","UserAPI"],KeyPress:["Transition","Animation","Audio","Particles","Video","Link","Create","SwitchCamera","Reset","SetVariable","DynamicVariablePlay","Conditional","ClearLocalStorage","UserAPI"],GameControl:["Transition","Animation","Audio","Particles","Create","Conditional"],Collision:["Transition","Animation","Audio","Particles","Video","Create","Destroy","Reset","SetVariable","DynamicVariablePlay","Conditional","ClearLocalStorage","UserAPI"],Trigger:["Transition","Audio","Particles","Video","Link","Create","Destroy","SwitchCamera","SceneTransition","Reset","SetVariable","DynamicVariablePlay","Conditional","ClearLocalStorage","UserAPI"],Resize:["Transition","Animation","Audio","Particles","Video","Create","Destroy","SwitchCamera","SceneTransition","Reset","SetVariable","DynamicVariablePlay","Conditional","ClearLocalStorage","UserAPI"],VariableChange:["Transition","Animation","Audio","Particles","Video","Link","Create","Destroy","SwitchCamera","SceneTransition","Reset","SetVariable","DynamicVariablePlay","Conditional","ClearLocalStorage","UserAPI"],API:["Transition","Animation","Audio","Particles","Video","Link","Create","Destroy","SwitchCamera","SceneTransition","Reset","SetVariable","DynamicVariablePlay","Conditional","ClearLocalStorage","UserAPI"],WEBHOOK:["Transition","Animation","Audio","Particles","Video","Link","Create","Destroy","SwitchCamera","SceneTransition","Reset","SetVariable","DynamicVariablePlay","Conditional","ClearLocalStorage","UserAPI"],AIAssistantListener:["SetVariable"],AIAssistantTrigger:["Transition","Animation","Audio","Particles","Video","Link","Create","Destroy","SwitchCamera","SceneTransition","Reset","SetVariable","DynamicVariablePlay","Conditional","ClearLocalStorage","UserAPI"]},Yee;(e=>{function t(i){return i.type==="MouseDown"||i.type==="MouseUp"||i.type==="MousePress"||i.type==="KeyDown"||i.type==="KeyUp"||i.type==="KeyPress"}e.is=t;function r(i){return i==="MouseDown"||i==="MouseUp"||i==="MousePress"?{type:i,mode:"Object",disabled:!1,actions:new Et}:{type:i,disabled:!1,key:void 0,actions:new Et}}e.defaultData=r})(Yee||(Yee={}));var o6;(e=>{function t(r){return{type:"Property",value:[r??null,"position","x"]}}e.propertyDefaultData=t,e.valueDefaultData={type:"Literal",value:0}})(o6||(o6={}));var kR;(e=>{function t(n){return{type:"Comparison",operator:"==",lOperand:o6.propertyDefaultData(n),rOperand:{...o6.valueDefaultData}}}e.comparisonDefaultData=t;function r(n){return{type:"Distance",toObject:n??null,fromObject:n??null,distance:200}}e.distanceDefaultData=r;function i(n,a){return{type:"State",object:n??null,state:a??null}}e.stateDefaultData=i})(kR||(kR={}));var Xee;(e=>{function t(r){return r.find(i=>i==="ifActions"||i==="elseActions")!==void 0}e.isConditionalSubActions=t})(Xee||(Xee={}));var Zee;(e=>{function t(i){return i.type==="Conditional"}e.is=t;function r(i){return{type:"Conditional",disabled:!1,inActions:new Et,outActions:new Et,condition:kR.distanceDefaultData(i)}}e.defaultData=r})(Zee||(Zee={}));var Qee;(e=>e.defaultData={type:"DragDrop",cursor:"hand",disabled:!1,dampingFactor:1,objects:[],snapTo:"center",snapSurfaceMode:"bbox",snapSurfaceOffset:0,dropOn:"all",autoOrient:!0,dropDestinations:[],plane:"adaptive",planeMode:"locked",referenceFrame:"global",limits:[-1/0,1/0,-1/0,1/0,-1/0,1/0],drop:!1,resetOnSnapFail:!1,snapSpeed:20,resetSpeed:20,dragDropActions:{drag:new Et,drop:new Et}})(Qee||(Qee={}));var RR;(e=>e.defaultData={type:"Follow",disabled:!1,maxDelta:0,dampingFactor:1,target:"cursor",plane:"custom",resetOnPointerLeave:!0,resetAfterDistanceLimit:!0,enabledTranslation:[!0,!0,!0],limitDistanceEnabled:!1,limitDistance:1e3,snapDelay:0,resetSpeed:5,actions:new Et})(RR||(RR={}));var OR;(e=>e.defaultData={type:"LookAt",disabled:!1,distance:1e3,dampingFactor:1,target:"cursor",tilt:"up",axis:"z",plane:"custom",resetOnPointerLeave:!0,resetAfterDistanceLimit:!0,enabledRotation:[!0,!0,!0],limitDistanceEnabled:!1,limitDistance:1e3,snapDelay:0,resetSpeed:5})(OR||(OR={}));var Kee;(e=>{function t(i){return i.type==="MouseHover"}e.is=t;function r(){return{type:"MouseHover",disabled:!1,actions:new Et}}e.defaultData=r})(Kee||(Kee={}));var Jee;(e=>{function t(i){return i.type==="Scroll"}e.is=t;function r(){return{type:"Scroll",disabled:!1,steps:100,trigger:"load",startFrom:"enter",enterAnchor:"top",startOffset:0,endAfter:400,actions:new Et}}e.defaultData=r})(Jee||(Jee={}));var $ee;(e=>{function t(i){return i.type==="Start"}e.is=t;function r(){return{type:"Start",disabled:!1,actions:new Et}}e.defaultData=r})($ee||($ee={}));var ete;(e=>{function t(i){return i.type==="Collision"}e.is=t;function r(){return{type:"Collision",disabled:!1,target:"character",actions:new Et}}e.defaultData=r})(ete||(ete={}));var tte;(e=>{function t(i){return i.type==="Trigger"}e.is=t;function r(i,n){return{type:"Trigger",disabled:!1,target:"all",triggeringObjects:[],actions:new Et,triggerZone:"box",position:n.toArray(),rotation:[0,0,0],size:i.toArray(),radius:i.length()/2,helperVisible:!0}}e.defaultData=r})(tte||(tte={}));var BR;(e=>{e.defaultSizes={mobile:[480,480],tablet:[768,768],desktop:[1200,1200],custom:[769,1200]};function t(o){return o.type==="Resize"}e.is=t;function r(o){return typeof o=="string"?o:"custom"}e.sizeToDevice=r;function i(o){return typeof o=="string"?[...e.defaultSizes[o]]:[...o]}e.deviceToSize=i;function n(){let o={size:"mobile",operator:"<",actions:new Et},s={size:"tablet",operator:"<",actions:new Et},l={size:[...e.defaultSizes.custom],operator:"<>",actions:new Et},u=new Et;return u.push({id:vt.generateUUID(),fi:0,data:o},{id:vt.generateUUID(),fi:1,data:s},{id:vt.generateUUID(),fi:2,data:l}),{type:"Resize",disabled:!1,orientation:"horizontal",breakpoints:u}}e.defaultData=n;function a(){return{size:[...e.defaultSizes.custom],operator:"<>",actions:new Et}}e.defaultBreakpointData=a})(BR||(BR={}));var NR;(e=>{e.propertyPaths={Position:["position"],"Position X":["position","x"],"Position Y":["position","y"],"Position Z":["position","z"],Rotation:["rotation"],"Rotation X":["rotation","x"],"Rotation Y":["rotation","y"],"Rotation Z":["rotation","z"],Scale:["scale"],"Scale X":["scale","x"],"Scale Y":["scale","y"],"Scale Z":["scale","z"],Width:["width"],Height:["height"],Depth:["depth"],"Mouse Position X":["mouse","x"],"Mouse Position Y":["mouse","y"],"Mouse Pressed":["mouse","pressed"],"Screen Width":["mouse","width"],"Screen Height":["mouse","height"],"Hit Position X":["raycast","x"],"Hit Position Y":["raycast","y"],"Hit Position Z":["raycast","z"],"Hit Object Position X":["raycast","objX"],"Hit Object Position Y":["raycast","objY"],"Hit Object Position Z":["raycast","objZ"]};function t(i){return i.type==="VariableChange"}e.is=t;function r(){return{disabled:!1,type:"VariableChange",actions:new Et,variableId:"",objectId:null,property:"Position X"}}e.defaultData=r})(NR||(NR={}));var rte;(e=>{function t(i){return i.type==="API"}e.is=t;function r(){return{disabled:!1,type:"API",successActions:new Et,errorActions:new Et,userAPIId:""}}e.defaultData=r})(rte||(rte={}));var ite;(e=>{function t(i){return i.type==="WEBHOOK"}e.is=t;function r(){return{disabled:!1,type:"WEBHOOK",actions:new Et,userWebhookId:""}}e.defaultData=r})(ite||(ite={}));var nte;(e=>{function t(i){return i.type==="AIAssistantListener"}e.is=t;function r(){return{disabled:!1,type:"AIAssistantListener",actions:new Et,analysis:"average",analysisRange:[0,71],analysisSingle:0}}e.defaultData=r})(nte||(nte={}));var ate;(e=>{function t(i){return i.type==="AIAssistantTrigger"}e.is=t;function r(){return{disabled:!1,description:"",type:"AIAssistantTrigger",actions:new Et}}e.defaultData=r})(ate||(ate={}));var i2="personal camera",Pb="a218fcc3-276b-49b9-b485-49037fd14f5f",_bt=2960946,Xs=5526619,id;(e=>{function t(p,v){return p[0]===v[0]&&p[1]===v[1]}e.isEqual=t;function r(p,v,m){return[p[0]+(v[0]-p[0])*m,p[1]+(v[1]-p[1])*m]}e.lerp=r;function i(p,v){return[p[0]+v[0],p[1]+v[1]]}e.add=i;function n(p,v){return[p[0]-v[0],p[1]-v[1]]}e.sub=n;function a(p,v){return[p[0]*v[0],p[1]*v[1]]}e.multiply=a;function o(p,v){return[p[0]/v[0],p[1]/v[1]]}e.divide=o;function s(p,v){return Math.pow(v[0]-p[0],2)+Math.pow(v[1]-p[1],2)}e.distanceSquared=s;function l(p,v){return Math.sqrt(s(p,v))}e.distance=l;function u(p,v){return p[0]*v[0]+p[1]*v[1]}e.dot=u;function c(p,v){return[p[0]*v,p[1]*v]}e.scalarMultiply=c;function h(p,v,m){let g=e.sub(v,p),y=e.sub(m,p),x=e.dot(g,y)/e.dot(g,g),b=e.scalarMultiply(g,x);return e.add(p,b)}e.projectionOnto=h;function d(p,v,m){return l(p,h(p,v,m))}e.projectionOntoDistance=d;function f(p,v){return[(p[0]+v[0])*.5,(p[1]+v[1])*.5]}e.center=f})(id||(id={}));var Ev;(e=>{function t(l,u){return l[0]===u[0]&&l[1]===u[1]&&l[2]===u[2]}e.isEqual=t;function r(l,u){return[l[0]+u[0],l[1]+u[1],l[2]+u[2]]}e.add=r;function i(l,u){return[l[0]-u[0],l[1]-u[1],l[2]-u[2]]}e.sub=i;function n(l,u){return[l[0]/u[0],l[1]/u[1],l[2]/u[2]]}e.div=n;function a(l,u){return[l[0]*u[0],l[1]*u[1],l[2]*u[2]]}e.mul=a;function o(l,u){return Math.hypot(l[0]-u[0],l[1]-u[1],l[2]-u[2])}e.dist=o;function s(l,u,c){return[l[0]+(u[0]-l[0])*c,l[1]+(u[1]-l[1])*c,l[2]+(u[2]-l[2])*c]}e.lerp=s})(Ev||(Ev={}));var s6;(e=>{function t(i,n){return i[0]===n[0]&&i[1]===n[1]&&i[2]===n[2]&&i[3]===n[3]}e.isEqual=t;function r(i,n,a){return[i[0]+(n[0]-i[0])*a,i[1]+(n[1]-i[1])*a,i[2]+(n[2]-i[2])*a,i[3]+(n[3]-i[3])*a]}e.lerp=r})(s6||(s6={}));var ote;(e=>{let t=180/Math.PI,r=Math.PI/180;function i(s){return typeof s=="number"?s*t:s}function n(s){return typeof s=="number"?s*r:s}function a(s){return[i(s[0]),i(s[1]),i(s[2])]}e.radToDeg=a;function o(s){return[n(s[0]),n(s[1]),n(s[2])]}e.degToRad=o})(ote||(ote={}));var ny;(e=>{e.identity=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];function t(n,a){for(let o=0;o<16;o++)if(n[o]!==a[o])return!1;return!0}e.isEqual=t;function r(n){return n??e.identity}e.simplify=r;function i(n,a){let o=a.slice(0);for(var s=0,l=a.length;s<l;s+=3){let u=n[3]*a[s]+n[7]*a[s+1]+n[11]*a[s+2]+n[15];o[s]=(n[0]*a[s]+n[4]*a[s+1]+n[8]*a[s+2]+n[12])/u,o[s+1]=(n[1]*a[s]+n[5]*a[s+1]+n[9]*a[s+2]+n[13])/u,o[s+2]=(n[2]*a[s]+n[6]*a[s+1]+n[10]*a[s+2]+n[14])/u}return o}e.applyMatrix4=i})(ny||(ny={}));var Fa;(e=>{function t(u){return typeof u=="object"&&typeof u.r=="number"&&typeof u.g=="number"&&typeof u.b=="number"}e.isRGB=t,e.white={r:1,g:1,b:1},e.red={r:1,g:0,b:0},e.black={r:0,g:0,b:0};function r(u){return{r:Math.round(u.r*255),g:Math.round(u.g*255),b:Math.round(u.b*255),a:1}}e.toRgb255a1=r;function i(u){return{r:u.r,g:u.g,b:u.b}}e.clone=i;function n(u){return u=Math.floor(u),{r:(u>>16&255)/255,g:(u>>8&255)/255,b:(u&255)/255}}e.fromHex=n;function a(u){return Math.round(u.r*255)*65536+Math.round(u.g*255)*256+Math.round(u.b*255)}e.toHex=a;function o(u,c){return u.r===c.r&&u.g===c.g&&u.b===c.b}e.equals=o;function s(u,c){return u.r.toFixed(2)===c.r.toFixed(2)&&u.g.toFixed(2)===c.g.toFixed(2)&&u.b.toFixed(2)===c.b.toFixed(2)}e.equalsFixed=s;function l(u,c,h){return{r:u.r+(c.r-u.r)*h,g:u.g+(c.g-u.g)*h,b:u.b+(c.b-u.b)*h}}e.lerp=l})(Fa||(Fa={}));var Pi;(e=>{e.white={...Fa.white,a:1},e.transparent={...Fa.white,a:0};function t(l){return{r:l[0],g:l[1],b:l[2],a:l[3]}}e.from0to1=t;function r(l,u){return{...Fa.fromHex(l),a:u}}e.fromHexAndA=r;function i(l){return{r:Math.round(l.r*255),g:Math.round(l.g*255),b:Math.round(l.b*255),a:l.a}}e.toRgb255a1=i;function n(l,u){return Fa.equals(l,u)&&l.a===u.a}e.equals=n;function a(l,u){return Fa.equalsFixed(l,u)&&l.a.toFixed(2)===u.a.toFixed(2)}e.equalsFixed=a;function o(l,u,c){return{r:l.r+(u.r-l.r)*c,g:l.g+(u.g-l.g)*c,b:l.b+(u.b-l.b)*c,a:l.a+(u.a-l.a)*c}}e.lerp=o;function s({r:l,g:u,b:c,a:h}=e.white){return`rgba(${l*255}, ${u*255}, ${c*255}, ${h})`}e.toStyle=s})(Pi||(Pi={}));var VR;(e=>e.identity={position:[0,0,0],rotation:[0,0,0],scale:[1,1,1]})(VR||(VR={}));var ste;(e=>e.defaultData={mass:1,stiffness:80,damping:10,velocity:0})(ste||(ste={}));var lte;(e=>e.defaultData={control1:[.5,0],control2:[.5,1]})(lte||(lte={}));var Cf;(e=>(e.linear=[0,0,1,1],e.ease=[.25,.1,.25,1],e.easeIn=[.42,0,1,1],e.easeOut=[0,0,.58,1],e.easeInOut=[.42,0,.58,1]))(Cf||(Cf={}));function ute(e){return typeof e=="string"&&e.length===36?/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i.test(e):!1}var Xv;(e=>{e.all=["PerspectiveCamera","OrthographicCamera"];function t(r){return e.all.includes(r)}e.is=t})(Xv||(Xv={}));var ay;(e=>{e.DefaultUp=[0,1,0],e.DefaultTargetOffset=1e3,e.defaultData={far:1e5,type:"OrthographicCamera",perspective:{near:70,fov:45,zoom:1},orthographic:{near:-1e5,zoom:1},up:e.DefaultUp,isUpVectorFlipped:!1,targetOffset:e.DefaultTargetOffset};function t(r){var i,n;return r.type==="PerspectiveCamera"?((i=r.perspective)==null?void 0:i.zoom)??1:((n=r.orthographic)==null?void 0:n.zoom)??1}e.getZoom=t})(ay||(ay={}));var Wf;(e=>{function t(i,n=.1){return{disabled:!1,type:"linear",hideBase:!1,count:3,radial:{radius:Math.max(i[0],i[1])*2,start:0,end:360,alignment:!1,axis:"y",scale:[1,1,1],rotation:[0,0,0],position:[0,0,0]},toObject:{object:"",spreadType:"random",scale:[0,0,0],rotation:[0,0,0],position:[0,0,0],axis:"x",seed:0,count:99,align:"normal"},linear:{scale:[1,1,1],rotation:[0,0,0],position:[i[0]+i[0]*n,0,0]},grid:{count:[2,2,2],size:i.map(a=>a*(1+n)),useCenter:!0},randomness:!1,randomnessObject:{strength:100,scale:[0,0,0],rotation:[0,0,0],position:[0,0,0],movement:1,seed:0,freqScale:10,noiseType:"perlin"}}}e.defaultData=t;function r(i,n){let a={...i};if(Rge.forEach(o=>{Object.assign(a,{[o]:n[o]??i[o]})}),a.radial={...i.radial},n.radial){let o=i.radial,s=n.radial;Oge.forEach(l=>{Object.assign(a.radial,{[l]:s[l]??o[l]})})}if(a.linear={...i.linear},n.linear){let o=i.linear,s=n.linear;Bge.forEach(l=>{Object.assign(a.linear,{[l]:s[l]??o[l]})})}if(a.grid={...i.grid},n.grid){let o=i.grid,s=n.grid;Nge.forEach(l=>{Object.assign(a.grid,{[l]:s[l]??o[l]})})}if(a.toObject={...i.toObject},n.toObject){let o=i.toObject,s=n.toObject;Vge.forEach(l=>{Object.assign(a.toObject,{[l]:s[l]??o[l]})})}if(a.randomnessObject={...i.randomnessObject},n.randomnessObject){let o=i.randomnessObject,s=n.randomnessObject;Fge.forEach(l=>{Object.assign(a.randomnessObject,{[l]:s[l]??o[l]})})}return a}e.merge=r})(Wf||(Wf={}));var FR;(e=>{e.defaultData={radial:{},linear:{},grid:{},toObject:{},randomnessObject:{}};let t=["radial","linear","grid","toObject","randomnessObject"];function r(i,n){let a=[];i.count!==void 0&&a.push({type:0,path:n,props:{count:i.count}});for(let o of t){let s=i[o];s&&Object.keys(s).length>0&&a.push({type:0,path:[...n,o],props:s})}return a}e.toOps=r})(FR||(FR={}));var Rge=["count"],Oge=["radius","start","end","position","scale","rotation"],Bge=["position","scale","rotation"],Nge=["count","size"],Vge=["count","position","scale","rotation"],Fge=["strength","scale","rotation","position","movement","seed","freqScale"],zR;(e=>{e.all=["PointLight","SpotLight","DirectionalLight","HemisphereLight"];function t(r){return e.all.includes(r)}e.is=t})(zR||(zR={}));var HR;(e=>{function t(i){return r(i)}e.defaultData=t;function r(i){if(i==="PointLight")return{type:i,color:Pi.white,intensity:1,distance:2e3,decay:1,shadows:!0,shadowResolution:1024,shadowRadius:1,penumbraSize:.5,depth:1e5};if(i==="SpotLight")return{type:i,color:Pi.white,intensity:1,distance:2e3,decay:1,shadows:!0,penumbra:0,angle:30/180*Math.PI,depth:1e5,penumbraSize:.5,shadowResolution:1024,shadowRadius:1};if(i==="DirectionalLight")return{type:i,color:Pi.white,intensity:1,shadows:!0,size:2e3,depth:1e5,penumbraSize:.5,shadowResolution:1024,shadowRadius:1};throw new Error("not implemented")}})(HR||(HR={}));var l6;(e=>(e.defaultShapeData={type:"PlaneEmitterShape",size:[100,100,100]},e.defaultCollisionData={colliderEntityId:null,collisionBounce:.75},e.defaultData={renderMaterial:{type:"particleMaterial",color:{r:1,g:.2,b:.545,a:1},color2:{r:.945,g:.714,b:.184,a:1},coloring:"gradient",ease:"linearFadeOut",easeSize:"linearFadeOut",transparent:!0,size:[40,40],texture:"pt_default_particle",spriteRotation:[0,0]},birthRatePerSec:50,gravity:1,noiseStrength:0,noiseScale:0,noiseSeed:1,noiseType:"curl",randomRotation:0,randomScale:.2,randomMass:.5,rootObjectType:"instancedMesh",life:1,direction:[0,0,0],directionMode:"axis",speed:10,shape:e.defaultShapeData,autoPlay:!0,emitTimeDelay:0,emitTimeCycle:"infinity",emitTimeDuration:1,...e.defaultCollisionData}))(l6||(l6={}));var oy;(e=>e.defaultData={enabled:"visibility",fusedBody:!0,rigidBody:"positioned",density:1,pointMass:0,gravityScale:1,friction:.5,damping:0,restitution:.2,colliderType:"convex",enabledRotation:[!0,!0,!0],enabledTranslation:[!0,!0,!0]})(oy||(oy={}));var UR;(e=>{e.defaultData={castShadow:!0,receiveShadow:!0};function t(r,i){return r.castShadow===i.castShadow&&r.receiveShadow===i.receiveShadow}e.equals=t})(UR||(UR={}));var GR;(e=>{e.defaultData={flatShading:!1,wireframe:!1,side:0};function t(r,i){return r.flatShading===i.flatShading&&r.side===i.side&&r.wireframe===i.wireframe}e.equals=t})(GR||(GR={}));var jR;(e=>e.defaultData={...GR.defaultData,...UR.defaultData})(jR||(jR={}));var cte;(e=>{function t(r,i){var a,o;let n=[];if("material"in r){let s=typeof r.material=="string"?i.materials[r.material]??((a=i.lib.materials[r.material])==null?void 0:a.asset):r.material;s&&n.push(s)}else if("materials"in r)for(let s of r.materials){let l=typeof s=="string"?i.materials[s]??((o=i.lib.materials[s])==null?void 0:o.asset):s;l&&n.push(l)}return n}e.getMaterialData=t})(cte||(cte={}));var u6;(e=>(e.defaultVideo={data:"",thumb:"/_assets/_videos/catThumb.png",type:"video",name:"Cat video"},e.maxSize=3e7))(u6||(u6={}));var hte;(e=>{function t(r){return r==="texture"||r==="video"||r==="color"||r==="depth"||r==="normal"||r==="gradient"||r==="noise"||r==="fresnel"||r==="rainbow"||r==="toon"||r==="outline"||r==="particle"||r==="transmission"||r==="matcap"||r==="displace"||r==="pattern"||r==="light"}e.is=t})(hte||(hte={}));function Abt(e){return e.type!=="displace"}var dte;(e=>{function t(r){return r==="phong"||r==="toon"||r==="lambert"||r==="physical"}e.is=t})(dte||(dte={}));var zge=["mode","gradientType","noiseType","displacementType","projection","cnormal","crop","axis","side"],Sbt=["wrapping","image","video","name","minFilter","magFilter"],da;(e=>{function t(a,o){let{texture:s,...l}=o;if(Object.assign(a,l),s){let u=a.texture;u&&Object.assign(u,s)}}e.patch=t;function r(a,o){return a==="light"&&o?i(o):n(a)}e.defaultData=r;function i(a){let o={mode:0,isMask:!1,visible:!0,bumpMap:void 0,bumpMapIntensity:5,roughnessMap:void 0,alphaOverride:1};switch(a){case"phong":return{...o,category:"phong",specular:{r:.2,g:.2,b:.2},shininess:5,type:"light",visible:!0,mode:0,occlusion:!0,alpha:.6};case"toon":return{...o,category:"toon",specular:{r:.2,g:.2,b:.2},shininess:10,type:"light",alpha:1};case"lambert":return{...o,category:"lambert",emissive:{r:0,g:0,b:0},type:"light",alpha:1,visible:!0,mode:0,occlusion:!0};case"physical":return{...o,category:"physical",roughness:.2,metalness:.2,reflectivity:.2,type:"light",alpha:1,visible:!0,mode:0,occlusion:!0}}}function n(a){let o={alpha:1,mode:0,isMask:!1,visible:!0};switch(a){case"texture":return{...o,type:"texture",size:[128,128],blending:0,axis:"x",side:2,projection:0,texture:{image:"image_0",wrapping:1e3,repeat:[1,1],offset:[0,0],rotation:0,minFilter:1008,magFilter:1006},crop:!1};case"video":return{...o,type:"video",size:[128,128],blending:0,axis:"x",side:2,projection:0,texture:{video:u6.defaultVideo,wrapping:1001,repeat:[1,1],offset:[0,0],rotation:0,minFilter:1008,magFilter:1006},crop:!1};case"color":return{...o,type:"color",color:Fa.fromHex(Xs)};case"depth":return{...o,type:"depth",gradientType:1,smooth:!1,isVector:!0,isWorldSpace:!1,origin:[0,0,0],direction:[1,0,0],colors:[[1,1,1,1],[0,0,0,1]],steps:[0,1],near:50,far:200};case"normal":return{...o,type:"normal",cnormal:[1,1,1]};case"gradient":return{...o,type:"gradient",gradientType:0,smooth:!1,colors:[[0,0,0,1],[1,1,1,1],[1,1,1,1],[1,1,1,1],[1,1,1,1],[1,1,1,1],[1,1,1,1],[1,1,1,1],[1,1,1,1],[1,1,1,1]],steps:[0,1,1,1,1,1,1,1,1,1],num:2,angle:0,offset:[0,0],morph:[0,0]};case"noise":return{...o,type:"noise",size:[100,100,100],noiseType:0,scale:1,move:1,colorA:{...Fa.fromHex(6710886),a:1},colorB:{...Fa.fromHex(6710886),a:1},colorC:{...Fa.fromHex(16777215),a:1},colorD:{...Fa.fromHex(16777215),a:1},distortion:[1,1],fA:[1.7,9.2],fB:[8.3,2.8],voronoiStyle:0,highCut:1,lowCut:0,smoothness:.3,seed:0,quality:1};case"fresnel":return{...o,type:"fresnel",color:Pi.fromHexAndA(16777215,1),bias:.1,scale:1,intensity:2,factor:1};case"rainbow":return{...o,type:"rainbow",filmThickness:30,movement:0,wavelengths:[0,0,0],noiseStrength:0,noiseScale:1,offset:[0,0,0]};case"toon":return{...o,type:"toon",positioning:2,colors:[[0,0,0,1],[.5,.5,.5,1],[.5,.5,.5,1],[1,1,1,1],[1,1,1,1],[1,1,1,1],[1,1,1,1],[1,1,1,1],[1,1,1,1],[1,1,1,1]],steps:[0,.475,.525,1,1,1,1,1,1,1],num:4,source:[0,1e3,0],isWorldSpace:!0,noiseStrength:0,noiseScale:1,shadowColor:Pi.fromHexAndA(0,0),offset:[0,0,0]};case"outline":return{...o,type:"outline",outlineColor:Pi.fromHexAndA(0,1),contourColor:Pi.fromHexAndA(0,1),outlineWidth:2,contourWidth:5,outlineThreshold:.4,contourThreshold:0,outlineSmoothing:0,contourFrequency:10,contourDirection:[0,1,0],positionalLines:!1,compensation:!0};case"matcap":return{...o,type:"matcap",texture:{image:"matcap_0",wrapping:1001,repeat:[1,1],offset:[0,0],rotation:0,minFilter:1008,magFilter:1006}};case"transmission":return{...o,type:"transmission",thickness:10,ior:1.5,roughness:1};case"displace":return{visible:!0,type:"displace",displacementType:"noise",noiseType:0,scale:10,movement:1,offset:[0,0,0],intensity:8,voronoiStyle:0,smoothness:.3,seed:0,highCut:1,lowCut:0,quality:1};case"pattern":return{...o,type:"pattern",style:0,projection:0,axis:"y",blending:0,offset:[0,0],colorA:{...Fa.fromHex(0),a:1},colorB:{...Fa.fromHex(16777215),a:1},frequency:[10,10],size:.5,variation:0,smoothness:.5,zigzag:0,rotation:0,vertical:[0,1],horizontal:[0,1],sides:6}}}})(da||(da={}));var Ua;(e=>{function t(c){return!c.layers.some(h=>h.data.type==="texture"&&h.data.projection!==0||h.data.type==="depth"&&!h.data.isWorldSpace||h.data.type==="noise"||h.data.type==="displace")}e.isMergable=t;function r(c){let h="";return c.layers.forEach(d=>{Object.entries(d.data).forEach(([f,p])=>{h+=`${f}${p}`,Array.isArray(p)?p.forEach(v=>h+=`${v}`):typeof p=="object"?Object.values(p).forEach(v=>{typeof v=="number"?h+=`${v.toFixed(4)}`:h+=`${v}`}):h+=`${p}`})}),h}e.getHash=r;function i(){return{layers:new Et}}e.defaultEmptyData=i;function n(c="layer1",h="layer2"){return o("phong",c,h)}e.defaultData=n;function a(c,h){return{...c,name:h}}e.withName=a;function o(c,h="layer1",d="layer2"){let f=new Et;return f.push({fi:0,data:da.defaultData("light",c),id:h}),f.push({fi:1,data:da.defaultData("color"),id:d}),{layers:f}}e.defaultTwoLayerData=o;function s(c){let h=da.defaultData("texture");c&&Object.assign(h.texture,{image:c});let d=new Et;return d.push({fi:0,data:h,id:"layer1"}),d.push({fi:1,data:{...da.defaultData("transmission"),alpha:1},id:"layer2"}),d.push({fi:2,data:{...da.defaultData("light","lambert"),alpha:0},id:"layer3"}),{layers:d}}e.defaultUIObjectMaterial=s;function l(c,h="phong",d="layer1",f="layer2"){let p=da.defaultData("texture");Object.assign(p.texture,{image:c});let v=new Et;return v.push({fi:0,data:p,id:d}),v.push({fi:1,data:da.defaultData("light",h),id:f}),{layers:v}}e.defaultTwoLayerTextureData=l;function u(c,h="phong",d="layer1",f="layer2"){let p=da.defaultData("video");Object.assign(p.texture,{video:c});let v=new Et;return v.push({fi:0,data:p,id:d}),v.push({fi:1,data:da.defaultData("light",h),id:f}),{layers:v}}e.defaultTwoLayerVideoTextureData=u})(Ua||(Ua={}));var c6;(e=>{function t(){return{points:new Et,roundness:0,shapeHoles:[],isClosed:!1}}e.defaultData=t})(c6||(c6={}));var h6;(e=>{function t(){return{points:new Et,lastInsertionPlane:null,subdivisions:12,isClosed:!1}}e.defaultData=t})(h6||(h6={}));var Hge={type:"Ellipse",width:50,height:50,spikes:16,angle:360,innerRadius:0},WR;(e=>{function t(r,i){let n={...r};return Gge.forEach(a=>{Object.assign(n,{[a]:i[a]??r[a]})}),n}e.merge=t})(WR||(WR={}));var Uge={shape:Hge,depth:1,offset:0,bevel:50,bevelSides:6,angle:0,twist:0,startScale:1,endScale:1,capType:"flat"},Gge=["depth","offset","angle","twist","startScale","endScale"],d6;(e=>{function t(i){return i==="PolygonGeometry"||i==="RectangleGeometry"||i==="StarGeometry"||i==="TriangleGeometry"||i==="EllipseGeometry"||i==="UIGeometry"}e.is2DParametricMesh=t;function r(i){return i==="PolygonGeometry"||i==="PolygonGeometry"||i==="RectangleGeometry"||i==="StarGeometry"||i==="TriangleGeometry"||i==="EllipseGeometry"||i==="PathGeometry"||i==="VectorGeometry"||i==="ConeGeometry"||i==="CubeGeometry"||i==="CylinderGeometry"||i==="DodecahedronGeometry"||i==="HelixGeometry"||i==="IcosahedronGeometry"||i==="LatheGeometry"||i==="PyramidGeometry"||i==="SphereGeometry"||i==="PlaneGeometry"||i==="BackdropGeometry"||i==="TorusGeometry"||i==="TorusKnotGeometry"||i==="BooleanGeometry"||i==="TextGeometry"||i==="InputGeometry"}e.isParametricMesh=r})(d6||(d6={}));var qR;(e=>{function t(r,i){let n={...r};return Object.assign(n,i),n.type==="PathGeometry"&&"extrusion"in i&&i.extrusion&&(n.extrusion={...r.extrusion},Object.assign(n.extrusion,WR.merge(n.extrusion,i.extrusion))),n}e.merge=t})(qR||(qR={}));var J0;(e=>{function t(r){if(r==="RectangleGeometry")return{width:320,height:320,type:r,cornerRadius:[0,0,0,0],cornerType:0,depth:0,extrudeBevelSize:0,extrudeBevelSegments:1};if(r==="UIGeometry")return{type:r,frame:"",cornerRadius:[0,0,0,0],cornerType:0,width:1,height:1};if(r==="PathGeometry")return{type:r,width:1,height:1,depth:1,path:h6.defaultData(),extrusion:Uge};if(r==="VectorGeometry")return{width:1,height:1,type:r,subdivisions:12,shape:c6.defaultData(),depth:0,extrudeBevelSize:0,extrudeBevelSegments:1};if(r==="BooleanGeometry")return{type:r,operation:2,width:0,height:0,depth:0,phongAngle:35};if(r==="TextGeometry")return{type:r,width:100,height:100,depth:0,horizontalAlign:1,verticalAlign:1,fontSize:16,lineHeight:1.2,letterSpacing:0,text:{textValue:""},textTransform:1,font:"Roboto_regular",editable:!1,extrudeBevelSize:0,extrudeBevelSegments:1};if(r==="InputGeometry")return{...e.defaultData("TextGeometry"),type:r,editable:!0};if(r==="SphereGeometry")return{type:"SphereGeometry",width:100,height:100,depth:100,widthSegments:64,heightSegments:64,phiStart:0,phiLength:2*Math.PI,thetaStart:0,thetaLength:180};throw new Error("not implemented")}e.defaultData=t})(J0||(J0={}));var HP=["width","height","depth"],YR;(e=>e.defaultData={enabled:!1,useBackgroundColor:!1,color:Fa.white,near:.1,far:2e3})(YR||(YR={}));var f6;(e=>{let t={opacity:1,blendFunction:13,enabled:!1};e.defaultData={enabled:!1,pixelation:{...t,blendFunction:16,granularity:15},bloom:{...t,blendFunction:16,intensity:1,blurScale:1,luminanceThreshold:.25,luminanceSmoothing:.025,kernelSize:3},chromaticAberration:{...t,offset:[2,2]},vignette:{...t,darkness:1,offset:0},hueSaturation:{...t,hue:3,saturation:0},brightnessContrast:{...t,brightness:.25,contrast:0},depthOfField:{...t,focusDistance:100,focalLength:20,bokehScale:5},noise:{...t,blendFunction:16}}})(f6||(f6={}));var XR;(e=>e.defaultData={softShadowQuality:"low"})(XR||(XR={}));var ZR;(e=>e.defaultData={enabled:!0,color:{r:.8274509803921568,g:.8274509803921568,b:.8274509803921568},intensity:.75})(ZR||(ZR={}));var QR;(e=>e.defaultData={occlusion:!1,aoFullRes:!1,radius:256,bias:.5,aoColor:{r:.19607843137254902,g:.19607843137254902,b:.19607843137254902}})(QR||(QR={}));var sy;(e=>e.defaultData={usePhysics:!1,gravity:-10})(sy||(sy={}));var KR;(e=>e.defaultData={playCamera:i2,gameControlObject:null})(KR||(KR={}));var JR;(e=>e.defaultData={backgroundColor:Pi.fromHexAndA(_bt,1),postprocessing:f6.defaultData,fog:YR.defaultData,globalPhysics:sy.defaultData,ambient:ZR.defaultData,ao:QR.defaultData,shadow:XR.defaultData,publish:KR.defaultData})(JR||(JR={}));var $R;(e=>e.defaultData={colliderType:"box",size:[100,100,100],colliderHelperVisible:!0,forceType:"collider",forceRange:"global",forceIntensity:.5,forceDambing:.95})($R||($R={}));var fte;(e=>{function t(i){return i==="Component"||i==="Instance"}e.isComponentRelated=t;function r(i){return i==="Empty"||i==="Instance"}e.isEmptyOrComponent=r})(fte||(fte={}));var ly;(e=>{e.identity={...VR.identity,hiddenMatrix:ny.identity};function t(n){return{position:n.position,rotation:n.rotation,scale:n.scale,hiddenMatrix:n.hiddenMatrix}}e.fromObject=t;function r(n,a){return{position:(a==null?void 0:a.position)||n.position,rotation:(a==null?void 0:a.rotation)||n.rotation,scale:(a==null?void 0:a.scale)||n.scale,hiddenMatrix:(a==null?void 0:a.hiddenMatrix)||n.hiddenMatrix}}e.merge=r;function i(n,a){return age({position:Ev.isEqual(n.position,a.position)?void 0:a.position,rotation:Ev.isEqual(n.rotation,a.rotation)?void 0:a.rotation,scale:Ev.isEqual(n.scale,a.scale)?null:a.scale,hiddenMatrix:ny.isEqual(n.hiddenMatrix,a.hiddenMatrix)?void 0:a.hiddenMatrix})}e.diff=i})(ly||(ly={}));var wa;(e=>e.defaultData={states:new Et,events:new Et,visible:!0,raycastLock:!1,physics:oy.defaultData,pathSnapping:{pathId:null,slide:0,offset:0,orientation:"tangential"},...ly.identity,cloner:null})(wa||(wa={}));var eO;(e=>e.defaultData={type:"Empty",...wa.defaultData})(eO||(eO={}));var pte;(e=>e.defaultData={type:"ParticleCollider",...$R.defaultData,...wa.defaultData})(pte||(pte={}));var vte;(e=>e.defaultData={type:"Component",...wa.defaultData})(vte||(vte={}));var mte;(e=>e.defaultData={type:"Particle",...wa.defaultData,...l6.defaultData})(mte||(mte={}));var $0;(e=>e.defaultData={type:"Mesh",...wa.defaultData,...jR.defaultData})($0||($0={}));var Gw;(e=>e.defaultData={...wa.defaultData,...ly.identity,position:[0,0,ay.DefaultTargetOffset],...ay.defaultData})(Gw||(Gw={}));var tO;(e=>{function t(r){return{...wa.defaultData,...HR.defaultData(r)}}e.defaultData=t,e.defaultDirectionalLightData={...e.defaultData("DirectionalLight"),position:[200,300,300],name:"Directional Light",intensity:.7}})(tO||(tO={}));var p6;(e=>{function t(i,n,a=0){for(;a<n.length;){let o=i?i[n[a]]:void 0;if(n.length===a+1)return o;if(o)i=o.descendants,a+=1;else return}}e.resolveWithDes=t;function r(i,n,a=0){let o=t(i,n,a);if(o){let s=Object.keys(o);if(s.length===1&&s[0]==="descendants")return}return o}e.resolve=r})(p6||(p6={}));var qf;(e=>{e.rootOverrideProps=["physics","events"],e.compositeNonOptionalOverrideProps=["geometry"],e.compositeEntireOverrideOverrideProps=["material"];function t(i,n){return{...wa.defaultData,...n,component:i,overrides:new Vn,physics:void 0,events:void 0,type:"Instance"}}e.ofComponent=t;function r(i){let n=ly.fromObject(i.data);return t(i.id,n)}e.fromComponentData=r})(qf||(qf={}));var uy;(e=>{e.defaultData={type:"Page",...wa.defaultData,physics:{...oy.defaultData,fusedBody:!1},...JR.defaultData,camera:Gw.defaultData};function t(r){return r.uiScene!==void 0}e.isUIPage=t})(uy||(uy={}));var rO;(e=>(e.defaultCamera={position:[0,0,1e3],scale:[1,1,1],rotation:[0,0,0],hiddenMatrix:ny.identity,name:"Play Camera",visible:!0,raycastLock:!1,physics:oy.defaultData,states:new Et,events:new Et,cloner:null,pathSnapping:{pathId:null,orientation:"tangential",slide:0,offset:0},...ay.defaultData},e.KeysByResetCategory={States:["states"],Events:["events"],Material:["material","materials"],Geometry:["geometry"],Position:["position"],Rotation:["rotation"],Scale:["scale"],Transform:["position","scale","rotation","hiddenMatrix"],Name:["name"],Visibility:["visible","raycastLock","flatShading","wireframe","side"],Shadows:["castShadow","receiveShadow"],Cloner:["cloner"],Physics:["physics"]},e.defaultMeshObject={name:"Rectangle",...wa.defaultData,...$0.defaultData,geometry:J0.defaultData("RectangleGeometry"),material:Ua.defaultTwoLayerData("phong","layer1","layer2")},e.defaultBooleanObject={name:"Boolean",...wa.defaultData,...$0.defaultData,geometry:J0.defaultData("BooleanGeometry"),material:Ua.defaultTwoLayerData("phong","layer1","layer2")},e.defaultTextObject={name:"Text",...wa.defaultData,...$0.defaultData,geometry:J0.defaultData("TextGeometry"),material:Ua.defaultTwoLayerData("phong","layer1","layer2")},e.defaultInputObject={name:"Input",...wa.defaultData,...$0.defaultData,geometry:J0.defaultData("InputGeometry"),material:Ua.defaultTwoLayerData("phong","layer1","layer2")}))(rO||(rO={}));var ev;(e=>{function t(a,o){let s={name:o};return a.type==="Mesh"?(s.geometry={},"material"in a&&(s.material={layers:new Vn}),"materials"in a&&(s.materials=a.materials.map(l=>({layers:new Vn})))):Xv.is(a.type)&&(s.perspective={},s.orthographic={}),s}e.newEmpty=t;function r(a,o){if(o===void 0)return a;let s={...a};return"material"in s&&"material"in o&&o.material&&(s.material=Uw(s.material,l=>{if(typeof l!="string")for(let[u,c]of Object.entries(o.material.layers)){let h=l.layers.data(u);h&&da.patch(h,c)}}).data),s.materials&&o.materials&&(s.materials=Uw(s.materials,l=>{var u,c;for(let h=0;h<s.materials.length;h++){let d=o.materials[h];if(typeof d!="string")for(let[f,p]of Object.entries(d.layers)){let v=(c=(u=l[h])==null?void 0:u.layers)==null?void 0:c.data(f);v&&da.patch(v,p)}}}).data),s}function i(a,o){let s,l=[],u={orthographic:0,perspective:0,geometry:0};function c(h,d){for(let[f,p]of Object.entries(d.layers)){let{texture:v,...m}=p;if(v!==void 0&&Object.keys(v).length>0){let g={path:[...h,"layers",f,"texture"],props:v,type:0};l.push(g)}if(Object.keys(m).length>0){let g={path:[...h,"layers",f],props:m,type:0};l.push(g)}}}for(let[h,d]of Object.entries(o))if(h!=="name")if(h==="cloner")l.push(...FR.toOps(d,["cloner"]));else if(h==="pathSnapping")l.push({path:[h],props:{slide:d.slide,offset:d.offset},type:0});else if(h==="material")c(["material"],d);else if(h==="materials")for(let[f,p]of Object.entries(d))c(["materials",f],p);else if(u[h]===0){if(h==="geometry"&&d.extrusion!==void 0){let f={path:[h,"extrusion"],props:d.extrusion,type:0};l.push(f),d={...d},delete d.extrusion}if(Object.keys(d).length>0){let f={path:[h],props:d,type:0};l.push(f)}}else s===void 0&&(s={path:[],props:{},type:0},l.push(s)),s.props[h]=d;return l}e.toOps=i;function n(a,o){var l,u,c,h,d,f;if(o===void 0)return a;let s={...a};if(Object.assign(s,ly.merge(s,o)),Object.assign(s,{pathSnapping:Object.assign({},s.pathSnapping,{slide:((l=o.pathSnapping)==null?void 0:l.slide)??((u=s.pathSnapping)==null?void 0:u.slide)??0,offset:((c=o.pathSnapping)==null?void 0:c.offset)??((h=s.pathSnapping)==null?void 0:h.offset)??0})}),Xv.is(a.type)){s.orthographic={...s.orthographic},s.perspective={...s.perspective};let p=o;((d=p.orthographic)==null?void 0:d.zoom)!==void 0&&(s.orthographic.zoom=p.orthographic.zoom),((f=p.perspective)==null?void 0:f.zoom)!==void 0&&(s.perspective.zoom=p.perspective.zoom),p.isUpVectorFlipped!==void 0&&(s.isUpVectorFlipped=p.isUpVectorFlipped),p.targetOffset!==void 0&&(s.targetOffset=p.targetOffset)}else if(a.type==="Mesh")"geometry"in o&&Object.assign(s,{geometry:qR.merge(s.geometry,o.geometry)}),(o.material||o.materials)&&(s=r(s,o)),s.cloner&&"cloner"in o&&Object.assign(s,{cloner:Wf.merge(s.cloner,o.cloner)});else if(a.type==="Empty")s.cloner&&"cloner"in o&&Object.assign(s,{cloner:Wf.merge(s.cloner,o.cloner)});else if(zR.is(a.type)){let p=o;p.intensity!==void 0&&(s.intensity=p.intensity),p.color!==void 0&&(typeof p.color=="string"?s.color=p.color:s.color=Fa.clone(p.color))}return s}e.patch=n})(ev||(ev={}));var v6;(e=>e.defaultData={enablePan:!0,enableZoom:!0,enableRotate:!0,enableDamping:!0,rotationLimitsMode:0,rotationVerticalOffset:{min:Math.PI/4,max:Math.PI/4},rotationHorizontalOffset:{min:Math.PI/4,max:Math.PI/4},rotationSoftLimit:2,panLimitsMode:0,panVerticalOffset:{min:250,max:250},panHorizontalOffset:{min:250,max:250},panSoftLimit:2,zoomLimitsEnabled:!1,zoomLimits:{min:.1,max:2},autoRotate:!1,autoRotateSpeed:2,autoRotateClockwise:!0,hoverRotatePanMode:0,hoverRotatePanStrength:20,hoverRotateDamping:.125,isTouchZoom:!0,orbitTouches:2,panTouches:3,resetHoverEffectOnPointerLeave:!0})(v6||(v6={}));var Yf;(e=>e.defaultData={orbitControls:v6.defaultData,playPage:Pb,withBackground:!0,preventScroll:!1,preventTouchScroll:!1,hideCursor:!1,mouseEventTarget:"canvas",joystickSizeAndXYOffset:Array(12).fill(0).map((t,r)=>{let i=0,n=0;return r<5?n=-30:r<10&&(n=30),r===0||r===10||r===5?i=30:(r===4||r===11||r===9)&&(i=-30),[120,[i,n],"show"]}),settings:{image:{format:"jpg",ratio:1},video:{format:"mp4",imageFormat:"jpg",fps:30,mbps:80,ratio:Math.max(1,typeof window<"u"?Math.floor(window.devicePixelRatio):1),stopMode:"manual",duration:5e3},web:{logo:!0,compress:!0,preset:1,preload:!0,hint:!1,imageQuality:70}},stopRaycast:!0,hdTransmission:!1})(Yf||(Yf={}));var iO;(e=>e.defaultData={id:"basic",label:"Basic",style:"None",prompt:""})(iO||(iO={}));var nO;(e=>e.defaultData={weather:0,shadows:0,lightOrigin:0,temperature:0,sun:0,camera:0,environment:0,particles:0,nature:0,floor:0})(nO||(nO={}));var tv;(e=>(e.defaultData=()=>({mode:"line-art-both",prompt:"",negativePrompt:"",style:{...iO.defaultData},isRandomSeed:!0,seed:e.generateSeed(),guessMode:!1,advanced:!1,steps:20,guidanceScale:7.5,controlNetScale:1,modifiers:nO.defaultData}),e.generateSeed=()=>Math.round(Math.random()*1e5)))(tv||(tv={}));var jw;(e=>{function t(i){return i.find(n=>n.data.type==="Page"&&n.data.globalPhysics.usePhysics)!==void 0}e.physicsEnabled=t;function r(i,n,a){i.scene.objects.traverseFrom(n,(o,s)=>{var l;if(s.type==="Instance"){let u=(l=y6.getComponentData(i,s.component))==null?void 0:l.data;u&&a(o,s,u.events)}else a(o,s,s.events)})}e.traverseModuleInstances=r})(jw||(jw={}));var rv;(e=>{e.TRASH_CAN_ID="830a2708-8ed9-49cf-a68e-085299892222",e.defaultLight={fi:-1,data:tO.defaultDirectionalLightData,id:"830a2708-8ed9-49cf-a68e-085299899103",children:[]};function t(n=!0,a=[]){let o=[],s=rO.defaultMeshObject;n&&(o.push({...e.defaultLight}),o.push({fi:1,id:"7ba78968-2a55-48f2-b14c-5191da3e075e",data:s,children:[]})),o.push(...a);let l=new Ha;return l.push({fi:1,id:Pb,data:{...uy.defaultData,name:"Scene 1"},children:o}),l}e.createDefaultObjectTreeWithPage=t,e.defaultData={objects:t(),publish:Yf.defaultData,styles:tv.defaultData()},e.emptyDataWithoutPage=function(){return{objects:new Ha,publish:Yf.defaultData,styles:tv.defaultData()}},e.emptyDataWithPage=function(n=!0){return{objects:t(n),publish:Yf.defaultData,styles:tv.defaultData()}},e.emptyData=function(){return{objects:new Ha,publish:{...Yf.defaultData},styles:tv.defaultData()}};function r(n){return{...e.defaultData,objects:Nl(n,Ha.prototype)}}e.withObjs=r;function i(n,a){return r([{id:n,data:a,children:[],fi:0}])}e.withObj=i})(rv||(rv={}));var Db;(e=>e.defaultData={preset:"fullscreen",allowResponsive:!1,size:[512,512],coords:[0,0],sceneScale:1,color:{r:0,g:0,b:0,a:.5}})(Db||(Db={}));var aO;(e=>(e.defaultData=t=>({url:t,name:"New Webhook",parametersSchemas:new Et}),e.defaultParameterValueByType=t=>t==="number"?0:t==="boolean"?!1:""))(aO||(aO={}));var gte;(e=>e.defaultData=(t,r="GET")=>({url:t,method:r,name:"New API",headers:new Et,queries:new Et,autoStart:!0}))(gte||(gte={}));var Ga;(e=>{function t(o){return o.textValue!==void 0}e.isTextValue=t;function r(o){return typeof o=="number"}e.isNumber=r;function i(o){return typeof o=="boolean"}e.isBoolean=i;function n(o){return t(o)?"string":i(o)?"boolean":"number"}e.typeOfVariable=n;function a(o){return e.isTextValue(o)?Array.isArray(o.textValue)?o.textValue.map(s=>s.toString().padStart(o.padding??2,"0")).join(o.deliminator??":")+(o.suffix!==void 0?" "+o.suffix:""):o.textValue.toString():e.isBoolean(o)?o?"True":"False":e.isNumber(o)?parseFloat(o.toFixed(3)).toString():o.toString()}e.getDisplayedValue=a})(Ga||(Ga={}));var oO;(e=>e.all=["images","videos","colors","audios","particles","fonts","materials","variables"])(oO||(oO={}));var yte;(e=>e.all=[...oO.all,"components"])(yte||(yte={}));var xte;(e=>{function t(){return{images:new Bt,videos:new Bt,colors:new Bt,audios:new Bt,particles:new Bt,fonts:new Bt,materials:new Bt,components:new Bt,variables:new Bt,userAPIs:new Bt,userWebhooks:new Bt}}e.defaultData=t})(xte||(xte={}));var Pd;(e=>{function t(){return{images:new Bt,videos:new Bt,colors:new Bt,audios:new Bt,particles:new Bt,fonts:new Bt,materials:new Bt,components:new Bt,variables:new Bt,userAPIs:new Bt,userWebhooks:new Bt}}e.defaultData=t})(Pd||(Pd={}));var bl;(e=>{function t(){let o={};return o["89b10010-844c-11ec-a8a3-0242ac120002"]={r:.5,g:.5,b:.5,a:1,name:"Default Color"},Nl(o,Bt.prototype)}e.defaultColors=t;function r(){return Nl({},Bt.prototype)}e.defaultImages=r;function i(){return{catelogs:new Bt,materials:new Bt,images:new Bt,videos:new Bt,colors:new Bt,audios:new Bt,particles:new Bt,fonts:new Bt,variables:new Et,userAPIs:new Bt,userWebhooks:new Bt,lib:Pd.defaultData()}}e.emptyData=i;function n(o){switch(o){case"number":return{value:0,name:"Number"};case"boolean":return{value:!1,name:"Boolean"};case"string":return{value:{textValue:"String value"},name:"String"};case"time":let s=[0,0,0];return{name:"Time",value:{textValue:s,deliminator:":",padding:2,suffix:"AM"},dynamicVariableType:"time",format:"HH:mm:ss",format12h24h:"12ampm",timeZone:null,hasEnd:!1,endValue:{textValue:s,deliminator:":",padding:2,suffix:"AM"},autoStart:!0,repeat:!1};case"counter":return{name:"Counter",value:0,dynamicVariableType:"counter",updateInterval:1e3,increment:1,autoStart:!0,hasEnd:!0,endValue:60,repeat:!0,randomStart:!1,range:[0,100],decimals:0};case"random":return{name:"Random",value:0,dynamicVariableType:"random",updateInterval:1e3,increment:1,autoStart:!0,isStatic:!1,hasEnd:!0,endValue:60,repeat:!0,min:0,max:100,decimals:0};default:console.error("Unknown variable type",o)}}e.defaultVariables=n;function a(o,s){if(s.format==="HH:mm:ss"){let l=Math.floor(o/3600),u=Math.floor((o-l*3600)/60),c=Math.round(o-l*3600-u*60);return{textValue:[l,u,c]}}else if(s.format==="mm:ss"){let l=Math.floor(o/60),u=Math.round(o-l*60);return{textValue:[l,u]}}else return s.format==="number"?o=Math.round(o):o=Math.round(o*1e3)/1e3,o}e.getFormattedTimerTime=a})(bl||(bl={}));var m6;(e=>e.list=["idle","move","jump","run"])(m6||(m6={}));var g6;(e=>(e.defaultColliderData={type:"capsule",height:200,radius:50,position:[0,0,0],rotation:[0,0,0]},e.defaultDataThirdPerson={moveMode:"walk",forwardDirection:"+z",speedTranslate:1e3,speedRotate:100,runMultiplier:2,rotationMode:"normal",rotBy:"keys",rotByTouch:"drag",delayPos:[.3,.3],delayRot:[.3,.3],keyAssignments:[["moveNegZ","W"],["moveNegX","A"],["movePosZ","S"],["movePosX","D"],["rotPosX","▲"],["rotPosY","◀"],["rotNegX","▼"],["rotNegY","▶"],["jump","Space"],["run","⇧"],["none","Ctrl"]],touchControl:!0,joystickPosLoc:5,joystickRotLoc:11,jumpTouchButtonLoc:9,collider:e.defaultColliderData,colliderHelperVisible:!0,collisionEnabled:!0,jumpPower:100,resetYPosition:3e3,alignToGround:!1,autoOrientMove:!0,orientWith:"camera",orientMode:"radial",delayPosCamera:.3,delayRotCamera:.3,camera:"",cameraXAxis:"Limit",cameraYAxis:"Free",cameraRotXLimits:[0,Math.PI/2],cameraRotYLimits:[-Math.PI/2,Math.PI/2],gameActions:{idle:new Et,move:new Et,jump:new Et,run:new Et},navmesh:{enabled:!1,ch:6,cs:6,walkableClimb:5,walkableHeight:1,walkableRadius:0,zones:"all",objects:[],helperVisible:!0,destinationHelperRadius:0,destinationHelperColor:Pi.fromHexAndA(3728051,1)}}))(g6||(g6={}));function bte(e){e.layers.forEach(t=>{if(t.type==="depth"&&t.colorA!==void 0){let r=t.colorA,i=t.colorB,n=[[r.r,r.g,r.b,r.a],[i.r,i.g,i.b,i.a]],a=[0,1];for(let s=2;s<10;s++)n.push(n[1]),a.push(1);let o={...Wc(_n(t),"type","visible","isVector","isWorldSpace","origin","alpha","mode"),near:Math.max(0,t.near),far:Math.max(0,t.far),colors:n,steps:a,num:2,direction:[1,0,0],smooth:!1,gradientType:1};Object.assign(t,o)}else if(t.type==="depth"&&t.gradientType===1&&(t.near<0||t.far<0)){let r={..._n(t),near:Math.max(t.near,0),far:Math.max(t.far,0)};Object.assign(t,r)}})}function Pf(e,t){Object.values(e.shared.materials).forEach(r=>t(r))}function Df(e,t){e.scene.objects.traverse((r,i)=>{"materials"in i?i.materials.forEach((n,a)=>{n===void 0&&(i.materials[a]=Ua.defaultData(),n=i.materials[a]),typeof n!="string"&&t(n)}):"material"in i?typeof i.material!="string"&&(i.material===void 0&&(i.material=Ua.defaultData()),t(i.material)):i.type==="Mesh"&&(i.material===void 0&&(i.material=Ua.defaultData()),t(i.material)),"overrides"in i&&Object.values(i.overrides).forEach(n=>{n.material&&typeof n.material!="string"&&Object.getPrototypeOf(n.material)!==Vn.prototype&&t(n.material)})})}function Cbt(e){Object.assign(e.scene.publish,{orbitControls:{...v6.defaultData,..._n(e.scene.publish.orbitControls)}})}function Ebt(e){Object.assign(e.scene.publish.settings,{video:{...Yf.defaultData.settings.video,..._n(e.scene.publish.settings.video)}})}function Mbt(e){function t(r){if(r.layers){for(let i of Object.values(r.layers))if(i){for(let[n,a]of Object.entries(i))if((zge.includes(n)||typeof a=="boolean")&&delete i[n],n==="texture")for(let[o,s]of Object.entries(a))(Sbt.includes(o)||typeof s=="boolean")&&delete a[o]}}}e.scene.objects.traverse((r,i)=>{i.states.forEach(n=>{let a=n;a.material?t(a.material):a.materials&&a.materials.forEach(o=>{t(o)})})})}function Tbt(e){e.scene.publish.withBackground=!0}function Pbt(e){e.scene.publish.settings.web={compress:!0,preload:!0,preset:1,logo:!0,hint:!1}}function Dbt(e){e.scene.objects.traverse((t,r)=>{let i=r.cloner;i&&(i.radial.scale=i.radial.scale.map(n=>n+1),i.linear.scale=i.linear.scale.map(n=>n+1))})}function Ibt(e){e.scene.objects.traverse((t,r)=>{let i=r.geometry;i&&(i.type==="DodecahedronGeometry"||i.type==="IcosahedronGeometry")&&(i.detail=Math.round(i.detail))})}function Lbt(e){e.scene.objects.traverse((t,r)=>{let i=e.scene.objects.unproxy().parent(t);if(i){let n=_n(e.scene.objects.data(i));n&&n.type==="Mesh"&&n.geometry.type==="BooleanGeometry"&&r.type==="Mesh"&&(r.visible=_n(r).booleanExclude!==!0)}})}function kbt(e){e.scene.objects.traverse((t,r)=>{if(r.type==="Mesh"){let i=r;r.geometry.type==="NonParametricGeometry"?i.material!==void 0&&delete i.material:i.materials!==void 0&&delete i.materials}})}function Rbt(e){function t(i){Object.setPrototypeOf(i,Vn.prototype),i.texture&&Object.setPrototypeOf(i.texture,Vn.prototype)}function r(i){Object.setPrototypeOf(i,Vn.prototype);for(let n in i)t(i[n])}e.scene.objects.traverse((i,n)=>{n.states.forEach(a=>{let o=a;if(o.material){let s=_n(o.material).layers;r(s),o.material.layers=s}if(o.materials)for(let s=0;s<o.materials.length;s++){let l=o.materials[s],u=_n(l).layers;r(u),l.layers=u}})})}function wte(e){e.layers===void 0&&Object.assign(e,Ua.defaultTwoLayerData("lambert"))}function UP(e){!e.layers||e.layers.forEach(t=>{if(t.type==="depth"&&t.colors.length===10){let r=[...t.colors];r.push(t.colors[9]);let i=[...t.steps];i.push(t.steps[9]);let n={..._n(t),colors:r,steps:i};Object.assign(t,n)}})}function Obt(e){e.scene.objects.traverse((t,r)=>{r.type==="Mesh"&&(r.geometry.type==="BooleanGeometry"||r.geometry.type==="SubdivGeometry")&&(r.geometry.phongAngle=35)})}function _te(e){e.scene.objects.traverse((t,r)=>{"materials"in r?r.materials.forEach(i=>{typeof i!="string"&&UP(i)}):"material"in r&&typeof r.material!="string"&&UP(r.material)}),Object.values(e.shared.materials).forEach(t=>UP(t))}function Bbt(e){e.scene.environment.ambientLight.softShadows=!1,e.scene.environment.ambientLight.softShadowQuality="low",e.scene.objects.traverse((t,r)=>{(r.type==="DirectionalLight"||r.type==="SpotLight")&&(r.shadowResolution=1024,r.shadowRadius=1,r.depth=1e5)}),e.shared.penumbraSize=new Array(5).fill(.5)}function Nbt(e){e.shared.audios=Nl({},Bt.prototype)}function Vbt(e){e.shared.videos=Nl({},Bt.prototype)}function Fbt(e){let t=e.shared.materials;Object.entries(t).forEach(([r,i])=>{if(!i.layers){let n={name:"Untitled Material",layers:[{fi:0,data:{type:"light",category:"phong",alpha:.6,visible:!0,mode:0,specular:{r:.2,g:.2,b:.2},shininess:5},id:"layer1"},{fi:1,data:{type:"color",alpha:1,visible:!0,mode:0,color:{r:.2823529411764706,g:.2823529411764706,b:.30196078431372547}},id:"layer2"}]};Object.assign(t,{[r]:n})}})}function zbt(e){Object.entries(_n(e.shared.images)).filter(t=>t[1].asset===!1).map(t=>t[0]).forEach(t=>{delete e.shared.images[t]}),Object.entries(_n(e.shared.audios)).filter(t=>t[1].asset===!1).map(t=>t[0]).forEach(t=>{delete e.shared.audios[t]})}function Hbt(e){e.scene.publish.settings.web.preload=!1}function Ate(e){e.layers&&e.layers.forEach(t=>{t.type==="depth"&&t.num!==void 0&&(t.colors=t.colors.slice(0,t.num),t.steps=t.steps.slice(0,t.num),delete t.num)})}function Ste(e){e.layers&&e.layers.forEach(t=>{Abt(t)&&t.isMask===void 0&&(t.isMask=!1),(t.type==="texture"||t.type==="video")&&t.blending===void 0&&(t.blending=0),(t.type==="noise"||t.type==="displace"&&t.displacementType==="noise")&&(t.voronoiStyle===void 0&&(t.voronoiStyle=0),t.highCut===void 0&&(t.highCut=1),t.lowCut===void 0&&(t.lowCut=0),t.smoothness===void 0&&(t.smoothness=.3),t.seed===void 0&&(t.seed=0),t.quality===void 0&&(t.quality=1))})}function Ubt(e){e.shared.fonts=Nl({},Bt.prototype)}function Gbt(e){return e.replace(".typeface","").replace(/optimer/gi,"open sans").replace("space_mono","space mono").replace(/alma_mono/gi,"varela round").replace(/droid_sans_mono/gi,"noto sans mono").replace(/droid_sans|gentilis|gnomon_(simple|foreground)|helvetiker/gi,"roboto").replace(/droid_serif/gi,"roboto slab").replace("_sans"," sans").replace("crimson_text","crimson text").replace("medium_medium","medium").replace("fatface_fatface","fatface").replace("100hairline","thin").replace("200thin","extralight").replace("300light","light").replace("500medium","medium").replace("600semi","semibold").replace("800heavy","extrabold").replace("900black","black").replace(/bodoni_(11|16|24|36|48|72|96)([^_])/gi,"bodoni_$1_$2").replace(/bodoni_(11|16|24|36|48|72|96)/gi,"bodoni moda").replace(/(thin|hairline)(_regular)?/gi,"100").replace(/(extra|ultra)light(_regular)?/gi,"200").replace(/light(_regular)?/gi,"300").replace(/_book|_normal|_roman/gi,"_regular").replace(/medium(_regular)?/gi,"500").replace(/(semi|demi)bold(_regular)?/gi,"600").replace(/(extra|ultra)bold(_regular)?/gi,"800").replace(/bold(_regular)?/gi,"700").replace(/(black|heavy|fatface)(_regular)?/gi,"900").replace(/([1-9]00)_italic/gi,"$1italic").replace(/regularitalic/gi,"italic").replace(/regularitalic/gi,"italic").split(" ").map(t=>t.charAt(0).toUpperCase()+t.slice(1)).join(" ")}function jbt(e){let t=[];e.scene.objects.traverse((r,i)=>{let n=i;if(n.type==="TextFrame"){let a=Ua.defaultTwoLayerData("phong"),o=typeof n.color=="string"?e.shared.colors[n.color]:n.color;a.layers[1].data.color={r:o.r,g:o.g,b:o.b},a.layers[1].data.alpha=n.alpha;let s=Gbt(n.font);e.shared.fonts[s]===void 0&&(e.shared.fonts[s]={name:s});let l={name:n.name,...wa.defaultData,...$0.defaultData,flatShading:!1,wireframe:!1,geometry:{...J0.defaultData("TextGeometry"),width:n.width,height:n.height,font:s,depth:0,horizontalAlign:n.horizontalAlign,verticalAlign:n.verticalAlign,fontSize:n.fontSize*1.40625,lineHeight:n.lineHeight/1.40625,letterSpacing:n.letterSpacing-1,text:n.text,textTransform:n.textTransform,extrudeBevelSize:0,extrudeBevelSegments:1},material:a,states:_n(n.states),events:_n(n.events),visible:n.visible,raycastLock:n.raycastLock,position:n.position,rotation:n.rotation,scale:n.scale,hiddenMatrix:n.hiddenMatrix},u=_n(e.scene.objects).parent(r);e.scene.objects.insertAfter(u??null,r,[{id:r+"new",data:l,children:[]}]),t.push(r)}}),t.forEach(r=>{e.scene.objects.delete(r)})}function Wbt(e){let t={0:"MouseDown",1:"MouseUp",2:"MouseHover",5:"KeyDown",6:"KeyUp",7:"Start",9:"LookAt",10:"Follow",11:"Scroll",12:"Audio",13:"GameControl"};e.scene.objects.traverse((r,i)=>{i.events.forEach(n=>{if(t[Number(n.type)])if(Object.assign(n,{type:t[Number(n.type)]}),n.type==="Audio"&&"audioEvent"in n&&(Object.assign(n,{playAudio:n.audioEvent}),delete n.audioEvent),n.type==="GameControl")Object.assign(n,{gameActions:{idle:new Et,move:new Et,jump:new Et}});else{let a=new Et;Object.assign(n,{actions:a}),(n.type==="MouseDown"||n.type==="MouseUp"||n.type==="KeyDown"||n.type==="KeyUp")&&"url"in n&&a.push({fi:0,id:vt.generateUUID(),data:{type:"Link",url:n.url,delay:0}}),"targets"in n&&(n.targets.forEach((o,s,l)=>{let u={state:void 0,repeat:0,delay:0,delayDirection:void 0,direction:"normal",duration:0,easing:4},c={easing:o.easing,duration:o.duration};o.easing===6?Object.assign(c,Wc(o,"mass","stiffness","damping","velocity")):o.easing===5&&Object.assign(c,{control1:{...o.control1},control2:{...o.control2}});let h={repeat:o.repeat?-1:0,delay:o.delay,delayDirection:o.delayDirection,direction:o.cycle&&o.rewind?"pingpong-rewind":o.cycle?"pingpong":"normal"},d={state:o.state,...h,...c},f={allowSlerp:!0,type:"Transition",object:o.object,repeat:0,delay:0,delayDirection:void 0,direction:"normal",tweens:new Et({fi:0,id:vt.generateUUID(),data:u},{fi:1,id:vt.generateUUID(),data:d})};a.push({fi:l,id:s,data:f})}),delete n.targets)}})})}function qbt(e){e.scene.objects.traverse((t,r)=>{function i(n,a){var l;let o=new Et,s=[];if(r.events.forEach((u,c,h)=>{if(u.type==="Audio"&&u.trigger===a){let d;s.push(c),u.interaction==="play"?d={...Wc(u,"interaction","audio","delay","volume","loop"),triggerAfter:"after"in u?u.after:void 0,toggle:"after"in u?u.toggle:void 0,type:"Audio"}:(u.interaction==="pause"||u.interaction==="stop")&&(d={...Wc(u,"interaction","delay","object","playAudio"),type:"Audio"}),d&&o.push({fi:h,id:c,data:d})}}),s.forEach(u=>r.events.delete(u)),o.length){let u=(l=r.events.find(c=>c.type===n))==null?void 0:l.data;u?"actions"in u&&u.actions.insertBefore(null,o):r.events.insertBefore(null,[{id:vt.generateUUID(),data:{type:n,actions:o}}])}}i("Start","start"),i("MouseDown","mouseDown"),i("MouseUp","mouseUp"),i("KeyDown","keyDown"),i("KeyUp","keyUp")})}function Cte(e){var r;let t=(r=e.layers.find(i=>i.type==="light"))==null?void 0:r.data;if((t==null?void 0:t.category)==="basic"){let i=da.defaultData("light","phong"),n=t;Object.assign(n,i),n.visible=!1}}function Ete(e){Pf(e,Cte),Df(e,Cte)}function Ybt(e){e.scene.objects.traverse((t,r)=>{r.type==="Mesh"&&r.geometry.type==="SubdivGeometry"&&(r.geometry.scaleBaked||(r.geometry.scaleBaked=[1,1,1]))})}function Xbt(e){e.scene.objects.traverse((t,r)=>{(r.type==="Empty"||r.type==="Mesh")&&r.cloner&&!r.cloner.randomnessObject&&!r.cloner.toObject&&!r.cloner.randomness&&(r.cloner={...r.cloner,toObject:{object:"",spreadType:"random",scale:[0,0,0],rotation:[0,0,0],position:[0,0,0],axis:"x",seed:0,count:99,align:"normal"},randomness:!1,randomnessObject:{strength:100,scale:[0,0,0],rotation:[0,0,0],position:[0,0,0],movement:1,seed:0,freqScale:10,noiseType:"perlin"}})})}function Zbt(e){e.scene.objects.traverse((t,r)=>{r.type==="Mesh"&&r.geometry.type==="NonParametricGeometry"&&!("material"in r)&&!("materials"in r)&&(r.material=Ua.defaultTwoLayerData("phong"))})}function Qbt(e){e.scene.publish.orbitControls.autoZoom===void 0&&(e.scene.publish.orbitControls.autoZoom=!1),e.scene.objects.traverse((t,r)=>{(r.type==="OrthographicCamera"||r.type==="PerspectiveCamera")&&(r.orthographic.autoZoom===void 0&&(r.orthographic.autoZoom=!1),r.orthographic.autoZoomFrustumSize===void 0&&(r.orthographic.autoZoomFrustumSize=790))})}function Kbt(e){e.scene.objects.traverse((t,r)=>{r.pathSnapping===void 0&&(r.pathSnapping={pathId:null,slide:0,offset:0,orientation:"tangential"}),r.pathSnapping.offset===void 0&&(r.pathSnapping.offset=0)})}function Jbt(e){e.scene.publish.mouseEventTarget===void 0&&(e.scene.publish.mouseEventTarget="canvas"),e.scene.publish.settings.web.hint===void 0&&(e.scene.publish.settings.web.hint=!1)}function $bt(e){let{video:t}=e.scene.publish.settings;t.format==="gif"&&t.fps>48&&(t.fps=15)}function ewt(e){e.scene.objects.traverse((t,r)=>{r.events.forEach(i=>{i.type==="GameControl"&&(i.resetYPosition=Math.abs(i.resetYPosition-r.position[1]))})})}function twt(e){let t=e.scene.environment.usePhysics;e.scene.objects.traverse((r,i)=>{t&&i.physics===null?i.collision=!1:i.collision="visibility"})}function rwt(e){e.scene.objects.traverse((t,r)=>{r.events.forEach(i=>{i.type==="GameControl"&&(i.navmesh=g6.defaultDataThirdPerson.navmesh)})})}function iwt(e){e.scene.styles||(e.scene.styles=tv.defaultData())}function Mte(e){e.layers.forEach(t=>{t.type==="light"&&t.category!=="toon"&&t.occlusion===void 0&&(t.occlusion=!0)})}function nwt(e){e.scene.environment.ambientLight.occlusion===void 0&&(e.scene.environment.ambientLight.occlusion=!1),e.scene.environment.ambientLight.aoFullRes===void 0&&(e.scene.environment.ambientLight.aoFullRes=!1),e.scene.environment.ambientLight.radius===void 0&&(e.scene.environment.ambientLight.radius=256),e.scene.environment.ambientLight.bias===void 0&&(e.scene.environment.ambientLight.bias=.5),e.scene.environment.ambientLight.aoColor===void 0&&(e.scene.environment.ambientLight.aoColor={r:.19607843137254902,g:.19607843137254902,b:.19607843137254902}),Df(e,Mte),Pf(e,Mte)}function awt(e){e.scene.objects.traverse((t,r)=>{r.events.forEach(i=>{i.type==="GameControl"&&Object.assign(i.gameActions,{run:new Et})})})}function owt(e){e.scene.objects.traverse((t,r)=>{r.events.forEach(i=>{i.type==="GameControl"&&(i.keyAssignments=[...i.keyAssignments,["run","⇧"],["none","Ctrl"]])})})}function Tte(e){e.layers&&e.layers.forEach(t=>{t.type==="light"&&t.bumpMapIntensity===void 0&&(t.bumpMapIntensity=5)})}function swt(e,t){if(t<1&&(Df(e,bte),Pf(e,bte),e.schema=1),t<2&&(Cbt(e),e.schema=2),t<3&&(Mbt(e),e.schema=3),t<4&&(Tbt(e),e.schema=4),t<5&&(Pbt(e),e.schema=5),t<6&&(Dbt(e),e.schema=6),t<7&&(Ibt(e),e.schema=7),t<8&&(e.schema=8),t<9&&(_te(e),e.schema=9),t<10&&(Obt(e),e.schema=10),t<11&&(Bbt(e),e.schema=11),t<12&&(_te(e),e.schema=12),t<13&&(Nbt(e),e.schema=13),t<14&&(Fbt(e),e.schema=14),t<15&&(zbt(e),e.schema=15),t<16&&(Hbt(e),e.schema=16),t<17&&(Df(e,Ate),Pf(e,Ate),e.schema=17),t<18&&(Df(e,wte),Pf(e,wte),e.schema=18),t<19&&(Ebt(e),e.schema=19),t<20&&(Ubt(e),jbt(e),e.schema=20),t<21&&(Wbt(e),qbt(e),e.schema=21),t<22&&(Ete(e),e.schema=22),t<23&&(Ybt(e),e.schema=23),t<24&&(Xbt(e),e.schema=24),(t<25||e.shared.videos===void 0)&&(Vbt(e),t<25&&(e.schema=25)),t<26&&(Lbt(e),e.schema=26),t<27&&(kbt(e),e.schema=27),t<28&&(Ete(e),e.schema=28),t<29&&(Rbt(e),e.schema=29),t<30&&(Zbt(e),e.schema=30),t<31&&(Qbt(e),e.schema=31),t<33&&(Kbt(e),e.schema=33),t<34&&(Jbt(e),e.schema=34),t<35&&($bt(e),e.schema=35),t<36&&(ewt(e),e.schema=36),t<37&&(twt(e),e.schema=37),t<38&&(Df(e,Ste),Pf(e,Ste),e.schema=38),t<39&&(rwt(e),e.schema=39),t<40&&(iwt(e),e.schema=40),t<41&&(nwt(e),e.schema=41),t<42&&(awt(e),e.schema=42),t<43&&(owt(e),e.schema=43),t<99){Df(e,Tte),Pf(e,Tte),e.scene.publish.playCamera===null&&(e.scene.publish.playCamera=i2);let r=_n(e.scene.objects),i=e.scene.objects;e.scene.publish.playPage=Pb,i.insertBefore(null,null,[{id:Pb,data:{...uy.defaultData,backgroundColor:e.scene.backgroundColor,fog:e.scene.fog,postprocessing:e.scene.postprocessing,ao:Wc(e.scene.environment.ambientLight,"occlusion","aoFullRes","radius","bias","aoColor"),publish:{playCamera:e.scene.publish.playCamera,gameControlObject:e.scene.publish.gameControlObject},shadow:Wc(e.scene.environment.ambientLight,"softShadowQuality"),globalPhysics:{...sy.defaultData,...Wc(e.scene.environment,"usePhysics","gravity")},camera:_n(e.scene.ownerCamera)??uy.defaultData.camera,name:"Scene"},children:[]}]);for(let o of r)o.id!==rv.TRASH_CAN_ID&&i.move(Pb,o.fi,o.id);let n=0,a=0;e.shared.penumbraSize&&e.scene.objects.traverse((o,s)=>{s.type==="DirectionalLight"?(s.penumbraSize=e.shared.penumbraSize[Math.min(n,2)],n+=1):s.type==="SpotLight"&&(s.penumbraSize=e.shared.penumbraSize[3+Math.min(a,1)],a+=1),(s.physics===void 0||s.physics===null)&&s.type!=="Instance"&&(s.physics={},Object.assign(s.physics,oy.defaultData)),s.physics!==void 0&&s.physics!==null&&(s.physics.enabled=s.collision??"visibility",delete s.collision)}),e.schema=99}}function Pte(e){e.layers&&e.layers.forEach(t=>{t.type==="light"&&t.alphaOverride===void 0&&(t.alphaOverride=1)})}function lwt(e){e.scene.objects.traverse((t,r)=>{let i=r.geometry;i&&i.type==="PathGeometry"&&(i.extrusion.capType="flat",i.extrusion.bevel=50,i.extrusion.bevelSides=6,i.extrusion.shape.type==="Custom"&&(i.extrusion.shape.shapeQuality="low"))})}function uwt(e){var t;Array.isArray(_n(e.events))&&((t=e.events)==null||t.forEach(r=>{"disabled"in r||(r.disabled=!1),(r.type==="MouseDown"||r.type==="MouseUp"||r.type==="MousePress")&&(r.mode=r.mode||"Object")}))}var kg=180/Math.PI;function Dte(e){e.rotation=e.rotation.slice(0,3).map(t=>t*kg)}function jge(e){var r,i;Dte(e),e.type==="Page"&&Dte(e.camera),(r=e.states)==null||r.forEach(n=>{n.rotation===void 0||n.rotation===null||(n.rotation=n.rotation.slice(0,3).map(a=>a*kg))});let t=e.geometry;t&&t.type==="SphereGeometry"&&(t.thetaLength=(t.thetaLength??180)*kg),t&&t.type==="TorusGeometry"&&(t.arc=t.arc*kg),t&&t.type==="PathGeometry"&&(t.extrusion.angle*=kg,t.extrusion.twist*=kg),e.type==="Mesh"&&e.geometry.type==="TextGeometry"&&(e.geometry.text={textValue:e.geometry.text}),Array.isArray(_n(e.events))&&((i=e.events)==null||i.forEach(n=>{(n.type==="MouseDown"||n.type==="MouseUp"||n.type==="MousePress"||n.type==="KeyDown"||n.type==="KeyUp"||n.type==="KeyPress"||n.type==="Collision"||n.type==="Trigger")&&(n.runMode=n.toggle?"Toggle":"Repeat")}))}function cwt(e){e.shared.variables=Nl({},Bt.prototype)}function hwt(e){let t=_n(e.shared.variables);e.shared.variables=Nl(Object.entries(t??{}).map(([r,i],n)=>({fi:n,id:r,data:i})),Et.prototype)}var Hh=115;function Wge(e,t){t(e.data);for(let r of e.children)Wge(r,t)}function dwt(e){let t=e.schema??104;t!==Hh&&t<105&&(Wge(e.asset,jge),e.schema=105)}function fwt(e){e.shared.particles=Nl({},Bt.prototype),e.shared.lib&&(e.shared.lib.particles=Pd.defaultData().particles)}function pwt(e){e.scene.objects.traverse((t,r)=>{r.type==="Particle"&&typeof r.renderMaterial.size=="number"&&Object.assign(r.renderMaterial,{size:[r.renderMaterial.size,r.renderMaterial.size]})})}function vwt(e){e.scene.objects.traverse((t,r)=>{r.type==="Page"&&(r.postprocessing.depthOfField.focusDistance=100,r.postprocessing.depthOfField.focalLength=20,r.postprocessing.depthOfField.bokehScale=5)})}function mwt(e){e.scene.objects.traverse((t,r)=>{var i;Array.isArray(_n(r.events))!==!1&&((i=r.events)==null||i.forEach(n=>{var o,s,l,u,c,h,d,f,p,v,m;let a=n.runMode;n.type==="MouseDown"||n.type==="MouseUp"||n.type==="KeyDown"||n.type==="KeyUp"||n.type==="Collision"||n.type==="Trigger"?(o=n.actions)==null||o.forEach(g=>{g.type==="Transition"&&(g.runMode=a??"Repeat"),(g.type==="Animation"||g.type==="SwitchCamera")&&(g.runMode=a==="Toggle"?"Toggle":"Normal")}):n.type==="MouseHover"||n.type==="MousePress"||n.type==="KeyPress"?(s=n.actions)==null||s.forEach(g=>{(g.type==="Transition"||g.type==="Animation"||g.type==="SwitchCamera")&&(g.runMode="Toggle")}):n.type==="GameControl"?(delete n.actions,Object.keys(n.gameActions).forEach(g=>{var y;(y=n.gameActions[g])==null||y.forEach(x=>{x.type==="Transition"&&(x.runMode="Repeat"),x.type==="Animation"&&(x.runMode="Normal")})})):n.type==="DragDrop"?(delete n.actions,(u=(l=n.dragDropActions)==null?void 0:l.drag)==null||u.forEach(g=>{(g.type==="Transition"||g.type==="Animation"||g.type==="SwitchCamera")&&(g.runMode="Toggle")}),(h=(c=n.dragDropActions)==null?void 0:c.drop)==null||h.forEach(g=>{(g.type==="Transition"||g.type==="Animation"||g.type==="SwitchCamera")&&(g.runMode="Toggle")})):n.type==="Resize"?(delete n.actions,(d=n.breakpoints)==null||d.forEach(g=>{var y;(y=g.actions)==null||y.forEach(x=>{(x.type==="Transition"||x.type==="Animation"||x.type==="SwitchCamera")&&(x.runMode="Toggle")})})):n.type==="Start"?(f=n.actions)==null||f.forEach(g=>{g.type==="Transition"&&(g.runMode="Once"),(g.type==="Animation"||g.type==="SwitchCamera")&&(g.runMode="Normal")}):n.type==="VariableChange"||n.type==="Scroll"?(p=n.actions)==null||p.forEach(g=>{g.type==="Transition"&&(g.runMode="Repeat"),(g.type==="Animation"||g.type==="SwitchCamera")&&(g.runMode="Normal")}):n.type==="Conditional"&&(delete n.actions,(v=n.inActions)==null||v.forEach(g=>{g.type==="Transition"&&(g.runMode="Repeat"),(g.type==="Animation"||g.type==="SwitchCamera")&&(g.runMode="Normal")}),(m=n.outActions)==null||m.forEach(g=>{g.type==="Transition"&&(g.runMode="Repeat"),(g.type==="Animation"||g.type==="SwitchCamera")&&(g.runMode="Normal")}))}))})}function gwt(e){e.shared.userAPIs=Nl({},Bt.prototype),e.shared.userWebhooks=Nl({},Bt.prototype),e.shared.lib&&(e.shared.lib.userAPIs=Pd.defaultData().userAPIs,e.shared.lib.userWebhooks=Pd.defaultData().userWebhooks)}function qge(e){let t=e.schema??0;if(t!==Hh){console.warn("updating from ",t,"to ",Hh),swt(e,t),t<100&&(e.scene.publish.joystickSizeAndXYOffset===void 0&&(e.scene.publish.joystickSizeAndXYOffset=Yf.defaultData.joystickSizeAndXYOffset),e.schema=100),t<101&&(Df(e,Pte),Pf(e,Pte),e.schema=101),t<102&&(lwt(e),e.schema=102),t<104&&(e.shared.catelogs=new Bt,e.shared.lib=Pd.defaultData(),e.schema=104),t<105&&(cwt(e),e.scene.objects.traverse((r,i)=>{jge(i)}),e.schema=105);for(let r of Object.values(e.shared.lib.components))dwt(r);t<106&&(hwt(e),e.schema=106),t<107&&(e.shared.lib.variables=Pd.defaultData().variables,e.schema=107),t<109&&(fwt(e),e.schema=109),t<110&&(pwt(e),e.schema=110),t<111&&(e.scene.objects.traverse((r,i)=>{uwt(i)}),e.schema=111),t<112&&(vwt(e),e.schema=112),t<113&&(mwt(e),e.schema=113),t<114&&(e.scene.publish.settings.web.imageQuality===void 0&&(e.scene.publish.settings.web.imageQuality=70),e.schema=114),t<115&&(gwt(e),e.schema=115)}}var y6;(e=>{e.defaultData={schema:Hh,scene:rv.defaultData,frames:new Bt().add("72fc2993-2da3-4b6b-96ac-2879db3a28bd",Db.defaultData),shared:{...bl.emptyData(),colors:bl.defaultColors()}},e.emptyDataForImports=function(){let a=rv.emptyDataWithPage();return{schema:Hh,scene:a,frames:new Bt().add("72fc2993-2da3-4b6b-96ac-2879db3a28bd",Db.defaultData),shared:{...bl.emptyData(),colors:bl.defaultColors(),images:bl.defaultImages()}}},e.emptyData=function(){return{schema:Hh,scene:rv.emptyDataWithPage(),frames:new Bt().add("72fc2993-2da3-4b6b-96ac-2879db3a28bd",Db.defaultData),shared:bl.emptyData()}},e.clipboard2dData=function(){return{schema:Hh,scene:rv.emptyData(),frames:new Bt,shared:bl.emptyData()}},e.collabHelper={...MR,updateSchema(a){return(a.schema??0)<Hh?Uw(a,qge):(a.schema??0)-Hh}};function t(a){let o=e.collabHelper.updateSchema(a);return typeof o=="number"?o===0?a:null:o.data}e.updateSchemaDirectly=t;function r(a){return{...a,shared:{...a.shared,lib:Pd.defaultData()}}}e.withoutLib=r;function i(a,o){let s=a.scene.objects.get(o);if(s&&s.data.type==="Component")return s;{let l=a.shared.lib.components[o];if(l)return l.asset}}e.getComponentData=i;function n(a){let o=Object.values(a.shared.userAPIs);for(let s of o){let l=s.headers;for(let u of l)if(u.data.key.toLowerCase()==="authorization"&&u.data.value!=="")return!0}return!1}e.hasSensitiveData=n})(y6||(y6={}));var sO;(e=>e.emptyImage={data:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVQYV2NgYAAAAAMAAWgmWQ0AAAAASUVORK5CYII=",name:"empty"})(sO||(sO={}));var Ite;(e=>{function t(r){return!0}e.is=t})(Ite||(Ite={}));var x6;(e=>{e.defaultData={position:[0,0],scale:[1,1],rotation:0,shear:[0,0]};function t(i,n){return{position:(n==null?void 0:n.position)??i.position,rotation:(n==null?void 0:n.rotation)??i.rotation,scale:(n==null?void 0:n.scale)??i.scale,shear:(n==null?void 0:n.shear)??i.shear}}e.merge=t;function r(i,n){return age({position:id.isEqual(i.position,n.position)?void 0:n.position,rotation:i.rotation===n.rotation?void 0:n.rotation,scale:id.isEqual(i.scale,n.scale)?void 0:n.scale,shear:i.shear&&n.shear&&id.isEqual(i.shear,n.shear)?void 0:n.shear})}e.diff=r})(x6||(x6={}));var lO;(e=>e.defaultData={horizontalConstraint:0,verticalConstraint:0})(lO||(lO={}));var Lte;(e=>e.defaultData={direction:"row",wrap:"unwrap",align:"top-left",gap:10,rowGap:10,autoGap:!1,autoRowGap:!1,leftPadding:8,rightPadding:8,topPadding:8,bottomPadding:8})(Lte||(Lte={}));var b6;(e=>e.defaultData={opacity:1,fill:{color:Pi.fromHexAndA(Xs,1),enabled:!0},stroke:{color:Pi.from0to1([0,0,0,1]),thickness:1,enabled:!1,mode:"inside"},layerBlur:{radius:2,enabled:!1},backgroundBlur:{radius:2,enabled:!1},dropShadow:{offset:[10,10],blurRadius:10,color:Pi.from0to1([0,0,0,1]),enabled:!1,spread:0},innerShadow:{offset:[10,10],blurRadius:10,color:Pi.from0to1([0,0,0,1]),enabled:!1,spread:0}})(b6||(b6={}));var iv;(e=>{function t(o,s){return{name:s}}e.newEmpty=t;function r(o,s){if(s===void 0)return o;let l={...o},u=["width","height","cornerRadius"];for(let c of u)c in l&&c in s&&s[c]!==void 0&&Object.assign(l,{[c]:s[c]});return l}function i(o,s){if(s===void 0)return o;let l={...o};return"fill"in l&&"fill"in s&&s.fill!==void 0&&Object.assign(l,{fill:{...l.fill,...s.fill}}),"stroke"in l&&"stroke"in s&&s.stroke!==void 0&&Object.assign(l,{stroke:{...l.stroke,...s.stroke}}),"layerBlur"in l&&"layerBlur"in s&&s.layerBlur!==void 0&&Object.assign(l,{layerBlur:{...l.layerBlur,...s.layerBlur}}),"backgroundBlur"in l&&"backgroundBlur"in s&&s.backgroundBlur!==void 0&&Object.assign(l,{backgroundBlur:{...l.backgroundBlur,...s.backgroundBlur}}),"dropShadow"in l&&"dropShadow"in s&&s.dropShadow!==void 0&&Object.assign(l,{dropShadow:{...l.dropShadow,...s.dropShadow}}),"innerShadow"in l&&"innerShadow"in s&&s.innerShadow!==void 0&&Object.assign(l,{innerShadow:{...l.innerShadow,...s.innerShadow}}),l}function n(o,s){if(s===void 0)return o;let l={...o};return Object.assign(l,x6.merge(l,s)),l=r(l,s),l=i(l,s),l}e.patch=n;function a(o,s){let l,u=[];for(let[c,h]of Object.entries(s))c!=="name"&&(l===void 0&&(l={path:[],props:{},type:0},u.push(l)),l.props[c]=h);return u}e.toOps=a})(iv||(iv={}));var Ww;(e=>e.defaultData={...x6.defaultData,...lO.defaultData,states:new Et,events:new Et,visible:!0,raycastLock:!1})(Ww||(Ww={}));var cy;(e=>e.defaultData={...Ww.defaultData,...b6.defaultData})(cy||(cy={}));var w6;(e=>e.defaultData={cornerRadius:[0,0,0,0]})(w6||(w6={}));var uO;(e=>e.defaultData={...cy.defaultData,type:"ellipse2d",width:100,height:100,name:"Ellipse"})(uO||(uO={}));var qw;(e=>e.defaultData={...cy.defaultData,...w6.defaultData,type:"rectangle2d",width:100,height:100,name:"Rectangle"})(qw||(qw={}));var cO;(e=>e.defaultData={...cy.defaultData,type:"text2d",width:100,height:100,fontSize:12,lineHeight:1.2,letterSpacing:0,text:{textValue:"Hello world"},horizontalAlign:1,verticalAlign:1,textTransform:1,font:"Roboto_regular",name:"Text"})(cO||(cO={}));var hO;(e=>e.defaultData={...cy.defaultData,type:"path2d",path:"",name:"Path"})(hO||(hO={}));var kte;(e=>{function t(r){return r.type==="ellipse2d"||r.type==="rectangle2d"||r.type==="text2d"||r.type==="vector2d"||r.type==="path2d"}e.is=t})(kte||(kte={}));var _6;(e=>e.defaultData={...Ww.defaultData,name:"Group",type:"group2d"})(_6||(_6={}));var dO;(e=>e.defaultData=()=>({...Ww.defaultData,...w6.defaultData,...b6.defaultData,name:"Frame",type:"frame2d",clipped:!0,width:200,height:200,fill:{color:Pi.fromHexAndA(4737101,1),enabled:!0},stroke:{color:Pi.fromHexAndA(0,1),thickness:1,enabled:!1,mode:"inside"},backgroundBlur:{radius:2,enabled:!1},layerBlur:{radius:2,enabled:!1}}))(dO||(dO={}));var Mv;(e=>{function t(o){switch(o){case"rectangle2d":return{...qw.defaultData};case"ellipse2d":return{...uO.defaultData};case"text2d":return{...cO.defaultData};case"vector2d":return{...qw.defaultData};case"path2d":return{...hO.defaultData};case"frame2d":return{...dO.defaultData()};case"group2d":return{..._6.defaultData}}}e.defaultData=t;function r(o){return"width"in o&&"height"in o?[typeof o.width=="number"?o.width*.5:0,typeof o.height=="number"?o.height*.5:0]:[0,0]}e.getPivot=r;function i(o){return o.type==="rectangle2d"||o.type==="ellipse2d"||o.type==="text2d"||o.type==="frame2d"}e.isResizeable=i;function n(o){return o.type==="frame2d"&&o.autoLayout!==void 0}e.isAutoLayoutable=n;function a(o){return o.type==="rectangle2d"||o.type==="frame2d"}e.hasCorners=a})(Mv||(Mv={}));var fO;(e=>(e.defaultData={name:"UI",type:"scene2d",objects:new Ha},e.emptyData=function(){return{type:"scene2d",objects:new Ha}}))(fO||(fO={}));function nv(e,t=!1){let r=e[0].index!==null,i=new Set(Object.keys(e[0].attributes)),n=new Set(Object.keys(e[0].morphAttributes)),a={},o={},s=e[0].morphTargetsRelative,l=new It,u=0;for(let c=0;c<e.length;++c){let h=e[c],d=0;if(r!==(h.index!==null))return console.error("THREE.BufferGeometryUtils: .mergeBufferGeometries() failed with geometry at index "+c+". All geometries must have compatible attributes; make sure index attribute exists among all geometries, or in none of them."),null;for(let f in h.attributes){if(!i.has(f))return console.error("THREE.BufferGeometryUtils: .mergeBufferGeometries() failed with geometry at index "+c+'. All geometries must have compatible attributes; make sure "'+f+'" attribute exists among all geometries, or in none of them.'),null;a[f]===void 0&&(a[f]=[]),a[f].push(h.attributes[f]),d++}if(d!==i.size)return console.error("THREE.BufferGeometryUtils: .mergeBufferGeometries() failed with geometry at index "+c+". Make sure all geometries have the same number of attributes."),null;if(s!==h.morphTargetsRelative)return console.error("THREE.BufferGeometryUtils: .mergeBufferGeometries() failed with geometry at index "+c+". .morphTargetsRelative must be consistent throughout all geometries."),null;for(let f in h.morphAttributes){if(!n.has(f))return console.error("THREE.BufferGeometryUtils: .mergeBufferGeometries() failed with geometry at index "+c+".  .morphAttributes must be consistent throughout all geometries."),null;o[f]===void 0&&(o[f]=[]),o[f].push(h.morphAttributes[f])}if(t){let f;if(r)f=h.index.count;else if(h.attributes.position!==void 0)f=h.attributes.position.count;else return console.error("THREE.BufferGeometryUtils: .mergeBufferGeometries() failed with geometry at index "+c+". The geometry must have either an index or a position attribute"),null;l.addGroup(u,f,c),u+=f}}if(r){let c=0,h=[];for(let d=0;d<e.length;++d){let f=e[d].index;for(let p=0;p<f.count;++p)h.push(f.getX(p)+c);c+=e[d].attributes.position.count}l.setIndex(h)}for(let c in a){let h=Rte(a[c]);if(!h)return console.error("THREE.BufferGeometryUtils: .mergeBufferGeometries() failed while trying to merge the "+c+" attribute."),null;l.setAttribute(c,h)}for(let c in o){let h=o[c][0].length;if(h===0)break;l.morphAttributes=l.morphAttributes||{},l.morphAttributes[c]=[];for(let d=0;d<h;++d){let f=[];for(let v=0;v<o[c].length;++v)f.push(o[c][v][d]);let p=Rte(f);if(!p)return console.error("THREE.BufferGeometryUtils: .mergeBufferGeometries() failed while trying to merge the "+c+" morphAttribute."),null;l.morphAttributes[c].push(p)}}return l}function Rte(e){let t,r,i,n=0;for(let s=0;s<e.length;++s){let l=e[s];if(l.isInterleavedBufferAttribute)return console.error("THREE.BufferGeometryUtils: .mergeBufferAttributes() failed. InterleavedBufferAttributes are not supported."),null;if(t===void 0&&(t=l.array.constructor),t!==l.array.constructor)return console.error("THREE.BufferGeometryUtils: .mergeBufferAttributes() failed. BufferAttribute.array must be of consistent array types across matching attributes."),null;if(r===void 0&&(r=l.itemSize),r!==l.itemSize)return console.error("THREE.BufferGeometryUtils: .mergeBufferAttributes() failed. BufferAttribute.itemSize must be consistent across matching attributes."),null;if(i===void 0&&(i=l.normalized),i!==l.normalized)return console.error("THREE.BufferGeometryUtils: .mergeBufferAttributes() failed. BufferAttribute.normalized must be consistent across matching attributes."),null;n+=l.array.length}let a=new t(n),o=0;for(let s=0;s<e.length;++s)a.set(e[s].array,o),o+=e[s].array.length;return new Zt(a,r,i)}var ywt=Math.pow(2,-24),d5=class{constructor(){}};function Tc(e,t,r){return r.min.x=t[e],r.min.y=t[e+1],r.min.z=t[e+2],r.max.x=t[e+3],r.max.y=t[e+4],r.max.z=t[e+5],r}function Ote(e){let t=-1,r=-1/0;for(let i=0;i<3;i++){let n=e[i+3]-e[i];n>r&&(r=n,t=i)}return t}function Bte(e,t){t.set(e)}function Nte(e,t,r){let i,n;for(let a=0;a<3;a++){let o=a+3;i=e[a],n=t[a],r[a]=i<n?i:n,i=e[o],n=t[o],r[o]=i>n?i:n}}function f5(e,t,r){for(let i=0;i<3;i++){let n=t[e+2*i],a=t[e+2*i+1],o=n-a,s=n+a;o<r[i]&&(r[i]=o),s>r[i+3]&&(r[i+3]=s)}}function ux(e){let t=e[3]-e[0],r=e[4]-e[1],i=e[5]-e[2];return 2*(t*r+r*i+i*t)}function xwt(e,t){if(!e.index){let r=e.attributes.position.count,i=t.useSharedArrayBuffer?SharedArrayBuffer:ArrayBuffer,n;r>65535?n=new Uint32Array(new i(4*r)):n=new Uint16Array(new i(2*r)),e.setIndex(new Zt(n,1));for(let a=0;a<r;a++)n[a]=a}}function bwt(e){if(!e.groups||!e.groups.length)return[{offset:0,count:e.index.count/3}];let t=[],r=new Set;for(let n of e.groups)r.add(n.start),r.add(n.start+n.count);let i=Array.from(r.values()).sort((n,a)=>n-a);for(let n=0;n<i.length-1;n++){let a=i[n],o=i[n+1];t.push({offset:a/3,count:(o-a)/3})}return t}function GP(e,t,r,i,n=null){let a=1/0,o=1/0,s=1/0,l=-1/0,u=-1/0,c=-1/0,h=1/0,d=1/0,f=1/0,p=-1/0,v=-1/0,m=-1/0,g=n!==null;for(let y=t*6,x=(t+r)*6;y<x;y+=6){let b=e[y+0],_=e[y+1],w=b-_,S=b+_;w<a&&(a=w),S>l&&(l=S),g&&b<h&&(h=b),g&&b>p&&(p=b);let A=e[y+2],M=e[y+3],E=A-M,T=A+M;E<o&&(o=E),T>u&&(u=T),g&&A<d&&(d=A),g&&A>v&&(v=A);let L=e[y+4],P=e[y+5],C=L-P,D=L+P;C<s&&(s=C),D>c&&(c=D),g&&L<f&&(f=L),g&&L>m&&(m=L)}i[0]=a,i[1]=o,i[2]=s,i[3]=l,i[4]=u,i[5]=c,g&&(n[0]=h,n[1]=d,n[2]=f,n[3]=p,n[4]=v,n[5]=m)}function wwt(e,t,r,i){let n=1/0,a=1/0,o=1/0,s=-1/0,l=-1/0,u=-1/0;for(let c=t*6,h=(t+r)*6;c<h;c+=6){let d=e[c+0];d<n&&(n=d),d>s&&(s=d);let f=e[c+2];f<a&&(a=f),f>l&&(l=f);let p=e[c+4];p<o&&(o=p),p>u&&(u=p)}i[0]=n,i[1]=a,i[2]=o,i[3]=s,i[4]=l,i[5]=u}function _wt(e,t,r,i,n){let a=r,o=r+i-1,s=n.pos,l=n.axis*2;for(;;){for(;a<=o&&t[a*6+l]<s;)a++;for(;a<=o&&t[o*6+l]>=s;)o--;if(a<o){for(let u=0;u<3;u++){let c=e[a*3+u];e[a*3+u]=e[o*3+u],e[o*3+u]=c;let h=t[a*6+u*2+0];t[a*6+u*2+0]=t[o*6+u*2+0],t[o*6+u*2+0]=h;let d=t[a*6+u*2+1];t[a*6+u*2+1]=t[o*6+u*2+1],t[o*6+u*2+1]=d}a++,o--}else return a}}var Dh=32,Awt=(e,t)=>e.candidate-t.candidate,sf=new Array(Dh).fill().map(()=>({count:0,bounds:new Float32Array(6),rightCacheBounds:new Float32Array(6),leftCacheBounds:new Float32Array(6),candidate:0})),p5=new Float32Array(6);function Swt(e,t,r,i,n,a){let o=-1,s=0;if(a===0)o=Ote(t),o!==-1&&(s=(t[o]+t[o+3])/2);else if(a===1)o=Ote(e),o!==-1&&(s=Cwt(r,i,n,o));else if(a===2){let l=ux(e),u=1.25*n,c=i*6,h=(i+n)*6;for(let d=0;d<3;d++){let f=t[d],p=(t[d+3]-f)/Dh;if(n<Dh/4){let v=[...sf];v.length=n;let m=0;for(let y=c;y<h;y+=6,m++){let x=v[m];x.candidate=r[y+2*d],x.count=0;let{bounds:b,leftCacheBounds:_,rightCacheBounds:w}=x;for(let S=0;S<3;S++)w[S]=1/0,w[S+3]=-1/0,_[S]=1/0,_[S+3]=-1/0,b[S]=1/0,b[S+3]=-1/0;f5(y,r,b)}v.sort(Awt);let g=n;for(let y=0;y<g;y++){let x=v[y];for(;y+1<g&&v[y+1].candidate===x.candidate;)v.splice(y+1,1),g--}for(let y=c;y<h;y+=6){let x=r[y+2*d];for(let b=0;b<g;b++){let _=v[b];x>=_.candidate?f5(y,r,_.rightCacheBounds):(f5(y,r,_.leftCacheBounds),_.count++)}}for(let y=0;y<g;y++){let x=v[y],b=x.count,_=n-x.count,w=x.leftCacheBounds,S=x.rightCacheBounds,A=0;b!==0&&(A=ux(w)/l);let M=0;_!==0&&(M=ux(S)/l);let E=1+1.25*(A*b+M*_);E<u&&(o=d,u=E,s=x.candidate)}}else{for(let g=0;g<Dh;g++){let y=sf[g];y.count=0,y.candidate=f+p+g*p;let x=y.bounds;for(let b=0;b<3;b++)x[b]=1/0,x[b+3]=-1/0}for(let g=c;g<h;g+=6){let y=~~((r[g+2*d]-f)/p);y>=Dh&&(y=Dh-1);let x=sf[y];x.count++,f5(g,r,x.bounds)}let v=sf[Dh-1];Bte(v.bounds,v.rightCacheBounds);for(let g=Dh-2;g>=0;g--){let y=sf[g],x=sf[g+1];Nte(y.bounds,x.rightCacheBounds,y.rightCacheBounds)}let m=0;for(let g=0;g<Dh-1;g++){let y=sf[g],x=y.count,b=y.bounds,_=sf[g+1].rightCacheBounds;x!==0&&(m===0?Bte(b,p5):Nte(b,p5,p5)),m+=x;let w=0,S=0;m!==0&&(w=ux(p5)/l);let A=n-m;A!==0&&(S=ux(_)/l);let M=1+1.25*(w*m+S*A);M<u&&(o=d,u=M,s=y.candidate)}}}}else console.warn(`MeshBVH: Invalid build strategy value ${a} used.`);return{axis:o,pos:s}}function Cwt(e,t,r,i){let n=0;for(let a=t,o=t+r;a<o;a++)n+=e[a*6+i*2];return n/r}function Ewt(e,t){let r=e.attributes.position,i=e.index.array,n=i.length/3,a=new Float32Array(n*6),o=r.normalized,s=r.array,l=r.offset||0,u=3;r.isInterleavedBufferAttribute&&(u=r.data.stride);let c=["getX","getY","getZ"];for(let h=0;h<n;h++){let d=h*3,f=h*6,p,v,m;o?(p=i[d+0],v=i[d+1],m=i[d+2]):(p=i[d+0]*u+l,v=i[d+1]*u+l,m=i[d+2]*u+l);for(let g=0;g<3;g++){let y,x,b;o?(y=r[c[g]](p),x=r[c[g]](v),b=r[c[g]](m)):(y=s[p+g],x=s[v+g],b=s[m+g]);let _=y;x<_&&(_=x),b<_&&(_=b);let w=y;x>w&&(w=x),b>w&&(w=b);let S=(w-_)/2,A=g*2;a[f+A+0]=_+S,a[f+A+1]=S+(Math.abs(_)+S)*ywt,_<t[g]&&(t[g]=_),w>t[g+3]&&(t[g+3]=w)}}return a}function Mwt(e,t){function r(g){d&&d(g/f)}function i(g,y,x,b=null,_=0){if(!p&&_>=l&&(p=!0,u&&(console.warn(`MeshBVH: Max depth of ${l} reached when generating BVH. Consider increasing maxDepth.`),console.warn(e))),x<=c||_>=l)return r(y+x),g.offset=y,g.count=x,g;let w=Swt(g.boundingData,b,o,y,x,h);if(w.axis===-1)return r(y+x),g.offset=y,g.count=x,g;let S=_wt(s,o,y,x,w);if(S===y||S===y+x)r(y+x),g.offset=y,g.count=x;else{g.splitAxis=w.axis;let A=new d5,M=y,E=S-y;g.left=A,A.boundingData=new Float32Array(6),GP(o,M,E,A.boundingData,a),i(A,M,E,a,_+1);let T=new d5,L=S,P=x-E;g.right=T,T.boundingData=new Float32Array(6),GP(o,L,P,T.boundingData,a),i(T,L,P,a,_+1)}return g}xwt(e,t);let n=new Float32Array(6),a=new Float32Array(6),o=Ewt(e,n),s=e.index.array,l=t.maxDepth,u=t.verbose,c=t.maxLeafTris,h=t.strategy,d=t.onProgress,f=e.index.count/3,p=!1,v=[],m=bwt(e);if(m.length===1){let g=m[0],y=new d5;y.boundingData=n,wwt(o,g.offset,g.count,a),i(y,g.offset,g.count,a),v.push(y)}else for(let g of m){let y=new d5;y.boundingData=new Float32Array(6),GP(o,g.offset,g.count,y.boundingData,a),i(y,g.offset,g.count,a),v.push(y)}return v}function Twt(e,t){let r=Mwt(e,t),i,n,a,o=[],s=t.useSharedArrayBuffer?SharedArrayBuffer:ArrayBuffer;for(let c=0;c<r.length;c++){let h=r[c],d=l(h),f=new s(32*d);i=new Float32Array(f),n=new Uint32Array(f),a=new Uint16Array(f),u(0,h),o.push(f)}return o;function l(c){return c.count?1:1+l(c.left)+l(c.right)}function u(c,h){let d=c/4,f=c/2,p=!!h.count,v=h.boundingData;for(let m=0;m<6;m++)i[d+m]=v[m];if(p){let m=h.offset,g=h.count;return n[d+6]=m,a[f+14]=g,a[f+15]=65535,c+32}else{let m=h.left,g=h.right,y=h.splitAxis,x;if(x=u(c+32,m),x/4>Math.pow(2,32))throw new Error("MeshBVH: Cannot store child pointer greater than 32 bits.");return n[d+6]=x/4,x=u(x,g),n[d+7]=y,x}}}var Dd=class{constructor(){this.min=1/0,this.max=-1/0}setFromPointsField(e,t){let r=1/0,i=-1/0;for(let n=0,a=e.length;n<a;n++){let o=e[n][t];r=o<r?o:r,i=o>i?o:i}this.min=r,this.max=i}setFromPoints(e,t){let r=1/0,i=-1/0;for(let n=0,a=t.length;n<a;n++){let o=t[n],s=e.dot(o);r=s<r?s:r,i=s>i?s:i}this.min=r,this.max=i}isSeparated(e){return this.min>e.max||e.min>this.max}};Dd.prototype.setFromBox=function(){let e=new U;return function(t,r){let i=r.min,n=r.max,a=1/0,o=-1/0;for(let s=0;s<=1;s++)for(let l=0;l<=1;l++)for(let u=0;u<=1;u++){e.x=i.x*s+n.x*(1-s),e.y=i.y*l+n.y*(1-l),e.z=i.z*u+n.z*(1-u);let c=t.dot(e);a=Math.min(c,a),o=Math.max(c,o)}this.min=a,this.max=o}}();var Pwt=function(){let e=new U,t=new U,r=new U;return function(i,n,a){let o=i.start,s=e,l=n.start,u=t;r.subVectors(o,l),e.subVectors(i.end,i.start),t.subVectors(n.end,n.start);let c=r.dot(u),h=u.dot(s),d=u.dot(u),f=r.dot(s),p=s.dot(s)*d-h*h,v,m;p!==0?v=(c*h-f*d)/p:v=0,m=(c+v*h)/d,a.x=v,a.y=m}}(),Uz=function(){let e=new me,t=new U,r=new U;return function(i,n,a,o){Pwt(i,n,e);let s=e.x,l=e.y;if(s>=0&&s<=1&&l>=0&&l<=1){i.at(s,a),n.at(l,o);return}else if(s>=0&&s<=1){l<0?n.at(0,o):n.at(1,o),i.closestPointToPoint(o,!0,a);return}else if(l>=0&&l<=1){s<0?i.at(0,a):i.at(1,a),n.closestPointToPoint(a,!0,o);return}else{let u;s<0?u=i.start:u=i.end;let c;l<0?c=n.start:c=n.end;let h=t,d=r;if(i.closestPointToPoint(c,!0,t),n.closestPointToPoint(u,!0,r),h.distanceToSquared(c)<=d.distanceToSquared(u)){a.copy(h),o.copy(c);return}else{a.copy(u),o.copy(d);return}}}}(),Dwt=function(){let e=new U,t=new U,r=new hs,i=new Ll;return function(n,a){let{radius:o,center:s}=n,{a:l,b:u,c}=a;if(i.start=l,i.end=u,i.closestPointToPoint(s,!0,e).distanceTo(s)<=o||(i.start=l,i.end=c,i.closestPointToPoint(s,!0,e).distanceTo(s)<=o)||(i.start=u,i.end=c,i.closestPointToPoint(s,!0,e).distanceTo(s)<=o))return!0;let h=a.getPlane(r);if(Math.abs(h.distanceToPoint(s))<=o){let d=h.projectPoint(s,t);if(a.containsPoint(d))return!0}return!1}}(),Iwt=1e-15;function ag(e){return Math.abs(e)<Iwt}var Id=class extends za{constructor(...e){super(...e),this.isExtendedTriangle=!0,this.satAxes=new Array(4).fill().map(()=>new U),this.satBounds=new Array(4).fill().map(()=>new Dd),this.points=[this.a,this.b,this.c],this.sphere=new Es,this.plane=new hs,this.needsUpdate=!0}intersectsSphere(e){return Dwt(e,this)}update(){let e=this.a,t=this.b,r=this.c,i=this.points,n=this.satAxes,a=this.satBounds,o=n[0],s=a[0];this.getNormal(o),s.setFromPoints(o,i);let l=n[1],u=a[1];l.subVectors(e,t),u.setFromPoints(l,i);let c=n[2],h=a[2];c.subVectors(t,r),h.setFromPoints(c,i);let d=n[3],f=a[3];d.subVectors(r,e),f.setFromPoints(d,i),this.sphere.setFromPoints(this.points),this.plane.setFromNormalAndCoplanarPoint(o,e),this.needsUpdate=!1}};Id.prototype.closestPointToSegment=function(){let e=new U,t=new U,r=new Ll;return function(i,n=null,a=null){let{start:o,end:s}=i,l=this.points,u,c=1/0;for(let h=0;h<3;h++){let d=(h+1)%3;r.start.copy(l[h]),r.end.copy(l[d]),Uz(r,i,e,t),u=e.distanceToSquared(t),u<c&&(c=u,n&&n.copy(e),a&&a.copy(t))}return this.closestPointToPoint(o,e),u=o.distanceToSquared(e),u<c&&(c=u,n&&n.copy(e),a&&a.copy(o)),this.closestPointToPoint(s,e),u=s.distanceToSquared(e),u<c&&(c=u,n&&n.copy(e),a&&a.copy(s)),Math.sqrt(c)}}();Id.prototype.intersectsTriangle=function(){let e=new Id,t=new Array(3),r=new Array(3),i=new Dd,n=new Dd,a=new U,o=new U,s=new U,l=new U,u=new Ll,c=new Ll,h=new Ll;return function(d,f=null,p=!1){this.needsUpdate&&this.update(),d.isExtendedTriangle?d.needsUpdate&&d.update():(e.copy(d),e.update(),d=e);let v=this.plane,m=d.plane;if(Math.abs(v.normal.dot(m.normal))>1-1e-10){let g=this.satBounds,y=this.satAxes;r[0]=d.a,r[1]=d.b,r[2]=d.c;for(let _=0;_<4;_++){let w=g[_],S=y[_];if(i.setFromPoints(S,r),w.isSeparated(i))return!1}let x=d.satBounds,b=d.satAxes;t[0]=this.a,t[1]=this.b,t[2]=this.c;for(let _=0;_<4;_++){let w=x[_],S=b[_];if(i.setFromPoints(S,t),w.isSeparated(i))return!1}for(let _=0;_<4;_++){let w=y[_];for(let S=0;S<4;S++){let A=b[S];if(a.crossVectors(w,A),i.setFromPoints(a,t),n.setFromPoints(a,r),i.isSeparated(n))return!1}}return f&&(p||console.warn("ExtendedTriangle.intersectsTriangle: Triangles are coplanar which does not support an output edge. Setting edge to 0, 0, 0."),f.start.set(0,0,0),f.end.set(0,0,0)),!0}else{let g=this.points,y=!1,x=0;for(let P=0;P<3;P++){let C=g[P],D=g[(P+1)%3];u.start.copy(C),u.end.copy(D),u.delta(o);let I=y?c.start:c.end,O=ag(m.distanceToPoint(C));if(ag(m.normal.dot(o))&&O){c.copy(u),x=2;break}if((m.intersectLine(u,I)||O)&&!ag(I.distanceTo(D))){if(x++,y)break;y=!0}}if(x===1&&d.containsPoint(c.end))return f&&(f.start.copy(c.end),f.end.copy(c.end)),!0;if(x!==2)return!1;let b=d.points,_=!1,w=0;for(let P=0;P<3;P++){let C=b[P],D=b[(P+1)%3];u.start.copy(C),u.end.copy(D),u.delta(s);let I=_?h.start:h.end,O=ag(v.distanceToPoint(C));if(ag(v.normal.dot(s))&&O){h.copy(u),w=2;break}if((v.intersectLine(u,I)||O)&&!ag(I.distanceTo(D))){if(w++,_)break;_=!0}}if(w===1&&this.containsPoint(h.end))return f&&(f.start.copy(h.end),f.end.copy(h.end)),!0;if(w!==2)return!1;if(c.delta(o),h.delta(s),o.dot(s)<0){let P=h.start;h.start=h.end,h.end=P}let S=c.start.dot(o),A=c.end.dot(o),M=h.start.dot(o),E=h.end.dot(o),T=A<M,L=S<E;return S!==E&&M!==A&&T===L?!1:(f&&(l.subVectors(c.start,h.start),l.dot(o)>0?f.start.copy(c.start):f.start.copy(h.start),l.subVectors(c.end,h.end),l.dot(o)<0?f.end.copy(c.end):f.end.copy(h.end)),!0)}}}();Id.prototype.distanceToPoint=function(){let e=new U;return function(t){return this.closestPointToPoint(t,e),t.distanceTo(e)}}();Id.prototype.distanceToTriangle=function(){let e=new U,t=new U,r=["a","b","c"],i=new Ll,n=new Ll;return function(a,o=null,s=null){let l=o||s?i:null;if(this.intersectsTriangle(a,l))return(o||s)&&(o&&l.getCenter(o),s&&l.getCenter(s)),0;let u=1/0;for(let c=0;c<3;c++){let h,d=r[c],f=a[d];this.closestPointToPoint(f,e),h=f.distanceToSquared(e),h<u&&(u=h,o&&o.copy(e),s&&s.copy(f));let p=this[d];a.closestPointToPoint(p,e),h=p.distanceToSquared(e),h<u&&(u=h,o&&o.copy(p),s&&s.copy(e))}for(let c=0;c<3;c++){let h=r[c],d=r[(c+1)%3];i.set(this[h],this[d]);for(let f=0;f<3;f++){let p=r[f],v=r[(f+1)%3];n.set(a[p],a[v]),Uz(i,n,e,t);let m=e.distanceToSquared(t);m<u&&(u=m,o&&o.copy(e),s&&s.copy(t))}}return Math.sqrt(u)}}();var ah=class{constructor(e,t,r){this.isOrientedBox=!0,this.min=new U,this.max=new U,this.matrix=new Ke,this.invMatrix=new Ke,this.points=new Array(8).fill().map(()=>new U),this.satAxes=new Array(3).fill().map(()=>new U),this.satBounds=new Array(3).fill().map(()=>new Dd),this.alignedSatBounds=new Array(3).fill().map(()=>new Dd),this.needsUpdate=!1,e&&this.min.copy(e),t&&this.max.copy(t),r&&this.matrix.copy(r)}set(e,t,r){this.min.copy(e),this.max.copy(t),this.matrix.copy(r),this.needsUpdate=!0}copy(e){this.min.copy(e.min),this.max.copy(e.max),this.matrix.copy(e.matrix),this.needsUpdate=!0}};ah.prototype.update=function(){return function(){let e=this.matrix,t=this.min,r=this.max,i=this.points;for(let l=0;l<=1;l++)for(let u=0;u<=1;u++)for(let c=0;c<=1;c++){let h=1*l|2*u|4*c,d=i[h];d.x=l?r.x:t.x,d.y=u?r.y:t.y,d.z=c?r.z:t.z,d.applyMatrix4(e)}let n=this.satBounds,a=this.satAxes,o=i[0];for(let l=0;l<3;l++){let u=a[l],c=n[l],h=1<<l,d=i[h];u.subVectors(o,d),c.setFromPoints(u,i)}let s=this.alignedSatBounds;s[0].setFromPointsField(i,"x"),s[1].setFromPointsField(i,"y"),s[2].setFromPointsField(i,"z"),this.invMatrix.copy(this.matrix).invert(),this.needsUpdate=!1}}();ah.prototype.intersectsBox=function(){let e=new Dd;return function(t){this.needsUpdate&&this.update();let r=t.min,i=t.max,n=this.satBounds,a=this.satAxes,o=this.alignedSatBounds;if(e.min=r.x,e.max=i.x,o[0].isSeparated(e)||(e.min=r.y,e.max=i.y,o[1].isSeparated(e))||(e.min=r.z,e.max=i.z,o[2].isSeparated(e)))return!1;for(let s=0;s<3;s++){let l=a[s],u=n[s];if(e.setFromBox(l,t),u.isSeparated(e))return!1}return!0}}();ah.prototype.intersectsTriangle=function(){let e=new Id,t=new Array(3),r=new Dd,i=new Dd,n=new U;return function(a){this.needsUpdate&&this.update(),a.isExtendedTriangle?a.needsUpdate&&a.update():(e.copy(a),e.update(),a=e);let o=this.satBounds,s=this.satAxes;t[0]=a.a,t[1]=a.b,t[2]=a.c;for(let h=0;h<3;h++){let d=o[h],f=s[h];if(r.setFromPoints(f,t),d.isSeparated(r))return!1}let l=a.satBounds,u=a.satAxes,c=this.points;for(let h=0;h<3;h++){let d=l[h],f=u[h];if(r.setFromPoints(f,c),d.isSeparated(r))return!1}for(let h=0;h<3;h++){let d=s[h];for(let f=0;f<4;f++){let p=u[f];if(n.crossVectors(d,p),r.setFromPoints(n,t),i.setFromPoints(n,c),r.isSeparated(i))return!1}}return!0}}();ah.prototype.closestPointToPoint=function(){return function(e,t){return this.needsUpdate&&this.update(),t.copy(e).applyMatrix4(this.invMatrix).clamp(this.min,this.max).applyMatrix4(this.matrix),t}}();ah.prototype.distanceToPoint=function(){let e=new U;return function(t){return this.closestPointToPoint(t,e),t.distanceTo(e)}}();ah.prototype.distanceToBox=function(){let e=["x","y","z"],t=new Array(12).fill().map(()=>new Ll),r=new Array(12).fill().map(()=>new Ll),i=new U,n=new U;return function(a,o=0,s=null,l=null){if(this.needsUpdate&&this.update(),this.intersectsBox(a))return(s||l)&&(a.getCenter(n),this.closestPointToPoint(n,i),a.closestPointToPoint(i,n),s&&s.copy(i),l&&l.copy(n)),0;let u=o*o,c=a.min,h=a.max,d=this.points,f=1/0;for(let v=0;v<8;v++){let m=d[v];n.copy(m).clamp(c,h);let g=m.distanceToSquared(n);if(g<f&&(f=g,s&&s.copy(m),l&&l.copy(n),g<u))return Math.sqrt(g)}let p=0;for(let v=0;v<3;v++)for(let m=0;m<=1;m++)for(let g=0;g<=1;g++){let y=(v+1)%3,x=(v+2)%3,b=m<<y|g<<x,_=1<<v|m<<y|g<<x,w=d[b],S=d[_];t[p].set(w,S);let A=e[v],M=e[y],E=e[x],T=r[p],L=T.start,P=T.end;L[A]=c[A],L[M]=m?c[M]:h[M],L[E]=g?c[E]:h[M],P[A]=h[A],P[M]=m?c[M]:h[M],P[E]=g?c[E]:h[M],p++}for(let v=0;v<=1;v++)for(let m=0;m<=1;m++)for(let g=0;g<=1;g++){n.x=v?h.x:c.x,n.y=m?h.y:c.y,n.z=g?h.z:c.z,this.closestPointToPoint(n,i);let y=n.distanceToSquared(i);if(y<f&&(f=y,s&&s.copy(i),l&&l.copy(n),y<u))return Math.sqrt(y)}for(let v=0;v<12;v++){let m=t[v];for(let g=0;g<12;g++){let y=r[g];Uz(m,y,i,n);let x=i.distanceToSquared(n);if(x<f&&(f=x,s&&s.copy(i),l&&l.copy(n),x<u))return Math.sqrt(x)}}return Math.sqrt(f)}}();var og=new U,sg=new U,lg=new U,v5=new me,m5=new me,g5=new me,Vte=new U,Fte=new U,zte=new U,y5=new U;function Lwt(e,t,r,i,n,a){let o;return a===ba?o=e.intersectTriangle(i,r,t,!0,n):o=e.intersectTriangle(t,r,i,a!==go,n),o===null?null:{distance:e.origin.distanceTo(n),point:n.clone()}}function kwt(e,t,r,i,n,a,o,s,l){og.fromBufferAttribute(t,a),sg.fromBufferAttribute(t,o),lg.fromBufferAttribute(t,s);let u=Lwt(e,og,sg,lg,y5,l);if(u){i&&(v5.fromBufferAttribute(i,a),m5.fromBufferAttribute(i,o),g5.fromBufferAttribute(i,s),u.uv=za.getInterpolation(y5,og,sg,lg,v5,m5,g5,new me)),n&&(v5.fromBufferAttribute(n,a),m5.fromBufferAttribute(n,o),g5.fromBufferAttribute(n,s),u.uv1=za.getInterpolation(y5,og,sg,lg,v5,m5,g5,new me)),r&&(Vte.fromBufferAttribute(r,a),Fte.fromBufferAttribute(r,o),zte.fromBufferAttribute(r,s),u.normal=za.getInterpolation(y5,og,sg,lg,Vte,Fte,zte,new U),u.normal.dot(e.direction)>0&&u.normal.multiplyScalar(-1));let c={a,b:o,c:s,normal:new U,materialIndex:0};za.getNormal(og,sg,lg,c.normal),u.face=c,u.faceIndex=a}return u}function Yge(e,t,r,i,n){let a=i*3,o=e.index.getX(a),s=e.index.getX(a+1),l=e.index.getX(a+2),{position:u,normal:c,uv:h,uv1:d}=e.attributes,f=kwt(r,u,c,h,d,o,s,l,t);return f?(f.faceIndex=i,n&&n.push(f),f):null}function Rwt(e,t,r,i,n,a){for(let o=i,s=i+n;o<s;o++)Yge(e,t,r,o,a)}function Owt(e,t,r,i,n){let a=1/0,o=null;for(let s=i,l=i+n;s<l;s++){let u=Yge(e,t,r,s);u&&u.distance<a&&(o=u,a=u.distance)}return o}function bc(e,t,r,i){let n=e.a,a=e.b,o=e.c,s=t,l=t+1,u=t+2;r&&(s=r.getX(t),l=r.getX(t+1),u=r.getX(t+2)),n.x=i.getX(s),n.y=i.getY(s),n.z=i.getZ(s),a.x=i.getX(l),a.y=i.getY(l),a.z=i.getZ(l),o.x=i.getX(u),o.y=i.getY(u),o.z=i.getZ(u)}function Hte(e,t,r,i,n,a,o){let s=r.index,l=r.attributes.position;for(let u=e,c=t+e;u<c;u++)if(bc(o,u*3,s,l),o.needsUpdate=!0,i(o,u,n,a))return!0;return!1}var Xge=class{constructor(e){this._getNewPrimitive=e,this._primitives=[]}getPrimitive(){let e=this._primitives;return e.length===0?this._getNewPrimitive():e.pop()}releasePrimitive(e){this._primitives.push(e)}};function If(e,t){return t[e+15]===65535}function b1(e,t){return t[e+6]}function Yw(e,t){return t[e+14]}function Xw(e){return e+8}function Zw(e,t){return t[e+6]}function Bwt(e,t){return t[e+7]}var Kg=new Cn,A6=new U,Nwt=["x","y","z"];function pO(e,t,r,i,n){let a=e*2,o=n2,s=np,l=ap;if(If(a,s)){let u=b1(e,l),c=Yw(a,s);Rwt(t,r,i,u,c,n)}else{let u=Xw(e);S6(u,o,i,A6)&&pO(u,t,r,i,n);let c=Zw(e,l);S6(c,o,i,A6)&&pO(c,t,r,i,n)}}function vO(e,t,r,i){let n=e*2,a=n2,o=np,s=ap;if(If(n,o)){let l=b1(e,s),u=Yw(n,o);return Owt(t,r,i,l,u)}else{let l=Bwt(e,s),u=Nwt[l],c=i.direction[u]>=0,h,d;c?(h=Xw(e),d=Zw(e,s)):(h=Zw(e,s),d=Xw(e));let f=S6(h,a,i,A6)?vO(h,t,r,i):null;if(f){let v=f.point[u];if(c?v<=a[d+l]:v>=a[d+l+3])return f}let p=S6(d,a,i,A6)?vO(d,t,r,i):null;return f&&p?f.distance<=p.distance?f:p:f||p||null}}var Vwt=function(){let e,t,r=[],i=new Xge(()=>new Cn);return function(...a){e=i.getPrimitive(),t=i.getPrimitive(),r.push(e,t);let o=n(...a);i.releasePrimitive(e),i.releasePrimitive(t),r.pop(),r.pop();let s=r.length;return s>0&&(t=r[s-1],e=r[s-2]),o};function n(a,o,s,l,u=null,c=0,h=0){function d(y){let x=y*2,b=np,_=ap;for(;!If(x,b);)y=Xw(y),x=y*2;return b1(y,_)}function f(y){let x=y*2,b=np,_=ap;for(;!If(x,b);)y=Zw(y,_),x=y*2;return b1(y,_)+Yw(x,b)}let p=a*2,v=n2,m=np,g=ap;if(If(p,m)){let y=b1(a,g),x=Yw(p,m);return Tc(a,v,e),l(y,x,!1,h,c+a,e)}else{let y=Xw(a),x=Zw(a,g),b=y,_=x,w,S,A,M;if(u&&(A=e,M=t,Tc(b,v,A),Tc(_,v,M),w=u(A),S=u(M),S<w)){b=x,_=y;let I=w;w=S,S=I,A=M}A||(A=e,Tc(b,v,A));let E=If(b*2,m),T=s(A,E,w,h+1,c+b),L;if(T===2){let I=d(b),O=f(b)-I;L=l(I,O,!0,h+1,c+b,A)}else L=T&&n(b,o,s,l,u,c,h+1);if(L)return!0;M=t,Tc(_,v,M);let P=If(_*2,m),C=s(M,P,S,h+1,c+_),D;if(C===2){let I=d(_),O=f(_)-I;D=l(I,O,!0,h+1,c+_,M)}else D=C&&n(_,o,s,l,u,c,h+1);return!!D}}}(),Fwt=function(){let e=new Id,t=new Id,r=new Ke,i=new ah,n=new ah;return function a(o,s,l,u,c=null){let h=o*2,d=n2,f=np,p=ap;if(c===null&&(l.boundingBox||l.computeBoundingBox(),i.set(l.boundingBox.min,l.boundingBox.max,u),c=i),If(h,f)){let v=s,m=v.index,g=v.attributes.position,y=l.index,x=l.attributes.position,b=b1(o,p),_=Yw(h,f);if(r.copy(u).invert(),l.boundsTree)return Tc(o,d,n),n.matrix.copy(r),n.needsUpdate=!0,l.boundsTree.shapecast({intersectsBounds:w=>n.intersectsBox(w),intersectsTriangle:w=>{w.a.applyMatrix4(u),w.b.applyMatrix4(u),w.c.applyMatrix4(u),w.needsUpdate=!0;for(let S=b*3,A=(_+b)*3;S<A;S+=3)if(bc(t,S,m,g),t.needsUpdate=!0,w.intersectsTriangle(t))return!0;return!1}});for(let w=b*3,S=_+b*3;w<S;w+=3){bc(e,w,m,g),e.a.applyMatrix4(r),e.b.applyMatrix4(r),e.c.applyMatrix4(r),e.needsUpdate=!0;for(let A=0,M=y.count;A<M;A+=3)if(bc(t,A,y,x),t.needsUpdate=!0,e.intersectsTriangle(t))return!0}}else{let v=o+8,m=p[o+6];return Tc(v,d,Kg),!!(c.intersectsBox(Kg)&&a(v,s,l,u,c)||(Tc(m,d,Kg),c.intersectsBox(Kg)&&a(m,s,l,u,c)))}}}();function S6(e,t,r,i){return Tc(e,t,Kg),r.intersectBox(Kg,i)}var mO=[],qA,n2,np,ap;function jx(e){qA&&mO.push(qA),qA=e,n2=new Float32Array(e),np=new Uint16Array(e),ap=new Uint32Array(e)}function x5(){qA=null,n2=null,np=null,ap=null,mO.length&&jx(mO.pop())}var jP=Symbol("skip tree generation"),WP=new Cn,qP=new Cn,ug=new Ke,p0=new ah,cx=new ah,hx=new U,b5=new U,zwt=new U,Hwt=new U,Uwt=new U,Ute=new Cn,Ju=new Xge(()=>new Id),Ib=class{static serialize(e,t={}){if(t.isBufferGeometry)return console.warn("MeshBVH.serialize: The arguments for the function have changed. See documentation for new signature."),Ib.serialize(arguments[0],{cloneBuffers:arguments[2]===void 0?!0:arguments[2]});t={cloneBuffers:!0,...t};let r=e.geometry,i=e._roots,n=r.getIndex(),a;return t.cloneBuffers?a={roots:i.map(o=>o.slice()),index:n.array.slice()}:a={roots:i,index:n.array},a}static deserialize(e,t,r={}){if(typeof r=="boolean")return console.warn("MeshBVH.deserialize: The arguments for the function have changed. See documentation for new signature."),Ib.deserialize(arguments[0],arguments[1],{setIndex:arguments[2]===void 0?!0:arguments[2]});r={setIndex:!0,...r};let{index:i,roots:n}=e,a=new Ib(t,{...r,[jP]:!0});if(a._roots=n,r.setIndex){let o=t.getIndex();if(o===null){let s=new Zt(e.index,1,!1);t.setIndex(s)}else o.array!==i&&(o.array.set(i),o.needsUpdate=!0)}return a}constructor(e,t={}){if(e.isBufferGeometry){if(e.index&&e.index.isInterleavedBufferAttribute)throw new Error("MeshBVH: InterleavedBufferAttribute is not supported for the index attribute.")}else throw new Error("MeshBVH: Only BufferGeometries are supported.");if(t=Object.assign({strategy:0,maxDepth:40,maxLeafTris:10,verbose:!0,useSharedArrayBuffer:!1,setBoundingBox:!0,onProgress:null,[jP]:!1},t),t.useSharedArrayBuffer&&typeof SharedArrayBuffer>"u")throw new Error("MeshBVH: SharedArrayBuffer is not available.");this._roots=null,t[jP]||(this._roots=Twt(e,t),!e.boundingBox&&t.setBoundingBox&&(e.boundingBox=this.getBoundingBox(new Cn))),this.geometry=e}refit(e=null){e&&Array.isArray(e)&&(e=new Set(e));let t=this.geometry,r=t.index.array,i=t.attributes.position,n,a,o,s,l=0,u=this._roots;for(let h=0,d=u.length;h<d;h++)n=u[h],a=new Uint32Array(n),o=new Uint16Array(n),s=new Float32Array(n),c(0,l),l+=n.byteLength;function c(h,d,f=!1){let p=h*2;if(o[p+15]===65535){let v=a[h+6],m=o[p+14],g=1/0,y=1/0,x=1/0,b=-1/0,_=-1/0,w=-1/0;for(let S=3*v,A=3*(v+m);S<A;S++){let M=r[S],E=i.getX(M),T=i.getY(M),L=i.getZ(M);E<g&&(g=E),E>b&&(b=E),T<y&&(y=T),T>_&&(_=T),L<x&&(x=L),L>w&&(w=L)}return s[h+0]!==g||s[h+1]!==y||s[h+2]!==x||s[h+3]!==b||s[h+4]!==_||s[h+5]!==w?(s[h+0]=g,s[h+1]=y,s[h+2]=x,s[h+3]=b,s[h+4]=_,s[h+5]=w,!0):!1}else{let v=h+8,m=a[h+6],g=v+d,y=m+d,x=f,b=!1,_=!1;e?x||(b=e.has(g),_=e.has(y),x=!b&&!_):(b=!0,_=!0);let w=x||b,S=x||_,A=!1;w&&(A=c(v,d,x));let M=!1;S&&(M=c(m,d,x));let E=A||M;if(E)for(let T=0;T<3;T++){let L=v+T,P=m+T,C=s[L],D=s[L+3],I=s[P],O=s[P+3];s[h+T]=C<I?C:I,s[h+T+3]=D>O?D:O}return E}}}traverse(e,t=0){let r=this._roots[t],i=new Uint32Array(r),n=new Uint16Array(r);a(0);function a(o,s=0){let l=o*2,u=n[l+15]===65535;if(u){let c=i[o+6],h=n[l+14];e(s,u,new Float32Array(r,o*4,6),c,h)}else{let c=o+8,h=i[o+6],d=i[o+7];e(s,u,new Float32Array(r,o*4,6),d)||(a(c,s+1),a(h,s+1))}}}raycast(e,t=Lu){let r=this._roots,i=this.geometry,n=[],a=t.isMaterial,o=Array.isArray(t),s=i.groups,l=a?t.side:t;for(let u=0,c=r.length;u<c;u++){let h=o?t[s[u].materialIndex].side:l,d=n.length;if(jx(r[u]),pO(0,i,h,e,n),x5(),o){let f=s[u].materialIndex;for(let p=d,v=n.length;p<v;p++)n[p].face.materialIndex=f}}return n}raycastFirst(e,t=Lu){let r=this._roots,i=this.geometry,n=t.isMaterial,a=Array.isArray(t),o=null,s=i.groups,l=n?t.side:t;for(let u=0,c=r.length;u<c;u++){let h=a?t[s[u].materialIndex].side:l;jx(r[u]);let d=vO(0,i,h,e);x5(),d!=null&&(o==null||d.distance<o.distance)&&(o=d,a&&(d.face.materialIndex=s[u].materialIndex))}return o}intersectsGeometry(e,t){let r=this.geometry,i=!1;for(let n of this._roots)if(jx(n),i=Fwt(0,r,e,t),x5(),i)break;return i}shapecast(e,t,r){let i=this.geometry;if(e instanceof Function){if(t){let h=t;t=(d,f,p,v)=>{let m=f*3;return h(d,m,m+1,m+2,p,v)}}e={boundsTraverseOrder:r,intersectsBounds:e,intersectsTriangle:t,intersectsRange:null},console.warn("MeshBVH: Shapecast function signature has changed and now takes an object of callbacks as a second argument. See docs for new signature.")}let n=Ju.getPrimitive(),{boundsTraverseOrder:a,intersectsBounds:o,intersectsRange:s,intersectsTriangle:l}=e;if(s&&l){let h=s;s=(d,f,p,v,m)=>h(d,f,p,v,m)?!0:Hte(d,f,i,l,p,v,n)}else s||(l?s=(h,d,f,p)=>Hte(h,d,i,l,f,p,n):s=(h,d,f)=>f);let u=!1,c=0;for(let h of this._roots){if(jx(h),u=Vwt(0,i,o,s,a,c),x5(),u)break;c+=h.byteLength}return Ju.releasePrimitive(n),u}bvhcast(e,t,r){let{intersectsRanges:i,intersectsTriangles:n}=r,a=this.geometry.index,o=this.geometry.attributes.position,s=e.geometry.index,l=e.geometry.attributes.position;ug.copy(t).invert();let u=Ju.getPrimitive(),c=Ju.getPrimitive();if(n){let d=function(f,p,v,m,g,y,x,b){for(let _=v,w=v+m;_<w;_++){bc(c,_*3,s,l),c.a.applyMatrix4(t),c.b.applyMatrix4(t),c.c.applyMatrix4(t),c.needsUpdate=!0;for(let S=f,A=f+p;S<A;S++)if(bc(u,S*3,a,o),u.needsUpdate=!0,n(u,c,S,_,g,y,x,b))return!0}return!1};if(i){let f=i;i=function(p,v,m,g,y,x,b,_){return f(p,v,m,g,y,x,b,_)?!0:d(p,v,m,g,y,x,b,_)}}else i=d}e.getBoundingBox(qP),qP.applyMatrix4(t);let h=this.shapecast({intersectsBounds:d=>qP.intersectsBox(d),intersectsRange:(d,f,p,v,m,g)=>(WP.copy(g),WP.applyMatrix4(ug),e.shapecast({intersectsBounds:y=>WP.intersectsBox(y),intersectsRange:(y,x,b,_,w)=>i(d,f,y,x,v,m,_,w)}))});return Ju.releasePrimitive(u),Ju.releasePrimitive(c),h}intersectsBox(e,t){return p0.set(e.min,e.max,t),p0.needsUpdate=!0,this.shapecast({intersectsBounds:r=>p0.intersectsBox(r),intersectsTriangle:r=>p0.intersectsTriangle(r)})}intersectsSphere(e){return this.shapecast({intersectsBounds:t=>e.intersectsBox(t),intersectsTriangle:t=>t.intersectsSphere(e)})}closestPointToGeometry(e,t,r={},i={},n=0,a=1/0){e.boundingBox||e.computeBoundingBox(),p0.set(e.boundingBox.min,e.boundingBox.max,t),p0.needsUpdate=!0;let o=this.geometry,s=o.attributes.position,l=o.index,u=e.attributes.position,c=e.index,h=Ju.getPrimitive(),d=Ju.getPrimitive(),f=b5,p=zwt,v=null,m=null;i&&(v=Hwt,m=Uwt);let g=1/0,y=null,x=null;return ug.copy(t).invert(),cx.matrix.copy(ug),this.shapecast({boundsTraverseOrder:b=>p0.distanceToBox(b),intersectsBounds:(b,_,w)=>w<g&&w<a?(_&&(cx.min.copy(b.min),cx.max.copy(b.max),cx.needsUpdate=!0),!0):!1,intersectsRange:(b,_)=>{if(e.boundsTree)return e.boundsTree.shapecast({boundsTraverseOrder:w=>cx.distanceToBox(w),intersectsBounds:(w,S,A)=>A<g&&A<a,intersectsRange:(w,S)=>{for(let A=w*3,M=(w+S)*3;A<M;A+=3){bc(d,A,c,u),d.a.applyMatrix4(t),d.b.applyMatrix4(t),d.c.applyMatrix4(t),d.needsUpdate=!0;for(let E=b*3,T=(b+_)*3;E<T;E+=3){bc(h,E,l,s),h.needsUpdate=!0;let L=h.distanceToTriangle(d,f,v);if(L<g&&(p.copy(f),m&&m.copy(v),g=L,y=E/3,x=A/3),L<n)return!0}}}});{let w=c?c.count:u.count;for(let S=0,A=w;S<A;S+=3){bc(d,S,c,u),d.a.applyMatrix4(t),d.b.applyMatrix4(t),d.c.applyMatrix4(t),d.needsUpdate=!0;for(let M=b*3,E=(b+_)*3;M<E;M+=3){bc(h,M,l,s),h.needsUpdate=!0;let T=h.distanceToTriangle(d,f,v);if(T<g&&(p.copy(f),m&&m.copy(v),g=T,y=M/3,x=S/3),T<n)return!0}}}}}),Ju.releasePrimitive(h),Ju.releasePrimitive(d),g===1/0?null:(r.point?r.point.copy(p):r.point=p.clone(),r.distance=g,r.faceIndex=y,i&&(i.point?i.point.copy(m):i.point=m.clone(),i.point.applyMatrix4(ug),p.applyMatrix4(ug),i.distance=p.sub(i.point).length(),i.faceIndex=x),r)}closestPointToPoint(e,t={},r=0,i=1/0){let n=r*r,a=i*i,o=1/0,s=null;if(this.shapecast({boundsTraverseOrder:u=>(hx.copy(e).clamp(u.min,u.max),hx.distanceToSquared(e)),intersectsBounds:(u,c,h)=>h<o&&h<a,intersectsTriangle:(u,c)=>{u.closestPointToPoint(e,hx);let h=e.distanceToSquared(hx);return h<o&&(b5.copy(hx),o=h,s=c),h<n}}),o===1/0)return null;let l=Math.sqrt(o);return t.point?t.point.copy(b5):t.point=b5.clone(),t.distance=l,t.faceIndex=s,t}getBoundingBox(e){return e.makeEmpty(),this._roots.forEach(t=>{Tc(0,new Float32Array(t),Ute),e.union(Ute)}),e}},gO=Dp(Hot()),Gwt=.5*(Math.sqrt(3)-1),dx=(3-Math.sqrt(3))/6,jwt=1/3,$u=1/6,Lb=e=>Math.floor(e)|0,Gte=new Float64Array([1,1,-1,1,1,-1,-1,-1,1,0,-1,0,1,0,-1,0,0,1,0,-1,0,1,0,-1]),YP=new Float64Array([1,1,0,-1,1,0,1,-1,0,-1,-1,0,1,0,1,-1,0,1,1,0,-1,-1,0,-1,0,1,1,0,-1,1,0,1,-1,0,-1,-1]);function Wwt(e=Math.random){let t=Zge(e),r=new Float64Array(t).map(n=>Gte[n%12*2]),i=new Float64Array(t).map(n=>Gte[n%12*2+1]);return function(n,a){let o=0,s=0,l=0,u=(n+a)*Gwt,c=Lb(n+u),h=Lb(a+u),d=(c+h)*dx,f=c-d,p=h-d,v=n-f,m=a-p,g,y;v>m?(g=1,y=0):(g=0,y=1);let x=v-g+dx,b=m-y+dx,_=v-1+2*dx,w=m-1+2*dx,S=c&255,A=h&255,M=.5-v*v-m*m;if(M>=0){let L=S+t[A],P=r[L],C=i[L];M*=M,o=M*M*(P*v+C*m)}let E=.5-x*x-b*b;if(E>=0){let L=S+g+t[A+y],P=r[L],C=i[L];E*=E,s=E*E*(P*x+C*b)}let T=.5-_*_-w*w;if(T>=0){let L=S+1+t[A+1],P=r[L],C=i[L];T*=T,l=T*T*(P*_+C*w)}return 70*(o+s+l)}}function qwt(e=Math.random){let t=Zge(e),r=new Float64Array(t).map(a=>YP[a%12*3]),i=new Float64Array(t).map(a=>YP[a%12*3+1]),n=new Float64Array(t).map(a=>YP[a%12*3+2]);return function(a,o,s){let l,u,c,h,d=(a+o+s)*jwt,f=Lb(a+d),p=Lb(o+d),v=Lb(s+d),m=(f+p+v)*$u,g=f-m,y=p-m,x=v-m,b=a-g,_=o-y,w=s-x,S,A,M,E,T,L;b>=_?_>=w?(S=1,A=0,M=0,E=1,T=1,L=0):b>=w?(S=1,A=0,M=0,E=1,T=0,L=1):(S=0,A=0,M=1,E=1,T=0,L=1):_<w?(S=0,A=0,M=1,E=0,T=1,L=1):b<w?(S=0,A=1,M=0,E=0,T=1,L=1):(S=0,A=1,M=0,E=1,T=1,L=0);let P=b-S+$u,C=_-A+$u,D=w-M+$u,I=b-E+2*$u,O=_-T+2*$u,R=w-L+2*$u,H=b-1+3*$u,j=_-1+3*$u,N=w-1+3*$u,k=f&255,G=p&255,Y=v&255,F=.6-b*b-_*_-w*w;if(F<0)l=0;else{let ae=k+t[G+t[Y]];F*=F,l=F*F*(r[ae]*b+i[ae]*_+n[ae]*w)}let Z=.6-P*P-C*C-D*D;if(Z<0)u=0;else{let ae=k+S+t[G+A+t[Y+M]];Z*=Z,u=Z*Z*(r[ae]*P+i[ae]*C+n[ae]*D)}let ne=.6-I*I-O*O-R*R;if(ne<0)c=0;else{let ae=k+E+t[G+T+t[Y+L]];ne*=ne,c=ne*ne*(r[ae]*I+i[ae]*O+n[ae]*R)}let re=.6-H*H-j*j-N*N;if(re<0)h=0;else{let ae=k+1+t[G+1+t[Y+1]];re*=re,h=re*re*(r[ae]*H+i[ae]*j+n[ae]*N)}return 32*(l+u+c+h)}}function Zge(e){let t=new Uint8Array(512);for(let r=0;r<512/2;r++)t[r]=r;for(let r=0;r<512/2-1;r++){let i=r+~~(e()*(256-r)),n=t[r];t[r]=t[i],t[i]=n}for(let r=256;r<512;r++)t[r]=t[r-256];return t}var Kl=new za,Ywt=class{constructor(e){this.weightAttribute=null;let t=e.geometry;if(!t.isBufferGeometry||t.attributes.position.itemSize!==3)throw new Error("THREE.MeshSurfaceSampler: Requires BufferGeometry triangle mesh.");t.index&&(t=t.toNonIndexed()),this.geometry=t,this.randomFunction=Math.random,this.positionAttribute=this.geometry.getAttribute("position"),this.distribution=null}build(){let e=this.positionAttribute,t=new Float32Array(e.count/3);for(let i=0;i<e.count;i+=3){let n=1;Kl.a.fromBufferAttribute(e,i),Kl.b.fromBufferAttribute(e,i+1),Kl.c.fromBufferAttribute(e,i+2),n*=Kl.getArea(),t[i/3]=n}this.distribution=new Float32Array(e.count/3);let r=0;for(let i=0;i<t.length;i++)r+=t[i],this.distribution[i]=r;return this}setRandomGenerator(e){return this.randomFunction=e,this}sample(e,t){if(this.distribution){let r=this.distribution[this.distribution.length-1],i=this.binarySearch(this.randomFunction()*r);return this.sampleFace(i,e,t)}}binarySearch(e){if(!this.distribution)return 0;let t=this.distribution,r=0,i=t.length-1,n=-1;for(;r<=i;){let a=Math.ceil((r+i)/2);if(a===0||t[a-1]<=e&&t[a]>e){n=a;break}else e<t[a]?i=a-1:r=a+1}return n}sampleFace(e,t,r){let i=this.randomFunction(),n=this.randomFunction();return i+n>1&&(i=1-i,n=1-n),Kl.a.fromBufferAttribute(this.positionAttribute,e*3),Kl.b.fromBufferAttribute(this.positionAttribute,e*3+1),Kl.c.fromBufferAttribute(this.positionAttribute,e*3+2),t.set(0,0,0).addScaledVector(Kl.a,i).addScaledVector(Kl.b,n).addScaledVector(Kl.c,1-(i+n)),Kl.getNormal(r),this}},Xwt=Dp(Pve()),Zwt=new Ke,Qwt=new Ke,Kwt=new Ke,Qw;(e=>{function t(r){return r&&r.__isSPEObject}e.is=t})(Qw||(Qw={}));var Gz=e=>class extends e{constructor(){super(...arguments),this.previousModelViewMatrix=new Ke,this.copyPreviousMatrix=!0,this.hiddenMatrix=new Ke,this.matrixWorldRigid=new Ke,this.shearScale=new Ke,this.shearScaleInv=new Ke}get __isSPEObject(){return!0}isDescendantOf(t){t instanceof _i&&(t=t.uuid);let r=this;for(;r.parent;){if(r.parent.uuid===t)return!0;r=r.parent}return!1}updateMatrixWorld(t){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||t)&&(this.parent===null?this.matrixWorld.multiplyMatrices(this.hiddenMatrix,this.matrix):(this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.hiddenMatrix),this.matrixWorld.multiplyMatrices(this.matrixWorld,this.matrix)),this.matrixWorldNeedsUpdate=!1,t=!0);for(let r of this.children)r.updateMatrixWorld(t)}updateWorldMatrix(t,r){let i=this.parent;if(t&&i!==null&&i.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),this.parent===null?this.matrixWorld.multiplyMatrices(this.hiddenMatrix,this.matrix):(this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.hiddenMatrix),this.matrixWorld.multiplyMatrices(this.matrixWorld,this.matrix)),r)for(let n of this.children)n.updateWorldMatrix(!1,!0)}traverseChildren(t,r=0){for(let i of this.children)Qw.is(i)&&i.traverseObject(t,r+1)}traverseObject(t,r=0){if(t(this,r)!==!0)for(let i of this.children)Qw.is(i)&&i.traverseObject(t,r+1)}updateMatrixWorldSVD(){let t=this.matrixWorld.elements,r=[[t[0],t[4],t[8]],[t[1],t[5],t[9]],[t[2],t[6],t[10]]],{u:i,v:n,q:a}=(0,Xwt.SVD)(r),o=Zwt.set(i[0][0],i[0][1],i[0][2],0,i[1][0],i[1][1],i[1][2],0,i[2][0],i[2][1],i[2][2],0,0,0,0,1),s=Qwt.set(n[0][0],n[0][1],n[0][2],0,n[1][0],n[1][1],n[1][2],0,n[2][0],n[2][1],n[2][2],0,0,0,0,1),l=Kwt.copy(s).transpose();this.shearScale.makeScale(a[0],a[1],a[2]).multiply(l).premultiply(s),this.shearScaleInv.copy(this.shearScale).invert(),this.matrixWorldRigid.multiplyMatrices(o,l).copyPosition(this.matrixWorld),a.every(u=>Math.abs(a[0]-u)<.01)?this.hasNonUniformScale=!1:this.hasNonUniformScale=!0}attach(t,r){this.updateWorldMatrix(!0,!1);let i=new Ke().copy(this.matrixWorld).invert();return t.parent!==null&&(t.parent.updateWorldMatrix(!0,!1),i.multiply(t.parent.matrixWorld)),"hiddenMatrix"in t&&t.hiddenMatrix instanceof Ke?t.hiddenMatrix.premultiply(i):t.applyMatrix4(i),t.updateWorldMatrix(!1,!1),this.add(t),r!==void 0&&(this.children.pop(),this.children.splice(r,0,t)),this}copy(t,r=!1){return super.copy(t,r),this.hasNonUniformScale=t.hasNonUniformScale,this}onAfterRender(t,r,i,n,a,o){this.copyPreviousMatrix&&this.previousModelViewMatrix.copy(this.modelViewMatrix)}},Jwt=class extends Gz(_i){},$wt=e=>e.type==="Mesh",yo=class extends Jwt{constructor(e){super(),this.object=e,this.matrixAutoUpdate=!1,this.hasNonUniformScale=e.hasNonUniformScale}raycast(e,t){}expand(){let e=0,t=this.object.entityChildren(e);for(;t;){let r=this.children[e];(r==null?void 0:r.object)!==t&&(r&&this.remove(r),r=new yo(t),this.add(r),this.children.splice(e,0,this.children.pop()),r.matrixWorldNeedsUpdate=!0,r.matrixAutoUpdate=!1,r.matrix=t.matrix,r.hiddenMatrix=t.hiddenMatrix),r.expand(),e+=1,t=this.object.entityChildren(e)}for(;this.children.length>e;)this.remove(this.children[e])}get visible(){var e;return this.playModeVisible!==void 0?this.playModeVisible:this.object.visible||this.object.dataPatched.visible&&((e=this.object.dataPatched.cloner)==null?void 0:e.hideBase)===!0}set visible(e){}get castShadow(){return this.object.castShadow}set castShadow(e){}get receiveShadow(){return this.object.receiveShadow}set receiveShadow(e){}get isMesh(){return $wt(this.object)}get isLight(){return this.object.isLight}get layers(){return this.object.layers}set layers(e){}get isCamera(){return!1}get geometry(){if(this.object.geometry)return this.object.geometry}get material(){if(this.object.material)return this.object.material}},N0=new U,V0=new U,w1=new Ke,Qge=[new U(-1,1,1),new U(-1,-1,1),new U(1,-1,1),new U(1,1,1),new U(-1,1,-1),new U(-1,-1,-1),new U(1,-1,-1),new U(1,1,-1)],e4t=[[0,3],[1,2],[5,6],[4,7],[0,1],[3,2],[7,6],[4,5],[0,4],[1,5],[2,6],[3,7]],t4t=[[0,2],[7,5],[4,1],[3,6],[4,3],[1,6]],jte=(e,t,r)=>{e.updateEntityBoxSize(N0,V0),w1.copy(t).multiply(e.matrixWorld),V0.x===0&&V0.y===0&&V0.z===0?r.push(new U(N0.x,N0.y,N0.z).applyMatrix4(w1)):Qge.forEach(i=>{r.push(i.clone().multiply(V0).add(N0).applyMatrix4(w1))})},Wte=class extends Cn{constructor(){super(...arguments),this.matrix=new Ke,this.vertices=[],this.faces=[],this.edges=[],this.centerEdges=[]}copy(e){return super.copy(e),this.matrix.copy(e.matrix),this.vertices=e.vertices.map(t=>t.clone()),this.faces=e.faces.map(t=>t.clone()),this.edges=e.edges.map(t=>t.clone()),this.centerEdges=e.centerEdges.map(t=>t.clone()),this}setFromObjectSize(e,t=!1){e.updateWorldMatrix(!1,t),this.makeEmpty(),this.matrix.copy(e.matrixWorld);let r=new Ke().copy(e.matrixWorld).invert();return this.expandByObjectSize(e,r,t)}expandByObjectSize(e,t,r=!1){let i=[];return r===!0?e.traverseEntity(n=>{if(n.visible||n.cloner&&n.data.visible){if(!("geometry"in n)){i.push(new U);return}jte(n,t,i)}}):jte(e,t,i),this.setFromPoints(i)}getCenter(e){return e=super.getCenter(e),e.applyMatrix4(this.matrix),e}getPositionToCenter(e){return e=super.getCenter(e),e.applyMatrix4(w1.copy(this.matrix).setPosition(0,0,0)),e}computeVertices(){this.getSize(V0).multiplyScalar(.5),this.getCenter(N0),w1.copy(this.matrix).setPosition(N0),this.vertices=Qge.map(e=>e.clone().multiply(V0).applyMatrix4(w1))}computeEdges(){this.vertices.length>0&&this.computeVertices(),this.edges=e4t.map(([e,t])=>new Ll(this.vertices[e],this.vertices[t])),this.centerEdges=this.edges.map(e=>e.getCenter(new U))}computeFaces(){this.vertices.length>0&&this.computeVertices(),this.faces=t4t.map(([e,t])=>this.vertices[e].clone().add(this.vertices[t]).multiplyScalar(.5))}},Xf={Cloner:()=>{},changeEntityProptotype:()=>{},createEntity:()=>{}},r4t=class extends nme{constructor(){super()}getPoints(e=12){let t=[],r,i=this.getCurveLengths(),n=i[i.length-1]/i.length;for(let a=0,o=this.curves;a<o.length;a++){let s=o[a],l=a===0?i[a]:i[a]-i[a-1],u=Math.ceil(e*l/n),c=s.getPoints(u);for(let h=0;h<c.length;h++){let d=c[h];r&&r.equals(d)||(t.push(d),r=d)}}return this.autoClose&&t.length>1&&!t[t.length-1].equals(t[0])&&t.push(t[0]),t}},yO=.001;function xO(e,t,r){return t.clone().sub(e).cross(t.clone().sub(r)).length()<=yO}function XP(e,t){let r=new U(...e.position),i=new U(...e.controlNext.position),n=new U(...t.controlPrevious.position),a=new U(...t.position);return xO(r,i,a)&&xO(r,n,a)}function Kge(e){let t=e.points.map(c=>new U(...c.data.position)),r=[e.points[0]],i=new U(...r[0].data.position);for(let c=0;c<e.points.length-1;c++)xO(i,t[c],t[c+1])||(r.push(e.points[c]),i=t[c]);r.push(e.points[e.points.length-1]);let n=e.isClosed,a=r.length-(n?0:1),o=r.length,s=[];for(let c=0;c<o;c++){let h=r[c].data,d=new U(...h.position),f=new U(...h.controlPrevious.position),p=new U(...h.controlNext.position),v={position:d,baseRoundness:h.roundness,controlPrevious:f,controlNext:p};if(h.roundness===0||!e.isClosed&&(c===0||c===o-1)){s[c]={...v,removedLength:0};continue}let m=n&&c==0?o-1:c-1,g=n&&c==o-1?0:c+1,y=r[m].data,x=r[g].data,b=new U(...y.position),_=new U(...x.position),w=b.clone().sub(d).normalize(),S=_.clone().sub(d).normalize();Object.assign(v,{prevDir:w,nextDir:S});let A=XP(y,h),M=XP(h,x);if(!A||!M)s[c]={...v,removedLength:0};else{let E=w.clone().add(S).normalize(),T=E.clone().cross(w).length()/w.dot(E);s[c]={...v,tan:T,removedLength:h.roundness/T}}}for(let c=0;c<a;c++){let h=c,d=n&&c===o-1?0:c+1,f=s[h],p=s[d];if(f.removedLength!==0||p.removedLength!==0){let v=f.position.distanceTo(p.position);f.removedLength=Math.min(f.removedLength,v/2),p.removedLength=Math.min(p.removedLength,v/2)}}let l=[];for(let c=0;c<a;c++){let h=c,d=n&&c===o-1?0:c+1,f=s[h],p=s[d],v=null;if(!XP(r[h].data,r[d].data))f.position.distanceTo(p.position)>yO&&(v=new HA(f.position,f.controlNext,p.controlPrevious,p.position));else{let m=f.position.clone(),g=p.position.clone();(f.removedLength!==0||p.removedLength!==0)&&(f.nextDir&&m.add(f.nextDir.clone().setLength(f.removedLength)),p.prevDir&&g.add(p.prevDir.clone().setLength(p.removedLength))),m.distanceTo(g)>yO&&(v=new HA(m,m.clone().lerp(g,.3),g.clone().lerp(m,.3),g))}l[2*c+1]=v}for(let c=0;c<o;c++){let h=s[c];if(h.removedLength===0){l[2*c]=null;continue}let d=h.position,f=h.prevDir.clone().multiplyScalar(h.removedLength).add(d),p=h.nextDir.clone().multiplyScalar(h.removedLength).add(d),v=h.tan*h.removedLength,m=h.prevDir.clone().add(h.nextDir).normalize(),g=f.clone().lerp(p,.5),y=f.distanceTo(p)/2,x=m.clone().multiplyScalar(Math.sqrt(Math.pow(v,2)-Math.pow(y,2))).add(g),b=m.clone().multiplyScalar(-v).add(x),_=d.distanceTo(b)/d.distanceTo(g),w=h.prevDir.clone().multiplyScalar(_*d.distanceTo(f)).add(d),S=w.clone().lerp(b,2),A=f.clone().lerp(w,4/3),M=p.clone().lerp(S,4/3);l[2*c]=new HA(f,A,M,p)}let u=new r4t;return l.forEach(c=>{c&&u.add(c)}),u}var Gr;(e=>{function t(r){return r&&r.__isEntity}e.is=t})(Gr||(Gr={}));var Uh=e=>Gr.is(e),i4t={type:"completeState",isfromEntity:!0},n4t=["x","y","z"],ZP=new U,a4t=new U().set(0,1,0),jz=e=>class extends Gz(e){constructor(){super(...arguments),this.raycastLock=!1,this.scaleLock=!1,this.disposed=!1,this.stateSelection=null,this.destroyedInAction=!1,this.instances=[],this.prevState=null,this.currentState=null,this.reversibleToState=null,this.currentTransitionEvent=null,this.previousAction=null,this._singleBBox=new Wte,this._recursiveBBox=new Wte,this.singleBBoxNeedsUpdate=!0,this.recursiveBBoxNeedsUpdate=!0,this._needApplyPathSnapping=!0,this.attachedPaths=new Set}get __isEntity(){return!0}entityChildren(t){let r=this.children[t];if(Gr.is(r))return r}entityChildrenCount(){let t=this.children.length;for(;t--;)if(Gr.is(this.children[t]))return t+1;return 0}get isConcreteEntity(){return typeof this.identity=="string"}get isVirtualEntity(){return typeof this.identity!="string"}get isInstanceRoot(){return this.isConcreteEntity&&this.data.type==="Instance"}nearestInstanceSelfOrParent(){let t=this;for(;t.data.type!=="Instance";){let r=t.parent;if(Gr.is(r))t=r;else return}return t}forInstancesRec(t){this.instances.forEach(r=>{r.disposed||t(r),r.forInstancesRec(t)})}super_Entity(t,r){typeof t=="string"&&(this.uuid=t),this.identity=t,this.data=r,this.matrixAutoUpdate=!1,this.dataPatched=this.data}changeSelectedState(t,r,i=!1){if(!(this.data.states.length===0&&!i)){for(let n of this.data.states)ev.toOps(this.data,n.data).forEach(a=>{let o=i6.replaceProps(a,this.data);this.dataPatched=this.data,this.updateByPatchedOp(o,this.data,r)});if(t!==null){let n=this.data.states.data(t);n&&(this.dataPatched=ev.patch(this.data,n),ev.toOps(this.data,n).forEach(a=>{this.updateByPatchedOp(a,this.dataPatched,r)}))}i&&this.updateTransformState(this.dataPatched,r),this.stateSelection=t,this.updatePathSnapping(this.dataPatched.pathSnapping)}}get singleBBox(){return this.singleBBoxNeedsUpdate&&(this.singleBBoxNeedsUpdate=!1,this._singleBBox.setFromObjectSize(this,!1),this._singleBBox.computeVertices(),this._singleBBox.computeEdges(),this._singleBBox.computeFaces()),this._singleBBox}get recursiveBBox(){return this.recursiveBBoxNeedsUpdate&&(this.recursiveBBoxNeedsUpdate=!1,this._recursiveBBox.setFromObjectSize(this,!0),this._recursiveBBox.computeVertices(),this._recursiveBBox.computeEdges(),this._recursiveBBox.computeFaces()),this._recursiveBBox}updateEntityBoxSize(t,r){t.setScalar(0),r.setScalar(0)}resetBBoxNeedsUpdateSelf(){this.singleBBoxNeedsUpdate=!0,this.recursiveBBoxNeedsUpdate=!0}resetBBoxNeedsUpdate(){this.resetBBoxNeedsUpdateSelf(),this.traverseAncestors(t=>{Uh(t)&&t.resetBBoxNeedsUpdateSelf()}),this.traverseEntity(t=>{t.resetBBoxNeedsUpdateSelf()})}find(t){let r;return this.traverseEntity(i=>{i.uuid===t&&(r=i)}),r}traverseSortNextHelper(){let t=this.parent;if(t){let r=t.children,i=r.indexOf(this)+1;if(Gr.is(r[i]))return r[i];if(Gr.is(t))return t.traverseSortNextHelper()}}sortNext(){let t=this.children;return this.children.length>0&&Gr.is(this.children[0])?t[0]:this.traverseSortNextHelper()}goUp(t){let r=this;for(;t>0&&r!==null;)r=r.parent,t-=1;return r}hasAnccestorOrSelf(t){return this===t||this.hasAnccestor(t)}hasAnccestor(t){let r=this.parent;for(;r;){if(t===r)return!0;r=r.parent}return!1}countToAccestor(t){let r=0,i=this;for(;i!==t;){if(i===null)return-1;i=i.parent,r+=1}return r}forEachEntity(t){for(let r of this.children)Uh(r)&&t(r)}traverseEntityAncestors(t){this.traverseAncestors(r=>{Gr.is(r)&&t(r)})}traverseConcreteEntity(t,r=0){if(t(this,r)!==!0)for(let i of this.children)Uh(i)&&i.isConcreteEntity&&i.traverseEntity(t,r+1)}traverseEntity(t,r=0){if(t(this,r)!==!0)for(let i of this.children)Uh(i)&&i.traverseEntity(t,r+1)}traverseVisibleEntity(t){t(this);for(let r of this.children)Uh(r)&&r.visible&&r.traverseVisibleEntity(t)}updateMatrix(){super.updateMatrix(),this.cloner&&this.cloner.onObjUpdateMatrix(),this.dispatchEvent({type:"updateMatrix"})}updateMatrixWorld(t){super.updateMatrixWorld(t),this.dispatchEvent({type:"updateMatrixWorld"})}copy(t,r=!1){return super.copy(t,r),this.dataPatched=t.dataPatched,this.raycastLock=t.raycastLock,this.scaleLock=t.scaleLock,this.hiddenMatrix.copy(t.hiddenMatrix),this}hasEntityChild(){return this.children.some(t=>Uh(t))}isAncestorOf(t){if(this.uuid===t)return!1;let r=!1;return this.traverseEntity(i=>{i.uuid===t&&(r=!0)}),r}toObjectTransformState(t=[]){this.updateWorldMatrix(!0,!1);let r={position:this.position.toArray(),rotation:[this.rotation.x*vt.RAD2DEG,this.rotation.y*vt.RAD2DEG,this.rotation.z*vt.RAD2DEG],scale:this.scale.toArray(),hiddenMatrix:this.hiddenMatrix.toArray()};return ER(r,t)}getTransformValues(t,r,i){return r[t].map((n,a)=>(i==null?void 0:i.shared.getVariable(n,[this.uuid,t,n4t[a]]))??n)}updateTransformState(t,r){let i=!1;return t.position&&(this.position.fromArray(this.getTransformValues("position",t,r)),i=!0),t.rotation&&(ZP.fromArray(this.getTransformValues("rotation",t,r)).multiplyScalar(vt.DEG2RAD),this.rotation.setFromVector3(ZP),i=!0),t.scale&&(this.scale.fromArray(this.getTransformValues("scale",t,r)),i=!0),t.hiddenMatrix!==void 0&&(i=!0,this.hiddenMatrix.fromArray(t.hiddenMatrix??ny.identity)),i&&(this.updateMatrix(),this.resetBBoxNeedsUpdate(),this.invalidateClonerTransform(this),this.traverseEntityAncestors(n=>{n.invalidateClonerTransform(this)})),t.position&&t.rotation&&t.scale&&t.hiddenMatrix!==void 0&&this.updateWorldMatrix(!1,!0),i}onVariableUpdate(t=!1){if(t){this.resetBBoxNeedsUpdate();return}this.updateMatrix(),this.resetBBoxNeedsUpdate(),this.invalidateClonerTransform(this),this.traverseEntityAncestors(r=>{r.invalidateClonerTransform(this)})}dispose(){this.disposed=!0,this.cloner&&(this.cloner.removeFromParent(),this.cloner=void 0)}disposeChildrenRecursively(){for(let t of this.children)Gr.is(t)&&t.disposeRecursively()}disposeRecursively(){this.dispose(),this.children.forEach(t=>{Gr.is(t)&&t.disposeRecursively()})}toState(t=[]){let r={name:this.name,visible:this.visible,raycastLock:this.raycastLock,...this.toObjectTransformState(t)};return ER(r,t)}updateByObjUpdateOp(t,r){t!==void 0&&this.updateByOp({type:0,props:t,path:[]},{...this.data,...t},r,!1)}updateByOp(t,r,i,n){let a=this.data;this.data=r;let o=t,s=Ri(t.path,["states","*"]);if(s!==null){if(t.type===0){let[l]=s;if((this==null?void 0:this.stateSelection)===l){let u={...t.props};if(delete u.name,Object.values(t.props).some(c=>c===void 0)){let c=this.data;if(c!==void 0){let h=Kn.zoom(c,t.path.slice(2));if(h)for(let d in t.props)t.props[d]===void 0&&d in h&&(u[d]=h[d])}}o={...t,props:u,path:t.path.slice(2)}}}}else if(t.type===0){let l=this.stateSelection?this.data.states.data(this.stateSelection):void 0;if(l!==void 0){if(t.props.name!==void 0&&l.name){let{name:c,...h}=l;l=h}if(t.props.material!==void 0&&"material"in l){let{material:c,...h}=l;l=h}let u=Kn.removeOverridden(t.path,t.props,l);o={...t,props:u}}}if(this.updateByPatchedOpBase(o,ev.patch(this.data,this.stateSelection?this.data.states.data(this.stateSelection):void 0),i),Ri(t.path,["overrides"])){let l=[],u=[...t.path];for(l.push(u[1]),u.splice(0,2);u.length>0&&u[0]==="descendants";)l.push(u[1]),u.splice(0,2);if(l[l.length-1]===void 0){if(t.type===0)for(let c of Object.keys(t.props)){l[l.length-1]=c;let h=i.scene.findInstance([this.uuid,...l]);h&&(h.overrideData=t.props[c],h.updateState(rp.apply(h.component.data,h.overrideData),i))}}else{let c=i.scene.findInstance([this.uuid,...l]);if(c){let h=Kn.zoom(c.component.data,u);if(t={...t,path:u},t.type===0){let d=t.props;if(h)for(let[f,p]of Object.entries(t.props))p===void 0&&(d===t.props&&(d={...t.props}),d[f]=h[f]);t={...t,props:d}}c.overrideData=p6.resolve(r.overrides,l),c.updateByOp(t,ya.applySimple(c.data,t),i,!1)}}}else if(this.instances.length>0){let l;if(t.path.length===0&&t.type===0){let u;for(let c of qf.rootOverrideProps)c in t.props&&(u===void 0&&(u={}),u[c]=t.props[c]);u&&(l={...t,props:u})}else for(let u of qf.rootOverrideProps)if(Ri(t.path,[u])){l=t;break}l!==void 0&&this.instances.forEach(u=>{if(u.isInstanceRoot){let c=rp.filterOp(u.overrideData,l);c&&u.updateByOp(c,ya.applySimple(u.data,c),i,!0)}}),this.instances.forEach(u=>{if(!u.isInstanceRoot){let c=rp.filterOp(u.overrideData,t);if(c){let h;a===u.data&&t===c?h=r:h=ya.applySimple(u.data,c),u.updateByOp(c,h,i,!0)}}})}}updateByPatchedOpBase(t,r,i){if(this.dataPatched=r,t.path.length===0&&t.type===0)t.props.type!==void 0&&!Xv.is(t.props.type)&&Xf.changeEntityProptotype(this,r,i);else if(t.path.length===1&&t.path[0]==="geometry"&&t.type===0&&"type"in t.props){Xf.changeEntityProptotype(this,r,i);for(let n of this.children)Gr.is(n)&&n.updateVisible(i.scene)}this.updateByPatchedOp(t,r,i)}updateByPatchedOp(t,r,i){var n;if(t.path.length===0&&t.type===0&&this.updateState(t.props,i),t.path[0]==="morphTargetInfluences"&&t.type===0){let a=(n=r.morphTargetInfluences.get(t.path[1]))==null?void 0:n.data.name;a&&this.updateMorphInfluences(a,i.shared.getVariable(t.props.value,[this.uuid,"morphTargetInfluences",a]))}if(Ri(t.path,["pathSnapping"])!==null&&this.updatePathSnapping(r.pathSnapping),Ri(t.path,["cloner"])!==null){let a=ya.drop(t,1);a.path.length===0&&a.type===0&&a.props.disabled===!0?this.setFromClonerState(null,i):this.cloner?this.cloner.updateState(r.cloner,i.scene):(this.setFromClonerState(r.cloner,i),this.expandCloner(i.scene)),this.updateVisible(i.scene)}}updatePathSnapping(t=this.dataPatched.pathSnapping){this._updatedPathSnapping=t,this._needApplyPathSnapping=!0}get updatedPathSnapping(){return this._updatedPathSnapping}applyPathSnapping(t){var p,v,m,g,y;let r=((p=this._updatedPathSnapping)==null?void 0:p.pathId)??this.dataPatched.pathSnapping.pathId,i=((v=this._updatedPathSnapping)==null?void 0:v.slide)??this.dataPatched.pathSnapping.slide??0,n=((m=this._updatedPathSnapping)==null?void 0:m.offset)??this.dataPatched.pathSnapping.offset??0,a=((g=this._updatedPathSnapping)==null?void 0:g.orientation)??this.dataPatched.pathSnapping.orientation;if(r===null)return;let o=t.find(r);if(!o||this._needApplyPathSnapping===!1)return;this._needApplyPathSnapping=!1;let s=o.data;if(s.geometry.path.points.length<=1)return;let l=Kge(s.geometry.path),u=(i+n)%1;i+n===1&&u===0&&(u=1);let c=null;try{c=l.curves.length?l.getPointAt(u):null}catch{}if(c===null)return;let h=this.parent?(y=this.parent)==null?void 0:y.matrixWorld:new Ke;o.updateMatrixWorld();let d=new Ke().multiplyMatrices(h.clone().invert(),o.matrixWorld);c.applyMatrix4(d);let f={position:c.toArray(),rotation:s.rotation};if(a==="tangential"){let x=new Ke().extractRotation(o.matrixWorld),b=l.getTangentAt(u).applyMatrix4(x).add(c),_=new Ke().lookAt(c,b,a4t),w=ZP.setFromEuler(new Qn().setFromRotationMatrix(_)).multiplyScalar(vt.RAD2DEG);f={...f,rotation:w.toArray()}}this.updateTransformState(f),this.traverseEntity(x=>{x._cameraType&&x.dispatchEvent(i4t)})}updateVisible(t){var i;if(this.visible=this.dataPatched.visible&&(!this.dataPatched.cloner||(this.dataPatched.cloner.disabled??!1)||((i=this.dataPatched.cloner)==null?void 0:i.hideBase)!==!0),!t)return;let r=!1;this.traverseEntity(n=>{if(n.data.type==="Splat")return r=!0,!0}),r&&t.reloadSplats()}updateState_Entity(t,r){t.name!==void 0&&(this.name=t.name),t.raycastLock!==void 0&&(this.raycastLock=t.raycastLock),t.visible!==void 0&&(this.updateVisible(r==null?void 0:r.scene),this.resetBBoxNeedsUpdate()),r&&"cloner"in t&&t.cloner!==void 0&&(this.setFromClonerState(t.cloner,r),this.updateVisible(r.scene)),this.updateTransformState(t,r)}get attachedSurfaceCloners(){return this.children.filter(t=>t instanceof Xf.Cloner&&t.parameters.type==="toObject")}setFromClonerState(t,r){this.disposed||(t===null||t.disabled?(this.cloner&&this.cloner.removeFromParent(),this.cloner=void 0):this.cloner===void 0?(this.cloner=new Xf.Cloner(this,t),r.scene.addPendingExpandCloner(this)):this.cloner.updateState(t,r.scene))}expandCloner(t){!this.disposed&&this.cloner&&this.cloner.expandClones(t)}invalidateClonerTransform(t){this.cloner&&this.cloner.invalidateTransform(t)}requestRender(){this.dispatchEvent({type:"requestRender"})}},Jge=class{static create(e){return this.build(this.normalizeInputs(e))}static normalizeInputs(e,t){let r=Object.assign({},(t==null?void 0:t.parameters)??{width:100,radialSegments:64,heightSegments:1,openEnded:!1,thetaStart:0,thetaLength:360,cornerRadius:8,cornerSegments:8,hollow:0},e.parameters);r.thetaLength=vt.clamp(r.thetaLength,0,360);let i=r.width/2,n=r.radiusTop??i,a=r.radiusBottom??i;return n===a?(n=i,a=i):n>a?(n=i,a=a*i/n):(n=n*i/a,a=i),{parameters:Object.assign(r,{width:Math.abs(r.width),height:Math.abs(r.height??r.width),depth:Math.abs(r.depth??r.width),radiusTop:n,radiusBottom:a})}}static build(e){let{width:t,depth:r,height:i,radialSegments:n,heightSegments:a,openEnded:o,thetaStart:s,thetaLength:l,radiusTop:u,radiusBottom:c,cornerRadius:h,cornerSegments:d,hollow:f}=e.parameters,p;return l===0?(p=new It,p.setAttribute("position",new ht([],3))):h||f?p=new $ge(u,c,i,n,a,o,s,l*Math.PI/180,h,h,d,f):p=new uz(u,c,i,n,a,o,s,l*Math.PI/180),p.scale(1,1,r/t),Object.assign(p,{userData:{...e,type:"CylinderGeometry"}})}};function lf(e,t,r){r.x=e.x*t.x,r.y=e.y,r.z=e.x*t.y}function qte(e){return new me(e.y,-e.x)}var $ge=class extends It{constructor(e,t,r,i,n,a,o,s,l,u,c,h,d=!1){super(),this.type="RoundedCylinderBufferGeometry",e=e!==void 0?e:1,t=t!==void 0?t:1,r=r||1,i=Math.floor(i)||8,n=Math.floor(n)||1,a=a!==void 0?a:!1,o=o!==void 0?o:0,s=s!==void 0?s:Math.PI*2,a&&(l=0,u=0);let f=[],p=[],v=[],m=[],g=0,y=r/2,x=new U,b=new U;d&&e==0&&(e=l),d&&t==0&&(t=u);let _=new me(e,y),w=new me(t,-y),S=null,A=null,M=null,E=null,T=_.clone().sub(w),L=0,P=0,C=0;h>0&&(L=Math.min(e,t)*(1-h),P=e-L,C=t-L);let D=_.clone();D.x-=L;let I=Math.PI-T.angle(),O=T.angle(),R=Math.tan(O/2),H=Math.tan(I/2),j=R+H,N=h?j:H,k=h?j:R;if(l=Math.min(l,(e-P)/N,T.length()/j),u=Math.min(u,(t-C)/k,T.length()/j),l>0){let re=l/R;S=_.clone().sub(new me(re,l)),h&&(M=S.clone(),M.x-=L-j*l),_.sub(T.clone().setLength(re))}if(u>0){let re=u/H;A=w.clone().sub(new me(re,-u)),w.add(T.clone().setLength(re)),h&&(E=A.clone(),E.x-=L-j*u,D.sub(T.clone().setLength(re)))}T=_.clone().sub(w);let G=T.length()<.5,Y=[];for(let re=0;re<=i;re++){let ae=[],he=re/i,se=he*s+o,fe=new me(Math.sin(se),Math.cos(se));E&&A?(F(ae,he,fe,I,u,E,-1,!0),F(ae,he,fe,O,u,A,-1,!1)):A?(Z(ae,fe,A.x,0,-1),F(ae,he,fe,O,u,A,-1,!1)):a||Z(ae,fe,t,C,-1);let J=qte(T).normalize();if(lf(J,fe,x),!G)for(let te=0;te<=n;te++){let le=te/n,Ae=T.clone().multiplyScalar(le).add(w);lf(Ae,fe,b),p.push(b.x,b.y,b.z),v.push(x.x,x.y,x.z),m.push(he,.5+b.y/r),ae.push(g++)}if(M&&S?(F(ae,he,fe,I,l,S,1,!1),F(ae,he,fe,O,l,M,1,!0)):S?(F(ae,he,fe,I,l,S,1,!1),Z(ae,fe,S.x,0,1)):a||Z(ae,fe,e,P,1),h&&!G){let te=qte(T).multiplyScalar(-1).normalize();lf(te,fe,x);for(let le=0;le<=n;le++){let Ae=le/n,xe=T.clone().multiplyScalar(-Ae).add(D);lf(xe,fe,b),p.push(b.x,b.y,b.z),v.push(x.x,x.y,x.z),m.push(he,.5+b.y/r),ae.push(g++)}}h&&!a&&ae.push(ae[0]),Y.push(ae)}for(let re=0;re<Y.length-1;re++)for(let ae=0;ae<Y[0].length-1;ae++){if(a&&h&&ae==n)continue;let he=Y[re][ae],se=Y[re+1][ae],fe=Y[re+1][ae+1],J=Y[re][ae+1],te=p[fe*3+0],le=p[fe*3+2];f.push(he,se,J),(te!=0||le!=0)&&f.push(se,fe,J)}s<Math.PI*2&&(ne(-1,Y[0],o),ne(1,Y[Y.length-1],o+s)),this.setIndex(f),this.setAttribute("position",new ht(p,3)),this.setAttribute("normal",new ht(v,3)),this.setAttribute("uv",new ht(m,2));function F(re,ae,he,se,fe,J,te,le){for(let Ae=0;Ae<c+1;Ae++){let xe=Ae/c,ye=te<0?xe:1-xe;le&&(ye-=1),ye*=se;let Se=new me(Math.sin(ye),Math.cos(ye)*te),Pe=Se.clone().multiplyScalar(fe).add(J);lf(Pe,he,b),p.push(b.x,b.y,b.z),lf(Se,he,x),v.push(x.x,x.y,x.z),m.push(ae,.5+b.y/r),re.push(g++)}}function Z(re,ae,he,se,fe){let J=new U,te=new me,le=[he,se];fe<0&&le.reverse();for(let Ae of le)te.set(Ae,y*fe),lf(te,ae,J),p.push(J.x,J.y,J.z),v.push(0,fe,0),m.push(.5,.5),re.push(g++)}function ne(re,ae,he){let se=new me(Math.sin(he),Math.cos(he)),fe=new me(-Math.cos(he),Math.sin(he)),J=new U,te=re<0?(xe,ye,Se)=>f.push(xe,ye,Se):(xe,ye,Se)=>f.push(xe,Se,ye),le=new me((e+t+P+C)/4,0);lf(le,se,J),p.push(J.x,J.y,J.z),v.push(fe.x,0,fe.y),m.push(.5,.5);let Ae=g++;for(let xe of ae){let ye=p.slice(xe*3,xe*3+3);p.push(...ye),v.push(fe.x,0,fe.y);let Se=m.slice(xe*2,xe*2+2);m.push(...Se),g++}for(let xe=Ae+1;xe<g-1;xe++)te(Ae,xe,xe+1);te(Ae,g-1,Ae+1)}}},o4t=class{static create(e){return this.build(this.normalizeInputs(e))}static normalizeInputs(e,t){let r=Object.assign({},(t==null?void 0:t.parameters)??{width:100,radialSegments:32,heightSegments:8,openEnded:!1,thetaStart:0,thetaLength:360,cornerRadiusTop:8,cornerRadiusBottom:8,cornerSegments:8},e.parameters);return r.thetaLength=vt.clamp(r.thetaLength,0,360),{parameters:Object.assign(r,{width:Math.abs(r.width),height:Math.abs(r.height??r.width),depth:Math.abs(r.depth??r.width)})}}static build(e){let{width:t,depth:r,height:i,radialSegments:n,heightSegments:a,openEnded:o,thetaStart:s,thetaLength:l,cornerRadiusTop:u,cornerRadiusBottom:c,cornerSegments:h}=e.parameters,d;return l===0?(d=new It,d.setAttribute("position",new ht([],3))):u>0||c>0||l<360?d=new $ge(0,t/2,i,n,a,o,s,l*Math.PI/180,u,c,h,0,!0):d=new cz(t/2,i,n,a,o),d.scale(1,1,r/t),Object.assign(d,{userData:{...e,type:"ConeGeometry"}})}},s4t=class{static create(e){return this.build(this.normalizeInputs(e))}static normalizeInputs(e,t){let r=Object.assign({},(t==null?void 0:t.parameters)??{width:100,widthSegments:1,heightSegments:1,depthSegments:1,cornerRadius:8,cornerSegments:8},e.parameters);return{parameters:Object.assign(r,{width:Math.abs(r.width),height:Math.abs(r.height??r.width),depth:Math.abs(r.depth??r.width)})}}static build(e){let{width:t,height:r,depth:i,widthSegments:n,heightSegments:a,depthSegments:o,cornerRadius:s,cornerSegments:l}=e.parameters,u;return s===0?u=new Ru(t,r,i,n,a,o):u=new l4t(t,r,i,n,a,o,s,l),Object.assign(u,{userData:{...e,type:"CubeGeometry"}})}},QP=Math.PI/2,l4t=class extends It{constructor(e=1,t=1,r=1,i=1,n=1,a=1,o=0,s=4){super(),this.type="BoxGeometry",i=Math.floor(i),n=Math.floor(n),a=Math.floor(a),s=Math.floor(s),o=Math.min(o,e/2,t/2,r/2);let l=[],u=[],c=[],h=[],d=0;f("z","y","x",-1,-1,r,t,e,a,n),f("z","y","x",1,-1,r,t,-e,a,n),f("x","z","y",1,1,e,r,t,i,a),f("x","z","y",1,-1,e,r,-t,i,a),f("x","y","z",1,-1,e,t,r,i,n),f("x","y","z",-1,-1,e,t,-r,i,n),o>0&&(p("z","y","x",-1,-1,1,r,t,e,a),p("z","y","x",1,-1,-1,r,t,e,a),p("z","y","x",-1,1,-1,r,t,e,a),p("z","y","x",1,1,1,r,t,e,a),p("x","y","z",-1,-1,-1,e,t,r,i),p("x","y","z",1,-1,1,e,t,r,i),p("x","y","z",-1,1,1,e,t,r,i),p("x","y","z",1,1,-1,e,t,r,i),p("y","x","z",-1,-1,1,t,e,r,n),p("y","x","z",1,-1,-1,t,e,r,n),p("y","x","z",1,1,1,t,e,r,n),p("y","x","z",-1,1,-1,t,e,r,n),v(1,1,1),v(-1,1,1),v(1,-1,1),v(-1,-1,1),v(1,1,-1),v(-1,1,-1),v(1,-1,-1),v(-1,-1,-1)),this.setIndex(l),this.setAttribute("position",new ht(u,3)),this.setAttribute("normal",new ht(c,3)),this.setAttribute("uv",new ht(h,2));function f(m,g,y,x,b,_,w,S,A,M){let E=(_-2*o)/A,T=(w-2*o)/M,L=_/2-o,P=w/2-o,C=S/2,D=A+1,I=M+1,O=0,R=new U;for(let H=0;H<I;H++){let j=H*T-P;for(let N=0;N<D;N++){let k=N*E-L;R[m]=k*x,R[g]=j*b,R[y]=C,u.push(R.x,R.y,R.z),R[m]=0,R[g]=0,R[y]=S>0?1:-1,c.push(R.x,R.y,R.z),h.push(N/A),h.push(1-H/M),O+=1}}for(let H=0;H<M;H++)for(let j=0;j<A;j++){let N=d+j+D*H,k=d+j+D*(H+1),G=d+(j+1)+D*(H+1),Y=d+(j+1)+D*H;l.push(N,k,Y),l.push(k,G,Y)}d+=O}function p(m,g,y,x,b,_,w,S,A,M){let E=(w-2*o)/M,T=w/2-o,L=S/2-o,P=A/2,C=M+1,D=0,I=new U,O=new U;for(let R=0;R<s+1;R++){let H=R/s*QP,j=Math.sin(H)*o,N=(1-Math.cos(H))*o,k=Math.sin(H),G=Math.cos(H);I[g]=(L+j)*b,I[y]=(P-N)*_,O[m]=0,O[g]=k*Math.sign(I[g]),O[y]=G*Math.sign(I[y]);for(let Y=0;Y<C;Y++){let F=Y*E-T;I[m]=F*x,u.push(I.x,I.y,I.z),c.push(O.x,O.y,O.z),h.push(Y/M),h.push(0),D+=1}}for(let R=0;R<s;R++)for(let H=0;H<M;H++){let j=d+H+C*R,N=d+H+C*(R+1),k=d+(H+1)+C*(R+1),G=d+(H+1)+C*R;l.push(j,N,G),l.push(N,k,G)}d+=D}function v(m,g,y){let x=new U,b=new U(e/2,t/2,r/2);b.subScalar(o);let _=[],w=m*g*y>0?(A,M,E)=>l.push(A,M,E):(A,M,E)=>l.push(A,E,M);for(let A=0;A<=s;A++){let M=[],E=QP*(1-A/s),T=Math.cos(E),L=Math.sin(E),P=0;for(let C=0;C<=A;C++){let D=Math.cos(P),I=Math.sin(P);x.x=T*D,x.y=L,x.z=T*I;let O=b.clone().addScaledVector(x,o);u.push(m*O.x,g*O.y,y*O.z),c.push(m*x.x,g*x.y,y*x.z),h.push(0,0),M.push(d++),P+=QP/A}_.push(M)}let S=_.length-1;for(let A=0;A<S;A++){let M=_[A],E=_[A+1],T=M.length-1;w(M[0],E[1],E[0]);for(let L=1;L<=T;L++)w(M[L-1],M[L],E[L]),w(M[L],E[L+1],E[L])}}}},Wz=class extends It{constructor(e=[],t=[],r="",i=1,n=.2,a=4){super(),this.type="PolyhedronGeometryRound";let o=[],s=[],l=[];u(),c(),this.setAttribute("position",new ht(o,3)),this.setAttribute("normal",new ht(l,3)),this.setAttribute("uv",new ht(s,2));return;function u(){var O;n=Math.min(1-1e-5,n),n==0&&(a=0);let h={IcosahedronGeometry:5,DodecahedronGeometry:3,HexahedronGeometry:3,OctahedronGeometry:4,TetrahedronGeometry:3}[r],d=new U,f=d.clone(),p=new za,v=n*i,m=i-v,g=a+1,y=new U,x=(R,H)=>y.subVectors(R,H).normalize(),b=(R,H)=>Array(R).fill(void 0).map(H),_=b(e.length/3,(R,H)=>new U().fromArray(e,H*3).setLength(i)),w=[],S=1e6;for(let R=0;R<_.length;R++){let H=_[R],j=[],N,k,G,Y=1e10,F=-1;for(;(F=t.indexOf(R,F+1))!=-1;){let ae=F-F%3;N=t[ae+(F+1)%3],k=t[ae+(F+2)%3],G=H.distanceToSquared(_[N]),Y=Math.min(Y,G),j.push([N,k,G])}Y+=1e-6;let Z=[],ne=0,re=j.length;for(let ae=0;ae<re;ae++){[N,k,G]=j[ne];let he=((O=w[N])==null?void 0:O.includes(R))==!0;G<=Y&&Z.push(N+ +he*S),ne=j.findIndex(se=>se[0]==k)}w.push(Z)}let A=[];{let R=0,H=0,j,N,k=h==3;for(let G=0;G<=a;G++){j=G*(G+1)/2,N=(G+1)*(G+2)/2;for(let Y=0;Y<a-G;Y++)[R,H]=[j+Y+G+2,N+Y+G+3],A.push(j,N,...k?[H,j]:[R,N],H,R),[j,N]=[R,H];A.push(j,N,j+a+2)}}let M=d.clone(),E=d.clone(),T=d.clone(),L=d.clone(),P=d.clone(),C=[],D=b(_.length,()=>b(h,()=>d.clone()));for(let R=0;R<_.length;R++){d.copy(_[R]).normalize(),M.copy(d).multiplyScalar(m);let H=w[R];for(let Z=0;Z<H.length;Z++){let ne=H[Z],re=H[(Z+1)%h];p.setFromPointsAndIndices(_,R,ne%S,re%S),p.b.sub(p.a).setLength(1e10).add(p.a),p.c.sub(p.a).setLength(1e10).add(p.a),p.closestPointToPoint(M,D[R][Z])}let j=[],N=[],k=[],G=new U;a==0&&[...D[R]].reduce((Z,ne)=>Z.add(ne),G).multiplyScalar(1/h);for(let Z=0;Z<h;Z++){let ne=[],re=(Z-1+h)%h,ae=D[R][re],he=D[R][Z];d.copy(ae).sub(M),f.copy(he).sub(M);let se=M.angleTo(d),fe=d.angleTo(f),J=Math.cos(se)*v;a==0?E.copy(G):E.copy(M).setLength(m+J),N.push(J);let te=[E,ae,he];for(let le=0;le<2;le++){let Ae=te[le],xe=te[le+1];L.subVectors(Ae,M),P.subVectors(xe,M),T.crossVectors(L,P).normalize();for(let ye=0;ye<g;ye++){let Se=[se,fe][le]*ye/g;d.copy(L).applyAxisAngle(T,Se).add(M),j.push(d.clone()),le&&(x(d,M),ne.push([ye==0?Ae:d.clone(),y.clone()]))}le&&(x(xe,M),ne.push([xe,y.clone()]))}k.push(ne)}C.push(k);let Y=2*g,F=2;for(let Z=0;Z<h;Z++){let ne=Y*Z,re=Y*((Z+1)%h),ae=[j[ne]];for(let se=1;se<g;se++){L=j[ne+se],P=j[re+se],ae.push(L);for(let fe=1,J=se-F+1;fe<=J;fe++)d.lerpVectors(L,P,fe/(J+1)),d.sub(M).setLength(N[Z]).add(M),ae.push(d.clone());ae.push(P)}for(let se=0;se<g;se++)ae.push(j[se+g+ne]);ae.push(j[re+g]);let he=A.map(se=>ae[se]);o.push(...he.map(se=>[se.x,se.y,se.z]).flat()),l.push(...he.map(se=>(x(se,M),[y.x,y.y,y.z])).flat())}}let I=[];for(let R=0;R<w.length;R++)for(let H=0;H<h;H++){let j=w[R][H];if(j<S){let N=w[j].findIndex(Y=>Y%S==R),k=C[R][H],G=C[j][N];for(let Y=0;Y<g;Y++){let F=k[Y],Z=G[g-Y],ne=k[Y+1],re=G[g-(Y+1)];[F,Z,ne,ne,Z,re].forEach(ae=>{o.push(ae[0].x,ae[0].y,ae[0].z),l.push(ae[1].x,ae[1].y,ae[1].z)})}I.push(k[0][0],G[g][0],k[g][0],G[0][0])}}for(;I.length;){let R,H,j,N;[R,H]=I.splice(0,2);let k=[R];for(;R!=H;)k.push(H),j=I.indexOf(H),N=j%2,H=I.splice(j-N,2)[1-N];y.subVectors(k[0],k[1]).cross(d.subVectors(k[0],k[2])).normalize();let G=y.dot(k[0])<0;G&&y.negate();for(let Y=1;Y<=k.length-2;Y++)[k[Y+ +G],k[Y+1-+G],k[0]].forEach(F=>{o.push(F.x,F.y,F.z),l.push(y.x,y.y,y.z)})}}function c(){let h=new U;for(let w=0;w<o.length;w+=3){h.x=o[w+0],h.y=o[w+1],h.z=o[w+2];let S=b(h)/2/Math.PI+.5,A=_(h)/Math.PI+.5;s.push(S,1-A)}let d=new U,f=new U,p=new U,v=new U,m=new me,g=new me,y=new me,x=(w,S,A,M)=>{M<0&&w.x===1&&(s[S]=w.x-1),A.x===0&&A.z===0&&(s[S]=M/2/Math.PI+.5)};for(let w=0,S=0;w<o.length;w+=9,S+=6){d.set(o[w+0],o[w+1],o[w+2]),f.set(o[w+3],o[w+4],o[w+5]),p.set(o[w+6],o[w+7],o[w+8]),m.set(s[S+0],s[S+1]),g.set(s[S+2],s[S+3]),y.set(s[S+4],s[S+5]),v.copy(d).add(f).add(p).divideScalar(3);let A=b(v);x(m,S+0,d,A),x(g,S+2,f,A),x(y,S+4,p,A)}for(let w=0;w<s.length;w+=6){let S=s[w+0],A=s[w+2],M=s[w+4],E=Math.max(S,A,M),T=Math.min(S,A,M);E>.9&&T<.1&&(S<.2&&(s[w+0]+=1),A<.2&&(s[w+2]+=1),M<.2&&(s[w+4]+=1))}function b(w){return Math.atan2(w.z,-w.x)}function _(w){return Math.atan2(-w.y,Math.sqrt(w.x*w.x+w.z*w.z))}}}static fromJSON(e){return new Wz(e.vertices,e.indices,e.radius,e.corner,e.cornerSides)}},u4t=class{static create(e){return this.build(this.normalizeInputs(e))}static normalizeInputs(e,t){let r=Object.assign({},(t==null?void 0:t.parameters)??{width:100,detail:0,corner:0,cornerSides:4},e.parameters);return{parameters:Object.assign(r,{width:Math.abs(r.width),height:Math.abs(r.height??r.width),depth:Math.abs(r.depth??r.width)})}}static build(e){let{width:t,height:r,depth:i,detail:n,corner:a,cornerSides:o}=e.parameters,s=n===0&&a!==0?new e1e(t*.5,a,o):new ome(t*.5,n);return s.scale(1,r/t,i/t),Object.assign(s,{userData:{...e,type:"DodecahedronGeometry"}})}},e1e=class extends Wz{constructor(e=1,t=.2,r=4){let i=(1+Math.sqrt(5))/2,n=1/i,a=[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-n,-i,0,-n,i,0,n,-i,0,n,i,-n,-i,0,-n,i,0,n,-i,0,n,i,0,-i,0,-n,i,0,-n,-i,0,n,i,0,n],o=[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9],s="DodecahedronGeometry";super(a,o,s,e,t,r),this.type=s}static fromJSON(e){return new e1e(e.radius,e.corner,e.cornerSides)}},fx=1e-12,qz=class{constructor(e){this.position=new me,this.startPosition=new me,this.uuid=vt.generateUUID(),this.position=e.clone()}start(){this.reset()}reset(){this.startPosition.copy(this.position)}applyOffset(e){this.position.copy(this.startPosition).add(e)}copy(e){return this.position.copy(e.position),this.startPosition.copy(e.startPosition),this}clone(){return new qz(this.position).copy(this)}toJSON(){return[this.position.x,this.position.y]}},bO=class extends qz{constructor(e){super(e.position),this.parent=e}copy(e){return super.copy(e),this}clone(){return new bO(this.parent).copy(this)}},_1=class extends qz{constructor(e,t){super(t),this.controls=[],this.roundness=0,this.areControlsDirectionsMirrored=!0,this.uuid=e,this.controls.push(new bO(this),new bO(this))}static create(e,t){let r=new _1(e,new me(...t.position));return r.controls[0].position.set(...t.controlPrevious.position),r.controls[1].position.set(...t.controlNext.position),r.roundness=t.roundness,r.areControlsDirectionsMirrored=t.areControlsDirectionsMirrored,r}getOppositeControl(e){let t=this.controls.indexOf(e);return t===0?this.controls[1]:t===1?this.controls[0]:null}applyOffsetToControls(e,t=1){for(let r=0,i=this.controls.length;r<i;r++){let n=this.controls[r];this.position.distanceTo(n.position)<=t?n.position.copy(this.position):n.applyOffset(e)}}controlsMoved(){return!(this.position.equals(this.controls[0].position)&&this.position.equals(this.controls[1].position))}copy(e){return super.copy(e),this.controls[0].copy(e.controls[0]),this.controls[1].copy(e.controls[1]),this.roundness=e.roundness,this.uuid=e.uuid,this}clone(){return new _1(this.uuid,this.position).copy(this)}toJSON(){return super.toJSON().concat(this.controls[0].toJSON(),this.controls[1].toJSON(),[this.roundness])}computeTangents(){var r,i;let e=(r=this.curveBefore)==null?void 0:r.getTangentAt(1),t=(i=this.curveAfter)==null?void 0:i.getTangentAt(0);return[e,t]}computeNormals(e=new me,t=new me){let[r,i]=this.computeTangents();return r&&i&&(Yte(r,e),Yte(i,t)),[e,t]}computeTangent(e=new me){let[t,r]=this.computeTangents();return t&&r&&e.copy(t).add(r).normalize(),e}computeNormal(e=new me){let[t,r]=this.computeNormals();return e.copy(t).add(r).normalize(),e}};function Yte(e,t=new me){let r=e.length();return t.set(-e.y/r,e.x/r)}var Yz=e=>e,a2=new me,B7=new me,c4t=new me,h4t=new me,d4t=new me,f4t=new me,t1e=new U,r1e=new U;function p4t(e){let t=new me;t.addVectors(e.v0,a2.subVectors(e.v1,e.v0).multiplyScalar(2/3));let r=new me;return r.addVectors(e.v2,B7.subVectors(e.v1,e.v2).multiplyScalar(2/3)),new mu(e.v0,t,r,e.v2)}function Wx(e,t,r=Number.EPSILON){return Math.abs(e-t)<r}function v4t(e,t,r=Number.EPSILON){return e.distanceTo(t)<r}function m4t(e,t,r=Number.EPSILON){return e.distanceTo(t)<r}function i1e(e,t,r){let i=Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2)),n=Math.sqrt(Math.pow(t.x-r.x,2)+Math.pow(t.y-r.y,2)),a=Math.sqrt(Math.pow(r.x-e.x,2)+Math.pow(r.y-e.y,2));return Math.acos((n*n+i*i-a*a)/(2*n*i))}function g4t(e,t,r){return Zte(e,t)&&Zte(t,r)&&wO(e.position,t.position,r.position)}function wO(e,t,r){return a2.copy(t).sub(e).cross(B7.copy(r).sub(e))===0}function y4t(e,t,r,i,n){let a=Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2)),o=(e.y+t.y)/2,s=(e.x+t.x)/2,l=Math.sqrt(Math.pow(r,2)-Math.pow(a/2,2))*(e.y-t.y)/a,u=Math.sqrt(Math.pow(r,2)-Math.pow(a/2,2))*(t.x-e.x)/a;return i.set(s+l,o+u),n.set(s-l,o-u),[i,n]}function x4t(e,t,r){let i=e.distanceTo(r),n=t.distanceTo(r);return i<n?t:e}function b4t(e,t,r,i,n,a){let o=t.x-e.x,s=t.y-e.y,l=r.x-e.x,u=r.y-e.y,c=Math.sqrt((o+l)*(o+l)+(s+u)*(s+u)),h;return i1e(t,e,r)>Math.PI&&(c*=-1),Wx(u,s)?h=(s+u)*(i/c-.5)*8/3/(o-l):h=(o+l)*(i/c-.5)*8/3/(u-s),n.set(t.x-h*s,t.y+h*o),a.set(r.x+h*u,r.y-h*l),[n,a]}function Xte(e,t){return e.position.equals(e.controls[1].position)&&t.position.equals(t.controls[0].position)}function Zte(e,t){return wO(e.position,e.controls[1].position,t.position)&&wO(e.position,t.controls[0].position,t.position)}function w4t(e,t,r,i,n=.5){let a=a2.subVectors(t,e).multiplyScalar(n).add(e),o=B7.subVectors(r,t).multiplyScalar(n).add(t),s=c4t.subVectors(i,r).multiplyScalar(n).add(r),l=a,u=h4t.subVectors(o,a).multiplyScalar(n).add(a),c=d4t.subVectors(s,o).multiplyScalar(n).add(o),h=s,d=f4t.subVectors(c,u).multiplyScalar(n).add(u);return[e.x,e.y,l.x,l.y,u.x,u.y,d.x,d.y,c.x,c.y,h.x,h.y,i.x,i.y]}function _4t(e,t,r=12,i=!0){let n=r1e.set(0,0,0),a,o=0;for(let s=0;s<t.length;s++){let l=Yz(t[s]),u=a2,c=Tv(l,r);for(let h=0;h<=c;h++)if(l instanceof mu||l instanceof xp||l instanceof Cu){if(l.getPoint(h/c,u),n.set(u.x,u.y,0),a!==void 0&&m4t(a,n))continue;a===void 0&&(a=t1e),a.copy(n),e.setXYZ(o,n.x,n.y,n.z),o++}}return i&&o>1&&!(e.getX(o-1)===e.getX(0)&&e.getY(o-1)===e.getY(0)&&e.getZ(o-1)===e.getZ(0))&&(e.setXYZ(o,e.getX(0),e.getY(0),e.getZ(0)),o++),e}function A4t(e,t,r,i=12,n=!0){let a=r1e.set(0,0,0),o=0,s=[];for(let l=0;l<t.length;l++){if(r[l]===!1)continue;let u,c=Yz(t[l]),h=a2,d=Tv(c,i);s.push(d);for(let f=0;f<=d;f++)if(c instanceof mu||c instanceof xp||c instanceof Cu){if(c.getPoint(f/d,h),a.set(h.x,h.y,0),u==null?void 0:u.equals(a))continue;u===void 0?u=t1e:(e.setXYZ(o,u.x,u.y,u.z),o++,e.setXYZ(o,a.x,a.y,a.z),o++),u.copy(a)}}return n&&o>1&&!(e.getX(o-1)===e.getX(0)&&e.getY(o-1)===e.getY(0)&&e.getZ(o-1)===e.getZ(0))&&(e.setXYZ(o,e.getX(0),e.getY(0),e.getZ(0)),o++),s}function Qte(e,t=12,r=!1){let i=[];for(let n=0,a=e.length;n<a;n++){let o=e[n],s=0;if(r&&o.roundedCurveCorner!==void 0){let l=Tv(o.roundedCurveCorner,t)*.5;n>0&&(i[n-1]+=l),s+=l}o.curveAfter!==void 0&&(s+=Tv(o.curveAfter,t)),i.push(s)}return e.length>0&&r&&e[0].roundedCurveCorner!==void 0&&(i[e.length-1]+=Tv(e[0].roundedCurveCorner,t)*.5),i}function Tv(e,t=12){return e&&e instanceof w7?t*2:e&&(e instanceof Cu||e instanceof ime)?1:e&&e instanceof lz?t*e.points.length:t}function S4t(e,t,r=12,i=!0){let n,a=0;for(let o=0;o<t.length;o++){let s=Yz(t[o]),l=Tv(s,r),u=a2;for(let c=0;c<=l;c++)if(s instanceof mu||s instanceof xp||s instanceof Cu){if(s.getPoint(c/l,u),n!==void 0&&v4t(n,u,fx))continue;n===void 0&&(n=B7),n.copy(u),e.push(u.x,u.y),a++}}return Wx(e[0],e[e.length-2],fx)&&Wx(e[1],e[e.length-1],fx)&&(e.pop(),e.pop()),i&&a>1&&!(Wx(e[a-1],e[1],fx)&&Wx(e[a-2],e[0],fx))&&(e.push(e[0],e[1]),a++),e}var KP=new me,C4t=new me,E4t=new me,M4t=new me,T4t=new me,P4t=new me,dn=class extends US{constructor(e=100,t=100){super(),this.points=[],this.shapeHoles=[],this.plane=new hs(new U(0,0,-1)),this.subdivision=0,this.controlSnapDistance=4,this.pointIDs=0,this.isMesh2D=!1,this.isText=!1,this._roundness=0,this.isClosed=!1,this.useCubicForRoundedCorners=!0,this.uuid=vt.generateUUID(),this.needsUpdate=!1,this.roundedCurves=[],this._width=e,this._height=t}static createFromState(e,t,r){let i=new dn;return i.isClosed=e.isClosed,i.points=e.points.map(n=>_1.create(n.id,n.data)),typeof e.roundness=="number"&&(i.roundness=e.roundness),i.shapeHoles=e.shapeHoles.map(n=>dn.createFromState(n)),t!==void 0&&r!==void 0&&i.applySize(t,r),i.update(),i}get width(){return this._width}get height(){return this._height}get roundness(){return this._roundness}set roundness(e){if(this._roundness!==e){this._roundness=e;for(let t=0,r=this.points.length;t<r;t++)this.points[t].roundness=e;this.needsUpdate=!0}}getPointsIndexesByIds(e){return e.map(t=>this.getPointIndexById(t)).filter(t=>t>=0)}getPointIndexById(e){let t=this.points.length,r=this.points.findIndex(i=>i.uuid===e);if(r<0){let i=t;for(let n=0,a=this.shapeHoles.length;n<a;n++){let o=this.shapeHoles[n],s=o.points.length,l=o.getPointIndexById(e);if(l<0)i+=s;else return l+i}}return r}getLineIndexById(e){return this.getPointIndexById(e)}getBezierPoint(e){if(e<=this.points.length-1)return this.points[e];if(this.shapeHoles.length>0){let t=this.points.length;for(let r=0,i=this.shapeHoles.length;r<i;r++){let n=this.shapeHoles[r],a=e-t;if(a<=n.points.length-1)return n.points[a];t+=n.points.length}}throw new Error("This shape does not have a point for this index: "+e)}getBezierPointIndex(e){let t=this.points.indexOf(e);if(t>=0)return t;if(t=this.points.length,this.shapeHoles.length>0)for(let r=0,i=this.shapeHoles.length;r<i;r++){let n=this.shapeHoles[r],a=n.points.indexOf(e);if(a>=0)return t+a;t+=n.points.length}return-1}getAllPoints(){let e=[].concat(...this.shapeHoles.map(t=>t.points));return[...this.points,...e]}applySize(e,t){e===0&&(e=.001),t===0&&(t=.001),this._width=e,this._height=t}applyScale(e,t){let r=KP.set(e,t);for(let i=0,n=this.points.length;i<n;i++){let a=this.points[i];a.position.multiply(r),a.controls[0].position.multiply(r),a.controls[1].position.multiply(r)}for(let i=0,n=this.shapeHoles.length;i<n;i++)this.shapeHoles[i].applyScale(e,t);this._update()}createPoint(e,t=0,r=vt.generateUUID()){let i;e instanceof me?i=e:i=new me(e,t);let n=new _1(r,i);return n.roundness=this.roundness,n}addPoint(e){this.points.push(e),this.needsUpdate=!0}addPointAt(e,t){this.points.splice(t,0,e),this.needsUpdate=!0}getPointByUuid(e){for(let t=0,r=this.points.length;t<r;t++){let i=this.points[t];if(i.uuid===e)return i}for(let t=0,r=this.shapeHoles.length;t<r;t++){let i=this.shapeHoles[t].getPointByUuid(e);if(i)return i}}getFirstPoint(){return this.points[0]}getLastPoint(){return this.points[this.points.length-1]}removePoint(e){let t=this.points.indexOf(e);t>=0&&this.points.splice(t,1),this.needsUpdate=!0}removePointById(e){let t=this.points.find(r=>r.uuid===e);t&&this.removePoint(t)}update(){for(let e=0,t=this.shapeHoles.length;e<t;e++)this.shapeHoles[e].update();this._update()}extractShapePointsToBuffer(e,t=12,r=!1){this.subdivision=t,this.curveDivisions===void 0&&this.computeCurveDivisions(t);let i=r?this.roundedCurveDivisions:this.curveDivisions;return _4t(e,r?this.roundedCurves:this.curves,t,this.autoClose),i.reduce((n,a)=>n+a,0)+1}computeCurveDivisions(e=12){return this.curveDivisions=Qte(this.points,e,!1),this.roundedCurveDivisions=Qte(this.points,e,!0),this.curveDivisions}extractFilteredShapePointsToBuffer(e,t,r=12){return A4t(e,this.curves,t,r,this.autoClose).reduce((i,n)=>i+n,0)*2}extractShapePointsToFlatArray(e,t=12){return this.subdivision=t,this.curveDivisions===void 0&&this.computeCurveDivisions(t),S4t(e,this.roundedCurves,t,this.autoClose)}getCurveIndexFromVertexId(e,t=!1){let r=0;this.curveDivisions===void 0&&this.computeCurveDivisions(this.subdivision);let i=t?this.roundedCurveDivisions:this.curveDivisions,n=0;t&&this.points[0].roundedCurveCorner!==void 0&&(n=Tv(this.points[0].roundedCurveCorner,this.subdivision)*.5);let a=e-n;a<0&&(a+=i.reduce((o,s)=>o+s,0));for(let o=0,s=i.length;o<s;o++){let l=i[o];if(a<r+l)return[o,(a-r+1)/l];r+=l}return[0,1]}getCurveT(e,t,r){let i=this.points[e],n=this.points[e>=this.points.length-1?0:e+1],a=this.curveDivisions,o=a[e];if(Xte(i,n)){let l=i.position.distanceTo(n.position);return i.position.distanceTo(KP.set(r.x,r.y))/l}let s=0;for(let l=0;l<e;l++)s+=a[l];return(t-s)/o}dispose(){}_applyCurveForPoint(e,t){Xte(t,e)?this.lineTo(e.position.x,e.position.y):this.bezierCurveTo(t.controls[1].position.x,t.controls[1].position.y,e.controls[0].position.x,e.controls[0].position.y,e.position.x,e.position.y);let r=this.curves[this.curves.length-1];e.curveBefore=r,t.curveAfter=r;let i=r.clone();e.roundedCurveBefore=i,t.roundedCurveAfter=i,e.roundedCurveCorner=void 0,this.roundedCurves.push(i)}_update(){if(this.curves=[],this.roundedCurves=[],!this.points.length)return;for(let t=0,r=this.points.length;t<r;t++){let i=this.points[t];if(t===0)this.moveTo(i.position.x,i.position.y);else{let n=this.points[t-1];this._applyCurveForPoint(i,n)}}let e=this.getLastPoint();if(e!=null&&e.curveAfter&&(e.curveAfter=void 0),this.isClosed){let t=this.points[0],r=this.points[this.points.length-1];this._applyCurveForPoint(t,r)}if(this.points.length>2){let t=0;for(let r=0,i=this.points.length;r<i;r++){let n=this.points[r],a=this.points[r-1]??this.points[this.points.length-1],o=this.points[r+1]??this.points[0],s=n.roundness,l=a&&o&&g4t(a,n,o);if(!n.controlsMoved()&&s>0&&!l){let u=n.curveBefore,c=n.curveAfter;if(u===void 0||c===void 0)continue;let h=n.roundedCurveBefore,d=n.roundedCurveAfter,f=u.getLength(),p=c.getLength(),v=Math.min(s,f*.499),m=Math.min(s,p*.499),g=Math.min(v,m),y=1-g/f,x=g/p,b=u.getPointAt(y,KP),_=c.getPointAt(x,C4t);this._subSplitCurve(u,h,y,b,void 0),this._subSplitCurve(c,d,x,void 0,_);let w;if(this.useCubicForRoundedCorners){let S=i1e(b,n.position,_)/2,A=Math.tan(S)*b.distanceTo(n.position),[M,E]=y4t(b,_,A,E4t,M4t),T=x4t(M,E,n.position),[L,P]=b4t(T,b,_,A,T4t,P4t);w=new mu(b.clone(),L.clone(),P.clone(),_.clone())}else w=new xp(b.clone(),n.position.clone(),_.clone());n.roundedCurveCorner=w,this.roundedCurves.splice(r+t,0,w),t++}}}}_subSplitCurve(e,t,r,i,n){if(e instanceof Cu)i!==void 0&&t.v2.copy(i),n!==void 0&&t.v1.copy(n);else{let a=e,o=t,s=a.getUtoTmapping(r,0),l=w4t(a.v0,a.v1,a.v2,a.v3,s);return i!==void 0&&(o.v0.set(l[0],l[1]),o.v1.set(l[2],l[3]),o.v2.set(l[4],l[5]),o.v3.set(l[6],l[7])),n!==void 0&&(o.v0.set(l[6],l[7]),o.v1.set(l[8],l[9]),o.v2.set(l[10],l[11]),o.v3.set(l[12],l[13])),o}return t}clone(){let e=new dn(this._width,this._height);return e.points=this.points.map(t=>t.clone()),e.isClosed=this.isClosed,e.roundness=this.roundness,e.isMesh2D=this.isMesh2D,e.shapeHoles=this.shapeHoles.map(t=>t.clone()),e}toJSON(){return{points:this.points.reduce((e,t)=>e.concat(t.toJSON()),[]),shapeHoles:this.shapeHoles.map(e=>e.toJSON()),isClosed:this.isClosed,roundness:this.roundness}}fromJSON(e){var r;this.points=[],this.pointIDs=0;let t=e.points.length/7;for(let i=0;i<t;i++){let n=i*7,a=e.points[n+0],o=e.points[n+1],s=e.points[n+2],l=e.points[n+3],u=e.points[n+4],c=e.points[n+5],h=e.points[n+6],d=new _1(vt.generateUUID(),new me(a,o));d.controls[0].position.set(s,l),d.controls[1].position.set(u,c),d.roundness=h,this.points.push(d)}return this.shapeHoles=(r=e.shapeHoles)!=null&&r.length?e.shapeHoles.map(i=>{let n=new dn;return n.fromJSON(i),n}):[],this.isClosed=e.isClosed,this._roundness=e.roundness,this._update(),this}fromShape(e,t=!1){this.isText=t;let r=(n,a)=>{a instanceof mu&&a.v3.equals(n.position)&&n.controls[0].position.copy(a.v2)},i=n=>{let a=[],o,s;for(o=0,s=n.length;o<s;o++)n[o]instanceof xp&&(n[o]=p4t(n[o]));for(o=0,s=n.length;o<s;o++){let c=n[o],h=o>0?n[o-1]:null,d;c instanceof mu?(d=this.createPoint(c.v0),d.controls[1].position.copy(c.v1)):c instanceof Cu&&(d=this.createPoint(c.v1)),d!==void 0&&(h!==null&&r(d,h),a.push(d))}let l=n[n.length-1],u=!1;return l instanceof mu?l.v3.equals(a[0].position)&&(a[0].controls[0].position.copy(l.v2),u=!0):l instanceof Cu&&l.v2.equals(a[0].position)&&(u=!0),this.isClosed=u,a};return this.points=i(e.curves),e instanceof US&&(this.shapeHoles=e.holes.map(n=>{let a=new dn;return a.fromShape(n),a})),this.update(),this}updatePoint(e,t){let r=this.getPointByUuid(e);r&&(t.position!==void 0&&r.position.fromArray(t.position),t.roundness!==void 0&&(r.roundness=t.roundness),t.areControlsDirectionsMirrored!==void 0&&(r.areControlsDirectionsMirrored=t.areControlsDirectionsMirrored),this.needsUpdate=!0)}updatePreviousControl(e,t){var i;let r=(i=this.getPointByUuid(e))==null?void 0:i.controls[0];r&&(t.position&&r.position.fromArray(t.position),this.needsUpdate=!0)}updateNextControl(e,t){var i;let r=(i=this.getPointByUuid(e))==null?void 0:i.controls[1];r&&(t.position&&r.position.fromArray(t.position),this.needsUpdate=!0)}},_O=Math.PI*2;function JP({x:e,y:t},r,i,n,a){return{x:e*r+n,y:t*i+a}}function D4t(e,t){let r=t===1.5707963267948966?.551915024494:t===-1.5707963267948966?-.551915024494:1.3333333333333333*Math.tan(t/4),i=Math.cos(e),n=Math.sin(e),a=Math.cos(e+t),o=Math.sin(e+t);return[{x:i-n*r,y:n+i*r},{x:a+o*r,y:o-a*r},{x:a,y:o}]}function Kte(e,t,r,i){let n=e*i-t*r<0?-1:1,a=Math.min(1,Math.max(-1,e*r+t*i));return n*Math.acos(a)}function I4t(e,t,r,i,n,a,o,s,l,u){let c=Math.pow(n,2),h=Math.pow(a,2),d=Math.pow(o,2),f=Math.pow(s,2),p=c*h-c*f-h*d;p<0&&(p=0),p/=c*f+h*d,p=Math.sqrt(p)*(l===u?-1:1);let v=p*n/a*s,m=p*-a/n*o,g=v+(e+r)/2,y=m+(t+i)/2,x=(o-v)/n,b=(s-m)/a,_=(-o-v)/n,w=(-s-m)/a,S=Kte(1,0,x,b),A=Kte(x,b,_,w);return!u&&A>0&&(A-=_O),u&&A<0&&(A+=_O),{centerx:g,centery:y,ang1:S,ang2:A}}function L4t({px:e,py:t,cx:r,cy:i,rx:n,ry:a,largeArcFlag:o,sweepFlag:s}){let l=[];if(n===0||a===0)return[];let u=(e-r)/2,c=(t-i)/2;if(u===0&&c===0)return[];n=Math.abs(n),a=Math.abs(a);let h=Math.pow(u,2)/Math.pow(n,2)+Math.pow(c,2)/Math.pow(a,2);h>1&&(n*=Math.sqrt(h),a*=Math.sqrt(h));let d=I4t(e,t,r,i,n,a,u,c,o,s),{ang1:f,ang2:p}=d,{centerx:v,centery:m}=d,g=Math.abs(p)/(_O/4);Math.abs(1-g)<1e-7&&(g=1);let y=Math.max(Math.ceil(g),1);p/=y;for(let x=0;x<y;x++)l.push(D4t(f,p)),f+=p;return l.map(x=>{let{x:b,y:_}=JP(x[0],n,a,v,m),{x:w,y:S}=JP(x[1],n,a,v,m),{x:A,y:M}=JP(x[2],n,a,v,m);return{x1:b,y1:_,x2:w,y2:S,x:A,y:M}})}var Mi;(function(e){e[e.ODD=0]="ODD",e[e.NONZERO=1]="NONZERO",e[e.POSITIVE=2]="POSITIVE",e[e.NEGATIVE=3]="NEGATIVE",e[e.ABS_GEQ_TWO=4]="ABS_GEQ_TWO"})(Mi||(Mi={}));var kn;(function(e){e[e.POLYGONS=0]="POLYGONS",e[e.CONNECTED_POLYGONS=1]="CONNECTED_POLYGONS",e[e.BOUNDARY_CONTOURS=2]="BOUNDARY_CONTOURS"})(kn||(kn={}));function Yt(e,t){if(!e)throw t||"Assertion Failed!"}var Rt=function(){function e(){}return e.vertEq=function(t,r){return t.s===r.s&&t.t===r.t},e.vertLeq=function(t,r){return t.s<r.s||t.s===r.s&&t.t<=r.t},e.transLeq=function(t,r){return t.t<r.t||t.t===r.t&&t.s<=r.s},e.edgeGoesLeft=function(t){return e.vertLeq(t.Dst,t.Org)},e.edgeGoesRight=function(t){return e.vertLeq(t.Org,t.Dst)},e.vertL1dist=function(t,r){return Math.abs(t.s-r.s)+Math.abs(t.t-r.t)},e.edgeEval=function(t,r,i){Yt(e.vertLeq(t,r)&&e.vertLeq(r,i));var n=r.s-t.s,a=i.s-r.s;return n+a>0?n<a?r.t-t.t+(t.t-i.t)*(n/(n+a)):r.t-i.t+(i.t-t.t)*(a/(n+a)):0},e.edgeSign=function(t,r,i){Yt(e.vertLeq(t,r)&&e.vertLeq(r,i));var n=r.s-t.s,a=i.s-r.s;return n+a>0?(r.t-i.t)*n+(r.t-t.t)*a:0},e.transEval=function(t,r,i){Yt(e.transLeq(t,r)&&e.transLeq(r,i));var n=r.t-t.t,a=i.t-r.t;return n+a>0?n<a?r.s-t.s+(t.s-i.s)*(n/(n+a)):r.s-i.s+(i.s-t.s)*(a/(n+a)):0},e.transSign=function(t,r,i){Yt(e.transLeq(t,r)&&e.transLeq(r,i));var n=r.t-t.t,a=i.t-r.t;return n+a>0?(r.s-i.s)*n+(r.s-t.s)*a:0},e.vertCCW=function(t,r,i){return t.s*(r.t-i.t)+r.s*(i.t-t.t)+i.s*(t.t-r.t)>=0},e.interpolate=function(t,r,i,n){return t=t<0?0:t,i=i<0?0:i,t<=i?i===0?(r+n)/2:r+(n-r)*(t/(t+i)):n+(r-n)*(i/(t+i))},e.intersect=function(t,r,i,n,a){var o,s,l;e.vertLeq(t,r)||(l=t,t=r,r=l),e.vertLeq(i,n)||(l=i,i=n,n=l),e.vertLeq(t,i)||(l=t,t=i,i=l,l=r,r=n,n=l),e.vertLeq(i,r)?e.vertLeq(r,n)?(o=e.edgeEval(t,i,r),s=e.edgeEval(i,r,n),o+s<0&&(o=-o,s=-s),a.s=e.interpolate(o,i.s,s,r.s)):(o=e.edgeSign(t,i,r),s=-e.edgeSign(t,n,r),o+s<0&&(o=-o,s=-s),a.s=e.interpolate(o,i.s,s,n.s)):a.s=(i.s+r.s)/2,e.transLeq(t,r)||(l=t,t=r,r=l),e.transLeq(i,n)||(l=i,i=n,n=l),e.transLeq(t,i)||(l=t,t=i,i=l,l=r,r=n,n=l),e.transLeq(i,r)?e.transLeq(r,n)?(o=e.transEval(t,i,r),s=e.transEval(i,r,n),o+s<0&&(o=-o,s=-s),a.t=e.interpolate(o,i.t,s,r.t)):(o=e.transSign(t,i,r),s=-e.transSign(t,n,r),o+s<0&&(o=-o,s=-s),a.t=e.interpolate(o,i.t,s,n.t)):a.t=(i.t+r.t)/2},e}(),px=function(){function e(){this.next=null,this.prev=null,this.anEdge=null,this.trail=null,this.n=0,this.marked=!1,this.inside=!1}return e}(),w5=function(){function e(t){this.side=t,this.next=null,this.Org=null,this.Sym=null,this.Onext=null,this.Lnext=null,this.Lface=null,this.activeRegion=null,this.winding=0}return Object.defineProperty(e.prototype,"Rface",{get:function(){return this.Sym.Lface},set:function(t){this.Sym.Lface=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"Dst",{get:function(){return this.Sym.Org},set:function(t){this.Sym.Org=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"Oprev",{get:function(){return this.Sym.Lnext},set:function(t){this.Sym.Lnext=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"Lprev",{get:function(){return this.Onext.Sym},set:function(t){this.Onext.Sym=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"Dprev",{get:function(){return this.Lnext.Sym},set:function(t){this.Lnext.Sym=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"Rprev",{get:function(){return this.Sym.Onext},set:function(t){this.Sym.Onext=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"Dnext",{get:function(){return this.Sym.Onext.Sym},set:function(t){this.Sym.Onext.Sym=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"Rnext",{get:function(){return this.Sym.Lnext.Sym},set:function(t){this.Sym.Lnext.Sym=t},enumerable:!0,configurable:!0}),e}(),Rg=function(){function e(){this.next=null,this.prev=null,this.anEdge=null,this.coords=[0,0,0],this.s=0,this.t=0,this.pqHandle=0,this.n=0,this.idx=0}return e}(),Jte=function(){function e(){var t=new Rg,r=new px,i=new w5(0),n=new w5(1);t.next=t.prev=t,t.anEdge=null,r.next=r.prev=r,i.next=i,i.Sym=n,n.next=n,n.Sym=i,this.vHead=t,this.fHead=r,this.eHead=i,this.eHeadSym=n}return e.prototype.makeEdge_=function(t){var r=new w5(0),i=new w5(1);t.Sym.side<t.side&&(t=t.Sym);var n=t.Sym.next;return i.next=n,n.Sym.next=r,r.next=t,t.Sym.next=i,r.Sym=i,r.Onext=r,r.Lnext=i,r.Org=null,r.Lface=null,r.winding=0,r.activeRegion=null,i.Sym=r,i.Onext=i,i.Lnext=r,i.Org=null,i.Lface=null,i.winding=0,i.activeRegion=null,r},e.prototype.splice_=function(t,r){var i=t.Onext,n=r.Onext;i.Sym.Lnext=r,n.Sym.Lnext=t,t.Onext=n,r.Onext=i},e.prototype.makeVertex_=function(t,r,i){var n=t;Yt(n,"Vertex can't be null!");var a=i.prev;n.prev=a,a.next=n,n.next=i,i.prev=n,n.anEdge=r;var o=r;do o.Org=n,o=o.Onext;while(o!==r)},e.prototype.makeFace_=function(t,r,i){var n=t;Yt(n,"Face can't be null");var a=i.prev;n.prev=a,a.next=n,n.next=i,i.prev=n,n.anEdge=r,n.trail=null,n.marked=!1,n.inside=i.inside;var o=r;do o.Lface=n,o=o.Lnext;while(o!==r)},e.prototype.killEdge_=function(t){t.Sym.side<t.side&&(t=t.Sym);var r=t.next,i=t.Sym.next;r.Sym.next=i,i.Sym.next=r},e.prototype.killVertex_=function(t,r){var i=t.anEdge,n=i;do n.Org=r,n=n.Onext;while(n!==i);var a=t.prev,o=t.next;o.prev=a,a.next=o},e.prototype.killFace_=function(t,r){var i=t.anEdge,n=i;do n.Lface=r,n=n.Lnext;while(n!==i);var a=t.prev,o=t.next;o.prev=a,a.next=o},e.prototype.makeEdge=function(){var t=new Rg,r=new Rg,i=new px,n=this.makeEdge_(this.eHead);return this.makeVertex_(t,n,this.vHead),this.makeVertex_(r,n.Sym,this.vHead),this.makeFace_(i,n,this.fHead),n},e.prototype.splice=function(t,r){var i=!1,n=!1;if(t!==r){if(r.Org!==t.Org&&(n=!0,this.killVertex_(r.Org,t.Org)),r.Lface!==t.Lface&&(i=!0,this.killFace_(r.Lface,t.Lface)),this.splice_(r,t),!n){var a=new Rg;this.makeVertex_(a,r,t.Org),t.Org.anEdge=t}if(!i){var o=new px;this.makeFace_(o,r,t.Lface),t.Lface.anEdge=t}}},e.prototype.delete=function(t){var r=t.Sym,i=!1;if(t.Lface!==t.Rface&&(i=!0,this.killFace_(t.Lface,t.Rface)),t.Onext===t)this.killVertex_(t.Org,null);else if(t.Rface.anEdge=t.Oprev,t.Org.anEdge=t.Onext,this.splice_(t,t.Oprev),!i){var n=new px;this.makeFace_(n,t,t.Lface)}r.Onext===r?(this.killVertex_(r.Org,null),this.killFace_(r.Lface,null)):(t.Lface.anEdge=r.Oprev,r.Org.anEdge=r.Onext,this.splice_(r,r.Oprev)),this.killEdge_(t)},e.prototype.addEdgeVertex=function(t){var r=this.makeEdge_(t),i=r.Sym;this.splice_(r,t.Lnext),r.Org=t.Dst;var n=new Rg;return this.makeVertex_(n,i,r.Org),r.Lface=i.Lface=t.Lface,r},e.prototype.splitEdge=function(t){var r=this.addEdgeVertex(t),i=r.Sym;return this.splice_(t.Sym,t.Sym.Oprev),this.splice_(t.Sym,i),t.Dst=i.Org,i.Dst.anEdge=i.Sym,i.Rface=t.Rface,i.winding=t.winding,i.Sym.winding=t.Sym.winding,i.idx=t.idx,i.Sym.idx=t.Sym.idx,i},e.prototype.connect=function(t,r){var i=!1,n=this.makeEdge_(t),a=n.Sym;if(r.Lface!==t.Lface&&(i=!0,this.killFace_(r.Lface,t.Lface)),this.splice_(n,t.Lnext),this.splice_(a,r),n.Org=t.Dst,a.Org=r.Org,n.Lface=a.Lface=t.Lface,t.Lface.anEdge=a,!i){var o=new px;this.makeFace_(o,n,t.Lface)}return n},e.prototype.zapFace=function(t){var r=t.anEdge,i,n,a,o,s;n=r.Lnext;do i=n,n=i.Lnext,i.Lface=null,i.Rface===null&&(i.Onext===i?this.killVertex_(i.Org,null):(i.Org.anEdge=i.Onext,this.splice_(i,i.Oprev)),a=i.Sym,a.Onext===a?this.killVertex_(a.Org,null):(a.Org.anEdge=a.Onext,this.splice_(a,a.Oprev)),this.killEdge_(i));while(i!=r);o=t.prev,s=t.next,s.prev=o,o.next=s},e.prototype.countFaceVerts_=function(t){var r=t.anEdge,i=0;do i++,r=r.Lnext;while(r!==t.anEdge);return i},e.prototype.mergeConvexFaces=function(t){var r,i,n,a,o,s,l;for(r=this.fHead.next;r!==this.fHead;r=r.next)if(r.inside)for(i=r.anEdge,o=i.Org;n=i.Lnext,a=i.Sym,a&&a.Lface&&a.Lface.inside&&(s=this.countFaceVerts_(r),l=this.countFaceVerts_(a.Lface),s+l-2<=t&&Rt.vertCCW(i.Lprev.Org,i.Org,a.Lnext.Lnext.Org)&&Rt.vertCCW(a.Lprev.Org,a.Org,i.Lnext.Lnext.Org)&&(n=a.Lnext,this.delete(a),i=null,a=null)),!(i&&i.Lnext.Org===o);)i=n;return!0},e.prototype.check=function(){var t=this.fHead,r=this.vHead,i=this.eHead,n,a,o,s,l,u;for(a=t,a=t;(n=a.next)!==t;a=n){Yt(n.prev===a),l=n.anEdge;do Yt(l.Sym!==l),Yt(l.Sym.Sym===l),Yt(l.Lnext.Onext.Sym===l),Yt(l.Onext.Sym.Lnext===l),Yt(l.Lface===n),l=l.Lnext;while(l!==n.anEdge)}for(Yt(n.prev===a&&n.anEdge===null),s=r,s=r;(o=s.next)!==r;s=o){Yt(o.prev===s),l=o.anEdge;do Yt(l.Sym!==l),Yt(l.Sym.Sym===l),Yt(l.Lnext.Onext.Sym===l),Yt(l.Onext.Sym.Lnext===l),Yt(l.Org===o),l=l.Onext;while(l!==o.anEdge)}for(Yt(o.prev===s&&o.anEdge===null),u=i,u=i;(l=u.next)!==i;u=l)Yt(l.Sym.next===u.Sym),Yt(l.Sym!==l),Yt(l.Sym.Sym===l),Yt(l.Org!==null),Yt(l.Dst!==null),Yt(l.Lnext.Onext.Sym===l),Yt(l.Onext.Sym.Lnext===l);Yt(l.Sym.next===u.Sym&&l.Sym===this.eHeadSym&&l.Sym.Sym===l&&l.Org===null&&l.Dst===null&&l.Lface===null&&l.Rface===null)},e}(),$te=function(){function e(){this.handle=null}return e}(),ere=function(){function e(){this.key=null,this.node=0}return e}(),k4t=function(){function e(t,r){this.leq=r,this.max=0,this.nodes=[],this.handles=[],this.initialized=!1,this.freeList=0,this.size=0,this.max=t,this.nodes=[],this.handles=[];for(var i=0;i<t+1;i++)this.nodes[i]=new $te,this.handles[i]=new ere;this.initialized=!1,this.nodes[1].handle=1,this.handles[1].key=null}return e.prototype.floatDown_=function(t){var r=this.nodes,i=this.handles,n,a,o;for(n=r[t].handle;;){if(o=t<<1,o<this.size&&this.leq(i[r[o+1].handle].key,i[r[o].handle].key)&&++o,Yt(o<=this.max),a=r[o].handle,o>this.size||this.leq(i[n].key,i[a].key)){r[t].handle=n,i[n].node=t;break}r[t].handle=a,i[a].node=t,t=o}},e.prototype.floatUp_=function(t){var r=this.nodes,i=this.handles,n,a,o;for(n=r[t].handle;;){if(o=t>>1,a=r[o].handle,o===0||this.leq(i[a].key,i[n].key)){r[t].handle=n,i[n].node=t;break}r[t].handle=a,i[a].node=t,t=o}},e.prototype.init=function(){for(var t=this.size;t>=1;--t)this.floatDown_(t);this.initialized=!0},e.prototype.min=function(){return this.handles[this.nodes[1].handle].key},e.prototype.insert=function(t){var r,i;if(r=++this.size,r*2>this.max){this.max*=2;var n,a;for(a=this.nodes.length,this.nodes.length=this.max+1,n=a;n<this.nodes.length;n++)this.nodes[n]=new $te;for(a=this.handles.length,this.handles.length=this.max+1,n=a;n<this.handles.length;n++)this.handles[n]=new ere}return this.freeList===0?i=r:(i=this.freeList,this.freeList=this.handles[i].node),this.nodes[r].handle=i,this.handles[i].node=r,this.handles[i].key=t,this.initialized&&this.floatUp_(r),i},e.prototype.extractMin=function(){var t=this.nodes,r=this.handles,i=t[1].handle,n=r[i].key;return this.size>0&&(t[1].handle=t[this.size].handle,r[t[1].handle].node=1,r[i].key=null,r[i].node=this.freeList,this.freeList=i,--this.size,this.size>0&&this.floatDown_(1)),n},e.prototype.delete=function(t){var r=this.nodes,i=this.handles,n;Yt(t>=1&&t<=this.max&&i[t].key!==null),n=i[t].node,r[n].handle=r[this.size].handle,i[r[n].handle].node=n,--this.size,n<=this.size&&(n<=1||this.leq(i[r[n>>1].handle].key,i[r[n].handle].key)?this.floatDown_(n):this.floatUp_(n)),i[t].key=null,i[t].node=this.freeList,this.freeList=t},e}(),$P=function(){function e(){this.eUp=null,this.nodeUp=null,this.windingNumber=0,this.inside=!1,this.sentinel=!1,this.dirty=!1,this.fixUpperEdge=!1}return e}(),tre=function(){function e(){this.key=null,this.next=null,this.prev=null}return e}(),R4t=function(){function e(t,r){this.frame=t,this.leq=r,this.head=new tre,this.head.next=this.head,this.head.prev=this.head}return e.prototype.min=function(){return this.head.next},e.prototype.max=function(){return this.head.prev},e.prototype.insert=function(t){return this.insertBefore(this.head,t)},e.prototype.search=function(t){var r=this.head;do r=r.next;while(r.key!==null&&!this.leq(this.frame,t,r.key));return r},e.prototype.insertBefore=function(t,r){do t=t.prev;while(t.key!==null&&!this.leq(this.frame,t.key,r));var i=new tre;return i.key=r,i.next=t.next,t.next.prev=i,i.prev=t,t.next=i,i},e.prototype.delete=function(t){t.next.prev=t.prev,t.prev.next=t.next},e}(),O4t=function(){function e(){}return e.regionBelow=function(t){return t.nodeUp.prev.key},e.regionAbove=function(t){return t.nodeUp.next.key},e.debugEvent=function(t){},e.addWinding=function(t,r){t.winding+=r.winding,t.Sym.winding+=r.Sym.winding},e.edgeLeq=function(t,r,i){var n=t.event,a=r.eUp,o=i.eUp;if(a.Dst===n)return o.Dst===n?Rt.vertLeq(a.Org,o.Org)?Rt.edgeSign(o.Dst,a.Org,o.Org)<=0:Rt.edgeSign(a.Dst,o.Org,a.Org)>=0:Rt.edgeSign(o.Dst,n,o.Org)<=0;if(o.Dst===n)return Rt.edgeSign(a.Dst,n,a.Org)>=0;var s=Rt.edgeEval(a.Dst,n,a.Org),l=Rt.edgeEval(o.Dst,n,o.Org);return s>=l},e.deleteRegion=function(t,r){r.fixUpperEdge&&Yt(r.eUp.winding===0),r.eUp.activeRegion=null,t.dict.delete(r.nodeUp)},e.fixUpperEdge=function(t,r,i){Yt(r.fixUpperEdge),t.mesh.delete(r.eUp),r.fixUpperEdge=!1,r.eUp=i,i.activeRegion=r},e.topLeftRegion=function(t,r){var i=r.eUp.Org,n;do r=e.regionAbove(r);while(r.eUp.Org===i);if(r.fixUpperEdge){if(n=t.mesh.connect(e.regionBelow(r).eUp.Sym,r.eUp.Lnext),n===null)return null;e.fixUpperEdge(t,r,n),r=e.regionAbove(r)}return r},e.topRightRegion=function(t){var r=t.eUp.Dst;do t=e.regionAbove(t);while(t.eUp.Dst===r);return t},e.addRegionBelow=function(t,r,i){var n=new $P;return n.eUp=i,n.nodeUp=t.dict.insertBefore(r.nodeUp,n),n.fixUpperEdge=!1,n.sentinel=!1,n.dirty=!1,i.activeRegion=n,n},e.isWindingInside=function(t,r){switch(t.windingRule){case Mi.ODD:return(r&1)!==0;case Mi.NONZERO:return r!==0;case Mi.POSITIVE:return r>0;case Mi.NEGATIVE:return r<0;case Mi.ABS_GEQ_TWO:return r>=2||r<=-2}throw new Error("Invalid winding rulle")},e.computeWinding=function(t,r){r.windingNumber=e.regionAbove(r).windingNumber+r.eUp.winding,r.inside=e.isWindingInside(t,r.windingNumber)},e.finishRegion=function(t,r){var i=r.eUp,n=i.Lface;n.inside=r.inside,n.anEdge=i,e.deleteRegion(t,r)},e.finishLeftRegions=function(t,r,i){for(var n,a=null,o=r,s=r.eUp;o!==i;){if(o.fixUpperEdge=!1,a=e.regionBelow(o),n=a.eUp,n.Org!=s.Org){if(!a.fixUpperEdge){e.finishRegion(t,o);break}n=t.mesh.connect(s.Lprev,n.Sym),e.fixUpperEdge(t,a,n)}s.Onext!==n&&(t.mesh.splice(n.Oprev,n),t.mesh.splice(s,n)),e.finishRegion(t,o),s=a.eUp,o=a}return s},e.addRightEdges=function(t,r,i,n,a,o){var s,l,u,c,h=!0;u=i;do Yt(Rt.vertLeq(u.Org,u.Dst)),e.addRegionBelow(t,r,u.Sym),u=u.Onext;while(u!==n);for(a===null&&(a=e.regionBelow(r).eUp.Rprev),l=r,c=a;s=e.regionBelow(l),u=s.eUp.Sym,u.Org===c.Org;)u.Onext!==c&&(t.mesh.splice(u.Oprev,u),t.mesh.splice(c.Oprev,u)),s.windingNumber=l.windingNumber-u.winding,s.inside=e.isWindingInside(t,s.windingNumber),l.dirty=!0,!h&&e.checkForRightSplice(t,l)&&(e.addWinding(u,c),e.deleteRegion(t,l),t.mesh.delete(c)),h=!1,l=s,c=u;l.dirty=!0,Yt(l.windingNumber-u.winding===s.windingNumber),o&&e.walkDirtyRegions(t,l)},e.spliceMergeVertices=function(t,r,i){t.mesh.splice(r,i)},e.vertexWeights=function(t,r,i){var n=Rt.vertL1dist(r,t),a=Rt.vertL1dist(i,t),o=.5*a/(n+a),s=.5*n/(n+a);t.coords[0]+=o*r.coords[0]+s*i.coords[0],t.coords[1]+=o*r.coords[1]+s*i.coords[1],t.coords[2]+=o*r.coords[2]+s*i.coords[2]},e.getIntersectData=function(t,r,i,n,a,o){r.coords[0]=r.coords[1]=r.coords[2]=0,r.idx=-1,e.vertexWeights(r,i,n),e.vertexWeights(r,a,o)},e.checkForRightSplice=function(t,r){var i=e.regionBelow(r),n=r.eUp,a=i.eUp;if(Rt.vertLeq(n.Org,a.Org)){if(Rt.edgeSign(a.Dst,n.Org,a.Org)>0)return!1;Rt.vertEq(n.Org,a.Org)?n.Org!==a.Org&&(t.pq.delete(n.Org.pqHandle),e.spliceMergeVertices(t,a.Oprev,n)):(t.mesh.splitEdge(a.Sym),t.mesh.splice(n,a.Oprev),r.dirty=i.dirty=!0)}else{if(Rt.edgeSign(n.Dst,a.Org,n.Org)<0)return!1;e.regionAbove(r).dirty=r.dirty=!0,t.mesh.splitEdge(n.Sym),t.mesh.splice(a.Oprev,n)}return!0},e.checkForLeftSplice=function(t,r){var i=e.regionBelow(r),n=r.eUp,a=i.eUp,o;if(Yt(!Rt.vertEq(n.Dst,a.Dst)),Rt.vertLeq(n.Dst,a.Dst)){if(Rt.edgeSign(n.Dst,a.Dst,n.Org)<0)return!1;e.regionAbove(r).dirty=r.dirty=!0,o=t.mesh.splitEdge(n),t.mesh.splice(a.Sym,o),o.Lface.inside=r.inside}else{if(Rt.edgeSign(a.Dst,n.Dst,a.Org)>0)return!1;r.dirty=i.dirty=!0,o=t.mesh.splitEdge(a),t.mesh.splice(n.Lnext,a.Sym),o.Rface.inside=r.inside}return!0},e.checkForIntersect=function(t,r){var i=e.regionBelow(r),n=r.eUp,a=i.eUp,o=n.Org,s=a.Org,l=n.Dst,u=a.Dst,c,h,d=new Rg,f,p;if(Yt(!Rt.vertEq(u,l)),Yt(Rt.edgeSign(l,t.event,o)<=0),Yt(Rt.edgeSign(u,t.event,s)>=0),Yt(o!==t.event&&s!==t.event),Yt(!r.fixUpperEdge&&!i.fixUpperEdge),o===s||(c=Math.min(o.t,l.t),h=Math.max(s.t,u.t),c>h))return!1;if(Rt.vertLeq(o,s)){if(Rt.edgeSign(u,o,s)>0)return!1}else if(Rt.edgeSign(l,s,o)<0)return!1;return e.debugEvent(t),Rt.intersect(l,o,u,s,d),Yt(Math.min(o.t,l.t)<=d.t),Yt(d.t<=Math.max(s.t,u.t)),Yt(Math.min(u.s,l.s)<=d.s),Yt(d.s<=Math.max(s.s,o.s)),Rt.vertLeq(d,t.event)&&(d.s=t.event.s,d.t=t.event.t),f=Rt.vertLeq(o,s)?o:s,Rt.vertLeq(f,d)&&(d.s=f.s,d.t=f.t),Rt.vertEq(d,o)||Rt.vertEq(d,s)?(e.checkForRightSplice(t,r),!1):!Rt.vertEq(l,t.event)&&Rt.edgeSign(l,t.event,d)>=0||!Rt.vertEq(u,t.event)&&Rt.edgeSign(u,t.event,d)<=0?u===t.event?(t.mesh.splitEdge(n.Sym),t.mesh.splice(a.Sym,n),r=e.topLeftRegion(t,r),n=e.regionBelow(r).eUp,e.finishLeftRegions(t,e.regionBelow(r),i),e.addRightEdges(t,r,n.Oprev,n,n,!0),!0):l===t.event?(t.mesh.splitEdge(a.Sym),t.mesh.splice(n.Lnext,a.Oprev),i=r,r=e.topRightRegion(r),p=e.regionBelow(r).eUp.Rprev,i.eUp=a.Oprev,a=e.finishLeftRegions(t,i,null),e.addRightEdges(t,r,a.Onext,n.Rprev,p,!0),!0):(Rt.edgeSign(l,t.event,d)>=0&&(e.regionAbove(r).dirty=r.dirty=!0,t.mesh.splitEdge(n.Sym),n.Org.s=t.event.s,n.Org.t=t.event.t),Rt.edgeSign(u,t.event,d)<=0&&(r.dirty=i.dirty=!0,t.mesh.splitEdge(a.Sym),a.Org.s=t.event.s,a.Org.t=t.event.t),!1):(t.mesh.splitEdge(n.Sym),t.mesh.splitEdge(a.Sym),t.mesh.splice(a.Oprev,n),n.Org.s=d.s,n.Org.t=d.t,n.Org.pqHandle=t.pq.insert(n.Org),e.getIntersectData(t,n.Org,o,l,s,u),e.regionAbove(r).dirty=r.dirty=i.dirty=!0,!1)},e.walkDirtyRegions=function(t,r){for(var i=e.regionBelow(r),n,a;;){for(;i.dirty;)r=i,i=e.regionBelow(i);if(!r.dirty&&(i=r,r=e.regionAbove(r),r===null||!r.dirty))return;if(r.dirty=!1,n=r.eUp,a=i.eUp,n.Dst!==a.Dst&&e.checkForLeftSplice(t,r)&&(i.fixUpperEdge?(e.deleteRegion(t,i),t.mesh.delete(a),i=e.regionBelow(r),a=i.eUp):r.fixUpperEdge&&(e.deleteRegion(t,r),t.mesh.delete(n),r=e.regionAbove(i),n=r.eUp)),n.Org!==a.Org)if(n.Dst!==a.Dst&&!r.fixUpperEdge&&!i.fixUpperEdge&&(n.Dst===t.event||a.Dst===t.event)){if(e.checkForIntersect(t,r))return}else e.checkForRightSplice(t,r);n.Org===a.Org&&n.Dst===a.Dst&&(e.addWinding(a,n),e.deleteRegion(t,r),t.mesh.delete(n),r=e.regionAbove(i))}},e.connectRightVertex=function(t,r,i){var n,a=i.Onext,o=e.regionBelow(r),s=r.eUp,l=o.eUp,u=!1;if(s.Dst!==l.Dst&&e.checkForIntersect(t,r),Rt.vertEq(s.Org,t.event)&&(t.mesh.splice(a.Oprev,s),r=e.topLeftRegion(t,r),a=e.regionBelow(r).eUp,e.finishLeftRegions(t,e.regionBelow(r),o),u=!0),Rt.vertEq(l.Org,t.event)&&(t.mesh.splice(i,l.Oprev),i=e.finishLeftRegions(t,o,null),u=!0),u){e.addRightEdges(t,r,i.Onext,a,a,!0);return}Rt.vertLeq(l.Org,s.Org)?n=l.Oprev:n=s,n=t.mesh.connect(i.Lprev,n),e.addRightEdges(t,r,n,n.Onext,n.Onext,!1),n.Sym.activeRegion.fixUpperEdge=!0,e.walkDirtyRegions(t,r)},e.connectLeftDegenerate=function(t,r,i){var n,a,o,s,l;if(n=r.eUp,Rt.vertEq(n.Org,i)){Yt(!1),e.spliceMergeVertices(t,n,i.anEdge);return}if(!Rt.vertEq(n.Dst,i)){t.mesh.splitEdge(n.Sym),r.fixUpperEdge&&(t.mesh.delete(n.Onext),r.fixUpperEdge=!1),t.mesh.splice(i.anEdge,n),e.sweepEvent(t,i);return}Yt(!1),r=e.topRightRegion(r),l=e.regionBelow(r),o=l.eUp.Sym,a=s=o.Onext,l.fixUpperEdge&&(Yt(a!==o),e.deleteRegion(t,l),t.mesh.delete(o),o=a.Oprev),t.mesh.splice(i.anEdge,o),Rt.edgeGoesLeft(a)||(a=null),e.addRightEdges(t,r,o.Onext,s,a,!0)},e.connectLeftVertex=function(t,r){var i,n,a,o,s,l,u=new $P;if(u.eUp=r.anEdge.Sym,i=t.dict.search(u).key,n=e.regionBelow(i),!!n){if(o=i.eUp,s=n.eUp,Rt.edgeSign(o.Dst,r,o.Org)===0){e.connectLeftDegenerate(t,i,r);return}if(a=Rt.vertLeq(s.Dst,o.Dst)?i:n,i.inside||a.fixUpperEdge){if(a===i)l=t.mesh.connect(r.anEdge.Sym,o.Lnext);else{var c=t.mesh.connect(s.Dnext,r.anEdge);l=c.Sym}a.fixUpperEdge?e.fixUpperEdge(t,a,l):e.computeWinding(t,e.addRegionBelow(t,i,l)),e.sweepEvent(t,r)}else e.addRightEdges(t,i,r.anEdge,r.anEdge,null,!0)}},e.sweepEvent=function(t,r){t.event=r,e.debugEvent(t);for(var i=r.anEdge;i.activeRegion===null;)if(i=i.Onext,i===r.anEdge){e.connectLeftVertex(t,r);return}var n=e.topLeftRegion(t,i.activeRegion);Yt(n!==null);var a=e.regionBelow(n),o=a.eUp,s=e.finishLeftRegions(t,a,null);s.Onext===o?e.connectRightVertex(t,n,s):e.addRightEdges(t,n,s.Onext,o,o,!0)},e.addSentinel=function(t,r,i,n){var a=new $P,o=t.mesh.makeEdge();o.Org.s=i,o.Org.t=n,o.Dst.s=r,o.Dst.t=n,t.event=o.Dst,a.eUp=o,a.windingNumber=0,a.inside=!1,a.fixUpperEdge=!1,a.sentinel=!0,a.dirty=!1,a.nodeUp=t.dict.insert(a)},e.initEdgeDict=function(t){t.dict=new R4t(t,e.edgeLeq);var r=t.bmax[0]-t.bmin[0],i=t.bmax[1]-t.bmin[1],n=t.bmin[0]-r,a=t.bmax[0]+r,o=t.bmin[1]-i,s=t.bmax[1]+i;e.addSentinel(t,n,a,o),e.addSentinel(t,n,a,s)},e.doneEdgeDict=function(t){for(var r,i=0;(r=t.dict.min().key)!==null;)r.sentinel||(Yt(r.fixUpperEdge),Yt(++i===1)),Yt(r.windingNumber===0),e.deleteRegion(t,r)},e.removeDegenerateEdges=function(t){var r,i,n,a=t.mesh.eHead;for(r=a.next;r!==a;r=i)i=r.next,n=r.Lnext,Rt.vertEq(r.Org,r.Dst)&&r.Lnext.Lnext!==r&&(e.spliceMergeVertices(t,n,r),t.mesh.delete(r),r=n,n=r.Lnext),n.Lnext===r&&(n!==r&&((n===i||n===i.Sym)&&(i=i.next),t.mesh.delete(n)),(r===i||r===i.Sym)&&(i=i.next),t.mesh.delete(r))},e.initPriorityQ=function(t){var r,i,n,a=0;for(n=t.mesh.vHead,i=n.next;i!==n;i=i.next)a++;for(a+=8,r=t.pq=new k4t(a,Rt.vertLeq),n=t.mesh.vHead,i=n.next;i!==n;i=i.next)i.pqHandle=r.insert(i);return i!==n?!1:(r.init(),!0)},e.donePriorityQ=function(t){t.pq=null},e.removeDegenerateFaces=function(t,r){var i,n,a;for(i=r.fHead.next;i!==r.fHead;i=n)n=i.next,a=i.anEdge,Yt(a.Lnext!==a),a.Lnext.Lnext===a&&(e.addWinding(a.Onext,a),t.mesh.delete(a));return!0},e.computeInterior=function(t,r){r===void 0&&(r=!0);var i,n;if(e.removeDegenerateEdges(t),!e.initPriorityQ(t))return!1;for(e.initEdgeDict(t);(i=t.pq.extractMin())!==null;){for(;n=t.pq.min(),!(n===null||!Rt.vertEq(n,i));)n=t.pq.extractMin(),e.spliceMergeVertices(t,i.anEdge,n.anEdge);e.sweepEvent(t,i)}return t.event=t.dict.min().key.eUp.Org,e.debugEvent(t),e.doneEdgeDict(t),e.donePriorityQ(t),e.removeDegenerateFaces(t,t.mesh)?(r&&t.mesh.check(),!0):!1},e}(),B4t=function(){function e(){this.mesh=new Jte,this.normal=[0,0,0],this.sUnit=[0,0,0],this.tUnit=[0,0,0],this.bmin=[0,0],this.bmax=[0,0],this.windingRule=Mi.ODD,this.dict=null,this.pq=null,this.event=null,this.vertexIndexCounter=0,this.vertices=[],this.vertexIndices=[],this.vertexCount=0,this.elements=[],this.elementCount=0}return e.prototype.dot_=function(t,r){return t[0]*r[0]+t[1]*r[1]+t[2]*r[2]},e.prototype.normalize_=function(t){var r=t[0]*t[0]+t[1]*t[1]+t[2]*t[2];if(!r)throw"Zero-size vector!";r=Math.sqrt(r),t[0]/=r,t[1]/=r,t[2]/=r},e.prototype.longAxis_=function(t){var r=0;return Math.abs(t[1])>Math.abs(t[0])&&(r=1),Math.abs(t[2])>Math.abs(t[r])&&(r=2),r},e.prototype.computeNormal_=function(t){var r,i,n,a,o,s,l=[0,0,0],u=[0,0,0],c=[0,0,0],h=[0,0,0],d=[0,0,0],f=[null,null,null],p=[null,null,null],v=this.mesh.vHead;r=v.next;for(var m=0;m<3;++m)a=r.coords[m],u[m]=a,p[m]=r,l[m]=a,f[m]=r;for(r=v.next;r!==v;r=r.next)for(var g=0;g<3;++g)a=r.coords[g],a<u[g]&&(u[g]=a,p[g]=r),a>l[g]&&(l[g]=a,f[g]=r);var y=0;if(l[1]-u[1]>l[0]-u[0]&&(y=1),l[2]-u[2]>l[y]-u[y]&&(y=2),u[y]>=l[y]){t[0]=0,t[1]=0,t[2]=1;return}for(s=0,i=p[y],n=f[y],c[0]=i.coords[0]-n.coords[0],c[1]=i.coords[1]-n.coords[1],c[2]=i.coords[2]-n.coords[2],r=v.next;r!==v;r=r.next)h[0]=r.coords[0]-n.coords[0],h[1]=r.coords[1]-n.coords[1],h[2]=r.coords[2]-n.coords[2],d[0]=c[1]*h[2]-c[2]*h[1],d[1]=c[2]*h[0]-c[0]*h[2],d[2]=c[0]*h[1]-c[1]*h[0],o=d[0]*d[0]+d[1]*d[1]+d[2]*d[2],o>s&&(s=o,t[0]=d[0],t[1]=d[1],t[2]=d[2]);s<=0&&(t[0]=t[1]=t[2]=0,t[this.longAxis_(c)]=1)},e.prototype.checkOrientation_=function(){for(var t=this.mesh.fHead,r,i=this.mesh.vHead,n,a=0,o=t.next;o!==t;o=o.next)if(n=o.anEdge,!(n.winding<=0))do a+=(n.Org.s-n.Dst.s)*(n.Org.t+n.Dst.t),n=n.Lnext;while(n!==o.anEdge);if(a<0){for(r=i.next;r!==i;r=r.next)r.t=-r.t;this.tUnit[0]=-this.tUnit[0],this.tUnit[1]=-this.tUnit[1],this.tUnit[2]=-this.tUnit[2]}},e.prototype.projectPolygon_=function(){var t=this.mesh.vHead,r=[0,0,0],i,n,a=!1;r[0]=this.normal[0],r[1]=this.normal[1],r[2]=this.normal[2],!r[0]&&!r[1]&&!r[2]&&(this.computeNormal_(r),a=!0),i=this.sUnit,n=this.tUnit;var o=this.longAxis_(r);i[o]=0,i[(o+1)%3]=1,i[(o+2)%3]=0,n[o]=0,n[(o+1)%3]=0,n[(o+2)%3]=r[o]>0?1:-1;for(var s=t.next;s!==t;s=s.next)s.s=this.dot_(s.coords,i),s.t=this.dot_(s.coords,n);a&&this.checkOrientation_();for(var l=!0,u=t.next;u!==t;u=u.next)l?(this.bmin[0]=this.bmax[0]=u.s,this.bmin[1]=this.bmax[1]=u.t,l=!1):(u.s<this.bmin[0]&&(this.bmin[0]=u.s),u.s>this.bmax[0]&&(this.bmax[0]=u.s),u.t<this.bmin[1]&&(this.bmin[1]=u.t),u.t>this.bmax[1]&&(this.bmax[1]=u.t))},e.prototype.addWinding_=function(t,r){t.winding+=r.winding,t.Sym.winding+=r.Sym.winding},e.prototype.tessellateMonoRegion_=function(t,r){var i,n;if(i=r.anEdge,!(i.Lnext!==i&&i.Lnext.Lnext!==i))throw"Mono region invalid";for(;Rt.vertLeq(i.Dst,i.Org);i=i.Lprev);for(;Rt.vertLeq(i.Org,i.Dst);i=i.Lnext);n=i.Lprev;for(var a=void 0;i.Lnext!==n;)if(Rt.vertLeq(i.Dst,n.Org)){for(;n.Lnext!==i&&(Rt.edgeGoesLeft(n.Lnext)||Rt.edgeSign(n.Org,n.Dst,n.Lnext.Dst)<=0);)a=t.connect(n.Lnext,n),n=a.Sym;n=n.Lprev}else{for(;n.Lnext!==i&&(Rt.edgeGoesRight(i.Lprev)||Rt.edgeSign(i.Dst,i.Org,i.Lprev.Org)>=0);)a=t.connect(i,i.Lprev),i=a.Sym;i=i.Lnext}if(n.Lnext===i)throw"Mono region invalid";for(;n.Lnext.Lnext!==i;)a=t.connect(n.Lnext,n),n=a.Sym;return!0},e.prototype.tessellateInterior_=function(t){for(var r,i=t.fHead.next;i!==t.fHead;i=r)if(r=i.next,i.inside&&!this.tessellateMonoRegion_(t,i))return!1;return!0},e.prototype.discardExterior_=function(t){for(var r,i=t.fHead.next;i!==t.fHead;i=r)r=i.next,i.inside||t.zapFace(i)},e.prototype.setWindingNumber_=function(t,r,i){for(var n,a=t.eHead.next;a!==t.eHead;a=n)n=a.next,a.Rface.inside!==a.Lface.inside?a.winding=a.Lface.inside?r:-r:i?t.delete(a):a.winding=0},e.prototype.getNeighbourFace_=function(t){return!t.Rface||!t.Rface.inside?-1:t.Rface.n},e.prototype.outputPolymesh_=function(t,r,i,n){var a,o=0,s=0,l;i>3&&t.mergeConvexFaces(i);for(var u=t.vHead.next;u!==t.vHead;u=u.next)u.n=-1;for(var c=t.fHead.next;c!==t.fHead;c=c.next)if(c.n=-1,!!c.inside){a=c.anEdge,l=0;do{var u=a.Org;u.n===-1&&(u.n=s,s++),l++,a=a.Lnext}while(a!==c.anEdge);if(l>i)throw"Face vertex greater that support polygon";c.n=o,++o}this.elementCount=o,r===kn.CONNECTED_POLYGONS&&(o*=2),this.elements=[],this.elements.length=o*i,this.vertexCount=s,this.vertices=[],this.vertices.length=s*n,this.vertexIndices=[],this.vertexIndices.length=s;for(var u=t.vHead.next;u!==t.vHead;u=u.next)if(u.n!==-1){var h=u.n*n;this.vertices[h+0]=u.coords[0],this.vertices[h+1]=u.coords[1],n>2&&(this.vertices[h+2]=u.coords[2]),this.vertexIndices[u.n]=u.idx}for(var d=0,c=t.fHead.next;c!==t.fHead;c=c.next)if(c.inside){a=c.anEdge,l=0;do{var u=a.Org;this.elements[d++]=u.n,l++,a=a.Lnext}while(a!==c.anEdge);for(var f=l;f<i;++f)this.elements[d++]=-1;if(r===kn.CONNECTED_POLYGONS){a=c.anEdge;do this.elements[d++]=this.getNeighbourFace_(a),a=a.Lnext;while(a!==c.anEdge);for(var p=l;p<i;++p)this.elements[d++]=-1}}},e.prototype.outputContours_=function(t,r){var i,n,a=0,o=0;this.vertexCount=0,this.elementCount=0;for(var s=t.fHead.next;s!==t.fHead;s=s.next)if(s.inside){n=i=s.anEdge;do this.vertexCount++,i=i.Lnext;while(i!==n);this.elementCount++}this.elements=[],this.elements.length=this.elementCount*2,this.vertices=[],this.vertices.length=this.vertexCount*r,this.vertexIndices=[],this.vertexIndices.length=this.vertexCount;var l=0,u=0,c=0;a=0;for(var s=t.fHead.next;s!==t.fHead;s=s.next)if(s.inside){o=0,n=i=s.anEdge;do this.vertices[l++]=i.Org.coords[0],this.vertices[l++]=i.Org.coords[1],r>2&&(this.vertices[l++]=i.Org.coords[2]),this.vertexIndices[u++]=this.vertexIdCallback?this.vertexIdCallback(i):i.Org.idx,o++,i=i.Lnext;while(i!==n);this.elements[c++]=a,this.elements[c++]=o,a+=o}},e.prototype.addContour=function(t,r){this.mesh===null&&(this.mesh=new Jte),t<2&&(t=2),t>3&&(t=3);for(var i=null,n=0;n<r.length;n+=t)i===null?(i=this.mesh.makeEdge(),this.mesh.splice(i,i.Sym)):(this.mesh.splitEdge(i),i=i.Lnext),i.Org.coords[0]=r[n+0],i.Org.coords[1]=r[n+1],t>2?i.Org.coords[2]=r[n+2]:i.Org.coords[2]=0,i.Org.idx=this.vertexIndexCounter++,this.edgeCreateCallback&&this.edgeCreateCallback(i),i.winding=1,i.Sym.winding=-1},e.prototype.tesselate=function(t,r,i,n,a,o){if(t===void 0&&(t=Mi.ODD),r===void 0&&(r=kn.POLYGONS),o===void 0&&(o=!0),this.vertices=[],this.elements=[],this.vertexIndices=[],this.vertexIndexCounter=0,a&&(this.normal[0]=a[0],this.normal[1]=a[1],this.normal[2]=a[2]),this.windingRule=t,n<2&&(n=2),n>3&&(n=3),!this.mesh)return!1;this.projectPolygon_(),O4t.computeInterior(this,o);var s=this.mesh;return r===kn.BOUNDARY_CONTOURS?this.setWindingNumber_(s,1,!0):this.tessellateInterior_(s),o&&s.check(),r===kn.BOUNDARY_CONTOURS?this.outputContours_(s,n):this.outputPolymesh_(s,r,i,n),!0},e}();function Zf(e){var t=e.windingRule,r=t===void 0?Mi.ODD:t,i=e.elementType,n=i===void 0?kn.POLYGONS:i,a=e.polySize,o=a===void 0?3:a,s=e.vertexSize,l=s===void 0?2:s,u=e.normal,c=u===void 0?[0,0,1]:u,h=e.contours,d=h===void 0?[]:h,f=e.strict,p=f===void 0?!0:f,v=e.debug,m=v===void 0?!1:v;if(!d&&p)throw new Error("Contours can't be empty");if(d){var g=new B4t;e.edgeCreateCallback&&(g.edgeCreateCallback=e.edgeCreateCallback),e.vertexIdCallback&&(g.vertexIdCallback=e.vertexIdCallback);for(var y=0;y<d.length;y++)g.addContour(l||2,d[y]);return g.tesselate(r,n,o,l,c,p),{vertices:g.vertices,vertexIndices:g.vertexIndices,vertexCount:g.vertexCount,elements:g.elements,elementCount:g.elementCount,mesh:m?g.mesh:void 0}}}Mi.ODD;Mi.NONZERO;Mi.POSITIVE;Mi.NEGATIVE;Mi.ABS_GEQ_TWO;kn.POLYGONS;kn.CONNECTED_POLYGONS;kn.BOUNDARY_CONTOURS;var AO=class{constructor(e=256,t=!1){this.capacity=e,this.size=0,this.debug=t,this.debug&&console.log(`allocating with cap ${e}`);let r=e*AO.eSize;this.buffer=new ArrayBuffer(r);let i=Float32Array.BYTES_PER_ELEMENT,n=0;this.positions=new Float32Array(this.buffer,n*i,3*e),n+=3*e,this.normals=new Float32Array(this.buffer,n*i,3*e),n+=3*e,this.uvs=new Float32Array(this.buffer,n*i,2*e)}realloc(e,t=!1){if(e<this.size)throw Error("cannot shrink buffer");if(e<=this.capacity&&!t)return;this.debug&&console.log(`resizing from ${this.capacity} → ${e}`);let r=e*AO.eSize,i=new ArrayBuffer(r),n=Float32Array.BYTES_PER_ELEMENT,a=0,o=new Float32Array(i,a*n,3*e);a+=3*e;let s=new Float32Array(i,a*n,3*e);a+=3*e;let l=new Float32Array(i,a*n,2*e);t?(o.set(this.positions.subarray(0,this.size*3)),s.set(this.normals.subarray(0,this.size*3)),l.set(this.uvs.subarray(0,this.size*2))):(o.set(this.positions),s.set(this.normals),l.set(this.uvs)),this.buffer=i,this.positions=o,this.normals=s,this.uvs=l,this.capacity=e}get(e=1){let t=this.size+e;if(t>this.capacity){let i=this.capacity;for(;t>i;)i*=2;this.realloc(i)}let r=this.size;return this.size=t,r}reserve(e){let t=this.size+e;t>this.capacity&&this.realloc(t)}shrink(){this.debug&&console.log(`shrinking ${this.capacity} → ${this.size}`),this.realloc(this.size,!0)}},n1e=AO;n1e.eSize=8*Float32Array.BYTES_PER_ELEMENT;var N4t=class{constructor(e=[],t=(r,i)=>r<i?-1:r>i?1:0){if(this.data=e,this.length=this.data.length,this.compare=t,this.length>0)for(let r=(this.length>>1)-1;r>=0;r--)this._down(r)}push(e){this.data.push(e),this._up(this.length++)}pop(){if(this.length===0)return;let e=this.data[0],t=this.data.pop();return--this.length>0&&(this.data[0]=t,this._down(0)),e}peek(){return this.data[0]}_up(e){let{data:t,compare:r}=this,i=t[e];for(;e>0;){let n=e-1>>1,a=t[n];if(r(i,a)>=0)break;t[e]=a,e=n}t[e]=i}_down(e){let{data:t,compare:r}=this,i=this.length>>1,n=t[e];for(;e<i;){let a=(e<<1)+1,o=a+1;if(o<this.length&&r(t[o],t[a])<0&&(a=o),r(t[a],n)>=0)break;t[e]=t[a],e=a}t[e]=n}};function V4t(e,t,r=1,i=!1){let n=1/0,a=1/0,o=-1/0,s=-1/0;for(let[y,x]of e[0])y<n&&(n=y),x<a&&(a=x),y>o&&(o=y),x>s&&(s=x);let l=o-n,u=s-a,c=Math.max(r,Math.min(l,u));if(c===r){let y=[n,a];return y.distance=0,y.distance}let h=new N4t([],(y,x)=>x.max-y.max),d=z4t(e),f=new C6(n+l/2,a+u/2,0,e);f.d>d.d&&(d=f);let p=2;function v(y,x,b){let _=new C6(y,x,b,e);if(p++,_.max>d.d+r&&h.push(_),_.d>d.d&&(d=_,i&&console.log(`found best ${Math.round(1e4*_.d)/1e4} after ${p} probes`),d.d>t))return t}let m=c/2;for(let y=n;y<o;y+=c)for(let x=a;x<s;x+=c)v(y+m,x+m,m);for(;h.length;){let{max:y,x,y:b,h:_}=h.pop();if(y-d.d<=r)break;m=_/2,v(x-m,b-m,m),v(x+m,b-m,m),v(x-m,b+m,m),v(x+m,b+m,m)}i&&console.log(`num probes: ${p}
best distance: ${d.d}`);let g=[d.x,d.y];return g.distance=d.d,g.distance}function C6(e,t,r,i){this.x=e,this.y=t,this.h=r,this.d=F4t(e,t,i),this.max=this.d+this.h*Math.SQRT2}function F4t(e,t,r){let i=!1,n=1/0;for(let a of r)for(let o=0,s=a.length,l=s-1;o<s;l=o++){let u=a[o],c=a[l];u[1]>t!=c[1]>t&&e<(c[0]-u[0])*(t-u[1])/(c[1]-u[1])+u[0]&&(i=!i),n=Math.min(n,H4t(e,t,u,c))}return n===0?0:(i?1:-1)*Math.sqrt(n)}function z4t(e){let t=0,r=0,i=0,n=e[0];for(let o=0,s=n.length,l=s-1;o<s;l=o++){let u=n[o],c=n[l],h=u[0]*c[1]-c[0]*u[1];r+=(u[0]+c[0])*h,i+=(u[1]+c[1])*h,t+=h*3}let a=new C6(r/t,i/t,0,e);return t===0||a.d<0?new C6(n[0][0],n[0][1],0,e):a}function H4t(e,t,r,i){let n=r[0],a=r[1],o=i[0]-n,s=i[1]-a;if(o!==0||s!==0){let l=((e-n)*o+(t-a)*s)/(o*o+s*s);l>1?(n=i[0],a=i[1]):l>0&&(n+=o*l,a+=s*l)}return o=e-n,s=t-a,o*o+s*s}var Xz={vertices:[160,160,-160,160,-160,-160,160,-160],vertexIndices:[1,0,3,2],vertexCount:4,elements:[0,4],elementCount:1,mesh:void 0},a1e={vertices:[],vertexIndices:[],vertexCount:0,elements:[],elementCount:0,mesh:void 0},o1e={vertices:[-160,160,160,-160,160,160,-160,-160],vertexIndices:[1,3,0,2],vertexCount:4,elements:[0,1,2,1,0,3],elementCount:2,mesh:void 0},eD=(e,t)=>([r,i])=>(i<r&&(i+=t),(e>=r?e:e+t)<=i),Zz=class extends It{constructor(e,t,r=0,i=12,n=3,a=Mi.ODD,o=!1){super(),this.forPathBevel=o,this.type="ShapeGeometry",this.vertexCache={},this._shape=e,this._depth=t,this._curveSegments=i,this._bevelSegmentsInput=n;let s=this._shape.extractShapePointsToFlatArray([],i),l=this._shape.shapeHoles.map(M=>{let E=M.extractShapePointsToFlatArray([],i),T=[];for(let L=E.length-1;L>=1;L-=2){let P=E[L-1],C=E[L-0];T.push(P,C)}return T}),u=[],c=[];for(let M=0;M<s.length;M+=2)c.push([s[M],s[M+1]]);u.push(c);for(let M=0;M<l.length;M++){let E=l[M],T=[];for(let L=0;L<E.length;L+=2)T.push([E[L],E[L+1]]);u.push(T)}let h;e.isText?h=new _me().setFromPoints(e.points.map(M=>M.position)).getSize(new me).length()*.1:u[0].length===0?h=r:r>0?h=V4t(u,r):h=1e-5,r<=0?(this._bevel=0,this._bevelSegments=0):(this._bevel=Math.min(r,h,t/2),this._bevelSegments=Math.floor(n));let d;try{d=Zf({windingRule:a,elementType:kn.BOUNDARY_CONTOURS,vertexSize:2,strict:!0,contours:[s]})}catch{d=Xz}let f;try{f=Zf({windingRule:Mi.ODD,elementType:kn.BOUNDARY_CONTOURS,vertexSize:2,strict:!0,contours:[...l]})}catch{f=a1e}if(!d)throw new Error("error generating geometry");let p=d.elementCount;if(f){d.elementCount+=f.elementCount;for(let M=0;M<f.elements.length;M++){let E=f.elements[M],T=M%2===0?d.vertexCount:0;d.elements.push(E+T)}for(let M=0;M<f.vertexIndices.length;M++){let E=f.vertexIndices[M],T=d.vertexCount;d.vertexIndices.push(E+T)}for(let M=0;M<f.vertices.length;M++){let E=f.vertices[M];d.vertices.push(E)}}let v=1/0,m=-1/0,g=1/0,y=-1/0;for(let M=0,E=d.vertexCount;M<E;M++){let T=M*2,L=d.vertices[T+0],P=d.vertices[T+1];L<v&&(v=L),L>m&&(m=L),P<g&&(g=P),P>y&&(y=P)}this._minX=v,this._minY=g,this._width=m-v,this._height=y-g,this._buffer=new n1e(this._computeBufferEstimatedSize(d));let x=[],b=[];for(let M=d.elementCount-1;M>=0;M--){let E=M>=p,T=M*2,L=d.elements[T+0],P=d.elements[T+1],C=L+P,D={start:L,count:P,normals:[],continuous:[],concave:[]},I=L,O=C-1,R=L+1,H=this._shape.roundedCurves.length;do{let Y=I-L,F=d.vertices[O*2+0],Z=d.vertices[O*2+1],ne=d.vertices[I*2+0],re=d.vertices[I*2+1],ae=d.vertices[R*2+0],he=d.vertices[R*2+1],se=ne-F,fe=re-Z,J=Math.sqrt(se*se+fe*fe);se/=J,fe/=J;let te=ne-ae,le=re-he,Ae=Math.sqrt(te*te+le*le);te/=Ae,le/=Ae,D.normals[Y*2+0]=-le,D.normals[Y*2+1]=te,D.concave[Y]=se*le-fe*te>0;let xe=d.vertexIndices[I];if(Array.isArray(xe))D.continuous[Y]=!1;else{let[ye,Se]=this._shape.getCurveIndexFromVertexId(xe-1,!0);if(Se>0&&Se<1)D.continuous[Y]=!0;else{let Pe=Se===1?ye+1:ye-1;Pe=(Pe+H)%H;let Ce=Se===1?0:1,ee=this._shape.roundedCurves[ye].getTangent(Se),K=this._shape.roundedCurves[Pe].getTangent(Ce);D.continuous[Y]=ee.dot(K)>.95}}E&&(D.normals[Y*2+0]*=-1,D.normals[Y*2+1]*=-1),[O,I,R]=[I,R,R+1],R>=C&&(R-=P)}while(R!==L+1);let j=[];j.push({bevelI:0,angle:0,size:0,boundary:{vertices:d.vertices.slice(L*2,C*2),vertexCount:P,vertexIndices:new Array(P).fill(!0).map((Y,F)=>[F,F]),elements:[0,P],elementCount:1,mesh:null},reverseMap:[],insetPoints:d.vertices.slice(L*2,C*2)});let N=0;for(let Y=1;Y<=this._bevelSegments;Y++){let F=Y/this._bevelSegments*Math.PI/2,Z=(1-Math.cos(F))*this._bevel,ne=[],re=[],ae=0;for(let se=0;se<P;se++){let fe=se*2,J=(se-1+P)%P*2,te=d.vertices[D.start*2+fe+0],le=d.vertices[D.start*2+fe+1],Ae=-D.normals[J+0]*Z,xe=-D.normals[J+1]*Z,ye=-D.normals[fe+0]*Z,Se=-D.normals[fe+1]*Z;if(D.concave[se]||!D.concave[se]&&E){let Pe=Math.atan2(xe,Ae),Ce=Math.atan2(Se,ye);Ce>Pe&&(Ce-=Math.PI*2);let ee=Ce-Pe;if(D.continuous[se]||E){let K=Pe+ee/2,ve=Math.cos(K)*Z,Me=Math.sin(K)*Z;ne[2*ae+0]=te+ve*(E?-1:1),ne[2*ae+1]=le+Me*(E?-1:1),re[ae]=se,ae++}else{let K=Math.max(1,Math.floor(i/4*Math.abs(ee)/Math.PI));for(let ve=0;ve<=K;ve++){let Me=Pe+ee*(ve/K),Q=Math.cos(Me)*Z,W=Math.sin(Me)*Z;ne[2*ae+0]=te+Q,ne[2*ae+1]=le+W,re[ae]=se,ae++}}}else ne[2*ae+0]=te+Ae,ne[2*ae+1]=le+xe,re[ae]=se,ae++,ne[2*ae+0]=te,ne[2*ae+1]=le,re[ae]=se,ae++,ne[2*ae+0]=te+ye,ne[2*ae+1]=le+Se,re[ae]=se,ae++}let he=Zf({windingRule:Mi.POSITIVE,elementType:kn.BOUNDARY_CONTOURS,vertexSize:2,strict:!0,contours:[ne],edgeCreateCallback:se=>{let fe=se.Org.idx,J=re[fe],te=re[(fe+1)%re.length];se.idx=[J,te],se.Sym.idx=[te,J]},vertexIdCallback:se=>{let fe=se.Lprev.idx;return[fe?fe[1]:0,se.idx?se.idx[0]:0]}});if(!he)throw console.log("Error"),new Error(`error generating bevel geometry for ${Y}'th loop`);if(!he.vertexCount){let se=(Y-1)/this._bevelSegments*Math.PI/2;N=(1-Math.sin(se))*this._bevel;break}for(let se=0;se<he.vertexIndices.length;se++){let[fe,J]=he.vertexIndices[se];if(fe===J)continue;let te=J;J<fe&&(te+=P);for(let le=fe;le<te;le++){let Ae=le%P,xe=(le+1)%P;if(!D.continuous[Ae]||!D.continuous[xe]){he.vertexIndices[se]=[fe,Ae],he.vertexIndices.splice(se+1,0,[xe,J]),he.vertices.splice((se+1)*2,0,he.vertices[se*2],he.vertices[se*2+1]);break}}}j.push({bevelI:Y,angle:F,size:Z,boundary:he,reverseMap:re,insetPoints:ne})}let k=(Y,F,Z)=>{let ne=0,re=Y.boundary.vertexIndices.length;for(;ne<re&&Z(Y.boundary.vertexIndices[F]);)F=(F+1)%re,ne++;return ne},G=x.length;for(let Y=1;Y<j.length;Y++){let F=j[Y-1],Z=j[Y],ne=F.boundary.vertexIndices.length,re=Z.boundary.vertexIndices.length;if(!ne||!re)break;let ae=D.concave.length,he=0,se=eD(he,P);for(;!F.boundary.vertexIndices.filter(se).length||!Z.boundary.vertexIndices.filter(se).length;)he++,se=eD(he,P);let fe=F.boundary.vertexIndices.findIndex(se),J=Z.boundary.vertexIndices.findIndex(se);do fe=(fe+1)%ne;while(se(F.boundary.vertexIndices[fe]));do J=(J+1)%re;while(se(Z.boundary.vertexIndices[J]));he=(he+1)%P;let te=he,le=0,Ae=this._buildBevelVert(D,F,(fe-1+ne)%ne,void 0,le),xe=this._buildBevelVert(D,Z,(J-1+re)%re,void 0,le),ye=Ae,Se=xe,Pe,Ce,ee=!1;do{le=(he||ae)/ae,se=eD(he,P);let K=k(F,fe,se),ve=k(Z,J,se),Me=ee;if(ee=!1,K&&!ve){for(let Q=0;Q<K;Q++)Pe=this._buildBevelVert(D,F,(fe+Q)%ne,Q/(K-1),le),x.push(ye.topN,Pe.topP,Se.topN),o===!1&&x.push(Pe.bottomP,ye.bottomN,Se.bottomN),ye=Pe;ee=!0}else if(!K&&ve)for(let Q=0;Q<ve;Q++)Ce=this._buildBevelVert(D,Z,(J+Q)%re,Q/(ve-1),le),x.push(Se.topN,ye.topP,Ce.topP),o===!1&&x.push(ye.bottomP,Se.bottomN,Ce.bottomP),Se=Ce;else if(K&&ve)if(Pe=this._buildBevelVert(D,F,fe,0,le),Ce=this._buildBevelVert(D,Z,J,0,le),Me?(x.push(ye.topN,Ce.topP,Se.topN),x.push(ye.topN,Pe.topP,Ce.topP),o===!1&&(x.push(Ce.bottomP,ye.bottomN,Se.bottomN),x.push(Ce.bottomP,Pe.bottomP,ye.bottomN))):(x.push(Se.topN,ye.topN,Pe.topP),x.push(Se.topN,Pe.topP,Ce.topP),o===!1&&(x.push(Pe.bottomP,ye.bottomN,Se.bottomN),x.push(Pe.bottomP,Se.bottomN,Ce.bottomP))),ye=Pe,Se=Ce,K===ve)for(let Q=1;Q<K;Q++)Pe=this._buildBevelVert(D,F,(fe+Q)%ne,Q/(K-1),le),Ce=this._buildBevelVert(D,Z,(J+Q)%re,Q/(ve-1),le),x.push(ye.topN,Pe.topP,Se.topN),x.push(Se.topN,Pe.topP,Ce.topP),o===!1&&(x.push(Pe.bottomP,ye.bottomN,Se.bottomN),x.push(Pe.bottomP,Se.bottomN,Ce.bottomP)),ye=Pe,Se=Ce;else if(K>ve){let Q=K/ve,W=0;for(let V=1;V<K;V++)Pe=this._buildBevelVert(D,F,(fe+V)%ne,V/(K-1),le),x.push(ye.topN,Pe.topP,Se.topN),o===!1&&x.push(Pe.bottomP,ye.bottomN,Se.bottomN),ye=Pe,V>(W+1)*Q&&(W++,Ce=this._buildBevelVert(D,Z,(J+W)%re,W/(ve-1),le),x.push(Se.topN,Pe.topP,Ce.topP),o===!1&&x.push(Pe.bottomP,Se.bottomN,Ce.bottomP),Se=Ce)}else{let Q=ve/K,W=0;for(let V=1;V<ve;V++)Ce=this._buildBevelVert(D,Z,(J+V)%re,V/(ve-1),le),x.push(Se.topN,Pe.topP,Ce.topP),o===!1&&x.push(Pe.bottomP,Se.bottomN,Ce.bottomP),Se=Ce,V>(W+1)*Q&&(W++,Pe=this._buildBevelVert(D,F,(fe+W)%ne,W/(K-1),le),x.push(ye.topN,Pe.topP,Se.topN),o===!1&&x.push(Pe.bottomP,ye.bottomN,Se.bottomN),ye=Pe)}fe=(fe+K)%ne,J=(J+ve)%re,he=(he+1)%ae}while(he!==te)}if(o===!1&&this._depth>this._bevel*2&&this._buildWall(j,D,x),E){let Y=[];for(let F=x.length-1;F>=G+2;F-=3){let Z=x[F-2],ne=x[F-1],re=x[F-0];Y.push(re,ne,Z)}x.splice(G,x.length-G,...Y)}if(E){let Y=[];for(let F=j[j.length-1].boundary.vertices.length-1;F>=1;F-=2){let Z=j[j.length-1].boundary.vertices[F-1],ne=j[j.length-1].boundary.vertices[F-0];Y.push(Z,ne)}b.push(Y)}if(!E){let Y=j[j.length-1],F;try{F=Zf({windingRule:j.length>1?Mi.POSITIVE:Mi.ODD,elementType:kn.POLYGONS,vertexSize:2,strict:!0,contours:[Y.insetPoints,...b]})}catch{F=o1e}if(!F)throw new Error("Error generating geometry for surface");l.length===0&&this._bevel<h&&Object.assign(this,{useNgonForTopBottomFaceDuringBake:!0});for(let Z=0;Z<F.elementCount*3;Z+=3){let ne=this._buildSurfaceVert(F,F.elements[Z+0],N),re=this._buildSurfaceVert(F,F.elements[Z+1],N),ae=this._buildSurfaceVert(F,F.elements[Z+2],N);x.push(ne.top,re.top,ae.top),o===!1&&x.push(ae.bottom,re.bottom,ne.bottom)}}this.vertexCache={}}this._buffer.shrink();let _=new Zt(Uint32Array.from(x),1),w=new Zt(this._buffer.positions,3),S=new Zt(this._buffer.normals,3),A=new Zt(this._buffer.uvs,2);w.needsUpdate=!0,S.needsUpdate=!0,A.needsUpdate=!0,_.needsUpdate=!0,this.setAttribute("position",w),this.setAttribute("normal",S),this.setAttribute("uv",A),this.setIndex(_)}_computeBufferEstimatedSize(e){return e.vertexCount*2*(2+this._bevelSegments)}_buildWall(e,t,r){let i=e[0];for(let n=0,a=i.boundary.vertexCount;n<a;n++){let o=this._buildBevelVert(t,i,n),s=this._buildBevelVert(t,i,(n+1)%a);r.push(s.topP,o.topN,o.bottomN),r.push(s.topP,o.bottomN,s.bottomP)}}_buildSurfaceVert(e,t,r){let i=t.toString();if(i in this.vertexCache)return this.vertexCache[i];let n=e.vertices[t*2+0],a=e.vertices[t*2+1],o=(n-this._minX)/this._width,s=(a-this._minY)/this._height;this.forPathBevel&&(s=1);let l=this._buffer.get(this.forPathBevel?1:2),u=l*3,c=l*2,h={top:l+0,bottom:l+1};return this._buffer.positions[u+0]=n,this._buffer.positions[u+1]=a,this._buffer.positions[u+2]=this.forPathBevel?this._bevel:this._depth-r,this._buffer.normals[u+0]=0,this._buffer.normals[u+1]=0,this._buffer.normals[u+2]=1,this._buffer.uvs[c+0]=o,this._buffer.uvs[c+1]=s,this.forPathBevel===!1&&(this._buffer.positions[u+3]=n,this._buffer.positions[u+4]=a,this._buffer.positions[u+5]=r,this._buffer.normals[u+3]=0,this._buffer.normals[u+4]=0,this._buffer.normals[u+5]=-1,this._buffer.uvs[c+2]=o,this._buffer.uvs[c+3]=s),this.vertexCache[i]=h,h}_buildBevelVert(e,t,r,i=1,n){let a=`${t.bevelI}:${r}`;if(a in this.vertexCache&&n!==0&&n!==1&&(!n||n===this.vertexCache[a].pathBevelUCoord))return this.vertexCache[a];let[o,s]=t.boundary.vertexIndices[r],l,u,c,h;o!==s?(u=o,l=s,h=!1,c=e.continuous[u]&&e.continuous[l]):(l=o,u=(l-1+e.count)%e.count,h=e.concave[l]&&t.bevelI>0,c=e.continuous[l]||h);let d=Math.cos(t.angle),f=Math.sin(t.angle),p=r*2,v=l*2,m=u*2,g=t.boundary.vertices[p+0],y=t.boundary.vertices[p+1],x=(1-f)*this._bevel,b=(g-this._minX)/this._width,_=(y-this._minY)/this._height;this.forPathBevel&&(n!==void 0&&(b=n),_=1);let w=e.normals[v+0],S=e.normals[v+1],A=e.normals[m+0],M=e.normals[m+1];if(h){let C=A-w,D=M-S;w=w+C*(1-i),S=S+D*(1-i);let I=Math.sqrt(w*w+S*S);w/=I,S/=I}let E=this.forPathBevel?this._buffer.get(c?1:2):this._buffer.get(c?2:4),T=E*3,L=E*2,P={i:r,fi:l,topP:E+0,topN:E+0,bottomP:E+1,bottomN:E+1,pathBevelUCoord:n};return this._buffer.positions[T+0]=g,this._buffer.positions[T+1]=y,this._buffer.positions[T+2]=(this.forPathBevel?this._bevel:this._depth)-x,this._buffer.normals[T+0]=w*d,this._buffer.normals[T+1]=S*d,this._buffer.normals[T+2]=f,this._buffer.uvs[L+0]=b,this._buffer.uvs[L+1]=_,this.forPathBevel===!1&&(this._buffer.positions[T+3]=g,this._buffer.positions[T+4]=y,this._buffer.positions[T+5]=x,this._buffer.normals[T+3]=w*d,this._buffer.normals[T+4]=S*d,this._buffer.normals[T+5]=-f,this._buffer.uvs[L+2]=_,this._buffer.uvs[L+3]=b),c||(this.forPathBevel?(E+=1,T+=3,L+=2):(E+=2,T+=6,L+=4),P.topP=E+0,P.bottomP=E+1,this._buffer.positions[T+0]=g,this._buffer.positions[T+1]=y,this._buffer.positions[T+2]=(this.forPathBevel?this._bevel:this._depth)-x,this._buffer.normals[T+0]=A*d,this._buffer.normals[T+1]=M*d,this._buffer.normals[T+2]=f,this._buffer.uvs[L+0]=b,this._buffer.uvs[L+1]=_,this.forPathBevel===!1&&(this._buffer.positions[T+3]=g,this._buffer.positions[T+4]=y,this._buffer.positions[T+5]=x,this._buffer.normals[T+3]=A*d,this._buffer.normals[T+4]=M*d,this._buffer.normals[T+5]=-f,this._buffer.uvs[L+2]=_,this._buffer.uvs[L+3]=b)),this.vertexCache[a]=P,P}clone(){let e=new Zz(this._shape,this._depth,this._bevel,this._curveSegments,this._bevelSegmentsInput);return e.userData=P7(this.userData),e}},s1e=class extends It{constructor(e,t=12,r={}){super(),this.type="ShapeGeometry",this.windingRule=Mi.ODD,this.elementType=kn.POLYGONS,this.polySize=3,this.vertexSize=2,this.strict=!0,this._shape=e,this._curveSegments=t,this._triangulationOptions=Object.assign({windingRule:Mi.ODD,elementType:kn.POLYGONS,polySize:3,vertexSize:2,strict:!0},r);let i=this._shape.extractShapePointsToFlatArray([],this._curveSegments),n=this._shape.shapeHoles.map(d=>d.extractShapePointsToFlatArray([],this._curveSegments)),a,o=!0,s=!0,l,u;for(let d=0,f=i.length/2;d<f;d++){let p=d*2,v=i[p+0],m=i[p+1];if(l!==void 0&&v!==l&&(o=!1),u!==void 0&&m!==u&&(s=!1),l=v,u=m,!o&&!s)break}if(!o&&!s)try{a=Zf({contours:[i,...n],windingRule:this._triangulationOptions.windingRule,elementType:this._triangulationOptions.elementType,polySize:this._triangulationOptions.polySize,vertexSize:this._triangulationOptions.vertexSize,strict:this._triangulationOptions.strict})}catch{a=Xz}let c=(a==null?void 0:a.vertexCount)??1,h=(a==null?void 0:a.elementCount)??1;if(this._positionAttribute=new Zt(new Float32Array(c*3),3),this._normalAttribute=new Zt(new Float32Array(c*3),3),this._uvAttribute=new Zt(new Float32Array(c*2),2),this._indexAttribute=new Zt(new Uint32Array(h*3),1),a){let d=1/0,f=-1/0,p=1/0,v=-1/0;for(let y=0,x=c;y<x;y++){let b=y*2,_=a.vertices[b+0],w=a.vertices[b+1];_<d&&(d=_),_>f&&(f=_),w<p&&(p=w),w>v&&(v=w)}let m=f-d,g=v-p;for(let y=0,x=c;y<x;y++){let b=y*2,_=a.vertices[b+0],w=a.vertices[b+1],S=(_-d)/m,A=(w-p)/g;this._positionAttribute.setXYZ(y,_,w,0),this._normalAttribute.setXYZ(y,0,0,1),this._uvAttribute.setXY(y,S,A)}for(let y=0,x=h;y<x;y++){let b=y*3,_=a.elements[b+0],w=a.elements[b+1],S=a.elements[b+2];this._indexAttribute.setX(b+0,_),this._indexAttribute.setX(b+1,w),this._indexAttribute.setX(b+2,S)}}this.setAttribute("position",this._positionAttribute),this.setAttribute("normal",this._normalAttribute),this.setAttribute("uv",this._uvAttribute),this.setIndex(this._indexAttribute),this.setDrawRange(0,((a==null?void 0:a.elementCount)??1)*3)}clone(){let e=new s1e(this._shape,this._curveSegments);return e.userData=P7(this.userData),e}},l1e=class extends Zz{constructor(e,t,r=0,i=12,n=3,a=Mi.ODD){super(e,t,r,i,n,a),this.type="ShapeGeometry"}_computeBufferEstimatedSize(e){return e.vertexCount*2*(2+this._bevelSegments)}_buildWall(e,t,r){let i=e[0];for(let n=0,a=i.boundary.vertexCount;n<a;n++){let o=this._buildBevelVert(t,i,n),s=this._buildBevelVert(t,i,(n+1)%a);r.push(s.topP,o.topN,o.bottomN),r.push(s.topP,o.bottomN,s.bottomP)}}clone(){let e=new l1e(this._shape,this._depth,this._bevel,this._curveSegments,this._bevelSegmentsInput);return e.userData=P7(this.userData),e}},pm=class{static create(e){return this.build(this.normalizeInputs(e))}static normalizeInputs(e,t){var u,c;let r=Object.assign({},(t==null?void 0:t.parameters)??{width:100,subdivisions:40,roundness:0,extrudeBevelSize:0,extrudeBevelSegments:3,windingRule:Mi.ODD},e.parameters),i=Math.abs(r.width),n=Math.abs(r.height??r.width),a=Math.abs(r.depth??0),o=e.shape??(t==null?void 0:t.shape),s=(o==null?void 0:o.roundness)??r.roundness;o!==void 0&&(o instanceof dn?(o.width!==i||o.height!==n)&&o.applySize(i,n):o=new dn(i,n).fromJSON(o),((u=e.parameters)==null?void 0:u.roundness)!==void 0&&((c=e.parameters)==null?void 0:c.roundness)>0&&o.update());let l=o??new dn(i,n);return{parameters:Object.assign(r,{width:i,height:n,depth:a,roundness:s}),shape:l}}static build(e){let{depth:t,extrudeBevelSize:r,extrudeBevelSegments:i,subdivisions:n,roundness:a,windingRule:o}=e.parameters;e.shape.roundness=a;let s;return t<=0?s=new s1e(e.shape,n,{windingRule:o}):s=new l1e(e.shape,t,r,n,i,o),Object.assign(s,{userData:{...e,type:"VectorGeometry"}})}},u1e=Math.PI*2,Qz=class{static create(e){return this.build(this.normalizeInputs(e))}static normalizeInputs(e,t){let r=Object.assign({},(t==null?void 0:t.parameters)??{width:100,depth:0,spikes:64,angle:360,innerRadius:0,extrudeBevelSize:0,extrudeBevelSegments:1},e.parameters);return r.angle=vt.clamp(r.angle,0,360),{shape:e.shape&&e.shape instanceof dn?e.shape:new dn,parameters:Object.assign(r,{width:Math.abs(r.width),height:Math.abs(r.height??r.width),depth:Math.abs(r.depth??0)})}}static build(e){let{width:t,height:r,spikes:i,angle:n,innerRadius:a,depth:o,extrudeBevelSize:s,extrudeBevelSegments:l}=e.parameters,u=e.shape,c=t*.5,h=r*.5,d=U4t(u,c,h,n*Math.PI/180,i,a);u.isClosed=!0,u.update();let f;return n===0?(f=new It,f.setAttribute("position",new ht([],3))):f=pm.create({shape:u,parameters:{subdivisions:d,depth:o,extrudeBevelSize:s,extrudeBevelSegments:l}}),Object.assign(f,{userData:{...e,type:"EllipseGeometry"}})}};function U4t(e,t,r,i,n,a){if(i>=u1e)return n>30||n%4===0?(j4t(e,t,r,a),Math.round(n/4)):rre(e,i,n,t,r,a);i=Math.max(i,.001);let o={x:0,y:r},s=i+Math.PI*.5,l={x:Math.cos(s)*t,y:Math.sin(s)*r},u=L4t({px:o.x,py:o.y,cx:l.x,cy:l.y,rx:t,ry:r,largeArcFlag:i>Math.PI,sweepFlag:!0});return n>30||n%u.length===0?G4t(e,o.x,o.y,u,n,t,r,a):rre(e,i,n,t,r,a)}function G4t(e,t,r,i,n,a,o,s){let l=Math.round(n/i.length);e.addPoint(A1(t,r));for(let u=0,c=i.length;u<c;u++){let h=i[u],d=e.points[u],f=A1(h.x,h.y);d.controls[1].position.set(h.x1,h.y1),f.controls[0].position.set(h.x2,h.y2),e.addPoint(f)}return s>0?c1e(e,a,o,s):e.addPoint(A1(0,0)),l}function rre(e,t,r,i,n,a){let o=-t/r;for(let s=0;s<=r;s++){let l=o*s,u=Math.sin(l)*i,c=Math.cos(l)*n;e.addPoint(A1(u,c))}return t<u1e?a>0?c1e(e,i,n,a):e.addPoint(A1(0,0)):(e.removePoint(e.points[e.points.length-1]),a>0&&h1e(e,i,n,a)),1}function j4t(e,t,r,i=0,n=0,a=0){let o=.5522847498,s=t*o,l=r*o;e.addPoint(_5(n-t,a,n-t,a-l,n-t,a+l)),e.addPoint(_5(n,a+r,n-s,a+r,n+s,a+r)),e.addPoint(_5(n+t,a,n+t,a+l,n+t,a-l)),e.addPoint(_5(n,a-r,n+s,a-r,n-s,a-r)),i>0&&h1e(e,t,r,i)}function A1(e,t){return new _1(vt.generateUUID(),new me(e,t))}function _5(e,t,r,i,n,a){let o=A1(e,t);return o.controls[0].position.set(r,i),o.controls[1].position.set(n,a),o}function c1e(e,t,r,i){d1e(e,t,r,i).forEach(n=>e.addPoint(n))}function h1e(e,t,r,i){let n=d1e(e,t,r,i),a=new dn;n.forEach(o=>a.addPoint(o)),a.isClosed=!0,e.shapeHoles.push(a)}function d1e(e,t,r,i){let n=i*t/100,a=n*(Math.abs(r)/Math.abs(t)),o=new me(n/t,a/r),s=e.points.map(l=>{let u=l.clone();return u.uuid=vt.generateUUID(),u}).reverse();return s.forEach(l=>{l.position.multiply(o);let u=l.controls[0].position.clone().multiply(o),c=l.controls[1].position.clone().multiply(o);l.controls[0].position.copy(c),l.controls[1].position.copy(u)}),s}var W4t=class{static create(e){return this.build(this.normalizeInputs(e))}static normalizeInputs(e,t){let r=Object.assign({},(t==null?void 0:t.parameters)??{width:100,revolutions:2,segments:40,pathRadius:10,pathType:0,pathSegments:30,cornerRadius:30,cornerSegments:4},e.parameters),i=Math.abs(r.width),n=Math.abs(r.height??i),a=Math.abs(r.depth??i),o=Math.abs(Math.min(i,a))/2;return{parameters:Object.assign(r,{width:i,height:n,depth:a,radius:o,segments:Math.round(r.segments),pathSegments:Math.round(r.pathSegments),cornerSegments:Math.round(r.cornerSegments)})}}static build(e){let{width:t,height:r,depth:i,radius:n,revolutions:a,segments:o,pathRadius:s,pathType:l,pathSegments:u,cornerRadius:c,cornerSegments:h}=e.parameters,d=new f1e(!1,t,r,i,n,a,o,s,l,u,c,h);return Object.assign(d,{userData:{...e,type:"HelixGeometry"}})}},tD=new g1([0,0,0],1),f1e=class extends It{constructor(e=!0,t=1,r=1,i=1,n=1,a=1,o=1,s=1,l=1,u=1,c=1,h=1){if(super(),a===0)return;let d=e&&a===1;d&&(h=0),c>100&&(c=100),c===0&&(h=0);let f=()=>new U,p=new U,v=f(),m=f(),g=f(),y,x,b,_,w,S,A,M,E=f(),T=f(),L=f(),P=f(),C=f(),D=f(),I=f(),O=f(),R=r-2*s+.001,H=R/a,j=Math.ceil(o*a),N=j+1,k=R/j,G=-R/2,Y=u+1,F=2*Math.PI/u,Z=Math.PI/2/h,ne=.01,re=Math.min((1-c/100)*s,s-ne),ae=s-re,he=0,se=2,fe=h*se+se,J=Y*fe/se,te=J+Y*N,le=Math.max(0,Y*(N+fe)),[Ae,xe,ye]=[3,3,2].map(X=>Array(le*X).fill(0)),Se=[],Pe=n-s;function Ce(X,de){let pe=Math.PI/2;S=de*k,M=2*Math.PI*(S%H)/H+pe,S+=G,A=Math.sin(M)*Pe,w=Math.cos(M)*Pe,e?X.set(w,A,S):X.set(w,S,A)}Ce(p,-1e-10),Ce(v,0),E.copy(p),Ce(p,1);let ee=p.distanceTo(v),K=d?0:ae+re,ve=ee*j+2*K,Me=re,Q=ve-K;for(let X=0;X<=j;X++){Ce(m,X),O.subVectors(m,E).normalize(),E.copy(m),D.copy(m).setComponent(+e+1,0).normalize(),I.crossVectors(O,D).normalize();let de=X===0,pe=X===j,we=de?3*Math.PI/2:Z,Je=de?Me:Q,Qe=de?Y:te,Ye=de?0:le-Y,gt=O.clone().multiplyScalar(de?-ae:ae).add(m),ct=O.clone().multiplyScalar(de?-1:1).normalize();for(let be=0;be<Y;be++){let ze=be*F;if(T.addVectors(p.copy(D).multiplyScalar(s*Math.cos(ze)),v.copy(I).multiplyScalar(s*Math.sin(ze))),L.copy(T).normalize(),de||pe){d||(he=Ye+be,[0,1,2].forEach(He=>{Ae[he*3+He]=gt.getComponent(He),xe[he*3+He]=ct.getComponent(He)}),ye[he*2]=+pe,ye[he*2+1]=be/u),v.copy(L).multiplyScalar(re),g.addVectors(m,v);for(let He=0;He<h;He++){let $e=He*Z+we;P.addVectors(p.copy(O).multiplyScalar(ae*Math.sin($e)),v.copy(L).multiplyScalar(ae*Math.cos($e))),C.copy(P).normalize(),v.addVectors(g,P),P.normalize(),he=Qe+He*Y+be,[0,1,2].forEach(St=>{Ae[he*3+St]=v.getComponent(St),xe[he*3+St]=C.getComponent(St)});let Pt=+de+Math.sin($e);ye[he*2]=(Je+ae*Pt)/ve,ye[he*2+1]=be/u}}v.addVectors(m,T),he=J+X*Y+be,[0,1,2].forEach(He=>{Ae[he*3+He]=v.getComponent(He),xe[he*3+He]=L.getComponent(He)}),ye[he*2]=(K+X*ee)/ve,ye[he*2+1]=be/u}}let W=N+2*h+se,[V,z]=[+d,W-1];for(let X=V;X<=z-1;X++){let de=d&&X===z-1;for(let pe=0;pe<Y-1;pe++)y=X*Y+pe,x=y+1,b=(de?pe:y)+Y,_=(de?pe+1:x)+Y,X===0?Se.push(x,_,b):X===W-2?Se.push(y,x,b):Se.push(y,x,b,x,_,b)}this.setIndex(Se),this.setAttribute("position",new ht(Ae,3)),this.setAttribute("normal",new ht(xe,3)),this.setAttribute("uv",new ht(ye,2))}getClosedTorusIndicesForBooleanOrSubdiv(){let e=this.userData.parameters,t=Math.ceil(e.tubularSegments),r=e.radialSegments+1,i=Array.from(this.getIndex().array),n,a,o,s,l=6*(t-1)*e.radialSegments,u=t,c=u===t;for(let h=0;h<e.radialSegments;h++)n=u*r+h,a=n+1,o=(c?h:n)+r,s=(c?h+1:a)+r,i[l++]=n,i[l++]=a,i[l++]=o,i[l++]=a,i[l++]=s,i[l++]=o;return i.length=l,tD.array=i,tD.count=i.length,tD}},q4t=class{static create(e){return this.build(this.normalizeInputs(e))}static normalizeInputs(e,t){let r=Object.assign({},(t==null?void 0:t.parameters)??{width:100,detail:0,corner:0,cornerSides:4},e.parameters);return{parameters:Object.assign(r,{width:Math.abs(r.width),height:Math.abs(r.height??r.width),depth:Math.abs(r.depth??r.width)})}}static build(e){let{width:t,height:r,depth:i,detail:n,corner:a,cornerSides:o}=e.parameters,s=n===0&&a!==0?new p1e(t*.5,a,o):new hme(t*.5,n);return s.scale(1,r/t,i/t),Object.assign(s,{userData:{...e,type:"IcosahedronGeometry"}})}},p1e=class extends Wz{constructor(e=1,t=.2,r=4){let i=(1+Math.sqrt(5))/2,n=[-1,i,0,1,i,0,-1,-i,0,1,-i,0,0,-1,i,0,1,i,0,-1,-i,0,1,-i,i,0,-1,i,0,1,-i,0,-1,-i,0,1],a=[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1],o="IcosahedronGeometry";super(n,a,o,e,t,r),this.type=o}static fromJSON(e){return new p1e(e.radius,e.corner,e.cornerSides)}},Y4t=class{static create(e){return this.build(this.normalizeInputs(e))}static normalizeInputs(e,t){var i;(((i=e.parameters)==null?void 0:i.points)??[]).forEach(n=>{Array.isArray(n)&&(n.x=n[0],n.y=n[1])});let r=Object.assign({},(t==null?void 0:t.parameters)??{width:100,segments:64,verticalSegments:64,points:[{x:0,y:-50,id:0},{x:50,y:-50,id:1},{x:50,y:50,id:2},{x:0,y:50,id:3}]},e.parameters);return{parameters:Object.assign(r,{width:Math.abs(r.width),height:Math.abs(r.height??r.width),depth:Math.abs(r.depth??r.width)})}}static build(e){let{points:t,segments:r,verticalSegments:i}=e.parameters,n=new US;n.moveTo(t[0].x,t[0].y),n.bezierCurveTo(t[1].x,t[1].y,t[2].x,t[2].y,t[3].x,t[3].y);let a=new ame(n.extractPoints(i).shape,r);return a.rotateZ(Math.PI),Object.assign(a,{userData:{...e,type:"LatheGeometry"}})}},ec=new Ke,rD=new _i,A5=new U,E6=class extends Ka{constructor(){super(),this.uuid=vt.generateUUID(),this.name="",this.type="Geometry",this.vertices=[],this.colors=[],this.faces=[],this.faceVertexUvs=[[]],this.morphTargets=[],this.morphNormals=[],this.skinWeights=[],this.skinIndices=[],this.lineDistances=[],this.boundingBox=null,this.boundingSphere=null,this.elementsNeedUpdate=!1,this.verticesNeedUpdate=!1,this.uvsNeedUpdate=!1,this.normalsNeedUpdate=!1,this.colorsNeedUpdate=!1,this.lineDistancesNeedUpdate=!1,this.groupsNeedUpdate=!1}applyMatrix4(e){let t=new Bn().getNormalMatrix(e);for(let r=0,i=this.vertices.length;r<i;r++)this.vertices[r].applyMatrix4(e);for(let r=0,i=this.faces.length;r<i;r++){let n=this.faces[r];n.normal.applyMatrix3(t).normalize();for(let a=0,o=n.vertexNormals.length;a<o;a++)n.vertexNormals[a].applyMatrix3(t).normalize()}return this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this.verticesNeedUpdate=!0,this.normalsNeedUpdate=!0,this}rotateX(e){return ec.makeRotationX(e),this.applyMatrix4(ec),this}rotateY(e){return ec.makeRotationY(e),this.applyMatrix4(ec),this}rotateZ(e){return ec.makeRotationZ(e),this.applyMatrix4(ec),this}translate(e,t,r){return ec.makeTranslation(e,t,r),this.applyMatrix4(ec),this}scale(e,t,r){return ec.makeScale(e,t,r),this.applyMatrix4(ec),this}lookAt(e){return rD.lookAt(e),rD.updateMatrix(),this.applyMatrix4(rD.matrix),this}fromBufferGeometry(e){let t=this,r=e.index!==null?e.index:void 0,i=e.attributes;if(i.position===void 0)return console.error("THREE.Geometry.fromBufferGeometry(): Position attribute required for conversion."),this;let n=i.position,a=i.normal,o=i.color,s=i.uv,l=i.uv2;l!==void 0&&(this.faceVertexUvs[1]=[]);for(let h=0;h<n.count;h++)t.vertices.push(new U().fromBufferAttribute(n,h)),o!==void 0&&t.colors.push(new Vt().fromBufferAttribute(o,h));function u(h,d,f,p){let v=o===void 0?[]:[t.colors[h].clone(),t.colors[d].clone(),t.colors[f].clone()],m=a===void 0?[]:[new U().fromBufferAttribute(a,h),new U().fromBufferAttribute(a,d),new U().fromBufferAttribute(a,f)],g=new SO(h,d,f,m,v,p);t.faces.push(g),s!==void 0&&t.faceVertexUvs[0].push([new me().fromBufferAttribute(s,h),new me().fromBufferAttribute(s,d),new me().fromBufferAttribute(s,f)]),l!==void 0&&t.faceVertexUvs[1].push([new me().fromBufferAttribute(l,h),new me().fromBufferAttribute(l,d),new me().fromBufferAttribute(l,f)])}let c=e.groups;if(c.length>0)for(let h=0;h<c.length;h++){let d=c[h],f=d.start,p=d.count;for(let v=f,m=f+p;v<m;v+=3)r!==void 0?u(r.getX(v),r.getX(v+1),r.getX(v+2),d.materialIndex):u(v,v+1,v+2,d.materialIndex)}else if(r!==void 0)for(let h=0;h<r.count;h+=3)u(r.getX(h),r.getX(h+1),r.getX(h+2));else for(let h=0;h<n.count;h+=3)u(h,h+1,h+2);return this.computeFaceNormals(),e.boundingBox!==null&&(this.boundingBox=e.boundingBox.clone()),e.boundingSphere!==null&&(this.boundingSphere=e.boundingSphere.clone()),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(A5).negate(),this.translate(A5.x,A5.y,A5.z),this}normalize(){this.computeBoundingSphere();let e=this.boundingSphere.center,t=this.boundingSphere.radius,r=t===0?1:1/t,i=new Ke;return i.set(r,0,0,-r*e.x,0,r,0,-r*e.y,0,0,r,-r*e.z,0,0,0,1),this.applyMatrix4(i),this}computeFaceNormals(){let e=new U,t=new U;for(let r=0,i=this.faces.length;r<i;r++){let n=this.faces[r],a=this.vertices[n.a],o=this.vertices[n.b],s=this.vertices[n.c];e.subVectors(s,o),t.subVectors(a,o),e.cross(t),e.normalize(),n.normal.copy(e)}}computeVertexNormals(e=!0){let t=new Array(this.vertices.length);for(let r=0,i=this.vertices.length;r<i;r++)t[r]=new U;if(e){let r=new U,i=new U;for(let n=0,a=this.faces.length;n<a;n++){let o=this.faces[n],s=this.vertices[o.a],l=this.vertices[o.b],u=this.vertices[o.c];r.subVectors(u,l),i.subVectors(s,l),r.cross(i),t[o.a].add(r),t[o.b].add(r),t[o.c].add(r)}}else{this.computeFaceNormals();for(let r=0,i=this.faces.length;r<i;r++){let n=this.faces[r];t[n.a].add(n.normal),t[n.b].add(n.normal),t[n.c].add(n.normal)}}for(let r=0,i=this.vertices.length;r<i;r++)t[r].normalize();for(let r=0,i=this.faces.length;r<i;r++){let n=this.faces[r],a=n.vertexNormals;a.length===3?(a[0].copy(t[n.a]),a[1].copy(t[n.b]),a[2].copy(t[n.c])):(a[0]=t[n.a].clone(),a[1]=t[n.b].clone(),a[2]=t[n.c].clone())}this.faces.length>0&&(this.normalsNeedUpdate=!0)}computeFlatVertexNormals(){this.computeFaceNormals();for(let e=0,t=this.faces.length;e<t;e++){let r=this.faces[e],i=r.vertexNormals;i.length===3?(i[0].copy(r.normal),i[1].copy(r.normal),i[2].copy(r.normal)):(i[0]=r.normal.clone(),i[1]=r.normal.clone(),i[2]=r.normal.clone())}this.faces.length>0&&(this.normalsNeedUpdate=!0)}computeMorphNormals(){for(let t=0,r=this.faces.length;t<r;t++){let i=this.faces[t];i.__originalFaceNormal?i.__originalFaceNormal.copy(i.normal):i.__originalFaceNormal=i.normal.clone(),i.__originalVertexNormals||(i.__originalVertexNormals=[]);for(let n=0,a=i.vertexNormals.length;n<a;n++)i.__originalVertexNormals[n]?i.__originalVertexNormals[n].copy(i.vertexNormals[n]):i.__originalVertexNormals[n]=i.vertexNormals[n].clone()}let e=new E6;e.faces=this.faces;for(let t=0,r=this.morphTargets.length;t<r;t++){if(!this.morphNormals[t]){this.morphNormals[t]={},this.morphNormals[t].faceNormals=[],this.morphNormals[t].vertexNormals=[];let n=this.morphNormals[t].faceNormals,a=this.morphNormals[t].vertexNormals;for(let o=0,s=this.faces.length;o<s;o++){let l=new U,u={a:new U,b:new U,c:new U};n.push(l),a.push(u)}}let i=this.morphNormals[t];e.vertices=this.morphTargets[t].vertices,e.computeFaceNormals(),e.computeVertexNormals();for(let n=0,a=this.faces.length;n<a;n++){let o=this.faces[n],s=i.faceNormals[n],l=i.vertexNormals[n];s.copy(o.normal),l.a.copy(o.vertexNormals[0]),l.b.copy(o.vertexNormals[1]),l.c.copy(o.vertexNormals[2])}}for(let t=0,r=this.faces.length;t<r;t++){let i=this.faces[t];i.normal=i.__originalFaceNormal,i.vertexNormals=i.__originalVertexNormals}}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new Cn),this.boundingBox.setFromPoints(this.vertices)}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new Es),this.boundingSphere.setFromPoints(this.vertices)}merge(e,t,r=0){if(!(e&&e.isGeometry)){console.error("THREE.Geometry.merge(): geometry not an instance of THREE.Geometry.",e);return}let i,n=this.vertices.length,a=this.vertices,o=e.vertices,s=this.faces,l=e.faces,u=this.colors,c=e.colors;t!==void 0&&(i=new Bn().getNormalMatrix(t));for(let h=0,d=o.length;h<d;h++){let f=o[h].clone();t!==void 0&&f.applyMatrix4(t),a.push(f)}for(let h=0,d=c.length;h<d;h++)u.push(c[h].clone());for(let h=0,d=l.length;h<d;h++){let f=l[h],p,v,m=f.vertexNormals,g=f.vertexColors,y=new SO(f.a+n,f.b+n,f.c+n);y.normal.copy(f.normal),i!==void 0&&y.normal.applyMatrix3(i).normalize();for(let x=0,b=m.length;x<b;x++)p=m[x].clone(),i!==void 0&&p.applyMatrix3(i).normalize(),y.vertexNormals.push(p);y.color.copy(f.color);for(let x=0,b=g.length;x<b;x++)v=g[x],y.vertexColors.push(v.clone());y.materialIndex=f.materialIndex+r,s.push(y)}for(let h=0,d=e.faceVertexUvs.length;h<d;h++){let f=e.faceVertexUvs[h];this.faceVertexUvs[h]===void 0&&(this.faceVertexUvs[h]=[]);for(let p=0,v=f.length;p<v;p++){let m=f[p],g=[];for(let y=0,x=m.length;y<x;y++)g.push(m[y].clone());this.faceVertexUvs[h].push(g)}}}mergeMesh(e){if(!(e&&e.isMesh)){console.error("THREE.Geometry.mergeMesh(): mesh not an instance of THREE.Mesh.",e);return}e.matrixAutoUpdate&&e.updateMatrix(),this.merge(e.geometry,e.matrix)}mergeVertices(e=4){let t={},r=[],i=[],n=Math.pow(10,e);for(let s=0,l=this.vertices.length;s<l;s++){let u=this.vertices[s],c=Math.round(u.x*n)+"_"+Math.round(u.y*n)+"_"+Math.round(u.z*n);t[c]===void 0?(t[c]=s,r.push(this.vertices[s]),i[s]=r.length-1):i[s]=i[t[c]]}let a=[];for(let s=0,l=this.faces.length;s<l;s++){let u=this.faces[s];u.a=i[u.a],u.b=i[u.b],u.c=i[u.c];let c=[u.a,u.b,u.c];for(let h=0;h<3;h++)if(c[h]===c[(h+1)%3]){a.push(s);break}}for(let s=a.length-1;s>=0;s--){let l=a[s];this.faces.splice(l,1);for(let u=0,c=this.faceVertexUvs.length;u<c;u++)this.faceVertexUvs[u].splice(l,1)}let o=this.vertices.length-r.length;return this.vertices=r,o}setFromPoints(e){this.vertices=[];for(let t=0,r=e.length;t<r;t++){let i=e[t];this.vertices.push(new U(i.x,i.y,i.z||0))}return this}sortFacesByMaterialIndex(){let e=this.faces,t=e.length;for(let s=0;s<t;s++)e[s]._id=s;function r(s,l){return s.materialIndex-l.materialIndex}e.sort(r);let i=this.faceVertexUvs[0],n=this.faceVertexUvs[1],a,o;i&&i.length===t&&(a=[]),n&&n.length===t&&(o=[]);for(let s=0;s<t;s++){let l=e[s]._id;a&&a.push(i[l]),o&&o.push(n[l])}a&&(this.faceVertexUvs[0]=a),o&&(this.faceVertexUvs[1]=o)}toJSON(){let e={metadata:{version:4.5,type:"Geometry",generator:"Geometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,this.name!==""&&(e.name=this.name),this.parameters!==void 0){let f=this.parameters;for(let p in f)f[p]!==void 0&&(e[p]=f[p]);return e}let t=[];for(let f=0;f<this.vertices.length;f++){let p=this.vertices[f];t.push(p.x,p.y,p.z)}let r=[],i=[],n={},a=[],o={},s=[],l={};for(let f=0;f<this.faces.length;f++){let p=this.faces[f],v=!0,m=!1,g=this.faceVertexUvs[0][f]!==void 0,y=p.normal.length()>0,x=p.vertexNormals.length>0,b=p.color.r!==1||p.color.g!==1||p.color.b!==1,_=p.vertexColors.length>0,w=0;if(w=u(w,0,0),w=u(w,1,v),w=u(w,2,m),w=u(w,3,g),w=u(w,4,y),w=u(w,5,x),w=u(w,6,b),w=u(w,7,_),r.push(w),r.push(p.a,p.b,p.c),r.push(p.materialIndex),g){let S=this.faceVertexUvs[0][f];r.push(d(S[0]),d(S[1]),d(S[2]))}if(y&&r.push(c(p.normal)),x){let S=p.vertexNormals;r.push(c(S[0]),c(S[1]),c(S[2]))}if(b&&r.push(h(p.color)),_){let S=p.vertexColors;r.push(h(S[0]),h(S[1]),h(S[2]))}}function u(f,p,v){return v?f|1<<p:f&~(1<<p)}function c(f){let p=f.x.toString()+f.y.toString()+f.z.toString();return n[p]!==void 0||(n[p]=i.length/3,i.push(f.x,f.y,f.z)),n[p]}function h(f){let p=f.r.toString()+f.g.toString()+f.b.toString();return o[p]!==void 0||(o[p]=a.length,a.push(f.getHex())),o[p]}function d(f){let p=f.x.toString()+f.y.toString();return l[p]!==void 0||(l[p]=s.length/2,s.push(f.x,f.y)),l[p]}return e.data={},e.data.vertices=t,e.data.normals=i,a.length>0&&(e.data.colors=a),s.length>0&&(e.data.uvs=[s]),e.data.faces=r,e}clone(){return new E6().copy(this)}copy(e){this.vertices=[],this.colors=[],this.faces=[],this.faceVertexUvs=[[]],this.morphTargets=[],this.morphNormals=[],this.skinWeights=[],this.skinIndices=[],this.lineDistances=[],this.boundingBox=null,this.boundingSphere=null,this.name=e.name;let t=e.vertices;for(let h=0,d=t.length;h<d;h++)this.vertices.push(t[h].clone());let r=e.colors;for(let h=0,d=r.length;h<d;h++)this.colors.push(r[h].clone());let i=e.faces;for(let h=0,d=i.length;h<d;h++)this.faces.push(i[h].clone());for(let h=0,d=e.faceVertexUvs.length;h<d;h++){let f=e.faceVertexUvs[h];this.faceVertexUvs[h]===void 0&&(this.faceVertexUvs[h]=[]);for(let p=0,v=f.length;p<v;p++){let m=f[p],g=[];for(let y=0,x=m.length;y<x;y++){let b=m[y];g.push(b.clone())}this.faceVertexUvs[h].push(g)}}let n=e.morphTargets;for(let h=0,d=n.length;h<d;h++){let f={};if(f.name=n[h].name,n[h].vertices!==void 0){f.vertices=[];for(let p=0,v=n[h].vertices.length;p<v;p++)f.vertices.push(n[h].vertices[p].clone())}if(n[h].normals!==void 0){f.normals=[];for(let p=0,v=n[h].normals.length;p<v;p++)f.normals.push(n[h].normals[p].clone())}this.morphTargets.push(f)}let a=e.morphNormals;for(let h=0,d=a.length;h<d;h++){let f={};if(a[h].vertexNormals!==void 0){f.vertexNormals=[];for(let p=0,v=a[h].vertexNormals.length;p<v;p++){let m=a[h].vertexNormals[p],g={};g.a=m.a.clone(),g.b=m.b.clone(),g.c=m.c.clone(),f.vertexNormals.push(g)}}if(a[h].faceNormals!==void 0){f.faceNormals=[];for(let p=0,v=a[h].faceNormals.length;p<v;p++)f.faceNormals.push(a[h].faceNormals[p].clone())}this.morphNormals.push(f)}let o=e.skinWeights;for(let h=0,d=o.length;h<d;h++)this.skinWeights.push(o[h].clone());let s=e.skinIndices;for(let h=0,d=s.length;h<d;h++)this.skinIndices.push(s[h].clone());let l=e.lineDistances;for(let h=0,d=l.length;h<d;h++)this.lineDistances.push(l[h]);let u=e.boundingBox;u!==null&&(this.boundingBox=u.clone());let c=e.boundingSphere;return c!==null&&(this.boundingSphere=c.clone()),this.elementsNeedUpdate=e.elementsNeedUpdate,this.verticesNeedUpdate=e.verticesNeedUpdate,this.uvsNeedUpdate=e.uvsNeedUpdate,this.normalsNeedUpdate=e.normalsNeedUpdate,this.colorsNeedUpdate=e.colorsNeedUpdate,this.lineDistancesNeedUpdate=e.lineDistancesNeedUpdate,this.groupsNeedUpdate=e.groupsNeedUpdate,this}toBufferGeometry(){let e=new X4t().fromGeometry(this),t=new It,r=new Float32Array(e.vertices.length*3);if(t.setAttribute("position",S5.call(new Zt(r,3),e.vertices)),e.normals.length>0){let i=new Float32Array(e.normals.length*3);t.setAttribute("normal",S5.call(new Zt(i,3),e.normals))}if(e.colors.length>0){let i=new Float32Array(e.colors.length*3);t.setAttribute("color",ire.call(new Zt(i,3),e.colors))}if(e.uvs.length>0){let i=new Float32Array(e.uvs.length*2);t.setAttribute("uv",nre.call(new Zt(i,2),e.uvs))}if(e.uvs2.length>0){let i=new Float32Array(e.uvs2.length*2);t.setAttribute("uv2",nre.call(new Zt(i,2),e.uvs2))}t.groups=e.groups;for(let i in e.morphTargets){let n=[],a=e.morphTargets[i];for(let o=0,s=a.length;o<s;o++){let l=a[o],u=new ht(l.data.length*3,3);u.name=l.name,n.push(S5.call(u,l.data))}t.morphAttributes[i]=n}if(e.skinIndices.length>0){let i=new ht(e.skinIndices.length*4,4);t.setAttribute("skinIndex",are.call(i,e.skinIndices))}if(e.skinWeights.length>0){let i=new ht(e.skinWeights.length*4,4);t.setAttribute("skinWeight",are.call(i,e.skinWeights))}return e.boundingSphere!==null&&(t.boundingSphere=e.boundingSphere.clone()),e.boundingBox!==null&&(t.boundingBox=e.boundingBox.clone()),t}computeTangents(){console.error("THREE.Geometry: .computeTangents() has been removed.")}computeLineDistances(){console.error("THREE.Geometry: .computeLineDistances() has been removed. Use THREE.Line.computeLineDistances() instead.")}applyMatrix(e){return console.warn("THREE.Geometry: .applyMatrix() has been renamed to .applyMatrix4()."),this.applyMatrix4(e)}dispose(){this.dispatchEvent({type:"dispose"})}static createBufferGeometryFromObject(e){let t=new It,r=e.geometry;if(e.isPoints||e.isLine){let i=new ht(r.vertices.length*3,3),n=new ht(r.colors.length*3,3);if(t.setAttribute("position",S5.call(i,r.vertices)),t.setAttribute("color",ire.call(n,r.colors)),r.lineDistances&&r.lineDistances.length===r.vertices.length){let a=new ht(r.lineDistances.length,1);t.setAttribute("lineDistance",Z4t.call(a,r.lineDistances))}r.boundingSphere!==null&&(t.boundingSphere=r.boundingSphere.clone()),r.boundingBox!==null&&(t.boundingBox=r.boundingBox.clone())}else e.isMesh&&(t=r.toBufferGeometry());return t}};E6.prototype.isGeometry=!0;var X4t=class{constructor(){this.vertices=[],this.normals=[],this.colors=[],this.uvs=[],this.uvs2=[],this.groups=[],this.morphTargets={},this.skinWeights=[],this.skinIndices=[],this.boundingBox=null,this.boundingSphere=null,this.verticesNeedUpdate=!1,this.normalsNeedUpdate=!1,this.colorsNeedUpdate=!1,this.uvsNeedUpdate=!1,this.groupsNeedUpdate=!1}computeGroups(e){let t=[],r,i,n,a=e.faces;for(i=0;i<a.length;i++){let o=a[i];o.materialIndex!==n&&(n=o.materialIndex,r!==void 0&&(r.count=i*3-r.start,t.push(r)),r={start:i*3,materialIndex:n})}r!==void 0&&(r.count=i*3-r.start,t.push(r)),this.groups=t}fromGeometry(e){let t=e.faces,r=e.vertices,i=e.faceVertexUvs,n=i[0]&&i[0].length>0,a=i[1]&&i[1].length>0,o=e.morphTargets,s=o.length,l;if(s>0){l=[];for(let m=0;m<s;m++)l[m]={name:o[m].name,data:[]};this.morphTargets.position=l}let u=e.morphNormals,c=u.length,h;if(c>0){h=[];for(let m=0;m<c;m++)h[m]={name:u[m].name,data:[]};this.morphTargets.normal=h}let d=e.skinIndices,f=e.skinWeights,p=d.length===r.length,v=f.length===r.length;r.length>0&&t.length===0&&console.error("THREE.DirectGeometry: Faceless geometries are not supported.");for(let m=0;m<t.length;m++){let g=t[m];this.vertices.push(r[g.a],r[g.b],r[g.c]);let y=g.vertexNormals;if(y.length===3)this.normals.push(y[0],y[1],y[2]);else{let b=g.normal;this.normals.push(b,b,b)}let x=g.vertexColors;if(x.length===3)this.colors.push(x[0],x[1],x[2]);else{let b=g.color;this.colors.push(b,b,b)}if(n===!0){let b=i[0][m];b!==void 0?this.uvs.push(b[0],b[1],b[2]):(console.warn("THREE.DirectGeometry.fromGeometry(): Undefined vertexUv ",m),this.uvs.push(new me,new me,new me))}if(a===!0){let b=i[1][m];b!==void 0?this.uvs2.push(b[0],b[1],b[2]):(console.warn("THREE.DirectGeometry.fromGeometry(): Undefined vertexUv2 ",m),this.uvs2.push(new me,new me,new me))}for(let b=0;b<s;b++){let _=o[b].vertices;l[b].data.push(_[g.a],_[g.b],_[g.c])}for(let b=0;b<c;b++){let _=u[b].vertexNormals[m];h[b].data.push(_.a,_.b,_.c)}p&&this.skinIndices.push(d[g.a],d[g.b],d[g.c]),v&&this.skinWeights.push(f[g.a],f[g.b],f[g.c])}return this.computeGroups(e),this.verticesNeedUpdate=e.verticesNeedUpdate,this.normalsNeedUpdate=e.normalsNeedUpdate,this.colorsNeedUpdate=e.colorsNeedUpdate,this.uvsNeedUpdate=e.uvsNeedUpdate,this.groupsNeedUpdate=e.groupsNeedUpdate,e.boundingSphere!==null&&(this.boundingSphere=e.boundingSphere.clone()),e.boundingBox!==null&&(this.boundingBox=e.boundingBox.clone()),this}},SO=class{constructor(e,t,r,i,n,a=0){this.a=e,this.b=t,this.c=r,this.normal=i&&i.isVector3?i:new U,this.vertexNormals=Array.isArray(i)?i:[],this.color=n&&n.isColor?n:new Vt,this.vertexColors=Array.isArray(n)?n:[],this.materialIndex=a}clone(){return new this.constructor().copy(this)}copy(e){this.a=e.a,this.b=e.b,this.c=e.c,this.normal.copy(e.normal),this.color.copy(e.color),this.materialIndex=e.materialIndex;for(let t=0,r=e.vertexNormals.length;t<r;t++)this.vertexNormals[t]=e.vertexNormals[t].clone();for(let t=0,r=e.vertexColors.length;t<r;t++)this.vertexColors[t]=e.vertexColors[t].clone();return this}};function Z4t(e){return this.array.set(e),this}function ire(e){let t=this.array,r=0;for(let i=0,n=e.length;i<n;i++){let a=e[i];a===void 0&&(console.warn("THREE.BufferAttribute.copyColorsArray(): color is undefined",i),a=new Vt),t[r++]=a.r,t[r++]=a.g,t[r++]=a.b}return this}function nre(e){let t=this.array,r=0;for(let i=0,n=e.length;i<n;i++){let a=e[i];a===void 0&&(console.warn("THREE.BufferAttribute.copyVector2sArray(): vector is undefined",i),a=new me),t[r++]=a.x,t[r++]=a.y}return this}function S5(e){let t=this.array,r=0;for(let i=0,n=e.length;i<n;i++){let a=e[i];a===void 0&&(console.warn("THREE.BufferAttribute.copyVector3sArray(): vector is undefined",i),a=new U),t[r++]=a.x,t[r++]=a.y,t[r++]=a.z}return this}function are(e){let t=this.array,r=0;for(let i=0,n=e.length;i<n;i++){let a=e[i];a===void 0&&(console.warn("THREE.BufferAttribute.copyVector4sArray(): vector is undefined",i),a=new er),t[r++]=a.x,t[r++]=a.y,t[r++]=a.z,t[r++]=a.w}return this}var Q4t=["a","b","c"];function K4t(e,t){switch(t){case"c":return e.c;case"b":return e.b;case"a":default:return e.a}}function iD(e,t,r){let i=Math.min(e,t),n=Math.max(e,t),a=i+"_"+n;return r.get(a)}function nD(e,t,r,i,n,a){let o=Math.min(e,t),s=Math.max(e,t),l=o+"_"+s,u;if(i.has(l))u=i.get(l);else{let c=r[o],h=r[s];u={a:c,b:h,newEdge:null,faces:[]},i.set(l,u)}u.faces.push(n),a[e].edges.push(u),a[t].edges.push(u)}function J4t(e,t,r,i){let n,a,o;for(n=0,a=e.length;n<a;n++)r[n]={edges:[]};for(n=0,a=t.length;n<a;n++)o=t[n],nD(o.a,o.b,e,i,o,r),nD(o.b,o.c,e,i,o,r),nD(o.c,o.a,e,i,o,r)}function C5(e,t,r,i,n){e.push(new SO(t,r,i,void 0,void 0,n))}function cg(e,t){return Math.abs(t-e)/2+Math.min(e,t)}function E5(e,t,r,i){e.push([t.clone(),r.clone(),i.clone()])}var $4t=class{constructor(e=1){this.subdivisions=e}modify(e){e instanceof It?e=new E6().fromBufferGeometry(e):e=e.clone(),e.mergeVertices();let t=this.subdivisions;for(;t-- >0;)this._smooth(e);return e.computeFaceNormals(),e.computeVertexNormals(),e}_smooth(e){let t=new U,r,i,n,a,o,s=e.vertices,l=e.faces,u=e.faceVertexUvs[0],c=u!==void 0&&u.length>0,h=[],d=new Map;J4t(s,l,h,d);let f=[],p,v,m,g,y,x,b;for(let ne of Array.from(d.keys())){for(v=d.get(ne),m=new U,y=3/8,x=1/8,b=v.faces.length,b!=2&&(y=.5,x=0,b!=1),m.addVectors(v.a,v.b).multiplyScalar(y),t.set(0,0,0),a=0;a<b;a++){for(g=v.faces[a],o=0;o<3&&(p=s[K4t(g,Q4t[o])],!(p!==v.a&&p!==v.b));o++);p&&t.add(p)}t.multiplyScalar(x),m.add(t),v.newEdge=f.length,f.push(m)}let _,w,S,A,M,E,T,L=[];for(i=0,n=s.length;i<n;i++){for(E=s[i],M=h[i].edges,r=M.length,r==3?_=3/16:r>3&&(_=3/(8*r)),w=1-r*Number(_),S=_,r<=2&&(r==2?(w=3/4,S=1/8):r==1||r==0),T=E.clone().multiplyScalar(w),t.set(0,0,0),a=0;a<r;a++)A=M[a],p=A.a!==E?A.a:A.b,t.add(p);t.multiplyScalar(Number(S)),T.add(t),L.push(T)}let P=L.concat(f),C=L.length,D,I,O,R=[],H=[],j,N,k,G,Y=new me,F=new me,Z=new me;for(i=0,n=l.length;i<n;i++)g=l[i],D=Number(iD(g.a,g.b,d).newEdge)+C,I=Number(iD(g.b,g.c,d).newEdge)+C,O=Number(iD(g.c,g.a,d).newEdge)+C,C5(R,D,I,O,g.materialIndex),C5(R,g.a,D,O,g.materialIndex),C5(R,g.b,I,D,g.materialIndex),C5(R,g.c,O,I,g.materialIndex),c&&(j=u[i],N=j[0],k=j[1],G=j[2],Y.set(cg(N.x,k.x),cg(N.y,k.y)),F.set(cg(k.x,G.x),cg(k.y,G.y)),Z.set(cg(N.x,G.x),cg(N.y,G.y)),E5(H,Y,F,Z),E5(H,N,Y,Z),E5(H,k,F,Y),E5(H,G,Z,F));e.vertices=P,e.faces=R,c&&(e.faceVertexUvs[0]=H)}},Gn=new U,e3t=class{static create(e){return this.build(this.normalizeInputs(e))}static normalizeInputs(e,t){let r=e.geometry??(t==null?void 0:t.geometry)??new It().copy(new Ru(100,100,100)),i;t===void 0?(r.computeBoundingBox(),r.boundingBox.getSize(Gn),i={width:Gn.x,height:Gn.y,depth:Gn.z,subdivisions:0}):i=t.parameters;let n={...i,...e.parameters};return{parameters:{width:Math.abs(n.width),height:Math.abs(n.height),depth:Math.abs(n.depth),subdivisions:Math.abs(n.subdivisions)},geometry:r}}static build(e){let{width:t,height:r,depth:i,subdivisions:n}=e.parameters,a=e.geometry??new It().copy(new Ru(100,100,100)),o=a.userData.parameters;o===void 0?(a.computeBoundingBox(),a.boundingBox.getSize(Gn)):Gn.set(o.width,o.height,o.depth),(t!==Gn.x||r!==Gn.y||i!==Gn.z)&&a.scale(Gn.x===0?1:t/Gn.x,Gn.y===0?1:r/Gn.y,Gn.z===0?1:i/Gn.z);let s=a.originalGeometry;try{n>0?(s===void 0||(o==null?void 0:o.subdivisions)!==n)&&(s===void 0&&(s=a),a=new $4t(n).modify(s).toBufferGeometry()):(s!==void 0&&(a=s),s=void 0,a.getAttribute("normal")===void 0&&a.computeVertexNormals())}catch{s!==void 0&&(a=s),s=void 0,a.getAttribute("normal")===void 0&&a.computeVertexNormals()}return s!==void 0&&Object.assign(a,{originalGeometry:s}),delete e.geometry,Object.assign(a,{userData:{...e,type:"NonParametricGeometry"}})}static loadFromUrl(e,t,r){new bme(r).load(e,i=>{let n=this.normalizeInputs({geometry:i});i.boundingBox.getSize(Gn);let a=100/Gn.x;Object.assign(n.parameters,{width:100,height:Gn.y*a,depth:Gn.z*a}),t(this.build(n))})}},v1e=class{static create(e){return this.build(this.normalizeInputs(e))}static normalizeInputs(e,t){let r=Object.assign({},(t==null?void 0:t.parameters)??{width:100,depth:0,spikes:5,cornerRadius:0,extrudeBevelSize:0,extrudeBevelSegments:3},e.parameters);return{shape:e.shape&&e.shape instanceof dn?e.shape:new dn,parameters:Object.assign(r,{width:Math.abs(r.width),height:Math.abs(r.height??r.width),depth:Math.abs(r.depth??0)})}}static build(e){let{width:t,height:r,spikes:i,cornerRadius:n,depth:a,extrudeBevelSize:o,extrudeBevelSegments:s}=e.parameters,l=e.shape,u=t*.5,c=r*.5,h=0,d=0,f=2*Math.PI/i;for(let v=0;v<i;v++){let m=f*v,g=h+Math.sin(m)*u,y=d+Math.cos(m)*c;l.addPoint(l.createPoint(g,y))}l.isClosed=!0;for(let v=0,m=l.points.length;v<m;v++)l.points[v].roundness=n;l.roundness=n,l.update();let p=pm.create({shape:l,parameters:{roundness:n,depth:a,extrudeBevelSize:o,extrudeBevelSegments:s}});return Object.assign(p,{userData:{...e,type:"PolygonGeometry"}})}},t3t=class{static create(e){return this.build(this.normalizeInputs(e))}static normalizeInputs(e,t){let r=Object.assign({},(t==null?void 0:t.parameters)??{width:100,radialSegments:4,heightSegments:1,cornerRadius:0,cornerSegments:8,openEnded:!1},e.parameters);return{parameters:Object.assign(r,{width:Math.abs(r.width),height:Math.abs(r.height??r.width),depth:Math.abs(r.depth??r.width)})}}static build(e){let{width:t,height:r,depth:i,radialSegments:n,heightSegments:a,openEnded:o,cornerRadius:s,cornerSegments:l}=e.parameters,u=new i3t(t*.5,r,n,a,o,s,l);return u.scale(1,1,i/t),Object.assign(u,{userData:{...e,type:"PyramidGeometry"}})}};function vx(e,t,r){r.x=e.x*t.x,r.y=e.y,r.z=e.x*t.y}function aD(e,t,r,i,n,a){let o=t.clone().sub(e),s=r.clone().sub(e),l=o.angleTo(s);if(o.normalize(),s.normalize(),i===n){let u=o.add(s).normalize();a.copy(e).addScaledVector(u,i/Math.sin(l/2))}else{let u=o.angleTo(s);a.copy(e),a.addScaledVector(o,n/Math.sin(u)),a.addScaledVector(s,i/Math.sin(u))}}function r3t(e,t,r){let i=e.clone().sub(t),n=r.clone().sub(t);return i.projectOnVector(n),i.add(t)}var i3t=class extends It{constructor(e=.5,t=1,r=4,i=1,n=!1,a=0,o=4){super(),r=Math.floor(Math.max(3,r)),i=Math.floor(i),o=Math.floor(o);let s=[],l=[],u=[],c=[],h=0,d=t/2,f=Math.PI/r,p=e*Math.cos(Math.PI/r),v=2*Math.PI/r,m=(r-2)*Math.PI/r,g=Math.PI-m,y=new U(0,-d,0),x=new U(0,d,0),b=new me(e,-d),_=new me(p,-d),w=new me(0,x.y).sub(_),S=new me(0,x.y).sub(b),A=new me(w.y,-w.x).normalize(),M=new me(S.y,-S.x).normalize(),E=e*Math.cos(Math.PI/r)*Math.tan((Math.PI-w.angle())/2)-1e-8;a=Math.min(a,E);let T;{let O=new U(A.x,A.y,0),R=new U(Math.cos(v)*O.x,O.y,Math.sin(v)*O.x);T=O.angleTo(R)}let L=a/Math.tan((Math.PI-w.angle())/2),P=a/Math.tan((Math.PI-T)/2),C=new U;if(!n){l.push(y.x,y.y,y.z),u.push(0,-1,0),c.push(0,0);let O=h++,R=[],H=b.clone(),j=L/Math.cos(Math.PI/r);H.x-=j;for(let N=0;N<r;N++){let k=N/r*Math.PI*2+f,G=new me(Math.sin(k),Math.cos(k));vx(H,G,C),l.push(C.x,C.y,C.z),u.push(0,-1,0),c.push(0,0),R.push(h++)}for(let N=0;N<R.length;N++)s.push(R[N],O,R[(N+1)%R.length])}{let O=new U,R=new U,H=new U,j=new U,N=new U,k=new U;for(let G=0;G<r;G++){let Y=G/r*Math.PI*2+f,F=(G+.5)/r*Math.PI*2+f,Z=(G+1)/r*Math.PI*2+f,ne=new me(Math.sin(Y),Math.cos(Y)),re=new me(Math.sin(F),Math.cos(F)),ae=new me(Math.sin(Z),Math.cos(Z));vx(b,ne,R),vx(b,ae,H),vx(A,re,O),aD(x,R,H,P,P,j),l.push(j.x,j.y,j.z),aD(R,x,H,P,L,N),l.push(N.x,N.y,N.z),aD(H,R,x,L,P,k),l.push(k.x,k.y,k.z),u.push(O.x,O.y,O.z),u.push(O.x,O.y,O.z),u.push(O.x,O.y,O.z),c.push(0,0),c.push(0,0),c.push(0,0);let he=h++,se=h++,fe=h++;if(s.push(he,se,fe),a>0){{let le=R.clone().add(H).multiplyScalar(.5),Ae=x.clone().sub(le).normalize(),xe=y.clone().sub(le).normalize().add(Ae).normalize().multiplyScalar(-1),ye=k.clone().sub(N);D(le,ye,xe,w.angle())}let J,te;{let le=new U;vx(M,ae,le);let Ae=k.clone().add(j).multiplyScalar(.5);Ae=r3t(Ae,H,x);let xe=k.clone().sub(j);[J,te]=D(Ae,xe,le,T,j.y)}{let le=J,Ae=le.clone().setY(0).normalize(),xe=new U(0,-1,0),ye=Ae.clone().cross(xe);I(le,Ae,xe,ye)}{let le=w.angle(),Ae=Math.PI-le,xe=x.clone();xe.y-=a/Math.sin(le-Math.PI/2);let ye=new U,Se=[];for(let Ce=0;Ce<o;Ce++){let ee=[],K=Math.PI/2-Ae*Ce/o,ve=Math.cos(K),Me=Math.sin(K),Q=F;for(let W=0;W<=Ce;W++){let V=Math.cos(Q),z=Math.sin(Q);O.x=ve*z,O.y=Me,O.z=ve*V,ye.copy(xe).addScaledVector(O,a),l.push(ye.x,ye.y,ye.z),u.push(O.x,O.y,O.z),c.push(0,0),ee.push(h++),Q+=Math.PI*2/Ce/r}Se.push(ee)}te.reverse(),Se.push(te);let Pe=Se.length-1;for(let Ce=0;Ce<Pe;Ce++){let ee=Se[Ce],K=Se[Ce+1],ve=ee.length-1;s.push(K[1],ee[0],K[0]);for(let Me=1;Me<=ve;Me++)s.push(ee[Me],ee[Me-1],K[Me]),s.push(K[Me+1],ee[Me],K[Me])}}}}}this.setIndex(s),this.setAttribute("position",new ht(l,3)),this.setAttribute("normal",new ht(u,3)),this.setAttribute("uv",new ht(c,2));function D(O,R,H,j,N){let k=-j/2,G=(Math.PI-j)/2,Y=R.clone().normalize().cross(H);O.addScaledVector(H,-a/Math.sin(G));let F=new U,Z=new U,ne=1,re=h,ae=[];for(let he=0;he<=o;he++){let se=k+he/o*j;Z.set(0,0,0),Z.addScaledVector(Y,Math.sin(se)),Z.addScaledVector(H,Math.cos(se));for(let fe=0;fe<=ne;fe++){let J=fe/ne-.5;if(F.copy(O),F.addScaledVector(R,J),F.addScaledVector(Z,a),N!=null){let te=Math.max(0,F.y-N);F.addScaledVector(R,-te/R.y)}l.push(F.x,F.y,F.z),u.push(Z.x,Z.y,Z.z),c.push(0,0),fe===0&&ae.push(h),h++}}for(let he=0;he<o;he++)for(let se=0;se<ne;se++){let fe=re+se+(ne+1)*he,J=fe+(ne+1),te=J+1,le=fe+1;s.push(fe,J,le),s.push(J,te,le)}return[O.clone().addScaledVector(R,.5),ae]}function I(O,R,H,j){let N=Math.PI/2,k=S.angle()-N,G=[],Y=new U,F=new U;for(let ne=0;ne<=o;ne++){let re=[],ae=ne/o;for(let he=0;he<=ne;he++){let se=((ne?he/ne:0)-.5)*g,fe=Math.cos(se),J=Math.sin(se),te=Math.atan(Math.tan(k)*fe),le=(N+te)*ae,Ae=Math.cos(le),xe=Math.sin(le);Y.set(0,0,0),Y.addScaledVector(R,xe*fe),Y.addScaledVector(H,Ae),Y.addScaledVector(j,xe*J),F.copy(O).addScaledVector(Y,a),l.push(F.x,F.y,F.z),u.push(Y.x,Y.y,Y.z),c.push(0,0),re.push(h++)}G.push(re)}let Z=G.length-1;for(let ne=0;ne<Z;ne++){let re=G[ne],ae=G[ne+1],he=re.length-1;s.push(re[0],ae[1],ae[0]);for(let se=1;se<=he;se++)s.push(re[se-1],re[se],ae[se]),s.push(re[se],ae[se+1],ae[se])}}}},Kz=class{static create(e){return this.build(this.normalizeInputs(e))}static normalizeInputs(e,t){let r=Object.assign({},(t==null?void 0:t.parameters)??{width:100,depth:0,cornerRadius:[0,0,0,0],cornerType:1,extrudeBevelSize:0,extrudeBevelSegments:1},e.parameters),i=Object.assign((t==null?void 0:t.ui)??{enabledIndieCorners:!1},e.ui);return{shape:e.shape&&e.shape instanceof dn?e.shape:new dn,parameters:Object.assign(r,{width:Math.abs(r.width),height:Math.abs(r.height??r.width),depth:Math.abs(r.depth??0)}),ui:i}}static build(e){let t=e.shape,{width:r,height:i,cornerRadius:n,cornerType:a,depth:o,extrudeBevelSize:s,extrudeBevelSegments:l}=e.parameters,u={x:r*.5,y:i*.5},c={x:-u.x,y:-u.y},h={x:u.x,y:u.y};function d(b,_,w){return _>r&&w>i?Math.min(b*r/_,b*i/w):_>r?b*r/_:w>i?b*i/w:b}let f=[];f[0]=n[0]===0?0:d(n[0],n[0]+n[3],n[0]+n[1]),f[1]=n[1]===0?0:d(n[1],n[1]+n[2],n[1]+n[0]),f[2]=n[2]===0?0:d(n[2],n[2]+n[1],n[2]+n[3]),f[3]=n[3]===0?0:d(n[3],n[3]+n[0],n[3]+n[2]);let p=c.x,v=h.x,m=h.y,g=c.y;t.addPoint(t.createPoint(p,m)),t.addPoint(t.createPoint(v,m)),t.addPoint(t.createPoint(v,g)),t.addPoint(t.createPoint(p,g)),t.isClosed=!0;let y=!0;for(let b=0,_=t.points.length;b<_;b++)t.points[b].roundness=f[b],b>0&&f[b]!==f[b-1]&&(y=!1);y&&(t.roundness=f[0]),t.useCubicForRoundedCorners=a!==1,t.update();let x=pm.create({shape:t,parameters:{depth:o,extrudeBevelSize:s,extrudeBevelSegments:l}});return Object.assign(x,{userData:{...e,type:"RectangleGeometry"}})}},n3t=class{static create(e){return this.build(this.normalizeInputs(e))}static normalizeInputs(e,t){let r=Object.assign({},(t==null?void 0:t.parameters)??{width:100,widthSegments:64,heightSegments:64,phiStart:0,phiLength:2*Math.PI,thetaStart:0,thetaLength:180},e.parameters);return r.thetaLength=vt.clamp(r.thetaLength,0,180),{parameters:Object.assign(r,{width:Math.abs(r.width),height:Math.abs(r.height??r.width),depth:Math.abs(r.depth??r.width)})}}static build(e){let{width:t=100,height:r=t,depth:i=t,widthSegments:n=64,heightSegments:a=64,phiStart:o,phiLength:s,thetaStart:l,thetaLength:u}=e.parameters,c;return u===0?(c=new It,c.setAttribute("position",new ht([],3))):c=new y1(.5*t,n,a,o,s,l,u*vt.DEG2RAD),c.scale(1,r/t,i/t),Object.assign(c,{userData:{...e,type:"SphereGeometry"}})}},a3t=class{static create(e){return this.build(this.normalizeInputs(e))}static normalizeInputs(e,t){let r=Object.assign({},(t==null?void 0:t.parameters)??{width:100,depth:0,widthSegments:8,heightSegments:8},e.parameters);return{parameters:Object.assign(r,{width:Math.abs(r.width),height:Math.abs(r.height??r.width),depth:0})}}static build(e){let{width:t=100,height:r=t,widthSegments:i=8,heightSegments:n=8}=e.parameters,a=new Md(t,r,i,n);return a.scale(1,1,1),Object.assign(a,{userData:{...e,type:"PlaneGeometry"}})}},o3t=class{static create(e){return this.build(this.normalizeInputs(e))}static normalizeInputs(e,t){let r=Object.assign({},(t==null?void 0:t.parameters)??{width:100,angle:90,cornerRadius:24,cornerSegments:8},e.parameters);return{parameters:Object.assign(r,{width:Math.abs(r.width),height:Math.abs(r.height??r.width),depth:Math.abs(r.depth??r.width)})}}static build(e){let{width:t,height:r,depth:i,angle:n,cornerRadius:a,cornerSegments:o}=e.parameters,s=new s3t(t,r,i,n,a,o);return Object.assign(s,{userData:{...e,type:"BackdropGeometry"}})}},s3t=class extends It{constructor(e=1,t=1,r=1,i=90,n=10,a=24){super(),this.type="BackdropGeometry";let o=[],s=[],l=[],u=.001;n==0&&(a=1),a=Math.max(1,Math.floor(a)),n=Math.min(n,100),i=Math.min(180-u,i),i*=Math.PI/180;let c=[],h=Math.PI/2,d=(ne=0,re=0,ae=0)=>new U(ne,re,ae),f=d(),p=d(),[v,m,g]=[t/2,e/2,r/2],y=-m,x=+m,[b,_,w]=[d(y,-v,+g),d(y,-v,-g),d(y,+v,-g)],S=(ne,re=!1)=>Math.sin(ne-Math.PI/(1+ +re)),A=(ne,re=!1)=>Math.cos(ne-Math.PI/(1+ +re));w.y=Math.sin(i)*t-v;let M=Math.cos(i)*t-g,E=b.z-u;i<=h?(w.z=Math.min(M,E),w.z==E&&(w.y-=(M-E)/Math.tan(h-i))):_.z=Math.min(_.z-M-g,b.z-u),f.subVectors(b,_),p.subVectors(w,_);let T=Math.min(f.length(),p.length())*n/100,L=T*Math.tan(i/2),P=T/Math.cos(i/2),C=f.clone().normalize().add(p.normalize()).setLength(P).add(_);f.set(0,S(i,!0),A(i,!0)),c.push([w,f.clone()]);let D=(Math.PI-i)/a;for(let ne=0;ne<=a;ne++){let re=h+i+ne*D;f.set(0,Math.sin(re)*L,Math.cos(re)*L),f.add(C),p.set(0,S(re),A(re)),c.push([f.clone(),p.clone()])}c.push([b,d(0,1,0)]);let I=Math.sin(D/2)*L*2,O=c.length-1,R=c[0][0].distanceTo(c[1][0]),H=c[O-1][0].distanceTo(c[O][0]),j=R+I*a+H;c[0].push(1);for(let ne=0;ne<=a;ne++)c[ne+1].push(1-(R+ne*I)/j);c[O].push(0);let[N,k,G]=c[0],Y,F,Z;for(let ne=1;ne<c.length;ne++)[Y,F,Z]=c[ne],o.push(y,N.y,N.z,y,Y.y,Y.z,x,N.y,N.z,x,N.y,N.z,y,Y.y,Y.z,x,Y.y,Y.z),s.push(0,k.y,k.z,0,F.y,F.z,0,k.y,k.z,0,k.y,k.z,0,F.y,F.z,0,F.y,F.z),l.push(0,G,0,Z,1,G,1,G,0,Z,1,Z),[N,k,G]=[Y,F,Z];this.setAttribute("position",new ht(o,3)),this.setAttribute("normal",new ht(s,3)),this.setAttribute("uv",new ht(l,2))}},m1e=class{static create(e){return this.build(this.normalizeInputs(e))}static normalizeInputs(e,t){let r=Object.assign({},(t==null?void 0:t.parameters)??{width:100,depth:0,innerRadiusPercent:38.19,spikes:5,cornerRadius:0,angle:360,extrudeBevelSize:0,extrudeBevelSegments:1},e.parameters);return{shape:e.shape&&e.shape instanceof dn?e.shape:new dn,parameters:Object.assign(r,{width:Math.abs(r.width),height:Math.abs(r.height??r.width),depth:Math.abs(r.depth??0)})}}static build(e){let{width:t,height:r,innerRadiusPercent:i,spikes:n,cornerRadius:a,angle:o,depth:s,extrudeBevelSize:l,extrudeBevelSegments:u}=e.parameters,c=e.shape,h=t*.5,d=r*.5,f=0,p=0,v=o*Math.PI/360/n,m=Math.PI/2*3*-1,g=h*i/100,y=d*i/100;if(n===3&&i===50){v=2*Math.PI/n;for(let b=0;b<n;b++){let _=v*b,w=f+Math.sin(_)*h,S=p+Math.cos(_)*d;c.addPoint(c.createPoint(w,S))}}else for(let b=0;b<n;b++){let _=f+Math.cos(m)*h,w=p+Math.sin(m)*d;c.addPoint(c.createPoint(_,w)),m+=v,_=f+Math.cos(m)*g,w=p+Math.sin(m)*y,c.addPoint(c.createPoint(_,w)),m+=v}c.isClosed=!0;for(let b=0,_=c.points.length;b<_;b++)c.points[b].roundness=a;c.roundness=a,c.update();let x=pm.create({shape:c,parameters:{roundness:a,depth:s,extrudeBevelSize:l,extrudeBevelSegments:u}});return Object.assign(x,{userData:{...e,type:"StarGeometry"}})}},l3t=class{static create(e){return this.build(this.normalizeInputs(e))}static normalizeInputs(e,t){let r=Object.assign({},(t==null?void 0:t.parameters)??{width:100,depth:0},e.parameters);return{parameters:Object.assign(r,{width:Math.abs(r.width),height:Math.abs(r.height??r.width),depth:Math.abs(r.depth??0)})}}static build(e){let{width:t,height:r}=e.parameters,i=new Md(t,r);return Object.assign(i,{userData:{...e,type:"TextFrameGeometry"}})}},u3t=class{static create(e){return this.build(this.normalizeInputs(e))}static normalizeInputs(e,t){let r=Object.assign({},(t==null?void 0:t.parameters)??{width:100,radialSegments:32,tubularSegments:64,arc:360,cornerRadius:30,cornerSegments:8},e.parameters),i=Math.abs(r.width),n=Math.abs(r.height??r.width),a=Math.round(Math.abs(r.depth??r.width*.25));return{parameters:Object.assign(r,{width:i,height:n,depth:a})}}static build(e){let{width:t,height:r,depth:i,radialSegments:n,tubularSegments:a,arc:o,cornerRadius:s,cornerSegments:l}=e.parameters,u=c3t(t,r,i,t*.5,o,a,0,0,n,s,l);return u.scale(1,r/t,1),Object.assign(u,{userData:{...e,type:"TorusGeometry"}})}};function c3t(e,t,r,i,n,a,o,s,l,u,c){[t,r]=[r,t],o=t/2;let h=vt.clamp(n/360,0,1);if(h===0){let d=new It;return d.setAttribute("position",new ht([],3)),d}return h===1&&(u=0),new f1e(!0,e,t,r,i,h,a,o,s,l,u,c)}var h3t=class{static create(e){return this.build(this.normalizeInputs(e))}static normalizeInputs(e,t){let r=Object.assign({},(t==null?void 0:t.parameters)??{width:100,tubularSegments:64,radialSegments:32,p:2,q:3},e.parameters);return{parameters:Object.assign(r,{width:Math.abs(r.width),height:Math.abs(r.height??r.width),depth:Math.abs(r.depth??r.width),tube:r.tube??r.width*.125})}}static build(e){let{width:t,tube:r,tubularSegments:i,radialSegments:n,p:a,q:o}=e.parameters,s=t*.5;s!==r&&(s-=r);let l=new fme(s,r,i,n,a,o);return Object.assign(l,{userData:{...e,type:"TorusKnotGeometry"}})}},d3t=class{static create(e){return this.build(this.normalizeInputs(e))}static normalizeInputs(e,t){let r=Object.assign({},(t==null?void 0:t.parameters)??{width:100,depth:0,spikes:5,cornerRadius:0,extrudeBevelSize:0,extrudeBevelSegments:1,isRect:!1},e.parameters);return{shape:e.shape&&e.shape instanceof dn?e.shape:new dn,parameters:Object.assign(r,{width:Math.abs(r.width),height:Math.abs(r.height??r.width*(r.isRect?1:Math.sqrt(3)/2)),depth:Math.abs(r.depth??0)})}}static build(e){let{width:t=100,height:r,cornerRadius:i,depth:n,extrudeBevelSize:a,extrudeBevelSegments:o,isRect:s}=e.parameters,l=e.shape,u=t*.5,c=r*.5;s?(l.addPoint(l.createPoint(-u,c)),l.addPoint(l.createPoint(u,-c)),l.addPoint(l.createPoint(-u,-c))):(l.addPoint(l.createPoint(0,c)),l.addPoint(l.createPoint(u,-c)),l.addPoint(l.createPoint(-u,-c))),l.isClosed=!0;for(let d=0,f=l.points.length;d<f;d++)l.points[d].roundness=i;l.roundness=i,l.update();let h=pm.create({shape:l,parameters:{roundness:i,depth:n,extrudeBevelSize:a,extrudeBevelSegments:o}});return Object.assign(h,{userData:{...e,type:"TriangleGeometry"}})}};function f3t(e,t){let r=2*Math.PI;return(e%r+r)%r===(t%r+r)%r}function p3t(e){return/^(rgba)?\(\s*(\d+),\s*(\d+),\s*(\d+)(?:,\s*(\d+(?:\.\d+)?))?\s*\)$/.exec(e.toLowerCase())}function v3t(e,t,r){let i,n,a,o=Math.floor(e*6),s=e*6-o,l=r*(1-t),u=r*(1-s*t),c=r*(1-(1-s)*t);switch(o%6){case 0:i=r,n=c,a=l;break;case 1:i=u,n=r,a=l;break;case 2:i=l,n=r,a=c;break;case 3:i=l,n=u,a=r;break;case 4:i=c,n=l,a=r;break;case 5:default:i=r,n=l,a=u;break}return{r:i*255,g:n*255,b:a*255}}function m3t(e,t,r){e/=255,t/=255,r/=255;let i=Math.max(e,t,r),n=Math.min(e,t,r),a=i,o=i-n,s=i==0?0:o/i,l;if(i==n)l=0;else{switch(i){case e:l=(t-r)/o+(t<r?6:0);break;case t:l=(r-e)/o+2;break;case r:default:l=(e-t)/o+4;break}l/=6}return{h:l,s,v:a}}function g3t(e){return e=Math.floor(e),{r:e>>16&255,g:e>>8&255,b:e&255}}function y3t(e,t,r){return(e<<16)+(t<<8)+r}function x3t(e,t,r){return e=Math.round(e),t=Math.round(t),r=Math.round(r),"#"+[e,t,r].map(i=>i.toString(16).padStart(2,"0")).join("").toUpperCase()}function b3t(e){let t=/^#?([a-f\d])([a-f\d])([a-f\d])$/i;e=e.replace(t,(i,n,a,o)=>String(n+n+a+a+o+o));let r=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e);return r?{r:parseInt(r[1],16),g:parseInt(r[2],16),b:parseInt(r[3],16)}:null}var w3t={parseRgba:p3t,hsvToRgb:v3t,rgbToHsv:m3t,hexToRgb:g3t,rgbToHex:y3t,rgbToHexString:x3t,hexStringToRgb:b3t},_3t=class{add(e,t,r){if(typeof arguments[0]!="string")for(let i in arguments[0])this.add(i,arguments[0][i],arguments[1]);else(Array.isArray(e)?e:[e]).forEach(function(i){this[i]=this[i]||[],t&&this[i][r?"unshift":"push"](t)},this)}run(e,t){this[e]=this[e]||[],this[e].forEach(function(r){r.call(t&&t.context?t.context:t,t)})}},A3t=class{constructor(e){this.jsep=e,this.registered={}}register(...e){e.forEach(t=>{if(typeof t!="object"||!t.name||!t.init)throw new Error("Invalid JSEP plugin format");this.registered[t.name]||(t.init(this.jsep),this.registered[t.name]=t)})}},Ge=class{static get version(){return"1.3.8"}static toString(){return"JavaScript Expression Parser (JSEP) v"+Ge.version}static addUnaryOp(e){return Ge.max_unop_len=Math.max(e.length,Ge.max_unop_len),Ge.unary_ops[e]=1,Ge}static addBinaryOp(e,t,r){return Ge.max_binop_len=Math.max(e.length,Ge.max_binop_len),Ge.binary_ops[e]=t,r?Ge.right_associative.add(e):Ge.right_associative.delete(e),Ge}static addIdentifierChar(e){return Ge.additional_identifier_chars.add(e),Ge}static addLiteral(e,t){return Ge.literals[e]=t,Ge}static removeUnaryOp(e){return delete Ge.unary_ops[e],e.length===Ge.max_unop_len&&(Ge.max_unop_len=Ge.getMaxKeyLen(Ge.unary_ops)),Ge}static removeAllUnaryOps(){return Ge.unary_ops={},Ge.max_unop_len=0,Ge}static removeIdentifierChar(e){return Ge.additional_identifier_chars.delete(e),Ge}static removeBinaryOp(e){return delete Ge.binary_ops[e],e.length===Ge.max_binop_len&&(Ge.max_binop_len=Ge.getMaxKeyLen(Ge.binary_ops)),Ge.right_associative.delete(e),Ge}static removeAllBinaryOps(){return Ge.binary_ops={},Ge.max_binop_len=0,Ge}static removeLiteral(e){return delete Ge.literals[e],Ge}static removeAllLiterals(){return Ge.literals={},Ge}get char(){return this.expr.charAt(this.index)}get code(){return this.expr.charCodeAt(this.index)}constructor(e){this.expr=e,this.index=0}static parse(e){return new Ge(e).parse()}static getMaxKeyLen(e){return Math.max(0,...Object.keys(e).map(t=>t.length))}static isDecimalDigit(e){return e>=48&&e<=57}static binaryPrecedence(e){return Ge.binary_ops[e]||0}static isIdentifierStart(e){return e>=65&&e<=90||e>=97&&e<=122||e>=128&&!Ge.binary_ops[String.fromCharCode(e)]||Ge.additional_identifier_chars.has(String.fromCharCode(e))}static isIdentifierPart(e){return Ge.isIdentifierStart(e)||Ge.isDecimalDigit(e)}throwError(e){let t=new Error(e+" at character "+this.index);throw t.index=this.index,t.description=e,t}runHook(e,t){if(Ge.hooks[e]){let r={context:this,node:t};return Ge.hooks.run(e,r),r.node}return t}searchHook(e){if(Ge.hooks[e]){let t={context:this};return Ge.hooks[e].find(function(r){return r.call(t.context,t),t.node}),t.node}}gobbleSpaces(){let e=this.code;for(;e===Ge.SPACE_CODE||e===Ge.TAB_CODE||e===Ge.LF_CODE||e===Ge.CR_CODE;)e=this.expr.charCodeAt(++this.index);this.runHook("gobble-spaces")}parse(){this.runHook("before-all");let e=this.gobbleExpressions(),t=e.length===1?e[0]:{type:Ge.COMPOUND,body:e};return this.runHook("after-all",t)}gobbleExpressions(e){let t=[],r,i;for(;this.index<this.expr.length;)if(r=this.code,r===Ge.SEMCOL_CODE||r===Ge.COMMA_CODE)this.index++;else if(i=this.gobbleExpression())t.push(i);else if(this.index<this.expr.length){if(r===e)break;this.throwError('Unexpected "'+this.char+'"')}return t}gobbleExpression(){let e=this.searchHook("gobble-expression")||this.gobbleBinaryExpression();return this.gobbleSpaces(),this.runHook("after-expression",e)}gobbleBinaryOp(){this.gobbleSpaces();let e=this.expr.substr(this.index,Ge.max_binop_len),t=e.length;for(;t>0;){if(Ge.binary_ops.hasOwnProperty(e)&&(!Ge.isIdentifierStart(this.code)||this.index+e.length<this.expr.length&&!Ge.isIdentifierPart(this.expr.charCodeAt(this.index+e.length))))return this.index+=t,e;e=e.substr(0,--t)}return!1}gobbleBinaryExpression(){let e,t,r,i,n,a,o,s,l;if(a=this.gobbleToken(),!a||(t=this.gobbleBinaryOp(),!t))return a;for(n={value:t,prec:Ge.binaryPrecedence(t),right_a:Ge.right_associative.has(t)},o=this.gobbleToken(),o||this.throwError("Expected expression after "+t),i=[a,n,o];t=this.gobbleBinaryOp();){if(r=Ge.binaryPrecedence(t),r===0){this.index-=t.length;break}n={value:t,prec:r,right_a:Ge.right_associative.has(t)},l=t;let u=c=>n.right_a&&c.right_a?r>c.prec:r<=c.prec;for(;i.length>2&&u(i[i.length-2]);)o=i.pop(),t=i.pop().value,a=i.pop(),e={type:Ge.BINARY_EXP,operator:t,left:a,right:o},i.push(e);e=this.gobbleToken(),e||this.throwError("Expected expression after "+l),i.push(n,e)}for(s=i.length-1,e=i[s];s>1;)e={type:Ge.BINARY_EXP,operator:i[s-1].value,left:i[s-2],right:e},s-=2;return e}gobbleToken(){let e,t,r,i;if(this.gobbleSpaces(),i=this.searchHook("gobble-token"),i)return this.runHook("after-token",i);if(e=this.code,Ge.isDecimalDigit(e)||e===Ge.PERIOD_CODE)return this.gobbleNumericLiteral();if(e===Ge.SQUOTE_CODE||e===Ge.DQUOTE_CODE)i=this.gobbleStringLiteral();else if(e===Ge.OBRACK_CODE)i=this.gobbleArray();else{for(t=this.expr.substr(this.index,Ge.max_unop_len),r=t.length;r>0;){if(Ge.unary_ops.hasOwnProperty(t)&&(!Ge.isIdentifierStart(this.code)||this.index+t.length<this.expr.length&&!Ge.isIdentifierPart(this.expr.charCodeAt(this.index+t.length)))){this.index+=r;let n=this.gobbleToken();return n||this.throwError("missing unaryOp argument"),this.runHook("after-token",{type:Ge.UNARY_EXP,operator:t,argument:n,prefix:!0})}t=t.substr(0,--r)}Ge.isIdentifierStart(e)?(i=this.gobbleIdentifier(),Ge.literals.hasOwnProperty(i.name)?i={type:Ge.LITERAL,value:Ge.literals[i.name],raw:i.name}:i.name===Ge.this_str&&(i={type:Ge.THIS_EXP})):e===Ge.OPAREN_CODE&&(i=this.gobbleGroup())}return i?(i=this.gobbleTokenProperty(i),this.runHook("after-token",i)):this.runHook("after-token",!1)}gobbleTokenProperty(e){this.gobbleSpaces();let t=this.code;for(;t===Ge.PERIOD_CODE||t===Ge.OBRACK_CODE||t===Ge.OPAREN_CODE||t===Ge.QUMARK_CODE;){let r;if(t===Ge.QUMARK_CODE){if(this.expr.charCodeAt(this.index+1)!==Ge.PERIOD_CODE)break;r=!0,this.index+=2,this.gobbleSpaces(),t=this.code}this.index++,t===Ge.OBRACK_CODE?(e={type:Ge.MEMBER_EXP,computed:!0,object:e,property:this.gobbleExpression()},this.gobbleSpaces(),t=this.code,t!==Ge.CBRACK_CODE&&this.throwError("Unclosed ["),this.index++):t===Ge.OPAREN_CODE?e={type:Ge.CALL_EXP,arguments:this.gobbleArguments(Ge.CPAREN_CODE),callee:e}:(t===Ge.PERIOD_CODE||r)&&(r&&this.index--,this.gobbleSpaces(),e={type:Ge.MEMBER_EXP,computed:!1,object:e,property:this.gobbleIdentifier()}),r&&(e.optional=!0),this.gobbleSpaces(),t=this.code}return e}gobbleNumericLiteral(){let e="",t,r;for(;Ge.isDecimalDigit(this.code);)e+=this.expr.charAt(this.index++);if(this.code===Ge.PERIOD_CODE)for(e+=this.expr.charAt(this.index++);Ge.isDecimalDigit(this.code);)e+=this.expr.charAt(this.index++);if(t=this.char,t==="e"||t==="E"){for(e+=this.expr.charAt(this.index++),t=this.char,(t==="+"||t==="-")&&(e+=this.expr.charAt(this.index++));Ge.isDecimalDigit(this.code);)e+=this.expr.charAt(this.index++);Ge.isDecimalDigit(this.expr.charCodeAt(this.index-1))||this.throwError("Expected exponent ("+e+this.char+")")}return r=this.code,Ge.isIdentifierStart(r)?this.throwError("Variable names cannot start with a number ("+e+this.char+")"):(r===Ge.PERIOD_CODE||e.length===1&&e.charCodeAt(0)===Ge.PERIOD_CODE)&&this.throwError("Unexpected period"),{type:Ge.LITERAL,value:parseFloat(e),raw:e}}gobbleStringLiteral(){let e="",t=this.index,r=this.expr.charAt(this.index++),i=!1;for(;this.index<this.expr.length;){let n=this.expr.charAt(this.index++);if(n===r){i=!0;break}else if(n==="\\")switch(n=this.expr.charAt(this.index++),n){case"n":e+=`
`;break;case"r":e+="\r";break;case"t":e+="	";break;case"b":e+="\b";break;case"f":e+="\f";break;case"v":e+="\v";break;default:e+=n}else e+=n}return i||this.throwError('Unclosed quote after "'+e+'"'),{type:Ge.LITERAL,value:e,raw:this.expr.substring(t,this.index)}}gobbleIdentifier(){let e=this.code,t=this.index;for(Ge.isIdentifierStart(e)?this.index++:this.throwError("Unexpected "+this.char);this.index<this.expr.length&&(e=this.code,Ge.isIdentifierPart(e));)this.index++;return{type:Ge.IDENTIFIER,name:this.expr.slice(t,this.index)}}gobbleArguments(e){let t=[],r=!1,i=0;for(;this.index<this.expr.length;){this.gobbleSpaces();let n=this.code;if(n===e){r=!0,this.index++,e===Ge.CPAREN_CODE&&i&&i>=t.length&&this.throwError("Unexpected token "+String.fromCharCode(e));break}else if(n===Ge.COMMA_CODE){if(this.index++,i++,i!==t.length){if(e===Ge.CPAREN_CODE)this.throwError("Unexpected token ,");else if(e===Ge.CBRACK_CODE)for(let a=t.length;a<i;a++)t.push(null)}}else if(t.length!==i&&i!==0)this.throwError("Expected comma");else{let a=this.gobbleExpression();(!a||a.type===Ge.COMPOUND)&&this.throwError("Expected comma"),t.push(a)}}return r||this.throwError("Expected "+String.fromCharCode(e)),t}gobbleGroup(){this.index++;let e=this.gobbleExpressions(Ge.CPAREN_CODE);if(this.code===Ge.CPAREN_CODE)return this.index++,e.length===1?e[0]:e.length?{type:Ge.SEQUENCE_EXP,expressions:e}:!1;this.throwError("Unclosed (")}gobbleArray(){return this.index++,{type:Ge.ARRAY_EXP,elements:this.gobbleArguments(Ge.CBRACK_CODE)}}},S3t=new _3t;Object.assign(Ge,{hooks:S3t,plugins:new A3t(Ge),COMPOUND:"Compound",SEQUENCE_EXP:"SequenceExpression",IDENTIFIER:"Identifier",MEMBER_EXP:"MemberExpression",LITERAL:"Literal",THIS_EXP:"ThisExpression",CALL_EXP:"CallExpression",UNARY_EXP:"UnaryExpression",BINARY_EXP:"BinaryExpression",ARRAY_EXP:"ArrayExpression",TAB_CODE:9,LF_CODE:10,CR_CODE:13,SPACE_CODE:32,PERIOD_CODE:46,COMMA_CODE:44,SQUOTE_CODE:39,DQUOTE_CODE:34,OPAREN_CODE:40,CPAREN_CODE:41,OBRACK_CODE:91,CBRACK_CODE:93,QUMARK_CODE:63,SEMCOL_CODE:59,COLON_CODE:58,unary_ops:{"-":1,"!":1,"~":1,"+":1},binary_ops:{"||":1,"&&":2,"|":3,"^":4,"&":5,"==":6,"!=":6,"===":6,"!==":6,"<":7,">":7,"<=":7,">=":7,"<<":8,">>":8,">>>":8,"+":9,"-":9,"*":10,"/":10,"%":10},right_associative:new Set,additional_identifier_chars:new Set(["$","_"]),literals:{true:!0,false:!1,null:null},this_str:"this"});Ge.max_unop_len=Ge.getMaxKeyLen(Ge.unary_ops);Ge.max_binop_len=Ge.getMaxKeyLen(Ge.binary_ops);var hy=e=>new Ge(e).parse(),C3t=Object.getOwnPropertyNames(Ge);C3t.forEach(e=>{hy[e]===void 0&&e!=="prototype"&&(hy[e]=Ge[e])});hy.Jsep=Ge;var E3t="ConditionalExpression",M3t={name:"ternary",init(e){e.hooks.add("after-expression",function(t){if(t.node&&this.code===e.QUMARK_CODE){this.index++;let r=t.node,i=this.gobbleExpression();if(i||this.throwError("Expected expression"),this.gobbleSpaces(),this.code===e.COLON_CODE){this.index++;let n=this.gobbleExpression();if(n||this.throwError("Expected expression"),t.node={type:E3t,test:r,consequent:i,alternate:n},r.operator&&e.binary_ops[r.operator]<=.9){let a=r;for(;a.right.operator&&e.binary_ops[a.right.operator]<=.9;)a=a.right;t.node.test=a.right,a.right=t.node,t.node=r}}else this.throwError("Expected :")}})}};hy.plugins.register(M3t);function N7(e){return{all:e=e||new Map,on:function(t,r){var i=e.get(t);i?i.push(r):e.set(t,[r])},off:function(t,r){var i=e.get(t);i&&(r?i.splice(i.indexOf(r)>>>0,1):e.set(t,[]))},emit:function(t,r){var i=e.get(t);i&&i.slice().map(function(n){n(r)}),(i=e.get("*"))&&i.slice().map(function(n){n(t,r)})}}}var g1e=class{constructor(e,t,r){var i;this.id=e,this.userAPI=t,this.result=void 0,this.error="null",this.isPrefetched=!1,this.isLoading=!1,this.isLoaded=!1,this.prefetchPromise=new Promise(n=>n()),this.emitter=N7(),this._innerCallUserAPI=async n=>{var a,o,s;this.emitter.emit("start",{userAPIId:this.id}),this.isLoading=!0,this.isLoading=!1;try{this.result=await L3t(this.userAPI,n),this.error="null",this.emitter.emit("success",{userAPIId:this.id})}catch(l){let u=((s=(o=(a=l.message)==null?void 0:a.split("_:_"))==null?void 0:o[0])==null?void 0:s.replace("status:",""))??"null";this.error=u,this.result=null,this.emitter.emit("error",{userAPIId:this.id})}this.isLoading=!1,this.isPrefetched=!0,this.isLoaded=!0},((i=t==null?void 0:t.integration)==null?void 0:i.type)==="OpenAI"?this.result={content:""}:t.method==="GET"&&t.url!==""&&(this.prefetchPromise=this.prefetch(r)),this._debouncedCallUserAPI=this._innerCallUserAPI,this._updateDebouncedCallUserAPI(),this._debouncedPrefetch=Fw(this.prefetch,1e3,{trailing:!0})}_updateDebouncedCallUserAPI(){this._debouncedCallUserAPI=this.userAPI.debounce!==void 0&&this.userAPI.debounce>0?Fw(this._innerCallUserAPI,this.userAPI.debounce,{leading:!0,trailing:!0}):this._innerCallUserAPI}async prefetch(e){await this.callUserAPI(e)}async callUserAPI(e){await this._debouncedCallUserAPI(e)}update(e,t,r=!0){this.userAPI=e,this._updateDebouncedCallUserAPI(),this.userAPI.url!==""&&this.userAPI.method==="GET"&&r&&this._debouncedPrefetch(t)}retrieveValue(e){if(this.result)try{return Kn.zoom(this.result,e)}catch(t){console.error(t)}}retrieveZoomedKeyValues(e){if(this.result){let t=e&&e.length?Kn.zoom(this.result,e):this.result;if(I3t(t))return Object.entries(t);if(D3t(t))return t.map((r,i)=>[i.toString(),r]);throw P3t(t)?new Error("This path points to a value, use retrieveValue() instead. "+(e==null?void 0:e.join("."))):new Error("Path error"+(e==null?void 0:e.join(".")))}}dispose(){}on(e,t){this.emitter.on(e,t)}off(e,t){this.emitter.off(e,t)}get autostart(){return this.userAPI.autoStart}};function T3t(e){let t=new Headers;return e.headers.forEach(r=>{r.data.key!==""&&t.append(r.data.key,r.data.value)}),t}function P3t(e){return typeof e=="string"||typeof e=="number"||typeof e=="boolean"||e===null}function D3t(e){return Array.isArray(e)}function I3t(e){return typeof e=="object"&&e!==null}async function L3t(e,t,r=new AbortController){var l,u,c,h;let i,n=e.url,a=((l=e.proxy)==null?void 0:l.enabled)??!1,o;if(((u=e.integration)==null?void 0:u.type)==="OpenAI"){let d=qx(e.integration.prompt===""?[]:JSON.parse(e.integration.prompt),t),f=e.integration.behavior===""?[]:qx(JSON.parse(e.integration.behavior),t);o=`{
		"model": "${e.integration.model}",
		"messages": [${e.integration.useBehavior?`
		{
			"role": "system",
			"content": "${f}"
		},`:""}
		{
			"role": "user",
			"content": "${d}"
		}
		]
	}`}if(a){n=`https://apis.spline.design/file/${e.proxy.fileId}/external-api/request?uuidexternalapi=${e.proxy.proxyId}`;let d;o!==void 0?d=o:e.method==="POST"&&e.body&&(d=qx(JSON.parse(e.body),t)),d!==void 0&&(n+=`&data=${encodeURIComponent(d.replace(/(\r\n|\n|\r|\t)/gm,""))}`)}else((c=e.integration)==null?void 0:c.type)==="OpenAI"?i=o:e.method==="POST"&&e.body&&(i=qx(JSON.parse(e.body),t));let s=await fetch(n,{method:a?"GET":e.method,headers:a?void 0:T3t(e),signal:r.signal,body:i});if(!s.ok)throw new Error("status:"+s.status+"_:_"+s.statusText);if(((h=e.integration)==null?void 0:h.type)==="OpenAI"){let d=await s.json();return a&&(d=d.response),{content:d.choices[0].message.content}}else{let d=await s.json();return a&&(d=d.response),d}}var y1e=(e,t)=>{if(typeof e=="string"){let r=t.getVariable(e);if(r)return y1e(r,t)}return Ga.isBoolean(e)?Ga.getDisplayedValue(e).toLowerCase():Ga.getDisplayedValue(e)},qx=(e,t)=>e.map((r,i)=>{if("text"in r)return r.text;if("type"in r){if(r.type==="paragraph")return(i>0?`
`:"")+qx(r.children,t);if(r.type==="variable"){let n=t.getVariable(r.variableId);if(n!==void 0)return y1e(n,t)}}return""}).join(""),k3t=["+","-","*","/","(",")","==","!=",">","<",">=","<=","and","or","!","%","^",","],R3t=["0","1","2","3","4","5","6","7","8","9","."],O3t=["sin","cos","tan","asin","acos","atan","atan2","sqrt","abs","log","exp","floor","ceil","round","min","max","random"];function B3t(e){return typeof e!="string"?!1:!isNaN(e)&&!isNaN(parseFloat(e))}hy.addBinaryOp("^",11,!0);function x1e(e,t,r="number"){let i="";for(let o=0;o<e.length;o++){let s=e[o];if("objType"in s&&s.objType==="api"){let l=JSON.parse(s.id),u=l[0],c=t.getUserAPI(u);if(c!==void 0&&c instanceof g1e){let h=c.retrieveValue(l.slice(1));h!==void 0&&(i+=h)}continue}if("objType"in s&&s.objType==="webhook"){let l=JSON.parse(s.id),[u,c]=l,h=t.getUserWebhook(u);if(h!==void 0){let d=h.getParameterValue(c);d!==void 0&&(i+=d)}continue}if("objType"in s&&s.objType==="aiAssistant"){let l=t.openAIRealtime;if("objId"in s&&s.objId!==void 0){let u;if(t.scene.data.objects.traverse((c,h)=>{var f;let d=(f=h.events)==null?void 0:f.find(p=>p.id===s.objId);d&&(u=d)}),u!==void 0&&u.data.type==="AIAssistantListener"){let c=l==null?void 0:l.computeAnalysisForListenerEvent(u.data);if(c!==void 0){i+=c;continue}}}i+=(l==null?void 0:l.voice)??0;continue}if("id"in s){let l=e[o-1];if(o>0&&"id"in l){console.error("Two variables in a row",e);return}let u=t.getVariable(s.id),c=Ga.getDisplayedValue(u);r==="number"&&Ga.isTextValue(u)&&Array.isArray(u.textValue)&&u.textValue.length===1?c=parseFloat(c).toString():r==="boolean"&&Ga.isBoolean(u)?c=u?"true":"false":r==="boolean"&&Ga.isTextValue(u)&&!Array.isArray(u.textValue)&&(c='"'+c+'"'),i+=c;continue}else if(r==="string"){s.name!=='"'&&(s.name!=="+"||s.escaped)&&(i+=s.name),s.name==="+"&&!s.escaped&&i[i.length-1]==="\\"&&(i=i.slice(0,-1)+s.name);continue}if(s.name==="and"){i+="&&";continue}if(s.name==="or"){i+="||";continue}if(s.name==="True"){i+="true";continue}if(s.name==="False"){i+="false";continue}if(r==="boolean"&&!B3t(s.name)&&!R3t.includes(s.name)&&!k3t.includes(s.name)&&!O3t.includes(s.name.replace(/\($/g,""))){i+='"'+s.name+'"';continue}i+=s.name}if(r==="string")return i;if(e.length===0){if(r==="number")return 0;if(r==="boolean")return!1}let n;try{n=hy(i)}catch(o){console.error(i,o);return}let a;try{a=$r(n)}catch(o){console.error(i,n,o)}return a}function $r(e){switch(e.type){case"BinaryExpression":switch(e.operator){case"==":return+($r(e.left)===$r(e.right));case"!=":return+($r(e.left)!==$r(e.right));case">":return+($r(e.left)>$r(e.right));case">=":return+($r(e.left)>=$r(e.right));case"<":return+($r(e.left)<$r(e.right));case"<=":return+($r(e.left)<=$r(e.right));case"+":return $r(e.left)+$r(e.right);case"-":return $r(e.left)-$r(e.right);case"*":return $r(e.left)*$r(e.right);case"/":return $r(e.left)/$r(e.right);case"%":return $r(e.left)%$r(e.right);case"&&":return $r(e.left)&&$r(e.right);case"||":return $r(e.left)||$r(e.right);case"^":return Math.pow($r(e.left),$r(e.right));default:throw new Error("Unknown operator: "+e.operator)}case"UnaryExpression":switch(e.operator){case"-":return-$r(e.argument);case"!":return+!$r(e.argument);default:throw new Error("Unknown operator: "+e.operator)}case"Identifier":throw new Error("Unknown identifier: "+e.name);case"Literal":return e.value;case"CallExpression":if(e.callee.type==="Identifier"){if(e.callee.name==="random"){let t=0,r=1;if(e.arguments.length>=1)try{t=$r(e.arguments[0])}catch(i){console.warn(i)}if(e.arguments.length>=2)try{r=$r(e.arguments[1])}catch(i){console.warn(i)}return t=Math.min(r,t),r=Math.max(r,t),t+Math.random()*(r-t)}return Math[e.callee.name].apply(null,e.arguments.map($r))}else throw new Error("Unknown node");default:throw new Error("Unknown node type: "+e.type)}}var N3t=new Ke,V3t=new Ke;function F3t(e,t,r){let i=[new U,new U,new U],n=[new U,new U,new U];return e.extractBasis(i[0],i[1],i[2]),t.extractBasis(n[0],n[1],n[2]),i.forEach((a,o)=>{let s=n[o],l=vt.lerp(a.length(),s.length(),r);a.lerp(s,r).setLength(l)}),new Ke().makeBasis(i[0],i[1],i[2])}var z3t=class{static create(e){return this.build(this.normalizeInputs(e))}static normalizeInputs(e,t){let r=Object.assign({},(t==null?void 0:t.parameters)??{width:100,height:100,depth:1,subdivisions:12,roundness:0,extrudeBevelSize:0,extrudeBevelSegments:3},e.parameters),i=Math.abs(r.width),n=Math.abs(r.height??r.width),a=Math.abs(r.depth??0),o=(t==null?void 0:t.shapeData)??Qz.create({parameters:Hge}).userData.shape;return{path:e.path??h6.defaultData(),parameters:Object.assign(r,{width:i,height:n,depth:a,extrusion:{...Uge,...r.extrusion}}),shapeData:o}}static build(e){if(e.path.points.length>=2){let t=new H3t(e);return Object.assign(t,{userData:{...e,type:"PathGeometry"}})}else return Object.assign(new It,{userData:{...e,type:"PathGeometry"}})}},H3t=class extends It{constructor(e){super(),this.type="PathExtrusionGeometry",this.inputs=e,this.build()}_isGeometryClosed(){return this.inputs.path.isClosed&&this.inputs.parameters.extrusion.depth===1}_isOpenEnded(){let e=this.inputs.parameters.extrusion;return!(this.inputs.path.isClosed&&e.depth===1)||!f3t(e.twist,0)||e.startScale!==e.endScale}build(){let e=this._extractPathPoints();if(e.length<2)return;let t=this._computeBasisMatrices(e),{depth:r,offset:i}=this.inputs.parameters.extrusion;r=Math.max(0,Math.min(r,1)),i=Math.max(0,Math.min(i,1));let n=this.inputs.path.isClosed?e.length:e.length-1,a=Math.floor(i*n),o=this.inputs.path.isClosed?Math.ceil((r+i)*n):Math.ceil(Math.min(1,r+i)*n),s=Math.min(Math.max(2,o-a+1),n+2),l=[],u=[];for(let O=0;O<s;O++){let R=this.inputs.path.isClosed?(O+a)%e.length:Math.min(O+a,e.length-1);l.push(e[R].clone()),u.push(t[R].clone())}let c=(O,R,H)=>{l[O]=l[O].clone().lerp(l[R],H),u[O]=F3t(u[O],u[R],H)},h=0,d=i*n%1;(!this.inputs.path.isClosed||r<=1)&&(d||i===0)&&(h=d,c(0,1,h));let f=0,p=(i+r)*n%1;if((this.inputs.path.isClosed&&r<=1||!this.inputs.path.isClosed&&i+r<1)&&p&&(f=p,c(l.length-1,l.length-2,1-f)),r===0){let O=l.length-1;l[O].copy(l[0]),u[O].copy(u[0])}this._applyPathModifiers(u,h,f);let{bevel:v,bevelSides:m}=this.inputs.parameters.extrusion,g=v>0?this.inputs.parameters.extrusion.capType:"flat",y=5;this.inputs.parameters.extrusion.shape.type==="Custom"&&(y=this.inputs.parameters.extrusion.shape.shapeQuality==="low"?5:12);let{regions:x,infos:b,vertices:_}=this._computeShapePoints(y),w=0,S;g==="round"&&(S=new Zz(this.inputs.shapeData,2*v,v,y,m,void 0,!0),w=S.getAttribute("position").count);let A=0,M=0;b.sort((O,R)=>O.start-R.start),b.forEach(O=>{O.verticesStart=A,O.verticesCount=O.continuous.reduce((R,H,j)=>R+(j===0||!H?2:1),0),M+=O.verticesCount,A=M});let E=M*s,T,L=0;if(this._isOpenEnded()&&g==="flat"){try{T=Zf({windingRule:Mi.ODD,elementType:kn.POLYGONS,polySize:3,vertexSize:2,strict:!0,contours:x})}catch{T=o1e}L=T.vertexCount}let P=E+2*L+w*2,C=E+2*L,D={positions:new Float32Array(P*3),normals:new Float32Array(P*3),uvs:new Float32Array(P*2)},I=[];if(b.forEach(O=>{this._extrudeRegion(O,_,u,l,D,I,this._isGeometryClosed()&&!this._isOpenEnded())}),T&&(this._closeEnd(T,E,I,D,u[0],l[0],!1),this._closeEnd(T,E+L,I,D,u[u.length-1],l[l.length-1],!0)),S){D.positions.set(S.getAttribute("position").array,C*3),D.normals.set(S.getAttribute("normal").array,C*3),D.uvs.set(S.getAttribute("uv").array,C*2);for(let j=C;j<C+w;j++)D.uvs[j*2+1]=1e-4;let O=I.length;I.push(...S.getIndex().array.map(j=>j+C)),C+=w,D.positions.set(S.getAttribute("position").array,C*3),D.normals.set(S.getAttribute("normal").array,C*3),D.uvs.set(S.getAttribute("uv").array,C*2);let R=I.length;I.push(...S.getIndex().array.map(j=>j+C)),this.setAttribute("position",new Zt(D.positions,3)),this.setAttribute("normal",new Zt(D.normals,3)),this.setAttribute("uv",new Zt(D.uvs,2)),this.setIndex(I);let H=N3t;H.copy(u[u.length-1]).setPosition(l[l.length-1]),this.applyMatrix4OnRange(H,C,P),H.copy(u[0]).setPosition(l[0]).multiply(V3t.makeScale(1,1,-1)),this.applyMatrix4OnRange(H,C-w,C),this.reverseIndicesOnRange(O,R)}else this.setAttribute("position",new Zt(D.positions,3)),this.setAttribute("normal",new Zt(D.normals,3)),this.setAttribute("uv",new Zt(D.uvs,2)),this.setIndex(I)}_extractPathPoints(){let e=Kge(this.inputs.path).getPoints(this.inputs.path.subdivisions);if(e.length<2)return[];let t=[e[0]];return e.forEach(r=>{t[t.length-1].distanceToSquared(r)>.001&&t.push(r)}),this.inputs.path.isClosed&&t[t.length-1].distanceTo(t[0])<.001&&t.pop(),t}_computeBasisMatrices(e){let t=[],r=e.length,i=this.inputs.path.isClosed,n=new U,a=new U,o=new U,s=new U,l=new U(0,1,0);for(let p=0;p<r;p++){let v=e[p],m;p===0?m=i?e[e.length-2]:v.clone().multiplyScalar(2).sub(e[1]):m=e[p-1];let g;p===r-1?g=i?e[1]:v.clone().multiplyScalar(2).sub(e[p-1]):g=e[p+1];let y=v.clone().sub(m).normalize(),x=g.clone().sub(v).normalize(),b=y.clone().add(x).normalize();o.copy(b),p===0&&(b.equals(l)||b.clone().negate().equals(l))&&l.set(0,0,1);let _=l.clone().cross(b).normalize(),w=b.clone().cross(_).normalize();l.copy(w),s.copy(_),p===0&&(n.copy(w),a.copy(b));let S=new Ke().makeBasis(_,w,b);t.push(S)}let u=i?a:o,c=i?n:new U(0,1,0),h=u.clone().cross(s).normalize(),d=Math.acos(c.dot(h));if(isNaN(d))return t;let f=c.clone().cross(h);u.dot(f)>0&&(d*=-1);for(let p=1;p<t.length;p++){let v=new Ke().makeRotationZ(d*p/t.length);t[p].multiply(v)}return t}_applyPathModifiers(e,t,r){let i=e.length,{angle:n,twist:a,startScale:o,endScale:s}=this.inputs.parameters.extrusion,l=new Ke,u=new Ke;return e.forEach((c,h)=>{let d=h===0?0:h===i-1?1:(h-t)/(i-(r===0?0:1)-(t+(1-r)));l.makeRotationZ(vt.lerp(n,n+a,d)*vt.DEG2RAD);let f=vt.lerp(o,s,d);u.makeScale(f,f,f),c.multiply(l).multiply(u)}),e}_computeShapePoints(e=12,t=Mi.ODD){let r=this.inputs.shapeData,i=r.extractShapePointsToFlatArray([],e),n=r.shapeHoles.map(u=>{let c=u.extractShapePointsToFlatArray([],e),h=[];for(let d=c.length-1;d>=1;d-=2){let f=c[d-1],p=c[d-0];h.push(f,p)}return h}),a;try{a=Zf({windingRule:t,elementType:kn.BOUNDARY_CONTOURS,vertexSize:2,strict:!0,contours:[i]})}catch{a=Xz}let o;try{o=Zf({windingRule:Mi.ODD,elementType:kn.BOUNDARY_CONTOURS,vertexSize:2,strict:!0,contours:[...n]})}catch{o=a1e}if(!a)throw new Error("error generating geometry");let s=a.elementCount;if(o){a.elementCount+=o.elementCount;for(let u=0;u<o.elements.length;u++){let c=o.elements[u],h=u%2===0?a.vertexCount:0;a.elements.push(c+h)}for(let u=0;u<o.vertexIndices.length;u++){let c=o.vertexIndices[u],h=a.vertexCount;a.vertexIndices.push(c+h)}for(let u=0;u<o.vertices.length;u++){let c=o.vertices[u];a.vertices.push(c)}}for(let u=0,c=a.vertexCount;u<c;u++){let h=u*2;a.vertices[h+0],a.vertices[h+1]}let l=[];for(let u=a.elementCount-1;u>=0;u--){let c=u>=s,h=u*2,d=a.elements[h+0],f=a.elements[h+1],p=d+f,v={start:d,count:f,normals:[],isHole:c,continuous:[],verticesStart:0,verticesCount:0};l.push(v);let m=d,g=p-1,y=d+1,x=r.roundedCurves.length;do{let b=m-d;a.vertices[g*2+0],a.vertices[g*2+1];let _=a.vertices[m*2+0],w=a.vertices[m*2+1],S=a.vertices[y*2+0],A=a.vertices[y*2+1],M=_-S,E=w-A,T=Math.sqrt(M*M+E*E);M/=T,E/=T,v.normals[b*2+0]=-E,v.normals[b*2+1]=M;let L=a.vertexIndices[m];if(Array.isArray(L))v.continuous[b]=!1;else{let[P,C]=r.getCurveIndexFromVertexId(L-1,!0);if(C>0&&C<1)v.continuous[b]=!0;else{let D=C===1?P+1:P-1;D=(D+x)%x;let I=C===1?0:1,O=r.roundedCurves[P].getTangent(C),R=r.roundedCurves[D].getTangent(I);v.continuous[b]=O.dot(R)>.95}}c&&(v.normals[b*2+0]*=-1,v.normals[b*2+1]*=-1),[g,m,y]=[m,y,y+1],y>=p&&(y-=f)}while(y!==d+1)}return{regions:[i,...n],infos:l,vertices:a.vertices}}_insertVertex(e,t,r,i,n){let a=t*2,o=t*3;e.positions[o+0]=r.x,e.positions[o+1]=r.y,e.positions[o+2]=r.z,e.normals[o+0]=i.x,e.normals[o+1]=i.y,e.normals[o+2]=i.z,e.uvs[a+0]=n.x,e.uvs[a+1]=n.y}_extrudeRegion(e,t,r,i,n,a,o){let s=new U,l=new U,u=new U,c=new U,h=new me;r.forEach((f,p)=>{let v=i[p],m=e.verticesStart*r.length+e.verticesCount*p;for(let g=0;g<e.count;g++){let y=(e.start+g)*2;if(s.set(t[y+0],t[y+1],0),u.copy(s).applyMatrix4(f).add(v),e.continuous[g])c.set(e.normals[g*2+0],e.normals[g*2+1],0);else{let x=g===0?(e.start+e.count-1)*2:y-2;l.set(t[x+0],t[x+1],0),c.copy(s).sub(l),c.set(-c.y,c.x,0),e.isHole||c.negate()}if(c.applyMatrix4(f).normalize(),h.set(g===0?1:g/e.count,p/(r.length-1)),this._insertVertex(n,m,u,c,h),m++,!e.continuous[g]||g===0){if(g===0)c.set(e.normals[g*2+0],e.normals[g*2+1],0),h.set(0,p/(r.length-1));else{let x=g===e.count-1?e.start*2:y+2;l.set(t[x+0],t[x+1],0),c.copy(l).sub(s),c.set(-c.y,c.x,0),e.isHole||c.negate()}c.applyMatrix4(f).normalize(),this._insertVertex(n,m,u,c,h),m++}}});let d=r.length-1;for(let f=0;f<d;f++){let p=e.verticesStart*r.length+e.verticesCount*f,v=e.verticesStart*r.length+e.verticesCount*(f+1),m=0;for(let g=0;g<e.count;g++){(!e.continuous[g]||g===0)&&m++;let y=g===e.count-1?0:m+1,x=p+m,b=p+y,_=v+y,w=v+m;e.isHole?a.push(x,_,b,x,w,_):a.push(x,b,_,x,_,w),m++}}}_closeEnd(e,t,r,i,n,a,o){let s=e.vertexCount,l=new U(0,0,o?-1:1).applyMatrix4(n),u=new U,c=new me;for(let d=0;d<s;d++){let f=2*d;u.set(e.vertices[f+0],e.vertices[f+1],0).applyMatrix4(n).add(a),this._insertVertex(i,t+d,u,l,c)}let h=e.elements;for(let d=0;d<e.elementCount;d++){let f=3*d,p=h[f+0]+t,v=h[f+(o?1:2)]+t,m=h[f+(o?2:1)]+t;r.push(p,v,m)}}applyMatrix4OnRange(e,t,r){let i=e.elements,n=new Bn().getNormalMatrix(e).elements,a,o,s,l,u=this.attributes.position,c=this.attributes.normal;if(!u||!c)return;let h=u.array,d=c.array,f=u.itemSize;for(let p=t*f,v=r*f;p<v;p+=f){if(p===t)debugger;a=h[p+0],o=h[p+1],s=h[p+2],l=1/(i[3]*a+i[7]*o+i[11]*s+i[15]),h[p+0]=(i[0]*a+i[4]*o+i[8]*s+i[12])*l,h[p+1]=(i[1]*a+i[5]*o+i[9]*s+i[13])*l,h[p+2]=(i[2]*a+i[6]*o+i[10]*s+i[14])*l,a=d[p+0],o=d[p+1],s=d[p+2],d[p+0]=n[0]*a+n[3]*o+n[6]*s,d[p+1]=n[1]*a+n[4]*o+n[7]*s,d[p+2]=n[2]*a+n[5]*o+n[8]*s}u.needsUpdate=!0,c.needsUpdate=!0}reverseIndicesOnRange(e,t){let r=this.index;if(r){for(let i=e;i<t;i+=3){let n=r.getX(i),a=r.getX(i+1),o=r.getX(i+2);r.setXYZ(i,o,a,n)}r.needsUpdate=!0}}};function b1e(){let e=new It;return e.setAttribute("position",new Zt(new Float32Array([]),3)),e.setIndex(new Zt(new Uint16Array([]),1)),e}var U3t=b1e().attributes,G3t=12,j3t=1,CO=class extends It{constructor(e,t){super(),this.charWidths=[],this.charCoords=[],this.wrappedText=[],this.isLowResolution=!1,this.vectorShapes=[],Object.assign(this.attributes,U3t),this.userData={parameters:e,type:"TextGeometry"};let r=t.getFont(e.font);r!=null&&r.isLoaded?(this.font=r,this.update(e)):this.updateFont(e.font,t).then(()=>{this.update(e),t==null||t.requestRender()})}async updateFont(e,t){let r=t.getFont(e);r&&(this.font=r,await r.loadingPromise)}update(e){let t=this.font;if(this.userData={parameters:e,type:"TextGeometry"},!(t!=null&&t.isLoaded)){console.warn("Cannot update text because its font is not loaded");return}let{width:r,height:i,depth:n,extrudeBevelSize:a,extrudeBevelSegments:o,text:s,textTransform:l}=e,u=Ga.getDisplayedValue(s),c=l===2?u.toUpperCase():l===3?u.toLowerCase():u,h=W3t(e,t,c),{shapes:d,charWidths:f,charCoords:p}=t.generateShapes(h,e),v=(typeof r=="number"?r:1)*.5,m=(typeof i=="number"?i:1)*.5,g=d.map(b=>new dn().fromShape(b,!0));this.vectorShapes=g;let y=g.map(b=>pm.create({shape:b,parameters:{depth:n,extrudeBevelSegments:o,extrudeBevelSize:a,windingRule:n<=0?Mi.NONZERO:Mi.ODD,subdivisions:this.isLowResolution&&n>0?j3t:G3t}})),x=y.length?nv(y):b1e();x.translate(-v,m,0),this.dispose(),this.wrappedText=h,this.charCoords=p,this.charWidths=f,this.deleteAttribute("extrudeNormal"),Object.entries(x.attributes).forEach(([b,_])=>{this.setAttribute(b,_)}),this.setIndex(x.index),this.computeBoundingSphere()}clone(){let e=Nl(new It,CO.prototype);return e.copy(this),console.log("CloneGeometry",this,e),e}copy(e){return Object.entries(e.attributes).forEach(([t,r])=>{this.setAttribute(t,r)}),this.setIndex(e.index),this.userData={parameters:{...e.userData.parameters},type:"TextGeometry"},this}async setText(e){this.font&&await this.font.loadingPromise,await this.update({...this.userData.parameters,text:{textValue:e}})}get text(){return this.userData.parameters.text??""}};function W3t(e,t,r){let i=[""],n="";for(let a of r)n+=a,a===" "||a===`
`?(i[i.length-1]+=n,n="",a===`
`&&i.push("")):t.getTextWidth(i[i.length-1]+n,e)>e.width&&(i[i.length-1].length&&i.push(""),t.getTextWidth(i[i.length-1]+n,e)>e.width&&(n.length===1?(i[i.length-1]+=n,n=""):(i[i.length-1]+=n.slice(0,-1),n=n[n.length-1],i.push(""))));return i[i.length-1]+=n,i}var w1e,_1e=new Promise(e=>{w1e=e}),ore=!1,M5;function q3t(){if(ore)return;if(M5)return M5;async function e(){let t="https://unpkg.com/@splinetool/modelling-wasm@1.9.47/build",r=Te(()=>import("./B9H0U9ag.js"),[],import.meta.url),[i,n]=await Promise.all([r,fetch(`${t}/process.wasm`).then(s=>s.arrayBuffer())]),a=i.default,o=await a({wasmBinary:n});w1e(o),ore=!0}return M5=e(),M5}var Y3t=["font"];function Kw(e,t,r,i){var u,c;let n,a,o;e.type==="PathGeometry"?(a=JSON.parse(JSON.stringify(e)),o=[[],["extrusion"]]):(a={...e},o=[[]]);for(let h of o){let d=a;for(let f of h)d=d[f];for(n in d){let f=d[n];ute(f)&&!Y3t.includes(n)&&(d[n]=t.getVariable(f,[i.uuid,"geometry",...h,n]),ute(d[n])&&(d[n]=1))}}let s={parameters:a,type:a.type};if(a.type==="PathGeometry")s.path=a.path;else if(a.type==="VectorGeometry"){let h=dn.createFromState(a.shape,a.width,a.height);s.shape=h}else if(a.type==="NonParametricGeometry"){if(a.data.groups&&((u=a.data.groups)==null||u.forEach(h=>h.materialIndex=Math.max(h.materialIndex??0,0))),s.geometry=new bme().parse(a),s.geometry.groups.length===0){let h=s.geometry;h.addGroup(0,Math.max(((c=h.getIndex())==null?void 0:c.count)??0,h.getAttribute("position").count),0)}}else if(a.type==="SubdivGeometry"){let h=new Fo(a,r);return h.data=e,h}else{if(a.type==="TextGeometry")return new CO(a,t);if(a.type==="InputGeometry")return new CO(a,t);if(a.type==="UIGeometry")return Kz.create({parameters:{width:a.width,height:a.height,cornerRadius:a.cornerRadius,cornerType:a.cornerType}})}let l;try{l=hre(s)}catch(h){console.error(h)}if(!l){let h=dn.createFromState(c6.defaultData(),100,100);s.shape=h,l=hre(s)}return l}var X3t=new Ke;function EO(e,t,r,i){let n=e.position.array,a=e.normal.array,o=X3t.makeScale(t,r,i).invert().elements,s,l,u;for(var c=0,h=n.length;c<h;c+=3)n[c]*=t,n[c+1]*=r,n[c+2]*=i,s=a[c],l=a[c+1],u=a[c+2],a[c]=o[0]*s+o[4]*l+o[8]*u,a[c+1]=o[1]*s+o[5]*l+o[9]*u,a[c+2]=o[2]*s+o[6]*l+o[10]*u;e.position.needsUpdate=!0,e.normal.needsUpdate=!0}var T5=new Cn,hg=new U,zt;_1e.then(e=>{zt=e});var sre=new Float32Array([10,10,0,-10,10,0,-10,-10,0,10,-10,0]),lre=new Uint32Array([0,1,2,3]),ure=new Uint8Array([4]),Fo=class extends It{constructor(e,t){super(),this.data=e,this.flatShading=t,this.subdivPointer=0,this.rebuild(),this.freeSubdivPointer()}mutateDirectlyScaleBaked(e,t){this.freeSubdivPointer();let r=this.data.scaleBaked,i=Ev.div(t,r);this.subdividedGeometry&&EO(this.subdividedGeometry.attributes,...i),this.originalGeometry&&EO(this.originalGeometry.attributes,...i),this.data=e;let n=this.userData.parameters;this.userData.parameters={width:n.width*i[0],height:n.height*i[1],depth:n.depth*i[2]},this.originalGeometry.boundingSphere.center.multiply(hg.fromArray(i));let a=hg.set(n.width,n.height,n.depth).length();this.originalGeometry.boundingSphere.radius=a/2}ensureSubdivPointer(){return this.subdivPointer===0&&this.rebuild(),this.subdivPointer}rebuild(){let e,t,r;try{({originalGeometry:e,subdividedGeometry:t,subdivPointer:r}=Fo.build(this.data,void 0,!this.flatShading,void 0))}catch{e=new Ru(100,100,100),r=0}this.subdivPointer=r,this.originalGeometry=e,this.subdividedGeometry=t??void 0;let i=this.subdividedGeometry??this.originalGeometry;Object.assign(this,i),this.calcBoundingBox()}freeSubdivPointer(){this.subdivPointer&&(Fo.freeSubdivPointer(this.subdivPointer),this.subdivPointer=0)}dispose(){super.dispose(),this.freeSubdivPointer()}calcBoundingBox(){let e=this.originalGeometry;e.boundingSphere===null&&(e.boundingSphere=new Es,this.subdividedGeometry&&(this.subdividedGeometry.boundingSphere=e.boundingSphere));let t=e.attributes.position,r=e.boundingSphere.center;T5.setFromBufferAttribute(t),T5.getCenter(r),e.boundingSphere.radius=r.distanceTo(T5.max),isNaN(e.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this),T5.getSize(hg);let i={width:hg.x,height:hg.y,depth:hg.z};return this.userData.parameters=i,i}static build(e,t,r,i){let n,a,o,s=(e==null?void 0:e.phongAngle)??35;r===!1&&(s=-1),t&&(zt.free_bvh(t),zt.free_subdivision_surface(t));try{n=Fo.allocate(e,i)}catch(l){console.error(l,e),n=Fo.allocate({positionWASM:sre,indexWASM:lre,verticesPerFaceWASM:ure},i)}if(zt.set_destination_refinement_level(n,0),a=Fo.buildLevel(n,!0,s),e.subdivisions>0)try{zt.set_destination_refinement_level(n,e.subdivisions),o=Fo.buildLevel(n,!1,s)}catch{try{zt.set_destination_refinement_level(n,e.subdivisions-1),o=Fo.buildLevel(n,!1,s)}catch{o=null}}else o=null;return{subdivPointer:n,originalGeometry:a,subdividedGeometry:o}}static primitiveToQuads(e,t,r){e.widthSegments>16&&(e.widthSegments=16),e.heightSegments>16&&(e.heightSegments=16),e.depthSegments>16&&(e.depthSegments=16),e.radialSegments>16&&(e.radialSegments=16),e.type==="DodecahedronGeometry"&&(e.detail=0);let i=e.shape!==void 0||e.path!==void 0?t.geometry:Kw(e,r,!1),n;e.type==="TorusGeometry"&&e.arc===Math.PI*2?n=i.getClosedTorusIndicesForBooleanOrSubdiv():n=i.getIndex();let a,o,s,l;({positions:a,triIndices:l}=V7(i.getAttribute("position"),n));let u;if(e.type==="CylinderGeometry"&&e.cornerRadius===0&&e.hollow===0&&e.openEnded===!1){let c=e.radialSegments*e.heightSegments*3*2,h=c+e.radialSegments*3;u=[c,h]}return{indices:o,verticesPerFace:s}=A1e(a,l,i,u),{positions:a,indices:o,verticesPerFace:s}}static allocate(e,t){var x;let r,i,n,a=[],o=[];e.positionWASM&&e.positionWASM.length>0?(r=e.positionWASM,i=e.indexWASM,n=e.verticesPerFaceWASM):(r=sre,i=lre,n=ure);let s=r.length,l=i.length,u=n.length,c=r.length+a.length+o.length,h=i.length+n.length,d=c*Float32Array.BYTES_PER_ELEMENT+h*Uint32Array.BYTES_PER_ELEMENT,f=c*Float32Array.BYTES_PER_ELEMENT,p=zt._malloc(d),v=new Float32Array(zt.HEAPF32.buffer,p,c),m=new Uint32Array(zt.HEAPU32.buffer,p+f,h);v.set(r,0),v.set(a,r.length),v.set(o,r.length+a.length),m.set(i,0),m.set(n,i.length);let g;(x=e==null?void 0:e.scaleBaked)!=null&&x.some(b=>b!==1)&&(g=new Ke().makeScale(...e.scaleBaked)),t&&(g?g.premultiply(t):g=t);let y=g?zt.alloc_subdivision_surface2(p,s,p+f,l,p+f+i.length*Uint32Array.BYTES_PER_ELEMENT,u,g.elements):zt.alloc_subdivision_surface(p,s,p+f,l,p+f+i.length*Uint32Array.BYTES_PER_ELEMENT,u);return zt._free(p),y}static buildLevel(e,t,r,i,n){let a=n?zt.get_mesh_data2(e,t?zt.Level.CONTROL:zt.Level.REFINED,r,n.elements):zt.get_mesh_data(e,t?zt.Level.CONTROL:zt.Level.REFINED,r),o=8,s=zt.HEAPU32.subarray(a>>2,(a>>2)+o),l=s.subarray(4,8),u=0,c=zt.HEAPU32[s[u]>>2],h=zt.HEAPF32.subarray(c>>2,(c>>2)+l[u]);u++;let d=zt.HEAPU32[s[u]>>2],f=zt.HEAPF32.subarray(d>>2,(d>>2)+l[u]);u++;let p=zt.HEAPU32[s[u]>>2],v=zt.HEAPU32.subarray(p>>2,(p>>2)+l[u]);u++;let m=zt.HEAPU32[s[u]>>2],g=zt.HEAPU32.subarray(m>>2,(m>>2)+l[u]);if(u++,i===void 0){let y=new It;if(y.setIndex(new g1(g,1)),y.setAttribute("position",new ht(h,3)),y.setAttribute("normal",new ht(f,3)),t){y.setAttribute("faceMap",new g1(v,1));let x=new Float32Array(f.length/3*4).fill(0);y.setAttribute("color",new Zt(x,4))}return zt.free_mesh_data(a),y.userData.type="SubdivGeometry",y}i.getAttribute("position").copyArray(h),i.getAttribute("normal").copyArray(f),i.attributes.position.needsUpdate=!0,i.attributes.normal.needsUpdate=!0,zt.free_mesh_data(a)}static freeSubdivPointer(e){zt.free_bvh(e),zt.free_subdivision_surface(e)}static buildControlCageWireframe(e,t,r){let i=zt.get_wireframe_data_for_base_level(e),n=4,a=zt.HEAPU32.subarray(i>>2,(i>>2)+n),o=a.subarray(2,4),s=0,l=zt.HEAPU32[a[s]>>2],u=zt.HEAPF32.subarray(l>>2,(l>>2)+o[s]);s++;let c=zt.HEAPU32[a[s]>>2],h=zt.HEAPU32.subarray(c>>2,(c>>2)+o[s]);if(t===void 0){let d=new It;d.setAttribute("position",new ht(u,3));let f=new Float32Array(u.length);for(let p=0,v=u.length;p<v;)f[p++]=r.r,f[p++]=r.g,f[p++]=r.b;return d.setAttribute("color",new Zt(f,3)),d.setIndex(new g1(h,1)),zt.free_wireframe_data_for_base_level(i),d}t.getAttribute("position").copyArray(u),t.attributes.position.needsUpdate=!0,zt.free_wireframe_data_for_base_level(i)}static updateCollabMesh(e,t,r){let i=t===0;i||zt.set_destination_refinement_level(e,t);let n=r?zt.get_topological_data2(e,i?zt.Level.CONTROL:zt.Level.REFINED,r.elements):zt.get_topological_data(e,i?zt.Level.CONTROL:zt.Level.REFINED),a=6,o=zt.HEAPU32.subarray(n>>2,(n>>2)+a),s=o.subarray(3,6),l=0,u=zt.HEAPU32[o[l]>>2],c=new Float32Array(zt.HEAPF32.subarray(u>>2,(u>>2)+s[l]));l++;let h=zt.HEAPU32[o[l]>>2],d=new Uint32Array(zt.HEAPU32.subarray(h>>2,(h>>2)+s[l]));l++;let f=zt.HEAPU32[o[l]>>2],p=new Uint8Array(zt.HEAPU32.subarray(f>>2,(f>>2)+s[l]));return zt.free_topological_data(n),{positions:c,indices:d,verticesPerFace:p}}},cre=["getX","getY","getZ"];function V7(e,t){let r={},i=t?t.count:e.count,n=0,a=[],o=[],s=1e4;for(let u=0;u<i;u++){let c=t?t.getX(u):u,h="";for(let d=0;d<3;d++)h+=`${~~(e[cre[d]](c)*s)},`;if(h in r)a.push(r[h]);else{for(let d=0;d<3;d++)o.push(e[cre[d]](c));r[h]=n,a.push(n),n++}}let l=[];for(let u=0;u<a.length;u+=3)a[u]===a[u+1]||a[u]===a[u+2]||a[u+1]===a[u+2]||l.push(a[u],a[u+1],a[u+2]);return{positions:o,triIndices:l}}var P5=new U,oD=new U,sD=new U,lD=new U;function A1e(e,t,r,i){let n=[],a=[];if(r.userData.shape!==void 0&&r.userData.parameters.depth===0&&r.userData.shape.shapeHoles.length===0){let l=r.userData.shape.extractShapePointsToFlatArray([]),u=r.userData.parameters.spikes;if(r.userData.type==="EllipseGeometry"&&u<=24&&u%4===0&&r.userData.parameters.angle>=360){let d=l.length/2/u;l=l.filter((f,p)=>Math.floor(p/2)%d===0)}let c=0;for(let d=0;d<l.length;d+=2)c+=(l[d]-l[(d===0?l.length:d)-2])*(l[d+1]+l[(d===0?l.length:d)-1]);e.length=0;let h=0;if(c<0)for(let d=0;d<l.length;d+=2)e.push(l[d],l[d+1],0),n.push(h++);else for(let d=l.length-2;d>=0;d-=2)e.push(l[d],l[d+1],0),n.push(h++);return a.push(h),{indices:n,verticesPerFace:a}}let o=new Float32Array([r.userData.parameters.depth])[0],s=0;for(;s<t.length;){if(r.useNgonForTopBottomFaceDuringBake){let l=0;if((e[t[s]*3+2]===o||e[t[s]*3+2]===0)&&l++,(e[t[s+1]*3+2]===o||e[t[s+1]*3+2]===0)&&l++,(e[t[s+2]*3+2]===o||e[t[s+2]*3+2]===0)&&l++,l===3)break}if(t[s+1]===t[s+3]&&t[s+2]===t[s+5]||t[s+0]===t[s+3]&&t[s+2]===t[s+4]){P5.set(e[t[s]*3],e[t[s]*3+1],e[t[s]*3+2]),oD.set(e[t[s+1]*3],e[t[s+1]*3+1],e[t[s+1]*3+2]),sD.set(e[t[s+4]*3],e[t[s+4]*3+1],e[t[s+4]*3+2]),lD.set(e[t[s+5]*3],e[t[s+5]*3+1],e[t[s+5]*3+2]),oD.sub(P5).normalize(),sD.sub(P5).normalize(),lD.sub(P5).normalize();let l=oD.cross(sD).dot(lD);Math.abs(l)>.005||i&&i.some((u,c)=>c%2===1?!1:s>=i[c]&&s<i[c+1])?(n.push(t[s],t[s+1],t[s+2]),a.push(3),s+=3):(n.push(t[s],t[s+1],t[s+4],t[s+5]),a.push(4),s+=6)}else n.push(t[s],t[s+1],t[s+2]),a.push(3),s+=3}if(r.useNgonForTopBottomFaceDuringBake){let l=[],u=[],c=0;for(let h=0,d=0;h<e.length;h+=3,d++)e[h+2]===0&&(l.push(d),c++),e[h+2]===o&&u.push(d);if(r.userData.parameters.extrudeBevelSize===0){let h=u[0];u[0]=u[1],u[1]=h}l.reverse(),n.push(...l,...u),a.push(c,c)}return{indices:n,verticesPerFace:a}}var Vh={};Fot(Vh,{calcBoolean:()=>$3t,calcBooleanTopological:()=>J3t,freeMeshSet:()=>i_t,getMeshSet:()=>e_t,hasOpenEdges:()=>t_t,transformMeshSet:()=>r_t});var S1e,Z3t=new Promise(e=>{S1e=e}),D5;function Q3t(){if(D5)return D5;async function e(){let t="https://unpkg.com/@splinetool/boolean-wasm@1.9.47/build",r=Te(()=>import("./BpCokwB2.js"),[],import.meta.url),[i,n]=await Promise.all([r,fetch(`${t}/boolean.wasm`).then(s=>s.arrayBuffer())]),a=i.default,o=await a({wasmBinary:n});S1e(o)}return D5=e(),D5}var Lr,S1;Z3t.then(e=>Lr=e);function K3t(e,t,r){let i,n;e.userData.parameters.type==="TorusGeometry"&&e.userData.parameters.arc===Math.PI*2?n=e.getClosedTorusIndicesForBooleanOrSubdiv():n=e.getIndex();let{positions:a,triIndices:o}=V7(e.getAttribute("position"),n),s;if(t&&r){let{indices:l,verticesPerFace:u}=A1e(a,o,e);s=u.length,i=[];for(let c=0,h=0;c<s;c++){i.push(u[c]);for(let d=0;d<u[c];d++)i.push(l[h++])}}else{let l=o.length;i=Array(l+l/3),s=0;for(let u=0,c=0;c<i.length;)i[c++]=3,s++,i[c++]=o[u++],i[c++]=o[u++],i[c++]=o[u++]}return{positions:a,faceIndices:i,nFaces:s}}function C1e(e){let t=e.length,r=t*Uint32Array.BYTES_PER_ELEMENT,i=t*Float32Array.BYTES_PER_ELEMENT,n=Number.isInteger(e[0])?r:i,a=Lr._malloc(n);return(Number.isInteger(e[0])?new Uint32Array(Lr.HEAPU32.buffer,a,t):new Float32Array(Lr.HEAPF32.buffer,a,t)).set(e,0),a}function E1e(e){switch(e){case 0:return Lr.OP.UNION;case 1:return Lr.OP.INTERSECTION;case 2:return Lr.OP.A_MINUS_B;case 3:return Lr.OP.B_MINUS_A;case 4:return Lr.OP.SYMMETRIC_DIFFERENCE;case 5:return Lr.OP.ALL;default:throw new Error("Unknown boolean operation "+e)}}function J3t(e,t){S1===void 0&&(S1=Lr.init_csg());let r=C1e(e),i=Lr.csg_calc_topological(S1,r,e.length,E1e(t));Lr._free(r);let n=6,a=Lr.HEAPU32.subarray(i>>2,(i>>2)+n),o=a.subarray(3,6),s=0,l=Lr.HEAPU32[a[s]>>2],u=new Float32Array(Lr.HEAPF32.subarray(l>>2,(l>>2)+o[s]));s++;let c=Lr.HEAPU32[a[s]>>2],h=new Uint32Array(Lr.HEAPU32.subarray(c>>2,(c>>2)+o[s]));s++;let d=Lr.HEAPU32[a[s]>>2],f=new Uint8Array(Lr.HEAPU32.subarray(d>>2,(d>>2)+o[s]));return Lr.free_mesh_data(i),{positions:u,indices:h,verticesPerFace:f}}function $3t(e,t,r,i){S1===void 0&&(S1=Lr.init_csg());let n=C1e(e),a=Lr.csg_calc(S1,n,e.length,i,E1e(t));Lr._free(n);let o=5,s=Lr.HEAPU32.subarray(a>>2,(a>>2)+o),l=s.subarray(2,5),u=0,c=Lr.HEAPU32[s[u]>>2],h=Lr.HEAPF32.subarray(c>>2,(c>>2)+l[u]);u++;let d=Lr.HEAPU32[s[u]>>2],f=Lr.HEAPF32.subarray(d>>2,(d>>2)+l[u]);u++;let p=l[u];r.setAttribute("position",new ht(h,3)),r.setAttribute("normal",new ht(f,3));let v=Lr.HEAPF32.subarray((a>>2)+5,(a>>2)+5+6);return r.boundingSphere===null&&(r.boundingSphere=new Es),r.boundingSphere.center.set(v[0],v[1],v[2]),r.boundingSphere.radius=(v[3]**2+v[4]**2+v[5]**2)**.5,r.userData.parameters={width:v[3]*2,height:v[4]*2,depth:v[5]*2},Lr.free_mesh_data(a),p}function e_t(e,t,r){if(Lr===void 0)return-1;let i,n,a;if(t&&e.userData.positions!==void 0){let m=e.userData;a=m.verticesPerFace.length,i=m.positions,n=Array(m.verticesPerFace.reduce((g,y)=>g+y,0)+a);for(let g=0,y=0,x=0;g<m.verticesPerFace.length;g++){n[x++]=m.verticesPerFace[g];for(let b=0;b<m.verticesPerFace[g];b++)n[x++]=m.indices[y++]}}else({positions:i,faceIndices:n,nFaces:a}=K3t(e,t,r));let o=i.length,s=n.length,l=i.length,u=n.length,c=l*Float32Array.BYTES_PER_ELEMENT+u*Uint32Array.BYTES_PER_ELEMENT,h=l*Float32Array.BYTES_PER_ELEMENT,d=Lr._malloc(c),f=new Float32Array(Lr.HEAPF32.buffer,d,l),p=new Uint32Array(Lr.HEAPU32.buffer,d+h,u);f.set(i,0),p.set(n,0);let v=Lr.get_csg_mesh(d,o,d+h,s,a);return Lr._free(d),v}function t_t(e){return Lr.has_open_edges(e)}function r_t(e,t){Lr.transform_csg_mesh(e,t.elements)}function i_t(e){Lr.free_csg_mesh(e)}var n_t={ConeGeometry:o4t,CubeGeometry:s4t,CylinderGeometry:Jge,DodecahedronGeometry:u4t,EllipseGeometry:Qz,HelixGeometry:W4t,IcosahedronGeometry:q4t,LatheGeometry:Y4t,NonParametricGeometry:e3t,PolygonGeometry:v1e,PyramidGeometry:t3t,RectangleGeometry:Kz,SphereGeometry:n3t,PlaneGeometry:a3t,BackdropGeometry:o3t,StarGeometry:m1e,TextFrameGeometry:l3t,TorusGeometry:u3t,TorusKnotGeometry:h3t,TriangleGeometry:d3t,PathGeometry:z3t,VectorGeometry:pm},hre=e=>n_t[e.type].create(e);function dg(e){return e!==null&&"booleanOp"in e}var M1e=class extends jz(nn){constructor(){super(...arguments),this.booleanMeshSetAddress=-1,this.booleanWasTransformed=!1,this.booleanMatrixInvOld=new Ke}updateVisible(e){super.updateVisible(e),this.visible=!dg(this.parent)&&this.visible,dg(this.parent)&&this.parent.invalidateDownstreamBooleanData()}freeBooleanPointer(){this.booleanMeshSetAddress!==-1&&(Vh.freeMeshSet(this.booleanMeshSetAddress),this.booleanMeshSetAddress=-1)}invalidateDownstreamBooleanData(e=!1){return e?this.booleanWasTransformed=!0:this.freeBooleanPointer(),dg(this.parent)?this.parent.invalidateDownstreamBooleanData():this}invalidateUpstreamBooleanData(){this.freeBooleanPointer();for(let e of this.children)e instanceof M1e&&(e.freeBooleanPointer(),dg(e)&&e.invalidateUpstreamBooleanData())}updateTransformState(e,t){let r=super.updateTransformState(e,t);return r&&dg(this.parent)&&this.invalidateDownstreamBooleanData(!0),r}onVariableUpdate(e=!1){super.onVariableUpdate(e),dg(this.parent)&&this.invalidateDownstreamBooleanData(!0)}},I5=new Cn;function Jz(e,t=0,r=e.count,i,n){let a=1/0,o=1/0,s=1/0,l=-1/0,u=-1/0,c=-1/0;for(let h=t;h<r;h++){let d=e.getX(h),f=e.getY(h),p=e.getZ(h);d<a&&(a=d),f<o&&(o=f),p<s&&(s=p),d>l&&(l=d),f>u&&(u=f),p>c&&(c=p)}I5.min.set(a,o,s),I5.max.set(l,u,c),I5.getCenter(i),I5.getSize(n).multiplyScalar(.5)}var a_t=new It,o_t=new Ed,Jo=class extends M1e{constructor(e,t){super(a_t,o_t),this.super_Entity(e,t)}updateState(e,t){this.updateState_Entity(e,t)}updateEntityBoxSize(e,t){let r=this.geometry.getAttribute("position");r!==void 0?Jz(r,this.geometry.drawRange.start,this.geometry.drawRange.count<1/0?this.geometry.drawRange.count:r.count,e,t):super.updateEntityBoxSize(e,t)}},Ef=class{constructor(e){if(this.hashProperties=void 0,this.isNode=!0,this.shortcuts={},Ef.uuidContext===null)throw new Error("plz startContext");Ef.uuidContext===Ef.globalContext?this.uuid="_gid"+Ef.uuidContext.nodeContextUuid++:this.uuid="_uid"+Ef.uuidContext.nodeContextUuid++,this.type=e,this.name=""}static startContext(e){this.uuidContext===null||this.uuidContext===Ef.globalContext?this.uuidContext=e:console.error("Can't start context twice")}static endContext(e){this.uuidContext!==e&&console.error("Can't end context twice"),this.uuidContext=null}analyze(e,t){t=t??{},e.analyzing=!0,this.build(e.addFlow(t.slot,t.cache,t.context),"v4"),e.clearVertexNodeCode(),e.clearFragmentNodeCode(),e.removeFlow(),e.analyzing=!1}analyzeAndFlow(e,t,r){return r=r??{},this.analyze(e,r),this.flow(e,t,r)}flow(e,t,r){r=r??{},e.addFlow(r.slot,r.cache,r.context);let i={result:this.build(e,t),code:e.clearNodeCode(),extra:e.context.extra};return e.removeFlow(),i}build(e,t,r){t=t??this.getType(e,t);let i=e.getNodeData(r??this);return e.analyzing&&this.appendDepsNode(e,i,t),e.nodes.indexOf(this)===-1&&e.nodes.push(this),this.updateFrame!==void 0&&e.updaters.indexOf(this)===-1&&e.updaters.push(this),this.generate(e,t,r)}updateFrame(e){}generateReadonly(e,t,r,i,n,a){return""}generate(e,t,r,i,n){return""}parse(e,t,r,i){}appendDepsNode(e,t,r){t.deps=(t.deps||0)+1;let i=e.getTypeLength(r);(i>(t.outputMax||0)||this.getType(e,r))&&(t.outputMax=i,t.output=r)}setName(e){this.name=e}getName(){return this.name}getType(e,t){return t==="sampler2D"||t==="samplerCube"?t:this.type}},Yn=Ef;Yn.globalContext={nodeContextUuid:0},Yn.uuidContext=Ef.globalContext;var dre=class{constructor(e){e=e??{},this.name=e.name,this.type=e.type,this.node=e.node,this.size=e.size,this.needsUpdate=e.needsUpdate}get value(){return this.node.value}set value(e){this.node.value=e}},s_t=class{constructor(){this.nodes={},this.keywords={}}add(e){this.nodes[e.name]=e}addKeyword(e,t,r){r=r!==void 0?r:!0,this.keywords[e]={callback:t,cache:r}}remove(e){delete this.nodes[e.name]}removeKeyword(e){delete this.keywords[e]}get(e){return this.nodes[e]}getKeyword(e,t){return this.keywords[e].callback(t)}getKeywordData(e){return this.keywords[e]}contains(e){return this.nodes[e]!==void 0}containsKeyword(e){return this.keywords[e]!==void 0}},gs=new s_t,Ii=class extends Yn{constructor(e,t){super(e),this.scope="",t=t??{},this.shared=t.shared!==void 0?t.shared:!0,this.unique=t.unique!==void 0?t.unique:!1}build(e,t,r,i){if(t=t??this.getType(e),this.getShared(e,t)){let n=this.getUnique(e,t);n&&this.uuid===void 0&&(this.uuid=vt.generateUUID()),r=e.getUUID(r??this.getUUID(),!n);let a=e.getNodeData(r),o=a.output||this.getType(e);if(e.analyzing)return(a.deps||0)>0||this.getLabel()?(this.appendDepsNode(e,a,t),this.generate(e,t,r)):super.build(e,t,r);if(n)return a.name=a.name||super.build(e,t,r),a.name;if(!this.getLabel()&&(!this.getShared(e,o)||e.context.ignoreCache||a.deps===1))return super.build(e,t,r);r=this.getUUID(!1);let s=this.getTemp(e,r);if(s)return e.format(s,o,t);{s=super.generate(e,t,r,a.output,i);let l=this.generate(e,o,r);return e.addNodeCode(s+" = "+l+";"),e.format(s,o,t)}}return super.build(e,t,r)}getShared(e,t){return t!=="sampler2D"&&t!=="samplerCube"&&this.shared}getUnique(e,t){return this.unique}setLabel(e){return this.label=e,this}getLabel(){return this.label}getUUID(e){let t=this.uuid;return typeof this.scope=="string"&&(t=this.scope+"-"+t),t}getTemp(e,t){t=t||this.uuid;let r=e.getVars()[t];return r?r.name:void 0}generate(e,t,r,i,n){return this.getShared(e,t)||console.error("TempNode is not shared"),r=r??this.uuid,e.getTempVar(r,i??this.getType(e),n,this.getLabel()).name}},Ms=class extends Ii{constructor(e,t){t=t??{},t.shared=t.shared!==void 0?t.shared:!1,super(e,t),this.readonly=!1}setReadonly(e){return this.readonly=e,this.hashProperties=this.readonly?["value"]:void 0,this}getReadonly(){return this.readonly}generate(e,t,r,i,n,a){r=e.getUUID(r??this.getUUID()),i=i??this.getType(e);let o=e.getNodeData(r);return this.getReadonly()&&this.generateReadonly!==void 0?this.generateReadonly(e,t,r,i,n,a):e.isShader("vertex")?(o.vertex||(o.vertex=e.createVertexUniform(i,this,n,a,this.getLabel())),e.format(o.vertex.name,i,t)):(o.fragment||(o.fragment=e.createFragmentUniform(i,this,n,a,this.getLabel())),e.format(o.fragment.name,i,t))}},Oa=class extends Ms{constructor(e=0,t){super("v2"),this.nodeType="Vector2",this.value=e instanceof me?e:new me(e,t)}get x(){return this.value.x}set x(e){this.value.x=e}get y(){return this.value.y}set y(e){this.value.y=e}generateReadonly(e,t,r,i,n,a){return e.format("vec2("+this.value.x+", "+this.value.y+")",i,t)}},vl=class extends Ms{constructor(e=0,t,r){super("v3"),this.nodeType="Vector3",this.value=e instanceof U?e:new U(e,t,r)}get x(){return this.value.x}set x(e){this.value.x=e}get y(){return this.value.y}set y(e){this.value.y=e}get z(){return this.value.z}set z(e){this.value.z=e}generateReadonly(e,t,r,i,n,a){return e.format("vec3("+this.value.x+", "+this.value.y+", "+this.value.z+")",i,t)}},qa=class extends Vt{constructor(e,t,r,i){super(e,t,r),this.isColorA=!0,this.a=i}setRGBA(e,t,r,i){super.setRGB(e,t,r),this.a=i}copy(e){return super.copy(e),this.a="a"in e?e.a:1,this}clone(){return new this.constructor(this.r,this.g,this.b,this.a)}equals(e){return super.equals(e)&&this.a===e.a}setStyle(e,t="srgb"){let r;if(e==="transparent")return this.setRGBA(0,0,0,0),this;if(r=/^((?:rgb|hsl)a?)\(([^)]*)\)/.exec(e)){let i,n=r[1],a=r[2];switch(n){case"rgb":case"rgba":if(i=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return this.a=n==="rgba"?parseFloat(i[4]):1,super.setStyle(e,t);break;case"hsl":case"hsla":if(i=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)%\s*,\s*(\d*\.?\d+)%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return this.a=n==="hsla"?parseFloat(i[4]):1,super.setStyle(e,t);break}}return super.setStyle(e,t)}get x(){return this.r}get y(){return this.g}get z(){return this.b}get w(){return this.a}set x(e){this.r=e}set y(e){this.g=e}set z(e){this.b=e}set w(e){this.a=e}},Fh=class extends Ms{constructor(e){super("v4"),this.nodeType="Vector4",this.value=e instanceof qa?e:new qa(e.r,e.g,e.b,e.a)}generateReadonly(e,t,r,i,n,a){return e.format("vec4("+this.value.r+", "+this.value.g+", "+this.value.b+", "+this.value.a+")",i,t)}},l_t=/^\s*([a-z_0-9]+)\s([a-z_0-9]+)\s*\((.*?)\)/i,fre=/[a-z_0-9]+/gi,ut=class extends Ii{constructor(e,t,r,i,n){super(n),this.src="",this.nodeType="Function",this.useKeywords=!0,this.includes=[],this.extensions={},this.keywords={},this.isMethod=n===void 0,this.isInterface=!1,this.parse(e,t,r,i)}getShared(e,t){return!this.isMethod}getType(e){return e.getTypeByFormat(this.type)}getInputByName(e){if(this.inputs){let t=this.inputs.length;for(;t--;)if(this.inputs[t].name===e)return this.inputs[t]}}getIncludeByName(e){if(this.includes){let t=this.includes.length;for(;t--;)if(this.includes[t].name===e)return this.includes[t]}}generate(e,t,r,i,n){let a,o=0,s=this.src;if(this.includes)for(let u=0;u<this.includes.length;u++)e.include(this.includes[u],this);for(let u in this.extensions)e.extensions[u]=!0;let l=[];for(;a=fre.exec(this.src);)l.push(a);for(let u=0;u<l.length;u++){let c=l[u],h=c[0],d=this.isMethod?!this.getInputByName(h):!0,f=h;if(this.keywords[h]||this.useKeywords&&d&&gs.containsKeyword(h)){let p=this.keywords[h];if(!p){let v=gs.getKeywordData(h);v.cache&&(p=e.keywords[h]),p=p||gs.getKeyword(h,e),v.cache&&(e.keywords[h]=p)}f=p.build(e)}h!==f&&s[c.index+o-1]!=="."&&(s=s.substring(0,c.index+o)+f+s.substring(c.index+h.length+o),o+=f.length-h.length),this.getIncludeByName(f)===void 0&&gs.contains(f)&&e.include(gs.get(f))}return t==="source"?s:this.isMethod?(this.isInterface||e.include(this,void 0,s),this.name):e.format("( "+s+" )",this.getType(e),t)}parse(e,t,r,i){if(this.src=e||"",this.includes=t??[],this.extensions=r??{},this.keywords=i??{},this.isMethod){let n=l_t.exec(this.src);if(this.inputs=[],n&&n.length==4){this.type=n[1],this.name=n[2];let a=n[3].match(fre);if(a){let o=0;for(;o<a.length;){let s=a[o++],l;s==="in"||s==="out"||s==="inout"?l=a[o++]:(l=s,s="");let u=a[o++];this.inputs.push({name:u,type:l,qualifier:s})}}this.isInterface=this.src.indexOf("{")===-1}else this.type="",this.name=""}}},u_t=/^([a-z_0-9]+)\s([a-z_0-9]+)\s?\=?\s?(.*?)(\;|$)/i,T1e=class extends Ii{constructor(e="",t){super(),this.src="",this.useDefine=!1,this.nodeType="Const",this.parse(e||T1e.PI,void 0,void 0,void 0,t)}getType(e){return e.getTypeByFormat(this.type)}parse(e,t,r,i,n){this.src=e||"";let a,o,s="",l=u_t.exec(e);this.useDefine=n??this.src.charAt(0)==="#",l&&l.length>1?(o=l[1],a=l[2],s=l[3]):(a=this.src,o="f"),this.name=a,this.type=o,this.value=s}build(e,t){if(t==="source"){if(this.value)return this.useDefine?"#define "+this.name+" "+this.value:"const "+this.type+" "+this.name+" = "+this.value+";";if(this.useDefine)return this.src}return e.include(this),e.format(this.name,this.getType(e),t)}generate(e,t,r,i,n){return e.format(this.name,this.getType(e),t)}},di=T1e;di.PI="PI",di.PI2="PI2",di.RECIPROCAL_PI="RECIPROCAL_PI",di.RECIPROCAL_PI2="RECIPROCAL_PI2",di.LOG2="LOG2",di.EPSILON="EPSILON";var c_t=new RegExp(`^structs*([a-z_0-9]+)s*{s*((.|
)*?)}`,"gim"),h_t=new RegExp("s*(w*?)s*(w*?)(=|;)","gim"),P1e=class extends Ii{constructor(e=""){super(),this.inputs=[],this.src="",this.nodeType="Struct",this.parse(e)}getType(e){return e.getTypeByFormat(this.name)}getInputByName(e){let t=this.inputs.length;for(;t--;)if(this.inputs[t].name===e)return this.inputs[t]}generate(e,t,r,i,n){return t==="source"?this.src+";":e.format("( "+this.src+" )",this.getType(e),t)}parse(e=""){this.src=e,this.inputs=[];let t=c_t.exec(e);if(t){let r=t[2],i;for(;i=h_t.exec(r);)this.inputs.push({type:i[1],name:i[2]});this.name=t[1]}else this.name="";this.type=this.name}},$z=class extends Ii{constructor(e){super("v2",{shared:!1}),this.nodeType="UV",this.index=e??0}generate(e,t){e.requires.uv[this.index]=!0;let r=this.index>0?this.index+1:"",i=e.isShader("vertex")?"uv"+r:"vUv"+r;return e.format(i,this.getType(e),t)}};gs.addKeyword("uv",function(){return new $z});gs.addKeyword("uv2",function(){return new $z(1)});var Og=class extends Ii{constructor(e,t){super("v4"),this.nodeType="ColorSpace",this.input=e,this.method=t??Og.LINEAR_TO_LINEAR,this.hashProperties=["method"]}static getEncodingComponents(e){switch(e){case ku:return["Linear"];case pr:return["sRGB"];default:return[]}}generate(e,t){var o;let r=this.input.build(e,"v4"),i=this.getType(e),n=Og.Nodes[this.method],a=e.include(n);if(a===Og.LINEAR_TO_LINEAR)return e.format(r,i,t);if(((o=n.inputs)==null?void 0:o.length)===2){let s=this.factor.build(e,"f");return e.format(a+"( "+r+", "+s+" )",i,t)}else return e.format(a+"( "+r+" )",i,t)}fromEncoding(e){let t=Og.getEncodingComponents(e);this.method="LinearTo"+t[0],this.factor=t[1]}fromDecoding(e){let t=Og.getEncodingComponents(e);this.method=t[0]+"ToLinear",this.factor=t[1]}},Bc=Og;Bc.Nodes={LinearToLinear:new ut(["vec4 LinearToLinear( in vec4 value ) {","	return value;","}"].join(`
`)),sRGBToLinear:new ut(["vec4 sRGBToLinear( in vec4 value ) {","	return vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.w );","}"].join(`
`)),LinearTosRGB:new ut(["vec4 LinearTosRGB( in vec4 value ) {","	return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.w );","}"].join(`
`))},Bc.LINEAR_TO_LINEAR="LinearToLinear",Bc.SRGB_TO_LINEAR="sRGBToLinear",Bc.LINEAR_TO_SRGB="LinearTosRGB";var Hi=class extends ut{constructor(e="",t,r,i,n){super(e,n,i,r,t),this.nodeType="Expression"}},Zh=class extends Ms{constructor(e=new an,t,r,i){super("v4",{shared:!0}),this.nodeType="Texture",this.value=e,this.uv=t??new $z,this.bias=r,this.project=i!==void 0?i:!1}getTexture(e,t){return super.generate(e,t,this.value.uuid,"t")}generate(e,t){if(t==="sampler2D")return this.getTexture(e,t);let r=this.getTexture(e,t),i=this.uv.build(e,this.project?"v4":"v2"),n=this.bias?this.bias.build(e,"f"):void 0;n===void 0&&e.context.bias&&(n=e.context.bias.setTexture(this).build(e,"f"));let a,o;this.project?a="texture2DProj":a=n?"tex2DBias":"tex2D",n?o=a+"( "+r+", "+i+", "+n+" )":o=a+"( "+r+", "+i+" )";let s={include:e.isShader("vertex"),ignoreCache:!0},l=this.getType(e);return e.addContext(s),this.colorSpace=this.colorSpace??new Bc(new Hi("",l)),this.colorSpace.fromDecoding(e.getTextureEncodingFromMap(this.value)),this.colorSpace.input.parse(o),o=this.colorSpace.build(e,l),e.removeContext(),e.format(o,l,t)}},mt=class extends Ms{constructor(e){super("f"),this.nodeType="Float",this.value=e??0}generateReadonly(e,t,r,i,n,a){return e.format(this.value+(this.value%1?"":".0"),i,t)}},pre=class extends Ii{constructor(e,t){super(),this.inputs=[],this.nodeType="FunctionCall",this.value=e,this.inputs=t??[]}getFunction(){return this.value}getType(e){return this.value.getType(e)}generate(e,t,r,i,n){i=this.getType(e);let a=this.value,o=a.build(e,t)+"( ",s=[];if(a.inputs){for(let l=0;l<a.inputs.length;l++){let u=a.inputs[l],c=this.inputs[l]||this.inputs[u.name];s.push(c.build(e,e.getTypeByFormat(u.type)))}o+=s.join(", ")+" )"}return e.format(o,i,t)}},D1e=class extends Ii{constructor(e,t,r=D1e.ADD){super(),this.nodeType="Operator",this.type=e.type,this.a=e,this.b=t,this.op=r}getType(e){let t=this.a.getType(e),r=this.b.getType(e);return e.isTypeMatrix(t)?"v4":e.getTypeLength(r)>e.getTypeLength(t)?r:t}generate(e,t){let r=this.getType(e);this.type=r;let i=this.a.build(e,r),n=this.b.build(e,r);return e.format("( "+i+" "+this.op+" "+n+" )",r,t)}},os=D1e;os.ADD="+",os.SUB="-",os.MUL="*",os.DIV="/";var Si=class extends Ii{constructor(e,t=Si.ABS,r,i){super(),this.nodeType="Math",this.a=e,typeof t!="string"?this.b=t:i=t,typeof r!="string"?this.c=r:i=r,this.method=i,this.hashProperties=["method"]}getNumInputs(e){switch(this.method){case Si.MIX:case Si.CLAMP:case Si.REFRACT:case Si.SMOOTHSTEP:case Si.FACEFORWARD:return 3;case Si.MIN:case Si.MAX:case Si.MOD:case Si.STEP:case Si.REFLECT:case Si.DISTANCE:case Si.DOT:case Si.CROSS:case Si.POW:return 2;default:return 1}}getInputType(e){let t=e.getTypeLength(this.a.getType(e)),r=this.b?e.getTypeLength(this.b.getType(e)):0,i=this.c?e.getTypeLength(this.c.getType(e)):0;return t>r&&t>i?this.a.getType(e):r>i?this.b.getType(e):this.c.getType(e)}getType(e){switch(this.method){case Si.LENGTH:case Si.DISTANCE:case Si.DOT:return"f";case Si.CROSS:return"v3"}return this.getInputType(e)}generate(e,t){let r,i,n,a=this.a?e.getTypeLength(this.a.getType(e)):0,o=this.b?e.getTypeLength(this.b.getType(e)):0,s=this.c?e.getTypeLength(this.c.getType(e)):0,l=this.getInputType(e),u=this.getType(e);switch(this.type=u,this.method){case Si.NEGATE:return e.format("( -"+this.a.build(e,l)+" )",l,t);case Si.INVERT:return e.format("( 1.0 - "+this.a.build(e,l)+" )",l,t);case Si.CROSS:r=this.a.build(e,"v3"),i=this.b.build(e,"v3");break;case Si.STEP:r=this.a.build(e,a===1?"f":l),i=this.b.build(e,l);break;case Si.MIN:case Si.MAX:case Si.MOD:r=this.a.build(e,l),i=this.b.build(e,o===1?"f":l);break;case Si.REFRACT:r=this.a.build(e,l),i=this.b.build(e,l),n=this.c.build(e,"f");break;case Si.MIX:r=this.a.build(e,l),i=this.b.build(e,l),n=this.c.build(e,s===1?"f":l);break;default:r=this.a.build(e,l),this.b&&(i=this.b.build(e,l)),this.c&&(n=this.c.build(e,l));break}let c=[];c.push(r),i&&c.push(i),n&&c.push(n);let h=this.getNumInputs(e);if(c.length!==h)throw Error(`Arguments not match used in "${this.method}". Require ${h}, currently ${c.length}.`);return e.format(this.method+"( "+c.join(", ")+" )",u,t)}},cr=Si;cr.RAD="radians",cr.DEG="degrees",cr.EXP="exp",cr.EXP2="exp2",cr.LOG="log",cr.LOG2="log2",cr.SQRT="sqrt",cr.INV_SQRT="inversesqrt",cr.FLOOR="floor",cr.CEIL="ceil",cr.NORMALIZE="normalize",cr.FRACT="fract",cr.SATURATE="saturate",cr.SIN="sin",cr.COS="cos",cr.TAN="tan",cr.ASIN="asin",cr.ACOS="acos",cr.ARCTAN="atan",cr.ABS="abs",cr.SIGN="sign",cr.LENGTH="length",cr.NEGATE="negate",cr.INVERT="invert",cr.MIN="min",cr.MAX="max",cr.MOD="mod",cr.STEP="step",cr.REFLECT="reflect",cr.DISTANCE="distance",cr.DOT="dot",cr.CROSS="cross",cr.POW="pow",cr.MIX="mix",cr.CLAMP="clamp",cr.REFRACT="refract",cr.SMOOTHSTEP="smoothstep",cr.FACEFORWARD="faceforward";var Yx=class extends Ii{constructor(e,t,r){super("v4"),this.nodeType="TextureCubeUV",this.value=e,this.uv=t,this.bias=r}bilinearCubeUV(e,t,r,i){let n=new pre(Yx.Nodes.bilinearCubeUV,[t,r,i]);this.colorSpaceTL=this.colorSpaceTL??new Bc(new Hi("","v4")),this.colorSpaceTL.fromDecoding(e.getTextureEncodingFromMap(this.value.value)),this.colorSpaceTL.input.parse(n.build(e)+".tl"),this.colorSpaceTR=this.colorSpaceTR??new Bc(new Hi("","v4")),this.colorSpaceTR.fromDecoding(e.getTextureEncodingFromMap(this.value.value)),this.colorSpaceTR.input.parse(n.build(e)+".tr"),this.colorSpaceBL=this.colorSpaceBL??new Bc(new Hi("","v4")),this.colorSpaceBL.fromDecoding(e.getTextureEncodingFromMap(this.value.value)),this.colorSpaceBL.input.parse(n.build(e)+".bl"),this.colorSpaceBR=this.colorSpaceBR??new Bc(new Hi("","v4")),this.colorSpaceBR.fromDecoding(e.getTextureEncodingFromMap(this.value.value)),this.colorSpaceBR.input.parse(n.build(e)+".br");let a={include:e.isShader("vertex"),ignoreCache:!0};e.addContext(a),this.colorSpaceTLExp=new Hi(this.colorSpaceTL.build(e,"v4"),"v4"),this.colorSpaceTRExp=new Hi(this.colorSpaceTR.build(e,"v4"),"v4"),this.colorSpaceBLExp=new Hi(this.colorSpaceBL.build(e,"v4"),"v4"),this.colorSpaceBRExp=new Hi(this.colorSpaceBR.build(e,"v4"),"v4"),e.removeContext();let o=new Hi("mix( mix( cubeUV_TL, cubeUV_TR, cubeUV.f.x ), mix( cubeUV_BL, cubeUV_BR, cubeUV.f.x ), cubeUV.f.y )","v4");return o.keywords.cubeUV_TL=this.colorSpaceTLExp,o.keywords.cubeUV_TR=this.colorSpaceTRExp,o.keywords.cubeUV_BL=this.colorSpaceBLExp,o.keywords.cubeUV_BR=this.colorSpaceBRExp,o.keywords.cubeUV=n,o}generate(e,t){if(e.isShader("fragment")){let r=this.uv,i=this.bias||e.context.roughness,n=new pre(Yx.Nodes.roughnessToMip,[i]),a=new cr(n,Yx.Nodes.m0,Yx.Nodes.cubeUV_maxMipLevel,cr.CLAMP),o=new cr(a,cr.FLOOR),s=new cr(a,cr.FRACT),l=this.bilinearCubeUV(e,this.value,r,o),u=this.bilinearCubeUV(e,this.value,r,new os(o,new mt(1).setReadonly(!0),os.ADD)),c=new cr(l,u,s,cr.MIX);return e.format(c.build(e),"v4",t)}else return console.warn("TextureCubeUVNode is not compatible with "+e.shader+" shader."),e.format("vec4( 0.0 )",this.getType(e),t)}},MO=Yx;MO.Nodes=function(){let e=new P1e(`struct TextureCubeUVData {
			vec4 tl;
			vec4 tr;
			vec4 br;
			vec4 bl;
			vec2 f;
		}`),t=new di("float cubeUV_maxMipLevel 8.0",!0),r=new di("float cubeUV_minMipLevel 4.0",!0),i=new di("float cubeUV_maxTileSize 256.0",!0),n=new di("float cubeUV_minTileSize 16.0",!0),a=new ut(`float getFace(vec3 direction) {
				vec3 absDirection = abs(direction);
				float face = -1.0;
				if (absDirection.x > absDirection.z) {
					if (absDirection.x > absDirection.y)
						face = direction.x > 0.0 ? 0.0 : 3.0;
					else
						face = direction.y > 0.0 ? 1.0 : 4.0;
				} else {
					if (absDirection.z > absDirection.y)
						face = direction.z > 0.0 ? 2.0 : 5.0;
					else
						face = direction.y > 0.0 ? 1.0 : 4.0;
				}
				return face;
		}`);a.useKeywords=!1;let o=new ut(`vec2 getUV(vec3 direction, float face) {
				vec2 uv;
				if (face == 0.0) {
					uv = vec2(direction.z, direction.y) / abs(direction.x); // pos x
				} else if (face == 1.0) {
					uv = vec2(-direction.x, -direction.z) / abs(direction.y); // pos y
				} else if (face == 2.0) {
					uv = vec2(-direction.x, direction.y) / abs(direction.z); // pos z
				} else if (face == 3.0) {
					uv = vec2(-direction.z, direction.y) / abs(direction.x); // neg x
				} else if (face == 4.0) {
					uv = vec2(-direction.x, direction.z) / abs(direction.y); // neg y
				} else {
					uv = vec2(direction.x, direction.y) / abs(direction.z); // neg z
				}
				return 0.5 * (uv + 1.0);
		}`);o.useKeywords=!1;let s=new ut(`TextureCubeUVData bilinearCubeUV(sampler2D envMap, vec3 direction, float mipInt) {
			float face = getFace(direction);
			float filterInt = max(cubeUV_minMipLevel - mipInt, 0.0);
			mipInt = max(mipInt, cubeUV_minMipLevel);
			float faceSize = exp2(mipInt);
			float texelSize = 1.0 / (3.0 * cubeUV_maxTileSize);
			vec2 uv = getUV(direction, face) * (faceSize - 1.0);
			vec2 f = fract(uv);
			uv += 0.5 - f;
			if (face > 2.0) {
				uv.y += faceSize;
				face -= 3.0;
			}
			uv.x += face * faceSize;
			if(mipInt < cubeUV_maxMipLevel){
				uv.y += 2.0 * cubeUV_maxTileSize;
			}
			uv.y += filterInt * 2.0 * cubeUV_minTileSize;
			uv.x += 3.0 * max(0.0, cubeUV_maxTileSize - 2.0 * faceSize);
			uv *= texelSize;
			vec4 tl = texture2D(envMap, uv);
			uv.x += texelSize;
			vec4 tr = texture2D(envMap, uv);
			uv.y += texelSize;
			vec4 br = texture2D(envMap, uv);
			uv.x -= texelSize;
			vec4 bl = texture2D(envMap, uv);
			return TextureCubeUVData( tl, tr, br, bl, f );
		}`,[e,a,o,t,r,i,n]);s.useKeywords=!1;let l=new di("float r0 1.0",!0),u=new di("float v0 0.339",!0),c=new di("float m0 -2.0",!0),h=new di("float r1 0.8",!0),d=new di("float v1 0.276",!0),f=new di("float m1 -1.0",!0),p=new di("float r4 0.4",!0),v=new di("float v4 0.046",!0),m=new di("float m4 2.0",!0),g=new di("float r5 0.305",!0),y=new di("float v5 0.016",!0),x=new di("float m5 3.0",!0),b=new di("float r6 0.21",!0),_=new di("float v6 0.0038",!0),w=new di("float m6 4.0",!0),S=[l,u,c,h,d,f,p,v,m,g,y,x,b,_,w],A=new ut(`float roughnessToMip(float roughness) {
			float mip = 0.0;
			if (roughness >= r1) {
				mip = (r0 - roughness) * (m1 - m0) / (r0 - r1) + m0;
			} else if (roughness >= r4) {
				mip = (r1 - roughness) * (m4 - m1) / (r1 - r4) + m1;
			} else if (roughness >= r5) {
				mip = (r4 - roughness) * (m5 - m4) / (r4 - r5) + m4;
			} else if (roughness >= r6) {
				mip = (r5 - roughness) * (m6 - m5) / (r5 - r6) + m5;
			} else {
				mip = -2.0 * log2(1.16 * roughness);// 1.16 = 1.79^0.25
			}
			return mip;
		}`,S);return{bilinearCubeUV:s,roughnessToMip:A,m0:c,cubeUV_maxMipLevel:t}}();var Bg=class extends Ii{constructor(e){super("v3"),this.nodeType="Normal",this.scope=e??Bg.VIEW}getShared(){return this.scope===Bg.WORLD}build(e,t,r,i){let n=e.context[this.scope+"Normal"];return n?n.build(e,t,r,i):super.build(e,t,r)}generate(e,t,r,i,n){let a;switch(this.scope){case Bg.VIEW:e.isShader("vertex")?a="transformedNormal":a="geometryNormal";break;case Bg.LOCAL:e.isShader("vertex")?a="objectNormal":(e.requires.normal=!0,a="vObjectNormal");break;case Bg.WORLD:e.isShader("vertex")?a="inverseTransformDirection( transformedNormal, viewMatrix ).xyz":(e.requires.worldNormal=!0,a="vWNormal");break}return e.format(a,this.getType(e),t)}},bs=Bg;bs.LOCAL="local",bs.WORLD="world",bs.VIEW="view",bs.NORMAL="normal";gs.addKeyword("viewNormal",function(){return new bs(bs.VIEW)});gs.addKeyword("localNormal",function(){return new bs(bs.NORMAL)});gs.addKeyword("worldNormal",function(){return new bs(bs.WORLD)});var Ih=class extends Ii{constructor(e){super("v3"),this.nodeType="Position",this.scope=e??Ih.LOCAL}getType(){switch(this.scope){case Ih.PROJECTION:return"v4"}return this.type}getShader(){switch(this.scope){case Ih.LOCAL:case Ih.WORLD:return!1}return!0}generate(e,t,r,i,n){let a;switch(this.scope){case Ih.LOCAL:e.isShader("vertex")?a="transformed":(e.requires.position=!0,a="vPosition");break;case Ih.WORLD:if(e.isShader("vertex"))return"( modelMatrix * vec4( transformed, 1.0 ) ).xyz";e.requires.worldPosition=!0,a="vWPosition";break;case Ih.VIEW:a=e.isShader("vertex")?"-mvPosition.xyz":"vViewPosition";break;case Ih.PROJECTION:a=e.isShader("vertex")?"( projectionMatrix * modelViewMatrix * vec4( position, 1.0 ) )":"vec4( 0.0 )";break}return e.format(a,this.getType(),t)}},gu=Ih;gu.LOCAL="local",gu.WORLD="world",gu.VIEW="view",gu.PROJECTION="projection";gs.addKeyword("position",function(){return new gu});gs.addKeyword("worldPosition",function(){return new gu(gu.WORLD)});gs.addKeyword("viewPosition",function(){return new gu(gu.VIEW)});var uc=class extends Ii{constructor(e){super("v3"),this.nodeType="Reflect",this.scope=e??uc.CUBE}getUnique(e){return!e.context.viewNormal}getType(){switch(this.scope){case uc.SPHERE:return"v2"}return this.type}generate(e,t){let r=this.getUnique(e);if(e.isShader("fragment")){let i;switch(this.scope){case uc.VECTOR:{let n=new bs(bs.VIEW),a=e.context.roughness,o=n.build(e,"v3"),s=new gu(gu.VIEW).build(e,"v3"),l=a?a.build(e,"f"):void 0,u=`reflect( -normalize( ${s} ), ${o} )`;l&&(u=`normalize( mix( ${u}, ${o}, ${l} * ${l} ) )`);let c=`inverseTransformDirection( ${u}, viewMatrix )`;r?(e.addNodeCode(`vec3 reflectVec = ${c};`),i="reflectVec"):i=c;break}case uc.CUBE:{let n=new uc(uc.VECTOR).build(e,"v3"),a="vec3( -"+n+".x, "+n+".yz )";r?(e.addNodeCode(`vec3 reflectCubeVec = ${a};`),i="reflectCubeVec"):i=a;break}case uc.SPHERE:{let n="normalize( ( viewMatrix * vec4( "+new uc(uc.VECTOR).build(e,"v3")+", 0.0 ) ).xyz + vec3( 0.0, 0.0, 1.0 ) ).xy * 0.5 + 0.5";r?(e.addNodeCode(`vec2 reflectSphereVec = ${n};`),i="reflectSphereVec"):i=n;break}}return e.format(i,this.getType(),t)}else return console.warn("ReflectNode is not compatible with "+e.shader+" shader."),e.format("vec3( 0.0 )",this.type,t)}},C1=uc;C1.CUBE="cube",C1.SPHERE="sphere",C1.VECTOR="vector";var d_t=class extends Ii{constructor(e=new Zh,t,r){super("v4"),this.nodeType="TextureCube",this.value=e,this.radianceNode=new MO(this.value,t??new C1(C1.VECTOR),r),this.irradianceNode=new MO(this.value,new bs(bs.WORLD),new mt(1).setReadonly(!0))}generate(e,t){return e.isShader("fragment")?(e.require("irradiance"),e.context.bias&&e.context.bias.setTexture(this.value),(e.slot==="irradiance"?this.irradianceNode:this.radianceNode).build(e,t)):(console.warn("TextureCubeNode is not compatible with "+e.shader+" shader."),e.format("vec4( 0.0 )",this.getType(e),t))}},f_t=class extends Ms{constructor(e=new iz,t,r){super("v4",{shared:!0}),this.nodeType="CubeTexture",this.value=e,this.uv=t??new C1,this.bias=r}getTexture(e,t){return super.generate(e,t,this.value.uuid,"tc")}generate(e,t){var l;if(t==="samplerCube")return this.getTexture(e,t);let r=this.getTexture(e,t),i=(l=this.uv)==null?void 0:l.build(e,"v3"),n=this.bias?this.bias.build(e,"f"):void 0;n===void 0&&e.context.bias&&(n=e.context.bias.setTexture(this).build(e,"f"));let a;n?a="texCubeBias( "+r+", "+i+", "+n+" )":a="texCube( "+r+", "+i+" )";let o={include:e.isShader("vertex"),ignoreCache:!0},s=this.getType(e);return e.addContext(o),this.colorSpace=this.colorSpace??new Bc(new Hi("",s)),this.colorSpace.fromDecoding(e.getTextureEncodingFromMap(this.value)),this.colorSpace.input.parse(a),a=this.colorSpace.build(e,s),e.removeContext(),e.format(a,s,t)}},p_t=`
uniform int frameIndex;
uniform vec2 resolution;
uniform mat4 previousModelViewMatrix;
uniform mat4 previousProjectionMatrix;

varying vec4 vCurrentPosition;
varying vec4 vPreviousPosition;
`,v_t=`
layout(location = 1) out vec4 gVelocity;

uniform int frameIndex;
uniform vec2 resolution;

varying vec4 vCurrentPosition;
varying vec4 vPreviousPosition;

const vec2 haltonSequence[16] = vec2[16](
vec2( 0.000000,-0.333334),
vec2(-0.500000, 0.333334),
vec2( 0.500000,-0.777778),
vec2(-0.750000,-0.111112),
vec2( 0.250000, 0.555556),
vec2(-0.250000,-0.555556),
vec2( 0.750000, 0.111112),
vec2(-0.875000, 0.777778),
vec2(0.125000, -0.925926),
vec2(-0.375000, -0.259260),
vec2(0.625000, 0.407408),
vec2(-0.625000, -0.703704),
vec2(0.375000, -0.037038),
vec2(-0.125000, 0.629630),
vec2(0.875000, -0.481482),
vec2(-0.937500, 0.185186));

vec2 vogelDiskSample(int sampleIndex, int sampleCount, float angle) {
  const float goldenAngle = 2.399963f; // radians
  float r = sqrt(float(sampleIndex) + 0.5f) / sqrt(float(sampleCount));
  float theta = float(sampleIndex) * goldenAngle + angle;
  float sine = sin(theta);
  float cosine = cos(theta);
  return vec2(cosine, sine) * r;
}

// Derived from the interleaved gradient function from Jimenez 2014 http:goo.gl/eomGso
float getNoiseInterleavedGradient(vec2 screenPos) {
    vec3 magic = vec3(0.06711056f, 0.00583715f, 52.9829189f);
    return fract(magic.z * fract(dot(screenPos, magic.xy)));
}

`,m_t=`
// TODO: This could be generated CPU side and passed to the shader every frame
const vec2 haltonSequence[16] = vec2[16](
vec2( 0.000000,-0.333334),
vec2(-0.500000, 0.333334),
vec2( 0.500000,-0.777778),
vec2(-0.750000,-0.111112),
vec2( 0.250000, 0.555556),
vec2(-0.250000,-0.555556),
vec2( 0.750000, 0.111112),
vec2(-0.875000, 0.777778),
vec2(0.125000, -0.925926),
vec2(-0.375000, -0.259260),
vec2(0.625000, 0.407408),
vec2(-0.625000, -0.703704),
vec2(0.375000, -0.037038),
vec2(-0.125000, 0.629630),
vec2(0.875000, -0.481482),
vec2(-0.937500, 0.185186));

// TODO: Pass correct view size
vec2 offset = haltonSequence[frameIndex];
offset.x /= resolution.x;
offset.y /= resolution.y;

vec4 currentPosition = gl_Position;
vec4 currentPositionJittered = currentPosition + (vec4(offset.x, offset.y, 0.0, 0.0) * currentPosition.w);

// We want to calculate the velocity with unjittered positions
// so that things that are not moving get a velocity = 0
vCurrentPosition = currentPosition;
vPreviousPosition = previousProjectionMatrix * previousModelViewMatrix * vec4(transformed, 1.0);
#ifdef OUTLINE_COMPENSATION
vPreviousPosition.xy += OUTLINE_COMPENSATION;
#endif
gl_Position = currentPositionJittered;

`,g_t=`
vec2 oldPos = vPreviousPosition.xy;
    oldPos /= vPreviousPosition.w;
    oldPos.xy = (oldPos.xy+1.)/2.0;

vec2 newPos = vCurrentPosition.xy;
    newPos /= vCurrentPosition.w;
    newPos.xy = (newPos.xy+1.)/2.0;

vec2 velocity = (newPos - oldPos);

// Discard fully transparent pixels 
if (gl_FragColor.a <= 0.0) discard;

gVelocity = vec4(velocity, 0.0, 1.0);
`,y_t=`
layout(location = 1) out vec4 gVelocity;
`,x_t=`
    // Discard fully transparent pixels 
    if (gl_FragColor.a <= 0.0) discard;

    gVelocity = vec4(0.0, 0.0, 0.0, 1.0);
`,vre=["x","y","z","w"],b_t=["float","vec2","vec3","vec4"],w_t={float:"f",vec2:"v2",vec3:"v3",vec4:"v4",mat4:"v4",int:"i",bool:"b","float[]":"f[]","vec4[]":"v4[]"},__t={t:"sampler2D",tc:"samplerCube",b:"bool",i:"int",f:"float",c:"vec3",v2:"vec2",v3:"vec3",v4:"vec4",m3:"mat3",m4:"mat4","f[]":"float[]","v4[]":"vec4[]"},I1e=class{constructor(){this.includes={consts:{},functions:{},structs:{}},this.cache="",this.slot="",this.shader="",this.context={},this.needsJitter=!0,this.getIncludesCode=function(){function e(t,r){return t.deps.length-r.deps.length}return function(t,r){let i=this.getIncludes(t,r);if(!i)return"";let n="";i=i.sort(e);for(let a=0;a<i.length;a++)i[a].src&&(n+=i[a].src+`
`);return n}}(),this.slots=[],this.caches=[],this.contexts=[],this.keywords={},this.nodeData={},this.fragmentVariables={},this.fragmentParsVariables={},this.vertexParsVariables={},this.requires={uv:[],color:[],transparent:!1,irradiance:!1,position:!1,worldPosition:!1,normal:!1,worldNormal:!1,vWorldViewDir:!1,modelMatrix:!1,viewMatrix:!1,projectionMatrix:!1},this.includes={consts:[],functions:[],structs:[]},this.attributes={},this.prefixCode=["#ifdef TEXTURE_LOD_EXT","	#define texCube(a, b) textureCube(a, b)","	#define texCubeBias(a, b, c) textureCubeLodEXT(a, b, c)","	#define tex2D(a, b) texture2D(a, b)","	#define tex2DBias(a, b, c) texture2DLodEXT(a, b, c)","#else","	#define texCube(a, b) textureCube(a, b)","	#define texCubeBias(a, b, c) textureCube(a, b, c)","	#define tex2D(a, b) texture2D(a, b)","	#define tex2DBias(a, b, c) texture2D(a, b, c)","#endif",`
			// NOTE: Include Spline's blending modes. This could be part of BlendNode
			#define SPE_BLENDING_NORMAL 0
			#define SPE_BLENDING_MULTIPLY 1
			#define SPE_BLENDING_SCREEN 2
			#define SPE_BLENDING_OVERLAY 3

			vec3 spe_normalBlend( vec3 a, vec3 b, float alpha ) {
				return mix( a, b, alpha );
			}

			vec3 spe_multiplyBlend( vec3 a, vec3 b, float alpha ) {
				return mix( a, a * b, alpha );
			}

			vec3 spe_screenBlend( vec3 a, vec3 b, float alpha ) {
				vec3 tmp = 1.0 - ( 1.0 - a ) * ( 1.0 - b );
				return mix( a, tmp, alpha );
			}

			vec3 spe_overlayBlend( vec3 a, vec3 b, float alpha ) {
				vec3 tmp = mix( 1. - 2. * (1. - a) * (1. - b), 2. * a * b, step( a, vec3(.5) ) );
				return clamp( mix( a, tmp, alpha ), 0.0, 1.0 );
			}

			vec3 spe_blend( vec3 a, vec3 b, float alpha, int mode ) {
				if ( mode == SPE_BLENDING_NORMAL ) return spe_normalBlend( a, b, alpha );
				else if ( mode == SPE_BLENDING_MULTIPLY ) return spe_multiplyBlend( a, b, alpha );
				else if ( mode == SPE_BLENDING_SCREEN ) return spe_screenBlend( a, b, alpha );
				else if ( mode == SPE_BLENDING_OVERLAY ) return spe_overlayBlend( a, b, alpha );
				return vec3( 1.0 );
			}
			`,"#include <packing>","#include <common>"].join(`
`),this.parsCode={vertex:["float neighbor_offset = 0.0001;",""].join(`
`),fragment:["float accumAlpha = 0.0;",`void accumulateAlpha(float alpha) {
					accumAlpha += (1.0 - accumAlpha) * alpha;
				}`,""].join(`
`)},this.code={vertex:"",fragment:""},this.nodeCode={vertex:"",fragment:""},this.resultCode={vertex:"",fragment:""},this.finalCode={vertex:"",fragment:""},this.inputs={uniforms:{list:[],vertex:[],fragment:[]},arrayUniforms:{list:[],vertex:[],fragment:[]},vars:{varying:[],vertex:[],fragment:[]}},this.defines={},this.uniforms={},this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},this.updaters=[],this.nodes=[],this.analyzing=!1}build(e,t){this.addVertexParsCode(p_t),this.addFragmentParsCode(v_t),this.buildShader("vertex",e),this.buildShader("fragment",t);for(let r=0;r<this.requires.uv.length;r++)if(this.requires.uv[r]){let i=r>0?r+1:"";this.addVaryCode("varying vec2 vUv"+i+";"),r>0&&this.addVertexParsCode("attribute vec2 uv"+i+";"),this.addVertexFinalCode("vUv"+i+" = uv"+i+";")}return this.requires.color[0]&&(this.addVaryCode("varying vec4 vColor;"),this.addVertexParsCode("attribute vec4 color;"),this.addVertexFinalCode("vColor = color;")),this.requires.color[1]&&(this.addVaryCode("varying vec4 vColor2;"),this.addVertexParsCode("attribute vec4 color2;"),this.addVertexFinalCode("vColor2 = color2;")),this.requires.position&&(this.addVaryCode("varying vec3 vPosition;"),this.addVertexFinalCode("vPosition = transformed;")),this.requires.worldPosition,this.requires.normal&&(this.addVaryCode("varying vec3 vObjectNormal;"),this.addVertexFinalCode("vObjectNormal = normal;")),this.requires.modelMatrix&&this.addFragmentParsCode("uniform mat4 modelMatrix;"),this.requires.viewMatrix&&this.addFragmentParsCode("uniform mat4 viewMatrix;"),this.requires.projectionMatrix&&this.addFragmentParsCode("uniform mat4 projectionMatrix;"),this.requires.worldNormal&&(this.addVaryCode("varying vec3 vWNormal;"),this.addVertexFinalCode("vWNormal = inverseTransformDirection( transformedNormal, viewMatrix ).xyz;")),this.requires.vWorldViewDir&&(this.addVaryCode("varying vec3 vWorldViewDir;"),this.addVertexFinalCode("vWorldViewDir = isPerspectiveMatrix( projectionMatrix ) ?  ( (modelMatrix * vec4(position, 1.0)).xyz - cameraPosition ) : vec3( -viewMatrix[0][2], -viewMatrix[1][2], -viewMatrix[2][2] );")),this.needsJitter&&(this.addVertexFinalCode(m_t),this.addFragmentFinalCode(g_t)),this}buildShader(e,t){this.resultCode[e]=t.build(this.setShader(e),"v4")}setMaterial(e,t){return this.defines={},this}addFlow(e,t,r){return this.addSlot(e).addCache(t).addContext(r)}removeFlow(){return this.removeSlot().removeCache().removeContext()}addCache(e){return this.cache=e??"",this.caches.push(this.cache),this}removeCache(){return this.caches.pop(),this.cache=this.caches[this.caches.length-1]||"",this}addContext(e){return this.context=Object.assign({},this.context,e),this.context.extra=this.context.extra||{},this.contexts.push(this.context),this}removeContext(){return this.contexts.pop(),this.context=this.contexts[this.contexts.length-1]||{},this}addSlot(e){return this.slot=e||"",this.slots.push(this.slot),this}removeSlot(){return this.slots.pop(),this.slot=this.slots[this.slots.length-1]||"",this}addFragmentVariable(e,t){this.fragmentVariables[e]===void 0&&(this.addFragmentCode(`${t} ${e};`),this.fragmentVariables[e]="")}addFragmentParsVariable(e,t){this.fragmentParsVariables[e]===void 0&&(this.addFragmentParsCode(`${t} ${e};`),this.fragmentParsVariables[e]="")}addVertexParsVariable(e,t){this.vertexParsVariables[e]===void 0&&(this.addVertexParsCode(`${t} ${e};`),this.vertexParsVariables[e]="")}addVertexCode(e){this.addCode(e,"vertex")}addFragmentCode(e){this.addCode(e,"fragment")}addCode(e,t){this.code[t??this.shader]+=e+`
`}addVertexNodeCode(e){this.addNodeCode(e,"vertex")}addFragmentNodeCode(e){this.addNodeCode(e,"fragment")}addNodeCode(e,t){this.nodeCode[t??this.shader]+=e+`
`}clearNodeCode(e){e=e??this.shader;let t=this.nodeCode[e];return this.nodeCode[e]="",t}clearVertexNodeCode(){return this.clearNodeCode("vertex")}clearFragmentNodeCode(){return this.clearNodeCode("fragment")}addVertexFinalCode(e){this.addFinalCode(e,"vertex")}addFragmentFinalCode(e){this.addFinalCode(e,"fragment")}addFinalCode(e,t){this.finalCode[t??this.shader]+=e+`
`}addVertexParsCode(e){this.addParsCode(e,"vertex")}addFragmentParsCode(e){this.addParsCode(e,"fragment")}addParsCode(e,t){this.parsCode[t??this.shader]+=e+`
`}addVaryCode(e){this.addVertexParsCode(e),this.addFragmentParsCode(e)}isCache(e){return this.caches.indexOf(e)!==-1}isSlot(e){return this.slots.indexOf(e)!==-1}define(e,t){this.defines[e]=t===void 0?1:t}require(e){this.requires[e]=!0}isDefined(e){return this.defines[e]!==void 0}getVar(e,t,r,i="varying",n="V",a=""){let o=this.getVars(i),s=o[e];if(!s){let l=o.length;s={name:r||"node"+n+l+(a?"_"+a:""),type:t},o.push(s),o[e]=s}return s}getTempVar(e,t,r,i){return this.getVar(e,t,r,this.shader,"T",i)}getAttribute(e,t){if(!this.attributes[e]){let r=this.getVar(e,t);this.addVertexParsCode("attribute "+t+" "+e+";"),this.addVertexFinalCode(r.name+" = "+e+";"),this.attributes[e]={varying:r,name:e,type:t}}return this.attributes[e]}getCode(e){return[this.prefixCode,this.parsCode[e],this.getVarListCode(this.getVars("varying"),"varying"),this.getVarListCode(this.inputs.uniforms[e],"uniform"),this.getVarListCode(this.inputs.arrayUniforms[e],"uniform"),this.getIncludesCode("consts",e),this.getIncludesCode("structs",e),this.getIncludesCode("functions",e),"void main() {",this.getVarListCode(this.getVars(e)),this.code[e],this.resultCode[e],this.finalCode[e],"}"].join(`
`)}getVarListCode(e,t){t=t??"";let r="";for(let i=0,n=e.length;i<n;++i){let a=e[i],o=a.type,s=a.name,l=a.size,u=this.getFormatByType(o);if(u===void 0)throw new Error("Node pars "+u+" not found.");u.includes("[]")?r+=t+" "+u.substring(0,u.length-2)+" "+s+`[${l}];
`:r+=t+" "+u+" "+s+`;
`}return r}getVars(e){return this.inputs.vars[e??this.shader]}getNodeData(e){let t=e instanceof Yn?e.uuid:e;return this.nodeData[t]=this.nodeData[t]||{}}createUniform(e,t,r,i,n,a){if(t.includes("[]")){let o=this.inputs.arrayUniforms,s=o.list.length,l=new dre({type:t,size:r.size,name:i||"nodeUA"+s+(a?"_"+a:""),node:r,needsUpdate:n});return o.list.push(l),o[e].push(l),o[e][l.name]=l,this.uniforms[l.name]=l,l}else{let o=this.inputs.uniforms,s=o.list.length,l=new dre({type:t,name:i||"nodeU"+s+(a?"_"+a:""),node:r,needsUpdate:n});return o.list.push(l),o[e].push(l),o[e][l.name]=l,this.uniforms[l.name]=l,l}}createVertexUniform(e,t,r,i,n){return this.createUniform("vertex",e,t,r,i,n)}createFragmentUniform(e,t,r,i,n){return this.createUniform("fragment",e,t,r,i,n)}include(e,t,r){var a;let i;if(e=typeof e=="string"?gs.get(e):e,this.context.include===!1)return e.name;e instanceof ut?i=this.includes.functions:e instanceof di?i=this.includes.consts:e instanceof P1e&&(i=this.includes.structs);let n=i[this.shader]=i[this.shader]||[];if(e){let o=n[e.name];if(o||(o=n[e.name]={node:e,deps:[]},n.push(o),o.src=e.build(this,"source")),e instanceof ut&&t&&n[t.name]&&n[t.name].deps.indexOf(e)===-1&&(n[t.name].deps.push(e),(a=e.includes)==null?void 0:a.length)){let s=0;do this.include(e.includes[s++],t);while(s<e.includes.length)}return r&&(o.src=r),e.name}else throw new Error("Include not found.")}colorToVectorProperties(e){return e.replace("r","x").replace("g","y").replace("b","z").replace("a","w")}colorToVector(e){return e.replace(/c/g,"v3")}getIncludes(e,t){return this.includes[e][t||this.shader]}getConstructorFromLength(e){return b_t[e-1]}isTypeMatrix(e){return/^m/.test(e)}getTypeLength(e){return e==="f"?1:parseInt(this.colorToVector(e).substr(1))}getTypeFromLength(e){return e===1?"f":"v"+e}findNode(...e){for(let t=0;t<arguments.length;t++){let r=e[t];if(r!=null&&r.isNode)return r}}resolve(...e){for(let t=0;t<arguments.length;t++){let r=e[t];if(r!==void 0){if(r.isNode)return r;if(r.isTexture)switch(r.mapping){case jv:case Wv:return new f_t(r);case V4:return new d_t(new Zh(r));default:return new Zh(r)}else{if(r.isVector2)return new Oa(r);if(r.isVector3)return new vl(r);if(r.isVector4)return new Fh(r)}}}}format(e,t,r){switch(this.colorToVector(r+" <- "+t)){case"f <- v2":return e+".x";case"f <- v3":return e+".x";case"f <- v4":return e+".x";case"f <- i":case"f <- b":return"float( "+e+" )";case"v2 <- f":return"vec2( "+e+" )";case"v2 <- v3":return e+".xy";case"v2 <- v4":return e+".xy";case"v2 <- i":case"v2 <- b":return"vec2( float( "+e+" ) )";case"v3 <- f":return"vec3( "+e+" )";case"v3 <- v2":return"vec3( "+e+", 0.0 )";case"v3 <- v4":return e+".xyz";case"v3 <- i":case"v3 <- b":return"vec2( float( "+e+" ) )";case"v4 <- f":return"vec4( "+e+" )";case"v4 <- v2":return"vec4( "+e+", 0.0, 1.0 )";case"v4 <- v3":return"vec4( "+e+", 1.0 )";case"v4 <- i":case"v4 <- b":return"vec4( float( "+e+" ) )";case"i <- f":case"i <- b":return"int( "+e+" )";case"i <- v2":return"int( "+e+".x )";case"i <- v3":return"int( "+e+".x )";case"i <- v4":return"int( "+e+".x )";case"b <- f":return"( "+e+" != 0.0 )";case"b <- v2":return"( "+e+" != vec2( 0.0 ) )";case"b <- v3":return"( "+e+" != vec3( 0.0 ) )";case"b <- v4":return"( "+e+" != vec4( 0.0 ) )";case"b <- i":return"( "+e+" != 0 )"}return e}getTypeByFormat(e){return w_t[e]||e}getFormatByType(e){return __t[e]||e}getUUID(e,t){return t=t!==void 0?t:!0,t&&this.cache&&(e=this.cache+"-"+e),e}getElementByIndex(e){return vre[e]}getIndexByElement(e){return vre.indexOf(e)}isShader(e){return this.shader===e}setShader(e){return this.shader=e,this}mergeDefines(e){for(let t in e)this.defines[t]=e[t];return this.defines}mergeUniform(e){for(let t in e)this.uniforms[t]=e[t];return this.uniforms}getTextureEncodingFromMap(e){let t;return e?e.isTexture&&(t=e.encoding):t=ku,t===ku&&this.context.gamma&&(t=pr),t}},fn=class extends Ms{constructor(e=0,t,r,i){super("c"),this.nodeType="Color",this.value=e instanceof qa?e:new qa(e||0,t,r,i)}setRGBA(e){this.value.setRGBA(e.r,e.g,e.b,e.a)}generate(e,t,r,i,n,a){r=e.getUUID(r??this.getUUID()),i=i??this.getType(e);let o=e.getNodeData(r),s=this.getReadonly()&&this.generateReadonly!==void 0;if(this.alpha){let l=this.alpha.build(e,"f");e.addFragmentNodeCode(`accumAlpha += ( 1.0 - accumAlpha ) * ${l};`)}return s?this.generateReadonly(e,t,r,i,n,a):e.isShader("vertex")?(o.vertex||(o.vertex=e.createVertexUniform(i,this,n,a,this.getLabel())),e.format(o.vertex.name,i,t)):(o.fragment||(o.fragment=e.createFragmentUniform(i,this,n,a,this.getLabel())),e.format(o.fragment.name,i,t))}generateReadonly(e,t,r,i,n,a){return e.format("vec3("+this.value.r+", "+this.value.g+", "+this.value.b+")",i,t)}},ki=class extends Ms{constructor(e){super("i"),this.nodeType="Int",this.value=Math.floor(e??0)}generateReadonly(e,t,r,i,n,a){return e.format(this.value.toString(),i,t)}},Ho=class extends Ms{constructor(e){super("b"),this.nodeType="Bool",this.value=e??!1}generateReadonly(e,t,r,i){return e.format(this.value?"true":"false",i,t)}},D0=class extends Ms{constructor(e=1,t){super("f[]"),this.nodeType="FloatArray",this.size=e,this.value=Array.isArray(t)?t:typeof t=="number"?new Array(e).fill(t):new Array(e).fill(0)}},eH=class extends Ms{},A_t=class extends eH{constructor(e){super("v3"),this.image=e,this._value=new U}get value(){return this._value.x=this.image.isVideo?this.image.img.videoWidth??0:this.image.img.width,this._value.y=this.image.isVideo?this.image.img.videoHeight??0:this.image.img.height,this._value}},TO=class extends eH{constructor(e,t,r=1008,i=1006){super("t"),this.image=e,this.wrap=t,this.minFilter=r,this.magFilter=i}get value(){return this.image.getTexture(this.wrap,this.minFilter,this.magFilter)}},L1e=class extends Ms{constructor(e){super("m3"),this.nodeType="Matrix3",this.value=e??new Bn}generateReadonly(e,t,r,i,n,a){return e.format("mat3("+this.value.elements.join(", ")+")",i,t)}get elements(){return this.value.elements}set elements(e){this.value.fromArray(e)}},oh=class extends Ms{constructor(e){super("m4"),this.nodeType="Matrix4",this.value=e??new Ke}generateReadonly(e,t,r,i,n,a){return e.format("mat4("+this.value.elements.join(", ")+")",i,t)}get elements(){return this.value.elements}set elements(e){this.value.fromArray(e)}};function mre(e,t,r,i=0){e.setUvTransform(r[0],r[1],t[0],t[1],0,0,0).premultiply(new Bn().makeRotation(i*vt.DEG2RAD))}var S_t=class extends L1e{constructor(e,t,r=0){super(new Bn),this.repeat=e,this.offset=t,this.rotation=r,mre(this.value,e,t,r)}updateMatrix(){mre(this.value,this.repeat,this.offset,this.rotation)}},I0=class extends Ms{constructor(e=1,t){super("v4[]"),this.nodeType="Vector4Array",this.size=e,this.value=Array.isArray(t)?t:t instanceof er?new Array(e).fill(t):new Array(e).fill(new er(0))}},gre=class extends Ii{constructor(e,t,r,i){super("v3"),this.nodeType="Blend",this.a=e,this.b=t,this.alpha=r,this.mode=i}generate(e,t){if(e.isShader("fragment")){let r=[];return r.push(this.a.build(e,"c")),r.push(this.b.build(e,"c")),r.push(this.alpha.build(e,"f")),r.push(this.mode.build(e,"i")),e.format("spe_blend("+r.join(",")+")",this.getType(e),t)}else return console.warn("BlendNode is not compatible with "+e.shader+" shader."),e.format("vec3( 0.0 )",this.getType(e),t)}},k1e=class extends Ii{constructor(e,t){super("v3"),this.nodeType="CustomColor",this.color=e,this.alpha=t,this.calpha=`g${this.uuid.toString().replace(/-/g,"")}_calpha`}generate(e,t){if(e.isShader("fragment")){let r=e.include(k1e.Nodes.customColor);e.addFragmentVariable(this.calpha,"float");let i=[];return i.push(this.color.build(e,"v3")),i.push(this.mask?`luminance(${this.mask.build(e,"v3")})`:"1.0"),i.push(this.alpha.build(e,"f")),i.push(this.calpha),e.format(r+"("+i.join(",")+")",this.getType(e),t)}else return console.warn("CustomColorNode is not compatible with "+e.shader+" shader."),e.format("vec3( 0.0 )",this.getType(e),t)}},PO=k1e;PO.Nodes=function(){return{customColor:new ut(`vec3 customColor(vec3 color, float mask, float alpha, out float calpha) {
				float lalpha = alpha * mask;
				calpha =  lalpha / clamp(lalpha + accumAlpha, 0.00001, 1.0);
				accumAlpha += (1.0 - accumAlpha) * lalpha;

				return color;
			}`)}}();var R1e=class extends Ii{constructor(e,t){super("v3"),this.nodeType="CustomNormal",this.cnormal=e,this.alpha=t,this.calpha=`g${this.uuid.toString().replace(/-/g,"")}_calpha`}generate(e,t){if(e.isShader("fragment")){let r=e.include(R1e.Nodes.customNormal);e.addFragmentVariable(this.calpha,"float");let i=[];return i.push(this.cnormal.build(e,"v3")),i.push("normal"),i.push(this.mask?`luminance(${this.mask.flow(e,"v3").result})`:"1.0"),i.push(this.alpha.build(e,"f")),i.push(this.calpha),e.format(r+"("+i.join(",")+")",this.getType(e),t)}else return console.warn("CustomNormalNode is not compatible with "+e.shader+" shader."),e.format("vec3( 0.0 )",this.getType(e),t)}},O1e=R1e;O1e.Nodes=function(){return{customNormal:new ut(`vec3 customNormal(vec3 cnormal, vec3 norm, float mask, float alpha, out float calpha) {
				vec3 normal = packNormalToRGB( norm ).rgb;
				normal *= step( vec3(0.5), cnormal );

				float lalpha = alpha * mask;
				calpha =  lalpha / clamp( lalpha + accumAlpha, 0.00001, 1.0 );
				accumAlpha += ( 1.0 - accumAlpha ) * lalpha;

				return normal;
			}`)}}();var Xx=class extends Ii{constructor(e,t,r,i,n,a,o,s,l,u,c,h){super("v3"),this.nodeType="CustomTexture",this.texture=e,this.textureSize=t,this.crop=r,this.projection=i,this.axis=n,this.side=a,this.size=o,this.blending=s,this.mat=l,this.isMask=h,this.alpha=u,this.mode=c,this.calpha=`g${this.uuid.toString().replace(/-/g,"")}_calpha`}generate(e,t){e.require("position"),e.require("normal"),e.require("uv"),e.requires.uv=[!0],e.extensions.shaderTextureLOD=!0,e.extensions.derivatives=!0;let r=`g${this.uuid.toString().replace(/-/g,"")}`,i;switch(this.projection.value){case 3:i=e.include(Xx.Nodes.cylindrical);break;case 2:i=e.include(Xx.Nodes.spherical);break;case 1:let a=["vec3(1.0, 0.0, 0.0)","vec3(0.0, 1.0, 0.0)","vec3(0.0, 0.0, 1.0)"][this.axis.value],o=["zy","xz","xy"][this.axis.value],s=new ut(`
		vec3 ${r}_planarTexture(vec3 normal, sampler2D tex, vec2 textureSize, float crop, mat3 mat, vec2 size, float blending, bool isMask, float mask, float alpha, int mode, out float calpha, out vec2 writeUv) {
				vec2 projected = (1. + (position.${o})) / 2.;
				vec2 uvs = ( mat * vec3( (projected * 2. - 1.) / (size * .5), 1. ) / 2. + 0.5 ).xy;
				writeUv = uvs;

				vec4 tmp = texture2D( tex, uvs );

				vec3 col = tmp.rgb;
				float lalpha = alpha * tmp.a;
				${this.side.value===2?"":`lalpha *= step(0.0, ${this.side.value===1?"-1.0 * ":""}dot(vObjectNormal, ${a}));`}

				if ( crop > 0.5 ) {
					if ( uvs.x < 0.0 || uvs.x > 1.0 || uvs.y < 0.0 || uvs.y > 1.0 )  {
						lalpha = 0.0;
					}
				}
				
				lalpha *= mask;

				calpha =  lalpha / clamp( lalpha + accumAlpha, 0.00001, 1.0 );
				accumAlpha += (1.0 - accumAlpha) * lalpha * (1.0 - float(isMask));

				return col;
			}`);i=e.include(s);break;case 4:i=e.include(Xx.Nodes.triplanar);break;default:i=e.include(Xx.Nodes.uv);break}e.addFragmentVariable(this.calpha,"float");let n=[];if(n.push("normal"),n.push(this.texture.generate(e,"t")),n.push(this.textureSize.build(e,"v2")),n.push(this.crop.build(e,"f")),n.push(this.mat.build(e,"mat3")),n.push(this.size.build(e,"v2")),n.push(this.blending.build(e,"f")),n.push(this.isMask.build(e,"b")),n.push(this.mask?`luminance(${this.mask.flow(e,"v3").result})`:"1.0"),n.push(this.alpha.build(e,"f")),n.push(this.mode.build(e,"i")),n.push(this.calpha),this.projection.value===4){let a=`${r}_writeUvs`,o=a+"0",s=a+"1",l=a+"2",u=`${r}_triplanarWeights`;e.addFragmentVariable(o,"vec2"),e.addFragmentVariable(s,"vec2"),e.addFragmentVariable(l,"vec2"),e.addFragmentVariable(u,"vec3"),n.push(o),n.push(s),n.push(l),n.push(u)}else{let a=`${r}_writeUvs`;e.addFragmentVariable(a,"vec2"),n.push(a)}return e.format(i+"("+n.join(",")+")",this.getType(e),t)}},tH=Xx;tH.Nodes=function(){let e=new ut(`
vec3 cylindricalTexture(vec3 normal, sampler2D tex, vec2 textureSize, float crop, mat3 mat, vec2 size, float blending, bool isMask, float mask, float alpha, int mode, out float calpha, out vec2 writeUv) {
                vec3 posN = normalize(position);
                float u = 0.5 + atan(posN.z, posN.x) / (2.*3.1415);
                float scaledHeight = position.y / (size.y * 0.5);
                float v =  (scaledHeight / 2.) + .5;

                vec2 calculatedUv = vec2(u,v);
				vec2 uvs = ( mat * vec3( calculatedUv * 2. - 1., 1. ) / 2. + 0.5 ).xy;
				writeUv = uvs;

                vec2 df = fwidth(uvs);
               	if(df.x > 0.5) df.x = 0.;

				#ifdef GL_EXT_shader_texture_lod
                vec4 tmp = texture2DLodEXT(tex, uvs, log2(max(df.x, df.y)*min(textureSize.x, textureSize.y)));
				#else
                vec4 tmp = textureLod(tex, uvs, log2(max(df.x, df.y)*min(textureSize.x, textureSize.y)));
				#endif

				vec3 col = tmp.rgb;
				float lalpha = alpha * tmp.a;
				if ( crop > 0.5 ) {
					if ( uvs.x < 0.0 || uvs.x > 1.0 || uvs.y < 0.0 || uvs.y > 1.0 )  {
						lalpha = 0.0;
					}
				}

				lalpha *= mask;
				
				calpha =  lalpha / clamp( lalpha + accumAlpha, 0.00001, 1.0 );
				accumAlpha += (1.0 - accumAlpha) * lalpha * (1.0 - float(isMask));

				return col;
			}
`),t=new ut(`
vec3 sphericalTexture(vec3 normal, sampler2D tex, vec2 textureSize, float crop, mat3 mat, vec2 size, float blending, bool isMask, float mask, float alpha, int mode, out float calpha, out vec2 writeUv) {
                vec3 posN = normalize(vPosition);
                float u = 0.5 + atan(posN.z, posN.x) / (2.*3.1415);
                float v = 0.5 + asin(posN.y) / 3.1415;

                vec2 calculatedUv = vec2(u,v);
				vec2 uvs = ( mat * vec3( calculatedUv * 2. - 1., 1. ) / 2. + 0.5 ).xy;
				writeUv = uvs;

                vec2 df = fwidth(uvs);
               	if(df.x > 0.5) df.x = 0.;
				#ifdef GL_EXT_shader_texture_lod
                vec4 tmp = texture2DLodEXT(tex, uvs, log2(max(df.x, df.y)*min(textureSize.x, textureSize.y)));
				#else
                vec4 tmp = textureLod(tex, uvs, log2(max(df.x, df.y)*min(textureSize.x, textureSize.y)));
				#endif

				vec3 col = tmp.rgb;
				float lalpha = alpha * tmp.a;
				if ( crop > 0.5 ) {
					if ( uvs.x < 0.0 || uvs.x > 1.0 || uvs.y < 0.0 || uvs.y > 1.0 )  {
						lalpha = 0.0;
					}
				}

				lalpha *= mask;

				calpha =  lalpha / clamp( lalpha + accumAlpha, 0.00001, 1.0 );
				accumAlpha += (1.0 - accumAlpha) * lalpha * (1.0 - float(isMask));

				return col;
			}
`),r=new ut(`vec3 uvTexture(vec3 normal, sampler2D tex, vec2 textureSize, float crop, mat3 mat, vec2 size, float blending, bool isMask, float mask, float alpha, int mode, out float calpha, out vec2 writeUv) {
				vec2 uvs = ( mat * vec3( vUv * 2. - 1., 1. ) / 2. + 0.5 ).xy;
				writeUv = uvs;

				vec4 tmp = texture2D( tex, uvs );

				vec3 col = tmp.rgb;

				float lalpha = alpha * tmp.a;
				if ( crop > 0.5 ) {
					if ( uvs.x < 0.0 || uvs.x > 1.0 || uvs.y < 0.0 || uvs.y > 1.0 )  {
						lalpha = 0.0;
					}
				}
				
				lalpha *= mask;

				calpha =  lalpha / clamp( lalpha + accumAlpha, 0.00001, 1.0 );
				accumAlpha += (1.0 - accumAlpha) * lalpha * (1.0 - float(isMask));

				return col;
			}`),i=new ut(`vec3 triplanarTexture(vec3 normal, sampler2D tex, vec2 textureSize, float crop, mat3 mat, vec2 size, float blending, bool isMask, float mask, float alpha, int mode, out float calpha, out vec2 writeUvs0, out vec2 writeUvs1, out vec2 writeUvs2, out vec3 writeWeights) {
				vec3 p = position;
				vec2 uv0 = (1.0 + p.xy) / 2.0;     
				vec2 uv1 = (1.0 + p.zy) / 2.0;		
				vec2 uv2 = (1.0 + p.xz) / 2.0;		
	
				uv0 = (mat * vec3((uv0 * 2.0 - 1.0) / (size * 0.5), 1.0) / 2.0 + 0.5).xy;
				uv1 = (mat * vec3((uv1 * 2.0 - 1.0) / (size * 0.5), 1.0) / 2.0 + 0.5).xy;
				uv2 = (mat * vec3((uv2 * 2.0 - 1.0) / (size * 0.5), 1.0) / 2.0 + 0.5).xy;

				// Range from 3 to 128 seems to be good
				float exponent = (1.0 - blending) * 125.0 + 3.0;

				vec3 n = vObjectNormal;
				vec3 weights = abs(normalize(n));
				weights = pow(weights, vec3(exponent));
				weights /= dot(weights, vec3(1.0));

				// Write out all sets of UVs that we generated
				writeUvs0 = uv0;
				writeUvs1 = uv1;
				writeUvs2 = uv2;
				writeWeights = weights;

				// Derivatives for LOD
				vec2 df0 = fwidth(uv0);
				vec2 df1 = fwidth(uv1);
				vec2 df2 = fwidth(uv2);
				if (df0.x > 0.5) df0.x = 0.0;
				if (df1.x > 0.5) df1.x = 0.0;
				if (df2.x > 0.5) df2.x = 0.0;

				#ifdef GL_EXT_shader_texture_lod
                	vec4 tmp = 
						texture2DLodEXT(tex, uv0, log2(max(df0.x, df0.y)*min(textureSize.x, textureSize.y))) * weights.z + 
						texture2DLodEXT(tex, uv1, log2(max(df1.x, df1.y)*min(textureSize.x, textureSize.y))) * weights.x + 
						texture2DLodEXT(tex, uv2, log2(max(df2.x, df2.y)*min(textureSize.x, textureSize.y))) * weights.y;
				#else
                	vec4 tmp = 
						textureLod(tex, uv0, log2(max(df0.x, df0.y)*min(textureSize.x, textureSize.y))) * weights.z + 
						textureLod(tex, uv1, log2(max(df1.x, df1.y)*min(textureSize.x, textureSize.y))) * weights.x + 
						textureLod(tex, uv2, log2(max(df2.x, df2.y)*min(textureSize.x, textureSize.y))) * weights.y;
				#endif

				vec3 col = tmp.rgb;
				float lalpha = alpha * tmp.a;

				// Apply cropping across all 3 planes
				if ( crop > 0.5 ) {
					if ( uv0.x < 0.0 || uv0.x > 1.0 || uv0.y < 0.0 || uv0.y > 1.0 )  {
						lalpha = 0.0;
					}
					if ( uv1.x < 0.0 || uv1.x > 1.0 || uv1.y < 0.0 || uv1.y > 1.0 )  {
						lalpha = 0.0;
					}
					if ( uv2.x < 0.0 || uv2.x > 1.0 || uv2.y < 0.0 || uv2.y > 1.0 )  {
						lalpha = 0.0;
					}
				}

				lalpha *= mask;
				calpha =  lalpha / clamp(lalpha + accumAlpha, 0.00001, 1.0);
				accumAlpha += (1.0 - accumAlpha) * lalpha * (1.0 - float(isMask));

				return col;//n * 0.5 + 0.5;
			}			
			`);return{cylindrical:e,spherical:t,uv:r,triplanar:i}}();var Zx=class extends Ii{constructor(e,t,r,i,n,a,o,s,l,u,c,h){super("v3"),this.nodeType="Depth",this.gradientType=e,this.smooth=t,this.near=r,this.far=i,this.isVector=n,this.isWorldSpace=a,this.origin=o,this.direction=s,this.colors=l,this.steps=u,this.isMask=h,this.alpha=c,this.calpha=`g${this.uuid.toString().replace(/-/g,"")}_calpha`}generate(e,t){let r=`g${this.uuid.toString().replace(/-/g,"")}`,i=new ut(`vec3 ${r}_sdepth(float near, float far, vec3 origin, vec3 direction, vec4 colors[${r}_MAX_COLORS], float steps[${r}_MAX_COLORS], bool isMask, float mask, float alpha, out float calpha) {
               vec4 color = colors[0];
               #ifdef ${r}_IS_VECTOR
                   #ifdef ${r}_LINEAR
                       #ifdef ${r}_WORLDSPACE
                       float depth = vectorLinearWorldSpaceDepth(direction, origin, near, far);
                       #else
                       float depth = vectorLinearObjectSpaceDepth(direction, origin, near, far);
                       #endif
                   #else
                       #ifdef ${r}_WORLDSPACE
                           float depth = vectorSphericalWorldSpaceDepth(origin, near, far);
                       #else
                           float depth = vectorSphericalObjectSpaceDepth(origin, near, far);
                       #endif
                   #endif
               #else
                   float dist = length(vWPosition - cameraPosition);
			       float depth = ( dist - near ) / ( far - near );
               #endif


              float p;
              #ifdef ${r}_SMOOTH
				for ( int i = 1; i < ${r}_MAX_COLORS; i++ ) {
						p = clamp( ( depth - steps[i-1] ) / ( steps[i] - steps[i-1] ), 0.0, 1.0 );
						color = mix(color, colors[i], smoothstep(0.0, 1.0, p));
					}
              #else
                for ( int i = 1; i < ${r}_MAX_COLORS; i++ ) {
                   p = clamp(( depth - steps[i - 1] ) / ( steps[i] - steps[i - 1] ), 0.0, 1.0);
                   color = mix(color, colors[i], p);
                 }
              #endif

               float lalpha = alpha * color.a * mask;
               calpha = mix(lalpha / clamp(lalpha + accumAlpha, 0.00001, 1.0), lalpha, float(isMask));
			   accumAlpha += (1.0 - accumAlpha) * lalpha * (1.0 - float(isMask));
			   
               return color.rgb;
			}`,[Zx.Nodes.vectorLinearWorldSpaceDepth,Zx.Nodes.vectorLinearObjectSpaceDepth,Zx.Nodes.vectorSphericalObjectSpaceDepth,Zx.Nodes.vectorSphericalWorldSpaceDepth]);if(e.isShader("fragment")){e.define(`${r}_MAX_COLORS`,this.colors.value.length),this.smooth.value&&e.define(`${r}_SMOOTH`),this.isVector.value>.5&&e.define(`${r}_IS_VECTOR`),this.gradientType.value===0&&e.define(`${r}_LINEAR`),this.isWorldSpace.value>.5&&e.define(`${r}_WORLDSPACE`),e.require("worldPosition"),e.addFragmentVariable(this.calpha,"float");let n=e.include(i),a=[];return a.push(this.near.build(e,"f")),a.push(this.far.build(e,"f")),a.push(this.origin.build(e,"v3")),a.push(this.direction.build(e,"v3")),a.push(this.colors.build(e,"v4[]")),a.push(this.steps.build(e,"f[]")),a.push(this.isMask.build(e,"b")),a.push(this.mask?`luminance(${this.mask.flow(e,"v3").result})`:"1.0"),a.push(this.alpha.build(e,"f")),a.push(this.calpha),e.format(n+"("+a.join(",")+")",this.getType(e),t)}else return console.warn("DepthNode is not compatible with "+e.shader+" shader."),e.format("vec3( 0.0 )",this.getType(e),t)}},B1e=Zx;B1e.Nodes=function(){let e=new ut(`float vectorLinearWorldSpaceDepth(vec3 direction, vec3 origin, float near, float far) {
               vec3 n = normalize(direction);
               float dist = (n.x*(vWPosition.x - origin.x) + n.y*(vWPosition.y - origin.y) + n.z*(vWPosition.z - origin.z));
               return ( dist - near ) / ( far - near );
            }`),t=new ut(`float vectorLinearObjectSpaceDepth(vec3 direction, vec3 origin, float near, float far) {
               vec3 n = normalize(direction);
               float dist = (n.x*(position.x - origin.x) + n.y*(position.y - origin.y) + n.z*(position.z - origin.z));
               return ( dist - near ) / ( far - near );
            }`),r=new ut(`float vectorSphericalWorldSpaceDepth(vec3 origin, float near, float far) {
               float dist = length(vWPosition - origin);
               return ( dist - near ) / ( far - near );
            }`),i=new ut(`float vectorSphericalObjectSpaceDepth(vec3 origin, float near, float far) {
               float dist = length(position - origin);
               return ( dist - near ) / ( far - near );
            }`);return{vectorLinearWorldSpaceDepth:e,vectorLinearObjectSpaceDepth:t,vectorSphericalWorldSpaceDepth:r,vectorSphericalObjectSpaceDepth:i}}();var C_t=class extends Ii{constructor(e,t,r,i,n,a,o,s){super("v3"),this.nodeType="Fresnel",this.color=e,this.bias=t,this.scale=r,this.intensity=i,this.factor=n,this.isMask=s,this.alpha=a,this.mode=o,this.calpha=`g${this.uuid.toString().replace(/-/g,"")}_calpha`}generate(e,t){if(e.require("vWorldViewDir"),e.require("worldNormal"),e.isShader("fragment")){e.addFragmentVariable(this.calpha,"float");let r=new ut(`vec3 fresnel(vec3 color, float bias, float scale, float intensity, float factor, bool isMask, float mask, float alpha, int mode, out float calpha) {
					float fresnel = bias + scale * pow( abs( factor + dot( normalize( vWorldViewDir ), normalize( vWNormal ) ) ), intensity );

					float lalpha = clamp(fresnel, 0.0, 1.0) * alpha * mask;
					calpha = mix(lalpha / clamp(lalpha + accumAlpha, 0.00001, 1.0), lalpha, float(isMask));
					accumAlpha += (1.0 - accumAlpha) * lalpha * (1.0 - float(isMask));

					return color;
				}`),i=e.include(r),n=[];return n.push(this.color.build(e,"c")),n.push(this.bias.build(e,"f")),n.push(this.scale.build(e,"f")),n.push(this.intensity.build(e,"f")),n.push(this.factor.build(e,"f")),n.push(this.isMask.build(e,"b")),n.push(this.mask?`luminance(${this.mask.flow(e,"v3").result})`:"1.0"),n.push(this.alpha.build(e,"f")),n.push(this.mode.build(e,"i")),n.push(this.calpha),e.format(i+"("+n.join(",")+")",this.getType(e),t)}else return console.warn("FresnelNode is not compatible with "+e.shader+" shader."),e.format("vec3( 0.0 )",this.getType(e),t)}},N1e=class extends Ii{constructor(e,t,r,i,n,a,o,s,l){super("v3"),this.nodeType="Gradient",this.gradientType=e,this.smooth=t,this.colors=r,this.steps=i,this.offset=n,this.morph=a,this.angle=o,this.isMask=l,this.alpha=s,this.calpha=`g${this.uuid.toString().replace(/-/g,"")}_calpha`}generate(e,t){if(e.isShader("fragment")){e.define("GRAD_MAX",10),e.require("uv"),e.requires.uv=[!0],e.addFragmentVariable(this.calpha,"float");let r=e.include(N1e.Nodes.gradient),i=[];return i.push(this.gradientType.build(e,"i")),i.push(this.smooth.build(e,"b")),i.push(this.colors.build(e,"v4[]")),i.push(this.steps.build(e,"f[]")),i.push(this.offset.build(e,"v2")),i.push(this.morph.build(e,"v2")),i.push(this.angle.build(e,"f")),i.push(this.isMask.build(e,"b")),i.push(this.mask?`luminance(${this.mask.flow(e,"v3").result})`:"1.0"),i.push(this.alpha.build(e,"f")),i.push(this.calpha),e.format(r+"("+i.join(",")+")",this.getType(e),t)}else return console.warn("GradientNode is not compatible with "+e.shader+" shader."),e.format("vec3( 0.0 )",this.getType(e),t)}},V1e=N1e;V1e.Nodes=function(){return{gradient:new ut(`vec3 gradient(int gradientType, bool smoothed, vec4 colors[GRAD_MAX], float steps[GRAD_MAX], vec2 offset, vec2 morph, float angle, bool isMask, float mask, float alpha, out float calpha) {
				vec4 color = colors[0];
				vec2 m = morph / vUv.xy;
				vec2 rot = vec2( 0.5 + m.x, m.y );
				vec2 dt = vec2(
					cos( angle ) * rot.x - sin( angle ) * rot.y,
					sin( angle ) * rot.x + cos( angle ) * rot.y
				);
				vec2 pt = ( vUv - 0.5 + offset ) / 2.0 + dt / 2.0;
				float t = dot( pt, dt ) / dot( dt, dt );
				if ( gradientType == 1 ) {
					t = distance (
						( vUv + morph ) * 3.0,
						( vUv + offset ) + 1.0
					) + angle;
				} else if ( gradientType == 2 ) {
					float polar = atan(
						vUv.x + morph.x - 0.5 + offset.x,
						vUv.y + morph.y - 0.5 + offset.y
					) * -1.0;
					t = fract( ( angle / PI / -2.0 ) + 0.5 * ( polar / PI ) );
				}

				float p;
				if (smoothed) {
					for ( int i = 1; i < GRAD_MAX; i++ ) {
						p = clamp( ( t - steps[i-1] ) / ( steps[i] - steps[i-1] ), 0.0, 1.0 );
						color = mix(color, colors[i], smoothstep(0.0, 1.0, p));
					}

				} else {
					for ( int i = 1; i < GRAD_MAX; i++ ) {
						p = clamp( ( t - steps[i-1] ) / ( steps[i] - steps[i-1] ), 0.0, 1.0 );
						color = mix(color, colors[i], p);
					}
				}

				float lalpha = alpha * color.a * mask;
				calpha = mix(lalpha / clamp(lalpha + accumAlpha, 0.00001, 1.0), lalpha, float(isMask));
				accumAlpha += (1.0 - accumAlpha) * lalpha * (1.0 - float(isMask));
				
				return color.xyz;
			}`)}}();var F1e=class extends Ii{constructor(e,t,r,i,n){super("v3"),this.nodeType="Matcap",this.texture=e,this.isMask=i,this.alpha=t,this.mode=r,this.calpha=`g${this.uuid.toString().replace(/-/g,"")}_calpha`,this.rotation=n}generate(e,t){if(e.isShader("fragment")){e.addFragmentVariable(this.calpha,"float");let r=e.include(F1e.Nodes.matcap);e.require("normal"),e.requires.normal=!0;let i=[];return i.push(this.texture.generate(e,"t")),i.push("normal"),i.push(this.isMask.build(e,"b")),i.push(this.mask?`luminance(${this.mask.flow(e,"v3").result})`:"1.0"),i.push(this.alpha.build(e,"f")),i.push(this.mode.build(e,"i")),i.push(this.calpha),i.push(this.rotation.build(e,"f")),e.format(r+"("+i.join(",")+")",this.getType(e),t)}else return console.warn("MatcapNode is not compatible with "+e.shader+" shader."),e.format("vec3( 0.0 )",this.getType(e),t)}},z1e=F1e;z1e.Nodes=function(){return{matcap:new ut(`vec3 matcap(sampler2D matcapTex, vec3 normal, bool isMask, float mask, float alpha, int mode, out float calpha, float rotation) {
					vec3 viewDir = normalize( vViewPosition );
					vec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );
					vec3 y = cross( viewDir, x );
					vec2 uv = vec2( dot( x, normal ), dot( y, normal ) );
					uv = mat2( cos(rotation), sin(rotation), -sin(rotation), cos(rotation) ) * uv;
					uv = uv * 0.495 + 0.5;
					vec4 matcapColor = texture2D( matcapTex, uv );

					float lalpha = alpha * mask;
					calpha = mix(lalpha / clamp(lalpha + accumAlpha, 0.00001, 1.0), lalpha, float(isMask));
					accumAlpha += (1.0 - accumAlpha) * lalpha * (1.0 - float(isMask));
					
					return matcapColor.rgb;
            	}`)}}();var ds=function(){let e=new ut(`vec3 random3(vec3 c) {
			float j = 4096.0*sin(dot(c,vec3(17.0, 59.4, 15.0)));
			vec3 r;
			r.z = fract(512.0*j);
			j *= .125;
			r.x = fract(512.0*j);
			j *= .125;
			r.y = fract(512.0*j);
			return r-0.5;
		}`),t=new ut(`float simplexFast(vec3 p) {
			 vec3 s = floor(p + dot(p, vec3(F3)));
			 mediump vec3 x = p - s + dot(s, vec3(G3));
			 mediump vec3 hs = s;
			 
			 mediump vec3 e = step(vec3(0.0), x - x.yzx);
			 mediump vec3 i1 = e*(1.0 - e.zxy);
			 mediump vec3 i2 = 1.0 - e.zxy*(1.0 - e);
				
			 mediump vec3 x1 = x - i1 + G3;
			 mediump vec3 x2 = x - i2 + 2.0*G3;
			 mediump vec3 x3 = x - 1.0 + 3.0*G3;
			 
			 mediump vec4 w, d;
			 
			 w.x = dot(x, x);
			 w.y = dot(x1, x1);
			 w.z = dot(x2, x2);
			 w.w = dot(x3, x3);
			 
			 w = max(0.6 - w, 0.0);
			 
			 d.x = dot(random3(hs), x);
			 d.y = dot(random3(hs + i1), x1);
			 d.z = dot(random3(hs + i2), x2);
			 d.w = dot(random3(hs + 1.0), x3);
			 
			 w *= w;
			 w *= w;
			 d *= w;
			 
			 return dot(d, vec4(52.0));
		}`,[e]);t.keywords.F3=new di("float F3 0.3333333"),t.keywords.G3=new di("float G3 0.1666667");let r=new ut(`float simplexPrecise(vec3 p) {
			 vec3 s = floor(p + dot(p, vec3(F3)));
			 vec3 x = p - s + dot(s, vec3(G3));
			 
			 vec3 e = step(vec3(0.0), x - x.yzx);
			 vec3 i1 = e*(1.0 - e.zxy);
			 vec3 i2 = 1.0 - e.zxy*(1.0 - e);
				
			 vec3 x1 = x - i1 + G3;
			 vec3 x2 = x - i2 + 2.0*G3;
			 vec3 x3 = x - 1.0 + 3.0*G3;
			 
			 vec4 w, d;
			 
			 w.x = dot(x, x);
			 w.y = dot(x1, x1);
			 w.z = dot(x2, x2);
			 w.w = dot(x3, x3);
			 
			 w = max(0.6 - w, 0.0);
			 
			 d.x = dot(random3(s), x);
			 d.y = dot(random3(s + i1), x1);
			 d.z = dot(random3(s + i2), x2);
			 d.w = dot(random3(s + 1.0), x3);
			 
			 w *= w;
			 w *= w;
			 d *= w;
			 
			 return dot(d, vec4(52.0));
		}`,[e]);r.keywords.F3=new di("float F3 0.3333333"),r.keywords.G3=new di("float G3 0.1666667");let i=new ut(`float simplexFractal(vec3 m) {
			mat3 rot1 = mat3(-0.37, 0.36, 0.85,-0.14,-0.93, 0.34,0.92, 0.01,0.4);
			mat3 rot2 = mat3(-0.55,-0.39, 0.74, 0.33,-0.91,-0.24,0.77, 0.12,0.63);
			mat3 rot3 = mat3(-0.71, 0.52,-0.47,-0.08,-0.72,-0.68,-0.7,-0.45,0.56);
			return 0.5333333 * simplexFast(m * rot1)
				 + 0.2666667 * simplexFast(2.0 * m * rot2)
				 + 0.1333333 * simplexFast(4.0 * m * rot3)
				 + 0.0666667 * simplexFast(8.0 * m);
		}`,[t]),n=new ut("vec4 permute(vec4 x){return mod(((x*34.0)+1.0)*x, 289.0);}"),a=new ut("vec4 taylorInvSqrt(vec4 r){return 1.79284291400159 - 0.85373472095314 * r;}"),o=new ut(`float simplexAshima(vec3 v) {
		  const vec2  C = vec2(1.0/6.0, 1.0/3.0) ;
		  const vec4  D = vec4(0.0, 0.5, 1.0, 2.0);
		  vec3 i  = floor(v + dot(v, C.yyy) );
		  vec3 x0 =   v - i + dot(i, C.xxx) ;
		  vec3 g = step(x0.yzx, x0.xyz);
		  vec3 l = 1.0 - g;
		  vec3 i1 = min( g.xyz, l.zxy );
		  vec3 i2 = max( g.xyz, l.zxy );
		  vec3 x1 = x0 - i1 + 1.0 * C.xxx;
		  vec3 x2 = x0 - i2 + 2.0 * C.xxx;
		  vec3 x3 = x0 - 1. + 3.0 * C.xxx;
		  i = mod(i, 289.0 ); 
		  vec4 p = permute( permute( permute( 
					 i.z + vec4(0.0, i1.z, i2.z, 1.0 ))
				   + i.y + vec4(0.0, i1.y, i2.y, 1.0 )) 
				   + i.x + vec4(0.0, i1.x, i2.x, 1.0 ));
		  float n_ = 1.0/7.0; // N=7
		  vec3  ns = n_ * D.wyz - D.xzx;
		  vec4 j = p - 49.0 * floor(p * ns.z *ns.z);  //  mod(p,N*N)
		  vec4 x_ = floor(j * ns.z);
		  vec4 y_ = floor(j - 7.0 * x_ );    // mod(j,N)
		  vec4 x = x_ *ns.x + ns.yyyy;
		  vec4 y = y_ *ns.x + ns.yyyy;
		  vec4 h = 1.0 - abs(x) - abs(y);
		  vec4 b0 = vec4( x.xy, y.xy );
		  vec4 b1 = vec4( x.zw, y.zw );
		  vec4 s0 = floor(b0)*2.0 + 1.0;
		  vec4 s1 = floor(b1)*2.0 + 1.0;
		  vec4 sh = -step(h, vec4(0.0));
		  vec4 a0 = b0.xzyw + s0.xzyw*sh.xxyy ;
		  vec4 a1 = b1.xzyw + s1.xzyw*sh.zzww ;
		  vec3 p0 = vec3(a0.xy,h.x);
		  vec3 p1 = vec3(a0.zw,h.y);
		  vec3 p2 = vec3(a1.xy,h.z);
		  vec3 p3 = vec3(a1.zw,h.w);
		  vec4 norm = taylorInvSqrt(vec4(dot(p0,p0), dot(p1,p1), dot(p2, p2), dot(p3,p3)));
		  p0 *= norm.x;
		  p1 *= norm.y;
		  p2 *= norm.z;
		  p3 *= norm.w;
		  vec4 m = max(0.6 - vec4(dot(x0,x0), dot(x1,x1), dot(x2,x2), dot(x3,x3)), 0.0);
		  m = m * m;
		  return 42.0 * dot( m*m, vec4( dot(p0,x0), dot(p1,x1), 
										dot(p2,x2), dot(p3,x3) ) );
		}`,[n,a]),s=new ut("vec4 mod289(vec4 x){return x - floor(x * (1.0 / 289.0)) * 289.0;}"),l=new ut("vec4 perm(vec4 x){return mod289(((x * 34.0) + 1.0) * x);}",[s]),u=new ut(`float noise(vec3 p){
			vec3 a = floor(p);
			vec3 d = p - a;
			d = d * d * (3.0 - 2.0 * d);
			vec4 b = a.xxyy + vec4(0.0, 1.0, 0.0, 1.0);
			vec4 k1 = perm(b.xyxy);
			vec4 k2 = perm(k1.xyxy + b.zzww);
			vec4 c = k2 + a.zzzz;
			vec4 k3 = perm(c);
			vec4 k4 = perm(c + 1.0);
			vec4 o1 = fract(k3 * (1.0 / 41.0));
			vec4 o2 = fract(k4 * (1.0 / 41.0));
			vec4 o3 = o2 * d.z + o1 * (1.0 - d.z);
			vec2 o4 = o3.yw * d.x + o3.xz * (1.0 - d.x);
			return o4.y * d.y + o4.x * (1.0 - d.y);
		}`,[l]),c=new ut(`float fbm(vec3 x) {
			float v = 0.0;
			float a = 0.5;
			vec3 shift = vec3(100);
			for (int i = 0; i < NUM_OCTAVES; ++i) {
				v += a * noise(x);
				x = x * 2.0 + shift;
				a *= 0.5;
			}
			return v;
		}`,[u]);c.keywords.NUM_OCTAVES=new di("int NUM_OCTAVES 5");let h=new ut("vec3 fade(vec3 t) {return t*t*t*(t*(t*6.0-15.0)+10.0);}"),d=new ut(`float perlin(vec3 P){
		  vec3 Pi0 = floor(P);
		  vec3 Pi1 = Pi0 + vec3(1.0);
		  Pi0 = mod(Pi0, 289.0);
		  Pi1 = mod(Pi1, 289.0);
		  vec3 Pf0 = fract(P);
		  vec3 Pf1 = Pf0 - vec3(1.0);
		  vec4 ix = vec4(Pi0.x, Pi1.x, Pi0.x, Pi1.x);
		  vec4 iy = vec4(Pi0.yy, Pi1.yy);
		  vec4 iz0 = Pi0.zzzz;
		  vec4 iz1 = Pi1.zzzz;
		  vec4 ixy = permute(permute(ix) + iy);
		  vec4 ixy0 = permute(ixy + iz0);
		  vec4 ixy1 = permute(ixy + iz1);
		  vec4 gx0 = ixy0 / 7.0;
		  vec4 gy0 = fract(floor(gx0) / 7.0) - 0.5;
		  gx0 = fract(gx0);
		  vec4 gz0 = vec4(0.5) - abs(gx0) - abs(gy0);
		  vec4 sz0 = step(gz0, vec4(0.0));
		  gx0 -= sz0 * (step(0.0, gx0) - 0.5);
		  gy0 -= sz0 * (step(0.0, gy0) - 0.5);
		  vec4 gx1 = ixy1 / 7.0;
		  vec4 gy1 = fract(floor(gx1) / 7.0) - 0.5;
		  gx1 = fract(gx1);
		  vec4 gz1 = vec4(0.5) - abs(gx1) - abs(gy1);
		  vec4 sz1 = step(gz1, vec4(0.0));
		  gx1 -= sz1 * (step(0.0, gx1) - 0.5);
		  gy1 -= sz1 * (step(0.0, gy1) - 0.5);
		  vec3 g000 = vec3(gx0.x,gy0.x,gz0.x);
		  vec3 g100 = vec3(gx0.y,gy0.y,gz0.y);
		  vec3 g010 = vec3(gx0.z,gy0.z,gz0.z);
		  vec3 g110 = vec3(gx0.w,gy0.w,gz0.w);
		  vec3 g001 = vec3(gx1.x,gy1.x,gz1.x);
		  vec3 g101 = vec3(gx1.y,gy1.y,gz1.y);
		  vec3 g011 = vec3(gx1.z,gy1.z,gz1.z);
		  vec3 g111 = vec3(gx1.w,gy1.w,gz1.w);
		  vec4 norm0 = taylorInvSqrt(vec4(dot(g000, g000), dot(g010, g010), dot(g100, g100), dot(g110, g110)));
		  g000 *= norm0.x;
		  g010 *= norm0.y;
		  g100 *= norm0.z;
		  g110 *= norm0.w;
		  vec4 norm1 = taylorInvSqrt(vec4(dot(g001, g001), dot(g011, g011), dot(g101, g101), dot(g111, g111)));
		  g001 *= norm1.x;
		  g011 *= norm1.y;
		  g101 *= norm1.z;
		  g111 *= norm1.w;
		  float n000 = dot(g000, Pf0);
		  float n100 = dot(g100, vec3(Pf1.x, Pf0.yz));
		  float n010 = dot(g010, vec3(Pf0.x, Pf1.y, Pf0.z));
		  float n110 = dot(g110, vec3(Pf1.xy, Pf0.z));
		  float n001 = dot(g001, vec3(Pf0.xy, Pf1.z));
		  float n101 = dot(g101, vec3(Pf1.x, Pf0.y, Pf1.z));
		  float n011 = dot(g011, vec3(Pf0.x, Pf1.yz));
		  float n111 = dot(g111, Pf1);
		  vec3 fade_xyz = fade(Pf0);
		  vec4 n_z = mix(vec4(n000, n100, n010, n110), vec4(n001, n101, n011, n111), fade_xyz.z);
		  vec2 n_yz = mix(n_z.xy, n_z.zw, fade_xyz.y);
		  float n_xyz = mix(n_yz.x, n_yz.y, fade_xyz.x); 
		  return 2.2 * n_xyz;
		}`,[n,a,h]),f=new ut(`float hashwithoutsine13(vec3 p3)
		{
			p3  = fract(p3 * .1031);
			p3 += dot(p3, p3.yzx + 33.33);
			return fract((p3.x + p3.y) * p3.z);
		}`),p=new ut(`vec3 hashwithoutsine33(vec3 p3)
		{
			p3 = fract(p3 * vec3(.1031, .1030, .0973));
			p3 += dot(p3, p3.yxz+33.33);
			return fract((p3.xxy + p3.yxx)*p3.zyx);
		}`),v=new ut(`float metric(in vec3 p)
		{
			// L2 
			return length(p);

			// Chebyshev 
			// vec3 a = abs(p);
			// return max(a.x, max(a.y, a.z));
		}`),m=new ut(`float smin( float a, float b, float k )
		{
			float h = smoothstep(0.0, 1.0, 0.5 + 0.5 * (b - a) / k);
			float correction = k * h * (1.0 - h);
			return mix(b, a, h) - correction;
		}`),g=new ut(`float smax( float a, float b, float k )
		{
			float h = smoothstep(1.0, 0.0, 0.5 + 0.5 * (a - b) / k);
			float correction = k * h * (1.0 - h);
			return mix(a, b, h) + correction;
		}`),y=new ut(`float remap(float value, float input_min, float input_max, float output_min, float output_max) {
			// Compute width of each interval
			float input_width = input_max - input_min;
			float output_width = output_max - output_min;
		
			// Convert input range into a 0-1 range 
			float scaled = (value - input_min) / input_width;
		
			// Convert the 0-1 range into a value in output range
			return output_min + (scaled * output_width);
		}`),x=new ut(`float voronoi(in vec3 x, in int style, in float smoothness, in float seed, in int quality) 
		{
			// Integer and fractional parts of this point's coordinates
			ivec3 p = ivec3(floor(x));
			vec3 f = fract(x);

			// Different variables that we will use to construct noise:
			//
			// f1: distance to the closest feature point
			// f2: distance to the second closest feature point
			// e: distance to the closest edge (cell boundary)
			//
			// We also compute "smooth" versions of all of the above quantites, essentially
			// replacing "hard" minimums with "smooth" minimums (described by IQ)
			float f1_smooth = 8.0;
			float f1 = 8.0;
			float f2_smooth = 8.0;
			float f2 = 8.0;
			float e_smooth = 8.0;
			float e = 8.0;

			// Variables stored from closest cell
			ivec3 mb;
			vec3 mr; 

			int steps = quality;
			
			for (int x = -steps; x <= steps; x++) 
			for (int y = -steps; y <= steps; y++)
			for (int z = -steps; z <= steps; z++)
			{
				ivec3 b = ivec3(x, y, z);
				vec3 r = vec3(b) + hashwithoutsine33(vec3(p + b) + seed) - f;
				float d = length(r);
				
				f1_smooth = smin(d, f1_smooth, smoothness);

				// Store un-smoothed distances too 
				if (d < f1) 
				{
					f2 = f1;
					f1 = d;

					mb = ivec3(x, y, z);
					mr = r;
				} 
				else if (d < f2) 
				{
					f2 = d;
				}
			}	
			
			// Second pass for edge distance  
			// skip for styles don't need
			if (style != 0 &&  style != 5 && style != 7)
			for (int x = -steps; x <= steps; x++) 
			for (int y = -steps; y <= steps; y++)
			for (int z = -steps; z <= steps; z++)
			{
				// Start search at the cell that contains the closest point to "x" (found in 1st pass)
				ivec3 b = mb + ivec3(x, y, z);
				vec3 r = vec3(b) + hashwithoutsine33(vec3(p + b) + seed) - f;
				float d1 = dot(0.5 * (mr + r), (r - mr)); 				// IQ normalizes "r - mr" but that breaks things for the smooth version?
				float d2 = dot(0.5 * (mr + r), normalize(r - mr));

				e_smooth = smin(d1, e_smooth, smoothness);

				e = min(e, d2);

				// Also compute a smooth version of F2 in this pass
				{
					ivec3 b = ivec3(x, y, z);
					if (b != mb) 
					{
						vec3 r = vec3(b) + hashwithoutsine33(vec3(p + b) + seed) - f;
						float d = length(r);

						f2_smooth = smin(d, f2_smooth, smoothness);
					}
				}
			}

			// Different visualization modes 
			if (style == 0) 
			{
				return f1_smooth;
			}
			if (style == 1) 
			{
				return f2_smooth;
			}
			if (style == 2) 
			{
				return f2_smooth - f1_smooth;
				
				// "Pebbles" also cool
				//return step(0.2, f2_smooth - f1_smooth);
			}
			if (style == 3) 
			{
				// This one is really good for rock / stone effects
				float a = f1; 
				float b = f2;
				float k = 3.0;
				float h = max(k - abs(a - b), 0.0) / k;
				float final = min(a, b) - h * h * k * (1.0 / 4.0);
				return final;
			}
			if (style == 4) 
			{
				// Some random adjustments to make this style stand out more 
				return exp(5.0 * e_smooth);
			}
			if (style == 5) 
			{
				return pow(f1_smooth, 3.0);
			}
			if (style == 6) 
			{				
				const float eps = 0.0125;

				// Thicker lines as the user increases the smoothness slider
				float thickness = smoothness * 0.25 + eps;

				// Blurrier lines as the user increases the smoothness slider
				float blur = pow(smoothness, 3.0) * 0.25 + eps;

				return smoothstep(
					thickness - thickness * blur, 
					thickness + thickness * blur, 
					e
				);
			}
			if (style == 7) 
			{
				return hashwithoutsine13(vec3(p + mb) + seed);
			}
		}
	`,[f,p,v,m,g,y]);return{simplexFast:t,simplexPrecise:r,simplexFractal:i,simplexAshima:o,fbm:c,perlin:d,voronoi:x}}(),H1e=class extends Ii{constructor(e,t,r,i,n,a,o,s,l,u,c,h,d,f,p,v,m,g,y){super("v3"),this.nodeType="Noise",this.scale=e,this.size=t,this.move=r,this.fA=i,this.fB=n,this.distortion=a,this.colorA=o,this.colorB=s,this.colorC=l,this.colorD=u,this.noiseType=h,this.voronoiStyle=f,this.highCut=p,this.lowCut=v,this.smoothness=m,this.seed=g,this.quality=y,this.isMask=d,this.alpha=c,this.calpha=`g${this.uuid.toString().replace(/-/g,"")}_calpha`}generate(e,t,r,i,n){e.require("uv"),e.requires.uv=[!0],e.addFragmentVariable(this.calpha,"float");let a=["simplexFast","simplexFractal","simplexAshima","fbm","perlin","voronoi"][this.noiseType.value],o=a=="voronoi"?`
		float v = ${a}(st + move, voronoiStyle, smoothness, seed, quality);

		// Apply clipping to colors
		v = remap(v, lowCut, highCut, 0.0, 1.0);
		v = smax(v, 0.0, smoothness * 0.25);
		v = smin(v, 1.0, smoothness * 0.25);

		// Note that the voronoi mode only uses colors "A" and "C" from the UI 
		vec4 color = mix(colorA, colorC, v); 
		`:`
		vec3 q = vec3(${a}(st),
					   ${a}(st + vec3(1.0)),
					   ${a}(st + vec3(1.0)));
		vec3 r = vec3(${a}(st + vec3(distortion, 1.0) * q + vec3(fA, 1.0) + move),
					  ${a}(st + vec3(distortion, 1.0) * q + vec3(fB, 1.0) + move), 
					  ${a}(st * q));
		float f = ${a}(st + r);
		vec4 color;
		color = mix(colorA, colorB, clamp((f * f) * 4.0, 0.0, 1.0));
		color = mix(color, colorC, clamp(length(q), 0.0, 1.0));
		color = mix(color, colorD, clamp(length(r.x), 0.0, 1.0));
		`,s=new ut(`vec3 ${a}customNoise(float scale, vec3 size, float move, vec2 fA, vec2 fB, vec2 distortion, vec4 colorA, vec4 colorB, vec4 colorC, vec4 colorD, int voronoiStyle, float highCut, float lowCut, float smoothness, float seed, int quality, bool isMask, float mask, float alpha, out float calpha) 
			{
                // Prevent scale of zero 
				scale = max(abs(scale), 0.001);

				vec3 st = position / size;
				st /= scale;

				${o}

				float lalpha = alpha * color.a * mask;
				calpha = mix(lalpha / clamp(lalpha + accumAlpha, 0.00001, 1.0), lalpha, float(isMask));
				accumAlpha += (1.0 - accumAlpha) * lalpha * (1.0 - float(isMask));

				return clamp(color, 0.0, 1.0).rgb;
			}`,[ds.simplexFast,ds.simplexFractal,ds.simplexAshima,ds.fbm,ds.perlin,ds.voronoi]),l=e.include(s),u=[];return u.push(this.scale.build(e,"f")),u.push(this.size.build(e,"v3")),u.push(this.move.build(e,"f")),u.push(this.fA.build(e,"v2")),u.push(this.fB.build(e,"v2")),u.push(this.distortion.build(e,"v2")),u.push(this.colorA.build(e,"v4")),u.push(this.colorB.build(e,"v4")),u.push(this.colorC.build(e,"v4")),u.push(this.colorD.build(e,"v4")),u.push(this.voronoiStyle.build(e,"i")),u.push(this.highCut.build(e,"f")),u.push(this.lowCut.build(e,"f")),u.push(this.smoothness.build(e,"f")),u.push(this.seed.build(e,"f")),u.push(this.quality.build(e,"i")),u.push(this.isMask.build(e,"b")),u.push(this.mask?`luminance(${this.mask.flow(e,"v3").result})`:"1.0"),u.push(this.alpha.build(e,"f")),u.push(this.calpha),e.format(l+"("+u.join(",")+")",this.getType(e),t)}};H1e.numOctaves=5;var U1e=class extends Ii{constructor(e,t,r,i,n,a,o,s,l,u,c,h,d,f,p,v){super("v3"),this.nodeType="Outline",this.firstTime=!0,this.outlineColor=e,this.contourColor=t,this.outlineWidth=r,this.contourWidth=i,this.contourThreshold=n,this.outlineThreshold=a,this.contourFrequency=o,this.outlineSmoothing=s,this.contourDirection=l,this.positionalLines=u,this.compensation=c,this.resolution=h,this.normalMap=d,this.depthMap=f,this.pixelRatio=p,this.alpha=v,this.calpha=`g${this.uuid.toString().replace(/-/g,"")}_calpha`}generate(e,t){let r=`g${this.uuid.toString().replace(/-/g,"")}`;if(e.require("vWorldViewDir"),e.require("worldNormal"),e.extensions.derivatives=!0,this.compensation.value&&e.define("OUTLINE_COMPENSATION",`${r}_offset`),this.firstTime){let i=this.outlineWidth.build(e,"f"),n=this.resolution.build(e,"v2"),a=this.compensation.build(e,"b"),o=this.pixelRatio.build(e,"f");e.addVertexParsVariable("randomColor","attribute vec3"),e.addVertexParsVariable("extrudeNormal","attribute vec3"),e.addVertexParsVariable(i,"uniform float"),e.addVertexParsVariable(n,"uniform vec2"),e.addVertexParsVariable(a,"uniform bool"),e.addVertexParsVariable(o,"uniform float"),e.addVertexParsVariable("vID","flat out float"),e.addFragmentParsVariable("vID","flat in float"),e.addVertexFinalCode(`
                vID = randomColor.r;
                vec2 ${r}_offset = vec2(0.0);
                if (${a}) {
                    vec4 ${r}_clipPosition = projectionMatrix * (modelViewMatrix * vec4(transformed, 1.0));
                    // NOTE: For certain shapes, like spheres, we get incorrect extrusion when the
                    // normals face the camera directly. So we hackily fix this by offsetting the normal
                    // by a tiny amount.
                    vec3 ${r}_clipNormal = mat3(projectionMatrix) * (mat3(modelViewMatrix) * extrudeNormal) + 0.0000001;
                    ${r}_offset = normalize(${r}_clipNormal.xy) / ${n} * (${i} / 2.0) * ${r}_clipPosition.w * 2.0 * ${o};
                    ${r}_clipPosition.xy += ${r}_offset;
                    // TODO(MAX): To handle multiple outline layers, we only want to extrude
                    // if this offset is the biggest of all the potential offsets
                    gl_Position = ${r}_clipPosition;
                }
            `)}if(e.isShader("fragment")){e.require("uv"),e.requires.uv=[!0],e.addFragmentVariable(this.calpha,"float");let i=e.include(U1e.Nodes.outline),n=[];return n.push(this.outlineColor.build(e,"c")),n.push(this.contourColor.build(e,"c")),n.push(this.outlineWidth.build(e,"f")),n.push(this.contourWidth.build(e,"f")),n.push(this.contourThreshold.build(e,"f")),n.push(this.outlineThreshold.build(e,"f")),n.push(this.contourFrequency.build(e,"f")),n.push(this.outlineSmoothing.build(e,"f")),n.push(this.contourDirection.build(e,"v3")),n.push(this.positionalLines.build(e,"b")),n.push(this.resolution.build(e,"v2")),n.push(this.normalMap.getTexture(e,"t")),n.push(this.depthMap.getTexture(e,"t")),n.push(this.pixelRatio.build(e,"f")),n.push(this.compensation.build(e,"b")),n.push(this.mask?`luminance(${this.mask.flow(e,"v3").result})`:"1.0"),n.push(this.alpha.build(e,"f")),n.push(this.calpha),this.firstTime=!this.firstTime,e.format(i+"("+n.join(",")+")",this.getType(e),t)}else return console.warn("OutlineNode is not compatible with "+e.shader+" shader."),""}},G1e=U1e;G1e.Nodes=function(){let e=new ut(`
float sobelSample(sampler2D t, sampler2D d, vec2 uv, vec2 resolution, float outlineWidth, float pixelRatio)
{
    vec2 halton = haltonSequence[frameIndex];
    float temporalOffset = getNoiseInterleavedGradient(gl_FragCoord.xy + halton);
    float temporalAngle  = temporalOffset * PI2;

    vec2 texelSize = (vec2(1.0) / resolution);
    vec2 offsetSize = texelSize * outlineWidth * pixelRatio;

    vec2 uvSamples[9];
    vec4 normalSamples[9];

	uvSamples[0] = uv + vec2( -offsetSize.x, -offsetSize.y) + (vogelDiskSample(0, 9, temporalAngle) * texelSize);
	uvSamples[1] = uv + vec2(0.0, -offsetSize.y) + (vogelDiskSample(1, 9, temporalAngle) * texelSize);
	uvSamples[2] = uv + vec2(  offsetSize.x, -offsetSize.y) + (vogelDiskSample(2, 9, temporalAngle) * texelSize);
	uvSamples[3] = uv + vec2( -offsetSize.x, 0.0) + (vogelDiskSample(3, 9, temporalAngle) * texelSize);
	uvSamples[4] = uv;
	uvSamples[5] = uv + vec2(  offsetSize.x, 0.0) + (vogelDiskSample(5, 9, temporalAngle) * texelSize);
	uvSamples[6] = uv + vec2( -offsetSize.x, offsetSize.y) + (vogelDiskSample(6, 9, temporalAngle) * texelSize);
	uvSamples[7] = uv + vec2(0.0, offsetSize.y) + (vogelDiskSample(7, 9, temporalAngle) * texelSize);
	uvSamples[8] = uv + vec2(  offsetSize.x, offsetSize.y) + (vogelDiskSample(8, 9, temporalAngle) * texelSize);


    normalSamples[0] = texture2D(t, uvSamples[0]);
    normalSamples[1] = texture2D(t, uvSamples[1]);
    normalSamples[2] = texture2D(t, uvSamples[2]);
    normalSamples[3] = texture2D(t, uvSamples[3]);
    normalSamples[4] = texture2D(t, uvSamples[4]);
    normalSamples[5] = texture2D(t, uvSamples[5]);
    normalSamples[6] = texture2D(t, uvSamples[6]);
    normalSamples[7] = texture2D(t, uvSamples[7]);
    normalSamples[8] = texture2D(t, uvSamples[8]);

    float depthBias = 0.0001;
    // TODO(MAX): Can we somehow reduce the number of conditionals here with MATH?!
    if (normalSamples[0].a != vID && normalSamples[0].a != 0.0) {
        float depthAtSample = texture2D(d, uvSamples[0]).r + depthBias;
        if (gl_FragCoord.z > depthAtSample) {
           return 0.0;
        }
    }

    if (normalSamples[1].a != vID && normalSamples[1].a != 0.0) {
        float depthAtSample = texture2D(d, uvSamples[1]).r + depthBias;
        if (gl_FragCoord.z > depthAtSample) {
           return 0.0;
        }
    }

    if (normalSamples[2].a != vID && normalSamples[2].a != 0.0) {
        float depthAtSample = texture2D(d, uvSamples[2]).r + depthBias;
        if (gl_FragCoord.z > depthAtSample) {
           return 0.0;
        }
    }

    if (normalSamples[3].a != vID && normalSamples[3].a != 0.0) {
        float depthAtSample = texture2D(d, uvSamples[3]).r + depthBias;
        if (gl_FragCoord.z > depthAtSample) {
           return 0.0;
        }
    }


    if (normalSamples[4].a != vID && normalSamples[4].a != 0.0) {
        float depthAtSample = texture2D(d, uvSamples[4]).r + depthBias;
        if (gl_FragCoord.z > depthAtSample) {
           return 0.0;
        }
    }

    if (normalSamples[5].a != vID && normalSamples[5].a != 0.0) {
        float depthAtSample = texture2D(d, uvSamples[5]).r + depthBias;
        if (gl_FragCoord.z > depthAtSample) {
           return 0.0;
        }
    }

    if (normalSamples[6].a != vID && normalSamples[6].a != 0.0) {
        float depthAtSample = texture2D(d, uvSamples[6]).r + depthBias;
        if (gl_FragCoord.z > depthAtSample) {
           return 0.0;
        }
    }

    if (normalSamples[7].a != vID && normalSamples[7].a != 0.0) {
        float depthAtSample = texture2D(d, uvSamples[7]).r + depthBias;
        if (gl_FragCoord.z > depthAtSample) {
           return 0.0;
        }
    }

    if (normalSamples[8].a != vID && normalSamples[8].a != 0.0) {
        float depthAtSample = texture2D(d, uvSamples[8]).r + depthBias;
        if (gl_FragCoord.z > depthAtSample) {
           return 0.0;
        }
    }

    vec3 sobel_edge_h = normalSamples[2].rgb + (2.0*normalSamples[5].rgb) + normalSamples[8].rgb - (normalSamples[0].rgb + (2.0*normalSamples[3].rgb) + normalSamples[6].rgb);
  	vec3 sobel_edge_v = normalSamples[0].rgb + (2.0*normalSamples[1].rgb) + normalSamples[2].rgb - (normalSamples[6].rgb + (2.0*normalSamples[7].rgb) + normalSamples[8].rgb);

    float edgeNormal = sqrt(dot(sobel_edge_h, sobel_edge_h) + dot(sobel_edge_v, sobel_edge_v));
    return edgeNormal;
}
`);return{outline:new ut(`vec3 outline(vec3 outlineColor, vec3 contourColor, float outlineWidth, float contourWidth, float outlineThreshold, float contourThreshold, float outlineSmoothing, float contourFrequency, vec3 contourDirection, bool positionalLines, vec2 resolution, sampler2D normalMap, sampler2D depthMap, float pixelRatio, bool compensation, float mask, float alpha, out float calpha) {
                vec3 result = outlineColor;
                float resultAlpha = 0.0;

                vec3 N = normalize(vWNormal);
                vec2 nuv = (gl_FragCoord.xy / resolution);
                float sobelSample = compensation ? sobelSample(normalMap, depthMap, nuv, resolution, outlineWidth / 2., pixelRatio) : sobelSample(normalMap, depthMap, nuv, resolution, outlineWidth, pixelRatio);
                resultAlpha = smoothstep(outlineThreshold - outlineSmoothing, outlineThreshold + outlineSmoothing, sobelSample);

                //resultAlpha = 1.0;
                //result = vec3(sobelSample);

                float t = 1.0 - contourThreshold;
                if(positionalLines) {
                    vec3 NDir = position * contourDirection;
                    float NT = NDir.x + NDir.y + NDir.z;
                    float f  = fract(NT * contourFrequency * 0.01);
                    float df = fwidth(NT * contourFrequency);

                    float g = smoothstep(df * (contourWidth * 0.01), df * (contourWidth * 0.01 * 2.0), f);
                    if (g < 1.0 && resultAlpha == 0.0) {
                        result = contourColor;
                        resultAlpha = 1.0;
                    }
                 }
                 else {
                    vec3 NDir = N * contourDirection;
                    float NT = NDir.x + NDir.y + NDir.z;
                    float df = fwidth(NT * contourThreshold);
                    float f = sin(NT * 1.0 * contourFrequency);
                    float g = smoothstep(0.0, df * contourWidth, 1.0 - f);

                    if (df > (t * 0.5) && g < 1.0 && resultAlpha == 0.0) {
                        result = contourColor;
                        resultAlpha = 1.0 - g;
                    }
                 }

                 float lalpha = alpha * resultAlpha * mask;
                 calpha =  lalpha / clamp( lalpha + accumAlpha, 0.00001, 1.0 );
                 accumAlpha += ( 1.0 - accumAlpha ) * lalpha;
				 
                 return result;
             }`,[e])}}();var Lh=class extends Ii{constructor(e,t,r,i,n,a,o,s,l,u,c,h,d,f,p,v,m,g){super("v3"),this.nodeType="Pattern",this.style=e,this.projection=t,this.axis=r,this.blending=i,this.offset=n,this.colorA=a,this.colorB=o,this.frequency=s,this.size=l,this.variation=u,this.smoothness=c,this.zigzag=h,this.rotation=d,this.vertical=f,this.horizontal=p,this.sides=v,this.isMask=g,this.alpha=m,this.calpha=`g${this.uuid.toString().replace(/-/g,"")}_calpha`}generate(e,t){if(e.isShader("fragment")){e.require("position"),e.require("uv"),e.requires.uv=[!0],e.require("normal"),e.requires.normal=!0,e.addFragmentVariable(this.calpha,"float");let r;switch(this.style.value){case 0:r="circle";break;case 1:r="ring";break;case 2:r="polygon";break;case 3:r="xcross";break;case 4:r="diamond";break;case 5:r="checkerboard";break;case 6:r="line";break;case 7:r="wave";break;default:r="circle";break}let i=`g${this.uuid.toString().replace(/-/g,"")}`,n=new ut(`float hashwithoutsine12(vec2 p)
				{
					vec3 p3 = fract(vec3(p.xyx) * .1031);
					p3 += dot(p3, p3.yzx + 33.33);
					return fract((p3.x + p3.y) * p3.z);
				}`),a=new ut(`vec2 rotate_uv(in vec2 uv, float a, bool repeat) 
				{
					const float mid = 0.5;
					float radians = a * (PI / 180.0);
					vec2 rotated = vec2(
						cos(radians) * (uv.x - mid) + sin(radians) * (uv.y - mid) + mid,
						cos(radians) * (uv.y - mid) - sin(radians) * (uv.x - mid) + mid
					);
					return repeat ? fract(rotated): rotated;
				}`),o="";if(this.projection.value===4){let c=this.style.value===2?`${r}(uv0, frequency, size, variation, smoothness_remapped, zigzag, rotation, sides)`:`${r}(uv0, frequency, size, variation, smoothness_remapped, zigzag, rotation)`,h=this.style.value===2?`${r}(uv1, frequency, size, variation, smoothness_remapped, zigzag, rotation, sides)`:`${r}(uv1, frequency, size, variation, smoothness_remapped, zigzag, rotation)`,d=this.style.value===2?`${r}(uv2, frequency, size, variation, smoothness_remapped, zigzag, rotation, sides)`:`${r}(uv2, frequency, size, variation, smoothness_remapped, zigzag, rotation)`;o=`
				vec3 p = position;
				float factor = 0.0125;
				vec2 uv0 = fract(p.xy * factor);
				vec2 uv1 = fract(p.zy * factor);
				vec2 uv2 = fract(p.xz * factor);
				
				uv0 = rotate_uv(uv0 + offset, rotation, true);
				uv1 = rotate_uv(uv1 + offset, rotation, true);
				uv2 = rotate_uv(uv2 + offset, rotation, true);
	
				float d0 = ${c};
				float d1 = ${h};
				float d2 = ${d};
				
				// Range from 3 to 128 seems to be good
				float exponent = (1.0 - blending) * 125.0 + 3.0;

				vec3 n = vObjectNormal;
				vec3 weights = abs(normalize(n));
				weights = pow(weights, vec3(exponent));
				weights /= dot(weights, vec3(1.0));
				d0 *= weights.z;
				d1 *= weights.x;
				d2 *= weights.y;
				float draw = d0 + d1 + d2;
	
				vec2 custom_uv = uv0 * weights.z + uv1 * weights.x + uv2 * weights.y;
				`}else{let c=this.style.value===2?`${r}(custom_uv, frequency, size, variation, smoothness_remapped, zigzag, rotation, sides)`:`${r}(custom_uv, frequency, size, variation, smoothness_remapped, zigzag, rotation)`,h="";this.axis.value===0?h=`float radius = length(p);
					float theta = atan(p.y, p.z);
					float phi = acos(p.x / radius);`:this.axis.value===1?h=`float radius = length(p);
					float theta = atan(p.x, p.z);
					float phi = acos(p.y / radius);`:(this.axis.value,h=`float radius = length(p);
					float theta = atan(p.y, p.x);
					float phi = acos(p.z / radius);`);let d="";switch(this.projection.value){case 0:d="custom_uv = vUv.st;";break;case 1:break;case 2:d=`
							vec3 p = position;
							${h}
							custom_uv = vec2(theta, phi);
							custom_uv /= PI;
							`;break}o=`
				vec2 custom_uv;
				${d}
	
				custom_uv += offset;
				custom_uv = fract(custom_uv);
				custom_uv = rotate_uv(custom_uv, rotation, true);
	
				float draw = ${c};
				`}let s=new ut(`vec3 ${i}_pattern(vec3 normal, float blending, int style, vec2 offset, vec4 colorA, vec4 colorB, vec2 frequency, float size, float variation, float smoothness, float zigzag, float rotation, vec2 vertical, vec2 horizontal, int sides, bool isMask, float mask, float alpha, out float calpha) {
					const float TWO_PI = PI * 2.0;
					float smoothness_remapped = pow(smoothness, 5.0);	

					${o}

					// Construct final output color
					vec4 color = mix(colorA, colorB, draw);
					color.a = clamp(color.a, 0.0, 1.0);

					// Apply cuts
					color.a *= 
						step(vertical.x, custom_uv.y) * 
						step(custom_uv.y, vertical.y);
					color.a *= 
						step(horizontal.x, abs(custom_uv.x)) * 
						step(abs(custom_uv.x), horizontal.y);

					// Accumulate alpha 
					float lalpha = alpha * clamp(color.a, 0.0, 1.0) * mask;
					calpha = mix(lalpha / clamp(lalpha + accumAlpha, 0.00001, 1.0), lalpha, float(isMask));
					accumAlpha += (1.0 - accumAlpha) * lalpha * (1.0 - float(isMask));

					return clamp(color, 0.0, 1.0).rgb;
				}`,[a,n,Lh.DrawFunctions.circle,Lh.DrawFunctions.ring,Lh.DrawFunctions.polygon,Lh.DrawFunctions.cross,Lh.DrawFunctions.diamond,Lh.DrawFunctions.checkerboard,Lh.DrawFunctions.line,Lh.DrawFunctions.wave]),l=e.include(s),u=[];return u.push("normal"),u.push(this.blending.build(e,"f")),u.push(this.style.build(e,"i")),u.push(this.offset.build(e,"v2")),u.push(this.colorA.build(e,"v4")),u.push(this.colorB.build(e,"v4")),u.push(this.frequency.build(e,"v2")),u.push(this.size.build(e,"f")),u.push(this.variation.build(e,"f")),u.push(this.smoothness.build(e,"f")),u.push(this.zigzag.build(e,"f")),u.push(this.rotation.build(e,"f")),u.push(this.vertical.build(e,"v2")),u.push(this.horizontal.build(e,"v2")),u.push(this.sides.build(e,"i")),u.push(this.isMask.build(e,"b")),u.push(this.mask?`luminance(${this.mask.flow(e,"v3").result})`:"1.0"),u.push(this.alpha.build(e,"f")),u.push(this.calpha),e.format(l+"("+u.join(",")+")",this.getType(e),t)}else return console.warn("PatterNode is not compatible with "+e.shader+" shader."),e.format("vec3(0.0)",this.getType(e),t)}},j1e=Lh;j1e.DrawFunctions=function(){let e=new ut(`float hashwithoutsine12(vec2 p) {
				vec3 p3 = fract(vec3(p.xyx) * 0.1031);
				p3 += dot(p3, p3.yzx + 33.33);
				return fract((p3.x + p3.y) * p3.z);
			}`),t=new ut(`vec2 tile_and_center(in vec2 uv, in vec2 frequency, in float variation, in float zigzag, in float rotation) {
                // Create tiles in UV-space
                uv *= frequency;

                // Integer coords
                vec2 i = floor(uv);

                // Offset every other row based on zigzag param, then compute fractional coords
                float row_offset = mod(i.y, 2.0);
                uv.x += row_offset * zigzag;
                vec2 f = fract(uv);

				// Rotate the tile itself:
				// const float mid = 0.5;
				// f = vec2(
				// 	cos(rotation) * (f.x - mid) + sin(rotation) * (f.y - mid) + mid,
				// 	cos(rotation) * (f.y - mid) - sin(rotation) * (f.x - mid) + mid
				// );
				// f = fract(f);

                f = f * 2.0 - 1.0;

				// Recompute integer coords after shifting - then, random value per tile 
				i = floor(uv);
				float rand = (hashwithoutsine12(i) * 5.0 + 1.0);
				float jitter = mix(1.0, rand, variation);
				f *= jitter;

                return f;
            }`,[e]),r=new ut(`float circle(in vec2 uv, in vec2 frequency, in float size, in float variation, in float smoothness, in float zigzag, in float rotation) {
                vec2 f = tile_and_center(uv, frequency, variation, zigzag, rotation);
                return smoothstep(
                    -smoothness, 
                     smoothness, 
                     length(f) - size
                );
            }`,[t]),i=new ut(`float ring(in vec2 uv, in vec2 frequency, in float size, in float variation, in float smoothness, in float zigzag, in float rotation) {
                vec2 f = tile_and_center(uv, frequency, variation, zigzag, rotation);

				float d = length(f);
                const float inner_width = 0.5;

                float outer = smoothstep(-smoothness, smoothness, d - size);
                float inner = smoothstep(-smoothness, smoothness, d - size * inner_width);
				return outer + (1.0 - inner);   
            }`,[t]),n=new ut(`float sdf_ngon(in vec2 p, in float r, in int n) {
                float an = (PI * 2.0) / float(n);
                float he = r * tan(0.5 * an);
                
                // Rotate to first sector
                p = -p.yx; 
                float bn = an * floor((atan(p.y, p.x) + 0.5 * an) / an);
                vec2  cs = vec2(cos(bn), sin(bn));
                p = mat2(cs.x, -cs.y, cs.y, cs.x)*p;
            
                // Side of polygon
                return length(p - vec2(r, clamp(p.y, -he, he))) * sign(p.x - r);
            }
            
            float polygon(in vec2 uv, in vec2 frequency, in float size, in float variation, in float smoothness, in float zigzag, in float rotation, in int sides) {
                vec2 f = tile_and_center(uv, frequency, variation, zigzag, rotation);
                return smoothstep(-smoothness, smoothness, sdf_ngon(f, size, sides));
            }`,[t]),a=new ut(`float sdf_cross(in vec2 p, in vec2 b, float r ) {
                p = abs(p); 
				p = (p.y > p.x) ? p.yx : p.xy;
                vec2  q = p - b;
                float k = max(q.y, q.x);
                vec2  w = (k > 0.0) ? q : vec2(b.y - p.x, -k);
                return sign(k) * length(max(w, 0.0)) + r;
            }
            
            // Avoid namespace conflicts 
            float xcross(in vec2 uv, in vec2 frequency, in float size, in float variation, in float smoothness, in float zigzag, in float rotation) {
                vec2 f = tile_and_center(uv, frequency, variation, zigzag, rotation);
                return smoothstep(-smoothness, smoothness, sdf_cross(f, vec2(size, size * 0.25), smoothness));
            }`,[t]),o=new ut(`float ndot(vec2 a, vec2 b) { 
                return a.x*b.x - a.y*b.y; 
            }
            
            float sdf_diamond(in vec2 p, in vec2 b) {
                p = abs(p);
                float h = clamp(ndot(b - 2.0 * p, b) / dot(b, b), -1.0, 1.0);
                float d = length(p - 0.5 * b * vec2(1.0 - h, 1.0 + h));
                return d * sign(p.x * b.y + p.y * b.x - b.x * b.y);
            }

            float diamond(in vec2 uv, in vec2 frequency, in float size, in float variation, in float smoothness, in float zigzag, in float rotation) {
                vec2 f = tile_and_center(uv, frequency, variation, zigzag, rotation);
	            return smoothstep(-smoothness, smoothness, sdf_diamond(f, vec2(size)));
            }`,[t]),s=new ut(`float checkerboard(in vec2 uv, in vec2 frequency, in float size, in float variation, in float smoothness, in float zigzag, in float rotation) {
                uv *= frequency;
                vec2 i = floor(uv);

                float offset = mod(i.y, 2.0);

                uv.x += offset + zigzag * offset;
                float x = floor(uv.x);
                
                return mod(x, 2.0);
            }`),l=new ut(`float line(in vec2 uv, in vec2 frequency, in float size, in float variation, in float smoothness, in float zigzag, in float rotation) {
                vec2 f = tile_and_center(uv, frequency, 0.0, zigzag, rotation);
				
				// Different approach for variation param here
				float row = floor(uv * frequency).y;
				float rand = hashwithoutsine12(vec2(row));
				float s = mix(size, size * rand, variation);

				return smoothstep(
					s - smoothness, 
					s + smoothness, 
					abs(f.y)
				);
            }`,[t]),u=new ut(`// Uses bisection 
            float udf_cos(in vec2 p, in float a, in float b, in float c, in float d) {
                // Convert all data to a primitive cosine wave
                p = c * (p - vec2(d, a));
                
                const float TWO_PI = PI * 2.0;

                // Reduce to principal half cycle
                p.x = mod(p.x, TWO_PI); 
                if (p.x > PI) {
                    p.x = TWO_PI - p.x;
                }
            
                // Find zero of derivative (minimize distance)
                float xa = 0.0;
                float xb = TWO_PI;

                // 24 bit precision
                for (int i = 0; i < 24; i++) {
                    float x = 0.5 * (xa + xb);
                    float y = x - p.x + b * c * sin(x) * (p.y - b * c * cos(x));
                    if (y < 0.0) xa = x; 
                    else xb = x;
                }
                float x = 0.5 * (xa + xb);
                
                // Compute distance    
                vec2 q = vec2(x, b * c * cos(x));
                return length(p - q) / c;
            }

            float wave(in vec2 uv, in vec2 frequency, in float size, in float variation, in float smoothness, in float zigzag, in float rotation) {
                float repeat = frequency.x;
                uv *= repeat;
                vec2 i = floor(uv);
                float row_offset = mod(i.y, 2.0);
                uv.x += row_offset * zigzag;
                vec2 f = vec2(uv.x, fract(uv.y));

                // Generalized cosine: y(x) = a + b * cos(cx + d)
                const float amplitude = 0.125;
                float wave_frequency = frequency.y * 0.1;
                float distance_estimate = udf_cos(f, 0.50, amplitude, wave_frequency * (2.0 * PI), 0.0);

				// Different approach for variation param here
				float rand = hashwithoutsine12(vec2(i.y));
				float s = mix(size, size * rand, variation);

                return smoothstep(-smoothness, smoothness, distance_estimate - s * 0.5);
            }`);return{tileAndCenter:t,circle:r,ring:i,polygon:n,cross:a,diamond:o,checkerboard:s,line:l,wave:u}}();var W1e=class extends Ii{constructor(e,t,r,i,n,a,o,s){super("v3"),this.nodeType="Rainbow",this.filmThickness=e,this.movement=t,this.wavelengths=r,this.noiseStrength=i,this.noiseScale=n,this.offset=a,this.isMask=s,this.alpha=o,this.calpha=`g${this.uuid.toString().replace(/-/g,"")}_calpha`}generate(e,t){if(e.require("vWorldViewDir"),e.require("worldNormal"),e.isShader("fragment")){e.require("uv"),e.requires.uv=[!0],e.addFragmentVariable(this.calpha,"float");let r=e.include(W1e.Nodes.rainbow),i=[];return i.push(this.filmThickness.build(e,"f")),i.push(this.movement.build(e,"f")),i.push(this.wavelengths.build(e,"v3")),i.push(this.noiseStrength.build(e,"f")),i.push(this.noiseScale.build(e,"f")),i.push(this.offset.build(e,"v3")),i.push(this.isMask.build(e,"b")),i.push(this.mask?`luminance(${this.mask.flow(e,"v3").result})`:"1.0"),i.push(this.alpha.build(e,"f")),i.push(this.calpha),e.format(r+"("+i.join(",")+")",this.getType(e),t)}else return console.warn("RainbowNode is not compatible with "+e.shader+" shader."),e.format("vec3( 0.0 )",this.getType(e),t)}},q1e=W1e;q1e.Nodes=function(){let e=new ut(`vec3 attenuation(vec3 wavelengths, float filmThickness, float movement, float noiseStrength, float noiseScale, vec3 offset) {
				float f = 0.0;
				
				if (noiseStrength != 0.0) {
					vec3 st = position / noiseScale;
					float noise = simplexFast(1.6 * st + vec3(1.8, 1.5, 1.9) * simplexFast(st) + vec3(1.7, 9.2, 1.0));
					f = noise * noiseStrength;
				}

				vec3 waves = wavelengths * vec3(1.0, 0.8, 0.6) + 1.0;
				float angle = dot(normalize(vWorldViewDir + (offset * -0.001)), normalize(vWNormal));

				mediump vec3 color = cos((((filmThickness + f) / waves) * angle) + movement);
				return .5 + .5 * color;
			 }`,[ds.simplexFast]);return{rainbow:new ut(`vec3 rainbow(float filmThickness, float movement, vec3 wavelengths, float noiseStrength, float noiseScale, vec3 offset, bool isMask, float mask, float alpha, out float calpha) {
				mediump vec3 res = clamp(attenuation(wavelengths, filmThickness, movement, noiseStrength, noiseScale, offset), 0.0, 2.0);

				float rainbowContribution = clamp(res.r + res.g + res.b, 0.0, 1.0);

				float lalpha = alpha * rainbowContribution * mask;
				calpha = mix(lalpha / clamp(lalpha + accumAlpha, 0.00001, 1.0), lalpha, float(isMask));
				accumAlpha += (1.0 - accumAlpha) * lalpha * (1.0 - float(isMask));

				return res;
			 }`,[e])}}();var Y1e=class extends Ii{constructor(e,t,r,i,n,a,o,s,l,u){super("v3"),this.nodeType="Toon",this.positioning=e,this.colors=t,this.steps=r,this.source=i,this.isWorldSpace=n,this.noiseStrength=a,this.noiseScale=o,this.shadowColor=s,this.offset=l,this.alpha=u,this.calpha=`g${this.uuid.toString().replace(/-/g,"")}_calpha`}generate(e,t){if(e.require("worldNormal"),e.require("worldPosition"),e.isShader("fragment")){e.define("COLORS_MAX",10),e.addFragmentVariable(this.calpha,"float");let r=e.include(Y1e.Nodes.toon),i=[];return i.push(this.positioning.build(e,"i")),i.push(this.colors.build(e,"v4[]")),i.push(this.steps.build(e,"f[]")),i.push(this.source.build(e,"v3")),i.push(this.isWorldSpace.build(e,"b")),i.push(this.noiseStrength.build(e,"f")),i.push(this.noiseScale.build(e,"f")),i.push(this.shadowColor.build(e,"v4")),i.push(this.offset.build(e,"v3")),i.push(this.mask?`luminance(${this.mask.flow(e,"v3").result})`:"1.0"),i.push(this.alpha.build(e,"f")),i.push(this.calpha),e.format(r+"("+i.join(",")+")",this.getType(e),t)}else return console.warn("ToonNode is not compatible with "+e.shader+" shader."),e.format("vec3( 0.0 )",this.getType(e),t)}},X1e=Y1e;X1e.Nodes=function(){let e=new ut(`float rand(float n) {
				return fract(sin(n) * 43758.5453123);
			}`),t=new ut(`float hash1(float p) { 
				p = fract(p * 0.011); 
				p *= p + 7.5; 
				p *= p + p; 
				return fract(p); 
			}`),r=new ut(`float valueNoise(vec3 x) {
				const vec3 step = vec3(110, 241, 171);
			
				vec3 i = floor(x);
				vec3 f = fract(x);
			 
				// For performance, compute the base input to a 1D hash from the integer part of the argument and the 
				// incremental change to the 1D based on the 3D -> 1D wrapping
				float n = dot(i, step);
			
				vec3 u = f * f * (3.0 - 2.0 * f);
				return mix(mix(mix( hash1(n + dot(step, vec3(0, 0, 0))), hash1(n + dot(step, vec3(1, 0, 0))), u.x),
							   mix( hash1(n + dot(step, vec3(0, 1, 0))), hash1(n + dot(step, vec3(1, 1, 0))), u.x), u.y),
						   mix(mix( hash1(n + dot(step, vec3(0, 0, 1))), hash1(n + dot(step, vec3(1, 0, 1))), u.x),
							   mix( hash1(n + dot(step, vec3(0, 1, 1))), hash1(n + dot(step, vec3(1, 1, 1))), u.x), u.y), u.z);
			}`,[t]),i=new ut(`vec3 hash3(vec3 x) {
				x = vec3(dot(x,vec3(127.1, 311.7, 74.7)),
						 dot(x,vec3(269.5, 183.3, 246.1)),
						 dot(x,vec3(113.5, 271.9, 124.6)));
			
				return fract(sin(x)*43758.5453123);
			}`),n=new ut(`vec3 voronoiNoise(in vec3 x)
			{
				vec3 p = floor(x);
				vec3 f = fract(x);

				float id = 0.0;
				vec2 res = vec2(100.0);

				for(int k=-1; k<=1; k++)
				for(int j=-1; j<=1; j++)
				for(int i=-1; i<=1; i++)
				{
					vec3 b = vec3(float(i), float(j), float(k));

					// Comment out the "+ hash(p + b);" part below to get "square" cells
					vec3 r = vec3(b) - f + hash3(p + b);
					float d = dot(r, r);

					if (d < res.x)
					{
						id = dot(p + b, vec3(1.0, 57.0, 113.0));
						res = vec2(d, res.x);			
					}
					else if (d < res.y)
					{
						res.y = d;
					}
				}

				return vec3(sqrt(res), abs(id));
			}
			`,[i]);return{toon:new ut(`vec3 toon(int positioning, vec4 colors[COLORS_MAX], float steps[COLORS_MAX], vec3 source, bool isWorldSpace, float noiseStrength, float noiseScale, vec4 shadowColor, vec3 offset, float mask, float alpha, out float calpha) {
				float t = 0.0;
				float shadow = 1.0;

				if (positioning == 0) {

					// Can't do this mode if lighting is "none"
					#if (defined(PHONG) || defined(LAMBERT) || defined(STANDARD))

						// Algorithm from Chapter 10 of Graphics Shaders
						const vec3 weights = vec3(0.2125, 0.7154, 0.0721);
						vec3 lpos;
						vec3 l;
						float dproduct;

						#if (NUM_POINT_LIGHTS > 0)

							#if defined(USE_SHADOWMAP) && (NUM_POINT_LIGHT_SHADOWS > 0)
								PointLightShadow pointLightShadow;
							#endif 

							#pragma unroll_loop_start
							for (int i = 0; i < NUM_POINT_LIGHTS; i++) {
								// Light positions are in view-space for some reason?
								lpos = (inverse(viewMatrix) * vec4(pointLights[UNROLLED_LOOP_INDEX].position, 1.0)).xyz;
								l = normalize(lpos - worldPosition);
								
								dproduct = dot(l, normalize(worldNormal)) * 0.5 + 0.5;
								
								// TODO: we want to use "intensity" but it isn't available in the shader code
								//dproduct += dot(pointLights[UNROLLED_LOOP_INDEX].color, weights);

								t = max(t, dproduct);

								// Accumulate shadow contribution
								#if defined(USE_SHADOWMAP) && (UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS)
									pointLightShadow = pointLightShadows[UNROLLED_LOOP_INDEX];
									shadow *= getPointShadow( 
											pointShadowMap[UNROLLED_LOOP_INDEX], 
											pointLightShadow.shadowMapSize, 
											pointLightShadow.shadowBias, 
											pointLightShadow.shadowRadius,
											vPointShadowCoord[UNROLLED_LOOP_INDEX], 
											pointLightShadow.shadowCameraNear, 
											pointLightShadow.shadowCameraFar);
								#endif
							}
							#pragma unroll_loop_end

						#endif

						#if NUM_DIR_LIGHTS > 0 
							
							#if defined(USE_SHADOWMAP) && (NUM_DIR_LIGHT_SHADOWS > 0)
								DirectionalLightShadow directionalLightShadow;
							#endif 

							#pragma unroll_loop_start
							for (int i = 0; i < NUM_DIR_LIGHTS; i++) {
								// Use the direction vector for directional lights instead
								l = (inverse(viewMatrix) * vec4(directionalLights[UNROLLED_LOOP_INDEX].direction, 0.0)).xyz;
		
								dproduct = dot(l, normalize(worldNormal)) * 0.5 + 0.5;
								t = max(t, dproduct);

								// Accumulate shadow contribution
								#if defined(USE_SHADOWMAP) && (UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS)
									directionalLightShadow = directionalLightShadows[UNROLLED_LOOP_INDEX];
									shadow *= getShadow( 
										UNROLLED_LOOP_INDEX,
										directionalShadowMap[UNROLLED_LOOP_INDEX], 
										directionalLightShadow.shadowMapSize, 
										directionalLightShadow.shadowBias, 
										directionalLightShadow.shadowRadius, 
										vDirectionalShadowCoord[UNROLLED_LOOP_INDEX]);
								#endif
							}
							#pragma unroll_loop_end

						#endif

						#if NUM_SPOT_LIGHTS > 0 
							
							#if defined(USE_SHADOWMAP) && (NUM_SPOT_LIGHT_SHADOWS > 0)
								SpotLightShadow spotLightShadow;
							#endif 

							#pragma unroll_loop_start
							for (int i = 0; i < NUM_SPOT_LIGHTS; i++) {
								lpos = (inverse(viewMatrix) * vec4(spotLights[UNROLLED_LOOP_INDEX].position, 1.0)).xyz;
								l = normalize(lpos - worldPosition);
								
								dproduct = dot(l, normalize(worldNormal)) * 0.5 + 0.5;
								t = max(t, dproduct);

								// Accumulate shadow contribution
								#if defined(USE_SHADOWMAP) && (UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS)
									spotLightShadow = spotLightShadows[UNROLLED_LOOP_INDEX];
									shadow *= getShadow(
										UNROLLED_LOOP_INDEX,
										spotShadowMap[UNROLLED_LOOP_INDEX], 
										spotLightShadow.shadowMapSize, 
										spotLightShadow.shadowBias, 
										spotLightShadow.shadowRadius, 
										vSpotLightCoord[UNROLLED_LOOP_INDEX]);
								#endif
							}
							#pragma unroll_loop_end

						#endif

						t = clamp(t, 0.0, 1.0);
				
					#endif

				} else if (positioning == 1) {
					
					vec3 origin = mix(position, worldPosition, float(isWorldSpace));
					vec3 direction = normalize(source - origin);
					t = dot(direction, normalize(worldNormal)) * 0.5 + 0.5;	

				} else {

					vec3 origin = worldPosition;
					vec3 source = cameraPosition - offset;
					vec3 direction = normalize(source - origin);
					t = dot(direction, normalize(worldNormal)) * 0.5 + 0.5;	
					
				}

				if (noiseStrength > 0.0) {
					// Distort with noise
					vec3 st = position / noiseScale;
					
					// Voronoi "smooth" noise
					float noise = 1.0 - voronoiNoise(st).x;

					// Voronoi cellular noise
					//float noise = 1.0 - rand(voronoiNoise(st).z);

					// Position warp noise
					// vec3 offset = vec3(
					// 	simplexFast(st),
					// 	simplexFast(st + vec3(111.1, 143.89, 217.19)),
					// 	simplexFast(st + vec3(171.1, 247.89, 117.23))
					// );
					// st += offset;
					// float noise = valueNoise(st);

					t += noise * noiseStrength;
				}

				t = clamp(t, 0.0, 1.0);

				// Compute ramp color
				float p;
				vec4 color = colors[0];
				for (int i = 1; i < COLORS_MAX; i++) {
					p = clamp((t - steps[i-1]) / (steps[i] - steps[i-1]), 0.0, 1.0);
					color = mix(color, colors[i], smoothstep(0.0, 1.0, p));
				}

				// Incorporate custom shadow color
				if (positioning == 0) {

					vec3 blendedShadow = mix(color.rgb, shadowColor.rgb, shadowColor.a);
					color.rgb = mix(blendedShadow, color.rgb, shadow);
				
				}

				// Accumulate alpha as usual
				float lalpha = alpha * color.a * mask;
				calpha =  lalpha / clamp(lalpha + accumAlpha, 0.00001, 1.0);
				accumAlpha += (1.0 - accumAlpha) * lalpha;

				return color.xyz;

            }`,[ds.simplexFast,e,r,n])}}();var E_t=function(){return{textureBicubic:new ut(`float w0( float a ) {
            return ( 1.0 / 6.0 ) * ( a * ( a * ( - a + 3.0 ) - 3.0 ) + 1.0 );
        }
    
        float w1( float a ) {
            return ( 1.0 / 6.0 ) * ( a *  a * ( 3.0 * a - 6.0 ) + 4.0 );
        }
    
        float w2( float a ){
            return ( 1.0 / 6.0 ) * ( a * ( a * ( - 3.0 * a + 3.0 ) + 3.0 ) + 1.0 );
        }
    
        float w3( float a ) {
            return ( 1.0 / 6.0 ) * ( a * a * a );
        }
    
        // g0 and g1 are the two amplitude functions
        float g0( float a ) {
            return w0( a ) + w1( a );
        }
    
        float g1( float a ) {
            return w2( a ) + w3( a );
        }
    
        // h0 and h1 are the two offset functions
        float h0( float a ) {
            return - 1.0 + w1( a ) / ( w0( a ) + w1( a ) );
        }
    
        float h1( float a ) {
            return 1.0 + w3( a ) / ( w2( a ) + w3( a ) );
        }
    
        vec4 bicubic( sampler2D tex, vec2 uv, vec4 texelSize, float lod ) {
            uv = uv * texelSize.zw + 0.5;
    
            vec2 iuv = floor( uv );
            vec2 fuv = fract( uv );
    
            float g0x = g0( fuv.x );
            float g1x = g1( fuv.x );
            float h0x = h0( fuv.x );
            float h1x = h1( fuv.x );
            float h0y = h0( fuv.y );
            float h1y = h1( fuv.y );
    
            vec2 p0 = ( vec2( iuv.x + h0x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
            vec2 p1 = ( vec2( iuv.x + h1x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
            vec2 p2 = ( vec2( iuv.x + h0x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
            vec2 p3 = ( vec2( iuv.x + h1x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
    
            return g0( fuv.y ) * ( g0x * textureLod( tex, p0, lod ) + g1x * textureLod( tex, p1, lod ) ) + 
                   g1( fuv.y ) * ( g0x * textureLod( tex, p2, lod ) + g1x * textureLod( tex, p3, lod ) );
        }

        vec4 textureBicubic( sampler2D sampler, vec2 uv, float lod ) {
            vec2 fLodSize = vec2( textureSize( sampler, int( lod ) ) );
            vec2 cLodSize = vec2( textureSize( sampler, int( lod + 1.0 ) ) );
            vec2 fLodSizeInv = 1.0 / fLodSize;
            vec2 cLodSizeInv = 1.0 / cLodSize;
            vec4 fSample = bicubic( sampler, uv, vec4( fLodSizeInv, fLodSize ), floor( lod ) );
            vec4 cSample = bicubic( sampler, uv, vec4( cLodSizeInv, cLodSize ), ceil( lod ) );
            return mix( fSample, cSample, fract( lod ) );
        }`)}}();function M_t(e,t){return e>=t?new me(t/e,1):new me(1,e/t)}var Z1e=class extends Ii{constructor(e,t,r,i,n,a,o,s){super("v3"),this.nodeType="Transmission",this.thickness=e,this.ior=t,this.roughness=r,this.transmissionSamplerSize=i,this.transmissionSamplerMap=n,this.transmissionDepthMap=a,this.aspectRatio=o,this.alpha=s,this.calpha=`g${this.uuid.toString().replace(/-/g,"")}_calpha`}generate(e,t){if(e.extensions.shaderTextureLOD=!0,e.extensions.derivatives=!0,e.isShader("fragment")){e.define("NUM_SAMPLES",6),e.define("BLUR_SLOD",Math.pow(2,Ht.transmissionLod.value)),e.require("worldPosition"),e.requires.worldNormal=!0,e.requires.modelMatrix=!0,e.requires.projectionMatrix=!0,e.addFragmentVariable(this.calpha,"float");let r=e.include(Z1e.Nodes.transmission),i=[];return i.push(this.thickness.build(e,"f")),i.push(this.ior.build(e,"f")),i.push(this.roughness.build(e,"f")),i.push(this.transmissionSamplerSize.build(e,"v2")),i.push(this.transmissionSamplerMap.getTexture(e,"t")),i.push(this.transmissionDepthMap.getTexture(e,"t")),i.push(this.aspectRatio.build(e,"v2")),i.push("normal"),i.push(this.mask?`luminance(${this.mask.flow(e,"v3").result})`:"1.0"),i.push(this.alpha.build(e,"f")),i.push(this.calpha),e.format(r+"("+i.join(",")+")",this.getType(e),t)}else return console.warn("TransmissionNode is not compatible with "+e.shader+" shader."),e.format("vec3( 0.0 )",this.getType(e),t)}},Q1e=Z1e;Q1e.Nodes=function(){let e=new ut(`vec3 blur(sampler2D sp, vec2 U, vec2 scale, float lod, sampler2D dm, vec2 unrefractedU, vec2 aspectRatio) {
                // Slightly modified version of this:
                // https://www.shadertoy.com/view/ltScRG

				// Special case for blur == 0.0
				if (lod == 0.0) {
					#ifdef TEXTURE_LOD_EXT
					return texture2DLodEXT( sp, U, 0.0).rgb;
					#else
					return textureLod( sp, U, 0.0).rgb;
					#endif
				}
				
				vec2 texelSize = vec2(1.0) / resolution;
                vec2 halton = haltonSequence[frameIndex];
                float temporalOffset = getNoiseInterleavedGradient(gl_FragCoord.xy + halton);
                float temporalAngle  = temporalOffset * PI2;
				vec3 res = vec3(0.0);
                vec2 uv = vec2(0.0);
                vec2 offset = vec2(0.0);
                vec2 vogelSample = vec2(0.0);
                for (int i = 0; i < NUM_SAMPLES; i++) {
                    vogelSample =  vogelDiskSample(i, NUM_SAMPLES, temporalAngle) * texelSize;
                    offset = vogelSample * scale * (lod * 10.0); // TODO: used to be hardcoded to 20
                    uv = U + offset;
                    float opaqueDepth = unpackRGBAToDepth(textureLod(dm, uv, lod));
                    if (opaqueDepth != 0.0 && opaqueDepth < gl_FragCoord.z) {
                        uv = unrefractedU;
                        lod = lod > 4.0 ? lod : lod / 2.0;
                    }
                    res += textureLod(sp, uv, lod).rgb;
                }
                return res / float(NUM_SAMPLES);
            }`),t=new ut(`vec3 getVolumeTransmissionRay( vec3 n, vec3 v, float thickness, float ior, mat4 modelMatrix ) {
		        // Direction of refracted light.
		        vec3 refractionVector = refract( -v,  n, 1.0 / ior );
		        
				// Compute rotation-independant scaling of the model matrix.
		        vec3 modelScale;
		        modelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );
		        modelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );
		        modelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );

		        // The thickness is specified in local space
		        return normalize( refractionVector ) * thickness * modelScale;
	        }`),r=new ut(`float applyIorToRoughness( float roughness, float ior ) {
				// Scale roughness with IOR so that an IOR of 1.0 results in no microfacet refraction and
				// an IOR of 1.5 results in the default amount of microfacet refraction.
				return roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );
			}`),i=new ut(`vec3 getTransmissionSample( vec2 fragCoord, float roughness, float ior, vec2 transmissionSamplerSize, sampler2D transmissionSamplerMap, sampler2D transmissionDepthMap, vec2 unrefractedCoords, vec2 aspectRatio) {
				// Threejs exports do not pass a depth map to this shader, so we have to fallback to the "Threejs method of blurring" - see
				// also the code in convertTransmission.ts, which runs during export
				#ifdef IS_THREEJS_EXPORT
					float lod = log2(transmissionSamplerSize.x) * applyIorToRoughness(roughness / 5.0, ior);
					return textureBicubic(transmissionSamplerMap, fragCoord.xy, lod).rgb;
				#else
					float framebufferLod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );
					float lod = applyIorToRoughness(roughness, ior);
					return blur(transmissionSamplerMap, fragCoord, vec2(lod), min(framebufferLod / 5.5, 8.5), transmissionDepthMap, unrefractedCoords, aspectRatio);
				#endif
			}`,[E_t.textureBicubic,r,e]),n=new ut(`vec3 getIBLVolumeRefraction( vec3 n, vec3 v, float roughness, vec3 position, mat4 modelMatrix, mat4 viewMatrix, mat4 projMatrix, float ior, float thickness, vec2 transmissionSamplerSize, sampler2D transmissionSamplerMap, sampler2D transmissionDepthMap, vec2 aspectRatio ) {
				vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );
				vec3 refractedRayExit = position + transmissionRay;

				// Project refracted vector on the framebuffer, while mapping to normalized device coordinates.
				vec4 ndcPos = projMatrix * viewMatrix *  vec4( refractedRayExit, 1.0 );
				vec2 refractionCoords = ndcPos.xy / ndcPos.w;
				refractionCoords += 1.0;
				refractionCoords /= 2.0;

				vec4 ndcPosUnrefracted = projMatrix * viewMatrix * vec4(position, 1.0 );
				vec2 unrefractedCoords = ndcPosUnrefracted.xy / ndcPosUnrefracted.w;
				unrefractedCoords += 1.0;
				unrefractedCoords /= 2.0;

				// Sample framebuffer to get pixel the refracted ray hits.
				return getTransmissionSample( refractionCoords, roughness, ior, transmissionSamplerSize, transmissionSamplerMap, transmissionDepthMap, unrefractedCoords, aspectRatio );
    		}`,[i,t]);return{transmission:new ut(`vec3 transmission(float thickness, float ior, float roughness, vec2 transmissionSamplerSize, sampler2D transmissionSamplerMap, sampler2D transmissionDepthMap, vec2 aspectRatio, vec3 normal, float mask, float alpha, out float calpha) {
                vec3 v = vec3(0.);
                if (isOrthographic) {
                    v = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
                } else {
                    v = normalize(vWPosition - cameraPosition);
                }
                vec3 transmission = getIBLVolumeRefraction(vWNormal, -v, roughness,  vWPosition, modelMatrix, viewMatrix, projectionMatrix, ior, thickness, transmissionSamplerSize, transmissionSamplerMap, transmissionDepthMap, aspectRatio );
                
				float lalpha = alpha * mask;
				calpha =  lalpha / clamp( lalpha + accumAlpha, 0.00001, 1.0 );
				accumAlpha += ( 1.0 - accumAlpha ) * alpha;

				return transmission;
            }`,[n])}}();var DO=(e=>(e.NOISE="noise",e.MAP="map",e))(DO||{}),K1e=class extends Ii{constructor(e,t,r,i,n,a,o,s,l,u,c){super("v3"),this.displacementTypeIndex=new ki(0),this.nodeType="VertexDisplacement",this.intensity=e,this.movementOrTexture=t,Object.values(DO)[this.displacementTypeIndex.value]==="map"&&(this.mat=new L1e(this.movementOrTexture.value.matrix)),this.cropOrOffset=r,this.scale=u,this.noiseFunctionIndex=c,this.voronoiStyle=i,this.smoothness=n,this.seed=a,this.highCut=o,this.lowCut=s,this.quality=l}generate(e,t){if(e.isShader("vertex")){e.define("USE_LAYER_DISPLACE");let r,i=[];switch(i.push("displaced_position"),i.push("displaced_normal"),Object.values(DO)[this.displacementTypeIndex.value]){case"map":{r=e.include(K1e.Nodes.map),i.push(this.movementOrTexture.getTexture(e,"t")),i.push("uv"),i.push(this.cropOrOffset.build(e,"f")),this.mat&&i.push(this.mat.build(e,"mat3"));break}case"noise":{let n=["simplexPrecise","simplexFractal","simplexAshima","fbm","perlin","voronoi"][this.noiseFunctionIndex.value],a=new ut(`vec3 orthogonal(vec3 v) {
							return normalize(abs(v.x) > abs(v.z) ? vec3(-v.y, v.x, 0.0) : vec3(0.0, -v.z, v.y));
						}`),o=n=="voronoi"?`
					float v = ${n}((p + offset) * scale * 0.001 + neighbour_offset + (movement * 0.1), voronoiStyle, smoothness, seed, quality);
					v = remap(v, lowCut, highCut, 0.0, 1.0);
					v = smax(v, 0.0, smoothness * 0.25);
					v = smin(v, 1.0, smoothness * 0.25);

					return p + n * v * intensity;
					`:`
					return p + n * ${n}((p + offset) * scale * 0.001 + neighbour_offset + (movement * 0.1)) * intensity;
					`,s=new ut(`vec3 distorted(vec3 p, vec3 n, float scale, float intensity, vec3 offset, float neighbour_offset, float movement, int voronoiStyle, float smoothness, float seed, float highCut, float lowCut, int quality) {
							${o}
						}`,[ds.simplexPrecise,ds.simplexFractal,ds.simplexAshima,ds.fbm,ds.perlin,ds.voronoi]),l=new ut(`vec3 vertexDisplacementNoise(vec3 position, vec3 normal, float scale, vec3 offset, float movement, int voronoiStyle, float smoothness, float seed, float highCut, float lowCut, int quality, float intensity, out vec3 displaced_normal) {
							vec3 displaced_position = distorted(position, normal, scale, intensity, offset, neighbor_offset, movement, voronoiStyle, smoothness, seed, highCut, lowCut, quality);
							vec3 tangent1 = orthogonal(normal);
							vec3 tangent2 = normalize(cross(normal, tangent1));

                            // TODO(Max): The distance to the neighbors was originally scaled by 0.1.
                            // This caused some small oval/circular visual artifacts in the lighting.
                            // For now, simply using neighbors further away betters the problem,
                            // but we should figure out the underlying cause when we have some time.
                            // Maybe its related to how we calculate the tangent and bitangent?
							vec3 nearby1 = position + tangent1;
							vec3 nearby2 = position + tangent2;
							vec3 distorted1 = distorted(nearby1, normal, scale, intensity, offset, neighbor_offset, movement, voronoiStyle, smoothness, seed, highCut, lowCut, quality);
							vec3 distorted2 = distorted(nearby2, normal, scale, intensity, offset, neighbor_offset, movement, voronoiStyle, smoothness, seed, highCut, lowCut, quality);
							displaced_normal = normalize(cross(distorted1 - displaced_position, distorted2 - displaced_position));
							return displaced_position;
						}`,[s,a]);r=e.include(l),i.push(this.scale.build(e,"f")),i.push(this.cropOrOffset.build(e,"v3")),i.push(this.movementOrTexture.build(e,"f")),i.push(this.voronoiStyle.build(e,"i")),i.push(this.smoothness.build(e,"f")),i.push(this.seed.build(e,"f")),i.push(this.highCut.build(e,"f")),i.push(this.lowCut.build(e,"f")),i.push(this.quality.build(e,"i"));break}}return i.push(this.intensity.build(e,"f")),i.push("displaced_normal"),e.format(r+"("+i.join(",")+")",this.getType(e),t)}else return console.warn("VertexDisplacementNode is not compatible with "+e.shader+" shader."),e.format("vec3( 0.0 )",this.getType(e),t)}},J1e=K1e;J1e.Nodes=function(){let e=new ut(`vec3 orthogonal(vec3 v) {
				return normalize(abs(v.x) > abs(v.z) ? vec3(-v.y, v.x, 0.0) : vec3(0.0, -v.z, v.y));
			}`),t=new ut(`float displacementMapTexture(sampler2D tex, float crop, vec2 uv, mat3 mat, vec2 offset) {
				vec2 uvs = (mat * vec3(uv * 2.0 - 1.0, 1.0) / 2.0 + 0.5).xy + offset;
				vec4 tmp = texture2D(tex, uvs);
				vec3 col = tmp.rgb;
				if (crop > 0.5) {
					if ( uvs.x < 0.0 || uvs.x > 1.0 || uvs.y < 0.0 || uvs.y > 1.0 )  {
						return 0.0;
					}
				}
				return col.r;
			}`);return{map:new ut(`vec3 vertexDisplacementMap(vec3 position, vec3 normal, sampler2D tex, vec2 uv, float crop, mat3 mat, float intensity, out vec3 displaced_normal) {
				vec3 displaced_position = position + normal * displacementMapTexture(tex, crop, uv, mat, vec2(0.0)) * intensity;
				vec3 tangent1 = normalize(orthogonal(normal));
				vec3 tangent2 = normalize(cross(normal, tangent1));
				vec3 nearby1 = position + tangent1 * 0.1;
				vec3 nearby2 = position + tangent2 * 0.1;
				vec3 distorted1 = nearby1 + normal * displacementMapTexture(tex, crop, uv, mat, vec2(neighbor_offset)) * intensity;
				vec3 distorted2 = nearby2 + normal * displacementMapTexture(tex, crop, uv, mat, vec2(neighbor_offset)) * intensity;
				displaced_normal = normalize(cross(distorted1 - displaced_position, distorted2 - displaced_position));
				return displaced_position;
			}`,[e,t])}}();var Ht={normalRenderTarget:new Zh,normalRenderTargetDepth:new Zh,transmissionRenderTarget:new Zh,aspectRatio:new Oa,transmissionSize:new Oa(2048,2048),transmissionRenderTargetDepth:new Zh,aoRenderTarget:new Zh,aoEnabled:new Ho,pixelRatioNode:new mt(1),resolution:new Oa,penumbraSize:new D0(5,.5),frameIndex:new ki(0),transmissionLod:new ki(2)};for(let e of Object.values(Ht))e.isRenderGlobal=!0;var $1e={skiaWasmUrl:"https://unpkg.com/@splinetool/ui-wasm@1.9.47/build/ui.wasm"},rH=class extends Yn{constructor(){super("basic"),this.nodeType="Basic",this.color=new fn(Xs),this.shadingAlpha=new mt(1),this.shadingBlend=new ki(0),this.previousModelViewMatrix=new oh,this.previouseProjectionMatrix=new oh}get category(){return"phong"}generate(e){let t;if(e.isShader("vertex")){let r=this.position?this.position.analyzeAndFlow(e,"v3",{cache:"position"}):void 0;e.mergeUniform({frameIndex:Ht.frameIndex}),e.mergeUniform({resolution:Ht.resolution}),e.mergeUniform({previousModelViewMatrix:this.previousModelViewMatrix}),e.mergeUniform({previousProjectionMatrix:this.previouseProjectionMatrix}),e.mergeUniform(Yy.merge([st.fog])),e.addParsCode(["varying vec3 vViewPosition;","varying vec3 vWPosition;","#include <fog_pars_vertex>","#include <skinning_pars_vertex>","#include <normal_pars_vertex>","#include <morphtarget_pars_vertex>"].join(`
`));let i=["#include <beginnormal_vertex>","#include <morphnormal_vertex>",`
				#include <skinbase_vertex>
				#include <skinnormal_vertex>
				#if !defined( USE_LAYER_DISPLACE )
					#include <defaultnormal_vertex>
				#endif

				vec3 displaced_position = position;
				vec3 displaced_normal = normal;

				#if defined( USE_LAYER_DISPLACE )
					vec3 transformed;
					vec3 transformedNormal;
				#endif
				`,"#include <normal_vertex>",`
				#if !defined( USE_LAYER_DISPLACE )
					#include <begin_vertex>
				#endif /* !USE_LAYER_DISPLACE */
				`];r&&i.push(r.code,r.result?"displaced_position = "+r.result+";":""),i.push("transformed = displaced_position;","#include <morphtarget_vertex>","#include <skinning_vertex>","transformedNormal = normalMatrix * displaced_normal;","#ifndef FLAT_SHADED","	vNormal = transformedNormal;","#endif"),i.push("#include <project_vertex>","#include <fog_vertex>","#include <clipping_planes_vertex>","	vViewPosition = - mvPosition.xyz;","#include <worldpos_vertex>"),i.push("vWPosition = ( modelMatrix * vec4( transformed, 1.0 ) ).xyz;"),t=i.join(`
`)}else{this.color===void 0&&(this.color=new fn(Xs)),this.color.analyze(e,{slot:"color"}),this.alpha&&this.alpha.analyze(e),this.afterColor&&this.afterColor.analyze(e,{slot:"afterColor"});let r=this.color.flow(e,"c",{slot:"color"}),i=this.alpha?this.alpha.flow(e,"f"):void 0,n=this.alphaOverride?this.alphaOverride.flow(e,"f"):void 0,a=this.afterColor?this.afterColor.flow(e,"c",{slot:"afterColor"}):void 0;e.requires.transparent=i!==void 0,e.addParsCode(["varying vec3 vWPosition;","#include <fog_pars_fragment>","#include <dithering_pars_fragment>","varying vec3 vViewPosition;","#include <normal_pars_fragment>"].join(`
`));let o=["#include <normal_fragment_begin>",r.code];i&&o.push(i.code,"#ifdef ALPHATEST"," if ( "+i.result+" <= ALPHATEST ) discard;","#endif"),a?o.push(a.code,`vec3 outgoingLight = ${r.result};`,`vec3 finalColor = spe_blend(outgoingLight, ${a.result}, 1.0, SPE_BLENDING_NORMAL);`):o.push(`vec3 finalColor = ${r.result};`);let s="1.0";this.mask&&(this.mask.analyze(e),s=`luminance(${this.mask.flow(e,"v3").result})`),i?o.push(`gl_FragColor = vec4( finalColor, accumAlpha * ${i.result} * ${s} );`):o.push("gl_FragColor = vec4("+r.result+", 1.0 );"),n&&o.push(`gl_FragColor.a *= ${n.result};`),o.push("#include <fog_fragment>","#include <dithering_fragment>"),t=o.join(`
`)}return t}},T_t=class extends Yn{constructor(){super("lambert"),this.nodeType="Lambert",this.color=new fn(Xs),this.emissive=new fn(0),this.emissiveIntensity=new mt(1),this.previousModelViewMatrix=new oh,this.previouseProjectionMatrix=new oh,this.shadingAlpha=new mt(1),this.shadingBlend=new ki(0),this.occlusion=new Ho(!0)}get category(){return"lambert"}build(e){let t;if(e.define("LAMBERT"),e.requires.lights=!0,e.extensions.derivatives=!0,e.isShader("vertex")){let r=this.position?this.position.analyzeAndFlow(e,"v3",{cache:"position"}):void 0;e.mergeUniform({frameIndex:Ht.frameIndex}),e.mergeUniform({resolution:Ht.resolution}),e.mergeUniform({previousModelViewMatrix:this.previousModelViewMatrix}),e.mergeUniform({previousProjectionMatrix:this.previouseProjectionMatrix}),e.mergeUniform(Yy.merge([st.fog,st.lights])),e.addParsCode(["varying vec3 vViewPosition;","varying vec3 vWPosition;","varying vec3 vLightFront;","varying vec3 vIndirectFront;","#ifndef DOUBLE_SIDED","   #define DOUBLE_SIDED","#endif","#ifdef DOUBLE_SIDED","	varying vec3 vLightBack;","	varying vec3 vIndirectBack;","#endif","#include <bsdfs>","#include <lights_pars_begin>","#include <color_pars_vertex>","#include <fog_pars_vertex>","#include <skinning_pars_vertex>","#include <normal_pars_vertex>","#include <morphtarget_pars_vertex>","#include <shadowmap_pars_vertex>","#include <clipping_planes_pars_vertex>"].join(`
`));let i=["#include <beginnormal_vertex>","#include <morphnormal_vertex>",`
				#include <skinbase_vertex>
				#include <skinnormal_vertex>
				#ifndef USE_LAYER_DISPLACE
					#include <defaultnormal_vertex>
				#endif

				vec3 displaced_position = position;
				vec3 displaced_normal = objectNormal;

				#ifdef USE_LAYER_DISPLACE
					vec3 transformed;
					vec3 transformedNormal;
				#endif
				`,"#include <normal_vertex>",`
				#ifndef USE_LAYER_DISPLACE
					#include <begin_vertex>
				#endif
				`];r&&i.push(r.code,r.result?"displaced_position = "+r.result+";":""),i.push("transformed = displaced_position;","#include <morphtarget_vertex>","#include <skinning_vertex>","transformedNormal = normalMatrix * displaced_normal;","#ifndef FLAT_SHADED","    vNormal = transformedNormal;","#endif"),i.push("	#include <project_vertex>","	#include <clipping_planes_vertex>","	vViewPosition = - mvPosition.xyz;","	#include <worldpos_vertex>",`
					vec3 diffuse = vec3( 1.0 );
					GeometricContext geometry;
					geometry.position = mvPosition.xyz;
					geometry.normal = normalize( transformedNormal );
					geometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( -mvPosition.xyz );
				`),i.push(`
					GeometricContext backGeometry;
					backGeometry.position = geometry.position;
					backGeometry.normal = -geometry.normal;
					backGeometry.viewDir = geometry.viewDir;
					vLightFront = vec3( 0.0 );
					vIndirectFront = vec3( 0.0 );
					#ifdef DOUBLE_SIDED
						vLightBack = vec3( 0.0 );
						vIndirectBack = vec3( 0.0 );
					#endif
					IncidentLight directLight;
					float dotNL;
					vec3 directLightColor_Diffuse;
					vIndirectFront += getAmbientLightIrradiance( ambientLightColor );
					vIndirectFront += getLightProbeIrradiance( lightProbe, geometry.normal );
					#ifdef DOUBLE_SIDED
						vIndirectBack += getAmbientLightIrradiance( ambientLightColor );
						vIndirectBack += getLightProbeIrradiance( lightProbe, backGeometry.normal );
					#endif
					#if NUM_POINT_LIGHTS > 0
						#pragma unroll_loop_start
						for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
							getPointLightInfo( pointLights[ i ], geometry, directLight );
							dotNL = dot( geometry.normal, directLight.direction );
							directLightColor_Diffuse = directLight.color;
							vLightFront += saturate( dotNL ) * directLightColor_Diffuse;
							#ifdef DOUBLE_SIDED
								vLightBack += saturate( -dotNL ) * directLightColor_Diffuse;
							#endif
						}
						#pragma unroll_loop_end
					#endif
					#if NUM_SPOT_LIGHTS > 0
						#pragma unroll_loop_start
						for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
							getSpotLightInfo( spotLights[ i ], geometry, directLight );
							dotNL = dot( geometry.normal, directLight.direction );
							directLightColor_Diffuse = directLight.color;
							vLightFront += saturate( dotNL ) * directLightColor_Diffuse;
							#ifdef DOUBLE_SIDED
								vLightBack += saturate( -dotNL ) * directLightColor_Diffuse;
							#endif
						}
						#pragma unroll_loop_end
					#endif
					#if NUM_DIR_LIGHTS > 0
						#pragma unroll_loop_start
						for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
							getDirectionalLightInfo( directionalLights[ i ], geometry, directLight );
							dotNL = dot( geometry.normal, directLight.direction );
							directLightColor_Diffuse = directLight.color;
							vLightFront += saturate( dotNL ) * directLightColor_Diffuse;
							#ifdef DOUBLE_SIDED
								vLightBack += saturate( -dotNL ) * directLightColor_Diffuse;
							#endif
						}
						#pragma unroll_loop_end
					#endif
					#if NUM_HEMI_LIGHTS > 0
						#pragma unroll_loop_start
						for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
							vIndirectFront += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry.normal );
							#ifdef DOUBLE_SIDED
								vIndirectBack += getHemisphereLightIrradiance( hemisphereLights[ i ], backGeometry.normal );
							#endif
						}
						#pragma unroll_loop_end
					#endif
				`,"	#include <shadowmap_vertex>","	#include <fog_vertex>"),i.push("vWPosition = ( modelMatrix * vec4( transformed, 1.0 ) ).xyz;"),t=i.join(`
`)}else{e.mergeUniform({penumbraSize:Ht.penumbraSize}),e.mergeUniform({frameIndex:Ht.frameIndex}),e.mergeUniform({aoMap:Ht.aoRenderTarget}),e.mergeUniform({aoEnabled:Ht.aoEnabled}),this.color===void 0&&(this.color=new fn(Xs)),this.color.analyze(e,{slot:"color"}),this.shadingAlpha.analyze(e),this.shadingBlend.analyze(e),this.afterColor&&this.afterColor.analyze(e,{slot:"afterColor"}),this.alpha&&this.alpha.analyze(e);let r=this.color.flow(e,"c",{slot:"color"}),i=this.emissive.flow(e,"c",{slot:"emissive"}),n=this.emissiveIntensity.flow(e,"f",{slot:"emissive"}),a=this.occlusion.flow(e,"b",{slot:"occlusion"}),o=this.shadingAlpha.flow(e,"f"),s=this.shadingBlend.flow(e,"i"),l=this.afterColor?this.afterColor.flow(e,"c",{slot:"afterColor"}):void 0,u=this.alpha?this.alpha.flow(e,"f"):void 0,c=this.alphaOverride?this.alphaOverride.flow(e,"f"):void 0;e.requires.transparent=u!==void 0,e.addParsCode(["uniform float penumbraSize[5];","uniform sampler2D aoMap;","uniform bool aoEnabled;","varying vec3 vViewPosition;","varying vec3 vWPosition;","varying vec3 vLightFront;","varying vec3 vIndirectFront;","#ifndef DOUBLE_SIDED","   #define DOUBLE_SIDED","#endif","#include <normal_pars_fragment>","#ifdef DOUBLE_SIDED","	varying vec3 vLightBack;","	varying vec3 vIndirectBack;","#endif","#include <bsdfs>","#include <lights_pars_begin>","#include <fog_pars_fragment>","#include <shadowmap_pars_fragment>","#include <shadowmask_pars_fragment>","#include <clipping_planes_pars_fragment>","#include <dithering_pars_fragment>"].join(`
`));let h=["#include <normal_fragment_begin>",`
				// NOTE: gl_FrontFacing alternative using face normal estimation.
				vec3 viewdx = dFdx(vViewPosition);
				vec3 viewdy = dFdy(vViewPosition);
				vec3 faceNormal = normalize(cross(viewdx, viewdy));
				bool isFrontFacing = (dot(normal, faceNormal) >= 0.0);
				`,"#include <clipping_planes_fragment>"];h.push(r.code,"vec3 diffuseColor = "+r.result+";","ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );"),u&&h.push(u.code,"#ifdef ALPHATEST","if ( "+u.result+" <= ALPHATEST ) discard;","#endif"),h.push("#ifdef DOUBLE_SIDED","	reflectedLight.indirectDiffuse += ( isFrontFacing ) ? vIndirectFront : vIndirectBack;","#else","	reflectedLight.indirectDiffuse += vIndirectFront;","#endif","#include <lightmap_fragment>","reflectedLight.indirectDiffuse *= BRDF_Lambert( diffuseColor.rgb );","#ifdef DOUBLE_SIDED","	reflectedLight.directDiffuse = ( isFrontFacing ) ? vLightFront : vLightBack;","#else","	reflectedLight.directDiffuse = vLightFront;","#endif","reflectedLight.directDiffuse *= BRDF_Lambert( diffuseColor.rgb ) * getShadowMask();"),i&&h.push(i.code,"reflectedLight.directDiffuse += "+i.result+" * "+n.result+";"),h.push("vec3 ao = aoEnabled && "+a.result+" ? tex2D(aoMap, gl_FragCoord.xy / resolution).rgb : vec3(1.0);","vec3 outgoingLight = (reflectedLight.directDiffuse + reflectedLight.indirectDiffuse) ;");let d="1.0";this.mask&&(this.mask.analyze(e),d=`luminance(${this.mask.flow(e,"v3").result})`),h.push(`
				if (outgoingLight != diffuseColor) {
					float lightAccu = clamp( length( reflectedLight.directSpecular + reflectedLight.indirectSpecular ), 0.0, 1.0 );
					accumAlpha += ( 1.0 - accumAlpha ) * ${o.result} * ${d} * lightAccu;
					outgoingLight = spe_blend( diffuseColor, outgoingLight, ${o.result} * ${d}, ${s.result} );

					outgoingLight *= ao;
				}
				`),l&&h.push(l.code,`outgoingLight = spe_blend(outgoingLight, ${l.result}, 1.0, SPE_BLENDING_NORMAL);`),u?h.push(`gl_FragColor = vec4( outgoingLight, accumAlpha * ${u.result} );`):h.push("gl_FragColor = vec4( outgoingLight, 1.0 );"),c&&h.push(`gl_FragColor.a *= ${c.result};`),h.push("#include <encodings_fragment>","#include <fog_fragment>","#include <dithering_fragment>"),t=h.join(`
`)}return t}},dy=function(){let e=new ut(`vec2 dHdxy(sampler2D bumpMap, vec2 bumpMapUv, float bumpScale) {

            // Gradient of UVs w.r.t. X coordinate (in screen-space)
            vec2 dSTdx = dFdx(bumpMapUv);

            // Gradient of UVs w.r.t. Y coordinate (in screen-space)
            vec2 dSTdy = dFdy(bumpMapUv);
            
            // Forward differencing
            float Hll = bumpScale * luminance(texture(bumpMap, bumpMapUv).rgb);
            float dBx = bumpScale * luminance(texture(bumpMap, bumpMapUv + dSTdx).rgb) - Hll;
            float dBy = bumpScale * luminance(texture(bumpMap, bumpMapUv + dSTdy).rgb) - Hll;
            
            return vec2( dBx, dBy );
        }`),t=new ut(`vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {
            vec3 vSigmaX = dFdx( surf_pos.xyz );
            vec3 vSigmaY = dFdy( surf_pos.xyz );
            vec3 vN = surf_norm; // normalized
            
            vN = normalize(vN);

            vec3 R1 = cross( vSigmaY, vN );
            vec3 R2 = cross( vN, vSigmaX );

            R1 = normalize(R1);
            R2 = normalize(R2);
    
            float fDet = dot( vSigmaX, R1 ) * faceDirection;
    
            vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );
            return normalize( abs( fDet ) * vN - vGrad );
        }`);return{dHdxy:e,perturbNormalArb:t}}(),P_t=class extends Yn{constructor(){super("phong"),this.nodeType="Phong",this.color=new fn(Xs),this.specular=new fn(1118481),this.shininess=new mt(30),this.previousModelViewMatrix=new oh,this.previouseProjectionMatrix=new oh,this.shadingAlpha=new mt(1),this.shadingBlend=new ki(0),this.occlusion=new Ho(!0)}get category(){return"phong"}build(e){let t;if(e.define("PHONG"),e.requires.lights=!0,e.extensions.derivatives=!0,e.isShader("vertex")){let r=this.position?this.position.analyzeAndFlow(e,"v3",{cache:"position"}):void 0;e.mergeUniform({frameIndex:Ht.frameIndex}),e.mergeUniform({resolution:Ht.resolution}),e.mergeUniform({previousModelViewMatrix:this.previousModelViewMatrix}),e.mergeUniform({previousProjectionMatrix:this.previouseProjectionMatrix}),e.mergeUniform(Yy.merge([st.fog,st.lights])),e.addParsCode(["varying vec3 vViewPosition;","varying vec3 vWPosition;","#include <fog_pars_vertex>","#include <skinning_pars_vertex>","#include <normal_pars_vertex>","#include <morphtarget_pars_vertex>","#include <shadowmap_pars_vertex>","#include <clipping_planes_pars_vertex>"].join(`
`));let i=["#include <beginnormal_vertex>","#include <morphnormal_vertex>",`
				#include <skinbase_vertex>
				#include <skinnormal_vertex>
				#ifndef USE_LAYER_DISPLACE
					#include <defaultnormal_vertex>
				#endif

				vec3 displaced_position = position;
				vec3 displaced_normal = objectNormal;

				#ifdef USE_LAYER_DISPLACE
					vec3 transformed;
					vec3 transformedNormal;
				#endif
				`,"#include <normal_vertex>",`
				#ifndef USE_LAYER_DISPLACE
					#include <begin_vertex>
				#endif
				`];r&&i.push(r.code,r.result?"displaced_position = "+r.result+";":""),i.push("transformed = displaced_position;","#include <morphtarget_vertex>","#include <skinning_vertex>","transformedNormal = normalMatrix * displaced_normal;","#ifndef FLAT_SHADED","    vNormal = transformedNormal;","#endif"),i.push("	#include <project_vertex>","	#include <clipping_planes_vertex>","	vViewPosition = - mvPosition.xyz;","	#include <worldpos_vertex>","	#include <shadowmap_vertex>","	#include <fog_vertex>"),i.push("vWPosition = ( modelMatrix * vec4( transformed, 1.0 ) ).xyz;"),t=i.join(`
`)}else{e.mergeUniform({penumbraSize:Ht.penumbraSize}),e.mergeUniform({frameIndex:Ht.frameIndex}),e.mergeUniform({aoMap:Ht.aoRenderTarget}),e.mergeUniform({aoEnabled:Ht.aoEnabled}),this.color===void 0&&(this.color=new fn(Xs)),this.color.analyze(e,{slot:"color"}),this.specular.analyze(e),this.shininess.analyze(e);let r=this.occlusion.flow(e,"b",{slot:"occlusion"});this.shadingAlpha.analyze(e),this.shadingBlend.analyze(e),this.afterColor&&this.afterColor.analyze(e,{slot:"afterColor"}),this.alpha&&this.alpha.analyze(e);let i=this.color.flow(e,"c",{slot:"color"}),n=this.specular.flow(e,"c"),a=this.shininess.flow(e,"f"),o=this.shadingAlpha.flow(e,"f"),s=this.shadingBlend.flow(e,"i"),l=this.afterColor?this.afterColor.flow(e,"c",{slot:"afterColor"}):void 0,u=this.alpha?this.alpha.flow(e,"f"):void 0,c=this.alphaOverride?this.alphaOverride.flow(e,"f"):void 0;e.requires.transparent=u!==void 0,e.addParsCode(["varying vec3 vWPosition;","uniform vec3 emissive;","uniform float penumbraSize[5];","uniform sampler2D aoMap;","uniform bool aoEnabled;","#include <normal_pars_fragment>","#include <fog_pars_fragment>","#include <bsdfs>","#include <lights_pars_begin>","#include <lights_phong_pars_fragment>","#include <shadowmap_pars_fragment>","#include <dithering_pars_fragment>"].join(`
`));let h=["#include <normal_fragment_begin>",`
				// NOTE: gl_FrontFacing alternative using face normal estimation.
				vec3 viewdx = dFdx(vViewPosition);
				vec3 viewdy = dFdy(vViewPosition);
				vec3 faceNormal = normalize(cross(viewdx,viewdy));
				if (dot(normal, faceNormal) < 0.0) {
					normal *= -1.0;
				}
				`,"	BlinnPhongMaterial material;"];if(this.bumpMap){e.include(dy.dHdxy),e.include(dy.perturbNormalArb);let f=this.bumpMap.texture.flow(e,"t"),p=this.bumpMap.flow(e,"v3"),v=this.bumpMapIntensity?this.bumpMapIntensity.flow(e,"f").result:"1.0",m="";this.bumpMap.projection.value===4?m=`
					vec3 bumpNormal = vec3(0.0);
					{
						vec2 uv0 = g${this.bumpMap.uuid.toString().replace(/-/g,"")}_writeUvs0;
						vec2 uv1 = g${this.bumpMap.uuid.toString().replace(/-/g,"")}_writeUvs1;
						vec2 uv2 = g${this.bumpMap.uuid.toString().replace(/-/g,"")}_writeUvs2;
						vec3 weights = g${this.bumpMap.uuid.toString().replace(/-/g,"")}_triplanarWeights;

						vec2 grad0 = dHdxy(${f.result}, uv0, ${v});
						vec3 n0 = perturbNormalArb(-vViewPosition, normal, grad0, faceDirection);

						vec2 grad1 = dHdxy(${f.result}, uv1, ${v});
						vec3 n1 = perturbNormalArb(-vViewPosition, normal, grad1, faceDirection);

						vec2 grad2 = dHdxy(${f.result}, uv2, ${v});
						vec3 n2 = perturbNormalArb(-vViewPosition, normal, grad2, faceDirection);
						
						bumpNormal = n0 * weights.z + n1 * weights.x + n2 * weights.y;
						bumpNormal = normalize(bumpNormal);
					}

					normal = bumpNormal;
					`:m=`
					vec2 bumpMapCachedUv = g${this.bumpMap.uuid.toString().replace(/-/g,"")}_writeUvs;
					vec2 grad = dHdxy(${f.result}, bumpMapCachedUv, ${v});
					normal = perturbNormalArb( - vViewPosition, normal, grad, faceDirection );
					`,h.push(`// Call the Texture Layer's function once here so that it writes out its procedural UV coordinates
					${p.result};
					${m}
					`)}h.push(i.code,"	vec3 diffuseColor = "+i.result+";","	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );","	vec3 totalEmissiveRadiance = emissive;",n.code,"	vec3 specular = "+n.result+";",a.code,"	float shininess = max( 0.0001, "+a.result+" );","	float specularStrength = 1.0;"),u&&h.push(u.code,"#ifdef ALPHATEST","if ( "+u.result+" <= ALPHATEST ) discard;","#endif"),h.push("material.diffuseColor = diffuseColor;"),h.push("material.specularColor = specular;","material.specularShininess = shininess;","material.specularStrength = specularStrength;","#include <lights_fragment_begin>","#include <lights_fragment_end>"),h.push("vec3 ao = aoEnabled && "+r.result+" ? tex2D(aoMap, gl_FragCoord.xy / resolution).rgb : vec3(1.0);","vec3 outgoingLight = ((reflectedLight.directDiffuse + reflectedLight.indirectDiffuse)) + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;");let d="1.0";this.mask&&(this.mask.analyze(e),d=`luminance(${this.mask.flow(e,"v3").result})`),h.push(`
				if (outgoingLight != diffuseColor) {
					float lightAccu = clamp( length( reflectedLight.directSpecular + reflectedLight.indirectSpecular ), 0.0, 1.0 );
					accumAlpha += ( 1.0 - accumAlpha ) * ${o.result} * ${d} * lightAccu;
					outgoingLight = spe_blend( diffuseColor, outgoingLight, ${o.result} * ${d}, ${s.result} );
					
					outgoingLight *= ao;
				}
				`),l&&h.push(l.code,`outgoingLight = spe_blend(outgoingLight, ${l.result}, 1.0, SPE_BLENDING_NORMAL);`),u?h.push(`gl_FragColor = vec4( outgoingLight, accumAlpha * ${u.result});`):h.push("gl_FragColor = vec4( outgoingLight, 1.0 );"),c&&h.push(`gl_FragColor.a *= ${c.result};`),h.push("#include <encodings_fragment>","#include <fog_fragment>","#include <dithering_fragment>"),t=h.join(`
`)}return t}},D_t=class extends Yn{constructor(){super("standard"),this.nodeType="Standard",this.color=new fn(Xs),this.roughness=new mt(.3),this.metalness=new mt(0),this.reflectivity=new mt(.5),this.previousModelViewMatrix=new oh,this.previouseProjectionMatrix=new oh,this.shadingAlpha=new mt(1),this.shadingBlend=new ki(0),this.occlusion=new Ho(!0)}get category(){return"physical"}build(e){let t;if(e.define("STANDARD"),e.requires.lights=!0,e.extensions.derivatives=!0,e.extensions.shaderTextureLOD=!0,e.isShader("vertex")){let r=this.position?this.position.analyzeAndFlow(e,"v3",{cache:"position"}):void 0;e.mergeUniform({frameIndex:Ht.frameIndex}),e.mergeUniform({resolution:Ht.resolution}),e.mergeUniform({previousModelViewMatrix:this.previousModelViewMatrix}),e.mergeUniform({previousProjectionMatrix:this.previouseProjectionMatrix}),e.mergeUniform(Yy.merge([st.fog,st.lights])),st.LTC_1&&(e.uniforms.ltc_1={value:void 0},e.uniforms.ltc_2={value:void 0}),e.addParsCode(["varying vec3 vViewPosition;","varying vec3 vWPosition;","#include <fog_pars_vertex>","#include <skinning_pars_vertex>","#include <normal_pars_vertex>","#include <morphtarget_pars_vertex>","#include <shadowmap_pars_vertex>","#include <clipping_planes_pars_vertex>"].join(`
`));let i=["#include <beginnormal_vertex>","#include <morphnormal_vertex>",`
				#include <skinbase_vertex>
				#include <skinnormal_vertex>
				#if !defined( USE_LAYER_DISPLACE )
					#include <defaultnormal_vertex>
				#endif

				vec3 displaced_position = position;
				vec3 displaced_normal = objectNormal;

				#if defined( USE_LAYER_DISPLACE )
					vec3 transformed;
					vec3 transformedNormal;
				#endif
				`,"#include <normal_vertex>",`
				#if !defined( USE_LAYER_DISPLACE )
					#include <begin_vertex>
				#endif /* !USE_LAYER_DISPLACE */
				`];r&&i.push(r.code,r.result?"displaced_position = "+r.result+";":""),i.push("transformed = displaced_position;","#include <morphtarget_vertex>","#include <skinning_vertex>","transformedNormal = normalMatrix * displaced_normal;","#ifndef FLAT_SHADED","    vNormal = transformedNormal;","#endif"),i.push("#include <project_vertex>","#include <fog_vertex>","#include <clipping_planes_vertex>","	vViewPosition = - mvPosition.xyz;","#include <worldpos_vertex>","#include <shadowmap_vertex>"),i.push("vWPosition = ( modelMatrix * vec4( transformed, 1.0 ) ).xyz;"),t=i.join(`
`)}else{e.mergeUniform({penumbraSize:Ht.penumbraSize}),e.mergeUniform({frameIndex:Ht.frameIndex}),e.mergeUniform({aoMap:Ht.aoRenderTarget}),e.mergeUniform({aoEnabled:Ht.aoEnabled});let r={gamma:!0};this.color===void 0&&(this.color=new fn(Xs)),this.color.analyze(e,{slot:"color",context:r}),this.roughness.analyze(e),this.metalness.analyze(e);let i=this.occlusion.flow(e,"b",{slot:"occlusion"});this.shadingAlpha.analyze(e),this.shadingBlend.analyze(e),this.afterColor&&this.afterColor.analyze(e,{slot:"afterColor"}),this.alpha&&this.alpha.analyze(e),this.reflectivity&&this.reflectivity.analyze(e);let n=this.color.flow(e,"c",{slot:"color",context:r}),a=this.roughness.flow(e,"f"),o=this.metalness.flow(e,"f"),s=this.shadingAlpha.flow(e,"f"),l=this.shadingBlend.flow(e,"i"),u=this.afterColor?this.afterColor.flow(e,"c",{slot:"afterColor"}):void 0,c=this.alpha?this.alpha.flow(e,"f"):void 0,h=this.alphaOverride?this.alphaOverride.flow(e,"f"):void 0,d=this.reflectivity?this.reflectivity.flow(e,"f"):void 0;e.requires.transparent=c!==void 0,e.addParsCode(["varying vec3 vViewPosition;","varying vec3 vWPosition;","uniform float penumbraSize[5];","uniform sampler2D aoMap;","uniform bool aoEnabled;","#include <normal_pars_fragment>","#include <dithering_pars_fragment>","#include <fog_pars_fragment>","#include <bsdfs>","#include <lights_pars_begin>","#include <lights_physical_pars_fragment>","#include <shadowmap_pars_fragment>"].join(`
`));let f=["#include <clipping_planes_fragment>","	#include <normal_fragment_begin>",`
				// NOTE: gl_FrontFacing alternative using face normal estimation.
				vec3 viewdx = dFdx(vViewPosition);
				vec3 viewdy = dFdy(vViewPosition);
				vec3 faceNormal = normalize(cross(viewdx,viewdy));
				if (dot(normal, faceNormal) < 0.0) {
					normal *= -1.0;
				}
				`,"	PhysicalMaterial material;","	material.diffuseColor = vec3( 1.0 );"];if(this.bumpMap){e.include(dy.dHdxy),e.include(dy.perturbNormalArb);let v=this.bumpMap.texture.flow(e,"t"),m=this.bumpMap.flow(e,"v3"),g=this.bumpMapIntensity?this.bumpMapIntensity.flow(e,"f").result:"1.0",y="";this.bumpMap.projection.value===4?y=`
					vec3 bumpNormal = vec3(0.0);
					{
						vec2 uv0 = g${this.bumpMap.uuid.toString().replace(/-/g,"")}_writeUvs0;
						vec2 uv1 = g${this.bumpMap.uuid.toString().replace(/-/g,"")}_writeUvs1;
						vec2 uv2 = g${this.bumpMap.uuid.toString().replace(/-/g,"")}_writeUvs2;
						vec3 weights = g${this.bumpMap.uuid.toString().replace(/-/g,"")}_triplanarWeights;

						vec2 grad0 = dHdxy(${v.result}, uv0, ${g});
						vec3 n0 = perturbNormalArb(-vViewPosition, normal, grad0, faceDirection);

						vec2 grad1 = dHdxy(${v.result}, uv1, ${g});
						vec3 n1 = perturbNormalArb(-vViewPosition, normal, grad1, faceDirection);

						vec2 grad2 = dHdxy(${v.result}, uv2, ${g});
						vec3 n2 = perturbNormalArb(-vViewPosition, normal, grad2, faceDirection);
						
						bumpNormal = n0 * weights.z + n1 * weights.x + n2 * weights.y;
						bumpNormal = normalize(bumpNormal);
					}

					normal = bumpNormal;
					`:y=`
					vec2 bumpMapCachedUv = g${this.bumpMap.uuid.toString().replace(/-/g,"")}_writeUvs;
					vec2 grad = dHdxy(${v.result}, bumpMapCachedUv, ${g});
					normal = perturbNormalArb( - vViewPosition, normal, grad, faceDirection );
					`,f.push(`// Call the Texture Layer's function once here so that it writes out its procedural UV coordinates
					${m.result};
					${y}
					`)}if(f.push(n.code,"	vec3 diffuseColor = "+n.result+";","	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );",o.code,"	float metalnessFactor = "+o.result+";"),this.roughnessMap){let v=this.roughnessMap.texture.flow(e,"t"),m=this.roughnessMap.flow(e,"v3"),g="";this.roughnessMap.projection.value===4?g=`
					float roughnessChange = 1.0;
					{
						vec2 uv0 = g${this.roughnessMap.uuid.toString().replace(/-/g,"")}_writeUvs0;
						vec2 uv1 = g${this.roughnessMap.uuid.toString().replace(/-/g,"")}_writeUvs1;
						vec2 uv2 = g${this.roughnessMap.uuid.toString().replace(/-/g,"")}_writeUvs2;
						vec3 weights = g${this.roughnessMap.uuid.toString().replace(/-/g,"")}_triplanarWeights;

						float r0 = luminance(texture(${v.result}, uv0).rgb) * roughnessScale;
						float r1 = luminance(texture(${v.result}, uv1).rgb) * roughnessScale;
						float r2 = luminance(texture(${v.result}, uv2).rgb) * roughnessScale;

						roughnessChange = (r0 * weights.z + r1 * weights.x + r2 * weights.y);
					}
					float roughnessFactor = roughnessChange * ${a.result};
					`:g=`
					vec2 roughnessMapCachedUv = g${this.roughnessMap.uuid.toString().replace(/-/g,"")}_writeUvs;

					vec4 vals = texture(${v.result},  roughnessMapCachedUv);
					float roughnessFactor = luminance(vals.rgb) * ${a.result};
					`,f.push(`// Call the Texture Layer's function once here so that it writes out its procedural UV coordinates
					${m.result};

					const float roughnessScale = 1.0;

					${g}
				`)}else f.push(a.code,"	float roughnessFactor = "+a.result+";");c&&f.push(c.code,"#ifdef ALPHATEST","	if ( "+c.result+" <= ALPHATEST ) discard;","#endif"),f.push("vec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );","float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );"),f.push("material.diffuseColor = diffuseColor * ( 1.0 - metalnessFactor );","material.roughness = max( roughnessFactor, 0.0525 );","material.roughness += geometryRoughness;","material.roughness = min( material.roughness, 1.0 );","material.roughness = clamp( roughnessFactor, 0.04, 1.0 );"),d?f.push(d.code,"material.specularColor = mix( vec3( 0.16 * pow2( "+d.result+" ) ), diffuseColor, metalnessFactor );"):f.push("material.specularColor = mix( vec3( 0.04 ), diffuseColor, metalnessFactor );"),f.push("#include <lights_fragment_begin>"),f.push("#include <lights_fragment_end>"),f.push("vec3 ao = aoEnabled && "+i.result+" ? tex2D(aoMap, gl_FragCoord.xy / resolution).rgb : vec3(1.0);","vec3 outgoingLight = ((reflectedLight.directDiffuse + reflectedLight.indirectDiffuse)) + reflectedLight.directSpecular + reflectedLight.indirectSpecular;");let p="1.0";this.mask&&(this.mask.analyze(e),p=`luminance(${this.mask.flow(e,"v3").result})`),f.push(`
				if (outgoingLight != diffuseColor) {
					float lightAccu = clamp( length( reflectedLight.directSpecular + reflectedLight.indirectSpecular ), 0.0, 1.0 );
					accumAlpha += ( 1.0 - accumAlpha ) * ${s.result} * ${p} * lightAccu;
					outgoingLight = spe_blend( diffuseColor, outgoingLight, ${s.result} * ${p}, ${l.result} );
					
					outgoingLight *= ao;
				}
				`),u&&f.push(u.code,`outgoingLight = spe_blend(outgoingLight, ${u.result}, 1.0, SPE_BLENDING_NORMAL);`),c?f.push(`gl_FragColor = vec4( outgoingLight, accumAlpha * ${c.result} );`):f.push("gl_FragColor = vec4( outgoingLight, 1.0 );"),h&&f.push(`gl_FragColor.a *= ${h.result};`),f.push("#include <encodings_fragment>","#include <fog_fragment>","#include <dithering_fragment>"),t=f.join(`
`)}return t}},I_t=class extends Yn{constructor(){super("toon"),this.nodeType="Toon",this.color=new fn(Xs),this.specular=new fn(1118481),this.shininess=new mt(30),this.previousModelViewMatrix=new oh,this.previouseProjectionMatrix=new oh,this.shadingAlpha=new mt(1),this.shadingBlend=new ki(0)}get category(){return"toon"}build(e){let t;if(e.define("TOON"),e.requires.lights=!0,e.extensions.derivatives=!0,e.isShader("vertex")){let r=this.position?this.position.analyzeAndFlow(e,"v3",{cache:"position"}):void 0;e.mergeUniform({frameIndex:Ht.frameIndex}),e.mergeUniform({resolution:Ht.resolution}),e.mergeUniform({previousModelViewMatrix:this.previousModelViewMatrix}),e.mergeUniform({previousProjectionMatrix:this.previouseProjectionMatrix}),e.mergeUniform(Yy.merge([st.fog,st.lights])),e.addParsCode(["varying vec3 vViewPosition;","varying vec3 vWPosition;","#include <fog_pars_vertex>","#include <skinning_pars_vertex>","#include <normal_pars_vertex>","#include <morphtarget_pars_vertex>","#include <shadowmap_pars_vertex>","#include <clipping_planes_pars_vertex>"].join(`
`));let i=["#include <beginnormal_vertex>","#include <morphnormal_vertex>",`
				#include <skinbase_vertex>
				#include <skinnormal_vertex>
				#ifndef USE_LAYER_DISPLACE
					#include <defaultnormal_vertex>
				#endif

				vec3 displaced_position = position;
				vec3 displaced_normal = objectNormal;

				#ifdef USE_LAYER_DISPLACE
					vec3 transformed;
					vec3 transformedNormal;
				#endif
				`,"#include <normal_vertex>",`
				#ifndef USE_LAYER_DISPLACE
					#include <begin_vertex>
				#endif
				`];r&&i.push(r.code,r.result?"displaced_position = "+r.result+";":""),i.push("transformed = displaced_position;","#include <morphtarget_vertex>","#include <skinning_vertex>","transformedNormal = normalMatrix * displaced_normal;","#ifndef FLAT_SHADED","    vNormal = transformedNormal;","#endif"),i.push("	#include <project_vertex>","	#include <fog_vertex>","	#include <clipping_planes_vertex>","	vViewPosition = - mvPosition.xyz;","	#include <worldpos_vertex>","	#include <shadowmap_vertex>","	#include <fog_vertex>"),i.push("vWPosition = ( modelMatrix * vec4( transformed, 1.0 ) ).xyz;"),t=i.join(`
`)}else{e.mergeUniform({penumbraSize:Ht.penumbraSize}),e.mergeUniform({frameIndex:Ht.frameIndex}),e.mergeUniform({aoMap:Ht.aoRenderTarget}),e.mergeUniform({aoEnabled:Ht.aoEnabled}),this.color===void 0&&(this.color=new fn(Xs)),this.color.analyze(e,{slot:"color"}),this.specular.analyze(e),this.shininess.analyze(e),this.shadingAlpha.analyze(e),this.shadingBlend.analyze(e),this.afterColor&&this.afterColor.analyze(e,{slot:"afterColor"}),this.alpha&&this.alpha.analyze(e);let r=this.color.flow(e,"c",{slot:"color"}),i=this.specular.flow(e,"c"),n=this.shininess.flow(e,"f"),a=this.shadingAlpha.flow(e,"f"),o=this.shadingBlend.flow(e,"i"),s=this.afterColor?this.afterColor.flow(e,"c",{slot:"afterColor"}):void 0,l=this.alpha?this.alpha.flow(e,"f"):void 0,u=this.alphaOverride?this.alphaOverride.flow(e,"f"):void 0;e.requires.transparent=l!==void 0,e.addParsCode(["uniform float penumbraSize[5];","uniform sampler2D aoMap;","uniform bool aoEnabled;","varying vec3 vWPosition;","#include <normal_pars_fragment>","#include <gradientmap_pars_fragment>","#include <fog_pars_fragment>","#include <bsdfs>","#include <lights_pars_begin>","#include <dithering_pars_fragment>",`
					varying vec3 vViewPosition;
					struct ToonMaterial {
						vec3	diffuseColor;
						vec3	specularColor;
						float	specularShininess;
						float	specularStrength;
					};
					void RE_Direct_Toon( const in IncidentLight directLight, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
						vec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;
			
						reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
						reflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularShininess ) * material.specularStrength;
					}
					void RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
						reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
					}
					#define RE_Direct				RE_Direct_Toon
					#define RE_IndirectDiffuse		RE_IndirectDiffuse_Toon
					#define Material_LightProbeLOD( material )	(0)
					`,"#include <shadowmap_pars_fragment>","#include <bumpmap_pars_fragment>","#include <normalmap_pars_fragment>"].join(`
`));let c=["#include <normal_fragment_begin>",`
				// NOTE: gl_FrontFacing alternative using face normal estimation.
				vec3 viewdx = dFdx(vViewPosition);
				vec3 viewdy = dFdy(vViewPosition);
				vec3 faceNormal = normalize(cross(viewdx,viewdy));
				if (dot(normal, faceNormal) < 0.0) {
					normal *= -1.0;
				}
				`,"	ToonMaterial material;"];if(this.bumpMap){e.include(dy.dHdxy),e.include(dy.perturbNormalArb);let d=this.bumpMap.texture.flow(e,"t"),f=this.bumpMap.flow(e,"v3"),p=this.bumpMapIntensity?this.bumpMapIntensity.flow(e,"f").result:"1.0",v="";this.bumpMap.projection.value===4?v=`
					vec3 bumpNormal = vec3(0.0);
					{
						vec2 uv0 = g${this.bumpMap.uuid.toString().replace(/-/g,"")}_writeUvs0;
						vec2 uv1 = g${this.bumpMap.uuid.toString().replace(/-/g,"")}_writeUvs1;
						vec2 uv2 = g${this.bumpMap.uuid.toString().replace(/-/g,"")}_writeUvs2;
						vec3 weights = g${this.bumpMap.uuid.toString().replace(/-/g,"")}_triplanarWeights;

						vec2 grad0 = dHdxy(${d.result}, uv0, ${p});
						vec3 n0 = perturbNormalArb(-vViewPosition, normal, grad0, faceDirection);

						vec2 grad1 = dHdxy(${d.result}, uv1, ${p});
						vec3 n1 = perturbNormalArb(-vViewPosition, normal, grad1, faceDirection);

						vec2 grad2 = dHdxy(${d.result}, uv2, ${p});
						vec3 n2 = perturbNormalArb(-vViewPosition, normal, grad2, faceDirection);
						
						bumpNormal = n0 * weights.z + n1 * weights.x + n2 * weights.y;
						bumpNormal = normalize(bumpNormal);
					}

					normal = bumpNormal;
					`:v=`
					vec2 bumpMapCachedUv = g${this.bumpMap.uuid.toString().replace(/-/g,"")}_writeUvs;
					vec2 grad = dHdxy(${d.result}, bumpMapCachedUv, ${p});
					normal = perturbNormalArb( - vViewPosition, normal, grad, faceDirection );
					`,c.push(`// Call the Texture Layer's function once here so that it writes out its procedural UV coordinates
					${f.result};
					${v}
					`)}c.push(r.code,"	vec3 diffuseColor = "+r.result+";","	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );",i.code,"	vec3 specular = "+i.result+";",n.code,"	float shininess = max( 0.0001, "+n.result+" );","	float specularStrength = 1.0;"),l&&c.push(l.code,"#ifdef ALPHATEST","if ( "+l.result+" <= ALPHATEST ) discard;","#endif"),c.push("material.diffuseColor = diffuseColor;"),c.push("material.specularColor = specular;","material.specularShininess = shininess;","material.specularStrength = specularStrength;","#include <lights_fragment_begin>","#include <lights_fragment_end>"),c.push("vec3 ao = aoEnabled ? tex2D(aoMap, gl_FragCoord.xy / resolution).rgb : vec3(1.0);","vec3 outgoingLight = ((reflectedLight.directDiffuse + reflectedLight.indirectDiffuse) * ao) + reflectedLight.directSpecular;");let h="1.0";this.mask&&(this.mask.analyze(e),h=`luminance(${this.mask.flow(e,"v3").result})`),c.push(`
				if (outgoingLight != diffuseColor) {
					float lightAccu = clamp( length( reflectedLight.directSpecular + reflectedLight.indirectSpecular ), 0.0, 1.0 );
					accumAlpha += ( 1.0 - accumAlpha ) * ${a.result} * ${h} * lightAccu;
					outgoingLight = spe_blend( diffuseColor, outgoingLight, ${a.result} * ${h}, ${o.result} );
				}
				`),s&&c.push(s.code,`outgoingLight = spe_blend(outgoingLight, ${s.result}, 1.0, SPE_BLENDING_NORMAL);`),l?c.push(`gl_FragColor = vec4( outgoingLight, accumAlpha * ${l.result} );`):c.push("gl_FragColor = vec4( outgoingLight, 1.0 );"),u&&c.push(`gl_FragColor.a *= ${u.result};`),c.push("#include <encodings_fragment>","#include <fog_fragment>","#include <dithering_fragment>"),t=c.join(`
`)}return t}},L_t=class{constructor(e=1e3*10){this.timeout=e,this.cache=new Map,this.head={data:null,time:0,src:null,next:null,prev:null},this.tail={data:null,time:1/0,src:null,next:null,prev:null},this.hasClean=!1,this.head.next=this.tail,this.tail.prev=this.head}log(...e){}remove(e){let t=this.cache.get(e);t&&(this.dispose(e,t.data),this.cache.delete(e),t.prev.next=t.next,t.next.prev=t.prev)}scheduleCleanup(){this.hasClean||(this.log("scheduled cleanup"),this.hasClean=!0,setTimeout(()=>{this.hasClean=!1,this.log("cleaning");let e=Date.now(),t=this.head.next;for(;t.time<e-this.timeout;)this.dispose(t.src,t.data),this.cache.delete(t.src),t=t.next,t.prev=this.head,this.head.next=t;this.head.next!==this.tail?this.scheduleCleanup():this.log("no more cleanup")},this.timeout+1e3))}has(e){var t;return(t=this.cache.get(e))==null?void 0:t.data}load(e){let t=Date.now(),r=this.cache.get(e);return r===void 0?(r={data:this.create(e),src:e,time:t,next:null,prev:null},this.cache.set(e,r)):(r.time=t,r.prev.next=r.next,r.next.prev=r.prev),r.prev=this.tail.prev,r.next=this.tail,this.tail.prev.next=r,this.tail.prev=r,this.scheduleCleanup(),r.data}},k_t=class extends L_t{create(e){return URL.createObjectURL(new Blob([e]))}dispose(e,t){URL.revokeObjectURL(t)}},uD;function R_t(e){return typeof e=="string"?e:(uD||(uD=new k_t),uD.load(e))}var O_t=class{constructor(e,t){this.data=e,this.cache=t,this.refCount=0}deref(){this.refCount,this.refCount-=1,this.refCount===0&&(this.cache.remove(this),this.dispose())}dispose(){this.refCount}},B_t=class{constructor(){this.cache=new Map}remove(e){this.cache.delete(e.data)}load(e){let t=this.cache.get(e);return t===void 0&&(t=this.create(e),this.cache.set(e,t)),t.refCount+=1,t}},eye=class extends O_t{constructor(e,t){super(e,t.imageHolderCache),this.data=e,this.shared=t,this.loaded=!1,this.isVideo=!1,this.isBuffer=!1,this._cache={1e3:{},1001:{},1002:{}},this.isVideo=e.type==="video",this.isBuffer=e.isWebGLRenderTarget===!0,this.loadPromise=this.updateSrc(this.isBuffer?e:e.data)}async updateSrc(e){if(typeof document>"u")return;this.disposeTextures(),this.loaded=!1;let t=()=>{this.loaded=!0;for(let i of Object.values(this._cache))for(let n of Object.values(i))for(let a of Object.values(n))a&&(a.image=this.img,a.needsUpdate=!0);this.shared.requestRender()};if(this.isBuffer)this.img=e,this.loaded=!0;else if(this.isVideo){if(this.img=document.createElement("video"),this.img.preload="auto",this.img.playsInline=!0,this.img.currentTime=.01,typeof e!="string"){var r=new FileReader;r.readAsDataURL(new Blob([e],{type:"video/mp4"}));let i;await new Promise(n=>{r.onloadend=a=>{var o;i=(o=a.target)==null?void 0:o.result,n(null)}}),this.img.src=i}else this.img.src=e;this.img.onloadeddata=()=>{t()}}else this.img=new Image,this.img.src=R_t(e),this.img.onload=t,await new Promise(i=>{this.img.onload=()=>{t(),i(null)}})}getTexture(e,t=1008,r=1006){var n,a;let i=(a=(n=this._cache[e])==null?void 0:n[t])==null?void 0:a[r];if(i)return i;{let o;return this.isBuffer?o=this.img.texture:this.isVideo?o=new tft(this.img,void 0,e,e):o=new an(this.img,void 0,e,e,r,t),this.loaded&&(o.needsUpdate=!0),this._cache[e]===void 0&&(this._cache[e]={}),this._cache[e][t]===void 0&&(this._cache[e][t]={}),this._cache[e][t][r]=o,o}}setNeedsUpdate(e){for(let t of Object.values(this._cache))for(let r of Object.values(t))for(let i of Object.values(r))i&&(i.needsUpdate=e)}disposeTextures(){for(let[e,t]of Object.entries(this._cache))for(let[r,i]of Object.entries(t))for(let[n,a]of Object.entries(i))a==null||a.dispose(),this._cache[e]!==void 0&&this._cache[e][r]!==void 0&&(this._cache[e][r][n]=void 0)}dispose(){super.dispose(),this.disposeTextures()}},Lf=class extends eye{};function N_t(e,t){var r=H_t(t);return r.formatToParts?F_t(r,e):z_t(r,e)}var V_t={year:0,month:1,day:2,hour:3,minute:4,second:5};function F_t(e,t){try{for(var r=e.formatToParts(t),i=[],n=0;n<r.length;n++){var a=V_t[r[n].type];a>=0&&(i[a]=parseInt(r[n].value,10))}return i}catch(o){if(o instanceof RangeError)return[NaN];throw o}}function z_t(e,t){var r=e.format(t).replace(/\u200E/g,""),i=/(\d+)\/(\d+)\/(\d+),? (\d+):(\d+):(\d+)/.exec(r);return[i[3],i[1],i[2],i[4],i[5],i[6]]}var cD={};function H_t(e){if(!cD[e]){var t=new Intl.DateTimeFormat("en-US",{hour12:!1,timeZone:"America/New_York",year:"numeric",month:"numeric",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"}).format(new Date("2014-06-25T04:00:00.123Z")),r=t==="06/25/2014, 00:00:00"||t==="‎06‎/‎25‎/‎2014‎ ‎00‎:‎00‎:‎00";cD[e]=r?new Intl.DateTimeFormat("en-US",{hour12:!1,timeZone:e,year:"numeric",month:"numeric",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"}):new Intl.DateTimeFormat("en-US",{hourCycle:"h23",timeZone:e,year:"numeric",month:"numeric",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"})}return cD[e]}function tye(e,t,r,i,n,a,o){var s=new Date(0);return s.setUTCFullYear(e,t,r),s.setUTCHours(i,n,a,o),s}var yre=36e5,U_t=6e4,hD={timezone:/([Z+-].*)$/,timezoneZ:/^(Z)$/,timezoneHH:/^([+-]\d{2})$/,timezoneHHMM:/^([+-]\d{2}):?(\d{2})$/};function rye(e,t,r){var i,n;if(!e||(i=hD.timezoneZ.exec(e),i))return 0;var a;if(i=hD.timezoneHH.exec(e),i)return a=parseInt(i[1],10),xre(a)?-(a*yre):NaN;if(i=hD.timezoneHHMM.exec(e),i){a=parseInt(i[1],10);var o=parseInt(i[2],10);return xre(a,o)?(n=Math.abs(a)*yre+o*U_t,a>0?-n:n):NaN}if(W_t(e)){t=new Date(t||Date.now());var s=r?t:G_t(t),l=IO(s,e),u=r?l:j_t(t,l,e);return-u}return NaN}function G_t(e){return tye(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds())}function IO(e,t){var r=N_t(e,t),i=tye(r[0],r[1]-1,r[2],r[3]%24,r[4],r[5],0).getTime(),n=e.getTime(),a=n%1e3;return n-=a>=0?a:1e3+a,i-n}function j_t(e,t,r){var i=e.getTime(),n=i-t,a=IO(new Date(n),r);if(t===a)return t;n-=a-t;var o=IO(new Date(n),r);return a===o?a:Math.max(a,o)}function xre(e,t){return-23<=e&&e<=23&&(t==null||0<=t&&t<=59)}var bre={};function W_t(e){if(bre[e])return!0;try{return new Intl.DateTimeFormat(void 0,{timeZone:e}),bre[e]=!0,!0}catch{return!1}}var q_t=Dp(Uot(),1),wre=Dp(Got(),1),Y_t=/(Z|[+-]\d{2}(?::?\d{2})?| UTC| [a-zA-Z]+\/[a-zA-Z_]+(?:\/[a-zA-Z_]+)?)$/,X_t=Y_t,dD=36e5,_re=6e4,Z_t=2,Uo={dateTimePattern:/^([0-9W+-]+)(T| )(.*)/,datePattern:/^([0-9W+-]+)(.*)/,plainTime:/:/,YY:/^(\d{2})$/,YYY:[/^([+-]\d{2})$/,/^([+-]\d{3})$/,/^([+-]\d{4})$/],YYYY:/^(\d{4})/,YYYYY:[/^([+-]\d{4})/,/^([+-]\d{5})/,/^([+-]\d{6})/],MM:/^-(\d{2})$/,DDD:/^-?(\d{3})$/,MMDD:/^-?(\d{2})-?(\d{2})$/,Www:/^-?W(\d{2})$/,WwwD:/^-?W(\d{2})-?(\d{1})$/,HH:/^(\d{2}([.,]\d*)?)$/,HHMM:/^(\d{2}):?(\d{2}([.,]\d*)?)$/,HHMMSS:/^(\d{2}):?(\d{2}):?(\d{2}([.,]\d*)?)$/,timeZone:X_t};function Q_t(e,t){if(arguments.length<1)throw new TypeError("1 argument required, but only "+arguments.length+" present");if(e===null)return new Date(NaN);var r={},i=r.additionalDigits==null?Z_t:(0,q_t.default)(r.additionalDigits);if(i!==2&&i!==1&&i!==0)throw new RangeError("additionalDigits must be 0, 1 or 2");if(e instanceof Date||typeof e=="object"&&Object.prototype.toString.call(e)==="[object Date]")return new Date(e.getTime());if(typeof e=="number"||Object.prototype.toString.call(e)==="[object Number]")return new Date(e);if(!(typeof e=="string"||Object.prototype.toString.call(e)==="[object String]"))return new Date(NaN);var n=K_t(e),a=J_t(n.date,i),o=a.year,s=a.restDateString,l=$_t(s,o);if(isNaN(l))return new Date(NaN);if(l){var u=l.getTime(),c=0,h;if(n.time&&(c=e5t(n.time),isNaN(c)))return new Date(NaN);if(n.timeZone||r.timeZone){if(h=rye(n.timeZone||r.timeZone,new Date(u+c)),isNaN(h))return new Date(NaN)}else h=(0,wre.default)(new Date(u+c)),h=(0,wre.default)(new Date(u+c+h));return new Date(u+c+h)}else return new Date(NaN)}function K_t(e){var t={},r=Uo.dateTimePattern.exec(e),i;if(r?(t.date=r[1],i=r[3]):(r=Uo.datePattern.exec(e),r?(t.date=r[1],i=r[2]):(t.date=null,i=e)),i){var n=Uo.timeZone.exec(i);n?(t.time=i.replace(n[1],""),t.timeZone=n[1].trim()):t.time=i}return t}function J_t(e,t){var r=Uo.YYY[t],i=Uo.YYYYY[t],n;if(n=Uo.YYYY.exec(e)||i.exec(e),n){var a=n[1];return{year:parseInt(a,10),restDateString:e.slice(a.length)}}if(n=Uo.YY.exec(e)||r.exec(e),n){var o=n[1];return{year:parseInt(o,10)*100,restDateString:e.slice(o.length)}}return{year:null}}function $_t(e,t){if(t===null)return null;var r,i,n,a;if(e.length===0)return i=new Date(0),i.setUTCFullYear(t),i;if(r=Uo.MM.exec(e),r)return i=new Date(0),n=parseInt(r[1],10)-1,Sre(t,n)?(i.setUTCFullYear(t,n),i):new Date(NaN);if(r=Uo.DDD.exec(e),r){i=new Date(0);var o=parseInt(r[1],10);return i5t(t,o)?(i.setUTCFullYear(t,0,o),i):new Date(NaN)}if(r=Uo.MMDD.exec(e),r){i=new Date(0),n=parseInt(r[1],10)-1;var s=parseInt(r[2],10);return Sre(t,n,s)?(i.setUTCFullYear(t,n,s),i):new Date(NaN)}if(r=Uo.Www.exec(e),r)return a=parseInt(r[1],10)-1,Cre(t,a)?Are(t,a):new Date(NaN);if(r=Uo.WwwD.exec(e),r){a=parseInt(r[1],10)-1;var l=parseInt(r[2],10)-1;return Cre(t,a,l)?Are(t,a,l):new Date(NaN)}return null}function e5t(e){var t,r,i;if(t=Uo.HH.exec(e),t)return r=parseFloat(t[1].replace(",",".")),fD(r)?r%24*dD:NaN;if(t=Uo.HHMM.exec(e),t)return r=parseInt(t[1],10),i=parseFloat(t[2].replace(",",".")),fD(r,i)?r%24*dD+i*_re:NaN;if(t=Uo.HHMMSS.exec(e),t){r=parseInt(t[1],10),i=parseInt(t[2],10);var n=parseFloat(t[3].replace(",","."));return fD(r,i,n)?r%24*dD+i*_re+n*1e3:NaN}return null}function Are(e,t,r){t=t||0,r=r||0;var i=new Date(0);i.setUTCFullYear(e,0,4);var n=i.getUTCDay()||7,a=t*7+r+1-n;return i.setUTCDate(i.getUTCDate()+a),i}var t5t=[31,28,31,30,31,30,31,31,30,31,30,31],r5t=[31,29,31,30,31,30,31,31,30,31,30,31];function iye(e){return e%400===0||e%4===0&&e%100!==0}function Sre(e,t,r){if(t<0||t>11)return!1;if(r!=null){if(r<1)return!1;var i=iye(e);if(i&&r>r5t[t]||!i&&r>t5t[t])return!1}return!0}function i5t(e,t){if(t<1)return!1;var r=iye(e);return!(r&&t>366||!r&&t>365)}function Cre(e,t,r){return!(t<0||t>52||r!=null&&(r<0||r>6))}function fD(e,t,r){return!(e!=null&&(e<0||e>=25)||t!=null&&(t<0||t>=60)||r!=null&&(r<0||r>=60))}function n5t(e,t,r){var i=Q_t(e,r),n=rye(t,i,!0),a=new Date(i.getTime()-n),o=new Date(0);return o.setFullYear(a.getUTCFullYear(),a.getUTCMonth(),a.getUTCDate()),o.setHours(a.getUTCHours(),a.getUTCMinutes(),a.getUTCSeconds(),a.getUTCMilliseconds()),o}function Go(e,t){return t.color(e)}function Ere(e=new Date,t){let r=t.format,i=e.getSeconds(),n=e;t&&t.timeZone!==null&&(n=n5t(new Date,t.timeZone));let a=n.getHours(),o=n.getMinutes(),s;t.format12h24h==="12ampm"&&(s=a>=12?"PM":"AM");let l=a;t.format12h24h!=="24"&&(l=a%12,l===0&&(l=12));let u,c;switch(r){case"HH:mm:ss":u=[l,o,i];break;case"HH:mm":u=[l,o];break;case"HH":u=[l],s=void 0;break;case"mm":u=[o],s=void 0;break;case"ss":u=[i],s=void 0;break;case"year":c=n.getFullYear();break;case"month":c=n.getMonth()+1;break;case"dayOfYear":c=Math.floor((n.getTime()-new Date(n.getFullYear(),0,0).getTime())/864e5);break;case"dayOfMonth":c=n.getDate();break;case"secondOfDay":c=a*60*60+o*60+i;break;default:console.error("Unknown time format",r),c=0;break}return u!==void 0?{textValue:u,suffix:s}:c}function a5t(e,t){switch(e.type){case"fresnel":return l5t(e,t);case"gradient":return u5t(e,t);case"depth":return c5t(e,t);case"normal":return h5t(e,t);case"noise":return d5t(e,t);case"rainbow":return f5t(e,t);case"toon":return p5t(e,t);case"outline":return v5t(e,t);case"transmission":return m5t(e,t);case"color":return s5t(e,t);case"pattern":return g5t(e,t)}}function o5t(e){return{type:e.type}}function Hu(e,t){let{alpha:r,mode:i,isMask:n}=e,a=typeof r=="string"?(Number(t.getVariable(r))??100)/100:r;return{...o5t(e),alpha:a,mode:i,isMask:n}}function s5t(e,t){return{...Hu(e,t),color:Go(e.color,t)}}function l5t(e,t){let{bias:r,scale:i,intensity:n,factor:a,color:o}=e;return{...Hu(e,t),color:Go(o,t),bias:r,scale:i,intensity:n,factor:a}}function u5t(e,t){let{gradientType:r,smooth:i,colors:n,steps:a,angle:o,offset:s,morph:l}=e;return{...Hu(e,t),gradientType:r,smooth:i,colors:n.map(u=>new er(u[0],u[1],u[2],u[3])),num:n.length,steps:a,offset:new me(...s),morph:new me(...l),angle:o}}function c5t(e,t){let{gradientType:r,near:i,far:n,isVector:a,isWorldSpace:o,origin:s,direction:l,colors:u,steps:c,smooth:h}=e;return{...Hu(e,t),gradientType:r,near:i,far:n,isVector:a,isWorldSpace:o,origin:new U(...s),direction:l?new U(...l):new U(1,0,0),colors:u.map(d=>d!==void 0?new er(d[0],d[1],d[2],d[3]):new er(0,0,0,0)),steps:c.slice(0,u.length),smooth:h}}function h5t(e,t){let{cnormal:r}=e;return{...Hu(e,t),cnormal:new U(r[0],r[1],r[2])}}function d5t(e,t){return{...Hu(e,t),scale:e.scale,move:e.move,fA:new me(...e.fA),fB:new me(...e.fB),size:new U(...e.size),distortion:new me(...e.distortion),colorA:Go(e.colorA,t),colorB:Go(e.colorB,t),colorC:Go(e.colorC,t),colorD:Go(e.colorD,t),noiseType:e.noiseType,voronoiStyle:e.voronoiStyle,highCut:e.highCut,lowCut:e.lowCut,smoothness:e.smoothness,seed:e.seed,quality:e.quality}}function f5t(e,t){return{...Hu(e,t),filmThickness:e.filmThickness,movement:e.movement,wavelengths:new U(...e.wavelengths),noiseStrength:e.noiseStrength,noiseScale:e.noiseScale,offset:new U(...e.offset)}}function p5t(e,t){return{...Hu(e,t),positioning:e.positioning,colors:e.colors.map(r=>new er(r[0],r[1],r[2],r[3])),num:e.colors.length,steps:e.steps,source:new U(...e.source),isWorldSpace:e.isWorldSpace,noiseStrength:e.noiseStrength,noiseScale:e.noiseScale,shadowColor:Go(e.shadowColor,t),offset:new U(...e.offset)}}function v5t(e,t){return{...Hu(e,t),outlineColor:Go(e.outlineColor,t),contourColor:Go(e.contourColor,t),outlineWidth:e.outlineWidth,contourWidth:e.contourWidth,outlineThreshold:e.outlineThreshold,contourThreshold:e.contourThreshold,outlineSmoothing:e.outlineSmoothing,contourFrequency:e.contourFrequency,contourDirection:new U(...e.contourDirection),positionalLines:e.positionalLines,compensation:e.compensation}}function m5t(e,t){return{...Hu(e,t),thickness:e.thickness,ior:e.ior,roughness:e.roughness}}function g5t(e,t){return{...Hu(e,t),style:e.style,projection:e.projection,axis:e.axis,blending:e.blending,offset:new me(...e.offset),colorA:Go(e.colorA,t),colorB:Go(e.colorB,t),frequency:new me(...e.frequency),size:e.size,variation:e.variation,smoothness:e.smoothness,zigzag:e.zigzag,rotation:e.rotation,vertical:new me(...e.vertical),horizontal:new me(...e.horizontal),sides:e.sides}}var M6=class extends qa{},y5t={noise:["noiseType"],texture:["projection","axis","side"],video:["projection","axis","side"],displace:["noiseType"],light:["roughnessMap","bumpMap"],depth:["smooth","isWorldSpace","gradientType","isVector"],pattern:["style","projection","axis"]},x5t={depth:["colors"]};function b5t(e,t,r){var a,o;if(t==="isMask")return!0;let i=y5t[e.type],n=x5t[e.type];if(n!==void 0){let s=e.color;if(n.includes(t)){let l=(o=(a=s[t])==null?void 0:a.value)==null?void 0:o.length;if(l!==void 0&&l!==r.length)return!0}}return i!==void 0?i.includes(t):!1}function nye(e,t,r){let i=r.uniforms[`f${r.id}_texture`];if(!i)return!1;let n=!1,a=e;if("image"in a){let o=a.image,s=t.image(o),l=i;l.image instanceof Lf||l.image.deref(),l.image=s}if("video"in a){let o=a.video,s=t.video(o),l=i;l.image instanceof Lf||l.image.deref(),l.image=s}if("wrapping"in a){let o=i;o.wrap=a.wrapping}if("minFilter"in a){let o=i;o.minFilter=a.minFilter}if("magFilter"in a){let o=i;o.magFilter=a.magFilter}if("rotation"in a&&r.uniforms[`f${r.id}_rotation`])return r.uniforms[`f${r.id}_rotation`].value=(a.rotation??0)*vt.DEG2RAD,n;if("repeat"in a||"offset"in a||"rotation"in a){let o="mat",s=r.uniforms[`f${r.id}_${o}`];"repeat"in a&&(s.repeat=a.repeat),"offset"in a&&(s.offset=a.offset),"rotation"in a&&(s.rotation=a.rotation??0),s.updateMatrix()}return n}function w5t(e,t,r,i){let n=!1;for(let[a,o]of Object.entries(e)){if(a==="bumpMap"||a==="roughnessMap"){n=!0;continue}if(!a||o===void 0)continue;if(oye(a,r,i,t)){a==="visible"&&r.type==="light"&&(n=!0);continue}r.visible=i.visible;let s=r.uniforms[`f${r.id}_${a}`];if(s&&!(s instanceof eH))switch(n=n||b5t(r,a,o),s.constructor){case fn:if(typeof o=="string"){let l=t.getColor(o);l&&(s.value=l);break}else{let l=o;s.value instanceof M6?s.value=new qa(l.r,l.g,l.b,l.a):s.setRGBA(l);break}case Fh:if(typeof o=="string"){let l=t.getColor(o);l&&(s.value=l);break}else{let l=o;s.value instanceof M6?s.value=new qa(l.r,l.g,l.b,l.a):s.value.setRGBA(l.r,l.g,l.b,l.a);break}case Oa:{let l=o;s.value.setX(l[0]),s.value.setY(l[1]);break}case vl:{let l=o;s.value.setX(l[0]),s.value.setY(l[1]),s.value.setZ(l[2]);break}case Zh:{nye(o,t,r);break}case I0:{s.value=o.map(l=>new er(...l));break}default:{s.value=o;break}}}return n}var Zv=(e,t,r)=>Math.max(0,Math.min(1,Number(t.getVariable(typeof e=="number"?e*100:e,r)??100)/100))??1,X4=class{constructor(e,t,r,i,n){this.id=e,this.uuid=t,this.data=r,this.uniforms={};for(let a in i)this.uniforms[`f${this.id}_${a}`]=i[a];for(let a in r)oye(a,this,r,n)}get type(){return this.data.type}static create(e,t,r,i){if(r.type==="light")return yc.createLightLayer(e,t,r,i);if(r.type==="texture"||r.type==="video"){let n=r.type==="texture"?i.uiBuffer(r.texture.image)??i.image(r.texture.image):i.video(r.texture.video),a=new TO(n,r.texture.wrapping,r.texture.minFilter??1008,r.texture.magFilter??1006),o=new A_t(n),s=new S_t(r.texture.repeat,r.texture.offset,r.texture.rotation??0),l=new mt(r.crop?1:0),u=new ki(r.projection??0),c=new ki(["x","y","z"].indexOf(r.axis)??0),h=new ki(r.side??0),d=new Oa(r.size?new me(r.size[0],r.size[1]):new me(100,100)),f=new mt(r.blending??0),p=new mt(Zv(r.alpha,i)),v=new ki(r.mode??0),m=new Ho(r.isMask??!1),g=new tH(a,o,l,u,c,h,d,f,s,p,v,m),y=new Hi(g.calpha,"f");return new ln(e,t,r,{texture:a,textureSize:o,crop:l,projection:u,axis:c,side:h,size:d,blending:f,mat:s,alpha:p,mode:v,isMask:m},g,v,y,m,i)}else if(r.type==="matcap"){let n=i.image(r.texture.image),a=new TO(n,r.texture.wrapping,r.texture.minFilter??1008,r.texture.magFilter??1006),o=new mt(Zv(r.alpha,i)),s=new ki(r.mode??0),l=new Ho(r.isMask??!1),u=new mt((r.texture.rotation??0)*vt.DEG2RAD),c=new z1e(a,o,s,l,u),h=new Hi(c.calpha,"f");return new ln(e,t,r,{texture:a,alpha:o,mode:s,isMask:l,rotation:u},c,s,h,l,i)}else if(r.type==="displace")if(r.displacementType==="noise"){let n=new vl(new U(...r.offset)),a=new mt(r.scale??10),o=new mt(r.intensity??8),s=new mt(r.movement??1),l=new ki(r.noiseType??0),u=new ki(r.voronoiStyle??0),c=new mt(r.smoothness??.5),h=new mt(r.seed??0),d=new mt(r.highCut??1),f=new mt(r.lowCut??0),p=new ki(r.quality??1),v=new J1e(o,s,n,u,c,h,d,f,p,a,l);return new aye(e,t,r,{offset:n,scale:a,intensity:o,movement:s,noiseType:l,voronoiStyle:u,smoothness:c,seed:h,highCut:d,lowCut:f,quality:p},v,i)}else throw new Error;else return S5t(e,t,r,i)}updateByOp(e,t,r){let i=e;if(i.path[0]===void 0){if(i.type===0)return"type"in i.props||"category"in i.props||"visible"in i.props||"noiseType"in i.props?(r.scene.markNeedsUpdateRendererDirty(),!0):w5t(i.props,r.shared,this,t)}else if(i.path[0]==="texture")return"texture"in t||"video"in t?nye(i.props,r.shared,this):!0;return!1}dispose(){if(_5t(this)){let e=this.uniforms[`f${this.id}_texture`];if(!e)return!1;let t=e;t.image instanceof Lf||t.image.deref()}}hasValueByKey(e){return this.uniforms[e]!==void 0}hasValue(e){return this.hasValueByKey(`f${this.id}_${e}`)}setValue(e,t){let r=`f${this.id}_${e}`;this.hasValueByKey(r)&&t!==void 0&&(this.uniforms[r].value=t)}getNode(e){let t=`f${this.id}_${e}`;if(this.hasValueByKey(t))return this.uniforms[t]}getValue(e){let t=`f${this.id}_${e}`;if(this.hasValueByKey(t))return this.uniforms[t].value}getName(e){let t=/f\d+_(.*)/.exec(e);if(t&&t.length>1)return t[1];console.log(`Layer.getName: error ${e}`)}getNames(){let e=[];for(let t in this.uniforms){let r=this.getName(t);r&&e.push(r)}return e}},ln=class extends X4{constructor(e,t,r,i,n,a,o,s,l){super(e,t,r,i,l),this.params=i,this.color=n,this.mode=a,this.alpha=o,this.isMask=s}},aye=class extends X4{constructor(e,t,r,i,n,a){super(e,t,r,i,a),this.position=n}},yc=class extends X4{constructor(e,t,r,i,n,a){super(e,t,r,n,a),this.node=i}static createLightLayer(e,t,r,i){let n,a=new mt(Zv(r.alpha,i)),o=new ki(r.mode),s=new mt(r.bumpMapIntensity),l=new mt(Zv(r.alphaOverride,i)),u;if(!r.visible)n=new rH,u={};else if(r.category==="lambert"){n=new T_t;let c=new fn(i.color(r.emissive)??0),h=new Ho(r.occlusion??!0);u={emissive:c,occlusion:h},n.emissive=c,n.occlusion=h}else if(r.category==="toon"){n=new I_t;let c=new mt(r.shininess??30),h=new fn(i.color(r.specular)??1118481);u={shininess:c,specular:h},n.shininess=c,n.specular=h}else if(r.category==="physical"){n=new D_t;let c=new mt(r.roughness??.3),h=new mt(r.metalness??0),d=new mt(r.reflectivity??.5),f=new Ho(r.occlusion??!0);u={roughness:c,metalness:h,reflectivity:d,occlusion:f},n.roughness=c,n.metalness=h,n.reflectivity=d,n.occlusion=f}else{n=new P_t;let c=new mt(r.shininess??30),h=new fn(r.specular!==void 0?i.color(r.specular)??1118481:1118481),d=new Ho(r.occlusion??!0);u={shininess:c,specular:h,occlusion:d},n.shininess=c,n.specular=h,n.occlusion=d}return n.alpha=new mt(1),n.shadingAlpha=a,n.shadingBlend=o,n.bumpMapIntensity=s,n.alphaOverride=l,u.alpha=n.shadingAlpha,u.mode=n.shadingBlend,u.bumpMapIntensity=n.bumpMapIntensity,u.alphaOverride=n.alphaOverride,new yc(e,t,r,n,u,i)}get category(){return this.node.category}};function _5t(e){let t=e instanceof X4?e.type:e;return t==="texture"||t==="video"||t==="displace_map"||t==="matcap"}function al(e){return{alpha:new mt(e.alpha??1),mode:new ki(e.mode??0),isMask:new Ho(e.isMask??!1)}}function A5t(e,t,r,i,n){switch(e.type){case"color":{let a=new fn(i.color??Xs),o=al(i),s=new PO(a,o.alpha),l=new Hi(s.calpha,"f");return new ln(t,r,e,{color:a,...o},s,o.mode,l,o.isMask,n)}case"fresnel":{let a=new fn(i.color??16777215),o=new mt(i.bias??.1),s=new mt(i.scale??1),l=new mt(i.intensity??2),u=new mt(i.factor??1),c=al(i),h=new C_t(a,o,s,l,u,c.alpha,c.mode,c.isMask),d=new Hi(h.calpha,"f");return new ln(t,r,e,{color:a,bias:o,scale:s,intensity:l,factor:u,...c},h,c.mode,d,c.isMask,n)}case"rainbow":{let a=new mt(i.filmThickness??30),o=new mt(i.movement??0),s=new vl(i.wavelengths??new U(0,0,0)),l=new mt(i.noiseStrength??0),u=new mt(i.noiseScale??1),c=new vl(i.offset??new U(0,0,0)),h=al(i),d=new q1e(a,o,s,l,u,c,h.alpha,h.isMask),f=new Hi(d.calpha,"f");return new ln(t,r,e,{filmThickness:a,movement:o,wavelengths:s,noiseStrength:l,noiseScale:u,offset:c,...h},d,h.mode,f,h.isMask,n)}case"transmission":{let a=new mt(i.thickness??10),o=new mt(i.ior??1.5),s=new mt(i.roughness??.5),l=Ht.transmissionSize,u=Ht.transmissionRenderTarget,c=Ht.transmissionRenderTargetDepth,h=window.innerWidth,d=window.innerHeight,f=h>=d?new Oa(d/h,1):new Oa(1,h/d),p=al(i),v=new Q1e(a,o,s,l,u,c,f,p.alpha),m=new Hi(v.calpha,"f");return new ln(t,r,e,{thickness:a,ior:o,roughness:s,aspectRatio:f,...p},v,p.mode,m,p.isMask,n)}case"toon":{let a=new ki(i.positioning??0),o;i.colors?o=new I0(i.colors.length,i.colors):(o=new I0(10,new er(0,0,0,1)),o.value[1]=new er(1,1,1,1));let s;i.steps?s=new D0(i.steps.length,i.steps):(s=new D0(10,1),s.value[0]=0);let l=new vl(i.source??new U(0,0,0)),u=new Ho(i.isWorldSpace??!0),c=new mt(i.noiseStrength??0),h=new mt(i.noiseScale??1),d=new Fh(i.shadowColor),f=new vl(i.offset??new U(0,0,0)),p=al(i),v=new X1e(a,o,s,l,u,c,h,d,f,p.alpha),m=new Hi(v.calpha,"f");return new ln(t,r,e,{positioning:a,colors:o,steps:s,source:l,isWorldSpace:u,noiseStrength:c,noiseScale:h,shadowColor:d,offset:f,...p},v,p.mode,m,p.isMask,n)}case"outline":{let a=new fn(i.outlineColor??16777215),o=new fn(i.contourColor??16777215),s=new mt(i.outlineWidth??.1),l=new mt(i.contourWidth??.1),u=new mt(i.outlineThreshold??.1),c=new mt(i.contourThreshold??.1),h=new mt(i.outlineSmoothing??.1),d=new mt(i.contourFrequency??.1),f=new vl(i.contourDirection??new U(0,1,0)),p=new Ho(i.positionalLines??!1),v=new Ho(i.compensation??!0),m=Ht.normalRenderTarget,g=Ht.normalRenderTargetDepth,y=Ht.pixelRatioNode,x=Ht.resolution,b=al(i),_=new G1e(a,o,s,l,u,c,h,d,f,p,v,x,m,g,y,b.alpha),w=new Hi(_.calpha,"f");return new ln(t,r,e,{outlineColor:a,contourColor:o,outlineWidth:s,contourWidth:l,outlineThreshold:u,contourThreshold:c,outlineSmoothing:h,contourFrequency:d,contourDirection:f,positionalLines:p,compensation:v,...b},_,b.mode,w,b.isMask,n)}case"depth":{let a=new ki(i.gradientType??0),o=new Ho(i.smooth??!1),s=new mt(i.near??50),l=new mt(i.far??200),u=new mt(i.isVector??1),c=new mt(i.isWorldSpace??0),h=new vl(i.origin??new U),d=new vl(i.direction??new U),f;i.colors?f=new I0(i.colors.length,i.colors):(f=new I0(2,new er(0,0,0,1)),f.value[1]=new er(1,1,1,1));let p;i.steps?p=new D0(i.steps.length,i.steps):(p=new D0(2,1),p.value[0]=0);let v=al(i),m=new B1e(a,o,s,l,u,c,h,d,f,p,v.alpha,v.isMask),g=new Hi(m.calpha,"f");return new ln(t,r,e,{gradientType:a,smooth:o,near:s,far:l,isVector:u,isWorldSpace:c,origin:h,direction:d,colors:f,steps:p,...v},m,v.mode,g,v.isMask,n)}case"noise":{let a=new mt(i.scale??1),o=new vl(i.size??new U(100,100,100)),s=new mt(i.move??1),l=new Oa(i.fA??new me(1.7,9.2)),u=new Oa(i.fB??new me(8.3,2.8)),c=new Oa(i.distortion??new me(1,1)),h=new Fh(i.colorA),d=new Fh(i.colorB),f=new Fh(i.colorC),p=new Fh(i.colorD),v=new ki(i.noiseType??0),m=new ki(i.voronoiStyle??0),g=new mt(i.highCut??1),y=new mt(i.lowCut??0),x=new mt(i.smoothness??.5),b=new mt(i.seed??.5),_=new ki(i.quality??1),w=al(i),S=new H1e(a,o,s,l,u,c,h,d,f,p,w.alpha,v,w.isMask,m,g,y,x,b,_),A=new Hi(S.calpha,"f");return new ln(t,r,e,{scale:a,size:o,move:s,fA:l,fB:u,distortion:c,colorA:h,colorB:d,colorC:f,colorD:p,noiseType:v,...w,voronoiStyle:m,highCut:g,lowCut:y,smoothness:x,seed:b,quality:_},S,w.mode,A,w.isMask,n)}case"normal":{let a=new vl(i.cnormal??new U(1,1,1)),o=al(i),s=new O1e(a,o.alpha),l=new Hi(s.calpha,"f");return new ln(t,r,e,{cnormal:a,...o},s,o.mode,l,o.isMask,n)}case"gradient":{let a=new ki(i.gradientType??0),o=new Ho(i.smooth??!1),s;i.colors?s=new I0(i.colors.length,i.colors):(s=new I0(10,new er(0,0,0,1)),s.value[1]=new er(1,1,1,1));let l;i.steps?l=new D0(i.steps.length,i.steps):(l=new D0(10,1),l.value[0]=0);let u=new Oa(i.offset??new me(0,0)),c=new Oa(i.morph??new me(0,0)),h=new mt(i.angle??0),d=al(i),f=new V1e(a,o,s,l,u,c,h,d.alpha,d.isMask),p=new Hi(f.calpha,"f");return new ln(t,r,e,{gradientType:a,smooth:o,colors:s,steps:l,offset:u,morph:c,angle:h,...d},f,d.mode,p,d.isMask,n)}case"pattern":{let a=new ki(i.style??0),o=new ki(i.projection??0),s=new ki(["x","y","z"].indexOf(i.axis)??0),l=new mt(i.blending??0),u=new Oa(i.offset??new me(0,0)),c=new Fh(i.colorA),h=new Fh(i.colorB),d=new Oa(i.frequency??new me(10,10)),f=new mt(i.size??.5),p=new mt(i.variation??0),v=new mt(i.smoothness??.5),m=new mt(i.zigzag??0),g=new mt(i.rotation??0),y=new Oa(i.vertical??new me(0,1)),x=new Oa(i.horizontal??new me(0,1)),b=new ki(i.sides??6),_=al(i),w=new j1e(a,o,s,l,u,c,h,d,f,p,v,m,g,y,x,b,_.alpha,_.isMask),S=new Hi(w.calpha,"f");return new ln(t,r,e,{style:a,projection:o,axis:s,blending:l,offset:u,colorA:c,colorB:h,frequency:d,size:f,variation:p,smoothness:v,zigzag:m,rotation:g,vertical:y,horizontal:x,sides:b,..._},w,_.mode,S,_.isMask,n)}default:{let a=new fn(1,0,0,1),o=al(i),s=new PO(a,o.alpha),l=new Hi(s.calpha,"f");return new ln(t,r,e,{color:a,...o},s,o.mode,l,o.isMask,n)}}}function S5t(e,t,r,i){let n=a5t(r,i);return A5t(r,e,t,n,i)}function oye(e,t,r,i){if(r.type==="displace"&&(e==="intensity"||e==="visible")){let n=t.uniforms[`f${t.id}_intensity`];return n?(n.value=r.intensity*(r.visible?1:0),n):void 0}if(r.type!=="displace"&&(e==="alpha"||e==="visible")){let n=t.uniforms[`f${t.id}_alpha`];if(!n)return;if(n.value=Zv(r.alpha,i)*(r.visible?1:0),r.type==="outline"&&e==="visible"){let a=t.uniforms[`f${t.id}_compensation`];a&&(a.value=r.compensation&&r.visible)}return n}}function Jg(e,t){let r=0,i=e.layers.find(n=>n.data.type==="light");if(i){let n=i.data,a=Number(t.getVariable(n.alphaOverride));if((typeof n.alphaOverride=="string"?a/100:n.alphaOverride)<1)return!0}for(let n of e.layers){if(n.data.type!=="displace"&&n.data.isMask)return!0;if(n.data.type!=="displace"&&"alpha"in n.data&&n.data.type!=="light"&&n.data.type!=="fresnel"&&n.data.type!=="texture"&&n.data.type!=="matcap"&&n.data.type!=="rainbow"&&n.data.type!=="outline"&&n.data.type!=="pattern"){let a=n.data.visible?n.data.alpha:0;if(typeof a=="string"&&(a=Math.max(0,Math.min(1,Number(t.getVariable(a)??100)/100))),a===1&&n.data.type==="depth"||n.data.type==="gradient"){for(let o of n.data.colors)if(o[3]<1){a=o[3];break}}else if(a===1&&n.data.type==="noise"){let o=t.color(n.data.colorA).a,s=t.color(n.data.colorB).a,l=t.color(n.data.colorC).a,u=t.color(n.data.colorD).a,c=Math.min(o,Math.min(s,Math.min(l,u)));c<1&&(a=c)}r+=(1-r)*a}}return r<1}var wp=class extends ai{constructor(){super(void 0),this.flatShading=!1,this.needsJitter=!0,this.nodeContextUuid=0,this.fog=!0,this.dithering=!0,this.vertexColors=!0,this.transparent=!0}customProgramCacheKey(){return""}},C5t=class extends wp{constructor(e,t,r,i){super(),this.flatShading=e,this.side=t,this.wireframe=r,this.root=i}updateAfterBuild(){let e=this.root;this.lights=e.lights,this.vertexShader=e.vertexShader,this.fragmentShader=e.fragmentShader,this.defines=e.defines,this.uniforms=e.uniforms,this.extensions=e.extensions,this.transparent=e.transparent,this.cacheKey=e.customProgramCacheKey()+"flat"+this.flatShading+this.side}onBeforeCompile(e,t){this.root.onBeforeCompile(e)}get data(){return this.root.data}get category(){return this.root.category}get hasAO(){return this.root.hasAO}getFlavor(e,t,r){return this.root.getFlavor(e,t,r)}get layers(){return this.root.layers}get fragment(){return this.root.fragment}getLayersOfType(e){return this.root.getLayersOfType(e)}getLayerByUuid(e){return this.root.getLayerByUuid(e)}updateByOp(e,t,r){this.root.updateByOp(e,t,r)}nodeMaterialDispose(){this.root.nodeMaterialDispose()}},iH=class extends wp{constructor(e,t,r=!0){super(),this.data=e,this.allowVariableSaves=r,this.layerIdGen=0,this.flavors=[],this.masks={},this.type="NodeMaterial",this.updaters=[],this.needsJitter=t.shared.needsJitter,Yn.startContext(this),this.reset0(e,t),Yn.endContext(this)}get nodeMaterial(){return this}getFlavor(e,t,r){let i=r?6:(e?3:0)+t;if(i===0)return this;this.flavors===void 0&&(this.flavors=[]),i-=1;let n=this.flavors[i];return n===void 0&&(n=new C5t(e,t,r,this),n.needsJitter=this.needsJitter,this.flavors[i]=n,n.flatShading=e,n.side=t,n.updateAfterBuild()),n}get fragment(){return this.lightLayer.node}get category(){return this.lightLayer.category}get hasAO(){var e;return((e=this.lightLayer.getNode("occlusion"))==null?void 0:e.value)??!1}reset(e,t,r=!1){Yn.startContext(this),(this.data!==e||r)&&this.reset0(e,t),Yn.endContext(this)}reset0(e,t){this.data=e;let r=e.layers??Ua.defaultTwoLayerData("phong").layers;try{this.layers=r.map(i=>X4.create(this.layerIdGen++,i.id,i.data,t.shared))}catch{this.layers=[]}this.layers.reverse(),this.name=e.name??"Untitled Material",this.onUpdate(t.shared),this.transparent=Jg(e,t.shared),this.saveVariableLocations(t)}onVariableUpdate(e,t,r){if(e[0]==="alphaOverride")this.transparent=Jg(this.data,r.shared),this.lightLayer.setValue("alphaOverride",Math.max(0,Math.min(Number(t)/100,1)));else if(e[0]==="layer"){let i=e[1],n=e[2];if(i&&n){let a=this.layers.find(o=>o.uuid===i);a!=null&&a.hasValue(n)&&(n==="alpha"?(this.transparent=Jg(this.data,r.shared),a.setValue(n,Math.max(0,Math.min(Number(t)/100,1)))):a.setValue(n,t))}}}saveVariableLocations(e){if(!this.allowVariableSaves)return;let t=this.data.layers.find(r=>r.data.type==="light");t&&e.shared.getVariable(t.data.alphaOverride,["material",this.uuid,"alphaOverride"]),this.data.layers.forEach(r=>{"alpha"in r.data&&typeof r.data.alpha=="string"&&e.shared.getVariable(r.data.alpha,["material",this.uuid,"layer",r.id,"alpha"])})}getLayersOfType(e){return this.layers.filter(t=>t.type===e)}getLayerByUuid(e){return this.layers.find(t=>t.uuid===e)}onUpdate(e){this.lightLayer=this.layers.find(t=>t instanceof yc),this.lightLayer===void 0&&(this.lightLayer=new yc(0,"",{...da.defaultData("light","phong"),visible:!1},new rH,{},e)),this.dispose();for(let t of this.flavors)t&&t.dispose();this.applyTextureMaps(),this.applyMasks(),this.blendColors(),this.blendAfterColors(),this.blendPositions(),this.build(),this.nodeContextUuid=0}applyTextureMaps(){let e=this.layers.find(n=>n instanceof yc);if(!e)return;let t=e.data,r=t.bumpMap,i=t.roughnessMap;e.node.bumpMap=void 0,e.node.roughnessMap=void 0;for(let n=0;n<this.layers.length;++n){let a=this.layers[n];a instanceof ln&&a.color instanceof tH&&(a.uuid===r&&(e.node.bumpMap=a.color),a.uuid===i&&(e.node.roughnessMap=a.color))}}updateByOp(e,t,r){if(Yn.startContext(this),t!==void 0?this.data=t:t=this.data,this.transparent=Jg(t,r.shared),e.path[0]==="layers"){let i=r.shared,n=e.path[1];if(n===void 0)r.scene.markNeedsUpdateRendererDirty(),this.reset0(t,r);else{e.type===0&&e.props.occlusion!==void 0&&r.scene.markNeedsUpdateRendererDirty();let a=this.layers.find(o=>o.uuid===n);if(a){let o=t.layers.data(n),s;e.type===0&&("alpha"in e.props||"alphaOverride"in e.props)&&("alpha"in e.props?s={...e.props,alpha:Zv(e.props.alpha,i,["material",this.uuid,"layer",n,"alpha"])}:s={...e.props,alphaOverride:Zv(e.props.alphaOverride,i,["material",this.uuid,"alphaOverride"])}),a.updateByOp({...e,...s?{props:s}:{},path:e.path.slice(2)},o,r)&&this.reset0(t,r)}}}else this.reset0(t,r);Yn.endContext(this)}applyMasks(){for(let e=0;e<this.layers.length;++e){let t=this.layers[e];t instanceof ln?t.color.mask=void 0:t instanceof yc&&(t.node.mask=void 0)}for(let e=0;e<this.layers.length;++e){let t=this.layers[e];if(t instanceof ln&&t.isMask.value&&t.data.visible&&e>0){let r=e-1,i=this.layers[r];i instanceof yc?i.node.mask=new os(t.color,t.alpha,os.MUL):i instanceof ln&&(i.isMask.value||(i.color.mask=new os(t.color,t.alpha,os.MUL)))}}}blendColors(){let e=this.layers.findIndex(r=>r instanceof ln),t=this.layers.findIndex(r=>r instanceof yc);if(e!==-1&&e<t){let r=this.layers[e].color;for(let i=e+1;i<t;++i){let n=this.layers[i];if(n instanceof ln){if(n.isMask.value)continue;r=new gre(r,n.color,n.alpha,n.mode)}}this.fragment.color=r}else this.fragment.color=void 0}blendAfterColors(){let e=new Hi("outgoingLight","f"),t=this.layers.findIndex(r=>r instanceof yc);if(this.layers.length>t+1){for(let r=t+1;r<this.layers.length;++r){let i=this.layers[r];if(i instanceof ln){if(i.isMask.value)continue;e=new gre(e,i.color,i.alpha,i.mode)}}this.fragment.afterColor=e}else this.fragment.afterColor=void 0}blendPositions(){let e=this.layers.filter(t=>t instanceof aye);if(e.length>0){let t=e[0].position;for(let r=1;r<e.length;++r)e[r]&&(t=new os(t,e[r].position,os.ADD),t=new os(t,new mt(.5).setReadonly(!0),os.MUL));this.fragment.position=t}else this.fragment.position=void 0}getDefines(){return this.defines}getUniforms(){return this.uniforms}getVertexShader(){return this.vertexShader}getFragmentShader(){return this.fragmentShader}onBeforeCompile(e){e.defines=this.defines,e.uniforms=this.uniforms,e.vertexShader=this.vertexShader,e.fragmentShader=this.fragmentShader,e.extensionDerivatives=this.extensions.derivatives===!0,e.extensionFragDepth=this.extensions.fragDepth===!0,e.extensionDrawBuffers=this.extensions.drawBuffers===!0,e.extensionShaderTextureLOD=this.extensions.shaderTextureLOD===!0}clampUniformsForPreview(e,t){let r=(i,n,a)=>Math.min(Math.max(i,n),a);for(let i of this.layers)if(i.type==="displace"){let n=r(i.uniforms[`f${i.id}_intensity`].value,e,t);i.uniforms[`f${i.id}_intensity`].value=n}}updateFrame(e){for(let t=0;t<this.updaters.length;++t)e.updateNode(this.updaters[t])}build(){let e=new I1e;e.needsJitter=this.needsJitter,this.lights=this.lightLayer.data.visible,e.build(this.fragment,this.fragment),this.vertexShader=e.getCode("vertex"),this.fragmentShader=e.getCode("fragment"),this.defines=e.defines,this.uniforms=e.uniforms,this.extensions=e.extensions,this.updaters=e.updaters;for(let t of this.flavors)t&&t.updateAfterBuild();return this}nodeMaterialDispose(){this.layers.forEach(e=>e.dispose()),super.dispose();for(let e of this.flavors)e&&e.dispose()}assetsLoaded(){for(let e of this.layers)if(e instanceof ln){let t=e.params.texture;if(t instanceof TO&&!t.image.loaded)return!1}return!0}};Object.defineProperties(wp.prototype,{properties:{get:function(){return this.fragment.properties}}});var LO=class extends iH{constructor(e,t,r){super(e,t,!1),this.uuid=r,this.allowVariableSaves=!0,this.saveVariableLocations(t)}},Mre=new Map;function E5t(e){if(typeof e=="string")return e;let t=Mre.get(e);return t||(t={url:URL.createObjectURL(new Blob([e]))},Mre.set(e,t)),t.url}var sye,M5t=new Promise(e=>{sye=e}),Tre=!1,L5;function T5t(){if(Tre)return;if(L5)return L5;async function e(){await Te(()=>import("./B5T_NaK1.js").then(t=>t.h),[],import.meta.url),sye(window!==void 0?window:global),Tre=!0}return L5=e(),L5}var lye;M5t.then(e=>lye=e);function P5t(e){let t=!1;return e.scene.objects.traverse((r,i)=>{if(i.events===void 0||Array.isArray(i.events)===!1)return!0;let n=[];i.events.forEach(a=>{"dragDropActions"in a.data?(n.push(...a.data.dragDropActions.drag),n.push(...a.data.dragDropActions.drop)):"inActions"in a.data?(n.push(...a.data.inActions),n.push(...a.data.outActions)):"gameActions"in a.data?(n.push(...a.data.gameActions.idle),n.push(...a.data.gameActions.move),n.push(...a.data.gameActions.jump),n.push(...a.data.gameActions.run)):"breakpoints"in a.data?a.data.breakpoints.forEach(o=>{n.push(...o.data.actions)}):"actions"in a.data&&n.push(...a.data.actions),t=t||n.some(o=>o.data.type==="Audio")})}),t}var Qx=class{constructor({src:e,volume:t,delay:r,loop:i}){this._volume=1,this.delay=0,this._loop=1,this.loopsRemaining=0,this._status="stopped",this.onEnd=()=>{this.loopsRemaining===1/0?this.replay():this.loopsRemaining>1?(this.replay(),this.loopsRemaining--):(this._status="stopped",this.loopsRemaining=this._loop)};let n;typeof e=="string"?n={src:e}:n={src:E5t(e),format:"wav"},this.sound=new lye.Howl(n),this.sound.on("end",this.onEnd),this.src=e,t!==void 0&&(this.volume=t),r!==void 0&&(this.delay=r),i!==void 0&&(this.loop=i)}get status(){return this._status}get volume(){return this._volume}set volume(e){this._volume=e,this.sound.volume(e)}get loop(){return this._loop}set loop(e){this._loop=e,this.loopsRemaining=e}replay(){this.clearDelay(),this.delayTimerId=window.setTimeout(()=>{this.sound.play(),this.clearDelay()},this.delay)}fade(e,t=1e3){e?(this.sound.volume(this._volume),this.clearFade(),this.fadeTimerId=window.setTimeout(()=>{this.sound.fade(this._volume,0,t),this.clearFade()},e)):this.sound.fade(this._volume,0,t)}on(e,t,r){this.sound.on(e,t,r)}off(e,t,r){this.sound.off(e,t,r)}play(){this._status==="playing"||this.sound.playing()||(this._status==="paused"?(this.sound.seek()===0?this.replay():this.sound.play(),this._status="playing"):this._status==="stopped"&&(this.replay(),this._status="playing"))}pause(){this._status==="playing"&&(this.sound.pause(),this.clearFade(),this.clearDelay(),this._status="paused")}stop(){this.sound.stop(),this.loopsRemaining=this._loop,this.clearFade(),this.clearDelay(),this._status="stopped"}clearFade(){this.fadeTimerId&&(clearTimeout(this.fadeTimerId),delete this.fadeTimerId)}clearDelay(){this.delayTimerId&&(clearTimeout(this.delayTimerId),delete this.delayTimerId)}dispose(e=!1){this.off(),this.stop(),this.clearFade(),this.clearDelay()}},D5t=class{constructor(){this.type="ShapePath",this.color=new Vt,this.subPaths=[],this.currentPath=null}moveTo(e,t){return this.currentPath=new HS,this.subPaths.push(this.currentPath),this.currentPath.moveTo(e,t),this}lineTo(e,t){var r;return(r=this.currentPath)==null||r.lineTo(e,t),this}quadraticCurveTo(e,t,r,i){var n;return(n=this.currentPath)==null||n.quadraticCurveTo(e,t,r,i),this}bezierCurveTo(e,t,r,i,n,a){var o;return(o=this.currentPath)==null||o.bezierCurveTo(e,t,r,i,n,a),this}splineThru(e){var t;return(t=this.currentPath)==null||t.splineThru(e),this}toShapes(){let e={ORIGIN:0,DESTINATION:1,BETWEEN:2,LEFT:3,RIGHT:4,BEHIND:5,BEYOND:6},t={loc:e.ORIGIN,t:0};function r(f,p,v,m){let g=f.x,y=p.x,x=v.x,b=m.x,_=f.y,w=p.y,S=v.y,A=m.y,M=(b-x)*(_-S)-(A-S)*(g-x),E=(y-g)*(_-S)-(w-_)*(g-x),T=(A-S)*(y-g)-(b-x)*(w-_),L=M/T,P=E/T;if(T===0&&M!==0||L<=0||L>=1||P<0||P>1)return null;if(M===0&&T===0){for(let C=0;C<2;C++)if(i(C===0?v:m,f,p),t.loc===e.ORIGIN){let D=C===0?v:m;return{x:D.x,y:D.y,t:t.t}}else if(t.loc===e.BETWEEN){let D=+(g+t.t*(y-g)).toPrecision(10),I=+(_+t.t*(w-_)).toPrecision(10);return{x:D,y:I,t:t.t}}return null}else{for(let I=0;I<2;I++)if(i(I===0?v:m,f,p),t.loc===e.ORIGIN){let O=I===0?v:m;return{x:O.x,y:O.y,t:t.t}}let C=+(g+L*(y-g)).toPrecision(10),D=+(_+L*(w-_)).toPrecision(10);return{x:C,y:D,t:L}}}function i(f,p,v){let m=v.x-p.x,g=v.y-p.y,y=f.x-p.x,x=f.y-p.y,b=m*x-y*g;if(f.x===p.x&&f.y===p.y){t.loc=e.ORIGIN,t.t=0;return}if(f.x===v.x&&f.y===v.y){t.loc=e.DESTINATION,t.t=1;return}if(b<-Number.EPSILON){t.loc=e.LEFT;return}if(b>Number.EPSILON){t.loc=e.RIGHT;return}if(m*y<0||g*x<0){t.loc=e.BEHIND;return}if(Math.sqrt(m*m+g*g)<Math.sqrt(y*y+x*x)){t.loc=e.BEYOND;return}let _;m!==0?_=y/m:_=x/g,t.loc=e.BETWEEN,t.t=_}function n(f,p){let v=[],m=[];for(let g=1;g<f.length;g++){let y=f[g-1],x=f[g];for(let b=1;b<p.length;b++){let _=p[b-1],w=p[b],S=r(y,x,_,w);S!==null&&v.find(A=>A.t<=S.t+Number.EPSILON&&A.t>=S.t-Number.EPSILON)===void 0&&(v.push(S),m.push(new me(S.x,S.y)))}}return m}function a(f,p,v){let m=new me;p.getCenter(m);let g=[];return v.forEach(y=>{y.boundingBox.containsPoint(m)&&n(f,y.points).forEach(x=>{g.push({identifier:y.identifier,isCW:y.isCW,point:x})})}),g.sort((y,x)=>y.point.x-x.point.x),g}function o(f,p,v,m,g){(g==null||g==="")&&(g="nonzero");let y=new me;f.boundingBox.getCenter(y);let x=[new me(v,y.y),new me(m,y.y)],b=a(x,f.boundingBox,p);b.sort((E,T)=>E.point.x-T.point.x);let _=[],w=[];b.forEach(E=>{E.identifier===f.identifier?_.push(E):w.push(E)});let S=_[0].point.x,A=[],M=0;for(;M<w.length&&w[M].point.x<S;)A.length>0&&A[A.length-1]===w[M].identifier?A.pop():A.push(w[M].identifier),M++;if(A.push(f.identifier),g==="evenodd"){let E=A.length%2===0,T=A[A.length-2];return{identifier:f.identifier,isHole:E,for:T}}else if(g==="nonzero"){let E=!0,T=null,L=null;for(let P=0;P<A.length;P++){let C=A[P];p[C]&&(E?(L=p[C].isCW,E=!1,T=C):L!==p[C].isCW&&(L=p[C].isCW,E=!0))}return{identifier:f.identifier,isHole:E,for:T}}else console.warn('fill-rule: "'+g+'" is currently not implemented.')}let s=0,l=999999999,u=-999999999,c=[];this.subPaths.forEach(f=>{let p=f.getPoints(),v=-999999999,m=999999999,g=-999999999,y=999999999;for(let x=0;x<p.length;x++){let b=p[x];b.y>v&&(v=b.y),b.y<m&&(m=b.y),b.x>g&&(g=b.x),b.x<y&&(y=b.x)}u<=g&&(u=g+1),l>=y&&(l=y-1),p.length&&c.push({curves:f.curves,points:p,isCW:cme.isClockWise(p),identifier:s++,boundingBox:new _me(new me(y,m),new me(g,v))})});let h=c.map(f=>{var p;return o(f,c,l,u,(p=this.userData)==null?void 0:p.style.fillRule)}),d=[];return c.forEach(f=>{let p=h[f.identifier];if(p&&!p.isHole){let v=new US;v.curves=f.curves,h.filter(m=>(m==null?void 0:m.isHole)&&m.for===f.identifier).forEach(m=>{if(m){let g=c[m.identifier],y=new HS;y.curves=g.curves,v.holes.push(y)}}),d.push(v)}}),d}},uye=!1,cye,Pre=new Promise(e=>{cye=e}),Dre=!1,k5;function I5t(){if(uye=!0,Dre)return;if(k5)return k5;async function e(){let t=await Te(()=>import("./D6jUvuOk.js"),[],import.meta.url);cye(t),Dre=!0}return k5=e(),k5}var L5t=class{async load(e,t,r=()=>{}){let{load:i}=await Pre;i(e,(n,a)=>{n||!a?r(n??"Something went wrong"):t(a)})}async parse(e){let{parse:t,Bidi:r}=await Pre;try{let i=t(e),n=new r,a=o=>i.charToGlyphIndex(o.char);return n.registerModifier("glyphIndex",null,a),n.applyFeatures(i,i.defaultRenderOptions.features),{font:i,bidi:n}}catch(i){console.error(i)}}};async function k5t(e){return await(await fetch(e)).arrayBuffer()}var R5t=new L5t;async function Ire(e){let t,r,i=!1;if(e.url?(t=await k5t(e.url),r=e.url,i=e.url.startsWith("/")):e.data&&(t=e.data.buffer.slice(e.data.byteOffset,e.data.byteOffset+e.data.byteLength)),t)if(uye){let n=await R5t.parse(t);if(n)return{font:n.font,url:r,intercepted:i,arr:t,bidi:n.bidi}}else return{font:void 0,url:r,intercepted:i,arr:t,bidi:null}}function O5t(e,t){return t.state.glyphIndex===e||t.state.fina===e||t.state.medi===e||t.state.init===e}var B5t=class{constructor(e){this._arrayBuffer=new ArrayBuffer(1),this._isLoaded=!1,this._intercepted=!1,this._isUserFont=e.isUserFont??!1,this._loadingPromise=Ire(e).then(t=>{t&&(this._arrayBuffer=t.arr,this._url=t.url,this.font=t.font,this._intercepted=t.intercepted,this._isLoaded=!0,this._bidi=t.bidi)})}update(e){this._isLoaded=!1,this._isUserFont=e.isUserFont??!1,this._loadingPromise=Ire(e).then(t=>{t&&(this._arrayBuffer=t.arr,this._url=t.url,this.font=t.font,this._intercepted=t.intercepted,this._isLoaded=!0,this._bidi=t.bidi)})}get url(){return this._url}get intercepted(){return this._intercepted}get isLoaded(){return this._isLoaded}get loadingPromise(){return this._loadingPromise}reverseLigaturesTable(e,t,r){if(!this._bidi)return[];let i=this._bidi;i.getTextGlyphs(t);let n=i.tokenizer.tokens,a=[],o=0,s=r.length===n.length;for(let l=0;l<r.length;l++){let u=r[l].index,c=String.fromCharCode(r[l].unicode),h=n[o];if(O5t(u,h)||s)a.push({char:c,index:u,replacements:[h.state.glyphIndex],replacementChars:[h.char]}),o++;else{let d=h.char,f="",p=[h.state.glyphIndex],v=[],m=!1;for(;!m;)o++,f=t.charAt(o),d+=f,p.push(e.charToGlyphIndex(f)),v=e.stringToGlyphs(d),v.length===1&&v[0].index===u&&(m=!0),o>t.length&&(m=!0);a.push({char:c,index:u,replacements:p,replacementChars:Array.from(d)}),o++}}return a}generateShapes(e,t){if(!this._isLoaded)return;let r=this.font,i=t.fontSize/this.unitsPerEm,n=t.fontSize*t.lineHeight,a=e.map(g=>this.getTextWidth(g,t)),o=t.width,s=this.getCharWidth(`
`,t),l=t.horizontalAlign===1?s:0,u=this.computeSpaceWidthForLine(e,0,t),c=this.getLineInitialOffsetX(a[0],o,t.horizontalAlign,e[0],s),h=this.getLineInitialOffsetY(n,e.length,t.height,i,t.verticalAlign),d=[],f=e.map(g=>[]),p=e.map(g=>[]),v;for(let g=0;g<e.length;g++){let y=e[g],x={features:{liga:!0}},b=[];try{b=r.stringToGlyphs(y,x)}catch(w){console.warn(w)}c=this.getLineInitialOffsetX(a[g],o,t.horizontalAlign,y,s);let _=[];try{_=this.reverseLigaturesTable(r,y,b)}catch(w){console.warn(w)}u=this.computeSpaceWidthForLine(e,g,t);for(let w=0;w<b.length;w++){let S=b[w],A=S.index===0?`
`:S.unicode?String.fromCharCode(S.unicode):void 0,M=_[w],E=0,T=0;w===0&&t.horizontalAlign===2&&S.leftSideBearing!==void 0&&(T=-S.leftSideBearing*i),v&&(E=r.getKerningValue(S,v)*i),c+=T+E;let L=0;if(A===`
`)L=l;else if(A===" ")L=u;else{let P=this.createPath(S,i,c,h,t);P&&(L=P.offsetX-(E+T),d.push(P.path))}if(M.replacements.length===1)p[g].push([c,h]),f[g].push(L);else{let P=M.replacements.map(O=>(r.glyphs.get(O).advanceWidth??0)*i),C=P.reduce((O,R)=>O+=R,0),D=P.map(O=>O/C),I=c;for(let O=0;O<D.length;O++){let R=L*D[O];p[g].push([I,h]),f[g].push(R),I+=R}}c+=L,v=S}h-=n}let m=[];for(let g=0,y=d.length;g<y;g++)m.push(...d[g].toShapes());return{shapes:m,charWidths:f,lineWidths:a,charCoords:p}}get isUserFont(){return this._isUserFont}get arrayBuffer(){return this._arrayBuffer}get ascender(){var e;return((e=this.font)==null?void 0:e.ascender)??0}get descender(){var e;return((e=this.font)==null?void 0:e.descender)??0}get familyName(){var e;return((e=this.font)==null?void 0:e.names.fontFamily)??""}get subfamilyName(){var e;return((e=this.font)==null?void 0:e.names.fontSubfamily)??""}get unitsPerEm(){var e;return((e=this.font)==null?void 0:e.unitsPerEm)??1}getLineInitialOffsetX(e,t,r,i,n){return(r===3||r===2)&&i.indexOf(`
`)>=0&&(e-=n),r===3?t*.5-e*.5:r===2?t-e:0}getLineInitialOffsetY(e,t,r,i,n){let a=t*e,o=Math.abs(this.ascender-this.descender)*i,s=e-o,l=-this.ascender*i-s/2;return n===3?-(r-a-l):n===2?-(r*.5-a*.5-l):l}createPath(e,t,r,i,n){var l;let a=e.getPath(r,-i,n.fontSize,{kerning:!1,letterSpacing:n.letterSpacing});if(!a){console.error('THREE.Font: character "'+e+'" does not exists in font family '+this.familyName+".");return}let o=new D5t,s=(e.advanceWidth??1)*t;if(e)for(let u of a.commands){let c=(l=o.currentPath)==null?void 0:l.currentPoint;if(!(c&&u.type!=="Z"&&c.x===u.x&&-c.y===u.y))switch(u.type){case"M":o.moveTo(u.x,-u.y);break;case"L":o.lineTo(u.x,-u.y);break;case"Q":o.quadraticCurveTo(u.x1,-u.y1,u.x,-u.y);break;case"C":o.bezierCurveTo(u.x1,-u.y1,u.x2,-u.y2,u.x,-u.y);break}}return o.subPaths.forEach(u=>{let c=N5t(u.curves);c!==void 0&&u.currentPoint.distanceTo(c)>0&&u.lineTo(c.x,c.y)}),{offsetX:s+n.fontSize*n.letterSpacing,path:o}}getCharWidth(e,t){var r;return((r=this.font)==null?void 0:r.getAdvanceWidth(e,t.fontSize,{kerning:!0,letterSpacing:t.letterSpacing}))??0}getTextWidth(e,t){var r;return((r=this.font)==null?void 0:r.getAdvanceWidth(e,t.fontSize,{kerning:!0,letterSpacing:t.letterSpacing}))??0}computeSpaceWidthForLine(e,t,r){let i=this.getCharWidth(" ",r),n=e[t];if(n){let a=this.countSpaces(n.trimEnd());if(r.horizontalAlign===4&&t<e.length-1&&a){let o=r.width,s=this.getTextWidth(n,r);return(o-(s-a*i))/a}}return i}countSpaces(e){return(e.match(/ /g)||[]).length}};function N5t(e){if(e.length){let t=e[0];if(t instanceof Cu)return t.v1;if(t instanceof mu||t instanceof xp)return t.v0}}var V5t=class{constructor(){this.objects=new Map,this.unreachable=new Set}getCached(e){return this.objects.get(e)}get size(){return this.objects.size}get(e,t,r){let i=this.objects.get(e);return i===void 0?(i=this.createObject(e,t,r),this.objects.set(e,i)):i.isShared=!0,i}forceDelete(e){let t=this.objects.get(e);t&&(this.disposeObject(t),this.objects.delete(e))}mutateIfUnique(e,t){let r=this.objects.get(e);if(r&&r.isShared!==!0)return this.objects.delete(e),this.objects.set(t,r),r}startGc(){this.unreachable=new Set(this.objects.keys())}markAsReachable(e,t){let r=this.objects.get(e);t===r&&this.unreachable.delete(e)}endGc(){this.unreachable.forEach(e=>{this.disposeObject(this.objects.get(e)),this.objects.delete(e)}),this.unreachable.clear()}dispose(){this.objects.forEach(e=>{this.disposeObject(e)}),this.objects.clear()}},Lre=class extends V5t{constructor(e){super(),this.flatShading=e}disposeObject(e){e.dispose()}createObject(e,t,r){let i=Kw(e,t,this.flatShading,r);return i.computeBoundingSphere(),i}},F5t={markNeedsUpdateRendererDirty:()=>{}},YA=1e3,kre=512*YA;function z5t(e,t){let r=typeof e;return!!((t==="string"||t==="number")&&r===t||t==="boolean"&&(e==="true"||e==="false"||e===!0||e===!1)||t==="image"&&r==="string"&&e.startsWith("http"))}var H5t="https://hooks.spline.design",U5t=`${H5t}/events?hashFile=`,G5t=class{constructor(e,t){this.id=e,this.userWebhook=t,this.result=void 0,this._connected=!1,this.emitter=N7(),this.reconnectWaitFor=YA,this._onError=r=>{var i,n,a;(i=this.eventSource)==null||i.removeEventListener("message",this._onMessage),(n=this.eventSource)==null||n.removeEventListener("error",this._onError),(a=this.eventSource)==null||a.removeEventListener("open",this._onConnected),this._scheduleReconnect()},this._onConnected=r=>{clearTimeout(this.scheduledReconnectHandle),this.reconnectWaitFor=YA,this._connected=!0},this._onDisconnected=()=>{clearTimeout(this.scheduledReconnectHandle),this.reconnectWaitFor=YA,this._connected=!1},this._onMessage=r=>{let i=r.data,n;try{n=JSON.parse(i)}catch(a){console.error("Error parsing webhook message",a)}if(n){let a=!1;this.userWebhook.parametersSchemas.forEach(({data:o})=>{n[o.name]!==void 0&&z5t(n[o.name],o.type)&&(this.result===void 0&&(this.result={}),this.result[o.name]=n[o.name],a=!0)}),a&&this.emitter.emit("message",{userWebhookId:this.id})}}}connect(){clearTimeout(this.scheduledReconnectHandle),this.userWebhook.url&&(this.eventSource=new EventSource(U5t+this.userWebhook.url),this.eventSource.addEventListener("message",this._onMessage),this.eventSource.addEventListener("error",this._onError),this.eventSource.addEventListener("open",this._onConnected))}disconnect(){var e,t,r,i;(e=this.eventSource)==null||e.removeEventListener("message",this._onMessage),(t=this.eventSource)==null||t.removeEventListener("error",this._onError),(r=this.eventSource)==null||r.removeEventListener("open",this._onConnected),(i=this.eventSource)==null||i.close(),this._onDisconnected(),clearTimeout(this.scheduledReconnectHandle)}_scheduleReconnect(){this.reconnectWaitFor*=2,this.reconnectWaitFor>kre&&(this.reconnectWaitFor=kre),clearTimeout(this.scheduledReconnectHandle),this.scheduledReconnectHandle=setTimeout(()=>{this.scheduledReconnectHandle=void 0,this.connect()},this.reconnectWaitFor)}update(e){this.userWebhook=e}dispose(){this._connected&&this.disconnect()}get connected(){return this._connected}on(e,t){this.emitter.on(e,t)}off(e,t){this.emitter.off(e,t)}getParametersKeys(){return this.userWebhook.parametersSchemas.map(e=>e.data.name)}getParameterValue(e){var t;if(this.getParametersKeys().includes(e)){if(this.result)return(t=this.result)==null?void 0:t[e];for(let r of this.userWebhook.parametersSchemas)if(r.data.name===e)return aO.defaultParameterValueByType(r.data.type)}}},j5t=globalThis.atob,W5t=globalThis.btoa,E1=class{static floatTo16BitPCM(e){let t=new ArrayBuffer(e.length*2),r=new DataView(t),i=0;for(let n=0;n<e.length;n++,i+=2){let a=Math.max(-1,Math.min(1,e[n]));r.setInt16(i,a<0?a*32768:a*32767,!0)}return t}static base64ToArrayBuffer(e){let t=j5t(e),r=t.length,i=new Uint8Array(r);for(let n=0;n<r;n++)i[n]=t.charCodeAt(n);return i.buffer}static arrayBufferToBase64(e){e instanceof Float32Array?e=this.floatTo16BitPCM(e):e instanceof Int16Array&&(e=e.buffer);let t="",r=new Uint8Array(e),i=32768;for(let n=0;n<r.length;n+=i){let a=r.subarray(n,n+i);t+=String.fromCharCode.apply(null,a)}return W5t(t)}static mergeInt16Arrays(e,t){if(e instanceof ArrayBuffer&&(e=new Int16Array(e)),t instanceof ArrayBuffer&&(t=new Int16Array(t)),!(e instanceof Int16Array)||!(t instanceof Int16Array))throw new Error("Both items must be Int16Array");let r=new Int16Array(e.length+t.length);for(let i=0;i<e.length;i++)r[i]=e[i];for(let i=0;i<t.length;i++)r[e.length+i]=t[i];return r}static generateId(e,t=21){let r="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz",i=Array(t-e.length).fill(0).map(n=>r[Math.floor(Math.random()*r.length)]).join("");return`${e}${i}`}},q5t=e=>new Promise(t=>setTimeout(()=>t(),e)),hye=class{constructor(){this.eventHandlers={},this.nextEventHandlers={}}clearEventHandlers(){return this.eventHandlers={},this.nextEventHandlers={},!0}on(e,t){return this.eventHandlers[e]=this.eventHandlers[e]||[],this.eventHandlers[e].push(t),t}onNext(e,t){return this.nextEventHandlers[e]=this.nextEventHandlers[e]||[],this.nextEventHandlers[e].push(t),t}off(e,t){let r=this.eventHandlers[e]||[];if(t){let i=r.indexOf(t);if(i===-1)throw new Error(`Could not turn off specified event listener for "${e}": not found as a listener`);r.splice(i,1)}else delete this.eventHandlers[e];return!0}offNext(e,t){let r=this.nextEventHandlers[e]||[];if(t){let i=r.indexOf(t);if(i===-1)throw new Error(`Could not turn off specified next event listener for "${e}": not found as a listener`);r.splice(i,1)}else delete this.nextEventHandlers[e];return!0}async waitForNext(e,t=null){let r=Date.now(),i;for(this.onNext(e,n=>i=n);!i;){if(t&&Date.now()-r>t)return null;await q5t(1)}return i}dispatch(e,t){let r=[].concat(this.eventHandlers[e]||[]);for(let n of r)n(t);let i=[].concat(this.nextEventHandlers[e]||[]);for(let n of i)n(t);return delete this.nextEventHandlers[e],!0}},Y5t=class extends hye{constructor({url:e,apiKey:t,dangerouslyAllowAPIKeyInBrowser:r,debug:i}={}){if(super(),this.defaultUrl="wss://api.openai.com/v1/realtime",this.url=e||this.defaultUrl,this.apiKey=t||null,this.debug=!!i,this.ws=null,globalThis.document&&this.apiKey&&!r)throw new Error('Can not provide API key in the browser without "dangerouslyAllowAPIKeyInBrowser" set to true')}isConnected(){return!!this.ws}log(...e){let t=[`[Websocket/${new Date().toISOString()}]`].concat(e).map(r=>typeof r=="object"&&r!==null?JSON.stringify(r,null,2):r);return this.debug&&console.log(...t),!0}async connect({model:e}={model:"gpt-4o-realtime-preview-2024-10-01"}){if(!this.apiKey&&this.url===this.defaultUrl&&console.warn(`No apiKey provided for connection to "${this.url}"`),this.isConnected())throw new Error("Already connected");if(globalThis.document){this.apiKey&&console.warn("Warning: Connecting using API key in the browser, this is not recommended");let t=globalThis.WebSocket,r=new t(`${this.url}${e?`?model=${e}`:""}`,["realtime",`openai-insecure-api-key.${this.apiKey}`,"openai-beta.realtime-v1"]);return r.addEventListener("message",i=>{let n=JSON.parse(i.data);this.receive(n.type,n)}),new Promise((i,n)=>{let a=()=>{this.disconnect(r),n(new Error(`Could not connect to "${this.url}"`))};r.addEventListener("error",a),r.addEventListener("open",()=>{this.log(`Connected to "${this.url}"`),r.removeEventListener("error",a),r.addEventListener("error",()=>{this.disconnect(r),this.log(`Error, disconnected from "${this.url}"`),this.dispatch("close",{error:!0})}),r.addEventListener("close",()=>{this.disconnect(r),this.log(`Disconnected from "${this.url}"`),this.dispatch("close",{error:!1})}),this.ws=r,i(!0)})})}}disconnect(e){if(!e||this.ws===e)return this.ws&&this.ws.close(),this.ws=null,!0}receive(e,t){return this.log("received:",e,t),this.dispatch(`server.${e}`,t),this.dispatch("server.*",t),!0}send(e,t){if(!this.isConnected())throw new Error("RealtimeAPI is not connected");if(t=t||{},typeof t!="object")throw new Error("data must be an object");let r={event_id:E1.generateId("evt_"),type:e,...t};return this.dispatch(`client.${e}`,r),this.dispatch("client.*",r),this.log("sent:",e,r),this.ws.send(JSON.stringify(r)),!0}},X5t=class{constructor(){Q0(this,"defaultFrequency",24e3),Q0(this,"EventProcessors",{"conversation.item.created":e=>{let{item:t}=e,r=JSON.parse(JSON.stringify(t));if(this.itemLookup[r.id]||(this.itemLookup[r.id]=r,this.items.push(r)),r.formatted={},r.formatted.audio=new Int16Array(0),r.formatted.text="",r.formatted.transcript="",this.queuedSpeechItems[r.id]&&(r.formatted.audio=this.queuedSpeechItems[r.id].audio,delete this.queuedSpeechItems[r.id]),r.content){let i=r.content.filter(n=>["text","input_text"].includes(n.type));for(let n of i)r.formatted.text+=n.text}return this.queuedTranscriptItems[r.id]&&(r.formatted.transcript=this.queuedTranscriptItems.transcript,delete this.queuedTranscriptItems[r.id]),r.type==="message"?r.role==="user"?(r.status="completed",this.queuedInputAudio&&(r.formatted.audio=this.queuedInputAudio,this.queuedInputAudio=null)):r.status="in_progress":r.type==="function_call"?(r.formatted.tool={type:"function",name:r.name,call_id:r.call_id,arguments:""},r.status="in_progress"):r.type==="function_call_output"&&(r.status="completed",r.formatted.output=r.output),{item:r,delta:null}},"conversation.item.truncated":e=>{let{item_id:t,audio_end_ms:r}=e,i=this.itemLookup[t];if(!i)throw new Error(`item.truncated: Item "${t}" not found`);let n=Math.floor(r*this.defaultFrequency/1e3);return i.formatted.transcript="",i.formatted.audio=i.formatted.audio.slice(0,n),{item:i,delta:null}},"conversation.item.deleted":e=>{let{item_id:t}=e,r=this.itemLookup[t];if(!r)throw new Error(`item.deleted: Item "${t}" not found`);delete this.itemLookup[r.id];let i=this.items.indexOf(r);return i>-1&&this.items.splice(i,1),{item:r,delta:null}},"conversation.item.input_audio_transcription.completed":e=>{let{item_id:t,content_index:r,transcript:i}=e,n=this.itemLookup[t],a=i||" ";return n?(n.content[r].transcript=i,n.formatted.transcript=a,{item:n,delta:{transcript:i}}):(this.queuedTranscriptItems[t]={transcript:a},{item:null,delta:null})},"input_audio_buffer.speech_started":e=>{let{item_id:t,audio_start_ms:r}=e;return this.queuedSpeechItems[t]={audio_start_ms:r},{item:null,delta:null}},"input_audio_buffer.speech_stopped":(e,t)=>{let{item_id:r,audio_end_ms:i}=e;this.queuedSpeechItems[r]||(this.queuedSpeechItems[r]={audio_start_ms:i});let n=this.queuedSpeechItems[r];if(n.audio_end_ms=i,t){let a=Math.floor(n.audio_start_ms*this.defaultFrequency/1e3),o=Math.floor(n.audio_end_ms*this.defaultFrequency/1e3);n.audio=t.slice(a,o)}return{item:null,delta:null}},"response.created":e=>{let{response:t}=e;return this.responseLookup[t.id]||(this.responseLookup[t.id]=t,this.responses.push(t)),{item:null,delta:null}},"response.output_item.added":e=>{let{response_id:t,item:r}=e,i=this.responseLookup[t];if(!i)throw new Error(`response.output_item.added: Response "${t}" not found`);return i.output.push(r.id),{item:null,delta:null}},"response.output_item.done":e=>{let{item:t}=e;if(!t)throw new Error('response.output_item.done: Missing "item"');let r=this.itemLookup[t.id];if(!r)throw new Error(`response.output_item.done: Item "${t.id}" not found`);return r.status=t.status,{item:r,delta:null}},"response.content_part.added":e=>{let{item_id:t,part:r}=e,i=this.itemLookup[t];if(!i)throw new Error(`response.content_part.added: Item "${t}" not found`);return i.content.push(r),{item:i,delta:null}},"response.audio_transcript.delta":e=>{let{item_id:t,content_index:r,delta:i}=e,n=this.itemLookup[t];if(!n)throw new Error(`response.audio_transcript.delta: Item "${t}" not found`);return n.content[r].transcript+=i,n.formatted.transcript+=i,{item:n,delta:{transcript:i}}},"response.audio.delta":e=>{let{item_id:t,content_index:r,delta:i}=e,n=this.itemLookup[t];if(!n)throw new Error(`response.audio.delta: Item "${t}" not found`);let a=E1.base64ToArrayBuffer(i),o=new Int16Array(a);return n.formatted.audio=E1.mergeInt16Arrays(n.formatted.audio,o),{item:n,delta:{audio:o}}},"response.text.delta":e=>{let{item_id:t,content_index:r,delta:i}=e,n=this.itemLookup[t];if(!n)throw new Error(`response.text.delta: Item "${t}" not found`);return n.content[r].text+=i,n.formatted.text+=i,{item:n,delta:{text:i}}},"response.function_call_arguments.delta":e=>{let{item_id:t,delta:r}=e,i=this.itemLookup[t];if(!i)throw new Error(`response.function_call_arguments.delta: Item "${t}" not found`);return i.arguments+=r,i.formatted.tool.arguments+=r,{item:i,delta:{arguments:r}}}}),this.clear()}clear(){return this.itemLookup={},this.items=[],this.responseLookup={},this.responses=[],this.queuedSpeechItems={},this.queuedTranscriptItems={},this.queuedInputAudio=null,!0}queueInputAudio(e){return this.queuedInputAudio=e,e}processEvent(e,...t){if(!e.event_id)throw console.error(e),new Error('Missing "event_id" on event');if(!e.type)throw console.error(e),new Error('Missing "type" on event');let r=this.EventProcessors[e.type];if(!r)throw new Error(`Missing conversation event processor for "${e.type}"`);return r.call(this,e,...t)}getItem(e){return this.itemLookup[e]||null}getItems(){return this.items.slice()}},Rre=class extends hye{constructor({url:e,apiKey:t,dangerouslyAllowAPIKeyInBrowser:r,debug:i}={}){super(),this.defaultSessionConfig={modalities:["text","audio"],instructions:"",voice:"alloy",input_audio_format:"pcm16",output_audio_format:"pcm16",input_audio_transcription:null,turn_detection:null,tools:[],tool_choice:"auto",temperature:.8,max_response_output_tokens:4096},this.sessionConfig={},this.transcriptionModels=[{model:"whisper-1"}],this.defaultServerVadConfig={type:"server_vad",threshold:.5,prefix_padding_ms:300,silence_duration_ms:200},this.realtime=new Y5t({url:e,apiKey:t,dangerouslyAllowAPIKeyInBrowser:r,debug:i}),this.conversation=new X5t,this._resetConfig(),this._addAPIEventHandlers()}_resetConfig(){return this.sessionCreated=!1,this.tools={},this.sessionConfig=JSON.parse(JSON.stringify(this.defaultSessionConfig)),this.inputAudioBuffer=new Int16Array(0),!0}_addAPIEventHandlers(){this.realtime.on("client.*",i=>{let n={time:new Date().toISOString(),source:"client",event:i};this.dispatch("realtime.event",n)}),this.realtime.on("server.*",i=>{let n={time:new Date().toISOString(),source:"server",event:i};this.dispatch("realtime.event",n)}),this.realtime.on("server.session.created",()=>this.sessionCreated=!0);let e=(i,...n)=>{let{item:a,delta:o}=this.conversation.processEvent(i,...n);return{item:a,delta:o}},t=(i,...n)=>{let{item:a,delta:o}=e(i,...n);return a&&this.dispatch("conversation.updated",{item:a,delta:o}),{item:a,delta:o}},r=async i=>{try{let n=JSON.parse(i.arguments),a=this.tools[i.name];if(!a)throw new Error(`Tool "${i.name}" has not been added`);let o=await a.handler(n);this.realtime.send("conversation.item.create",{item:{type:"function_call_output",call_id:i.call_id,output:JSON.stringify(o)}})}catch(n){this.realtime.send("conversation.item.create",{item:{type:"function_call_output",call_id:i.call_id,output:JSON.stringify({error:n.message})}})}this.createResponse()};return this.realtime.on("server.response.created",e),this.realtime.on("server.response.output_item.added",e),this.realtime.on("server.response.content_part.added",e),this.realtime.on("server.input_audio_buffer.speech_started",i=>{e(i),this.dispatch("conversation.interrupted")}),this.realtime.on("server.input_audio_buffer.speech_stopped",i=>e(i,this.inputAudioBuffer)),this.realtime.on("server.conversation.item.created",i=>{let{item:n}=t(i);this.dispatch("conversation.item.appended",{item:n}),n.status==="completed"&&this.dispatch("conversation.item.completed",{item:n})}),this.realtime.on("server.conversation.item.truncated",t),this.realtime.on("server.conversation.item.deleted",t),this.realtime.on("server.conversation.item.input_audio_transcription.completed",t),this.realtime.on("server.response.audio_transcript.delta",t),this.realtime.on("server.response.audio.delta",t),this.realtime.on("server.response.text.delta",t),this.realtime.on("server.response.function_call_arguments.delta",t),this.realtime.on("server.response.output_item.done",async i=>{let{item:n}=t(i);n.status==="completed"&&this.dispatch("conversation.item.completed",{item:n}),n.formatted.tool&&r(n.formatted.tool)}),!0}isConnected(){return this.realtime.isConnected()}reset(){return this.disconnect(),this.clearEventHandlers(),this.realtime.clearEventHandlers(),this._resetConfig(),this._addAPIEventHandlers(),!0}async connect(){if(this.isConnected())throw new Error("Already connected, use .disconnect() first");return await this.realtime.connect(),this.updateSession(),!0}async waitForSessionCreated(){if(!this.isConnected())throw new Error("Not connected, use .connect() first");for(;!this.sessionCreated;)await new Promise(e=>setTimeout(()=>e(),1));return!0}disconnect(){this.sessionCreated=!1,this.realtime.isConnected()&&this.realtime.disconnect(),this.conversation.clear()}getTurnDetectionType(){var e;return((e=this.sessionConfig.turn_detection)==null?void 0:e.type)||null}addTool(e,t){if(!(e!=null&&e.name))throw new Error("Missing tool name in definition");let r=e==null?void 0:e.name;if(this.tools[r])throw new Error(`Tool "${r}" already added. Please use .removeTool("${r}") before trying to add again.`);if(typeof t!="function")throw new Error(`Tool "${r}" handler must be a function`);return this.tools[r]={definition:e,handler:t},this.updateSession(),this.tools[r]}removeTool(e){if(!this.tools[e])throw new Error(`Tool "${e}" does not exist, can not be removed.`);return delete this.tools[e],!0}deleteItem(e){return this.realtime.send("conversation.item.delete",{item_id:e}),!0}updateSession({modalities:e=void 0,instructions:t=void 0,voice:r=void 0,input_audio_format:i=void 0,output_audio_format:n=void 0,input_audio_transcription:a=void 0,turn_detection:o=void 0,tools:s=void 0,tool_choice:l=void 0,temperature:u=void 0,max_response_output_tokens:c=void 0}={}){e!==void 0&&(this.sessionConfig.modalities=e),t!==void 0&&(this.sessionConfig.instructions=t),r!==void 0&&(this.sessionConfig.voice=r),i!==void 0&&(this.sessionConfig.input_audio_format=i),n!==void 0&&(this.sessionConfig.output_audio_format=n),a!==void 0&&(this.sessionConfig.input_audio_transcription=a),o!==void 0&&(this.sessionConfig.turn_detection=o),s!==void 0&&(this.sessionConfig.tools=s),l!==void 0&&(this.sessionConfig.tool_choice=l),u!==void 0&&(this.sessionConfig.temperature=u),c!==void 0&&(this.sessionConfig.max_response_output_tokens=c);let h=[].concat((s||[]).map(f=>{let p={type:"function",...f};if(this.tools[p==null?void 0:p.name])throw new Error(`Tool "${p==null?void 0:p.name}" has already been defined`);return p}),Object.keys(this.tools).map(f=>({type:"function",...this.tools[f].definition}))),d={...this.sessionConfig};return d.tools=h,this.realtime.isConnected()&&this.realtime.send("session.update",{session:d}),!0}sendUserMessageContent(e=[]){if(e.length){for(let t of e)t.type==="input_audio"&&(t.audio instanceof ArrayBuffer||t.audio instanceof Int16Array)&&(t.audio=E1.arrayBufferToBase64(t.audio));this.realtime.send("conversation.item.create",{item:{type:"message",role:"user",content:e}})}return this.createResponse(),!0}appendInputAudio(e){return e.byteLength>0&&(this.realtime.send("input_audio_buffer.append",{audio:E1.arrayBufferToBase64(e)}),this.inputAudioBuffer=E1.mergeInt16Arrays(this.inputAudioBuffer,e)),!0}createResponse(){return this.getTurnDetectionType()===null&&this.inputAudioBuffer.byteLength>0&&(this.realtime.send("input_audio_buffer.commit"),this.conversation.queueInputAudio(this.inputAudioBuffer),this.inputAudioBuffer=new Int16Array(0)),this.realtime.send("response.create"),!0}cancelResponse(e,t=0){if(e){if(e){let r=this.conversation.getItem(e);if(!r)throw new Error(`Could not find item "${e}"`);if(r.type!=="message")throw new Error('Can only cancelResponse messages with type "message"');if(r.role!=="assistant")throw new Error('Can only cancelResponse messages with role "assistant"');this.realtime.send("response.cancel");let i=r.content.findIndex(n=>n.type==="audio");if(i===-1)throw new Error("Could not find audio on item to cancel");return this.realtime.send("conversation.item.truncate",{item_id:e,content_index:i,audio_end_ms:Math.floor(t/this.conversation.defaultFrequency*1e3)}),{item:r}}}else return this.realtime.send("response.cancel"),{item:null}}async waitForNextItem(){let e=await this.waitForNext("conversation.item.appended"),{item:t}=e;return{item:t}}async waitForNextCompletedItem(){let e=await this.waitForNext("conversation.item.completed"),{item:t}=e;return{item:t}}},Z5t=`
class AudioProcessor extends AudioWorkletProcessor {

  constructor() {
    super();
    this.port.onmessage = this.receive.bind(this);
    this.initialize();
  }

  initialize() {
    this.foundAudio = false;
    this.recording = false;
    this.chunks = [];
  }

  /**
   * Concatenates sampled chunks into channels
   * Format is chunk[Left[], Right[]]
   */
  readChannelData(chunks, channel = -1, maxChannels = 9) {
    let channelLimit;
    if (channel !== -1) {
      if (chunks[0] && chunks[0].length - 1 < channel) {
        throw new Error(
          \`Channel \${channel} out of range: max \${chunks[0].length}\`
        );
      }
      channelLimit = channel + 1;
    } else {
      channel = 0;
      channelLimit = Math.min(chunks[0] ? chunks[0].length : 1, maxChannels);
    }
    const channels = [];
    for (let n = channel; n < channelLimit; n++) {
      const length = chunks.reduce((sum, chunk) => {
        return sum + chunk[n].length;
      }, 0);
      const buffers = chunks.map((chunk) => chunk[n]);
      const result = new Float32Array(length);
      let offset = 0;
      for (let i = 0; i < buffers.length; i++) {
        result.set(buffers[i], offset);
        offset += buffers[i].length;
      }
      channels[n] = result;
    }
    return channels;
  }

  /**
   * Combines parallel audio data into correct format,
   * channels[Left[], Right[]] to float32Array[LRLRLRLR...]
   */
  formatAudioData(channels) {
    if (channels.length === 1) {
      // Simple case is only one channel
      const float32Array = channels[0].slice();
      const meanValues = channels[0].slice();
      return { float32Array, meanValues };
    } else {
      const float32Array = new Float32Array(
        channels[0].length * channels.length
      );
      const meanValues = new Float32Array(channels[0].length);
      for (let i = 0; i < channels[0].length; i++) {
        const offset = i * channels.length;
        let meanValue = 0;
        for (let n = 0; n < channels.length; n++) {
          float32Array[offset + n] = channels[n][i];
          meanValue += channels[n][i];
        }
        meanValues[i] = meanValue / channels.length;
      }
      return { float32Array, meanValues };
    }
  }

  /**
   * Converts 32-bit float data to 16-bit integers
   */
  floatTo16BitPCM(float32Array) {
    const buffer = new ArrayBuffer(float32Array.length * 2);
    const view = new DataView(buffer);
    let offset = 0;
    for (let i = 0; i < float32Array.length; i++, offset += 2) {
      let s = Math.max(-1, Math.min(1, float32Array[i]));
      view.setInt16(offset, s < 0 ? s * 0x8000 : s * 0x7fff, true);
    }
    return buffer;
  }

  /**
   * Retrieves the most recent amplitude values from the audio stream
   * @param {number} channel
   */
  getValues(channel = -1) {
    const channels = this.readChannelData(this.chunks, channel);
    const { meanValues } = this.formatAudioData(channels);
    return { meanValues, channels };
  }

  /**
   * Exports chunks as an audio/wav file
   */
  export() {
    const channels = this.readChannelData(this.chunks);
    const { float32Array, meanValues } = this.formatAudioData(channels);
    const audioData = this.floatTo16BitPCM(float32Array);
    return {
      meanValues: meanValues,
      audio: {
        bitsPerSample: 16,
        channels: channels,
        data: audioData,
      },
    };
  }

  receive(e) {
    const { event, id } = e.data;
    let receiptData = {};
    switch (event) {
      case 'start':
        this.recording = true;
        break;
      case 'stop':
        this.recording = false;
        break;
      case 'clear':
        this.initialize();
        break;
      case 'export':
        receiptData = this.export();
        break;
      case 'read':
        receiptData = this.getValues();
        break;
      default:
        break;
    }
    // Always send back receipt
    this.port.postMessage({ event: 'receipt', id, data: receiptData });
  }

  sendChunk(chunk) {
    const channels = this.readChannelData([chunk]);
    const { float32Array, meanValues } = this.formatAudioData(channels);
    const rawAudioData = this.floatTo16BitPCM(float32Array);
    const monoAudioData = this.floatTo16BitPCM(meanValues);
    this.port.postMessage({
      event: 'chunk',
      data: {
        mono: monoAudioData,
        raw: rawAudioData,
      },
    });
  }

  process(inputList, outputList, parameters) {
    // Copy input to output (e.g. speakers)
    // Note that this creates choppy sounds with Mac products
    const sourceLimit = Math.min(inputList.length, outputList.length);
    for (let inputNum = 0; inputNum < sourceLimit; inputNum++) {
      const input = inputList[inputNum];
      const output = outputList[inputNum];
      const channelCount = Math.min(input.length, output.length);
      for (let channelNum = 0; channelNum < channelCount; channelNum++) {
        input[channelNum].forEach((sample, i) => {
          output[channelNum][i] = sample;
        });
      }
    }
    const inputs = inputList[0];
    // There's latency at the beginning of a stream before recording starts
    // Make sure we actually receive audio data before we start storing chunks
    let sliceIndex = 0;
    if (!this.foundAudio) {
      for (const channel of inputs) {
        sliceIndex = 0; // reset for each channel
        if (this.foundAudio) {
          break;
        }
        if (channel) {
          for (const value of channel) {
            if (value !== 0) {
              // find only one non-zero entry in any channel
              this.foundAudio = true;
              break;
            } else {
              sliceIndex++;
            }
          }
        }
      }
    }
    if (inputs && inputs[0] && this.foundAudio && this.recording) {
      // We need to copy the TypedArray, because the \`process\`
      // internals will reuse the same buffer to hold each input
      const chunk = inputs.map((input) => input.slice(sliceIndex));
      this.chunks.push(chunk);
      this.sendChunk(chunk);
    }
    return true;
  }
}

registerProcessor('audio_processor', AudioProcessor);
`,Q5t=new Blob([Z5t],{type:"application/javascript"}),K5t=URL.createObjectURL(Q5t),J5t=K5t,Ore=[4186.01,4434.92,4698.63,4978.03,5274.04,5587.65,5919.91,6271.93,6644.88,7040,7458.62,7902.13],$5t=["C","C#","D","D#","E","F","F#","G","G#","A","A#","B"],op=[],nH=[];for(let e=1;e<=8;e++)for(let t=0;t<Ore.length;t++){let r=Ore[t];op.push(r/Math.pow(2,8-e)),nH.push($5t[t]+e)}var T6=[32,2e3],Bre=op.filter((e,t)=>op[t]>T6[0]&&op[t]<T6[1]),eAt=nH.filter((e,t)=>op[t]>T6[0]&&op[t]<T6[1]),aH=class{static getFrequencies(e,t,r,i="frequency",n=-100,a=-30){r||(r=new Float32Array(e.frequencyBinCount),e.getFloatFrequencyData(r));let o=t/2,s=1/r.length*o,l,u,c;if(i==="music"||i==="voice"){let d=i==="voice"?Bre:op,f=Array(d.length).fill(n);for(let p=0;p<r.length;p++){let v=p*s,m=r[p];for(let g=d.length-1;g>=0;g--)if(v>d[g]){f[g]=Math.max(f[g],m);break}}l=f,u=i==="voice"?Bre:op,c=i==="voice"?eAt:nH}else l=Array.from(r),u=l.map((d,f)=>s*f),c=u.map(d=>`${d.toFixed(2)} Hz`);let h=l.map(d=>Math.max(0,Math.min((d-n)/(a-n),1)));return{values:new Float32Array(h),frequencies:u,labels:c}}constructor(e,t=null){if(this.fftResults=[],t){let{length:r,sampleRate:i}=t,n=new OfflineAudioContext({length:r,sampleRate:i}),a=n.createBufferSource();a.buffer=t;let o=n.createAnalyser();o.fftSize=8192,o.smoothingTimeConstant=.1,a.connect(o);let s=1/60,l=r/i,u=c=>{let h=s*c;h<l&&n.suspend(h).then(()=>{let d=new Float32Array(o.frequencyBinCount);o.getFloatFrequencyData(d),this.fftResults.push(d),u(c+1)}),c===1?n.startRendering():n.resume()};a.start(0),u(1),this.audio=e,this.context=n,this.analyser=o,this.sampleRate=i,this.audioBuffer=t}else{let r=new AudioContext,i=r.createMediaElementSource(e),n=r.createAnalyser();n.fftSize=8192,n.smoothingTimeConstant=.1,i.connect(n),n.connect(r.destination),this.audio=e,this.context=r,this.analyser=n,this.sampleRate=this.context.sampleRate,this.audioBuffer=null}}getFrequencies(e="frequency",t=-100,r=-30){let i=null;if(this.audioBuffer&&this.fftResults.length){let n=this.audio.currentTime/this.audio.duration,a=Math.min(n*this.fftResults.length|0,this.fftResults.length-1);i=this.fftResults[a]}return aH.getFrequencies(this.analyser,this.sampleRate,i,e,t,r)}async resumeIfSuspended(){return this.context.state==="suspended"&&await this.context.resume(),!0}},fg=class{static floatTo16BitPCM(e){let t=new ArrayBuffer(e.length*2),r=new DataView(t),i=0;for(let n=0;n<e.length;n++,i+=2){let a=Math.max(-1,Math.min(1,e[n]));r.setInt16(i,a<0?a*32768:a*32767,!0)}return t}static mergeBuffers(e,t){let r=new Uint8Array(e.byteLength+t.byteLength);return r.set(new Uint8Array(e),0),r.set(new Uint8Array(t),e.byteLength),r.buffer}_packData(e,t){return[new Uint8Array([t,t>>8]),new Uint8Array([t,t>>8,t>>16,t>>24])][e]}pack(e,t){if(t!=null&&t.bitsPerSample)if(t!=null&&t.channels){if(!(t!=null&&t.data))throw new Error('Missing "data"')}else throw new Error('Missing "channels"');else throw new Error('Missing "bitsPerSample"');let{bitsPerSample:r,channels:i,data:n}=t,a=["RIFF",this._packData(1,52),"WAVE","fmt ",this._packData(1,16),this._packData(0,1),this._packData(0,i.length),this._packData(1,e),this._packData(1,e*i.length*r/8),this._packData(0,i.length*r/8),this._packData(0,r),"data",this._packData(1,i[0].length*i.length*r/8),n],o=new Blob(a,{type:"audio/mpeg"}),s=URL.createObjectURL(o);return{blob:o,url:s,channelCount:i.length,sampleRate:e,duration:n.byteLength/(i.length*e*2)}}},Nre=class{constructor({sampleRate:e=44100,outputToSpeakers:t=!1,debug:r=!1}={}){this.scriptSrc=J5t,this.sampleRate=e,this.outputToSpeakers=t,this.debug=!!r,this._deviceChangeCallback=null,this._devices=[],this.stream=null,this.processor=null,this.source=null,this.node=null,this.recording=!1,this._lastEventId=0,this.eventReceipts={},this.eventTimeout=5e3,this._chunkProcessor=()=>{},this._chunkProcessorSize=void 0,this._chunkProcessorBuffer={raw:new ArrayBuffer(0),mono:new ArrayBuffer(0)}}static async decode(e,t=44100,r=-1){let i=new AudioContext({sampleRate:t}),n,a;if(e instanceof Blob){if(r!==-1)throw new Error('Can not specify "fromSampleRate" when reading from Blob');a=e,n=await a.arrayBuffer()}else if(e instanceof ArrayBuffer){if(r!==-1)throw new Error('Can not specify "fromSampleRate" when reading from ArrayBuffer');n=e,a=new Blob([n],{type:"audio/wav"})}else{let u,c;if(e instanceof Int16Array){c=e,u=new Float32Array(e.length);for(let d=0;d<e.length;d++)u[d]=e[d]/32768}else if(e instanceof Float32Array)u=e;else if(e instanceof Array)u=new Float32Array(e);else throw new Error('"audioData" must be one of: Blob, Float32Arrray, Int16Array, ArrayBuffer, Array<number>');if(r===-1)throw new Error('Must specify "fromSampleRate" when reading from Float32Array, In16Array or Array');if(r<3e3)throw new Error('Minimum "fromSampleRate" is 3000 (3kHz)');c||(c=fg.floatTo16BitPCM(u));let h={bitsPerSample:16,channels:[u],data:c};a=new fg().pack(r,h).blob,n=await a.arrayBuffer()}let o=await i.decodeAudioData(n),s=o.getChannelData(0),l=URL.createObjectURL(a);return{blob:a,url:l,values:s,audioBuffer:o}}log(){return this.debug&&this.log(...arguments),!0}getSampleRate(){return this.sampleRate}getStatus(){return this.processor?this.recording?"recording":"paused":"ended"}async _event(e,t={},r=null){if(r=r||this.processor,!r)throw new Error("Can not send events without recording first");let i={event:e,id:this._lastEventId++,data:t};r.port.postMessage(i);let n=new Date().valueOf();for(;!this.eventReceipts[i.id];){if(new Date().valueOf()-n>this.eventTimeout)throw new Error(`Timeout waiting for "${e}" event`);await new Promise(o=>setTimeout(()=>o(!0),1))}let a=this.eventReceipts[i.id];return delete this.eventReceipts[i.id],a}listenForDeviceChange(e){if(e===null&&this._deviceChangeCallback)navigator.mediaDevices.removeEventListener("devicechange",this._deviceChangeCallback),this._deviceChangeCallback=null;else if(e!==null){let t=0,r=[],i=a=>a.map(o=>o.deviceId).sort().join(","),n=async()=>{let a=++t,o=await this.listDevices();a===t&&i(r)!==i(o)&&(r=o,e(o.slice()))};navigator.mediaDevices.addEventListener("devicechange",n),n(),this._deviceChangeCallback=n}return!0}async requestPermission(){let e=await navigator.permissions.query({name:"microphone"});if(e.state==="denied")window.alert("You must grant microphone access to use this feature.");else if(e.state==="prompt")try{(await navigator.mediaDevices.getUserMedia({audio:!0})).getTracks().forEach(t=>t.stop())}catch{window.alert("You must grant microphone access to use this feature.")}return!0}async listDevices(){if(!navigator.mediaDevices||!("enumerateDevices"in navigator.mediaDevices))throw new Error("Could not request user devices");await this.requestPermission();let e=(await navigator.mediaDevices.enumerateDevices()).filter(i=>i.kind==="audioinput"),t=e.findIndex(i=>i.deviceId==="default"),r=[];if(t!==-1){let i=e.splice(t,1)[0],n=e.findIndex(a=>a.groupId===i.groupId);n!==-1&&(i=e.splice(n,1)[0]),i.default=!0,r.push(i)}return r.concat(e)}async begin(e){if(this.processor)throw new Error("Already connected: please call .end() to start a new session");if(!navigator.mediaDevices||!("getUserMedia"in navigator.mediaDevices))throw new Error("Could not request user media");try{let o={audio:!0};e&&(o.audio={deviceId:{exact:e}}),this.stream=await navigator.mediaDevices.getUserMedia(o)}catch{throw new Error("Could not start media stream")}let t=new AudioContext({sampleRate:this.sampleRate}),r=t.createMediaStreamSource(this.stream);try{await t.audioWorklet.addModule(this.scriptSrc)}catch(o){throw console.error(o),new Error(`Could not add audioWorklet module: ${this.scriptSrc}`)}let i=new AudioWorkletNode(t,"audio_processor");i.port.onmessage=o=>{let{event:s,id:l,data:u}=o.data;if(s==="receipt")this.eventReceipts[l]=u;else if(s==="chunk")if(this._chunkProcessorSize){let c=this._chunkProcessorBuffer;this._chunkProcessorBuffer={raw:fg.mergeBuffers(c.raw,u.raw),mono:fg.mergeBuffers(c.mono,u.mono)},this._chunkProcessorBuffer.mono.byteLength>=this._chunkProcessorSize&&(this._chunkProcessor(this._chunkProcessorBuffer),this._chunkProcessorBuffer={raw:new ArrayBuffer(0),mono:new ArrayBuffer(0)})}else this._chunkProcessor(u)};let n=r.connect(i),a=t.createAnalyser();return a.fftSize=8192,a.smoothingTimeConstant=.1,n.connect(a),this.outputToSpeakers&&(console.warn(`Warning: Output to speakers may affect sound quality,
especially due to system audio feedback preventative measures.
use only for debugging`),a.connect(t.destination)),this.source=r,this.node=n,this.analyser=a,this.processor=i,!0}getFrequencies(e="frequency",t=-100,r=-30){if(!this.processor)throw new Error("Session ended: please call .begin() first");return aH.getFrequencies(this.analyser,this.sampleRate,null,e,t,r)}async pause(){if(this.processor){if(!this.recording)throw new Error("Already paused: please call .record() first")}else throw new Error("Session ended: please call .begin() first");return this._chunkProcessorBuffer.raw.byteLength&&this._chunkProcessor(this._chunkProcessorBuffer),this.log("Pausing ..."),await this._event("stop"),this.recording=!1,!0}async record(e=()=>{},t=8192){if(this.processor){if(this.recording)throw new Error("Already recording: please call .pause() first");if(typeof e!="function")throw new Error("chunkProcessor must be a function")}else throw new Error("Session ended: please call .begin() first");return this._chunkProcessor=e,this._chunkProcessorSize=t,this._chunkProcessorBuffer={raw:new ArrayBuffer(0),mono:new ArrayBuffer(0)},this.log("Recording ..."),await this._event("start"),this.recording=!0,!0}async clear(){if(!this.processor)throw new Error("Session ended: please call .begin() first");return await this._event("clear"),!0}async read(){if(!this.processor)throw new Error("Session ended: please call .begin() first");return this.log("Reading ..."),await this._event("read")}async save(e=!1){if(!this.processor)throw new Error("Session ended: please call .begin() first");if(!e&&this.recording)throw new Error("Currently recording: please call .pause() first, or call .save(true) to force");this.log("Exporting ...");let t=await this._event("export");return new fg().pack(this.sampleRate,t.audio)}async end(){if(!this.processor)throw new Error("Session ended: please call .begin() first");let e=this.processor;this.log("Stopping ..."),await this._event("stop"),this.recording=!1,this.stream.getTracks().forEach(r=>r.stop()),this.log("Exporting ...");let t=await this._event("export",{},e);return this.processor.disconnect(),this.source.disconnect(),this.node.disconnect(),this.analyser.disconnect(),this.stream=null,this.processor=null,this.source=null,this.node=null,new fg().pack(this.sampleRate,t.audio)}async quit(){return this.listenForDeviceChange(null),this.processor&&await this.end(),!0}},tAt=`
class StreamProcessor extends AudioWorkletProcessor {
  constructor() {
    super();
    this.hasStarted = false;
    this.hasInterrupted = false;
    this.outputBuffers = [];
    this.bufferLength = 128;
    this.write = { buffer: new Float32Array(this.bufferLength), trackId: null };
    this.writeOffset = 0;
    this.trackSampleOffsets = {};
    this.port.onmessage = (event) => {
      if (event.data) {
        const payload = event.data;
        if (payload.event === 'write') {
          const int16Array = payload.buffer;
          const float32Array = new Float32Array(int16Array.length);
          for (let i = 0; i < int16Array.length; i++) {
            float32Array[i] = int16Array[i] / 0x8000; // Convert Int16 to Float32
          }
          this.writeData(float32Array, payload.trackId);
        } else if (
          payload.event === 'offset' ||
          payload.event === 'interrupt'
        ) {
          const requestId = payload.requestId;
          const trackId = this.write.trackId;
          const offset = this.trackSampleOffsets[trackId] || 0;
          this.port.postMessage({
            event: 'offset',
            requestId,
            trackId,
            offset,
          });
          if (payload.event === 'interrupt') {
            this.hasInterrupted = true;
          }
        } else {
          throw new Error(\`Unhandled event "\${payload.event}"\`);
        }
      }
    };
  }

  writeData(float32Array, trackId = null) {
    let { buffer } = this.write;
    let offset = this.writeOffset;
    for (let i = 0; i < float32Array.length; i++) {
      buffer[offset++] = float32Array[i];
      if (offset >= buffer.length) {
        this.outputBuffers.push(this.write);
        this.write = { buffer: new Float32Array(this.bufferLength), trackId };
        buffer = this.write.buffer;
        offset = 0;
      }
    }
    this.writeOffset = offset;
    return true;
  }

  process(inputs, outputs, parameters) {
    const output = outputs[0];
    const outputChannelData = output[0];
    const outputBuffers = this.outputBuffers;
    if (this.hasInterrupted) {
      this.port.postMessage({ event: 'stop' });
      return false;
    } else if (outputBuffers.length) {
      this.hasStarted = true;
      const { buffer, trackId } = outputBuffers.shift();
      for (let i = 0; i < outputChannelData.length; i++) {
        outputChannelData[i] = buffer[i] || 0;
      }
      if (trackId) {
        this.trackSampleOffsets[trackId] =
          this.trackSampleOffsets[trackId] || 0;
        this.trackSampleOffsets[trackId] += buffer.length;
      }
      return true;
    } else if (this.hasStarted) {
      this.port.postMessage({ event: 'stop' });
      return false;
    } else {
      return true;
    }
  }
}

registerProcessor('stream_processor', StreamProcessor);
`,rAt=new Blob([tAt],{type:"application/javascript"}),iAt=URL.createObjectURL(rAt),nAt=iAt,aAt=class{constructor({sampleRate:e=44100}={}){this.scriptSrc=nAt,this.sampleRate=e,this.context=null,this.stream=null,this.analyser=null,this.trackSampleOffsets={},this.interruptedTrackIds={}}async connect(){this.context=new AudioContext({sampleRate:this.sampleRate}),this.context.state==="suspended"&&await this.context.resume();try{await this.context.audioWorklet.addModule(this.scriptSrc)}catch(t){throw console.error(t),new Error(`Could not add audioWorklet module: ${this.scriptSrc}`)}let e=this.context.createAnalyser();return e.fftSize=8192,e.smoothingTimeConstant=.1,this.analyser=e,!0}getFrequencies(e="frequency",t=-100,r=-30){if(!this.analyser)throw new Error("Not connected, please call .connect() first");return aH.getFrequencies(this.analyser,this.sampleRate,null,e,t,r)}_start(){let e=new AudioWorkletNode(this.context,"stream_processor");return e.connect(this.context.destination),e.port.onmessage=t=>{let{event:r}=t.data;if(r==="stop")e.disconnect(),this.stream=null;else if(r==="offset"){let{requestId:i,trackId:n,offset:a}=t.data,o=a/this.sampleRate;this.trackSampleOffsets[i]={trackId:n,offset:a,currentTime:o}}},this.analyser.disconnect(),e.connect(this.analyser),this.stream=e,!0}add16BitPCM(e,t="default"){if(typeof t!="string")throw new Error("trackId must be a string");if(this.interruptedTrackIds[t])return;this.stream||this._start();let r;if(e instanceof Int16Array)r=e;else if(e instanceof ArrayBuffer)r=new Int16Array(e);else throw new Error("argument must be Int16Array or ArrayBuffer");return this.stream.port.postMessage({event:"write",buffer:r,trackId:t}),r}async getTrackSampleOffset(e=!1){if(!this.stream)return null;let t=crypto.randomUUID();this.stream.port.postMessage({event:e?"interrupt":"offset",requestId:t});let r;for(;!r;)r=this.trackSampleOffsets[t],await new Promise(n=>setTimeout(()=>n(),1));let{trackId:i}=r;return e&&i&&(this.interruptedTrackIds[i]=!0),r}async interrupt(){return this.getTrackSampleOffset(!0)}},Vre=()=>"https://relayserver.spline.design/",Fre=class{constructor(e,t,r){this.data=e,this.id=t,this.shared=r,this.items=[],this.isConnected=!1,this.rafId=0,this.emitter=N7(),this.voice=0,this.frequencies=new Float32Array([0]),this.onRealTimeEvent=({time:i,source:n,event:a})=>{n==="server"&&a.type==="spline.ready"?this.onSessionCreated(a):n==="server"&&a.type==="session.created"&&(this.client.createResponse(),this.client.on("realtime.event",this.onRealTimeEvent))},this.onSessionCreated=async i=>{let n=Object.values(this.client.tools).map(a=>({type:"function",...a.definition}));this.client.realtime.send("spline.tools",{tools:n}),this.client.realtime.send("spline.connect",{}),await this.wavRecorder.record(a=>this.client.isConnected()&&this.client.appendInputAudio(a.mono))},this.animate=()=>{if(this.rafId=requestAnimationFrame(this.animate),this.isConnected){let i=this.wavStreamPlayer.analyser?this.wavStreamPlayer.getFrequencies("voice"):{values:new Float32Array([0])},n=i.values.reduce((a,o)=>a+o,0)/i.values.length;this.voice=n,this.frequencies=i.values,this.emitter.emit("voice",{value:n,frequencies:i.values})}},this.client=new Rre({url:Vre()+"?uuidfile="+e.integration.hash}),this.wavRecorder=new Nre({sampleRate:24e3}),this.wavStreamPlayer=new aAt({sampleRate:24e3})}update(e){this.data=e,this.client=new Rre({url:Vre()+"?uuidfile="+e.integration.hash})}setColorByName(e,t){let r=this.shared.getColorByName(e);if(r){let{id:i}=r,{r:n,g:a,b:o}=w3t.hexStringToRgb(t)??{r:0,g:0,b:0};this.shared.updateColor(i,{r:n/255,g:a/255,b:o/255})}}connect(){if(this.isConnected)return;this.isConnected=!0,this.client.updateSession({turn_detection:{type:"server_vad"}}),this.client.addTool({name:"set_personality_color",description:"returns a color based on the voice personality of the ai assistant. This should be called by the voice assistant each time it is asks to speak differently. If a color cannot be associated to the personality, the color should be a neutral color.",parameters:{type:"object",properties:{color:{type:"string",description:"css hex color string, reflecting the personality"},personality:{type:"string",description:"the personality of the voice assistant"}},required:["color","personality"]}},({color:n})=>{this.setColorByName("Voice Assistant Color",n)});let e=this.shared.getVariablesNames().join(", ");this.client.addTool({name:"set_variable",description:"Sets a Spline variable value when asked by the user.",parameters:{type:"object",properties:{name:{type:"string",description:`The name of the variable that needs to be set. Here's a list of available variables: ${e}. It the variable does not exist, don't call the function and warn the user about it.`},value:{type:"string",description:"The new value for this variable, should always be a string even for number and boolean variables, assume that the value will be cast to the proper type afterwards."}},required:["name","value","type"]}},({name:n,value:a})=>{let o=this.shared.getVariableByName(n);if(o){let s=this.shared.getVariable(o.id),l;typeof s=="number"?l=parseFloat(a):typeof s=="boolean"?l=a.toLowerCase()==="true":l={textValue:a},this.shared.updateVariable(o.id,l)}});let t=this.shared.getColorNames().join(", ");this.client.addTool({name:"set_color",description:"Sets a Spline color asset value when asked by the user.",parameters:{type:"object",properties:{name:{type:"string",description:`The name of the color asset that needs to be set. Here's a list of available color assets: ${t}. It the color asset does not exist, don't call the function and warn the user about it.`},value:{type:"string",description:"css hex color string"}},required:["name","value"]}},({name:n,value:a})=>{this.setColorByName(n,a)});let r=this.shared.scene,i=[];r.traverseEntity(n=>{n.data.events.forEach(a=>{if(a.data.type==="AIAssistantTrigger"){let{description:o}=a.data;i.push(o)}})}),this.client.addTool({name:"trigger_event",description:"Trigger an event by name, here are the available events, please match what the user is asking for to one of these if it applies, otherwise don't call the function and warn the user.",parameters:{type:"object",properties:{description:{type:"string",description:`The name of the event that needs to be triggered. Here's a list of available events: ${JSON.stringify(i)}.`},direction:{type:"string",description:"default is forward, but can be forward or backward. Always set to forward unless the user ask to reverse or cancel the event, then set to backward."}},required:["description","direction"]}},({description:n,direction:a})=>{this.emitter.emit("trigger_event",{description:n,direction:a})}),this.client.on("error",n=>console.error(n)),this.client.on("conversation.interrupted",async()=>{let n=await this.wavStreamPlayer.interrupt();if(n!=null&&n.trackId){let{trackId:a,offset:o}=n;await this.client.cancelResponse(a,o)}}),this.client.on("conversation.updated",async({item:n,delta:a})=>{var s;let o=this.client.conversation.getItems();if(a!=null&&a.audio&&this.wavStreamPlayer.add16BitPCM(a.audio,n.id),n.status==="completed"&&((s=n.formatted.audio)==null?void 0:s.length)){let l=await Nre.decode(n.formatted.audio,24e3,24e3);n.formatted.file=l}this.items=o}),this.animate()}disconnect(){cancelAnimationFrame(this.rafId),this.voice=0,this.isConnected=!1}async start(){try{await this.wavRecorder.end()}catch{}await this.wavRecorder.begin(),this.client.on("realtime.event",this.onRealTimeEvent),await this.wavStreamPlayer.connect(),await this.client.connect()}async stop(){try{this.client.off("realtime.event",this.onRealTimeEvent)}catch(e){console.error(e)}this.client.disconnect(),await this.wavRecorder.end(),await this.wavStreamPlayer.interrupt()}computeAnalysisForListenerEvent(e){if(e.analysis==="range"){let t=this.frequencies.slice(...e.analysisRange);return t.reduce((r,i)=>r+i,0)/t.length}return e.analysis==="single"?this.frequencies[e.analysisSingle]:this.voice}on(e,t){this.emitter.on(e,t)}off(e,t){this.emitter.off(e,t)}};function kO(e){return"variable_"+e}var oAt=class extends B_t{constructor(e){super(),this.shared=e}create(e){return new eye(e,this.shared)}},oH=class{constructor(e,t={},r=!0,i=!1){if(this.data=e,this.needsJitter=r,this.enableLocalStorageForPersistentVariables=i,this.geometryCache=new Lre(!0),this.geometryCache2=new Lre(!1),this.imageHolderCache=new oAt(this),this.thisContext={scene:F5t,shared:this},this.deletedMaterial=new LO(Ua.defaultTwoLayerData("phong"),this.thisContext,""),this.deletedImage=new Lf(sO.emptyImage,this),this.deletedVideo=new Lf(u6.defaultVideo,this),this.materials={},this.images={},this.uiBuffers={},this.videos={},this.colors={},this.audios={},this.particles={},this.fonts={},this.variables={},this.userAPIs={},this.userWebhooks={},this.mouseProperty=null,this.raycastProperty=null,this.requestRender=()=>{this._requestRender&&this._requestRender()},t.images)for(let[n,a]of Object.entries(t.images))this.addImage(n,a);if(t.videos)for(let[n,a]of Object.entries(t.videos))this.addVideo(n,a);if(t.audios)for(let[n,a]of Object.entries(t.audios))this.addAudio(n,a);if(t.particles)for(let[n,a]of Object.entries(t.particles))this.addParticle(n,a);this.reset(e)}setRequestRender(e){this._requestRender=e}getImageLoadPromises(){return Object.values(this.images).map(e=>e.loadPromise)}setEntityOpContext(e){this.entityOpContext=e}reset(e,t=!1){this.data=e,this.resetLib(e.lib);for(let{id:r,data:i}of e.variables)this.addVariableHolder(r,i),t&&this.updateVariableHolder(r,i);for(let[r,i]of Object.entries(e.userAPIs))this.addUserAPI(r,i);for(let[r,i]of Object.entries(e.userWebhooks))this.addUserWebhook(r,i);for(let[r,i]of Object.entries(e.images))this.addImage(r,i);for(let[r,i]of Object.entries(e.videos))this.addVideo(r,i);for(let[r,i]of Object.entries(e.colors))this.addColor(r,i);for(let[r,i]of Object.entries(e.materials))this.addMaterial(r,i);for(let[r,i]of Object.entries(e.audios))this.addAudio(r,i);for(let[r,i]of Object.entries(e.particles))this.addParticle(r,i);for(let[r,i]of Object.entries(e.fonts))this.addFont(r,i)}addMaterial(e,t){if(this.materials[e]){let r=this.materials[e];r.reset(t,this.thisContext),r.dispose()}else{let r=new LO(t,this.thisContext,e);this.materials[e]=r}}deleteMaterial(e){this.materials[e]&&(this.materials[e].nodeMaterialDispose(),delete this.materials[e])}getMaterial(e){return this.materials[e]}getMaterialOrDeletedPlaceholder(e){return this.materials[e]??this.deletedMaterial}material(e){return typeof e=="string"?this.getMaterialOrDeletedPlaceholder(e):e==null?(console.error("material is undefined or null"),this.deletedMaterial):new iH(e,this.thisContext)}getMaterials(){return this.materials}addImage(e,t){return this.images[e]?(this.onColorOrImageUpdate&&this.onColorOrImageUpdate(),this.images[e].updateSrc(t.data),!0):(this.images[e]=new Lf(t,this),!1)}deleteImage(e){let t=this.images[e];t&&(t.dispose(),delete this.images[e])}getDefaultImage(){return this.images.image_0}getImage(e){return this.images[e]??this.deletedImage}image(e){return typeof e=="string"?this.getImage(e):this.imageHolderCache.load(e)}addUIBuffer(e,t){return this.uiBuffers[e]?(this.onColorOrImageUpdate&&this.onColorOrImageUpdate(),this.uiBuffers[e].updateSrc(t),!0):(this.uiBuffers[e]=new Lf(t,this),!1)}uiBuffer(e){return this.uiBuffers[e]}addVideo(e,t){return this.videos[e]?(this.videos[e].updateSrc(t.data),!0):(this.videos[e]=new Lf(t,this),!1)}deleteVideo(e){let t=this.videos[e];t&&(t.dispose(),delete this.videos[e])}getVideo(e){return this.videos[e]??this.deletedVideo}video(e){return typeof e=="string"?this.getVideo(e):this.imageHolderCache.load(e)}addColor(e,t){return this.colors[e]?(this.onColorOrImageUpdate&&this.onColorOrImageUpdate(),"a"in t?this.colors[e].setRGBA(t.r,t.g,t.b,t.a):this.colors[e].setRGBA(t.r,t.g,t.b,1),!0):("a"in t?this.colors[e]=new M6(t.r,t.g,t.b,t.a):this.colors[e]=new M6(t.r,t.g,t.b,1),!1)}updateColor(e,t){if(this.colors[e]){this.onColorOrImageUpdate&&this.onColorOrImageUpdate();let r=this.colors[e];return this.colors[e].r=t.r??r.r,this.colors[e].g=t.g??r.g,this.colors[e].b=t.b??r.b,this.colors[e].a=t.a??r.a,!0}return!1}deleteColor(e){this.colors[e]&&delete this.colors[e]}getColor(e){return this.colors[e]}getColorNames(){return Object.values(this.data.colors).map(e=>e.name)}getColorByName(e){for(let t in this.data.colors)if(this.data.colors[t].name===e)return{color:this.colors[t],id:t}}color(e){let t;if(typeof e=="string"){let r=this.getColor(e);r?t=r:(console.warn("Tried to create color layer params with a color key that does not exist in the assets manager"),t=new qa(0,0,0,0))}else return"a"in e?new qa(e.r,e.g,e.b,e.a):new qa(e.r,e.g,e.b,1);return t}addAudio(e,t){this.audios[e]=t}getAudio(e){let t=this.audios[e];if(t instanceof Qx)return t;{let r=new Qx({src:t.data});return this.audios[e]=r,r}}addParticle(e,t){this.particles[e]=t}getParticle(e){return this.particles[e]}deleteParticle(e){this.particles[e]&&delete this.particles[e]}deleteAudio(e){let t=this.audios[e];t&&(t instanceof Qx&&t.dispose(),delete this.audios[e])}addFont(e,t){this.fonts[e]=new B5t(t),this.fonts[e].loadingPromise.then(()=>this.requestRender())}getFont(e){return this.fonts[e]}deleteFont(e){this.fonts[e]&&delete this.fonts[e]}dispose(){Object.keys(this.materials).forEach(e=>this.deleteMaterial(e)),this._requestRender=void 0,Object.values(this.audios).forEach(e=>{e instanceof Qx&&e.dispose()}),this.audios={},this.particles={},this.geometryCache.dispose(),this.geometryCache2.dispose()}addVariableHolder(e,t){if(this.variables[e]===void 0){let r=t.value;if(this.enableLocalStorageForPersistentVariables&&t.persistent){let i=localStorage.getItem(kO(e));r=i!==null?JSON.parse(i):t.value}return this.variables[e]={value:r,locations:[],persistent:t.persistent},"dynamicVariableType"in t&&(this.variables[e].dynamicVariablePlayState="Playing",this.variables[e].dynamicVariableToggleIsForward=void 0),!0}return this.variables[e].value=t.value,!1}resetDynamicVariablePlayState(){for(let e in this.variables)this.variables[e].dynamicVariablePlayState!==void 0&&(this.variables[e].dynamicVariablePlayState="Playing",this.variables[e].dynamicVariableToggleIsForward=void 0)}updateVariableHolder(e,t){this.updateVariable(e,t.value)}updateVariable(e,t){if(this.variables[e]===void 0)return!1;this.variables[e].value=t,this.enableLocalStorageForPersistentVariables&&this.variables[e].persistent&&localStorage.setItem(kO(e),JSON.stringify(t));let r=t;for(;typeof r=="string";)r=this.variables[r].value;let i=this.entityOpContext.scene;for(let n=this.variables[e].locations.length-1;n>=0;n--){let a=this.variables[e].locations[n];if(a[0]==="material"){let o=a[1],s=r,l={scene:i,shared:this},u=a.slice(2);i.traverseMaterial(h=>{let d=h.root??h;d.uuid===o&&d.onVariableUpdate(u,s,l)});let c=this.materials[o];c&&c.onVariableUpdate(u,s,l)}else{let o=i.find(a[0]);if(o===void 0){this.variables[e].locations.splice(n,1);continue}if(a[1]!=="geometry"&&a[1]!=="particles"){for(let s=1;s<a.length-1;s++)o=o[a[s]];a[1]==="rotation"?o[a[a.length-1]]=r*vt.DEG2RAD:o[a[a.length-1]]=r}if(o=i.find(a[0]),o.type==="ParticleEmitter"&&o.updateVariableState(r,a),Gr.is(o))if(a[1]==="position"||a[1]==="rotation"||a[1]==="scale")o.onVariableUpdate();else if(a[1]==="geometry"){let s=o;o.component&&(s=o.component);let l=s.dataPatched;s.chooseGeoemtryCache(this).forceDelete(l.geometry),s.createGeometryDelayed(this.entityOpContext),s.onVariableUpdate(!0),s.invalidateDownstreamBooleanData(),s.instances.forEach(u=>{let c=u.dataPatched;u.chooseGeoemtryCache(this).forceDelete(c.geometry),u.createGeometryDelayed(this.entityOpContext),u.onVariableUpdate(!0),u.invalidateDownstreamBooleanData()})}else a[1]==="morphTargetInfluences"&&o.updateMorphInfluences(a[2],r)}}return this.requestRender(),!0}deleteVariable(e){this.variables[e]&&delete this.variables[e]}getVariable(e,t){var r,i,n;if(Array.isArray(e)){if(e[0]==="mouse")return((r=this.mouseProperty)==null?void 0:r[e[1]])??0;if(e[0]==="raycast")return((i=this.raycastProperty)==null?void 0:i[e[1]])??0;let a=this.entityOpContext.scene.find(e[0]);if(e[1]==="width"||e[1]==="height"||e[1]==="depth")return a.geometry.userData.parameters[e[1]];for(let o=1;o<e.length;o++)a=a[e[o]];return e[1]==="rotation"&&(a*=vt.RAD2DEG),a}for(let a in this.variables){if(t===void 0)break;let o=this.variables[a],s=(n=o.locations)==null?void 0:n.findIndex(l=>Kn.equal(l,t));s!==void 0&&s!==-1&&o.locations.splice(s,1)}if(typeof e=="string"){let a=e,o=e;do{if(o=a,this.variables[a]===void 0)break;let s=this.variables[a].value;t&&this.variables[o]!==void 0&&this.variables[o].locations.push(t),a=s}while(typeof a=="string");return a}else return e}getVariables(){return this.variables}getVariablesNames(){return this.data.variables.map(e=>e.data.name)}getVariableByName(e){for(let t of this.data.variables)if(t.data.name===e)return{variable:t.data,id:t.id}}getDynamicVariablePlayState(e){var t;return(t=this.variables[e])==null?void 0:t.dynamicVariablePlayState}setDynamicVariablePlayState(e,t){this.variables[e]!==void 0&&(this.variables[e].dynamicVariablePlayState=t)}getDynamicVariableToggleIsForward(e){var t;return(t=this.variables[e])==null?void 0:t.dynamicVariableToggleIsForward}setDynamicVariableToggleIsForward(e,t){this.variables[e]!==void 0&&(this.variables[e].dynamicVariableToggleIsForward=t)}resetLib(e){for(let[t,r]of Object.entries(e.images))this.addImage(t,r.asset);for(let[t,r]of Object.entries(e.audios))this.addAudio(t,r.asset);for(let[t,r]of Object.entries(e.particles))this.addParticle(t,r.asset);for(let[t,r]of Object.entries(e.colors))this.addColor(t,r.asset);for(let[t,r]of Object.entries(e.fonts))this.addFont(t,r.asset);for(let[t,r]of Object.entries(e.materials))this.addMaterial(t,r.asset);for(let[t,r]of Object.entries(e.videos))this.addVideo(t,r.asset);for(let[t,r]of Object.entries(e.variables))this.addVariableHolder(t,r.asset)}updateLibByOp(e,t){e.path[0]==="images"?e.path.length===1&&e.type===1?this.addImage(e.id,e.data.asset):e.path.length===1&&e.type===2&&this.deleteImage(e.id):e.path[0]==="videos"?e.path.length===1&&e.type===1?this.addVideo(e.id,e.data.asset):e.path.length===1&&e.type===2&&this.deleteVideo(e.id):e.path[0]==="audios"?e.path.length===1&&e.type===1?this.addAudio(e.id,e.data.asset):e.path.length===1&&e.type===2&&this.deleteAudio(e.id):e.path[0]==="particles"?e.path.length===1&&e.type===1?this.addParticle(e.id,e.data.asset):e.path.length===1&&e.type===2&&this.deleteParticle(e.id):e.path[0]==="colors"?e.path.length===1&&e.type===1?this.addColor(e.id,e.data.asset):e.path.length===1&&e.type===2&&this.deleteColor(e.id):e.path[0]==="materials"?e.path.length===1&&e.type===1?this.addMaterial(e.id,e.data.asset):e.path.length===1&&e.type===2&&this.deleteMaterial(e.id):e.path[0]==="fonts"?e.path.length===1&&e.type===1?this.addFont(e.id,e.data.asset):e.path.length===1&&e.type===2&&this.deleteFont(e.id):e.path[0]==="variables"?e.path.length===1&&e.type===1?this.addVariableHolder(e.id,e.data.asset):e.path.length===1&&e.type===2&&this.deleteVariable(e.id):e.path[0]==="components"&&t.updateByLibOp(e,this)}updateByOp(e,t,r){var i;if(this.data=t,e.path[0]==="images")e.path.length===2&&e.type===0?e.props.data&&this.getImage(e.path[1]).updateSrc(e.props.data):e.path.length===1&&e.type===1?this.addImage(e.id,e.data):e.path.length===1&&e.type===2&&this.deleteImage(e.id);else if(e.path[0]==="videos")e.path.length===2&&e.type===0?e.props.data&&this.getVideo(e.path[1]).updateSrc(e.props.data):e.path.length===1&&e.type===1?this.addVideo(e.id,e.data):e.path.length===1&&e.type===2&&this.deleteVideo(e.id);else if(e.path[0]==="audios")e.path.length===2&&e.type===0?e.props.data&&this.addAudio(e.path[1],t.audios[e.path[1]]):e.path.length===1&&e.type===1?this.addAudio(e.id,e.data):e.path.length===1&&e.type===2&&this.deleteAudio(e.id);else if(e.path[0]==="particles")e.path.length===2&&e.type===0?e.props.data&&this.addParticle(e.path[1],t.particles[e.path[1]]):e.path.length===1&&e.type===1?this.addParticle(e.id,e.data):e.path.length===1&&e.type===2&&this.deleteParticle(e.id);else if(e.path[0]==="colors")e.path.length===2&&e.type===0?this.updateColor(e.path[1],e.props):e.path.length===1&&e.type===1?this.addColor(e.id,e.data):e.path.length===1&&e.type===2&&this.deleteColor(e.id);else if(e.path[0]==="materials")e.path.length===1&&e.type===1?this.addMaterial(e.id,e.data):e.path.length===1&&e.type===2?this.deleteMaterial(e.id):e.path.length>1&&this.getMaterial(e.path[1]).updateByOp(ya.drop(e,2),t.materials[e.path[1]],{shared:this,scene:r});else if(e.path[0]==="fonts")e.path.length===2&&e.type===0?this.updateFont(e.path[1],e,r):e.path.length===1&&e.type===1?this.addFont(e.id,e.data):e.path.length===1&&e.type===2&&this.deleteFont(e.id);else if(e.path[0]==="variables")e.path.length===2&&e.type===0?"value"in e.props?this.updateVariable(e.path[1],e.props.value):"persistent"in e.props&&(this.variables[e.path[1]].persistent=e.props.persistent):e.path.length===1&&e.type===4?this.addVariableHolder(e.id,e.data):e.path.length===1&&e.type===5&&this.deleteVariable(e.id);else if(e.path[0]==="userAPIs"){if(e.path.length===1&&e.type===1)this.addUserAPI(e.id,e.data);else if(e.path.length===1&&e.type===2)this.deleteUserAPI(e.id);else if(typeof e.path[1]=="string"){let n=t.userAPIs[e.path[1]];if(n){let a=e.type===0&&e.props.debounce===void 0,o=this.getUserAPI(e.path[1]);o instanceof Fre?o.update(n):o==null||o.update(n,this,a)}}}else if(e.path[0]==="userWebhooks"){if(e.path.length===1&&e.type===1)this.addUserWebhook(e.id,e.data);else if(e.path.length===1&&e.type===2)this.deleteUserWebhook(e.id);else if(typeof e.path[1]=="string"){let n=t.userWebhooks[e.path[1]];n&&((i=this.getUserWebhook(e.path[1]))==null||i.update(n))}}else e.path[0]==="lib"&&this.updateLibByOp(ya.drop(e,1),r)}updateFont(e,t,r){if(t.props.url){let i=this.getFont(e),n={...this.data.fonts[e],url:t.props.url};i.update(n),i.loadingPromise.then(()=>this.requestRender()),r.updateFont(e,this)}}addUserAPI(e,t){var r,i;return this.userAPIs[e]?(this.userAPIs[e].update(t,this),!0):((r=this.openAIRealtime)==null?void 0:r.id)===e?(this.openAIRealtime.update(t),!0):((i=t.integration)==null?void 0:i.type)==="VoiceAssistant"?(this.openAIRealtime=new Fre(t,e,this),!1):(this.userAPIs[e]=new g1e(e,t,this),!1)}getUserAPI(e){var t;return((t=this.openAIRealtime)==null?void 0:t.id)===e?this.openAIRealtime:this.userAPIs[e]}getUserAPIs(){return this.userAPIs}deleteUserAPI(e){let t=this.userAPIs[e];t&&(t.dispose(),delete this.userAPIs[e])}addUserWebhook(e,t){return this.userWebhooks[e]?(this.userWebhooks[e].update(t),!0):(this.userWebhooks[e]=new G5t(e,t),!1)}getUserWebhook(e){return this.userWebhooks[e]}getUserWebhooks(){return this.userWebhooks}deleteUserWebhook(e){let t=this.userWebhooks[e];t&&(t.dispose(),delete this.userWebhooks[e])}get scene(){return this.entityOpContext.scene}};new oH(bl.emptyData());var o2=class extends Jo{updateByPatchedOp(e,t,r){if(super.updateByPatchedOp(e,t,r),ubt(e.path,["materials"])!==null&&e.type===0&&Array.isArray(this.material))for(let[i,n]of Object.entries(e.props)){let a=r.shared.material(n);this.material[Number(i)]=a}else if(Ri(e.path,["material"])&&this.material instanceof wp)"material"in t&&typeof t.material!="string"&&this.material.updateByOp(ya.drop(e,1),t.material,r);else if(Ri(e.path,["materials","*"])&&Array.isArray(this.material)){let i=e.path[1];if("materials"in t&&i<this.material.length){let n=t.materials[i];typeof n!="string"&&this.material[i].updateByOp(ya.drop(e,2),n,r)}}}get needsAO(){return this.material!==void 0?(Array.isArray(this.material)?this.material[0]:this.material).hasAO:!1}updateState(e,t){var i,n;super.updateState(e,t),e.castShadow!==void 0&&(this.castShadow=e.castShadow),e.receiveShadow!==void 0&&(this.receiveShadow=e.receiveShadow);let r=this.dataPatched;if(((i=e.geometry)==null?void 0:i.type)!=="NonParametricGeometry"&&"material"in e&&e.material!==void 0&&(this.disposeMaterial(),this.material=t.shared.material(e.material).getFlavor(r.flatShading,r.side,r.wireframe),t.scene.markNeedsUpdateRendererDirty()),(((n=e.geometry)==null?void 0:n.type)==="NonParametricGeometry"||"materials"in e)&&("materials"in e&&e.materials!==void 0?(this.disposeMaterial(),this.material=e.materials.map(a=>t.shared.material(a).getFlavor(r.flatShading,r.side,r.wireframe)),t.scene.markNeedsUpdateRendererDirty()):"material"in e&&e.material!==void 0&&(this.disposeMaterial(),this.material=[t.shared.material(e.material).getFlavor(r.flatShading,r.side,r.wireframe)],t.scene.markNeedsUpdateRendererDirty())),e.flatShading!==void 0||e.wireframe!==void 0||e.side!==void 0)if(Array.isArray(this.material))for(let a=0;a<this.material.length;a++)this.material[a]=this.material[a].getFlavor(r.flatShading,r.side,r.wireframe);else this.material=this.material.getFlavor(r.flatShading,r.side,r.wireframe)}disposeMaterial(){this.material&&sge(this.material).forEach(e=>{e instanceof wp&&(e instanceof LO||e.nodeMaterialDispose())})}dispose(){this.disposeMaterial(),super.dispose()}},zre=new U,Hre=new er,Ure=new er,sAt=new U,Gre=new Ke,xo=class extends o2{constructor(e,t,r){super(e,t),this.data=t,this.isSkinnedMesh=!1,this.localGeometry=void 0,t.bindMode&&t.bindMatrix&&(this.bindMode=t.bindMode,this.bindMatrix=new Ke().fromArray(t.bindMatrix),this.bindMatrixInverse=new Ke)}chooseGeoemtryCache(e){return e.geometryCache}markGeometryAsReachable(e){this.geometryCreateDeleyed instanceof It&&this.chooseGeoemtryCache(e).markAsReachable(this.dataPatched.geometry,this.geometryCreateDeleyed)}get geometry(){if(this.localGeometry!==void 0)return this.localGeometry;if(this.geometryCreateDeleyed instanceof oH){let e=this.geometryCreateDeleyed,t=this.chooseGeoemtryCache(e);this.geometryCreateDeleyed=t.get(this.dataPatched.geometry,e,this)}return this.geometryCreateDeleyed}set geometry(e){this.localGeometry=e}get is2DAndNoDepth(){let e=this.dataPatched.geometry;return d6.is2DParametricMesh(e.type)&&e.depth===0}get is2DType(){return d6.is2DParametricMesh(this.geometry.userData.type)}get isNonParametric(){return this.geometry.userData.type==="NonParametricGeometry"}updateByPatchedOp(e,t,r){super.updateByPatchedOp(e,t,r),Ri(e.path,["geometry"])&&this.updateByPatchedOpGeometry(ya.drop(e,1),t.geometry,r)}removeInteractionGeometry(e){var t;(t=this.localGeometry)==null||t.dispose(),this.localGeometry=void 0}updateGeometryInteractions(e,t){var i;this.invalidateDownstreamBooleanData();let r=this.data.geometry.type;if(r==="NonParametricGeometry"||r==="SubdivGeometry"){let n=e;if(this.localGeometry===void 0){let u={...this.data.geometry,...n};this.localGeometry=Kw(u,t,this.data.flatShading,this)}let a,o,s;n.scaleBaked?[a,o,s]=n.scaleBaked:{width:a,height:o,depth:s}=n;let l=this.localGeometry.userData;l.sxPrev!==void 0&&EO(this.localGeometry.attributes,a/l.sxPrev,o/l.syPrev,s/l.szPrev),l.sxPrev=a,l.syPrev=o,l.szPrev=s}else{let n={...this.data.geometry,...e};(i=this.localGeometry)==null||i.dispose(),this.localGeometry=Kw(n,t,this.data.flatShading,this)}}refreshAttachedClonersInteractions(){for(let e of this.attachedSurfaceCloners)e.update()}refreshAttachedCloners(e){for(let t of this.attachedSurfaceCloners)e.scene.addPendingUpdateCloner(t.object)}refreshAttachedPaths(e){for(let t of this.attachedPaths)e.scene.addPendingCommand(()=>t.updateShape())}createGeometryDelayed(e){this.geometryCreateDeleyed=e.shared,this.refreshAttachedCloners(e),this.refreshAttachedPaths(e)}updateByPatchedOpGeometry(e,t,r){var n;let i=!1;e.type===0&&e.path.length===0&&Object.keys(e.props).includes("scaleBaked")&&this.geometryCreateDeleyed instanceof Fo&&this.chooseGeoemtryCache(r.shared).mutateIfUnique(this.geometryCreateDeleyed.data,t)===this.geometryCreateDeleyed&&(i=!0,this.geometryCreateDeleyed.mutateDirectlyScaleBaked(t,e.props.scaleBaked),this.refreshAttachedCloners(r),this.refreshAttachedPaths(r)),i||((n=r.scene)==null||n.markGeometryCacheDirty(),this.createGeometryDelayed(r)),this.resetBBoxNeedsUpdate(),this.invalidateDownstreamBooleanData()}updateGeometryOnStateUpdate(e,t){this.createGeometryDelayed(t)}updateState(e,t){e.geometry!==void 0&&this.updateGeometryOnStateUpdate(e.geometry,t);let r=e.morphTargetInfluences;if(r){this.updateMorphTargets(),this.geometry.morphTargetsRelative=!0;for(let{data:{name:i,value:n}}of r)this.updateMorphInfluences(i,t.shared.getVariable(n,[this.uuid,"morphTargetInfluences",i]))}super.updateState(e,t)}updateMorphInfluences(e,t){if(this.morphTargetDictionary===void 0)return;let r=this.morphTargetDictionary[e];r!==void 0&&(this.morphTargetInfluences[r]=t)}updateGeometryGroupsIfNeeded(){var e;Array.isArray(this.material)&&this.geometry.groups.length===0&&this.geometry.addGroup(0,Math.max(((e=this.geometry.getIndex())==null?void 0:e.count)??0,this.geometry.getAttribute("position").count),0)}updateEntityBoxSize(e,t){let r=this.geometry.userData.parameters;this.is2DType?e.set(0,0,r.depth*.5):this.isNonParametric?(e.setScalar(0),this.geometry.boundingSphere&&e.copy(this.geometry.boundingSphere.center),t.set(r.width,r.height,r.depth??0).multiplyScalar(.5)):e.setScalar(0),t.set(r.width,r.height,r.depth??0).multiplyScalar(.5)}updateMatrixWorld(e){super.updateMatrixWorld(e),this.bindMode==="attached"?this.bindMatrixInverse.copy(this.matrixWorld).invert():this.bindMode==="detached"&&this.bindMatrixInverse.copy(this.bindMatrix).invert()}bind(e,t){this.skeleton=e,this.isSkinnedMesh=!0,t===void 0&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),t=this.matrixWorld),this.bindMatrix.copy(t),this.bindMatrixInverse.copy(t).invert()}pose(){this.skeleton.pose()}normalizeSkinWeights(e){let t=new er,r=this.geometry.attributes.skinWeight;for(let i=0,n=r.count;i<n;i++){t.fromBufferAttribute(r,i);let a=1/t.manhattanLength();a!==1/0?t.multiplyScalar(a):t.set(1,0,0,0),r.setXYZW(i,t.x,t.y,t.z,t.w)}}boneTransform(e,t){let r=this.skeleton;if(r===void 0)return;let i=this.geometry;Hre.fromBufferAttribute(i.attributes.skinIndex,e),Ure.fromBufferAttribute(i.attributes.skinWeight,e),zre.copy(t).applyMatrix4(this.bindMatrix),t.set(0,0,0);for(let n=0;n<4;n++){let a=Ure.getComponent(n);if(a!==0){let o=Hre.getComponent(n);Gre.multiplyMatrices(r.bones[o].matrixWorld,r.boneInverses[o]),t.addScaledVector(sAt.copy(zre).applyMatrix4(Gre),a)}}return t.applyMatrix4(this.bindMatrixInverse)}};function lAt(e){var o,s;if(e.geometry.attributes.extrudeNormal||!e.geometry.attributes.position||!e.geometry.attributes.normal)return;let t=new Map,r=e.geometry.attributes,i=r.position.array,n=r.normal.array,a=new Float32Array(i.length);for(let l=0;l<i.length;l+=3){let u=`${i[l]}_${i[l+1]}_${i[l+2]}`,c=new U(n[l],n[l+1],n[l+2]);t.has(u)?(o=t.get(u))==null||o.normals.push(c):t.set(u,{normals:[c],result:new U})}t.forEach((l,u)=>{for(let c of l.normals)l.result.add(c);l.result.divideScalar(l.normals.length)});for(let l=0;l<i.length;l+=3){let u=`${i[l]}_${i[l+1]}_${i[l+2]}`,c=(s=t.get(u))==null?void 0:s.result;c&&(a[l]=c.x,a[l+1]=c.y,a[l+2]=c.z)}e.geometry.setAttribute("extrudeNormal",new ht(a,3))}function uAt(e){if(e.geometry.attributes.extrudeNormals||!e.geometry.attributes.position)return;let t=e.geometry.attributes.position.array,r=new Float32Array(t.length),i=new U;for(let n=0;n<t.length;n+=3)i.set(t[n],t[n+1],t[n+2]).normalize(),r[n]=i.x,r[n+1]=i.y,r[n+2]=i.z;e.geometry.setAttribute("extrudeNormal",new ht(r,3))}function sH(e){if(Array.isArray(e.material)){for(let t of e.material)if(t.getLayersOfType("outline").length===0)return}else if(!(e.material instanceof wp)||e.material.getLayersOfType("outline").length===0)return;e instanceof xo&&e.is2DAndNoDepth?uAt(e):lAt(e)}function lH(e){if(!e.geometry.attributes.position)return;let t=e.geometry.attributes.position.array,r=new Float32Array(t.length),i=parseInt(e.uuid.replace(/\D/g,"")),n=[vt.seededRandom(i),vt.seededRandom(i+1e4),vt.seededRandom(i+2e4)];for(let a=0;a<t.length;a++)r[a]=n[a%3];e.geometry.setAttribute("randomColor",new Zt(r,3))}var tc=new Cn,mx=new U;function cAt(e){let t=!1;return e.scene.objects.traverse((r,i)=>{i.type==="Mesh"&&i.geometry.type==="SubdivGeometry"&&(t=!0)}),t}var Jw=class extends xo{constructor(e,t,r){super(e,t,r),this.data=t,this.hiddenMatrixOld=new Ke,this.smoothShading=!0,this.skipReactionUpdate=!1}chooseGeoemtryCache(e){return this.dataPatched.flatShading?e.geometryCache:e.geometryCache2}get subdivPointerNew(){return this.localGeometry!==void 0?this.subdivPointer:this.geometry.ensureSubdivPointer()}get originalGeometryNew(){return this.localGeometry!==void 0?this.originalGeometry:this.geometry.originalGeometry}get phongAngle(){return this.data.geometry.phongAngle??45}updateEntityBoxSize(e,t){let r=this.geometry.userData.parameters;e.copy(this.originalGeometryNew.boundingSphere.center),t.set(r.width,r.height,r.depth??0).multiplyScalar(.5)}createGeometryByControls(e){var a,o,s;if(this.skipReactionUpdate===!0)return;let t=(a=this.localGeometry)==null?void 0:a.uuid,{originalGeometry:r,subdividedGeometry:i,subdivPointer:n}=Fo.build(e,this.subdivPointer,this.smoothShading,this.hasNonUniformScale?this.shearScale:void 0);this.subdivPointer=n,r!==void 0&&((o=this.originalGeometry)==null||o.dispose(),this.originalGeometry=r),i!==void 0&&((s=this.subdividedGeometry)==null||s.dispose(),this.subdividedGeometry=i??void 0),this.localGeometry=this.subdividedGeometry??this.originalGeometry,sH(this),lH(this),this.calcBoundingBox(),t&&(this.localGeometry.uuid=t)}updateState(e,t){if(super.updateState(e,t),e.flatShading!==void 0){let r=this.material;this.material=Array.isArray(r)?r.map(i=>i.getFlavor(!1,i.side,i.wireframe)):r.getFlavor(!1,r.side,r.wireframe),this.smoothShading=!e.flatShading,this.createGeometryDelayed(t)}}updateMesh(e=!1){Fo.buildLevel(this.subdivPointer,!0,this.smoothShading?this.phongAngle:-1,this.originalGeometry,e&&this.hasNonUniformScale?this.shearScaleInv:void 0),this.subdividedGeometry&&Fo.buildLevel(this.subdivPointer,!1,this.smoothShading?this.phongAngle:-1,this.subdividedGeometry,e&&this.hasNonUniformScale?this.shearScaleInv:void 0)}updateTopology(){this.originalGeometry.dispose(),this.originalGeometry=Fo.buildLevel(this.subdivPointer,!0,this.smoothShading?this.phongAngle:-1),this.subdividedGeometry&&(this.subdividedGeometry.dispose(),this.subdividedGeometry=Fo.buildLevel(this.subdivPointer,!1,this.smoothShading?this.phongAngle:-1)),this.localGeometry=this.subdividedGeometry??this.originalGeometry}raycast(e,t){let r=this.localGeometry;this.localGeometry=this.originalGeometryNew,Jo.prototype.raycast.call(this,e,t),this.localGeometry=r}activateSVDCompensation(){!this.hasNonUniformScale||(this.matrix.copy(this.matrixWorldRigid),this.hiddenMatrixOld.copy(this.hiddenMatrix),this.hiddenMatrix.copy(this.parent.matrixWorld).invert())}deactivateSVDCompensation(){!this.hasNonUniformScale||(this.updateMatrix(),this.hasNonUniformScale=void 0,this.hiddenMatrix.copy(this.hiddenMatrixOld))}calcBoundingBox(){let e=this.originalGeometry;e.boundingSphere===null&&(e.boundingSphere=new Es,this.subdividedGeometry&&(this.subdividedGeometry.boundingSphere=e.boundingSphere));let t=e.attributes.position,r=e.boundingSphere.center;tc.setFromBufferAttribute(t),tc.getCenter(r),e.boundingSphere.radius=r.distanceTo(tc.max),isNaN(e.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this),tc.getSize(mx),this.hasNonUniformScale&&mx.divide(this.scale);let i={width:mx.x,height:mx.y,depth:mx.z};return this.geometry.userData.parameters=i,i}updateBoundingSphere(e){let t=this.originalGeometry;tc.min.set(e[0],e[2],e[4]),tc.max.set(e[1],e[3],e[5]),this.hasNonUniformScale&&(tc.min.applyMatrix4(this.shearScaleInv),tc.max.applyMatrix4(this.shearScaleInv)),t.boundingSphere===null&&(t.boundingSphere=new Es);let r=t.boundingSphere.center;tc.getCenter(r),t.boundingSphere.radius=r.distanceTo(tc.max)}freeSubdivPointer(){var e,t;this.subdivPointer&&(Fo.freeSubdivPointer(this.subdivPointer),this.subdivPointer=0),this.localGeometry=void 0,(e=this.originalGeometry)==null||e.dispose(),(t=this.subdividedGeometry)==null||t.dispose()}dispose(){super.dispose(),this.freeSubdivPointer()}updateByPatchedOpGeometry(e,t,r){super.updateByPatchedOpGeometry(e,t,r),this.localGeometry&&this.createGeometryByControls(t)}},jre=-1,hAt=1,dAt={x:[1,0,0],"-x":[-1,0,0],y:[0,1,0],"-y":[0,-1,0],z:[0,0,1],"-z":[0,0,-1]},fAt={polygon_center:0,edge:1,vertex:2},R5=(e,t)=>(r,i)=>!t||r===0||e===0?0:e*i/100,fr=(e,t)=>{let r=Math.abs(t),i=r*-1;return(e-jre)*(r-i)/(hAt-jre)+i},pAt=new U,O5=new U,vAt=new U,mAt=new U;function M1(e,t){let r=vAt.fromArray(e),i=mAt.fromArray(t);O5.copy(i).sub(r);let n=O5.length();return O5.normalize().multiplyScalar(n*.5),pAt.copy(r).add(O5).toArray()}var Al=new za,B5=new U,P6=new U,F0=new U;function gAt(e){let t=[];for(let r=0;r<=e.index.count;r++)if(B5.fromArray(e.index.array,r*3),Al.setFromAttributeAndIndices(e.attributes.position,B5.x,B5.y,B5.z),Al.getNormal(P6),Al.getMidpoint(F0),!(isNaN(F0.x)||isNaN(F0.y)||isNaN(F0.z))){let{a:i,b:n,c:a}=Al,o=i.toArray(),s=n.toArray(),l=a.toArray(),u=i.distanceTo(n),c=n.distanceTo(a),h=a.distanceTo(i),d=M1(o,s),f=M1(s,l),p=M1(l,o),v=[u,c,h],m=Math.max(...v),g=v.filter(b=>Math.round(b)===Math.round(m)).length>1,y=[],x=Al.getMidpoint(F0).toArray();m===u&&!g&&(y=[f,p,p],x=d),m===c&&!g&&(y=[d,p,p],x=f),m===h&&!g&&(y=[d,f,f],x=p),g&&(y=[d,f,p]),t.push({vertices:[o,s,l],faceCenters:y,midpoint:x,norm:Al.getNormal(P6).toArray()})}return t}function yAt(e){let t=[],{position:r}=e.attributes;for(let i=0;i<r.count;i++){Al.setFromAttributeAndIndices(r,i*3,i*3+1,i*3+2),Al.getNormal(P6),Al.getMidpoint(F0);let n=Al.a.toArray(),a=Al.b.toArray(),o=Al.c.toArray();t.push({vertices:[n,a,o],faceCenters:[M1(n,a),M1(a,o),M1(o,n)],midpoint:F0.toArray(),norm:P6.toArray()})}return t}var xAt=4,bAt=.5,pD=e=>.5*(1-Math.cos(e*Math.PI)),wAt=class{constructor(){this.perlin=new Array(4096)}noise(e,t=0,r=0){if(this.perlin==null){this.perlin=new Array(4096);for(let m=0;m<4096;m++)this.perlin[m]=Math.random()}e<0&&(e=-e),t<0&&(t=-t),r<0&&(r=-r);let i=Math.floor(e),n=Math.floor(t),a=Math.floor(r),o=e-i,s=t-n,l=r-a,u,c,h=0,d=.5,f,p,v;for(let m=0;m<xAt;m++){let g=i+(n<<4)+(a<<8);u=pD(o),c=pD(s),f=this.perlin[g&4095],f+=u*(this.perlin[g+1&4095]-f),p=this.perlin[g+16&4095],p+=u*(this.perlin[g+16+1&4095]-p),f+=c*(p-f),g+=256,p=this.perlin[g&4095],p+=u*(this.perlin[g+1&4095]-p),v=this.perlin[g+16&4095],v+=u*(this.perlin[g+16+1&4095]-v),p+=c*(v-p),f+=pD(l)*(p-f),h+=f*d,d*=bAt,i<<=1,o*=2,n<<=1,s*=2,a<<=1,l*=2,o>=1&&(i++,o--),s>=1&&(n++,s--),l>=1&&(a++,l--)}return h}noiseSeed(e){let t=(()=>{let r,i;return{setSeed(n){i=r=(n??Math.random()*4294967296)>>>0},getSeed(){return r},rand(){return i=(1664525*i+1013904223)%4294967296,i/4294967296}}})();t.setSeed(e),this.perlin=new Array(4096);for(let r=0;r<4096;r++)this.perlin[r]=t.rand()}},_At=wAt,Wre=new U,qre=new Ke,Yre=new qy;function Xre(e){let t=!1;return e.scene.objects.traverse((r,i)=>{i.type==="Mesh"&&(i.geometry.type==="TextGeometry"||i.geometry.type==="InputGeometry")&&(t=!0)}),t}var uH=class extends xo{constructor(e,t,r){super(e,t,r),this.data=t}get textGeometry(){return this.geometry}get charWidths(){return this.textGeometry.charWidths}get charCoords(){return this.textGeometry.charCoords}get wrappedText(){return this.textGeometry.wrappedText}get font(){return this.textGeometry.font}get initialOffsetY(){var t;let e=this.dataPatched;return((t=this.font)==null?void 0:t.getLineInitialOffsetY(this.lineHeight,this.wrappedText.length,e.geometry.height,this.fontScale,e.geometry.verticalAlign))??0}get fontScale(){let e=this.dataPatched;return this.font?e.geometry.fontSize/this.font.unitsPerEm:1}get AD(){return Math.abs(this.ascender-this.descender)}get ascender(){var e;return(((e=this.font)==null?void 0:e.ascender)??1)*this.fontScale}get descender(){var e;return(((e=this.font)==null?void 0:e.descender)??1)*this.fontScale}get lineHeight(){let e=this.dataPatched;return e.geometry.fontSize*e.geometry.lineHeight}raycast(e,t){let{matrixWorld:r}=this;if(!(isNaN(e.ray.origin.x)||this.scale.x===0||this.scale.y===0||this.scale.z===0)&&(qre.copy(r).invert(),Yre.copy(e.ray).applyMatrix4(qre),Yre.intersectBox(this.singleBBox,Wre))){let i=Wre.applyMatrix4(r),n=e.ray.origin.distanceTo(i);t.push({distance:n,point:i.clone(),object:this})}}},Do=1e-4,rc,dye,fye,pye,Zre=new U,Qre=new U;_1e.then(e=>{rc=e,dye=[rc.get_face_center,rc.get_edge_midpoint,rc.get_vertex_position],fye=[rc.get_face_normal,rc.get_edge_normal,rc.get_vertex_normal],pye=[rc.face_count,rc.edge_count,rc.vertex_count]});var AAt=new Ke,SAt=new Ke,uf=new U,N5=new U,gx=new U,vD=new U,CAt=new U,EAt=new U,MAt=class{constructor(e,t){this.data=e,this.is3D=t,this.perlin=new _At,e.noiseType==="perlin"?(this.perlin.noiseSeed(e.seed),t?this.noise=(r,i,n)=>this.perlin.noise(r,i,n):this.noise=r=>this.perlin.noise(r)):t?this.noise=qwt((0,gO.default)(e.seed)):this.noise=Wwt((0,gO.default)(e.seed))}},yu=class extends Gz(_i){constructor(e,t){super(),this.parameters=t,this.objectForSample=void 0,this._pendingMediaLoad=!1,this.random=null,this.object=e}resetOnMove(){this.removeFromParent(),this.parent=null}expandClones(e){if(this.parent===null)this.updateState(this.parameters,e);else for(let t of this.children)t instanceof yo&&t.expand()}invalidateTransform(e){this.matrixWorldNeedsUpdate=!0,this.traverse(t=>{t instanceof yo&&t.object===e&&(t.matrixWorldNeedsUpdate=!0)})}onObjUpdateMatrix(){this.parameters.type!=="toObject"&&(this.matrixWorldNeedsUpdate=!0)}update(){switch(this._updateCount(),this.parameters.type){case"radial":this._updateRadial(this.parameters);break;case"linear":this._updateLinear(this.parameters);break;case"grid":this._updateGrid(this.parameters);break;case"toObject":this._updateToObject(this.parameters)}for(let e of this.children)e.updateMatrix(),e.hasNonUniformScale&&(e.updateMatrixWorld(),e.updateMatrixWorldSVD())}_updateCount(e){let t;if(e!==void 0?t=e:t=this.parameters.type==="grid"?Math.round(this.parameters.grid.count[0])*Math.round(this.parameters.grid.count[1])*Math.round(this.parameters.grid.count[2]):this.parameters.count,this.parameters.type==="toObject"){if(!this.parameters.toObject.object)t=0;else if(e===void 0&&this.parameters.toObject.spreadType!=="random")return}if(this.parameters.type==="toObject"&&this.objectForSample){let r=this.children;if(r.length===t)return;if(r.length<t)for(let i=0,n=t-r.length;i<n;++i){let a=new yo(this.object);a.expand(),this.add(a)}else for(let i=0,n=r.length-t;i<n;++i)this.remove(r[i])}else{if(this.children.length===t)return;if(this.children.length<t)for(let r=0,i=t-this.children.length;r<i;++r){let n=new yo(this.object);n.expand(),this.add(n)}else for(let r=0,i=this.children.length-t;r<i;++r)this.remove(this.children[r])}}getRandom(e,t=!1){return(this.random===null||this.random.data.seed!==e.seed||this.random.is3D!==t)&&(this.random=new MAt(e,t)),this.random}_updateRadial(e){let t=e.radial,r=t.start*vt.DEG2RAD,i=t.end*vt.DEG2RAD,n=r-i,a=new Qn(t.rotation[0],t.rotation[1],t.rotation[2]),o;switch(t.axis){case"z":o=new U(0,0,1);break;case"y":o=new U(0,1,0);break;default:case"x":o=new U(1,0,0);break}let s=e.randomnessObject??Wf.defaultData([1,1,1]).randomnessObject,l=this.getRandom(s),u=R5(s.strength,this.parameters.randomness);for(let[c,h]of this.children.entries()){let d=c*(s.freqScale/10)+s.movement,f=l.noise(d,d,d),p=c+1;h.scale.x=t.scale[0]+u(p,fr(f,s.scale[0]))||Do,h.scale.y=t.scale[1]+u(p,fr(f,s.scale[1]))||Do,h.scale.z=t.scale[2]+u(p,fr(f,s.scale[2]))||Do,h.position.setScalar(0);let v=n/e.count*c-r;switch(t.axis){case"x":h.rotation.set(0,v,0);break;case"y":h.rotation.set(0,0,v);break;case"z":h.rotation.set(v,0,0);break}h.translateOnAxis(o,t.radius),h.position.x+=t.position[0]+u(p,fr(f,s.position[0])),h.position.y+=t.position[1]+u(p,fr(f,s.position[1])),h.position.z+=t.position[2]+u(p,fr(f,s.position[2]));let m=u(p,fr(f,s.rotation[0])),g=u(p,fr(f,s.rotation[1])),y=u(p,fr(f,s.rotation[2]));t.alignment===!0?(h.rotation.x+=a.x+m,h.rotation.y+=a.y+g,h.rotation.z+=a.z+y):h.rotation.set(a.x+m,a.y+g,a.z+y)}}_updateLinear(e){if(e.type!=="linear")throw new Error;let t=e.linear,r=new Qn(t.rotation[0],t.rotation[1],t.rotation[2]),i=e.randomnessObject??Wf.defaultData([1,1,1]).randomnessObject,n=this.getRandom(i),a=R5(i.strength,this.parameters.randomness);for(let[o,s]of this.children.entries()){let l=o*(i.freqScale/10)+i.movement,u=n.noise(l,l,l),c=o+1,h=a(c,fr(u,i.rotation[0])),d=a(c,fr(u,i.rotation[1])),f=a(c,fr(u,i.rotation[2]));s.scale.x=1+(t.scale[0]-1)*o+a(c,fr(u,i.scale[0]))||Do,s.scale.y=1+(t.scale[1]-1)*o+a(c,fr(u,i.scale[1]))||Do,s.scale.z=1+(t.scale[2]-1)*o+a(c,fr(u,i.scale[2]))||Do,s.rotation.x=r.x*o+h,s.rotation.y=r.y*o+d,s.rotation.z=r.z*o+f,s.position.x=t.position[0]*o+a(c,fr(u,i.position[0])),s.position.y=t.position[1]*o+a(c,fr(u,i.position[1])),s.position.z=t.position[2]*o+a(c,fr(u,i.position[2]))}}_updateGrid(e){let t=0,r=e.grid,i=e.randomnessObject??Wf.defaultData([1,1,1]).randomnessObject,n=this.getRandom(i,!0),a=R5(i.strength,this.parameters.randomness);if(r.useCenter===!0){let o={x:r.count[0]%2===0?2:1,y:r.count[1]%2===0?2:1,z:r.count[2]%2===0?2:1},s=new U(r.size[0]*(r.count[0]-o.x)*.5,r.size[1]*(r.count[1]-o.y)*.5,r.size[2]*(r.count[2]-o.z)*.5);for(let l=0;l<r.count[0];l++)for(let u=0;u<r.count[1];u++)for(let c=0;c<r.count[2];c++){let h=n.noise((l+1)*(i.freqScale/10)+i.movement,(u+1)*(i.freqScale/10)+i.movement,(c+1)*(i.freqScale/10)+i.movement),d=this.children[t++];d.scale.x=1+a(t,fr(h,i.scale[0]))||Do,d.scale.y=1+a(t,fr(h,i.scale[1]))||Do,d.scale.z=1+a(t,fr(h,i.scale[2]))||Do;let f=a(t,fr(h,i.rotation[0])),p=a(t,fr(h,i.rotation[1])),v=a(t,fr(h,i.rotation[2]));d.rotation.set(f,p,v),d.position.x=r.size[0]*l-s.x+a(t,fr(h,i.position[0])),d.position.y=r.size[1]*u-s.y+a(t,fr(h,i.position[1])),d.position.z=r.size[2]*c-s.z+a(t,fr(h,i.position[2]))}}else for(let o=0;o<r.count[0];o++)for(let s=0;s<r.count[1];s++)for(let l=0;l<r.count[2];l++){let u=n.noise((o+1)*(i.freqScale/10)+i.movement,(s+1)*(i.freqScale/10)+i.movement,(l+1)*(i.freqScale/10)+i.movement),c=this.children[t++];c.scale.x=1+a(t,fr(u,i.scale[0]))||Do,c.scale.y=1+a(t,fr(u,i.scale[1]))||Do,c.scale.z=1+a(t,fr(u,i.scale[2]))||Do;let h=a(t,fr(u,i.rotation[0])),d=a(t,fr(u,i.rotation[1])),f=a(t,fr(u,i.rotation[2]));c.rotation.set(h,d,f),c.position.x=r.size[0]*o+a(t,fr(u,i.position[0])),c.position.y=-r.size[1]*s+a(t,fr(u,i.position[1])),c.position.z=-r.size[2]*l+a(t,fr(u,i.position[2]))}}_updateToObject(e){var c;if(e.type!=="toObject")throw new Error;let{toObject:t}=e,r=new Qn(t.rotation[0],t.rotation[1],t.rotation[2]),i=e.randomnessObject??Wf.defaultData([1,1,1]).randomnessObject,n=this.getRandom(i),a=R5(i.strength,this.parameters.randomness);if(!t.object){for(let[,h]of this.children.entries())h.position.set(0,0,0),h.scale.setScalar(1),h.rotation.set(0,0,0);this.objectForSample=void 0;return}if(!this.objectForSample)return;if(this.objectForSample instanceof uH)if(!((c=this.objectForSample.font)!=null&&c.isLoaded)||this.objectForSample.geometry.attributes.position===void 0){this._pendingMediaLoad=!0;return}else this._pendingMediaLoad=!1;if(this.objectForSample.geometry===void 0&&this.objectForSample.isAncestorOf(this.object.uuid)){console.warn(`Oh no! The object "${this.object.name}" (${this.object.uuid}) seem to be a child/descendant of the object it's being cloned to. Please re-parent it so that they are siblings instead.`);return}let o=this.getSubdivData();if(o.length>0){let h=Math.round(o.length*t.count/100);this._updateCount(h)}else{let h=this.objectForSample.geometry.getAttribute("position");if(!h||isNaN(h.count)||h.count===0){console.warn(`Oh no! The object "${this.object.name}" (${this.object.uuid}) cannot be cloned on the surface of "${this.objectForSample.name}" (${this.objectForSample.uuid}) because the latter does not have a valid geometry.`);return}}this.objectForSample.updateMatrixWorld();let s=new Ywt(this.objectForSample).build(),l=dAt[t.axis],u=this.children;s.setRandomGenerator((0,gO.default)(this.object.uuid+t.seed));for(let[h,d]of u.entries()){let f=h*(i.freqScale/10)+i.movement,p=n.noise(f,f,f),v=h+1,m=a(v,fr(p,i.rotation[0])),g=a(v,fr(p,i.rotation[1])),y=a(v,fr(p,i.rotation[2]));t.spreadType==="random"?s.sample(gx,vD):(o.length&&(gx.fromArray(o[h].pos),vD.fromArray(o[h].norm)),this.objectForSample instanceof Jw&&gx.applyMatrix4(AAt.copy(this.objectForSample.matrixWorld).invert())),gx.applyMatrix4(this.object.hiddenMatrix.clone().invert()),d.position.copy(gx),uf.fromArray(l);let x=t.align==="normal"?vD:this.object.getWorldDirection(EAt),b=N5.fromArray(t.position);N5.x+=a(v,fr(p,i.position[0])),N5.y+=a(v,fr(p,i.position[1])),N5.z+=a(v,fr(p,i.position[2]));let _=Math.acos(x.dot(uf)),w=CAt.crossVectors(uf,x).normalize(),S=SAt.makeRotationAxis(w,_),A=x.clone().cross(this.object.up).normalize(),M=A.clone().cross(x).normalize(),E=new Ke().makeBasis(A,x,M),T=new U(uf.y,uf.z,uf.x).normalize(),L=T.clone().cross(uf).normalize(),P=new Ke().makeBasis(T,uf,L).invert(),C=new Ke().multiplyMatrices(E,P);d.rotation.setFromRotationMatrix(C),b.applyMatrix4(S),d.position.add(b),d.rotation.x=d.rotation.x+r.x+m,d.rotation.y=d.rotation.y+r.y+g,d.rotation.z=d.rotation.z+r.z+y,d.scale.setScalar(1),d.scale.x=d.scale.x+t.scale[0]+a(v,fr(p,i.scale[0]))||Do,d.scale.y=d.scale.y+t.scale[1]+a(v,fr(p,i.scale[1]))||Do,d.scale.z=d.scale.z+t.scale[2]+a(v,fr(p,i.scale[2]))||Do,d.scale.multiply(this.object.scale),d.hiddenMatrix=this.object.hiddenMatrix}}getSubdivData(){if(!this.objectForSample)return[];let e=this.parameters.toObject.spreadType,t=new Map,r=(n,a)=>{let o=Math.round(n[0]*1e4)+"_"+Math.round(n[1]*1e4)+"_"+Math.round(n[2]*1e4),s=t.get(o);s?(s.pos[0]+=n[0],s.pos[1]+=n[1],s.pos[2]+=n[2],s.norm[0]+=a[0],s.norm[1]+=a[1],s.norm[2]+=a[2],s.count+=1):t.set(o,{pos:[...n],norm:[...a],count:1})};if(e==="random")return[];if(this.objectForSample instanceof Jw){let n=this.objectForSample,a=fAt[e],o=pye[a],s=dye[a],l=fye[a],u=o(n.subdivPointerNew);for(let c=0;c<=u-1;c++){let h=s(n.subdivPointerNew,c),d=l(n.subdivPointerNew,c);Zre.fromArray(h).applyMatrix4(n.matrixWorld),Qre.fromArray(d),r(Zre.toArray(),Qre.toArray())}}else(this.objectForSample.geometry.index?gAt(this.objectForSample.geometry):yAt(this.objectForSample.geometry)).forEach((n,a)=>{e==="polygon_center"&&r(n.midpoint,n.norm),e==="vertex"&&(r(n.vertices[0],n.norm),r(n.vertices[1],n.norm),r(n.vertices[2],n.norm)),e==="edge"&&(r(n.faceCenters[0],n.norm),r(n.faceCenters[1],n.norm),r(n.faceCenters[2],n.norm))});let i=Array.from(t.values());for(let n of i)n.pos[0]/=n.count,n.pos[1]/=n.count,n.pos[2]/=n.count,n.norm[0]/=n.count,n.norm[1]/=n.count,n.norm[2]/=n.count;return i}updateState(e,t){var r;if(this.parameters=P7(e),this.parameters.type!=="toObject")(this.parent===null||this.parent!==this.object)&&(this.removeFromParent(),(r=this.object.parent)==null||r.add(this),this.matrix=this.object.matrix,this.hiddenMatrix=this.object.hiddenMatrix,this.matrixWorldNeedsUpdate=!0,this.matrixAutoUpdate=!1);else if(this.parent===null||this.parent.uuid!==this.parameters.toObject.object){this.removeFromParent();let i=t.find(this.parameters.toObject.object);i instanceof Jo?this.objectForSample=i:this.objectForSample=void 0,this.matrix=new Ke,this.hiddenMatrix=new Ke,this.matrixWorldNeedsUpdate=!0,this.matrixAutoUpdate=!1,i&&i.add(this)}this.update()}get pendingMediaLoad(){return this._pendingMediaLoad}},Z4=e=>{var t;return t=class extends e{},t.geometryHelper=new Ru(30,30,30),t},V5=new qy,mD=new Es,Kre=new Ke,Q4=(e,t,r,i,n=!1,a=e)=>{let o=t,s=a.matrixWorld;if(o.boundingSphere===null&&o.computeBoundingSphere(),mD.copy(o.boundingSphere),mD.applyMatrix4(s),r.ray.intersectsSphere(mD)===!1||(Kre.copy(s).invert(),V5.copy(r.ray).applyMatrix4(Kre),o.boundingBox!==null&&V5.intersectsBox(o.boundingBox)===!1))return;let l,u,c,h,d=o.index,f=o.attributes.position,p=o.drawRange,v,m;if(n===!1){let y=Math.max(0,p.start),x=Math.min(d.count,p.start+p.count);for(v=y,m=x;v<m;v+=3)if(u=d.getX(v),c=d.getX(v+1),h=d.getX(v+2),l=g(e,r,V5,f,u,c,h),l){l.faceIndex=Math.floor(v/3),i.push(l);return}}else{let y=o.attributes.position,x=new U,b=new U,_=new U,w=new U,S=2,A=1/((a.scale.x+a.scale.y+a.scale.z)/3),M=A*A,E=Math.max(0,p.start),T=Math.min(y.count,p.start+p.count);for(let L=E,P=T-1;L<P;L+=S){if(x.fromBufferAttribute(y,L),b.fromBufferAttribute(y,L+1),V5.distanceSqToSegment(x,b,w,_)>M)continue;w.applyMatrix4(a.matrixWorld);let C=r.ray.origin.distanceTo(w);C<r.near||C>r.far||i.push({distance:C,point:_.clone().applyMatrix4(a.matrixWorld),object:e})}}function g(y,x,b,_,w,S,A){let M=new U,E=new U,T=new U,L=new U,P=new U;if(M.fromBufferAttribute(_,w),E.fromBufferAttribute(_,S),T.fromBufferAttribute(_,A),b.intersectTriangle(M,E,T,!1,L)===null)return null;P.copy(L),P.applyMatrix4(y.matrixWorld);let C=x.ray.origin.distanceTo(P);return C<x.near||C>x.far?null:{faceIndex:1,distance:C,point:P.clone(),object:y}}},F5=new U,ol=new cm,TAt=class extends z4{constructor(e){let t=new It,r=new Ip({color:16777215,vertexColors:!0,toneMapped:!1}),i=[],n=[],a={},o=new Vt(15711266),s=new Vt(15711266),l=new Vt(2857471);u("n1","n2",o),u("n2","n4",o),u("n4","n3",o),u("n3","n1",o),u("f1","f2",o),u("f2","f4",o),u("f4","f3",o),u("f3","f1",o),u("n1","f1",o),u("n2","f2",o),u("n3","f3",o),u("n4","f4",o),u("p","n1",s),u("p","n2",s),u("p","n3",s),u("p","n4",s),u("u1","u2",l),u("u2","u3",l),u("u3","u1",l);function u(h,d,f){c(h,f),c(d,f)}function c(h,d){i.push(0,0,0),n.push(d.r,d.g,d.b),a[h]===void 0&&(a[h]=[]),a[h].push(i.length/3-1)}t.setAttribute("position",new ht(i,3)),t.setAttribute("color",new ht(n,3)),super(t,r),this.type="CameraHelper",this.camera=e,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=a,this.update()}update(){let e=this.geometry,t=this.pointMap;ol.projectionMatrixInverse.elements=[.5112609807824982,-0,-0,-0,-0,.41421356237309503,-0,-0,-0,-0,-0,-.099999,-0,-0,-1.0000000000000002,.100001];let r=1,i=1,n=.8;Jl("n1",t,e,ol,-r,-i,n),Jl("n2",t,e,ol,r,-i,n),Jl("n3",t,e,ol,-r,i,n),Jl("n4",t,e,ol,r,i,n);let a=n;Jl("f1",t,e,ol,-r,-i,a),Jl("f2",t,e,ol,r,-i,a),Jl("f3",t,e,ol,-r,i,a),Jl("f4",t,e,ol,r,i,a);let o=a,s=.5;Jl("u1",t,e,ol,r*.7*s,i*1.1,o),Jl("u2",t,e,ol,-r*.7*s,i*1.1,o),Jl("u3",t,e,ol,0,i*(1.1+.9*s),o),e.getAttribute("position").needsUpdate=!0}dispose(){this.geometry.dispose(),this.material.dispose()}};function Jl(e,t,r,i,n,a,o){F5.set(n,a,o).unproject(i);let s=t[e];if(s!==void 0){let l=r.getAttribute("position");for(let u=0,c=s.length;u<c;u++)l.setXYZ(s[u],F5.x,F5.y,F5.z)}}var PAt=class extends Z4(TAt){constructor(e){super(e),this.object=e,this.object=e,this.name=`CombinedCameraHelper: ${e.uuid}`}updateMatrixWorld(e){super.updateMatrixWorld(e),this.updateTarget()}updateTarget(){let e=this.object.getTarget();this.updateWorldMatrix(!0,!1),this.worldToLocal(e)}raycast(e,t){Q4(this.object,this.geometry,e,t,!0)}},RO;(e=>e.is=t=>"objectHelper"in t)(RO||(RO={}));var s2=(e,t)=>class extends jz(e){constructor(){super(...arguments),this.objectHelper=new t(this),this.gizmos={}}get geometryHelper(){return t.geometryHelper}raycast(r,i){this.objectHelper.raycast(r,i)}showGizmos(){for(let r in this.gizmos){let i=this.gizmos[r];i instanceof YS&&(i.visible=!0)}}updateEntityBoxSize(r,i){this.objectHelper.visible&&this.geometryHelper instanceof Ru?(r.setScalar(0),i.set(this.geometryHelper.parameters.width,this.geometryHelper.parameters.height,this.geometryHelper.parameters.height).multiplyScalar(.5)):super.updateEntityBoxSize(r,i)}hideGizmos(){for(let r in this.gizmos){let i=this.gizmos[r];i instanceof YS&&(i.visible=!1)}}},z5=790,pg=new U,gD=new U,yD=new Jt,xD=new U,yx=new U,bD=new U,wo=class extends s2(cm,PAt){constructor(e="",t={...Gw.defaultData,name:""}){super(),this._cameraType="OrthographicCamera",this.targetOffset=ay.DefaultTargetOffset,this.isUpVectorFlipped=!1,this.angleOffsetFromUp=0,this.wasMovedByUser=!1,this.wasMovedBySwitchCameraAction=!1,this.super_Entity(e,t),this.previousProjectionMatrix=new Ke,this.matrixAutoUpdate=!0,this.width=window.innerWidth,this.height=window.innerHeight;let r=this.width,i=this.height;this.orthoCamera=new x7(r*-.5,r*.5,i*.5,i*-.5,-5e4,1e4),this.perspCamera=new fo(45,r/i,50,1e4),this.left=this.orthoCamera.left,this.right=this.orthoCamera.right,this.top=this.orthoCamera.top,this.bottom=this.orthoCamera.bottom,this.far=this.orthoCamera.far,this.view=this.orthoCamera.view,this.aspect=this.perspCamera.aspect,this.focus=this.perspCamera.focus,this.filmGauge=this.perspCamera.filmGauge,this.filmOffset=this.perspCamera.filmOffset,this.objectHelper.update()}get isPerspectiveCamera(){return this.cameraType==="PerspectiveCamera"}get isOrthographicCamera(){return!this.isPerspectiveCamera}get cameraType(){return this._cameraType}set fov(e){this.perspCamera.fov=e}get fov(){return this.perspCamera.fov}setNear(e,t){e==="PerspectiveCamera"?this.perspCamera.near=t:this.orthoCamera.near=t}setZoom(e,t){t>=0&&(e==="PerspectiveCamera"?this.perspCamera.zoom=t:this.orthoCamera.zoom=t)}set cameraType(e){e==="PerspectiveCamera"?this.toPerspective():e==="OrthographicCamera"&&this.toOrthographic()}get near(){return this._cameraType==="PerspectiveCamera"?this.perspCamera.near:this.orthoCamera.near}set near(e){this._cameraType==="PerspectiveCamera"?this.perspCamera.near=e:this.orthoCamera.near=e}get zoom(){return this._cameraType==="PerspectiveCamera"?this.perspCamera.zoom:this.orthoCamera.zoom}set zoom(e){e>=0&&(this._cameraType==="PerspectiveCamera"?this.perspCamera.zoom=e:this.orthoCamera.zoom=e)}lookAt(e,t,r){typeof e=="number"&&(e=new U(e,t,r)),super.lookAt(e),this.getWorldPosition(pg),this.targetOffset=pg.distanceTo(e)}getTarget(e=new U){return this.getWorldDirection(gD),this.getWorldPosition(pg),gD.multiplyScalar(this.targetOffset),e.copy(pg).add(gD),e}getDistanceToTarget(){let e=this.getTarget();return this.getWorldPosition(pg),pg.distanceTo(e)}updateUp(){this.getWorldQuaternion(yD),xD.set(0,0,1).applyQuaternion(yD),yx.copy(_i.DEFAULT_UP),this.isUpVectorFlipped&&yx.negate(),yx.applyQuaternion(yD),bD.copy(_i.DEFAULT_UP).projectOnPlane(xD),this.angleOffsetFromUp=bD.angleTo(yx),this.angleOffsetFromUp*=bD.cross(yx).dot(xD)>=0?1:-1}updateTransformState(e,t){let r=super.updateTransformState(e,t);return e.isUpVectorFlipped!==void 0&&(this.isUpVectorFlipped=e.isUpVectorFlipped),this.updateUp(),r}getViewFrontToObject(e){let t=e.getWorldPosition(new U),r=e.getWorldDirection(new U).multiplyScalar(this.targetOffset);return{position:t.clone().add(r),target:t}}getViewToTarget(e){let t=this.getWorldDirection(new U).multiplyScalar(this.targetOffset);return{position:e.clone().sub(t),target:e}}getViewToObject(e){let t=new U;return e.getWorldPosition(t),this.getViewToTarget(t)}setViewplaneSize(e,t,r=!1){if(this.aspect=e/t,r){let i=e>t?this.aspect:1,n=e>t?1:this.aspect;this.left=-z5*.5*i,this.right=z5*.5*i,this.top=z5*.5*(1/n),this.bottom=-z5*.5*(1/n)}else this.left=-e*.5,this.right=e*.5,this.top=t*.5,this.bottom=-t*.5;this.updateProjectionMatrix()}copyViewPlaneSize(e){this.aspect=e.aspect,this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.updateProjectionMatrix()}toOrthographic(){this.orthoCamera.left=this.left,this.orthoCamera.right=this.right,this.orthoCamera.top=this.top,this.orthoCamera.bottom=this.bottom,this.orthoCamera.view=this.view,this.orthoCamera.far=this.far,this.orthoCamera.updateProjectionMatrix(),this.projectionMatrix=this.orthoCamera.projectionMatrix,this.projectionMatrixInverse=this.orthoCamera.projectionMatrixInverse,this._cameraType="OrthographicCamera",this.objectHelper&&this.objectHelper.update()}toPerspective(){this.perspCamera.aspect=this.aspect,this.perspCamera.fov=this.fov,this.perspCamera.view=this.view,this.perspCamera.far=this.far,this.perspCamera.updateProjectionMatrix(),this.projectionMatrix=this.perspCamera.projectionMatrix,this.projectionMatrixInverse=this.perspCamera.projectionMatrixInverse,this._cameraType="PerspectiveCamera",this.objectHelper&&this.objectHelper.update()}setFocalLength(e){this.perspCamera.setFocalLength(e),this.toPerspective()}getFocalLength(){return this.perspCamera.getFocalLength()}getEffectiveFOV(){return this.perspCamera.getEffectiveFOV()}getFilmWidth(){return this.perspCamera.getFilmWidth()}getFilmHeight(){return this.perspCamera.getFilmHeight()}setViewOffset(e,t,r,i,n,a){this._cameraType==="PerspectiveCamera"?this.perspCamera.setViewOffset(e,t,r,i,n,a):this.orthoCamera.setViewOffset(e,t,r,i,n,a)}clearViewOffset(){this._cameraType==="PerspectiveCamera"?(this.perspCamera.clearViewOffset(),this.toPerspective()):(this.orthoCamera.clearViewOffset(),this.toOrthographic())}copyHistory(){this.previousProjectionMatrix&&this.previousProjectionMatrix.copy(this.projectionMatrix)}updateProjectionMatrix(){this._cameraType==="PerspectiveCamera"?this.toPerspective():this._cameraType==="OrthographicCamera"&&this.toOrthographic()}updateMatrixWorld(e){super.updateMatrixWorld(e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(e,t){super.updateWorldMatrix(e,t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}copy(e,t){return super.copy(e,t),this.parent=e.parent,this.orthoCamera.copy(e.orthoCamera),this.perspCamera.copy(e.perspCamera),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.far=e.far,this.view=e.view===null?null:Object.assign({},e.view),this._cameraType=e._cameraType,this.aspect=e.aspect,this.fov=e.fov,this.focus=e.focus,this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this.targetOffset=e.targetOffset,this.updateProjectionMatrix(),this}toCameraState(e=[]){let t={type:this.cameraType,far:this.far,orthographic:{near:this.orthoCamera.near,zoom:this.orthoCamera.zoom},perspective:{near:this.perspCamera.near,fov:this.perspCamera.fov,zoom:this.perspCamera.zoom},up:this.up.toArray(),targetOffset:this.targetOffset,isUpVectorFlipped:this.isUpVectorFlipped};return ER(t,e)}updateCameraSubtype(e,t){let r=e==="perspective"?"PerspectiveCamera":"OrthographicCamera";t.zoom!==void 0&&this.setZoom(r,t.zoom),t.near!==void 0&&this.setNear(r,t.near),t.fov!==void 0&&r==="PerspectiveCamera"&&(this.fov=t.fov)}updateState(e,t){this.updateCameraState(e,t)}updateCameraState(e,t){this.updateState_Entity(e,t),e.far!==void 0&&(this.far=e.far),e.orthographic!==void 0&&this.updateCameraSubtype("orthographic",e.orthographic),e.perspective!==void 0&&this.updateCameraSubtype("perspective",e.perspective),e.type!==void 0&&(this.cameraType=e.type),e.up!==void 0&&this.up.fromArray(e.up),e.targetOffset!==void 0&&(this.targetOffset=e.targetOffset),e.isUpVectorFlipped!==void 0&&(this.isUpVectorFlipped=e.isUpVectorFlipped),this.updateProjectionMatrix()}updateByPatchedOp(e,t,r){super.updateByPatchedOp(e,t,r),e.path.length===1&&e.type===0&&this.updateCameraSubtype(e.path[0],e.props)}toState(e){return{...super.toState(e),...this.toCameraState(e),type:this.cameraType}}},vg=new Ke,DAt=new Ke;function Jre(e){let t=!1;return e.scene.objects.traverse((r,i)=>{var n;((n=i.geometry)==null?void 0:n.type)==="BooleanGeometry"&&(t=!0)}),t}var Qv=class extends o2{constructor(e,t,r){super(e,t),this.data=t,this.meshSetAddresses=[],this.needsTransformForDownstream=!1,this.geometry=new It,this.onAfterRender=(i,n,a,o,s,l)=>{super.onAfterRender(i,n,a,o,s,l),this.recomputeBoolean()},this.geometry.userData.parameters={width:0,height:0,depth:0}}get booleanOp(){return this.data.geometry.operation}get phongAngle(){return this.data.geometry.phongAngle??45}get isLOD(){return this.recomputeBoolean(),!1}updateByPatchedOp(e,t,r){super.updateByPatchedOp(e,t,r),e.path.length===1&&e.path[0]==="geometry"&&e.type===0&&e.props.operation!==void 0&&(this.freeBooleanPointer(),this.resetBBoxNeedsUpdate())}freeBooleanPointer(){super.freeBooleanPointer(),this.geometry.dispose()}recomputeBoolean(e,t=!0){var i;if(this.booleanMeshSetAddress!==-1&&!e)return;for(let n=0;n<this.children.length;n++){let a=this.children[n];a instanceof Qv&&a.dataPatched.visible===!0&&a.recomputeBoolean(e===!0,t)}this.meshSetAddresses=[];for(let n=0;n<this.children.length;n++){let a=this.children[n];if(a instanceof Jo&&a.dataPatched.visible===!0&&((i=a.geometry.attributes.position)==null?void 0:i.count)>0&&a.geometry.drawRange.count>0&&a.booleanMeshSetAddress!==0){vg.multiplyMatrices(a.hiddenMatrix,a.matrix);try{if(a.booleanMeshSetAddress===-1){if((a.geometry.index??a.geometry.getAttribute("position")).count/3<15e5&&(a.booleanMeshSetAddress=Vh.getMeshSet(a.geometry,e===!0,t)),a.booleanMeshSetAddress===-1)return;Vh.transformMeshSet(a.booleanMeshSetAddress,vg),a.booleanMatrixInvOld.copy(vg).invert(),a.booleanWasTransformed=!1}else a instanceof Qv&&a.needsTransformForDownstream===!0?(Vh.transformMeshSet(a.booleanMeshSetAddress,vg),a.needsTransformForDownstream=!1):a.booleanWasTransformed===!0&&(Vh.transformMeshSet(a.booleanMeshSetAddress,DAt.multiplyMatrices(vg,a.booleanMatrixInvOld)),a.booleanMatrixInvOld.copy(vg).invert(),a.booleanWasTransformed=!1)}catch(o){console.error(o),a.booleanMeshSetAddress=0,a.geometry.userData.booleanOperationDidFail=!0;continue}Vh.hasOpenEdges(a.booleanMeshSetAddress)===!1||n===this.children.length-1&&this.booleanOp===2?(this.meshSetAddresses.push(a.booleanMeshSetAddress),a.geometry.userData.booleanOperationDidFail=!1):a.geometry.userData.booleanOperationDidFail="openEdges"}}if(this.meshSetAddresses.length===0){this.geometry.setAttribute("position",new ht([],0)),this.geometry.setDrawRange(0,0);return}if(e===!0)return Vh.calcBooleanTopological(this.meshSetAddresses,this.booleanOp);let r=this.geometry;r.dispose(),this.geometry=new It,this.geometry.userData=r.userData,this.geometry.boundingSphere=r.boundingSphere;try{this.booleanMeshSetAddress=Vh.calcBoolean(this.meshSetAddresses,this.booleanOp,this.geometry,this.phongAngle)}catch(n){this.booleanMeshSetAddress=0,this.geometry.userData.booleanOperationDidFail=!0,console.error(n)}this.booleanMatrixInvOld.copy(this.matrix).invert(),this.needsTransformForDownstream=!0,sH(this),lH(this)}dispose(){super.dispose(),this.geometry.dispose()}},OO;(e=>{function t(r){return Gr.is(r)&&r instanceof G4}e.is=t})(OO||(OO={}));var cH=(e,t)=>class extends s2(e,t){updateState_Light(r,i){this.updateState_Entity(r,i),r.color!==void 0&&(this.color=i.shared.color(r.color)),r.intensity!==void 0&&(this.intensity=r.intensity),r.depth!==void 0&&(this.shadow.camera.far=r.depth,this.shadow.needsUpdate=!0),r.shadows!==void 0&&(this.castShadow=r.shadows)}},hu=e=>e instanceof Jo,nd=e=>e!==null&&e instanceof Qv,IAt=e=>e instanceof wo,LAt=e=>OO.is(e),BO=e=>RO.is(e),kAt=new U(1,1,1),$re=new U,RAt=new U,eie=new Jt,K4=class extends Z4(hpt){constructor(e,t=15){super(t),this.object=e,this.dummy=new rd,this.object.updateMatrixWorld(),this.name=`EmptyObjectHelper: ${e.uuid}`,this.matrix=this.dummy.matrixWorld,this.matrixAutoUpdate=!1,this.object.isBone&&(this.visible=!1)}raycast(e,t){Q4(this.object,K4.geometryHelper,e,t,!1,this.dummy)}update(){}updateMatrix(){}updateMatrixWorld(e){this.object.matrixWorld.decompose($re,eie,RAt),this.matrix.compose($re,eie,kAt),super.updateMatrixWorld(e)}updateWorldMatrix(e,t){}},T1=class extends s2(rd,K4){constructor(e,t){super(),this.super_Entity(e,t),this.objectHelper.update()}updateState(e,t){this.updateState_Entity(e,t),"buffer"in e&&Object.keys(e).length===1&&t.scene.reloadSplats()}},XA=class extends s2(rd,K4){constructor(e,t,r){super(),this.super_Entity(e,t),this.context=r,this.objectHelper.update()}updateState(e,t){this.updateState_Entity(e,t)}},vye={RED:0,GREEN:1,BLUE:2,ALPHA:3},J4="varying vec2 vUv;void main(){vUv=position.xy*0.5+0.5;gl_Position=vec4(position.xy,1.0,1.0);}",OAt=`#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D inputBuffer;
#else
uniform lowp sampler2D inputBuffer;
#endif
uniform lowp sampler2D cocBuffer;uniform vec2 texelSize;uniform float scale;uniform vec4 kernel64[32];varying vec2 vUv;void main(){
#ifdef FOREGROUND
vec2 CoCNearFar=texture2D(cocBuffer,vUv).rg;float CoC=CoCNearFar.r*scale;
#else
float CoC=texture2D(cocBuffer,vUv).g*scale;
#endif
if(CoC==0.0){gl_FragColor=texture2D(inputBuffer,vUv);}else{
#ifdef FOREGROUND
vec2 step=texelSize*max(CoC,CoCNearFar.g*scale);
#else
vec2 step=texelSize*CoC;
#endif
vec4 acc=vec4(0.0);for(int i=0;i<32;++i){vec4 kernel=kernel64[i];vec2 uv=step*kernel.xy+vUv;acc+=texture2D(inputBuffer,uv);uv=step*kernel.zw+vUv;acc+=texture2D(inputBuffer,uv);}gl_FragColor=acc/64.0;}}`,H5=class extends ai{constructor(e=!1,t=!1){super({name:"BokehMaterial",defines:{PASS:e?"2":"1"},uniforms:{kernel64:new Xe(null),kernel16:new Xe(null),inputBuffer:new Xe(null),cocBuffer:new Xe(null),texelSize:new Xe(new me),scale:new Xe(1)},blending:Nn,depthWrite:!1,depthTest:!1,fragmentShader:OAt,vertexShader:J4}),this.toneMapped=!1,t&&(this.defines.FOREGROUND="1"),this.generateKernel()}set inputBuffer(e){this.uniforms.inputBuffer.value=e}setInputBuffer(e){this.uniforms.inputBuffer.value=e}set cocBuffer(e){this.uniforms.cocBuffer.value=e}setCoCBuffer(e){this.uniforms.cocBuffer.value=e}get scale(){return this.uniforms.scale.value}set scale(e){this.uniforms.scale.value=e}getScale(e){return this.uniforms.scale.value=e}setScale(e){this.uniforms.scale.value=e}generateKernel(){let e=2.39996323,t=new Float32Array(128),r=new Float32Array(32),i=0,n=0;for(let s=0;s<80;++s){let l=s*e,u=Math.sqrt(s)/Math.sqrt(80),c=u*Math.cos(l),h=u*Math.sin(l);s%5===0?(r[n++]=c,r[n++]=h):(t[i++]=c,t[i++]=h)}let a=[],o=[];for(let s=0;s<128;)a.push(new er(t[s++],t[s++],t[s++],t[s++]));for(let s=0;s<32;)o.push(new er(r[s++],r[s++],r[s++],r[s++]));this.uniforms.kernel64.value=a,this.uniforms.kernel16.value=o}setTexelSize(e,t){this.uniforms.texelSize.value.set(e,t)}setSize(e,t){this.uniforms.texelSize.value.set(1/e,1/t)}};function tie(e,t,r){return e*(t-r)-t}function NO(e,t,r){return Math.min(Math.max((e+t)/(t-r),0),1)}var BAt=`#include <common>
#include <packing>
#ifdef GL_FRAGMENT_PRECISION_HIGH
uniform highp sampler2D depthBuffer;
#else
uniform mediump sampler2D depthBuffer;
#endif
uniform float focusDistance;uniform float focusRange;uniform float cameraNear;uniform float cameraFar;varying vec2 vUv;float readDepth(const in vec2 uv){
#if DEPTH_PACKING == 3201
return unpackRGBAToDepth(texture2D(depthBuffer,uv));
#else
return texture2D(depthBuffer,uv).r;
#endif
}void main(){float depth=readDepth(vUv);
#ifdef PERSPECTIVE_CAMERA
float viewZ=perspectiveDepthToViewZ(depth,cameraNear,cameraFar);float linearDepth=viewZToOrthographicDepth(viewZ,cameraNear,cameraFar);
#else
float linearDepth=depth;
#endif
float signedDistance=linearDepth-focusDistance;float magnitude=smoothstep(0.0,focusRange,abs(signedDistance));gl_FragColor.rg=magnitude*vec2(step(signedDistance,0.0),step(0.0,signedDistance));}`,NAt=class extends ai{constructor(e){super({name:"CircleOfConfusionMaterial",defines:{DEPTH_PACKING:"0"},uniforms:{depthBuffer:new Xe(null),focusDistance:new Xe(0),focusRange:new Xe(0),cameraNear:new Xe(.3),cameraFar:new Xe(1e3)},blending:Nn,depthWrite:!1,depthTest:!1,fragmentShader:BAt,vertexShader:J4}),this.toneMapped=!1,this.uniforms.focalLength=this.uniforms.focusRange,this.adoptCameraSettings(e)}get near(){return this.uniforms.cameraNear.value}get far(){return this.uniforms.cameraFar.value}set depthBuffer(e){this.uniforms.depthBuffer.value=e}set depthPacking(e){this.defines.DEPTH_PACKING=e.toFixed(0),this.needsUpdate=!0}setDepthBuffer(e,t=Hd){this.depthBuffer=e,this.depthPacking=t}get focusDistance(){return this.uniforms.focusDistance.value}set focusDistance(e){this.uniforms.focusDistance.value=e}get worldFocusDistance(){return-tie(this.focusDistance,this.near,this.far)}set worldFocusDistance(e){this.focusDistance=NO(-e,this.near,this.far)}getFocusDistance(e){this.uniforms.focusDistance.value=e}setFocusDistance(e){this.uniforms.focusDistance.value=e}get focalLength(){return this.focusRange}set focalLength(e){this.focusRange=e}get focusRange(){return this.uniforms.focusRange.value}set focusRange(e){this.uniforms.focusRange.value=e}get worldFocusRange(){return-tie(this.focusRange,this.near,this.far)}set worldFocusRange(e){this.focusRange=NO(-e,this.near,this.far)}getFocalLength(e){return this.focusRange}setFocalLength(e){this.focusRange=e}adoptCameraSettings(e){e&&(this.uniforms.cameraNear.value=e.near,this.uniforms.cameraFar.value=e.far,e instanceof fo?this.defines.PERSPECTIVE_CAMERA="1":delete this.defines.PERSPECTIVE_CAMERA,this.needsUpdate=!0)}},VAt=`#include <common>
#include <dithering_pars_fragment>
#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D inputBuffer;
#else
uniform lowp sampler2D inputBuffer;
#endif
varying vec2 vUv0;varying vec2 vUv1;varying vec2 vUv2;varying vec2 vUv3;void main(){vec4 sum=texture2D(inputBuffer,vUv0);sum+=texture2D(inputBuffer,vUv1);sum+=texture2D(inputBuffer,vUv2);sum+=texture2D(inputBuffer,vUv3);gl_FragColor=sum*0.25;
#include <encodings_fragment>
#include <dithering_fragment>
}`,FAt="uniform vec2 texelSize;uniform vec2 halfTexelSize;uniform float kernel;uniform float scale;varying vec2 vUv0;varying vec2 vUv1;varying vec2 vUv2;varying vec2 vUv3;void main(){vec2 uv=position.xy*0.5+0.5;vec2 dUv=(texelSize*vec2(kernel)+halfTexelSize)*scale;vUv0=vec2(uv.x-dUv.x,uv.y+dUv.y);vUv1=vec2(uv.x+dUv.x,uv.y+dUv.y);vUv2=vec2(uv.x+dUv.x,uv.y-dUv.y);vUv3=vec2(uv.x-dUv.x,uv.y-dUv.y);gl_Position=vec4(position.xy,1.0,1.0);}",rie=class extends ai{constructor(e=new me){super({name:"KawaseBlurMaterial",uniforms:{inputBuffer:new Xe(null),texelSize:new Xe(new me),halfTexelSize:new Xe(new me),kernel:new Xe(0),scale:new Xe(1)},blending:Nn,depthWrite:!1,depthTest:!1,fragmentShader:VAt,vertexShader:FAt}),this.toneMapped=!1,this.setTexelSize(e.x,e.y)}set inputBuffer(e){this.uniforms.inputBuffer.value=e}setInputBuffer(e){this.inputBuffer=e}get scale(){return this.uniforms.scale.value}set scale(e){this.uniforms.scale.value=e}getScale(){return this.uniforms.scale.value}setScale(e){this.uniforms.scale.value=e}getKernel(){return null}get kernel(){return this.uniforms.kernel.value}set kernel(e){this.uniforms.kernel.value=e}setKernel(e){this.kernel=e}setTexelSize(e,t){this.uniforms.texelSize.value.set(e,t),this.uniforms.halfTexelSize.value.set(e,t).multiplyScalar(.5)}setSize(e,t){let r=this.uniforms;r.texelSize.value.set(1/e,1/t),r.halfTexelSize.value.copy(r.texelSize.value).multiplyScalar(.5)}},zAt=`#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D inputBuffer;
#else
uniform lowp sampler2D inputBuffer;
#endif
uniform float opacity;varying vec2 vUv;void main(){vec4 texel=texture2D(inputBuffer,vUv);gl_FragColor=opacity*texel;
#include <encodings_fragment>
}`,HAt=class extends ai{constructor(){super({name:"CopyMaterial",uniforms:{inputBuffer:new Xe(null),opacity:new Xe(1)},blending:Nn,depthWrite:!1,depthTest:!1,fragmentShader:zAt,vertexShader:J4}),this.toneMapped=!1}set inputBuffer(e){this.uniforms.inputBuffer.value=e}setInputBuffer(e){this.uniforms.inputBuffer.value=e}getOpacity(e){return this.uniforms.opacity.value}setOpacity(e){this.uniforms.opacity.value=e}},UAt=`varying vec2 vUv;varying vec2 vUv0;varying vec2 vUv1;
#if THREE_REVISION < 143
#define luminance(v) linearToRelativeLuminance(v)
#endif
#if EDGE_DETECTION_MODE != 0
varying vec2 vUv2;varying vec2 vUv3;varying vec2 vUv4;varying vec2 vUv5;
#endif
#if EDGE_DETECTION_MODE == 1
#include <common>
#endif
#if EDGE_DETECTION_MODE == 0 || PREDICATION_MODE == 1
#ifdef GL_FRAGMENT_PRECISION_HIGH
uniform highp sampler2D depthBuffer;
#else
uniform mediump sampler2D depthBuffer;
#endif
float readDepth(const in vec2 uv){
#if DEPTH_PACKING == 3201
return unpackRGBAToDepth(texture2D(depthBuffer,uv));
#else
return texture2D(depthBuffer,uv).r;
#endif
}vec3 gatherNeighbors(){float p=readDepth(vUv);float pLeft=readDepth(vUv0);float pTop=readDepth(vUv1);return vec3(p,pLeft,pTop);}
#elif PREDICATION_MODE == 2
uniform sampler2D predicationBuffer;vec3 gatherNeighbors(){float p=texture2D(predicationBuffer,vUv).r;float pLeft=texture2D(predicationBuffer,vUv0).r;float pTop=texture2D(predicationBuffer,vUv1).r;return vec3(p,pLeft,pTop);}
#endif
#if PREDICATION_MODE != 0
vec2 calculatePredicatedThreshold(){vec3 neighbours=gatherNeighbors();vec2 delta=abs(neighbours.xx-neighbours.yz);vec2 edges=step(PREDICATION_THRESHOLD,delta);return PREDICATION_SCALE*EDGE_THRESHOLD*(1.0-PREDICATION_STRENGTH*edges);}
#endif
#if EDGE_DETECTION_MODE != 0
uniform sampler2D inputBuffer;
#endif
void main(){
#if EDGE_DETECTION_MODE == 0
const vec2 threshold=vec2(DEPTH_THRESHOLD);
#elif PREDICATION_MODE != 0
vec2 threshold=calculatePredicatedThreshold();
#else
const vec2 threshold=vec2(EDGE_THRESHOLD);
#endif
#if EDGE_DETECTION_MODE == 0
vec3 neighbors=gatherNeighbors();vec2 delta=abs(neighbors.xx-vec2(neighbors.y,neighbors.z));vec2 edges=step(threshold,delta);if(dot(edges,vec2(1.0))==0.0){discard;}gl_FragColor=vec4(edges,0.0,1.0);
#elif EDGE_DETECTION_MODE == 1
float l=luminance(texture2D(inputBuffer,vUv).rgb);float lLeft=luminance(texture2D(inputBuffer,vUv0).rgb);float lTop=luminance(texture2D(inputBuffer,vUv1).rgb);vec4 delta;delta.xy=abs(l-vec2(lLeft,lTop));vec2 edges=step(threshold,delta.xy);if(dot(edges,vec2(1.0))==0.0){discard;}float lRight=luminance(texture2D(inputBuffer,vUv2).rgb);float lBottom=luminance(texture2D(inputBuffer,vUv3).rgb);delta.zw=abs(l-vec2(lRight,lBottom));vec2 maxDelta=max(delta.xy,delta.zw);float lLeftLeft=luminance(texture2D(inputBuffer,vUv4).rgb);float lTopTop=luminance(texture2D(inputBuffer,vUv5).rgb);delta.zw=abs(vec2(lLeft,lTop)-vec2(lLeftLeft,lTopTop));maxDelta=max(maxDelta.xy,delta.zw);float finalDelta=max(maxDelta.x,maxDelta.y);edges.xy*=step(finalDelta,LOCAL_CONTRAST_ADAPTATION_FACTOR*delta.xy);gl_FragColor=vec4(edges,0.0,1.0);
#elif EDGE_DETECTION_MODE == 2
vec4 delta;vec3 c=texture2D(inputBuffer,vUv).rgb;vec3 cLeft=texture2D(inputBuffer,vUv0).rgb;vec3 t=abs(c-cLeft);delta.x=max(max(t.r,t.g),t.b);vec3 cTop=texture2D(inputBuffer,vUv1).rgb;t=abs(c-cTop);delta.y=max(max(t.r,t.g),t.b);vec2 edges=step(threshold,delta.xy);if(dot(edges,vec2(1.0))==0.0){discard;}vec3 cRight=texture2D(inputBuffer,vUv2).rgb;t=abs(c-cRight);delta.z=max(max(t.r,t.g),t.b);vec3 cBottom=texture2D(inputBuffer,vUv3).rgb;t=abs(c-cBottom);delta.w=max(max(t.r,t.g),t.b);vec2 maxDelta=max(delta.xy,delta.zw);vec3 cLeftLeft=texture2D(inputBuffer,vUv4).rgb;t=abs(c-cLeftLeft);delta.z=max(max(t.r,t.g),t.b);vec3 cTopTop=texture2D(inputBuffer,vUv5).rgb;t=abs(c-cTopTop);delta.w=max(max(t.r,t.g),t.b);maxDelta=max(maxDelta.xy,delta.zw);float finalDelta=max(maxDelta.x,maxDelta.y);edges*=step(finalDelta,LOCAL_CONTRAST_ADAPTATION_FACTOR*delta.xy);gl_FragColor=vec4(edges,0.0,1.0);
#endif
}`,GAt=`uniform vec2 texelSize;varying vec2 vUv;varying vec2 vUv0;varying vec2 vUv1;
#if EDGE_DETECTION_MODE != 0
varying vec2 vUv2;varying vec2 vUv3;varying vec2 vUv4;varying vec2 vUv5;
#endif
void main(){vUv=position.xy*0.5+0.5;vUv0=vUv+texelSize*vec2(-1.0,0.0);vUv1=vUv+texelSize*vec2(0.0,-1.0);
#if EDGE_DETECTION_MODE != 0
vUv2=vUv+texelSize*vec2(1.0,0.0);vUv3=vUv+texelSize*vec2(0.0,1.0);vUv4=vUv+texelSize*vec2(-2.0,0.0);vUv5=vUv+texelSize*vec2(0.0,-2.0);
#endif
gl_Position=vec4(position.xy,1.0,1.0);}`,F7={DEPTH:0,LUMA:1,COLOR:2},jAt={DISABLED:0,DEPTH:1,CUSTOM:2},WAt=class extends ai{constructor(e=new me,t=F7.COLOR){super({name:"EdgeDetectionMaterial",defines:{THREE_REVISION:Wy.replace(/\D+/g,""),LOCAL_CONTRAST_ADAPTATION_FACTOR:"2.0",EDGE_THRESHOLD:"0.1",DEPTH_THRESHOLD:"0.01",PREDICATION_MODE:"0",PREDICATION_THRESHOLD:"0.01",PREDICATION_SCALE:"2.0",PREDICATION_STRENGTH:"1.0",DEPTH_PACKING:"0"},uniforms:{inputBuffer:new Xe(null),depthBuffer:new Xe(null),predicationBuffer:new Xe(null),texelSize:new Xe(e)},blending:Nn,depthWrite:!1,depthTest:!1,fragmentShader:UAt,vertexShader:GAt}),this.toneMapped=!1,this.edgeDetectionMode=t}set depthBuffer(e){this.uniforms.depthBuffer.value=e}set depthPacking(e){this.defines.DEPTH_PACKING=e.toFixed(0),this.needsUpdate=!0}setDepthBuffer(e,t=Hd){this.depthBuffer=e,this.depthPacking=t}get edgeDetectionMode(){return Number(this.defines.EDGE_DETECTION_MODE)}set edgeDetectionMode(e){this.defines.EDGE_DETECTION_MODE=e.toFixed(0),this.needsUpdate=!0}getEdgeDetectionMode(){return this.edgeDetectionMode}setEdgeDetectionMode(e){this.edgeDetectionMode=e}get localContrastAdaptationFactor(){return Number(this.defines.LOCAL_CONTRAST_ADAPTATION_FACTOR)}set localContrastAdaptationFactor(e){this.defines.LOCAL_CONTRAST_ADAPTATION_FACTOR=e.toFixed("6"),this.needsUpdate=!0}getLocalContrastAdaptationFactor(){return this.localContrastAdaptationFactor}setLocalContrastAdaptationFactor(e){this.localContrastAdaptationFactor=e}get edgeDetectionThreshold(){return Number(this.defines.EDGE_THRESHOLD)}set edgeDetectionThreshold(e){this.defines.EDGE_THRESHOLD=e.toFixed("6"),this.defines.DEPTH_THRESHOLD=(e*.1).toFixed("6"),this.needsUpdate=!0}getEdgeDetectionThreshold(){return this.edgeDetectionThreshold}setEdgeDetectionThreshold(e){this.edgeDetectionThreshold=e}get predicationMode(){return Number(this.defines.PREDICATION_MODE)}set predicationMode(e){this.defines.PREDICATION_MODE=e.toFixed(0),this.needsUpdate=!0}getPredicationMode(){return this.predicationMode}setPredicationMode(e){this.predicationMode=e}set predicationBuffer(e){this.uniforms.predicationBuffer.value=e}setPredicationBuffer(e){this.uniforms.predicationBuffer.value=e}get predicationThreshold(){return Number(this.defines.PREDICATION_THRESHOLD)}set predicationThreshold(e){this.defines.PREDICATION_THRESHOLD=e.toFixed("6"),this.needsUpdate=!0}getPredicationThreshold(){return this.predicationThreshold}setPredicationThreshold(e){this.predicationThreshold=e}get predicationScale(){return Number(this.defines.PREDICATION_SCALE)}set predicationScale(e){this.defines.PREDICATION_SCALE=e.toFixed("6"),this.needsUpdate=!0}getPredicationScale(){return this.predicationScale}setPredicationScale(e){this.predicationScale=e}get predicationStrength(){return Number(this.defines.PREDICATION_STRENGTH)}set predicationStrength(e){this.defines.PREDICATION_STRENGTH=e.toFixed("6"),this.needsUpdate=!0}getPredicationStrength(){return this.predicationStrength}setPredicationStrength(e){this.predicationStrength=e}setSize(e,t){this.uniforms.texelSize.value.set(1/e,1/t)}},qAt=`#include <common>
#include <packing>
#include <dithering_pars_fragment>
#define packFloatToRGBA(v) packDepthToRGBA(v)
#define unpackRGBAToFloat(v) unpackRGBAToDepth(v)
#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D inputBuffer;
#else
uniform lowp sampler2D inputBuffer;
#endif
#ifdef GL_FRAGMENT_PRECISION_HIGH
uniform highp sampler2D depthBuffer;
#else
uniform mediump sampler2D depthBuffer;
#endif
uniform vec2 resolution;uniform vec2 texelSize;uniform float cameraNear;uniform float cameraFar;uniform float aspect;uniform float time;varying vec2 vUv;
#if THREE_REVISION < 143
#define luminance(v) linearToRelativeLuminance(v)
#endif
#if THREE_REVISION >= 137
vec4 sRGBToLinear(const in vec4 value){return vec4(mix(pow(value.rgb*0.9478672986+vec3(0.0521327014),vec3(2.4)),value.rgb*0.0773993808,vec3(lessThanEqual(value.rgb,vec3(0.04045)))),value.a);}
#endif
float readDepth(const in vec2 uv){
#if DEPTH_PACKING == 3201
return unpackRGBAToDepth(texture2D(depthBuffer,uv));
#else
return texture2D(depthBuffer,uv).r;
#endif
}float getViewZ(const in float depth){
#ifdef PERSPECTIVE_CAMERA
return perspectiveDepthToViewZ(depth,cameraNear,cameraFar);
#else
return orthographicDepthToViewZ(depth,cameraNear,cameraFar);
#endif
}FRAGMENT_HEADvoid main(){FRAGMENT_MAIN_UVvec4 color0=texture2D(inputBuffer,UV);vec4 color1=vec4(0.0);FRAGMENT_MAIN_IMAGEgl_FragColor=color0;
#ifdef ENCODE_OUTPUT
#include <encodings_fragment>
#endif
#include <dithering_fragment>
}`,YAt="uniform vec2 resolution;uniform vec2 texelSize;uniform float cameraNear;uniform float cameraFar;uniform float aspect;uniform float time;varying vec2 vUv;VERTEX_HEADvoid main(){vUv=position.xy*0.5+0.5;VERTEX_MAIN_SUPPORTgl_Position=vec4(position.xy,1.0,1.0);}",$l={FRAGMENT_HEAD:"FRAGMENT_HEAD",FRAGMENT_MAIN_UV:"FRAGMENT_MAIN_UV",FRAGMENT_MAIN_IMAGE:"FRAGMENT_MAIN_IMAGE",VERTEX_HEAD:"VERTEX_HEAD",VERTEX_MAIN_SUPPORT:"VERTEX_MAIN_SUPPORT"},VO=class extends ai{constructor(e,t,r,i,n=!1){super({name:"EffectMaterial",defines:{THREE_REVISION:Wy.replace(/\D+/g,""),DEPTH_PACKING:"0",ENCODE_OUTPUT:"1"},uniforms:{inputBuffer:new Xe(null),depthBuffer:new Xe(null),resolution:new Xe(new me),texelSize:new Xe(new me),cameraNear:new Xe(.3),cameraFar:new Xe(1e3),aspect:new Xe(1),time:new Xe(0)},blending:Nn,depthWrite:!1,depthTest:!1,dithering:n}),this.toneMapped=!1,e&&this.setShaderParts(e),t&&this.setDefines(t),r&&this.setUniforms(r),this.adoptCameraSettings(i)}set inputBuffer(e){this.uniforms.inputBuffer.value=e}setInputBuffer(e){this.uniforms.inputBuffer.value=e}get depthBuffer(){return this.uniforms.depthBuffer.value}set depthBuffer(e){this.uniforms.depthBuffer.value=e}get depthPacking(){return Number(this.defines.DEPTH_PACKING)}set depthPacking(e){this.defines.DEPTH_PACKING=e.toFixed(0),this.needsUpdate=!0}setDepthBuffer(e,t=Hd){this.depthBuffer=e,this.depthPacking=t}setShaderParts(e){return this.fragmentShader=qAt.replace($l.FRAGMENT_HEAD,e.get($l.FRAGMENT_HEAD)).replace($l.FRAGMENT_MAIN_UV,e.get($l.FRAGMENT_MAIN_UV)).replace($l.FRAGMENT_MAIN_IMAGE,e.get($l.FRAGMENT_MAIN_IMAGE)),this.vertexShader=YAt.replace($l.VERTEX_HEAD,e.get($l.VERTEX_HEAD)).replace($l.VERTEX_MAIN_SUPPORT,e.get($l.VERTEX_MAIN_SUPPORT)),this.needsUpdate=!0,this}setDefines(e){for(let t of e.entries())this.defines[t[0]]=t[1];return this.needsUpdate=!0,this}setUniforms(e){for(let t of e.entries())this.uniforms[t[0]]=t[1];return this}setExtensions(e){this.extensions={};for(let t of e)this.extensions[t]=!0;return this}get encodeOutput(){return this.defines.ENCODE_OUTPUT!==void 0}set encodeOutput(e){this.encodeOutput!==e&&(e?this.defines.ENCODE_OUTPUT="1":delete this.defines.ENCODE_OUTPUT,this.needsUpdate=!0)}isOutputEncodingEnabled(e){return this.encodeOutput}setOutputEncodingEnabled(e){this.encodeOutput=e}get time(){return this.uniforms.time.value}set time(e){this.uniforms.time.value=e}setDeltaTime(e){this.uniforms.time.value+=e}adoptCameraSettings(e){e&&(this.uniforms.cameraNear.value=e.near,this.uniforms.cameraFar.value=e.far,e instanceof fo?this.defines.PERSPECTIVE_CAMERA="1":delete this.defines.PERSPECTIVE_CAMERA,this.needsUpdate=!0)}setSize(e,t){let r=this.uniforms;r.resolution.value.set(e,t),r.texelSize.value.set(1/e,1/t),r.aspect.value=e/t}static get Section(){return $l}},XAt=`#include <common>
#if THREE_REVISION < 143
#define luminance(v) linearToRelativeLuminance(v)
#endif
#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D inputBuffer;
#else
uniform lowp sampler2D inputBuffer;
#endif
#ifdef RANGE
uniform vec2 range;
#elif defined(THRESHOLD)
uniform float threshold;uniform float smoothing;
#endif
varying vec2 vUv;void main(){vec4 texel=texture2D(inputBuffer,vUv);float l=luminance(texel.rgb);
#ifdef RANGE
float low=step(range.x,l);float high=step(l,range.y);l*=low*high;
#elif defined(THRESHOLD)
l=smoothstep(threshold,threshold+smoothing,l);
#endif
#ifdef COLOR
gl_FragColor=vec4(texel.rgb*l,l);
#else
gl_FragColor=vec4(l);
#endif
}`,ZAt=class extends ai{constructor(e=!1,t=null){super({name:"LuminanceMaterial",defines:{THREE_REVISION:Wy.replace(/\D+/g,"")},uniforms:{inputBuffer:new Xe(null),threshold:new Xe(0),smoothing:new Xe(1),range:new Xe(null)},blending:Nn,depthWrite:!1,depthTest:!1,fragmentShader:XAt,vertexShader:J4}),this.toneMapped=!1,this.colorOutput=e,this.luminanceRange=t}set inputBuffer(e){this.uniforms.inputBuffer.value=e}setInputBuffer(e){this.uniforms.inputBuffer.value=e}get threshold(){return this.uniforms.threshold.value}set threshold(e){this.smoothing>0||e>0?this.defines.THRESHOLD="1":delete this.defines.THRESHOLD,this.uniforms.threshold.value=e}getThreshold(){return this.threshold}setThreshold(e){this.threshold=e}get smoothing(){return this.uniforms.smoothing.value}set smoothing(e){this.threshold>0||e>0?this.defines.THRESHOLD="1":delete this.defines.THRESHOLD,this.uniforms.smoothing.value=e}getSmoothingFactor(){return this.smoothing}setSmoothingFactor(e){this.smoothing=e}get useThreshold(){return this.threshold>0||this.smoothing>0}set useThreshold(e){}get colorOutput(){return this.defines.COLOR!==void 0}set colorOutput(e){e?this.defines.COLOR="1":delete this.defines.COLOR,this.needsUpdate=!0}isColorOutputEnabled(e){return this.colorOutput}setColorOutputEnabled(e){this.colorOutput=e}get useRange(){return this.luminanceRange!==null}set useRange(e){this.luminanceRange=null}get luminanceRange(){return this.uniforms.range.value}set luminanceRange(e){e!==null?this.defines.RANGE="1":delete this.defines.RANGE,this.uniforms.range.value=e,this.needsUpdate=!0}getLuminanceRange(){return this.luminanceRange}setLuminanceRange(e){this.luminanceRange=e}},QAt=`#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D inputBuffer;
#else
uniform lowp sampler2D inputBuffer;
#endif
#ifdef MASK_PRECISION_HIGH
uniform mediump sampler2D maskTexture;
#else
uniform lowp sampler2D maskTexture;
#endif
#if MASK_FUNCTION != 0
uniform float strength;
#endif
varying vec2 vUv;void main(){
#if COLOR_CHANNEL == 0
float mask=texture2D(maskTexture,vUv).r;
#elif COLOR_CHANNEL == 1
float mask=texture2D(maskTexture,vUv).g;
#elif COLOR_CHANNEL == 2
float mask=texture2D(maskTexture,vUv).b;
#else
float mask=texture2D(maskTexture,vUv).a;
#endif
#if MASK_FUNCTION == 0
#ifdef INVERTED
mask=step(mask,0.0);
#else
mask=1.0-step(mask,0.0);
#endif
#else
mask=clamp(mask*strength,0.0,1.0);
#ifdef INVERTED
mask=1.0-mask;
#endif
#endif
#if MASK_FUNCTION == 2
gl_FragColor=vec4(mask*texture2D(inputBuffer,vUv).rgb,mask);
#else
gl_FragColor=mask*texture2D(inputBuffer,vUv);
#endif
}`,mye={DISCARD:0,MULTIPLY:1,MULTIPLY_RGB_SET_ALPHA:2},KAt=class extends ai{constructor(e=null){super({name:"MaskMaterial",uniforms:{maskTexture:new Xe(e),inputBuffer:new Xe(null),strength:new Xe(1)},blending:Nn,depthWrite:!1,depthTest:!1,fragmentShader:QAt,vertexShader:J4}),this.toneMapped=!1,this.setColorChannel(vye.RED),this.setMaskFunction(mye.DISCARD)}set inputBuffer(e){this.uniforms.inputBuffer.value=e}setInputBuffer(e){this.uniforms.inputBuffer.value=e}set maskTexture(e){this.uniforms.maskTexture.value=e,delete this.defines.MASK_PRECISION_HIGH,e.type!==So&&(this.defines.MASK_PRECISION_HIGH="1"),this.needsUpdate=!0}setMaskTexture(e){this.maskTexture=e}set colorChannel(e){this.defines.COLOR_CHANNEL=e.toFixed(0),this.needsUpdate=!0}setColorChannel(e){this.colorChannel=e}set maskFunction(e){this.defines.MASK_FUNCTION=e.toFixed(0),this.needsUpdate=!0}setMaskFunction(e){this.maskFunction=e}get inverted(){return this.defines.INVERTED!==void 0}set inverted(e){this.inverted&&!e?delete this.defines.INVERTED:e&&(this.defines.INVERTED="1"),this.needsUpdate=!0}isInverted(){return this.inverted}setInverted(e){this.inverted=e}get strength(){return this.uniforms.strength.value}set strength(e){this.uniforms.strength.value=e}getStrength(){return this.strength}setStrength(e){this.strength=e}},JAt=`#define sampleLevelZeroOffset(t, coord, offset) texture2D(t, coord + offset * texelSize)
#if __VERSION__ < 300
#define round(v) floor(v + 0.5)
#endif
#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D inputBuffer;
#else
uniform lowp sampler2D inputBuffer;
#endif
uniform lowp sampler2D areaTexture;uniform lowp sampler2D searchTexture;uniform vec2 texelSize;uniform vec2 resolution;varying vec2 vUv;varying vec4 vOffset[3];varying vec2 vPixCoord;void movec(const in bvec2 c,inout vec2 variable,const in vec2 value){if(c.x){variable.x=value.x;}if(c.y){variable.y=value.y;}}void movec(const in bvec4 c,inout vec4 variable,const in vec4 value){movec(c.xy,variable.xy,value.xy);movec(c.zw,variable.zw,value.zw);}vec2 decodeDiagBilinearAccess(in vec2 e){e.r=e.r*abs(5.0*e.r-5.0*0.75);return round(e);}vec4 decodeDiagBilinearAccess(in vec4 e){e.rb=e.rb*abs(5.0*e.rb-5.0*0.75);return round(e);}vec2 searchDiag1(const in vec2 texCoord,const in vec2 dir,out vec2 e){vec4 coord=vec4(texCoord,-1.0,1.0);vec3 t=vec3(texelSize,1.0);for(int i=0;i<MAX_SEARCH_STEPS_INT;++i){if(!(coord.z<float(MAX_SEARCH_STEPS_DIAG_INT-1)&&coord.w>0.9)){break;}coord.xyz=t*vec3(dir,1.0)+coord.xyz;e=texture2D(inputBuffer,coord.xy).rg;coord.w=dot(e,vec2(0.5));}return coord.zw;}vec2 searchDiag2(const in vec2 texCoord,const in vec2 dir,out vec2 e){vec4 coord=vec4(texCoord,-1.0,1.0);coord.x+=0.25*texelSize.x;vec3 t=vec3(texelSize,1.0);for(int i=0;i<MAX_SEARCH_STEPS_INT;++i){if(!(coord.z<float(MAX_SEARCH_STEPS_DIAG_INT-1)&&coord.w>0.9)){break;}coord.xyz=t*vec3(dir,1.0)+coord.xyz;e=texture2D(inputBuffer,coord.xy).rg;e=decodeDiagBilinearAccess(e);coord.w=dot(e,vec2(0.5));}return coord.zw;}vec2 areaDiag(const in vec2 dist,const in vec2 e,const in float offset){vec2 texCoord=vec2(AREATEX_MAX_DISTANCE_DIAG,AREATEX_MAX_DISTANCE_DIAG)*e+dist;texCoord=AREATEX_PIXEL_SIZE*texCoord+0.5*AREATEX_PIXEL_SIZE;texCoord.x+=0.5;texCoord.y+=AREATEX_SUBTEX_SIZE*offset;return texture2D(areaTexture,texCoord).rg;}vec2 calculateDiagWeights(const in vec2 texCoord,const in vec2 e,const in vec4 subsampleIndices){vec2 weights=vec2(0.0);vec4 d;vec2 end;if(e.r>0.0){d.xz=searchDiag1(texCoord,vec2(-1.0,1.0),end);d.x+=float(end.y>0.9);}else{d.xz=vec2(0.0);}d.yw=searchDiag1(texCoord,vec2(1.0,-1.0),end);if(d.x+d.y>2.0){vec4 coords=vec4(-d.x+0.25,d.x,d.y,-d.y-0.25)*texelSize.xyxy+texCoord.xyxy;vec4 c;c.xy=sampleLevelZeroOffset(inputBuffer,coords.xy,vec2(-1,0)).rg;c.zw=sampleLevelZeroOffset(inputBuffer,coords.zw,vec2(1,0)).rg;c.yxwz=decodeDiagBilinearAccess(c.xyzw);vec2 cc=vec2(2.0)*c.xz+c.yw;movec(bvec2(step(0.9,d.zw)),cc,vec2(0.0));weights+=areaDiag(d.xy,cc,subsampleIndices.z);}d.xz=searchDiag2(texCoord,vec2(-1.0,-1.0),end);if(sampleLevelZeroOffset(inputBuffer,texCoord,vec2(1,0)).r>0.0){d.yw=searchDiag2(texCoord,vec2(1.0),end);d.y+=float(end.y>0.9);}else{d.yw=vec2(0.0);}if(d.x+d.y>2.0){vec4 coords=vec4(-d.x,-d.x,d.y,d.y)*texelSize.xyxy+texCoord.xyxy;vec4 c;c.x=sampleLevelZeroOffset(inputBuffer,coords.xy,vec2(-1,0)).g;c.y=sampleLevelZeroOffset(inputBuffer,coords.xy,vec2(0,-1)).r;c.zw=sampleLevelZeroOffset(inputBuffer,coords.zw,vec2(1,0)).gr;vec2 cc=vec2(2.0)*c.xz+c.yw;movec(bvec2(step(0.9,d.zw)),cc,vec2(0.0));weights+=areaDiag(d.xy,cc,subsampleIndices.w).gr;}return weights;}float searchLength(const in vec2 e,const in float offset){vec2 scale=SEARCHTEX_SIZE*vec2(0.5,-1.0);vec2 bias=SEARCHTEX_SIZE*vec2(offset,1.0);scale+=vec2(-1.0,1.0);bias+=vec2(0.5,-0.5);scale*=1.0/SEARCHTEX_PACKED_SIZE;bias*=1.0/SEARCHTEX_PACKED_SIZE;return texture2D(searchTexture,scale*e+bias).r;}float searchXLeft(in vec2 texCoord,const in float end){vec2 e=vec2(0.0,1.0);for(int i=0;i<MAX_SEARCH_STEPS_INT;++i){if(!(texCoord.x>end&&e.g>0.8281&&e.r==0.0)){break;}e=texture2D(inputBuffer,texCoord).rg;texCoord=vec2(-2.0,0.0)*texelSize+texCoord;}float offset=-(255.0/127.0)*searchLength(e,0.0)+3.25;return texelSize.x*offset+texCoord.x;}float searchXRight(vec2 texCoord,const in float end){vec2 e=vec2(0.0,1.0);for(int i=0;i<MAX_SEARCH_STEPS_INT;++i){if(!(texCoord.x<end&&e.g>0.8281&&e.r==0.0)){break;}e=texture2D(inputBuffer,texCoord).rg;texCoord=vec2(2.0,0.0)*texelSize.xy+texCoord;}float offset=-(255.0/127.0)*searchLength(e,0.5)+3.25;return-texelSize.x*offset+texCoord.x;}float searchYUp(vec2 texCoord,const in float end){vec2 e=vec2(1.0,0.0);for(int i=0;i<MAX_SEARCH_STEPS_INT;++i){if(!(texCoord.y>end&&e.r>0.8281&&e.g==0.0)){break;}e=texture2D(inputBuffer,texCoord).rg;texCoord=-vec2(0.0,2.0)*texelSize.xy+texCoord;}float offset=-(255.0/127.0)*searchLength(e.gr,0.0)+3.25;return texelSize.y*offset+texCoord.y;}float searchYDown(vec2 texCoord,const in float end){vec2 e=vec2(1.0,0.0);for(int i=0;i<MAX_SEARCH_STEPS_INT;i++){if(!(texCoord.y<end&&e.r>0.8281&&e.g==0.0)){break;}e=texture2D(inputBuffer,texCoord).rg;texCoord=vec2(0.0,2.0)*texelSize.xy+texCoord;}float offset=-(255.0/127.0)*searchLength(e.gr,0.5)+3.25;return-texelSize.y*offset+texCoord.y;}vec2 area(const in vec2 dist,const in float e1,const in float e2,const in float offset){vec2 texCoord=vec2(AREATEX_MAX_DISTANCE)*round(4.0*vec2(e1,e2))+dist;texCoord=AREATEX_PIXEL_SIZE*texCoord+0.5*AREATEX_PIXEL_SIZE;texCoord.y=AREATEX_SUBTEX_SIZE*offset+texCoord.y;return texture2D(areaTexture,texCoord).rg;}void detectHorizontalCornerPattern(inout vec2 weights,const in vec4 texCoord,const in vec2 d){
#if !defined(DISABLE_CORNER_DETECTION)
vec2 leftRight=step(d.xy,d.yx);vec2 rounding=(1.0-CORNER_ROUNDING_NORM)*leftRight;rounding/=leftRight.x+leftRight.y;vec2 factor=vec2(1.0);factor.x-=rounding.x*sampleLevelZeroOffset(inputBuffer,texCoord.xy,vec2(0,1)).r;factor.x-=rounding.y*sampleLevelZeroOffset(inputBuffer,texCoord.zw,vec2(1,1)).r;factor.y-=rounding.x*sampleLevelZeroOffset(inputBuffer,texCoord.xy,vec2(0,-2)).r;factor.y-=rounding.y*sampleLevelZeroOffset(inputBuffer,texCoord.zw,vec2(1,-2)).r;weights*=clamp(factor,0.0,1.0);
#endif
}void detectVerticalCornerPattern(inout vec2 weights,const in vec4 texCoord,const in vec2 d){
#if !defined(DISABLE_CORNER_DETECTION)
vec2 leftRight=step(d.xy,d.yx);vec2 rounding=(1.0-CORNER_ROUNDING_NORM)*leftRight;rounding/=leftRight.x+leftRight.y;vec2 factor=vec2(1.0);factor.x-=rounding.x*sampleLevelZeroOffset(inputBuffer,texCoord.xy,vec2(1,0)).g;factor.x-=rounding.y*sampleLevelZeroOffset(inputBuffer,texCoord.zw,vec2(1,1)).g;factor.y-=rounding.x*sampleLevelZeroOffset(inputBuffer,texCoord.xy,vec2(-2,0)).g;factor.y-=rounding.y*sampleLevelZeroOffset(inputBuffer,texCoord.zw,vec2(-2,1)).g;weights*=clamp(factor,0.0,1.0);
#endif
}void main(){vec4 weights=vec4(0.0);vec4 subsampleIndices=vec4(0.0);vec2 e=texture2D(inputBuffer,vUv).rg;if(e.g>0.0){
#if !defined(DISABLE_DIAG_DETECTION)
weights.rg=calculateDiagWeights(vUv,e,subsampleIndices);if(weights.r==-weights.g){
#endif
vec2 d;vec3 coords;coords.x=searchXLeft(vOffset[0].xy,vOffset[2].x);coords.y=vOffset[1].y;d.x=coords.x;float e1=texture2D(inputBuffer,coords.xy).r;coords.z=searchXRight(vOffset[0].zw,vOffset[2].y);d.y=coords.z;d=round(resolution.xx*d+-vPixCoord.xx);vec2 sqrtD=sqrt(abs(d));float e2=sampleLevelZeroOffset(inputBuffer,coords.zy,vec2(1,0)).r;weights.rg=area(sqrtD,e1,e2,subsampleIndices.y);coords.y=vUv.y;detectHorizontalCornerPattern(weights.rg,coords.xyzy,d);
#if !defined(DISABLE_DIAG_DETECTION)
}else{e.r=0.0;}
#endif
}if(e.r>0.0){vec2 d;vec3 coords;coords.y=searchYUp(vOffset[1].xy,vOffset[2].z);coords.x=vOffset[0].x;d.x=coords.y;float e1=texture2D(inputBuffer,coords.xy).g;coords.z=searchYDown(vOffset[1].zw,vOffset[2].w);d.y=coords.z;d=round(resolution.yy*d-vPixCoord.yy);vec2 sqrtD=sqrt(abs(d));float e2=sampleLevelZeroOffset(inputBuffer,coords.xz,vec2(0,1)).g;weights.ba=area(sqrtD,e1,e2,subsampleIndices.x);coords.x=vUv.x;detectVerticalCornerPattern(weights.ba,coords.xyxz,d);}gl_FragColor=weights;}`,$At="uniform vec2 texelSize;uniform vec2 resolution;varying vec2 vUv;varying vec4 vOffset[3];varying vec2 vPixCoord;void main(){vUv=position.xy*0.5+0.5;vPixCoord=vUv*resolution;vOffset[0]=vUv.xyxy+texelSize.xyxy*vec4(-0.25,-0.125,1.25,-0.125);vOffset[1]=vUv.xyxy+texelSize.xyxy*vec4(-0.125,-0.25,-0.125,1.25);vOffset[2]=vec4(vOffset[0].xz,vOffset[1].yw)+vec4(-2.0,2.0,-2.0,2.0)*texelSize.xxyy*MAX_SEARCH_STEPS_FLOAT;gl_Position=vec4(position.xy,1.0,1.0);}",e8t=class extends ai{constructor(e=new me,t=new me){super({name:"SMAAWeightsMaterial",defines:{MAX_SEARCH_STEPS_INT:"16",MAX_SEARCH_STEPS_FLOAT:"16.0",MAX_SEARCH_STEPS_DIAG_INT:"8",MAX_SEARCH_STEPS_DIAG_FLOAT:"8.0",CORNER_ROUNDING:"25",CORNER_ROUNDING_NORM:"0.25",AREATEX_MAX_DISTANCE:"16.0",AREATEX_MAX_DISTANCE_DIAG:"20.0",AREATEX_PIXEL_SIZE:"(1.0 / vec2(160.0, 560.0))",AREATEX_SUBTEX_SIZE:"(1.0 / 7.0)",SEARCHTEX_SIZE:"vec2(66.0, 33.0)",SEARCHTEX_PACKED_SIZE:"vec2(64.0, 16.0)"},uniforms:{inputBuffer:new Xe(null),searchTexture:new Xe(null),areaTexture:new Xe(null),resolution:new Xe(t),texelSize:new Xe(e)},blending:Nn,depthWrite:!1,depthTest:!1,fragmentShader:JAt,vertexShader:$At}),this.toneMapped=!1}set inputBuffer(e){this.uniforms.inputBuffer.value=e}setInputBuffer(e){this.uniforms.inputBuffer.value=e}get searchTexture(){return this.uniforms.searchTexture.value}set searchTexture(e){this.uniforms.searchTexture.value=e}get areaTexture(){return this.uniforms.areaTexture.value}set areaTexture(e){this.uniforms.areaTexture.value=e}setLookupTextures(e,t){this.searchTexture=e,this.areaTexture=t}get orthogonalSearchSteps(){return Number(this.defines.MAX_SEARCH_STEPS_INT)}set orthogonalSearchSteps(e){let t=Math.min(Math.max(e,0),112);this.defines.MAX_SEARCH_STEPS_INT=t.toFixed("0"),this.defines.MAX_SEARCH_STEPS_FLOAT=t.toFixed("1"),this.needsUpdate=!0}setOrthogonalSearchSteps(e){this.orthogonalSearchSteps=e}get diagonalSearchSteps(){return Number(this.defines.MAX_SEARCH_STEPS_DIAG_INT)}set diagonalSearchSteps(e){let t=Math.min(Math.max(e,0),20);this.defines.MAX_SEARCH_STEPS_DIAG_INT=t.toFixed("0"),this.defines.MAX_SEARCH_STEPS_DIAG_FLOAT=t.toFixed("1"),this.needsUpdate=!0}setDiagonalSearchSteps(e){this.diagonalSearchSteps=e}get diagonalDetection(){return this.defines.DISABLE_DIAG_DETECTION===void 0}set diagonalDetection(e){e?delete this.defines.DISABLE_DIAG_DETECTION:this.defines.DISABLE_DIAG_DETECTION="1",this.needsUpdate=!0}isDiagonalDetectionEnabled(){return this.diagonalDetection}setDiagonalDetectionEnabled(e){this.diagonalDetection=e}get cornerRounding(){return Number(this.defines.CORNER_ROUNDING)}set cornerRounding(e){let t=Math.min(Math.max(e,0),100);this.defines.CORNER_ROUNDING=t.toFixed("4"),this.defines.CORNER_ROUNDING_NORM=(t/100).toFixed("4"),this.needsUpdate=!0}setCornerRounding(e){this.cornerRounding=e}get cornerDetection(){return this.defines.DISABLE_CORNER_DETECTION===void 0}set cornerDetection(e){e?delete this.defines.DISABLE_CORNER_DETECTION:this.defines.DISABLE_CORNER_DETECTION="1",this.needsUpdate=!0}isCornerRoundingEnabled(){return this.cornerDetection}setCornerRoundingEnabled(e){this.cornerDetection=e}setSize(e,t){let r=this.uniforms;r.texelSize.value.set(1/e,1/t),r.resolution.value.set(e,t)}},t8t=new cm,cf=null;function r8t(){if(cf===null){let e=new Float32Array([-1,-1,0,3,-1,0,-1,3,0]),t=new Float32Array([0,0,2,0,0,2]);cf=new It,cf.setAttribute!==void 0?(cf.setAttribute("position",new Zt(e,3)),cf.setAttribute("uv",new Zt(t,2))):(cf.addAttribute("position",new Zt(e,3)),cf.addAttribute("uv",new Zt(t,2)))}return cf}var es=class{constructor(e="Pass",t=new jc,r=t8t){this.name=e,this.renderer=null,this.scene=t,this.camera=r,this.screen=null,this.rtt=!0,this.needsSwap=!0,this.needsDepthTexture=!1,this.enabled=!0}get renderToScreen(){return!this.rtt}set renderToScreen(e){if(this.rtt===e){let t=this.getFullscreenMaterial();t!==null&&(t.needsUpdate=!0),this.rtt=!e}}setRenderer(e){this.renderer=e}isEnabled(){return this.enabled}setEnabled(e){this.enabled=e}get fullscreenMaterial(){return this.screen!==null?this.screen.material:null}set fullscreenMaterial(e){let t=this.screen;t!==null?t.material=e:(t=new nn(r8t(),e),t.frustumCulled=!1,this.scene===null&&(this.scene=new jc),this.scene.add(t),this.screen=t)}getFullscreenMaterial(){return this.fullscreenMaterial}setFullscreenMaterial(e){this.fullscreenMaterial=e}getDepthTexture(){return null}setDepthTexture(e,t=Hd){}render(e,t,r,i,n){throw new Error("Render method not implemented!")}setSize(e,t){}initialize(e,t,r){}dispose(){for(let e of Object.keys(this)){let t=this[e];if(t!==null&&typeof t=="object"&&typeof t.dispose=="function"){if(t instanceof jc||t===this.renderer)continue;this[e].dispose()}}}},FO=class extends es{constructor(e,t=!0){super("CopyPass"),this.fullscreenMaterial=new HAt,this.needsSwap=!1,this.renderTarget=e,e===void 0&&(this.renderTarget=new ui(1,1,{minFilter:br,magFilter:br,stencilBuffer:!1,depthBuffer:!1}),this.renderTarget.texture.name="CopyPass.Target"),this.autoResize=t}get resize(){return this.autoResize}set resize(e){this.autoResize=e}get texture(){return this.renderTarget.texture}getTexture(){return this.renderTarget.texture}setAutoResizeEnabled(e){this.autoResize=e}render(e,t,r,i,n){this.fullscreenMaterial.inputBuffer=t.texture,e.setRenderTarget(this.renderToScreen?null:this.renderTarget),e.render(this.scene,this.camera)}setSize(e,t){this.autoResize&&this.renderTarget.setSize(e,t)}initialize(e,t,r){r!==void 0&&(this.renderTarget.texture.type=r,r!==So?this.fullscreenMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1":e.outputEncoding===pr&&(this.renderTarget.texture.encoding=pr))}},i8t=class extends es{constructor(){super("ClearMaskPass",null,null),this.needsSwap=!1}render(e,t,r,i,n){let a=e.state.buffers.stencil;a.setLocked(!1),a.setTest(!1)}},wD=new Vt,hH=class extends es{constructor(e=!0,t=!0,r=!1){super("ClearPass",null,null),this.needsSwap=!1,this.color=e,this.depth=t,this.stencil=r,this.overrideClearColor=null,this.overrideClearAlpha=-1}setClearFlags(e,t,r){this.color=e,this.depth=t,this.stencil=r}getOverrideClearColor(){return this.overrideClearColor}setOverrideClearColor(e){this.overrideClearColor=e}getOverrideClearAlpha(){return this.overrideClearAlpha}setOverrideClearAlpha(e){this.overrideClearAlpha=e}render(e,t,r,i,n){let a=this.overrideClearColor,o=this.overrideClearAlpha,s=e.getClearAlpha(),l=a!==null,u=o>=0;l?(wD.copy(e.getClearColor(wD)),e.setClearColor(a,u?o:s)):u&&e.setClearAlpha(o),e.setRenderTarget(this.renderToScreen?null:t),e.clear(this.color,this.depth,this.stencil),l?e.setClearColor(wD,s):u&&e.setClearAlpha(s)}},hf=-1,ws=class extends Ka{constructor(e,t=hf,r=hf,i=1){super(),this.resizable=e,this.base=new me(1,1),this.preferred=new me(t,r),this.target=this.preferred,this.s=i}get width(){let{base:e,preferred:t,scale:r}=this,i;return t.width!==hf?i=t.width:t.height!==hf?i=Math.round(t.height*(e.width/Math.max(e.height,1))):i=Math.round(e.width*r),i}set width(e){this.preferredWidth=e}get height(){let{base:e,preferred:t,scale:r}=this,i;return t.height!==hf?i=t.height:t.width!==hf?i=Math.round(t.width/Math.max(e.width/Math.max(e.height,1),1)):i=Math.round(e.height*r),i}set height(e){this.preferredHeight=e}getWidth(){return this.width}getHeight(){return this.height}get scale(){return this.s}set scale(e){this.s!==e&&(this.s=e,this.preferred.setScalar(hf),this.dispatchEvent({type:"change"}),this.resizable.setSize(this.base.width,this.base.height))}getScale(){return this.scale}setScale(e){this.scale=e}get baseWidth(){return this.base.width}set baseWidth(e){this.base.width!==e&&(this.base.width=e,this.dispatchEvent({type:"change"}),this.resizable.setSize(this.base.width,this.base.height))}getBaseWidth(){return this.base.width}setBaseWidth(e){this.base.width!==e&&(this.base.width=e,this.dispatchEvent({type:"change"}),this.resizable.setSize(this.base.width,this.base.height))}get baseHeight(){return this.base.height}set baseHeight(e){this.base.height!==e&&(this.base.height=e,this.dispatchEvent({type:"change"}),this.resizable.setSize(this.base.width,this.base.height))}getBaseHeight(){return this.baseHeight}setBaseHeight(e){this.baseHeight=e}setBaseSize(e,t){(this.base.width!==e||this.base.height!==t)&&(this.base.set(e,t),this.dispatchEvent({type:"change"}),this.resizable.setSize(this.base.width,this.base.height))}get preferredWidth(){return this.preferred.width}set preferredWidth(e){this.preferred.width!==e&&(this.preferred.width=e,this.dispatchEvent({type:"change"}),this.resizable.setSize(this.base.width,this.base.height))}getPreferredWidth(){return this.preferredWidth}setPreferredWidth(e){this.preferredWidth=e}get preferredHeight(){return this.preferred.height}set preferredHeight(e){this.preferred.height!==e&&(this.preferred.height=e,this.dispatchEvent({type:"change"}),this.resizable.setSize(this.base.width,this.base.height))}getPreferredHeight(){return this.preferredHeight}setPreferredHeight(e){this.preferredHeight=e}setPreferredSize(e,t){(this.preferred.width!==e||this.preferred.height!==t)&&(this.preferred.set(e,t),this.dispatchEvent({type:"change"}),this.resizable.setSize(this.base.width,this.base.height))}copy(e){this.base.set(e.getBaseWidth(),e.getBaseHeight()),this.preferred.set(e.getPreferredWidth(),e.getPreferredHeight()),this.dispatchEvent({type:"change"}),this.resizable.setSize(this.base.width,this.base.height)}static get AUTO_SIZE(){return hf}},_D=!1,iie=class{constructor(e=null){this.originalMaterials=new Map,this.material=null,this.materials=null,this.materialsBackSide=null,this.materialsDoubleSide=null,this.materialsFlatShaded=null,this.materialsFlatShadedBackSide=null,this.materialsFlatShadedDoubleSide=null,this.setMaterial(e),this.meshCount=0,this.replaceMaterial=t=>{if(t.isMesh){let r;if(t.material.flatShading)switch(t.material.side){case go:r=this.materialsFlatShadedDoubleSide;break;case ba:r=this.materialsFlatShadedBackSide;break;default:r=this.materialsFlatShaded;break}else switch(t.material.side){case go:r=this.materialsDoubleSide;break;case ba:r=this.materialsBackSide;break;default:r=this.materials;break}this.originalMaterials.set(t,t.material),t.isSkinnedMesh?t.material=r[2]:t.isInstancedMesh?t.material=r[1]:t.material=r[0],++this.meshCount}}}setMaterial(e){if(this.disposeMaterials(),this.material=e,e!==null){let t=this.materials=[e.clone(),e.clone(),e.clone()];for(let r of t)r.uniforms=Object.assign({},e.uniforms),r.side=Lu;t[2].skinning=!0,this.materialsBackSide=t.map(r=>{let i=r.clone();return i.uniforms=Object.assign({},e.uniforms),i.side=ba,i}),this.materialsDoubleSide=t.map(r=>{let i=r.clone();return i.uniforms=Object.assign({},e.uniforms),i.side=go,i}),this.materialsFlatShaded=t.map(r=>{let i=r.clone();return i.uniforms=Object.assign({},e.uniforms),i.flatShading=!0,i}),this.materialsFlatShadedBackSide=t.map(r=>{let i=r.clone();return i.uniforms=Object.assign({},e.uniforms),i.flatShading=!0,i.side=ba,i}),this.materialsFlatShadedDoubleSide=t.map(r=>{let i=r.clone();return i.uniforms=Object.assign({},e.uniforms),i.flatShading=!0,i.side=go,i})}}render(e,t,r){let i=e.shadowMap.enabled;if(e.shadowMap.enabled=!1,_D){let n=this.originalMaterials;this.meshCount=0,t.traverse(this.replaceMaterial),e.render(t,r);for(let a of n)a[0].material=a[1];this.meshCount!==n.size&&n.clear()}else{let n=t.overrideMaterial;t.overrideMaterial=this.material,e.render(t,r),t.overrideMaterial=n}e.shadowMap.enabled=i}disposeMaterials(){if(this.material!==null){let e=this.materials.concat(this.materialsBackSide).concat(this.materialsDoubleSide).concat(this.materialsFlatShaded).concat(this.materialsFlatShadedBackSide).concat(this.materialsFlatShadedDoubleSide);for(let t of e)t.dispose()}}dispose(){this.originalMaterials.clear(),this.disposeMaterials()}static get workaroundEnabled(){return _D}static set workaroundEnabled(e){_D=e}},n8t=class extends es{constructor(e,t,r=null){super("RenderPass",e,t),this.needsSwap=!1,this.clearPass=new hH,this.overrideMaterialManager=r===null?null:new iie(r),this.ignoreBackground=!1,this.skipShadowMapUpdate=!1,this.selection=null}get renderToScreen(){return super.renderToScreen}set renderToScreen(e){super.renderToScreen=e,this.clearPass.renderToScreen=e}get overrideMaterial(){let e=this.overrideMaterialManager;return e!==null?e.material:null}set overrideMaterial(e){let t=this.overrideMaterialManager;e!==null?t!==null?t.setMaterial(e):this.overrideMaterialManager=new iie(e):t!==null&&(t.dispose(),this.overrideMaterialManager=null)}getOverrideMaterial(){return this.overrideMaterial}setOverrideMaterial(e){this.overrideMaterial=e}get clear(){return this.clearPass.enabled}set clear(e){this.clearPass.enabled=e}getSelection(){return this.selection}setSelection(e){this.selection=e}isBackgroundDisabled(){return this.ignoreBackground}setBackgroundDisabled(e){this.ignoreBackground=e}isShadowMapDisabled(){return this.skipShadowMapUpdate}setShadowMapDisabled(e){this.skipShadowMapUpdate=e}getClearPass(){return this.clearPass}render(e,t,r,i,n){let a=this.scene,o=this.camera,s=this.selection,l=o.layers.mask,u=a.background,c=e.shadowMap.autoUpdate,h=this.renderToScreen?null:t;s!==null&&o.layers.set(s.getLayer()),this.skipShadowMapUpdate&&(e.shadowMap.autoUpdate=!1),(this.ignoreBackground||this.clearPass.overrideClearColor!==null)&&(a.background=null),this.clearPass.enabled&&this.clearPass.render(e,t),e.setRenderTarget(h),this.overrideMaterialManager!==null?this.overrideMaterialManager.render(e,a,o):e.render(a,o),o.layers.mask=l,a.background=u,e.shadowMap.autoUpdate=c}},nie=class extends es{constructor(e,t,{resolutionScale:r=1,width:i=ws.AUTO_SIZE,height:n=ws.AUTO_SIZE,renderTarget:a}={}){super("DepthPass"),this.needsSwap=!1,this.renderPass=new n8t(e,t,new $ve({depthPacking:Fve}));let o=this.renderPass;o.skipShadowMapUpdate=!0,o.ignoreBackground=!0;let s=o.getClearPass();s.overrideClearColor=new Vt(16777215),s.overrideClearAlpha=1,this.renderTarget=a,this.renderTarget===void 0&&(this.renderTarget=new ui(1,1,{minFilter:mi,magFilter:mi,stencilBuffer:!1}),this.renderTarget.texture.name="DepthPass.Target");let l=this.resolution=new ws(this,i,n,r);l.addEventListener("change",u=>this.setSize(l.baseWidth,l.baseHeight))}get texture(){return this.renderTarget.texture}getTexture(){return this.renderTarget.texture}getResolution(){return this.resolution}getResolutionScale(){return this.resolution.scale}setResolutionScale(e){this.resolution.scale=e}render(e,t,r,i,n){let a=this.renderToScreen?null:this.renderTarget;this.renderPass.render(e,a)}setSize(e,t){let r=this.resolution;r.setBaseSize(e,t),this.renderTarget.setSize(r.width,r.height)}},Xr={SKIP:0,ADD:1,ALPHA:2,AVERAGE:3,COLOR_BURN:4,COLOR_DODGE:5,DARKEN:6,DIFFERENCE:7,EXCLUSION:8,LIGHTEN:9,MULTIPLY:10,DIVIDE:11,NEGATION:12,NORMAL:13,OVERLAY:14,REFLECT:15,SCREEN:16,SOFT_LIGHT:17,SUBTRACT:18},a8t="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return min(x+y,1.0)*opacity+x*(1.0-opacity);}",o8t="vec3 blend(const in vec3 x,const in vec3 y,const in float opacity){return y*opacity+x*(1.0-opacity);}vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){float a=min(y.a,opacity);return vec4(blend(x.rgb,y.rgb,a),max(x.a,a));}",s8t="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return(x+y)*0.5*opacity+x*(1.0-opacity);}",l8t="float blend(const in float x,const in float y){return(y==0.0)?y:max(1.0-(1.0-x)/y,0.0);}vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 z=vec4(blend(x.r,y.r),blend(x.g,y.g),blend(x.b,y.b),blend(x.a,y.a));return z*opacity+x*(1.0-opacity);}",u8t="float blend(const in float x,const in float y){return(y==1.0)?y:min(x/(1.0-y),1.0);}vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 z=vec4(blend(x.r,y.r),blend(x.g,y.g),blend(x.b,y.b),blend(x.a,y.a));return z*opacity+x*(1.0-opacity);}",c8t="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return min(x,y)*opacity+x*(1.0-opacity);}",h8t="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return abs(x-y)*opacity+x*(1.0-opacity);}",d8t="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return(x+y-2.0*x*y)*opacity+x*(1.0-opacity);}",f8t="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return max(x,y)*opacity+x*(1.0-opacity);}",p8t="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return x*y*opacity+x*(1.0-opacity);}",v8t="float blend(const in float x,const in float y){return(y>0.0)?min(x/y,1.0):1.0;}vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 z=vec4(blend(x.r,y.r),blend(x.g,y.g),blend(x.b,y.b),blend(x.a,y.a));return z*opacity+x*(1.0-opacity);}",m8t="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return(1.0-abs(1.0-x-y))*opacity+x*(1.0-opacity);}",g8t="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return y*opacity+x*(1.0-opacity);}",y8t="float blend(const in float x,const in float y){return(x<0.5)?(2.0*x*y):(1.0-2.0*(1.0-x)*(1.0-y));}vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 z=vec4(blend(x.r,y.r),blend(x.g,y.g),blend(x.b,y.b),blend(x.a,y.a));return z*opacity+x*(1.0-opacity);}",x8t="float blend(const in float x,const in float y){return(y==1.0)?y:min(x*x/(1.0-y),1.0);}vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 z=vec4(blend(x.r,y.r),blend(x.g,y.g),blend(x.b,y.b),blend(x.a,y.a));return z*opacity+x*(1.0-opacity);}",b8t="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return(1.0-(1.0-x)*(1.0-y))*opacity+x*(1.0-opacity);}",w8t="float blend(const in float x,const in float y){return(y<0.5)?(2.0*x*y+x*x*(1.0-2.0*y)):(sqrt(x)*(2.0*y-1.0)+2.0*x*(1.0-y));}vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 z=vec4(blend(x.r,y.r),blend(x.g,y.g),blend(x.b,y.b),blend(x.a,y.a));return z*opacity+x*(1.0-opacity);}",_8t="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return max(x+y-1.0,0.0)*opacity+x*(1.0-opacity);}",A8t=new Map([[Xr.SKIP,null],[Xr.ADD,a8t],[Xr.ALPHA,o8t],[Xr.AVERAGE,s8t],[Xr.COLOR_BURN,l8t],[Xr.COLOR_DODGE,u8t],[Xr.DARKEN,c8t],[Xr.DIFFERENCE,h8t],[Xr.EXCLUSION,d8t],[Xr.LIGHTEN,f8t],[Xr.MULTIPLY,p8t],[Xr.DIVIDE,v8t],[Xr.NEGATION,m8t],[Xr.NORMAL,g8t],[Xr.OVERLAY,y8t],[Xr.REFLECT,x8t],[Xr.SCREEN,b8t],[Xr.SOFT_LIGHT,w8t],[Xr.SUBTRACT,_8t]]),S8t=class extends Ka{constructor(e,t=1){super(),this.f=e,this.opacity=new Xe(t)}getOpacity(){return this.opacity.value}setOpacity(e){this.opacity.value=e}get blendFunction(){return this.f}set blendFunction(e){this.f=e,this.dispatchEvent({type:"change"})}getBlendFunction(){return this.blendFunction}setBlendFunction(e){this.blendFunction=e}getShaderCode(){return A8t.get(this.blendFunction)}},qc={NONE:0,DEPTH:1,CONVOLUTION:2},ph=class extends Ka{constructor(e,t,{attributes:r=qc.NONE,blendFunction:i=Xr.SCREEN,defines:n=new Map,uniforms:a=new Map,extensions:o=null,vertexShader:s=null}={}){super(),this.name=e,this.renderer=null,this.attributes=r,this.fragmentShader=t,this.vertexShader=s,this.defines=n,this.uniforms=a,this.extensions=o,this.blendMode=new S8t(i),this.blendMode.addEventListener("change",l=>this.setChanged())}getName(){return this.name}setRenderer(e){this.renderer=e}getDefines(){return this.defines}getUniforms(){return this.uniforms}getExtensions(){return this.extensions}getBlendMode(){return this.blendMode}getAttributes(){return this.attributes}setAttributes(e){this.attributes=e,this.setChanged()}getFragmentShader(){return this.fragmentShader}setFragmentShader(e){this.fragmentShader=e,this.setChanged()}getVertexShader(){return this.vertexShader}setVertexShader(e){this.vertexShader=e,this.setChanged()}setChanged(){this.dispatchEvent({type:"change"})}setDepthTexture(e,t=Hd){}update(e,t,r){}setSize(e,t){}initialize(e,t,r){}dispose(){for(let e of Object.keys(this)){let t=this[e];if(t!==null&&typeof t=="object"&&typeof t.dispose=="function"){if(t instanceof jc||t===this.renderer)continue;this[e].dispose()}}}};function aie(e,t,r){for(let i of t){let n="$1"+e+i.charAt(0).toUpperCase()+i.slice(1),a=new RegExp("([^\\.])(\\b"+i+"\\b)","g");for(let o of r.entries())o[1]!==null&&r.set(o[0],o[1].replace(a,n))}}function C8t(e,t,r,i,n,a,o){let s=new Map([["fragment",t.getFragmentShader()],["vertex",t.getVertexShader()]]),l=s.get("fragment")!==void 0&&/mainImage/.test(s.get("fragment")),u=s.get("fragment")!==void 0&&/mainUv/.test(s.get("fragment")),c=[],h=[],d=!1,f=!1;if(s.get("fragment")===void 0)console.error("Missing fragment shader",t);else if(u&&o&qc.CONVOLUTION)console.error("Effects that transform UV coordinates are incompatible with convolution effects",t);else if(!l&&!u)console.error("The fragment shader contains neither a mainImage nor a mainUv function",t);else{let p=/(?:\w+\s+(\w+)\([\w\s,]*\)\s*{[^}]+})/g,v=VO.Section;if(u){let g=`	${e}MainUv(UV);
`;r.set(v.FRAGMENT_MAIN_UV,r.get(v.FRAGMENT_MAIN_UV)+g),d=!0}if(s.get("vertex")!==null&&/mainSupport/.test(s.get("vertex"))){let g=`	${e}MainSupport(`;g+=/mainSupport *\([\w\s]*?uv\s*?\)/.test(s.get("vertex"))?`vUv);
`:`);
`,r.set(v.VERTEX_MAIN_SUPPORT,r.get(v.VERTEX_MAIN_SUPPORT)+g),c=c.concat([...s.get("vertex").matchAll(/(?:varying\s+\w+\s+(\w*))/g)].map(y=>y[1])),h=h.concat(c).concat([...s.get("vertex").matchAll(p)].map(y=>y[1]))}h=h.concat([...s.get("fragment").matchAll(p)].map(g=>g[1])),h=h.concat([...t.defines.keys()].map(g=>g.replace(/\([\w\s,]*\)/g,""))),h=h.concat([...t.uniforms.keys()]),t.uniforms.forEach((g,y)=>a.set(e+y.charAt(0).toUpperCase()+y.slice(1),g)),t.defines.forEach((g,y)=>n.set(e+y.charAt(0).toUpperCase()+y.slice(1),g)),aie(e,h,n),aie(e,h,s);let m=t.blendMode;if(i.set(m.blendFunction,m),l){let g=/MainImage *\([\w\s,]*?depth[\w\s,]*?\)/,y=`${e}MainImage(color0, UV, `;o&qc.DEPTH&&g.test(s.get("fragment"))&&(y+="depth, ",f=!0),y+=`color1);
	`;let x=e+"BlendOpacity";a.set(x,m.opacity),y+=`color0 = blend${m.blendFunction}(color0, color1, ${x});

	`,r.set(v.FRAGMENT_MAIN_IMAGE,r.get(v.FRAGMENT_MAIN_IMAGE)+y),y=`uniform float ${x};

`,r.set(v.FRAGMENT_HEAD,r.get(v.FRAGMENT_HEAD)+y)}r.set(v.FRAGMENT_HEAD,r.get(v.FRAGMENT_HEAD)+s.get("fragment")+`
`),s.get("vertex")!==null&&r.set(v.VERTEX_HEAD,r.get(v.VERTEX_HEAD)+s.get("vertex")+`
`)}return{varyings:c,transformedUv:d,readDepth:f}}var D6=class extends es{constructor(e,...t){super("EffectPass"),this.fullscreenMaterial=new VO(null,null,null,e),this.effects=t.sort((r,i)=>i.attributes-r.attributes),this.skipRendering=!1,this.uniformCount=0,this.varyingCount=0,this.minTime=1,this.maxTime=Number.POSITIVE_INFINITY}get encodeOutput(){return this.fullscreenMaterial.encodeOutput}set encodeOutput(e){this.fullscreenMaterial.encodeOutput=e}get dithering(){return this.fullscreenMaterial.dithering}set dithering(e){let t=this.fullscreenMaterial;t.dithering=e,t.needsUpdate=!0}verifyResources(){let e=this.renderer.capabilities,t=Math.min(e.maxFragmentUniforms,e.maxVertexUniforms);this.uniformCount>t&&console.warn("The current rendering context doesn't support more than "+t+" uniforms, but "+this.uniformCount+" were defined"),t=e.maxVaryings,this.varyingCount>t&&console.warn("The current rendering context doesn't support more than "+t+" varyings, but "+this.varyingCount+" were defined")}updateMaterial(){let e=VO.Section,t=new Map([[e.FRAGMENT_HEAD,""],[e.FRAGMENT_MAIN_UV,""],[e.FRAGMENT_MAIN_IMAGE,""],[e.VERTEX_HEAD,""],[e.VERTEX_MAIN_SUPPORT,""]]),r=new Map,i=new Map,n=new Map,a=new Set,o=0,s=0,l=0,u=!1,c=!1;for(let d of this.effects)if(d.blendMode.blendFunction===Xr.SKIP)l|=d.getAttributes()&qc.DEPTH;else if(l&d.getAttributes()&qc.CONVOLUTION)console.error("Convolution effects cannot be merged",d);else{l|=d.getAttributes();let f="e"+o++,p=C8t(f,d,t,r,i,n,l);if(s+=p.varyings.length,u=u||p.transformedUv,c=c||p.readDepth,d.extensions!==null)for(let v of d.extensions)a.add(v)}let h=/\bblend\b/g;for(let d of r.values()){let f=d.getShaderCode().replace(h,`blend${d.blendFunction}`);t.set(e.FRAGMENT_HEAD,t.get(e.FRAGMENT_HEAD)+f+`
`)}l&qc.DEPTH?(c&&t.set(e.FRAGMENT_MAIN_IMAGE,`float depth = readDepth(UV);

	`+t.get(e.FRAGMENT_MAIN_IMAGE)),this.needsDepthTexture=this.getDepthTexture()===null):this.needsDepthTexture=!1,u?(t.set(e.FRAGMENT_MAIN_UV,`vec2 transformedUv = vUv;
`+t.get(e.FRAGMENT_MAIN_UV)),i.set("UV","transformedUv")):i.set("UV","vUv"),t.forEach((d,f,p)=>p.set(f,d.trim().replace(/^#/,`
#`))),this.uniformCount=n.size,this.varyingCount=s,this.skipRendering=o===0,this.needsSwap=!this.skipRendering,this.fullscreenMaterial.setShaderParts(t).setExtensions(a).setUniforms(n).setDefines(i)}recompile(){this.updateMaterial(),this.verifyResources()}getDepthTexture(){return this.fullscreenMaterial.depthBuffer}setDepthTexture(e,t=Hd){this.fullscreenMaterial.depthBuffer=e,this.fullscreenMaterial.depthPacking=t;for(let r of this.effects)r.setDepthTexture(e,t)}render(e,t,r,i,n){for(let a of this.effects)a.update(e,t,i);if(!this.skipRendering||this.renderToScreen){let a=this.fullscreenMaterial;a.inputBuffer=t.texture,a.time+=i,e.setRenderTarget(this.renderToScreen?null:r),e.render(this.scene,this.camera)}}setSize(e,t){this.fullscreenMaterial.setSize(e,t);for(let r of this.effects)r.setSize(e,t)}initialize(e,t,r){this.renderer=e;for(let i of this.effects)i.initialize(e,t,r),i.addEventListener("change",n=>this.handleEvent(n));this.updateMaterial(),this.verifyResources(),r!==void 0&&r!==So&&(this.fullscreenMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1")}dispose(){super.dispose();for(let e of this.effects)e.dispose()}handleEvent(e){switch(e.type){case"change":this.recompile();break}}},E8t=[new Float32Array([0,0]),new Float32Array([0,1,1]),new Float32Array([0,1,1,2]),new Float32Array([0,1,2,2,3]),new Float32Array([0,1,2,3,4,4,5]),new Float32Array([0,1,2,3,4,5,7,8,9,10])],dH=class extends es{constructor({resolutionScale:e=.5,width:t=ws.AUTO_SIZE,height:r=ws.AUTO_SIZE,kernelSize:i=z7.LARGE}={}){super("KawaseBlurPass"),this.renderTargetA=new ui(1,1,{minFilter:br,magFilter:br,stencilBuffer:!1,depthBuffer:!1}),this.renderTargetA.texture.name="Blur.Target.A",this.renderTargetB=this.renderTargetA.clone(),this.renderTargetB.texture.name="Blur.Target.B";let n=this.resolution=new ws(this,t,r,e);n.addEventListener("change",a=>this.setSize(n.baseWidth,n.baseHeight)),this.blurMaterial=new rie,this.ditheredBlurMaterial=new rie,this.ditheredBlurMaterial.uniforms.scale=this.blurMaterial.uniforms.scale,this.ditheredBlurMaterial.dithering=!0,this.dithering=!1,this.kernelSize=i}getResolution(){return this.resolution}get width(){return this.resolution.width}set width(e){this.resolution.preferredWidth=e}get height(){return this.resolution.height}set height(e){this.resolution.preferredHeight=e}get scale(){return this.blurMaterial.scale}set scale(e){this.blurMaterial.scale=e}getScale(){return this.blurMaterial.scale}setScale(e){this.blurMaterial.scale=e}getKernelSize(){return this.kernelSize}setKernelSize(e){this.kernelSize=e}getResolutionScale(){return this.resolution.scale}setResolutionScale(e){this.resolution.scale=e}render(e,t,r,i,n){let a=this.scene,o=this.camera,s=this.renderTargetA,l=this.renderTargetB,u=E8t[this.kernelSize],c=this.blurMaterial,h=t,d,f;for(this.fullscreenMaterial=c,d=0,f=u.length-1;d<f;++d){let p=d&1?l:s;c.kernel=u[d],c.inputBuffer=h.texture,e.setRenderTarget(p),e.render(a,o),h=p}this.dithering&&(c=this.ditheredBlurMaterial,this.fullscreenMaterial=c),c.kernel=u[d],c.inputBuffer=h.texture,e.setRenderTarget(this.renderToScreen?null:r),e.render(a,o)}setSize(e,t){let r=this.resolution;r.setBaseSize(e,t);let i=r.width,n=r.height;this.renderTargetA.setSize(i,n),this.renderTargetB.setSize(i,n),this.blurMaterial.setSize(i,n),this.ditheredBlurMaterial.setSize(i,n)}initialize(e,t,r){r!==void 0&&(this.renderTargetA.texture.type=r,this.renderTargetB.texture.type=r,r!==So?(this.blurMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1",this.ditheredBlurMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1"):e.outputEncoding===pr&&(this.renderTargetA.texture.encoding=pr,this.renderTargetB.texture.encoding=pr))}static get AUTO_SIZE(){return ws.AUTO_SIZE}},M8t=class extends es{constructor({width:e=ws.AUTO_SIZE,height:t=ws.AUTO_SIZE,renderTarget:r,luminanceRange:i,colorOutput:n}={}){super("LuminancePass"),this.fullscreenMaterial=new ZAt(n,i),this.needsSwap=!1,this.renderTarget=r,this.renderTarget===void 0&&(this.renderTarget=new ui(1,1,{minFilter:br,magFilter:br,stencilBuffer:!1,depthBuffer:!1}),this.renderTarget.texture.name="LuminancePass.Target",this.renderTarget.texture.generateMipmaps=!1);let a=this.resolution=new ws(this,e,t);a.addEventListener("change",o=>this.setSize(a.baseWidth,a.baseHeight))}get texture(){return this.renderTarget.texture}getTexture(){return this.renderTarget.texture}getResolution(){return this.resolution}render(e,t,r,i,n){let a=this.fullscreenMaterial;a.inputBuffer=t.texture,e.setRenderTarget(this.renderToScreen?null:this.renderTarget),e.render(this.scene,this.camera)}setSize(e,t){let r=this.resolution;r.setBaseSize(e,t),this.renderTarget.setSize(r.width,r.height)}initialize(e,t,r){r!==void 0&&r!==So&&(this.fullscreenMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1")}},T8t=class extends es{constructor(e,t){super("MaskPass",e,t),this.needsSwap=!1,this.clearPass=new hH(!1,!1,!0),this.inverse=!1}get inverted(){return this.inverse}set inverted(e){this.inverse=e}get clear(){return this.clearPass.enabled}set clear(e){this.clearPass.enabled=e}getClearPass(){return this.clearPass}isInverted(){return this.inverted}setInverted(e){this.inverted=e}render(e,t,r,i,n){let a=e.getContext(),o=e.state.buffers,s=this.scene,l=this.camera,u=this.clearPass,c=this.inverted?0:1,h=1-c;o.color.setMask(!1),o.depth.setMask(!1),o.color.setLocked(!0),o.depth.setLocked(!0),o.stencil.setTest(!0),o.stencil.setOp(a.REPLACE,a.REPLACE,a.REPLACE),o.stencil.setFunc(a.ALWAYS,c,4294967295),o.stencil.setClear(h),o.stencil.setLocked(!0),this.clearPass.enabled&&(this.renderToScreen?u.render(e,null):(u.render(e,t),u.render(e,r))),this.renderToScreen?(e.setRenderTarget(null),e.render(s,l)):(e.setRenderTarget(t),e.render(s,l),e.setRenderTarget(r),e.render(s,l)),o.color.setLocked(!1),o.depth.setLocked(!1),o.stencil.setLocked(!1),o.stencil.setFunc(a.EQUAL,1,4294967295),o.stencil.setOp(a.KEEP,a.KEEP,a.KEEP),o.stencil.setLocked(!0)}},Sl=class extends es{constructor(e,t="inputBuffer"){super("ShaderPass"),this.fullscreenMaterial=e,this.inputBufferUniform=null,this.setInput(t)}setInput(e){if(this.inputBufferUniform=null,this.fullscreenMaterial!==null){let t=this.fullscreenMaterial.uniforms;t!==void 0&&t[e]!==void 0&&(this.inputBufferUniform=t[e])}}render(e,t,r,i,n){this.inputBufferUniform!==null&&t!==null&&(this.inputBufferUniform.value=t.texture),e.setRenderTarget(this.renderToScreen?null:r),e.render(this.scene,this.camera)}initialize(e,t,r){r!==void 0&&r!==So&&(this.fullscreenMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1")}},AD=1/1e3,P8t=1e3,D8t=class{constructor(){this.previousTime=0,this.currentTime=0,this.delta=0,this.fixedDelta=1e3/60,this.elapsed=0,this.timescale=1,this.fixedDeltaEnabled=!1,this.autoReset=!1}setFixedDeltaEnabled(e){return this.fixedDeltaEnabled=e,this}isAutoResetEnabled(e){return this.autoReset}setAutoResetEnabled(e){return typeof document<"u"&&document.hidden!==void 0&&(e?document.addEventListener("visibilitychange",this):document.removeEventListener("visibilitychange",this),this.autoReset=e),this}getDelta(){return this.delta*AD}getFixedDelta(){return this.fixedDelta*AD}setFixedDelta(e){return this.fixedDelta=e*P8t,this}getElapsed(){return this.elapsed*AD}getTimescale(){return this.timescale}setTimescale(e){return this.timescale=e,this}update(e){return this.fixedDeltaEnabled?this.delta=this.fixedDelta:(this.previousTime=this.currentTime,this.currentTime=e!==void 0?e:performance.now(),this.delta=this.currentTime-this.previousTime),this.delta*=this.timescale,this.elapsed+=this.delta,this}reset(){return this.delta=0,this.elapsed=0,this.currentTime=performance.now(),this}handleEvent(e){document.hidden||(this.currentTime=performance.now())}dispose(){this.setAutoResetEnabled(!1)}},z7={VERY_SMALL:0,SMALL:1,MEDIUM:2,LARGE:3,VERY_LARGE:4,HUGE:5},I8t=`#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D map;
#else
uniform lowp sampler2D map;
#endif
uniform float intensity;void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){outputColor=clamp(texture2D(map,uv)*intensity,0.0,1.0);}`,L8t=class extends ph{constructor({blendFunction:e=Xr.SCREEN,luminanceThreshold:t=.9,luminanceSmoothing:r=.025,resolutionScale:i=.5,intensity:n=1,width:a=ws.AUTO_SIZE,height:o=ws.AUTO_SIZE,kernelSize:s=z7.LARGE}={}){super("BloomEffect",I8t,{blendFunction:e,uniforms:new Map([["map",new Xe(null)],["intensity",new Xe(n)]])}),this.renderTarget=new ui(1,1,{minFilter:br,magFilter:br,stencilBuffer:!1,depthBuffer:!1}),this.renderTarget.texture.name="Bloom.Target",this.renderTarget.texture.generateMipmaps=!1,this.uniforms.get("map").value=this.renderTarget.texture,this.luminancePass=new M8t({renderTarget:this.renderTarget,colorOutput:!0}),this.luminanceMaterial.threshold=t,this.luminanceMaterial.smoothingFactor=r,this.blurPass=new dH({resolutionScale:i,width:a,height:o,kernelSize:s});let l=this.blurPass.getResolution();l.addEventListener("change",u=>this.setSize(l.baseWidth,l.baseHeight))}get texture(){return this.renderTarget.texture}getTexture(){return this.renderTarget.texture}get resolution(){return this.blurPass.resolution}getResolution(){return this.blurPass.resolution}getBlurPass(){return this.blurPass}getLuminancePass(){return this.luminancePass}get luminanceMaterial(){return this.luminancePass.fullscreenMaterial}getLuminanceMaterial(){return this.luminancePass.fullscreenMaterial}get width(){return this.resolution.width}set width(e){this.resolution.preferredWidth=e}get height(){return this.resolution.height}set height(e){this.resolution.preferredHeight=e}get dithering(){return this.blurPass.dithering}set dithering(e){this.blurPass.dithering=e}get kernelSize(){return this.blurPass.kernelSize}set kernelSize(e){this.blurPass.kernelSize=e}get distinction(){return console.warn(this.name,"distinction was removed"),1}set distinction(e){console.warn(this.name,"distinction was removed")}get intensity(){return this.uniforms.get("intensity").value}set intensity(e){this.uniforms.get("intensity").value=e}getIntensity(){return this.intensity}setIntensity(e){this.intensity=e}getResolutionScale(){return this.resolution.scale}setResolutionScale(e){this.resolution.scale=e}update(e,t,r){let i=this.renderTarget;this.luminancePass.enabled?(this.luminancePass.render(e,t,i),this.blurPass.render(e,i,i)):this.blurPass.render(e,t,i)}setSize(e,t){let r=this.resolution;r.setBaseSize(e,t),this.renderTarget.setSize(r.width,r.height),this.luminancePass.resolution.copy(r)}initialize(e,t,r){this.blurPass.initialize(e,t,r),r!==void 0&&(this.renderTarget.texture.type=r,e.outputEncoding===pr&&(this.renderTarget.texture.encoding=pr))}},k8t="uniform float brightness;uniform float contrast;void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){vec3 color=inputColor.rgb+vec3(brightness-0.5);if(contrast>0.0){color/=vec3(1.0-contrast);}else{color*=vec3(1.0+contrast);}outputColor=vec4(min(color+vec3(0.5),1.0),inputColor.a);}",R8t=class extends ph{constructor({blendFunction:e=Xr.NORMAL,brightness:t=0,contrast:r=0}={}){super("BrightnessContrastEffect",k8t,{blendFunction:e,uniforms:new Map([["brightness",new Xe(t)],["contrast",new Xe(r)]])})}get brightness(){return this.uniforms.get("brightness").value}set brightness(e){this.uniforms.get("brightness").value=e}getBrightness(e){return this.brightness}setBrightness(e){this.brightness=e}get contrast(){return this.uniforms.get("contrast").value}set contrast(e){this.uniforms.get("contrast").value=e}getContrast(e){return this.contrast}setContrast(e){this.contrast=e}},O8t="void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){outputColor=vec4(vec3(average(inputColor.rgb)),inputColor.a);}",B8t=class extends ph{constructor(e=Xr.NORMAL){super("ColorAverageEffect",O8t,{blendFunction:e})}},N8t="varying vec2 vUvR;varying vec2 vUvB;void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){vec2 ra=texture2D(inputBuffer,vUvR).ra;vec2 ba=texture2D(inputBuffer,vUvB).ba;outputColor=vec4(ra.x,inputColor.g,ba.x,max(max(ra.y,ba.y),inputColor.a));}",V8t="uniform vec2 offset;varying vec2 vUvR;varying vec2 vUvB;void mainSupport(const in vec2 uv){vec2 shift=offset*vec2(1.0,aspect);vUvR=uv+shift;vUvB=uv-shift;}",F8t=class extends ph{constructor({blendFunction:e=Xr.NORMAL,offset:t=new me(.001,5e-4)}={}){super("ChromaticAberrationEffect",N8t,{vertexShader:V8t,blendFunction:e,attributes:qc.CONVOLUTION,uniforms:new Map([["offset",new Xe(t)]])})}get offset(){return this.uniforms.get("offset").value}set offset(e){this.uniforms.get("offset").value=e}getOffset(){return this.offset}setOffset(e){this.offset=e}},z8t=`#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D nearColorBuffer;uniform mediump sampler2D farColorBuffer;
#else
uniform lowp sampler2D nearColorBuffer;uniform lowp sampler2D farColorBuffer;
#endif
uniform lowp sampler2D nearCoCBuffer;uniform float scale;void mainImage(const in vec4 inputColor,const in vec2 uv,const in float depth,out vec4 outputColor){vec4 colorNear=texture2D(nearColorBuffer,uv);vec4 colorFar=texture2D(farColorBuffer,uv);float CoCNear=texture2D(nearCoCBuffer,uv).r;CoCNear=min(CoCNear*scale,1.0);vec4 result=inputColor*(1.0-colorFar.a)+colorFar;result=mix(result,colorNear,CoCNear);outputColor=result;}`,H8t=class extends ph{constructor(e,{blendFunction:t=Xr.NORMAL,worldFocusDistance:r,worldFocusRange:i,focusDistance:n=0,focalLength:a=.1,focusRange:o=a,bokehScale:s=1,width:l=ws.AUTO_SIZE,height:u=ws.AUTO_SIZE}={}){super("DepthOfFieldEffect",z8t,{blendFunction:t,attributes:qc.DEPTH,uniforms:new Map([["nearColorBuffer",new Xe(null)],["farColorBuffer",new Xe(null)],["nearCoCBuffer",new Xe(null)],["scale",new Xe(1)]])}),this.camera=e,this.renderTarget=new ui(1,1,{minFilter:br,magFilter:br,stencilBuffer:!1,depthBuffer:!1}),this.renderTarget.texture.name="DoF.Intermediate",this.renderTarget.texture.generateMipmaps=!1,this.renderTargetMasked=this.renderTarget.clone(),this.renderTargetMasked.texture.name="DoF.Masked.Far",this.renderTargetNear=this.renderTarget.clone(),this.renderTargetNear.texture.name="DoF.Bokeh.Near",this.uniforms.get("nearColorBuffer").value=this.renderTargetNear.texture,this.renderTargetFar=this.renderTarget.clone(),this.renderTargetFar.texture.name="DoF.Bokeh.Far",this.uniforms.get("farColorBuffer").value=this.renderTargetFar.texture,this.renderTargetCoC=this.renderTarget.clone(),this.renderTargetCoC.texture.name="DoF.CoC",this.renderTargetCoCBlurred=this.renderTargetCoC.clone(),this.renderTargetCoCBlurred.texture.name="DoF.CoC.Blurred",this.uniforms.get("nearCoCBuffer").value=this.renderTargetCoCBlurred.texture,this.cocPass=new Sl(new NAt(e));let c=this.cocMaterial;c.focusDistance=n,c.focusRange=o,r!==void 0&&(c.worldFocusDistance=r),i!==void 0&&(c.worldFocusRange=i),this.blurPass=new dH({kernelSize:z7.MEDIUM,width:l,height:u});let h=this.blurPass.getResolution();h.addEventListener("change",f=>this.setSize(h.getBaseWidth(),h.getBaseHeight())),this.maskPass=new Sl(new KAt(this.renderTargetCoC.texture));let d=this.maskPass.fullscreenMaterial;d.maskFunction=mye.MULTIPLY,d.colorChannel=vye.GREEN,this.bokehNearBasePass=new Sl(new H5(!1,!0)),this.bokehNearBasePass.fullscreenMaterial.cocBuffer=this.renderTargetCoCBlurred.texture,this.bokehNearFillPass=new Sl(new H5(!0,!0)),this.bokehNearFillPass.fullscreenMaterial.cocBuffer=this.renderTargetCoCBlurred.texture,this.bokehFarBasePass=new Sl(new H5(!1,!1)),this.bokehFarBasePass.fullscreenMaterial.cocBuffer=this.renderTargetCoC.texture,this.bokehFarFillPass=new Sl(new H5(!0,!1)),this.bokehFarFillPass.fullscreenMaterial.cocBuffer=this.renderTargetCoC.texture,this.target=null,this.bokehScale=s}get cocTexture(){return this.renderTargetCoC.texture}get cocMaterial(){return this.cocPass.fullscreenMaterial}get circleOfConfusionMaterial(){return this.cocMaterial}getCircleOfConfusionMaterial(){return this.circleOfConfusionMaterial}getBlurPass(){return this.blurPass}get resolution(){return this.blurPass.getResolution()}getResolution(){return this.blurPass.getResolution()}get bokehScale(){return this.uniforms.get("scale").value}set bokehScale(e){let t=[this.bokehNearBasePass,this.bokehNearFillPass,this.bokehFarBasePass,this.bokehFarFillPass];for(let r of t)r.fullscreenMaterial.setScale(e);this.maskPass.fullscreenMaterial.setStrength(e),this.uniforms.get("scale").value=e}getBokehScale(){return this.bokehScale}setBokehScale(e){this.bokehScale=e}getTarget(){return this.target}setTarget(e){this.target=e}calculateFocusDistance(e){let t=this.camera,r=t.position.distanceTo(e);return NO(-r,t.near,t.far)}setDepthTexture(e,t=Hd){this.circleOfConfusionMaterial.depthBuffer=e,this.circleOfConfusionMaterial.depthPacking=t}update(e,t,r){let i=this.renderTarget,n=this.renderTargetCoC,a=this.renderTargetCoCBlurred,o=this.renderTargetMasked;if(this.target!==null){let s=this.calculateFocusDistance(this.target);this.circleOfConfusionMaterial.focusDistance=s}this.cocPass.render(e,null,n),this.blurPass.render(e,n,a),this.maskPass.render(e,t,o),this.bokehFarBasePass.render(e,o,i),this.bokehFarFillPass.render(e,i,this.renderTargetFar),this.bokehNearBasePass.render(e,t,i),this.bokehNearFillPass.render(e,i,this.renderTargetNear)}setSize(e,t){let r=this.resolution;r.setBaseSize(e,t);let i=r.width,n=r.height,a=[this.cocPass,this.blurPass,this.maskPass,this.bokehNearBasePass,this.bokehNearFillPass,this.bokehFarBasePass,this.bokehFarFillPass];a.push(this.renderTargetCoC,this.renderTargetMasked),a.forEach(o=>o.setSize(e,t)),a=[this.renderTarget,this.renderTargetNear,this.renderTargetFar,this.renderTargetCoCBlurred],a.forEach(o=>o.setSize(i,n)),[this.bokehNearBasePass,this.bokehNearFillPass,this.bokehFarBasePass,this.bokehFarFillPass].forEach(o=>o.fullscreenMaterial.setSize(i,n))}initialize(e,t,r){[this.cocPass,this.maskPass,this.bokehNearBasePass,this.bokehNearFillPass,this.bokehFarBasePass,this.bokehFarFillPass].forEach(i=>i.initialize(e,t,r)),this.blurPass.initialize(e,t,So),r!==void 0&&(this.renderTarget.texture.type=r,this.renderTargetNear.texture.type=r,this.renderTargetFar.texture.type=r,this.renderTargetMasked.texture.type=r,e.outputEncoding===pr&&(this.renderTarget.texture.encoding=pr,this.renderTargetNear.texture.encoding=pr,this.renderTargetFar.texture.encoding=pr,this.renderTargetMasked.texture.encoding=pr))}};new U;new Ke;var U8t="uniform vec3 hue;uniform float saturation;void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){vec3 color=vec3(dot(inputColor.rgb,hue.xyz),dot(inputColor.rgb,hue.zxy),dot(inputColor.rgb,hue.yzx));float average=(color.r+color.g+color.b)/3.0;vec3 diff=average-color;if(saturation>0.0){color+=diff*(1.0-1.0/(1.001-saturation));}else{color+=diff*-saturation;}outputColor=vec4(min(color,1.0),inputColor.a);}",G8t=class extends ph{constructor({blendFunction:e=Xr.NORMAL,hue:t=0,saturation:r=0}={}){super("HueSaturationEffect",U8t,{blendFunction:e,uniforms:new Map([["hue",new Xe(new U)],["saturation",new Xe(r)]])}),this.hue=t}get saturation(){return this.uniforms.get("saturation").value}set saturation(e){this.uniforms.get("saturation").value=e}getSaturation(){return this.saturation}setSaturation(e){this.saturation=e}get hue(){let e=this.uniforms.get("hue").value;return Math.acos((e.x*3-1)/2)}set hue(e){let t=Math.sin(e),r=Math.cos(e);this.uniforms.get("hue").value.set((2*r+1)/3,(-Math.sqrt(3)*t-r+1)/3,(Math.sqrt(3)*t-r+1)/3)}getHue(){return this.hue}setHue(e){this.hue=e}};new Vt;var j8t=`void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){vec3 noise=vec3(rand(uv*time));
#ifdef PREMULTIPLY
outputColor=vec4(min(inputColor.rgb*noise,vec3(1.0)),inputColor.a);
#else
outputColor=vec4(noise,inputColor.a);
#endif
}`,W8t=class extends ph{constructor({blendFunction:e=Xr.SCREEN,premultiply:t=!1}={}){super("NoiseEffect",j8t,{blendFunction:e}),this.premultiply=t}get premultiply(){return this.defines.has("PREMULTIPLY")}set premultiply(e){this.premultiply!==e&&(e?this.defines.set("PREMULTIPLY","1"):this.defines.delete("PREMULTIPLY"),this.setChanged())}isPremultiplied(){return this.premultiply}setPremultiplied(e){this.premultiply=e}},q8t="uniform bool active;uniform vec2 d;void mainUv(inout vec2 uv){if(active){uv=vec2(d.x*(floor(uv.x/d.x)+0.5),d.y*(floor(uv.y/d.y)+0.5));}}",Y8t=class extends ph{constructor(e=30){super("PixelationEffect",q8t,{uniforms:new Map([["active",new Xe(!1)],["d",new Xe(new me)]])}),this.resolution=new me,this.d=0,this.granularity=e}get granularity(){return this.d}set granularity(e){let t=Math.floor(e);t%2>0&&(t+=1),this.d=t,this.uniforms.get("active").value=t>0,this.setSize(this.resolution.width,this.resolution.height)}getGranularity(){return this.granularity}setGranularity(e){this.granularity=e}setSize(e,t){this.resolution.set(e,t),this.uniforms.get("d").value.setScalar(this.d).divide(this.resolution)}};new U;new U;var oie="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAAAQCAYAAACm53kpAAAAeElEQVRYR+2XSwqAMAxEJ168ePEqwRSKhIIiuHjJqiU0gWE+1CQdApcVAMUAuARaMGCX1MIL/Ow13++9lW2s3mW9MWvsnWc/2fvGygwPAN4E8QzAA4CXAB6AHjG4JTHYI1ey3pcx6FHnEfhLDOIBKAmUBK6/ANUDTlROXAHd9EC1AAAAAElFTkSuQmCC",sie="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAKAAAAIwCAYAAAABNmBHAAAgAElEQVR4Xuy9CbhlV1ktOvbpq09DkiIkUBI6kxASIH0DlAQiIK1wRfSJTx+i4JX7vKIigs8HXpXvqVcvrcC9agQ7IDTSSWgqCQQliDRBJKkkhDSkqVPNqVOnP+8b//rH3P+eZ+199tlznVTlvVrft7+1T7OaueZY42/m37QALKNk2wHg1pITlB17mC+Pp11W3X/LHyT32vhg48/5SOv+PnwpsHA70JoGlueB1iKApeqzvOzn44GatTB76Xzhd7suBR7+WWADgDEAwwCG/L54b/poDLrHuvvm70Z2Avhsc+PVcxscBU8F8C8ADg5+ipIjD/PlGwfgju8B924E5seARUfLsiNmqQW0IjL8+7L2NYD/7COBzfcCm+aB8SVgdAkYIRCXKyDax4EdAanL5PuNPllNvXDlAHwFgP8AcC2AhRIoDXbsYb48dl5WkVFTE3LGDcC9m4CZCWBuFFgeAZaGAYJQQCRqDHT+McJrVb8zwATUXH02MHYfMHEIGFsAxgjApQqACYQORjtd/B7Axt/z79sC0+cMPgjjlwPwVwHcA+DfAHzTxcVgWBroqMN8+cYBeM71wH0TwKExYHYUWCIAHYRLTlkCYgcIBcAgU/n3qy8GRu4HRgnAOWBkERhddPAJhGJDBxkvw7cqimr+zFM/ZLnZF64cgL8BYD+AWwB8x/dlWuWagHiYL984AJ/0RWBy1AE4AizyM1yxYAcTigW55xMbAkxEiwEdkJ/ZCQxPAiOHgBECcKEC4TBZcKkSv+mTieNcNPNC26mLNsj45QD8LQDTAO4GcJt/7iw2bfoG4WG+vAGwm9ExiEg69zpg/wgwPQLMjgALzn4E4aIzoJjQ9g4024uygkj+pyuAoX0VAIfngOH5NgCHMhAm8Sv2y3XDZeBhNIp8OzJE8OsBzAKYBHAXgDt8/4O+MVT0j4f58o0D8Pxrgf3DwMwIMEPQEYRkNwfgsuuDZLskip0No0gWMD/9HGDoADAkAC4Aw/wsAgZAgs2Z0ABI0GU6IVmKv+f28KDnHxkA/G0A8y6G73N9kOCjXnh/Ebb6OvgwX75xAF5wLTA1VIHPADgMLDj4yIA5AAm6aCUnv4oz46eeDwxNAUMzwJAz4BABSNDFTwSfg7DDKHE23MG5PqIY8A1u/dINs9dBdy8AgnGPM2NfUBrsnw7z5RsH4IXXAAcJviFgluAbygBINnSLWOAjGxJ4pgOKDV0v/OSLKp8iGXBovhLBBOCQM2ACoTOhnYrAdItYbCij5JFzRyIAqRccAnDAQUjg6UNQ7hsMXP0cRQAexss3DsCLCECCLwCQzMcPwUi2MwAScAKbfnY/YRLFQ8DHX+IAJAMSfDkAF13kLvleIjhjQQHxUVS3jjgGpKeeNzYVQEjgUS8k+PghONdhIwAP4+XXBYCHKIJbwJyDTgaIAdCBJx3Q2M8tYAHP9m4df/ylQOsQ0JqtRLCx30K1wtLBggScQOgsKBGcWHAJeOwRC0BSM1mQIKRbhh+Bj98JQP6t4U0APEyXXxcAEnxkQAFwoVUxID9kvQg+c1C7vidRbIDkc24B//hTQGumDcCWA5DgMxASdNIFBUI5pCML8v8API5zfEQx4BudgqiczviSnJhQwCP4BMCGl+wO8+U7AJi/W4O4YS6+pmK/2ciADsAOBhTIIiAJnPB7AvNjP+0AnANaYkAHX2JBAc+tYaJXOqBZv24Vc386XW5dtkHGW+4HFAJonpOe+YYQZAShgKjv3PNvPQaxVoI8zJdfFwASfPzMUwS3Kt1v0UFIlos6oDFdAGFcliMAP/ryAEAGNwQRnDOgLbdlIEwrIs6AZ/QgkMMHQF6ZAKQcJAsSYPwIeAIk9wJgoPK1gi7+PwF4GC/fOAAvIQPSs0URTPBJ/Pp3GSEGRHfBCIQ0xowBtUbcAj7ys5X4Jfu1HIAGQrIgQRXEsAFQIORDFhiDY/rMHmrU4QUgR08AkgUjCAW6CD6CkwBsAIQC4GG6fPMA3OXiNzCg2I9gNCMksmAAoemDzoimFwL48M85AKkiuQVMAAp8CYRRDAt8GQiJ67N6GJODAXAHlsGguscA2AJg1IPGYmxOpBxFWkRN9LsATgIwXnNs/v/5z/9XCf8BO3YAtxbc/46/KDt+5+ea1Yku2VUxHz/z0v24FwMGK1gWsK2OUUxHHdCBeRUB6OxHABr4ZICIBd0QWSF+XRdMTAjgCdTrG9cBNwE4F8CpDkICyYLGsuhFt6zs+gISwUen8zEAjgMw4cfx2H6O/90yAFo84Cbg4ID3/9TfLTt+5+ebnRABkODjx0SwPi5ec/FrYpmqSAxM8Dn60CsqAFI6GfhqAMiDE/gokmvEr0C4PgDkBQm40wE8zMFEUDKEVoxIMLl/KS73mE7H9d+vcKHQQcjwW0Yu9nP8m8sAmOIBuWY6wP2/4s0ezjjg8TuvaR6ABJ70vxUApGrm7EbGE+i472BAB+WHfqHS/eoAaEwY2E9+wLSXTqhI7CXgnB6LCoOJ4BiST+hTnG0HcCwAglCx3ARoZEVFXnBPp/O/A/hXACc7CPs9/i1lAOyIB+RDX+P9/+pbQjjjAMfv/PL6AFDs1wFAgs/9fgKfgdE/ZEpuiQlbwAde6QAMBgiRmsSwA9BY0JfjovGRDBMH4TlcXGhcBOc6HkF0gjPhZgchxTLZMAci/04W/B6Ab3t09EPXcPyflgFwRTwgJ2MN9/8bf5qFM67x+B/aW4XQz42FeL0YrRyikztUFw0704mf9kXgxhOAqc3AAsPyRxxQCs/PdXOFY0W1KHy3QIUGtx+6vdnx1vsB+dsTncm2AogglFgVEAlUWrOMB2RyEmMCGQ/Y7/HvKns6tfGAnJQ+r/9b76oJZ1zD8WdyQjYBh8aBhVEHjELouQ8ukQ7VRSCJAALwkr+sALhnGzDD3JAJYJHg9uhoi4bx8ytkWUtvHT/7+Zc4dw1uZ3612fH2dkQf7yxIEEockwkJQn4IQoq8unhAhmPRKKFx0uv4K8ueTs94wD7u//VX9ghn7OP4c+4G7h8HpseB+dF2AKlFLwuAIZ8jD6NPrOhAffmfA9/ZBuzZCkyRWSeqBCWyoYGQ5yQrBpDbum/ME1HoPo0XEkSD2zlfbna8q6+EUJcTCxKEtHL5EQjP6BEPyIgYAZBvYt3xHyx7OqvGA65y/7/9wVXCGVc5/sl7qxD66dEqiYgRzAqhN1A4CBNAAlDyAFI+iZ9/N3DLJuC+jcDUBmCWyUnOrmTYCMIOkNclLg0B8/RsNLg9+UvNjnd1APLmmQpFHyEBROuWACQT8nN+H/GAvY7/VNnT6SsesMf13/CpahGnZzhjj+PPmwX2MYdDIfQexWyBAwEUOQDrRDN/98p3A7dvAO6fAA5sqHJDBEAyoUVGkwEd6HR12XU4kwzfl6fCXTZzjy57vvnR513X7Hj7AyDvggAUi9EyFgiZqNxPQF6345nOWbD1HQ/Y5fpvuLa/2+82/vNHgAPDFQDnhoF5j2C2qBWCI8bw1eRw5CL5l94L3DEOTI4DB8Y9OWmsEu/zBJ3rgsaybqBob/7A4C7jtWcooRrczr+u2fH2D0AOQgAUCxKEP7aGgLy64+m6KdjWFA9Yc/03/Osa4glrjr+AupqHz1sEs0cxG0BC9HIePLoit9eNkVf9L+DuUWByDJgaq4ybGYLPAWgiXmLedUE7dwC7saL7CqfPKXi4NYdaykCD410bAHlDEsNiwZ9wAPYbkJcfz6T2gm3N8YDZ9d/wHxUA+739fPwXPrSKYGb+BuP3jAFDElFH9HIWwbzCIGkBr/or4J4RYO8oMOW6ZVcAuvi1Cgoha04BCwT5gfMKHm7NoRde2+x41w5A3hQZkADk5+cGiAeMx3+/7AENFA8Yrv/G71cAXFM4Yzj+otOAaQLQA0gZxaIIZtMDFTigKJV8H9Iq6aZ59ZXAvSPAvpEKgBTtBODcSCWCZeRYtpzrmLyeGNCAyFl1v+Hei8qeb370Rdc2O97BAMi7EgB/2QG41nhAHU9LuWAbOB7Qr//GPRUA13r7Gv9FZwIMoVcEswEwfDoimEP0shKKtIphaZQAXv1+YM+wA3DEdcvRKkGJADQQEsQuhi1Tjt95vBsh5nx2IO59SsHDrTmUOStNjndwAAqEry0IyCMICkOyiuIBNwBvPFQQT7gBuPjc9oRYAIHyOEL4vIFEYVNaOou5vCGE/tV/A0wOVcnpzI47NOri3QFIBpSeaSDUdYLOSWvYImSGgftpJDa4MWJbAGxivGUA5MAOc0Be6eVLj7/4Mk+hzCOYPYpZDBiNkLh+G/M3yFyv/ltgL3W3YQfgcFUhgRY2PwY+Z7/EhAR1SFyXCOb57r28QfQBsJQBMn5D4y0HYLPje9Cd7RIC0PM3EiMofF4gVCBp1P840ix/gyz56r+vAMjk9Gl375iB4+CzveuZdLkkEPJ8ZEfX/6R73vOjzT5Si9hucLxHAVg4PwJgRwh9CKOXK8YA4ZEqKZXSQWh5P+5AftXfA/uGKvYjCKn72cctbFrZNECka5L5CPwIPtMH3TVz17MLB5gdLgA2Nd6jACycHwLQxFEUSR5ASvARDB0h9AQb9bXIgCGk6lUfAPYTgEPAITKgg1BObk58srTJgG58WMkWMaAbQQT1nc8rHGANAJsc71EAFs4PAagQestgC1lsBJ4BMCSOK6dDUcwqqaFiQr/0QeAAAdjy+jBiQQeeMSBZT3nCPUDIa9z+/MIB1gCwyfEeBWDh/BCAeQSzgkjFfGLBBD5nxQ4DxN0wv3hVxX5TBGDwL5obxvVA5YqYL5BeMLd66YYxJpRB0gK+96LCAdYAsMnxHgVg4fwIgMrhUPKQ2C+Bz0PmBTqBMQehAbDlIjj4F80KJguSVZ0FuXpjoCOgXawLjALhbT9eOMAuAGxqvEcBWDg/l1IE05Ed0ygZnyHdz0VwCqEPIfNyx0QQvvLDFQCp+8nfZk5und8tXwIgWcHSNX0N2CJmnAl3v6RwgNnhl17T7HiPArBwfghAS7mV/hey2JS9FvM3BLpUUi1YwDRMXvkRYJoAlAh2l0dcZ04s6JUTDIjyBcrl4yDc/dLCAdYAsMnxHgVg4fxwKVwJgGEJNmWtxpQMpX9on2eRhVA+O56AjMfnP+e3Xvf3NwG4xIPTleiY55bpGh6UbafNU0l0z0p+5Jh5HqYJ6b51nP6XP8cx12XNHQVgIQB/bFPVg2OC7Q+WgVFWng/FvtWLI06uWh5oguKEcXVS/9sEAF//VGD7t4ETDgJbF4CNi8CGZWBs2fPL/H6Vwp2KEtVk4fJ+v/EIYPN9wKa5qu+IncfPwXHVZe/aOL3EbwS7xv8A1rQvnO0j8PArTgTGZ4BxFv9mIxhOCGsv+0OPYDRghcLfkWkEuq0+G00x4OtfDGz+d2DbHmDLjL8si8AYP/7CGIAiEEMTG92zXqSbH+d9R2aA0XnvO+JjthiIrOVDHHPOkBrzUQAWAPsZp3oPDpa/Xag6EVkLBK+5rAnJC3/nYk/APD704WiEAV8OTHwX2LQH2DgFbJgFNrBhjd8r79deGoEwsllgNBOzy8CdjweG9wBj08AIAci2D6HafmyAk4/Z7SJ72hGYRwFYAMDLTwOGp4FRFgD3HhzqRGQiyeurqOdG6r0Rm8IEZjzRlkiqCWoEgK8Axm4BJu4HJhyAbFhDxmbDGnZO4j0SgLGDkpibgEq66TJw/1nA0F5gdLpq+zDqFfd5LMeWqu5HNST0uJOIllg+qgMWgI+HPv0xwLA3gWHpW2sC441gCECbmKziaGrnUdMO4aHeh6MxAP4SMHI7ML4HGD8AjHvHJGNAgpDgY/ck3stipRemvVhc+uASMPUEYGh/9dIRgGx8Y+MNbR/00uVtH0wEx94j/v0oAxaA8Ed+GBieAYZZg5kADC0QWGOFzGJlcGPzl1BxNLXD8sk4xftwNAbA/wwM3wGMUmxOOQBnHXzetIYvibonmSiuYTNjriVg7glAiwBk0fNZH6+PmX9P6kfNmCXGpftJ7TgKwBIAnln14BAAYxMYm5C6RjCyCoOyr0qkD/c+HI0B8DXA8N3AyCQwesD1VQKH7EcASm1Q+y4CkN9pUKiVF5nLvy+fBbTUd8QBaH1HvNBROiZvfsNnrF4kcvPwpdsBLBeU18Nf7AB23Dp4ecHC8oBgUlJJecLS+7+WOpE3gbE+HKw+yoevCYkMGKqPJrdEKARutaFYRs1fiEZ0wP8CDN8LDO8FRqYq3W10pgKgfYLaYCzootgA6KXaTA90y374TKB1sBozy77xHFZ536utRgAmEaw6g5kUSFZwSXnA330qsOlfgHMPDlZesLA8IOjoLypPWHj/11EnCiVwkz7kAExtsGraYUWdSDX5TmsagL8KDBGA7Bd30JsW0oWivnEOQNP7yGTSBR101AlZSUtGyfgZDkCWY1HnJdcBVe6325hTvelg2CQjZNDygG/2An0j1wKnL6y9vGBheUC8prQ8YeH9X39OVQSc7Mc6fCaKvAeHdCIVf4yMYCynTpX+nb97NJmlSQb8r8DQHm9YOFUZTKOzoXGhs6AxF0HIexcLBvWBuiHN8s2ne98R3qc6L4Vyb2oBVjfm9MIFHbjDCh6kPOBbQoG+oW8CO5bWVl6wsDwgfr20PGHh/X/1iaEIuDcCTIW/1Q4rFv8OnYiW3c+W2iKwUjKbyjQNwL1uuR6sAEgDgq1brXOmV81PxhNB6DUDBSYzQJwFtz623XcktX1Q1VWKaTF/zZhVazBVYA1tX5MazsGvobwe/jQr0Ne6BTh5uf/ygoXlAfG60vKEhff/rSe1i4DnTWDUACY1guFTDqLYdCBvf6DJYSMYATBfOx1kLfj1v1axH10nQ3Sd0GUkBnTfpemtBJgseIKQAHLQcVxa2TnuMW0Aqui5es8xBIegVdVVE8VhzHnLh65WMB9An+X18K6aAn2tO4ETl6vqbKuVFywsDwhevqg8YeH93/Rk70JE90nowxZbIJjvS3WYNSGUwGHJTpPxwwcbBuBrgRYBeKACn7VtpdUu/c0NJxO9BIxcKu4TTODzbkonPLoaL0vyUQRb2y8HsL1ckfWzMeuFi40Qezqi+yiPhyt7FOjr6/gCFwgP7Xb5vssTFt7/nQRg6MGRWmDRoeyTlpgw68GRTwgZgo1gGmXAX6/8dtaylSKY/koyID9BhzML3q1gAos2AcOrZYSoq/pJp1VtODRm9Z3LS/7WjVkvXOzEtOpKyGrlAT+4SoG+VY8vBGCvy/dVnrDw/vee65NBJiAjBIVcAJQjOm+DkCZEeiGAMw6sAwDZsJrAdhFM9rPGhd4904Co5oVuCZPV6kD40Ec6+9W8dBTBsfdc3nkpvnB82fp2RPcs79dHgb51LA9ofsDV6vut5/3PnxcAmLVBiDqgevDaJLkYrpuQxzcNwN8AWgIgRbB8loEBzXDwl4cGiDGft58SCOWGedgjvOJ+bPvgRkiuA+ZjzhnQQOiFNVbloa7l/fos0LdO5QENgEXlCfs8Qbf7HyMA3QVjYihYhLENgjX9y/qwxQmRU/asfd0ZcLU2CHVGyusJQLKfVi98CS12T5f7iECkHpsMkAhCF8+nshWH2I/jXsOYO144GV/9ApAIrS3vt4YCfetQHtAA2G+/4PW4/2PPbzMgmUMi2NoeSCRxIt2/FvuxWURIWCXg357gfTjEDNIHnTRXRCpH5ugKwGl3HpMBXQc0v6WLYVm/5limj04rG762K2uYY9jBkr9+rI03NL5ZbczS/dJ+LQyoga4o77fGAn0NlwdMAOy3vl/T938KAcj121z8Bn+Y9eWQJRz8Y6kNagDh2ey5EvxjxQD8TWdAuneCCO4An1vw5vdzQMmdktwq7pLZQR+dM34+ZumAxvY1Y04uqOAJ6FsExzeto7zfAAX6GiwPaLWR1lrfr8n7f/Rl3QGzmsis+/uO71V9OFgP2gpPhgr7TGRqRUT6dyvr4aIs/pm/2zVUNbBSv6G8e5pEv0Cvec7Po7+bTtjlBRlkvAMBkDeQyvsNWKCvofKACYBrre/X1P0/oWEAnnFD1YdjhtXxR73mX10FfCHHE9pVWcGAI/S0gKsfA2y+twrFZw6Hxf/F0Pk8Ri/kpGSnMuDx5T0iACgQHioo0NdAecBUHW6QdsV2/cL7v/Cyqr5gnc42CCOcfX1VIZ/V8We9IDmTzVXwPDJiXuKXPxtDBma8+lzP4WAgKkPxCUAPE4v5GzEuMX0PYJPLhB6FJsc7MAMmkVxaYC/K9gG+F1++8AQ7Gwbgk78I7GFpXgIwFiRXOwaJZPUbiR0yCUDRk+cHf+YpwMj9HgfI8ClGPyvsSiH0WSKRuYlitLb/zHM/JOSs5C/YIC9cMQDZr/dwxgOW9gtGYUBi0wA8l304vDQvAchilFbpIBQhZ7Ejq6ZQ0/Yhil8y4j89Axie9DAsD6FX9HOK3QtROTFkviN83kG4felIY8DCeLrSeMDSfsEovAECUFsTjHD+tcB+tkFgcXKvBRir7qtFl9owmO4Xy/1G3bAFfPrZHorFNWBFwHjQAFctIghj2kBarw06If/+MM9ZqTN6DgsDojCerjQesLRfMApvoGkAWh8Ob/tgAPSKWCp8ngNQtadjmTdltvNvn3peFYhgQQgh+iUmEaUAUoXM1yRLmWuFLaE9Z+XIAWBhPF1pPGBpv2AU3kDTALzwmqo6qtVh9kJErAudABia38TC5wJgS2xIhAwBn3yhByL4EhzXfRXxYsDTJ4IvrNN2JFMxZcBzVo4cABbG05XGA5b2C0bhDTQNQLZBYH1AVsQSAAU+imI1obHyblnjG/kJk3U8BHz8xVUQAhnQIl5CyNgKAGp5LKSSCoAySh5Jj79vTagcxUaIBeRNe79g9gq+DXig4wGzy+PONfT7RWFA4noAkGXZVAhcBckJQgNgrLiaNb3paIDo1vHHX+oA9LQBi4DxJcOUPJUnTgU2NJUyROs8irGARxQAC+PpCtsFd40H/AEf0gMQkLgeACT41PiGoLOKqyrJq3K/Ya9mNyr5FusN/uPLPIeDa8Bc+w3rtyl4VFHaMZc3i9RWBM9jjzgAFsbTFbYLRmm/YBTeQNMAtD4cBKDXBTQGdAB2MGBo8SCLmEuS1AFVAJ3A/NhPt0PoCcA8bSDG76XI7aySg6JYuGfKwJHFgH0E5B3ueMCe/Y4L+xVHAOZ+9EHcEgQgwbeiEYx6jwTdz4qfu7EhEJqxGqruf/RnHIAEnxgwBM0aC8aUAYWNBRCmoIll4HTqO122QcZbrgMWxtMVtgvuOx6wa7/jwhtoGoDWh4MBJ16WN4lfr8AqI0TVV1O1fa9BbQzovkAy4Ed+NgCQUSxZCFWvCOaOFREXyUwZOPIA2GdA3uGOB6wPaOz+QPv5S+MA3OXiN9aclghW+d3IgupBF2pPqxcxGenDPxfSRh2ASiKKiVP2PaZScvAKoA0VDc6cOlIB2GdA3uGOB1zR77iwX/F6AFB9ONSOQW0frA50sILVcckWJyIDSgwPAVcJgFbYuZ3FJvAlEHbJ3IsgJLGedeBIA+AAAXmHOx6wo99xYb/i9QKg2iAIfDJEJHqj4SExbEty0gkdhB/6P9oZbBZIGiKYVb9GKaN50lRHBLOvhDxh/5EKwDUG5B3ueMB2QGM/grb7/6wHAPNGMAY+GSGUjC52VX2f2CD4+HO0gqkZfegXKgBaHkcWtS0AWii9xG1ImrLlN5XR8L8fmQD05BVrmEENmpYSP9QX+KHiqj2/82+HqqDWwnbBRfGATdzAegGwru2DpRq7Mzq2fpAf0Nq0Rl2wBXzglZ4yUAPAmDSVWDBPHQjLcgTqOZ6zUvdKHh4ruDCerox/Dnu7YqwXAC1NI/QcEQuK6WK/kdgCTGC0PYAP/KIDMBgglq+hIkrOfsaCviLSofcJgJ5AdM7kkSaCj/HqQKVIGvD4swF8bcBjmzjsaQ2H5D/6acBd9wALB4DFWWB5AVherMp4GKIYEOp7+26UF0aSfT/xYuDG7wDjrIpAERytXf2vajj7ueryQXSFl10K/ON3gIWDwCLvjfGB8Z54O+Ee4ve6513uB2R1yzsqC+twbC8HcNVhfAeaBuDP/TvwtS3A/ePAIfYFVlPq2HHTuyulZCTlhbjhETF5yxTQGgPGhoHhIWC4VSXGD3n0tLkMHXHxu+YyB+MlPwDuZs5K6FlsbCzdVO9DuKfkHM8AEkP7B8fOkwDcD+B7np42+JkGOvKdAL4E4K8P0zvQdET0b14D3DgB3D0B7B8HZka9WzrD88N6sFm+YcUjrn7E1ZDvMtF9DBgeAYaHgSGB0PNHCD4BLwLRsByAyX/ij0/dDUxuqlIG5hix7eFhvLcOVUAtyPSydAFmOQNe6EYGV/9ZESiKgIEgtbaD/gHALQC4ovY5r5KwtjOU/XfTAHzzLuCmIeDuMWDvKHBwpMoN0WQzNtAaYSs0K4ZlOSAjGG9kPjCBRwZ0ABKEBJexYAZEAU3A7Oi1BeDym4EDnjQ1TwCGWMW8MXcKks0YOyZNlQOQjcgYIUHllEzYQ0ktm+r6oz8G4F4AXwXwRd8/kO9A0wB8y65KmPxgGJgcqYJTKYpTv2CCzyddQJRDOjKivn+Deh8BF8BnwBtaCUA+YYEyAU8h+c6Az9gNHHRmrgOgmDA3jHQ+iWupCeUAvNSrA9HNwqx+muk9nJVNg/CTfrmbAPwbgK8D+PcHkIibjob5o13A3XypWsAkG1cPA9PDFQDZM1id0i1KxsWfOrKnAFXlifCFFMMRcASigOcs2MGAIfE9iWXplS6On7UbmPaUUTXQrgsVMzcRj5Folg2V5ayUA5BWYKwOxKUafnosWjcJwk+7W5F2EKvlE3xcXaNYfiCYsGkA/smuqug6hcleAnAImPbO6YwRpMgjCAVAm/yQmKTv5hNsAf/i7SyNBSl2a8Qv/4/M1yF+BZSYlNQCnnVrpbC+mToAACAASURBVJcaI7sOSEY2NpaDXLqpR+vE/OVksDgImgGgghHoYJbTWc7oJtFWc65/cg2AYvh2ALsB3AzgVv95nS/f4QdsIkT9T3cBrGtITWZfC5hqtQHInsEGQn3UDDvEDEY/ICf7SxMOrAg8T+c00JGkvHGd2DABUYZIAONzCUDppCFhSukCBsLQrFtZe/IixYQpSyEoJoqnuPWrVRAubQh83HNlZB23z7j1ywmj6CIIqUPxw2Xeu9bx2jx10wz4Z7sqTYZaDD8EIDuoE3hMVEphWg66JIp90k0sBxBcy+iPIIaT1RtEsHS/yIAqw+VSNPWQfe5tlVEk8auXgVa5BUsEJuT5uoliAbE5AGotmIAjCPnR9xDG3TQernYAUupTdBGEFMf83OkApHG+XlvTAPwfuyrgSZOhas3u6cwTsUBVn2gTwyFMi8wjHZAA1M9fYGHDULJD1m8Cpa8fRxDad+l+Ykf/3XNvd11U+qiL39SxXevSsshdDFvgbI1O2AwAtRZMZzTBRuDFjxe1Xg8QEIB8yyj5yYIUxfQIkfkIRnmHCM712JoG4FsdgHHp3ACoMH2G6jM4lWzoQarSvwQ6MSB/vporVaFkh+mCLlpVR8Z+dqDZLoDOpHSiQeAFDkBjPrlgCHgCUaFifg67H/9uYjn4Ai1vpTERTAASBaoQJBAKeNqHlL6mwPDZYAOROag/EYRkPX34MwHIvzW9rQcA+TLpI22G7EcQKlJGsYIJhC6ClUMiXfBTbFUQAej6nPS/OuAl9pOOqIc2BLzg++3VmWgIEUz82cRuCAtLIHQQm0gO52uOAb22sC3JEWgRfPpZf2sQBQIgLydPEIFGwPEj8MlF2bSbsulghLftqsCXq9HGgHysznrGgi5qzTUTFH8FLhAUn3hIJwCN0HLncw37qaF2zoYvuKNivmQIuUNc7GvWt6sHNs26twA6vhyq8NEMAHlyntFrDCcQehyaPTl+FwAbXDcmAKMRThakEk8Q8kPg8SPL0qzLBl+A9QCgR6uZGs3vfHz8TtBZvkgGQrEPBVAUg2Sij50QAOjiVKI3saADJRm7dSLYWfSFDkCem/dhZeMy9pPY5QvSDYQyUJoDIK8qMezh3wY6fSL49PcGgCAA8pScJLIgAUYQEmz8RPA17StvGoBv39W24eREiBoNQSgWNI1HBkdgxJSw1AI+dFIbgOYmkjimQ1r6XXC3rAbCHycAgytohf8vsB/r2KRaRq7zpZ+D37HMX0s3DDcCUGLYaw53MJ4YUODzusqlGCQAOQCejuxA8UULUkxIwAmMAp8Wa3qkN/R9W+sBwOhIEPjk5SLr8HeKFbTQfb77csPIMHGl/4MPbReslPhNe4+MiTpi9AFGV4nI7MfvagNQLh/pfrYnDAS8aJQ42A2w4em2cAyWQUuJVQTGWLs1uL7DG9J1RjhA+jvYk4t3KXeMqijpzrud4At9z3XtP16yGfjKZmCGooYh1tZzvv8xXPFl4PoJYC97k9FlwZWD+Azi/deMZWeP13eQCGEyoERudChIjbb3mJYwH7V0QIKuCwj/gfMj0asn2I0FXRSHXfL/iRkNgLyeVj8ccMY//J1fyxzTAXT2+xoQViKYD/1hDqLxPiYxTgSvQrphphG97tz4Slqafnj7uk1kIQDZrvWTw8B3jwEW+RLxPgSiCERdPwPR7+wCPg/gulFgfruDkOMQkFc5x84e708JAMmCuRNBXi4TIg5CGRzGiBGE/D4E/C2r2vcAYJoify62i0aJSMhB+2IHoNwu0fkcjQ85pu3ack5nIBREqneYFyWLkAXIJHESe00Cyx5QyeL6F/tyEcDcrOW2n7fX8df0mME+/vQ/PQjhoy3gzo3AISYf80MQaQx1peH9wb7v2mrtmCBkIMMejp3jIJD1MsaxaMZ8v5N/67INAsB3BAYU4JL4DSo1J15AFPAEwuQHZJzkKfUAtOHLJSOQRWndBYQvCQA01cfnNopfsaCJaD2baBn79QjSTiOEP1EcawIpkq2kegBTNgHWEpOKF8Uwq2NRFPM4AqCf46/rA2U9/uVDvurB01zvAJpiiwOl3fEeciCGF+Ij11f+QkbSfMPfIzqw57mEFZ9Dl3Ps5HXWAYByHJAJKV7N+s0cCQQhwSlfm4lGZ0KB8C/rABgZUS6ZHITBSEhCowUYAAksF7cStWREyxRwtuPpOlgw+5s9sq6OaIJIIlUgEhA1edoTgHxa9HVw5jibZNF+j/9yGQA/7pbujZ4bwv2+cWB6tFo0NzYnkxFA+cvEAo43VBoEo2e+48EMXEOmD9F6xhCE8RwZEJ80VblKvDlmzwicfqy93/o+8K8TwB2jVSgW138FrJQTXBNlnJgmrjZwanow9CBP/rL9wF0jwAGWDtFyoN9PHutnIHT05mPXz93dMGQAPniJsjiBXiTbxDZFMF9NLUPQxKR5qezz1Y6/YZDH0D6GkdAkYJIvRalAdHAMmPZoYhb6NhDWvEyf/ma737CXN7R1ZC7hUbPgcFgqt/ZZjADnM1xqEVhYBpb4CUk5UsL7jQvj///5buDrLeCOEeD+YQchYwG9VIfyg1NaZszFiCH6DkRGLze5/dgk8IMWcMCjdCiCzR8od1B8OTwvJM8JEShFut1fzMhi+eRJr6LI7hYP2M/xVLwKNoZjUTwRMAQQmYyhWGQxsSADOflZ4kukj7PhZ75bETjBpkAGahMkcrGgwhsXeCyBHBj1wmOBQwvAwqKzoFeRV8ZaerjKYAuirmPY/o9X7q5Cyr7fAvYMAftCPGAEoYlBiVtFwLjtp2U4irj7yOANbi+crHyrfCbTquJV44O0F1FrwQGIMZFqdQDyP/gGSZ8TC0ZRRsOlVzzgasd/u+zpMByLehAfCgMQCDyGZJHFCCgLZ2f8mgI5qauEcVx9e5vACTgCTwEMWr5TdIpWKJb5MvrnoocDswvAPAG4VLGg6UKeqmi4iuDz4er30oX0FP7u5moMvIf7W8B+jwlUNAzFnlZCIhvGFRCeWzrgXSSIBreXTFZSgVLHAp4UHOFuociEEsn2PJwl/XEk0dzfSojeerFg1IOo5BKAveIBex1P67lgUzgWQaJwLAKRH04i14ItgDKEtGsRnWx49b2Vkk9wUefTGrKCF7R0JxZMqxN8cmPAxWcAcxGABKEAKPA5u9lEaAbCmKMI+sDN1X3z+ro24wEZFc0VEE64ABgT180PF9ZdBcDb6JpqcPtPk+1ACbmKjJnllwyuILunEAWjZHkBsrsRUnfD0qEiC5IJfyisgMhzWhcP2O14Ro4WbASgAMQJ48SJwchmBCDFa8qpyBbSP7OvU4PQ0p2W7+LSnSJUFOrI4V7w5IoBTQQTfJ6oTSYk2mQcpGRyH2syGjIF6EM3V/fM++C1CfwUExhCsmzCaQT43lZC3e1hBpEHh36XEqrB7Scmq5dV0XZxmV8WuDFzAF9iwhow9seAGoBcGtKjqAc+1l9rLb/1igesO55ysmCrC8ei6IxRMAKTWNBi6Xw98xNTFUi0jEcmpYgRAPhddpVi9OIEPP5cYD4CcLkCooHPwaW9kV+iwWrQHT8uA1fd3F7DFvgUHUP2k8jTiogAqLoxFpDgbMj9jXSuN7i9dLIdaxzBp5XVBMIMgFEnFAPKT9qPd6A9BIGI7MfPmf4U+40HzI8nWgq2PBxL4FEkjKJixGRRFyQQPzzd1iAUzCAQas1YOmAEoFjwkecDC/PAwhKw6CxIkCXwOdVJLxTobMjBdyIgfvimNvNJ7Evf4jWtdnRYD1YNGVuG93VWuWs4Jf+mlZCCZxwP/cnJ6mXVKk2+tK8lQQVHRTGc64SDAZB3Ey3JcxyACkToJx4wHl+YwqloGDICmYmTFgMQFBET8yyYzyAG/AfWX8mCGQg0BTRoHwt9KVaPE/HQ890AIfgWK+CRAaMRYnVdxHbhdY8Wslw1V93UDsmPIj9GxgiAioRRMIJNvoti+SW/Ikd0gwAU8+XxJcbGITJPDvI6XdCFREFSknTB83xka40H1PGF9dnycCxFwygkK0bASJQSVAbAYeD98xUAe5U3jKIwBosSgNsuABYogl3/IwgFPrOIg1Xc4ZrpAsSrvruykl2ucykapkMMh4CExD5DwJfWAYAxwk4MKPAJgOIjGSEGwuCakRhemw6Yv0UUwRf7L00L9pnsNx6Qx4feY4O8pDEcixOjsoTKKpMYjSFYYjOC8Eq3Wnnr0YYS+0Tmi2HysrPGLqwASNYzBnT2Mz2QD91laxLB0gs12GAh81cf/o/OcHyJ+qj0S/zxnhUZbSyYWaL8+Rq2S29wowiWkJPan4MvgrDDGAlRe7KIywDIgR3meEDWg9HbJgApNTkXo8o0i7oVgxnEgFr8F7jEdnU5GvqfJQKQKyEOPlsNIQvyvupAGHS/Okv4qv9oh+PHxMLk8ggBCRxvAmEN+AiEzz2iQfQBeNmkh4K52hJBKOaNe/FSLobLRXCz43rQnu2yi9oMSMDxs2jo8303ERz1wsCGZECF4kd3DwEYYwJjhoNlQrgIjlYodbBPrwMAZfEmyzcIv27gs6XDzC/IR1DOgA9a6DRz4wZAsZ+LYXvQYsHoD4ziOFklna6YD3+nnU6dZ7bGDAcBUImIAmEUw/zbJ1i/scGNDJiLXmle3RhQ+l/aq57gUQCWzwwBKPeLsZ/LFrGg/ShRXAe64Ajkv30kALAjF8R11Dy3K7KRwJcsUTaqWScARou3w/INVnCH+A36n8RvM3nB5XP4oD6DATBYwGb5ajlOLOh6X8JaBKRG77+7ygGYp1bn+V25/01AzBnwQ1ypanD7KWfA1QDYC3zJIj7KgOUzc9nFbetX/r+O5biwNhyX5uSEDr5o0xsJwLp8/m4A7GaJUv/j3/5+HQFYJ3oFPPkho/hNeqBcMkcB2BAA6XrxmMBkfFAci/m0JpwzXw0TXvXtzrz+PKc/Ml/ugzM9MDqCAbz/keVjjGcQA/YLvjoguo1mRslRI6RwfsiA5nqhL5D6nscF8gfTdfxpS+/hLzvWfzMQCoB1Fq/8b3VWaPIDZqsRV64DALsZHVHs1gEvsqFAeBSApQC8pHK90Oql4UEAyvCwNeGcBXNLOPMLftgZsI75ouUr9ousp2TEyIJ/sU4AzC1e+WIFshyAHPZREVwItrrD3wGAhibTYBhxVpe/xePyrNBuWaoNp3DgFwC81O+RAepK/a5Lfe51jxr7JwA83nPXYgq1asl0yX5N48+f4VEGLATlK1vAo5YB1gBSRmsM+NFE57lcfPD5pPFWCJImtyvGgGfOAacBYO59zFglgHgPefZsXV6/gPXBYeC0RVgyJNOGYuJjPka9eHWgjL9bWzhWk0/n/wPn+k8bgFNmgYcsVflZnBRmIShtJM/m7JGibGBoOIIez9wKPP4AcNpylfbNlGfdI+9NjBjz8JVzppckZuJ+dBw4aQ44drk6j1LIY9JkPD7P4s2lwVEGLHwJnncscNIh4Nh5YMsSsHm5ndOu1BGFThJ8/K6JrZtoslST2+XHA6ftB05ZAE5crgAups5TfaL6EF+UyIif3gAcOwtsXep82eIYY9JkXpMgMp/AeZQBC2b8OduBYw8C2+aALQvARgJwGZhY7swEzbNa88IRvAVO1qkF91J36DNOBE7eD2yfB45fqphLnevzdGeBKBfL8UX5/CZgyyyweRHYsFwxYHzRNK6oetSBMDLjUQAWTPqPngpsnQK2zgKbCMAlYMMSME4ALrcnR6JYQIwsoUnjpDRstOLy7cBJB4CHUGwuAtuW2nUDVH1EFUhycSwWjGD64mZg0xywcaECoI0z5P3X5P6nWlHdgHgUgAUAfOYOYMtBYNMssHEe2LgITBCADkIzSJZXpCOnIg25uPrhgnupO/TyhwLHHwSOmwW2LVSik2pCrDsQskzNIBGIpBdGI+VfNgMb5oENCxX4yPRjPj4xaJ0+WGeEHRXBDUz2Mx4FbDoIbJypADixUAFwzAFI8KUJChMV2SUaAGc1cE/xFJef3FYRti64nkqWDrqqEhbrsm5zvZCdPCd8nHzJOLZuABRz9hTHZwPL7LnLnoNMIY2VyaKcjtZLHOAbNgNPngKe4BacfGF1pnydD+hphQ/8XV5UiEueLGnDN1tWXj/3/4cTwAUzwGPcRcFJiDpPt3FLmf5vjwE2HAQ2zPrEzDv7OQg5OSM+ScYQy5Xbo8465u/ZfLTJ7fKHAdumKxVh8wKwealSE6inEoSy2MWCdbUHIghv3AqMzwHji9VLZuDzD8cXxxWZs5c7apmW0fMBnIHKn5X7d6I5npvRz94O7LgXuGIReJSb+Xl1tzqflybwRwqf9i97BQRWomWJQ7oZVFtJoqDX/b/oGODsvcBTATB9gsfGqmzdjtVz+G+PAyamgYmZCoDjFE2anCVg1CeJwOMnTRB/DmUINVkkgia3y08BtkwDW+YqAFJFMD1VAAw6XG61R31O9/fdrcDYPDDmY0zjc1UjivBuAMx1QdMB+WAYXU8dhEU16dOSkppbcHFSrng8MHwnsGMPcN5ypURHp2xMIa7zDz2z8Gn/kVe0YomO0wEwBYKujL7v/zHA6C3AxfOVh58g5AsZxx4fZM7sf3h6BcDxWWeGBZ+cMEFiwGEHHRnDzun7ONHs/djkRgBunql0VDOSHIDU3cxSD4aEajhFXS4H4S1bgVGN0V8we7E0Fh9jVDG6Obr1LJMRwn+kOCaTEYT0dsfqZHXl/p7PrLi9wIY7gO0H2yAgCAWCWCowKrYE8nMLn/a7PQn9X7zIJPPkCcK+758y7x7guNsB6l98gZjLLYet3Ay5n0sv4R+fCYxPA2MOwLEAQLIDPyP8uBg2cRYmzFweAYilKkn+OC8/Fdh0CNhEA4nGA40kd6FES13WLO8v1qHKAfh9B+DoYjU2Ak/js/8NAIwg7OUb7LCC+WAfB4CpBJoIiTRNRmS1l13kqWh3Adv2A8cdqqp1MB+aIOSxWv6pq5D2kkIAvt8rF7BLJksN/jMqfa7v+7/Ak4B3A6ceqpasKMq5akAmlLWY37t8ZW97PDB2qALg2BxgAFwANEGcnI5JcrDZRPlkaXL4u1KJUAfAjbTQ59x6dSvdLPXAgGYshZWR6JIRaXB/NwFI8C1WwLMXzMeSwLfcXuKrA2G+wrLCDcN/IIg4ERRn0qvyySAQX6mG1XuA4fuAbTOVwktRRr2MLCoQyvEZ/UY/WwjAj3jtFJZkU79g1ghkgEBf98+0Umb/3A2M3lkBl/fOcdMok2EjkZyv8773LAfgHDDKjwNwxEUw9yailpwdxBAEYhBbAuGzG3aKkQEJwAkCkOCjlb7Y6SYyf2UwlAS+vKYnAXjfNmDEX7DEfA5CjUcsnzvbu1nDtUMmCDkRZEEyGdlAk6G6lQTSa6m0MP6HuY73AxNTlcJLZ6WOJYC5/CNxLpHMgdKIKNl69Qvu6/75AjHOiTU87gKOOViJb748BKCWrnK/maTA+58AjM0Ao7PA6Lx/xBAupoYDC9okBRAmPdBZ47lNA/DhwMRsxX7mPgl+SrmK5EaRNRslXFQ9CKB9DkADn79cZtkHFkysJ103eBbqlh97DpmTQTYgk9VNxu+xYbXKU3lhFoJPOgdFGY+lPkgQxokkgF9Xgj4AvfoFs84eX4Ke9x9fIC+tRfDxvvniif358sSir2LCj5wNjBKAc8CIi2AxxLCzIAGY9L7AhGIKgpATw4l8wToB0JjPrfTkp+SLQbHrOqm5jNyajS6VCMIpApDAWwQ4LrGgXqzIfnq5cv0vN0ZXHTInME5GBNLb1DGdOYQsI7AfGKFjlgqve8wJwG4T+fuFAFytXzCLb+VgWnH/fIGYfc46Hs7iHC8ZkPcdXx4VfVXJw8+cA4wIgM6AHSLKWZCTESfLfg7WsIyRF3ckiRQ+HACXkwHptyP4KHrpJvKVGnOhRF9eBF9wE0mUEogz2wC+WGI/vVxiQQIxAs9+rmHA6E1YFYB8DJwQMZl0OrLZ++i7sfT8zroYHLS9df4RACWKxSZvLXzG/fQLZqk2gqn2/vUCUQ9UZaM9wDaPeSPrC4A5C1KV+NITKwCS/SiCR/jRBDlLmP7nHynsxno1IPwJSyRpbiMADXzuPDYfZfBTEoAmcuVQdiaW0zwXwQsCYDYmMaDA1wG8TBSvaoR0G77EcGSET6hjOvVApfRPAUN0zjr45JzVcSqiTxD+VeGzXku/4Nr7JwDJOkxFIwt6j6+RqUrlkO4bXzp1gCAAv04AzgLDDsBhKugLFUvQUhTwCEKbnKCw14HwJ9cDgGQ9WegRgDI8XEcVEDvAl7lVlglAgi+I4CR+Zf1mLGgMmDFhBGFfDCicRJFERviSABjLS7FC0MFKMU+07wOPE0kGvaoQgGvtF9z1/iODkwn3VWoEXxres5ib9xx1wZufBAwLgAQexbAD0JiQwJOuJBA68/H3Zhk6+3CifqqwWNMKN8wjKgbk6gWJgC+FMaBb5vJVmsUbV2vCqo3cRWZcCIACoax53+ulkqNd7iqOcU1WcC9cxEm5kQBUdZ+sTnSL/jEtTWngi21jhJNJBivZBukXvOL+yYBkcOqxKjJ4AGgxzMrBVwdAMmHrZOAYF2l6y/mwV6xD17zmWo6MbRyeWtOHwxJ91IIhr6rqZS70DPPLXDVUrfBwzHKr1EUp6/h0T/6L/GcCqslt4IhoTcwdAqDSs7I60WQH6R329pHuFyuXDJmEjuOSbdB+wSvuP5bGUjmsA5XoUvcvBXKKAQnApUdXwah0b8jXR2YzJTsC0ZHB33FL+2yiX3h/1YeD1fFZGT81g/H6yqkVa9YEpqMhTADle8erHA6t7Mh6j4ZBXdBGjFyO4CSIm9wGBiBvgqxwIAJQlXIyEJLyI/i0SkAG/FbhaEr6BXfcv+5dLKhCg4z1C1HEBJ8+BODQGZXfk/quAZC6ketAZEQCTWAU8PIJt0fgwHzZvVWNaKqi7JLOmtDWFy42g1FxH/XfqGkII0C+a0tnDkfsGxQjn3VPsk7tXmuy+Xp0JhtoJosAaFcUAJUYKiYJxcqHqKAH9rPlG2cMrmCUbMX9guMLpGTcCMKDlZGhMK8IPnPIn1X5PA2AwegwEEYmDGBMjOI5whGQP3NPBT7VJlRNaKvF4t2IWHbDErtDlSk1p4lJ7/zd246tglGZryIfrFhQ7pU8WCAX0ZENG+57U14Z4YrCeLrSxXdev6TfLwrbxT7znMrfKQXfHLQCnyvmRIv0Q3430ezMmL98P393G3wqz6am1NYzzoGn+svqRmTAU2citctqAX/2EI8F9ACEmLHXLZGoFxtSl2xyK2bAYwrj6Xr12+1noL/jUTCD9vvFrn6u0v1/nvGkaoVBAQi0eummMAuXQHMWJAA7gCixG8U0gFfcXdlBKk4Z6zELgAJfZEKrxpC1xOIl/+Sk7jkcdYlSco90y9+gK6vJrRiADD0piad7RuFo3udNCgft94vCdrGXn+tujgV3QAcHLcFnroelivHkchEL8ue0uQ74S3eubAITS3IQhKkMRjBMokgWG3L//2z3VSnP4VDgQWxUEEUxAZFHL0eR3HDfm3IRbDHkBfF0zy4EIKNhSvr9goGEBdvTz/MIYQLQdVsTwRTFDj5jQmdArRDYJQNDSs961R3tPhx5NXoVgoxleHnarjohgLec3D2HI492yQNvIwvqO9fJm9zKGbAwnu6FhaP5pFuMg/b7tTbpBdvTz68cz/zI8azVj8iAHTqgmFHXDUB89R2dtaC7tUGw4kDOgFb0R2wYRDGZ8g9O8aU4XwPOczhiwGlMjqqLWiFYGu570wADFsbTvaxg8nkow7E8nM/atfKzln6/1mS4YHv6BQ4+Z0BbqHcd0NwwYbVD3+1yWhXJxPBrbq8AqE/XApSqAxiBV2MZ/54DMOZwKE00rnDUWcR5KiV/brjtSAMALIyn+/mCyeehjIYp6fdrvVELth8RAClyHXxmhPi6r1m8FM0ucgk8+y4RHC1kAK/5XgW+2hZYofafWcPq1B5AqDqEYsQ3nepR2gqhV2yiol1COkD0C+aOaoGx4aL7DQCwMJ7uVwomn4fm7VrX2u/XAlELth+5sHPtN+l/Ap6sX2dCsZ/phZkIJgv9l++1wbcq+2WFv2NXIjNKAPzuw7MUAV8DTuynFIEsQy83RgTAhiv+NgBABaQOGE/3mwWTLwAqHnaQfr9GnwUbARgDNBUlkpzQboyYCyYDYdILdf0l4NduW9kGoa4geNdazLElKoA3Prx7DofiETtC6XvE7hGEzJlpcis3Qgrj6d5UOJoYDcMglrX2+y0NPtl5UZUjkfx/Hqbecoe0OZzdF1gHQrln9Bhee4s3f3Zxm4MvAk9VSFdUIw0i+Q2PaBtISiBSSFgCYMjMW00MP7pwvvLDmwFgQTzdHxcOSGvBg/b7ZRZByWYAlOERluKM3Ra9CKWc0q73dTBhMFT4ZwIw9l5Lrpes+HjeBiGCUOKXeuBvPcKTiEIOR0f+RhDBMYi0Lhea4GTaa5NbOQAVDzhgPB1La5RssV3rIP1+7yy5OAADoAchEHBkFbKfGRpiweAPtMs5IFNokyOGk/7rAYC9OhBFwNXVY1at5tftCBHaWVS2AJdEcEinrDNC+Lumiyc1B8AB4+muLARAXTDCWvr93lR4/Z0Xt6ODFQkj8WtumEwHTKDLQejAfN3uds/dfjoQdatGLxb8jQBAYz6/boxiFgAVudzNIc2/s3xLk1szAORoB4yn+2DhaATAGJCtbpkCYq9+v4V+aBgAQ4i66XtaC85YkDog/zdZvzUgfN1N7a633Xqv6fe9msDIHfNaB6Ay2JRE1AHAEDIfI5nzZCLeN4Nbm9yaA+CA8XSsul6yqV0rJ2WQfr+splCyCYBR/HJyKX4phs0PKBZ0lqOYTpvniAiUAmAd+HKjo1cvDjHgr+3wPJQsVCymUZrPMuRsRBDG4AQCsunyJtFGHwAAIABJREFUcc0BUJlxQoH62q8ST8cggpKNAFRGwCD9fkuvbwAkyGgJE3C+Nz1P1q9/T3F1EZBxvZh50s6AEYC5yyUHXt5/Q8zI5/KrAmAIkkipkyGPYwXz1aRT8v5ZO6jJrRyAvKOvNXlLazsXs9bo/ztc29Pohgotp5J49Rcj/pzfIwGS//3OM4CNd1dpntQpFUmjEH4LYIgnyn/OLjL8FeDGhwJbNgFjI8DIEDA8BAy1PFK7FSKf43cNKrvHx+8C/vmxwMgmYHgEaA35J0StpvvzL/nP8RbLAfhyT207TChgDRiu/ZL9DsfWNABvYzbhCDBKoBAk/pEobGWTqp819hzQ1/0k0PoaMDEJbJjxVZFgDad0SaUO5LksWVj+XScDmw5UEUDJ6U4d0nVbC91S3ovfVHp5al64cgC+k7mZAP768KCA0WD3A/ieLz090CDceVmlAuhBljLgrfcAw6PAyDAwPFwBkCAbItM4a/FiNtERjBl76W9ffD2AbwJDdwFj+6syImRXrd5Y2FjIYcnzWPLEqnsfC0zsr6qBMQmfIDR/pyJ6xMhKyMrSDiKD2xja6TADTt0/AGAs1KcAUCFrOLF6tbtiRVFavT/wuMCa7MfVTlH098YBeBcwNAIMEYAUlS4uBULOmK3LCnwOPANlEIOSoF9+C4DvVoWXhvdWZVOYqWgi3vOXDUQhgieB0EElViMYJ08HxqeqnG8D4IIDkAzo51DKQQJvBKUmKACzbM4+5hUivwrgiwC4LzvjmgCh6nBcgiMTcv9Abo0D8E6g5eCjfpUA6AxoQIzgi8ALmWwC4z//DxcPPwBak8DQFDB8yJPpPZHeGCyC0KN5DFCByfh9/+OAsekKgEzCTwD047X0SCPM1IYQjCv2E/MJoGVwUUQoPboq0MdqkWVn7RtDDMahB4g+P6qhXFpjVtkDtRGA2nKjos7IyOyHFUbIrXe0FXsTuzIYfNb4O2M3ATGIYQOmPn6hG6gi3eUkQQAeAIYOAUOzALMVh2pAlESqGFBAXAYOMQVjxll03iO/yYKRAT0FQXkwZkjp1pz51LO2XAT3KtD3AIAwj4Wg05kfiuUHYlsXAJLVnP0INLM0OYFx78AzcRySeTsw2AJueI+Dj2Fne4EWKz5MA0MzDkCCkAByUWqsJzarEanzj2zXwjEGFHuGY+pYsMojzZL1G9EBexXou339IRBrC3lJGmNDuSHX+w7WC4Cm6wWxm8DngLTImgC8pBcGBuTXf/1fXnyTugnFwxTQOgi0CECyIFlsvvJfEnh0mhsYI/s5uxFYi1xZof7oOqSAawwYjRGBzYGXbtWXaCIrlvHUagX6SP/ruMVYCEbEqECXAMjfree2HgA0ESur1/0vtnNwGSsG0RsZME20/+/XWH6Mugk/yngPAGy5GDYALjiIHIgRUIrsZjM7Ax+BSx1S4pfffQVIep8dL7dMDsTGjJB+CvQxTHmdtrw4l0CovFruC2NOe975egDQsCXRK/eK634JhBK90q2C7I1i+Gt0jxF40k1cPJAB7UP2m3MGJAAFQrGei9iUTH9yBUDTHfU3B5+BOIKQ43BWtNtPcWIOzEZE8FoK9K0DCGNxLi3FqaKA9gTgeoFwPQAoI0OulWT11oEwiFz7cwbErzNxWtEYBB+VY76Vh4DWrH8IOoGQ7Ocg1CqMRLPltmxvs1/SHaP4dcAJePYyyUCRIzrTB8tE8FoL9DUMwl61kQQ87Rmy2PS2rgB0a1ci18RudEJH57OsY02y/+83/sZdBKr4FXQTApBvprGgQCg9UEAM+h9F6ugJDkC3gJPBEvRGrYoYCBX9IxEcS5K4i6cZAHIw8oXQ4mLBb35YH5d7OekadtTV1UZSjaEIPH4nQzYNwgjAHNwDuWGYpZc7lzPfX1cQur5oBorfzDf+zi0yVTuSkuxBI2Q+PhQDIUEnMLo1TBCZLufGw/ixbQa0KB8CTODjPohdY78IQmfDjmW7Yo/doAX6GqIiAtDHaYswSmeMubV81kp11L6hy2PdAcgblfslOKC1IiKRmyRxZgV/8++DS8BFrxXi5Hd/U6MeSKdqEsEKhpBRsgRMbAtuG4KU/+9ry5brzP/lPVMv1EPOQegharrVcgZUhVHFxNPcp9VFtlOWkL437C0WABWypFRGsV0sb5Hn2zYBwvUGoKl10v1knDgo0y7XA8Pfv0UACnjaK33Co9gJQAOe64FkNvtZAHQdjz9v2Nz2GSa3jYej2W3KGuZ9ixGdIVSoKT13B2s5AHkGheST6qn0erHv5AIgAAU+LVfw/wq3CEAV7clBKDDGZG9/5oVXx/oyYARczcqH5GyH8eFplTawFvAtrtXLGpNrQDGbejupB3omlIHQGc/ErzOcGSRs8zrhAbbuL1Tco/JfbLlNwHOmi2kIcs3owbdwNpYtynDQhsFcgvuG9/YapGFvYX22zZcAU0/GwA2LJ/4AmGF9mwEbBu98Y3cMF+uAGQCj2HVp3BbPuo3IlqxAy5wHAq4OfARmEBXGfNIBa0BIsG0ecwC67merHgRpZLwocrWaovuTxew/V0txJQ2DWeae3WAGbdhb2DB4+wRw7w5g8Qpv88liyGtoWHzMi4C9fAEHbBi8kwUKu2xNAdBxaGBLbJdZux1LwAGECYAEm6wyfpelJrEgFnRDxESwgyUxIUsVMwjVy5AYO0bG89Auu1/5BF38KqjBHlUAYXsteNCGwTeWNuwtk4JMkrlzGNizA1hm69g1Nix+zDOBW0aBeRZZGqBh8M4emfWNADDT+zqMjQyESdQFHfDbZECCLRgdHeCTe8CBaKJY1rDnBRCIAuGW4TYAZeFG8ZuMkGiQ1IEwGCJtHZBmy1obBsvVMnDD3jIAerti3LEBOMjGcOpa3WfD4ic9t6oveDtLfw7QMHjnH6wPAybW6yaG4+8D4HIQfvtDIVtLejpBFsVvUI7NIBHw3DUjRzL3rDVtsYPOkAScuX3coNDynT2VYJCkn+PjqvUD8hVbS8NgjphGxcANe8sAGNoVY/824BCBtIaGxRe8pLKZdpMkTvXiJ2toGHzSNHDPScAyq3er4qPyGaNc7JCRXWLT2TjwGmCOeQashq6+qSpZmp8vojQpheF58ncdZVjLnjWPHr4VWKTKxrHGUqq97qXu3jp0wPy+eEC/DYNZsZAO6IEb9pY9lNCuGPcNV830ZmkM9dmw+OKfbdcXvJMPdY0Ng0/7GnDXKcDMccBS7MwdKz8KCAKQIgY0MWGCtr4TOHAasMwOkTqf6unyuLykfd254nkb7qsw/iVg7jhgmSX31Vpd9yRHeLx+zRhjEGRbB6wDYT8NdymyubzDzCCGfpMJWfSRYfr9HP/aMgBm7YoxNQHMbQHm+ID6aFh8yS93tAvGQb7da2gYfPoXgbtPAqaPA+a3AEubgGU1RM6B060fgkRoCzj+TcD+04CFE4BldZdRc4/YxlxgjJMewSiwN1zWfsOngdljq3EmY08vm5i/7j5yIMqpvupKyGoNg9lngYosl9wY/0dZdrMzYl8Ne8sAWNOu2MA3zw/F2CoNiy99XbvftrcLriz6PhsGn3U9cM9xMODObQYWCMANwPJ49UliuW6SaqqBn/gGYP8pwPyJwNIxwDK76ahDeN6uXYCuYyABkEza4LbpY5WEWdSLxjF26/dQB0SJ6r4ByAN6NQxmkWcqrnQ00x1DEDJFjR8CcNWGvWVPp6ZdMQ6OVOCb3wAscPJ6NCy+7PerkP5Q3tBY1PrT9tEw+JwbgPu2AlNbgVkCcCOwtAFYcgAuiwWlM/XqDjMEbP9t4MB2YO54YJFMo/5gHIcALV1TRZ17FXOhPtvgtvkqf9H4kvHDlyKK4l6VzvVSBF22uwjOb7pbw+CfcwBSkyeFEHAUx/yw9JTyEbo27C17Ol3aFWNuAlgIn9QxO2tYfNlbK6MvaxeMRYquvL9rTcPgJ30TuH8LcHAzMOugX3QALo21WXBZLEHwRF1OgHS2eOgbgIPHA7PHAezNu7QFWFZ7JnXJ5rnqxHEulvlzwyVNN3+wern5Yovl7SXLGwvn4riLWO4fgMRJXcPd/+pmOymELEhRzBxJAo9gVL4kwVnbsLccgHEpWi3epocCAMeBRU5eTcPiy/6qtl0wpvhA+2gYfO7NwOQm4OBGYGaDs+5ExYDGgqP+ccAkINaVpB8GTv4d4OBxwNw2YGFrxYCmV0YxLNYheCXau7EhV3ga3Lb8g4+R45uoGLADgHWqhsBXA8K1AZADyRvuvtkBSArh+i9DsQhCOtf0UUgW/7aiYW/Z0+nRrhizoxXwFhyAi5y4rGHxU66qAFhT3rDSIVdpGHzencDejcDBDcDsBDBP1uX1CMJRwFiQIBzxieL3KIY1YW5MPOxNwLRb8gs0aghAss1GZ1O+SFHsdRPt0i/PLHu++dFb/x4mXfhcbWxhfCtYMFr/uWvKxfDaAcg7ipPCvFOVpuo3HrCjYW/ZA+rRrti6TS6MVQ+L4NPH2nx698GnXF0BsKa8Iab4dFZpGHz+JLBvApieqAA4J8CPOQuOBBAOV0CUYbIskRkAecrvAdNbXc/aDCxSpyT4CEIyTgRgneiLIp3nP6fs+a4A4N8B8/48CUC+ZGJA29fpuLmxJW+5h5kNFg2jiWHSi0r0Uv4pCoZsxw8DUfnhd4Vk0XGdGvaWPaBV2hVjdjgA0BlpkQ/K9bmn/HOVqtClvKEBqlfD4AtmgP3jDsBxB6DA7tdbcvYzJvQJkii2n4NOeMpbgJktbYPGACiF3wFoEx1ZMNe/4jnPLXu+KwD4t/5SO/iMBcXuesHylyACMBPDgzGg7opM8mEHIGdwrfGA1rC37AH10a64Yr4APvvOSdwEPOVbKxu+K2pdKRTmdI3dqkPPVgbSTBGAY8AsATjWniBdx0QxJylOFCcr6HBiw1P/CDgU3EgEIMW52M8YkLolQRddIN1AyKWiBretf9MJQN6HsaCPxe4rvgDdHOcOxDIAcmDFDXvLnk4f7Yqt63gEIB/Yoj+4p9xaAbBHeUPM8qF2aRh84QQwNQYcGgdmx4C50WqCFngNsgSvQ+Dxu4MuiawhwIAXVk1O+e/A7CZgThY1dcno1nHL2oDIyZULpBsAFTBZ9pjT0QQgn2V6ufRicS8QRgbs5ZYpEsENDejBfpoLrwAOjgIzZMBRZ0AHoUC+SOA56xJwNlEyTFw5FxBPeWvlzpnbANCdQ1eSGTRybMuydgMggVBsKmtYoC6Mt8znZxsZMLzAxoAOvsh+ydDqtXx4FIDl8L/omQ7A0QqA82S/ERdTI22mNfaTuBIIxR4BhKe+y61punQC+MytI/Zz/c9EuvyBeetLAfGZ5WOMZ9j2/gqABB1fMLsHAVBqhfTcyH5d9MByEdzs+B50Z7voGZX+NzNSsd8cwUcG5ASRKYbdHRNYwhhDIHRgGmO0gFP+HJh15jOXjnyKblVT5Cbfoq+yJOszF8P8+VnNPlICkMAzds/YLxlYznrJwIpO6egTPMqA5ZNDAB6iCCYAyYBcBqTRQ0e4630SxZyQJQIvMJ8mSeLrYe+p/GzGfnTpEIBy6US/out+K1wg+brs88rHmDOgAVCMnrEfxxMte1Mt6j7u9zzKgIXzczEBOJIB0BnCJoqgIfDEhM58SWzJEPGJe9hfVH42un/Mfxl9bgSiBySIBWnAJBDGEDAB8QWFA8wO3/a+wH4+rg4RLPYLul8tCI8CsJmJMQAOuwFC9qMI9g9Z0CxhZz65K0wfFBPqu7PEyVdWAOTHVlTcpxhXHZLz1w0ZA6EDLhkCskRf0sw4dRYC0PQ/vVSRAYPo7QCdj7GqVOSMeBSAzUzMxZcDMwLgcKX/zbv45SQlHXDIgagJc+bjZBqAWhUoH/Y+B2D0J7rFa6LYDRmzomsAaOeKqxEvbWacHQB08JkRIteSXiSBLYJOLB+X4xrzAzY7vgfd2S4RAKkDDgPzNEAIxMASSWF38WsgkuXLyXTRSRCe/DduSZMBMwe6ObTd8JBj24Aot07uDObPP9XsIzUGFPs5+JJ/M6oT4buxHv9X7BeY8KgOWDg/Z58GTC9Xq5FxTXOw9c3Cm6k5fPcjgbHbgAlvVG2tH1T3Oavoq6BlniZ+12n5u/2sDbOvasqoFg8x2Lnbcd1GdhSAhXN+7qMrAC4sA8sORJ6yHwD28z+Ft4fdv8UyqUDrDmCEBcpZ39kLS6aq9l4D2rLb/KYsFTPWdfbvh86vQu2s1K/K+zIjTsXIVQ9a59Egs4Y6sZfIA/EcSp/jEXv8BWcAhxaA+SVgSQAkGAMICcwVlNLlqTc9Gbv/HAA7MrL4+f1VlXwrUq7SvCoyGcrrWpGhuur2fNGYwM8YT67hT3s1LaZvqn5MLM0bzmHMmIFSgdFNj/mIBct63NhFZwEzDsBFgpDPeanNgATfCtGsX9TIKwNrg9tuVkhlng7TI/YArX1VkXKrEe1l2SynN1RCsFJsqnQv3UIMxhwIRjU5AGN9QUteVz3BUAvahuNgjC3HxLAND7nBp/cgONXF5wCz8xUDGgCjKPbvevlzcKUHH2ag6cnYzepYBB9Zi2FxDJdjoXJv1WDFiLJ6MKqKZUzoQFTfj2HmwTKcTpVWvcxHKm6kKgoORAEvVclPD6NdzLXpMT8IYNPcLV7yJGB2AVhYrAC4SNA5AxKM9ryDPE5fs6eeVKWGZ2M3S3MQfEyJUKV8L1ZpJXpVJ9pLilmlAxWkVJHKwIhjjD9TtVXVm1HdOy/pJiaMFRWM+bo0rWl4yM1N7oPhTJecC8wRgAttBjQWdBBGESwgSiV0Pb9DRgu0TY19N+M1mRKh8niqFx3rRDsLqjgl9yaGXT80vcL1wnE252PAZCzAHQCoiqoW3yYWFIt664fUpKaREr1NPakH6XkuOQ+YDwy4FMSwgU8GSRSz0UJx3Vx/5vFNbrs/EiLRY+v4ACITww6iJEodQKwBIyBRv9vwhKzUW6z66TUGEwhDS3ezqusAyNxnJn8xa1KRPSFts9YfFB/QDZcAm78CnDBT5U8rCqjfc3yh8Gn/hGd/MsKf1+QzYJ4891Jye13iy1cAE9cDJ+6FpYrEkidxDN3OtXR+FwBGMezoMmxJLOumAuD4J4rxJrfdH/XCoLGFVKiUbw+LAPQqWWaMMLrd6/+JycSIm85w9lOpt1j1MwAwFTiqAWEUxeYH5ENn/jInUVHeMXQ/f/jRePvCa4DhTwLHfBc4frGqqaNJzLPw6iZxV+HTplFGvZrXZT45N39+HW3TujlZv8D6fp8HRq8Dts9XIOR5YtakgBgdrrrt5Qsq8Ssd0BhQ4HMwmVitAWHAY/LbLDQNQDaTVJ8Q6W4qVB51OOqDZDPVB3TLOBepW5jmqaLbec3jGgBGMSxvvemDYkQ9GoKF1ShUCSKCqBeQrvmfVZPC1keBjXcCmw911tTJ8q5XgOLaQgA+x/OdWA2EGZ98gbjleTHdQHQN+2iwls3nK3/Zhj3VeQhovYzdxmArSwQgDRA3QiSCJUrTnjfl4KozRCSCCeYmt90EoJJbVCk/1+FiCwFZxLk4dRfLFia6x8LbYkD9v9cXtLG6+O4AYQRfrgPygVIcqyhTXcWFOJH8fh3rz7EKwnUArq8mcGwK2MCC1i7WY7Zenh56feHT/jE3yliE4TZncd636gPFCKWavGhcRx2J+cvs9MlSw0Ty3cCm+c7n0G0MExdW4BMIbTXE9UCynvyCCX+Ovm4gbByA/xisVgJPpXrzLj4EoRJjJIZrWHArS9iprK+KcefgiyB0XVKGjOmCmW9xhRVMUSyRFnNeFGEdI2q+/HFXclkp9WsAbgTG9wGj08CI64WxRk/OTDcUAvBHXSLQxcVCDMQSWbzv+1e7WVbz+k5w2tJtsbcCYV6WJY7hmAsDA7r1Sz3OgOgoM+KTOJbcjSI5yGIaNE1uuwlAAU/MF+tF5/0sIghVLdVdM2S0bSzHx2Mi+FTxXf8X925NC4BycK8QwfmgVX1LlcFiykEMcL2BndJJ7aQfijKfxLGDwAhByM7aC5U4qwPzNwufNnNuOH4VZaCPlPo2AahqFqoPVFc14ga2m+WEEL0cAz9kdPrOmMu8r1o/rTsXz7f9oswFs+jO6LAqkvC3Ggg5Fg6mwW03CUI6X12h8lyfcz3QHqr3DIl64DbqaQKc9mI87QXACD6vpJqY0EVxz2CEyCI5eMSGX2e7VtI5J4yTRyZhscrvt1nQuivOAaNLlYESwcySgiVbr37Bfd0/u31yEgg2FVaiPCeVOguqAfGov0iR0R9JABJ0bnwk9nMxw+fOh55EbgRhzozrBUA1polN9CLwok5HEEUQBjFMQB7D+j656PW+IrJ8O/bBCo4sGFdGejqiyYCx3mKe9/JtTiBvmI5OFiTisg9LtJFF7gZGDrUbHKs79+hyu5hSaUvh1foFr3r/6vZJCiXgCDwVVFJ7MVmRLsrGltuFCc68yFdACMDAflwR4QM3HPoKgIExt4gz42SuaQb8hBOE2oZmlu+KFlKR3QSssMJxDPWbbjpfLoJrxG8CYT8MKGZSVTCxYFTIb84nkCxCIPLDiby30gXFghaF4c2ReR466Uu2fvoFr3r/fKAEFxvpqMcd9yonIrkuK5LLV7MVCM+/uDJCyIC2J8a0z1iwqyESgMl15Sa33QKgmtPEBnp11mwuXgO70Ud4DHWzfgDYC3zBEOk7HlA6XKyHQzb8HgGoCSQLqsxorIy1Bxie7Wx0rFaf+wr9Xv32C+56/7HbJ5VHtRYT+GJrsehHcya57PyKAQk6+vBkBZPpjPEExlwU59awg3C24W6KBsC6tqHR+MidyVG3i3rdAnAsH2T093XT+zLr197MTA80h3SfsZP2UqpCrPQ46oF317VrpeiKXTJ9MhMLkgGdCacKG/mupV9w1/vnwyGgCDCKWzJe3lqsyzLWZWe6/kc/oKzgKH4jC7oolhdC4jiuzM0WPo+cPQ2AsX1obFCTO5Jzn566PwbReiwnfTWjI4KvDoh1juh+aT+WKSYD3i8Aql2rJk+VsVQly5kkddv2FvHT61icqO7Fr71/IkLNXOi0FQjV0046oBy6wZ922Q95ICqDEaL4XWw3COcf9Mw73DFB9AqE6wZAAS8XuzGQIDKf+oVkqxt00ttAc+YT0PJ9qRFSB8xoye5Xu1ZVeCSgCLbYLVNswoncHxoeLwCzBGjBNki/4BX3z9lXgUCyIIGmhova83cRgO5Te9yLgP3MfmsBS8xs8/U67ePQOqy9umBUruDchqo8sHSd3PMfT5ifo+ack8eFHI6QEcnT5GvdOnVdXof+ptJ+BVPWceiaRHA8Us/nkACo8mzqlqmWrbFDppT5A5UIZm7CPA2Vgm3QfsEd909kKIqB1qJAKCBG8ZstZz3xHOAAiwmpDIdng1maZQAkZzsHZ537YfQrwNyxoQ+HakrnS0h1mUA1C96TdJTmORyhC3oeqdwROi+GDhkFI6bYNrcNDEDeAkXwQizPRpmnIs3OdqZPSaRFUcbchHlgie6agq2kX7Dd/+d8lUJVXuUzk8ERmS+2vfd4uvN2VOV5rSwb0y3JhgIh9wJeN3YMQCIgR78Q+nDEVYBYZUrUpbXFnM7COSdf7N4IPvtDnT2BY/h8Chh10MXQeYGS+7GGjaQiABpuNIFiECnzdWJMIUHcazLptC7YivsF8/7FgLFMqpiQL5TuNbKfA/DC46rqqAbAwIKWK+timRUBEiNGsOQsyQm+Gpjd4n046hbT84KPuYjOmHHyp92gcgDS2OoIuVIeh/xyUkaVwyEWdLrewHE3uBUDcKIwnq40HpDXL+n3CzbaKdguel5VnFJl2awaghLQBTzteZ0cjLq2A2n0M6EPh2pC57Wg41poLzZsAZNso0Hw6eVR/J8bF9YjWGmVCpGKwQLBRCcrbiSxNLgVAxCF8XSl8YDHHFPW7xeFBRwv/rGqOKUBkODzqgdWPYAM53vTASMQu4Bx9J+69OHIF+N71F1O1gUB+AsBfFqKC+4Wi4BWX+CYgOTAU36wdMVNVKka3MoBWBhPxyiuko3xkSX9fvGMkqsDlzzHC1N6SQ4DoINOe7KelWWTheziObeKCdARApD1AdVnRH048gKUAmAEYi6Oh4DJV4VoGDWqjq4XLbO5o1jBoimEPhPJmwu9FvnTLgdgYTwd2wyXbMyRKen3i2eXXB245FlVYUpVxUpGiLtmGBlrTEhVUwV8dEkVKAq3MHJ1uzRbRx+OOgDWFX6MsXJU/36lJoEoA2AKvw8+uwTEDIBbStdOs8ddDsDCeDom7ZdszBIs6fcL9ror2C75US9IxJJsEsHdGFBil4yYuUwknofJgF4XcEUfjrz+X7fKo4EJJ//PkMORO6FrVjQMeL5kJhZMMXzLwNZCt1nzDFgYT8cQwpLt4hDON0i/X7ys5OrAJVe0S/ISgFY7j9ZvnQ7I3+lyqpYaL98CWp/N+nDkZdhi6bW8An1kP3fRTLKVWlwF6RZCH2L4zDDR0k1IqeTNb2OQSYNbOQMWxtMxeqtkY6I+ny9VEz6btfb7xc+XXB249AoXv85+tIBVgJJ6n4lf6oV+mfjdDJNMH0wAVFX90GMk1f5TxlS3Fggh92DyN0IORy5665KIfCktsl+K3VsGtpVOWOMiuDCerlSnjQ2rB+n3C+pIBdulz8wqonrNPLKgwKaC5B3s53qhXVq6oDNg6sOhqvqhEr3V2VNLBjmnSSNdrOLJ1zkAu6VPRjFcFz4fXDJ8i45hG94Gt3IGjOFYA8TTlQZ/qGH1oP1+8ZtlT1MAtHK8mQg25zOZUSCLIliWcbw8wfW5Ln04ssqnHX04euiCk6/3de66MPpuAQVZAEFkw2MKFw6a1wEL4+lSBvmAOMhD8vkOkFX77feLNw14YT/ssmc4A6oOdHBEkwXlgjH2k4Nal6wB4fIuX9LzZjAmorNeHMo5Tc0OewHwDTUh9HXxfGJsYkAbAAAgAElEQVS/uvCpoAcew6zBBrdyBlQwwoDxdLZWXLDFkHyF8xGE/fb7xR8XXByAAVC1oB18HQYIT+8uGfP75SCUs1o64he8v4j6cIQ+IqkPhxrBCHjdjBH6AblQkAeY1ondukSiELmsUPpjbyp7XuvDgAXxdNZVvWCLIfmKg6Bbhrjup98v3lVwcQLw8gqA5v9zC9jErutltg8gMxDWWMBaMVkmANWFyEV6R0uH2I1IzW7ypbkQOTP5f2ch9KsFkwp0kQlDAOmxzHpscGuGAQvi6VD4RgmAg/b7xZVlT5MATNXwqQc6KGwf2U2uGV2uzg3D4ua7fDnPwZcKgIdq9GaIBPZb0YdD7hgyIFWMXiH0eQ5vXS5HcMkc++9lz2t9GLAgns7KxxZsCkgdtN8vWD+vYDMAUpcja7lOR9eLVcIP4tcuob/3AOHCdW02VTX62ApB4Mv1v24gnPy9HiH03fJ366KYHYTHsgBBg1s5AxbG0+HLZaOp65i+ln6/YM5EwdYBwGj1cmUkE7+8THLNdAHhwrUOXtcrO/pwhF4cct2oN68BMDCfmsJM/n6PEPoYPp8bH3kCkbtjji2tJJA962YAWBBPZ0WBCrbYsFoOf9pDAiENk179fkuvf9nTXewKcBSjsn7ldonWbgQpx+26otaLIwAlfi2QQSJY3Yjy5i9dmsFM/oEDMM/Z7Uf0RiYUA7J+ToNbOQC3e0WBBm9qLad6HICG1ZK1XB5PoxnuOOIcxSXe/Of8xHV/P+FpwN47gKUpYHmuSve0pKZgCKSq5wqniWE1WZz/xouBm74KTMwBI17lVBXwtWSs+8/vL45Ff3vhpcAnvwos8d48DZX3M2hx9XIAnu0IIO0chu35AOgLL0yuG/jOmwbg028G/mNz1YWdETbm4I5BrFlov+EtD2wIo7l+Atg8D2xY7iw3V5diEqO54mnj6XdMAYcU+6gon7A3NSO2qFjlyZYDkAX6uD5Iam44YaUfVNDNxaJcLIPXcGGpfi6PnZdVD1wPspQBX/wl4OaNwN6Jqg+xwrxslcVFuYJblehkcYYZGPS3L20BxueBcS8nwg5H5kZkx6TQSbXFZcCQKadx5Cz5mPurAFxrRaa17pAR2PFC+ElSHKQ/0QjQcgCyGyM9v3SnsDBRJgL6msWCf6IfWeUJac8UFlpY8500DcCfvgb43hiwZwyYVhd2D/VSrKGAmIDnBkiafEcN9cprHgKMzgNjS1V7rRjRlceyrqif6KAkMgXIM+6tAnDl+zSL36O9+U8p9jGHQo285/2XA/AnXeNnKAorDXH/AILwbSvLEz6Ql2+cAf/3XcCdw8DkKHBwpOpFbE2wadzIdyh3jjNQirYWEwYq+/zJwMh8pf+xKNSwM6DZMmzNRRbM2K+2Ii6TlFrAWfd5V3i/F7IgT2LBF5LbIdkqxLPWvtzlAGQ3RpU3Y7AiixMxLOUB2t7pKQ8M0qCTnp8HkojJgNqaMEJesQv4AR3Iw8DB4QqAs+6SWRiqgJgY0HVDAdBA4Ba4xN7ndlSFAAjAYX4IPO5dBDMAdS2i+Jx7XTf1eEdTDfgAQnR34p/wQkRmjNAoByDT/ugFphXAmjAEn8qaPQAgZCs0lSckCNmVigEbFMsPBBE3DcBX7gLuawH7hoAD7EM8DMw48AhATrjtQwiXoqkTEwWd7LOneXNCbz6Tiq/TInb2M8ZzIFrTQbGiy92oGz7pXl/7jvdAJnb2470IbB3T77Sai+hyAP5voTqW6sKwFAc/TAdc5+3dvcsTrvPVYSK4SQb8xV3+6IaAqSHg0FDVh3iOIFTIFxtit9orL5Z/LD1Q4s+B8OnHVuXwhhdd5DoLGsgCCJ04q66X/Ju/vSaeAxDPvbdtmdtKDV90gVEPIl/xySkviOhmAEjrlzSkwj40SlQZYZ39I+8JBMx8mZryhOsKwqYB+KpdVSDFvhYwPVR9BD7uyX4SwRS59nNI+bRck/DzJ05v12M0nY8fAk8iWL5BB5qASPGRCi8EVjzv3mqpkC9ACrrwhKukB67GhpqRRowQMqCiYbj8oOoHeUWpdYIBAUj8c8WjrjyhNIJ1unzjDPjqXdUjJAAP8TMEzLYq9uOHICQALe/EwWe+QgddAqCzzD8+vgIgg0qp+5nYjaDzCgjmnCYone0klqP4JSgvvK+6LoFPoFMlkPGh+0rPWta4RHTNJJQz4M8EAGoNTPVU8opS64CC9zoAWTFChcq7lCdch6s3L4J/2QFIEBKA1P9mHIBmhPh3Ai354RyAAmWsR/PRs6vOR8Z8FMPS97yxtIlYgVB/I7jC0rIKSfLXF1EEB+BFFjQ3jCLA49OWsRTTEPzvzQEwry7VrZ5KwzAQAPssT9jw1dcHgCrORQCS/bgn+1HsCYQSveaHkzvGv1scgU/6R55Y1YIxhvOm1EZekQWl8wVDxJgwc88QiJc6AKX/meHDawX9z16M/Em7bO8Q08GBP/jEkAEVjMBoAFWXUjRA3KtNwOBXW3EkAZhrALktpC6lKtTV4OU7RHB+3kHWgv/zrnYZl2kCkF4uF8MGQGc+MqEYUCA0n1tkwxbw4ScHAHr71Q7W4++c8czwcBAmHVB/c7Bcek9b3FuwbdD/kjGWgzJjQ3thGmVA3jhfOyU+RxB6FamOFp8NrhsTgLy8Cpzm5QlVptAU+6CiNgXCaIQ0BcDYV8b0P4pi30vfIxD5+w72C9aliegW8MHzqrmh/meuFhYi0pKbs6D9fsh/n1XFMrYMbPgUByCZz6J+uEknDA9AornWFRb01WZEsACoHhOqyC7wdetT0QAK2KqOb5MCUvPyhLE0oQxzqaYNXL5xBvyVXe12vByLADjXAvgxBvSPGFGMIjCmJbEW8HfntxtQmxT0cmxp9UPAdKAZ1upA6EB7qgDo6oCUxXRtPVSpAwJpnUhuxAqWCCYK1MBExZljY5S8SYr+pxAFAuBayhNG26jw8usCQLX0SAAkwwcAEngyQizaXoziIli+Oe7/9kJvNk1LmBMe9ECO3XRB7aPeF0EYHNVPdT8gj016YBcWtBfBVYJuz7mF7VgGY/pO8f5WdQ1/7U67nIKNS7j0wIbDPFZsyNHHY7od/xdlEHj8CcC3TgCWHgGAPSxiSdt4312u/8SPAl8/Dlh4pDeZW2PD4J1c9+uyDaIDkgEJQKnTfG/N8nUAmu5HUnMW5ARbPfEuIHy/ACjRK7FL5pOR4RaxgTHofKl8r/S1ZWBnAGDKefbn3AFIPRPXB7sFiVQimKVgGdl5ooNwLQ1/1U+DQGSXQ9r5Evy1q9rZbP1lGQDZsPpzI8APHgXgod7qUx11YtBbFzC+/C+BL7SAWwhgdoLkONSLqy5oLogYft3ZI1F7EAC+phsAnekokhP4HIzml/PvthQWmPB9LJ7jxkcSr14jWj4/0wFlgJD5eoDw6fe4DzAYPHokWhHJZ3TFSkn4h7YOSOBwEtiMTv1aY0uktFYTmI2/43EMQmCuAJmUE0gmVD8EFdPpdnxhVhqzDr8F4NMtYM9Jfg98EVTeNu9Q2OFZBX7vr9vtgm/lcezczZ61ZNN8DCvilYCdPXqNDQpAlfGTKm0M6AA0PTAyoMSx64cRfPQHXsniOTI+fEWDFGp+Qb9BeySRBV2kpl0QxxGAlHDmkI56X6z+EP7UDYSdRgh/IouwIZ36lHabBE0GJ0r10Rgb/xA/tt/j/6aMAf+7R4CxzuBXWRGULwBfIrY6UNfpvLae7n0I+LO/reoLMqiVMbW38oUhkNkQIzZO7tIweGePcmWlAFTjAYHPVGwXxWoLYblEDkLuTT8MDPhXLJ4jALpaJB+ggU6xfgJknT7IKXIQXh4Y0FZCog+wxiUTwSkXUbSMV1rB/A31OXWuFpPUda/mRHKi1e6U+hA7Zq7l+A+UAfDtHg/LrptkQpZ727cRWOL9542Pa3rOvuOqagUltgtmJM08j4/PILbIDKz6w5PAHsbraTnMGdZWIwIzxIfeK0rn578J3LAVuH8CODRahV/FFQ/1IumIvXP1QudNfyNT8oVqcHviPcBd48A0g2RDuoDqHdb2SalZAdG9dnfDkAE0gXnH5ijWCDbKCq5/MRiV0QD8HgHQ63jG0hdsLGxA3x9Bw1Asli7hO3BwApgng/Gjvq01IHrXJ7q3Cz7E++YziF2rs1ZLZ+8H9jJsSoECWXj6igmR87aLgfbGq4GvbgLu2gjsHwdmCEIPSI1h+SkCRjpfUC3iNWcpoRrcnrYbuGsUOMBo7QBCxSTG/igxVcBIVGPWM1h1JYQPnyKNExGZMDIJ9b66eEBGxPDY1Y5nv+GCjfGAxD+DDpiawphABWZPjwNzNLAEIH4XCH0M7/5c93bBfI8Yk2cgVAdvdT10ifDkBWC/r9lGH51NhIsnsWHOfPmEUKT94WeAG8eAO8aAfWPAwVEHISNQlKQUglJjJExqC+H6Nq93kOpUg9szbwLuHa66QzFWkaFieXxi6hgVHOMCYGRuJ+5V4jYJIDKI9KlsAvFDq8QDrnb8NWVPh9EwdFkQ79TlSMIsN0Mi5s9MoOGno4U6f3YAvefL7Y7rvdoFLxOANSA8f7xSgWmd0kCQbmZ6mTLEnJ0UqWLhUkxlrBn6n3wWuGkYuGukCsufGq2iojnRFpafsU7MDxErJuZhYCsJosHtWTcBe1oeq+hxigJgXBrMmTBPnJKLrr+VED54ibHYvZos8sO+DNcrHrDX8YVVyglAKud0LtMjFPtNMz6QLDY7VomLJd671AEH4Xu+3g7nWq28ISvX58/hguOBg8vtFQvV/hEzxfqOevuTfpjri8vAWz8L3NYCfjBc6ZYHmBcitnFd06pxyb8W4gPlgonBqffTtdTg9pybqiVNBssyUsdUD7eGO9amnf3sXtxQipl7Wg/sD4A8AwHIyZMYky50Tp/xgN2OL8y051qw2hXzwRCEdT2nmck1RxHG+w5jeO9NFQBpR6ldMIMXlFWgVndqF2dVFsJzuOgRwMElB6DcI6rznemD0RnbwQiSRS3g7Z+tVIl7PC9kahiYZm6IizuLigliT/VoUog+p8P9l3wJ7qGEanB77k3VczroUToWLCsABud4ypaLCUoxf9i/9w9ADiICULrQRWuIB6w7nuZrwaZwLBGwClSqSyz3AhHbaRGEFGOmC44D72UVgjW2C2Z4lIF4ArjodODQcqUGqAxfcpG4mJVuVqcL5tbs2z/veV0tYK/nhTAqesYNHdO5PCJZos+WuzxHJIViuXFyJxupNLg976ZK2lizUKodilGUgzyGhokF8yw5Mf+qRkjdjfuDtwkkm7DTkNaBaQ2ox1q3eMD8+B6O3H6em8Kx1Ccx9ptWl9iYIUAAWrI3I3nHgPdOtsO5eOuxXXBdj0V1vOL/so3Cxef60tlSpYwveKf0pAu6ohfdJ8k4CUqgvr5jV6VGTBKALeCAh+VbZLTnh5gu6D44A6H8cVlkNK95O1WkBrfn31R5HSy+JCwPplAxRegE/2T+AloGncNmbQyogUQx/KwB4gHj8YWNTwRAOW0FIIIndoqNkTAxz/bd09XDGLBdMM6/pLKi5whAX60gCK2ujxzEAqGL2pQ1Jis5AJEAFHvTujYAKjRf+SEugm1d2COQLU/DAwQ44caEw8AtZzSIPgAvuKkdrWMM6M7xCMBoiBn4YpCE2NCfxWAA5MEuwvCCEICwlnhAHV+YORfDsWJGgPpMKwg1b9QpFnzHbD2BK2JGul9s8KkYW17vLALQRTCBpzXZpS4gtCXXMAkduuAy8E7PijPWprXJ5CR38ygw1fJDohh2BlRAgq2OeN7uTWc1D0AFNtmL54ESBsCaJcLkDajxj5ZXRiCIGA0waDwgjy8sk5+HY+X9ppUbJSCp6TnFCMXwny1WAFQ8rUAc2wUrRL6mXTAefWnFfnz3FpbagQKLAqAzoZjAKkkpXkNO5GCEvOMLFXOnnC4xIKOjnQGNdWSM+GqHQGd7JSsxUf+JzQLwhTdV4je1nQvr1MkPGtlf9yP2Dy+gAqZ6rQytfvdHSDxgLwBF8AmAYjHWluEDiKGMiqOVvtejXTBOuRSYJwDJAARgZAGWL9Nk+IM3SzgTydE4eec1nZHbtDaNAf1Dpd/SMx2END6kD0oXtFhBXmcY+OY6AFChnKnzl7NfdMR3qCAae2B+VVMYXASvDs3/X/zHJZcB84vuiqABEo0QPnhnwqQLyRURmZBPytnwHde0M1vN2lR6picoKULaxHDIEdHkW2iWg4/7b5zb7DSQAVd0/griV2JYojfpwRGEYsGBrOBmx/OgP5sAKANkcbFzNWTRnX/GSGImMYH/LYlk+gGvdT+bW+SWH+Ig1GqL5QeTtR2EYj5LVHfjw/ZDwL8yJ6TB7UU3VVoTjTYxYDK+Ivv7dzNAZIxpZSiU8jjKgIWTcykZkBawDBBnQdMr5QeTKI5iWCB09AmEb7+ucnOQ/aTPWn6wuzyS4u+R0Ob6CUGqJpIDA97AdqINbgRgBJ69CG4Jp6q/ckjXqB/RKla4WpkO2ODgHoynigA0JiLwaNiEt95YQKJ4FRC+7brKzRH9jZbN6iJYuSHm9I5iOAOhHNJfZkh+gxsBKPbLu3+JgaWDdojhMO5kkDWSlNTg4B6MpyIAjf3IggJgMD4MCARjFMU9QCgAykhSKnUCYHB9JB0wy5aTRUxmup4h+Q1uAmDs+hpXgFLnB6ULONOn5xACNJqxghsc3IPxVBGAiQG9aLeilWUJW1FvVXEN0TKp1C6At19TMSCBpz1dHtT/JH7N9yaxp6QkF73KBxYIr10nAMproB44qQGTj6sjUrtOFPtLeFQHLES9AdDFrq1E6M13MaxVCTNAXNFThIylLcor40zxtgDAPKuVwDMrOKw+SBTbtR2MND7sZwC7Qvm4wqHa4T/uIrhb+7n0EgbQdTijoyg+agWXT8llDsAFWr/B8qP1K7bT0pvtVwHhW6+t2C/m8svvZlawi2CKe37nhFtapkDnILRqBQA+v04AjMyn79EIkXO/DnzyCBwVweX4wxs9B4rRZgyPVFqykgDd+5JSpBU5r0vHyHz+jsc3ub0KABsZMCyQgeExKyFPVIz3lmcM6OfPAGCADYPE67Jfs6h7G0o+xvi7oyK4cLZfOgpsXwC2Lq9MwuuVERonKn4nSJrcXnQKcM7dwMMXgYcsVxkSebJgzOWPqdB1ad2f3gpsnwK2LXWeR9m3danUIV1lBSCPArBwtp+7DThuBti6UDWDmWA/DvXk8LRptfPtNUlihYZTOPCi04GH3wFsnwGOW6iAs5n3GeJJ+KLoE+9VDClQ8R6vOQHYegDYwuY3S6H/iJ8jb11ck0q9Qhoc9QMWgPBZJwFbpoFN88DGRWBiqQIgWyJY3lPozaGJ1KTEPh36zpTkJrcXPRE44S7g+Cng2DlgyyKwaclfFoIwvCwx9Zn3Q1DmIPx/2/sSaMuusszvjfXq1ZRUElJkKsBEGQyYhJCBSkUqAW1tsBdpuxEVaBzowXZqe1g90G2LotjQdmMjKqtBxQERdAWUAkUlZNBGkQRNyIAEMAkxpFKpqjfUG3t9//m/c/+737njPq9uVeqcte66b7jnnn32/s6///3v//++Tz0dmD0KzC4DM6vAFpd/0L3Gh6yTDgnvLwKzAWDGiH/ThcC2OWDrErB1pRgQisIQhAa+AED+HEEY6uNLyrRnZLSl6tSbrgLOeBQ44yiw8ziwfaV4UGbdegmA5QMTLFlqsfn7XecDW+eAmePAltXiXnkuZSBkRcm4UGXtU2uo3xsAZgz6y54JzMwDWzkgBOAqMMVBCSAUObh8QuN/CiTgcWAuyWhL1amvvBbY+VgxbW477paa7gIBqCnUrbUBiQuhAKDUot13IbBlDtiyBEyvtO5VDxvvVfxW/JkWNFrCeK8NAGsY7BsvKQC4hQCkJNaKy2LRIsg6SJ3IQSe1onKKC2CsOYMeN+0Dtj0ObDsGbFsEZmWp5S74g2Ir2uA22BScAJGA+dJFwPQ8ML0ETAUAkgDTPq9zdK/+sMWpPF19NxYwA4g3PtsHxAE4SQC6FdSgmGWRRIJLZJll8EGKjHiX1jwaN10HzD4BbD0GzC4WrsKMW2pNobZoCu6CLCDfCTqzgg6sr+wFphaAKQfgZHKvpRSYg7HN5XCL2AbAZwPrZGaj6ippXhgn0kqmU1woxnHedg5AATuWHig2FE1uVRwoxoX+Wcbg89S3AqCKPONcCi8oPtVP+9++G3j+oSK2xRBFDElUxbTS+3nvc4FpDsjxllXQoJg8FgdCQoGJJTTicLcQ6vPL6wbg9cDM4cJv27oAzFA5ky9/UOSvmg8oP86n0dICBn25JwjARWDSAUgBHN6vfdbv10AbARh8X91vDM2ss+NvAECKPVLCsHoyUgRqrlbnRwB933OBc+4DXrIC0IEmiLnE75di8HsyAcjzWUVGUi6uICMpVwwJVMXdeOk3XAxc+Hng+vV2esAYw+sWoP31r3eLcLwQBeQUrEHh4Jo2h4vDmJPuAyMLGAeEn7uqbgB+I7DlSWBGCwe31Gb9aL20kGDb/EGRxY6WTz8f2wtM8l4pgL1SgM8esHCvsuylME4nn9cfQLtldg6TZ0kUKorAfij23vAPCmqp3fcCl60XFINid1PlZrf41/dnApB6wSQjutUfIDJR8CGIQOwWEH7DywpKrWc8CFzqRLHkVYrB2jS2FQH5vkuBycXCAlIUUAAkCM2iRBA6+ARCe7DjYmQduLYTleiQ/XTTS4DpI+6nLhZW2nzVCEBaMLd+soIGqjD1ampdugiYWCpeBKA9bBJC9ActAk8LES26SqsftInLZ44dQif4Igdhym5WLrPDyuYH/7HTCNwDnPko8LXrBccjQaioe6BiKad3+QY/MGTH6rS3OBvCnQDuAIyqhiDkQ9RX+29yE3on8IwjxQPI8zkTiApGU3oVkD/4fGDieAuAdMw5MFQjEgg1DYsUku+a3uI0TGBfV7PotwHwaOEmbHEATvuDIutni6UAQoFRIFRYhfe/dhEw7tbe9Of0Si1g8HkrwRcevDajz07gIJ7n05rYyWIpb4ya/7vv8PRdFpj/LXDmkQLAnA4jCCOlTBRN/rFMAJKgkkVHpGUjySSBSFeg7/azqk8EgbSEq8UDRACLKDXSyaQ7Br//DcA4LSCtwnKhTEkQcmAIQhtM+Uaajl0uS9NatITXWzpzfcdNB4DpY+6nBgDaCtanYLN6fCj4u1ay0QIqtML/EYC61wSA9tAJeP6eWsAoDysFpg1eB0HIQRCIIkVeCqQf/05P3WCB+UPA+CPAzvmCaFWDKEuYcl1yMN+Y2dckqGTeHPEvvWDSNhOAfbefX0A6rS8CUw8X9066bFIfdqMHJID++DJgLACQumyc3gyAEYRRKFCLD1eu5ODLF6QvXedx0w3A1BwwxdAJLTXjd8seQnGrZ9bPFxLyA7WIKON63tYtCQBN/sv9QPm6BkLp0vl9t/m6ietR6fbyBA4gnXtORwRRpNnTtPpW6gWLH83lKqcOFTEnDiKtoHwy8RNFhrefyeztbnrBfbWfgttsP+kIyO32ELD1cHHvInrlvWs6TsnB7qAUlg/suFtAWkE55zYQ0QpqcALoNCXTEt7A3KoaDwGQfqoAOEUBa7fUbKctltwCajVbxvSiyvoasM0BaBKwwdKb9fN7NfcqBWGiSWykWXER0umeacUEonQgCKRfIgDFjya5yq8Wfsfs8dYgiuMxgpAg/vnMzu6mF0z6Zj5APdvPQec0TEosnvQosGOhaLuIYvnwEYSithE52F1XFAA0p5yigD4otCqygFKnpHUpLYP0OcKURYv6Mj4MNR433QhM0gL6QongawOg+6rl9CswKoSkEIxPyTsuAPigCYBmAXVfYcVf+n0SRYw6dP1YwNgHsgSajiJP429RrpWOM6cxDiJB6NINM4w7LbUGMQUwB/M9mZ3dSy+YVG0EoBiDBST5ddZ+PkCsAiIlQZDa3LVatJ0WXG2PbL98AB+4omB3oP/HgTUhmGgBfRqWf2TTrUSjExDSP/qWzQDgfAFAWyzR8rkFtDAKX75jo6nUguZxZ8NByHbvvqBQ36T1swcsBaBAGGRg40Ir+rt9WUDhQ5ZAU7Es2e9LLzglqHRxNkbeuW+oQRRls5jaMjnK0a9ecNf2R4LAwO829kQB3LTtEYQPUwzQAWgW0AGo8AQH0ljp/V17pm0KRcEifGuNOnocO1rACQbKPXhs8TtNwVr5uh+n6Zf3wDgu29g2FdMtOc8B6PdpFj08ZFrplw+ZA5FTvAQQ0/BT36FPDkRqBT9Jag7xYlQItY0f88j78sZzCcKPZlrAQfSCK9uvB4h577SCotUiEJ8opq8IQFl/PUBPEoBLxbRE62LSqG4dFB8r5bHcOtiOQSqT5T7RKzYDgJx+BUCCTxZQCwhaQc9oKcEnEBKknj5FsJ1LAPo9xoWWPWDy+6IIoqbeaO0VA+zHB0zxIQDKkn1GgtXiRxMIAx0Vn0Db+lkuFjLRCt5WEwD71Qvu2H5OfekD5FaciQay/GIbFgBXriwAyGmJADR1ck3DwTE3TQ4B0LetzBJErTYAr2BBSI3HTS8tLKBZPo/fWQDZp197Z3scjGb5BDp/L3+njMweB6B83Gj9wj3atOsPWin9WgXCFlVO/3ctf4iD8XkBkH5USlAZlNPZAQqARr5vxu1yjmH0givbX0UQKI63o0Wun/xHuR8E4VnPK5JQLd4VNttTBvK2uoiKOUf/f+GjwMNBh0NMV6J0c0NpcRv7mrYv3kh8/uHxYp+bVpwLp3R7sts2YzouSq3KGa+q7+x7Co4nazAerRKsVlV1QitF59dyyFZaYY0HMu9mWL3gtvZXMbymBIFMZ1ov2h0B+LTLisxgW+Eq5uU92iZ72ud9vvR+4JFp4NjkRh2ONi0OB1/UBCkvEYRhfuNs4OmhhiPKnFQlx6aAjMnSXJUAACAASURBVPjmz1w41nnwO4cCIBvBwZgTAOUHRq3gyDExD4zRGVYEnpm5LqmQc0M5esFt7acFl0SlHiBxuTkYxxdaihUC4QVXFu5FCUD5QtJl85sjGA0ziQxqeu/fem+hw0F2fLLQGxFlYMRvo7v1WmIVtpt1DFkXvOR7LwJ2HSkyoZmEypoVVe8p7b6qEMnidGG/Vl/L2aPOIwuA1pAIQE3DAmFa4j9f7CPaFpCHKujr5xzZesGdHqAqKz5X+FLRAl58le+jui+kTBALMcgZ73CDBkpN2/7+bfcWOhwUyCEAjQTcAVhKdjkPc2RajewKyu/n1//qJcA2uhBMRGXQOcn9U6JIOjXHQqSYOsVoQp1HNgAvz8yny80H5PVz9H6RqVd849WtXQ/zA0Ow2ayGLJ474L0G79vvbulwkJi8BGCg4S01SKqofoNvSIC+5zkhFUupV8rUTpJN06KpaBkFQm5M1HlkA3AyM5/u9Zl38zrk6f0iU6/4hmscgK5ISUtCTowyDqb7UxwsqFJW3fo/vbuIBJEZ1YRgyHwQKNi0KEl1OKTCZJdxtPDn//v8ooaDaVgqFyiTD2IKfcjZS4Fo+7g+HXOPv84jG4DIzKfLzQf8KVfI/FNKrQ6h94tfz+vOA9cGAAbrpylY2SDlVTTt+uCnV3/V3a7DQQAysJAwobZJgUXi78Qayhd812WeiOAZzEyUiAkHMeu5BF5FwZQAWLPwknkLQy9CrPMy8+lIHZFzvN3T+YbV+8X7c64OHHix74V6zIxB+RJ0wQ+UU992tYoFy3fcXcTDxQkoPsCUhFIczKVCegSg5B8A/PILN9ZwxBSxtiKiUAOi7JW0dLTustF8AGbm0/1o3vjjnSGdj+lYlGwdRO8XN+c1wABIoHk6k61yuSCJITq3jDY9Vx0BqK++uwAfX6JkI/hME0SC1EGguiQ+isqcQRLrF6/0jO2w+6FMnZhyZYsQ1W50qOHgPX1NXndtODsfgMwHzMin+0+ZN0S9YOllMzWfLwKQSS396P3iY3kNOLDPM1y065H4gOW3p4uTDkB8zWdb7FgbdDhEgJkCUDRvogTmd/vPv3BVAUBuvylNzAAYi4hisVQnEHoIqWblrxqm4Mx8ujfljT+YjsWBYgIOc0oJPsq1slCpH71fKybJOEoAuuVTRSCnYlmU6P/Z4iSJEcbLv+Yu9/1EAh7JKEXDKxq4ChUiKymRbwjgHdcUWTARgLYXHSr2LOU+BV7MVwzxwOfkOWybYAGZD5iRT0edjpxD6VhcOQ6j94tP51wdOHBdMeXa9OqWRcmWXA1XLUIUH6zyCwlAs3z+YBkfs1u+VIejJEF3ckrjI9T0y/aMA2+/tgAg08VURKT8vbKMUgAMIGzzAcOi5HknHQAz8+l+MW/829KxhtH7tTz+jIMAJPCYMULAWd6fvi+EY9ouoZBM/Kx/4LUBgFLgNC5o16FrE8JJVJgkiFhaQQBv3+dVbMrWVsC8UxFRkjjaVsW2DtRdOJ/vAyohVYK7A+bTvTdj8HlqTMcaRu/XxHkzjgNkIOWuDr8jnYYDKDutgpUhra0uAlAyCCUAK8BXcjBXgLCk/h0D/hcByDxFAdAzoFUqUBYRJTUcMWdPP7ONL6i5bLQeALJRQ+bT/W7G4AuAOXq/lsGdcRgAY+glLkYclJVTsa6ptCX3uQjAKINQstFrAZKIwWxQIhIJuovB/Nx+r2LzFCwlj8Y0evl/MYk0kieVtcvrwGUnHQCVjjVkPl3mItQsIPuElx9G79dOzDgMgGkAWlNyBJn8xKprBRC+zgEo4LWRgcdVcOCjjlNvmx84DrzNAahaFZWLygKWxUNibIhTcPD9BMLLa65bzreAMSGVoXvJ/Cgh1WUfO+XTZS5CDYDs9GH1fnOrIDcAkABTTDCCLYK0Cwi/586WcKJUiEpC8CCBYDsiiSplqUIUmOjf+o2tIiKVUJbgU5uSWl4DWwX4+PcXnrQATBNS+8yny1yEopdcay+930y5YhgAg+9n2OoUeI5TdQer+32fdhmGoOBZanBo+g1yEKU4dYgFSvqB//vZBIBt9RshkTbW8ZZZ2hUgvDL3iU3uux4LSBM0ZD7dPRnTH08VAIfV+2XAOucQAMuVcKfFSD/+IAABsEoGwYAoHZIKEEYxRIHwLS8pUuhjFVs6/ZZhIVWyxVKBBIRXnbQATBNS+8ynI4tBzkEACv+chlUVIKE/5cRGsWmlKfIzudc3APLQSlg3E2OCyVRc1kpU3DgBmKoQsWtlBcswjPu+nfTYtBL+GQdgOf16GCZW6pXlBCqWSgqJypoOAFfXXDifbwFJLvi5HAjlnUsiIe6AjOp4iQNQHRlT2PlgJCUbbc2s+v/hFwFb/q7gm6HlYpBbmTV2sscQyy/qFBj2v0/cAdz/HGD7NDA1AUyOOU+1CwWOewNjKj6/O03F1/WuugW4/XJgfBoYmwDGdH7IxB5kLPIB+I8AfNwZgga5ck2fJbEm8V9zNWPfrasbgMuPAcuseJ8Exsb9FdBhA+7gaQNKB6TfcgCYug+YJT+g89aoBDMmIMScP12uTKj13uDv8zsKig/uJ1uQOsnojm3qB5P5ACRBH3OhPuzzRN9DV88HqQLEWPJnvTy5nm/t/1s4BcuSpRZtGAu4fi+wtBVYEyccrYwn6hF8/FkJp9bKxAKVFsn/d8urgbHPA9NPOEOWl4+2cfoFHhfVrJTZPKHSj5daOtup6JyCpPx8rHWRVQ7WOlrYCMx8AHIzlxkALPD9c0VB+x/A3E/+E2fUYHXdF7KTGwdvTd0AHP9r4PgWYG0KWBdfsBdsMPfPrKKsoL9XAVLAvO2fFylCE4cKliyrDVZNcGS1CqEYhWFiAZV+XntaURdTLmpCEbpchTYLqi6NrkMCzLzt5Xc4HwyJmmkJ+Z73jQOh4NWeDUZiK1K08f0EXt7CMHVawIk7gaVpYJUA9LI1Ao8bzKX1cytoFtFfpdCIWz7rgzHgth8u0oPGDwETc8CEMySUzFaikgtlpW1Ta8JqNba7lVljSRgW+Q6ZP/57WQvj6fydBjXfAjKbgEvMLwWCvhNoipgNpnQshlS4IGFWzIk6ylWwAz93ETLxGWB5ClidLABoIOS7pmGfG+33YAG5mND0G8F4678vkiPJczNOAC4UyQm2N8w94kirFlfIAl7i402d6dbPWWAtrsjOFiuCvAJZOQE0pHTFsckHYDeCvhNgipQNxoAz8/8IPr5nbvH2jd+6AThJAE4AqwTdZKEBLDoDgU4+YVkPHIBoPwareOt/BkDexsMFAFnbzNJYm0IDnVwbt4uyur1kwL7Tp+iZM/08WT9Rc7DHUmuYTr/x+6o4ovvu9fjBbgR9JyA+omwwxvZI5ULg6ZW7y9FPf9QNwKm/CgCcKABovh8ByVy/UCtJq2f+X1yYJPGU27lIZLbuEWDsWBHesZeDz4iURLUWa1TE47LqK12fZmd3OXidFctqm92KatVs1jAEsNv6sdymaa2g8+xUL4I+Pn2beCgbLGWHI/h8G3oTr45iK86POlbBU9yKI/AcfLR+ouQwH9BfmmbLlTHboOnZ/T9+5vaf8FUaAThXsFOQ45mUcgZCWTAxe0UQ+urYMO1/37GtxQmoLCBtRSp30LrDp2SFdzYMgk/R+VNwvwR9mwQDsaspGSfJgYDYNTbp8psCQFJxEIBkQjDrxt8dXCUIY+COH5MVFPi8SOn2n/QYLZ9Gp0cxANIP5IvAkzVzxivRydnKNzBa8fddM84b6AFyAriMF2pajk9kYIeoClXmA3AQgr5NQEHMBqMVFMNaIOayNRL/vhlH3RZwmhbQQUcAasrVVGz4EtjCu/3dfb/ID3PbT7uKAZ/MhcIC0vqRTo4W0IBIEAmEtFwCYqjW03bcmdwBYeoWgetUbrR8snrloiR2drpACf+rD4D9EvTVjIJu7HBV+781X752Czj9lwUZkTEgcPoNPp5Nv4oBRhCG6dd+1DkMz1JIhR1BAHJ7zwqO3fIRRM5tmDK5CoQKsSgOeBYBKFZULTqcB9r6Ni5KYmd3WKDUA0BlhNLM8EbT1QBXBU72aI5ZjUcVOxz7WLkQ8d37vsart/uA6RcPsxNSAtAXHDYNC1AEpf9s01kKwuBwGU7HgVt/1jtD1e60fgQigSe/j5bQp+KYpGB+H62jT7P8/ZypBIC8Dhcx8eY9wF015abhmnoAyJ5WSrKeNgKO9SHxnT/LSasJBim5lRjWBEIVeROInKL1qunybRawLgASdEy74qjaNNzJCgqEEYzBGvK0297mAFSHEIB6ebKDgc8J1ksmV8t29f1en6L5v6cxIK5iK6Xne/5jCTiFcTqVn/r/tWDPWwXnEPTVgIKUHU7ljASawKefIwDpMdRxRB+wFgD+RREDJABpwSzz2c0LfxczVjkVKwaYgtBBezu3SvX08d39P5uO3QKahXMQciourZRAGKZWar/YZ1xXRPe8wQr2AUK7TvbOVTZBXx4MBECRnConUBSFEXT6mf/TK+/qmzAF/0UBOPqBZYF52HrTFCw2LH5G8UCzJEko5nZqmRnPh/uCXmpnVpDTsIPPwKApOaSA2QLDLSHf97iPx0tpISLfz7bl4iFfsUsnj+HZWEeOYDCDnDmCvZkEgedcCjxGseIhBYt3vx049HwMLRh8gA9gh2MoH9ABqKJzxf0McO7XlSAU4HzhYYFq+5D7hwBu/98OQLlIBCKnW39SlXNY+nqeiq2dkQg+gnGPb9/ZpT0lq6MV5D96gLCwgDmCwbdnCvZmCgY/dxy47xxg5SWuUjigYPHFbwA+fyGwfr2rXrMvPB+vp3L3GHCgi9JOHQCkRVPppeUBigXLFymyejYTB4YsgfA20ofRAlYB0FfAlvQqP0/TsX5PLOB5DNu471cmIwiBaRww/F01J+mz2pqChxUMZvpJlmBv3iTocsW4dzewfhkGFix+2febXDAeJO/YEILBB7pU1g8LQFo98QASVGYNQ6DZfEG3fnEqrgLhbf/HV15anbkFNCvohWSl9XPQ2XTM/2s3I4DwPIZwBEDfgitH0Ek6N6x+u/iD7T4g/YdBBYPpWHEaHlqwNw+AQa4Yj54JrJO+aQDB4pt+oCAyYvOPEIQDCgYfeF/9U3AbAMX7ItAlVtAspKZdz5SOlvA2pstxjES3wJ+92NgAGK2gwi78QoVfEhBeQACqNNP1RdoA18kKdgDhxkUI/zKIYDCnqyzB3jwAJnLFOEIW7QEEi1/1Y21ywVglCAcQDD5/Efj7M4CVrZ5AKlkhxeQUaxBI4nvFzxf8IfCVC4HV7cC6ZEX5nen3VX1vAGLZq8ysrvHY+QBwbGfI2E6JpLvdX+ksthpUvQrmX/sVDGZVUJZgb17vJHLFeGQcmCdVb5+Cxd/5xjZ6QzzMLOQBBIOfTV2Ps4HFHQ7CLQUQmUrV0rgKJMsCjsxGAqTn/hzw0EXA4tnAyg5gbTYBorKkUyLnkB9YVhTxu+kT13iccwtwdBewPAus+b2ar9xJAafqfgMQO4dh+J9+BHe5gqZZZzYok1JJUcpaR6bp93P+W/N6p0KuGIemgEWKgPQhWPxdP7NBLhiHKYHUp2DwpZ8rLOD8tmJQVplOLxAqmbRKC6EDYC7/CeCRPcCx3cDSrsISrs04CPm9ArZk55UvKAspYLqPaPdR4/H0g8DRHcDyVr/X6VabLHk2PhjpPVZY7d5xwF6CwS9y/4LbbVyQsEKIufGiKe0p2JvXOx3kinF0GjhOQY+oNRtljji9TQPf/fOV9IZY4Gq4D8Hgy/4W+Oo2YG5bUUy04vUcLCqSJVRWszJbNgxSmMau+q/Ao2cBR88EjtOqbgNWWaTkIFz3YiWrF4nAjtN0nBZrJnU+/8PA3CxwfMYB6LUra3oglL0tps6wlVha5rLiqd9AdDfB4Je6U0s/0BXTDYh80Sr2FOzNA2AXuWIszABL1JaKWq1R+nwGeM17OsoFY5XTVw/B4Cv+Djg0C8xvLYqJCECzgsxmZlq9T8e0XGUyaUizavPtxoFr/zvw2BnA0Z3A8e2FVV3x6c4sqwObckeyhiXAowUSADhD1XhceDMwx37lvU4XxVN2n3rJIocygkr/Vbs7fe+EdBLcfaXXQ3IPWIrpBB6XlnwpR76jYG9e7/SQKzarxM7qJFj8mg8UarMV9IZ4gvNDD8HgKx8HDs8A8zMFAFnPYQPDl0Co2g4fpDZLqKCxT0/7fhJ4fCdwbFvhRiwRgJruCOwUgCpeCvUjZmEFxhfk9W969kW/B8xvKQqnVgg+B6CB0MsI7P70AHgmd2n1NQ0rv7FvALIlVYK73MnQCDLThSGZoDpuP7uCeuX5n8zroB5yxThGnQ0CgyBMxY63Aq/5aBHG6EBviDlOLV0Eg1+0AByZLgbl+HRxnZXJoqqttA4ODovlJZVuSjTQFtq+NwNPbHMAzramdVpVs6wEoPtdNg37wJfvsYiJP9NFqvHY+7vAwjSwxAeNxVO8T6aNVRRRlT6hHrJ0Ovaw0WDJCKng7g86APvNB9wg2JvXO33IFWOBgn8EIf2nRLD4tbe1+AU7yAWbZeskGHwVdd2mgAUCcNKnJgLQrZ/V9/Jnn5JUYmnAE3hCmv3+t8AWQfSzyPK/POOgJgDdsgqA5nfJAvLdLV+bz0kK4RqPZ3wQWJxyAPqDVhZQyQr7gyaXI9axWCFVAGLvRUhV46PgLnUWBs0HbBPszeudPuWKsTRZAJDTo8l8ui/42juL5veQC7ZpsEow+OrZQlqVVuH4FLA8WVyDAOTAmHUQCAWQkOlsQAwDt/9/AE8SgPQpNa07+AhAA6HLXbb5Xr4IaAMfv/eGvP5NzyYA7UGjBWTWjh40v9fSyscHLtaxhJWxFVsNNAXH1khw983+DYPmA5aCvXkdNIBccemfceooAfhAAcA+6A2xLuAGucxrzgKOMexDfV9OwbS2BB/BEoqLSrBoYGgJ3E8qLcIEsP/ngCPuUy7S13L3wb6PU56/m/Xj4Ps0TKCXQA6AXuNeZY3HMz5QANAeND1kwcKXlj6wOZQ+b7R+Pi0PD0DeFAfk590CKg8qncfoFzIRVWVqfFfBhgn25vXOAHLFWCDbvPstBsJZ4LUPt+jdesgFg+qVptWq11bg2gtgfuLiRAAgQeg+oEmsOujsXb5SsAoCIN/3vx04OlNM6Yv0tdx1MKvK7/TFjVmeCD4HQQQhf159eV7/pmc/kwCcKABoeYvR0oept7SEoZQ0Tr1lPuPQFlAtO0nyAcWhpzw/FSjFzGjLx+RGvxzoSeC1hwsA9klvaFN5FAy+9mJgnhaQ0qqagglADo4c9AhCDpJPl5ZommQ8738HcGw6AJBW1VecZv0cePwOY0/wl1lAD/WUCx0mMlDLr8bjmb+Dwp3x4nkDYbD0thIO5aNtfmDi/xGEeRawxhs7Vb/q2huABQJwAlhyy2cC0xoggjAAUCWWAkksOiIY978TmOOqeqqwqAx3WGhHK06n7TDwOcAV/iipPAKjwgrZm2o8nkUA0gKmAHTrp+o9MTrEYvq44o9pZIOtgmu8mafCV72YAKT/RwAy5OPOuVlAAk9Oule6xQRTWUKlWtkU/IvAHAHti5oIwDK841ZPFtCmdr0U8PaC9hVultd4CIC8P2Ztt/m5/qC11TJXlJDGGpfGAmYODgFoCxACkLpuWh3KCgqE8gNVZK4KtxgjJAB/2X1Krao1rfN7CWZf3LSBT4uAEIyWBVpipL7GgwA0AW25GbGENBTRx3rm1M2w39mmrFVwjTd1Kn+VAZALEE5LtIDyMWUBvbLNLGHgd5H/V07BDp7r3uU+Jadgn3ptxekA5MBri0/Wp4wzBjDbCnkMWMqVpE8GJwLQqvfc0pqbkVj5aNk7gbCxgJno30cAjntowtXNaZ1suvSKNhsYTcVKmw9F5xGE+94dfEoP+JYhD/8OC8eIPUsUHokVVKB78XszbzAF4Pvd//PCKVGIpOAr78mn4DZOm8YC1jco+w6EFTDDPJqeCEBZBa5GffVbhmQ8DtZW5TYOvPhXip0GTuu22lTMLSw+aAVl9QhEWjurI/aQiLJkTMLsX9R3r/ymZ73fp1+37OU9hunXSkdl7T3QrhKCtlCM59k2i5CMMSIAGdqxEIwrmptzTsCEut5yilKoJLAcxCq3fe8tLCDBFwO+tKjyuxSCMdYEXoeDrHcHvu0tTwLzmwHA4N/Gh6zNCqqeOSxC2lb8tQSiMwbuqXIqAcjFh2JjBKGJyShQG6ygVbfJegULWBYcMR3rvb6oCRaQwFPgl1M5rR7/JtBZOIZWx/0+s4QeY5z/1/X2tFnAxPpFELaVkdLN8MWGVr4pCBsfMHN8bmTKfCjZ0Ncp456/x58zLzfw6Qf3ABd8pUgEYmqk5bGyek06IQl1bkXScnlN/u8L24Gdx1qVq91KQvrpgwaAAw9p+wnXPw1YjyWMGtDo2ASOFGMU7SIEUzdYD34vMPmXwLbHgdkFYAtlGiim6DpxJtvq9LtlVr/aWKEB8pUXAOOPAFPzwBTZ9r04vdQ9Ts4pAZ3cd+yHxgfMAOH+vcA69/9Uxijmz/AerYpdar1lNSMYzV+vWY/34I8DY58Gph8Bpo8A04vAFEFIknIHohGVR62QhFRSYjQE6qFri2z3iaPAhHNNlxKwArI0Q1IAxwfReacbC5gBPp66/5ICgLKCtqnsrKKlrFZUFPKOr7osMTtdsxzqQRZ93Q1MPARMPllohUxRqkEK6gShOP0S+dY2hlRv99y+ovRi7IiTnTvLqmg6xDPYpqAUgRgsoR7MxgJmgHD/c4E1FXu7FRRbvEgd7evXWlbPpp9EgUjiJpwe6zwOMlvpAWCMVusJYPIYMOlSDZRpoGiNxKzbdIQlXONMWJbGtw4svdgz3El47nzTRvPrrKptAJT6ZrzfintvAJgx4vsvdQvIXK5VYF3sUZxmJUvgA1FOvwF8spKyBtM1y6EepI4LqVMedbEaTp0EIKdPKh5FqYYqSxgo2jgFr13j6XXHnOiSZOeBVSvyC8qC2r05FVvVw9cAMAOA178AWPMp2LJaaekiCPXExwHw660n1oB/niGQazwOkkSepbJ/72I1x4CJ+cJ6lYI1riccrVicUuVSmIW82pkwnHHVOKbFsOozQGkFkwewnBES37ABYMaAX39ZAUCCb82nIlo+40p2gNnvsoKunxH1xGwA/LOzdQOQJPIuHzV2GBg7Cow7AI0l33XfjOsv6oVodes6ISbBsAZMX+kJxU56KY7pkmFVhOciuvTzSt05v0+ryuT/9gDrZNe4wPMsI7VJP3GcP7gUOOdvgL1rRYJ0ZI5IV3hV4/wrGYPPU3/AiRhYusy2K7mU999P+z90ObD7LuBZK0Xdkeq9NSX2+o4HLwfWlopFCC0fgciBMtAFC8CGrYXVoVjnU2G7rTXrzh4kfRzLY1kyGwBoeiGcPiXb5eAzdXWnazPCSScb4j3xfmav8Cx2p50lAMW0VXINitCogl2r9H2dcctWwQxQsn6ZTBbMNtcgdKIbiZj51VcBk38CXPxoQcfCUg8pjcYgZScw/momACnXyr4leBhs5QaBTHpf7X8dMPYJYO8XgAv9e8QJlAZZq8D4xSuANYKPJQn0AR2AHKy1MACKe9nfFI6IEqduEWoHIJ9wlsVKLekoMCa9EAegSTYQeM4TXco2SEMkAHEbBZoj4bbYtdyCVrFqGXgTSxgXYTZeHLi9AMjEQRCVUXP/n4KUaaT8vVTi+Rtg7GPAuYcAWlMCgUVkQfJ2Q12yBvPXMwHImhDWwf81imsTiLSEvHZkr+jY/p9CQRD4p8DOBwteItai05qn31FFdfLlFxYWgCDUIkRkj/TxbCEi/89jfPZ3X2VqYSJQbmUNQY3HQT7hbv2sLoerVwKQHNEEoCsm8R4MhPRjXUGzVEIKIoY7yaEYuY4dgGb5RXruoSgtSCLLarkICQ9f6QNykGjFdjsIBaI4kGlt8W+Rg5g0HJ8qAp47nihAzFpuWtPIMBZJlASILvR6fQ0DCVbJCkJOJCqnk4pGpb99tZ8MopyiKDX7WWDiwYKXiEQOehCrgKh+eJQ+EQHo1Lby/zRlyf8TIbf9XS5ftIb8I92YugH4ay2pLusorl7dAoonWtMwQSTdOFuQSLTGHyIC8kxSIQuA4hwU2WUAoO4/grBcDbsfWElSzg+JCoYDoEGM1ixSkHzgF/wG7y8sIa3J7JPAGWuFJSQIaU01iJHUiYP4e33BrPOHmG/JMaOfTZVYRhwGav87vWKPJ9/rSH4IOGO5sITqg/ggxXs4TOaBAECbeoOsgfl+DrQShFqcEIhyyt0MbMusEkx76iAZXKM8BvXiZAGlF+KaIbaadYpem4aDgpJZQz6YJABV5VcHAJZ0v4FxX6KG5UpYs0KnqjhRuagEVgPglYAl9ciHf8mdUrJh0Qx9vkDBzBywfbkYQIGwahA/kglATsHsDzKA0BATiPyZ4NEDwIeoa/uFYKKXL2f24nQoIgd9R3yQCMTFqwIAfdBWI7+yB5ZLECYLETd85YJl+2YAUNosLIel/xYlu4Jsl6bhNhD6it4WJCvA2Zc4Gxo73RcgJeOqFmGR6rcChLYACyGojmEYdj59KnZ+tIQRhH9IvWA2hiREjDeRI9Cly7fMF3EtWRFawhQIf5IJwE56wdTIYdt7tp9ys1K8JnoJvod9Wn682PNkP4hUy1ndWgstAtBDMLYN5/6PAc5DGNoF4SrZfN+4+IhT8jqwg2Cp8ThIJ5vfSWBXAVCrWN9SMxDK+skaOvhoAc8me654pmUB3f0wyt+E8FyRAGmPlOEoiSD2qgvmAKoOm52fAuiTDHSyIRxx+lI0QxxADubfF5vffMmSajrWlP7nmZ3dSy+4r/ZzAUEHnQ8R70HsXlK+PgJsW68G4XYGZj0EY2EYATCAT6tAhmE0DXcC4faapcwMgAIfLb0kuzT9Qmw5uwAAIABJREFUSi+EfeALkSrpBovbrQDnkm8wAo8/E3i+CCsZ98NCpAp8cUekZyBavI4ET/TnaAk/RQCyAXy6uNSPA0i+wMeB6ePA5HFgZq2wpNGK3FUDAHmv3fSCe7afX8CB4UNEEOolVi/3obastNwJ9cO5BOBKEQMsAcifHWzRAigWWAlCn5K2bQYAOe1KMjTIR2kRUhKVS7IrLia0v+3xwHMZMCbYNP0KfG79zAqK5DxOvyEuWu6VD5KSHy2YAEQAfpaRdl5UkuUctIpBnCIIl4psD03FtIIP1ADAlBuJM47EqqUX3LX9kSBQcuuyftK78xUkHyQ+RLqHZ3Fv1KcgLj5kAQ1s0Qo6IA1nHhNLQzA8ZxvBXuNx8DcS5UYpNnoYxsCnUIqvZo0F3wPTMa7Hv53HOJVbS/l+5bumX7d+5WLE44hxIRJB2NMCqj9ixwuE90svWCaIA6bAp959EKeWChAyA0PTOV2unGMQveCO7bfqHbcS4rJR7Ewqnw5AWhLuImg2uFQAXAVs8RGmntW4+g2hB3P79L/EJ9zGvqrxOPibiVihAOgrWQOf/EBfBcsPNBBqW9Hv6zzGqFzmoXz3B9AePgXiq6bgiv4YOB9QHS8AfpkAFMMjrWAcQA0iO9XJiQyAnos2vV7ESHOOQfWCO7Zf7F40mZFQScRKAYBaSU6vAVcTgN7xXHiUFpDTMK2dFh56912BTiDcvpkATIXzCL4g3WXTZ4jpGfjoF/oihL+fx+0yWUABLwIwtYKKIabgCzHQvi2ggBKn0McEQDaKT5cGkIOo6SuyYzEfjQB0EM5nZgAPoxe8of3sgSqCQM3jkdFLvpRvR13+7UVRuhUFSavNO6otwp88ZZ3+t4M6HLtch6OT9AG/q9cmtf//gV1JDYcnQ2zY6/YakfSrU+Pg1M45NqPt3IEtoM7WFHokyrWKkooglCMWLYjiUXMtK3g8Uzd1WL3gDe3vRRCoUEYCwGtYFxxqgA2E/jI20F5hhmQod98BHNnlxOTig1aGiDanO21yV4DygWuB8YeB6fnC9WEtiKVVKeE0ZGiXWczeJoWMIig5a9V5DA1ANoKDeDylZ9NSXxyAsiKawrQqmCv2HVf5e8aRoxfc1n7xs+khItAUvojvyWryxVcWJZksVSyZoQRA3dcAoHzax4Gj2wtu6FVKM7gMgti02jbV476oUJJs1j/AbA1mQ3Pm8eTRsoZDtR+xZKCiEKmMXTIeXHPGdhYArX8FwG4DGMEnAHIK4yvT58nWC2b73cexaZgWWaEKgU1gjNbPP7PvOYGsUSBkv3hBtmRWNzxjTk9RWktvxp6POj0vARjY9sWkFel8RWxegjIF4RjwAOnZWMPBTGjqvHmszxJOBUD3xyznL2bqROvoP3N3q84jG4C7M/PpcvMBef0cvV9k6hXv+2Yno5QfGArRbaCC0mWv2YtF3ecerNDhkNZIIsXQRv5dlTtGADJSz2gEE1EJQM//026HdIEZLC8B6A0tk0g1Ja8DuzJdphS82QBEZj5dbj7gxZN5er/IZI+67pscgE7QaDOUMyC0Wb8+gXjuR4F5J6YsaXnFhBoAGEVvUhb60jISgCQnoh/OLBgvIrL8v7DdFkEYM5dtNg97tvz5zJqzdfIBmJlPl5sP+DJP5xtW7xffnzeh7H+Z+3+RpkyWT1YxuURJYVtx6T0fCTocouQV85VkHRIGegEuEv/YKpkA/JceVmL8kv6t5/9pu62tfiPWcFQVEa0DZ9WcLJEPwMx8uvfnjT9IgZyj94t/ldeA/S9tMaGa9SNdmsIxbvVscVJ1GScoMt4UPwhAsmMZ0aXzQBsvdGRBjQz0FUpEJRAJQOq4KAnBdz+sfiPJ3bOYn8fsykyVWMfiN3BOzckS+QDMzKe7OW/88aqQzsfE5kH1fvGjeQ0wADodmVGwOeiMsUqHrGOnS4UFy9P/wAEojkEnI+IqOIJQNLgpCXhcmLAtD/D+kgQE235L93tj+YBqgTX9BiCeW/NedT4AmQ+YkU/3sbzxBymQuZhm8g1T+QbV+wWFdjKO/Te2mEFNlCb6gPF708VJ1TXHgKd91GnZpDfi1k/gM2vqU3DUnCuBmNQe3P9vw6pe229KOvB0K1k+ZS+rnrfM2AlA3JMZtah/EZKZT3drxuDz1O/yxAwu9JgJxr3lQfR+8aa8Buy/wdWQZAVl+ZzCrG3q9c/YrkmHy3IRYryAAqAkEBIlopJxNNUbER+fA/H+/+AAdP9PmS9dazicJybm7mlB8nR2dI1HvgVkOlZGPt2nM29GCamcGZjAwlQ+vvrV+8X/zGsAAUiLVPp/wd+zaTMFWw+/kAA0GQQnpCw5mDsAMIrcRB5mC/+MAffTwgfwKY2KfmCZ6ZIkUShrxXxBX4yYaV8Hzmcn13jUA8CMfDqWYeQcSkhVOl8U6uxH7xekrsg49h8oiCENgC5TUG5vKxxT8f2aRtOtcAKQ1s8soPuOVUIwpchNlEEIOyNSIrrvv3hwnckWIZPZsnbcDyzTpvg3lU8mpZQqozyfK74aj3wAKh1LgrsD5tMxiz/nkGD1sHq/YNFOxkEAcuW7oqmXlisuQOT7VV2jwi/kTgj1RkoZhBje8Z83SCAEEJZW0C3gff8tADCt4VASaWIBK0HI9q8BF5yUAMzIp8tNx5Jg9bB6v/jdDPSRns0BWIZeUitIo9IhHmhXTvzCPQddccnZ76U1V/IvC4SBCFyg26DFNg7c++Mhhb6qiCikT7WVUmr6lYn2nRKyrdZ51GMBlZIc07GUBdMjny6XCiUmpA6j94vMZbgBMFo552pu27PXAqXTyAUQcitOQjAm9xX0N9pIwIPmSCmH5QuPqER0L4kDYgp9zOUL6fYxkbZcFceyAreAF3GlV+NRDwAz8uksnT3jiILVSmpWNlhMze+k94vMZfgGAPJeHDjpCrgM01Tdry9OzvmYAzAqLVWIwEShwzbRwwSEn+MqP6bQK5tZlWyhjCCCsC19Xv7gOnBRbgp7cu/5AOyVjqVMmA75dJZ9nHF0yohWNlhMxKnS+0XmMtwAmFq4imnYbrEqNJPc+9kfd62RKh0On8qV9hXZ9askEPgAfI56ziocUgVbzGT28lEtRMoKtg7lBHtznfZNA+CQ+XQWM8k4uglWK/NLYKzS+8U9GReXD0g/Tyvh4Ne17Yb4Zbr6g6y7/aNWcoPpjKRTsJIags5IJwkEAv6en05S6GUBfRWsUExZyVZVQCQwrgN7Wfdd41GPBczIp8ODeXfTSbBa6YYxlY8/p3q/udc3C+jTbtvqt2oadnB2m4oNgMn0W0p+hYWHWbwg9yU/0Kb9EIy+5y2hiCit4UgKyTeAkN8Valk4Le/ldlONRz4AWWBRM6fdIPfHstw/G+SE5rMnVQ/kA5AkLHS0ak7V7reXfhgACaBqDtD3e/nmc5k9kA/A80JReq+U38zGVp3ObJo/BvAOD3dtwiWar9zEHsgHIGlFubqSx7+Jja36anLLcDvvgwA+NDpDfILv+qlzuXwAXuSjrkKemlO2e3U1uWUYnL8dwB/5e2apca9LNv+vsQfyAUheX4VguB+mzIsaG9ntqxhF4Xbe3QD+n7/uHLAW9wQ1tblMRQ/UA0CaHC7plXEh+q4T0OWcfhleYTSHBK0EH/mi+fcRuKQn4I6fWpeoB4AevCz3HOOm9yb3F5mBlZBNclYCj1aRfyfrbgPCTR6AzK+vD4CyglX7jpmN7HY66d1E0ctdIrEEE4wEIMlam+Pk7YF6AMj7EwAVbU82vTerCwhAXopJN9zVI+AYrOeULLZgErY2x8nZA/kAJGWr0naUWdFpy2cT+oCWjpdjLFxE5UzYIBBpEUX5nLnlvAktb76SPVAfAOUHpiAMm96bsVtCAMaKALICMyxDq6cXfycA+b/mOLl6oF4AiqBRIEzBp7/X2Af0+fi1XIioMIlAI+AIPIGPmeROWV3j1Zuvyu2B+gHoFfZiDS2lC0LiY52WUADkQoTTMH1BFSYRdHoRfKSu5v9qrizMHYPT+vx6ARhSuDcAzzmDo5ZGHT1PAKYMwQxME2jiSo/gEwBrrq+u41ZOy++oD4BaCcsXTPiSI3ey8s4KGoG8QwCMFM+0ggQhLR0BF19SXuD/ayakz7uR0/TsMcxg3SjfqWNA0hsrga/ojaq/8WPcC+YIk4Ke4CMSuB2XVht1Oj8zIfXlU8BtU8DhmYRXWdfrdF1fgr3+S8At48CD04DVjXQSDO70PTUnaJ5uOCwsIIFHSSFy1pKPWCDsZxCpw8UVgKSPxLXM937OzxxAljzcPAbcswU4Qh4V3UN8mKoeKm/bu78IfKJQa8VD48CylHQiL3O3/qg5Rf30BKACMtJXjXKQcfBSK8Dfqc3KVCwuN2VFGRnm/yKZtq4Re5ifyQQgM2A+BeB3GHaZBo5MAIue0l7Kt3cC4xhw+5eL7TuCkJk1jBtyerbUfYG5ExjZ/pqrxE5fAOrOq5SmowVIrRp1IyT2R6+fg0bgVYG4CsyZe2UsaiOGKXr4Sfp9k8CxCYAFSKyvXeY1o1BxQux91yMtfsHPutgnnyUuUvhc0ZsgUXib+nVkq6+ZKaABIHsgVZnuwD9sVo66rrR4ImdhLGSQ8zPL/JgBQxeU1ouWkO9PTgDzbgmXxrzMkatl3keivfG5x4r4IRcz5BfkO5vEZ0kgpIfBZ8yKjlL17syy0tMNcOn9dl4Fy6dLFabj1Mpvow9Ify+I4Nlo9Xt+ZqU9VdJpqZh4QDDyxUyYOYJwHDg+DhgI/WUVZl7aSEt93+GO9Ia2iuZKOfA7lhp9JpvAVy61w2mOwO5hmCgMHC1H9O24gu6UD9jP+ZmbtLRaSsei9SL4XDPbAEh/kGQ/pSUcc0lbApFWb67lQUhpVnLBsoKqqZclFMmUtrxPcwxl3X7vOCAtYLSCcugFQmqhdssH7HU+RznjiOlYXA8wqkOfkItTAom+oKygca4ES8jY+N3z7fSG4hfUtp3ihUHruVSsFy1iRvNP+1N7A5BdJACmVpAgZPhGOyCigEjlPLudn7kvFtOxuB4g6OjD8UWLRkCZFRwrLCEXJQQhp2K+37lQeBCRX1A7KPQto1prFEmSYn2mB9EAsO+kYfk8KQhZF8yjVz5gp/MztyOUjiW9bCUhEBhKRCCgSis45uQ/PhX/xfFWMgOnWu2gxB0TF/o0kEZ/kCDM1Ts+3RHYnwVUL6XhDFrAswfIB6w6P1MrTulY0sum1VICglKwCEACqvQFCUK3gHcsFQCM/ILayqP1k9JshVqrncMalOYYvgcGAyCvIwuod8YBJQmZpmGJeyRwkGw4n8jJOJQNw3idLFhMRNB0SgASTJyKoy/4ieXCeFfJBUeV2SoAclFyR0bbm1OHTUiN0/DTAwD7zQeM52dqj8VsGEkVE2jKetG7AEhQ0frJAv6RC0trC1skl+IWlNinGLbSaZg7Mc0xfA8MbgF1LQV1z08A2G8+oM7PVF9Ms2GUE0gQyp+Lwu2yagLgR9ZaYpkSypQ6a6Q2DCqzpkvietXIFdoZfuieGmcOD0DeP0HEbBhNwYPmA/L8zJQsATAKnguEqS+XTqkE4YfWWwCUFZTksYAYwZfIBeN9Tw0cjOwu8gDIZqsoSSvhEeQDiiGYFoyWiSDRypWgi69UP5sc5fIcquSCNeXqe2X9ZAHfM7Khe2pcOB+AT41+aO5iRD3QAHBEHd9ctuiBBoANEkbaAw0AR9r9zcUbADYYGGkPNAAcafc3F28A2GBgpD3QAHCk3d9cvAFgg4GR9kADwJF2f3PxBoANBkbaAw0AR9r9zcUbADYYGGkPNAAcafc3F28A2GBgpD3QAHCk3d9cfOxqYJ2au9RdPtdp/khoEOlglDYT39V1PzQFXLsMXAlgt9PCxJKPbufyf8/KHIPfBPAZABf79Xc5XQ0ZQ1Q7360NbxoHrlsDvs5ZRsgo0une06by6X1mZvtP99PNAp4F4LsBXA5gjw8EGTeqaGF4QhzQF80CX7cAvGIdeDYAfhdZ2sTKUcVrpE7nd31N5gj8e2dIo2osk7NZpMdK0Z19tv+bJ4F9K8D1ACj8yfNSikHeg+5Z969m57Y/8/ZP+dPLKZhP/rcA+AYAF7g1oRUhEMUzFMt6eSJfX78b2DkPfM0i8GIAX+uWlAMppreUUErn8p2gzTl+2flg/sDbTkvIOik+CP20//mzwAXzwDcCuNTPJeFXpEpM6QEjIHm/zTF8D7T5gATYNQCe69aAloRTGulfBESBSYNyxR5g/Bhw7hKwZwl4vk9LnM5JmsBzUyDGAX3B8G23Mz/g9BuUa/0IiutfMkj7zwKmngAuXSvOpUvAWYBtF4BTnspIj/O8zPaf7qdvWITw6eZA0JLQEhKEGgxZhUj/dz3NzSKwbR44exnYvVKcy+mM5Km0JhxInUtrGkmzCPicg3W5LMGkQiZZTm9xS9Z3+4m2o8C5c4X15pTKW2Lb+fCx7WLtjYxzqiql29Icw/dA5SqYf6RTTilg+lYCIXmICKQ4IK9wxfSJY8AZK8CuFWDnanEua9ZTAMsaCog3Dt92O/MvnRGBtGwkqKRmMEkqCaa+2k+0LQDTh4rP88UHj74kF1WaATo9QHQ7mmP4HugYhtEKj4PB6ZQ+FS0hQahpldPya1kXTOqNY8DscgG+HavAttUCvBxInitrkgL4lcO33c7spBdM3kAuSnq2nx9gQfAh4JyVwvrxwel2z3p4aMlzH6DM2z/lT+8aB+Q/OT4EEqckWQSBkGD6EQKQnDCLwBSnYgcf32fXioGUFawC4esyu7CXXnDP9tOCsyD4KLB1rmgvX7zfbu2WG/Jtme0/3U/vKxBNAMoi0KcjkATCN3HOEr3UAjDrwOP71rXixYEkeKMFlSX8ocwR6KUXTJ7AaNE2tF8WfA4Ye7Kw1mwvX/yZn+eKnvcrfzC6IK/ObP/pfnpfAGQnySoISBqUXyAASS1AK0JfagWYcRDOrAF66TxZQU7jBOEbM0egH71gcgXSFZAV54NQtj9YcNIpbONCyh8Ygi8CVospApDuB63g92W2/3Q/vW8AsqM4gLIKBBIH8bcJwMCNMX68BTqBb8s6sGWtsIA6jwDk662ZI9CvXjA5A6NVa2t/IAicnC/aGV+8T74IQPm/AmGuBc+8/VP+9IEAyLslAKMV/LgAyIUInfnjwPQqMOOgI/DstQ5Mr7UAqMF8V2YXDqoXXNl+EQQ6N9v29aKdesUpWJZbAPyPme0/3U8fGIDssDid/pUASCvCaXgJmFguAEfgEXT27gDkuwaUg/nbmSMwjF7whvbLhSDL5TwwvdRqo9oqHzACkCB8U2b7T/fThwIgO01T1IMCoAZxGRhbKoAXQUcQTjkI+a4B5e5FzjGsXvCG9gdqrLGFYrpVG/UuHzBOw2/LaXxzbh43DKeoJwlAHqLndSs4udoCoIBHQE45EPk3DuitmYOQoxdctp8+rFwIWsGFYiFFoLGNchcEQC6e+OJC5J2Z7T/dTx/aApYdJ37AyJK/DIwvFxYvWr0IwEn/H1Opco5sveDUhSAAF4HJpQJkWixp6k2n4IYfMGf0amDHev2I8+l4/UbvNw8Eozw72wJePOJ8und7EkKj9ztKGA1/7WwATo44n45pWI3e7/AAGPWZ2QBkYHCU+XTMfGGQmYIxjd7vqOE0+PXzATjifDrKtTZ6v4MP/MlyRj4AR5xPF+VaqZLJF1UzKdPV6P2eLDDr3I58AI44n07ZMARbo/d78gMubWE+AEecT8e9YOn2Uheu0fs9tUCYD8AR59MpG6bR+z21gKfW1gNAz4geRT5dTEZo9H5PPRDmAzBmRM8BJzqfLiYjSKKr0fs9dYBYDwBHmE9XtRfMsIz04aQZ1+j9npygrA+Akqs8wfl0BCCTWRq935MTYL1aVQ8Ao1zlAnAi8+kEQGZTNXq/vYb75Pt/fQAcUT5dBGCj93vyAaxXi+oDoFLyT3A+3Rcavd9eY3xS/z8fgCQX/LPR3SOzkon55jg1eyAfgD8M4NcAPD6aDmBtB1e4NMDNcer1QD4AbwbwxwDe4UvRE9wHZG1gNSXDLlwLNcep1QP5APxzzwj9IIAPnXhT5ORc5EYCA9HNcWr1QD4AmRH6FQBMTSZZH98ZmD5Bh5g1FopiNns1x6nTA/kAvAfAEwDudnI+EvQxPfkEzYfaCXRSBluQMB7YHKdGD+QDsBNBH/9+AkAobqTADGK7Inw1x8nfA/kA7EXQt8kgrGAGMfBxZ5Cv5ji5eyAfgL0I+r68uR0QmUFoBQU8vfNvzXHy9kA9AORoMw7CdGQCjoUZDwL4kv/+8OZ1gJhBIjGDgMh3vTavBc035/RAPgD7JegjODfhiMwgoqeJwNPPTaB6Ezq/hq+sB4AcXeXEP+ZhGVo9vRimIQD5v5oPAZCupgDI9wg8/qz/1Xz55usyeyAfgMMQ9GU2Op4eAchpOIJQQEz/VuPlm6/K7IH6AMjgGzdl6QtyX5jWjpQFevF3lq3xf6yhrOlIAUgQCojR8gmE+l9Nl2++JrMH6gEgR5UA5KYsc+AZmCbQCDi+IvgEQMob1XBEAHIajgBMLV+0kCdws6aGu3zqfkV9AGTwjftg3JRVVRAtHQEXX/wbAcoXP5d5CID8GoJKvqDAloKOoIz/y7x8c3pmD4zhaqwjRzCYyQg5gr2ZgsFTLweWr8XQgsXjbwLWrnNtMlKgNoLBmZAa7PTCAuYIBlMvlWQswwr2UlUw45jdDSx8HbD+Ctd+HVCwePKbgJV9aASDM8Yg59TWFDysYPBtmYK91IbNOHaPA/M7gUXKXA4hWDz79cA8+W0aweCMURj+1HYfcBjBYO54MMY3tGDv8I3nmWSHOzYOLJ0LLPGXAQWLz3oB8MQUsEa16kYwOG8whjh74yJkUMFgbsNlCfYO0epwissVY34bsHw2sEIRkAEEi/dcU0SP5qhF1ggG5w3GEGdXr4L5134Fg4kAjuDQgr1DtDqcUmZETwArZwAru4BVqsv0KVh8/o3F4v0QXZBGMDhvMIY4u3MYhv95Zh+Cu1xBcxuOU/HfeDIq5cv7FuwdotXhlCBXjOXZAnyrO4BV6in0IVh8wStLuWCsUAyvEQzOG5ABz+4eB+R/ewnu/kOP/3G/l4kJTERlljQtIot2e53/IwO2OPl4FLtcnCqAp9cahT56CBZf+LpSLhhz1N5qBIPzBmTAs/sLRHcTDKbiNHdBGGymOC/3hglEvgjAnoK9A7Y4+XgiV4zVWYDAs/etxaubYPFFP1QkLtCIP8neaASD8wZkwLP7AyC/tJNg8L/xLNBu+YBdBXsHbHEFAINcMVamgdWZAoRrfPdXm8KitLdmgYveWAq+2y7iMqfuRjA4b1AGOLt/APJLqwSD3+y5T1yI0AoSbAxMMzGV1o8/My2ro2DvAK2t+GgiV4zj4+3AIwDXtwBrVJeuECze+9aW4Dut4PxkIhYsdetGMDhvoDqcPRgA+SWp4O4veQ5Uv/mAGwR78+6rQq4Yq9PAOi2fA4/vBkKudKVU7VZw77uKvWFuZbtcMNb5v0YwOG9g+jx7cADyi6Pg7gccgIxlcA5TKhaD01yYKBmVFpBZMfx/m2Bvny3t8LGqoqTliZbVI+gMgHwnMAnCIFi897cLAAZ6QyzFzzSCwXkD1OPs4QDIL5XgLmk5JHk/SD5gKdibd38VcsVYGmuBTaAzEHLHgyCcaokB7/1IkUET5IKxwF5pBIPzBqbPs4cHIC/AaeqvPL9pmHxAE+zts6VdLCD/lcgVY3UyWD0Bj1ZwqgCggXA7sPfWAoAJvaEtZBrB4Lyx6efsPADyCtmCvf00s/NnOsgVY3m8BTRZPZuGBUACdArY+5lWDqGmYbIrLHEx0ggG5w1OH2fnA7CPizQfaXqgUw80AGywMdIeaAA40u5vLt4AsMHASHugAeBIu7+5eAPABgMj7YEGgCPt/ubiDQAbDIy0BxoAjrT7m4s3AGwwMNIeaAA40u5vLt4AsMHASHugAeBIu7+5eAPABgMj7YEGgCPt/ubiDQAbDIy0B8ZYNMbkX+ZekpuIiOQrPar+xs889HJg6jZg5jAwvVZ8B+ll9PlO5/Fc/o+ECjnHfi8zYfkvM5ulmp4qJXVqx5deD4zfAkw/CGxdAZgoHfuh131QkaI5hu8Bs4Ds8B0AWLnIRGCBsFfn87JffDMwdjOw5R5g8giwZa34jnQQUwDo99wBfJ4TM7COiNdlaj2rA/jeV/vfDeATAP4UGH8I2Lrc6gc+SHqY4oMZ74VSKM0xfA+UUzB/oBUUCKMl6zSQ/PsXqZD5KQC/A0w/DEwcAcYXgYnVwppwADuBkefnCim90FmBWXwnK87Uen53BI8sbuwqaz9p5UgnQhBS+ZN1zE8Ak0utviCwq8DI8/nx5hi+Bzb4gJzKZE1SEFZZgS9/2pWR/gTAJ4HJQ8DEMWB8ARhfBsaWCwDquwQKvvNgHXvOcYVbPFJPkw+dDxC/W1Y4tWDpw/Rlgo4lo1T4/KxTihDNpJwj3/UiMLXemprjffC7eWpzDN8DlYsQDiKtVxzEqoHkyX9HRizW+nIgaQnvAiaeBCbmC0s4tgSMu2rMePAR9X252jXklaTFU108K0MHav/nvJ6ZxVVk9OI7GR2IZoGQNc/HgbHgIwqILIVujuF7oOMqWFawCoRxkfEIB5CWgkREBCNf9wMTc8A4QciBWyoGz16rwNgaML5eWKpctYZL3N+TWLX0gvtuP0HHk2n16JDyxXmVhfU0qywbJbr5GSuXKxA/sV5Y9UYWdnjwyS3qKKgarWA69Wg6fjQOIK0HadnIjPVFB+AiME4AuiUkCFnESyCSkmAuU7Cjm15wX+2X2ifBRn9A8mKcW2UFjULVQcgVDl80u40SYh763FfvquhLCxitoBYUsoJfjXKttByMq9CKcHn4sPuCbgXNJwyWkECcz5Q376UX3LNncZyQAAADEklEQVT9fFgIJs6lBBwtn3Tt6FpIz4RWnuQxPh2XIGzm4CwQ9hWIFgBTK0gQHiIAJddKq0ELQh+KL1qUR4MvSEsoENIKrgALHNiMox+94K7tl9qnnMio8MSf6SNwGpYVjCDk/Ju7isq496fCqX0BkDeqlWwKwic1gAQSpzGREnFgREz01eALLvvq2Kfi45m6cf3qBXdsfxRbJMho8dimqOhEK8cXQRr9QVpvPoDNMXQP9A3ACELFxPh+jACkP0fLIKFCCRRqKuPUdqjlC9o07JZwKVNHeBC94DQcZO0XAAkmgotAk9QYrR9f/BvByYfMSATDVMzwTXMM3QMDAVAgVHCZ7/MaQK4QZUHiNCbBQlqUw74YCb7gcmYkelC9YFlwvVv7RRAorTuBkECU9asCID9/x9B935zYzyKkqpfiNHxcA0gLQgvBAaPVkCqm3h2AtC5m/RyEqzw/4xhGL3hD++MmslgqCbgUfLKAcRrmTlBzDN0DA1tAXUlWcDm1IOIIJAjlT/Fd05lbFQFwjdtgGcewesFt7Rc/Gx8iWjUCjGCT1YvWT1MwgUqrf3NG45tTbcu0aximWx9xENcEQHGbcYAEwtSXSqY0gnCdgeuMI0cvuGx/FUGgFhwEYrR80QckWN+X0fjm1DwAWv8RgJFilJZBznz0pQg+AZAAlVWh1GvGka0XzB0cCQi30aSGVa9AF62fLOB7MhrfnJoPwPER59Px+o3e76mL5Kwp2G57xPl0kxc3er+nLvyKtLmhfUC78RHn081ONnq/pzcAR5xPR9mRRu/31IVgvgUccT4dNaobvd/TGYAjzqejumqj93s6A3DE+XRUg2VSCjdaGr3fUw+I+VPwiPPpqJjO8J1Nw43e7ymHwHoAKMFd7QErAeEE5NNJMb3R+z3lsGcNzgfgiPPpomJ6o/d76oGwPgCOKJ8uKqY3er+nKwBHmE+noqRG7/fUA199U/AI8+kEwEbv93QHoEhZTnA+nYqSGr3fBoAtaiqBUImdm5hPJwA2er+nKwBHnE+X1gUzSbnR+z11wPj/AeCpPDD3t7rvAAAAAElFTkSuQmCC",X8t="uniform sampler2D weightMap;varying vec2 vOffset0;varying vec2 vOffset1;void movec(const in bvec2 c,inout vec2 variable,const in vec2 value){if(c.x){variable.x=value.x;}if(c.y){variable.y=value.y;}}void movec(const in bvec4 c,inout vec4 variable,const in vec4 value){movec(c.xy,variable.xy,value.xy);movec(c.zw,variable.zw,value.zw);}void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){vec4 a;a.x=texture2D(weightMap,vOffset0).a;a.y=texture2D(weightMap,vOffset1).g;a.wz=texture2D(weightMap,uv).rb;vec4 color=inputColor;if(dot(a,vec4(1.0))>=1e-5){bool h=max(a.x,a.z)>max(a.y,a.w);vec4 blendingOffset=vec4(0.0,a.y,0.0,a.w);vec2 blendingWeight=a.yw;movec(bvec4(h),blendingOffset,vec4(a.x,0.0,a.z,0.0));movec(bvec2(h),blendingWeight,a.xz);blendingWeight/=dot(blendingWeight,vec2(1.0));vec4 blendingCoord=blendingOffset*vec4(texelSize,-texelSize)+uv.xyxy;color=blendingWeight.x*texture2D(inputBuffer,blendingCoord.xy);color+=blendingWeight.y*texture2D(inputBuffer,blendingCoord.zw);}outputColor=color;}",Z8t="varying vec2 vOffset0;varying vec2 vOffset1;void mainSupport(const in vec2 uv){vOffset0=uv+texelSize*vec2(1.0,0.0);vOffset1=uv+texelSize*vec2(0.0,1.0);}",z0={LOW:0,MEDIUM:1,HIGH:2,ULTRA:3},gye=class extends ph{constructor({preset:e=z0.MEDIUM,edgeDetectionMode:t=F7.COLOR,predicationMode:r=jAt.DISABLED}={}){super("SMAAEffect",X8t,{vertexShader:Z8t,blendFunction:Xr.NORMAL,attributes:qc.CONVOLUTION|qc.DEPTH,uniforms:new Map([["weightMap",new Xe(null)]])});let i,n;arguments.length>1&&(i=arguments[0],n=arguments[1],arguments.length>2&&(e=arguments[2]),arguments.length>3&&(t=arguments[3])),this.renderTargetEdges=new ui(1,1,{minFilter:br,stencilBuffer:!1,depthBuffer:!1}),this.renderTargetEdges.texture.name="SMAA.Edges",this.renderTargetWeights=this.renderTargetEdges.clone(),this.renderTargetWeights.texture.name="SMAA.Weights",this.uniforms.get("weightMap").value=this.renderTargetWeights.texture,this.clearPass=new hH(!0,!1,!1),this.clearPass.overrideClearColor=new Vt(0),this.clearPass.overrideClearAlpha=1,this.edgeDetectionPass=new Sl(new WAt),this.edgeDetectionMaterial.edgeDetectionMode=t,this.edgeDetectionMaterial.predicationMode=r,this.weightsPass=new Sl(new e8t);let a=new yme;a.onLoad=()=>{let o=new an(i);o.name="SMAA.Search",o.magFilter=mi,o.minFilter=mi,o.generateMipmaps=!1,o.needsUpdate=!0,o.flipY=!0,this.weightsMaterial.searchTexture=o;let s=new an(n);s.name="SMAA.Area",s.magFilter=br,s.minFilter=br,s.generateMipmaps=!1,s.needsUpdate=!0,s.flipY=!1,this.weightsMaterial.areaTexture=s,this.dispatchEvent({type:"load"})},a.itemStart("search"),a.itemStart("area"),i!==void 0&&n!==void 0?(a.itemEnd("search"),a.itemEnd("area")):typeof Image<"u"&&(i=new Image,n=new Image,i.addEventListener("load",()=>a.itemEnd("search")),n.addEventListener("load",()=>a.itemEnd("area")),i.src=oie,n.src=sie),this.applyPreset(e)}get edgesTexture(){return this.renderTargetEdges.texture}getEdgesTexture(){return this.edgesTexture}get weightsTexture(){return this.renderTargetWeights.texture}getWeightsTexture(){return this.weightsTexture}get edgeDetectionMaterial(){return this.edgeDetectionPass.fullscreenMaterial}get colorEdgesMaterial(){return this.edgeDetectionMaterial}getEdgeDetectionMaterial(){return this.edgeDetectionMaterial}get weightsMaterial(){return this.weightsPass.fullscreenMaterial}getWeightsMaterial(){return this.weightsMaterial}setEdgeDetectionThreshold(e){this.edgeDetectionMaterial.edgeDetectionThreshold=e}setOrthogonalSearchSteps(e){this.weightsMaterial.orthogonalSearchSteps=e}applyPreset(e){let t=this.edgeDetectionMaterial,r=this.weightsMaterial;switch(e){case z0.LOW:t.edgeDetectionThreshold=.15,r.orthogonalSearchSteps=4,r.diagonalDetection=!1,r.cornerDetection=!1;break;case z0.MEDIUM:t.edgeDetectionThreshold=.1,r.orthogonalSearchSteps=8,r.diagonalDetection=!1,r.cornerDetection=!1;break;case z0.HIGH:t.edgeDetectionThreshold=.1,r.orthogonalSearchSteps=16,r.diagonalSearchSteps=8,r.cornerRounding=25,r.diagonalDetection=!0,r.cornerDetection=!0;break;case z0.ULTRA:t.edgeDetectionThreshold=.05,r.orthogonalSearchSteps=32,r.diagonalSearchSteps=16,r.cornerRounding=25,r.diagonalDetection=!0,r.cornerDetection=!0;break}}setDepthTexture(e,t=Hd){this.edgeDetectionMaterial.depthBuffer=e,this.edgeDetectionMaterial.depthPacking=t}update(e,t,r){this.clearPass.render(e,this.renderTargetEdges),this.edgeDetectionPass.render(e,t,this.renderTargetEdges),this.weightsPass.render(e,this.renderTargetEdges,this.renderTargetWeights)}setSize(e,t){this.edgeDetectionMaterial.setSize(e,t),this.weightsMaterial.setSize(e,t),this.renderTargetEdges.setSize(e,t),this.renderTargetWeights.setSize(e,t)}dispose(){let{searchTexture:e,areaTexture:t}=this.weightsMaterial;e!==null&&t!==null&&(e.dispose(),t.dispose()),super.dispose()}static get searchImageDataURL(){return oie}static get areaImageDataURL(){return sie}},Q8t=`uniform float offset;uniform float darkness;void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){const vec2 center=vec2(0.5);vec3 color=inputColor.rgb;
#if VIGNETTE_TECHNIQUE == 0
float d=distance(uv,center);color*=smoothstep(0.8,offset*0.799,d*(darkness+offset));
#else
vec2 coord=(uv-center)*vec2(offset);color=mix(color,vec3(1.0-darkness),dot(coord,coord));
#endif
outputColor=vec4(color,inputColor.a);}`,U5={DEFAULT:0,ESKIL:1},K8t=class extends ph{constructor({blendFunction:e=Xr.NORMAL,technique:t=U5.DEFAULT,eskil:r=!1,offset:i=.5,darkness:n=.5}={}){super("VignetteEffect",Q8t,{blendFunction:e,defines:new Map([["VIGNETTE_TECHNIQUE",t.toFixed(0)]]),uniforms:new Map([["offset",new Xe(i)],["darkness",new Xe(n)]])})}get technique(){return Number(this.defines.get("VIGNETTE_TECHNIQUE"))}set technique(e){this.technique!==e&&(this.defines.set("VIGNETTE_TECHNIQUE",e.toFixed(0)),this.setChanged())}get eskil(){return this.technique===U5.ESKIL}set eskil(e){this.technique=e?U5.ESKIL:U5.DEFAULT}getTechnique(){return this.technique}setTechnique(e){this.technique=e}get offset(){return this.uniforms.get("offset").value}set offset(e){this.uniforms.get("offset").value=e}getOffset(){return this.offset}setOffset(e){this.offset=e}get darkness(){return this.uniforms.get("darkness").value}set darkness(e){this.uniforms.get("darkness").value=e}getDarkness(){return this.darkness}setDarkness(e){this.darkness=e}},Ud=class{constructor(e,t){this.enabled=!1,this.effect=new e(t),Object.defineProperty(this,"opacity",{enumerable:!0,set(r){this.effect.blendMode.opacity.value=r},get(){return this.effect.blendMode.opacity.value}}),Object.defineProperty(this,"blendFunction",{enumerable:!0,set(r){this.effect.blendMode.setBlendFunction(Number(r))},get(){return this.effect.blendMode.blendFunction}}),this.blendFunction=Xr.NORMAL}},J8t=class extends Ud{constructor(){super(L8t),this.blendFunction=Xr.SCREEN}set intensity(e){this.effect.intensity=e}get intensity(){return this.effect.intensity}set luminanceThreshold(e){this.effect.luminanceMaterial.threshold=e}get luminanceThreshold(){return this.effect.luminanceMaterial.threshold}set luminanceSmoothing(e){this.effect.luminanceMaterial.smoothing=e}get luminanceSmoothing(){return this.effect.luminanceMaterial.smoothing}set blurScale(e){this.effect.blurPass.scale=e}get blurScale(){return this.effect.blurPass.scale}set kernelSize(e){this.effect.blurPass.kernelSize=e}get kernelSize(){return this.effect.blurPass.kernelSize}},$8t=class extends Ud{constructor(){super(R8t)}set contrast(e){this.effect.uniforms.get("contrast").value=e}get contrast(){return this.effect.uniforms.get("contrast").value}set brightness(e){this.effect.uniforms.get("brightness").value=e}get brightness(){return this.effect.uniforms.get("brightness").value}},eSt=class extends Ud{constructor(){super(F8t),this.effect.offset=new me(.01,.01)}set offset(e){this.effect.offset.set(e[0]/1e3,e[1]/1e3)}get offset(){return[this.effect.offset.x*1e3,this.effect.offset.y*1e3]}},tSt=class extends Ud{constructor(){super(B8t)}},rSt=class extends Ud{constructor(){super(G8t),this._hue=0}set hue(e){this._hue=e,this.effect.setHue(e)}get hue(){return this._hue}set saturation(e){this.effect.uniforms.get("saturation").value=e}get saturation(){return this.effect.uniforms.get("saturation").value}},iSt=class extends Ud{constructor(){super(W8t),this.blendFunction=Xr.OVERLAY}},nSt=class extends Ud{constructor(){super(K8t)}get eskil(){return this.effect.eskil}set eskil(e){this.effect.eskil=e}get darkness(){return this.effect.uniforms.get("darkness").value}set darkness(e){this.effect.uniforms.get("darkness").value=e}get offset(){return this.effect.uniforms.get("offset").value}set offset(e){this.effect.uniforms.get("offset").value=e}},aSt=class extends Ud{constructor(e){super(H8t)}set focalLength(e){this.effect.circleOfConfusionMaterial.uniforms.focalLength.value=e/2e3}get focalLength(){return this.effect.circleOfConfusionMaterial.uniforms.focalLength.value}set focusDistance(e){this.effect.circleOfConfusionMaterial.uniforms.focusDistance.value=this.isPerspectiveCamera?e/2e3:(e+992)/2e3}get focusDistance(){return this.effect.circleOfConfusionMaterial.uniforms.focusDistance.value}get bokehScale(){return this.effect.bokehScale}set bokehScale(e){this.effect.bokehScale=e}setCamera(e){let t=!1;(e.isPerspectiveCamera&&this.isPerspectiveCamera===!1||!e.isPerspectiveCamera&&this.isPerspectiveCamera===!0)&&(t=!0),e.isPerspectiveCamera?(this.effect.circleOfConfusionMaterial.adoptCameraSettings(e.perspCamera),this.isPerspectiveCamera=!0):(this.effect.circleOfConfusionMaterial.adoptCameraSettings(e),this.isPerspectiveCamera=!1),t&&this.effect.setChanged()}},oSt=class extends Ud{constructor(){super(Y8t)}get granularity(){return this.effect.getGranularity()}set granularity(e){this.effect.setGranularity(e)}},sSt=`#define GLSLIFY 1
varying vec2 vUv;varying vec2 vTexCoords[9];uniform vec2 resolution;void main(){vUv=position.xy*0.5+0.5;vec2 texelSize=vec2(1.0)/resolution;vTexCoords[0]=vUv+vec2(-texelSize.x,-texelSize.y);vTexCoords[1]=vUv+vec2(0.0,-texelSize.y);vTexCoords[2]=vUv+vec2(texelSize.x,-texelSize.y);vTexCoords[3]=vUv+vec2(-texelSize.x,0.0);vTexCoords[4]=vUv+vec2(0.0,0.0);vTexCoords[5]=vUv+vec2(texelSize.x,0.0);vTexCoords[6]=vUv+vec2(-texelSize.x,texelSize.y);vTexCoords[7]=vUv+vec2(0.0,texelSize.y);vTexCoords[8]=vUv+vec2(texelSize.x,texelSize.y);gl_Position=vec4(position.xy,1.0,1.0);}`,lSt=`#define GLSLIFY 1
#include <common>
varying vec2 vUv;varying vec2 vTexCoords[9];uniform sampler2D inputBuffer;uniform sampler2D historyBuffer;uniform sampler2D velocityBuffer;uniform sampler2D depthBuffer;uniform vec2 resolution;
#define USE_YCOCG
#define USE_CATMULL_ROM
const float feedback_min=0.5;const float feedback_max=0.95;vec3 RGB_YCoCg(vec3 c){return vec3(c.x/4.0+c.y/2.0+c.z/4.0,c.x/2.0-c.z/2.0,-c.x/4.0+c.y/2.0-c.z/4.0);}vec3 YCoCg_RGB(vec3 c){return clamp(vec3(c.x+c.y-c.z,c.x+c.z,c.x-c.y-c.z),vec3(0.0),vec3(1.0));}vec4 sample_color(sampler2D tex,vec2 uv){
#ifdef USE_YCOCG
vec4 c=texture(tex,uv);return vec4(RGB_YCoCg(c.rgb),c.a);
#else
return texture(tex,uv);
#endif
}vec4 sample_catmull_rom(sampler2D tex,vec2 uv,vec2 texSize){vec2 samplePos=uv*texSize;vec2 texPos1=floor(samplePos-0.5)+0.5;vec2 f=samplePos-texPos1;vec2 w0=f*(-0.5+f*(1.0-0.5*f));vec2 w1=1.0+f*f*(-2.5+1.5*f);vec2 w2=f*(0.5+f*(2.0-1.5*f));vec2 w3=f*f*(-0.5+0.5*f);vec2 w12=w1+w2;vec2 offset12=w2/(w1+w2);vec2 texPos0=texPos1-1.0;vec2 texPos3=texPos1+2.0;vec2 texPos12=texPos1+offset12;texPos0/=texSize;texPos3/=texSize;texPos12/=texSize;vec4 result=vec4(0.0);result+=texture2D(tex,vec2(texPos12.x,texPos0.y))*w12.x*w0.y;result+=texture2D(tex,vec2(texPos0.x,texPos12.y))*w0.x*w12.y;result+=texture2D(tex,vec2(texPos12.x,texPos12.y))*w12.x*w12.y;result+=texture2D(tex,vec2(texPos3.x,texPos12.y))*w3.x*w12.y;result+=texture2D(tex,vec2(texPos12.x,texPos3.y))*w12.x*w3.y;return result;}vec3 choose_motion_vector(){
#ifdef CHOOSE_LONGEST_MOTION_VECTOR
float longest=-1.0;vec3 v_choose=vec3(-1.0);for(int i=0;i<9;i++){vec3 v=texture2D(velocityBuffer,vTexCoords[i]).rgb;float l=length(v.xy);if(l>longest){longest=l;v_choose=v;}}return v_choose;
#else
float closest_depth=1000.0;vec2 closest_uv_offset=vec2(0.0);for(int i=0;i<9;i++){float neighbor_depth=texture2D(depthBuffer,vTexCoords[i]).r;if(neighbor_depth<closest_depth){closest_uv_offset=vTexCoords[i];closest_depth=neighbor_depth;}}return texture2D(velocityBuffer,closest_uv_offset).rgb;
#endif
}vec4 clipAabb(vec3 aabb_min,vec3 aabb_max,vec4 avg,vec4 input_texel){const float FLT_EPS=0.00000001;vec3 p_clip=0.5*(aabb_max+aabb_min);vec3 e_clip=0.5*(aabb_max-aabb_min)+FLT_EPS;vec4 v_clip=input_texel-vec4(p_clip,avg.w);vec3 v_unit=v_clip.xyz/e_clip;vec3 a_unit=abs(v_unit);float ma_unit=max(a_unit.x,max(a_unit.y,a_unit.z));if(ma_unit>1.0){return vec4(p_clip,avg.w)+v_clip/ma_unit;}else{return input_texel;}}vec3 clip_aabb_variance(in vec3 cOld,in vec3 cNew,in vec3 centre,in vec3 halfSize){if(all(lessThanEqual(abs(cOld-centre),halfSize))){return cOld;}vec3 dir=(cNew-cOld);vec3 near=centre-sign(dir)*halfSize;vec3 tAll=(near-cOld)/dir;float t=0.0001;for(int i=0;i<3;i++){if(tAll[i]>=0.0&&tAll[i]<t){t=tAll[i];}}if(t>=0.0001){return cOld;}return cOld+dir*t;}void main(){vec3 v=choose_motion_vector();vec2 velocity=v.rg;vec2 previousPixelPos=vUv-velocity;vec4 currentColor=sample_color(inputBuffer,vUv);
#ifdef USE_CATMULL_ROM
vec4 previousColor=sample_catmull_rom(historyBuffer,previousPixelPos,resolution);
#else
vec4 previousColor=sample_color(historyBuffer,previousPixelPos);
#endif
#ifdef USE_YCOCG
previousColor=vec4(RGB_YCoCg(previousColor.rgb),previousColor.a);
#endif
vec4 ctl=sample_color(inputBuffer,vTexCoords[0]);vec4 ctc=sample_color(inputBuffer,vTexCoords[1]);vec4 ctr=sample_color(inputBuffer,vTexCoords[2]);vec4 cml=sample_color(inputBuffer,vTexCoords[3]);vec4 cmc=sample_color(inputBuffer,vTexCoords[4]);vec4 cmr=sample_color(inputBuffer,vTexCoords[5]);vec4 cbl=sample_color(inputBuffer,vTexCoords[6]);vec4 cbc=sample_color(inputBuffer,vTexCoords[7]);vec4 cbr=sample_color(inputBuffer,vTexCoords[8]);vec4 cmin=min(ctl,min(ctc,min(ctr,min(cml,min(cmc,min(cmr,min(cbl,min(cbc,cbr))))))));vec4 cmax=max(ctl,max(ctc,max(ctr,max(cml,max(cmc,max(cmr,max(cbl,max(cbc,cbr))))))));vec4 cavg=(ctl+ctc+ctr+cml+cmc+cmr+cbl+cbc+cbr)/9.0;vec4 cmin5=min(ctc,min(cml,min(cmc,min(cmr,cbc))));vec4 cmax5=max(ctc,max(cml,max(cmc,max(cmr,cbc))));vec4 cavg5=(ctc+cml+cmc+cmr+cbc)/5.0;cmin=0.5*(cmin+cmin5);cmax=0.5*(cmax+cmax5);cavg=0.5*(cavg+cavg5);
#ifdef USE_YCOCG
vec2 chroma_extent=vec2(0.25*0.5*(cmax.r-cmin.r));vec2 chroma_center=currentColor.gb;cmin.yz=chroma_center-chroma_extent;cmax.yz=chroma_center+chroma_extent;cavg.yz=chroma_center;
#endif
vec4 previousColorClipped=clamp(previousColor,cmin,cmax);
#ifdef LUMINANCE_DIFFERENCES
#ifdef USE_YCOCG
float lum0=currentColor.r;float lum1=previousColorClipped.r;
#else
float lum0=luminance(currentColor.rgb);float lum1=luminance(previousColorClipped.rgb);
#endif
float unbiased_diff=abs(lum0-lum1)/max(lum0,max(lum1,0.2));float unbiased_weight=1.0-unbiased_diff;float unbiased_weight_sqr=unbiased_weight*unbiased_weight;float k_feedback=mix(feedback_min,feedback_max,unbiased_weight_sqr);vec4 result=mix(currentColor,previousColorClipped,vec4(k_feedback));
#else
const float alpha=0.1;vec4 result=mix(currentColor,previousColorClipped,1.0-alpha);
#endif
#ifdef USE_YCOCG
gl_FragColor=vec4(YCoCg_RGB(result.rgb).rgb,result.a);
#else
gl_FragColor=result;
#endif
}`,uSt=`#define GLSLIFY 1
varying vec2 vUv;void main(){gl_Position=vec4(position.xy,1.0,1.0);vUv=position.xy*0.5+0.5;}`,cSt=`#define GLSLIFY 1
layout(location=1)out vec4 gVelocity;varying vec2 vUv;uniform sampler2D inputBuffer;void main(){gl_FragColor=texture2D(inputBuffer,vUv);gVelocity=vec4(0.0);}`,zO=class extends ai{constructor(){super({name:"PassthroughMaterial",uniforms:{inputBuffer:new Xe(null)},blending:Nn,depthWrite:!1,depthTest:!1,vertexShader:uSt,fragmentShader:cSt})}set inputBuffer(e){this.uniforms.inputBuffer.value=e}},hSt=class extends es{constructor(){super("TAAResolvePass"),this.MRTCompatible=!0,this.needsSwap=!1,this.passThroughMaterial=new zO,this.resolutionVector=new me,this.resolveMaterial=new ai({name:"TAAResolveMaterial",uniforms:{inputBuffer:new Xe(null),historyBuffer:new Xe(null),velocityBuffer:new Xe(null),depthBuffer:new Xe(null),resolution:new Xe(new me)},blending:Nn,depthWrite:!1,depthTest:!1,vertexShader:sSt,fragmentShader:lSt}),this.historyRenderTarget=new ui(1024,1024,{minFilter:br,stencilBuffer:!1,depthBuffer:!1}),this.historyRenderTarget.texture.name="TAA.History",this.resultRenderTarget=new ui(1024,1024,{minFilter:br,stencilBuffer:!1,depthBuffer:!1}),this.resultRenderTarget.texture.name="TAA.Output"}setSize(e,t){this.historyRenderTarget.setSize(e,t),this.resultRenderTarget.setSize(e,t)}render(e,t){this.fullscreenMaterial=this.resolveMaterial,this.resolveMaterial.uniforms.inputBuffer.value=t.texture[0],this.resolveMaterial.uniforms.velocityBuffer.value=t.texture[1],this.resolveMaterial.uniforms.depthBuffer.value=t.depthTexture,this.resolveMaterial.uniforms.historyBuffer.value=this.historyRenderTarget.texture,this.resolveMaterial.uniforms.resolution.value.set(t.width,t.height),e.setRenderTarget(this.resultRenderTarget),e.render(this.scene,this.camera),this.fullscreenMaterial=this.passThroughMaterial,this.passThroughMaterial.inputBuffer=this.resultRenderTarget.texture,e.setRenderTarget(this.historyRenderTarget),e.render(this.scene,this.camera);let r=this.renderToScreen?null:t;this.fullscreenMaterial=this.passThroughMaterial,this.passThroughMaterial.inputBuffer=this.resultRenderTarget.texture,e.setRenderTarget(r),e.render(this.scene,this.camera)}dispose(){this.resultRenderTarget.dispose(),this.historyRenderTarget.dispose(),this.resolveMaterial.dispose(),this.passThroughMaterial.dispose()}},dSt=class extends es{constructor(e,t,r){super("TransmissionPass",void 0,t),this.MRTCompatible=!0,this.depthPass=new nie(e,t,{renderTarget:r.transmissionDepthTarget}),this.passThroughMaterial=new zO,this.splineScene=e,this.needsSwap=!1}updatePasses(e){this.passThroughMaterial=new zO,this.depthPass=new nie(this.splineScene,this.camera,{renderTarget:e.transmissionDepthTarget})}setCamera(e){this.camera=e}setScene(e){this.splineScene=e}render(e,t,r){let i=this.camera.layers.mask,n=e;n.setRenderTarget(n.transmissionRenderTarget),this.fullscreenMaterial=this.passThroughMaterial,this.passThroughMaterial.inputBuffer=t.texture[0],n.clear(),n.render(this.scene,this.camera),this.camera.layers.disable(3),this.depthPass.render(e,t,r),n.shadowMap.needsUpdate=!1,n.shadowMap.autoUpdate=!1;let a=this.renderToScreen?null:t;this.camera.layers.set(3),e.setRenderTarget(a),e.render(this.splineScene,this.camera),this.camera.layers.mask=i}},lie=new jc,fSt=new ai({transparent:!0,vertexShader:`
        void main() {
            gl_Position = vec4(0.0);
        }
    `,fragmentShader:`
        layout(location = 1) out vec4 gVelocity;

        void main() {
            gl_FragColor = vec4(0.0);
			gVelocity = vec4(0.0);
        }
    `}),HO=class extends es{constructor(e,t,r){super("OpaquePass",t??lie,r),this.MRTCompatible=!0,this.originalMaterials=[],this.hasTransmissionPass=!1,this.clear=!0,this.clearColorOnly=!1,this.clearDepth=!1,this.needsSwap=!1,this.MRTCompatible=e}setCamera(e){this.camera=e}setScene(e){this.scene=e??lie}getScene(){return this.scene}render(e,t){this.camera.layers.enable(3),this.hasTransmissionPass&&(this.originalMaterials.length=0,this.scene.traverse(i=>{i.layers.isEnabled(3)&&i instanceof Jo&&(this.originalMaterials.push([i,i.material]),i.material=fSt)}),e.shadowMap.needsUpdate=!0,e.shadowMap.autoUpdate=!0),this.camera.layers.enable(8);let r=this.renderToScreen?null:t;e.setRenderTarget(r),this.clearColorOnly&&e.clear(!0,!1,!0),this.clear&&e.clear(),e.render(this.scene,this.camera),this.clearDepth&&e.clear(!1,!0,!1),this.hasTransmissionPass&&this.originalMaterials.forEach(i=>{i[0].material=i[1]})}},pSt=class{constructor(e,{depthBuffer:t=!0,stencilBuffer:r=!1,multisampling:i=0,frameBufferType:n=0}={}){this.renderer=e,this.helperStartIndex=0,this.copyPass=new FO,this.depthTexture=null,this.timer=new D8t,this._width=1,this._height=1,this.passes=[],this.helperPasses=[],this.autoRenderToScreen=!0,this.inputBuffer=this.createBuffer(t,r,n,i,!0,"input buffer mrt"),this.inputBufferSingle=this.createBuffer(t,r,n,i,!1," input buffer single"),this.inputBufferSingle.texture.dispose(),this.inputBufferSingle.depthTexture.dispose(),this.inputBufferSingle.texture=this.inputBuffer.texture[0],this.inputBufferSingle.depthTexture=this.inputBuffer.depthTexture,this.outputBuffer=this.inputBuffer.clone(),this.outputBuffer.name="output buffer mrt",this.outputBufferSingle=this.createBuffer(t,r,n,i,!1,"output buffer single"),this.outputBufferSingle.texture.dispose(),this.outputBufferSingle.depthTexture.dispose(),this.outputBufferSingle.texture=this.outputBuffer.texture[0],this.outputBufferSingle.depthTexture=this.outputBuffer.depthTexture,this.setRenderer(e)}get multisampling(){return this.inputBuffer.samples||0}set multisampling(e){let t=this.inputBuffer,r=this.multisampling;r>0&&e>0?(this.inputBuffer.samples=e,this.outputBuffer.samples=e,this.inputBuffer.dispose(),this.outputBuffer.dispose()):r!==e&&(this.inputBuffer.dispose(),this.outputBuffer.dispose(),console.log("creating new input buffer"),this.inputBuffer=this.createBuffer(t.depthBuffer,t.stencilBuffer,t.texture.type,e,!0,"new input buffer"),this.inputBuffer.depthTexture=this.depthTexture,this.outputBuffer=this.inputBuffer.clone())}getTimer(){return this.timer}getRenderer(){return this.renderer}setRenderer(e){var t;if(this.renderer=e,e!==null){let r=e.getSize(new me),i=((t=e.getContext().getContextAttributes())==null?void 0:t.alpha)??!1,n=this.inputBuffer.texture[0].type;n===So&&e.outputEncoding===pr&&(this.inputBuffer.texture[0].encoding=pr,this.outputBuffer.texture[0].encoding=pr,this.inputBuffer.dispose(),this.outputBuffer.dispose(),console.log("doing some kinda dispose??")),e.autoClear=!1,this.setSize(r.width,r.height,!1);for(let a of this.passes)a.initialize(e,i,n)}}replaceRenderer(e,t=!0){let r=this.renderer,i=r.domElement.parentNode;return this.setRenderer(e),t&&i!==null&&(i.removeChild(r.domElement),i.appendChild(e.domElement)),r}createDepthTexture(){let e=this.depthTexture=new ey(this._width,this._height);return this.inputBuffer.depthTexture=e,this.inputBuffer.stencilBuffer?(e.format=qv,e.type=Av):e.type=ed,e}deleteDepthTexture(){if(this.depthTexture!==null){this.depthTexture.dispose(),this.depthTexture=null,this.inputBuffer.depthTexture=null,this.inputBuffer.dispose();for(let e of this.passes)e.setDepthTexture(null)}}createBuffer(e,t,r,i,n,a){let o=this.renderer,s=o===null?new me:o.getDrawingBufferSize(new me),l={minFilter:br,magFilter:br,wrapS:Xi,wrapT:Xi,stencilBuffer:t,depthBuffer:e},u;return i>0?(u=new ui(s.width,s.height,l),u.samples=i):(n?(u=new rlt(s.width,s.height,2,l),u.texture[1].type=Cd):u=new ui(s.width,s.height,l),u.depthTexture=new ey(2048,2048),u.depthTexture.type=On),r===So&&o!==null&&o.outputEncoding===pr&&(Array.isArray(u.texture)?u.texture.forEach(c=>c.encoding=pr):u.texture.encoding=pr),Array.isArray(u.texture)?u.texture.forEach((c,h)=>{c.name=`EffectComposer.Buffer ${n} ${h}`,c.generateMipmaps=!1}):(u.texture.name=`EffectComposer.Buffer ${n}`,u.texture.generateMipmaps=!1),u.name=a,u}addPass(e,t){var s;let r=this.passes,i=this.renderer,n=i.getDrawingBufferSize(new me),a=((s=i.getContext().getContextAttributes())==null?void 0:s.alpha)??!1,o;if(e.MRTCompatible&&(o=this.inputBuffer.texture[0].type),e.MRTCompatible||(o=this.inputBuffer.texture.type),e.setRenderer(i),e.setSize(n.width,n.height),e.initialize(i,a,o),this.autoRenderToScreen&&(r.length>0&&(r[r.length-1].renderToScreen=!1),e.renderToScreen&&(this.autoRenderToScreen=!1)),t!==void 0?r.splice(t,0,e):r.push(e),this.autoRenderToScreen&&(r[r.length-1].renderToScreen=!0),e.needsDepthTexture||this.depthTexture!==null)if(this.depthTexture===null){let l=this.createDepthTexture();for(e of r)e.setDepthTexture(l)}else e.setDepthTexture(this.depthTexture)}setHelperStartIndex(e){this.helperStartIndex=e}removePass(e){let t=this.passes,r=t.indexOf(e);if(r!==-1&&t.splice(r,1).length>0){if(this.depthTexture!==null){let i=(n,a)=>n||a.needsDepthTexture;t.reduce(i,!1)||e.getDepthTexture()===this.depthTexture&&e.setDepthTexture(null)}this.autoRenderToScreen&&r===t.length&&(e.renderToScreen=!1,t.length>0&&(t[t.length-1].renderToScreen=!0))}}removeAllPasses(){let e=this.passes;e.length>0&&(this.autoRenderToScreen&&(e[e.length-1].renderToScreen=!1),this.passes=[])}render(e){let t=this.renderer,r=this.copyPass,i=this.inputBuffer,n=this.outputBuffer,a=this.inputBufferSingle,o=this.outputBufferSingle,s=!1,l,u,c,h;e===void 0&&(e=this.timer.update().getDelta());for(let d of this.passes)d.enabled&&(d.MRTCompatible?d.render(t,i,n,e,s):d.render(t,a,o,e,s),d.needsSwap&&(s&&(r.renderToScreen=d.renderToScreen,l=t.getContext(),u=t.state.buffers.stencil,u.setFunc(l.NOTEQUAL,1,4294967295),r.render(t,i,n,e,s),u.setFunc(l.EQUAL,1,4294967295)),c=i,h=a,i=n,a=o,n=c,o=h),d instanceof T8t?s=!0:d instanceof i8t&&(s=!1))}setSize(e,t,r){let i=this.renderer;if(this._width=e,this._height=t,e===void 0||t===void 0){let a=i.getSize(new me);e=a.width,t=a.height}i.setSize(e,t,r);let n=i.getDrawingBufferSize(new me);this.inputBuffer.setSize(n.width,n.height),this.outputBuffer.setSize(n.width,n.height),this.inputBufferSingle.setSize(n.width,n.height),this.outputBufferSingle.setSize(n.width,n.height);for(let a of this.passes)a.setSize(n.width,n.height)}reset(){let e=this.timer.isAutoResetEnabled();this.dispose(),this.autoRenderToScreen=!0,this.timer.setAutoResetEnabled(e)}dispose(){for(let e of this.passes)e.dispose();this.passes=[],this.inputBuffer!==null&&this.inputBuffer.dispose(),this.outputBuffer!==null&&this.outputBuffer.dispose(),this.inputBufferSingle!==null&&this.inputBufferSingle.dispose(),this.outputBufferSingle!==null&&this.outputBufferSingle.dispose(),this.deleteDepthTexture(),this.copyPass.dispose(),this.timer.dispose()}},vSt=new ai({name:"CombineMaterial",uniforms:{inputBufferA:new Xe(null),inputBufferB:new Xe(null)},blending:Nn,depthWrite:!1,depthTest:!1,vertexShader:`
varying vec2 vUv;
void main() {
    gl_Position = vec4(position.xy, 1.0, 1.0);
    vUv = position.xy * 0.5 + 0.5;
}
`,fragmentShader:`
    varying vec2 vUv;
    uniform sampler2D inputBufferA;
    uniform sampler2D inputBufferB;

    // TODO: Why do we need these when postpro of framemode is enabled???
    layout(location = 1) out vec4 gVelocity;

    void main() {
	vec4 resA = texture2D(inputBufferA, vUv);
	vec4 resB = texture2D(inputBufferB, vUv);
    float a = resA.a + resB.a * ( 1.0 - resA.a );

	vec4 res;
	res.rgb =  resA.rgb + (resB.rgb * (1.0 - resA.a));
	res.a = resA.a + resB.a * (1.0 - resA.a);
	gl_FragColor = res;
    gVelocity = vec4(0.0);
    }
`}),mSt=class extends es{constructor(e){super("HelperPass",void 0,e),this.MRTCompatible=!1,this.fullscreenMaterial=vSt,this.helperPass=new HO(!1,void 0,this.camera),this.helperPass.hasTransmissionPass=!1,this.helperPass.clear=!1,this.helperPass.renderToScreen=!1,this.helperPassOnTop=new HO(!1,void 0,this.camera),this.helperPassOnTop.hasTransmissionPass=!1,this.helperPassOnTop.clear=!1,this.helperPassOnTop.renderToScreen=!1;let t=new gye({preset:z0.LOW,edgeDetectionMode:F7.COLOR});this.effectPass=new D6(this.camera,t),this.rt=new ui(10,10,{minFilter:br,magFilter:br,wrapS:Xi,wrapT:Xi,depthBuffer:!0})}setSize(e,t){this.rt.setSize(e,t),this.effectPass.setSize(e,t)}set sceneHelpers(e){this.helperPass.setScene(e)}get sceneHelpers(){return this.helperPass.getScene()}set sceneHelpersOnTop(e){this.helperPassOnTop.setScene(e)}get sceneHelpersOnTop(){return this.helperPassOnTop.getScene()}setCamera(e){this.helperPass.setCamera(e),this.helperPassOnTop.setCamera(e)}initialize(e,t,r){super.initialize(e,t,r),this.effectPass.initialize(e,t,r)}dispose(){super.dispose(),this.rt.dispose(),this.effectPass.dispose()}render(e,t,r){this.rt.depthTexture=t.depthTexture;let i=e.getClearAlpha();e.setClearAlpha(0),this.helperPass.clearDepth=!0,this.helperPass.clearColorOnly=!0,this.helperPass.render(e,this.rt),this.helperPassOnTop.render(e,this.rt),this.effectPass.renderToScreen=!1,this.effectPass.render(e,this.rt,r),this.fullscreenMaterial.uniforms.inputBufferA.value=r.texture,this.fullscreenMaterial.uniforms.inputBufferB.value=t.texture,e.setClearAlpha(i),e.setRenderTarget(null),e.clear(),e.render(this.scene,this.camera)}},gSt=`#define GLSLIFY 1
#include <skinning_pars_vertex>
#include <morphtarget_pars_vertex>
out vec3 n;void main(){
#include <beginnormal_vertex>
#include <morphnormal_vertex>
#include <skinbase_vertex>
#include <skinnormal_vertex>
#include <defaultnormal_vertex>
#include <begin_vertex>
#include <morphtarget_vertex>
#include <skinning_vertex>
vec4 view_space=viewMatrix*modelMatrix*vec4(transformed,1.0);gl_Position=projectionMatrix*view_space;n=normalize(transformedNormal);}`,ySt=`#define GLSLIFY 1
in vec3 n;void main(){gl_FragColor=vec4(n,1.0);}`,xSt=`#define GLSLIFY 1
out vec2 v_uv;void main(){v_uv=uv;gl_Position=vec4(position.xy,1.0,1.0);}`,bSt=`#define GLSLIFY 1
in vec2 v_uv;const float pi=3.14159265;const float num_steps=4.0;const float num_directions=4.0;uniform float near;uniform float far;uniform float fov;uniform vec4 proj_info;uniform bool is_ortho;uniform vec2 resolution;uniform float radius_of_influence;uniform float radius_in_screen_space;uniform float exponent;uniform vec3 ao_color;uniform float bias;uniform sampler2D texture_depth;uniform sampler2D texture_normals;uniform sampler2D texture_blue_noise;uniform sampler2D texture_blue_noise_in_disk;uniform sampler2D texture_color_pass;uniform int frame_index;uniform bool fog_enabled;uniform float fog_near;uniform float fog_far;vec3 uv_to_view_space(vec2 uv,float eye_z){return vec3((uv*proj_info.xy+proj_info.zw)*(is_ortho ? 1.0 : eye_z),eye_z);}float linearize_depth(float depth_sampled){float z=is_ortho ? depth_sampled : depth_sampled*2.0-1.0;return mix((2.0*near*far)/(far+near-z*(far-near)),near+z*(far-near),float(is_ortho));}vec3 get_view_position(vec2 uv_coords){float linear_depth=linearize_depth(texture(texture_depth,uv_coords).x);return uv_to_view_space(uv_coords,linear_depth);}vec3 min_difference(vec3 p,vec3 right,vec3 left){vec3 v1=right-p;vec3 v2=p-left;return(dot(v1,v1)<dot(v2,v2))? v1 : v2;}vec3 rebuild_normal(in vec2 uv,in vec3 p){vec2 one_over_resolution=1.0/resolution;vec3 r=get_view_position(uv+vec2(one_over_resolution.x,0));vec3 l=get_view_position(uv+vec2(-one_over_resolution.x,0));vec3 t=get_view_position(uv+vec2(0,one_over_resolution.y));vec3 b=get_view_position(uv+vec2(0,-one_over_resolution.y));return normalize(cross(min_difference(p,r,l),min_difference(p,t,b)));}float falloff(float distance_squared){float neg_inv_r2=-1.0/(radius_of_influence*radius_of_influence);return distance_squared*neg_inv_r2+1.0;}float ao_contribution(vec3 P,vec3 N,vec3 S){vec3 to_sample=S-P;float norm_squared=dot(to_sample,to_sample);float norm=sqrt(norm_squared);float cos_theta=dot(N,to_sample)/norm;return clamp(cos_theta-bias,0.0,1.0)*clamp(falloff(norm_squared),0.0,1.0);}float compute_ambient_occlusion(vec2 uv,float radius_in_screen_space,vec3 pc,vec3 view_space_n){vec2 one_over_resolution=1.0/resolution;ivec2 noise_uv=ivec2(int(mod(gl_FragCoord.x,128.0)),int(mod(gl_FragCoord.y,128.0)));float noise=texelFetch(texture_blue_noise,noise_uv,0).r;noise=fract(noise+0.61803398875*float(frame_index));float theta=noise*2.0*3.1415;float ct=cos(theta);float st=sin(theta);float step_size=radius_in_screen_space/(num_steps+1.0);const float angle_step=2.0*pi/num_directions;float contribution=0.0;for(int i=0;i<int(num_directions);++i){float current_pixel=step_size+1.0;for(int j=0;j<int(num_steps);++j){int index=i*int(num_steps)+j;vec2 blue_noise_sample=texelFetch(texture_blue_noise_in_disk,ivec2(index,0),0).rg;vec2 disk_point;disk_point.x=blue_noise_sample.x*ct-blue_noise_sample.y*st;disk_point.y=blue_noise_sample.x*st+blue_noise_sample.y*ct;vec2 sample_direction=disk_point;vec2 snapped_uv=round(current_pixel*sample_direction)*one_over_resolution+uv;vec3 ps=get_view_position(snapped_uv);current_pixel+=step_size;contribution+=ao_contribution(pc,view_space_n,ps);}}float mult=1.0/(1.0-bias);contribution*=mult/(num_directions*num_steps);return clamp(1.0-contribution*2.0,0.0,1.0);}
#define USE_GBUFFER_NORMALS
void main(){vec3 view_space_p=get_view_position(v_uv);
#ifdef USE_GBUFFER_NORMALS
vec3 view_space_n=texture(texture_normals,v_uv).rgb;view_space_n.z*=-1.0;
#else
vec3 view_space_n=-rebuild_normal(v_uv,view_space_p);
#endif
float radius_ss=radius_in_screen_space/(is_ortho ? 1.0 : view_space_p.z);float ao=compute_ambient_occlusion(v_uv,radius_ss,view_space_p,view_space_n);float final=pow(ao,exponent);if(view_space_p.z>=far){final=1.0;}vec3 color=mix(ao_color,vec3(1.0),final);if(fog_enabled){float fog_factor=smoothstep(fog_near,fog_far,view_space_p.z);color=mix(color,vec3(1.0),fog_factor);}gl_FragColor=vec4(color,1.0);}`,wSt=`#define GLSLIFY 1
out vec2 v_uv;void main(){gl_Position=vec4(position.xy,1.0,1.0);v_uv=uv;}`,_St=`#define GLSLIFY 1
in vec2 v_uv;uniform sampler2D texture_ao_lrez;uniform sampler2D texture_depth_lrez;uniform sampler2D texture_depth_hrez;uniform float near;uniform float far;float linearize_depth(float depth_sampled){float z=depth_sampled*2.0-1.0;return(2.0*near*far)/(far+near-z*(far-near));}vec2 nearest_depth_filter(in vec2 uv){vec2 resolution=vec2(textureSize(texture_depth_lrez,0));vec2 texel_size=1.0/resolution;vec2 offset=uv-0.5*texel_size;float d_hrez=texture(texture_depth_hrez,uv).r;float a=abs(d_hrez-texture(texture_depth_lrez,offset).r);float b=abs(d_hrez-texture(texture_depth_lrez,offset+vec2(texel_size.x,0.0)).r);float c=abs(d_hrez-texture(texture_depth_lrez,offset+vec2(0.0,texel_size.y)).r);float d=abs(d_hrez-texture(texture_depth_lrez,offset+vec2(texel_size.x,texel_size.y)).r);float min_diff=min(a,min(b,min(c,d)));if(min_diff==a)return offset;if(min_diff==b)return offset+vec2(texel_size.x,0.0);if(min_diff==c)return offset+vec2(0.0,texel_size.y);if(min_diff==d)return offset+vec2(texel_size.x,texel_size.y);}void main(){
#ifdef DEBUG
float d_lrez=texture(texture_depth_lrez,v_uv).r;float d_hrez=texture(texture_depth_hrez,v_uv).r;float output_d=mix(linearize_depth(d_lrez)/far,linearize_depth(d_hrez)/far,step(0.5,v_uv.x));gl_FragColor=vec4(vec3(output_d),1.0);
#else
vec2 filtered_uv=nearest_depth_filter(v_uv);vec4 ao=texture(texture_ao_lrez,filtered_uv);gl_FragColor=vec4(ao.rgb,1.0);gl_FragColor=ao;
#endif
}`,xx=[[.478712,.875764],[-.337956,-.793959],[-.955259,-.028164],[.864527,.325689],[.209342,-.395657],[-.106779,.672585],[.156213,.235113],[-.413644,-.082856],[-.415667,.323909],[.141896,-.93998],[.954932,-.182516],[-.766184,.410799],[-.434912,-.458845],[.415242,-.078724],[.728335,-.491777],[-.058086,-.066401],[.20299,.686837],[-.808362,-.556402],[.507386,-.640839],[-.723494,-.22924],[.48974,.317826],[-.622663,.765301],[-.01064,.929347],[.663146,.647618],[-.096674,-.413835],[.525945,-.321063],[-.122533,.366019],[.195235,-.687983],[-.563203,.098748],[.418563,.561335],[-.378595,.800367],[.826922,.001024],[-.085372,-.766651],[-.92192,.183673],[-.590008,-.721799],[.167751,-.164393],[.032961,-.56253],[.6329,-.107059],[-.46408,.569669],[-.173676,-.958758],[-.242648,-.234303],[-.275362,.157163],[.382295,-.795131],[.562955,.115562],[.190586,.470121],[.770764,-.297576],[.237281,.93105],[-.666642,-.455871],[-.905649,-.298379],[.33952,.157829],[.701438,-.7041],[-.062758,.160346],[-.220674,.957141],[.642692,.432706],[-.77339,-.015272],[-.671467,.24688],[.158051,.062859],[.806009,.527232],[-.05762,-.247071],[.333436,-.51671],[-.550658,-.315773],[-.652078,.589846],[.008818,.530556],[-.210004,.519896]],ASt=new ai({vertexShader:gSt,fragmentShader:ySt}),mg=new ai({vertexShader:wSt,fragmentShader:_St,uniforms:{texture_ao_lrez:new Xe(null),texture_depth_lrez:new Xe(null),texture_depth_hrez:new Xe(null),near:new Xe(null),far:new Xe(null)}}),SSt=class extends es{constructor(e,t){super("AmbientOcclusionPass",void 0,t),this.fogEnabled=!1,this.fogNear=1,this.fogFar=1e3,this.frameIndex=0,this._runHalfRes=!0,this._width=1,this._height=1;let r=1024,i=1024;this.gBuffer=new ui(r,i,{type:q4?Cd:On,depthTexture:new ey(r,i),minFilter:br,magFilter:br}),this.depthBufferHighRes=new ui(r,i,{depthTexture:new ey(r,i)}),this.aoBuffer=new ui(r,i,{minFilter:br,magFilter:br}),this.splineScene=e,this.splineCamera=t;let n=new Float32Array(xx.length*2);for(let o=0;o<xx.length;o++){let s=o*2;n[s+0]=xx[o][0],n[s+1]=xx[o][1]}this.blueNoiseInDiskTexture=new Tl(n,xx.length,1,RS,On),this.blueNoiseInDiskTexture.wrapS=$h,this.blueNoiseInDiskTexture.wrapT=$h,this.blueNoiseInDiskTexture.needsUpdate=!0,this.hbaoMaterial=new ai({vertexShader:xSt,fragmentShader:bSt,uniforms:{near:new Xe(null),far:new Xe(null),fov:new Xe(null),proj_info:new Xe(new er),is_ortho:new Xe(!1),resolution:new Xe(new me),radius_of_influence:new Xe(8),radius_in_screen_space:new Xe(1),exponent:new Xe(1),ao_color:new Xe(new U),bias:new Xe(.5),texture_depth:new Xe(null),texture_normals:new Xe(null),texture_blue_noise:new Xe(null),texture_blue_noise_in_disk:new Xe(this.blueNoiseInDiskTexture),frame_index:new Xe(0),fog_enabled:new Xe(!1),fog_near:new Xe(1),fog_far:new Xe(1e3)}}),this.radius=128,this.aoColor={r:0,g:0,b:0},this.bias=.5,this.hbaoMaterial.uniforms.texture_depth.value=this.gBuffer.depthTexture,this.hbaoMaterial.uniforms.texture_normals.value=this.gBuffer.texture,this.needsSwap=!0,this.aaBuffer=new ui(r,i,{minFilter:br,magFilter:br,wrapS:Xi,wrapT:Xi,depthBuffer:!1,type:On});let a=new gye({preset:z0.ULTRA,edgeDetectionMode:F7.COLOR});this.effectPass=new D6(this.camera,a)}initialize(e,t,r){super.initialize(e,t,r),this.effectPass.initialize(e,t,r)}setBlueNoiseTexture(e){this.hbaoMaterial.uniforms.texture_blue_noise.value=e}setSize(e,t){this._width=e,this._height=t,this.depthBufferHighRes.setSize(e,t);let r=this._runHalfRes?.5:1,i=e*r,n=t*r;this.gBuffer.setSize(i,n),this.aoBuffer.setSize(i,n),this.hbaoMaterial.uniforms.resolution.value.set(i,n),this.aaBuffer.setSize(i,n),this.effectPass.setSize(i,n)}get runHalfRes(){return this._runHalfRes}set runHalfRes(e){this._runHalfRes=e,this.setSize(this._width,this._height)}setCamera(e){this.splineCamera=e}setScene(e){this.splineScene=e}setDepthTexture(e){this.depthBufferHighRes.depthTexture=e,mg.uniforms.texture_depth_hrez.value=e,mg.needsUpdate=!0}render(e,t,r){this.splineScene.overrideMaterial=ASt;let i=this.splineCamera.layers.mask;if(this.splineCamera.layers.set(5),e.setRenderTarget(this.gBuffer),e.clear(),e.render(this.splineScene,this.splineCamera),e.setRenderTarget(this.depthBufferHighRes),e.clear(),e.render(this.splineScene,this.splineCamera),this.splineScene.overrideMaterial=null,this.splineCamera.layers.mask=i,this.hbaoMaterial.uniforms.radius_of_influence.value=this.radius,this.hbaoMaterial.uniforms.ao_color.value.set(this.aoColor.r,this.aoColor.g,this.aoColor.b),this.hbaoMaterial.uniforms.bias.value=this.bias,this.hbaoMaterial.uniforms.fog_enabled.value=this.fogEnabled,this.hbaoMaterial.uniforms.fog_near.value=this.fogNear,this.hbaoMaterial.uniforms.fog_far.value=this.fogFar,this.hbaoMaterial.uniforms.frame_index.value=this.frameIndex,this.frameIndex++,this.splineCamera.isPerspectiveCamera){this.hbaoMaterial.uniforms.near.value=this.splineCamera.perspCamera.near,this.hbaoMaterial.uniforms.far.value=this.splineCamera.perspCamera.far;let n=this.splineCamera.perspCamera.projectionMatrix.elements,a=2/n[0],o=2/n[5],s=-(1-n[8])/n[0],l=-(1+n[9])/n[5];this.hbaoMaterial.uniforms.proj_info.value.set(a,o,s,l);let u=this.splineCamera.perspCamera.fov*(Math.PI/180),c=this.hbaoMaterial.uniforms.resolution.value.y/(Math.tan(u*.5)*2),h=this.hbaoMaterial.uniforms.radius_of_influence.value*.5*c;this.hbaoMaterial.uniforms.radius_in_screen_space.value=h,this.hbaoMaterial.uniforms.is_ortho.value=!1}else{this.hbaoMaterial.uniforms.near.value=this.splineCamera.orthoCamera.near,this.hbaoMaterial.uniforms.far.value=this.splineCamera.orthoCamera.far;let n=this.splineCamera.orthoCamera.projectionMatrix.elements,a=2/n[0],o=2/n[5],s=-(1+n[12])/n[0],l=-(1-n[13])/n[5];this.hbaoMaterial.uniforms.proj_info.value.set(a,o,s,l);let u=.5*(this.hbaoMaterial.uniforms.resolution.value.y/o),c=this.hbaoMaterial.uniforms.radius_of_influence.value*u;this.hbaoMaterial.uniforms.radius_in_screen_space.value=c,this.hbaoMaterial.uniforms.is_ortho.value=!0}this.runHalfRes?(this.fullscreenMaterial=this.hbaoMaterial,e.setRenderTarget(this.aoBuffer),e.clear(),e.render(this.scene,this.camera),this.fullscreenMaterial=mg,mg.uniforms.texture_ao_lrez.value=this.aoBuffer.texture,mg.uniforms.texture_depth_lrez.value=this.gBuffer.depthTexture,mg.uniforms.texture_depth_hrez.value=this.depthBufferHighRes.depthTexture,e.setRenderTarget(e.aoRenderTarget),e.clear(),e.render(this.scene,this.camera)):(this.fullscreenMaterial=this.hbaoMaterial,e.setRenderTarget(this.aaBuffer),e.clear(),e.render(this.scene,this.camera),this.effectPass.renderToScreen=!1,this.effectPass.render(e,this.aaBuffer,e.aoRenderTarget))}dispose(){this.gBuffer.dispose(),this.depthBufferHighRes.dispose(),this.aoBuffer.dispose()}},CSt=`
varying vec2 vUv;
void main() {
    vUv = uv;
    gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`,ESt=`
uniform sampler2D tInput;
uniform sampler2D tMap;
uniform vec2 resolution;
varying vec2 vUv;

uniform vec2 uResolution;
uniform vec2 uCoords;

// Draws a rectangle at center <st> with size <size>
float rectangle(vec2 st, vec2 size) {
    size = vec2(0.5) - size * 0.5;
    vec2 uv = vec2(step(size.x, st.x), step(size.y, st.y));
    uv *= vec2(step(size.x, 1.0 - st.x), step(size.y, 1.0 - st.y));

    return uv.x * uv.y;
}

uniform vec2 uSize;
uniform float uScale;
uniform float uDPR;
uniform float uCurrent;
uniform vec3 uSceneColor;

void main() {
    vec2 screenUv = gl_FragCoord.xy / uResolution.xy;
    screenUv *= 1.0 / uDPR;

    vec2 center = vec2(0.5, -0.5);
    vec2 outsideUv = screenUv;
    outsideUv += center;
    outsideUv -= uCoords.xy / uResolution.xy;
    outsideUv = (outsideUv - 0.5) + 0.5;
    outsideUv -= center;
    vec2 s = (uSize / uResolution) * uScale;
    float isOutside = 1.0 - rectangle(outsideUv, s);
    
    vec2 mid = vec2(0.5);
    vec2 insideUv = (screenUv - mid + s * mid) / s;
    vec4 background = texture2D(tInput, screenUv);
    vec4 image = texture2D(tMap, insideUv);
    gl_FragColor = mix(image, background, isOutside);
}
`,MSt=class extends Sl{constructor(){super(new ai({vertexShader:CSt,fragmentShader:ESt,uniforms:{tInput:new Xe(null),tMap:new Xe(null),uResolution:new Xe(new me),uSize:new Xe(new me),uCoords:new Xe(new me),uScale:new Xe(1),uSceneColor:new Xe(new Vt(16711680)),uDPR:new Xe(1),uCurrent:new Xe(0)}}),"tInput"),this.needsSwap=!0}get uniforms(){return this.fullscreenMaterial.uniforms}get texture(){return this.uniforms.tMap.value}set texture(e){this.uniforms.tMap.value=e}},TSt=`
void main() {
    gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`,PSt=`
uniform sampler2D toScene;
uniform sampler2D fromScene;
uniform vec2 resolution;

uniform vec2 uResolution;
uniform float uDPR;

uniform float mixRatio;
uniform sampler2D tMixTexture;
uniform int useTexture;
uniform float threshold;

void main() {
	vec2 screenUv = gl_FragCoord.xy / uResolution.xy;
	screenUv *= 1.0 / uDPR;

	vec4 texel1 = texture2D( fromScene, screenUv );
	vec4 texel2 = texture2D( toScene, screenUv );

	if (useTexture==1) {
		
		vec4 transitionTexel = texture2D( tMixTexture, screenUv );
		float r = mixRatio * (1.0 + threshold * 2.0) - threshold;
		float mixf=clamp((transitionTexel.r - r)*(1.0/threshold), 0.0, 1.0);
		
		gl_FragColor = mix( texel1, texel2, mixf );
	} else {
		
		gl_FragColor = mix( texel1, texel2, mixRatio );
		
	}
}
`,DSt=[],ISt=class extends Sl{constructor(){super(new ai({vertexShader:TSt,fragmentShader:PSt,uniforms:{toScene:new Xe(null),fromScene:new Xe(null),uResolution:new Xe(new me),uDPR:new Xe(1),mixRatio:new Xe(0),threshold:new Xe(.1),useTexture:new Xe(0),tMixTexture:{value:DSt[0]}}}),"toScene"),this.needsSwap=!0}get uniforms(){return this.fullscreenMaterial.uniforms}get texture(){return this.uniforms.fromScene.value}set texture(e){this.uniforms.fromScene.value=e}},LSt=`
void main() {
    gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`,kSt=`
uniform sampler2D inputBuffer;
uniform sampler2D blurredInputBuffer;
uniform sampler2D overlay;
uniform float blurIntensity;

uniform vec2 uResolution;
uniform float uDPR;

void main() {
	vec2 screenUv = gl_FragCoord.xy / uResolution.xy;
	screenUv *= 1.0 / uDPR;

	vec4 texel1 = texture2D( overlay, screenUv );
	vec4 texel2 = texture2D( inputBuffer, screenUv );
	vec4 texel3 = texture2D( blurredInputBuffer, screenUv );

	float blurMask2 = max(sign(texel1.a), 0.0) * blurIntensity;
    gl_FragColor = mix( mix(texel2, texel3, blurMask2), texel1, texel1.a );
}
`,RSt=class extends Sl{constructor(){super(new ai({vertexShader:LSt,fragmentShader:kSt,uniforms:{inputBuffer:new Xe(null),blurredInputBuffer:new Xe(null),overlay:new Xe(null),uResolution:new Xe(new me),uDPR:new Xe(1),blurIntensity:new Xe(0)}})),this._blurEnabled=!1,this.blurTarget=new ui(1,1,{minFilter:br,magFilter:br,wrapS:Xi,wrapT:Xi}),this.blurPass=new dH({width:window.innerWidth,height:window.innerHeight,kernelSize:z7.HUGE,resolutionScale:.25}),this.blurPass.renderToScreen=!1,this.uniforms.blurredInputBuffer.value=this.blurTarget.texture}get uniforms(){return this.fullscreenMaterial.uniforms}get texture(){return this.uniforms.overlay.value}set texture(e){this.uniforms.overlay.value=e}setResolution(e,t,r=1){this.uniforms.uResolution.value.set(e,t),this.uniforms.uDPR.value=r,this.blurPass.setSize(e,t),this.blurTarget.setSize(e,t),this.blurPass.setSize(e,t)}get uiCanvas(){return this._uiCanvas}set uiCanvas(e){this._uiCanvas=e,e.texture&&(this.uniforms.overlay.value=e.texture);let t=e.frame;if(t){let r=t.data.backgroundBlur,i=r.radius;this._blurEnabled=r.enabled,this.uniforms.blurIntensity.value=this._blurEnabled?1:0,this.blurPass.scale=i/3}}render(e,t,r,i,n){this._blurEnabled&&(this.blurPass.setDepthTexture(this.getDepthTexture()),this.blurPass.render(e,t,this.blurTarget,i,n)),super.render(e,t,r,i,n)}},OSt=`
varying vec2 vUv;
void main() {
    vUv = uv;
    gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`,BSt=`
uniform sampler2D tInput;
uniform sampler2D tOverlayImage;
varying vec2 vUv;
uniform vec2 uResolution;
uniform vec2 uRightBottom;
uniform vec2 uImageSize;
uniform float uScale;
uniform float uDPR;

vec3 blendNormal(vec3 base, vec3 blend) {
	return blend;
}

vec3 blendNormal(vec3 base, vec3 blend, float opacity) {
	return (blendNormal(base, blend) * opacity + base * (1.0 - opacity));
}

vec4 drawFixedSizeImage(sampler2D image, vec2 screenUV, vec2 imageSize, vec2 imageCoords, vec2 screenSize, float dpr) {
	vec2 uv = (screenUV * screenSize * dpr - imageCoords) / (imageSize * dpr);
	if (uv.x < 0.0 || uv.x > 1.0 || uv.y < 0.0 || uv.y > 1.0) {
		return vec4(0.0);
	}
	return texture2D(image, uv);
}

void main() {
    vec2 screenUV = gl_FragCoord.xy / (uResolution.xy * uDPR);
	vec2 imageCoords = vec2(uResolution.x * uDPR - uImageSize.x * uScale * uDPR - uRightBottom.x * uDPR, uRightBottom.y * uDPR);
    vec4 background = texture2D(tInput, screenUV);
    vec4 image = drawFixedSizeImage(tOverlayImage, screenUV, uImageSize * uScale, imageCoords, uResolution, uDPR);
    gl_FragColor = vec4(blendNormal(background.rgb, image.rgb, image.a), max(background.a, image.a));
}
`,NSt=class extends Sl{constructor(){super(new ai({vertexShader:OSt,fragmentShader:BSt,uniforms:{tInput:new Xe(null),tOverlayImage:new Xe(null),uResolution:new Xe(new me),uImageSize:new Xe(new me),uRightBottom:new Xe(new me(20,20)),uScale:new Xe(.25),uDPR:new Xe(1)}}),"tInput")}get uniforms(){return this.fullscreenMaterial.uniforms}get texture(){return this.uniforms.tOverlayImage.value}set texture(e){this.uniforms.tOverlayImage.value=e,this.uniforms.uImageSize.value.set(e.image.width,e.image.height)}};function uie(e,t){return t&&t.enabled&&e.push(t.effect),e}var VSt=e=>Object.values(Xr).includes(e)?e:Xr.NORMAL,FSt=class extends Ka{constructor(e,t){super(),this._needsDOFResize=t,this.postprocessingState=f6.defaultData,this._scene=new jc,this._camera=new wo,this.effects=new Map,this.blueNoiseTexture=new Tl,this._renderToScreen=!0,this._isUIOverlayEnabled=!1,this.clock=new Xft,this.renderer=e,this.debug=!1,this.effects.set("bloom",new J8t),this.effects.set("chromaticAberration",new eSt),this.effects.set("vignette",new nSt),this.effects.set("noise",new iSt),this.effects.set("colorAverage",new tSt),this.effects.set("hueSaturation",new rSt),this.effects.set("brightnessContrast",new $8t),this.effects.set("depthOfField",new aSt),this.effects.set("pixelation",new oSt),this.effectComposer=new pSt(this.renderer),this.effectComposer.autoRenderToScreen=!1,this.opaquePass=new HO(!0,this.scene,this.camera),this.opaquePass.clear=!0,this.transmissionPass=new dSt(this.scene,this.camera,this.renderer),this.aoPass=new SSt(this.scene,this.camera),this.taaPass=new hSt,this.taaPass.renderToScreen=!1,this.helperPass=new mSt(this.camera),this.helperPass.renderToScreen=!1,this.stylesOverlayPass=new MSt,this.stylesOverlayPass.enabled=!1,this.uiOverlayPass=new RSt,this.uiOverlayPass.enabled=!1,this.logoOverlayPass=new NSt,this.logoOverlayPass.enabled=!1,this.sceneTransitionPass=new ISt,this.sceneTransitionPass.enabled=!1,this._initCopyPass(),this._initPasses()}set overlayTexture(e){e!==void 0?(this.stylesOverlayPass.texture=e,this.stylesOverlayPass.enabled=!0):this.stylesOverlayPass.enabled=!1}get overlayTexture(){return this.stylesOverlayPass.texture}set sceneHelpers(e){this.helperPass.sceneHelpers=e}get sceneHelpers(){return this.helperPass.sceneHelpers}set sceneHelpersOnTop(e){this.helperPass.sceneHelpersOnTop=e}get sceneHelpersOnTop(){return this.helperPass.sceneHelpersOnTop}get scene(){return this._scene}set scene(e){this._scene=e,this.opaquePass.setScene(e),this.transmissionPass.setScene(e),this.aoPass.setScene(e)}get camera(){return this._camera}set camera(e){let t=this._camera!==e;this._camera=e,this.opaquePass.setCamera(e),this.transmissionPass.setCamera(e),t&&this.transmissionPass.updatePasses(this.renderer),this.aoPass.setCamera(e),this.helperPass.setCamera(e),this.effects.get("depthOfField").setCamera(e)}updateRenderToScreen(){let e=!1;for(let t=this.effectComposer.passes.length-1;t>=0;t--){let r=this.effectComposer.passes[t];if(r.enabled===!0&&!e&&this._renderToScreen){r.renderToScreen=!0,e=!0;continue}r.renderToScreen=!1}}get isUIOverlayEnabled(){return this._isUIOverlayEnabled}disableUIOverlay(){this._isUIOverlayEnabled=!1}enableUIOverlay(){this._isUIOverlayEnabled=!0}disableHelpers(){this.helperPass.enabled=!1,this.updateRenderToScreen()}enableHelpers(){this.helperPass.enabled=!0,this.updateRenderToScreen()}updateBlueNoiseTexture(e){this.blueNoiseTexture=new Tl(e,128,128),this.blueNoiseTexture.wrapS=$h,this.blueNoiseTexture.wrapT=$h,this.blueNoiseTexture.minFilter=mi,this.blueNoiseTexture.magFilter=mi,this.blueNoiseTexture.needsUpdate=!0}setAmbientOcclusionParams(e,t,r,i,n,a,o,s){this.aoPass.enabled=e,this.aoPass.radius=t,this.aoPass.bias=r,this.aoPass.aoColor=i,this.aoPass.fogEnabled=n,this.aoPass.fogNear=a,this.aoPass.fogFar=o,this.aoPass.runHalfRes!==!s&&(this.aoPass.runHalfRes=!s)}setTransmissionPassEnabled(e){this.transmissionPass.enabled=e,this.opaquePass.hasTransmissionPass=e}_initPasses(){var e,t,r;if((e=this.uvEffectPass)==null||e.dispose(),(t=this.effectPass)==null||t.dispose(),this.effectComposer.removeAllPasses(),this.transmissionPass.updatePasses(this.renderer),this.effectComposer.addPass(this.aoPass),this.effectComposer.addPass(this.opaquePass),this.effectComposer.addPass(this.transmissionPass),this.effectComposer.addPass(this.taaPass),this.postprocessingState.enabled){let i=[this.effects.get("pixelation")].reduce(uie,[]);i.length>0&&(this.uvEffectPass=new D6(this.camera,...i),this.uvEffectPass.renderToScreen=!1,this.effectComposer.addPass(this.uvEffectPass));let n=[this.effects.get("chromaticAberration"),this.effects.get("bloom"),this.effects.get("depthOfField"),this.effects.get("colorAverage"),this.effects.get("hueSaturation"),this.effects.get("brightnessContrast"),this.effects.get("vignette"),this.effects.get("noise")].reduce(uie,[]);if(n.length>0&&(this.effectPass=new D6(this.camera,...n),this.effectPass.renderToScreen=!1,this.effectComposer.addPass(this.effectPass),this._needsDOFResize&&((r=this.effects.get("depthOfField"))==null?void 0:r.enabled)&&window!==void 0)){let a=this.renderer.viewportWidth,o=this.renderer.viewportHeight;this.renderer.setSize(a-1,o-1),this.renderer.setSize(a,o)}}this.effectComposer.addPass(this.stylesOverlayPass),this.effectComposer.addPass(this.uiOverlayPass),this.effectComposer.addPass(this.sceneTransitionPass),this.effectComposer.addPass(this.helperPass),this.effectComposer.addPass(this.logoOverlayPass)}_initCopyPass(){if(this._savePass)return;let e=new me;this.renderer.getDrawingBufferSize(e),this._rt=new ui(e.x,e.y,{depthBuffer:!1,stencilBuffer:!1,wrapS:$h,wrapT:$h}),this._rt.samples=0,this._savePass=new FO(this._rt,!1),this._savePass.renderToScreen=!1}setCopyPass(e){this._rt=e,this._savePass=new FO(this._rt,!1),this.renderToScreen=!1}get renderToScreen(){return this._renderToScreen}set renderToScreen(e){if(this._renderToScreen===e)return;let t=this.effectComposer;!t||(e===!0?t.removePass(this._savePass):t.addPass(this._savePass),this._renderToScreen=e,this.updateRenderToScreen())}set sceneTransitionFromTexture(e){e!==this.sceneTransitionPass.texture&&(e!==null?this.sceneTransitionPass.enabled=!0:(this.sceneTransitionPass.enabled=!1,this.updateRenderToScreen()),this.sceneTransitionPass.texture=e)}setWatermark(e){this.logoOverlayPass.enabled=e!==null,e&&(this.logoOverlayPass.texture=e)}get texture(){return this._rt&&this._rt.texture}get renderTarget(){return this._rt}updatePostprocessing(e){let{enabled:t,...r}=e,i=!1;t!==this.postprocessingState.enabled&&(i=!0);for(let n of Object.entries(r)){let a=n[1],o=this.effects.get(n[0]);if(o){o.enabled!==a.enabled&&(i=!0),o.enabled=a.enabled;for(let[s,l]of Object.entries(a))s==="blendFunction"?o.blendFunction=VSt(l):o[s]=l}}this.postprocessingState=e,i&&this._initPasses()}render(){this.effectComposer.render(this.clock.getDelta())}setScissor(e,t,r,i){e instanceof er?(this.effectComposer.inputBuffer.scissor.set(e.x,e.y,e.z,e.w),this.effectComposer.outputBuffer.scissor.set(e.x,e.y,e.z,e.w)):(this.effectComposer.inputBuffer.scissor.set(e,t,r,i),this.effectComposer.outputBuffer.scissor.set(e,t,r,i));let n=this.renderer.getPixelRatio();this.effectComposer.inputBuffer.scissor.multiplyScalar(n),this.effectComposer.outputBuffer.scissor.multiplyScalar(n),this.renderer.setScissor(e,t,r,i)}setScissorTest(e){this.effectComposer.inputBuffer.scissorTest=e,this.effectComposer.outputBuffer.scissorTest=e,this.renderer.setScissorTest(e)}setViewport(e,t,r,i){e instanceof er?(this.effectComposer.inputBuffer.viewport.copy(e),this.effectComposer.outputBuffer.viewport.copy(e)):(this.effectComposer.inputBuffer.viewport.set(e,t,r,i),this.effectComposer.outputBuffer.viewport.set(e,t,r,i))}resize(e,t,r){if(this.effectComposer.setSize(e,t,r),this._rt){let i=this.renderer.getPixelRatio();this._rt.setSize(e*i,t*i)}}dispose(){var e,t;(e=this.uvEffectPass)==null||e.dispose(),(t=this.effectPass)==null||t.dispose(),this.effectComposer.dispose()}},zSt=e=>`

// PCSS implementation based on:
// https://www.gamedev.net/articles/programming/graphics/contact-hardening-soft-shadows-made-fast-r4906/
// NOTE: This number affects how big the shadow blur can
// possibly get. Bigger number == bigger blur, but less precise results

const float  gPenumbraFilterSize = 80.0;
const int   gPenumbraSamples = ${e};
const int gShadowSamples = ${e};
const float gShadowSamplesRpc = 1.0f / float(gShadowSamples);

#ifdef USE_SHADOWMAP
    #if NUM_DIR_LIGHT_SHADOWS > 0

        uniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];
        varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];

        struct DirectionalLightShadow {
            float shadowBias;
            float shadowNormalBias;
            float shadowRadius;
            vec2 shadowMapSize;
        };

        uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];

    #endif

    #if NUM_SPOT_LIGHT_SHADOWS > 0

        uniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];
        varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_SHADOWS ];

        struct SpotLightShadow {
            float shadowBias;
            float shadowNormalBias;
            float shadowRadius;
            vec2 shadowMapSize;
        };

        uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];

    #endif

    #if NUM_POINT_LIGHT_SHADOWS > 0

        uniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];
        varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];

        struct PointLightShadow {
            float shadowBias;
            float shadowNormalBias;
            float shadowRadius;
            vec2 shadowMapSize;
            float shadowCameraNear;
            float shadowCameraFar;
        };

        uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];

    #endif

    /*
    #if NUM_RECT_AREA_LIGHTS > 0

        // TODO (abelnation): create uniforms for area light shadows

    #endif
    */

float computePenumbra(int index, sampler2D shadowMap, float temporalAngle, float texelSize, vec2 uv, float compare, float texelScalar, float shadowRadius)
{
    float penumbra = 1.0;
    float blockerDepthAvg = 0.0;
    float blockerCount = 0.0;

    #pragma unroll_loop_start
    for(int i = 0; i < gPenumbraSamples; i ++)
    {
        vec2 offset = (vogelDiskSample(i, gShadowSamples, temporalAngle) * texelSize) * texelScalar;
        float depth = unpackRGBAToDepth( texture2D( shadowMap, uv + offset ) );

        if(depth < compare + 0.0001)
        {
            blockerDepthAvg += depth;
            blockerCount++;
        }
    }
    #pragma unroll_loop_end

    if (blockerCount > 0.0)
    {
        blockerDepthAvg /= blockerCount;

        // Compute penumbra
        penumbra = (compare - blockerDepthAvg) / (blockerDepthAvg);
        penumbra *= penumbra;
        penumbra *= 200.0 * penumbraSize[min(index, 5 - 1)]; // Magic number that affects how quickly the penumbra grows

        return clamp(penumbra, 0.00, 1.0);
    }
    return 0.0;
}

float vogelShadow(int index, sampler2D shadowMap, vec2 uv, float texelSize, float compare, float shadowRadius)
{
    float shadow         = 0.0f;

    // NOTE: When using TAA, we should use screen space interleaved gradient noise
    vec2 halton = haltonSequence[frameIndex];
    float temporalOffset = getNoiseInterleavedGradient(gl_FragCoord.xy + halton);
    float temporalAngle  = temporalOffset * PI2;

    float texelScalar = (gPenumbraFilterSize) / (texelSize * 1024.);
    float penumbra = computePenumbra(index, shadowMap, temporalAngle, texelSize, uv, compare, texelScalar, shadowRadius);
    if (penumbra == -1.0) {
        return 1.0;
    }

    #pragma unroll_loop_start
    for (int i = 0; i < gShadowSamples; i++)
    {
        vec2 vogelSample =  vogelDiskSample(i, gShadowSamples, temporalAngle) * texelSize;
        // Overall blurring offset
        vec2 offset = vogelSample * (shadowRadius * 2.);

        // Penumbra offset
        offset += vogelSample * (penumbra * texelScalar);

        shadow += step( compare, unpackRGBAToDepth( texture2D( shadowMap, uv + offset ) ) );
    }
    #pragma unroll_loop_end

    return shadow * gShadowSamplesRpc;
}


    float texture2DCompare( sampler2D depths, vec2 uv, float compare ) {

        return step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );

    }

    vec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {

        return unpackRGBATo2Half( texture2D( shadow, uv ) );

    }

    float VSMShadow (sampler2D shadow, vec2 uv, float compare ){

        float occlusion = 1.0;

        vec2 distribution = texture2DDistribution( shadow, uv );

        float hard_shadow = step( compare , distribution.x ); // Hard Shadow

        if (hard_shadow != 1.0 ) {

            float distance = compare - distribution.x ;
            float variance = max( 0.00000, distribution.y * distribution.y );
            float softness_probability = variance / (variance + distance * distance ); // Chebeyshevs inequality
            softness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 ); // 0.3 reduces light bleed
            occlusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );

        }
        return occlusion;

    }

    float getShadow( int i, sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {

        float shadow = 1.0;

        shadowCoord.xyz /= shadowCoord.w;
        shadowCoord.z += shadowBias;

        // if ( something && something ) breaks ATI OpenGL shader compiler
        // if ( all( something, something ) ) using this instead

        bvec4 inFrustumVec = bvec4 ( shadowCoord.x >= 0.0, shadowCoord.x <= 1.0, shadowCoord.y >= 0.0, shadowCoord.y <= 1.0 );
        bool inFrustum = all( inFrustumVec );

        bvec2 frustumTestVec = bvec2( inFrustum, shadowCoord.z <= 1.0 );

        bool frustumTest = all( frustumTestVec );

        if ( frustumTest ) {

        #if defined( SHADOWMAP_TYPE_PCF )

            vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
            return vogelShadow(i, shadowMap, shadowCoord.xy, texelSize.x, shadowCoord.z, shadowRadius );

        #elif defined( SHADOWMAP_TYPE_PCF_SOFT )

            vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
            float dx = texelSize.x;
            float dy = texelSize.y;

            vec2 uv = shadowCoord.xy;
            vec2 f = fract( uv * shadowMapSize + 0.5 );
            uv -= f * texelSize;

            shadow = (
                texture2DCompare( shadowMap, uv, shadowCoord.z ) +
                texture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +
                texture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +
                texture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +
                mix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),
                     texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),
                     f.x ) +
                mix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),
                     texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),
                     f.x ) +
                mix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),
                     texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),
                     f.y ) +
                mix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),
                     texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),
                     f.y ) +
                mix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),
                          texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),
                          f.x ),
                     mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),
                          texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),
                          f.x ),
                     f.y )
            ) * ( 1.0 / 9.0 );

        #elif defined( SHADOWMAP_TYPE_VSM )

            shadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );

        #else // no percentage-closer filtering:

            shadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );

        #endif

        }

        return shadow;

    }

    // cubeToUV() maps a 3D direction vector suitable for cube texture mapping to a 2D
    // vector suitable for 2D texture mapping. This code uses the following layout for the
    // 2D texture:
    //
    // xzXZ
    //  y Y
    //
    // Y - Positive y direction
    // y - Negative y direction
    // X - Positive x direction
    // x - Negative x direction
    // Z - Positive z direction
    // z - Negative z direction
    //
    // Source and test bed:
    // https://gist.github.com/tschw/da10c43c467ce8afd0c4

    vec2 cubeToUV( vec3 v, float texelSizeY ) {

        // Number of texels to avoid at the edge of each square

        vec3 absV = abs( v );

        // Intersect unit cube

        float scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );
        absV *= scaleToCube;

        // Apply scale to avoid seams

        // two texels less per square (one texel will do for NEAREST)
        v *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );

        // Unwrap

        // space: -1 ... 1 range for each square
        //
        // #X##         dim    := ( 4 , 2 )
        //  # #         center := ( 1 , 1 )

        vec2 planar = v.xy;

        float almostATexel = 1.5 * texelSizeY;
        float almostOne = 1.0 - almostATexel;

        if ( absV.z >= almostOne ) {

            if ( v.z > 0.0 )
                planar.x = 4.0 - v.x;

        } else if ( absV.x >= almostOne ) {

            float signX = sign( v.x );
            planar.x = v.z * signX + 2.0 * signX;

        } else if ( absV.y >= almostOne ) {

            float signY = sign( v.y );
            planar.x = v.x + 2.0 * signY + 2.0;
            planar.y = v.z * signY - 2.0;

        }

        // Transform to UV space

        // scale := 0.5 / dim
        // translate := ( center + 0.5 ) / dim
        return vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );

    }

    float getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {

        float shadow = 1.0;
        vec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );

        // for point lights, the uniform @vShadowCoord is re-purposed to hold
        // the vector from the light to the world-space position of the fragment.
        vec3 lightToPosition = shadowCoord.xyz;

        // dp = normalized distance from light to fragment position
        float compare = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear ); // need to clamp?
        compare += shadowBias;

        // bd3D = base direction 3D
        vec3 bd3D = normalize( lightToPosition );

        vec2 halton = haltonSequence[frameIndex];
        float temporalOffset = getNoiseInterleavedGradient(gl_FragCoord.xy + halton);
        float temporalAngle  = temporalOffset * PI2;

        #if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_VSM )
            for (int i = 0; i < gShadowSamples; i++) {
                vec2 vogelSample = vogelDiskSample(i, gShadowSamples, temporalAngle) * texelSize;

                // Overall blurring offset
                vec3 offset = vec3(vogelSample.x, vogelSample.y, -vogelSample.x) * (shadowRadius + 5.);

                // NOTE: Removed for now
                // Penumbra offset
                //offset += vec3(vogelSample.x, vogelSample.y, vogelSample.y)  * (penumbra * gPenumbraFilterSize);

                shadow += texture2DCompare( shadowMap, cubeToUV( bd3D + offset, texelSize.y ), compare );

            }
            return shadow * gShadowSamplesRpc;

        #elif defined( SHADOWMAP_TYPE_PCF_SOFT )
            for (int i = 0; i < 16; i++) {
                vec2 vogelSample = vogelDiskSample(i, gShadowSamples, temporalAngle) * texelSize;

                // Overall blurring offset
                vec3 offset = vec3(vogelSample.x, vogelSample.y, -vogelSample.x) * (shadowRadius + 5.);

                shadow += texture2DCompare( shadowMap, cubeToUV( bd3D + offset, texelSize.y ), compare );

            }
            return shadow * (1.0 / 16.0);
        #else // no percentage-closer filtering

            return texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), compare );

        #endif

    }

#endif
`,HSt=xr.lights_fragment_begin,USt=xr.shadowmask_pars_fragment,cie=null,GSt=e=>{switch(e){case"low":return 8;case"medium":return 16;case"high":return 32;default:return 16}},jSt=(e="medium")=>{if(cie===e)return!1;cie=e;let t=GSt(e);xr.shadowmap_pars_fragment=zSt(t);let r=HSt.slice();r=r.replace("getShadow( spotShadowMap[ i ]","getShadow( UNROLLED_LOOP_INDEX + 3, spotShadowMap[ i ]"),r=r.replace("getShadow( directionalShadowMap[ i ]","getShadow( UNROLLED_LOOP_INDEX, directionalShadowMap[ i ]"),xr.lights_fragment_begin=r;let i=USt.slice();return i=i.replaceAll("getShadow(","getShadow( UNROLLED_LOOP_INDEX, "),xr.shadowmask_pars_fragment=i,!0},WSt=`
attribute vec3 randomColor;
varying vec3 vNormal;
flat out vec3 vColor;
#include <skinning_pars_vertex>
#include <morphtarget_pars_vertex>
	
void main()
{
#include <beginnormal_vertex>
#include <morphnormal_vertex>
#include <skinbase_vertex>
#include <skinnormal_vertex>
vec3 transformed = vec3(position);
#include <morphtarget_vertex>
#include <skinning_vertex>

vNormal = normal;
vColor = randomColor;
gl_Position = projectionMatrix * (modelViewMatrix * vec4(transformed, 1.0));
}
`,qSt=`
uniform float depthContrast;
varying vec3 vNormal;
flat in vec3 vColor;
void main()
{
vec3 normal = (normalize(vNormal)).rgb;

float contrastDepth = (gl_FragCoord.z - 0.5) * depthContrast + 0.5;

vec3 resultColor = mix(mix(vColor, normal, 0.2), vec3(contrastDepth), 0.4);
gl_FragColor = vec4(resultColor, vColor.r);
gl_FragColor = vec4(resultColor, vColor.r);
}
`,SD=new ai({vertexShader:WSt,fragmentShader:qSt,uniforms:{depthContrast:{value:1}}}),hie=new an,die=new me,YSt=class extends eme{constructor(e){super(e),this._pixelRatio=this.getPixelRatio(),this.viewportWidth=1,this.viewportHeight=1,this.resolution=new me,this.dummyCamera=new wo,this.sceneTransitionDuration=0,this.sceneTransitionTimeRemaining=-1,this.isXRCopyPassSet=!1,this.clear=(n=!0,a=!0,o=!0)=>{let s=this.getContext(),l=0;n&&(l|=s.COLOR_BUFFER_BIT),a&&(l|=s.DEPTH_BUFFER_BIT),o&&(l|=s.STENCIL_BUFFER_BIT),s.clear(l),s.clearBufferfv(s.COLOR,1,[0,0,0,1])},this.pipeline=new FSt(this,(e==null?void 0:e.needsDOFResize)??!1),this.autoClear=!1;let t=this.setPixelRatio.bind(this),r=this.setSize.bind(this);this.shadowMap.enabled=!0,this.shadowMap.type=JF,this.dummyCamera.matrixAutoUpdate=!1,this.domElement.removeAttribute("data-engine");let i=this.getContext();if(i&&"drawingBufferColorSpace"in i)try{i.drawingBufferColorSpace="display-p3"}catch(n){console.warn(n)}this.setPixelRatio=n=>{this._pixelRatio!==n&&(this._pixelRatio=n,t(n))},this.setSize=(n,a,o=!0)=>{var s,l;(this.viewportWidth!==n||this.viewportHeight!==a)&&(this.viewportWidth=n,this.viewportHeight=a,r(n,a,o),(s=this.normalRenderTarget)==null||s.setSize(n*this._pixelRatio,a*this._pixelRatio),this._resizeTransmission(n,a),(l=this.transmissionDepthTarget)==null||l.setSize(n*this._pixelRatio/2,a*this._pixelRatio/2),this.pipeline.resize(n,a,o))},this._superDispose=this.dispose,this.dispose=this._currentDispose}createAORenderTarget(){this.aoRenderTarget===void 0&&(this.aoRenderTarget=new ui(this.viewportWidth*this._pixelRatio,this.viewportHeight*this._pixelRatio,{generateMipmaps:!1,minFilter:br,magFilter:br,wrapS:Xi,wrapT:Xi,depthBuffer:!1}))}_resizeTransmission(e,t){var r,i;(r=this.transmissionRenderTarget)==null||r.setSize(e*this._pixelRatio/(this.hdTransmission?1:2),t*this._pixelRatio/(this.hdTransmission?1:2)),(i=this.aoRenderTarget)==null||i.setSize(e*this._pixelRatio/1,t*this._pixelRatio/1)}get hdTransmission(){return Ht.transmissionLod.value===1}set hdTransmission(e){Ht.transmissionLod.value=e===!0?1:2,this._resizeTransmission(this.viewportWidth,this.viewportHeight)}createTransmissionRenderTarget(){this.transmissionRenderTarget===void 0&&(this.transmissionRenderTarget=new ui(this.viewportWidth*this._pixelRatio/(this.hdTransmission?1:2),this.viewportHeight*this._pixelRatio/(this.hdTransmission?1:2),{generateMipmaps:!0,minFilter:J1,magFilter:br,wrapS:Xi,wrapT:Xi,depthBuffer:!1}),this.transmissionDepthTarget=new ui(this.viewportWidth*this._pixelRatio/2,this.viewportHeight*this._pixelRatio/2,{minFilter:mi,magFilter:mi,depthBuffer:!1}))}createNormalRenderTarget(){this.normalRenderTarget===void 0&&(this.normalRenderTarget=new ui(this.viewportWidth*this._pixelRatio,this.viewportHeight*this._pixelRatio,{generateMipmaps:!1,minFilter:mi,magFilter:mi,type:On,depthTexture:new ey(this.viewportWidth*this._pixelRatio,this.viewportHeight*this._pixelRatio)}))}renderNormal(e,t,r){this.normalRenderTarget&&(this.setClearColor(0),r.layers.enable(8),r.layers.disable(0),r.layers.disable(3),t.traverseEntity(i=>{i.layers.isEnabled(8)&&(i.copyPreviousMatrix=!1)}),this.setRenderTarget(this.normalRenderTarget),this.clear(),r instanceof wo?SD.uniforms.depthContrast.value=(r.far-r.near)/1e4:SD.uniforms.depthContrast.value=1,t.overrideMaterial=SD,this.render(t,r),this.setClearColor(t.bgColor,t.bgColor.a),this.setRenderTarget(null),t.overrideMaterial=e.wireframeState?XO:null,r.layers.enable(0),r.layers.enable(3),t.traverseEntity(i=>{i.layers.isEnabled(8)&&(i.copyPreviousMatrix=!0)}))}renderSplineSceneWithDummyCamera(e,t,r=1){this.dummyCamera.updateCameraState(t.dataPatched),this.dummyCamera.matrix.copy(t.matrixWorld);let i=t.height,n=t.width,a=this.viewportWidth/this.viewportHeight;n<i?n=i*a:i=n/a,this.dummyCamera.setViewplaneSize(n,i);for(let o=0;o<r;o++)this.renderSplineScene(e,this.dummyCamera)}renderSplineScene(e,t,{sceneHelpers:r=this.sceneHelpers,sceneHelpersOnTop:i=this.sceneHelpersOnTop,overrideTransmission:n=void 0,overrideNormal:a=void 0}={}){var d;let o=e instanceof bH?e.activePage:e,s=o.visible;o.visible=!0;let l=o.scene;this.xr.enabled&&(this.isXRCopyPassSet===!1&&this.getRenderTarget()!==null&&(this.pipeline.setCopyPass(this.getRenderTarget()),this.isXRCopyPassSet=!0),this.xr.updateCamera(t)),this.setClearColor(o.bgColor,o.bgColor.a),o.penumbraSizeArray.forEach((f,p)=>{Ht.penumbraSize.value[p]=f}),Ht.pixelRatioNode.value=this.getPixelRatio(),this.resolution.x!==0&&this.resolution.y!==0?Ht.resolution.value.set(this.resolution.x,this.resolution.y):Ht.resolution.value.set(this.viewportWidth*this._pixelRatio,this.viewportHeight*this._pixelRatio),a!==void 0?(Ht.normalRenderTarget.value=a,Ht.normalRenderTargetDepth.value=hie):l.needsNormal()&&(this.createNormalRenderTarget(),Ht.normalRenderTarget.value=this.normalRenderTarget.texture,Ht.normalRenderTargetDepth.value=this.normalRenderTarget.depthTexture,this.renderNormal(l,o,t));let u=o.data.ao,c=u.occlusion;if(c&&(this.createAORenderTarget(),Ht.aoRenderTarget.value=this.aoRenderTarget.texture),Ht.aoEnabled.value=c,this.pipeline.setAmbientOcclusionParams(u.occlusion,u.radius,u.bias,o.aoColor,o.fog!==null,o.backupFog.near,o.backupFog.far,u.aoFullRes&&!q4),this.pipeline.aoPass.setBlueNoiseTexture(this.pipeline.blueNoiseTexture),this.pipeline.isUIOverlayEnabled&&((d=o.uiCanvas)==null?void 0:d.enabled)&&o.uiCanvas.texture&&o.uiCanvas.texture.image.width>0){let f=this.getSize(die),p=this.getPixelRatio();(o.uiCanvas.width!==this.viewportWidth||o.uiCanvas.height!==this.viewportHeight||o.uiCanvas.dpr!==p)&&o.uiCanvas.applySize({width:this.viewportWidth,height:this.viewportHeight},p),o.uiCanvas.render(this),this.pipeline.uiOverlayPass.uiCanvas=o.uiCanvas,this.pipeline.uiOverlayPass.enabled=!0,this.pipeline.uiOverlayPass.setResolution(f.x,f.y,p),this.pipeline.updateRenderToScreen()}else this.pipeline.uiOverlayPass.enabled=!1,this.pipeline.updateRenderToScreen();if(this.pipeline.logoOverlayPass.enabled){let f=this.getSize(die),p=this.getPixelRatio();this.pipeline.logoOverlayPass.uniforms.uResolution.value.set(f.x,f.y),this.pipeline.logoOverlayPass.uniforms.uDPR.value=p}let h=!1;if(n!==void 0)Ht.transmissionRenderTarget.value=n,Ht.transmissionRenderTargetDepth.value=hie,this.pipeline.setTransmissionPassEnabled(!1);else{let f=l.needsTransmission();f&&(this.transmissionRenderTarget===void 0&&(h=!0),this.createTransmissionRenderTarget(),Ht.transmissionRenderTarget.value=this.transmissionRenderTarget.texture,Ht.aspectRatio.value=M_t(this.viewportWidth,this.viewportHeight),Ht.transmissionRenderTargetDepth.value=this.transmissionDepthTarget.texture),this.pipeline.setTransmissionPassEnabled(f)}t.layers.enable(3),t.layers.enable(8),this.pipeline.sceneHelpers=r,this.pipeline.sceneHelpersOnTop=i,this.pipeline.scene=o,this.pipeline.camera=t,h&&this.pipeline.transmissionPass.updatePasses(this),this.pipeline.postprocessingState!==o.postprocessing&&(this.pipeline.updatePostprocessing(o.postprocessing),!r&&!i&&this.pipeline.disableHelpers()),this.clearAlphaOverride!==void 0&&this.setClearAlpha(this.clearAlphaOverride),o.overrideMaterial=l.wireframeState?XO:null,this.pipeline.render(),Ht.frameIndex.value=(Ht.frameIndex.value+1)%16,t instanceof wo&&t.copyHistory(),o.visible=s}renderFromSceneForSceneTransitionPass(e,t,r){this.pipeline.renderToScreen=!1,this.pipeline.renderTarget,this.renderSplineScene(e,t),this.pipeline.sceneTransitionFromTexture=this.pipeline.renderTarget.texture,this.sceneTransitionDuration=r,this.sceneTransitionTimeRemaining=r,this.pipeline.renderToScreen=!0;let i=this.pipeline.sceneTransitionPass.uniforms;i.uDPR.value=window.devicePixelRatio,i.uResolution.value.set(this.domElement.width,this.domElement.height).divideScalar(window.devicePixelRatio)}_currentDispose(){var e,t,r,i,n,a;this._superDispose(),this.pipeline.dispose(),(e=this.aoRenderTarget)==null||e.dispose(),(t=this.transmissionRenderTarget)==null||t.dispose(),(r=this.transmissionDepthTarget)==null||r.dispose(),(i=this.normalRenderTarget)==null||i.dispose(),(a=(n=this.normalRenderTarget)==null?void 0:n.depthTexture)==null||a.dispose()}},yye=class extends Z4(cpt){constructor(e,t=15,r=10066329){super(e,t,r),this.object=e,this.added=!1,this.name=`DirectionalLightHelper: ${e.uuid}`}raycast(e,t){Q4(this.object,yye.geometryHelper,e,t)}},xye=class extends Z4(upt){constructor(e,t=15,r=6710886){super(e,t,r),this.object=e,this.name=`PointLightHelper: ${e.uuid}`}raycast(e,t){Q4(this.object,xye.geometryHelper,e,t)}},UO=class extends Z4(lpt){constructor(e,t=6710886){super(e,t),this.object=e,this.name=`SpotLightHelper: ${e.uuid}`}raycast(e,t){Q4(this.object,UO.geometryHelper,e,t)}update(){if(this.object!==void 0){let e=UO._vector,t=this.object.distance?this.object.distance:1e3,r=t*Math.tan(this.object.angle);this.cone.scale.set(r,r,t),e.setFromMatrixPosition(this.object.target.matrixWorld),this.cone.lookAt(e);let i=this.color!==void 0?this.color:this.light.color;if(this.cone.material instanceof Array)for(let n=0,a=this.cone.material.length;n<a;n++)this.cone.material[n].color.set(i);else this.cone.material.color.set(i)}}},bye=UO;bye._vector=new U;var wye=class extends rd{constructor(){super(),this.caretIndex=0,this._caretVisibleAlpha=1,this._selectionVisibleAlpha=.3,this.current={start:0,end:void 0},this.matrixAutoUpdate=!1,this.caretMesh=new nn(new Md(1,1),new Ed({transparent:!0,opacity:0,side:go})),this.add(this.caretMesh),this.selectionMesh=new nn(new Md(1,1),new Ed({color:2857471,transparent:!0,depthTest:!1,depthWrite:!1,opacity:0,side:go})),this.add(this.selectionMesh),this.hide()}get caretHeight(){var e;return((e=this.object)==null?void 0:e.AD)??0}show(e){this.visible=!0,this.object=e,this.caretMesh.scale.set(1,this.caretHeight,1),this.caretMesh.position.y=-this.caretHeight*.5,this.setCaretPosition(this.caretIndex),this.update()}hide(){this.visible=!1}update(){if(this.object===void 0)return;this.updateHelperMatrix();let{depth:e}=this.object.geometry.userData.parameters;this.caretMesh.position.z=e,this.selectionMesh.position.z=e}updateHelperMatrix(){if(this.object===void 0)return;let e=this.object,t=e.parent;t!==null&&t.updateWorldMatrix(!0,!1),e.matrixAutoUpdate&&e.updateMatrix(),t!==null?(this.matrixWorld.multiplyMatrices(t.matrixWorld,e.hiddenMatrix),this.matrixWorld.multiplyMatrices(this.matrixWorld,e.matrix)):this.matrixWorld.multiplyMatrices(e.hiddenMatrix,e.matrix),this.matrix.copy(this.matrixWorld);for(let r of this.children)r.matrixWorld.copy(this.matrixWorld);e.updateWorldMatrix(!0,!0)}setCaretColor(e){let t=this.caretMesh.material;t.color.setRGB(e.r,e.g,e.b);let r=this._caretVisibleAlpha===t.opacity;this._caretVisibleAlpha=e.a,r&&(t.opacity=this._caretVisibleAlpha)}setSelectionColor(e){this.selectionMesh.material.color.setRGB(e.r,e.g,e.b)}setCaretPosition(e,t={}){if(this.object===void 0)return;this.caretIndex=e;let r=this.object.wrappedText,[i,n]=I6(r,e),[a,o]=e>0?I6(r,e-1):[null,null];(e>0&&r.length?r[a].charAt(o):null)===`
`&&(i++,n=0),this.current.start=e,this.current.end=void 0;let[s,l]=CD(this.object,i,n),{AD:u,descender:c}=this.object,h=c+u*.5,{width:d,height:f,depth:p}=this.object.geometry.userData.parameters,v=typeof d=="string"?0:d,m=typeof f=="string"?0:f;this.caretMesh.scale.set(1,this.caretHeight,1),this.caretMesh.position.set(s-v*.5,l+h+m*.5,p),this.hideSelectionMesh(),this.showCaretMesh()}setSelection(e,t){if(this.object===void 0)return;let r=this.object.wrappedText;this.current.start=e,this.current.end=t;let i=[],n=[],a=XSt(r,e,t),{lineHeight:o,AD:s,descender:l}=this.object,u=l+s*.5-o*.5;for(let[m,g,y]of a)if(g!==y){let[x,b]=CD(this.object,m,g),[_,w]=CD(this.object,m,y);b+=u,w+=u,w+=o;let S=i.length/3;i.push(x,b,0),i.push(_,b,0),i.push(_,w,0),i.push(x,w,0),n.push(S+0,S+1,S+2),n.push(S+2,S+3,S+0)}let c=new It;c.setIndex(n),c.setAttribute("position",new ht(i,3));let{width:h,height:d,depth:f}=this.object.geometry.userData.parameters,p=typeof h=="string"?0:h,v=typeof d=="string"?0:d;this.selectionMesh.geometry.dispose(),this.selectionMesh.geometry=c,this.selectionMesh.position.x=-p*.5,this.selectionMesh.position.y=v*.5,this.selectionMesh.position.z=f,this.showSelectionMesh(),this.hideCaretMesh()}getSelectionFromPosition(e,t,r="previous"){if(this.object===void 0||this.object.font===void 0)return;let i=this.object.wrappedText,n=i.length,a=this.object.lineHeight,o=n*a,{height:s,verticalAlign:l}=this.object.geometry.userData.parameters,u=typeof s=="string"?0:s,c=0;l===3?c=u-o:l===2&&(c=u*.5-o*.5);let h=Math.min(Math.floor(Math.max(Math.min(-t-c,o),0)/a),n-1),d=this.object.charCoords[h],f=this.object.charWidths[h],p=0,v=!1;if(r==="previous"){for(let m=0;m<d.length;m++)if(d[m][0]+f[m]*.5-e>0){p=m,v=!0;break}}else if(r==="closest"){let m=1/0;for(let g=0;g<d.length;g++){let y=d[g][0]+f[g]*.5,x=Math.abs(y-e);x<m&&(m=x,p=g,v=!0)}}else for(let m=0;m<d.length;m++){let g=d[m][0],y=d[m][0]+f[m];if(e>=g&&e<y){p=m,v=!0;break}}return v||(p=d.length),{index:this.getGlobalIndexFromLineAndCharIndexes(i,h,p),lineIndex:h,characterIndex:p}}getGlobalIndexFromLineAndCharIndexes(e,t,r){return e.slice(0,t).reduce((i,n)=>i+=n.length,0)+r}showSelectionMesh(){this.selectionMesh.material.opacity=this._selectionVisibleAlpha}hideSelectionMesh(){this.selectionMesh.material.opacity=0}showCaretMesh(){this.caretMesh.material.opacity=this._caretVisibleAlpha}hideCaretMesh(){this.caretMesh.material.opacity=0}};function CD(e,t,r){let{charCoords:i,charWidths:n,initialOffsetY:a,lineHeight:o}=e;if(i[t]&&i[t].length===0||i.length===0){let c=0,{horizontalAlign:h}=e.data.geometry,d=e.wrappedText,{width:f}=e.geometry.userData.parameters;return d.length===1&&d[0].length===0&&(h===3?c=f*.5:h===2&&(c=f)),[c,a-o*t]}let s=i[t];if(s===void 0||s.length===0)return[0,0];let[l,u]=s[Math.min(r,s.length-1)];return r>=s.length&&(l+=n[t][r-1]),[l,u]}function I6(e,t){var i;let r=0;for(let n=0;n<e.length;n++){let a=e[n],o=t-r;if(o<=a.length)return[n,o];r+=a.length}return[Math.max(0,e.length-1),((i=e[e.length-1])==null?void 0:i.length)??0]}function XSt(e,t,r){let[i,n]=I6(e,t),[a,o]=I6(e,r),s=[];n>=e[i].length&&(i++,n=0);for(let l=i;l<=a;l++){let u=e[l],c=l===i?n:0,h=l===a?o:u.length;s.push([l,c,h])}return s}function ZSt(e,t){let r=Fa.fromHex(3223857),i=.8;for(let n of e.layers){if(n.data.type==="light"||n.data.type==="displace"||n.data.type==="fresnel"||n.data.type==="matcap"||n.data.type==="texture"||n.data.type==="toon"||n.data.type==="outline"||n.data.type==="transmission"||n.data.type==="noise")continue;let a=typeof n.data.alpha=="string"?Number(t.getVariable(n.data.alpha)):n.data.alpha;if(n.data.type==="color"&&a>.3){r=QSt(n.data.color,t),i=a;break}else if((n.data.type==="depth"||n.data.type==="gradient")&&a>.3){let o=KSt(n.data);r={r:o[0],g:o[1],b:o[2]},i=typeof n.data.alpha=="string"?1:n.data.alpha;break}}return{...r,a:i}}function QSt(e,t){return typeof e=="string"?t.data.colors[e]:e}function KSt(e){return e.colors[0]}function JSt(e,t){e.shadow.camera.right=t/2,e.shadow.camera.left=-t/2,e.shadow.camera.top=t/2,e.shadow.camera.bottom=-t/2,e.shadow.needsUpdate=!0}var _ye=class extends cH(Yft,yye){constructor(e,t,r){super(),this.super_Entity(e,t),this.castShadow=!0,this.shadow.mapSize.width=2048,this.shadow.mapSize.height=2048,this.shadow.normalBias=1,this.layers.enable(3);let i=this.shadow.camera;i.top=1250,i.bottom=-1250,i.right=1250,i.left=-1250,i.near=-1e4,i.far=2500;let n=new qS(this.shadow.camera);n.visible=!1,this.gizmos.shadowmap=n}update(){this.shadow.camera.updateProjectionMatrix();for(let e in this.gizmos){let t=this.gizmos[e];t instanceof qS&&t.update()}}updateMatrixWorld(e){super.updateMatrixWorld(e),this.objectHelper&&this.objectHelper.update()}updateState(e,t){this.updateState_Light(e,t);let r=e.depth!==void 0&&e.depth!==this.shadow.camera.far||e.size!==void 0&&e.size/2!==this.shadow.camera.right;e.size!==void 0&&JSt(this,e.size),e.shadowRadius!==void 0&&(this.shadow.radius=e.shadowRadius),e.shadowResolution!==void 0&&(this.shadow.mapSize.set(e.shadowResolution,e.shadowResolution),this.shadow.map&&(this.shadow.map.dispose(),this.shadow.map=null)),e.penumbraSize!==void 0&&t.scene.markPenumbraSizeDirty(),r&&this.update()}},fie=new U,pie=new U,vie=new Jt,Aye=class extends cH(Gft,bye){constructor(e,t,r){super(),this.super_Entity(e,t),this.castShadow=!0,this.shadow.mapSize.width=1024,this.shadow.mapSize.height=1024,this.shadow.normalBias=1,this.layers.enable(3);let i=this.shadow.camera;i.fov=vt.RAD2DEG*2*this.angle,i.aspect=1,i.near=100,i.far=2500;let n=new qS(this.shadow.camera);n.visible=!1,this.gizmos.shadowmap=n,this.update()}update(){this.shadow.camera.updateProjectionMatrix();for(let e in this.gizmos){let t=this.gizmos[e];t instanceof qS&&t.update()}}updateMatrixWorld(e){super.updateMatrixWorld(e),pie.setFromMatrixPosition(this.matrixWorld),vie.setFromRotationMatrix(this.matrixWorld),fie.copy(this.up).applyQuaternion(vie).negate().multiplyScalar(this.distance),this.target.position.copy(pie).add(fie),this.target.updateMatrixWorld(),this.objectHelper&&this.objectHelper.update()}updateState(e,t){this.updateState_Light(e,t),e.distance!==void 0&&(this.distance=e.distance),e.decay!==void 0&&(this.decay=e.decay),e.angle!==void 0&&(this.angle=e.angle),e.penumbra!==void 0&&(this.penumbra=e.penumbra),e.shadowRadius!==void 0&&(this.shadow.radius=e.shadowRadius),e.penumbraSize!==void 0&&t.scene.markPenumbraSizeDirty(),e.shadowResolution!==void 0&&(this.shadow.mapSize.set(e.shadowResolution,e.shadowResolution),this.shadow.map&&(this.shadow.map.dispose(),this.shadow.map=null))}};function $St(e){let t=(e[0][0]+e[1][1])/2,r=(e[0][0]-e[1][1])/2,i=(e[1][0]+e[0][1])/2,n=(e[1][0]-e[0][1])/2,a=Math.sqrt(t*t+n*n),o=Math.sqrt(r*r+i*i),s=a+o,l=a-o,u=Math.atan2(i,r),c=Math.atan2(n,t),h=(c-u)/2,d=(c+u)/2,f=[[Math.cos(d),Math.sin(d)],[-Math.sin(d),Math.cos(d)]],p=[[s,0],[0,l]],v=[[Math.cos(h),Math.sin(h)],[-Math.sin(h),Math.cos(h)]];return f[0][0]*=-1,f[0][1]*=-1,v[0][0]*=-1,v[1][0]*=-1,[f,p,v]}function ZA(e,t){return[[e[0][0]*t[0][0]+e[0][1]*t[1][0],e[0][0]*t[0][1]+e[0][1]*t[1][1]],[e[1][0]*t[0][0]+e[1][1]*t[1][0],e[1][0]*t[0][1]+e[1][1]*t[1][1]]]}function mie(e){return[[e[0][0],e[1][0]],[e[0][1],e[1][1]]]}function e6t(e){let[t,r,i]=$St(e),n=ZA(t,mie(i)),a=ZA(ZA(i,r),mie(i)),o=Math.atan2(n[1][0],n[0][0]),s=[a[0][0],a[1][1]],l=[a[0][1]/a[1][1],a[1][0]/a[0][0]];return{rotation:o,scale:s,shear:l}}function t6t({rotation:e,scale:t,shear:r}){let i=Math.cos(e),n=Math.sin(e),a=[[i,-n],[n,i]],o=[[t[0],r[0]*t[1]],[r[1]*t[0],t[1]]],s=ZA(a,o);return[s[0][0],s[1][0],s[0][1],s[1][1]]}var ei;(e=>{function t(){return[1,0,0,0,1,0,0,0,1]}e.identity=t;function r(w,S=e.identity()){for(let A=0,M=w.length;A<M;A++)S[A]=w[A];return S}e.copy=r;function i(w,S,A,M,E,T){return e.setAbcdef(e.identity(),w,S,A,M,E,T)}e.create=i;function n(w,S,A,M,E,T,L){return w[0]=S,w[1]=M,w[2]=T,w[3]=A,w[4]=E,w[5]=L,w}e.setAbcdef=n;function a(w,S){let[A,M,E,T,L,P]=s(w),[C,D,I,O,R,H]=s(S),j=C*A+D*E,N=C*M+D*T,k=I*A+O*E,G=I*M+O*T,Y=R*A+H*E+L,F=R*M+H*T+P;return e.create(j,N,k,G,Y,F)}e.append=a;function o(w,S){let[A,M,E,T,L,P]=s(w),[C,D,I,O,R,H]=s(S),j=A,N=M,k=E,G=T;(C!==1||D!==0||I!==0||O!==1)&&(j=A*C+M*I,N=A*D+M*O,k=E*C+T*I,G=E*D+T*O);let Y=L*C+P*I+R,F=L*D+P*O+H;return e.create(j,N,k,G,Y,F)}e.prepend=o;function s(w){return[w[0],w[3],w[1],w[4],w[2],w[5]]}e.getAbcdef=s;function l(w){let[S,A,M,E,T,L]=e.getAbcdef(w),P=S*E-A*M,C=E/P,D=-A/P,I=-M/P,O=S/P,R=(M*L-E*T)/P,H=-(S*L-A*T)/P;return e.create(C,D,I,O,R,H)}e.invert=l;function u([w,S],A){let[M,E,T,L,P,C]=e.getAbcdef(A);return[M*w+T*S+P,E*w+L*S+C]}e.apply=u;function c(w,S){let[A,M,E,T,L,P]=e.getAbcdef(S),C=1/(A*T+E*-M),[D,I]=w;return[T*C*D+-E*C*I+(P*E-L*T)*C,A*C*I+-M*C*D+(-P*A+L*M)*C]}e.applyInverse=c;function h(w,S,A=S){let[M,E,T,L,P,C]=e.getAbcdef(w);return e.setAbcdef(w,M*S,E*A,T*S,L*A,P*S,C*A),w}e.scale=h;function d(w,S){let A=Math.cos(S),M=Math.sin(S),[E,T,L,P,C,D]=e.getAbcdef(w);return e.setAbcdef(w,E*A-T*M,E*M+T*A,L*A-P*M,L*M+P*A,C*A-D*M,C*M+D*A),w}e.rotate=d;function f(w,S,A){let[M,E]=A,T=e.translate(w,-M,-E);return T=e.rotate(T,S),T=e.translate(T,M,E),T}e.rotateAround=f;function p(w,S,A){let[M,E,T,L,P,C]=e.getAbcdef(w);return e.setAbcdef(w,M,E,T,L,P+S,C+A),w}e.translate=p;function v(w,S,A){let[M,E,T,L]=e.getAbcdef(w);return e.setAbcdef(w,M,E,T,L,S,A),w}e.setTranslate=v;function m(w,S,A){let[M,E,T,L]=e.getAbcdef(w);return e.setAbcdef(w,M,E,T,L,S,A),w}e.setPosition=m;function g(w){let[S,A,M,E]=e.getAbcdef(w),T=Math.sqrt(S*S+A*A),L=Math.sqrt(M*M+E*E);return[T,L]}e.getScale=g;function y(w){let[,,,,S,A]=e.getAbcdef(w);return[S,A]}e.getPosition=y;function x(w,S){return e.decompose(w,S).rotation}e.getRotation=x;function b(w,S){let[A,M,E,T,L,P]=e.getAbcdef(w),{rotation:C,scale:D,shear:I}=e6t([[A,E],[M,T]]);return{position:[L+(S[0]*A+S[1]*E)-S[0],P+(S[0]*M+S[1]*T)-S[1]],scale:D,rotation:C,shear:I,pivot:S}}e.decompose=b;function _(w,S,A,M,E=[0,0]){let[T,L]=w,[P,C]=M,[D,I,O,R]=t6t({rotation:A,scale:S,shear:E}),H=T-(P*D+C*O)+P,j=L-(P*I+C*R)+C;return e.create(D,I,O,R,H,j)}e.compose=_})(ei||(ei={}));var r6t=Math.PI/180;function i6t(e,t,r,i,n,a){let o=e-r,s=t-i;return o*o/(n*n)+s*s/(a*a)<=1}function n6t(e){return e*r6t}var Sa=class{constructor(e,t,r){this.uuid=e,this.data=t,this.localMatrix=ei.identity(),this.worldMatrix=ei.identity(),this.ignoreCameraZoom=!1,this.visible=!0,this._singleBBox=new GO,this._recursiveBBox=new GO,this.singleBBoxNeedsUpdate=!0,this.recursiveBBoxNeedsUpdate=!0,this.stateSelection=null,this.prevState=null,this.currentState=null,this.reversibleToState=null,this.currentTransitionEvent=null,this.previousAction=null,this.name="",this.position=[0,0],this.scale=[1,1],this.rotation=0,this.shear=[0,0],this.emitter=N7(),this.dpr=r.dpr??1,this.dataPatched=t}project(e,t){let r=this.worldMatrix;return t&&(r=ei.append(t.worldMatrix,r)),ei.applyInverse(e,r)}intersects(e,t,r,i=!1){return this.visible&&!this.data.raycastLock&&this.intersectsInLocalSpace(...this.project([e,t],r),i)}intersectsInLocalSpace(e,t,r=!1){let{min:i,max:n}=r?this.recursiveBBox:this.singleBBox;return e>=i[0]&&e<=n[0]&&t>=i[1]&&t<=n[1]}applyTransforms(e){e.setTransform(this.worldMatrix,this.ignoreCameraZoom)}get singleBBox(){return this.singleBBoxNeedsUpdate&&(this.singleBBoxNeedsUpdate=!1,this._singleBBox.setFromObjectSize(this,!1),this._singleBBox.computeVertices(),this._singleBBox.computeEdges()),this._singleBBox}get recursiveBBox(){return this.recursiveBBoxNeedsUpdate&&(this.recursiveBBoxNeedsUpdate=!1,this._recursiveBBox.setFromObjectSize(this,!0),this._recursiveBBox.computeVertices(),this._recursiveBBox.computeEdges()),this._recursiveBBox}updateLocalMatrix(){this.localMatrix=ei.compose(this.position,this.scale,n6t(this.rotation),Mv.getPivot(this.dataPatched),this.shear)}updateWorldMatrix(e,t,r){let i=this.parent;t&&i!==null&&i!==void 0&&i.updateWorldMatrix(e,!0,!1),e&&this.updateLocalMatrix(),this.parent?this.worldMatrix=ei.append(this.parent.worldMatrix,this.localMatrix):this.worldMatrix=ei.copy(this.localMatrix),this.singleBBoxNeedsUpdate=!0,this.recursiveBBoxNeedsUpdate=!0}get pivot(){return Mv.getPivot(this.data)}getCenter(){return[0,0]}getHalfSize(){return[0,0]}get id(){return this.uuid}resetBBoxNeedsUpdateSelf(){this.singleBBoxNeedsUpdate=!0,this.recursiveBBoxNeedsUpdate=!0}resetBBoxNeedsUpdate(){this.resetBBoxNeedsUpdateSelf(),this.traverseAncestors(e=>{e.resetBBoxNeedsUpdateSelf()})}updateTransformState(e){let t=!1;e.position!==void 0&&(t=!0,this.position=e.position),e.rotation!==void 0&&(t=!0,this.rotation=e.rotation),e.scale!==void 0&&(t=!0,this.scale=e.scale),e.shear!==void 0&&(t=!0,this.shear=e.shear),t&&(this.updateWorldMatrix(!0,!1,!0),this.resetBBoxNeedsUpdate())}updateByOp(e,t,r){e.type===0&&e.props.visible!==void 0&&(this.visible=e.props.visible),this.data=t,this.data=t;let i=e,n=Ri(e.path,["states","*"]);if(n!==null){if(e.type===0){let[a]=n;if((this==null?void 0:this.stateSelection)===a){let o={...e.props};if(delete o.name,Object.values(e.props).some(s=>s===void 0)){let s=this.data;if(s!==void 0){let l=Kn.zoom(s,e.path.slice(2));if(l)for(let u in e.props)e.props[u]===void 0&&u in l&&(o[u]=l[u])}}i={...e,props:o,path:e.path.slice(2)}}}}else if(e.type===0){let a=this.stateSelection?this.data.states.data(this.stateSelection):void 0;if(a!==void 0){if(e.props.name!==void 0&&a.name){let{name:s,...l}=a;a=l}let o=Kn.removeOverridden(e.path,e.props,a);i={...e,props:o}}}this.updateByPatchedOpBase(i,iv.patch(this.data,this.stateSelection?this.data.states.data(this.stateSelection):void 0),r)}changeSelectedState(e,t,r=!1){if(!(this.data.states.length===0&&!r)){for(let i of this.data.states)iv.toOps(this.data,i.data).forEach(n=>{let a=i6.replaceProps(n,this.data);this.dataPatched=this.data,this.updateByPatchedOp(a,this.data,t)});if(e!==null){let i=this.data.states.data(e);i&&(this.dataPatched=iv.patch(this.data,i),iv.toOps(this.data,i).forEach(n=>{this.updateByPatchedOp(n,this.dataPatched,t)}))}r&&this.updateTransformState(this.dataPatched),this.stateSelection=e}}updateState(e,t){e.name!==void 0&&(this.name=e.name),e.visible!==void 0&&(this.visible=e.visible),this.updateTransformState(e)}updateByPatchedOpBase(e,t,r){this.dataPatched=t,this.updateByPatchedOp(e,t,r)}updateByPatchedOp(e,t,r){e.path.length===0&&e.type===0&&this.updateState(e.props,r),this.requestRender()}traverseFrameAncestors(e){this.traverseAncestors(t=>{t.data.type==="frame2d"&&e(t)})}traverseAncestors(e){let t=this.parent;for(;t;)e(t),t=t.parent}requestRender(){this.traverseFrameAncestors(e=>{e.requestRender()})}clone(e){let t=new Sa(this.uuid,this.data,e);return t.parent=void 0,t}addEventListener(e,t){this.emitter.on(e,t)}removeEventListener(e,t){this.emitter.off(e,t)}dispatchEvent(e){this.emitter.emit(e.type,{...e,target:e.target??this})}traverseSortNextHelper(){let e=this.parent;if(e){let t=e.children;if(t){let r=t.indexOf(this)+1;return t[r]?t[r]:e.traverseSortNextHelper()}}}sortNext(){let e=this.children;return e&&e.length>0&&e[0]?e[0]:this.traverseSortNextHelper()}isDescendantOf(e){e instanceof Sa&&(e=e.uuid);let t=this;for(;t.parent;){if(t.parent.uuid===e)return!0;t=t.parent}return!1}},du=class extends Sa{constructor(e,t,r){super(e,t,r),this.uuid=e,this.data=t,this.context=r,this.children=[]}add(e){e.parent&&e.parent instanceof du&&e.parent.remove(e),this.children.push(e),e.parent=this}remove(e){let t=this.children.indexOf(e);t>=0&&(this.children.splice(t,1),e.parent=void 0)}traverse(e){let t=e(this);if(t!==!0)for(let r of this.children)r instanceof du?r.traverse(e):t=e(r)}intersectsChildrenHelper(e,t,r,i,n){for(let a of this.children)if(a.intersects(e,t,r,!1)&&(n.push(a),i)||a instanceof du&&a.intersectsChildrenHelper(e,t,r,i,n))return!0;return!1}intersectsChildren(e,t,r,i=!1,n=[],a=!1){return this.intersectsChildrenHelper(e,t,r,i,n),n}intersectsChildrenHelperReverse(e,t,r,i,n){for(let a of this.children)if(a instanceof du&&a.intersectsChildrenHelperReverse(e,t,r,i,n)||a.intersects(e,t,r,!1)&&(n.push(a),i))return!0;return!1}intersectsChildrenReverse(e,t,r,i=!1,n=[],a=!1){return this.intersectsChildrenHelperReverse(e,t,r,i,n),n}updateWorldMatrix(e,t,r){if(super.updateWorldMatrix(e,t,r),r&&this.children)for(let i of this.children)i.updateWorldMatrix(e,!1,!0)}find(e){let t;return this.traverse(r=>{r.uuid===e&&(t=r)}),t}innerDrawChildren(e){for(let t=this.children.length-1;t>=0;t--)this.children[t].draw(e)}resetBBoxNeedsUpdate(){super.resetBBoxNeedsUpdate(),this.traverse(e=>{e.resetBBoxNeedsUpdateSelf()})}clone(e){let t=new du(this.uuid,this.data,e);t.parent=void 0;for(let r of this.children)t.add(r.clone(e));return t}},_p=class extends du{constructor(e,t,r){super(e,t,r),this.uuid=e,this.data=t,this.updateState(t,r)}draw(e){!this.visible||(e.save(),this.applyTransforms(e),this.innerDrawChildren(e),e.restore())}clone(e){let t=new _p(this.uuid,this.data,e);t.parent=void 0;for(let r of this.children)t.add(r.clone(e));return t}};function a6t(e,t){let[[r,i],[n,a]]=e,[[o,s],[l,u]]=t,c=(r-n)*(s-u)-(i-a)*(o-l);if(c===0)return!1;let h=((r-o)*(s-u)-(i-s)*(o-l))/c,d=-((r-n)*(i-s)-(i-a)*(r-o))/c;return h>=0&&h<=1&&d>=0&&d<=1}var Sye=[[-1,1],[-1,-1],[1,-1],[1,1]],gie=(e,t,r)=>{let i=e.getCenter(),n=e.getHalfSize(),a=ei.append(t,e.worldMatrix);n[0]===0&&n[1]===0?r.push(ei.apply(i,a)):Sye.forEach(o=>{let s=[o[0]*n[0]+i[0],o[1]*n[1]+i[1]];r.push(ei.apply(s,a))})},GO=class{constructor(){this.matrix=ei.identity(),this.min=[1/0,1/0],this.max=[-1/0,-1/0],this.vertices=[],this.edges=[]}setFromObjectSize(e,t=!1){e.updateWorldMatrix(),this.makeEmpty(),ei.copy(e.worldMatrix,this.matrix);let r=ei.invert(e.worldMatrix);this.expandByObjectSize(e,r,t)}expandByObjectSize(e,t,r=!1){let i=[];r===!0&&e instanceof du?e.traverse(n=>{n.visible&&gie(n,t,i)}):gie(e,t,i),this.setFromPoints(i)}setFromSize(e,t,r){this.makeEmpty(),ei.copy(r,this.matrix),this.expandBySize(e,t,r)}expandBySize(e,t,r){[ei.apply([0,0],r),ei.apply([0,t],r),ei.apply([e,t],r),ei.apply([e,0],r)].forEach(i=>this.expandByPoint(i))}getCenter(){let[e,t]=this.min,[r,i]=this.getHalfSize();return ei.apply([e+r,t+i],this.matrix)}getSize(){return[this.max[0]-this.min[0],this.max[1]-this.min[1]]}getHalfSize(){return[(this.max[0]-this.min[0])*.5,(this.max[1]-this.min[1])*.5]}makeEmpty(){this.min=[1/0,1/0],this.max=[-1/0,-1/0]}setFromPoints(e){this.makeEmpty();for(let t of e)this.expandByPoint(t)}expandByPoint(e){this.min=[Math.min(this.min[0],e[0]),Math.min(this.min[1],e[1])],this.max=[Math.max(this.max[0],e[0]),Math.max(this.max[1],e[1])]}computeVertices(){let[e,t]=this.getHalfSize(),r=this.getCenter(),[i,n,a,o]=ei.getAbcdef(this.matrix),s=ei.create(i,n,a,o,r[0],r[1]);this.vertices=Sye.map(([l,u])=>ei.apply([l*e,u*t],s))}computeEdges(){this.edges=[];for(let e=0,t=this.vertices.length;e<t;++e)this.edges.push([this.vertices[e],this.vertices[(e+1)%t]])}project(e,t){let r=this.matrix;return t&&(r=ei.append(t.worldMatrix,r)),ei.applyInverse(e,r)}intersects(e,t,r){return this.intersectsInLocalSpace(...this.project([e,t],r))}intersectsInLocalSpace(e,t){let{min:r,max:i}=this;return e>=r[0]&&e<=i[0]&&t>=r[1]&&t<=i[1]}containsPoint(e){let[t,r]=e,[i,n]=this.min,[a,o]=this.max;return t>=i&&t<=a&&r>=n&&r<=o}intersectsBBox2D(e){for(let t=0,r=this.edges.length;t<r;t++){let i=this.edges[t];for(let n=0,a=e.edges.length;n<a;n++){let o=e.edges[n];if(a6t(i,o))return!0}}for(let t=0,r=e.vertices.length;t<r;t++){let i=e.vertices[t];if(this.containsPoint(i))return!0}return!1}ensureMinMax(){let e=this.min,t=this.max;this.min=[Math.min(e[0],t[0]),Math.min(e[1],t[1])],this.max=[Math.max(e[0],t[0]),Math.max(e[1],t[1])]}copy(e){this.min=[...e.min],this.max=[...e.max],ei.copy(e.matrix,this.matrix),this.computeVertices(),this.computeEdges()}clone(){let e=new GO;return e.copy(this),e}},Cye,o6t=new Promise(e=>{Cye=e}),yie=!1,G5;function s6t(){if(yie)return;if(G5)return G5;async function e(){let t=await Te(()=>import("./L7l3pL7d.js"),[],import.meta.url);Cye(t.default??t),yie=!0}return G5=e(),G5}function xie(e){let t=!1;return e.scene.objects.traverse((r,i)=>{(i.type==="Mesh"&&i.geometry.type==="UIGeometry"||i.type==="Page"&&i.uiFrame!==void 0)&&(t=!0)}),t}var ar,ED;async function l6t(e){let t=await o6t;ar||(ED||(ED=t({locateFile:()=>e})),ar=await ED)}var bie=ei.identity(),Eye=class{constructor(e,t=1){this.canvas=e,this._dpr=t,this._width=0,this._height=0,this._strokeMode="inside",this._layerBlur=0,this._backgroundBlur=0,this._dropShadowBlur=0,this._dropShadowOffsetX=0,this._dropShadowOffsetY=0,this._dropShadowColor=Pi.transparent,this._innerShadowBlur=0,this._innerShadowOffsetX=0,this._innerShadowOffsetY=0,this._innerShadowSpread=0,this._innerShadowColor=Pi.transparent,this._fonts=new Map,this._isSizeDirty=!1;try{let r=e.getBoundingClientRect();e.width=r.width*t,e.height=r.height*t}catch{console.log(e.width,t)}this._currentM3Transform=bie,this._currentTransform=new Float32Array(bie)}get dpr(){return this._dpr}set dpr(e){this._dpr=e,this._isSizeDirty=!0}async init(){var e,t;if(!this.wasmURL)throw Error("Your must set the wasm binary url with renderer.wasmURL = ... before you can call renderer.init");await l6t(this.wasmURL),this._surface=ar.MakeWebGLCanvasSurface(this.canvas),this.ctx=(e=this._surface)==null?void 0:e.getCanvas(),this._paint=new ar.Paint,this._paint.setAntiAlias(!0),this._paintFill=this._paint.copy(),this._paintFill.setStyle(ar.PaintStyle.Fill),this._paintStroke=this._paint.copy(),this._paintStroke.setStyle(ar.PaintStyle.Stroke),(t=this.ctx)==null||t.scale(this.dpr,this.dpr)}get currentTransform(){return this._currentM3Transform}get currentTransformBuffer(){return this._currentTransform}set currentTransform(e){this._currentM3Transform=e,this._currentTransform.set(e)}async loadFont(e,t){let r=await(await fetch(e)).arrayBuffer();this.registerFont(r,t)}registerFont(e,t){if(this._fonts.has(t))return;let r=ar.FontMgr.FromData(e);if(r)this._fonts.set(t,r);else throw new Error("Invalid font data for "+t)}get width(){return this._width}get height(){return this._height}set strokeColor(e){this._paintStroke&&this._paintStroke.setColor(j5(e),ar.ColorSpace.DISPLAY_P3)}set fillColor(e){this._paintFill&&this._paintFill.setColor(j5(e),ar.ColorSpace.DISPLAY_P3)}set lineWidth(e){this._paintStroke&&this._paintStroke.setStrokeWidth(this._strokeMode==="center"?e:e*2)}set strokeMode(e){this._strokeMode=e}set dropShadowBlur(e){this._dropShadowBlur=e}set dropShadowColor(e){this._dropShadowColor=e}set dropShadowOffsetX(e){this._dropShadowOffsetX=e}set dropShadowOffsetY(e){this._dropShadowOffsetY=e}set innerShadowBlur(e){this._innerShadowBlur=e}set innerShadowColor(e){this._innerShadowColor=e}set innerShadowOffsetX(e){this._innerShadowOffsetX=e}set innerShadowOffsetY(e){this._innerShadowOffsetY=e}set innerShadowSpread(e){this._innerShadowSpread=e}set layerBlur(e){this._layerBlur=e}set backgroundBlur(e){this._backgroundBlur=e}clear(){var e;(e=this.ctx)==null||e.clear(ar.TRANSPARENT)}save(){var e;(e=this.ctx)==null||e.save()}restore(){var e;(e=this.ctx)==null||e.restore()}beginPath(){var e;(e=this._currentPath)==null||e.delete(),this._currentPath=new ar.Path}closePath(){let e=this._currentPath;if(e){if(e.isEmpty())return;let t=e.getBounds();(t[3]-t[1]||t[2]-t[0])&&e.close()}}fill(){this._paintInner(this._paintFill,!0)}stroke(){this._paintInner(this._paintStroke,!1)}clipRect(e,t,r,i,n=0,a=0,o=0,s=0){var u,c;let l=ar.XYWHRect(e,t,r,i);if(n===0&&a===0&&s===0&&o===0)(u=this.ctx)==null||u.clipRect(l,ar.ClipOp.Intersect,!0);else{let h=ar.RRectXY(l,n,n);h[4]=h[5]=n,h[6]=h[7]=a,h[8]=h[9]=o,h[10]=h[11]=s,(c=this.ctx)==null||c.clipRRect(h,ar.ClipOp.Intersect,!0)}}_applyShadowOffsetMatrix(){if(this.ctx){let e=ei.invert(this.currentTransform);this.ctx.concat(e);let t=ei.translate(ei.identity(),this._dropShadowOffsetX,this._dropShadowOffsetY);this.ctx.concat(t),this.ctx.concat(this._currentTransform)}}_applyEffectsToPaint(e,t,r=!0){var i,n,a,o;if(this.ctx&&this._currentPath){let s,l=!1;if(r&&this._hasDropShadow()){let u=e.copy();u.setColor(j5(this._dropShadowColor));let c;this._dropShadowBlur>0&&(c=ar.MaskFilter.MakeBlur(ar.BlurStyle.Normal,this._dropShadowBlur*this.dpr*(((i=this.camera)==null?void 0:i.scale)??1),!1),u.setMaskFilter(c)),this.ctx.save(),this.ctx.clipPath(this._currentPath,ar.ClipOp.Difference,!0),this._applyShadowOffsetMatrix(),t(u),this.ctx.restore(),u.delete(),c==null||c.delete()}if(this._backgroundBlur>0&&r){this.ctx.save(),this.ctx.clipPath(this._currentPath,ar.ClipOp.Intersect,!0);let u=ar.ImageFilter.MakeBlur(this._backgroundBlur,this._backgroundBlur,ar.TileMode.Clamp,null),c=e.copy();c.setImageFilter(u),c.setAlphaf(1);let h=this._currentPath.computeTightBounds();this.ctx.saveLayer(c,h,null,ar.SaveLayerInitWithPrevious),this.ctx.drawColor(e.getColor()),this.ctx.restore(),this.ctx.restore(),c.delete(),u.delete(),l=!0}if(this._layerBlur>0){let u=e.copy();s=ar.MaskFilter.MakeBlur(ar.BlurStyle.Normal,this._layerBlur*this.dpr*(((n=this.camera)==null?void 0:n.scale)??1),!1),u.setMaskFilter(s),t(u),u.delete(),s.delete(),l=!0}if(l||t(e),r&&this._hasInnerShadow()){let u=new ar.Paint;u.setAntiAlias(!0),u.setStyle(ar.PaintStyle.Fill),u.setColor(j5(this._innerShadowColor));let c;this._innerShadowBlur>0&&(c=ar.MaskFilter.MakeBlur(ar.BlurStyle.Normal,this._innerShadowBlur*this.dpr*(((a=this.camera)==null?void 0:a.scale)??1),!1),u.setMaskFilter(c));let h=this._currentPath.computeTightBounds(),[d,f,p,v]=h,m=p-d,g=v-f;this.ctx.save(),this.ctx.clipPath(this._currentPath,ar.ClipOp.Intersect,!0),this.ctx.saveLayer(u,h,null,ar.SaveLayerInitWithPrevious),(o=this.ctx)==null||o.translate(this._innerShadowOffsetX,this._innerShadowOffsetY),this.ctx.drawRect(ar.XYWHRect(-1e3-this._innerShadowOffsetX,-1e3-this._innerShadowOffsetY,2e3+m+Math.abs(this._innerShadowOffsetX*2),2e3+g+Math.abs(this._innerShadowOffsetY*2)),u),u.setBlendMode(ar.BlendMode.Clear),this.ctx.drawPath(this._currentPath,u),this.ctx.restore(),this.ctx.restore(),u.delete(),c==null||c.delete()}}}_paintInner(e,t=!0){if(this.ctx&&this._currentPath&&e){let r=this.ctx,i=this._currentPath;this._applyEffectsToPaint(e,n=>{let a=!1;!t&&this._strokeMode!=="center"&&(r.save(),r.clipPath(i,this._strokeMode==="outside"?ar.ClipOp.Difference:ar.ClipOp.Intersect,!0),a=!0),r.drawPath(i,n),a&&r.restore()},t)}}_hasDropShadow(){var e;return((e=this._dropShadowColor)==null?void 0:e.a)>0}_hasInnerShadow(){var e;return((e=this._innerShadowColor)==null?void 0:e.a)>0}path(e){var t;(t=this._currentPath)==null||t.addPath(ar.Path.MakeFromSVGString(e))}ellipse(e,t,r,i,n,a,o,s){var u;if(!wie([e,t,r,i])||!this._currentPath)return;if(r<0||i<0)throw Error("radii cannot be negative");let l=ar.XYWHRect(e-r,t-i,r*2,i*2);(u=this._currentPath)==null||u.addOval(l)}rect(e,t,r,i,n=0,a=0,o=0,s=0){var u,c;let l=ar.XYWHRect(e,t,r,i);if(wie(l))if(n===0&&a===0&&s===0&&o===0)(u=this._currentPath)==null||u.addRect(l);else{let h=ar.RRectXY(l,n,n);h[4]=h[5]=n,h[6]=h[7]=a,h[8]=h[9]=o,h[10]=h[11]=s,(c=this._currentPath)==null||c.addRRect(h)}}getHorizontalAlign(e){switch(e){case 2:return ar.TextAlign.Right;case 3:return ar.TextAlign.Center;case 4:return ar.TextAlign.Justify;case 1:default:return ar.TextAlign.Left}}drawTextInner(e,t,r,[i,n,a,o],s,l,u=!0){let c=0,{ctx:h}=this;if(!h)return c;let d=l.copy(),f=l.copy();return f.setAlphaf(0),this._applyEffectsToPaint(d,p=>{t.pushPaintStyle(r,p,f),t.addText(e);let v=t.build();v.layout(a);let m=n;s===2?m+=(o-v.getHeight())/2:s===3&&(m+=o-v.getHeight()),h.drawParagraph(v,i,m),c=v.getHeight(),t.reset(),v.delete()},u),d.delete(),f.delete(),c}drawText(e,t){let r=0,i=this._fonts.get(t.font),{ctx:n,_paintFill:a,_paintStroke:o}=this;if(i&&n){let s=new ar.TextStyle({fontFamilies:[t.font],fontSize:t.fontSize,heightMultiplier:t.lineHeight,letterSpacing:t.letterSpacing}),l=new ar.ParagraphStyle({textStyle:s,textAlign:this.getHorizontalAlign(t.horizontalAlign)}),u=ar.XYWHRect(t.x,t.y,t.width,t.height),c=ar.ParagraphBuilder.Make(l,i);a&&(r=this.drawTextInner(e,c,s,u,t.verticalAlign,a,!0)),o&&(r=this.drawTextInner(e,c,s,u,t.verticalAlign,o,!1)),c.delete()}return{height:r}}render(){var e;(e=this._surface)==null||e.flush()}moveTo(e,t){var r;(r=this._currentPath)==null||r.moveTo(e,t)}lineTo(e,t){var r;(r=this._currentPath)==null||r.lineTo(e,t)}bezierCurveTo(e,t,r,i,n,a){var o;(o=this._currentPath)==null||o.cubicTo(e,t,r,i,n,a)}quadraticCurveTo(e,t,r,i){var n;(n=this._currentPath)==null||n.quadTo(e,t,r,i)}setTransform(e,t=!1){var n,a,o,s,l;if(!this.ctx)return;let r=this.ctx.getTotalMatrix(),i=ei.invert(r);if(i&&this.ctx.concat(i),(n=this.ctx)==null||n.scale(this.dpr,this.dpr),((a=this.camera)==null?void 0:a.enabled)&&((o=this.ctx)==null||o.concat(this.camera.worldMatrix),t)){let u=ei.getScale(this.camera.worldMatrix);(s=this.ctx)==null||s.scale(1/u[0],1/u[1])}(l=this.ctx)==null||l.concat(e),this.currentTransform=e}transform(e){var t;(t=this.ctx)==null||t.concat(e)}setSize(e,t){var r;!this._isSizeDirty&&e===this._width&&t===this._height||(this._isSizeDirty=!1,this._width=e,this._height=t,this.canvas.style.width=e+"px",this.canvas.style.height=t+"px",this.canvas.width=e*this.dpr,this.canvas.height=t*this.dpr,this._surface&&(this._surface=ar.MakeWebGLCanvasSurface(this.canvas),this.ctx=(r=this._surface)==null?void 0:r.getCanvas()))}};function wie(e){for(let t=0;t<e.length;t++)if(e[t]!==void 0&&!Number.isFinite(e[t]))return!1;return!0}function j5({r:e,g:t,b:r,a:i}){return ar.Color4f(e,t,r,i)}var _ie=class{constructor(e,t,r){this.uuid=e,this.data=t,this.enabled=!1,this.color=Pi.transparent,this.blurRadius=0,this.offset=[0,0],this.spread=0,this.update(t)}update(e){e.color!==void 0&&(this.color=e.color),e.enabled!==void 0&&(this.enabled=e.enabled),e.blurRadius!==void 0&&(this.blurRadius=e.blurRadius),e.offset!==void 0&&(this.offset=e.offset),e.spread!==void 0&&(this.spread=e.spread)}},Aie=class{constructor(e,t,r){this.uuid=e,this.data=t,this.enabled=!1,this.radius=0,this.update(t)}update(e){e.enabled!==void 0&&(this.enabled=e.enabled),e.radius!==void 0&&(this.radius=e.radius)}},u6t=class{constructor(e,t,r){this.uuid=e,this.data=t,this.enabled=!1,this.color=Pi.transparent,this.update(t)}update(e){e.enabled!==void 0&&(this.enabled=e.enabled),e.color!==void 0&&(this.color=e.color)}},c6t=class{constructor(e,t,r){this.uuid=e,this.data=t,this.enabled=!1,this.color=Pi.transparent,this.thickness=0,this.mode="inside",this.update(t)}update(e){e.enabled!==void 0&&(this.enabled=e.enabled),e.color!==void 0&&(this.color=e.color),e.thickness!==void 0&&(this.thickness=e.thickness),e.mode!==void 0&&(this.mode=e.mode)}},ma=class extends Sa{constructor(e,t,r){super(e,t,r),this.uuid=e,this.data=t,this.autoClose=!0,this.fill=new u6t(e+"-fill",t.fill,r),this.stroke=new c6t(e+"-stroke",t.stroke,r),this.dropShadow=new _ie(e+"-dropShadow",t.dropShadow,r),this.innerShadow=new _ie(e+"-innerShadow",t.innerShadow,r),this.backgroundBlur=new Aie(e+"-backgroundBlur",t.backgroundBlur,r),this.layerBlur=new Aie(e+"-layerBlur",t.layerBlur,r)}applyFillStroke(e){e.fillColor=this.fill.enabled?this.fill.color:Pi.transparent,e.strokeColor=this.stroke.enabled&&this.stroke.thickness>0?this.stroke.color:Pi.transparent,e.strokeMode=this.stroke.mode,e.lineWidth=this.stroke.thickness}applyFilters(e){this.layerBlur.enabled?e.layerBlur=this.layerBlur.radius*5:e.layerBlur=0,this.backgroundBlur.enabled?e.backgroundBlur=this.backgroundBlur.radius*5:e.backgroundBlur=0,this.dropShadow.enabled?(e.dropShadowBlur=this.dropShadow.blurRadius*5,e.dropShadowColor=this.dropShadow.color,e.dropShadowOffsetX=this.dropShadow.offset[0],e.dropShadowOffsetY=this.dropShadow.offset[1]):e.dropShadowColor=Pi.transparent,this.innerShadow.enabled?(e.innerShadowSpread=this.innerShadow.spread,e.innerShadowBlur=this.innerShadow.blurRadius*5,e.innerShadowColor=this.innerShadow.color,e.innerShadowOffsetX=this.innerShadow.offset[0],e.innerShadowOffsetY=this.innerShadow.offset[1]):e.innerShadowColor=Pi.transparent}innerDraw(e){}draw(e){!this.visible||(e.save(),this.applyTransforms(e),this.applyFilters(e),this.applyFillStroke(e),e.beginPath(),this.innerDraw(e),this.autoClose&&e.closePath(),this.fill.enabled&&e.fill(),this.stroke.enabled&&e.stroke(),e.restore())}updateByPatchedOp(e,t,r){super.updateByPatchedOp(e,t,r),e.type===0&&(Ri(e.path,["fill"])?this.fill.update(e.props):Ri(e.path,["stroke"])?this.stroke.update(e.props):Ri(e.path,["dropShadow"])?this.dropShadow.update(e.props):Ri(e.path,["innerShadow"])?this.innerShadow.update(e.props):Ri(e.path,["layerBlur"])?this.layerBlur.update(e.props):Ri(e.path,["backgroundBlur"])?this.backgroundBlur.update(e.props):this.resetBBoxNeedsUpdate())}updateState(e,t){super.updateState(e,t),e.fill!==void 0&&this.fill.update(e.fill),e.stroke!==void 0&&this.stroke.update(e.stroke),e.dropShadow!==void 0&&this.dropShadow.update(e.dropShadow),e.innerShadow!==void 0&&this.innerShadow.update(e.innerShadow),e.layerBlur!==void 0&&this.layerBlur.update(e.layerBlur),e.backgroundBlur!==void 0&&this.backgroundBlur.update(e.backgroundBlur)}clone(e){let t=new ma(this.uuid,this.data,e);return t.parent=void 0,t}},fH=class extends ma{constructor(e,t,r){super(e,t,r),this.uuid=e,this.data=t,this.width=0,this.height=0,this.updateState(t,r)}innerDraw(e){e.ellipse(this.width*.5,this.height*.5,this.width*.5,this.height*.5,0,0,Math.PI*2)}intersectsInLocalSpace(e,t){return i6t(e,t,this.width*.5,this.height*.5,this.width*.5,this.height*.5)}getCenter(){return[this.width*.5,this.height*.5]}getHalfSize(){return[this.width*.5,this.height*.5]}updateSizeState(e){let t=!1;e.width!==void 0&&(this.width=typeof e.width=="number"?e.width:this.width,t=!0),e.height!==void 0&&(this.height=typeof e.height=="number"?e.height:this.height,t=!0),t&&this.updateWorldMatrix(!0,!1,!0)}updateState(e,t){super.updateState(e,t),this.updateSizeState(e)}clone(e){let t=new fH(this.uuid,this.data,e);return t.parent=void 0,t}},$4=class extends ma{constructor(e,t,r){super(e,t,r),this.uuid=e,this.data=t,this.width=0,this.height=0,this.cornerRadius=[0,0,0,0],this.updateState(t,r)}innerDraw(e){e.rect(0,0,this.width,this.height,...this.cornerRadius)}getCenter(){return[this.width*.5,this.height*.5]}getHalfSize(){return[this.width*.5,this.height*.5]}updateCornerState(e){e.cornerRadius!==void 0&&(this.cornerRadius=e.cornerRadius)}updateSizeState(e){let t=!1;e.width!==void 0&&(this.width=typeof e.width=="number"?e.width:this.width,t=!0),e.height!==void 0&&(this.height=typeof e.height=="number"?e.height:this.height,t=!0),t&&this.updateWorldMatrix(!0,!1,!0)}updateState(e,t){super.updateState(e,t),this.updateSizeState(e),this.updateCornerState(e)}clone(e){let t=new $4(this.uuid,this.data,e);return t.parent=void 0,t}},pH=class extends ma{constructor(e,t,r){super(e,t,r),this.uuid=e,this.data=t,this._textHeight=0,this._textHeightDirty=!0,this.width=0,this.height=0,this.updateState(t,r)}get textHeight(){return this._textHeight}applyFillStroke(e){e.fillColor=this.fill.enabled?this.fill.color:Pi.transparent,e.strokeColor=this.stroke.enabled&&this.stroke.thickness>0?this.stroke.color:Pi.transparent,e.strokeMode="center",e.lineWidth=this.stroke.thickness}innerDraw(e){var a;(a=this._fontHolder)!=null&&a.arrayBuffer&&this._fontHolder.arrayBuffer.byteLength>1&&this.data.font&&e.registerFont(this._fontHolder.arrayBuffer,this.data.font);let t=this.data.textTransform,r=this.data.text.textValue.toString(),i=t===2?r.toUpperCase():t===3?r.toLowerCase():r,{height:n}=e.drawText(i,{x:0,y:0,width:this.width,height:this.height,fontSize:this.data.fontSize,lineHeight:this.data.lineHeight??1,letterSpacing:this.data.letterSpacing??0,horizontalAlign:this.data.horizontalAlign,verticalAlign:this.data.verticalAlign,font:this.data.font});this._textHeight=n}getCenter(){return[this.width*.5,this.height*.5]}getHalfSize(){return[this.width*.5,this.height*.5]}updateSizeState(e){let t=!1;e.width!==void 0&&(this.width=typeof e.width=="number"?e.width:this.width,t=!0),e.height!==void 0&&(this.height=typeof e.height=="number"?e.height:this.height,t=!0),t&&this.updateWorldMatrix(!0,!1,!0)}updateFontState(e,{shared:t}){e.font!==void 0&&(this._fontHolder=t.getFont(e.font),this._fontHolder&&!this._fontHolder.isLoaded&&this._fontHolder.loadingPromise.then(()=>{this.requestRender()}))}updateState(e,t){super.updateState(e,t),this.updateSizeState(e),this.updateFontState(e,t)}clone(e){let t=new pH(this.uuid,this.data,e);return t.parent=void 0,t}},Mye=class extends ma{constructor(e,t,r){super(e,t,r),this.uuid=e,this.data=t,this.curves=[],this.extremasBBox={min:[0,0],max:[0,0]},this.updateState(t,r)}computeExtremas(){this.curves.length===0&&this.computeCurves();let e=this.curves.map(i=>L6.extremas(i)),t=[1/0,1/0],r=[-1/0,-1/0];for(let i=0,n=e.length;i<n;i++){let a=e[i];a[0][0]<t[0]&&(t[0]=a[0][0]),a[0][1]<t[1]&&(t[1]=a[0][1]),a[1][0]>r[0]&&(r[0]=a[1][0]),a[1][1]>r[1]&&(r[1]=a[1][1])}return this.extremasBBox.min=[t[0],t[1]],this.extremasBBox.max=[r[0],r[1]],this.extremasBBox}computeCurves(){this.curves=[];for(let r=1,i=this.data.points.length;r<i;r++){let n=this.data.points[r].data,a=this.data.points[r-1].data,o={start:a.position,cp1:a.controlNext.position,cp2:n.controlPrevious.position,end:n.position};this.curves.push(o)}let e=this.data.points[0].data,t=this.data.points[this.data.points.length-1].data;if(this.data.isClosed){let r={start:t.position,cp1:t.controlNext.position,cp2:e.controlPrevious.position,end:e.position};this.curves.push(r)}}getCenter(){let[e,t]=this.extremasBBox.min,[r,i]=this.getHalfSize();return[e+r,t+i]}getHalfSize(){let{min:e,max:t}=this.extremasBBox;return[(t[0]-e[0])*.5,(t[1]-e[1])*.5]}innerDraw(e){for(let i=0,n=this.data.points.length;i<n;i++){let a=this.data.points[i].data;if(i===0){let[o,s]=a.position;e.moveTo(o,s)}else{let o=this.data.points[i-1].data,[s,l]=o.controlNext.position,[u,c]=a.controlPrevious.position,[h,d]=a.position,f={start:o.position,cp1:o.controlNext.position,cp2:a.controlPrevious.position,end:a.position};L6.derive(f),e.bezierCurveTo(s,l,u,c,h,d)}}let t=this.data.points[0].data,r=this.data.points[this.data.points.length-1].data;if(this.data.isClosed){let[i,n]=r.controlNext.position,[a,o]=t.controlPrevious.position,[s,l]=t.position;e.bezierCurveTo(i,n,a,o,s,l)}}updateState(e,t){super.updateState(e,t),this.computeExtremas()}clone(e){let t=new Mye(this.uuid,this.data,e);return t.parent=void 0,t}},L6;(e=>{function t(o){let s=o.start,l=o.cp1,u=o.cp2,c=o.end,h=[3*(l[0]-s[0]),3*(l[1]-s[1])],d=[3*(u[0]-l[0]),3*(u[1]-l[1])],f=[3*(c[0]-u[0]),3*(c[1]-u[1])],p={start:h,cp:d,end:f};return o.derivative=p,p.derivative=jO.derive(p),p}e.derive=t;function r(o,s,l,u=!1){let c=o-2*s+l;if(c!==0){let h=-Math.sqrt(Math.abs(s*s-o*l)),d=-o+s,f=-(h+d)/c,p=-(-h+d)/c;return[f,p]}else if(s!==l&&c===0)return[(2*s-l)/(2*(s-l))];return[]}function i(o){let s=o.derivative??e.derive(o),l=s.start,u=s.cp,c=s.end;return[r(l[0],u[0],c[0]),r(l[1],u[1],c[1])]}e.droot=i;function n(o){let[s,l]=e.droot(o),u=[o.start[0],o.end[0]],c=[o.start[1],o.end[1]];for(let h of s)u.push(e.compute(o,Math.min(1,Math.max(0,h)))[0]);for(let h of l)c.push(e.compute(o,Math.min(1,Math.max(0,h)))[1]);return u.sort((h,d)=>h-d),c.sort((h,d)=>h-d),[[u[0],c[0]],[u[u.length-1],c[c.length-1]]]}e.extremas=n;function a(o,s){if(s===0)return[...o.start];if(s===1)return[...o.end];let l=1-s,u=l*l,c=s*s,h=u*l,d=u*s*3,f=l*c*3,p=s*c;return[h*o.start[0]+d*o.cp1[0]+f*o.cp2[0]+p*o.end[0],h*o.start[1]+d*o.cp1[1]+f*o.cp2[1]+p*o.end[1]]}e.compute=a})(L6||(L6={}));var jO;(e=>{function t(n){let a=n.start,o=n.cp,s=n.end,l=[2*(o[0]-a[0]),2*(o[1]-a[1])],u=[2*(s[0]-o[0]),2*(s[1]-o[1])],c={start:l,end:u};return c.derivative=WO.derive(c),n.derivative=c,c}e.derive=t;function r(n){let a=n.derivative??e.derive(n),o=a.start,s=a.end;return[o[0]!==s[0]?o[0]/(o[0]-s[0]):0,o[1]!==s[1]?o[1]/(o[1]-s[1]):0]}e.droot=r;function i(n,a){if(a===0)return[...n.start];if(a===1)return[...n.end];let o=1-a,s=o*o,l=a*a,u=s,c=o*a*2,h=l;return[u*n.start[0]+c*n.cp[0]+h*n.end[0],u*n.start[1]+c*n.cp[1]+h*n.end[1]]}e.compute=i})(jO||(jO={}));var WO;(e=>{function t(i){let n=i.start,a=i.end,o=[a[0]-n[0],a[1]-n[1]];return i.derivative=o,i.derivative}e.derive=t;function r(i,n){if(n===0)return[...i.start];if(n===1)return[...i.end];let a=i.start,o=i.end;return[a[0]+(o[0]-a[0])*n,a[1]+(o[1]-a[1])*n]}e.compute=r})(WO||(WO={}));var Yc=class extends du{constructor(e,t,r){super(e,t,r),this.uuid=e,this.width=0,this.height=0,this.clipped=!0,this.background=new $4(e+"-background",qw.defaultData,r),this.background.parent=this,this.updateState(t,r)}get fill(){return this.background.fill}get stroke(){return this.background.stroke}get backgroundBlur(){return this.background.backgroundBlur}get layerBlur(){return this.background.layerBlur}get dropShadow(){return this.background.dropShadow}get innerShadow(){return this.background.innerShadow}get cornerRadius(){return this.background.cornerRadius}set cornerRadius(e){this.background.cornerRadius=e}updateLocalMatrix(){var e;super.updateLocalMatrix(),(e=this.background)==null||e.updateLocalMatrix()}updateWorldMatrix(e,t,r){var i;super.updateWorldMatrix(e,t,r),(i=this.background)==null||i.updateWorldMatrix(e,t,r)}draw(e){if(!this.visible)return;e.save();let t=this.width,r=this.height;this.applyTransforms(e),this.background.width=t,this.background.height=r,this.background.draw(e),this.clipped&&e.clipRect(0,0,t,r,...this.cornerRadius),this.innerDrawChildren(e),e.restore()}getCenter(){return[this.width*.5,this.height*.5]}getHalfSize(){return[this.width*.5,this.height*.5]}updateCornerState(e){e.cornerRadius!==void 0&&(this.cornerRadius=e.cornerRadius)}updateSizeState(e){let t=!1;e.width!==void 0&&(this.width=typeof e.width=="number"?e.width:this.width,t=!0),e.height!==void 0&&(this.height=typeof e.height=="number"?e.height:this.height,t=!0),t&&this.updateWorldMatrix(!0,!1,!0)}updateState(e,t){super.updateState(e,t),this.updateSizeState(e),this.updateCornerState(e),e.fill!==void 0&&this.fill.update(e.fill),e.stroke!==void 0&&this.stroke.update(e.stroke),e.dropShadow!==void 0&&this.dropShadow.update(e.dropShadow),e.innerShadow!==void 0&&this.innerShadow.update(e.innerShadow),e.layerBlur!==void 0&&this.layerBlur.update(e.layerBlur),e.backgroundBlur!==void 0&&this.backgroundBlur.update(e.backgroundBlur),e.clipped!==void 0&&(this.clipped=e.clipped)}requestRender(){super.requestRender(),this.dispatchEvent({type:"render"})}dispose(){this.removeEventListener("render")}updateByPatchedOp(e,t,r){super.updateByPatchedOp(e,t,r),e.type===0&&(Ri(e.path,["fill"])?this.fill.update(e.props):Ri(e.path,["stroke"])?this.stroke.update(e.props):Ri(e.path,["dropShadow"])?this.dropShadow.update(e.props):Ri(e.path,["innerShadow"])?this.innerShadow.update(e.props):Ri(e.path,["layerBlur"])?this.layerBlur.update(e.props):Ri(e.path,["backgroundBlur"])?this.backgroundBlur.update(e.props):this.resetBBoxNeedsUpdate())}clone(e){let t=new Yc(this.uuid,this.data,e);t.parent=void 0;for(let r of this.children)t.add(r.clone(e));return t}},h6t=Dp(Dve(),1),H7=class extends ma{constructor(e,t,r){super(e,t,r),this.uuid=e,this.data=t,this._pathBBox=new DOMRect,this.path="",this.updateState(t,r),this.autoClose=!1,this.computeSVGBBox()}computeSVGBBox(){let e=document.createElementNS("http://www.w3.org/2000/svg","svg"),t=document.createElementNS("http://www.w3.org/2000/svg","path");document.body.appendChild(e),t.setAttribute("d",this.path),e.appendChild(t),this._pathBBox=t.getBBox(),e.remove()}innerDraw(e){e.path(this.path)}intersectsInLocalSpace(e,t){return e>=this._pathBBox.x&&e<=this._pathBBox.x+this._pathBBox.width&&t>=this._pathBBox.y&&t<=this._pathBBox.y+this._pathBBox.height}getCenter(){return[(this._pathBBox.x+this._pathBBox.width)/2,(this._pathBBox.y+this._pathBBox.height)/2]}getHalfSize(){return[(this._pathBBox.x+this._pathBBox.width)/2,(this._pathBBox.y+this._pathBBox.height)/2]}updateState(e,t){super.updateState(e,t),e.path!==void 0&&(this.path=e.path,this.computeSVGBBox())}clone(e){let t=new H7(this.uuid,this.data,e);return t.parent=void 0,t}};function d6t(e,t=1,r=1){if(t<=0||r<=0)return e;let i=(0,h6t.parseSVG)(e).map(n=>{let a={...n};return"x"in a&&(a.x=a.x*t),"y"in a&&(a.y=a.y*r),"x1"in a&&(a.x1=a.x1*t),"x2"in a&&(a.x2=a.x2*t),"y1"in a&&(a.y1=a.y1*r),"y2"in a&&(a.y2=a.y2*r),"rx"in a&&(a.rx=a.rx*t),"ry"in a&&(a.ry=a.ry*r),a});return f6t(i)}function f6t(e){let t=["rx","ry","xAxisRotation","largeArc","sweep","x1","y1","x2","y2","x","y"],r;return e.map(i=>{let n=[];t.forEach(o=>{if(o in i){let s=i[o]*1;n.length&&s>=0&&n.push(","),n.push(s)}});let a=(r===i.code?n[0]<0?"":",":i.code)+n.join("");return r=i.code,a}).join("")}function p6t(e,t,r){switch(t.type){case"ellipse2d":return new fH(e,t,r);case"rectangle2d":return new $4(e,t,r);case"text2d":return new pH(e,t,r);case"vector2d":return new Mye(e,t,r);case"path2d":return new H7(e,t,r);case"frame2d":return new Yc(e,t,r);case"group2d":default:return new _p(e,t,r)}}var Tye=class{constructor(e,t,r){this.uuid=e,this.data=t,this.group=new _p(Tye.GROUP_ID,{..._6.defaultData},r),this.createChildrenObjects(t.objects,this.group,r)}createObject(e,t,r,i,n,a){let o=p6t(e,t,a);o&&(i.add(o),i.children.splice(n,0,i.children.pop()),o.updateWorldMatrix(),r.length>0&&(o instanceof _p||o instanceof Yc)&&this.createChildrenObjects(r,o,a))}createChildrenObjects(e,t,r){let i=0;for(let n of e)this.createObject(n.id,n.data,n.children,t,i,r),i+=1}draw(e){this.group.draw(e)}updateEntityByOp(e,t,r,i){let n=this.find(e);if(n)try{n.updateByOp(t,r,{shared:i})}catch(a){console.error(a)}}updateTreeByOp(e,t){if(e.path.length===0&&e.type===7){let r=e.parent===null?this.group:this.find(e.parent);r!==void 0&&r instanceof du&&(this.createObject(e.id,e.data,e.children,r,e.localIndex,t),r.requestRender())}else if(e.path.length===0&&e.type===8){let r=this.find(e.id);if(r!==void 0&&r.parent!==void 0&&r.parent instanceof du){let i=r.parent;r.resetBBoxNeedsUpdate(),i==null||i.remove(r),i==null||i.requestRender()}}else if(e.path.length===0&&e.type===9){let r=this.find(e.id);if(r!==void 0){let i=r.parent,n=e.parent===null?this:this.find(e.parent);if(n instanceof du||n===this){n.add(r);let a=e.localIndex;n.children.splice(a,0,n.children.pop()),r.updateWorldMatrix(!0,!1,!0),i==null||i.requestRender(),r.requestRender()}r.resetBBoxNeedsUpdate()}}}add(e){this.group.add(e)}remove(e){this.group.remove(e)}traverse(e){this.group.traverse(t=>{t!==this.group&&e(t)})}intersectsChildren(e,t,r,i=!1,n=[]){return this.group.intersectsChildren(e,t,r,i,n,!0)}intersectsChildrenReverse(e,t,r,i=!1,n=[]){return this.group.intersectsChildrenReverse(e,t,r,i,n,!0)}find(e){return this.group.find(e)}get children(){return this.group.children}project(e,t){return this.group.project(e,t)}getWithSortKey(e){let t=this.find(e);if(t===void 0)return;let r=[],i=t;for(;i!==this.group;){let n=i;i=i.parent;let a=i.children.indexOf(n);r.splice(0,0,a)}return{entity:t,sortKey:r}}getAllSorted(e){let t=[];for(let r of e){let i=this.getWithSortKey(r.id);i!==void 0&&t.push(i)}return t.sort((r,i)=>lge(r.sortKey,i.sortKey)),t.map(r=>r.entity)}},vH=Tye;vH.GROUP_ID="scene2d";function Pye({constraints:e,newParentWidth:t,newParentHeight:r,initialParentWidth:i,initialParentHeight:n,objectInitialWidth:a,objectInitialHeight:o,objectInitialPosition:s}){let{horizontalConstraint:l,verticalConstraint:u}=e,c=t-i,h=r-n,d=a,f=o,p=s[0],v=s[1];if(l!==0){if(l===1)p+=c;else if(l===3)p+=c/2;else if(l===2)d=Math.max(1,d+c);else if(l===4){let m=t/i;d*=m,p*=m}}if(u!==0){if(u===1)v+=h;else if(u===3)v+=h/2;else if(u===2)f=Math.max(1,f+h);else if(u===4){let m=r/n;f*=m,v*=m}}return{width:d,height:f,position:[p,v]}}Dp(Dve(),1);var v6t=`
	varying vec2 vUv;
	void main() {
		vUv = uv;
		gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
	}`,m6t=`
	uniform sampler2D tDiffuse;
	varying vec2 vUv;
	void main() {
		vec4 texel = texture2D( tDiffuse, vUv );
		gl_FragColor = texel;
	}`,g6t=new x7(-1,1,1,-1,0,1),y6t=class extends It{constructor(){super(),this.setAttribute("position",new ht([-1,3,0,-1,-1,0,3,-1,0],3)),this.setAttribute("uv",new ht([0,2,0,0,2,0],2))}},x6t=new y6t,b6t=class{constructor(e){this._mesh=new nn(x6t,e)}dispose(){this._mesh.geometry.dispose()}render(e){e.render(this._mesh,g6t)}get material(){return this._mesh.material}set material(e){this._mesh.material=e}},Dye=new ai({defines:{},uniforms:{tDiffuse:new Xe(null)},vertexShader:v6t,fragmentShader:m6t}),w6t=new b6t(Dye),MD=null,TD=null,_6t=()=>(MD===null&&(MD=document.createElement("canvas")),MD),A6t=e=>(TD===null&&(TD=new Eye(e)),TD),S6t=ei.identity(),Iye=class{constructor(e,t,r,i){this.uuid=e,this.width=t,this.height=r,this.context=i,this.enabled=!0,this.isScreenSpace=!1,this.dpr=window.devicePixelRatio,this.isFrameDirty=!1,this.onRenderRequestedDownstream=()=>{this.isFrameDirty=!0,this.context.shared.requestRender()},this._innerApplySize=()=>{let n=this.width,a=this.height,o=this.dpr;this.renderer.dpr=this.isScreenSpace?o:Math.floor(2048/Math.max(n,a)),this.renderer.setSize(n,a)},this.onFrameOverrideObjectEvent=n=>{var a,o;if(((a=n.target)==null?void 0:a.uuid)!==void 0){let s=(o=this.frameRoot)==null?void 0:o.find(n.target.uuid);s&&s.dispatchEvent({...n,target:s})}},this.scene2d=new vH(vt.generateUUID(),fO.defaultData,{dpr:window.devicePixelRatio,shared:i.shared}),this.canvas=_6t(),this.renderer=A6t(this.canvas),this.promise=this.init(),this.renderTarget=new ui(1,1,{type:Cd,stencilBuffer:!1,depthBuffer:!1}),i.shared.addUIBuffer(this.uuid,this.renderTarget),this.textureHolder=i.shared.uiBuffer(this.uuid)}get canvasTexture(){return this._canvasTexture||(this._canvasTexture=new rft(this.canvas)),this._canvasTexture}async init(){this.renderer instanceof Eye&&(this.renderer.wasmURL=$1e.skiaWasmUrl),await this.renderer.init()}render(e){var t,r;if(this.isFrameDirty){this.isFrameDirty=!1,this._innerApplySize(),this.renderer.clear(),(t=this.frameOverride)==null||t.draw(this.renderer),this.renderer.render(),Dye.uniforms.tDiffuse.value=this.canvasTexture,this.canvasTexture.needsUpdate=!0;let i=e.getRenderTarget();e.setRenderTarget(this.renderTarget),e.clear(),w6t.render(e),e.setRenderTarget(i),(r=this.textureHolder)==null||r.setNeedsUpdate(!0)}}updateEntity2DByOp(e,t,r,i){this.scene2d.updateEntityByOp(e,t,r,i),this.applySize()}updateTreeByOp(e,t){this.scene2d.updateTreeByOp(e,t),this.applySize()}applyOverrides(e){if(this.frameOverride&&this.frameRoot){this.frameOverride.position=[0,0],this.frameOverride.rotation=0;let t=(e==null?void 0:e.width)??this.width,r=(e==null?void 0:e.height)??this.height;this.frameOverride.width=t,this.frameOverride.height=r,this.frameOverride.localMatrix=S6t,this.isScreenSpace&&(this.frameOverride.fill.color=Pi.from0to1([0,0,0,0])),this.frameOverride.data={...this.frameOverride.data,width:t,height:r},Lye({objectOverride:this.frameOverride,objectRoot:this.frameRoot,newParentWidth:this.frameOverride.width,newParentHeight:this.frameOverride.height,initialParentWidth:this.frameRoot.width,initialParentHeight:this.frameRoot.height}),this.frameOverride.updateWorldMatrix(!0,!1,!0)}}applySize(e,t=window.devicePixelRatio){var s,l;let r=Math.max(1,(e==null?void 0:e.width)??this.width),i=Math.max(1,(e==null?void 0:e.height)??this.height);this.dpr=t,this.width=r,this.height=i,this._innerApplySize();let n=1,a=512,o=512;(r*t<a||i*t<o)&&(n=Math.max(a/(r*t),o/(i*t))),this.renderTarget.setSize(r*t*n,i*t*n),(s=this._canvasTexture)==null||s.dispose(),this._canvasTexture=void 0,this.applyOverrides(e),(l=this.frameOverride)==null||l.requestRender()}applyFrame(e){var r,i;let t=this.context.scene.find2D(e);if(!(!t||!(t instanceof Yc)))return this.disposeFrameOverride(),this.frameRoot=t,this.frameOverride=t.clone({dpr:this.renderer.dpr,shared:this.context.shared}),this.scene2d.add(this.frameOverride),this.applySize(),(r=this.frame)==null||r.addEventListener("render",this.onRenderRequestedDownstream),this.frameOverride.traverse(n=>{n.addEventListener("beginState",this.onFrameOverrideObjectEvent)}),this.frameOverride.traverse(n=>{n.addEventListener("completeState",this.onFrameOverrideObjectEvent)}),(i=this.frame)==null||i.requestRender(),t}get frame(){return this.frameOverride}get frameId(){var e;return(e=this.frame)==null?void 0:e.uuid}find(e){return this.scene2d.find(e)}get texture(){var e;return(e=this.textureHolder)==null?void 0:e.getTexture(1001)}disposeFrameOverride(){var e,t,r;(e=this.frameOverride)==null||e.removeEventListener("render",this.onRenderRequestedDownstream),(t=this.frameOverride)==null||t.traverse(i=>{i.removeEventListener("beginStateChange",this.onFrameOverrideObjectEvent)}),(r=this.frameOverride)==null||r.traverse(i=>{i.removeEventListener("completeState",this.onFrameOverrideObjectEvent)}),this.frameOverride&&this.scene2d.remove(this.frameOverride)}};function Lye({objectOverride:e,objectRoot:t,newParentWidth:r,newParentHeight:i,initialParentWidth:n,initialParentHeight:a}){if(e instanceof Yc&&t instanceof Yc||e instanceof _p&&t instanceof _p)for(let o=0,s=e.children.length;o<s;o++){let l=e.children[o],u=t.children[o];l&&u&&l.uuid===u.uuid&&E6t({objectOverride:l,objectRoot:u,newParentWidth:r,newParentHeight:i,initialParentWidth:n,initialParentHeight:a})}}function C6t(e){if(qO(e))return[e.width,e.height];if(e instanceof H7){let[t,r]=e.getHalfSize();return[t*2,r*2]}else if(e instanceof _p){let[t,r]=e.recursiveBBox.getHalfSize();return[t*2,r*2]}return[0,0]}function E6t({objectOverride:e,objectRoot:t,newParentWidth:r,newParentHeight:i,initialParentWidth:n,initialParentHeight:a}){let[o,s]=C6t(t),{width:l,height:u,position:c}=Pye({constraints:e.data,newParentWidth:r,newParentHeight:i,initialParentWidth:n,initialParentHeight:a,objectInitialWidth:o,objectInitialHeight:s,objectInitialPosition:t.position});if(e.position=c,e.data={...e.data,position:c},e.states)for(let h in e.states)M6t({stateId:h,objectOverride:e,objectRoot:t,newParentWidth:r,newParentHeight:i,initialParentWidth:n,initialParentHeight:a});if(qO(e)||e instanceof _p)qO(e)&&(e.width=l,e.height=u,e.data={...e.data,width:l,height:u}),Lye({objectOverride:e,objectRoot:t,newParentWidth:l,newParentHeight:u,initialParentWidth:o,initialParentHeight:s});else if(e instanceof H7){let h=t,d=o!==0?l/o:1,f=s!==0?u/s:1;e.path=d6t(h.path,d,f),e.data={...e.data,path:e.path}}}function M6t({stateId:e,objectOverride:t,objectRoot:r,newParentWidth:i,newParentHeight:n,initialParentWidth:a,initialParentHeight:o}){var u,c;let s=(u=t.states)==null?void 0:u[e],l=(c=r.states)==null?void 0:c[e];if(s&&l){let{width:h,height:d,position:f}=Pye({constraints:t.data,newParentWidth:i,newParentHeight:n,initialParentWidth:a,initialParentHeight:o,objectInitialWidth:Mv.isResizeable(l)?l.width:0,objectInitialHeight:Mv.isResizeable(l)?l.height:0,objectInitialPosition:l.position});Object.assign(t.states[e],{position:f}),Mv.isResizeable(s)&&Object.assign(t.states[e],{width:h,height:d})}}function qO(e){return e instanceof $4||e instanceof Yc||e instanceof fH||e instanceof pH}var va=class extends jz(jc){constructor(e,t,r){super(),this.data=t,this.bgColor=new qa(1,1,1,1),this.fog=null,this.backupFog=new tme(16777215,.1,2e3),this.fogUseBGColor=!1,this.isActive=!1,this.aoColor=new Vt,this.penumbraSizeArrayCache=null,this.super_Entity(e,t),this.personalCamera=new wo(i2,{...Gw.defaultData,...t.camera,name:"Personal Camera"}),this.personalCamera.objectHelper.visible=!1,this.add(this.personalCamera),this.activeCamera=this.personalCamera,this.ambientLight=new Hft(13882323,8553090,.75),this.ambientLight.name="Default Ambient Light",this.ambientLight.layers.enable(3),this.ambientLight.removeFromParent(),this.add(this.ambientLight),t.uiScene?this.uiScene=new vH((Array.isArray(e)?e[0]:e)+"-ui",t.uiScene,{dpr:window.devicePixelRatio,shared:r.shared}):t.uiFrame&&this.createUICanvas(t.uiFrame,r)}get scene(){return this.parent}get postprocessing(){return this.data.postprocessing}get frameId(){return this.data.uiFrame}get frame(){var e;return(e=this.uiCanvas)==null?void 0:e.frame}createUICanvas(e,t){this.uiCanvas=new Iye(this.uuid+"-uiscreen",window.innerWidth,window.innerHeight,t),this.uiCanvas.isScreenSpace=!0,this.uiCanvas.promise.then(()=>{var r,i;(r=this.uiCanvas)==null||r.applyFrame(e),(i=this.uiCanvas)==null||i.applySize()})}updateVisible(){}setBackgroundColor(e){this.bgColor=e,this.fogUseBGColor===!0&&(this.backupFog.color=e)}entityChildrenCount(){return this.uiScene?this.uiScene.children.length:super.entityChildrenCount()}updateAmbientLight(e,t){e.color!==void 0&&(this.ambientLight.color=Go(e.color,t)),e.intensity!==void 0&&(this.ambientLight.intensity=e.intensity),e.enabled!==void 0&&(e.enabled?this.add(this.ambientLight):this.remove(this.ambientLight))}onDeactive(){this.isActive=!1}onActive(e){this.isActive=!0,e.fog=this.fog,this.traverseEntity(t=>{t instanceof Qv&&t.recomputeBoolean()}),this.updateShadow(this.data.shadow)}forceMaterialsUpdate(){this.traverseEntity(e=>{if(e instanceof o2)if(Array.isArray(e.material))for(let t of e.material)t.needsUpdate=!0;else e.material.needsUpdate=!0,e.material.dispose()})}updateShadow(e){e.softShadowQuality!==void 0&&this.isActive&&jSt(e.softShadowQuality)&&this.forceMaterialsUpdate()}updateFog(e,t){if(e.enabled?this.fog=this.backupFog:this.fog=null,this.isActive){let r=this.scene;r.fog=this.fog}this.fogUseBGColor=e.useBackgroundColor,e.useBackgroundColor?this.backupFog.color.set(this.bgColor):this.backupFog.color=Go(e.color,t),this.backupFog.near=e.near,this.backupFog.far=e.far}updateAo(e,t){e.aoColor!==void 0&&(this.aoColor=Go(e.aoColor,t))}updateByOp(e,t,r,i){let n=this.data.uiFrame;super.updateByOp(e,t,r,i);let a=t;Ri(e.path,["fog"])?this.updateFog(a.fog,r.shared):Ri(e.path,["ao"])?this.updateAo(a.ao,r.shared):Ri(e.path,["ambient"])?this.updateAmbientLight(a.ambient,r.shared):Ri(e.path,["shadow"])?this.updateShadow(a.shadow):e.type===0&&e.path.length===0&&(e.props.uiFrame!==void 0||n!==a.uiFrame)&&this.updateUIFrame(e.props.uiFrame,r)}updateUIFrame(e,t){e?(this.uiCanvas||this.createUICanvas(e,t),this.uiCanvas.enabled=!0,this.uiCanvas.applyFrame(e)):this.uiCanvas&&(this.uiCanvas.enabled=!1)}updateState(e,t){this.updateState_Entity(e,t),e.backgroundColor!==void 0&&this.setBackgroundColor(Go(e.backgroundColor,t.shared)),e.fog!==void 0&&this.updateFog(e.fog,t.shared),e.ambient!==void 0&&this.updateAmbientLight(e.ambient,t.shared),e.ao!==void 0&&this.updateAo(e.ao,t.shared),e.shadow!==void 0&&this.updateShadow(e.shadow)}createFrame(e,t){}raycast(e,t){super.raycast(e,t)}switchActiveCamera(e){e&&e.isDescendantOf(this)&&(this.activeCamera!==this.personalCamera&&(this.activeCamera.objectHelper.visible=!0),this.activeCamera=e,e.objectHelper.visible=!1)}get playCamera(){var e;return((e=this.scene)==null?void 0:e.find(this.data.publish.playCamera))??this.personalCamera}switchToPlayCamera(){this.switchActiveCamera(this.playCamera)}get penumbraSizeArray(){return this.penumbraSizeArrayCache===null&&this.updatePenumbraSizeArray(),this.penumbraSizeArrayCache}updatePenumbraSizeArray(){this.penumbraSizeArrayCache=new Array(5).fill(.5);let e=0,t=0;this.traverseEntity(r=>{if(!r.visible)return!0;r instanceof _ye&&r.visible&&e<3&&(this.penumbraSizeArrayCache[e]=r.data.penumbraSize??.5,e+=1),r instanceof Aye&&r.visible&&e<2&&(this.penumbraSizeArrayCache[3+t]=r.data.penumbraSize??.5,t+=1)})}raycastWithClones(e){let t=[],r=i=>{for(let n of i.children){let a=n.cloner;Gr.is(n)&&(n.visible||a!=null&&a.object.data.visible)&&((hu(n)||BO(n)&&this.scene.enableHelpers&&n.objectHelper.visible)&&(e.intersectObject(n,!1,t),YO(n,e,t,!0)),r(n))}};return r(this),t}updateEntity2DByOp(e,t,r,i){var n;(n=this.uiCanvas)==null||n.updateEntity2DByOp(e,t,r,i)}},T6t=class extends cH(Wft,xye){constructor(e,t,r){super(),this.super_Entity(e,t),this.castShadow=!0,this.shadow.mapSize.width=1024,this.shadow.mapSize.height=1024,this.shadow.normalBias=1,this.layers.enable(3);let i=this.shadow.camera;i.fov=90,i.aspect=1,i.near=100,i.far=2500;let n=new U(-i.far+this.position.x,-i.far+this.position.y,-i.far+this.position.z),a=new U(i.far+this.position.x,i.far+this.position.y,i.far+this.position.z),o=new Cn(n,a),s=new YS(o,new Vt(16755200));s.visible=!1,this.gizmos.shadowmap=s,this.update()}update(){if(this.shadow&&(this.shadow.camera.updateProjectionMatrix(),this.gizmos))for(let e in this.gizmos){let t=this.gizmos[e];if(t instanceof YS){let r=this.shadow.camera,i=new U(-r.far+this.position.x,-r.far+this.position.y,-r.far+this.position.z),n=new U(r.far+this.position.x,r.far+this.position.y,r.far+this.position.z);t.box.set(i,n),t.updateMatrixWorld(!0)}}}updateMatrixWorld(e){super.updateMatrixWorld(e),this.objectHelper&&this.objectHelper.update()}updateState(e,t){this.updateState_Light(e,t),e.distance!==void 0&&(this.distance=e.distance),e.decay!==void 0&&(this.decay=e.decay),e.shadowRadius!==void 0&&(this.shadow.radius=e.shadowRadius),e.shadowResolution!==void 0&&(this.shadow.mapSize.set(e.shadowResolution,e.shadowResolution),this.shadow.map&&(this.shadow.map.dispose(),this.shadow.map=null))}},P6t=class extends xo{get forceComputeSize(){return!0}get shape(){return this.geometry.userData.shape}updateEntityBoxSize(e,t){let r=this.geometry.getAttribute("position");r!==void 0?Jz(r,this.geometry.drawRange.start,this.geometry.drawRange.count<1/0?this.geometry.drawRange.count:r.count,e,t):super.updateEntityBoxSize(e,t)}},mH=class extends xo{constructor(e,t,r){super(e,t,r),this._shapeId=null,this._context=r}updateState(e,t){super.updateState(e,t),this.updateShape(),this.refreshAttachedCloners(t)}updateShape(){var i;let e={...this.data.geometry.extrusion.shape};for(let n in e)typeof e[n]=="string"&&(e[n]=this._context.shared.getVariable(e[n],[this.uuid,"geometry","extrusion","shape",n]));let t;if(e.type==="Custom"){let n=e.shapeId;if(n!==this._shapeId&&this.detachShape(),n){this._shapeId=n;let a=this._context.scene.find(n);a!=null&&a.data&&(a.attachedPaths.add(this),t=(i=a.geometry.userData)==null?void 0:i.shape),t||this._context.scene.addPendingCommand(()=>this.updateShape())}}else{let n;switch(e.type){case"Rectangle":n=Kz;break;case"Ellipse":n=Qz;break;case"Polygon":n=v1e;break;case"Star":n=m1e;break;default:throw new Error(`Unknown shape type: ${e.type}`)}t=n.create({parameters:e}).userData.shape}let r=this.geometry;t&&r.inputs&&(r.inputs.shapeData=t,r.build())}detachShape(){var e;this._shapeId!==null&&((e=this._context.scene.find(this._shapeId))==null||e.attachedPaths.delete(this))}createGeometryDelayed(e){this.geometryCreateDeleyed=e.shared,this.updateShape(),this.refreshAttachedPaths(e)}updateTransformState(e,t){return super.updateTransformState(e,t)}updateGeometryInteractions(e,t){super.updateGeometryInteractions(e,t),this.updateShape()}updateEntityBoxSize(e,t){let r=this.geometry.getAttribute("position");r!==void 0?Jz(r,this.geometry.drawRange.start,this.geometry.drawRange.count<1/0?this.geometry.drawRange.count:r.count,e,t):super.updateEntityBoxSize(e,t)}},gH=class extends uH{constructor(e,t,r){super(e,t,r),this.data=t}},P1=class extends s2(rd,K4){constructor(e,t,r){super(),t.type==="Instance"&&typeof e=="string"&&(t=this.transformAssignData(t,r)),this.super_Entity(e,t),this.objectHelper.update()}get isComponentRoot(){return this.data.type==="Component"&&typeof this.identity=="string"}get isInstanceRoot(){return this.data.type==="Instance"&&typeof this.identity=="string"}transformAssignData(e,t){let r=y6.getComponentData({scene:t.scene.data,shared:t.shared.data},e.component);if(r){let i,n;for(let a of qf.rootOverrideProps)e[a]===void 0?(i===void 0&&(i={...e}),i[a]=r.data[a]):(n===void 0&&(n={}),n[a]=e[a],i===void 0&&(i={...e}),i[a]=rp.apply(r.data[a],e[a]));return this.overrideData=n,i}else return{...wa.defaultData,...e,...Wc(wa.defaultData,qf.rootOverrideProps)}}updateByOp(e,t,r,i){let n;if(this.isInstanceRoot&&!i){if(t=this.transformAssignData(t,r),e.type===0&&e.path.length===0&&this.component)for(let a of qf.rootOverrideProps)a in e.props&&e.props[a]===void 0&&(n===void 0&&(n={...e,props:{...e.props}}),n.props[a]=this.component.data[a]);else if(e.type===0&&e.path.length>0&&qf.rootOverrideProps.includes(e.path[0])){let a=e.path[0];n===void 0&&(n={...e,path:[],props:{[a]:t[a]}})}}super.updateByOp(n??e,t,r,i)}updateState(e,t){this.updateState_Entity(e,t)}expandInstanceChildren(e){let t=this.data;if(this.component===void 0){let r=e.scene.find(t.component)??null,i=!1;if(r!==this.oldComponent){if(this.oldComponent){let n=0;for(let a of this.children)if(Gr.is(a))e.scene.disposeAndUnregisterEntityRecursivelyIfNotReregistered(a),yH(a),n+=1;else break;this.children.splice(0,n)}i=!0}if(r){let n={};kye(e,[this.uuid],t.overrides,this,r,r,0,i,n);for(let a of this.children)if(Gr.is(a)){let o=a.data;o.type==="Empty"&&o.animations&&a.traverseEntity(s=>{let l=s.dataPatched;if(s instanceof xo&&l.bones&&l.boneInverses){let u=s.dataPatched;if(u.bones&&u.boneInverses){let c=u.bones.map(f=>e.scene.find(n[f])),h=u.boneInverses.map(f=>new Ke().fromArray(f)),d=new oz(c,h);s.bind(d,s.bindMatrix)}}else s.matrixAutoUpdate=!0})}}this.oldComponent=this.component}}};function yH(e){if(e.component){let t=e.component.instances.indexOf(e);t>=0&&e.component.instances.splice(t,1);for(let r of e.children)Gr.is(r)&&yH(r)}}function Sie(e,t,r,i){return e.component===t&&Iz(e.identity,i)?e.overrideData===r?2:1:0}function kye(e,t,r,i,n,a,o,s,l){if(o>50)return!1;if(i.component!==n){if(i.component){let c=i.component.instances.indexOf(i);c>=0&&i.component.instances.splice(c,1)}n.instances.find(c=>c===i)||n.instances.push(i),i.component=n}n instanceof P1&&n.isInstanceRoot&&n.expandInstanceChildren(e);let u=0;for(let c of n.children)if(Gr.is(c)){let h=[...t,...typeof c.identity=="string"?[c.identity]:c.identity],d=p6.resolve(r,h,1);d!=null&&!(d instanceof Vn)&&(Object.setPrototypeOf(d,Vn.prototype),console.error("wrong prototype"));let f=null,p;if(!s){let v=i.children[u];if(f=Gr.is(v)?v:null,f!==null){let m=Sie(f,c,d,h);p=m>=1?f.stateSelection:void 0,m!==2&&(f=null)}if(f===null&&(f=e.scene.findInstance(h)??null,f!==null)){let m=Sie(f,c,d,h);if(p=m>=1?f.stateSelection:void 0,m!==2)f=null;else{let g=f.parent.children.indexOf(f);f.parent.children.splice(g,1),i.children.splice(u,0,f),f.parent===i?g<=u&&console.error("not possible"):(f.parent=i,f.matrixWorldNeedsUpdate=!0,f.resetBBoxNeedsUpdate(),f.updateVisible(),e.pendingDeletes.delete(f))}}}if(f===null){let v=d?rp.apply(c.data,d):c.data;Xv.is(v.type)&&(v={...v,type:"Empty"}),f=Xf.createEntity(h,v,e),f.overrideData=d,i.add(f),i.children.splice(i.children.length-1,1),i.children.splice(u,0,f),f.updateState(f.data,e),p&&f.changeSelectedState(p,e),e.scene.registerInstanceAndSetUuid(f)}if(f.isBone){let v=f.identity[f.identity.length-1];l[v]=f.uuid}u+=1,kye(e,t,r,f,c,a,o+1,s,l)}if(!s){let c=u;for(;;){let h=i.children[u];if(Gr.is(h))e.pendingDeletes.add(h);else break;u+=1}i.children.splice(c,u-c)}return!0}var D6t=class extends s2(rme,K4){constructor(e,t){super(),this.super_Entity(e,t),this.objectHelper.update(),this.matrixAutoUpdate=!0}updateState(e,t){this.updateState_Entity(e,t)}},mo=class extends xo{constructor(e,t,r){super(e,t,r),this.onBeforeRender=i=>{this.uiCanvas.render(i)},this.uiCanvas=new Iye(e+"-canvas",t.geometry.width,t.geometry.height,r),this.uiCanvas.promise.then(()=>{this.applyFrame(this.dataPatched.geometry.frame,r.shared)})}updateByPatchedOpGeometry(e,t,r){super.updateByPatchedOpGeometry(e,t,r),e.type===0&&(e.props.frame!==void 0&&this.applyFrame(e.props.frame,r.shared),(e.props.width!==void 0||e.props.height!==void 0)&&this.applySize(e.props,r.shared))}applySize(e,t){let r=(e==null?void 0:e.width)??this.dataPatched.geometry.width,i=(e==null?void 0:e.height)??this.dataPatched.geometry.height;this.uiCanvas.applySize({width:r,height:i}),this.applyGeometryParametersFromFrame(t)}applyFrame(e,t){this.uiCanvas.applyFrame(e),this.applyGeometryParametersFromFrame(t),this.applyMaterialParametersFromFrame({shared:t})}applyGeometryParametersFromFrame(e){var r;let t=this.frame;t&&(Object.assign(this.data,{geometry:Object.assign(this.data.geometry,{cornerRadius:t.cornerRadius,cornerType:0})}),Object.assign(this.dataPatched,{geometry:Object.assign(this.dataPatched.geometry,{cornerRadius:t.cornerRadius,cornerType:0})}),(r=this.localGeometry)==null||r.dispose(),this.localGeometry=Kw(this.dataPatched.geometry,e,this.data.flatShading,this))}applyMaterialParametersFromFrame(e){let t=this.frame;if(t){let r=t.data.backgroundBlur;Object.assign(this.data.material.layers[0].data.texture,{image:this.uiCanvas.uuid}),Object.assign(this.data.material.layers[1].data,{roughness:r.radius,alpha:r.enabled?1:0}),Object.assign(this.dataPatched.material.layers[0].data.texture,{image:this.uiCanvas.uuid}),Object.assign(this.dataPatched.material.layers[1].data,{roughness:r.radius,alpha:r.enabled?1:0}),this.material.reset(this.dataPatched.material,e,!0)}}updateEntity2DByOp(e,t,r,i){this.uiCanvas.updateEntity2DByOp(e,t,r,i),e===this.frameId&&t.type===0&&(t.props.cornerRadius!==void 0?this.applyGeometryParametersFromFrame(i):Ri(t.path,["backgroundBlur"])&&this.applyMaterialParametersFromFrame({shared:i}))}get frame(){return this.uiCanvas.frame}get frameId(){var e;return(e=this.frame)==null?void 0:e.uuid}removeInteractionGeometry(e){super.removeInteractionGeometry(e),this.applySize({},e)}updateGeometryInteractions(e,t){super.updateGeometryInteractions(e,t),this.applySize({width:e.width,height:e.height},t)}},I6t=class{constructor(e,t,r){this.variables=[],this.currentTextureIndex=0;let i=On,n=new jc,a=new cm;a.position.z=1;let o={passThruTexture:{value:null}},s=c(d(),o),l=new nn(new Md(2,2),s);n.add(l),this.setDataType=function(f){return i=f,this},this.addVariable=function(f,p,v){let m=this.createShaderMaterial(p),g={name:f,initialValueTexture:v,material:m,dependencies:null,renderTargets:[],wrapS:null,wrapT:null,minFilter:mi,magFilter:mi};return this.variables.push(g),g},this.setVariableDependencies=function(f,p){f.dependencies=p},this.init=function(){if(r.capabilities.isWebGL2===!1&&r.extensions.has("OES_texture_float")===!1)return"No OES_texture_float support for float textures.";if(r.capabilities.maxVertexTextures===0)return"No support for vertex shader textures.";for(let f=0;f<this.variables.length;f++){let p=this.variables[f];p.renderTargets[0]=this.createRenderTarget(e,t,p.wrapS,p.wrapT,p.minFilter,p.magFilter),p.renderTargets[1]=this.createRenderTarget(e,t,p.wrapS,p.wrapT,p.minFilter,p.magFilter),this.renderTexture(p.initialValueTexture,p.renderTargets[0]),this.renderTexture(p.initialValueTexture,p.renderTargets[1]);let v=p.material,m=v.uniforms;if(p.dependencies!==null)for(let g=0;g<p.dependencies.length;g++){let y=p.dependencies[g];if(y.name!==p.name){let x=!1;for(let b=0;b<this.variables.length;b++)if(y.name===this.variables[b].name){x=!0;break}if(!x)return"Variable dependency not found. Variable="+p.name+", dependency="+y.name}m[y.name]={value:null},v.fragmentShader=`
uniform sampler2D `+y.name+`;
`+v.fragmentShader}}return this.currentTextureIndex=0,null},this.compute=function(){let f=this.currentTextureIndex,p=this.currentTextureIndex===0?1:0;for(let v=0,m=this.variables.length;v<m;v++){let g=this.variables[v];if(g.dependencies!==null){let y=g.material.uniforms;for(let x=0,b=g.dependencies.length;x<b;x++){let _=g.dependencies[x];y[_.name].value=_.renderTargets[f].texture}}this.doRenderTarget(g.material,g.renderTargets[p])}this.currentTextureIndex=p},this.getCurrentRenderTarget=function(f){return f.renderTargets[this.currentTextureIndex]},this.getAlternateRenderTarget=function(f){return f.renderTargets[this.currentTextureIndex===0?1:0]},this.dispose=function(){l.geometry.dispose(),l.material.dispose();let f=this.variables;for(let p=0;p<f.length;p++){let v=f[p];v.initialValueTexture&&v.initialValueTexture.dispose();let m=v.renderTargets;for(let g=0;g<m.length;g++)m[g].dispose()}};function u(f){f.defines.resolution="vec2( "+e.toFixed(1)+", "+t.toFixed(1)+" )"}this.addResolutionDefine=u;function c(f,p){p=p||{};let v=new ai({uniforms:p,vertexShader:h(),fragmentShader:f});return u(v),v}this.createShaderMaterial=c,this.createRenderTarget=function(f,p,v,m,g,y){return f=f||e,p=p||t,v=v||Xi,m=m||Xi,g=g||mi,y=y||mi,new ui(f,p,{wrapS:v,wrapT:m,minFilter:g,magFilter:y,format:ga,type:i,depthBuffer:!1})},this.createTexture=function(){let f=new Float32Array(e*t*4),p=new Tl(f,e,t,ga,On);return p.needsUpdate=!0,p},this.renderTexture=function(f,p){o.passThruTexture.value=f,this.doRenderTarget(s,p),o.passThruTexture.value=null},this.doRenderTarget=function(f,p){let v=r.getRenderTarget(),m=r.xr.enabled,g=r.shadowMap.autoUpdate,y=r.outputEncoding,x=r.toneMapping;r.xr.enabled=!1,r.shadowMap.autoUpdate=!1,r.outputEncoding=ku,r.toneMapping=Gc,l.material=f,r.setRenderTarget(p),r.render(n,a),l.material=s,r.xr.enabled=m,r.shadowMap.autoUpdate=g,r.outputEncoding=y,r.toneMapping=x,r.setRenderTarget(v)};function h(){return`void main()	{

	gl_Position = vec4( position, 1.0 );

}
`}function d(){return`uniform sampler2D passThruTexture;

void main() {

	vec2 uv = gl_FragCoord.xy / resolution.xy;

	gl_FragColor = texture2D( passThruTexture, uv );

}
`}}},Ia=new za,W5=new U,L6t=class{constructor(e){let t=e.geometry;if(!t.isBufferGeometry||t.attributes.position.itemSize!==3)throw new Error("THREE.MeshSurfaceSampler: Requires BufferGeometry triangle mesh.");t.index&&(console.warn("THREE.MeshSurfaceSampler: Converting geometry to non-indexed BufferGeometry."),t=t.toNonIndexed()),this.geometry=t,this.randomFunction=Math.random,this.positionAttribute=this.geometry.getAttribute("position"),this.colorAttribute=this.geometry.getAttribute("color"),this.weightAttribute=null,this.distribution=null}setWeightAttribute(e){return this.weightAttribute=e?this.geometry.getAttribute(e):null,this}build(){let e=this.positionAttribute,t=this.weightAttribute,r=new Float32Array(e.count/3);for(let n=0;n<e.count;n+=3){let a=1;t&&(a=t.getX(n)+t.getX(n+1)+t.getX(n+2)),Ia.a.fromBufferAttribute(e,n),Ia.b.fromBufferAttribute(e,n+1),Ia.c.fromBufferAttribute(e,n+2),a*=Ia.getArea(),r[n/3]=a}this.distribution=new Float32Array(e.count/3);let i=0;for(let n=0;n<r.length;n++)i+=r[n],this.distribution[n]=i;return this}setRandomGenerator(e){return this.randomFunction=e,this}sample(e,t,r){let i=this.distribution[this.distribution.length-1],n=this.binarySearch(this.randomFunction()*i);return this.sampleFace(n,e,t,r)}binarySearch(e){let t=this.distribution,r=0,i=t.length-1,n=-1;for(;r<=i;){let a=Math.ceil((r+i)/2);if(a===0||t[a-1]<=e&&t[a]>e){n=a;break}else e<t[a]?i=a-1:r=a+1}return n}sampleFace(e,t,r,i){let n=this.randomFunction(),a=this.randomFunction();return n+a>1&&(n=1-n,a=1-a),Ia.a.fromBufferAttribute(this.positionAttribute,e*3),Ia.b.fromBufferAttribute(this.positionAttribute,e*3+1),Ia.c.fromBufferAttribute(this.positionAttribute,e*3+2),t.set(0,0,0).addScaledVector(Ia.a,n).addScaledVector(Ia.b,a).addScaledVector(Ia.c,1-(n+a)),r!==void 0&&Ia.getNormal(r),i!==void 0&&this.colorAttribute!==void 0&&(Ia.a.fromBufferAttribute(this.colorAttribute,e*3),Ia.b.fromBufferAttribute(this.colorAttribute,e*3+1),Ia.c.fromBufferAttribute(this.colorAttribute,e*3+2),W5.set(0,0,0).addScaledVector(Ia.a,n).addScaledVector(Ia.b,a).addScaledVector(Ia.c,1-(n+a)),i.r=W5.x,i.g=W5.y,i.b=W5.z),this}};function k6t(e){let t=new Float32Array(e*e*2);for(let r=0;r<e;r++)for(let i=0;i<e;i++){let n=r*e+i;t[n*2+0]=r/(e-1),t[n*2+1]=i/(e-1)}return t}function R6t(e){let t=Math.ceil(Math.sqrt(e));return Math.max(t,1)}function O6t(e,t){let r=new nn(e.geometry,e.material),i=[],n=[],a=new U,o=new U;r.geometry.index!==null&&(r.geometry=r.geometry.toNonIndexed());let s=new L6t(r).build();for(let c=0;c<t;c++)s.sample(a,o),i.push(a.x,a.y,a.z),n.push(o.x,o.y,o.z);let l=new Float32Array(i),u=new Float32Array(n);return{positions:l,normals:u}}function Cie(e,t){let r=e,i=new Float32Array(4*t*t);for(let a=0;a<t*t;a++)i[4*a]=r[3*a],i[4*a+1]=r[3*a+1],i[4*a+2]=r[3*a+2],i[4*a+3]=0;let n=new Tl(i,t,t,ga,On);return n.needsUpdate=!0,n}function B6t({size:e}){let t=new Float32Array(4*e*e);for(let i=0;i<e*e;i++)t[4*i]=i,t[4*i+1]=0,t[4*i+2]=0,t[4*i+3]=0;let r=new Tl(t,e,e,ga,On);return r.needsUpdate=!0,r}function N6t(e){let t=new Float32Array(4*e*e);for(let i=0;i<e*e;i++)t[4*i]=0,t[4*i+1]=0,t[4*i+2]=0,t[4*i+3]=0;let r=new Tl(t,e,e,ga,On);return r.needsUpdate=!0,r}var V6t=`
// uniform sampler2D uCurrentPosition; // Pass in the variable from GPGPU
// uniform sampler2D uCurrentVelocity; // Pass in the variable from GPGPU
// uniform sampler2D uCurrentEmissionRate; // Pass in the variable from GPGPU
uniform sampler2D uOriginalPosition;
uniform float uTime;
uniform float uSpeed;     // update speed of the particles
uniform vec3 uWorldOffset;    
uniform vec4 uWorldQuaternion;
uniform float uMaxLifeTime;
uniform vec3 uEmitterSize;
uniform float uFPSRatio;     // 1  for 60 FPS

float random (vec2 st) {
    return fract(sin(dot(st.xy,
        vec2(12.9898,78.233)))*
        43758.5453123);
}
vec3 applyQuaternionToVector( vec4 q, vec3 v ){
    return v + 2.0 * cross( q.xyz, cross( q.xyz, v ) + q.w * v );
}

vec3 applyForce(vec3 force, float mass) {
    vec3 acceleration = force / mass;
    
    return acceleration;
  }
  

void main() {
    vec2 vUv = gl_FragCoord.xy / resolution.xy;
    vec3 position = texture2D( uCurrentPosition, vUv ).xyz;
    float currentLife = texture2D( uCurrentPosition, vUv ).w;   // from 1 to 0
    float isSpawning = texture2D( uCurrentEmissionRate, vUv ).r;        // 1. = spawning, 0. = not spawning
    float isActive = texture2D( uCurrentEmissionRate, vUv ).g;          // 1. = active, 0. = not active
    float timeStart = texture2D( uCurrentEmissionRate, vUv ).b;         // timeStart in seconds when the particle was emitted
    vec3 originalPosition = ((texture2D( uOriginalPosition, vUv ).xyz) * uEmitterSize);
    vec3 velocity = texture2D( uCurrentVelocity, vUv ).xyz;
    float collisionFlag = texture2D( uCurrentVelocity, vUv ).w;             // 1. = collided, 0. = not collided
    float lifeTime = uMaxLifeTime;

    // Calculate the position adjustment based on collision
    //     if (collisionFlag > .5) {  
    float isColliding = step(0.5, collisionFlag); // 1.0 if collisionFlag > 0.5, otherwise 0.0
    float bounceOffset = 3.0 * isColliding; // Becomes 3.0 if colliding, 0.0 otherwise
    vec3 collisionAdjustedVelocity = velocity * (1.0 + bounceOffset);

    // Update position based on collision or normal movement
    vec3 fpsVelocity = velocity * min(uFPSRatio, 5.0);
    position += mix(fpsVelocity, collisionAdjustedVelocity, isColliding);

    // EMISSION RATE - BIRTH
    // if (isSpawning == 1.0) {
    // Better Approach to avoid If statement
    vec3 newPosition = applyQuaternionToVector(uWorldQuaternion, originalPosition) + uWorldOffset;
    originalPosition = mix(originalPosition, newPosition, isSpawning);
    position = mix(position, originalPosition, isSpawning);;
    timeStart = mix(timeStart, uTime, isSpawning);

    // Calculate timeLeft for life normalization
    float timeLeft = max(lifeTime - (uTime - timeStart), 0.0);
    float life_Normalize = timeLeft / lifeTime;

    // Use isActive to blend between the calculated color and black
    vec4 activeColor = vec4(position, life_Normalize);
    // if (isActive == 1.0) {
    gl_FragColor = mix(vec4(0.0), activeColor, isActive);

}
`,F6t=`

    vec3 mod289(vec3 x) {
      return x - floor(x * (1.0 / 289.0)) * 289.0;
    }
    
    vec4 mod289(vec4 x) {
    return x - floor(x * (1.0 / 289.0)) * 289.0;
    }
    
    vec4 permute(vec4 x) {
        return mod289(((x*34.0)+1.0)*x);
    }
    
    vec4 taylorInvSqrt(vec4 r)
    {
    return 1.79284291400159 - 0.85373472095314 * r;
    }
    
    vec3 fade(vec3 t) {
  return t*t*t*(t*(t*6.0-15.0)+10.0);
}

    float snoise(vec3 v)
    {
    const vec2  C = vec2(1.0/6.0, 1.0/3.0) ;
    const vec4  D = vec4(0.0, 0.5, 1.0, 2.0);
    vec3 i  = floor(v + dot(v, C.yyy) );
    vec3 x0 =   v - i + dot(i, C.xxx) ;
    vec3 g = step(x0.yzx, x0.xyz);
    vec3 l = 1.0 - g;
    vec3 i1 = min( g.xyz, l.zxy );
    vec3 i2 = max( g.xyz, l.zxy );
    vec3 x1 = x0 - i1 + C.xxx;
    vec3 x2 = x0 - i2 + C.yyy; // 2.0*C.x = 1/3 = C.y
    vec3 x3 = x0 - D.yyy;      // -1.0+3.0*C.x = -0.5 = -D.y
    
    // Permutations
    i = mod289(i);
    vec4 p = permute( permute( permute(
                i.z + vec4(0.0, i1.z, i2.z, 1.0 ))
              + i.y + vec4(0.0, i1.y, i2.y, 1.0 ))
              + i.x + vec4(0.0, i1.x, i2.x, 1.0 ));
    
    // Gradients: 7x7 points over a square, mapped onto an octahedron.
    // The ring size 17*17 = 289 is close to a multiple of 49 (49*6 = 294)
    float n_ = 0.142857142857; // 1.0/7.0
    vec3  ns = n_ * D.wyz - D.xzx;
    
    vec4 j = p - 49.0 * floor(p * ns.z * ns.z);  //  mod(p,7*7)
    
    vec4 x_ = floor(j * ns.z);
    vec4 y_ = floor(j - 7.0 * x_ );    // mod(j,N)
    
    vec4 x = x_ *ns.x + ns.yyyy;
    vec4 y = y_ *ns.x + ns.yyyy;
    vec4 h = 1.0 - abs(x) - abs(y);
    
    vec4 b0 = vec4( x.xy, y.xy );
    vec4 b1 = vec4( x.zw, y.zw );
    
    vec4 s0 = floor(b0)*2.0 + 1.0;
    vec4 s1 = floor(b1)*2.0 + 1.0;
    vec4 sh = -step(h, vec4(0.0));
    
    vec4 a0 = b0.xzyw + s0.xzyw*sh.xxyy ;
    vec4 a1 = b1.xzyw + s1.xzyw*sh.zzww ;
    
    vec3 p0 = vec3(a0.xy,h.x);
    vec3 p1 = vec3(a0.zw,h.y);
    vec3 p2 = vec3(a1.xy,h.z);
    vec3 p3 = vec3(a1.zw,h.w);
    
    //Normalise gradients
    vec4 norm = taylorInvSqrt(vec4(dot(p0,p0), dot(p1,p1), dot(p2, p2), dot(p3,p3)));
    p0 *= norm.x;
    p1 *= norm.y;
    p2 *= norm.z;
    p3 *= norm.w;
    
    // Mix final noise value
    vec4 m = max(0.6 - vec4(dot(x0,x0), dot(x1,x1), dot(x2,x2), dot(x3,x3)), 0.0);
    m = m * m;
    return 42.0 * dot( m*m, vec4( dot(p0,x0), dot(p1,x1),
                                  dot(p2,x2), dot(p3,x3) ) );
    }
    
    vec3 snoiseVec3( vec3 x ){
    
      float s  = snoise(vec3( x ));
      float s1 = snoise(vec3( x.y - 19.1 , x.z + 33.4 , x.x + 47.2 ));
      float s2 = snoise(vec3( x.z + 74.2 , x.x - 124.5 , x.y + 99.4 ));
      vec3 c = vec3( s , s1 , s2 );
      return c;
    
    }
    
      
    vec3 curlNoise( vec3 p, float seed){
      p += seed;
      const float e = .1;
      vec3 dx = vec3( e   , 0.0 , 0.0 );
      vec3 dy = vec3( 0.0 , e   , 0.0 );
      vec3 dz = vec3( 0.0 , 0.0 , e   );
    
      vec3 p_x0 = snoiseVec3( p - dx );
      vec3 p_x1 = snoiseVec3( p + dx );
      vec3 p_y0 = snoiseVec3( p - dy );
      vec3 p_y1 = snoiseVec3( p + dy );
      vec3 p_z0 = snoiseVec3( p - dz );
      vec3 p_z1 = snoiseVec3( p + dz );
    
      float x = p_y1.z - p_y0.z - p_z1.y + p_z0.y;
      float y = p_z1.x - p_z0.x - p_x1.z + p_x0.z;
      float z = p_x1.y - p_x0.y - p_y1.x + p_y0.x;
    
      const float divisor = 1.0 / ( 2.0 * e );
      return normalize( vec3( x , y , z ) * divisor );
    
    }


// Classic Perlin noise
float cnoise(vec3 P)
{
  vec3 Pi0 = floor(P); // Integer part for indexing
  vec3 Pi1 = Pi0 + vec3(1.0); // Integer part + 1
  Pi0 = mod289(Pi0);
  Pi1 = mod289(Pi1);
  vec3 Pf0 = fract(P); // Fractional part for interpolation
  vec3 Pf1 = Pf0 - vec3(1.0); // Fractional part - 1.0
  vec4 ix = vec4(Pi0.x, Pi1.x, Pi0.x, Pi1.x);
  vec4 iy = vec4(Pi0.yy, Pi1.yy);
  vec4 iz0 = Pi0.zzzz;
  vec4 iz1 = Pi1.zzzz;

  vec4 ixy = permute(permute(ix) + iy);
  vec4 ixy0 = permute(ixy + iz0);
  vec4 ixy1 = permute(ixy + iz1);

  vec4 gx0 = ixy0 * (1.0 / 7.0);
  vec4 gy0 = fract(floor(gx0) * (1.0 / 7.0)) - 0.5;
  gx0 = fract(gx0);
  vec4 gz0 = vec4(0.5) - abs(gx0) - abs(gy0);
  vec4 sz0 = step(gz0, vec4(0.0));
  gx0 -= sz0 * (step(0.0, gx0) - 0.5);
  gy0 -= sz0 * (step(0.0, gy0) - 0.5);

  vec4 gx1 = ixy1 * (1.0 / 7.0);
  vec4 gy1 = fract(floor(gx1) * (1.0 / 7.0)) - 0.5;
  gx1 = fract(gx1);
  vec4 gz1 = vec4(0.5) - abs(gx1) - abs(gy1);
  vec4 sz1 = step(gz1, vec4(0.0));
  gx1 -= sz1 * (step(0.0, gx1) - 0.5);
  gy1 -= sz1 * (step(0.0, gy1) - 0.5);

  vec3 g000 = vec3(gx0.x,gy0.x,gz0.x);
  vec3 g100 = vec3(gx0.y,gy0.y,gz0.y);
  vec3 g010 = vec3(gx0.z,gy0.z,gz0.z);
  vec3 g110 = vec3(gx0.w,gy0.w,gz0.w);
  vec3 g001 = vec3(gx1.x,gy1.x,gz1.x);
  vec3 g101 = vec3(gx1.y,gy1.y,gz1.y);
  vec3 g011 = vec3(gx1.z,gy1.z,gz1.z);
  vec3 g111 = vec3(gx1.w,gy1.w,gz1.w);

  vec4 norm0 = taylorInvSqrt(vec4(dot(g000, g000), dot(g010, g010), dot(g100, g100), dot(g110, g110)));
  g000 *= norm0.x;
  g010 *= norm0.y;
  g100 *= norm0.z;
  g110 *= norm0.w;
  vec4 norm1 = taylorInvSqrt(vec4(dot(g001, g001), dot(g011, g011), dot(g101, g101), dot(g111, g111)));
  g001 *= norm1.x;
  g011 *= norm1.y;
  g101 *= norm1.z;
  g111 *= norm1.w;

  float n000 = dot(g000, Pf0);
  float n100 = dot(g100, vec3(Pf1.x, Pf0.yz));
  float n010 = dot(g010, vec3(Pf0.x, Pf1.y, Pf0.z));
  float n110 = dot(g110, vec3(Pf1.xy, Pf0.z));
  float n001 = dot(g001, vec3(Pf0.xy, Pf1.z));
  float n101 = dot(g101, vec3(Pf1.x, Pf0.y, Pf1.z));
  float n011 = dot(g011, vec3(Pf0.x, Pf1.yz));
  float n111 = dot(g111, Pf1);

  vec3 fade_xyz = fade(Pf0);
  vec4 n_z = mix(vec4(n000, n100, n010, n110), vec4(n001, n101, n011, n111), fade_xyz.z);
  vec2 n_yz = mix(n_z.xy, n_z.zw, fade_xyz.y);
  float n_xyz = mix(n_yz.x, n_yz.y, fade_xyz.x); 
  return 2.2 * n_xyz;
}


vec3 fbm_vec3(vec3 p, float frequency, float offset)
{
  return vec3(
    cnoise((p+vec3(offset))*frequency),
    cnoise((p+vec3(offset+20.0))*frequency),
    cnoise((p+vec3(offset-30.0))*frequency)
  );
}

`,z6t=`
  #ifdef USE_COLLIDER
    float restitution = max(uBounce * 2., .01); // Energy Loss
    // SPHERE COLLIDER
    // **************************************************************
    #ifdef USE_SPHERE_COLLIDER       
      // Convert collider size to radii (assuming uColliderSize is the diameter in each axis)
      vec3 radii = uColliderSize;
      // Adjust position relative to collider
      vec3 relPos = position - uColliderPos;
      // Apply rotation of the collider to the relative position
      relPos = applyQuaternionToVector(uColliderQuaternionInvert, relPos);            
      // Scale relative position by radii (for ellipsoid collision detection)
      vec3 scaledPos = relPos / radii;
      // Calculate ellipsoidal distance
      float dist = length(scaledPos); // Distance in terms of ellipsoid
      
      // Check for collision
      if (dist <= 1. + particleSize / length(radii) && collisionFlag == 0.0) {
          // Compute the normal at the collision point, accounting for particle size
        vec3 adjustedPos = scaledPos * (1.0 + particleSize / length(radii));          
        // Compute the normal at the collision point
        vec3 normal = ellipsoidNormal(adjustedPos, radii);
        // Rotate the normal back to world space
        normal = applyQuaternionToVector(uColliderQuaternion, normal);
        // Reflect the velocity vector off the normal
        velocity = reflect(velocity, normal) * restitution;

        collisionFlag = 1.0;
      } else {
        collisionFlag = 0.0;
      }
    #endif

    // BOX COLLIDER or PLANE COLLIDER 
    // **************************************************************
    #ifdef USE_BOX_COLLIDER
      // Box dimensions and repulsion variables
      vec3 boxHalfSize = uColliderSize / 2.0;
      // Convert world position to box's local space
      vec3 localPos = applyQuaternionToVector(uColliderQuaternionInvert, position - uColliderPos);      
      // Collision detection
      vec3 localDistance = abs(localPos) - boxHalfSize;
      float distToSurface = max(localDistance.x, max(localDistance.y, localDistance.z));    

      // Collision Detected
      if (distToSurface <= particleSize * 0.5 && collisionFlag == 0.0) {      
        // Find the nearest face normal for bounce direction
        vec3 normal;
        if (localDistance.x > localDistance.y && localDistance.x > localDistance.z) {
            normal = vec3(sign(localPos.x), 0.0, 0.0);
        } else if (localDistance.y > localDistance.z) {
            normal = vec3(0.0, sign(localPos.y), 0.0);
        } else {
            normal = vec3(0.0, 0.0, sign(localPos.z));
        }            
        // Rotate normal back to world space
        normal = applyQuaternionToVector(uColliderQuaternion, normal);      
        // Reflect velocity and apply repulsion force
        velocity = reflect(velocity, normal) * restitution;
        
        collisionFlag = 1.0;
      } else {
        collisionFlag = 0.0;
      }
    #endif      
  #endif      
  // END COLLIDER    
`,H6t=`
  #ifdef USE_ATTRACTOR

      #ifdef USE_SPHERE_COLLIDER      
        // Convert collider size to radii (assuming uColliderSize is the diameter in each axis)
        vec3 radii = uColliderSize;
        // Adjust position relative to collider
        vec3 relPos = position - uColliderPos;
        // Apply rotation of the collider to the relative position
        relPos = applyQuaternionToVector(uColliderQuaternionInvert, relPos);            
        // Scale relative position by radii (for ellipsoid collision detection)
        vec3 scaledPos = relPos / radii;
        // Calculate ellipsoidal distance
        float distToSurface = length(scaledPos); // Distance in terms of ellipsoid
        float insideCheck = 1.0;

      #endif


      #ifdef USE_BOX_COLLIDER
        // Box dimensions
        vec3 boxHalfSize = uColliderSize / 2.0;
        // Convert world position to box's local space
        vec3 localPos = applyQuaternionToVector(uColliderQuaternionInvert, position - uColliderPos);      
        vec3 localDistance = abs(localPos) - boxHalfSize;
        float distToSurface = max(localDistance.x, max(localDistance.y, localDistance.z));
        float insideCheck = particleSize;
      #endif      
  
      // Apply vortex force inside the Helper
      #ifdef USE_FORCE_LOCAL_SPACE
        if (distToSurface <= insideCheck ) {    
            // Define parameters for the attractor field
            #ifdef USE_SPHERE_COLLIDER      
              float attractorStrength = (1.0 - distToSurface ) * uForceIntensity; // Adjust as needed
            #endif

            #ifdef USE_BOX_COLLIDER
              float attractorStrength = max((1.0 - insideCheck / distToSurface), 0.) * uForceIntensity; // Adjust as needed
              #endif

            float attractorDamping = uForceDamping;  // Adjust as needed (higher values will attenuate velocity more)
          
            // Use the same radii calculation code as for the collider
            vec3 attractorRadii = uColliderSize;
            // Adjust position relative to attractor center
            vec3 relPos = position - uColliderPos;
            // Apply rotation of the collider to the relative position
            relPos = applyQuaternionToVector(uColliderQuaternionInvert, relPos);            
            // Scale relative position by radii (for ellipsoid attraction)
            vec3 scaledPos = relPos / attractorRadii;

            // Calculate ellipsoidal distance as attractor radius
            float attractorRadius = length(scaledPos);
            // Calculate the distance from the attractor center
            vec3 relativePosition = position - uColliderPos;
            // Calculate the force vector towards the attractor center
            vec3 attractorForce = normalize(relativePosition) * attractorStrength;
            // Apply the attractor force to the particle
            velocity -= attractorForce;
            // Attenuate the particle's velocity
            velocity *= attractorDamping;
        }
      #else 
            // Calculate the distance from the attractor center
            vec3 relativePosition = position - uColliderPos;
            // Calculate the force vector towards the attractor center
            vec3 attractorForce = normalize(relativePosition) * uForceIntensity;
            // Apply the attractor force to the particle
            velocity -= attractorForce;
            // Attenuate the particle's velocity
            velocity *= uForceDamping;
      #endif    
  #endif      
`,U6t=`
  #ifdef USE_VORTEX
    // Box dimensions
    vec3 boxHalfSize = uColliderSize / 2.0;
    // Convert world position to box's local space
    vec3 localPos = applyQuaternionToVector(uColliderQuaternionInvert, position - uColliderPos);      
    vec3 localDistance = abs(localPos) - boxHalfSize;
    float distToSurface = max(localDistance.x, max(localDistance.y, localDistance.z));

    // Apply vortex force inside the box
    if (distToSurface <= particleSize) {
      float vortexStrength = uForceIntensity;
      vec3 localTopCenter = vec3(0.0, 0., 0.0);

      // Transform the local top center to the world space
      vec3 vortexCenter = uColliderPos + applyQuaternionToVector(uColliderQuaternion, localTopCenter);
      // Calculate the vector from particle to vortex center
      vec3 vortexVector = vortexCenter - position;

      // Calculate the rotation axis from the inverse of the collider's quaternion and the fixed up vector
      // Note: important to add a tiny z component to the up vector to avoid instability
      vec3 upVector = vec3(0.0, 1.0, 0.01);
      vec3 rotationAxis = cross(upVector, applyQuaternionToVector(uColliderQuaternion, vortexVector));
      rotationAxis = normalize(rotationAxis);

      // Add rotational component to velocity
      float rotationSpeed = length(vortexVector * vortexStrength * 3.0) ; 

      vec3 rotationVelocity = rotationAxis * rotationSpeed;
      // velocity += rotationVelocity * 0.005 ;
      velocity = rotationVelocity * 0.005 ;

      // Calculate vortex force
      // vec3 vortexForce = normalize(vortexVector) * uSpeed * .1 ;
      // Apply the vortex force to the particle
      vec3 originDirection = applyQuaternionToVector(uWorldQuaternion, directions);
      velocity += applyForce( originDirection * uSpeed * (1. - uForceDamping) , mass * .5);
    }
  #endif      
`,G6t=`
// uniform sampler2D uCurrentPosition; // Pass in the variable from GPGPU
// uniform sampler2D uCurrentVelocity; // Pass in the variable from GPGPU
// uniform sampler2D uCurrentEmissionRate; // Pass in the variable from GPGPU
uniform sampler2D uOriginalPosition;
uniform sampler2D uDirections;     
uniform vec3 uDirectionsAxis;
uniform vec4 uWorldQuaternion;
uniform vec3 uGravity;        
uniform float uNoiseStrength;     // Variation of the noise
uniform float uNoiseScale;        // Scale of the noise
uniform float uNoiseSeed;         // Seed of the noise
uniform float particleSize;
uniform float uSpeed;     // update speed of the particles
uniform float uRandomMassFactor;

// COLLIDER
uniform vec3 uColliderPos;                // Collider Position
uniform vec3 uColliderSize;               // Collider Dimension
uniform vec4 uColliderQuaternion;         // Collider Rotation
uniform vec4 uColliderQuaternionInvert;   // Collider Rotation
uniform float uBounce;                    // Bounce factor
uniform float uForceDamping;
uniform float uForceIntensity;


`+F6t+`
float rand(vec2 co){
    return fract(sin(dot(co, vec2(12.9898, 78.233))) * 43758.5453);
}
vec3 applyQuaternionToVector( vec4 q, vec3 v ){
    return v + 2.0 * cross( q.xyz, cross( q.xyz, v ) + q.w * v );
 } 
vec3 applyForce(vec3 force, float mass) {
  vec3 acceleration = force / mass;
  
  return acceleration;
}

vec4 conjugate(vec4 q) {
  return vec4(q.w, -q.x, -q.y, -q.z);
}

// Function to compute the normal of the ellipsoid at a given point
vec3 ellipsoidNormal(vec3 p, vec3 radii) {
  return normalize(p / (radii * radii));
}

float friction = .3;

void main() {
    vec2 vUv = gl_FragCoord.xy / resolution.xy;
    vec3 position = texture2D( uCurrentPosition, vUv ).xyz;
    vec3 originalPosition = texture2D( uOriginalPosition, vUv ).xyz;
    float timeLeft = texture2D( uCurrentPosition, vUv ).w;
    vec3 directions = texture2D( uDirections, vUv ).xyz;    
    vec3 velocity = texture2D( uCurrentVelocity, vUv ).xyz;
    float mass = rand(originalPosition.xy) * 0.5 + 0.5;
    float isSpawning = texture2D( uCurrentEmissionRate, vUv ).x;        // 1. = spawning, 0. = not spawning
    float isActive = texture2D( uCurrentEmissionRate, vUv ).y;          // 1. = active, 0. = not active
    float collisionFlag =texture2D( uCurrentVelocity, vUv ).w;          // Indicate collision

    // Randomness Mass
    mass = (1.0 - (uRandomMassFactor * mass));
    
    if (isActive == 1.0) {
      // **************************************************************
      // FORCES NOISES
      // **************************************************************
      #ifdef USE_CURL_NOISE
        if (uNoiseScale > 0.0 ) {
          velocity = curlNoise(position * uNoiseScale * .002, uNoiseSeed) * ( uNoiseStrength + 1.0) * .05 * uSpeed;
        }
        // Variation of the noise Over Time
        if (uNoiseStrength > 0.0 && uNoiseScale == 0.0 ) {
          velocity += curlNoise( position, uNoiseSeed)  * uNoiseStrength * 0.05 * uSpeed;
        }
      #endif
      // **************************************************************
      #ifdef USE_SIMPLEX_NOISE
        if (uNoiseScale > 0.0 ) {
          velocity = vec3(snoise(position * uNoiseScale * .001) * ( uNoiseStrength + 1.0) * .1);
          velocity *= uSpeed;
        }
        // Variation of the noise Over Time
        if (uNoiseStrength > 0.0 && uNoiseScale == 0.0) {
          velocity += vec3(snoise(position * uNoiseStrength * .001) * .05 * uSpeed);
        }
      #endif
      // ************************************************************** 
      #ifdef USE_FBM_NOISE
        if (uNoiseScale > 0.0 ) {
          velocity = fbm_vec3(position * uNoiseScale * .001, ( uNoiseStrength + 1.0), uNoiseSeed);
          velocity *= uSpeed;
        }
        // Variation of the noise Over Time
        if (uNoiseStrength > 0.0 && uNoiseScale == 0.0 ) {      
          velocity += fbm_vec3(position * uNoiseStrength * .001, ( uNoiseStrength + 1.0), uNoiseSeed) * .1 * uSpeed;
        }
      #endif

      // COLLIDER
      ${z6t}
      // ATTRACTION
      ${H6t}  
      // VORTEX
      ${U6t}
    } 
    // End isActive

    // SPAWN BIRTH 
    // **************************************************************
    // if (isSpawning == 1.)
    #ifdef USE_NORMALS
      velocity = mix(velocity, applyQuaternionToVector(uWorldQuaternion, directions) * uSpeed, isSpawning);
    #else
      velocity = mix(velocity, applyQuaternionToVector(uWorldQuaternion, uDirectionsAxis) * uSpeed, isSpawning);    
    #endif
    
    // if (collisionFlag == 0.0)
    velocity += applyForce(uGravity, mass * .5) * (1.0 - collisionFlag);

    gl_FragColor = vec4(velocity, collisionFlag);
}
`,Rye=`

  // Linear Fade In
  float linearFadeIn(float t) {
    return t;
  }


  // linear fade out
  float linearFadeOut(float t) {
    return 1.0 - t;
  }
  
  float linearInOut(float t) {
    return t < 0.5 ? t :  (1.0 - t);  
  }

    // lerp
    float lerp(float a, float b, float t) {
      return a + (b - a) * t;
    }

  // Ease In Out Quart
  float exponentialInOut(float t) {
    return t < 0.4 ? lerp(0.0, 1.0, t / 0.4) :
    t > 0.6 ? lerp(1.0, 0.0, (t - 0.6) / 0.4) :
    1.0;
   }

  // constant
  float constant(float t) {
    return 1.0;
  } 
`,j6t=`

float rand(vec3 co){
  return fract(sin(dot(co.xy ,vec2(12.9898,78.233))) * 43758.5453);
}

vec3 applyQuaternionToVector( vec4 q, vec3 v ){
  return v + 2.0 * cross( q.xyz, cross( q.xyz, v ) + q.w * v );
}

vec3 applyForce(vec3 force, float mass) {
  vec3 acceleration = force / mass;
    
  return acceleration;
}
`,W6t=`
vec3 rgb2xyz (in vec3 rgb) {
    float r = rgb.r;
	float g = rgb.g;
	float b = rgb.b;

	r = r > 0.04045 ? pow(((r + 0.055) / 1.055), 2.4) : (r / 12.92);
	g = g > 0.04045 ? pow(((g + 0.055) / 1.055), 2.4) : (g / 12.92);
	b = b > 0.04045 ? pow(((b + 0.055) / 1.055), 2.4) : (b / 12.92);

	float x = (r * 0.4124) + (g * 0.3576) + (b * 0.1805);
	float y = (r * 0.2126) + (g * 0.7152) + (b * 0.0722);
	float z = (r * 0.0193) + (g * 0.1192) + (b * 0.9505);
    
    vec3 xyz = vec3(
        (r * 0.4124) + (g * 0.3576) + (b * 0.1805) * 100.0,
        (r * 0.2126) + (g * 0.7152) + (b * 0.0722) * 100.0,
        (r * 0.0193) + (g * 0.1192) + (b * 0.9505) * 100.0
    );
    return(xyz);
}

vec3 xyz2lab (in vec3 xyz) {
	float x = xyz.x / 95.047;
	float y = xyz.y / 100.0;
	float z = xyz.z / 108.883;

	x = x > 0.008856 ? pow(x, 1.0 / 3.0) : (7.787 * x) + (16.0 / 116.0);
	y = y > 0.008856 ? pow(y, 1.0 / 3.0) : (7.787 * y) + (16.0 / 116.0);
	z = z > 0.008856 ? pow(z, 1.0 / 3.0) : (7.787 * z) + (16.0 / 116.0);

    vec3 lab = vec3((116.0 * y) - 16.0, 500.0 * (x - y), 200.0 * (y - z));
    return(lab);
}

vec3 rgb2lab(in vec3 rgb) {
    vec3 xyz = rgb2xyz(rgb);
    vec3 lab = xyz2lab(xyz);
    return(lab);
}

vec3 xyz2rgb (in vec3 xyz) {
	float x = xyz.x / 100.0;
	float y = xyz.y / 100.0;
	float z = xyz.z / 100.0;
	
    
	float r = (x *  3.2406) + (y * -1.5372) + (z * -0.4986);
	float g = (x * -0.9689) + (y *  1.8758) + (z *  0.0415);
	float b = (x *  0.0557) + (y * -0.2040) + (z *  1.0570);

	r = r > 0.0031308 ? ((1.055 * pow(r, 1.0 / 2.4)) - 0.055) : r * 12.92;
	g = g > 0.0031308 ? ((1.055 * pow(g, 1.0 / 2.4)) - 0.055) : g * 12.92;
	b = b > 0.0031308 ? ((1.055 * pow(b, 1.0 / 2.4)) - 0.055) : b * 12.92;

	r = min(max(0.0, r), 1.0);
	g = min(max(0.0, g), 1.0);
	b = min(max(0.0, b), 1.0);

	return(vec3(r, g, b));
}

vec3 lab2xyz (in vec3 lab) {
    float l = lab.x;
	float a = lab.y;
	float b = lab.z;

  	float y = (l + 16.0) / 116.0;
	float x = a / 500.0 + y;
	float z = y - b / 200.0;

	float y2 = pow(y, 3.0);
	float x2 = pow(x, 3.0);
	float z2 = pow(z, 3.0);

  	y = y2 > 0.008856 ? y2 : (y - 16.0 / 116.0) / 7.787;
	x = x2 > 0.008856 ? x2 : (x - 16.0 / 116.0) / 7.787;
	z = z2 > 0.008856 ? z2 : (z - 16.0 / 116.0) / 7.787;

	x *= 95.047;
	y *= 100.0;
	z *= 108.883;

	return(vec3(x, y, z));
}
vec3 lab2rgb (in vec3 lab) {
    vec3 xyz = lab2xyz(lab);
    vec3 rgb = xyz2rgb(xyz);
    return(rgb);
}

`,q6t=`
  uniform sampler2D uPosition;
  uniform float uSize;
  uniform float uSizeEnd;
  uniform vec3 uWorldOffset;
  uniform vec4 uWorldQuaternion;
  // Billboard Behavior - Currently at Zero, but we can change that
  uniform float uRotation;
  uniform float uRotationEnd;
  uniform vec2 center;

  // Randomness
  uniform float uRandScaleFactor;
  uniform float uRandRotationFactor;

  attribute vec2 ref;

  varying float v_LifeLeft;    // normalized lifetime 1 to 0
  varying vec2 vUv;
  varying vec2 vRef;

  ${j6t}
  ${Rye}
`,Y6t=({easeSize:e="linearFadeOut"})=>`
  vUv = uv;  
  vRef = ref;
  // Normalized LifeTime 1 to 0
  float lifeLeft = texture2D(uPosition, ref).w;
  v_LifeLeft = lifeLeft;
  // Position From DataTexture Simulation
  vec3 pos = texture2D(uPosition, ref).rgb - uWorldOffset;
  // Apply World Quaternion
  pos = applyQuaternionToVector(uWorldQuaternion, pos);  
            
  #ifdef  USE_SIZE_END
    // Scaled Over Time
    float t = 1. - lifeLeft;
    float currentSize = mix(uSize, uSizeEnd, t); // Linearly interpolate between uSize and uSizeEnd
    vec3 scaledPosition = position * vec3(currentSize);
  #else
    // Change Size Behavior over LifeTime
    float easeSize = ${e}(1. - lifeLeft);
    // Scaled Over Time
    vec3 scaledPosition = position * vec3(uSize * easeSize);
  #endif

  // Billboard Behavior
  vec2 scale;
  scale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );
  scale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );    
  // Randomness 
  float randRef = rand(ref);
  scale *= (1.0 - (uRandScaleFactor * randRef));
  // Rotation
  float randRotation =  2.0 * PI * ( uRandRotationFactor * randRef);
  float originalRotation = (1.0 - uRotation) * 2.0 * PI;
  float originalRotationEnd = (1.0 - uRotationEnd) * 2.0 * PI;
  // OverTime
  float finalRotation = mix(originalRotation + randRotation, originalRotationEnd + randRotation, lifeLeft);

  vec2 alignedPosition = ( scaledPosition.xy - ( center - vec2( 0.5 ) ) ) * scale;
  vec2 rotatedPosition;
  rotatedPosition.x = cos( finalRotation ) * alignedPosition.x - sin( finalRotation ) * alignedPosition.y;
  rotatedPosition.y = sin( finalRotation ) * alignedPosition.x + cos( finalRotation ) * alignedPosition.y;
  
  mat4 instanceMatrix = mat4(
    vec4(1.0, 0.0, 0.0, 0.0),
    vec4(0.0, 1.0, 0.0, 0.0),
    vec4(0.0, 0.0, 1.0, 0.0),
    vec4(pos.x, pos.y, pos.z, 1.0)
  );  

  mvPosition = modelViewMatrix * instanceMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );
  mvPosition.xy += rotatedPosition;
  gl_Position = projectionMatrix  * mvPosition;   
`,X6t=`
  uniform vec4 uColor;                // start color
  uniform vec4 uColor2;               // end color
  uniform sampler2D uTexture;         // texture
  varying float v_LifeLeft;   // normalized lifetime 1 to 0
  varying vec2 vUv;
  varying vec2 vRef;

  float random(vec2 co) {
    return fract(sin(dot(co.xy, vec2(12.9898, 78.233))) * 43758.5453);
  }
  `+Rye+`  
  ${W6t}

`,Z6t=({easeOpacity:e="linearFadeOut"})=>`  
  // if Particle is dead, hide it
  if (v_LifeLeft <= 0.005 ) {
    discard;
  }

  #ifdef USE_RANDOM_COLORING
    float randVal = random(vRef); // Generate a random value based on the reference
    vec4 color = mix(uColor, uColor2, randVal); // Interpolate between the two colors
  #else
    vec4 color = mix(uColor, uColor2, 1. - v_LifeLeft);
  #endif

  // Opacity over Life Time
  float finalAlpha = ${e}(1. - v_LifeLeft);  
  vec4 textureColor = texture2D(uTexture, vUv).rgba; 
  finalColor = textureColor.rgb * color.rgb;
  finalAlpha = color.a * textureColor.a * finalAlpha;
  
  gl_FragColor = vec4(finalColor, finalAlpha);     

`,Q6t=class extends ai{constructor(e,t){super(),this.needsJitter=!0,this.type="ParticleMaterial",this.easeOpacity="linearFadeIn",this.easeSize="linearFadeIn",this.useSizeEnd=!1,this.isColoringRandom=!1,this.init(e,t),this.context=t}reset(){}init(e,t){this.transparent=!0,this.depthTest=!0,this.depthWrite=!1,this.easeOpacity=e.ease,this.easeSize=e.easeSize,this.layers=[],Yn.startContext(Yn.globalContext),this.lightLayer=new yc(0,"",{...da.defaultData("light","phong"),visible:!1},new rH,{},t.shared),Yn.endContext(Yn.globalContext),this.build()}updateState(e){e.coloring!==void 0&&(this.isColoringRandom=e.coloring==="random"),e.color!==void 0&&(e.color instanceof Array?this.uniforms.uColor.value=e.color:this.uniforms.uColor.value=this.context.shared.color(e.color)),e.color2!==void 0&&(e.color2 instanceof Array?this.uniforms.uColor2.value=e.color2:this.uniforms.uColor2.value=this.context.shared.color(e.color2)),e.size!==void 0&&(this.uniforms.uSize.value=e.size[0],this.uniforms.uSizeEnd.value=e.size[1],e.size[0]!==e.size[1]?this.useSizeEnd=!0:this.useSizeEnd=!1),e.ease!==void 0&&(this.easeOpacity=e.ease,this.build()),e.easeSize!==void 0&&(this.easeSize=e.easeSize,this.build()),this.needsUpdate=!0}onBeforeCompile(e){this.build(),e.defines=this.defines,e.uniforms=this.uniforms,e.vertexShader=this.vertexShader,e.fragmentShader=this.fragmentShader}build(){let e=new I1e;return e.needsJitter=this.needsJitter,e.addFragmentParsCode(y_t),e.buildShader("vertex",this.fragment),e.buildShader("fragment",this.fragment),e.addFragmentFinalCode(x_t),this.isColoringRandom&&e.define("USE_RANDOM_COLORING"),this.useSizeEnd&&e.define("USE_SIZE_END"),e.addVertexParsCode(q6t),e.addFragmentParsCode(X6t),e.addVertexFinalCode(Y6t({easeSize:this.easeSize})),e.addFragmentFinalCode(Z6t({easeOpacity:this.easeOpacity})),this.vertexShader=e.getCode("vertex"),this.fragmentShader=e.getCode("fragment"),this.defines=e.defines,this.uniforms={...e.uniforms,...this.uniforms},this.extensions=e.extensions,this}get nodeMaterial(){return this}get fragment(){return this.lightLayer.node}getDefines(){return this.defines}nodeMaterialDispose(){this.layers.forEach(e=>e.dispose()),super.dispose()}},PD=class{constructor(e,t,r,i){this.type="SphereEmitterShape",this.targetMesh=void 0,this.size=e,this.type=r,this.textureSize=R6t(t);let n=1;this.targetMesh=(i==null?void 0:i.type)==="Mesh"&&i?i:this.getMesh(r,n);let{positions:a,dataTexture:o,dataTextureNormals:s}=this.createPositions(this.textureSize,this.targetMesh??this.getMesh(r,n));this.positionsTexture=o,this.positionsAttribute=a,this.directionsTexture=s}createPositions(e,t){let{positions:r,normals:i}=O6t(t,e*e),n=Cie(r,e),a=Cie(i,e);return{dataTexture:n,positions:r,dataTextureNormals:a}}getMesh(e,t){let r=null;switch(e){case"SphereEmitterShape":{r=new y1(t*.5,32,32);break}case"TorusEmitterShape":{r=new dme(t*.5,.3,15,40);break}case"ConeEmitterShape":{r=new cz(t,t,15);break}case"BoxEmitterShape":{r=new Ru(t,t,t);break}case"PlaneEmitterShape":{r=new Md(t,t),r.rotateX(-Math.PI/2);break}case"MeshEmitterShape":{r=new y1(t,32,32);break}default:{r=new y1(t,32,32);break}}return new nn(r,new Ed({color:16711680}))}applyToShader(e,t){this.size=new U().fromArray(t.size),e.uEmitterSize.value=this.size}dispose(){this.positionsTexture.dispose(),this.directionsTexture.dispose(),this.positionsAttribute=new Float32Array}};function Ng(e){let t={...e},r=l6.defaultData;t.forceFieldObjectId&&(t.colliderEntityId=t.forceFieldObjectId);let i={...r.shape,...t.shape},n={...r.renderMaterial,...t.renderMaterial};return{...r,...t,shape:i,renderMaterial:n}}var K6t=`
// uniform sampler2D uCurrentPosition; // Pass in the variable from GPGPU
// uniform sampler2D uCurrentVelocity; // Pass in the variable from GPGPU
// uniform sampler2D uCurrentEmissionRate; // Pass in the variable from GPGPU

uniform sampler2D uIndex; // Texture with corresponding index
uniform float uLastIndexEmitted; // Last emitted index
uniform float uParticlesToEmit; // Number of particles to emit on that frame
uniform float uTime;

void main() {
    vec2 vUv = gl_FragCoord.xy / resolution.xy;
    float particleIndex = texture(uIndex, vUv).x;
    float timeLeft = texture2D( uCurrentPosition, vUv ).w;
    float isActive = texture2D( uCurrentEmissionRate, vUv ).g;    // 1. = active, 0. = not active
    float timeStart = texture2D( uCurrentEmissionRate, vUv ).b;


    // ********** Detect Colision to Create a flag and use it in position **********
    // We are doing this here, so

    // ********** Emit Particles **********
    // X = isSpawning 0.0 or 1.0
    // Y = isActive 0.0 or 1.0
    // Check if the vertex index is between the first value and the last value
    // if (particleIndex >= uLastIndexEmitted && particleIndex < uLastIndexEmitted + uParticlesToEmit) {
    //     // Emit a particle by writing 1 to the red channel of the color output
    //     // r: 1. == emit the particle
    //     // g: 1. == particle is now active
    //     timeStart = uTime;
    //     gl_FragColor = vec4(1.0, 1.0, timeStart, 1.0);
    // } else {
    //     // The Particle is either already emitted or not in the range of the particles to emit
    //     // Do not emit a particle by writing 0 to the red channel of the color output        
    //     gl_FragColor = vec4(0.0, isActive, timeStart, 1.0);
    // }
    // Determine if the particle is within the emission range
    float emitLowerBound = step(uLastIndexEmitted, particleIndex);
    float emitUpperBound = step(particleIndex, uLastIndexEmitted + uParticlesToEmit - 1.0);
    float emitParticle = emitLowerBound * emitUpperBound; // 1.0 if in range, 0.0 otherwise

    // Set timeStart and color
    timeStart = mix(timeStart, uTime, emitParticle);
    gl_FragColor = vec4(emitParticle, mix(isActive, 1.0, emitParticle), timeStart, 1.0);


}
`,DD=10,J6t=class extends _i{constructor(e,t){super(),this.type="ParticleEmitter",this.debugMode=!1,this.worldSpace=!0,this.rootObject=null,this.gpuCompute=null,this.positionSimRT=null,this.velocitySimRT=null,this.emissionRateSimRT=null,this.emitterShape=void 0,this.isEmitting=!1,this.hasBeenReset=!1,this.emittedParticlesAmount=0,this.lastEmitTime=0,this.globalTime=0,this.targetFPS=60,this.previousRatio=1,this.lerpFactor=.4,this.particlesAmount=0,this.noiseStrength=0,this.noiseScale=0,this.isBillboardBased=!0,this.simFeaturesDefinition={USE_COLLIDER:!1,USE_ATTRACTOR:!1,USE_VORTEX:!1,USE_SPHERE_COLLIDER:!1,USE_BOX_COLLIDER:!1,USE_FORCE_LOCAL_SPACE:!1,USE_NORMALS:!1,USE_CURL_NOISE:!0,USE_SIMPLEX_NOISE:!1,USE_FBM_NOISE:!1},this.textureLoader=new zft,this.currentWorldPosition=new U,this.systemQuaternion=new Jt,this.worldGravity=new U(0,0,0),this.directionAxis=new U(0,0,0),this.colliderV3=new U(0,0,0),this.colliderQuaternion=new Jt(0,0,0,1),this.matrixAutoUpdate=!0,this.renderer=e,this.system=t,this.shared=t.context.shared;let r=t.data;this.material=new Q6t(r.renderMaterial,t.context),this.material.uniforms={uSize:{value:0},uSizeEnd:{value:0},uColor:{value:r.renderMaterial.color},uColor2:{value:r.renderMaterial.color2},uPosition:{value:new U(0,0,0)},uEmissionData:{value:new U(0,0,0)},uTexture:{value:this.defaultTexture},uWorldOffset:{value:new U(0,0,0)},uWorldQuaternion:{value:new er(0,0,0,1)},uRandScaleFactor:{value:r.randomScale??0},uRandRotationFactor:{value:r.randomRotation??0},uRotation:{value:r.renderMaterial.spriteRotation[0]??0},uRotationEnd:{value:r.renderMaterial.spriteRotation[1]??0}},this.setTexture(this.material.uniforms,r.renderMaterial.texture),this.init(r)}setTexture(e,t){let r=t.data;if(typeof t=="string"){let i=this.shared.image(t),n=new an(i.img);n.needsUpdate=!0,e.uTexture.value=n;return}if(typeof r!="string"){let i=new Image;i.onload=()=>{let o=new an(i);o.needsUpdate=!0,e.uTexture.value=o};let n=new Blob([r],{type:"image/*"}),a=URL.createObjectURL(n);i.src=a}}updateGeometryAttributes(e,t){var i;let r=k6t(t);!((i=this.emitterShape)!=null&&i.positionsAttribute)||e.geometry.setAttribute("ref",new Lw(r,2))}applyWorldSpace(){if(!this.system.started||!this.worldSpace||!this.positionSimRT||!this.velocitySimRT)return;let e=this.system;e.getWorldQuaternion(this.systemQuaternion),this.systemQuaternion.invert(),e.getWorldPosition(this.currentWorldPosition),this.material.uniforms.uWorldOffset.value=this.currentWorldPosition,this.material.uniforms.uWorldQuaternion.value.copy(this.systemQuaternion.normalize()),this.positionSimRT.material.uniforms.uWorldOffset.value=this.currentWorldPosition,this.systemQuaternion.invert(),this.positionSimRT.material.uniforms.uWorldQuaternion.value.copy(this.systemQuaternion.normalize()),this.velocitySimRT.material.uniforms.uWorldQuaternion.value.copy(this.systemQuaternion.normalize())}update(e,t){var o;if(!this.gpuCompute||!this.positionSimRT||!this.velocitySimRT||!this.emissionRateSimRT||this.hasBeenReset)return;if(this.checkIfAllParticlesAreDead()&&!this.hasBeenReset){this.reset();return}this.applyWorldSpace(),this.globalTime=e,this.positionSimRT.material.uniforms.uTime.value=e,this.emissionRateSimRT.material.uniforms.uTime.value=e;let r=1e3/t,i=this.targetFPS/r,n=this.previousRatio+(i-this.previousRatio)*this.lerpFactor;this.positionSimRT.material.uniforms.uFPSRatio.value=n,this.previousRatio=n;let a=this.isEmitting?this.GoEmitSomeParticles(e,this.system.data.birthRatePerSec):0;this.emissionRateSimRT.material.uniforms.uLastIndexEmitted.value=this.emittedParticlesAmount,this.emissionRateSimRT.material.uniforms.uParticlesToEmit.value=a,this.material.uniforms.uPosition.value=(o=this.gpuCompute.getCurrentRenderTarget(this.positionSimRT))==null?void 0:o.texture,this.system.colliderEntities.length>0&&this.renderColliders(),this.gpuCompute.compute()}renderColliders(){if(!this.velocitySimRT)return;let e=this.system.colliderEntities[0],t=this.simFeaturesDefinition.USE_COLLIDER||this.simFeaturesDefinition.USE_ATTRACTOR||this.simFeaturesDefinition.USE_VORTEX;if(e.destroyedInAction&&t&&this.init(Ng({...this.system.data,colliderEntityId:null})),!e||e.destroyedInAction)return;e.getWorldPosition(this.colliderV3),this.colliderV3.y===0&&(this.colliderV3.y=1e-4),this.velocitySimRT.material.uniforms.uColliderPos.value.copy(this.colliderV3);let r=e.data.size;this.colliderV3.fromArray(r),this.velocitySimRT.material.uniforms.uColliderSize.value.copy(this.simFeaturesDefinition.USE_SPHERE_COLLIDER?this.colliderV3.multiplyScalar(.5):this.colliderV3),e.getWorldQuaternion(this.colliderQuaternion),this.velocitySimRT.material.uniforms.uColliderQuaternion.value.copy(this.colliderQuaternion.normalize()),this.velocitySimRT.material.uniforms.uColliderQuaternionInvert.value.copy(this.colliderQuaternion.normalize().invert())}updateState(e){!this.velocitySimRT||!this.positionSimRT||(e.renderMaterial&&this.updateMaterialState(e.renderMaterial),this.updateParticleState(e))}updateVariableState(e,t){if(!this.velocitySimRT||!this.positionSimRT)return;t[2]==="size"&&this.material.updateState({size:[e,this.material.uniforms.uSizeEnd.value]}),t[2]==="sizeEnd"&&this.material.updateState({size:[this.material.uniforms.uSize.value,e]});let r=(i,n)=>{let a=[...this.system.data.shape.size];a[i]=n,this.updateParticleState({shape:{...this.system.data.shape,size:a}})};t[2]==="shape_size_0"&&r(0,e),t[2]==="shape_size_1"&&r(1,e),t[2]==="shape_size_2"&&r(2,e),t[2]==="speed"&&(this.velocitySimRT.material.uniforms.uSpeed.value=e/DD),t[2]==="gravity"&&this.worldGravity.set(0,e/100,0),t[2]==="noiseStrength"&&(this.noiseStrength=e,this.velocitySimRT.material.uniforms.uNoiseStrength.value=this.noiseStrength),t[2]==="noiseScale"&&(this.noiseScale=e,this.velocitySimRT.material.uniforms.uNoiseScale.value=this.noiseScale),t[2]==="direction_x"&&(this.directionAxis=this.getDirectionAxis([Number(e),this.system.data.direction[1],this.system.data.direction[2]])),t[2]==="direction_y"&&(this.directionAxis=this.getDirectionAxis([this.system.data.direction[0],Number(e),this.system.data.direction[2]])),t[2]==="direction_z"&&(this.directionAxis=this.getDirectionAxis([this.system.data.direction[0],this.system.data.direction[1],Number(e)]))}updateMaterialState(e){this.material.updateState({...e,size:e.size?[Number(this.shared.getVariable(e.size[0],[this.uuid,"particles","size"])),Number(this.shared.getVariable(e.size[1],[this.uuid,"particles","sizeEnd"]))]:[0,0]}),e.texture&&(this.setTexture(this.material.uniforms,e.texture),this.material.needsUpdate=!0)}updateParticleState(e){var t,r,i;if(!(!this.positionSimRT||!this.velocitySimRT)){if(this.shouldReInitGPUCompute(e)&&this.init(Ng(this.system.data)),e.life!==void 0&&(this.positionSimRT.material.uniforms.uMaxLifeTime.value=e.life),e.speed!==void 0&&(this.velocitySimRT.material.uniforms.uSpeed.value=Number(this.shared.getVariable(e.speed,[this.uuid,"particles","speed"]))/DD),e.collisionBounce!==void 0&&(this.velocitySimRT.material.uniforms.uBounce.value=e.collisionBounce),e.noiseStrength!==void 0&&(this.noiseStrength=Number(this.shared.getVariable(e.noiseStrength,[this.uuid,"particles","noiseStrength"])),this.velocitySimRT.material.uniforms.uNoiseStrength.value=this.noiseStrength),e.noiseScale!==void 0&&(this.noiseScale=Number(this.shared.getVariable(e.noiseScale,[this.uuid,"particles","noiseScale"])),this.velocitySimRT.material.uniforms.uNoiseScale.value=this.noiseScale),e.noiseSeed!==void 0&&(this.velocitySimRT.material.uniforms.uNoiseSeed.value=e.noiseSeed),e.randomMass!==void 0&&(this.velocitySimRT.material.uniforms.uRandomMassFactor.value=e.randomMass),((t=e.renderMaterial)==null?void 0:t.size)!==void 0){let n=this.shared.getVariable(e.renderMaterial.size[0],[this.uuid,"particles","size"]);this.velocitySimRT.material.uniforms.particleSize.value=Number(n)}if(((r=e.renderMaterial)==null?void 0:r.spriteRotation)!==void 0&&(this.material.uniforms.uRotation.value=e.renderMaterial.spriteRotation[0],this.material.uniforms.uRotationEnd.value=e.renderMaterial.spriteRotation[1]),e.shape!==void 0){let n=e.shape.size??this.system.data.shape.size,a=[Number(this.shared.getVariable(n[0],[this.uuid,"particles","shape_size_0"])),Number(this.shared.getVariable(n[1],[this.uuid,"particles","shape_size_1"])),Number(this.shared.getVariable(n[2],[this.uuid,"particles","shape_size_2"]))],o={...Ng(this.system.data).shape,size:a};(i=this.emitterShape)==null||i.applyToShader(this.positionSimRT.material.uniforms,o)}if(e.gravity!==void 0&&(this.worldGravity.set(0,Number(this.shared.getVariable(this.system.data.gravity,[this.uuid,"particles","gravity"]))/100,0),this.velocitySimRT.material.uniforms.uGravity={value:this.worldGravity}),e.direction!==void 0){let n=this.getDirectionFromVariable(e.direction);this.directionAxis=this.getDirectionAxis(n),this.velocitySimRT.material.uniforms.uDirectionsAxis.value=this.directionAxis}e.randomRotation!==void 0&&(this.material.uniforms.uRandRotationFactor.value=e.randomRotation),e.randomScale!==void 0&&(this.material.uniforms.uRandScaleFactor.value=e.randomScale)}}updateForceFieldParameters(e){!this.velocitySimRT||(e.forceIntensity!==void 0&&(this.velocitySimRT.material.uniforms.uForceIntensity.value=e.forceIntensity),e.forceDambing!==void 0&&(this.velocitySimRT.material.uniforms.uForceDamping.value=e.forceDambing))}getDirectionAxis(e){let t=[Number(e[0])*vt.DEG2RAD,Number(e[1])*vt.DEG2RAD,Number(e[2])*vt.DEG2RAD],r=new Qn(t[0],t[1],t[2],"XYZ");return this.directionAxis.set(0,1,0).applyEuler(r).normalize(),this.velocitySimRT&&(this.velocitySimRT.material.uniforms.uDirectionsAxis.value=this.directionAxis),this.directionAxis}shouldReInitGPUCompute(e){let{birthRatePerSec:t,rootObjectType:r,colliderEntityId:i,shape:n,emitTimeDuration:a,emitTimeCycle:o,life:s,directionMode:l,noiseType:u}=e;return t!==void 0||r!==void 0||i||i===null||o!==void 0||n!==void 0||s!==void 0||a!==void 0||l!==void 0||u!==void 0}init(e){this.dispose(),this.particlesAmount=this.getMaxParticlesAmount({birthRatePerSecond:e.birthRatePerSec,particleMaxLifeTime:e.life,loopDuration:e.emitTimeCycle==="infinity"?0:e.emitTimeDuration}),this.particlesAmount>1e5&&(console.warn("The maximum number of particles is limited to 100000."),this.particlesAmount=1e5),this.emitterShape=this.createShape(e.shape,this.particlesAmount);let t=setInterval(()=>{if(this.emitterShape)if(isNaN(this.emitterShape.positionsTexture.source.data.data[0])){this.init(e);return}else clearInterval(t)},100);if(!this.emitterShape)return;let r=new I6t(this.emitterShape.textureSize,this.emitterShape.textureSize,this.renderer),i=this.updateSimulationDefinition(e),n=r.addVariable("uCurrentPosition",i+V6t,this.emitterShape.positionsTexture),a=r.addVariable("uCurrentVelocity",i+G6t,this.emitterShape.directionsTexture),o=r.addVariable("uCurrentEmissionRate",K6t,N6t(this.emitterShape.textureSize));r.setVariableDependencies(n,[n,a,o]),r.setVariableDependencies(a,[n,a,o]),r.setVariableDependencies(o,[n,a,o]);let s=B6t({size:this.emitterShape.textureSize}),l={uOriginalPosition:{value:this.emitterShape.positionsTexture},uWorldOffset:{value:new U(0,0,0)},uWorldQuaternion:{value:new er(0,0,0,1)},uTime:{value:0},uFPSRatio:{value:1},uMaxLifeTime:{value:e.life},uEmitterSize:{value:new U(Number(this.shared.getVariable(e.shape.size[0],[this.uuid,"particles","shape_size_0"])),Number(this.shared.getVariable(e.shape.size[1],[this.uuid,"particles","shape_size_1"])),Number(this.shared.getVariable(e.shape.size[2],[this.uuid,"particles","shape_size_2"])))},particleSize:{value:0}};n.material.uniforms=l;let u=this.getDirectionFromVariable(e.direction);this.directionAxis=this.getDirectionAxis(u),this.worldGravity.set(0,Number(this.shared.getVariable(this.system.data.gravity,[this.uuid,"particles","gravity"]))/100,0),this.noiseStrength=Number(this.shared.getVariable(e.noiseStrength,[this.uuid,"particles","noiseStrength"])),this.noiseScale=Number(this.shared.getVariable(e.noiseScale,[this.uuid,"particles","noiseScale"]));let c=e.colliderEntityId&&this.system.getColliderData(e.colliderEntityId),h={uOriginalPosition:{value:this.emitterShape.positionsTexture},uDirections:{value:this.emitterShape.directionsTexture},uDirectionsAxis:{value:this.directionAxis},uWorldQuaternion:{value:new er(0,0,0,1)},uColliderPos:{value:new U(0,0,0)},uColliderSize:{value:new U(0,0,0)},uForceIntensity:{value:c?c.forceIntensity:0},uForceDamping:{value:c?c.forceDambing:0},uColliderQuaternion:{value:new er(0,0,0,1)},uColliderQuaternionInvert:{value:new er(0,0,0,1)},particleSize:{value:0},uGravity:{value:this.worldGravity},uNoiseStrength:{value:this.noiseStrength},uNoiseScale:{value:this.noiseScale},uNoiseSeed:{value:e.noiseSeed},uRandomMassFactor:{value:e.randomMass},uBounce:{value:e.collisionBounce},uSpeed:{value:Number(this.shared.getVariable(e.speed,[this.uuid,"particles","speed"]))/DD}};a.material.uniforms=h;let d={uIndex:{value:s},uTime:{value:0},uLastIndexEmitted:{value:0},uParticlesToEmit:{value:0}};o.material.uniforms=d;let f=[Number(this.shared.getVariable(e.shape.size[0],[this.uuid,"particles","shape_size_0"])),Number(this.shared.getVariable(e.shape.size[1],[this.uuid,"particles","shape_size_1"])),Number(this.shared.getVariable(e.shape.size[2],[this.uuid,"particles","shape_size_2"]))],p={...Ng(this.system.data).shape,size:f};this.emitterShape.applyToShader(n.material.uniforms,p),r.init(),this.gpuCompute=r,this.positionSimRT=n,this.velocitySimRT=a,this.emissionRateSimRT=o,this.rootObject=this.createPrimaryEmitter(this.emitterShape.textureSize),this.add(this.rootObject),this.material.needsUpdate=!0}getDirectionFromVariable(e){let t=Number(this.shared.getVariable(e[0],[this.uuid,"particles","direction_x"])),r=Number(this.shared.getVariable(e[1],[this.uuid,"particles","direction_y"])),i=Number(this.shared.getVariable(e[2],[this.uuid,"particles","direction_z"]));return[t,r,i]}updateSimulationDefinition(e){if(this.simFeaturesDefinition.USE_COLLIDER=!1,this.simFeaturesDefinition.USE_ATTRACTOR=!1,this.simFeaturesDefinition.USE_VORTEX=!1,this.simFeaturesDefinition.USE_SPHERE_COLLIDER=!1,this.simFeaturesDefinition.USE_BOX_COLLIDER=!1,this.simFeaturesDefinition.USE_FORCE_LOCAL_SPACE=!1,this.simFeaturesDefinition.USE_NORMALS=!1,this.simFeaturesDefinition.USE_CURL_NOISE=!1,this.simFeaturesDefinition.USE_SIMPLEX_NOISE=!1,this.simFeaturesDefinition.USE_FBM_NOISE=!1,e.colliderEntityId&&this.system.colliderEntities.length>0){let r=this.system.getColliderData(e.colliderEntityId);switch(r==null?void 0:r.forceType){case"attractor":this.simFeaturesDefinition.USE_ATTRACTOR=!0;break;case"collider":this.simFeaturesDefinition.USE_COLLIDER=!0;break;case"vortex":this.simFeaturesDefinition.USE_VORTEX=!0;break}let i=r==null?void 0:r.colliderType;i==="sphere"&&(this.simFeaturesDefinition.USE_SPHERE_COLLIDER=!0),i==="box"&&(this.simFeaturesDefinition.USE_BOX_COLLIDER=!0),(r==null?void 0:r.forceRange)==="helper"&&(this.simFeaturesDefinition.USE_FORCE_LOCAL_SPACE=!0)}e.directionMode==="normals"&&(this.simFeaturesDefinition.USE_NORMALS=!0),e.noiseType==="curl"&&(this.simFeaturesDefinition.USE_CURL_NOISE=!0),e.noiseType==="simplex"&&(this.simFeaturesDefinition.USE_SIMPLEX_NOISE=!0),e.noiseType==="fbm"&&(this.simFeaturesDefinition.USE_FBM_NOISE=!0);let t="";for(let[r,i]of Object.entries(this.simFeaturesDefinition))i&&(t+=`#define ${r}
`);return t}createShape(e,t){this.emitterShape&&this.emitterShape.dispose();let r=new U(Number(this.shared.getVariable(e.size[0],[this.uuid,"particles","shape_size_0"])),Number(this.shared.getVariable(e.size[1],[this.uuid,"particles","shape_size_1"])),Number(this.shared.getVariable(e.size[2],[this.uuid,"particles","shape_size_2"])));if(e.type==="MeshEmitterShape"){let i=null;return this.system.context.scene.traverseEntity(n=>{n.uuid===e.fromMeshId&&(i=n)}),i?new PD(r,t,e.type,i):new PD(r,t,"SphereEmitterShape")}else return new PD(r,t,e.type)}createPrimaryEmitter(e){let t,r=e*e;return t=new eft(new Md(1,1,1),this.material,r),this.updateGeometryAttributes(t,e),this.material.needsUpdate=!0,t.onBeforeRender=()=>{this.applyWorldSpace()},t}getMaxParticlesAmount({birthRatePerSecond:e,particleMaxLifeTime:t,loopDuration:r=0}){return Math.ceil(e*(t+r))}dispose(){var e,t,r;!this.gpuCompute||((t=(e=this.rootObject)==null?void 0:e.parent)==null||t.remove(this.rootObject),this.gpuCompute.dispose(),this.material.nodeMaterialDispose(),(r=this.emitterShape)==null||r.dispose())}GoEmitSomeParticles(e,t){let r=e-this.lastEmitTime,i=1/t;if(r>=i){let n=Math.max(1,Math.floor(r/i));return this.lastEmitTime=e,this.emittedParticlesAmount+n>this.particlesAmount&&(this.emittedParticlesAmount=0),this.emittedParticlesAmount+=n,n}return 0}checkIfAllParticlesAreDead(){return this.lastEmitTime+this.system.data.life+1<this.globalTime}reset(){this.hasBeenReset=!0,this.lastEmitTime=0,this.emittedParticlesAmount=0,this.gpuCompute&&this.init(Ng(this.system.data))}startEmitting(e){this.isEmitting=!0,this.hasBeenReset=!1,this.lastEmitTime=e}stopEmitting(){this.isEmitting=!1}},QA=class extends Jo{constructor(e,t,r){super(e,t),this.type="ParticleSystem",this.geometry=new It,this.actualTime=0,this.currentLoopTime=0,this.started=!1,this.stopped=!1,this.timeoutId=void 0,this.isFrozen=!1,this.isIdle=!0,this.emitter=null,this.colliderEntities=[],this.renderer=null,this.isPreWarm=!1,this._hasOnAfterRenderBeenCalled=!1,this.onAfterRender=i=>{this._hasOnAfterRenderBeenCalled||(this._hasOnAfterRenderBeenCalled=!0,this.init(i))},this.context=r,this.data={...t,...Ng(t)},this.geometry.setAttribute("position",new ht([],3)),this.material=new Ed({colorWrite:!1}),this.frustumCulled=!1}init(e){this.renderer=e,this.emitter=new J6t(e,this),this.add(this.emitter),this.updateParticleState(this.data)}update(e){if(!this.isReady||!this.started||this.isFrozen||this.isIdle)return;this.actualTime+=e,this.stopped||(this.currentLoopTime+=e);let t=this.data.emitTimeCycle==="one_time";if((this.data.emitTimeCycle==="loop"||t)&&this.currentLoopTime>this.data.emitTimeDuration*1e3&&(this.stopped||(this.stop(),t||this.start(this.data.emitTimeDelay*1e3))),this.emitter&&this.started){let r=this.actualTime/1e3;this.emitter.update(r,e)}this.scale.set(1,1,1),this.updateMatrix()}isReady(){return!!this.emitter}hasCollider(e){return this.colliderEntities.some(t=>t.identity===e)}getColliderData(e){let t=this.colliderEntities.find(r=>r.identity===e);return t?t.data:null}updateByPatchedOp(e,t,r){super.updateByPatchedOp(e,t,r),Ri(e.path,["renderMaterial"])&&this.updateParticleState({renderMaterial:{...this.data.renderMaterial,...ya.drop(e,1).props}}),Ri(e.path,["shape"])&&this.updateParticleState({shape:{...this.data.shape,...ya.drop(e,1).props}})}updateState(e,t){super.updateState(e,t),this.updateParticleState(e)}updateParticleState(e){if(this.emitter){if(e.colliderEntityId!==void 0&&e.colliderEntityId!==null){let t=this.context.scene.find(e.colliderEntityId);this.colliderEntities=t?[t]:[]}e.colliderEntityId===null&&(this.colliderEntities=[]),this.emitter.updateState(e),e.emitTimeCycle&&this.started&&this.start()}}updateFromColliderEntity(e){!this.emitter||(this.emitter.updateForceFieldParameters(e),this.stop(),this.start())}start(e=0){var t;if(this.currentLoopTime=0,e){this.timeoutId=window.setTimeout(()=>{this.start(0)},e);return}this.started=!0,this.stopped=!1,this.isFrozen=!1,(t=this.emitter)==null||t.startEmitting(this.actualTime/1e3)}froze(){this.isFrozen=!0}unFroze(){this.isFrozen=!1}stop(){var e;this.stopped=!0,this.currentLoopTime=0,(e=this.emitter)==null||e.stopEmitting(),clearTimeout(this.timeoutId)}reset(){var e;this.started=!1,this.stopped=!1,(e=this.emitter)==null||e.reset()}wakeUp(){this.isIdle=!1}sleep(){this.isIdle=!0,this.reset()}};function $6t(){try{let e=window.location.href;if(e.includes("reducesubdiv=")){let t=e.indexOf("reducesubdiv=")+13;return parseInt(e.slice(t,t+1))}}catch{}}var ID=$6t();function eCt(e,t,r){var n;ID!==void 0&&(((n=t==null?void 0:t.geometry)==null?void 0:n.subdivisions)??0)>ID&&(console.log("reducing subdivisions",t.name,t.geometry.subdivisions),t.geometry.subdivisions=ID);let i;return t.geometry.type==="TextGeometry"?new uH(e,t,r):t.geometry.type==="InputGeometry"?new gH(e,t,r):(t.geometry.type==="SubdivGeometry"?i=new Jw(e,t,r):t.geometry.type==="PathGeometry"?i=new mH(e,t,r):t.geometry.type==="VectorGeometry"?i=new P6t(e,t,r):t.geometry.type==="BooleanGeometry"?i=new Qv(e,t,r):t.geometry.type==="UIGeometry"?i=new mo(e,t,r):i=new xo(e,t,r),i)}function xH(e,t,r){return console.assert(t.type!==void 0),t.type==="Mesh"?eCt(e,t,r):t.type==="Empty"?new T1(e,t):t.type==="Particle"?new QA(e,t,r):t.type==="ParticleCollider"?new XA(e,t,r):t.type==="Splat"?new T1(e,t):t.type==="Bone"?new D6t(e,t):t.type==="Page"?new va(e,t,r):t.type==="PointLight"?new T6t(e,t,r):t.type==="SpotLight"?new Aye(e,t,r):t.type==="DirectionalLight"?new _ye(e,t,r):t.type==="Component"||t.type==="Instance"?new P1(e,t,r):Xv.is(t.type)?new wo(e,t):(console.error(t),new T1(e,t))}Xf.createEntity=xH;function tCt(e,t,r){let i=xH(e.identity,t,r),n=e.children,a=e.attachedPaths,o=e.parent,s=e.component,l=e.instances,u=e.overrideData,c=e.uuid,h=e.stateSelection;e.dispose();for(let d of Object.keys(e))delete e[d];Object.setPrototypeOf(e,Object.getPrototypeOf(i));for(let d of Object.keys(i))e[d]=i[d];e.children=[...e.children,...n],e.attachedPaths=a,e.parent=o,e.component=s,e.instances=l,e.uuid=c,e.overrideData=u,e.updateState(e.data,r),h&&e.changeSelectedState(h,r),e.resetBBoxNeedsUpdate()}Xf.changeEntityProptotype=tCt;Xf.Cloner=yu;function rCt(e,t,r,i){e.updateByOp(t,r,i,!1)}function Eie(e,t){let r=!1,i=t.getLayersOfType("transmission"),n=t.getLayersOfType("outline");return n.length>0&&(e.layers.set(8),i.length>0&&e.layers.enable(3),r=!0,lH(e),sH(e)),i.length===0&&n.length===0&&e.layers.set(0),e instanceof o2&&e.needsAO&&e.layers.enable(5),r}function Mie(e,t){if(!t.layers)return!1;let r=!1,i=t.getLayersOfType("transmission").filter(a=>a.data.visible),n=t.getLayersOfType("outline").filter(a=>a.data.visible);return i.length>0&&(e.layers.set(3),n.length>0&&e.layers.enable(8),r=!0),i.length===0&&n.length===0&&e.layers.set(0),e.needsAO&&e.layers.enable(5),r}function iCt(e){let t=!1;return e.traverseEntity(r=>{if(r instanceof o2)if(Array.isArray(r.material))for(let i=0;i<r.material.length;i++)Eie(r,r.material[i])&&(t=!0);else Eie(r,r.material)&&(t=!0)}),t}function nCt(e){let t=!1;return e.traverseEntity(r=>{if(r instanceof o2)if(Array.isArray(r.material))for(let i=0;i<r.material.length;i++)Mie(r,r.material[i])&&(t=!0);else Mie(r,r.material)&&(t=!0)}),t}var aCt=new wme,oCt=new Ke,sCt=new qy;function YO(e,t,r,i=!1){let n=e.cloner;if(n)for(let a of n.children){let o=oCt.copy(a.matrixWorld).invert(),s=sCt.copy(t.ray).applyMatrix4(o),l=e.matrixWorld;s.applyMatrix4(l);let u=aCt;u.set(s.origin,s.direction),u.near=t.near,u.far=t.far;let c=u.intersectObject(e,!1);c.length>0&&r.push({...c[0],object:i?a:e})}}var lCt=class{constructor(){this._constraints=new Map}setConstraint(e,t){t===null?this._constraints.delete(e):this._constraints.set(e,t)}removeDependencies(e){this._constraints.delete(e)}applyConstraints(e){let t=new Set;this._constraints.forEach((r,i)=>{let n=[i,r],a=r;for(;this._constraints.has(a);){if(a=this._constraints.get(a),n.includes(a)){console.warn(`circular dependency detected: ${n.join(" -> ")}`);break}t.has(a)||n.push(a)}for(let o=n.length-2;o>=0;o--)if(!t.has(n[o])){let s=e.find(n[o]);s?s.applyPathSnapping(e):console.warn(`missing entity ${n[o]}`),t.add(n[o])}})}findDependency(e,t){let r=e;for(;this._constraints.has(r);)if(r=this._constraints.get(r),r===t)return!0;return!1}},uCt="AGFzbQEAAAAADwhkeWxpbmsuMAEEAAAAAAETA2AAAGAIf39/f39/f38AYAABfwISAQNlbnYGbWVtb3J5AgMAgIAEAwQDAAECBzkDEV9fd2FzbV9jYWxsX2N0b3JzAAALc29ydEluZGV4ZXMAARNlbXNjcmlwdGVuX3Rsc19pbml0AAIK3gMDAwABC9IDAwF/BnwBfgJAIAdFDQAgAysDUCEMIAMrAzAhDSADKwMQIQ5BACEDRP///////+9/IQtEAAAAAAAAEAAhCgNAIAIgA0ECdGoCfyAOIAEgA0EMbGoiCCoCALuiIA0gCCoCBLuioCAMIAgqAgi7oqBEAAAAAAAAsECiIgmZRAAAAAAAAOBBYwRAIAmqDAELQYCAgIB4CzYCACAJIAsgCSALYxshCyAJIAogCSAKZBshCiADQQFqIgMgB0cNAAsgB0UNACAGuCAKIAuhoyEJQQAhAwNAAn8gCSACIANBAnRqIgEoAgC3IAuhoiIKmUQAAAAAAADgQWMEQCAKqgwBC0GAgICAeAshCCABIAg2AgAgBCAIQQJ0aiIBIAEoAgBBAWo2AgAgA0EBaiIDIAdHDQALCyAGQQJPBEAgBCgCACEIQQEhAwNAIAQgA0ECdGoiASABKAIAIAhqIgg2AgAgA0EBaiIDIAZHDQALCyAHQQFrIgGtIQ8DQCAEIAIgD6dBAnQiA2ooAgBBAnRqIgcgBygCAEEBayIHNgIAIAUgASAHa0ECdGogACADaigCADYCACAPUCEDIA9CAX0hDyADRQ0ACyAGBEAgBEEAIAZBAnT8CwALCwQAQQAL",Qf=class{};Q0(Qf,"DepthMapRange",65536),Q0(Qf,"MemoryPageSize",65536),Q0(Qf,"BytesPerFloat",4),Q0(Qf,"BytesPerInt",4);function cCt(e){let t,r,i,n,a,o,s,l,u,c,h,d,f,p,v,m;function g(T){let L=new Float64Array(c,o,16);for(let C=0;C<16;C++)L[C]=T[C];let P;if(i>1){t.exports.sortIndexes(n,a,u,o,s,l,d.DepthMapRange,i);let C=new Uint32Array(i);P=C.buffer,C.set(new Uint32Array(c,l,i))}else if(i===1){let C=new Uint32Array(i);C[0]=new Uint32Array(c,n,r)[0],P=C.buffer}else P=new ArrayBuffer(0);e.postMessage({sortDone:!0,indexesBuffer:P},[P])}function y(T,L,P){let C=new Float32Array(c,a,r*3);i=0;let D=new Uint32Array(c,n,r);for(let I=0;I<P.length-1;I++){let O=L[I],R=T[I].elements,H=O.filter(N=>N.enabled&&N.mode==="Include").map(N=>N.type==="Box"?w(N):M(N)),j=O.filter(N=>N.enabled&&N.mode==="Exclude").map(N=>N.type==="Box"?w(N):M(N));for(let N=P[I];N<P[I+1];N++){let k=f[N*3],G=f[N*3+1],Y=f[N*3+2];if((H.length===0||b(k,G,Y,H))&&(j.length===0||!b(k,G,Y,j))){let F=1/(R[3]*k+R[7]*G+R[11]*Y+R[15]);C[i*3]=(R[0]*k+R[4]*G+R[8]*Y+R[12])*F,C[i*3+1]=(R[1]*k+R[5]*G+R[9]*Y+R[13])*F,C[i*3+2]=(R[2]*k+R[6]*G+R[10]*Y+R[14])*F,D[i]=N,i++}}}}function x(T,L){let P=[],C=L.filter(O=>O.enabled&&O.mode==="Include").map(O=>O.type==="Box"?w(O):M(O)),D=L.filter(O=>O.enabled&&O.mode==="Exclude").map(O=>O.type==="Box"?w(O):M(O)),I=T.length;for(let O=0;O<I;O+=3){let R=T[O],H=T[O+1],j=T[O+2];(C.length===0||b(R,H,j,C))&&(D.length===0||!b(R,H,j,D))||P.push(O/3)}return P}function b(T,L,P,C,D){return C.some(I=>{let O=_(T,L,P,I.invRotationMatrix,I.cropCenter);return Array.isArray(I)?A(O.x,O.y,O.z,I):E(O.x,O.y,O.z,I)})}function _(T,L,P,C,D){let I=T-D[0],O=L-D[1],R=P-D[2],H=1/(C[3]*I+C[7]*O+C[11]*R+C[15]);return{x:(C[0]*I+C[4]*O+C[8]*R+C[12])*H+D[0],y:(C[1]*I+C[5]*O+C[9]*R+C[13])*H+D[1],z:(C[2]*I+C[6]*O+C[10]*R+C[14])*H+D[2]}}function w(T){let L=T.cropSize[0]/2,P=T.cropSize[1]/2,C=T.cropSize[2]/2,D=[T.cropCenter[0]-L,T.cropCenter[1]-P,T.cropCenter[2]-C,T.cropCenter[0]+L,T.cropCenter[1]+P,T.cropCenter[2]+C],I=S(T.cropRotation);return Object.assign(D,{invRotationMatrix:I,cropCenter:T.cropCenter})}function S(T){let L=[],P=T[0]*Math.PI/180,C=T[1]*Math.PI/180,D=T[2]*Math.PI/180,I=Math.cos(P),O=Math.sin(P),R=Math.cos(C),H=Math.sin(C),j=Math.cos(D),N=Math.sin(D),k=I*j,G=I*N,Y=O*j,F=O*N;return L[0]=R*j,L[1]=-R*N,L[2]=H,L[4]=G+Y*H,L[5]=k-F*H,L[6]=-O*R,L[8]=F-k*H,L[9]=Y+G*H,L[10]=I*R,L[12]=0,L[13]=0,L[14]=0,L[3]=0,L[7]=0,L[11]=0,L[15]=1,L}function A(T,L,P,C){return T>=C[0]&&T<=C[3]&&L>=C[1]&&L<=C[4]&&P>=C[2]&&P<=C[5]}function M(T){let L=2/T.cropSize[0],P=2/T.cropSize[1],C=2/T.cropSize[2],D=S(T.cropRotation);return{invRadiusX:L,invRadiusY:P,invRadiusZ:C,cropCenter:T.cropCenter,invRotationMatrix:D}}function E(T,L,P,C){let D=(T-C.cropCenter[0])*C.invRadiusX,I=(L-C.cropCenter[1])*C.invRadiusY,O=(P-C.cropCenter[2])*C.invRadiusZ;return D*D+I*I+O*O<=1}e.onmessage=T=>{if(T.data.getCroppedIndexes){let L=new Uint32Array(x(new Float32Array(T.data.positions),T.data.crops)).buffer;e.postMessage({outOfBoundsIndexes:L},[L])}else if(T.data.positions)h=T.data.positions,f=new Float32Array(h),v=T.data.meshMatrixWorlds,m=T.data.cropsArray,p=T.data.meshIndexIntervals,y(v,m,p),e.postMessage({sortSetupComplete:!0});else if(T.data.sort||T.data.newMatrixWorlds||T.data.newCropsArray)(T.data.newMatrixWorlds||T.data.newCropsArray)&&(m=T.data.newCropsArray||m,v=T.data.newMatrixWorlds||v,y(v,m,p)),g(T.data.sort.view,T.data.sort.cameraPosition);else if(T.data.init){d=T.data.init.Constants,r=T.data.init.splatCount;let L=d.BytesPerInt,P=d.BytesPerFloat*3,C=new Uint8Array(T.data.init.sorterWasmBytes),D=L+P,I=r*D,O=r*d.BytesPerInt*2+d.DepthMapRange*d.BytesPerInt*2,R=d.MemoryPageSize*32,H=I+O+R,j=Math.floor(H/d.MemoryPageSize)+1,N={module:{},env:{memory:new WebAssembly.Memory({initial:j*2,maximum:j*3,shared:!0})}};WebAssembly.compile(C).then(k=>WebAssembly.instantiate(k,N)).then(k=>{t=k,n=0,a=r*L,o=a+r*P,u=o+16*d.BytesPerFloat*2,s=u+r*d.BytesPerInt,l=s+d.DepthMapRange*d.BytesPerInt,c=N.env.memory.buffer,e.postMessage({sortSetupPhase1Complete:!0})})}}}function hCt(e){let t=new Worker(URL.createObjectURL(new Blob(["(",cCt.toString(),")(self)"],{type:"application/javascript"}))),r=atob(uCt),i=new Uint8Array(r.length);for(let n=0;n<r.length;n++)i[n]=r.charCodeAt(n);return t.postMessage({init:{sorterWasmBytes:i.buffer,splatCount:e,Constants:{BytesPerFloat:Qf.BytesPerFloat,BytesPerInt:Qf.BytesPerInt,DepthMapRange:Qf.DepthMapRange,MemoryPageSize:Qf.MemoryPageSize}}}),t}var LD=function(){let e=new Float32Array(1),t=new Int32Array(e.buffer);return function(r){return e[0]=r,t[0]}}(),dCt=function(e,t,r,i){return e+(t<<8)+(r<<16)+(i<<24)},q5=new me;function Tie(e){let t=!1;return e.scene.objects.traverse((r,i)=>{if(i.visible===!1)return!0;i.type==="Splat"&&(t=!0)}),t}var KA=class extends nn{constructor(e,t,r,i,n=!1,a=1,o,s){super(r,i),this.splatCount=t,this.meshIndexIntervals=o,this.meshMatrixWorlds=s,this.splatBuffers=e,this.geometry=r,this.material=i,this.splatDataTextures=null,this.halfPrecisionCovariancesOnGPU=n,this.devicePixelRatio=a,this.resetLocalSplatDataAndTexturesFromSplatBuffer()}static buildMesh(e,t,r=!1,i=1,n,a){let o=KA.buildGeomtery(t),s=KA.buildMaterial(n);return new KA(e,t,o,s,r,i,n,a)}static buildMaterial(e){let t=`
            precision highp float;
            #include <common>

            attribute uint splatIndex;

            uniform highp sampler2D covariancesTexture;
            uniform highp usampler2D centersColorsTexture;
            uniform vec2 focal;
            uniform vec2 viewport;
            uniform vec2 basisViewport;
            uniform vec2 covariancesTextureSize;
            uniform vec2 centersColorsTextureSize;
						uniform highp sampler2D meshMatrixWorldsTexture;
						uniform uint meshIndexIntervals[257];
						uniform float orthoZoom;

            varying vec4 vColor;
            varying vec2 vUv;

            varying vec2 vPosition;

            const vec4 encodeNorm4 = vec4(1.0 / 255.0, 1.0 / 255.0, 1.0 / 255.0, 1.0 / 255.0);
            const uvec4 mask4 = uvec4(uint(0x000000FF), uint(0x0000FF00), uint(0x00FF0000), uint(0xFF000000));
            const uvec4 shift4 = uvec4(0, 8, 16, 24);
            vec4 uintToRGBAVec (uint u) {
               uvec4 urgba = mask4 & u;
               urgba = urgba >> shift4;
               vec4 rgba = vec4(urgba) * encodeNorm4;
               return rgba;
            }

            vec2 getDataUV(in int stride, in int offset, in vec2 dimensions) {
                vec2 samplerUV = vec2(0.0, 0.0);
                float d = float(splatIndex * uint(stride) + uint(offset)) / dimensions.x;
                samplerUV.y = float(floor(d)) / dimensions.y;
                samplerUV.x = fract(d);
                return samplerUV;
            }

            void main () {
                uvec4 sampledCenterColor = texture(centersColorsTexture, getDataUV(1, 0, centersColorsTextureSize));
                vec3 splatCenter = uintBitsToFloat(uvec3(sampledCenterColor.gba));
                vColor = uintToRGBAVec(sampledCenterColor.r);

                vPosition = position.xy * 2.0;

								uint meshIndex;
								for (int i = 1; i < 257; i++) {
									if (splatIndex < meshIndexIntervals[i]) {
										meshIndex = uint(i - 1);
										break;
									}
								}

								float strideMulmeshIndex = float(4u*meshIndex);
								float meshMatrixWorldsTextureLength = float(256*4);

								mat4 modelMat = mat4(
									texture(meshMatrixWorldsTexture, vec2((strideMulmeshIndex+0.0)/meshMatrixWorldsTextureLength, 0)),
									texture(meshMatrixWorldsTexture, vec2((strideMulmeshIndex+1.0)/meshMatrixWorldsTextureLength, 0)),
									texture(meshMatrixWorldsTexture, vec2((strideMulmeshIndex+2.0)/meshMatrixWorldsTextureLength, 0)),
									texture(meshMatrixWorldsTexture, vec2((strideMulmeshIndex+3.0)/meshMatrixWorldsTextureLength, 0))
								);
								mat4 modelViewMat = viewMatrix * modelMat;
								vec4 viewCenter = modelViewMat * vec4(splatCenter, 1.0); 
                vec4 clipCenter = projectionMatrix * viewCenter;

                vec2 sampledCovarianceA = texture(covariancesTexture, getDataUV(3, 0, covariancesTextureSize)).rg;
                vec2 sampledCovarianceB = texture(covariancesTexture, getDataUV(3, 1, covariancesTextureSize)).rg;
                vec2 sampledCovarianceC = texture(covariancesTexture, getDataUV(3, 2, covariancesTextureSize)).rg;

                vec3 cov3D_M11_M12_M13 = vec3(sampledCovarianceA.rg, sampledCovarianceB.r);
                vec3 cov3D_M22_M23_M33 = vec3(sampledCovarianceB.g, sampledCovarianceC.rg);

                // Compute the 2D covariance matrix from the upper-right portion of the 3D covariance matrix
                mat3 Vrk = mat3(
                    cov3D_M11_M12_M13.x, cov3D_M11_M12_M13.y, cov3D_M11_M12_M13.z,
                    cov3D_M11_M12_M13.y, cov3D_M22_M23_M33.x, cov3D_M22_M23_M33.y,
                    cov3D_M11_M12_M13.z, cov3D_M22_M23_M33.y, cov3D_M22_M23_M33.z
                );
                float s = 1.0 / (viewCenter.z * viewCenter.z);

                mat3 W = transpose(mat3(modelViewMat));
                mat3 T = orthoZoom > 0.0 ? W : W * mat3(
									focal.x / viewCenter.z, 0., -(focal.x * viewCenter.x) * s,
									0., focal.y / viewCenter.z, -(focal.y * viewCenter.y) * s,
									0., 0., 0.
								);
                mat3 cov2Dm = transpose(T) * Vrk * T;
                cov2Dm[0][0] += 0.3;
                cov2Dm[1][1] += 0.3;

                // We are interested in the upper-left 2x2 portion of the projected 3D covariance matrix because
                // we only care about the X and Y values. We want the X-diagonal, cov2Dm[0][0],
                // the Y-diagonal, cov2Dm[1][1], and the correlation between the two cov2Dm[0][1]. We don't
                // need cov2Dm[1][0] because it is a symetric matrix.
                vec3 cov2Dv = vec3(cov2Dm[0][0], cov2Dm[0][1], cov2Dm[1][1]);

                vec3 ndcCenter = clipCenter.xyz / clipCenter.w;

                // We now need to solve for the eigen-values and eigen vectors of the 2D covariance matrix
                // so that we can determine the 2D basis for the splat. This is done using the method described
                // here: https://people.math.harvard.edu/~knill/teaching/math21b2004/exhibits/2dmatrices/index.html
                //
                // This is a different approach than in the original work at INRIA. In that work they compute the
                // max extents of the 2D covariance matrix in screen space to form an axis aligned bounding rectangle
                // which forms the geometry that is actually rasterized. They then use the inverse 2D covariance
                // matrix (called 'conic') to determine fragment opacity.
                float a = cov2Dv.x;
                float d = cov2Dv.z;
                float b = cov2Dv.y;
                float D = a * d - b * b;
                float trace = a + d;
                float traceOver2 = 0.5 * trace;
                float term2 = sqrt(trace * trace / 4.0 - D);
                float eigenValue1 = traceOver2 + term2;
								float eigenValue2 = max(traceOver2 - term2, 0.00); // prevent negative eigen value

                const float maxSplatSize = 1024.0;
                vec2 eigenVector1 = normalize(vec2(b, eigenValue1 - a));
                // since the eigen vectors are orthogonal, we derive the second one from the first
                vec2 eigenVector2 = vec2(eigenVector1.y, -eigenVector1.x);
                vec2 basisVector1 = eigenVector1 * min(sqrt(2.0 * eigenValue1), maxSplatSize);
                vec2 basisVector2 = eigenVector2 * min(sqrt(2.0 * eigenValue2), maxSplatSize);

                vec2 ndcOffset = vec2(vPosition.x * basisVector1 + vPosition.y * basisVector2) * basisViewport;

								if (orthoZoom > 0.0) {
									ndcOffset *= orthoZoom;
								}

                gl_Position = vec4(ndcCenter.xy + ndcOffset, ndcCenter.z, 1.0);
            }`,r=`
            precision highp float;
            #include <common>

            uniform vec3 debugColor;

            varying vec4 vColor;
            varying vec2 vUv;

            varying vec2 vPosition;
						layout(location = 1) out vec4 gVelocity; 

            void main () {
                // compute the negative squared distance from the center of the splat to the
                // current fragment in the splat's local space.
                float A = -dot(vPosition, vPosition);
                if (A < -4.0) discard;
                vec3 color = vColor.rgb;
                A = exp(A) * vColor.a;
                gl_FragColor = vec4(color.rgb, A);
								gVelocity = vec4(0.0); // so it is ignored by TAA
            }`,i={covariancesTexture:{type:"t",value:null},centersColorsTexture:{type:"t",value:null},meshIndexIntervals:{value:e},meshMatrixWorldsTexture:{type:"t",value:null},focal:{type:"v2",value:new me},viewport:{type:"v2",value:new me},basisViewport:{type:"v2",value:new me},debugColor:{type:"v3",value:new Vt},covariancesTextureSize:{type:"v2",value:new me(1024,1024)},centersColorsTextureSize:{type:"v2",value:new me(1024,1024)},orthoZoom:{type:"f",value:-1}};return new ai({uniforms:i,vertexShader:t,fragmentShader:r,transparent:!0,alphaTest:1,blending:_v,depthTest:!0,depthWrite:!1,side:go})}static buildGeomtery(e){let t=new It;t.setIndex([0,1,2,0,2,3]);let r=new Float32Array(4*3),i=new Zt(r,3);t.setAttribute("position",i),i.setXYZ(0,-1,-1,0),i.setXYZ(1,-1,1,0),i.setXYZ(2,1,1,0),i.setXYZ(3,1,-1,0),i.needsUpdate=!0;let n=new xme().copy(t),a=new Uint32Array(e),o=new Lw(a,1,!1);return o.setUsage(Fst),n.setAttribute("splatIndex",o),n.instanceCount=e,n}resetLocalSplatDataAndTexturesFromSplatBuffer(){this.updateLocalSplatDataFromSplatBuffer(),this.allocateAndStoreLocalSplatDataInTextures()}updateLocalSplatDataFromSplatBuffer(){this.splatBuffers.forEach(i=>i.buildPreComputedBuffers()),this.covariances=new Float32Array(this.splatCount*6),this.colors=new Uint8Array(this.splatCount*4),this.centers=new Float32Array(this.splatCount*3);let e=0,t=0,r=0;for(let i of this.splatBuffers){let n=i.nsplats;this.colors.subarray(e,e+n*4).set(i.colorsA),e+=n*4,this.centers.subarray(t,t+n*3).set(i.decoded.xyz.denormDequant().data),t+=n*3,this.covariances.subarray(r,r+n*6).set(new Float32Array(i.precomputedCovarianceBufferData)),r+=n*6}}allocateAndStoreLocalSplatDataInTextures(){let e=this.splatCount,t=new me(4096,1024);for(;t.x*t.y*2<e*6;)t.y*=2;let r=new me(4096,1024);for(;r.x*r.y*4<e*4;)r.y*=2;let i,n;if(this.halfPrecisionCovariancesOnGPU){n=new Uint16Array(t.x*t.y*2);for(let c=0;c<this.covariances.length;c++)n[c]=vpt.toHalfFloat(this.covariances[c]);i=new Tl(n,t.x,t.y,RS,Cd)}else n=new Float32Array(t.x*t.y*2),n.set(this.covariances),i=new Tl(n,t.x,t.y,RS,On);i.needsUpdate=!0,this.material.uniforms.covariancesTexture.value=i,this.material.uniforms.covariancesTextureSize.value.copy(t);let a=new Uint32Array(r.x*r.y*4);for(let c=0;c<e;c++){let h=c*4,d=c*3,f=c*4;a[f]=dCt(this.colors[h],this.colors[h+1],this.colors[h+2],this.colors[h+3]),a[f+1]=LD(this.centers[d]),a[f+2]=LD(this.centers[d+1]),a[f+3]=LD(this.centers[d+2])}let o=new Tl(a,r.x,r.y,Bve,ed);o.internalFormat="RGBA32UI",o.needsUpdate=!0,this.material.uniforms.centersColorsTexture.value=o,this.material.uniforms.centersColorsTextureSize.value.copy(r);let s=256*4,l=new Float32Array(256*16);for(let c=0;c<this.meshMatrixWorlds.length;c++)l.set(this.meshMatrixWorlds[c].elements,c*16);let u=new Tl(l,s,1,ga,On);u.needsUpdate=!0,this.material.uniforms.meshMatrixWorldsTexture.value=u,this.material.uniformsNeedUpdate=!0,this.splatDataTextures={covariances:{data:n,texture:i,size:t},centerColors:{data:a,texture:o,size:r},meshMatrixWorlds:{data:l,texture:u}}}updateIndexes(e){let t=this.geometry;t.attributes.splatIndex.set(e),t.attributes.splatIndex.needsUpdate=!0,t.instanceCount=e.length}updateUniforms(e,t,r,i){this.splatCount>0&&(q5.set(e.x*this.devicePixelRatio,e.y*this.devicePixelRatio),this.material.uniforms.viewport.value.copy(q5),this.material.uniforms.basisViewport.value.set(2/q5.x,2/q5.y),this.material.uniforms.focal.value.set(t,r),this.material.uniforms.orthoZoom.value=i,this.material.uniformsNeedUpdate=!0)}getSplatDataTextures(){return this.splatDataTextures}getSplatCount(){return this.splatCount}getCenters(){return this.centers}getColors(){return this.colors}getCovariances(){return this.covariances}dispose(){this.geometry.dispose(),this.material.dispose(),this.splatDataTextures&&(this.splatDataTextures.covariances.texture.dispose(),this.splatDataTextures.centerColors.texture.dispose(),this.splatDataTextures.meshMatrixWorlds.texture.dispose()),this.removeFromParent()}},Oye,fCt=new Promise(e=>{Oye=e}),Pie=!1,Y5;function pCt(){if(Pie)return;if(Y5)return Y5;async function e(){let t=await Te(()=>import("./ro4O0smp.js"),[],import.meta.url);Oye(t),Pie=!0}return Y5=e(),Y5}var Bye;fCt.then(e=>Bye=e);var vCt=class{constructor(e={}){Q0(this,"updateView",function(){let t=new Ke,r=[],i=new U(0,0,-1),n=new U(0,0,-1),a=new U,o=new U;return function(s=!1,l){let u=this.updateMatrixWorldsInWorkerIfNeeded(),c=this.cropsChanged();if(!s){n.set(0,0,-1).applyQuaternion(l.quaternion);let d=!1,f=!1;if(n.dot(i)<=.95&&(d=!0),o.copy(l.position).sub(a).length()>=1&&(f=!0),!d&&!f&&!u&&!c&&!this.needsInitialRender)return}this.needsInitialRender=!1,a.copy(l.position),i.copy(n),t.copy(l.matrixWorld).invert(),t.premultiply(this.dummyPerspectiveMatrix),r[0]=l.position.x,r[1]=l.position.y,r[2]=l.position.z;let h={sort:{view:t.elements,cameraPosition:r,splatRenderCount:this.splatRenderCount,splatSortCount:this.splatRenderCount},...u?{newMatrixWorlds:this.meshMatrixWorlds}:{},...c?{newCropsArray:this.cropsArray}:{}};this.sortRunning?this.queuedMessage=h:(this.queuedMessage=null,this.sortRunning=!0,this.sortWorker.postMessage(h))}}()),this.scene=e.scene,this.currentPage=null,this.devicePixelRatio=window.devicePixelRatio,this.sortWorker=null,this.splatRenderCount=0,this.splatSortCount=0,this.splatMesh=null,this.sortRunning=!1,this.meshMatrixWorlds=null,this.meshMatrixWorldsOld=null,this.cropsArray=null,this.splatEntries=null,this.queuedMessage=null,this.needsInitialRender=!0,this.dummyPerspectiveMatrix=new Ke().makePerspective(-1,1,-1,1,.1,1e3)}updateSplatMeshUniforms(e,t){let r=new me;this.splatMesh!==null&&this.splatMesh.getSplatCount()>0&&(e.getSize(r),this.cameraFocalLengthX=t.projectionMatrix.elements[0]*this.devicePixelRatio*r.x*.45,this.cameraFocalLengthY=t.projectionMatrix.elements[5]*this.devicePixelRatio*r.y*.45,this.splatMesh.updateUniforms(r,this.cameraFocalLengthX,this.cameraFocalLengthY,t.isPerspectiveCamera?-1:t.zoom*this.devicePixelRatio))}loadSplat(e={}){this.activePage=this.scene.activePage,e.position&&(e.position=new U().fromArray(e.position)),e.orientation&&(e.orientation=new Jt().fromArray(e.orientation)),e.halfPrecisionCovariances=!!e.halfPrecisionCovariances;let t=[];if(this.splatEntries=t,this.activePage.traverseVisibleEntity(a=>{a.data.type==="Splat"&&t.push(a)}),this.splatMesh&&this.splatMesh.dispose(),t.length===0)return this.splatMesh=null,!1;this.meshMatrixWorlds=t.map(a=>a.matrixWorld),this.meshMatrixWorldsOld=t.map(a=>a.matrixWorld.clone()),this.cropsArray=t.map(a=>a.data.crops.map(o=>o.data));let r=t.map(a=>new Bye.GSplineBuffer(new Uint8Array(a.data.buffer).buffer)),i=0,n=[0];for(let a of r)i+=a.getSplatCount(),n.push(i);return this.setupSplatMesh(r,i,e.position,e.orientation,e.halfPrecisionCovariances,this.devicePixelRatio,n,this.meshMatrixWorlds),this.setupSortWorker(i),!0}updateMatrixWorldsInWorkerIfNeeded(){let e=this.splatDataTextures.meshMatrixWorlds.data;for(let t=0;t<this.meshMatrixWorlds.length;t++)e.set(this.meshMatrixWorlds[t].elements,t*16);return this.splatDataTextures.meshMatrixWorlds.texture.needsUpdate=!0,this.meshMatrixWorlds.every((t,r)=>t.equals(this.meshMatrixWorldsOld[r]))?!1:(this.meshMatrixWorldsOld=this.meshMatrixWorlds.map(t=>t.clone()),!0)}cropsChanged(){let e=!1;return this.splatEntries.forEach((t,r)=>{var i;t.data.crops.forEach((n,a)=>{this.cropsArray[r][a]===void 0?(e=!0,this.cropsArray[r][a]=n.data):Object.entries(n.data).forEach(([o,s])=>{var l;Array.isArray(s)&&s.some((u,c)=>u!==this.cropsArray[r][a][o][c])?(e=!0,this.cropsArray[r][a][o]=s):s!==((l=this.cropsArray[r][a])==null?void 0:l[o])&&(e=!0,this.cropsArray[r][a][o]=s)})}),t.data.crops.length!==((i=this.cropsArray[r])==null?void 0:i.length)&&(this.cropsArray[r].length=t.data.crops.length,e=!0)}),e}setupSplatMesh(e,t,r=new U,i=new Jt,n=!1,a=1,o,s){this.splatMesh=KA.buildMesh(e,t,n,a,o,s),this.splatMesh.position.copy(r),this.splatMesh.quaternion.copy(i),this.splatMesh.frustumCulled=!1,this.splatMesh.renderOrder=99999,this.splatRenderCount=t,this.splatMesh.onBeforeRender=(l,u,c)=>this.update(l,c)}setupSortWorker(e){this.sortWorker=hCt(e),this.sortWorker.onmessage=t=>{var r;t.data.sortDone?(this.sortRunning=!1,(r=this.splatMesh)==null||r.updateIndexes(new Uint32Array(t.data.indexesBuffer)),this.lastSortTime=t.data.sortTime,this.queuedMessage&&(this.sortWorker.postMessage(this.queuedMessage),this.queuedMessage=null)):t.data.sortCanceled?this.sortRunning=!1:t.data.sortSetupPhase1Complete?this.sortWorker.postMessage({positions:this.splatMesh.getCenters().buffer,meshMatrixWorlds:this.splatMesh.meshMatrixWorlds,meshIndexIntervals:this.splatMesh.meshIndexIntervals,cropsArray:this.cropsArray}):t.data.sortSetupComplete&&(this.splatDataTextures=this.splatMesh.getSplatDataTextures(),this.scene.activePage.add(this.splatMesh),this.needsInitialRender=!0)}}update(e,t){this.splatMesh!==null&&(this.updateSplatMeshUniforms(e,t),this.updateView(!1,t))}getSplatMesh(){return this.splatMesh}},XO=new Ed;XO.wireframe=!0;var Die=new U,bH=class extends jc{constructor(e,t){super(),this.data=e,this.sharedAssets=t,this.enableHelpers=!1,this.wireframeState=!1,this.needsTransmissionDirty=!0,this.needsNormalDirty=!0,this._needsTransmission=!1,this._needsNormal=!1,this.geometryCacheChanged=!1,this.splatViewer=null,this.entityByUuid={},this.entityIdentityToEntity={},this.toExpandCloner=new Set,this.toUpdateCloner=new Set,this.pendingCommands=[],this.pathConstraints=new lCt,this.invisibleObjects=new T1("jflkdsafjasdifjaslk",{...eO.defaultData,visible:!1,name:"buildin invisible"}),this.needsRecomputeInstances=!1,this.init(e,t),this.matrixAutoUpdate=!1,this.errorPage=new va("fdasfa",{...uy.defaultData,name:""},{shared:t,scene:this})}markGeometryCacheDirty(){this.geometryCacheChanged=!0}markNeedsUpdateRendererDirty(){this.needsTransmissionDirty=!0,this.needsNormalDirty=!0}needsTransmission(){return this.needsTransmissionDirty&&(this._needsTransmission=nCt(this),this.needsTransmissionDirty=!1),this._needsTransmission}needsNormal(){return this.needsNormalDirty&&(this._needsNormal=iCt(this),this.needsNormalDirty=!1),this._needsNormal}registerInstanceAndSetUuid(e){let t=e.identity.join("-"),r=this.entityIdentityToEntity[t];r&&(e.uuid=r.uuid),this.entityIdentityToEntity[t]=e,this.entityByUuid[e.uuid]=e}markPenumbraSizeDirty(){for(let e of this.children)e instanceof va&&(e.penumbraSizeArrayCache=null)}findInstance(e){return this.entityIdentityToEntity[e.join("-")]}get bgColor(){return this.activePage.bgColor}get postprocessing(){return this.activePage.data.postprocessing}getWithSortKey(e){let t=this.find(e);if(t===void 0)return;let r=[],i=t;for(;i!==this;){let n=i;i=i.parent;let a=i.children.indexOf(n);r.splice(0,0,a)}return{entity:t,sortKey:r}}getAllSorted(e){let t=[];for(let r of e){let i=this.getWithSortKey(r.id);i!==void 0&&t.push(i)}return t.sort((r,i)=>lge(r.sortKey,i.sortKey)),t.map(r=>r.entity)}nonExistOrDescendantOf(e,t){let r=this.find(e);if(r===void 0)return!0;for(;r;){if(r.uuid===t)return!0;r=r.parent}return!1}find(e){if(this.activePage&&this.activePage.personalCamera.parent){if(e==="f23858d0-4a3b-4bd8-8173-66ed0af7f6fb-personalCamera")return this.activePage.personalCamera;if(e===i2)return this.activePage.personalCamera}if(e===""||e===void 0)return;let t=this.entityByUuid[e];return t===void 0?this.getObjectByProperty("uuid",e):t}find2D(e){for(let t of this.children)if(t instanceof va&&t.uiScene){let r=t.uiScene.find(e);if(r)return r}}findScene2DfromObject2D(e){for(let t of this.children)if(t instanceof va&&t.uiScene&&t.uiScene.find(e))return t.uiScene}find2DInUIObjects(e){let t;return this.traverseEntity(r=>{t===void 0&&r instanceof mo&&(t=r.uiCanvas.find(e))}),t}traverse2D(e){for(let t of this.children)t instanceof va&&t.uiScene&&t.uiScene.traverse(e)}debugEnsureEntity(e){let t=this.find(e);if(t){if(Array.isArray(t.identity)&&this.findInstance(t.identity)===void 0){console.error("not found instance");debugger}}else{console.error("not found");debugger}}addPendingExpandCloner(e){this.toExpandCloner.add(e)}addPendingUpdateCloner(e){this.toUpdateCloner.add(e)}markToExpandCloner(e){this.toExpandCloner.add(e),e.traverseEntityAncestors(t=>{this.toExpandCloner.add(t)})}doPendingExpandCloner(){this.toExpandCloner.forEach(e=>{e.expandCloner(this)}),this.toExpandCloner.clear()}doPendingUpdateCloner(){this.toUpdateCloner.forEach(e=>{var t;(t=e.cloner)==null||t.update()}),this.toUpdateCloner.clear()}doPendingUpdates(){this.doPendingExpandCloner(),this.doPendingUpdateCloner(),this.applyPendingCommands()}addPendingCommand(e){this.pendingCommands.push(e)}applyPendingCommands(){this.pendingCommands.forEach(e=>e()),this.pendingCommands.length=0}updateByLibOp(e,t){e.path.length===1&&e.path[0]==="components"&&e.type===1&&this.createChildrenObjects([{...e.data.asset,id:e.id}],this.invisibleObjects,t)}updateTreeByOp(e,t){var r;if(e.path.length===0&&e.type===7){let i=e.parent===null?this:this.find(e.parent);if(i===void 0)throw new Error("unexpected");let n=this.createObject(e.id,e.data,e.children,i,e.localIndex,t);n.updateVisible(this),n.resetBBoxNeedsUpdate(),hu(n)&&nd(n.parent)&&(n.invalidateUpstreamBooleanData(),n.parent.invalidateDownstreamBooleanData().recomputeBoolean()),this.markNeedsRecomputeInstancesForAncessors(i),this.markNeedsRecomputeInstancesForChildren(n),this.markToExpandCloner(n),this.markPenumbraSizeDirty(),n.updatePathSnapping()}else if(e.path.length===0&&e.type===8){let i=this.find(e.id);if(i===void 0)throw new Error("unexpected");this.markToExpandCloner(i),i.resetBBoxNeedsUpdate(),this.unregisterObject(i);let n=i.parent;this.markNeedsRecomputeInstancesForAncessors(n),this.markNeedsRecomputeInstancesForChildren(i),this.markPenumbraSizeDirty(),i.parent.remove(i),nd(i.parent)&&(i.parent.invalidateUpstreamBooleanData(),i.parent.invalidateDownstreamBooleanData().recomputeBoolean()),hu(i)&&(i.freeBooleanPointer(),n instanceof Qv&&n.invalidateDownstreamBooleanData().recomputeBoolean()),i instanceof mH&&i.detachShape(),this.disposeAndUnregisterEntityRecursivelyIfNotReregistered(i),this.pathConstraints.removeDependencies(i.uuid),i.updatePathSnapping()}else if(e.path.length===0&&e.type===9){let i=this.find(e.id);if(i===void 0)throw new Error("unexpected");this.markNeedsRecomputeInstancesForChildren(i);let n=i.parent;this.markNeedsRecomputeInstancesForAncessors(n),(r=i.cloner)==null||r.resetOnMove(),this.markToExpandCloner(i);let a=e.parent===null?this:this.find(e.parent);if(a===void 0)throw new Error("unexpected");a.add(i),this.markNeedsRecomputeInstancesForAncessors(a),this.markToExpandCloner(i),i.invalidateClonerTransform(i),i.updateVisible(this),i.resetBBoxNeedsUpdate(),this.markPenumbraSizeDirty();let o=e.localIndex;a.children.splice(o,0,a.children.pop()),hu(i)&&(i.invalidateUpstreamBooleanData(),nd(i.parent)?i.parent.invalidateDownstreamBooleanData().recomputeBoolean():n instanceof Qv&&n.invalidateDownstreamBooleanData().recomputeBoolean()),i.updatePathSnapping()}this.markNeedsUpdateRendererDirty(),this.markGeometryCacheDirty()}get playPage(){return this.find(this.data.publish.playPage)??this.errorPage}updatePage(e){var t;this.activePage&&this.activePage.onDeactive(),this.activePage=this.errorPage;for(let r of this.children)r instanceof va&&(r.visible=r.uuid===e,r.visible&&(this.activePage=r,this.activePage.onActive(this)));this.activePage!==((t=this.splatViewer)==null?void 0:t.activePage)&&this.reloadSplats()}updateEntityByOp(e,t,r,i){if(t.type===0){if(("overrides"in t.props||"component"in t.props)&&this.markNeedsRecomputeInstances(),"visible"in t.props&&this.markPenumbraSizeDirty(),t.path.includes("overrides")&&"states"in t.props){let{rest:a}=t.props;t={...t,props:a},this.markNeedsRecomputeInstances()}t.path[0]==="pathSnapping"&&t.props.pathId!==void 0&&this.pathConstraints.setConstraint(e,t.props.pathId)}let n=this.find(e);if(n)try{rCt(n,t,r,{scene:this,shared:i}),n instanceof xo&&n.updateGeometryGroupsIfNeeded()}catch(a){console.error(a)}}updateEntity2DByOp(e,t,r,i,n,a=[]){e.updateEntityByOp(t,r,i,n),this.traverseEntity(o=>{(o instanceof mo||o instanceof va)&&(a.includes(o.frameId??"")||o.frameId===t)&&o.updateEntity2DByOp(t,r,i,n)})}get activeCamera(){return this.activePage.activeCamera}switchActiveCamera(e){this.activePage.switchActiveCamera(e)}isInvisibleObjects(e){return e===this.invisibleObjects||e.hasAnccestor(this.invisibleObjects)}init(e,t){let r=Object.entries(t.data.lib.components).map((i,n)=>({data:i[1].asset.data,children:i[1].asset.children,id:i[0],fi:n}));this.invisibleObjects.updateState(this.invisibleObjects.data,{scene:this,shared:t}),this.add(this.invisibleObjects),this.createChildrenObjects(r,this.invisibleObjects,t),this.createChildrenObjects(e.objects,this,t),this.updatePage(e.publish.playPage),this.activePage.switchToPlayCamera(),this.expandInstances(t,!0),this.traverseEntity(i=>{i instanceof wo&&i.updateUp()}),this.doPendingExpandCloner(),this.applyPendingCommands()}markNeedsRecomputeInstances(){this.needsRecomputeInstances=!0}markNeedsRecomputeInstancesForChildren(e){e.traverseEntity(t=>{(t.data.type==="Component"||t.data.type==="Instance")&&this.markNeedsRecomputeInstances()})}markNeedsRecomputeInstancesForAncessors(e){Gr.is(e)&&(e.data.type==="Component"&&this.markNeedsRecomputeInstances(),e.traverseAncestors(t=>{Gr.is(t)&&t.data.type==="Component"&&this.markNeedsRecomputeInstances()}))}relativeizeInner(e,t,r,i,n,a,o){if(e){let s=i.find(e);s&&s!==i&&n.forInstancesRec(l=>{l.data=Uw(l.data,u=>{let c=u.events.data(o.id),h=l.goUp(a);if(h){let d=[...sge(h.identity),e].join("-"),f=this.entityIdentityToEntity[d];if(f){let p=f.uuid,v=Kn.zoom(c,t);v[r]=p}else console.warn("cannot find instance")}}).data})}}rewriteActions(e,t,r,i,n,a){e.forEach(o=>{o.data.type==="Transition"?this.relativeizeInner(o.data.object,[...t,o.id],"object",r,i,n,a):o.data.type==="Animation"?this.relativeizeInner(o.data.object,[...t,o.id],"object",r,i,n,a):o.data.type==="Conditional"&&(this.rewriteActions(o.data.ifActions,[...t,o.id,"ifActions"],r,i,n,a),this.rewriteActions(o.data.elseActions,[...t,o.id,"elseActions"],r,i,n,a))})}rewriteEventsBeforeGoToPlayMode(){this.traverseEntity(e=>{if(e instanceof P1&&typeof e.identity=="string"&&e.data.type==="Component")return e.traverseEntity((t,r)=>{t.data.events.forEach(i=>{if(i.data.type==="GameControl"){let n=!1;if(t.forInstancesRec(a=>{a.data=Uw(a.data,o=>{a.isInstanceRoot||(o.events.delete(i.id),n=!0)}).data}),n===!1)for(let a of m6.list)this.rewriteActions(i.data.gameActions[a],["gameActions",a],e,t,r,i)}else i.data.type==="Conditional"?(i.data.condition.type==="Distance"?(this.relativeizeInner(i.data.condition.fromObject,["condition"],"fromObject",e,t,r,i),this.relativeizeInner(i.data.condition.toObject,["condition"],"toObject",e,t,r,i)):i.data.condition.type==="State"?this.relativeizeInner(i.data.condition.object,["condition"],"object",e,t,r,i):i.data.condition.type==="Comparison"&&(i.data.condition.lOperand.type==="Property"&&this.relativeizeInner(i.data.condition.lOperand.value[0],["condition","lOperand","value"],0,e,t,r,i),i.data.condition.rOperand.type==="Property"&&this.relativeizeInner(i.data.condition.rOperand.value[0],["condition","rOperand","value"],0,e,t,r,i)),this.rewriteActions(i.data.inActions,["inActions"],e,t,r,i),this.rewriteActions(i.data.outActions,["outActions"],e,t,r,i)):"actions"in i.data&&this.rewriteActions(i.data.actions,["actions"],e,t,r,i)})}),!0})}expandInstances(e,t,r){let i=new Set;this.traverseEntity(n=>{if(n instanceof P1&&n.isInstanceRoot)return n.expandInstanceChildren({scene:this,shared:e,pendingDeletes:i}),t||n.resetBBoxNeedsUpdate(),r&&n.traverseEntity(a=>{r.addClip(a)}),!0});for(let n of i)this.disposeAndUnregisterEntityRecursivelyIfNotReregistered(n),yH(n)}recomputeInstances(e,t){this.needsRecomputeInstances&&(this.needsRecomputeInstances=!1,this.traverseEntity(r=>{r instanceof P1&&r.isInstanceRoot&&(r.component=void 0)}),this.expandInstances(e,!1,t))}disposeAndUnregisterEntityRecursivelyIfNotReregistered(e){e.traverseEntity(t=>{let r=typeof t.identity=="string"?t.identity:t.identity.join("-");this.entityIdentityToEntity[r]===t&&(delete this.entityByUuid[t.uuid],delete this.entityIdentityToEntity[r]),t.dispose()})}clearScene(){for(let e of this.children)Gr.is(e)&&e.disposeRecursively();this.children.length=0}resetAfterClear(e,t){this.init(e,t)}raycast(e){return this.raycast1(e,!1)}raycast1(e,t){let r=[],i=n=>{for(let a of n.children){let o=a.cloner;if(Gr.is(a)&&!a.raycastLock&&(a.visible||o!=null&&o.object.data.visible))if(t===!0&&a.isInstanceRoot){let s=[];if(e.intersectObject(a,!0,s),s.length){let l=s[0];l.object=a,l.point.applyMatrix4(l.object.matrixWorld);let u=a.matrixWorld.clone().invert();l.point.applyMatrix4(u),r.push(l)}}else(hu(a)||BO(a)&&this.enableHelpers&&a.objectHelper.visible)&&(e.intersectObject(a,!1,r),YO(a,e,r)),i(a)}};return i(this.activePage),r}raycastWithClones(e){let t=[],r=i=>{for(let n of i.children){let a=n.cloner;Gr.is(n)&&(n.visible||a!=null&&a.object.data.visible)&&((hu(n)||BO(n)&&this.enableHelpers&&n.objectHelper.visible)&&(e.intersectObject(n,!1,t),YO(n,e,t,!0)),r(n))}};return r(this),t}forEachEntity(e){for(let t of this.children)Gr.is(t)&&e(t)}traverseConcreteEntity(e){for(let t of this.children)Gr.is(t)&&t.isConcreteEntity&&t.traverseEntity(e)}traverseEntity(e){for(let t of this.children)Gr.is(t)&&t.traverseEntity(e)}updateFont(e,t){this.traverseEntity(r=>{if(r instanceof xo&&r.data.type==="Mesh"&&(r.data.geometry.type==="TextGeometry"||r.data.geometry.type==="InputGeometry")&&r.data.geometry.font===e){let i=r.geometry,n=r.data.geometry;i.updateFont(e,t).then(()=>{i.update(n);let a=r.invalidateDownstreamBooleanData();nd(a)&&a.recomputeBoolean()})}})}traverseObject(e){for(let t of this.children)Qw.is(t)&&t.traverseObject(e)}traverseVisibleEntity(e){for(let t of this.children)Gr.is(t)&&t.visible&&t.traverseVisibleEntity(e)}dispose(){this.clearScene()}createChildrenObjects(e,t,r){let i=0;for(let n of e)this.createObject(n.id,n.data,n.children,t,i,r),i+=1}registerObjectCreatedInLegacy(e){this.entityByUuid[e.uuid]=e}unregisterObject(e){delete this.entityByUuid[e.uuid];for(let t of e.children)this.unregisterObject(t)}createObject(e,t,r,i,n,a){var l;let o={scene:this,shared:a},s=xH(e,t,o);return s&&(this.entityByUuid[e]=s,i.add(s),i.children.splice(n,0,i.children.pop()),r.length>0&&(s.isInstanceRoot?console.error("instance should not have children!"):this.createChildrenObjects(r,s,a)),s.updateState(t,o),s instanceof xo&&s.updateGeometryGroupsIfNeeded(),s.updateVisible(this),s.cloner&&this.toExpandCloner.add(s),(l=t.pathSnapping)!=null&&l.pathId&&this.pathConstraints.setConstraint(e,t.pathSnapping.pathId)),t.type==="Empty"&&t.animations&&s.traverseEntity(u=>{let c=u.dataPatched;if(u instanceof xo&&c.bones&&c.boneInverses){let h=c.bones.map(p=>this.find(p)),d=c.boneInverses.map(p=>new Ke().fromArray(p)),f=new oz(h,d);u.bind(f,u.bindMatrix)}else u.matrixAutoUpdate=!0}),s}getCenter(e){let t=[];for(let i=0,n=e.length;i<n;++i){let{id:a,recursive:o}=e[i],s=this.find(a),l=o?s.recursiveBBox:s.singleBBox;t.push(...l.vertices)}let r=new Cn;return r.setFromPoints(t),r.getCenter(Die),Die}copyMatrixWorld(e,t){if(e===null){t.identity();return}let r=this.find(e);r?t.copy(r.matrixWorld):t.identity()}copyParentMatrixWorld(e,t){var i;if(e===null){t.identity();return}let r=(i=this.find(e))==null?void 0:i.parent;r?t.copy(r.matrixWorld):t.identity()}traverseMaterial(e){this.traverseEntity(t=>{if(t instanceof Jo)if(Array.isArray(t.material))for(let r=0;r<t.material.length;r++)t.material[r]instanceof wp&&e(t.material[r]);else t.material instanceof wp&&e(t.material)})}updateViewPlaneSize(e,t,r=!1){this.traverseConcreteEntity(i=>{i instanceof wo&&i.setViewplaneSize(e,t,r)})}initializeSplatViewer(){this.splatViewer=new vCt({scene:this}),this.reloadSplats()}reloadSplats(){var e;(e=this.splatViewer)==null||e.loadSplat()}},JA=(e,t)=>{let r=t.x-e.x,i=t.y-e.y;return Math.sqrt(r*r+i*i)},mCt=(e,t)=>{let r=t.x-e.x,i=t.y-e.y;return yCt(Math.atan2(i,r))},gCt=(e,t,r)=>{let i={x:0,y:0};return r=ZO(r),i.x=e.x-t*Math.cos(r),i.y=e.y-t*Math.sin(r),i},ZO=e=>e*(Math.PI/180),yCt=e=>e*(180/Math.PI),xCt=e=>isNaN(e.buttons)?e.pressure!==0:e.buttons!==0,kD=new Map,Iie=e=>{kD.has(e)&&clearTimeout(kD.get(e)),kD.set(e,setTimeout(e,100))},k6=(e,t,r)=>{let i=t.split(/[ ,]+/g),n;for(let a=0;a<i.length;a+=1)n=i[a],e.addEventListener?e.addEventListener(n,r,!1):e.attachEvent&&e.attachEvent(n,r)},Lie=(e,t,r)=>{let i=t.split(/[ ,]+/g),n;for(let a=0;a<i.length;a+=1)n=i[a],e.removeEventListener?e.removeEventListener(n,r):e.detachEvent&&e.detachEvent(n,r)},Nye=e=>(e.preventDefault(),e.type.match(/^touch/)?e.changedTouches:e),kie=()=>{if(typeof window>"u")return;let e=window.pageXOffset!==void 0?window.pageXOffset:(document.documentElement||document.body.parentNode||document.body).scrollLeft,t=window.pageYOffset!==void 0?window.pageYOffset:(document.documentElement||document.body.parentNode||document.body).scrollTop;return{x:e,y:t}},QO=(e,t)=>{t.top||t.right||t.bottom||t.left?(e.style.top=t.top,e.style.right=t.right,e.style.bottom=t.bottom,e.style.left=t.left):(e.style.left=t.x+"px",e.style.top=t.y+"px")},wH=(e,t,r)=>{let i=Vye(e);for(let n in i)if(i.hasOwnProperty(n))if(typeof t=="string")i[n]=t+" "+r;else{let a="";for(let o=0,s=t.length;o<s;o+=1)a+=t[o]+" "+r+", ";i[n]=a.slice(0,-2)}return i},bCt=(e,t)=>{let r=Vye(e);for(let i in r)r.hasOwnProperty(i)&&(r[i]=t);return r},Vye=e=>{let t={};return t[e]="",["webkit","Moz","o"].forEach(function(r){t[r+e.charAt(0).toUpperCase()+e.slice(1)]=""}),t},RD=(e,t)=>{for(let r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);return e},wCt=(e,t)=>{let r={};for(let i in e)e.hasOwnProperty(i)&&t.hasOwnProperty(i)?r[i]=t[i]:e.hasOwnProperty(i)&&(r[i]=e[i]);return r},KO=(e,t)=>{if(e.length)for(let r=0,i=e.length;r<i;r+=1)t(e[r]);else t(e)},_Ct=(e,t,r)=>({x:Math.min(Math.max(e.x,t.x-r),t.x+r),y:Math.min(Math.max(e.y,t.y-r),t.y+r)});typeof window<"u"&&(Fye="ontouchstart"in window,zye=!!window.PointerEvent,Hye=!!window.MSPointerEvent);var Fye,zye,Hye,bx={touch:{start:"touchstart",move:"touchmove",end:"touchend, touchcancel"},mouse:{start:"mousedown",move:"mousemove",end:"mouseup"},pointer:{start:"pointerdown",move:"pointermove",end:"pointerup, pointercancel"},MSPointer:{start:"MSPointerDown",move:"MSPointerMove",end:"MSPointerUp"}},$g,$w={};zye?$g=bx.pointer:Hye?$g=bx.MSPointer:Fye?($g=bx.touch,$w=bx.mouse):$g=bx.mouse;function vm(){}vm.prototype.on=function(e,t){var r=this,i=e.split(/[ ,]+/g),n;r._handlers_=r._handlers_||{};for(var a=0;a<i.length;a+=1)n=i[a],r._handlers_[n]=r._handlers_[n]||[],r._handlers_[n].push(t);return r};vm.prototype.off=function(e,t){var r=this;return r._handlers_=r._handlers_||{},e===void 0?r._handlers_={}:t===void 0?r._handlers_[e]=null:r._handlers_[e]&&r._handlers_[e].indexOf(t)>=0&&r._handlers_[e].splice(r._handlers_[e].indexOf(t),1),r};vm.prototype.trigger=function(e,t){var r=this,i=e.split(/[ ,]+/g),n;r._handlers_=r._handlers_||{};for(var a=0;a<i.length;a+=1)n=i[a],r._handlers_[n]&&r._handlers_[n].length&&r._handlers_[n].forEach(function(o){o.call(r,{type:n,target:r},t)})};vm.prototype.config=function(e){var t=this;t.options=t.defaults||{},e&&(t.options=wCt(t.options,e))};vm.prototype.bindEvt=function(e,t){var r=this;return r._domHandlers_=r._domHandlers_||{},r._domHandlers_[t]=function(){typeof r["on"+t]=="function"?r["on"+t].apply(r,arguments):console.warn('[WARNING] : Missing "on'+t+'" handler.')},k6(e,$g[t],r._domHandlers_[t]),$w[t]&&k6(e,$w[t],r._domHandlers_[t]),r};vm.prototype.unbindEvt=function(e,t){var r=this;return r._domHandlers_=r._domHandlers_||{},Lie(e,$g[t],r._domHandlers_[t]),$w[t]&&Lie(e,$w[t],r._domHandlers_[t]),delete r._domHandlers_[t],this};var _H=vm;function sa(e,t){return this.identifier=t.identifier,this.position=t.position,this.frontPosition=t.frontPosition,this.collection=e,this.defaults={size:100,threshold:.1,color:"white",fadeTime:250,dataOnly:!1,restJoystick:!0,restOpacity:1,mode:"dynamic",zone:document.body,lockX:!1,lockY:!1,shape:"circle"},this.config(t),this.options.mode==="dynamic"&&(this.options.restOpacity=0),this.id=sa.id,sa.id+=1,this.buildEl().stylize(),this.instance={el:this.ui.el,on:this.on.bind(this),off:this.off.bind(this),show:this.show.bind(this),hide:this.hide.bind(this),add:this.addToDom.bind(this),remove:this.removeFromDom.bind(this),destroy:this.destroy.bind(this),setPosition:this.setPosition.bind(this),resetDirection:this.resetDirection.bind(this),computeDirection:this.computeDirection.bind(this),trigger:this.trigger.bind(this),position:this.position,frontPosition:this.frontPosition,ui:this.ui,identifier:this.identifier,id:this.id,options:this.options},this.instance}sa.prototype=new _H;sa.constructor=sa;sa.id=0;sa.prototype.buildEl=function(e){return this.ui={},this.options.dataOnly?this:(this.ui.el=document.createElement("div"),this.ui.back=document.createElement("div"),this.ui.front=document.createElement("div"),this.ui.el.className="nipple collection_"+this.collection.id,this.ui.back.className="back",this.ui.front.className="front",this.ui.el.setAttribute("id","nipple_"+this.collection.id+"_"+this.id),this.ui.el.appendChild(this.ui.back),this.ui.el.appendChild(this.ui.front),this)};sa.prototype.stylize=function(){if(this.options.dataOnly)return this;var e=this.options.fadeTime+"ms",t=bCt("borderRadius","50%"),r=wH("transition","opacity",e),i={};return i.el={position:"absolute",opacity:this.options.restOpacity,display:"block",zIndex:999},i.back={position:"absolute",display:"block",width:this.options.size+"px",height:this.options.size+"px",marginLeft:-this.options.size/2+"px",marginTop:-this.options.size/2+"px",background:"rgba(255, 255, 255, .4)",border:"solid 2px rgba(0, 0, 0, .1)"},i.front={width:this.options.size/2+"px",height:this.options.size/2+"px",position:"absolute",display:"block",marginLeft:-this.options.size/4+"px",marginTop:-this.options.size/4+"px",background:"rgba(255, 255, 255, .8)",border:"solid 2px rgba(0, 0, 0, .1)"},RD(i.el,r),this.options.shape==="circle"&&RD(i.back,t),RD(i.front,t),this.applyStyles(i),this};sa.prototype.applyStyles=function(e){for(var t in this.ui)if(this.ui.hasOwnProperty(t))for(var r in e[t])this.ui[t].style[r]=e[t][r];return this};sa.prototype.addToDom=function(){return this.options.dataOnly||document.body.contains(this.ui.el)?this:(this.options.zone.appendChild(this.ui.el),this)};sa.prototype.removeFromDom=function(){return this.options.dataOnly||!document.body.contains(this.ui.el)?this:(this.options.zone.removeChild(this.ui.el),this)};sa.prototype.destroy=function(){clearTimeout(this.removeTimeout),clearTimeout(this.showTimeout),clearTimeout(this.restTimeout),this.trigger("destroyed",this.instance),this.removeFromDom(),this.off()};sa.prototype.show=function(e){var t=this;return t.options.dataOnly||(clearTimeout(t.removeTimeout),clearTimeout(t.showTimeout),clearTimeout(t.restTimeout),t.addToDom(),t.restCallback(),setTimeout(function(){t.ui.el.style.opacity=1},0),t.showTimeout=setTimeout(function(){t.trigger("shown",t.instance),typeof e=="function"&&e.call(this)},t.options.fadeTime)),t};sa.prototype.hide=function(e){var t=this;if(t.options.dataOnly)return t;if(t.ui.el.style.opacity=t.options.restOpacity,clearTimeout(t.removeTimeout),clearTimeout(t.showTimeout),clearTimeout(t.restTimeout),t.removeTimeout=setTimeout(function(){var r=t.options.mode==="dynamic"?"none":"block";t.ui.el.style.display=r,typeof e=="function"&&e.call(t),t.trigger("hidden",t.instance)},t.options.fadeTime),t.options.restJoystick){let r=t.options.restJoystick,i={};i.x=r===!0||r.x!==!1?0:t.instance.frontPosition.x,i.y=r===!0||r.y!==!1?0:t.instance.frontPosition.y,t.setPosition(e,i)}return t};sa.prototype.setPosition=function(e,t){var r=this;r.frontPosition={x:t.x,y:t.y};var i=r.options.fadeTime+"ms",n={};n.front=wH("transition",["top","left"],i);var a={front:{}};a.front={left:r.frontPosition.x+"px",top:r.frontPosition.y+"px"},r.applyStyles(n),r.applyStyles(a),r.restTimeout=setTimeout(function(){typeof e=="function"&&e.call(r),r.restCallback()},r.options.fadeTime)};sa.prototype.restCallback=function(){var e=this,t={};t.front=wH("transition","none",""),e.applyStyles(t),e.trigger("rested",e.instance)};sa.prototype.resetDirection=function(){this.direction={x:!1,y:!1,angle:!1}};sa.prototype.computeDirection=function(e){var t=e.angle.radian,r=Math.PI/4,i=Math.PI/2,n,a,o;if(t>r&&t<r*3&&!e.lockX?n="up":t>-r&&t<=r&&!e.lockY?n="left":t>-r*3&&t<=-r&&!e.lockX?n="down":e.lockY||(n="right"),e.lockY||(t>-i&&t<i?a="left":a="right"),e.lockX||(t>0?o="up":o="down"),e.force>this.options.threshold){var s={},l;for(l in this.direction)this.direction.hasOwnProperty(l)&&(s[l]=this.direction[l]);var u={};this.direction={x:a,y:o,angle:n},e.direction=this.direction;for(l in s)s[l]===this.direction[l]&&(u[l]=!0);if(u.x&&u.y&&u.angle)return e;(!u.x||!u.y)&&this.trigger("plain",e),u.x||this.trigger("plain:"+a,e),u.y||this.trigger("plain:"+o,e),u.angle||this.trigger("dir dir:"+n,e)}else this.resetDirection();return e};var ACt=sa;function En(e,t){var r=this;r.nipples=[],r.idles=[],r.actives=[],r.ids=[],r.pressureIntervals={},r.manager=e,r.id=En.id,En.id+=1,r.defaults={zone:document.body,multitouch:!1,maxNumberOfNipples:10,mode:"dynamic",position:{top:0,left:0},catchDistance:200,size:100,threshold:.1,color:"white",fadeTime:250,dataOnly:!1,restJoystick:!0,restOpacity:1,lockX:!1,lockY:!1,shape:"circle",dynamicPage:!1,follow:!1},r.config(t),(r.options.mode==="static"||r.options.mode==="semi")&&(r.options.multitouch=!1),r.options.multitouch||(r.options.maxNumberOfNipples=1);let i=getComputedStyle(r.options.zone.parentElement);return i&&i.display==="flex"&&(r.parentIsFlex=!0),r.updateBox(),r.prepareNipples(),r.bindings(),r.begin(),r.nipples}En.prototype=new _H;En.constructor=En;En.id=0;En.prototype.prepareNipples=function(){var e=this,t=e.nipples;t.on=e.on.bind(e),t.off=e.off.bind(e),t.options=e.options,t.destroy=e.destroy.bind(e),t.ids=e.ids,t.id=e.id,t.processOnMove=e.processOnMove.bind(e),t.processOnEnd=e.processOnEnd.bind(e),t.get=function(r){if(r===void 0)return t[0];for(var i=0,n=t.length;i<n;i+=1)if(t[i].identifier===r)return t[i];return!1}};En.prototype.bindings=function(){var e=this;e.bindEvt(e.options.zone,"start"),e.options.zone.style.touchAction="none",e.options.zone.style.msTouchAction="none"};En.prototype.begin=function(){var e=this,t=e.options;if(t.mode==="static"){var r=e.createNipple(t.position,e.manager.getIdentifier());r.add(),e.idles.push(r)}};En.prototype.createNipple=function(e,t){var r=this,i=r.manager.scroll,n={},a=r.options,o={x:r.parentIsFlex?i.x:i.x+r.box.left,y:r.parentIsFlex?i.y:i.y+r.box.top};if(e.x&&e.y)n={x:e.x-o.x,y:e.y-o.y};else if(e.top||e.right||e.bottom||e.left){var s=document.createElement("DIV");s.style.display="hidden",s.style.top=e.top,s.style.right=e.right,s.style.bottom=e.bottom,s.style.left=e.left,s.style.position="absolute",a.zone.appendChild(s);var l=s.getBoundingClientRect();a.zone.removeChild(s),n=e,e={x:l.left+i.x,y:l.top+i.y}}var u=new ACt(r,{color:a.color,size:a.size,threshold:a.threshold,fadeTime:a.fadeTime,dataOnly:a.dataOnly,restJoystick:a.restJoystick,restOpacity:a.restOpacity,mode:a.mode,identifier:t,position:e,zone:a.zone,frontPosition:{x:0,y:0},shape:a.shape});return a.dataOnly||(QO(u.ui.el,n),QO(u.ui.front,u.frontPosition)),r.nipples.push(u),r.trigger("added "+u.identifier+":added",u),r.manager.trigger("added "+u.identifier+":added",u),r.bindNipple(u),u};En.prototype.updateBox=function(){var e=this;e.box=e.options.zone.getBoundingClientRect()};En.prototype.bindNipple=function(e){var t=this,r,i=function(n,a){r=n.type+" "+a.id+":"+n.type,t.trigger(r,a)};e.on("destroyed",t.onDestroyed.bind(t)),e.on("shown hidden rested dir plain",i),e.on("dir:up dir:right dir:down dir:left",i),e.on("plain:up plain:right plain:down plain:left",i)};En.prototype.pressureFn=function(e,t,r){var i=this,n=0;clearInterval(i.pressureIntervals[r]),i.pressureIntervals[r]=setInterval((function(){var a=e.force||e.pressure||e.webkitForce||0;a!==n&&(t.trigger("pressure",a),i.trigger("pressure "+t.identifier+":pressure",a),n=a)}).bind(i),100)};En.prototype.onstart=function(e){var t=this,r=t.options,i=e;e=Nye(e),t.updateBox();var n=function(a){t.actives.length<r.maxNumberOfNipples?t.processOnStart(a):i.type.match(/^touch/)&&(Object.keys(t.manager.ids).forEach(function(o){if(Object.values(i.touches).findIndex(function(l){return l.identifier===o})<0){var s=[e[0]];s.identifier=o,t.processOnEnd(s)}}),t.actives.length<r.maxNumberOfNipples&&t.processOnStart(a))};return KO(e,n),t.manager.bindDocument(),!1};En.prototype.processOnStart=function(e){var t=this,r=t.options,i,n=t.manager.getIdentifier(e),a=e.force||e.pressure||e.webkitForce||0,o={x:e.pageX,y:e.pageY},s=t.getOrCreate(n,o);s.identifier!==n&&t.manager.removeIdentifier(s.identifier),s.identifier=n;var l=function(c){c.trigger("start",c),t.trigger("start "+c.id+":start",c),c.show(),a>0&&t.pressureFn(e,c,c.identifier),t.processOnMove(e)};if((i=t.idles.indexOf(s))>=0&&t.idles.splice(i,1),t.actives.push(s),t.ids.push(s.identifier),r.mode!=="semi")l(s);else{var u=JA(o,s.position);if(u<=r.catchDistance)l(s);else{s.destroy(),t.processOnStart(e);return}}return s};En.prototype.getOrCreate=function(e,t){var r=this,i=r.options,n;return/(semi|static)/.test(i.mode)?(n=r.idles[0],n?(r.idles.splice(0,1),n):i.mode==="semi"?r.createNipple(t,e):(console.warn("Coudln't find the needed nipple."),!1)):(n=r.createNipple(t,e),n)};En.prototype.processOnMove=function(e){var t=this,r=t.options,i=t.manager.getIdentifier(e),n=t.nipples.get(i),a=t.manager.scroll;if(!xCt(e)){this.processOnEnd(e);return}if(!n){console.error("Found zombie joystick with ID "+i),t.manager.removeIdentifier(i);return}if(r.dynamicPage){var o=n.el.getBoundingClientRect();n.position={x:a.x+o.left,y:a.y+o.top}}n.identifier=i;var s=n.options.size/2,l={x:e.pageX,y:e.pageY};r.lockX&&(l.y=n.position.y),r.lockY&&(l.x=n.position.x);var u=JA(l,n.position),c=mCt(l,n.position),h=ZO(c),d=u/s,f={distance:u,position:l},p,v;if(n.options.shape==="circle"?(p=Math.min(u,s),v=gCt(n.position,p,c)):(v=_Ct(l,n.position,s),p=JA(v,n.position)),r.follow){if(u>s){let x=l.x-v.x,b=l.y-v.y;n.position.x+=x,n.position.y+=b,n.el.style.top=n.position.y-(t.box.top+a.y)+"px",n.el.style.left=n.position.x-(t.box.left+a.x)+"px",u=JA(l,n.position)}}else l=v,u=p;var m=l.x-n.position.x,g=l.y-n.position.y;n.frontPosition={x:m,y:g},r.dataOnly||QO(n.ui.front,n.frontPosition);var y={identifier:n.identifier,position:l,force:d,pressure:e.force||e.pressure||e.webkitForce||0,distance:u,angle:{radian:h,degree:c},vector:{x:m/s,y:-g/s},raw:f,instance:n,lockX:r.lockX,lockY:r.lockY};y=n.computeDirection(y),y.angle={radian:ZO(180-c),degree:180-c},n.trigger("move",y),t.trigger("move "+n.id+":move",y)};En.prototype.processOnEnd=function(e){var t=this,r=t.options,i=t.manager.getIdentifier(e),n=t.nipples.get(i),a=t.manager.removeIdentifier(n.identifier);!n||(r.dataOnly||n.hide(function(){r.mode==="dynamic"&&(n.trigger("removed",n),t.trigger("removed "+n.id+":removed",n),t.manager.trigger("removed "+n.id+":removed",n),n.destroy())}),clearInterval(t.pressureIntervals[n.identifier]),n.resetDirection(),n.trigger("end",n),t.trigger("end "+n.id+":end",n),t.ids.indexOf(n.identifier)>=0&&t.ids.splice(t.ids.indexOf(n.identifier),1),t.actives.indexOf(n)>=0&&t.actives.splice(t.actives.indexOf(n),1),/(semi|static)/.test(r.mode)?t.idles.push(n):t.nipples.indexOf(n)>=0&&t.nipples.splice(t.nipples.indexOf(n),1),t.manager.unbindDocument(),/(semi|static)/.test(r.mode)&&(t.manager.ids[a.id]=a.identifier))};En.prototype.onDestroyed=function(e,t){var r=this;r.nipples.indexOf(t)>=0&&r.nipples.splice(r.nipples.indexOf(t),1),r.actives.indexOf(t)>=0&&r.actives.splice(r.actives.indexOf(t),1),r.idles.indexOf(t)>=0&&r.idles.splice(r.idles.indexOf(t),1),r.ids.indexOf(t.identifier)>=0&&r.ids.splice(r.ids.indexOf(t.identifier),1),r.manager.removeIdentifier(t.identifier),r.manager.unbindDocument()};En.prototype.destroy=function(){var e=this;e.unbindEvt(e.options.zone,"start"),e.nipples.forEach(function(r){r.destroy()});for(var t in e.pressureIntervals)e.pressureIntervals.hasOwnProperty(t)&&clearInterval(e.pressureIntervals[t]);e.trigger("destroyed",e.nipples),e.manager.unbindDocument(),e.off()};var SCt=En;function Ma(e){var t=this;t.ids={},t.index=0,t.collections=[],t.scroll=kie(),t.config(e),t.prepareCollections();var r=function(){var n;t.collections.forEach(function(a){a.forEach(function(o){n=o.el.getBoundingClientRect(),o.position={x:t.scroll.x+n.left,y:t.scroll.y+n.top}})})};if(typeof window>"u")return t.collections;k6(window,"resize",function(){Iie(r)});var i=function(){t.scroll=kie()};return k6(window,"scroll",function(){Iie(i)}),t.collections}Ma.prototype=new _H;Ma.constructor=Ma;Ma.prototype.prepareCollections=function(){var e=this;e.collections.create=e.create.bind(e),e.collections.on=e.on.bind(e),e.collections.off=e.off.bind(e),e.collections.destroy=e.destroy.bind(e),e.collections.get=function(t){var r;return e.collections.every(function(i){return r=i.get(t),!r}),r}};Ma.prototype.create=function(e){return this.createCollection(e)};Ma.prototype.createCollection=function(e){var t=this,r=new SCt(t,e);return t.bindCollection(r),t.collections.push(r),r};Ma.prototype.bindCollection=function(e){var t=this,r,i=function(n,a){r=n.type+" "+a.id+":"+n.type,t.trigger(r,a)};e.on("destroyed",t.onDestroyed.bind(t)),e.on("shown hidden rested dir plain",i),e.on("dir:up dir:right dir:down dir:left",i),e.on("plain:up plain:right plain:down plain:left",i)};Ma.prototype.bindDocument=function(){var e=this;e.binded||(e.bindEvt(document,"move").bindEvt(document,"end"),e.binded=!0)};Ma.prototype.unbindDocument=function(e){var t=this;(!Object.keys(t.ids).length||e===!0)&&(t.unbindEvt(document,"move").unbindEvt(document,"end"),t.binded=!1)};Ma.prototype.getIdentifier=function(e){var t;return e?(t=e.identifier===void 0?e.pointerId:e.identifier,t===void 0&&(t=this.latest||0)):t=this.index,this.ids[t]===void 0&&(this.ids[t]=this.index,this.index+=1),this.latest=t,this.ids[t]};Ma.prototype.removeIdentifier=function(e){var t={};for(var r in this.ids)if(this.ids[r]===e){t.id=r,t.identifier=this.ids[r],delete this.ids[r];break}return t};Ma.prototype.onmove=function(e){var t=this;return t.onAny("move",e),!1};Ma.prototype.onend=function(e){var t=this;return t.onAny("end",e),!1};Ma.prototype.oncancel=function(e){var t=this;return t.onAny("end",e),!1};Ma.prototype.onAny=function(e,t){var r=this,i,n="processOn"+e.charAt(0).toUpperCase()+e.slice(1);t=Nye(t);var a=function(s,l,u){u.ids.indexOf(l)>=0&&(u[n](s),s._found_=!0)},o=function(s){i=r.getIdentifier(s),KO(r.collections,a.bind(null,s,i)),s._found_||r.removeIdentifier(i)};return KO(t,o),!1};Ma.prototype.destroy=function(){var e=this;e.unbindDocument(!0),e.ids={},e.index=0,e.collections.forEach(function(t){t.destroy()}),e.off()};Ma.prototype.onDestroyed=function(e,t){var r=this;if(r.collections.indexOf(t)<0)return!1;r.collections.splice(r.collections.indexOf(t),1)};var CCt=Ma,Rie=new CCt,ECt={create:function(e){return Rie.create(e)},factory:Rie},Uye=new Map,kb=new Map,av=class{constructor(e,t,r,i){this.data=t;let{audio:n,volume:a,delay:o,loop:s}=t;if(!n)throw new Error("Missing property");let l=typeof n=="string"?i.getAudio(n).src:n.data;this.audioPlayer=new Qx({src:l,volume:a,delay:o,loop:s}),kb.has(r.uuid)?kb.get(r.uuid).push(this):kb.set(r.uuid,[this]),Uye.set(e,this)}playByToggle(){this.data.toggle==="stop"?this.audioPlayer.status==="playing"?this.audioPlayer.stop():(this.audioPlayer.stop(),this.audioPlayer.play()):this.data.toggle==="pause"?this.audioPlayer.status==="playing"?this.audioPlayer.pause():this.audioPlayer.play():(this.audioPlayer.stop(),this.audioPlayer.play())}dispose(){this.audioPlayer.stop()}},JO=class{constructor(e){this.data=e}dispatch(){this.data.playAudio?this.pauseAudio(this.data.playAudio):this.data.object?this.pauseAllAudiosFromObject(this.data.object):this.pauseAllAudios()}pauseAudio(e){let t=Uye.get(e);!t||(this.data.delay>0?(this.disposeDelay(),this.timeoutId=window.setTimeout(()=>{t.audioPlayer[this.data.interaction](),this.disposeDelay()},this.data.delay)):t.audioPlayer[this.data.interaction]())}pauseAllAudiosFromObject(e){let t=kb.get(e);!(t!=null&&t.length)||(this.data.delay>0?(this.disposeDelay(),this.timeoutId=window.setTimeout(()=>{t.forEach(r=>r.audioPlayer[this.data.interaction]()),this.disposeDelay()},this.data.delay)):t.forEach(r=>r.audioPlayer[this.data.interaction]()))}pauseAllAudios(){let e=[...kb.values()];!e.length||(this.data.delay>0?(this.disposeDelay(),this.timeoutId=window.setTimeout(()=>{e.forEach(t=>{t.forEach(r=>{r.audioPlayer[this.data.interaction]()})}),this.disposeDelay()},this.data.delay)):e.forEach(t=>{t.forEach(r=>{r.audioPlayer[this.data.interaction]()})}))}disposeDelay(){clearTimeout(this.timeoutId),delete this.timeoutId}dispose(){clearTimeout(this.timeoutId),delete this.timeoutId}},Gye=class{constructor(e,t,r,i,n){if(this.data=t,this.shared=i,this.condition=n,t.interaction==="play")this.interaction=new av(e,t,r,i);else if(t.interaction==="pause"||t.interaction==="stop")this.interaction=new JO(t);else throw new Error("Missing property")}dispatchBasic(){if(Ui(this.shared,this.condition)===!1)return!1;this.interaction instanceof av?this.interaction.playByToggle():this.interaction.dispatch()}dispatchConditional(){if(Ui(this.shared,this.condition)===!1)return!1;this.interaction instanceof av?this.interaction.audioPlayer.play():this.interaction.dispatch()}dispatchGameControl(e){if(Ui(this.shared,this.condition)===!1)return!1;this.interaction instanceof av&&(e==="start"?this.interaction.audioPlayer.play():this.interaction.audioPlayer.stop())}dispose(){this.interaction.dispose()}},jye=class{constructor(e,t,r,i){this.data=e,this.page=t,this.shared=r,this.condition=i,this.delay=0,this.emission=e.emission,e.delay!==void 0&&(this.delay=e.delay),this.particleSystem=this.page.scene.find(this.data.emitterObjectId)}toggleEmitting(){this.particleSystem.started&&!this.particleSystem.stopped?this.stop(this.delay):this.start(this.delay)}toggleFroze(){this.particleSystem.started&&!this.particleSystem.isFrozen?this.freeze(this.delay):this.unFreeze(this.delay)}start(e=0){if(e){this.delayTimerId=window.setTimeout(()=>{this.start(0),this.clearDelay()},e);return}this.particleSystem.start()}stop(e=0){if(e){this.delayTimerId=window.setTimeout(()=>{this.stop(0),this.clearDelay()},e);return}this.particleSystem.stop()}freeze(e=0){if(e){this.delayTimerId=window.setTimeout(()=>{this.freeze(0),this.clearDelay()},e);return}this.particleSystem.froze()}unFreeze(e=0){if(e){this.delayTimerId=window.setTimeout(()=>{this.unFreeze(0),this.clearDelay()},e);return}this.particleSystem.unFroze()}reset(e=0){if(e){this.delayTimerId=window.setTimeout(()=>{this.reset(0),this.clearDelay()},e);return}this.particleSystem.reset()}reverseFromCurrent(){switch(this.emission){case"emitToggle":this.toggleEmitting();break;case"pauseToggle":this.toggleFroze();break}}dispatchBasic(){if(Ui(this.shared,this.condition)===!1||!this.particleSystem)return!1;switch(this.emission){case"start":this.start(this.delay);break;case"emitToggle":this.toggleEmitting();break;case"pause":this.freeze(this.delay);break;case"pauseToggle":this.toggleFroze();break;case"stop":this.stop(this.delay);break;case"reset":this.reset(this.delay);break}}dispatchConditional(){if(Ui(this.shared,this.condition)===!1||!this.particleSystem)return!1;switch(this.emission){case"start":this.start(this.delay);break;case"stop":this.stop(this.delay);break;case"reset":this.reset(this.delay);break}}dispatchGameControl(e){if(Ui(this.shared,this.condition)===!1||!this.particleSystem)return!1;e==="start"?this.start(this.delay):this.stop(this.delay)}dispose(){!this.particleSystem||(this.particleSystem.reset(),this.clearDelay())}clearDelay(){this.delayTimerId&&(clearTimeout(this.delayTimerId),delete this.delayTimerId)}},MCt="text/plain",TCt="us-ascii",Oie=(e,t)=>t.some(r=>r instanceof RegExp?r.test(e):r===e),PCt=(e,{stripHash:t})=>{let r=/^data:(?<type>[^,]*?),(?<data>[^#]*?)(?:#(?<hash>.*))?$/.exec(e);if(!r)throw new Error(`Invalid URL: ${e}`);let{type:i,data:n,hash:a}=r.groups,o=i.split(";");a=t?"":a;let s=!1;o[o.length-1]==="base64"&&(o.pop(),s=!0);let l=(o.shift()||"").toLowerCase(),u=[...o.map(c=>{let[h,d=""]=c.split("=").map(f=>f.trim());return h==="charset"&&(d=d.toLowerCase(),d===TCt)?"":`${h}${d?`=${d}`:""}`}).filter(Boolean)];return s&&u.push("base64"),(u.length>0||l&&l!==MCt)&&u.unshift(l),`data:${u.join(";")},${s?n.trim():n}${a?`#${a}`:""}`};function DCt(e,t){if(t={defaultProtocol:"http:",normalizeProtocol:!0,forceHttp:!1,forceHttps:!1,stripAuthentication:!0,stripHash:!1,stripTextFragment:!0,stripWWW:!0,removeQueryParameters:[/^utm_\w+/i],removeTrailingSlash:!0,removeSingleSlash:!0,removeDirectoryIndex:!1,sortQueryParameters:!0,...t},e=e.trim(),/^data:/i.test(e))return PCt(e,t);if(/^view-source:/i.test(e))throw new Error("`view-source:` is not supported as it is a non-standard protocol");let r=e.startsWith("//");!r&&/^\.*\//.test(e)||(e=e.replace(/^(?!(?:\w+:)?\/\/)|^\/\//,t.defaultProtocol));let i=new URL(e);if(t.forceHttp&&t.forceHttps)throw new Error("The `forceHttp` and `forceHttps` options cannot be used together");if(t.forceHttp&&i.protocol==="https:"&&(i.protocol="http:"),t.forceHttps&&i.protocol==="http:"&&(i.protocol="https:"),t.stripAuthentication&&(i.username="",i.password=""),t.stripHash?i.hash="":t.stripTextFragment&&(i.hash=i.hash.replace(/#?:~:text.*?$/i,"")),i.pathname){let a=/\b[a-z][a-z\d+\-.]{1,50}:\/\//g,o=0,s="";for(;;){let u=a.exec(i.pathname);if(!u)break;let c=u[0],h=u.index,d=i.pathname.slice(o,h);s+=d.replace(/\/{2,}/g,"/"),s+=c,o=h+c.length}let l=i.pathname.slice(o,i.pathname.length);s+=l.replace(/\/{2,}/g,"/"),i.pathname=s}if(i.pathname)try{i.pathname=decodeURI(i.pathname)}catch{}if(t.removeDirectoryIndex===!0&&(t.removeDirectoryIndex=[/^index\.[a-z]+$/]),Array.isArray(t.removeDirectoryIndex)&&t.removeDirectoryIndex.length>0){let a=i.pathname.split("/"),o=a[a.length-1];Oie(o,t.removeDirectoryIndex)&&(a=a.slice(0,-1),i.pathname=a.slice(1).join("/")+"/")}if(i.hostname&&(i.hostname=i.hostname.replace(/\.$/,""),t.stripWWW&&/^www\.(?!www\.)[a-z\-\d]{1,63}\.[a-z.\-\d]{2,63}$/.test(i.hostname)&&(i.hostname=i.hostname.replace(/^www\./,""))),Array.isArray(t.removeQueryParameters))for(let a of[...i.searchParams.keys()])Oie(a,t.removeQueryParameters)&&i.searchParams.delete(a);if(t.removeQueryParameters===!0&&(i.search=""),t.sortQueryParameters){i.searchParams.sort();try{i.search=decodeURIComponent(i.search)}catch{}}t.removeTrailingSlash&&(i.pathname=i.pathname.replace(/\/$/,""));let n=e;return e=i.toString(),!t.removeSingleSlash&&i.pathname==="/"&&!n.endsWith("/")&&i.hash===""&&(e=e.replace(/\/$/,"")),(t.removeTrailingSlash||i.pathname==="/")&&i.hash===""&&t.removeSingleSlash&&(e=e.replace(/\/$/,"")),r&&!t.normalizeProtocol&&(e=e.replace(/^http:\/\//,"//")),t.stripProtocol&&(e=e.replace(/^(?:https?:)?\/\//,"")),e}var ICt=class{constructor({url:e,context:t},r,i,n){if(this.controlsManager=r,this.shared=i,this.condition=n,!e)throw new Error("Missing property");this.url=e.startsWith("mailto:")?e:DCt(e,{removeTrailingSlash:!1,removeSingleSlash:!1,stripWWW:!1}),this.context=t??"tab"}dispatch(){var e;if(Ui(this.shared,this.condition)===!1)return!1;q4?window.location.assign(this.url):(this.context==="tab"||oge&&this.context==="none"?window.open(this.url,"_blank"):this.context==="window"?window.open(this.url,"_blank",`width=${window.innerWidth}, height=${window.innerHeight}`):window.open(this.url,"_parent"),(e=this.controlsManager.orbitControls)==null||e.onPointerUp(jt[0]),Wxt())}},Wye=class{constructor(e,t,r,i,n){this.data=e,this.page=t,this.controlsManager=r,this.shared=i,this.condition=n,this.timeoutIdQueue=[],this.dispatchInner=()=>{this.objects.forEach(this.destroyCallback)},this.destroyCallback=a=>{var u,c;this.timeoutIdQueue.shift();let o=this.page.scene.find(a);if(o===void 0)return;let s=this.controlsManager.sharedGameControlGlobals.rapierWorld,l=s?(u=o.dataPatched.physics)==null?void 0:u.fusedBody:!0;if(o.cloner){for(let h of o.cloner.children)l?(h.playModeVisible=!1,h.rigidBody&&((c=o.dataPatched.physics)==null?void 0:c.rigidBody)==="positioned"&&(this.controlsManager.sharedGameControlGlobals.colliderToEntity.delete(h.rigidBody.collider(0).handle),s.removeRigidBody(h.rigidBody),h.rigidBody=void 0),h.bvhGeometry&&(h.bvhGeometry=void 0)):this.clone===void 0||this.clone===h?(h.playModeVisible=!1,h.rigidBody&&(this.controlsManager.sharedGameControlGlobals.colliderToEntity.delete(h.rigidBody.collider(0).handle),s.removeRigidBody(h.rigidBody),h.rigidBody=void 0)):h.playModeVisible===void 0&&(h.playModeVisible=!0);(l||this.clone===void 0||this.clone===!1)&&(o.visible=!1,o.rigidBody&&(this.controlsManager.sharedGameControlGlobals.colliderToEntity.delete(o.rigidBody.collider(0).handle),s.removeRigidBody(o.rigidBody),o.rigidBody=void 0),o.bvhGeometry&&(o.bvhGeometry=void 0))}else o.rigidBody&&(this.controlsManager.sharedGameControlGlobals.colliderToEntity.delete(o.rigidBody.collider(0).handle),s.removeRigidBody(o.rigidBody),o.rigidBody=void 0),o.bvhGeometry&&(o.bvhGeometry=void 0),o.visible=!1;s===void 0?this.controlsManager.sharedGameControlGlobals.entitiesWithTransformAnim=this.controlsManager.sharedGameControlGlobals.entitiesWithTransformAnim.filter(h=>h.bvhGeometry!==void 0):this.controlsManager.sharedGameControlGlobals.entitiesWithTransformAnim=this.controlsManager.sharedGameControlGlobals.entitiesWithTransformAnim.filter(h=>h.rigidBody!==void 0),o.destroyedInAction=!0,this.controlsManager.requestRender()},this.objects=[...e.objects]}dispatch(e){if(Ui(this.shared,this.condition)===!1)return!1;this.clone=e,this.data.delay?this.timeoutIdQueue.push(window.setTimeout(this.dispatchInner,this.data.delay*1e3)):this.dispatchInner()}dispatchFromStart(){if(Ui(this.shared,this.condition)===!1)return!1;this.timeoutIdQueue.push(window.setTimeout(this.dispatchInner,this.data.delay*1e3))}dispose(){this.timeoutIdQueue.forEach(e=>window.clearTimeout(e))}},qye=class{constructor(e,t,r,i,n){this.data=e,this.page=t,this.shared=r,this.eventManager=i,this.condition=n,this.shared=r}dispatch(){if(Ui(this.shared,this.condition)===!1)return!1;clearTimeout(this.timeoutId),delete this.timeoutId,this.timeoutId=window.setTimeout(()=>{var e;this.shared.reset(this.shared.data,!0),kH(this.page,this.shared,!0),this.eventManager.reset(),(e=this.eventManager.controlsManager.gameControl)==null||e.reset(!0),this.page.switchToPlayCamera(),this.eventManager.controlsManager.requestRender(),delete this.timeoutId},(this.data.delay??0)*1e3)}dispose(){clearTimeout(this.timeoutId),delete this.timeoutId}},Yye={update:null,begin:null,loopBegin:null,changeBegin:null,change:null,changeComplete:null,timelineChangeComplete:null,loopComplete:null,complete:null,loop:1,direction:"normal",autoplay:!0,timelineOffset:0,rewind:!0},AH={duration:1e3,delay:0,endDelay:0,startOnceDelay:0,pingPongDelayCorrection:0,pingPongEndDelayCorrection:0,easing:"easeOutElastic(1, .5)",round:0},LCt=["translateX","translateY","translateZ","rotate","rotateX","rotateY","rotateZ","scale","scaleX","scaleY","scaleZ","skew","skewX","skewY","perspective","matrix","matrix3d"],R6={CSS:{},springs:{}};function xu(e,t,r){return Math.min(Math.max(e,t),r)}function Rb(e,t){return e.indexOf(t)>-1}function OD(e,t){return e.apply(null,t)}var Xt={arr:function(e){return Array.isArray(e)},obj:function(e){return Rb(Object.prototype.toString.call(e),"Object")},pth:function(e){return Xt.obj(e)&&e.hasOwnProperty("totalLength")},svg:function(e){return e instanceof SVGElement},inp:function(e){return e instanceof HTMLInputElement},dom:function(e){return!("isNode"in e)&&(e.nodeType||Xt.svg(e))},str:function(e){return typeof e=="string"},fnc:function(e){return typeof e=="function"},und:function(e){return typeof e>"u"},hex:function(e){return/(^#[0-9A-F]{6}$)|(^#[0-9A-F]{3}$)/i.test(e)},rgb:function(e){return/^rgb/.test(e)},hsl:function(e){return/^hsl/.test(e)},col:function(e){return Xt.hex(e)||Xt.rgb(e)||Xt.hsl(e)},key:function(e){return!Yye.hasOwnProperty(e)&&!AH.hasOwnProperty(e)&&e!=="targets"&&e!=="keyframes"}};function Xye(e){var t=/\(([^)]+)\)/.exec(e);return t?t[1].split(",").map(function(r){return parseFloat(r)}):[]}function Zye(e,t){var r=Xye(e),i=xu(Xt.und(r[0])?1:r[0],.1,100),n=xu(Xt.und(r[1])?100:r[1],.1,100),a=xu(Xt.und(r[2])?10:r[2],.1,100),o=xu(Xt.und(r[3])?0:r[3],.1,100),s=Math.sqrt(n/i),l=a/(2*Math.sqrt(n*i)),u=l<1?s*Math.sqrt(1-l*l):0,c=1,h=l<1?(l*s+-o)/u:-o+s;function d(p){var v=t?t*p/1e3:p;return l<1?v=Math.exp(-v*l*s)*(c*Math.cos(u*v)+h*Math.sin(u*v)):v=(c+h*v)*Math.exp(-v*s),p===0||p===1?p:1-v}function f(){var p=R6.springs[e];if(p)return p;for(var v=1/6,m=0,g=0;;)if(m+=v,d(m)===1){if(g++,g>=16)break}else g=0;var y=m*v*1e3;return R6.springs[e]=y,y}return t?d:f}function kCt(e){return e===void 0&&(e=10),function(t){return Math.ceil(xu(t,1e-6,1)*e)*(1/e)}}var RCt=function(){var e=11,t=1/(e-1);function r(c,h){return 1-3*h+3*c}function i(c,h){return 3*h-6*c}function n(c){return 3*c}function a(c,h,d){return((r(h,d)*c+i(h,d))*c+n(h))*c}function o(c,h,d){return 3*r(h,d)*c*c+2*i(h,d)*c+n(h)}function s(c,h,d,f,p){var v,m,g=0;do m=h+(d-h)/2,v=a(m,f,p)-c,v>0?d=m:h=m;while(Math.abs(v)>1e-7&&++g<10);return m}function l(c,h,d,f){for(var p=0;p<4;++p){var v=o(h,d,f);if(v===0)return h;var m=a(h,d,f)-c;h-=m/v}return h}function u(c,h,d,f){if(!(0<=c&&c<=1&&0<=d&&d<=1))return;var p=new Float32Array(e);if(c!==h||d!==f)for(var v=0;v<e;++v)p[v]=a(v*t,c,d);function m(g){for(var y=0,x=1,b=e-1;x!==b&&p[x]<=g;++x)y+=t;--x;var _=(g-p[x])/(p[x+1]-p[x]),w=y+_*t,S=o(w,c,d);return S>=.001?l(g,w,c,d):S===0?w:s(g,y,y+t,c,d)}return function(g){return c===h&&d===f||g===0||g===1?g:a(m(g),h,f)}}return u}(),Qye=function(){var e={linear:function(){return function(i){return i}}},t={Sine:function(){return function(i){return 1-Math.cos(i*Math.PI/2)}},Circ:function(){return function(i){return 1-Math.sqrt(1-i*i)}},Back:function(){return function(i){return i*i*(3*i-2)}},Bounce:function(){return function(i){for(var n,a=4;i<((n=Math.pow(2,--a))-1)/11;);return 1/Math.pow(4,3-a)-7.5625*Math.pow((n*3-2)/22-i,2)}},Elastic:function(i,n){i===void 0&&(i=1),n===void 0&&(n=.5);var a=xu(i,1,10),o=xu(n,.1,2);return function(s){return s===0||s===1?s:-a*Math.pow(2,10*(s-1))*Math.sin((s-1-o/(Math.PI*2)*Math.asin(1/a))*(Math.PI*2)/o)}}},r=["Quad","Cubic","Quart","Quint","Expo"];return r.forEach(function(i,n){t[i]=function(){return function(a){return Math.pow(a,n+2)}}}),Object.keys(t).forEach(function(i){var n=t[i];e["easeIn"+i]=n,e["easeOut"+i]=function(a,o){return function(s){return 1-n(a,o)(1-s)}},e["easeInOut"+i]=function(a,o){return function(s){return s<.5?n(a,o)(s*2)/2:1-n(a,o)(s*-2+2)/2}}}),e}();function SH(e,t){if(Xt.fnc(e))return e;var r=e.split("(")[0],i=Qye[r],n=Xye(e);switch(r){case"spring":return Zye(e,t);case"cubicBezier":return OD(RCt,n);case"steps":return OD(kCt,n);default:return OD(i,n)}}function Kye(e){try{var t=document.querySelectorAll(e);return t}catch{return}}function U7(e,t){for(var r=e.length,i=arguments.length>=2?arguments[1]:void 0,n=[],a=0;a<r;a++)if(a in e){var o=e[a];t.call(i,o,a,e)&&n.push(o)}return n}function G7(e){return e.reduce(function(t,r){return t.concat(Xt.arr(r)?G7(r):r)},[])}function Bie(e){return Xt.arr(e)?e:(Xt.str(e)&&(e=Kye(e)||e),e instanceof NodeList||e instanceof HTMLCollection?[].slice.call(e):[e])}function CH(e,t){return e.some(function(r){return r===t})}function EH(e){var t={};for(var r in e)t[r]=e[r];return t}function $O(e,t){var r=EH(e);for(var i in e)r[i]=t.hasOwnProperty(i)?t[i]:e[i];return r}function j7(e,t){var r=EH(e);for(var i in t)r[i]=Xt.und(e[i])?t[i]:e[i];return r}function OCt(e){var t=/rgb\((\d+,\s*[\d]+,\s*[\d]+)\)/g.exec(e);return t?"rgba("+t[1]+",1)":e}function BCt(e){var t=/^#?([a-f\d])([a-f\d])([a-f\d])$/i,r=e.replace(t,function(s,l,u,c){return l+l+u+u+c+c}),i=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(r),n=parseInt(i[1],16),a=parseInt(i[2],16),o=parseInt(i[3],16);return"rgba("+n+","+a+","+o+",1)"}function NCt(e){var t=/hsl\((\d+),\s*([\d.]+)%,\s*([\d.]+)%\)/g.exec(e)||/hsla\((\d+),\s*([\d.]+)%,\s*([\d.]+)%,\s*([\d.]+)\)/g.exec(e),r=parseInt(t[1],10)/360,i=parseInt(t[2],10)/100,n=parseInt(t[3],10)/100,a=t[4]||1;function o(d,f,p){return p<0&&(p+=1),p>1&&(p-=1),p<1/6?d+(f-d)*6*p:p<1/2?f:p<2/3?d+(f-d)*(2/3-p)*6:d}var s,l,u;if(i==0)s=l=u=n;else{var c=n<.5?n*(1+i):n+i-n*i,h=2*n-c;s=o(h,c,r+1/3),l=o(h,c,r),u=o(h,c,r-1/3)}return"rgba("+s*255+","+l*255+","+u*255+","+a+")"}function VCt(e){if(Xt.rgb(e))return OCt(e);if(Xt.hex(e))return BCt(e);if(Xt.hsl(e))return NCt(e)}function dd(e){var t=/[+-]?\d*\.?\d+(?:\.\d+)?(?:[eE][+-]?\d+)?(%|px|pt|em|rem|in|cm|mm|ex|ch|pc|vw|vh|vmin|vmax|deg|rad|turn)?$/.exec(e);if(t)return t[1]}function FCt(e){if(Rb(e,"translate")||e==="perspective")return"px";if(Rb(e,"rotate")||Rb(e,"skew"))return"deg"}function eB(e,t){return Xt.fnc(e)?e(t.target,t.id,t.total):e}function Nc(e,t){return e.getAttribute(t)}function MH(e,t,r){var i=dd(t);if(CH([r,"deg","rad","turn"],i))return t;var n=R6.CSS[t+r];if(!Xt.und(n))return n;var a=100,o=document.createElement(e.tagName),s=e.parentNode&&e.parentNode!==document?e.parentNode:document.body;s.appendChild(o),o.style.position="absolute",o.style.width=a+r;var l=a/o.offsetWidth;s.removeChild(o);var u=l*parseFloat(t);return R6.CSS[t+r]=u,u}function Jye(e,t,r){if(t in e.style){var i=t.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),n=e.style[t]||getComputedStyle(e).getPropertyValue(i)||"0";return r?MH(e,n,r):n}}function TH(e,t){if(Xt.dom(e)&&!Xt.inp(e)&&(Nc(e,t)||Xt.svg(e)&&e[t]))return"attribute";if(Xt.dom(e)&&CH(LCt,t))return"transform";if(Xt.dom(e)&&t!=="transform"&&Jye(e,t))return"css";if(e[t]!=null)return"object"}function $ye(e){if(Xt.dom(e)){for(var t=e.style.transform||"",r=/(\w+)\(([^)]*)\)/g,i=new Map,n;n=r.exec(t);)i.set(n[1],n[2]);return i}}function zCt(e,t,r,i){var n=Rb(t,"scale")?1:0+FCt(t),a=$ye(e).get(t)||n;return r&&(r.transforms.list.set(t,a),r.transforms.last=t),i?MH(e,a,i):a}function PH(e,t,r,i){switch(TH(e,t)){case"transform":return zCt(e,t,i,r);case"css":return Jye(e,t,r);case"attribute":return Nc(e,t);default:return e[t]||0}}function DH(e,t){var r=/^(\*=|\+=|-=)/.exec(e);if(!r)return e;var i=dd(e)||0,n=parseFloat(t),a=parseFloat(e.replace(r[0],""));switch(r[0][0]){case"+":return n+a+i;case"-":return n-a+i;case"*":return n*a+i}}function e2e(e,t){if(Xt.col(e))return VCt(e);if(/\s/g.test(e))return e;var r=dd(e),i=r?e.substr(0,e.length-r.length):e;return t?i+t:i}function IH(e,t){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))}function HCt(e){return Math.PI*2*Nc(e,"r")}function UCt(e){return Nc(e,"width")*2+Nc(e,"height")*2}function GCt(e){return IH({x:Nc(e,"x1"),y:Nc(e,"y1")},{x:Nc(e,"x2"),y:Nc(e,"y2")})}function t2e(e){for(var t=e.points,r=0,i,n=0;n<t.numberOfItems;n++){var a=t.getItem(n);n>0&&(r+=IH(i,a)),i=a}return r}function jCt(e){var t=e.points;return t2e(e)+IH(t.getItem(t.numberOfItems-1),t.getItem(0))}function r2e(e){if(e.getTotalLength)return e.getTotalLength();switch(e.tagName.toLowerCase()){case"circle":return HCt(e);case"rect":return UCt(e);case"line":return GCt(e);case"polyline":return t2e(e);case"polygon":return jCt(e)}}function WCt(e){var t=r2e(e);return e.setAttribute("stroke-dasharray",t),t}function qCt(e){for(var t=e.parentNode;Xt.svg(t)&&Xt.svg(t.parentNode);)t=t.parentNode;return t}function i2e(e,t){var r=t||{},i=r.el||qCt(e),n=i.getBoundingClientRect(),a=Nc(i,"viewBox"),o=n.width,s=n.height,l=r.viewBox||(a?a.split(" "):[0,0,o,s]);return{el:i,viewBox:l,x:l[0]/1,y:l[1]/1,w:o/l[2],h:s/l[3]}}function YCt(e,t){var r=Xt.str(e)?Kye(e)[0]:e,i=t||100;return function(n){return{property:n,el:r,svg:i2e(r),totalLength:r2e(r)*(i/100)}}}function XCt(e,t){function r(s){s===void 0&&(s=0);var l=t+s>=1?t+s:0;return e.el.getPointAtLength(l)}var i=i2e(e.el,e.svg),n=r(),a=r(-1),o=r(1);switch(e.property){case"x":return(n.x-i.x)*i.w;case"y":return(n.y-i.y)*i.h;case"angle":return Math.atan2(o.y-a.y,o.x-a.x)*180/Math.PI}}function Nie(e,t){var r=/[+-]?\d*\.?\d+(?:\.\d+)?(?:[eE][+-]?\d+)?/g,i=e2e(Xt.pth(e)?e.totalLength:e,t)+"";return{original:i,numbers:i.match(r)?i.match(r).map(Number):[0],strings:Xt.str(e)||t?i.split(r):[]}}function n2e(e){var t=e?G7(Xt.arr(e)?e.map(Bie):Bie(e)):[];return U7(t,function(r,i,n){return n.indexOf(r)===i})}function a2e(e){var t=n2e(e);return t.map(function(r,i){return{target:r,id:i,total:t.length,transforms:{list:$ye(r)}}})}function ZCt(e,t){var r=EH(t);if(/^spring/.test(r.easing)&&(r.duration=Zye(r.easing)),Xt.arr(e)){var i=e.length,n=i===2&&!Xt.obj(e[0]);n?e={value:e}:Xt.fnc(t.duration)||(r.duration=t.duration/i)}var a=Xt.arr(e)?e:[e];return a.map(function(o,s){var l=Xt.obj(o)&&!Xt.pth(o)?o:{value:o};return Xt.und(l.delay)&&(l.delay=s?0:t.delay),Xt.und(l.endDelay)&&(l.endDelay=s===a.length-1?t.endDelay:0),l}).map(function(o){return j7(o,r)})}function QCt(e){for(var t=U7(G7(e.map(function(a){return Object.keys(a)})),function(a){return Xt.key(a)}).reduce(function(a,o){return a.indexOf(o)<0&&a.push(o),a},[]),r={},i=function(a){var o=t[a];r[o]=e.map(function(s){var l={};for(var u in s)Xt.key(u)?u==o&&(l.value=s[u]):l[u]=s[u];return l})},n=0;n<t.length;n++)i(n);return r}function KCt(e,t){var r=[],i=t.keyframes;i&&(t=j7(QCt(i),t));for(var n in t)Xt.key(n)&&r.push({name:n,tweens:ZCt(t[n],e)});return r}function JCt(e,t){var r={};for(var i in e){var n=eB(e[i],t);Xt.arr(n)&&(n=n.map(function(a){return eB(a,t)}),n.length===1&&(n=n[0])),r[i]=n}return r.duration=parseFloat(r.duration),r.delay=parseFloat(r.delay),r}function $Ct(e,t){var r;return e.tweens.map(function(i){var n=JCt(i,t),a=n.value,o=Xt.arr(a)?a[1]:a,s=dd(o),l=PH(t.target,e.name,s,t),u=r?r.to.original:l,c=Xt.arr(a)?a[0]:u,h=dd(c)||dd(l),d=s||h;return Xt.und(o)&&(o=u),n.from=Nie(c,d),n.to=Nie(DH(o,c),d),n.start=r?r.end:0,n.end=n.start+n.delay+n.duration+n.endDelay,n.easing=SH(n.easing,n.duration),n.isPath=Xt.pth(a),n.isColor=Xt.col(n.from.original),n.isColor&&(n.round=1),r=n,n})}var o2e={css:function(e,t,r){return e.style[t]=r},attribute:function(e,t,r){return e.setAttribute(t,r)},object:function(e,t,r){return e[t]=r},transform:function(e,t,r,i,n){if(i.list.set(t,r),t===i.last||n){var a="";i.list.forEach(function(o,s){a+=s+"("+o+") "}),e.style.transform=a}}};function s2e(e,t){var r=a2e(e);r.forEach(function(i){for(var n in t){var a=eB(t[n],i),o=i.target,s=dd(a),l=PH(o,n,s,i),u=s||dd(l),c=DH(e2e(a,u),l),h=TH(o,n);o2e[h](o,n,c,i.transforms,!0)}})}function e7t(e,t){var r=TH(e.target,t.name);if(r){var i=$Ct(t,e),n=i[i.length-1];return{type:r,property:t.name,animatable:e,tweens:i,duration:n.end,delay:i[0].delay,endDelay:n.endDelay}}}function t7t(e,t){return U7(G7(e.map(function(r){return t.map(function(i){return e7t(r,i)})})),function(r){return!Xt.und(r)})}function l2e(e,t){var r=e.length,i=function(a){return a.timelineOffset?a.timelineOffset:0},n={};return n.duration=r?Math.max.apply(Math,e.map(function(a){let o=a.startOnceDelay??0,s=a.pingPongDelayCorrection??0,l=a.pingPongEndDelayCorrection??0;return i(a)+o+s+l+a.duration*(a.loop??1)})):t.duration,n.delay=r?Math.min.apply(Math,e.map(function(a){let o=a.startOnceDelay??0,s=a.pingPongDelayCorrection??0;return i(a)+o+s+a.delay})):t.delay,n.endDelay=r?n.duration-Math.max.apply(Math,e.map(function(a){let o=a.startOnceDelay??0,s=a.pingPongDelayCorrection??0,l=a.pingPongEndDelayCorrection??0;return i(a)+o+s+a.duration*(a.loop??1)-a.endDelay-l})):t.endDelay,n}var Vie=0;function r7t(e){var t=$O(Yye,e),r=$O(AH,e),i=KCt(r,e),n=a2e(e.targets),a=t7t(n,i),o=l2e(a,r),s=Vie;return Vie++,j7(t,{id:s,children:[],animatables:n,animations:a,duration:o.duration,delay:o.delay,endDelay:o.endDelay,startOnceDelay:r.startOnceDelay,pingPongDelayCorrection:r.pingPongDelayCorrection,pingPongEndDelayCorrection:r.pingPongEndDelayCorrection})}var kl=[],Fie=[],$A,i7t=function(){function e(){$A=requestAnimationFrame(t)}function t(r){var i=kl.length;if(i){for(var n=0;n<i;){var a=kl[n];a.paused?(kl.splice(n,1),i-=1):(a.tick(r),n++)}e()}else $A=cancelAnimationFrame($A)}return e}();function n7t(e){document.hidden?(kl.forEach(function(t){return t.pause(e.timeStamp)}),Fie=kl.slice(0),An.running=kl=[]):Fie.forEach(function(t){return t.play(e.timeStamp)})}typeof document<"u"&&document.addEventListener("visibilitychange",n7t);function An(e){e===void 0&&(e={});var t=0,r=0,i=0,n,a,o=0,s=null;function l(w){var S=window.Promise&&new Promise(function(A){return s=A});return w.finished=S,S}var u=r7t(e);l(u);function c(){var w=u.direction;w!=="alternate"&&(u.direction=w!=="normal"?"normal":"reverse"),u.reversed=!u.reversed,a.forEach(function(S){(S.loop===1||S.loop%2===0)&&(S.reversed=u.reversed)})}function h(){u.direction="normal",u.reversed=!1,a.forEach(function(w){return w.reversed=!1})}function d(w){return u.reversed?u.duration-w:w}function f(){t=0,r=d(u.currentTime)*(1/An.speed)}function p(w,S,A=!1){S&&(u.reversed?S.seek(S.duration*S.loop-(w-S.timelineOffset-S.pingPongDelayCorrection),A):S.seek(w-S.timelineOffset-S.startOnceDelay-S.pingPongDelayCorrection,A))}function v(w,S=!1){if(u.reversed)for(var A=o;A--;)p(w,a[A],S);else for(var M=0;M<o;M++)p(w,a[M],S)}function m(w){var ne,re,ae,he,se,fe,J,te,le,Ae;var S=0,A=u.animations,M=A.length;for(u.direction!=="alternate"&&((ne=u.parent)==null?void 0:ne.direction)==="alternate"?((re=u.parent)==null?void 0:re.rewind)===!1&&u.reversePlayback===!0&&u.rewind===!1&&((ae=u.parent)!=null&&ae.reversed&&u.direction==="alternate"?w=u.duration-u.delay+u.endDelay-w:w=u.duration+u.delay-u.endDelay-w):b(!1,(he=u.parent)==null?void 0:he.rewind,u.rewind,(se=u.parent)==null?void 0:se.reversePlayback,u.reversePlayback)&&((fe=u.parent)!=null&&fe.reversed&&u.direction==="alternate"?w=u.duration-u.delay+u.endDelay-w:w=u.duration+u.delay-u.endDelay-w);S<M;){var E=A[S],T=E.animatable,L=E.tweens,P=L.length-1,C=L[P];P&&(C=U7(L,function(ye){return w<ye.end})[0]||C);let xe;(J=u.parent)!=null&&J.reversed&&u.direction==="alternate"?xe=xu(w-C.start-C.endDelay,0,C.duration)/C.duration:xe=xu(w-C.start-C.delay,0,C.duration)/C.duration;for(var D=isNaN(xe)?1:C.easing(xe),I=C.to.strings,O=C.round,R=[],H=C.to.numbers.length,j=void 0,N=0;N<H;N++){var k=void 0;let ye,Se;u.direction!=="alternate"?((te=u.parent)==null?void 0:te.rewind)===!1&&u.reversePlayback===!0&&u.rewind===!1?(ye=C.to.numbers[N],Se=C.from.numbers[N]||0):(Se=C.to.numbers[N],ye=C.from.numbers[N]||0):b(!0,(le=u.parent)==null?void 0:le.rewind,u.rewind,(Ae=u.parent)==null?void 0:Ae.reversePlayback,u.reversePlayback)?(ye=C.to.numbers[N],Se=C.from.numbers[N]||0):(Se=C.to.numbers[N],ye=C.from.numbers[N]||0),C.isPath?k=XCt(C.value,D*Se):k=ye+D*(Se-ye),O&&(C.isColor&&N>2||(k=Math.round(k*O)/O)),R.push(k)}var G=I.length;if(!G)j=R[0];else{j=I[0];for(var Y=0;Y<G;Y++){I[Y];var F=I[Y+1],Z=R[Y];isNaN(Z)||(F?j+=Z+F:j+=Z+" ")}}o2e[E.type](T.target,E.property,j,T.transforms),E.currentValue=j,S++}}function g(w){u[w]&&!u.passThrough&&u[w](u)}function y(){u.remaining&&u.remaining!==!0&&u.remaining--}let x={0:!1,1:!0,2:!1,3:!0,4:!1,5:!1,6:!1,7:!1,8:!1,9:!0,10:!0,11:!1,12:!1,13:!1,14:!0,15:!0,16:!1,17:!0,18:!0,19:!1,20:!1,21:!1,22:!0,23:!0,24:!1,25:!0,26:!1,27:!0,28:!1,29:!1,30:!1,31:!1};function b(w,S,A,M,E){return x[w<<4|S<<3|A<<2|M<<1|E]}function _(w,S=!1){var L;var A=u.duration;let M=u.delay,E=A-u.endDelay;(L=u.parent)!=null&&L.reversed&&u.direction==="alternate"&&(M=u.endDelay,E=A-u.delay);var T=d(w);if(u.progress=xu(T/A*100,0,100),S||(u.reversePlayback=T<u.currentTime),o&&v(T,S),!u.began&&u.currentTime>=0&&(u.began=!0,g("begin")),!u.loopBegan&&u.currentTime>0&&(u.loopBegan=!0,g("loopBegin")),(u.reversed||T>=0)&&T<=M&&u.currentTime!==0&&(m(0),g("change")),(T>=E&&u.currentTime!==A+u.pingPongDelayCorrection||!A)&&(m(A),g("change")),T>M&&T<E?(u.changeBegan||(u.changeBegan=!0,u.changeCompleted=!1,g("changeBegin")),m(T),g("change")):u.changeBegan?(u.changeCompleted=!0,u.changeBegan=!1,g("change"),o&&g("timelineChangeComplete")):u.began&&T>E&&g("changeComplete"),u.currentTime=xu(T,0,A+u.pingPongDelayCorrection),u.began&&g("update"),w>=A)if(y(),!u.remaining)u.paused=!0,u.completed||(u.completed=!0,g("loopComplete"),g("complete"),!u.passThrough&&"Promise"in window&&(s(),l(u)));else{o?t+=u.duration/An.speed:t+=u.duration;for(let P of a)P.setStartTime(0),P.remaining=P.loop;g("loopComplete"),u.loopBegan=!1,u.direction==="alternate"?c():o&&h()}}return u.reset=function(){var w=u.direction;u.passThrough=!1,u.currentTime=0,u.progress=0,u.paused=!0,u.began=!1,u.loopBegan=!1,u.changeBegan=!1,u.completed=!1,u.changeCompleted=!1,u.reversePlayback=!1,u.reversed=w==="reverse",u.remaining=u.loop,a=u.children,o=a.length;for(var S=o;S--;)u.children[S].reset();m(u.reversed?u.duration:0)},u.setStartTime=function(w){t=w},u.set=function(w,S){return s2e(w,S),u},u.tick=function(w){i=w,t||(t=i),_((i+(r-t))*An.speed)},u.seek=function(w,S=!1){_(w-t,S)},u.pause=function(w){u.paused=!0,o&&(n=w??performance.now())},u.play=function(w){!u.paused||(u.completed&&u.reset(),u.paused=!1,kl.push(u),o&&n!==void 0&&(t+=(w??performance.now())-n),$A||i7t())},u.reverse=function(){c(),u.completed=!u.reversed,f()},u.restart=function(){u.reset(),u.play()},u.reset(),u.autoplay&&u.play(),u}function zie(e,t){for(var r=t.length;r--;)CH(e,t[r].animatable.target)&&t.splice(r,1)}function a7t(e){for(var t=n2e(e),r=kl.length;r--;){var i=kl[r],n=i.animations,a=i.children;zie(t,n);for(var o=a.length;o--;){var s=a[o],l=s.animations;zie(t,l),!l.length&&!s.children.length&&a.splice(o,1)}!n.length&&!a.length&&i.pause()}}function o7t(e,t){t===void 0&&(t={});var r=t.direction||"normal",i=t.easing?SH(t.easing):null,n=t.grid,a=t.axis,o=t.from||0,s=o==="first",l=o==="center",u=o==="last",c=Xt.arr(e),h=parseFloat(c?e[0]:e),d=c?parseFloat(e[1]):0,f=dd(c?e[1]:e)||0,p=t.start||0+(c?h:0),v=[],m=0;return function(g,y,x){if(s&&(o=0),l&&(o=(x-1)/2),u&&(o=x-1),!v.length){for(var b=0;b<x;b++){if(!n)v.push(Math.abs(o-b));else{var _=l?(n[0]-1)/2:o%n[0],w=l?(n[1]-1)/2:Math.floor(o/n[0]),S=b%n[0],A=Math.floor(b/n[0]),M=_-S,E=w-A,T=Math.sqrt(M*M+E*E);a==="x"&&(T=-M),a==="y"&&(T=-E),v.push(T)}m=Math.max.apply(Math,v)}i&&(v=v.map(function(P){return i(P/m)*m})),r==="reverse"&&(v=v.map(function(P){return a?P<0?P*-1:-P:Math.abs(m-P)}))}var L=c?(d-h)/m:h;return p+L*(Math.round(v[y]*100)/100)+f}}function s7t(e){e===void 0&&(e={});var t=An(e);return t.duration=0,t.add=function(r,i){var n=kl.indexOf(t),a=t.children;n>-1&&kl.splice(n,1);function o(d){d.passThrough=!0}for(var s=0;s<a.length;s++)o(a[s]);var l=j7(r,$O(AH,e));l.targets=l.targets||e.targets;var u=t.duration;l.autoplay=!1,l.timelineOffset=Xt.und(i)?u:DH(i,u),o(t);var c=An(l);o(c),a.push(c),c.parent=t;var h=l2e(a,e);return t.delay=h.delay,t.endDelay=h.endDelay,t.duration=h.duration,c.loop===!0&&(t.duration=1/0),t.seek(0),t.reset(),t.autoplay&&t.play(),t},t}An.version="3.2.0";An.speed=1;An.running=kl;An.remove=a7t;An.get=PH;An.set=s2e;An.convertPx=MH;An.path=YCt;An.setDashoffset=WCt;An.stagger=o7t;An.timeline=s7t;An.easing=SH;An.penner=Qye;An.random=function(e,t){return Math.floor(Math.random()*(t-e+1))+e};var u2e=An,Hie=new U,Uie=new U,Gie=new Jt;function l7t(e,t,r,i){if(i===0)return r.copy(e);if(i===1)return r.copy(t);let n=e.w*t.w+e.x*t.x+e.y*t.y+e.z*t.z;if(n>=1)return r.copy(e);let a=1-n*n;if(a<=Number.EPSILON){let c=1-i;return r.w=c*e.w+i*t.w,r.x=c*e.x+i*t.x,r.y=c*e.y+i*t.y,r.z=c*e.z+i*t.z,r.normalize(),r}let o=Math.sqrt(a),s=Math.atan2(o,n),l=Math.sin((1-i)*s)/o,u=Math.sin(i*s)/o;return r.w=e.w*l+t.w*u,r.x=e.x*l+t.x*u,r.y=e.y*l+t.y*u,r.z=e.z*l+t.z*u,r}function Va(e,t,r,i,n,a){let o=r[e]!==void 0?r[e]:void 0,s=i[e];if(s==null)return;let l=o!=null?typeof o=="string"?Number(n.getVariable(o)??0):o:t[e],u=typeof s=="string"?Number(n.getVariable(s)??0):s;if(l!==u)return{update:c=>{let h=vt.lerp(l,u,c);a?t[e]=Math.trunc(h):t[e]=h},start:()=>{t[e]=l},end:()=>{t[e]=u}}}function LH(e,t,r,i,n,a){let o=r[e]?r[e]:void 0,s=i[e];if(!s)return;let l=t[e],u=[...o??l].map(h=>typeof h=="string"?Number(n.getVariable(h)??0):h),c=[...s].map(h=>typeof h=="string"?Number(n.getVariable(h)??0):h);if(!(u.length!==c.length||Iz(u,c)))return{update:h=>{u.forEach((d,f)=>{let p=vt.lerp(d,c[f],h);t[e][f]=a?Math.trunc(p):p})},start:()=>{Object.assign(t[e],u)},end:()=>{Object.assign(t[e],c)}}}function O6(e,t,r){return t.forEach((i,n)=>{e.setComponent(n,typeof i=="string"?Number(r.getVariable(i)??0):i)}),e}function jie(e,t,r,i,n){let a=r[e]?r[e]:void 0,o=i[e];if(!o)return;let s=t[e],l=a?O6(new U,a,n):s.clone(),u=O6(new U,o,n);if(!l.equals(u))return{update:c=>{s.lerpVectors(l,u,c)},start:()=>{s.copy(l)},end:()=>{s.copy(u)}}}function Wie(e,t,r){return t.forEach((i,n)=>{e.setComponent(n,typeof i=="string"?Number(r.getVariable(i)??0):i)}),e}function B6(e,t,r,i,n){let a=r[e]?r[e]:void 0,o=i[e];if(!o)return;let s=t[e],l=!(s instanceof me),u=s instanceof me?s:new me().fromArray(s),c=a?Wie(new me,a,n):u.clone(),h=Wie(new me,o,n);if(!c.equals(h))return{update:d=>{u.lerpVectors(c,h,d),l&&(t[e]=u.toArray())},start:()=>{u.copy(c),l&&(t[e]=u.toArray())},end:()=>{u.copy(h),l&&(t[e]=u.toArray())}}}function u7t(e,t,r,i){let n=r[e]?r[e]:void 0,a=i[e];if(!a)return;let o=t[e],s=n?new Ke().fromArray(n):o.clone(),l=new U,u=new Jt,c=new U;s.decompose(l,u,c);let h=new Ke().fromArray(a),d=new U,f=new Jt,p=new U;if(h.decompose(d,f,p),!s.equals(h))return{update:v=>{Gie.slerpQuaternions(u,f,v),Hie.lerpVectors(l,d,v),Uie.lerpVectors(c,p,v),o.compose(Hie,Gie,Uie)},start:()=>{o.compose(l,u,c)},end:()=>{o.compose(d,f,p)}}}function c7t(e,t,r,i,n){let a=r[e]?r[e]:void 0,o=i[e];if(!o)return;let s=t[e],l=a?typeof a=="string"?n.getColor(a).clone():new Vt().setRGB(a.r,a.g,a.b):s.clone(),u=typeof o=="string"?n.getColor(o).clone():new Vt().setRGB(o.r,o.g,o.b);if(l.equals(u))return;let c=s.clone();return{update:h=>{var d,f;c.lerpColors(l,u,h),(f=(d=t[e])==null?void 0:d.copy)==null||f.call(d,c)},start:()=>{c.copy(l)},end:()=>{c.copy(u)}}}function X5(e,t,r,i,n){let a=r[e]?r[e]:void 0,o=i[e];if(!o)return;let s=t[e],l=new qa(s.r,s.g,s.b,s.a),u=a?typeof a=="string"?n.getColor(a).clone():new qa(a.r,a.g,a.b,a.a):l.clone(),c=typeof o=="string"?n.getColor(o).clone():new qa(o.r,o.g,o.b,o.a);if(!u.equals(c))return{update:h=>{l.lerpColors(u,c,h);let d=vt.lerp(u.a,c.a,h);l.a=d,t[e]={r:l.r,g:l.g,b:l.b,a:l.a}},start:()=>{l.copy(u)},end:()=>{l.copy(c)}}}function Lp(e,t,r,i,n){if(typeof t[e]=="number")return Va(e,t,r??{},i,n);if(Array.isArray(t[e]))return LH(e,t,r??{},i,n)}function h7t(e,t,r,i){var s,l,u,c;let n=[],a=e.cameraType==="OrthographicCamera"?(s=t.orthographic)==null?void 0:s.zoom:(l=t.perspective)==null?void 0:l.zoom,o=e.cameraType==="OrthographicCamera"?(u=r.orthographic)==null?void 0:u.zoom:(c=r.perspective)==null?void 0:c.zoom;if(o!==void 0){let h=a??e.zoom,d=o;h!==d&&n.push({update:f=>{e.zoom=vt.lerp(h,d,f),e.updateProjectionMatrix()},start:()=>{e.zoom=h,e.updateProjectionMatrix()},end:()=>{e.zoom=d,e.updateProjectionMatrix()}})}if(r.targetOffset!==void 0){let h=Va("targetOffset",e,t,r,i);h&&n.push(h)}return n}function d7t(e,t,r,i){if(r.scaleBaked===void 0)return;let n=(t.scaleBaked??e.data.geometry.scaleBaked).map(s=>typeof s=="string"?Number(i.getVariable(s)??0):s),a=r.scaleBaked.map(s=>typeof s=="string"?Number(i.getVariable(s)??0):s);if(Ev.isEqual(n,a))return;let o=[];return o.push({update:s=>{e.updateGeometryInteractions({scaleBaked:[vt.lerp(n[0],a[0],s),vt.lerp(n[1],a[1],s),vt.lerp(n[2],a[2],s)]},i),e.invalidateDownstreamBooleanData(),e.refreshAttachedClonersInteractions()},start:()=>{e.updateGeometryInteractions({scaleBaked:n},i),e.invalidateDownstreamBooleanData(),e.refreshAttachedClonersInteractions()},end:()=>{e.updateGeometryInteractions({scaleBaked:a},i),e.invalidateDownstreamBooleanData(),e.refreshAttachedClonersInteractions()}}),o}function f7t(e,t,r,i){if(!r.extrusion)return;let n=e.extrusion,a=t.extrusion??{},o=r.extrusion,s=[];return Gge.forEach(l=>{let u=Lp(l,n,a,o,i);u&&s.push(u)}),s}function p7t(e,t,r,i){let n=[];if(!("geometry"in r))return n;let a=e.geometry.userData.parameters,o="geometry"in t?t.geometry:{},s=r.geometry;if(e instanceof Jw){let l=d7t(e,o,s,i);l&&n.push(...l)}else{let l={};if(Object.assign(l,Wc(a,HP),Wc(o,HP)),HP.forEach(u=>{let c=Lp(u,l,o,s,i);c&&n.push(c)}),e instanceof mH){Object.assign(l,{extrusion:{...a.extrusion}});let u=f7t(l,o,s,i);u&&n.push(...u)}n.length&&n.push({update:u=>{e.updateGeometryInteractions(l,i),e.updateGeometryGroupsIfNeeded(),e.refreshAttachedClonersInteractions()},start:u=>{e.updateGeometryInteractions(l,i),e.updateGeometryGroupsIfNeeded(),e.refreshAttachedClonersInteractions()},end:u=>{e.updateGeometryInteractions(l,i),e.updateGeometryGroupsIfNeeded(),e.refreshAttachedClonersInteractions()}})}return n}function v7t(e,t,r,i){let n=[];if(r.intensity!==void 0){let a=Va("intensity",e,t,r,i);a&&n.push(a)}if(r.color!==void 0){let a=c7t("color",e,t,r,i);a&&n.push(a)}return n}function m7t(e,t,r,i){let n=[];if(Array.isArray(e.material)){if(!("materials"in r&&r.materials))return n;let a="materials"in t&&t.materials?t.materials:[],o=r.materials;e.material.forEach((s,l)=>{if(!o[l])return;let u=a[l]??{},c=o[l];typeof u=="string"||typeof c=="string"||n.push(...qie(s,u,c,i))})}else{if(!("material"in r&&r.material))return n;let a="material"in t&&t.material?t.material:{},o=r.material;if(typeof a=="string"||typeof o=="string")return n;n.push(...qie(e.material,a,o,i))}return n}function qie(e,t,r,i){var o;let n=[],a=Jg(r,i)||!!t.layers&&Jg(t,i);n.push(C7t(e,a));for(let s of e.layers){let l=(o=t.layers)==null?void 0:o.data(s.uuid),u=r.layers.data(s.uuid);if(!u||s.type!=="light"&&(!(s.visible??!0)||!(u.visible??!0)))continue;let c=s.getNames().filter(h=>!zge.some(d=>h.includes(d)));for(let h of c)try{let d=s.getValue(h),f;if(h==="colors")f=A7t(s,l,u,h);else if(Array.isArray(d))h==="steps"&&(f=_7t(s,l,u,h));else if(typeof d=="number")f=g7t(s,l,u,h,i);else{if(typeof d=="boolean")continue;d instanceof me?f=y7t(s,l,u,h):d instanceof U?f=x7t(s,l,u,h,i):d instanceof qa?f=w7t(s,l,u,h,i):d instanceof Vt?f=b7t(s,l,u,h,i):"isTexture"in d&&(f=S7t(s,l,u,h))}f&&(Array.isArray(f)?n.push(...f):n.push(f))}catch(d){console.error(`lerpMaterial: unexpected material layer for ${h}`,d)}}return n}function g7t(e,t,r,i,n){if(!e.hasValue(i)||!(i in r))return;let a=t?t[i]:e.getValue(i),o=r[i],s=typeof a=="string"?Number(n.getVariable(a)??0):a,l=typeof o=="string"?Number(n.getVariable(o)??0):o;if(s!==l)return{update:u=>{e.setValue(i,vt.lerp(s,l,u))},start:()=>{e.setValue(i,s)},end:()=>{e.setValue(i,l)}}}function y7t(e,t,r,i){if(!e.hasValue(i)||!(i in r))return;let n=e.getValue(i),a=t?new me().fromArray(t[i]):n.clone(),o=new me().fromArray(r[i]);if(!a.equals(o))return{update:s=>{n.lerpVectors(a,o,s)},start:()=>{n.copy(a)},end:()=>{n.copy(o)}}}function x7t(e,t,r,i,n){if(!e.hasValue(i)||!(i in r))return;let a=e.getValue(i),o=t?t[i]:void 0,s=r[i],l=o?O6(new U,o,n):a.clone(),u=O6(new U,s,n);if(!l.equals(u))return{update:c=>{a.lerpVectors(l,u,c)},start:()=>{a.copy(l)},end:()=>{a.copy(u)}}}function b7t(e,t,r,i,n){if(!e.hasValue(i)||!(i in r))return;let a=t?t[i]:void 0,o=r[i],s=e.getValue(i),l=a?typeof a=="string"?n.getColor(a).clone():new Vt().setRGB(a.r,a.g,a.b):s.clone(),u=typeof o=="string"?n.getColor(o).clone():new Vt().setRGB(o.r,o.g,o.b);if(l.equals(u))return;let c=s.clone();return{update:h=>{e.getValue(i)!==c&&e.setValue(i,c),c.lerpColors(l,u,h)},start:()=>{c.copy(l)},end:()=>{c.copy(u)}}}function w7t(e,t,r,i,n){if(!e.hasValue(i)||!(i in r))return;let a=t?t[i]:void 0,o=r[i],s=e.getValue(i),l=a?typeof a=="string"?n.getColor(a).clone():new Vt().setRGB(a.r,a.g,a.b):s.clone(),u=typeof o=="string"?n.getColor(o).clone():new qa(o.r,o.g,o.b,o.a);if(l.equals(u))return;let c=s.clone();return{update:h=>{e.getValue(i)!==c&&e.setValue(i,c),c.lerpColors(l,u,h)},start:()=>{c.copy(l)},end:()=>{c.copy(u)}}}function _7t(e,t,r,i="steps"){if(!e.hasValue(i)||!(i in r))return;let n=[],a=e.getValue(i),o=t?t[i]:a,s=r[i];return Iz(o,s)||n.push({update:l=>{let u=[...a];for(let c=0;c<a.length;++c){let h=o[c],d=s[c];u[c]=vt.lerp(h,d,l)}e.setValue(i,u)},start:()=>{e.setValue(i,o)},end:()=>{e.setValue(i,s)}}),n.length?n:void 0}function A7t(e,t,r,i="colors"){if(!e.hasValue(i)||!(i in r))return;let n=[],a=e.getValue(i),o=t?t[i]:a.map(l=>l.toArray()),s=r[i];for(let l=0;l<a.length;++l){let u=[...o[l]],c=[...s[l]];s6.isEqual(u,c)||n.push({update:h=>{a[l].fromArray(s6.lerp(u,c,h))},start:()=>{a[l].fromArray(u)},end:()=>{a[l].fromArray(c)}})}return n.length?n:void 0}function S7t(e,t,r,i="texture"){var m,g;if(!e.hasValue(i)||!(i in r))return;let n=e.getNode("rotation"),a=((m=t==null?void 0:t[i])==null?void 0:m.rotation)??0,o=((g=r[i])==null?void 0:g.rotation)??0;if(n&&a!==o)return{update:y=>{n.value=vt.lerp(a,o,y)*vt.DEG2RAD},start:()=>{n.value=a*vt.DEG2RAD},end:()=>{n.value=o*vt.DEG2RAD}};let s=e.getNode("mat");if(!s)return;let l=t?t[i]:s,u=r[i],c=[...l.repeat],h=[...l.offset],d=[...u.repeat],f=[...u.offset],p=l.rotation??0,v=u.rotation??0;if(!id.isEqual(c,d)||!id.isEqual(h,f)||p!==v)return{update:y=>{s.repeat=id.lerp(c,d,y),s.offset=id.lerp(h,f,y),s.rotation=vt.lerp(p,v,y),s.updateMatrix()},start:()=>{s.repeat=[...c],s.offset=[...h],s.rotation=p,s.updateMatrix()},end:()=>{s.repeat=[...d],s.offset=[...f],s.rotation=v,s.updateMatrix()}}}function C7t(e,t){return{update:()=>{e.transparent=t}}}var BD=new U,Yie=new Qn;function E7t(e,t,r,i,n){var p,v,m,g,y,x;let a=[],o,s,l,u,c,h,d,f;if(e instanceof Sa?(o=B6("position",e,t,r,n),o&&a.push(o),l=Va("rotation",e,t,r,n),l&&a.push(l),u=B6("shear",e,t,r,n),u&&a.push(u)):(f={slide:((p=t.pathSnapping)==null?void 0:p.slide)??((v=e.updatedPathSnapping)==null?void 0:v.slide)??((m=e.dataPatched.pathSnapping)==null?void 0:m.slide)??0,offset:((g=t.pathSnapping)==null?void 0:g.offset)??((y=e.updatedPathSnapping)==null?void 0:y.offset)??((x=e.dataPatched.pathSnapping)==null?void 0:x.offset)??0},h=Va("slide",f,t.pathSnapping??e.updatedPathSnapping??e.dataPatched.pathSnapping,r.pathSnapping??e.dataPatched.pathSnapping,n),h&&a.push(h),d=Va("offset",f,t.pathSnapping??e.updatedPathSnapping??e.dataPatched.pathSnapping,r.pathSnapping??e.dataPatched.pathSnapping,n),d&&a.push(d),!h&&!d&&(o=jie("position",e,t,r,n),o&&a.push(o),s=jie("scale",e,t,r,n),s&&a.push(s),l=M7t(e,t,r,i,n),l&&a.push(l),c=u7t("hiddenMatrix",e,t,r),c&&a.push(c))),o||s||l||c||h||d){let b=e instanceof Sa?()=>{e.updateWorldMatrix(!0,!1,!0),e.resetBBoxNeedsUpdate()}:()=>{var _;e.updateMatrix(),e.hasNonUniformScale&&(e.updateMatrixWorld(),e.updateMatrixWorldSVD()),(_=e.parent)!=null&&_.matrixWorldFusedFalse&&(e.matrixWorld.multiplyMatrices(e.parent.matrixWorldFusedFalse,e.matrix),e.matrixWorldNeedsUpdate=!1),hu(e)&&nd(e.parent)&&e.invalidateDownstreamBooleanData(!0),e.updatePathSnapping(Object.assign({},t.pathSnapping,f))};a.push({update:b,start:b,end:b})}return a}function M7t(e,t,r,i,n){var c;let a=t!=null&&t.rotation?t.rotation.map(h=>(typeof h=="string"?Number(n.getVariable(h)??0):h)*vt.DEG2RAD):void 0,o=(c=r.rotation)==null?void 0:c.map(h=>(typeof h=="string"?Number(n.getVariable(h)??0):h)*vt.DEG2RAD);if(!o)return;let s=a?new U().fromArray(a):new U().setFromEuler(e.rotation),l=new U().fromArray(o);if(s.equals(l))return;let u=BD.subVectors(l,s);if(i&&u.toArray().every(h=>Math.abs(h)<2*Math.PI)){let h=new Jt().setFromEuler(Yie.setFromVector3(s)),d=new Jt().setFromEuler(Yie.setFromVector3(l));return{update:f=>{l7t(h,d,e.quaternion,f)},start:()=>{e.rotation.setFromVector3(s)},end:()=>{e.rotation.setFromVector3(l)}}}else return{update:h=>{BD.lerpVectors(s,l,h),e.rotation.setFromVector3(BD)},start:()=>{e.rotation.setFromVector3(s)},end:()=>{e.rotation.setFromVector3(l)}}}function T7t(e,t,r,i){let n=[];if(!("cloner"in r)||!e.cloner)return n;let a=e.cloner,o="cloner"in t?t.cloner:{},s=r.cloner;Rge.forEach(f=>{let p;f==="count"?p=Va("count",a.parameters,o,s,i,!0):p=Lp(f,a.parameters,o??{},s,i),p&&n.push(p)});let l=P7t(a,o,s,i);l!=null&&l.length&&n.push(...l);let u=D7t(a,o,s,i);u!=null&&u.length&&n.push(...u);let c=I7t(a,o,s,i);c!=null&&c.length&&n.push(...c);let h=L7t(a,o,s,i);h!=null&&h.length&&n.push(...h);let d=k7t(a,o,s,i);return d!=null&&d.length&&n.push(...d),n.length&&n.push({update:()=>{a.update()}}),n}function P7t(e,t,r,i){if(e.parameters.type!=="radial")return;let n=t.radial,a=r.radial;if(!a)return;let o=e.parameters.radial,s=[];return Oge.forEach(l=>{let u=Lp(l,o,n??{},a,i);u&&s.push(u)}),s}function D7t(e,t,r,i){if(e.parameters.type!=="linear")return;let n=t.linear,a=r.linear;if(!a)return;let o=[],s=e.parameters.linear;return Bge.forEach(l=>{let u=Lp(l,s,n??{},a,i);u&&o.push(u)}),o}function I7t(e,t,r,i){if(e.parameters.type!=="grid")return;let n=t.grid,a=r.grid;if(!a)return;let o=[],s=e.parameters.grid;return Nge.forEach(l=>{let u;l==="count"?u=LH(l,s,n??{},a,i,!0):u=Lp(l,s,n??{},a,i),u&&o.push(u)}),o}function L7t(e,t,r,i){if(e.parameters.type!=="toObject")return;let n=t.toObject,a=r.toObject;if(!a)return;let o=[],s=e.parameters.toObject;return Vge.forEach(l=>{let u;l==="count"?u=Va(l,s,n??{},a,i,!0):u=Lp(l,s,n??{},a,i),u&&o.push(u)}),o}function k7t(e,t,r,i){if(!e.parameters.randomness)return;let n=t.randomnessObject,a=r.randomnessObject;if(!a)return;let o=[],s=e.parameters.randomnessObject;return Fge.forEach(l=>{let u=Lp(l,s,n??{},a,i);u&&o.push(u)}),o}function R7t(e,t){return{update:()=>{e instanceof ma&&(e.fill.enabled=t)}}}function O7t(e,t){return{update:()=>{e instanceof ma&&(e.stroke.enabled=t)}}}function B7t(e,t){return{update:()=>{e instanceof ma&&(e.dropShadow.enabled=t)}}}function N7t(e,t){return{update:()=>{e instanceof ma&&(e.innerShadow.enabled=t)}}}function V7t(e,t){return{update:()=>{e instanceof ma&&(e.backgroundBlur.enabled=t)}}}function F7t(e,t){return{update:()=>{e instanceof ma&&(e.layerBlur.enabled=t)}}}function z7t(e,t,r,i,n){let a=[],o,s,l,u,c,h,d,f,p,v,m,g,y,x,b;if("width"in e&&(o=Va("width",e,t,r,n),o&&a.push(o)),"height"in e&&(s=Va("height",e,t,r,n),s&&a.push(s)),e instanceof ma||e instanceof Yc){let _={...t.fill},w={...r.fill};_.enabled!==void 0&&_.enabled!==w.enabled&&(a.push(R7t(e,!0)),_.enabled||Object.assign(_,{enabled:!0,color:{..._.color,a:0}}),w.enabled||Object.assign(w,{enabled:!0,color:{...w.color,a:0}})),l=X5("color",e.fill,_,w,n),l&&a.push(l)}if(e instanceof ma){let _={...t.stroke},w={...r.stroke};(_.enabled||w.enabled)&&(a.push(O7t(e,!0)),_.enabled||Object.assign(_,{enabled:!0,color:{..._.color,a:0}}),w.enabled||Object.assign(w,{enabled:!0,color:{...w.color,a:0}})),u=X5("color",e.stroke,_,w,n),u&&a.push(u),c=Va("thickness",e.stroke,_,w,n),c&&a.push(c)}if(e instanceof ma){let _={...t.dropShadow},w={...r.dropShadow};(_.enabled||w.enabled)&&(a.push(B7t(e,!0)),_.enabled||Object.assign(_,{enabled:!0,color:{..._.color,a:0}}),w.enabled||Object.assign(w,{enabled:!0,color:{...w.color,a:0}})),h=X5("color",e.dropShadow,_,w,n),h&&a.push(h),d=Va("blurRadius",e.dropShadow,_,w,n),d&&a.push(d),p=Va("spread",e.dropShadow,_,w,n),p&&a.push(p),f=B6("offset",e.dropShadow,_,w,n),f&&a.push(f)}if(e instanceof ma){let _={...t.innerShadow},w={...r.innerShadow};(_.enabled||w.enabled)&&(a.push(N7t(e,!0)),_.enabled||Object.assign(_,{enabled:!0,color:{..._.color,a:0}}),w.enabled||Object.assign(w,{enabled:!0,color:{...w.color,a:0}})),v=X5("color",e.innerShadow,_,w,n),v&&a.push(v),m=Va("blurRadius",e.innerShadow,_,w,n),m&&a.push(m),y=Va("spread",e.innerShadow,_,w,n),y&&a.push(y),g=B6("offset",e.innerShadow,_,w,n),g&&a.push(g)}if(e instanceof ma||e instanceof Yc){let _={...t.backgroundBlur},w={...r.backgroundBlur};(_.enabled||w.enabled)&&(a.push(V7t(e,!0)),_.enabled||Object.assign(_,{enabled:!0,radius:0}),w.enabled||Object.assign(w,{enabled:!0,radius:0})),x=Va("radius",e.backgroundBlur,_,w,n),x&&a.push(x)}if(e instanceof ma){let _={...t.layerBlur},w={...r.layerBlur};(_.enabled||w.enabled)&&(a.push(F7t(e,!0)),_.enabled||Object.assign(_,{enabled:!0,radius:0}),w.enabled||Object.assign(w,{enabled:!0,radius:0})),b=Va("radius",e.layerBlur,_,w,n),b&&a.push(b)}if(e instanceof Yc||e instanceof $4){let _=LH("cornerRadius",e,t,r,n);_&&a.push(_)}return a}function Xie(e,t,r,i,n){let a=[];return e.data.visible&&a.push(...E7t(e,t,r,n,i)),e instanceof Sa?a.push(...z7t(e,t,r,n,i)):(e.data.visible&&a.push(...T7t(e,t,r,i)),hu(e)?(e instanceof xo&&e.data.visible&&a.push(...p7t(e,t,r,i)),e.data.visible&&a.push(...m7t(e,t,r,i))):LAt(e)?e.data.visible&&a.push(...v7t(e,t,r,i)):IAt(e)&&a.push(...h7t(e,t,r,i))),a.length?{update:o=>{a.forEach(s=>s.update(o))},start:o=>{a.forEach(s=>{var l;return(l=s.start)==null?void 0:l.call(s,o)})},end:o=>{a.forEach(s=>{var l;return(l=s.end)==null?void 0:l.call(s,o)})}}:void 0}var Zie=new U;function kH(e,t,r=!1){var a;let i=[],n=o=>{let s=o.data;delete o.states,o.currentState=null,o.reversibleToState=null,o.currentTransitionEvent=null;for(let l of s.states){let u={...l.data};o.states||(o.states={}),o.states[l.id]=iv.patch(s,u)}Kie(e.scene,o,null,t,s.events.find(l=>l.data.type==="Follow"||l.data.type==="LookAt")!==void 0),Qie(e)};e.scene.traverse2D(n),e.traverseChildren(o=>{var c,h,d,f,p,v;if(r&&((c=o.rigidBody)==null||c.setTranslation(o.position0,!0),(h=o.rigidBody)==null||h.setRotation(o.rotation0,!0),(d=o.rigidBody)==null||d.setLinvel(Zie,!0),(f=o.rigidBody)==null||f.setAngvel(Zie,!0)),!Gr.is(o))return;let s=o.uuid,l=o.data;if(delete o.states,o.uuid===i2)return;let u=!1;i.some(m=>{var g;return(g=e.scene.find(s))==null?void 0:g.isDescendantOf(m)})?u=!0:((p=l.physics)==null?void 0:p.fusedBody)===!0&&l.physics.rigidBody==="dynamic"&&i.push(s),o.data=l,o.currentState=null,o.reversibleToState=null,o.currentTransitionEvent=null;for(let m of l.states){let g={...m.data};e.data.globalPhysics.usePhysics===!0&&l.physics&&(l.physics.rigidBody==="dynamic"||u)&&(m.data.position!==void 0&&delete g.position,m.data.rotation!==void 0&&delete g.rotation,m.data.hiddenMatrix!==void 0&&delete g.hiddenMatrix),o.states||(o.states={}),o.states[m.id]=ev.patch(l,g)}Kie(e.scene,o,null,t,l.events.find(m=>m.data.type==="Follow"||m.data.type==="LookAt")!==void 0),o instanceof mo&&o.frame&&(o.frame.traverse(m=>n(m)),(v=o.uiCanvas)==null||v.applySize())}),Qie(e),e.frame&&(e.frame.traverse(o=>n(o)),(a=e.uiCanvas)==null||a.applySize())}function Qie(e){e.traverseEntity(t=>{for(let r of t.data.events){let i=[];switch(r.data.type){case"Follow":case"MouseHover":case"Scroll":case"MouseDown":case"MouseUp":case"MousePress":case"KeyUp":case"KeyDown":case"KeyPress":case"Collision":i.push(...r.data.actions);break;case"GameControl":for(let n of Object.values(r.data.gameActions))i.push(...n);break;case"DragDrop":i.push(...r.data.dragDropActions.drag,...r.data.dragDropActions.drop);break;case"Conditional":i.push(...r.data.inActions,...r.data.outActions);break}for(let n of i)if(n.data.type==="Create"&&n.data.hideBase==="Yes"){let a=e.scene.find(n.data.object);a&&(a.visible=!1)}}})}function Kie(e,t,r,i,n=!1){if(t instanceof xo&&t.removeInteractionGeometry(i),t instanceof Sa?t.changeSelectedState(r,{shared:i},n):t.changeSelectedState(r,{scene:e,shared:i},n),t instanceof xo&&t.updateGeometryGroupsIfNeeded(),t instanceof wo&&t.updateCameraState(t.dataPatched,{scene:e,shared:i}),!(t instanceof Sa)){if(t.cloner)for(let a of t.cloner.children)a.playModeVisible=void 0;t.updateVisible()}}function c2e(e){let t;if(e.easing===5){let{control1:r,control2:i}=e;t=`cubicBezier(
			${r[0]}, ${r[1]}, ${i[0]}, ${i[1]}
		)`}else if(e.easing===6){let{mass:r,stiffness:i,damping:n,velocity:a}=e;t=`spring( ${r}, ${i}, ${n}, ${a} )`}else{let r;switch(e.easing){case 0:r=Cf.linear;break;case 1:r=Cf.ease;break;case 2:r=Cf.easeIn;break;case 3:r=Cf.easeOut;break;case 4:r=Cf.easeInOut;break;default:r=Cf.linear}let[i,n,a,o]=r;t=`cubicBezier( ${i}, ${n}, ${a}, ${o} )`}return{duration:Math.max(e.duration,1e-4),easing:t}}function tB(e){let t={delay:0,loop:e.repeat===-1?!0:e.repeat+1};if(e.repeat===0)t.direction="normal",t.rewind=!1;else switch(e.direction){case"pingpong":t.direction="alternate",t.rewind=!1;break;case"pingpong-rewind":t.direction="alternate",t.rewind=!0;break;default:t.direction="normal",t.rewind=!1;break}switch(t.delay=0,t.endDelay=0,t.startOnceDelay=0,t.pingPongDelayCorrection=0,t.pingPongEndDelayCorrection=0,e.delayDirection){case"start-once":t.startOnceDelay=e.delay;break;case"start":t.delay=e.delay;break;case"end":t.endDelay=e.delay;break;case"start-end":case void 0:t.delay=e.delay,t.endDelay=e.delay;break}return t.direction==="alternate"&&(t.delay/=2,t.endDelay/=2,e.delayDirection==="start"?(t.pingPongDelayCorrection=t.delay,typeof t.loop=="number"&&t.loop%2===0&&(t.pingPongEndDelayCorrection=t.delay)):e.delayDirection==="end"?typeof t.loop=="number"&&t.loop%2!==0&&(t.pingPongEndDelayCorrection=t.endDelay):e.delayDirection==="start-end"&&(t.pingPongDelayCorrection=t.delay,t.pingPongEndDelayCorrection=t.endDelay)),t}var H7t={type:"beginState"},U7t={type:"completeState",isfromEntity:!1},Jie=class{constructor(e,t,r,i,n,a){if(this.object=e,this.data=i,this.sharedAssets=n,this.allowSlerp=a,this.targets={t:0},this.firstLoop=!0,this._changeBegan=!1,this._changeCompleted=!0,this.onChange=()=>{this.callback&&(this.callback.update(this.targets.t),this.object.requestRender()),this.targets.t===0||this.targets.t===1?this._changeCompleted||(this._changeCompleted=!0,this._changeBegan=!1,this.onChangeComplete()):(this._changeCompleted&&(this._changeCompleted=!1),this._changeBegan||(this._changeBegan=!0,this.onChangeBegin()))},this.onChangeBegin=()=>{this.object.reversibleToState=this.to.id;let o=this.targets.t>.5?this.from.id:this.to.id;this.object.prevState!==this.object.currentState&&(this.object.prevState=this.object.currentState),this.object.currentState=o,this.object.dispatchEvent({type:"beginState",state:o}),this.object instanceof Sa||this.object.traverseEntity(s=>{s!==this.object&&s instanceof wo&&s.dispatchEvent(H7t)})},this.onChangeComplete=()=>{this.firstLoop&&(this.onFirstLoop(),this.firstLoop=!1),this.object.reversibleToState=this.to.id;let o=this.targets.t<.5?this.from.id:this.to.id;this.object.prevState!==this.object.currentState&&(this.object.prevState=this.object.currentState),this.object.currentState=o,this.object.dispatchEvent({type:"completeState",state:o}),this.object instanceof Sa||this.object.traverseEntity(s=>{s!==this.object&&s instanceof wo&&s.dispatchEvent(U7t)})},this.onFirstLoop=()=>{this.useCurrentState&&(this.callback=Xie(this.object,this.from.data,this.to.data,this.sharedAssets,this.allowSlerp))},t===void 0){let o=e8(this.object,this.object.currentState===r?this.object.prevState:this.object.currentState);if(!o)throw new Error("Missing property");this.from=o}else{let o=e8(this.object,t);if(!o)throw new Error("Missing property");this.from=o}if(r===void 0)throw new Error("Missing property");{let o=e8(this.object,r);if(!o)throw new Error("Missing property");this.to=o}this.useCurrentState=t===void 0||r===void 0,this.params={targets:this.targets,t:1,autoplay:!1,...tB(i),...c2e(i),change:this.onChange},this.callback=Xie(this.object,t===void 0?{}:this.from.data,r===void 0?{}:this.to.data,this.sharedAssets,this.allowSlerp)}get changeBegan(){return this._changeBegan}get changeCompleted(){return this._changeCompleted}},h2e=class extends Ka{constructor(e,t,r,i,n){var o;if(super(),this.eventType=e,this.data=t,this.page=r,this.shared=i,this.condition=n,this.toggleIsForward=!1,this.timelineNeedsRebuild=!1,this.hasPlayedOnce=!1,this.onTimelineChangeComplete=()=>{var s;this.data.tweens[0].data.direction!=="normal"&&(this.toggleIsForward=!this.toggleIsForward),this.timelineNeedsRebuild!==!1&&((s=this.timeline)==null||s.pause(),this.buildTimeline({isForward:this.toggleIsForward,needsRebuild:!1,isRebuild:!0}),this.timeline.play())},!t.object)throw new Error("Missing property");let a=this.page.scene.find(t.object)??((o=this.page.uiCanvas)==null?void 0:o.find(t.object))??this.page.scene.find2DInUIObjects(t.object);if(!a)throw new Error("Missing property");if(!a.states)throw new Error("Missing property");if(this.object=a,t.tweens.length<2)throw new Error("Missing property");this.tweens=Array(this.data.tweens.length-1),this.startOnceDelay=t.tweens[0].data.delayDirection==="start-once"?t.tweens[0].data.delay:0,this.init()}get playing(){var e;return((e=this.timeline)==null?void 0:e.paused)===!1}get changeBegan(){return this.tweens.some(e=>e.changeBegan)??!1}init(){this.initialCurrentState=e8(this.object,this.object.currentState).id,this.toggleIsForward=!1}get currentState(){return this.data.runMode==="Toggle"&&qee(this.eventType)?this.initialCurrentState:this.object.currentState}buildTimeline({isForward:e=!0,needsRebuild:t=!1,isRebuild:r=!1}={}){var i,n,a,o;try{let s=tB(this.data.tweens[0].data);r&&typeof s.loop=="number"&&s.loop--,(i=this.timeline)==null||i.pause(),this.timeline=u2e.timeline({autoplay:!1,...s,...s.loop===!0||s.loop>1?{timelineChangeComplete:this.onTimelineChangeComplete}:{}});let l=this.tweens.findIndex(u=>u==null?void 0:u.changeBegan);if(t===!0&&(this.timelineNeedsRebuild=!0),e){let u=l===-1?0:l;for(let c=u;c<this.data.tweens.length-1;c++){let h=this.data.tweens[c],d=this.data.tweens[c+1],f;c===u&&(this.object.wasMovedByUser===!0||((n=this.object.previousAction)==null?void 0:n.changeBegan)===!0)?(f=void 0,this.object instanceof wo&&(this.object.wasMovedByUser=!1)):f=h.data.state===void 0?this.currentState:h.data.state;let p=new Jie(this.object,f,d.data.state===void 0?this.currentState:d.data.state,d.data,this.shared,this.data.allowSlerp??!1);l!==-1&&c===u&&Object.assign(p.params,{startOnceDelay:0}),this.tweens[c]=p,this.timeline.add(p.params,this.timeline.duration+(c===u?s.delay:0))}this.timeline.duration+=s.endDelay}else{let u=l===-1?this.data.tweens.length-1:l+1;for(let c=u;c>0;c--){let h=this.data.tweens[c],d=this.data.tweens[c-1],f;c===u&&(this.object.wasMovedByUser===!0||((a=this.object.previousAction)==null?void 0:a.changeBegan)===!0)?(f=void 0,this.object instanceof wo&&(this.object.wasMovedByUser=!1)):f=h.data.state===void 0?this.currentState:h.data.state;let p=new Jie(this.object,f,d.data.state===void 0?this.currentState:d.data.state,h.data,this.shared,this.data.allowSlerp??!1);l!==-1&&c===u&&Object.assign(p.params,{startOnceDelay:0}),this.tweens[c-1]=p,this.timeline.add(p.params,this.timeline.duration+(c===u?s.endDelay:0))}this.timeline.duration+=s.delay}}catch(s){s instanceof Error&&console.error(s.message)}((o=this.object.previousAction)==null?void 0:o.playing)===!0&&this.object.previousAction.pause(),this.object.previousAction=this}play(){if(Ui(this.shared,this.condition)===!1||qee(this.eventType)&&this.data.runMode==="Once"&&this.hasPlayedOnce||(this.hasPlayedOnce=!0,this.playing))return!1;clearTimeout(this.timeoutId);let e=tB(this.data.tweens[0].data).pingPongDelayCorrection;this.timeoutId=window.setTimeout(()=>{try{this.buildTimeline(),this.timeline.play()}catch(t){t instanceof Error&&console.error(t.message)}},this.startOnceDelay+e)}pause(){var e;(e=this.timeline)==null||e.pause(),clearTimeout(this.timeoutId),this.tweens=Array(this.data.tweens.length-1),delete this.timeoutId}stop(){this.pause();let e=this.data.tweens[0].data.state===void 0?this.initialCurrentState:this.data.tweens[0].data.state;this.object instanceof Sa?this.object.changeSelectedState(e,{shared:this.shared}):this.object.changeSelectedState(e,{scene:this.page.scene,shared:this.shared}),this.object.currentState=e}seek(e){var t;if(Ui(this.shared,this.condition)===!1)return!1;this.timeline===void 0&&this.buildTimeline(),(t=this.timeline)==null||t.seek(e*this.timeline.duration,!0)}toggle(e){var t;if(Ui(this.shared,this.condition)===!1)return!1;clearTimeout(this.timeoutId),this.toggleIsForward=e??!this.toggleIsForward,this.playing?((t=this.timeline)==null||t.pause(),this.buildTimeline({isForward:this.toggleIsForward,needsRebuild:!0}),this.timeline.play()):this.timeoutId=window.setTimeout(()=>{var r;(r=this.timeline)==null||r.pause(),this.buildTimeline({isForward:this.toggleIsForward}),this.timeline.play()},this.startOnceDelay)}playFromCurrent(){this.toggle(!0)}reverseFromCurrent(){this.toggle(!1)}dispose(){this.pause()}};function e8(e,t){var n;let r,i;if(typeof t=="string"?(r=t,i=(n=e.states)==null?void 0:n[r]):t===null&&(r=null,i=e.data),!(r===void 0||i===void 0))return{id:r,data:i}}var G7t={type:"beginState"},$ie={type:"completeState",isfromEntity:!1},ene={type:"requestRender"},d2e=class extends Ka{constructor(e,t,r,i){super(),this.data=e,this.page=t,this.shared=r,this.condition=i,this.toggleIsForward=!1,this.posStart=new U,this.posEnd=new U,this.qStart=new Jt,this.qEnd=new Jt,this.zoomStart=1,this.zoomEnd=1}init(){}get playing(){return this.animation&&this.animation.began&&!this.animation.completed}buildAnimation(e=!1){if(!this.data.animate)return;let t=this.page.scene.find(this.data.targetCamera);if(!t||!t.visible)throw new ReferenceError("Target camera not founded or not visible");let r={t:0};this.posStart.copy(this.page.activeCamera.position),this.qStart.copy(this.page.activeCamera.quaternion),this.zoomStart=this.page.activeCamera.zoom,this.animation=u2e({targets:r,t:1,...c2e(this.data),update:()=>{r.t===0&&(this.data.runMode==="Toggle"&&!this.toggleIsForward?this.fromCamera&&(this.posEnd.copy(this.fromCamera.position),this.qEnd.copy(this.fromCamera.quaternion),this.zoomEnd=this.fromCamera.zoom,this.switchCamera(this.fromCamera.uuid)):(this.posEnd.copy(t.position),this.qEnd.copy(t.quaternion),this.zoomEnd=t.zoom,this.fromCamera=this.page.activeCamera,this.switchCamera(t.uuid)),this.page.activeCamera.dispatchEvent(G7t));let i=this.page.activeCamera;i.position.lerpVectors(this.posStart,this.posEnd,r.t),i.quaternion.slerpQuaternions(this.qStart,this.qEnd,r.t),i.zoom=this.zoomStart+(this.zoomEnd-this.zoomStart)*r.t,i.wasMovedBySwitchCameraAction=!0,i.updateMatrix(),i.updateMatrixWorld(),i.updateProjectionMatrix(),i.dispatchEvent(ene),r.t===1&&i.dispatchEvent($ie)}})}switchCamera(e){let t=this.page.activeCamera,r=this.page.scene.find(e);if(!r||!r.visible)throw new ReferenceError("Target camera not founded or not visible");this.page.switchActiveCamera(r),t.dispatchEvent({type:"cameraChange",camera:r})}play(){if(Ui(this.shared,this.condition)===!1)return!1;if(!this.playing&&this.page.activeCamera.uuid!==this.data.targetCamera)try{clearTimeout(this.timeoutId),this.timeoutId=window.setTimeout(()=>{var e;delete this.timeoutId,this.data.animate?(this.buildAnimation(),(e=this.animation)==null||e.play()):this.switchCamera(this.data.targetCamera)},this.data.delay*1e3)}catch{}}pause(){var e;(e=this.animation)==null||e.pause(),clearTimeout(this.timeoutId),delete this.timeoutId}toggle(e){var t,r;if(Ui(this.shared,this.condition)===!1)return!1;if(window.clearTimeout(this.timeoutId),delete this.timeoutId,e!==this.toggleIsForward)try{this.playing?((t=this.animation)==null||t.pause(),this.toggleIsForward=e??!this.toggleIsForward,this.buildAnimation(!0),(r=this.animation)==null||r.play()):this.timeoutId=window.setTimeout(()=>{var i,n;this.toggleIsForward=e??!this.toggleIsForward,this.data.animate?((i=this.animation)==null||i.pause(),this.buildAnimation(),(n=this.animation)==null||n.play()):(this.toggleIsForward?(this.fromCamera=this.page.activeCamera,this.switchCamera(this.data.targetCamera)):this.fromCamera&&this.switchCamera(this.fromCamera.uuid),this.page.activeCamera.dispatchEvent($ie),this.page.activeCamera.dispatchEvent(ene))},this.data.delay*1e3)}catch{}}playFromCurrent(){this.toggle(!0)}reverseFromCurrent(){this.toggle(!1)}dispose(){this.pause(),this.toggleIsForward=!1}};function f2e(e){let t=e==null?void 0:e.tracks.filter(r=>r.ValueTypeName==="vector"||r.ValueTypeName==="quaternion").map(r=>r.times.length);if(t!=null&&t.length){let r=vxt(t);return r&&r>2?r:2}return 2}var p2e=class extends Ka{constructor(e,t,r,i,n){var l,u,c;super(),this.data=e,this.page=t,this.animationControls=r,this.shared=i,this.condition=n,this.startOnceDelay=0,this.toggleIsForward=!1;let a=e.object,o=t.scene.find(e.object);o&&Array.isArray(o.identity)&&(a=o.identity[0]),this.data={...e,object:a};let s=this.animationControls.clipIdToAction[e.clipId+"/"+a];if(this.duration=((l=s==null?void 0:s.getClip())==null?void 0:l.duration)??1,this.data.crop2){let h=f2e(s==null?void 0:s.getClip());this.leftFrameTime=this.data.crop2[0]/(h-1)*this.duration,this.rightFrameTime=this.data.crop2[1]/(h-1)*this.duration}else{let h=(c=(u=s==null?void 0:s.getClip())==null?void 0:u.tracks[0])==null?void 0:c.times.length;h&&h>1?(this.leftFrameTime=this.data.crop[0]/h*this.duration,this.rightFrameTime=this.data.crop[1]/h*this.duration):(this.leftFrameTime=0,this.rightFrameTime=this.duration)}this.startOnceDelay=e.delay}get playing(){var e;return((e=this.threeAnimAction)==null?void 0:e.isRunning())??!1}play(e=!1){if(Ui(this.shared,this.condition)===!1)return!1;window.clearTimeout(this.timeoutId),this.timeoutId=window.setTimeout(()=>{var r;if(this.threeAnimAction=this.animationControls.play(this.data),!this.threeAnimAction)return;this.threeAnimAction.reset(),this.threeAnimAction.time=this.leftFrameTime,this.threeAnimAction._clip.start=this.leftFrameTime,this.threeAnimAction._clip.duration=this.rightFrameTime;let t=this.data.object;Object.entries(this.animationControls.clipIdToAction).forEach(([i,n])=>{let a=i.split("/")[1];this.threeAnimAction!==n&&a===t&&n.isRunning()&&(e?n.fadeOut(.2):n.stop())}),e&&((r=this.threeAnimAction)==null||r.fadeIn(.2))},this.startOnceDelay)}pause(){this.threeAnimAction&&(this.threeAnimAction.paused=!0),window.clearTimeout(this.timeoutId),delete this.timeoutId}stop(){var e;(e=this.threeAnimAction)==null||e.fadeOut(.2)}seek(e){this.threeAnimAction=this.animationControls.play(this.data),this.threeAnimAction&&(this.threeAnimAction.paused=!0,this.threeAnimAction.time=vt.clamp(this.threeAnimAction.time+1/60*e,this.leftFrameTime,this.rightFrameTime-16e-5),this.animationControls.needsUpdate=!0,this.animationControls.requestRender())}toggle(e,t=!1){if(Ui(this.shared,this.condition)===!1)return!1;this.toggleIsForward=e??!this.toggleIsForward,this.threeAnimAction&&(this.threeAnimAction._loopCount=0),this.playing?this.threeAnimAction&&(this.threeAnimAction.timeScale=this.toggleIsForward?1:-1,this.toggleIsForward?(this.threeAnimAction._clip.start=this.leftFrameTime,this.threeAnimAction._clip.duration=this.rightFrameTime):(this.threeAnimAction._clip.start=this.rightFrameTime,this.threeAnimAction._clip.duration=this.leftFrameTime)):this.timeoutId=window.setTimeout(()=>{var r;if(this.threeAnimAction=this.animationControls.play(this.data),this.threeAnimAction){this.toggleIsForward?(this.threeAnimAction.time=this.leftFrameTime,this.threeAnimAction._clip.start=this.leftFrameTime,this.threeAnimAction._clip.duration=this.rightFrameTime):(this.threeAnimAction.time=this.rightFrameTime,this.threeAnimAction._clip.start=this.rightFrameTime,this.threeAnimAction._clip.duration=this.leftFrameTime),this.threeAnimAction.paused=!1,this.threeAnimAction.timeScale=this.toggleIsForward?1:-1;let i=this.data.clipId.split("/")[1];Object.entries(this.animationControls.clipIdToAction).forEach(([n,a])=>{let o=n.split("/")[1];this.threeAnimAction!==a&&o===i&&a.isRunning()&&(t?a.fadeOut(.2):a.stop())}),t&&((r=this.threeAnimAction)==null||r.fadeIn(.2))}},this.startOnceDelay)}playFromCurrent(){this.toggle(!0)}reverseFromCurrent(){this.toggle(!1)}dispose(){var t;let e=(t=this.animationControls.clipIdToAction[this.data.clipId+"/"+this.data.object])==null?void 0:t.getClip();e&&(e.duration=this.duration),this.pause()}},v2e=class{constructor(e,t,r,i,n){this.data=e,this.page=t,this.eventManager=r,this.shared=i,this.condition=n,this.timeOutId=-1,this.scene=t.scene}dispatch(){if(Ui(this.shared,this.condition)===!1)return!1;this.data.target!==this.page.uuid&&(window.clearTimeout(this.timeOutId),this.timeOutId=window.setTimeout(()=>{this.play()},this.data.delay*1e3))}dispose(){window.clearTimeout(this.timeOutId)}play(){if(this.scene.children.every(t=>t.uuid!==this.data.target||t.data.uiScene))return;this.data.transition==="fade"&&this.data.duration>0&&this.eventManager.eventContext.renderer.renderFromSceneForSceneTransitionPass(this.scene,this.scene.activeCamera,this.data.duration*1e3),this.eventManager.deactivate(),this.eventManager.controlsManager.deactivate();let e=this.scene.activeCamera;this.scene.updatePage(this.data.target),this.scene.traverseVisibleEntity(t=>{t.type==="ParticleSystem"&&(t.sleep(),t.wakeUp(),t.data.autoPlay?t.start():t.stop())}),this.scene.activePage.switchToPlayCamera(),this.scene.activeCamera.copyViewPlaneSize(e),kH(this.scene.activePage,this.shared),this.eventManager.activate(),this.eventManager.controlsManager.activate(this.eventManager)}},m2e=class{constructor(e,t,r,i){this.data=e,this.page=t,this.shared=r,this.condition=i,this.evaluatedCondition=!1}checkConditions(){this.evaluatedCondition=Ui(this.shared,this.condition)}dispatch(){if(this.evaluatedCondition===!1)return!1;let e=this.shared.getVariable(this.data.variableId),t=x1e(this.data.expression,this.shared,Ga.typeOfVariable(e));t!==void 0&&this.shared.updateVariable(this.data.variableId,typeof t=="string"?{textValue:t}:t)}dispose(){}},g2e=class{constructor(e,t,r,i){this.data=e,this.page=t,this.shared=r,this.condition=i,this.timeoutId=null}dispatchInner(){if(Ui(this.shared,this.condition)===!1)return!1;let e=this.shared.getDynamicVariablePlayState(this.data.variableId);if(this.data.mode==="PlayPause")this.shared.getDynamicVariableToggleIsForward(this.data.variableId)===void 0&&this.shared.setDynamicVariableToggleIsForward(this.data.variableId,!0),this.shared.setDynamicVariablePlayState(this.data.variableId,e==="Playing"?"Paused":"Playing");else if(this.data.mode==="Play"&&e!=="Playing")this.shared.getDynamicVariableToggleIsForward(this.data.variableId)===void 0&&this.shared.setDynamicVariableToggleIsForward(this.data.variableId,!0),this.shared.setDynamicVariablePlayState(this.data.variableId,"Playing");else if(this.data.mode==="Stop"&&e!=="Stopped")this.shared.setDynamicVariablePlayState(this.data.variableId,"Stopped");else if(this.data.mode==="Pause"&&e!=="Paused")this.shared.setDynamicVariablePlayState(this.data.variableId,"Paused");else if(this.data.mode==="Restart")this.shared.setDynamicVariablePlayState(this.data.variableId,"Restarted");else if(this.data.mode==="Toggle"){let t=this.shared.getDynamicVariableToggleIsForward(this.data.variableId);e==="Playing"?this.shared.setDynamicVariableToggleIsForward(this.data.variableId,t===void 0?!1:!t):(this.shared.setDynamicVariableToggleIsForward(this.data.variableId,!t),this.shared.setDynamicVariablePlayState(this.data.variableId,"Playing"))}}dispatch(){let e=this.data.delay,t=this.shared.getDynamicVariablePlayState(this.data.variableId);this.data.mode==="PlayPause"&&t==="Playing"&&(e=this.data.pauseDelay),e!==0?(this.timeoutId&&window.clearTimeout(this.timeoutId),this.timeoutId=window.setTimeout(()=>{this.timeoutId=null,this.dispatchInner()},e)):this.dispatchInner()}dispose(){this.timeoutId&&window.clearTimeout(this.timeoutId)}},j7t=class{constructor(e,t,r,i){this.data=e,this.page=t,this.shared=r,this.condition=i}dispatch(){if(Ui(this.shared,this.condition)===!1)return!1;(this.data.target==="single"?this.data.variableId?[this.data.variableId]:[]:Object.keys(this.shared.getVariables())).forEach(e=>{var r;this.shared.getVariable(e);let t=(r=this.shared.data.variables.data(e))==null?void 0:r.value;t!==void 0&&this.shared.updateVariable(e,t),this.shared.enableLocalStorageForPersistentVariables&&localStorage.removeItem(kO(e))})}dispose(){}},W7t=class{constructor(e,t,r,i){this.data=e,this.page=t,this.shared=r,this.condition=i}dispatch(){var e;if(Ui(this.shared,this.condition)===!1)return!1;this.data.userAPIId&&((e=this.shared.getUserAPI(this.data.userAPIId))==null||e.callUserAPI(this.shared))}dispose(){}};function Ui(e,t){if(t===void 0)return!0;if(t.expression.length===0)return!1;let r=x1e(t.expression,e,"boolean");return t.negate?!r:!!r}function Hn(e,t,r,i,n,a){let o={Audio:[],Video:[],Particles:[],Link:[],Destroy:[],Create:[],Reset:[],Transition:[],SwitchCamera:[],Animation:[],SceneTransition:[],SetVariable:[],DynamicVariablePlay:[],ClearLocalStorage:[],UserAPI:[]},s=l=>({id:u,data:c})=>{try{c.type==="Audio"?oo[e.type].includes("Audio")&&o.Audio.push(new Gye(u,c,a,i,l)):c.type==="Video"&&!(a instanceof Sa)?oo[e.type].includes("Video")&&o.Video.push(new x2e(u,c,a,i,l)):c.type==="Particles"?oo[e.type].includes("Particles")&&o.Particles.push(new jye(c,r,i,l)):c.type==="Link"?oo[e.type].includes("Link")&&o.Link.push(new ICt(c,n.controlsManager,i,l)):c.type==="Create"?oo[e.type].includes("Create")&&o.Create.push(new b2e(c,r,n.controlsManager,i,l)):c.type==="Destroy"?oo[e.type].includes("Destroy")&&o.Destroy.push(new Wye(c,r,n.controlsManager,i,l)):c.type==="Reset"?oo[e.type].includes("Reset")&&o.Reset.push(new qye(c,r,i,n,l)):c.type==="Transition"?oo[e.type].includes("Transition")&&o.Transition.push(new h2e(e.type,c,r,i,l)):c.type==="SwitchCamera"?oo[e.type].includes("SwitchCamera")&&o.SwitchCamera.push(new d2e(c,r,i,l)):c.type==="SceneTransition"?oo[e.type].includes("SceneTransition")&&o.SceneTransition.push(new v2e(c,r,n,i,l)):c.type==="Animation"?oo[e.type].includes("Animation")&&o.Animation.push(new p2e(c,r,n.animationControls,i,l)):c.type==="SetVariable"?oo[e.type].includes("SetVariable")&&o.SetVariable.push(new m2e(c,r,i,l)):c.type==="DynamicVariablePlay"?oo[e.type].includes("DynamicVariablePlay")&&o.DynamicVariablePlay.push(new g2e(c,r,i,l)):c.type==="Conditional"?oo[e.type].includes("Conditional")&&(c.ifActions.forEach(s({expression:c.condition,negate:!1})),c.elseActions.forEach(s({expression:c.condition,negate:!0}))):c.type==="ClearLocalStorage"?oo[e.type].includes("ClearLocalStorage")&&o.ClearLocalStorage.push(new j7t(c,r,i,l)):c.type==="UserAPI"&&oo[e.type].includes("UserAPI")&&o.UserAPI.push(new W7t(c,r,i,l))}catch{}};return t.forEach(s()),o}function _a(e){Object.values(e).forEach(t=>{t.forEach(r=>{(r instanceof Gye||r instanceof x2e||r instanceof jye||r instanceof p2e||r instanceof h2e||r instanceof b2e||r instanceof Wye||r instanceof d2e||r instanceof v2e||r instanceof qye||r instanceof m2e||r instanceof g2e)&&r.dispose()})})}function q7t(e,t){let r;if("material"in e){let i=e.material;Array.isArray(i)?r=e.material[0].layers.find(n=>n.uuid===t):r=e.material.layers.find(n=>n.uuid===t)}if(r)return r.color.texture.image.img instanceof HTMLVideoElement?r.color.texture.image.img:void 0}var y2e=new Map,Ob=new Map,D1=class{constructor(e,t,r){this.data=t,this.delay=0,this.status="stopped";let{layerId:i,loop:n,volume:a,delay:o}=t;if(this.object=r,i===void 0)throw new Error("Missing property");let s=q7t(r,i);s&&(this.videoElement=s,this.videoElement.loop=n===1/0,q4&&(this.videoElement.autoplay=!0),a!==void 0&&(this.videoElement.volume=a)),o!==void 0&&(this.delay=o),Ob.has(r.uuid)?Ob.get(r.uuid).push(this):Ob.set(r.uuid,[this]),y2e.set(e,this),this.pause()}mute(){!this.videoElement||(this.videoElement.muted=!0)}unMute(){!this.videoElement||(this.videoElement.muted=!1)}play(e){if(!this.videoElement)return;let t=/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);e?(this.mute(),this.delay+=150):t?(this.mute(),window.setTimeout(()=>{this.unMute()},100)):this.unMute(),this.delayTimerId=window.setTimeout(()=>{if(!this.videoElement)return;let r=this.videoElement.play();r!==void 0&&r.then(i=>{}).catch(i=>{this.play()}),this.clearDelay()},this.delay),this.status="playing"}clearDelay(){this.delayTimerId&&(clearTimeout(this.delayTimerId),delete this.delayTimerId)}pause(){!this.videoElement||(this.videoElement.pause(),this.status="paused")}stop(){!this.videoElement||(this.videoElement.pause(),this.videoElement.currentTime=0,this.status="stopped",this.clearDelay())}playByToggle(){this.data.toggle==="stop"?this.status==="playing"?this.stop():(this.stop(),this.play()):this.data.toggle==="pause"?this.status==="playing"?this.pause():this.play():(this.stop(),this.play())}dispose(){!this.videoElement||(this.stop(),this.videoElement.muted=!0)}},rB=class{constructor(e){this.data=e}dispatch(){this.data.playVideo?this.pauseVideo(this.data.playVideo):this.data.object?this.pauseAllVideosFromObject(this.data.object):this.pauseAllVideos()}pauseVideo(e){let t=y2e.get(e);!t||(this.data.delay>0?(this.disposeDelay(),this.timeoutId=window.setTimeout(()=>{t[this.data.interaction](),this.disposeDelay()},this.data.delay)):t[this.data.interaction]())}pauseAllVideosFromObject(e){let t=Ob.get(e);!(t!=null&&t.length)||(this.data.delay>0?(this.disposeDelay(),this.timeoutId=window.setTimeout(()=>{t.forEach(r=>r[this.data.interaction]()),this.disposeDelay()},this.data.delay)):t.forEach(r=>r[this.data.interaction]()))}pauseAllVideos(){let e=[...Ob.values()];!e.length||(this.data.delay>0?(this.disposeDelay(),this.timeoutId=window.setTimeout(()=>{e.forEach(t=>{t.forEach(r=>{r[this.data.interaction]()})}),this.disposeDelay()},this.data.delay)):e.forEach(t=>{t.forEach(r=>{r[this.data.interaction]()})}))}disposeDelay(){clearTimeout(this.timeoutId),delete this.timeoutId}dispose(){clearTimeout(this.timeoutId),delete this.timeoutId}},x2e=class{constructor(e,t,r,i,n){if(this.data=t,this.shared=i,this.condition=n,t.interaction==="play")this.interaction=new D1(e,t,r);else if(t.interaction==="pause"||t.interaction==="stop")this.interaction=new rB(t);else throw new Error("Missing property")}dispatchBasic(){if(Ui(this.shared,this.condition)===!1)return!1;this.interaction instanceof D1?this.interaction.playByToggle():this.interaction.dispatch()}dispatchConditional(){if(Ui(this.shared,this.condition)===!1)return!1;this.interaction instanceof D1?this.interaction.play():this.interaction.dispatch()}dispose(){this.interaction.dispose()}},tne=(()=>{let e,t,r,i;function n(s){!e&&!rne()&&(t==null?void 0:t.sharedGameControlGlobals.createdObjects.length)>0&&(e=requestAnimationFrame(a)),s&&(t=s,i=s.requestRender)}function a(s){let l=r?s-r:0,u=t.sharedGameControlGlobals.createdObjects,c=t.sharedGameControlGlobals.nCreatedPerAction,h=u.length,d=0;for(;d<h;){let f=u[d];f.userData.createdTime===void 0&&(f.userData.createdTime=s),f.userData.lifetime===void 0&&f.userData.quantity===void 0||f.userData.lifetime&&s-f.userData.createdTime<f.userData.lifetime||f.userData.quantity&&c[f.userData.actionId]<=f.userData.quantity?(f.userData.velocity&&(f.position.addScaledVector(f.userData.velocity,l/1e3),f.updateMatrix(),i()),d++):(c[f.userData.actionId]>f.userData.quantity&&c[f.userData.actionId]--,u.splice(d,1),f.removeFromParent(),t.sharedGameControlGlobals.rapierWorld&&f.rigidBody?(t.sharedGameControlGlobals.colliderToEntity.delete(f.rigidBody.collider(0).handle),t.sharedGameControlGlobals.rapierWorld.removeRigidBody(f.rigidBody)):(f.bvhGeometry=void 0,t.sharedGameControlGlobals.entitiesWithTransformAnim=t.sharedGameControlGlobals.entitiesWithTransformAnim.filter(p=>p.bvhGeometry!==void 0)),h--,i())}e=d>0?requestAnimationFrame(a):void 0,r=d>0?s:void 0}function o(){rne()?e&&(cancelAnimationFrame(e),e=void 0,r=void 0):n()}return typeof document<"u"&&document.addEventListener("visibilitychange",o),n})();function rne(){return!!document&&document.hidden}var ine=new Jt,Y7t=new U,X7t=new U,b2e=class{constructor(e,t,r,i,n){this.data=e,this.page=t,this.controlsManager=r,this.shared=i,this.condition=n,this.intervalId=null,this.timeoutIdQueue=[],this.uniqueId=vt.generateUUID(),this.dispatch=()=>{if(Ui(this.shared,this.condition)===!1)return!1;this.data.delay?this.timeoutIdQueue.push(window.setTimeout(this.dispatchInner,this.data.delay*1e3)):this.dispatchInner()},this.dispatchFromStart=()=>{if(Ui(this.shared,this.condition)===!1)return!1;this.timeoutIdQueue.push(window.setTimeout(this.dispatchInner,this.data.delay*1e3))},this.dispatchThrottled=kxt(this.dispatch,1e3/this.data.creationSpeed),this.dispatchStart=()=>{this.intervalId===null&&(this.intervalId=window.setInterval(this.dispatch,1e3/this.data.creationSpeed))},this.dispatchStop=()=>{this.intervalId!==null&&(window.clearInterval(this.intervalId),this.intervalId=null)},this.dispatchInner=()=>{this.timeoutIdQueue.shift();let o=new yo(this.object);if(o.playModeVisible=!0,o.expand(),this.data.coordinateSystem!=="world"){let l=this.data.coordinateSystem,u=this.page.scene.find(l);u&&(u.updateMatrixWorldSVD(),o.hiddenMatrix.copy(u.matrixWorldRigid))}o.scale.copy(this.object.scale),o.position.fromArray(this.data.position),o.rotation.fromArray(this.data.rotation),o.updateMatrix(),this.page.add(o);let s=this.controlsManager.sharedGameControlGlobals;s.createdObjects.push(o),s.nCreatedPerAction[this.uniqueId]===void 0?s.nCreatedPerAction[this.uniqueId]=1:s.nCreatedPerAction[this.uniqueId]++,o.updateWorldMatrix(!0,!0),o.traverseObject(this.traverseObjectCB),tne(),this.controlsManager.requestRender()},this.traverseObjectCB=o=>{var c,h,d,f;o.hasNonUniformScale&&o.updateMatrixWorldSVD();let s;if(this.controlsManager.sharedGameControlGlobals.rapierWorld){if(o instanceof yu)if(o.objectForSample){if(o.objectForSample.dataPatched.physics.fusedBody)return;s=o.object}else return o.object.dataPatched.physics.fusedBody===!0&&o.object.dataPatched.physics.rigidBody==="dynamic"?!0:void 0;else if(o instanceof yo)s=o.object;else if(s=o,(c=s.dataPatched.cloner)==null?void 0:c.hideBase)return!0}else{if(o instanceof yu)return;o instanceof yo?s=o.object:s=o}this.data.destroy==="Time"?o.userData.lifetime=this.data.lifetime*1e3:this.data.destroy==="Quantity"&&(o.userData.quantity=this.data.destroyAfterQuantity,o.userData.actionId=this.uniqueId);let l=new U().fromArray(this.data.velocity),u=s.dataPatched;if(!(u.physics.enabled==="visibility"?!u.visible:!u.physics.enabled)&&(this.controlsManager.sharedGameControlGlobals.rapierWorld?(this.controlsManager.addRigidBody(o,s,{fromCreate:!0,dynamic:this.data.dynamic}),this.data.destroy==="Collision"&&((h=o.rigidBody)==null||h.collider(0).setActiveEvents(1),o.userData.hasCollisionDestroy=!0),o.matrixWorld.decompose(Y7t,ine,X7t),l.applyQuaternion(ine),this.data.velocity.some(p=>p!==0)&&this.data.dynamic&&((d=o.rigidBody)==null||d.setLinvel(l.divideScalar(this.controlsManager.pixelsPerMeter),!0))):("geometry"in o.object&&this.controlsManager.addBoundsTree(o),this.data.velocity.some(p=>p!==0)&&this.data.dynamic&&(o.userData.velocity=l)),((f=s.dataPatched.physics)==null?void 0:f.fusedBody)===!0))return!0};let a=this.page.scene.find(this.data.object);if(!a)throw new Error("Missing Property");if(this.object=a,this.data.coordinateSystem!=="world"&&!this.page.scene.find(this.data.coordinateSystem))throw new Error("Missing Property");tne(r)}dispose(){this.intervalId!==null&&(window.clearInterval(this.intervalId),this.intervalId=null),this.timeoutIdQueue.forEach(e=>window.clearTimeout(e)),this.dispatchThrottled.cancel(),this.page.remove(...this.controlsManager.sharedGameControlGlobals.createdObjects),this.controlsManager.sharedGameControlGlobals.createdObjects=[]}},w2e=200,ND=.02,VD=.3,Z7t=65;new U;var nne=new U,ane=new U,Q7t=new U,Io=new U,as=new U,df=new U,FD=new Ke,one=new Ke,K7t=new Ke;new Ke;var eu=new Jt,Eh=new Jt,ic=new Qn(0,0,0,"YXZ"),J7t=new U(1,0,0),tu=new U(0,1,0),$7t=new U(0,0,1),sne=new U(1,1,1);new Es;var eEt=1,tEt=.025,rEt=16e-6,lne=12,iEt=20,ua=new Ll,sl=new Cn,nEt={type:"requestRender"},aEt={type:"updateMatrix"},une=Math.PI/6,iB=class extends Ka{constructor(e,t,r,i,n,a,o,s,l){var p;super(),this.object=e,this.domElement=t,this.data=r,this.gloabalPhysics=i,this.controlsManager=n,this.cameraFollow=a,this.camera=o,this.page=s,this.sharedAssets=l,this.enableDamping=!0,this.hiddenMatrix0=new Ke,this.target0=new U,this.zoom0=1,this.rotForce=1,this.moveForce=1,this.pixelsPerMeter=w2e,this.euler0=new Qn(0,0,0,"YXZ"),this.position0Cam=new U,this.quat0Cam=new Jt,this.scale0Cam=new U,this.hiddenMatrix0Cam=new Ke,this.threshEndTranslate=.01,this.threshEndRotate=1e-8,this.threshEndRotVel=.005,this.collider={type:"capsule",radius:40,segment:new Ll(new U(0,-40,0),new U(0,40,0)),matrix:new Ke,position:new U,rotation:new Jt},this.euler=new Qn(0,0,0,"YXZ"),this.eulerDelta=new U,this.lastPosition=new U,this.lastCameraQuaternion=new Jt,this.lastCameraPosition=new U,this.PI_2=Math.PI/2,this.prevMouse=new me,this.velocityTarget=new U,this.velocity=new U,this.directionXZ=new U,this.rotVelocityStick=new U,this.rotVelocityTarget=new U,this.rotVelocity=new U,this.rotDirection=new U,this.nonColliderRotOffset=new Ke,this.nonColliderPosOffset=new Ke,this.firstPointerId=-1,this.rot=new U,this.path=[],this.movementState={moveNegZ:0,movePosZ:0,moveNegX:0,movePosX:0,moveNegY:0,movePosY:0,rotPosX:0,rotNegX:0,rotPosY:0,rotNegY:0,jump:0,run:0},this.vrEulerYOffset=0,this.onObject=!1,this.actionState={},this.keyAssignments=[["moveNegZ","W"],["moveNegX","A"],["movePosZ","S"],["movePosX","D"],["rotPosX","ArrowUp"],["rotPosY","ArrowLeft"],["rotNegX","ArrowDown"],["rotNegY","ArrowRight"],["jump"," "]],this.collisionEnabled=!0,this.offsetMatrix=new Ke,this.objectToTarget=new U,this.objectToTarget0=new U,this.objectToCamXZ=new U,this.objectToCamXZ0=new U,this.targetToCamera=new U,this.targetToCamera0=new U,this.cameraPolarAxis0=new U,this.targetPos=new U,this.targetQuat=new Jt,this.lerpFactorPos=new U().setScalar(.3),this.lerpFactorPosStart=.3,this.lerpFactorPosEnd=.3,this.lerpFactorRotStart=.3,this.lerpFactorRotEnd=.3,this.lerpFactorPosCamera=.3,this.lerpFactorRotCamera=.3,this.objXZQuat=new Jt,this.objXZQuatInv=new Jt,this.objXZRotMat=new Ke,this.isFirstPerson=!1,this.didHit=!1,this.groundVelocity=new U,this.pushedVelocity=new U,this.groundYRotation=0,this.objectRealQuat=new Jt,this.colliderWorldQuat=new Jt,this.groundNormal=new U,this.groundTilt=new Jt,this.groundTiltInv=new Jt,this.lastHitObj=null,this.isFirstFrame=!0,this.rotationAccumWhenOrientWithCamera=0,this.navMeshPathDest=null,this.position=new U,this.quaternion=new Jt,this.scale=new U,this.initialAction=!0,this.onPointerDown=v=>{var m;!(v.target===this.domElement||v.target instanceof HTMLElement&&v.target.tagName==="SPLINE-VIEWER"&&((m=v.target.shadowRoot)!=null&&m.contains(this.domElement)))||this.firstPointerId!==-1||(this.firstPointerId=v.pointerId,this.domElement.ownerDocument.addEventListener("pointermove",this.onPointerMove),this.domElement.ownerDocument.addEventListener("pointerup",this.onPointerUp),this.rotBy!=="keys"&&!Us&&!Iee&&this.domElement.requestPointerLock(),this.prevMouse.set(v.clientX,v.clientY))},this.onPointerUp=v=>{this.firstPointerId=-1,this.domElement.ownerDocument.removeEventListener("pointermove",this.onPointerMove),this.domElement.ownerDocument.removeEventListener("pointerup",this.onPointerUp),v.pointerType==="mouse"&&this.domElement.ownerDocument.exitPointerLock()},this.onPointerMove=v=>{if(v.pointerId!==this.firstPointerId)return;let m=v.clientX-this.prevMouse.x,g=v.clientY-this.prevMouse.y;this.prevMouse.set(v.clientX,v.clientY),v.pointerType==="mouse"&&this.rotBy!=="keys"&&(Iee&&Gxt<15.5&&!Us?(this.eulerDelta.y=-m*this.mouseOrbitSensitivity,this.eulerDelta.x=-g*this.mouseOrbitSensitivity):(this.eulerDelta.y=-v.movementX*this.mouseOrbitSensitivity,this.eulerDelta.x=-v.movementY*this.mouseOrbitSensitivity)),v.pointerType!=="mouse"&&this.rotByTouch==="drag"&&(this.eulerDelta.y=-m*this.mouseOrbitSensitivity*5,this.eulerDelta.x=-g*this.mouseOrbitSensitivity*5),this.controlsManager.requestRender()},this.onPointerlockChange=v=>{this.domElement.ownerDocument.pointerLockElement===this.domElement?iB.isLocked=!0:iB.isLocked=!1},this.onPointerlockError=()=>{console.error("SPE.GameControls: Unable to use Pointer Lock API")},this.handleVisibilityChange=()=>{if(document!=null&&document.hidden)for(let v in this.movementState)this.movementState[v]=0},this.onKeyDown=v=>{!(v.target instanceof HTMLInputElement)&&(v.code==="ArrowLeft"||v.code==="ArrowUp"||v.code==="ArrowRight"||v.code==="ArrowDown"||v.code==="Space")&&v.preventDefault();for(let m of this.keyAssignments)if(v.key.toUpperCase()===m[1]||v.key===m[1]){this.movementState[m[0]]=1;break}this.controlsManager.requestRender()},this.onKeyUp=v=>{for(let m of this.keyAssignments)if(v.key.toUpperCase()===m[1]||v.key===m[1]||v.code.slice(3,v.code.length).toUpperCase()===m[1]){this.movementState[m[0]]=0;break}},this.copyVRGamePadValues=(v,m)=>{for(let g=2;g<4;g++){let y=v.axes[g];m===0?g===2?this.movementState.movePosX=y:this.movementState.movePosZ=y:(v.buttons[3].pressed?this.movementState.jump=1:this.movementState.jump=0,g===2?(Math.abs(this.movementState.rotPosY)<.3&&Math.abs(y)>=.3&&(this.vrEulerYOffset+=y<0?1:-1),this.movementState.rotPosY=y):this.moveMode==="fly"&&(this.movementState.moveNegY=y))}},this.sharedGameControlGlobals=n.sharedGameControlGlobals,e===o&&(this.isFirstPerson=!0),this.hiddenMatrix0.copy(this.object.hiddenMatrix),this.object.parent?this.object.hiddenMatrix.copy(this.object.parent.matrixWorld).invert():this.object.hiddenMatrix.identity(),this.object.matrix.copy(this.object.matrixWorld),this.object.matrix.decompose(this.position,this.quaternion,this.scale),this.euler0.setFromQuaternion(this.quaternion,"YXZ");let u=this.euler0.clone(),c=u.y;if(this.objectRealQuat.copy(this.quaternion),u.y=0,this.quaternion.setFromEuler(u),this.objXZQuat.copy(this.quaternion),this.objXZQuatInv.copy(this.objXZQuat).invert(),this.objXZRotMat.makeRotationFromQuaternion(this.quaternion),u.set(0,c,0),this.quaternion.setFromEuler(u),this.rot.setFromEuler(u),this.object.matrixAutoUpdate=!1,(this.isFirstPerson||this.cameraFollow===!0)&&(this.target0.copy(this.camera.getTarget()),this.zoom0=this.camera.zoom),this.cameraFollow===!0){this.position0Cam.copy(this.camera.position),this.quat0Cam.copy(this.camera.quaternion),this.scale0Cam.copy(this.camera.scale),this.hiddenMatrix0Cam.copy(this.camera.hiddenMatrix),this.camera.parent?(this.camera.hiddenMatrix.copy((p=this.camera)==null?void 0:p.parent.matrixWorld),this.camera.matrix.copy(this.camera.matrixWorld)):this.camera.hiddenMatrix.identity(),this.camera.matrix.copy(this.camera.matrixWorld),this.camera.matrix.decompose(this.camera.position,this.camera.quaternion,this.camera.scale),this.camera.matrixAutoUpdate=!1,this.offsetMatrix.copy(this.object.matrix).invert().multiply(this.camera.matrix);let v=new U(0,0,-1).applyQuaternion(this.camera.quaternion),m=new U().subVectors(this.position,this.camera.position);this.objectToCamXZ.copy(m),this.objectToCamXZ.y=0,this.objectToCamXZ0.copy(this.objectToCamXZ);let g,y;Math.abs(v.y)<1e-6?(m.y=0,v.y=0,y=m.projectOnVector(v)):m.y/v.y>0?y=v.multiplyScalar(m.y/v.y):y=v.multiplyScalar(m.length()),this.targetToCamera0.copy(y).negate(),g=this.camera.position.clone().add(y),this.objectToTarget0.subVectors(g,this.position);let x=new Qn().setFromQuaternion(this.camera.quaternion,"YXZ");this.cameraPolarOffset=-x.x,x.x=0,x.z=0,x.y-=Math.PI/2,this.cameraPolarAxis0.set(0,0,-1).applyEuler(x)}if(this.object instanceof wo&&(this.object.matrixAutoUpdate=!1),this.euler.setFromQuaternion(this.quaternion,"YXZ"),this.rotByTouch=r.rotByTouch??"joystick",this.rotBy=r.rotBy??"keys",this.rotationMode=r.rotationMode??"normal",this.moveMode=r.moveMode??"walk",this.collisionEnabled=r.collisionEnabled,this.speedTranslate=(r.speedTranslate??250)*eEt,this.speedOrbit=(r.speedRotate??100)*tEt,this.mouseOrbitSensitivity=(r.speedRotate??100)*rEt,this.keyAssignments=r.keyAssignments.map(v=>{let m=[v[0],v[1]];return m[1]==="▲"?m[1]="ArrowUp":m[1]==="◀"?m[1]="ArrowLeft":m[1]==="▼"?m[1]="ArrowDown":m[1]==="▶"?m[1]="ArrowRight":m[1]==="⇧"?m[1]="Shift":m[1]==="↵"?m[1]="Enter":m[1]==="Space"?m[1]=" ":m[1]==="⌘"?m[1]="Meta":m[1]==="Ctrl"?m[1]="Control":m[1]==="Esc"&&(m[1]="Escape"),m}),r.rotBy==="mouse"){let v;v=this.keyAssignments.findIndex(m=>m[0]==="rotNegX"),v!==-1&&(this.keyAssignments[v][1]=""),v=this.keyAssignments.findIndex(m=>m[0]==="rotPosX"),v!==-1&&(this.keyAssignments[v][1]=""),v=this.keyAssignments.findIndex(m=>m[0]==="rotPosY"),v!==-1&&(this.keyAssignments[v][1]=""),v=this.keyAssignments.findIndex(m=>m[0]==="rotNegY"),v!==-1&&(this.keyAssignments[v][1]="")}this.lerpFactorPosStart=1-.02**(1/((r.delayPos[0]??.3)*60)),this.lerpFactorPosEnd=1-.02**(1/((r.delayPos[1]??.3)*60)),this.lerpFactorPos.setScalar(this.lerpFactorPosStart),this.lerpFactorRotStart=1-.02**(1/((r.delayRot[0]??.3)*60)),this.lerpFactorRotEnd=1-.02**(1/((r.delayRot[1]??.3)*60)),this.lerpFactorPosCamera=1-.02**(1/((r.delayPosCamera??.3)*60)),this.lerpFactorRotCamera=1-.02**(1/((r.delayRotCamera??.3)*60)),this.gravity=(this.gloabalPhysics.gravity??sy.defaultData.gravity)*lne,this.usePhysics=this.gloabalPhysics.usePhysics??sy.defaultData.usePhysics,this.jumpPower=r.jumpPower*iEt,this.resetYPosition=this.position.y+Math.abs(r.resetYPosition)*(this.gravity>0?1:-1),this.alignToGround=r.alignToGround??!1,this.orientMode=r.autoOrientMove?r.orientMode:"none",this.orientWith=r.orientWith??g6.defaultDataThirdPerson.orientWith,this.slopeThresh=Z7t*Math.PI/180,r.collider.type==="capsule"?(this.collider.radius=r.collider.radius,this.collider.segment.start.y=r.collider.height/2-r.collider.radius,this.collider.segment.end.y=-this.collider.segment.start.y,this.offset=r.collider.height*ND/this.pixelsPerMeter,this.stepThresh=r.collider.height*VD/this.pixelsPerMeter,this.colliderHeight=r.collider.height):r.collider.type==="sphere"?(this.collider.radius=r.collider.radius,this.collider.segment.start.y=0,this.collider.segment.end.y=0,this.offset=2*r.collider.radius*ND/this.pixelsPerMeter,this.stepThresh=2*r.collider.radius*VD/this.pixelsPerMeter,this.colliderHeight=r.collider.radius*2):(this.offset=r.collider.height*ND/this.pixelsPerMeter,this.stepThresh=r.collider.height*VD/this.pixelsPerMeter,this.colliderHeight=r.collider.height),this.collider.type=r.collider.type;let h=new U().fromArray(r.collider.position),d=new Jt().setFromEuler(new Qn().fromArray([...r.collider.rotation,"XYZ"]));this.collider.position.copy(h).multiply(this.scale),this.collider.rotation.copy(d),this.collider.matrix.compose(h,d,sne),r.cameraXAxis!==void 0&&(this.cameraXAxis=r.cameraXAxis,this.cameraYAxis=r.cameraYAxis,this.minPolarAngle=r.cameraRotXLimits[0],this.maxPolarAngle=r.cameraRotXLimits[1],this.minAzimuthAngleRel=r.cameraRotYLimits[0],this.maxAzimuthAngleRel=r.cameraRotYLimits[1]),this.forwardDir=r.forwardDirection??"-z",this.isFirstPerson&&(this.forwardDir="-z"),this.runMultiplier=r.runMultiplier??2;let f=r.navmesh.destinationHelperRadius*2;if(f>0){let v=new Et;v.push({fi:0,data:{...da.defaultData("light","phong"),alpha:0},id:"layer1"}),v.push({fi:0,data:{...da.defaultData("color"),color:r.navmesh.destinationHelperColor,alpha:r.navmesh.destinationHelperColor.a},id:"layer2"});let m=new iH({layers:v},{scene:this.page.scene,shared:this.sharedAssets});this.navMeshPathDest=new nn(Jge.create({parameters:{width:f,height:f/10,hollow:.7}}),m),this.navMeshPathDest.material.userData.opacity0=r.navmesh.destinationHelperColor.a}this.activate()}reset(e=!1){if(this.object.hiddenMatrix.copy(this.hiddenMatrix0),e){this.object.updateMatrix(),this.object.updateMatrixWorld(),this.object.matrix.copy(this.object.matrixWorld),this.object.matrix.decompose(this.position,this.quaternion,this.scale),this.object.parent?this.object.hiddenMatrix.copy(this.object.parent.matrixWorld).invert():this.object.hiddenMatrix.identity();let t=new Qn().setFromQuaternion(this.quaternion,"YXZ"),r=t.y;this.objectRealQuat.copy(this.quaternion),t.y=0,this.quaternion.setFromEuler(t),this.objXZQuat.copy(this.quaternion),this.objXZQuatInv.copy(this.objXZQuat).invert(),this.objXZRotMat.makeRotationFromQuaternion(this.quaternion),t.set(0,r,0),this.quaternion.setFromEuler(t),this.rot.setFromEuler(t),this.euler.setFromQuaternion(this.quaternion,"YXZ"),this.velocityTarget.set(0,0,0),this.velocity.set(0,0,0)}else this.object instanceof wo?this.object.matrixAutoUpdate=!0:this.object.updateMatrix();this.cameraFollow===!0&&(this.camera.quaternion.copy(this.quat0Cam),this.camera.position.copy(this.position0Cam),this.camera.scale.copy(this.scale0Cam),this.camera.hiddenMatrix.copy(this.hiddenMatrix0Cam),this.camera.matrixAutoUpdate=!0),this.controlsManager.requestRender()}activate(){this.instantiateActions(),this.domElement.ownerDocument.addEventListener("pointerdown",this.onPointerDown),this.domElement.ownerDocument.addEventListener("keydown",this.onKeyDown),this.domElement.ownerDocument.addEventListener("keyup",this.onKeyUp),this.domElement.ownerDocument.addEventListener("pointerlockchange",this.onPointerlockChange),this.domElement.ownerDocument.addEventListener("pointerlockerror",this.onPointerlockError),this.domElement.ownerDocument.addEventListener("visibilitychange",this.handleVisibilityChange)}deactivate(){this.disposeActions(),this.domElement.ownerDocument.removeEventListener("pointerdown",this.onPointerDown),this.domElement.ownerDocument.removeEventListener("keydown",this.onKeyDown),this.domElement.ownerDocument.removeEventListener("keyup",this.onKeyUp),this.domElement.ownerDocument.removeEventListener("pointerlockchange",this.onPointerlockChange),this.domElement.ownerDocument.removeEventListener("pointerlockerror",this.onPointerlockError),this.domElement.ownerDocument.removeEventListener("visibilitychange",this.handleVisibilityChange)}dispose(){var e;this.deactivate(),(e=this.navMeshPathDest)!=null&&e.parent&&this.page.remove(this.navMeshPathDest)}instantiateActions(){let e=this.data,t=this.sharedAssets;e.gameActions!==void 0&&(this.actions={},m6.list.forEach(r=>{this.actions[r]=Hn({...e,disabled:!1,type:"GameControl"},e.gameActions[r],this.page,t,this.controlsManager.eventManager,this.object)})),this.dispatchStopEvent("move"),this.dispatchStopEvent("run"),this.dispatchStopEvent("jump"),this.dispatchStartEvent("idle"),this.initialAction&&(this.initialAction=!1)}disposeActions(){this.initialAction=!1,this.dispatchStopEvent("idle"),this.dispatchStopEvent("move"),this.dispatchStopEvent("run"),this.dispatchStopEvent("jump"),_a(this.actions.idle),_a(this.actions.move),_a(this.actions.run),_a(this.actions.jump)}dispatchStartEvent(e){this.actions[e]!==void 0&&(this.actionState[e]||(this.actionState[e]=!0,this.actions[e].Transition.forEach(t=>{t.play()}),this.actions[e].Animation.forEach(t=>{t.play(this.initialAction===!1)}),this.actions[e].Create.forEach(t=>{t.dispatchStart()}),this.actions[e].Audio.forEach(t=>{t.dispatchGameControl("start")}),this.actions[e].Particles.forEach(t=>{t.dispatchGameControl("start")})))}dispatchStopEvent(e){this.actions[e]!==void 0&&(!this.actionState[e]||(this.actionState[e]=!1,this.actions[e].Transition.forEach(t=>{t.stop(),t.object.currentState!==null&&t.object.changeSelectedState(null,{scene:this.page.scene,shared:this.sharedAssets})}),this.actions[e].Create.forEach(t=>{t.dispatchStop()}),this.actions[e].Audio.forEach(t=>{t.dispatchGameControl("stop")}),this.actions[e].Particles.forEach(t=>{t.dispatchGameControl("stop")})))}get colliderWorldPosition(){return Io.copy(this.collider.position).applyQuaternion(this.objectRealQuat).add(this.position)}update(e,t,r){var s,l,u,c,h,d,f,p,v;if(this.gravity<0?this.position.y<this.resetYPosition:this.position.y>this.resetYPosition)return this.reset(!0),!0;this.sharedGameControlGlobals.gamePads.forEach(this.copyVRGamePadValues);let i=(this.isFirstFrame?16.6:e)/1e3;this.isFirstFrame&&(this.isFirstFrame=!1);let n=i*60,a=!1;if(this.usePhysics&&this.collisionEnabled){let m=as.set(0,(this.velocity.y===0?this.pixelsPerMeter*Math.max(Math.abs(this.gravity)/(10*lne),1)*(this.gravity>0?1:-1):this.velocity.y)*i,0).divideScalar(this.pixelsPerMeter),g=this.sharedGameControlGlobals.rapierWorld.castShape(this.colliderWorldPosition.divideScalar(this.pixelsPerMeter),this.colliderWorldQuat,m,(s=this.object.rigidBody)==null?void 0:s.collider(0).shape,1,!1,16,void 0,void 0,this.object.rigidBody);if(g){this.onObject=!0,this.groundNormal.set(g.normal2.x,g.normal2.y,g.normal2.z).applyQuaternion(this.colliderWorldQuat).negate(),this.alignToGround&&this.groundTiltAdjustment(this.groundNormal),Math.acos(this.groundNormal.y)<this.slopeThresh&&(a=!0),((l=g.collider.parent())==null?void 0:l.bodyType())===0&&Math.acos(this.groundNormal.y)*(180/Math.PI)>45&&(this.onObject=!1);let y=g.collider.parent();this.groundYRotation=0,this.groundVelocity.set(0,0,0);for(let x of this.sharedGameControlGlobals.entitiesWithTransformAnim)if(x.rigidBody===y&&x.userData.isFollowingObj!==this.object.uuid){(x.hasNonUniformScale?x.matrixWorldRigid:x.matrixWorld).decompose(Io,Eh,as),this.groundVelocity.subVectors(Io,x.prevT),this.object.getWorldPosition(as).add(this.collider.position).sub(Io),this.groundYRotation=ic.setFromQuaternion(Eh).y-x.prevR.y,df.copy(as).applyAxisAngle(tu,this.groundYRotation),this.groundVelocity.add(df.sub(as)).divideScalar(i);break}}else this.onObject=!1}if(this.moveMode==="walk"&&this.collisionEnabled&&(this.movementState.jump===1&&this.onObject&&(this.velocityTarget.y=this.jumpPower,this.movementState.jump=0,this.dispatchStopEvent("idle"),this.dispatchStopEvent("move"),this.dispatchStopEvent("run"),this.dispatchStopEvent("jump"),this.dispatchStartEvent("jump"),this.onObject=!1),this.onObject?this.velocityTarget.y/=2:this.velocityTarget.y+=this.gravity*n),this.moveMode==="fly"&&(this.velocityTarget.y=(this.movementState.movePosY-this.movementState.moveNegY)*this.speedTranslate),this.directionXZ.z=this.movementState.movePosZ-this.movementState.moveNegZ,this.directionXZ.x=this.movementState.movePosX-this.movementState.moveNegX,this.forwardDir==="+z"&&this.directionXZ.multiplyScalar(-1),this.directionXZ.manhattanLength()>0&&(this.path=[]),this.navMeshPathDest){let m=this.navMeshPathDest.material;if(this.moveMode==="walk"&&this.path.length>1){this.navMeshPathDest.position.copy(this.path[this.path.length-1]),this.navMeshPathDest.parent||this.page.add(this.navMeshPathDest);let g=Io.subVectors(this.path[1],this.position),y=as.subVectors(this.path[1],this.path[0]);g.dot(y)<0?this.path.shift():(this.directionXZ.x=y.x,this.directionXZ.z=y.z),m.opacity=m.userData.opacity0}else m.opacity-=.05*m.userData.opacity0,this.navMeshPathDest.material.opacity<=0&&this.navMeshPathDest.parent&&this.page.remove(this.navMeshPathDest)}this.directionXZ.normalize(),this.movementState.run?this.moveForce=this.runMultiplier:this.moveForce=1,this.velocityTarget.z=this.directionXZ.z*this.speedTranslate*this.moveForce,this.velocityTarget.x=this.directionXZ.x*this.speedTranslate*this.moveForce,(this.moveMode==="walk"?this.velocityTarget.x+this.velocityTarget.z===0:this.velocityTarget.manhattanLength()===0)?this.lerpFactorPos.setScalar(this.lerpFactorPosEnd):this.lerpFactorPos.setScalar(this.lerpFactorPosStart),this.moveMode==="walk"&&(this.lerpFactorPos.y=1),this.didHit===!1&&this.pushedVelocity.manhattanLength()===0||this.usePhysics===!1?(this.velocity.x+=(this.velocityTarget.x-this.velocity.x)*(1-(1-this.lerpFactorPos.x)**n),this.velocity.y+=(this.velocityTarget.y-this.velocity.y)*(1-(1-this.lerpFactorPos.y)**n),this.velocity.z+=(this.velocityTarget.z-this.velocity.z)*(1-(1-this.lerpFactorPos.z)**n)):this.velocity.copy(this.velocityTarget),(this.moveMode==="walk"?this.velocity.x**2+this.velocity.z**2<this.speedTranslate:this.velocity.lengthSq()<this.speedTranslate)?(this.dispatchStopEvent("move"),this.dispatchStopEvent("run"),this.onObject&&(this.dispatchStopEvent("jump"),this.dispatchStartEvent("idle"))):(this.dispatchStopEvent("idle"),this.onObject&&(this.dispatchStopEvent("jump"),this.movementState.run?(this.dispatchStopEvent("move"),this.dispatchStartEvent("run")):(this.dispatchStopEvent("run"),this.dispatchStartEvent("move"))));let o=Q7t.copy(this.velocity);if(this.orientMode!=="none"&&this.isFirstPerson===!1){let m=as.copy(o);m.y=0,o.set(0,o.y,m.length()*(this.forwardDir==="+z"?1:-1))}if(this.directionXZ.manhattanLength()>0&&this.orientMode!=="none"&&this.isFirstPerson===!1)if(this.orientWith==="camera"&&this.path.length<=1){let m=Io;this.camera.getWorldDirection(m);let g=df.copy(tu).multiplyScalar(m.dot(tu));m.sub(g);let y=as.copy(this.directionXZ);y.x*=-1,this.rot.y=m.angleTo(y)*(m.cross(y).y>0?-1:1)+this.rotationAccumWhenOrientWithCamera}else this.rot.y=(this.path.length>1?0:this.euler.y)+Math.atan2(-this.directionXZ.z,this.directionXZ.x)+Math.PI/2*(this.forwardDir==="+z"?1:-1);if(ic.setFromVector3(this.rot),this.moveMode==="walk"&&(ic.x=0),o.applyEuler(ic),a&&(Eh.setFromUnitVectors(tu,this.groundNormal),o.applyQuaternion(Eh)),r){let m=ic.set(0,this.vrEulerYOffset*une,0);r.applyEuler(m),o.x+=r.x,o.z+=r.z,this.nonColliderPosOffset.elements[13]+=r.y*i}if(this.usePhysics===!0){let m=as;this.pushedVelocity.set(0,0,0);for(let g of this.sharedGameControlGlobals.entitiesWithTransformAnim){let y=df.setFromMatrixPosition(g.matrixWorld).sub(g.prevT).divideScalar(i).divideScalar(this.pixelsPerMeter),x=g.rigidBody.collider(0).castCollider(y,this.object.rigidBody.collider(0),Io.copy(o).divideScalar(this.pixelsPerMeter),i,!1);y.multiplyScalar(this.pixelsPerMeter);let b=Gr.is(g)?g:g.object;if(x!==null&&this.lastHitObj!==b){let _;g instanceof yo&&(_=g);let w=this.sharedGameControlGlobals.entityToCollisionEvents[b.uuid];if(w)for(let S of w)S.data.target==="character"&&(S.dispatch(_),b.dispatchEvent(aB));this.lastHitObj=b}if(x!==null){this.pushedVelocity.copy(y),m.copy(x.normal1).applyQuaternion(g.quaternion);break}}if(this.pushedVelocity.manhattanLength()!==0){let g=m.dot(o);g<0&&o.addScaledVector(m,-g),o.add(this.pushedVelocity)}else o.add(this.groundVelocity)}if(this.rotDirection.y=Number(this.movementState.rotPosY)-Number(this.movementState.rotNegY),this.rotDirection.x=Number(this.movementState.rotPosX)-Number(this.movementState.rotNegX),this.rotDirection.normalize(),this.rotationMode==="normal"&&(this.movementState.rotPosX||this.movementState.rotNegX)||this.rotationMode==="steer"&&(this.movementState.rotPosX||this.movementState.rotNegX)&&(this.movementState.movePosZ||this.movementState.moveNegZ||this.moveMode==="walk")?this.rotVelocityStick.x=-this.rotDirection.x*this.speedOrbit*this.rotForce:this.rotVelocityStick.x=0,this.rotationMode==="normal"&&(this.movementState.rotPosY||this.movementState.rotNegY)||this.rotationMode==="steer"&&(this.movementState.rotPosY||this.movementState.rotNegY)&&(this.movementState.movePosZ||this.movementState.moveNegZ)?this.rotVelocityStick.y=-this.rotDirection.y*this.speedOrbit*this.rotForce:this.rotVelocityStick.y=0,this.rotVelocityTarget.subVectors(this.eulerDelta.divideScalar(i),this.rotVelocityStick),this.rotVelocityTarget.manhattanLength()===0?this.rotVelocity.lerp(this.rotVelocityTarget,1-(1-this.lerpFactorRotEnd)**n):this.rotVelocity.lerp(this.rotVelocityTarget,1-(1-this.lerpFactorRotStart)**n),this.euler.x+=this.rotVelocity.x*i,this.euler.y+=this.rotVelocity.y*i+this.groundYRotation,this.rotVelocityTarget.y===0&&this.directionXZ.manhattanLength()===0?this.rotationAccumWhenOrientWithCamera=0:(this.cameraFollow===!1||this.cameraYAxis==="Locked")&&(this.rotationAccumWhenOrientWithCamera+=this.rotVelocity.y*i),this.isFirstPerson===!1&&this.orientMode!=="none"&&this.directionXZ.manhattanLength()>0){if(this.orientMode==="radial"){this.objectToCamXZ.copy(this.objectToCamXZ0).applyAxisAngle(tu,this.euler.y-this.euler0.y);let m=as.copy(this.objectToCamXZ).normalize(),g=df.copy(o).multiplyScalar(i);g.y=0;let y=g.sub(Io.copy(m).multiplyScalar(g.dot(m))).cross(m).y;this.euler.y-=Math.atan2(y,this.objectToCamXZ.length())}}else this.rot.y+=this.rotVelocity.y*i+this.groundYRotation,this.rotVelocityTarget.y!==0&&(this.cameraFollow===!1||this.cameraYAxis==="Locked")&&(this.euler.y=this.rot.y);if(this.cameraFollow===!0&&(this.moveMode==="walk"?this.cameraXAxis==="Limit"?this.euler.x=vt.clamp(this.euler.x,-this.maxPolarAngle+this.cameraPolarOffset+1e-6,-this.minPolarAngle+this.cameraPolarOffset-1e-6):this.euler.x=vt.clamp(this.euler.x,-this.PI_2+this.cameraPolarOffset,this.PI_2+this.cameraPolarOffset):this.cameraXAxis==="Limit"&&(this.euler.x=vt.clamp(this.euler.x,-this.PI_2,this.PI_2))),this.moveMode==="fly"?this.rot.x=this.euler.x:this.isFirstPerson&&(t?(ic.copy(t),ic.y=0):(ic.copy(this.euler),ic.y=0),this.nonColliderRotOffset.makeRotationFromEuler(ic)),t&&(this.moveMode==="walk"?(this.rot.y=t.y,this.rot.x=0,this.rot.z=0):this.rot.setFromEuler(t),this.rot.y+=this.vrEulerYOffset*une),eu.setFromAxisAngle(J7t,this.rot.x),Eh.setFromAxisAngle(tu,this.rot.y),Eh.multiply(eu),eu.setFromAxisAngle($7t,this.rot.z),Eh.multiply(eu),this.quaternion.copy(Eh),this.objectRealQuat.multiplyQuaternions(this.quaternion,this.objXZQuat),this.colliderWorldQuat.copy(this.objectRealQuat).multiply(this.collider.rotation),this.collisionEnabled)if(this.usePhysics){let m=as.copy(o).multiplyScalar(i/this.pixelsPerMeter),g=null;this.didHit=!1;let y=new U;for(let x=0;x<5;x++){let b=m.length(),_=df.copy(m).normalize();if(g=this.sharedGameControlGlobals.rapierWorld.castShape(this.colliderWorldPosition.divideScalar(this.pixelsPerMeter).add(y),this.colliderWorldQuat,_,(u=this.object.rigidBody)==null?void 0:u.collider(0).shape,b,!1,24,void 0,void 0,this.object.rigidBody),g!==null){this.didHit=!0;let w=this.sharedGameControlGlobals.colliderToEntity.get(g.collider.handle);if(w!==this.lastHitObj&&x===0){this.lastHitObj=w;let E=this.sharedGameControlGlobals.entityToCollisionEvents[w==null?void 0:w.uuid];if(E){for(let T of E)if(T.data.target==="character"){let L=((c=this.sharedGameControlGlobals.rapierWorld)==null?void 0:c.getCollider(g.collider.handle))._parent,P;if(w.cloner){for(let C of w.cloner.children)if(C.rigidBody===L){P=C;break}}T.dispatch(P),w.dispatchEvent(aB)}}}let S=nne.set(g.normal2.x,g.normal2.y,g.normal2.z).applyQuaternion(this.colliderWorldQuat),A=ane.copy(_).multiplyScalar(g.toi).dot(S),M=g.toi;if(M===0&&(this.position.y+=this.offset*this.pixelsPerMeter),A>this.offset&&(M=g.toi*(A-this.offset)/A,y.addScaledVector(_,M)),m.copy(_).multiplyScalar(b-M),Math.acos(-S.y)>this.slopeThresh){let E=this.colliderWorldPosition.divideScalar(this.pixelsPerMeter).add(y),T=df.copy(g.witness2).applyQuaternion(this.colliderWorldQuat);T.y=0;let L=E.add(T);L.y+=this.stepThresh;let P=this.sharedGameControlGlobals.rapierWorld.castShape(L,this.colliderWorldQuat,m,(h=this.object.rigidBody)==null?void 0:h.collider(0).shape,1,!1,24,void 0,void 0,this.object.rigidBody);P!==null&&P.toi===0&&(S.y=0,S.normalize())}m.addScaledVector(S,-m.dot(S))}else{x===0&&this.directionXZ.manhattanLength()!==0&&(this.lastHitObj=null),y.add(m);break}}this.position.addScaledVector(y,this.pixelsPerMeter),(d=this.object.rigidBody)==null||d.setTranslation(Io.copy(this.position).divideScalar(this.pixelsPerMeter),!0),(f=this.object.rigidBody)==null||f.setRotation(eu.copy(this.quaternion).premultiply(this.groundTilt).multiply(this.objXZQuat),!0)}else{let m=this.onObject?1:5,g=o.multiplyScalar(i/m);for(let y=0;y<m;y++)this.position.add(g),this.collisionAdjustment(i/m)}else this.position.addScaledVector(o,i);if(this.moveMode==="walk"&&this.onObject&&(this.velocityTarget.y=0,this.velocity.y=0),this.quaternion.premultiply(this.groundTilt).multiply(this.objXZQuat),this.object.matrix.compose(this.position,this.quaternion,this.scale),this.object.matrixWorldNeedsUpdate=!0,this.object.matrix.multiply(this.nonColliderPosOffset).multiply(this.nonColliderRotOffset),this.quaternion.premultiply(this.groundTiltInv).multiply(this.objXZQuatInv),this.cameraFollow===!0){this.updateFollowArms();let m=this.objectToTarget.add(this.position),g=this.targetToCamera.add(m);FD.lookAt(g,m,tu).setPosition(g),FD.decompose(this.targetPos,this.targetQuat,Io),this.camera.quaternion.slerp(this.targetQuat,1-(1-this.lerpFactorRotCamera)**n),this.camera.position.lerp(this.targetPos,1-(1-this.lerpFactorPosCamera)**n),this.camera.updateMatrix(),this.camera.updateMatrixWorld(),this.cameraYAxis==="Limit"&&this.orientMode==="cartesian"&&(this.euler.y=vt.clamp(this.euler.y,this.minAzimuthAngleRel,this.maxAzimuthAngleRel)),this.euler.x=vt.clamp(this.euler.x,-this.PI_2+(this.cameraPolarOffset<0?this.cameraPolarOffset:0),this.PI_2+(this.cameraPolarOffset>0?this.cameraPolarOffset:0))}return this.eulerDelta.set(0,0,0),this.object.dispatchEvent(aEt),this.path.length<2&&this.lastPosition.distanceToSquared(this.position)<this.threshEndTranslate&&Math.abs(this.rotVelocity.x)<this.threshEndRotVel&&Math.abs(this.rotVelocity.y)<this.threshEndRotVel&&(this.camera===void 0||this.isFirstPerson||this.lastCameraPosition.distanceToSquared(this.camera.position)<this.threshEndTranslate&&8*(1-this.lastCameraQuaternion.dot(this.camera.quaternion))<this.threshEndRotate)&&(this.moveMode==="fly"||this.onObject===!0||this.collisionEnabled===!1)&&(this.navMeshPathDest===null||this.navMeshPathDest.material.opacity<-.04*((v=(p=this.navMeshPathDest)==null?void 0:p.material)==null?void 0:v.userData.opacity0))?!1:(this.camera&&(this.lastCameraPosition.copy(this.camera.position),this.lastCameraQuaternion.copy(this.camera.quaternion)),this.lastPosition.copy(this.position),this.object.dispatchEvent(nEt),!0)}updateFollowArms(){this.objectToTarget.copy(this.objectToTarget0),this.targetToCamera.copy(this.targetToCamera0);let e=eu.setFromAxisAngle(tu,this.cameraYAxis==="Limit"&&this.orientMode!=="radial"?vt.clamp(this.euler.y-this.euler0.y,this.minAzimuthAngleRel,this.maxAzimuthAngleRel):this.euler.y-this.euler0.y);(this.cameraYAxis!=="Locked"||this.orientMode==="radial")&&this.objectToTarget.applyQuaternion(e);let t;this.cameraXAxis==="Limit"?t=vt.clamp(this.euler.x,-this.maxPolarAngle+this.cameraPolarOffset+1e-6,-this.minPolarAngle+this.cameraPolarOffset-1e-6):t=vt.clamp(this.euler.x,-this.PI_2+this.cameraPolarOffset+1e-6,this.PI_2+this.cameraPolarOffset-1e-6);let r=Io.copy(this.cameraPolarAxis0);(this.cameraYAxis!=="Locked"||this.orientMode==="radial")&&r.applyQuaternion(e);let i=Eh.setFromAxisAngle(r,t);this.cameraYAxis!=="Locked"&&this.targetToCamera.applyQuaternion(e),this.cameraXAxis!=="Locked"&&this.targetToCamera.applyQuaternion(i)}groundTiltAdjustment(e){tu.angleTo(e)*180/Math.PI<15||tu.angleTo(e)*180/Math.PI>85?eu.identity():eu.setFromUnitVectors(tu,e),this.groundTilt.slerp(eu,.06),this.groundTiltInv.copy(this.groundTilt).invert()}collisionAdjustment(e){var n;let t=ane.set(0,0,0);this.object.matrix.compose(this.position,this.quaternion,this.scale);let r=FD.multiplyMatrices(this.object.matrix,this.objXZRotMat).multiply(this.collider.matrix).decompose(Io,eu,as).compose(Io,eu,sne);this.sharedGameControlGlobals.entitiesWithTransformAnim.forEach(a=>{if(a===this.object||a.isDescendantOf(this.object))return;sl.makeEmpty(),a.updateMatrixWorldSVD();let o=a.matrixWorldRigid,s=one.copy(o).invert(),l=K7t.copy(one).multiply(r);ua.copy(this.collider.segment),ua.start.applyMatrix4(l),ua.end.applyMatrix4(l);let u=nne.copy(this.position).applyMatrix4(s);sl.expandByPoint(ua.start),sl.expandByPoint(ua.end),sl.min.addScalar(-this.collider.radius),sl.max.addScalar(this.collider.radius),a.bvhGeometry.boundsTree.shapecast({traverseBoundsOrder(c){return c.distanceToPoint(ua.end)},intersectsBounds:c=>c.intersectsBox(sl),intersectsTriangle:c=>{let h=Io,d=as,f=c.closestPointToSegment(ua,h,d);if(f<this.collider.radius){let p=this.collider.radius-f,v=d.sub(h).normalize(),m=df.copy(u);m.addScaledVector(v,p);let g=m.applyMatrix4(o).sub(this.position);t.add(g),ua.start.addScaledVector(v,p),ua.end.addScaledVector(v,p)}}})}),sl.makeEmpty(),ua.copy(this.collider.segment),ua.start.applyMatrix4(r),ua.end.applyMatrix4(r),sl.expandByPoint(ua.start),sl.expandByPoint(ua.end),sl.min.addScalar(-this.collider.radius),sl.max.addScalar(this.collider.radius),(n=this.sharedGameControlGlobals.staticMeshBVH)==null||n.shapecast({traverseBoundsOrder(a){return a.distanceToPoint(ua.end)},intersectsBounds:a=>a.intersectsBox(sl),intersectsTriangle:a=>{let o=Io,s=as,l=a.closestPointToSegment(ua,o,s);if(l<this.collider.radius){let u=this.collider.radius-l,c=s.sub(o).normalize();this.alignToGround&&this.groundTiltAdjustment(c),t.addScaledVector(c,u),ua.start.addScaledVector(c,u),ua.end.addScaledVector(c,u)}}}),this.onObject=Math.abs(t.y)>Math.abs(e*this.velocity.y*.25),this.onObject&&this.dispatchStopEvent("jump");let i=Math.max(0,t.length()-1e-5);t.normalize().multiplyScalar(i),this.position.add(t)}},_2e=iB;_2e.isLocked=!1;var oEt=Dp(Pve());function Gh(e,t){let r=new It;if(t){let a=t.elements,o=a[0]**2+a[1]**2+a[2]**2,s=a[4]**2+a[5]**2+a[6]**2,l=a[8]**2+a[9]**2+a[10]**2,u=a[0]**2+a[4]**2+a[8]**2,c=a[1]**2+a[5]**2+a[9]**2,h=a[2]**2+a[6]**2+a[10]**2,d=1e-8;if(o<d||s<d||l<d||u<d||c<d||h<d)return r.setAttribute("position",new ht([],3)),r.setIndex([]),r}if(!e.getAttribute("position"))return r.setAttribute("position",new ht([],3)),r.setIndex([]),r;let{positions:i,triIndices:n}=V7(e.getAttribute("position"),e.getIndex());return r.setAttribute("position",new ht(i,3)),r.setIndex(n),t&&r.applyMatrix4(t),r}var sEt=new Ke,lEt=new Ke,nc=[[0,0,0],[0,0,0],[0,0,0]];function A2e(e){let t=e.elements;nc[0][0]=t[0],nc[0][1]=t[4],nc[0][2]=t[8],nc[1][0]=t[1],nc[1][1]=t[5],nc[1][2]=t[9],nc[2][0]=t[2],nc[2][1]=t[6],nc[2][2]=t[10];let{u:r,v:i}=(0,oEt.SVD)(nc),n=sEt.set(r[0][0],r[0][1],r[0][2],0,r[1][0],r[1][1],r[1][2],0,r[2][0],r[2][1],r[2][2],0,0,0,0,1),a=lEt.set(i[0][0],i[0][1],i[0][2],0,i[1][0],i[1][1],i[1][2],0,i[2][0],i[2][1],i[2][2],0,0,0,0,1);return n.multiply(a.transpose())}var uEt=class extends wme{constructor(){super(),this.layers.enable(3),this.layers.enable(8)}setFromCamera(e,t){t.isOrthographicCamera?(this.ray.origin.set(e.x,e.y,-1).unproject(t),this.ray.direction.set(0,0,-1).transformDirection(t.matrixWorld),this.camera=t):t.isPerspectiveCamera?(this.ray.origin.set(e.x,e.y,-1).unproject(t),this.ray.direction.set(e.x,e.y,.5).unproject(t).sub(this.ray.origin).normalize(),this.camera=t):console.error("Raycaster: Unsupported camera type.")}intersectVisibleObjects(e,t=!0,r=[]){return e.forEach(i=>{i.visible&&this.intersectObject(i,t,r)}),r}createRaycastLineHelper(){let e=new Ip({color:65280,linewidth:10}),t=new U(this.ray.origin.x,this.ray.origin.y,this.ray.origin.z),r=new U(this.ray.direction.x,this.ray.direction.y,this.ray.direction.z),i=this.camera.far-this.camera.near,n=new U().addVectors(t,r.multiplyScalar(i)),a=new It;return a.setFromPoints([t,n]),new zS(a,e)}},S2e=e=>e instanceof T1||e instanceof P1;function cEt(e,t){return e.distance-t.distance}function C2e(e,t,r){if(!(!Uh(t)||!t.visible)){hu(t)&&t.raycast(e,r);for(let i of t.children)C2e(e,i,r)}}function t8(e,t,r,i=!1){if(!i&&!r.some(a=>N6(e,a)!==void 0))return[];let n=[];return t.children.forEach(a=>C2e(e,a,n)),n.sort(cEt),n}function nB(e){let t=[];if(e.length){let r=e[0].object;Uh(r)&&t.push(r);let i=r.parent;for(;i;)S2e(i)&&t.push(i),i=i.parent}return t}function jh(e,t,r,i){let n=e.frame;if(n){let a=t[0]*n.width,o=(1-t[1])*n.height;for(let s of r){let l=s===n.uuid?n:n.find(s);if(l!=null&&l.intersects(a,o))return i(l),!0}}return!1}function N6(e,t){if(hu(t)){if(t.visible){let r=[];return t.raycast(e,r),r.length?r[0]:void 0}}else if(S2e(t))return E2e(e,t)}function E2e(e,t){if(!(!Uh(t)||!t.visible)){if(hu(t)){let r=[];if(t.raycast(e,r),r.length)return r[0]}for(let r of t.children){let i=E2e(e,r);if(i)return i}}}function hEt(e,t,r){return{x:(e-(r.left+window.scrollX))/r.width*2-1,y:-((t-(r.top+window.scrollY))/r.height)*2+1}}function dEt(e,t,r){return{x:(e-(r.left+window.scrollX))/r.width,y:1-(t-(r.top+window.scrollY))/r.height}}var fEt=class{constructor(e,t,r,i,n,a,o,s){this.renderer=e,this.publish=t,this.scene=r,this.getCamera=i,this.sharedAssets=n,this.requestRender=a,this.isExport=o,this.frame=s,this.raycaster=new uEt,this._useWindowEvents=!1,this.pointerWorld={x:0,y:0},this.pointerScreen={x:0,y:0},this._useWindowEvents=t.mouseEventTarget==="window",this.domElement=e.domElement,this.eventElement=this._useWindowEvents?window:e.domElement,this._domRect=this.domElement.getBoundingClientRect()}get stopRaycast(){return this.publish.stopRaycast}get page(){return this.scene.activePage}set useWindowEvents(e){this._useWindowEvents=e,this.eventElement=e?window:this.renderer.domElement}get useWindowEvents(){return this._useWindowEvents}set domRect(e){this._domRect=e}get domRect(){return this._domRect}updateRaycaster(e){var i;let{pageX:t,pageY:r}=((i=e.touches)==null?void 0:i.length)>0?e.touches[0]:e;this.pointerWorld=hEt(t,r,this._domRect),this.pointerScreen=dEt(t,r,this._domRect),this.raycaster.setFromCamera(this.pointerWorld,this.getCamera())}},Co=class{constructor(e){this.eventContext=e,this.domEventsNeeded=new Set,this.hasVideoAction=!1}connect(){}disconnect(){}},RH=[["start","Start"],["keyDown","KeyDown"],["keyUp","KeyUp"],["mouseDown","MouseDown"],["mouseUp","MouseUp"],["mouseHover","MouseHover"],["collision","Collision"],["lookAt","LookAt"],["follow","Follow"],["scroll","Scroll"]],M2e=e=>{var t;return(t=RH.find(([r,i])=>i===e))==null?void 0:t[0]},e3=e=>{var t;return(t=RH.find(([r])=>r===e))==null?void 0:t[1]},pEt=(e,t)=>{let r=M2e(e);if(r){let i=new CustomEvent(r,{bubbles:!0});return Object.defineProperty(i,"target",{writable:!1,value:t}),i}},vEt=class extends Co{constructor(){super(...arguments),this.objectsPerEvents=new Map,this.splineEvents={},this.onBeginEvent=e=>{var i;if(!e.eventName||!e.target||e.eventName==="Scroll")return;let t=(i=this.splineEvents[M2e(e.eventName)])==null?void 0:i[e.target.uuid];if(!t)return;e.eventName==="Scroll"&&e.deltaY!==void 0&&Object.assign(t,{deltaY:e.deltaY});let{domElement:r}=this.eventContext;r.dispatchEvent(t)}}connect(){let{page:e}=this.eventContext;e.traverseEntity(t=>{var r,i;if((r=t.data)!=null&&r.events.length){for(let[n,a]of RH)if(t.data.events.some(o=>o.data.type===a&&!o.data.disabled)){this.objectsPerEvents.has(n)?(i=this.objectsPerEvents.get(n))==null||i.push(t):this.objectsPerEvents.set(n,[t]);let o={id:t.uuid,name:t.name},s=pEt(a,o),l=this.splineEvents[n];l?l[t.uuid]=s:this.splineEvents[n]={[t.uuid]:s}}}}),this.objectsPerEvents.forEach(t=>{t.forEach(r=>{r.addEventListener("beginEvent",this.onBeginEvent)})})}disconnect(){this.objectsPerEvents.forEach(e=>{e.forEach(t=>{t.removeEventListener("beginEvent",this.onBeginEvent)})})}},mEt=class{constructor(e,t,r,i,n,a){if(this.id=e,this.data=t,this.object=r,this.entered=!1,(t.type==="KeyDown"||t.type==="KeyUp"||t.type==="KeyPress")&&!t.key)throw new Error("Missing property");this.actions=Hn(t,t.actions,i,n,a,r)}disconnect(){_a(this.actions)}dispatchHeld(e){this.actions.Create.forEach(t=>{e&&t.dispatchThrottled.cancel(),t.dispatchThrottled()})}dispatch(e=!1){this.actions.Transition.forEach(t=>{t.object.currentTransitionEvent!==this&&(t.object.currentTransitionEvent=this,t.init())}),this.data.type==="MousePress"||this.data.type==="KeyPress"?this.entered||(this.entered=!0,this.actions.Transition.forEach(t=>t.playFromCurrent()),this.actions.Animation.forEach(t=>t.playFromCurrent()),this.actions.SwitchCamera.forEach(t=>t.playFromCurrent()),this.actions.Create.forEach(t=>t.dispatchStart())):(this.actions.Transition.some(t=>t.playing&&t.data.runMode!=="Toggle")||this.actions.Transition.forEach(t=>{t.data.runMode==="Toggle"?t.toggle():t.play()}),this.actions.SwitchCamera.some(t=>t.playing&&t.data.runMode!=="Toggle")||this.actions.SwitchCamera.forEach(t=>{t.data.runMode==="Toggle"?t.toggle():t.play()}),this.actions.Animation.forEach(t=>{t.data.runMode==="Toggle"?t.toggle():t.play()})),this.actions.Link.forEach(t=>{t.dispatch()}),this.actions.SceneTransition.forEach(t=>{t.dispatch()}),e===!1&&this.actions.Create.forEach(t=>{t.dispatch()}),this.actions.Destroy.forEach(t=>{t.dispatch()}),this.actions.Reset.forEach(t=>{t.dispatch()}),this.actions.Audio.forEach(t=>{t.dispatchBasic()}),this.actions.Video.forEach(t=>{t.dispatchBasic()}),this.actions.Particles.forEach(t=>{t.dispatchBasic()}),this.actions.SetVariable.forEach(t=>t.checkConditions()),this.actions.SetVariable.forEach(t=>t.dispatch()),this.actions.DynamicVariablePlay.forEach(t=>t.dispatch()),this.actions.ClearLocalStorage.forEach(t=>t.dispatch()),this.actions.UserAPI.forEach(t=>t.dispatch())}dispatchRelease(){this.entered&&(this.entered=!1,this.actions.Transition.forEach(e=>e.reverseFromCurrent()),this.actions.Particles.forEach(e=>e.reverseFromCurrent()),this.actions.Animation.forEach(e=>e.reverseFromCurrent()),this.actions.SwitchCamera.forEach(e=>e.reverseFromCurrent()),this.actions.Create.forEach(e=>e.dispatchStop()))}dispatchUserEvent(e){this.actions.Transition.forEach(t=>{t.object.currentTransitionEvent!==this&&(t.object.currentTransitionEvent=this,t.init())}),e?(this.actions.Transition.forEach(t=>t.reverseFromCurrent()),this.actions.Animation.forEach(t=>t.reverseFromCurrent()),this.actions.SwitchCamera.forEach(t=>t.reverseFromCurrent())):(this.actions.Transition.forEach(t=>t.playFromCurrent()),this.actions.Animation.forEach(t=>t.playFromCurrent()),this.actions.SwitchCamera.forEach(t=>t.playFromCurrent())),this.actions.Link.forEach(t=>{t.dispatch()}),this.actions.SceneTransition.forEach(t=>{t.dispatch()}),this.actions.Create.forEach(t=>{t.dispatch()}),this.actions.Destroy.forEach(t=>{t.dispatch()}),this.actions.Reset.forEach(t=>{t.dispatch()}),this.actions.Audio.forEach(t=>{t.dispatchBasic()}),this.actions.Video.forEach(t=>{t.dispatchBasic()}),this.actions.Particles.forEach(t=>{t.dispatchBasic()}),this.actions.SetVariable.forEach(t=>t.checkConditions()),this.actions.SetVariable.forEach(t=>t.dispatch()),this.actions.DynamicVariablePlay.forEach(t=>t.dispatch()),this.actions.ClearLocalStorage.forEach(t=>t.dispatch()),this.actions.UserAPI.forEach(t=>t.dispatch())}},gEt=class extends Co{constructor(e,t,r){super(e),this.eventManager=t,this.useForRaycastProperty=r,this.objectsPerTypes={MouseDown:[],MouseUp:[],MousePress:[],KeyDown:[],KeyUp:[],KeyPress:[]},this.canvasMouseEvents=[],this.eventsPerObjects={MouseDown:{},MouseUp:{},MousePress:{},KeyDown:{},KeyUp:{},KeyPress:{}},this.heldKeys={},this.heldKeysPress={},this._prevObjects=[],this.sceneInterects=null,this.onCanvasRaycast=i=>{if(this.useForRaycastProperty===!0&&this.sceneInterects===null){this.eventContext.updateRaycaster(i);let{raycaster:n,page:a}=this.eventContext,o=t8(n,a,[],!0);this.sceneInterects=o,o.length&&(this.eventContext.sharedAssets.raycastProperty={x:o[0].point.x,y:o[0].point.y,z:o[0].point.z,objX:o[0].object.matrixWorld.elements[12],objY:o[0].object.matrixWorld.elements[13],objZ:o[0].object.matrixWorld.elements[14]})}},this.onCanvasMouseDown=i=>{(i.target===this.eventContext.domElement||i.target.tagName==="SPLINE-VIEWER")&&this.canvasMouseEvents.forEach(n=>{(n.data.type==="MouseDown"||n.data.type==="MousePress")&&(this.onCanvasRaycast(i),n.dispatch())})},this.onCanvasMouseUp=i=>{(i.target===this.eventContext.domElement||i.target.tagName==="SPLINE-VIEWER")&&this.canvasMouseEvents.forEach(n=>{n.data.type==="MouseUp"?(this.onCanvasRaycast(i),n.dispatch()):n.data.type==="MousePress"&&n.dispatchRelease()})},this.onMouseDown=i=>{jt.length>1||(this.eventContext.updateRaycaster(i),this.handleMouseEvent("MouseDown"))},this.onMouseUp=i=>{jt.length>1||(this.eventContext.updateRaycaster(i),this.handleMouseEvent("MouseUp"))},this.onMousePressDown=i=>{jt.length>1||(this.eventContext.updateRaycaster(i),this.handleMousePressEvent())},this.onMousePressRelease=i=>{jt.length>1||(this.eventContext.updateRaycaster(i),this.handleMousePressEvent(!0))},this.onKeyDown=i=>{this.heldKeys[i.key]||(this.handleKeyEvent(i,"KeyDown"),this.handleKeyEventHeld(i,"KeyDown",!0)),this.heldKeys[i.key]=!0},this.onKeyUp=i=>{this.handleKeyEvent(i,"KeyUp"),this.handleKeyEventHeld(i,"KeyUp",!0)},this.onKeyPressDown=i=>{this.heldKeysPress[i.key]?this.handleKeyEventHeld(i,"KeyPress"):(this.handleKeyEvent(i,"KeyPress"),this.handleKeyEventHeld(i,"KeyPress",!0)),this.heldKeysPress[i.key]=!0},this.onKeyPressUp=i=>{this.handleKeyEvent(i,"KeyPress",!0)},this.releaseHeldKey=i=>{delete this.heldKeys[i.key]},this.releaseHeldKeyPress=i=>{delete this.heldKeysPress[i.key]},this._onUserEvent=({eventName:i,target:n,reverse:a})=>{var s,l,u,c;if(!i||!n)return;let o=e3(i);o&&(o==="MouseDown"||o==="MouseUp"||o==="MousePress"?(n.dispatchEvent({type:"beginEvent",eventName:o}),(l=(s=this.eventsPerObjects[o])==null?void 0:s[n.uuid])==null||l.forEach(h=>{h.dispatchUserEvent(a)})):(o==="KeyDown"||o==="KeyUp"||o==="KeyPress")&&(n.dispatchEvent({type:"beginEvent",eventName:o}),(c=(u=this.eventsPerObjects[o])==null?void 0:u[n.uuid])==null||c.forEach(h=>{h.dispatchUserEvent()})))}}connect(){var n,a,o,s,l,u;let{page:e,sharedAssets:t,domElement:r}=this.eventContext,i=(c,h)=>{var f,p;if(!((f=c.data)!=null&&f.events.length))return;let d=["MouseDown","MouseUp","MousePress","KeyDown","KeyUp","KeyPress"];for(let v of d){let m=this.eventsPerObjects[v];c.data.events.filter(({data:g})=>g.type===v&&g.disabled!==!0).forEach(({id:g,data:y})=>{try{let x=new mEt(g,y,c,e,t,this.eventManager);x.actions.Video.length&&(this.hasVideoAction=!0),(y.type==="MouseDown"||y.type==="MouseUp"||y.type==="MousePress")&&(y.mode==="Canvas"||y.mode==="Window")?this.canvasMouseEvents.push(x):m[c.uuid]?m[c.uuid].some(b=>b.id===x.id)||m[c.uuid].push(x):m[c.uuid]=[x]}catch{}}),(p=m[c.uuid])!=null&&p.length&&this.objectsPerTypes[v].push(c instanceof Sa&&(v==="MouseDown"||v==="MouseUp"||v==="MousePress")?h:c)}};e.traverseEntity(c=>{var h;(c instanceof mo||c instanceof va)&&((h=c.frame)==null||h.traverse(d=>{i(d,c)})),i(c)}),this.heldKeys={},this.heldKeysPress={},this.domEventsNeeded.clear(),r.addEventListener("pointerdown",this.onCanvasMouseDown),r.addEventListener("pointerup",this.onCanvasMouseUp),((n=this.objectsPerTypes.MouseDown)!=null&&n.length||this.useForRaycastProperty)&&(this.domEventsNeeded.add("pointerdown"),r.addEventListener("pointerdown",this.onMouseDown)),(a=this.objectsPerTypes.MouseUp)!=null&&a.length&&(this.domEventsNeeded.add("pointerup"),r.addEventListener("pointerup",this.onMouseUp)),(o=this.objectsPerTypes.MousePress)!=null&&o.length&&(this.domEventsNeeded.add("pointerdown"),r.addEventListener("pointerdown",this.onMousePressDown),this.domEventsNeeded.add("pointerup"),r.addEventListener("pointerup",this.onMousePressRelease)),(s=this.objectsPerTypes.KeyDown)!=null&&s.length&&(this.domEventsNeeded.add("keydown"),document.addEventListener("keydown",this.onKeyDown),document.addEventListener("keyup",this.releaseHeldKey)),(l=this.objectsPerTypes.KeyUp)!=null&&l.length&&(this.domEventsNeeded.add("keyup"),document.addEventListener("keyup",this.onKeyUp)),(u=this.objectsPerTypes.KeyPress)!=null&&u.length&&(this.domEventsNeeded.add("keydown"),document.addEventListener("keydown",this.onKeyPressDown),document.addEventListener("keyup",this.releaseHeldKeyPress),this.domEventsNeeded.add("keyup"),document.addEventListener("keyup",this.onKeyPressUp)),Object.entries(this.objectsPerTypes).forEach(([c,h])=>{h.forEach(d=>{d.addEventListener("userEvent",this._onUserEvent)})})}disconnect(){let{domElement:e}=this.eventContext;this.domEventsNeeded.clear(),this.heldKeys={},this.heldKeysPress={},e.removeEventListener("pointerdown",this.onCanvasMouseDown),e.removeEventListener("pointerup",this.onCanvasMouseUp),e.removeEventListener("pointerdown",this.onMouseDown),e.removeEventListener("pointerdown",this.onMousePressDown),e.removeEventListener("pointerup",this.onMouseUp),e.removeEventListener("pointerup",this.onMousePressRelease),document.removeEventListener("keydown",this.onKeyDown),document.removeEventListener("keyup",this.onKeyUp),document.removeEventListener("keydown",this.onKeyPressDown),document.removeEventListener("keyup",this.onKeyPressUp),document.removeEventListener("keyup",this.releaseHeldKey),Object.values(this.eventsPerObjects).forEach(t=>{Object.values(t).forEach(r=>{r.forEach(i=>{i.disconnect()})})}),this.canvasMouseEvents.forEach(t=>{t.disconnect()}),Object.entries(this.objectsPerTypes).forEach(([t,r])=>{r.forEach(i=>{i.removeEventListener("userEvent",this._onUserEvent)})})}handleMouseEvent(e){var s,l,u,c;let{stopRaycast:t,raycaster:r,page:i,pointerScreen:n}=this.eventContext,a=this.objectsPerTypes[e],o=a.filter(h=>!(h instanceof Sa));if(!(!a.length&&!this.useForRaycastProperty)&&!(i.uiCanvas&&jh(i,[n.x,n.y],Object.keys(this.eventsPerObjects[e]),h=>{this.handleObjectMouseEventDispatch(h,e)}))){if(t||this.useForRaycastProperty){let h;if(this.sceneInterects===null?h=t8(r,i,o,this.useForRaycastProperty):(h=this.sceneInterects,this.sceneInterects=null),this.useForRaycastProperty&&h.length&&(this.eventContext.sharedAssets.raycastProperty={x:h[0].point.x,y:h[0].point.y,z:h[0].point.z,objX:h[0].object.matrixWorld.elements[12],objY:h[0].object.matrixWorld.elements[13],objZ:h[0].object.matrixWorld.elements[14]}),t){let d=[((l=(s=h[0])==null?void 0:s.uv)==null?void 0:l.x)??0,((c=(u=h[0])==null?void 0:u.uv)==null?void 0:c.y)??0];nB(h).forEach(f=>{f instanceof mo&&jh(f,d,Object.keys(this.eventsPerObjects[e]),p=>{this.handleObjectMouseEventDispatch(p,e)}),this.eventsPerObjects[e][f.uuid]&&this.handleObjectMouseEventDispatch(f,e)})}}t||o.forEach(h=>{var f,p;let d=N6(r,h);d&&(this.handleObjectMouseEventDispatch(h,e),h instanceof mo&&jh(h,[((f=d==null?void 0:d.uv)==null?void 0:f.x)??0,((p=d==null?void 0:d.uv)==null?void 0:p.y)??0],Object.keys(this.eventsPerObjects[e]),v=>{this.handleObjectMouseEventDispatch(v,e)}))})}}handleMousePressEvent(e=!1){let t="MousePress",r=this.objectsPerTypes[t],i=r.filter(a=>!(a instanceof Sa)),n=[];if(r.length){if(!e){let{stopRaycast:a,raycaster:o,page:s,pointerScreen:l}=this.eventContext,u=!1;if(s.uiCanvas&&(u=jh(s,[l.x,l.y],Object.keys(this.eventsPerObjects[t]),c=>{n.push(c)})),a&&!u){let c=t8(o,s,i);n=nB(c),c.forEach(h=>{var d,f;h.object instanceof mo&&jh(h.object,[((d=h==null?void 0:h.uv)==null?void 0:d.x)??0,((f=h==null?void 0:h.uv)==null?void 0:f.y)??0],Object.keys(this.eventsPerObjects[t]),p=>{n.push(p)})})}else i.forEach(c=>{var d,f;let h=N6(o,c);h&&(n.push(c),c instanceof mo&&jh(c,[((d=h==null?void 0:h.uv)==null?void 0:d.x)??0,((f=h==null?void 0:h.uv)==null?void 0:f.y)??0],Object.keys(this.eventsPerObjects[t]),p=>{n.push(p)}))})}this._prevObjects.length&&this._prevObjects.forEach(a=>{n.includes(a)||this.handleObjectMouseEventDispatchRelease(a,t)}),n.length&&n.forEach(a=>{this.handleObjectMouseEventDispatch(a,t)}),this._prevObjects=n}}handleObjectMouseEventDispatch(e,t){var r,i;e.dispatchEvent({type:"beginEvent",eventName:t}),(i=(r=this.eventsPerObjects[t])==null?void 0:r[e.uuid])==null||i.forEach(n=>{n.dispatch()})}handleObjectMouseEventDispatchRelease(e,t){var r,i;e.dispatchEvent({type:"beginEvent",eventName:t}),(i=(r=this.eventsPerObjects[t])==null?void 0:r[e.uuid])==null||i.forEach(n=>{n.dispatchRelease()})}handleKeyEvent(e,t,r=!1){this.objectsPerTypes[t].forEach(i=>{let n=this.eventsPerObjects[t][i.uuid];n.some(({data:a})=>"key"in a&&a.key===e.key)&&i.dispatchEvent({type:"beginEvent",eventName:t}),n.forEach(a=>{"key"in a.data&&a.data.key===e.key&&(r?a.dispatchRelease():a.dispatch(!0))})})}handleKeyEventHeld(e,t,r=!1){this.objectsPerTypes[t].forEach(i=>{this.eventsPerObjects[t][i.uuid].forEach(n=>{"key"in n.data&&n.data.key===e.key&&n.dispatchHeld(r)})})}},yEt=new U,xEt=new U,T2e=class{constructor(e,t,r,i,n){this.actionsIn=Hn(e,e.inActions,r,i,n,t),this.actionsOut=Hn(e,e.outActions,r,i,n,t)}disconnect(){_a(this.actionsIn),_a(this.actionsOut)}},bEt=class extends T2e{constructor(e,t,r,i,n,a){super(t,r,i,n,a),this.id=e,this.data=t,this.object=r,this.stage="out",this.objects=[],this.onUpdateMatrixWorld=()=>{for(let d of this.objects)if(!d.visible)return;let u=yEt.setFromMatrixPosition(this.objects[0].matrixWorld),c=xEt.setFromMatrixPosition(this.objects[1].matrixWorld),h=u.distanceTo(c)<=this.distance?"in":"out";if(this.stage!==h){this.stage=h;let d=h==="in"?this.actionsIn:this.actionsOut;d.Audio.forEach(f=>f.dispatchConditional()),d.Particles.forEach(f=>f.dispatchConditional()),d.Video.forEach(f=>f.dispatchConditional()),d.Link.forEach(f=>f.dispatch()),d.Create.forEach(f=>f.dispatch()),d.Destroy.forEach(f=>f.dispatch()),d.Reset.forEach(f=>f.dispatch()),d.Transition.forEach(f=>{f.object.currentTransitionEvent!==this&&(f.object.currentTransitionEvent=this),f.init()}),d.Transition.forEach(f=>f.play()),d.Animation.forEach(f=>f.play()),d.SwitchCamera.forEach(f=>f.play()),d.SceneTransition.forEach(f=>f.dispatch()),d.SetVariable.forEach(f=>f.checkConditions()),d.SetVariable.forEach(f=>f.dispatch()),d.DynamicVariablePlay.forEach(f=>f.dispatch()),d.ClearLocalStorage.forEach(f=>f.dispatch()),d.UserAPI.forEach(f=>f.dispatch())}};let{distance:o,fromObject:s,toObject:l}=t.condition;this.distance=o;for(let u of[s,l]){if(!u)throw new Error("Missing property");let c=i.find(u);if(!c)throw new Error("Missing property");this.objects.push(c)}}connect(){window.setTimeout(()=>{this.objects.forEach(e=>{e.addEventListener("updateMatrixWorld",this.onUpdateMatrixWorld)}),this.onUpdateMatrixWorld()},0)}disconnect(){super.disconnect(),this.stage="out",this.objects.forEach(e=>{e.removeEventListener("updateMatrixWorld",this.onUpdateMatrixWorld)})}},wEt=class extends T2e{constructor(e,t,r,i,n,a){var l;super(t,r,i,n,a),this.id=e,this.data=t,this.object=r,this.onBegin=({target:u,state:c})=>{this.toState!==c&&(this.actionsOut.Audio.forEach(h=>h.dispatchConditional()),this.actionsOut.Particles.forEach(h=>h.dispatchConditional()),this.actionsOut.Video.forEach(h=>h.dispatchConditional()),this.actionsOut.Link.forEach(h=>h.dispatch()),this.actionsOut.Create.forEach(h=>h.dispatch()),this.actionsOut.Destroy.forEach(h=>h.dispatch()),this.actionsOut.Reset.forEach(h=>h.dispatch()),this.actionsIn.Transition.forEach(h=>h.pause()),this.object.currentTransitionEvent=this,this.actionsOut.Transition.forEach(h=>h.play()),this.actionsOut.Animation.forEach(h=>h.play()),this.actionsIn.SwitchCamera.forEach(h=>h.pause()),this.actionsOut.SwitchCamera.forEach(h=>h.play()),this.actionsOut.SceneTransition.forEach(h=>h.dispatch()),this.actionsOut.SetVariable.forEach(h=>h.checkConditions()),this.actionsOut.SetVariable.forEach(h=>h.dispatch()),this.actionsOut.DynamicVariablePlay.forEach(h=>h.dispatch()),this.actionsOut.ClearLocalStorage.forEach(h=>h.dispatch()),this.actionsOut.UserAPI.forEach(h=>h.dispatch()))},this.onComplete=({target:u,state:c})=>{this.toState===c&&(this.actionsIn.Audio.forEach(h=>h.dispatchConditional()),this.actionsIn.Particles.forEach(h=>h.dispatchConditional()),this.actionsIn.Video.forEach(h=>h.dispatchConditional()),this.actionsIn.Link.forEach(h=>h.dispatch()),this.actionsIn.Create.forEach(h=>h.dispatch()),this.actionsIn.Destroy.forEach(h=>h.dispatch()),this.actionsIn.Reset.forEach(h=>h.dispatch()),this.actionsOut.Transition.forEach(h=>h.pause()),this.actionsOut.Transition.forEach(h=>h.pause()),this.object.currentTransitionEvent=this,this.actionsIn.Transition.forEach(h=>h.play()),this.actionsIn.Animation.forEach(h=>h.play()),this.actionsOut.SwitchCamera.forEach(h=>h.pause()),this.actionsIn.SwitchCamera.forEach(h=>h.play()),this.actionsIn.SceneTransition.forEach(h=>h.dispatch()),this.actionsIn.SetVariable.forEach(h=>h.checkConditions()),this.actionsIn.SetVariable.forEach(h=>h.dispatch()),this.actionsIn.DynamicVariablePlay.forEach(h=>h.dispatch()),this.actionsOut.ClearLocalStorage.forEach(h=>h.dispatch()),this.actionsOut.UserAPI.forEach(h=>h.dispatch()))};let{condition:o}=t;if(!o.object)throw new Error("Missing property");let s=i.find(o.object)??i.scene.find2D(o.object);if(!s)throw new Error("Missing property");if(this.toObject=s,o.state&&!((l=this.toObject.states)!=null&&l[o.state]))throw new Error("Missing property");this.toState=o.state}connect(){K0(this.actionsOut).forEach(e=>{var t;(t=this.actionsOut[e])!=null&&t.length&&this.toObject.addEventListener("beginState",this.onBegin)}),K0(this.actionsIn).forEach(e=>{var t;(t=this.actionsIn[e])!=null&&t.length&&this.toObject.addEventListener("completeState",this.onComplete)})}disconnect(){super.disconnect(),K0(this.actionsOut).forEach(e=>{var t;(t=this.actionsIn[e])!=null&&t.length&&this.toObject.removeEventListener("beginState",this.onBegin)}),K0(this.actionsIn).forEach(e=>{var t;(t=this.actionsIn[e])!=null&&t.length&&this.toObject.removeEventListener("completeState",this.onComplete)})}},_Et=class extends Co{constructor(e,t){super(e),this.eventManager=t,this.eventsPerConditions={Comparison:[],Distance:[],State:[]},this.hasVideoAction=!1}connect(){super.connect();let{page:e,sharedAssets:t}=this.eventContext;e.traverseEntity(r=>{var i;if((i=r.data)!=null&&i.events.length){for(let{id:n,data:a}of r.data.events)if(!a.disabled&&a.type==="Conditional")try{let o;a.condition.type==="Comparison"||(a.condition.type==="Distance"?o=new bEt(n,a,r,e,t,this.eventManager):a.condition.type==="State"&&(o=new wEt(n,a,r,e,t,this.eventManager))),o&&(this.eventsPerConditions[a.condition.type].push(o),(o.actionsIn.Video.length||o.actionsOut.Video.length)&&(this.hasVideoAction=!0))}catch{}}}),Object.values(this.eventsPerConditions).forEach(r=>r.forEach(i=>i.connect()))}disconnect(){super.disconnect(),Object.values(this.eventsPerConditions).forEach(e=>e.forEach(t=>t.disconnect()))}},_x=new U,ff=new U,v0=new U,cne=new hs,AEt=.01,hi=new U,Wn=new U,hne=new U,ov=new Jt,zD=new Qn,SEt=new Ke,HD=new Bn,gg=new U,ac=new U,yg=.2;function UD(e,t){!t||(t[0]<t[1]&&(e.x=Math.min(Math.max(e.x,t[0]),t[1])),t[2]<t[3]&&(e.y=Math.min(Math.max(e.y,t[2]),t[3])),t[4]<t[5]&&(e.z=Math.min(Math.max(e.z,t[4]),t[5])))}var CEt=function(){let e=new Ke;return(t,r,i)=>{let n=t.obj;e.copy(n.hiddenMatrix),n.parent!==null&&e.premultiply(n.parent.matrixWorld),e.invert(),n.position.copy(r),t.reference==="global"&&UD(n.position,t.limits),n.position.applyMatrix4(e),t.reference==="parent"?UD(n.position,t.limits):t.reference==="local"&&(ov.copy(t.quat0).invert(),n.position.sub(t.position0),n.position.applyQuaternion(ov),UD(n.position,t.limits),ov.invert(),n.position.applyQuaternion(ov),n.position.add(t.position0)),e.multiply(i??n.matrixWorld).decompose(hi,n.quaternion,Wn),n.updateMatrix(),n.hasNonUniformScale&&(n.updateMatrixWorld(),n.updateMatrixWorldSVD()),n instanceof Jo&&nd(n.parent)&&n.invalidateDownstreamBooleanData(!0)}}(),EEt=class{constructor(e,t,r,i,n,a,o){this.object=e,this.id=t,this.data=r,this.dropDestIds=[],this.activeIdx=null,this.wasDragEventTriggered=!1,this.resetDampingFactor=this.data.resetSpeed===0?1:8/this.data.resetSpeed+1,this.snapDampingFactor=this.data.snapSpeed===0?1:8/this.data.snapSpeed+1,this.actionsDrag=Hn(r,r.dragDropActions.drag,i,n,a,this.object),this.actionsDrop=Hn(r,r.dragDropActions.drop,i,n,a,this.object);let s=[];this.data.objects.forEach(l=>{let u=i.find(l);!u||u.data.visible!==!1&&(s.push(u),o[u.uuid]&&o[u.uuid].forEach(c=>{let h=i.find(c);!h||h.data.visible!==!1&&s.push(h)}))}),this.data.dropDestinations.forEach(l=>{let u=i.find(l);!u||u.data.visible!==!1&&(this.dropDestIds.push(u.uuid),o[u.uuid]&&o[u.uuid].forEach(c=>{let h=i.find(c);!h||h.data.visible!==!1&&this.dropDestIds.push(h.uuid)}))}),this.dragItems=s.map(l=>(this.data.planeMode==="locked"&&(l.userData.lockedPlane=!0),l.userData.worldPosition0=new U().setFromMatrixPosition(l.matrixWorld),{obj:l,fromPosition:new U().setFromMatrixPosition(l.matrixWorld),pointStart:new U,pointEnd:new U,paused:!0,currentDampingFactor:this.data.dampingFactor,reset:!1,position0:new U().copy(l.position),quat0:new Jt().copy(l.quaternion),snapped:!1,orientationMatrix:new Ke,limits:this.data.limits,reference:this.data.referenceFrame}))}get activeDragItem(){return this.activeIdx!==null?this.dragItems[this.activeIdx]:null}dispose(){_a(this.actionsDrag),_a(this.actionsDrop),this.dragItems.forEach(e=>{e.fromPosition.copy(e.obj.userData.worldPosition0),e.pointStart.copy(e.fromPosition),e.pointEnd.copy(e.pointStart),e.obj.recursiveBBoxNeedsUpdate=!0,e.obj.userData.lockedPlane=void 0,e.obj.position.copy(e.position0),e.obj.quaternion.copy(e.quat0),e.obj.updateMatrix()})}},MEt=class extends Co{constructor(e,t){super(e),this.eventManager=t,this.events=[],this.lastDropDestination=null,this.dragTimeout=null,this.onPointerDown=r=>{var o;if(jt.length>1)return;this.eventContext.updateRaycaster(r);let{raycaster:i,page:n}=this.eventContext,a=n.raycastWithClones(i);if(this.lastDropDestination=null,a.length===0){this.activeEvent=null;return}for(let s of this.events){let l=0;for(let{obj:u,pointEnd:c,pointStart:h}of s.dragItems){if(u===a[0].object||u===a[0].object.object||Gr.is(u)&&u.isAncestorOf(a[0].object.uuid)){if(s.activeIdx=l,s.activeDragItem.reset=!1,s.activeDragItem.currentDampingFactor=s.data.dampingFactor,s.activeDragItem.snapped=!1,s.data.cursor==="hand"&&this.setCursor("grabbing"),this.eventManager.controlsManager.usePhysics){s.activeDragItem.obj.rigidBody&&s.activeDragItem.obj.rigidBody.setBodyType(2,!0);let d=s.activeDragItem.obj;u.hasNonUniformScale&&u.updateMatrixWorldSVD(),(d.hasNonUniformScale?d.matrixWorldRigid:d.matrixWorld).decompose(hi,ov,Wn),zD.setFromQuaternion(ov),d.prevR===void 0?(d.prevR=zD.clone(),d.prevT=hi.clone()):(d.prevR.copy(zD),d.prevT.copy(hi)),this.eventManager.controlsManager.sharedGameControlGlobals.entitiesWithTransformAnim.push(s.activeDragItem.obj)}this.calcPlaneIntersectPos(u,h,s.data.plane,s.data.referenceFrame),c.copy(h),(this.eventManager.controlsManager.usePhysics&&((o=u.data.physics)==null?void 0:o.rigidBody)==="dynamic"||s.data.drop===!1||s.data.resetOnSnapFail===!1)&&s.activeDragItem.fromPosition.setFromMatrixPosition(s.activeDragItem.obj.matrixWorld),this.activeEvent=s,this.eventManager.controlsManager.orbitControls&&(this.eventManager.controlsManager.orbitControls.enabled=!1);return}l++}}this.activeEvent=null},this.onPointerMove=r=>{var o,s,l,u;if(jt.length>1)return;this.eventContext.updateRaycaster(r);let{raycaster:i,page:n}=this.eventContext,a=n.raycastWithClones(i);if(jt.length===0){let c=!1;for(let h of this.events){for(let{obj:d}of h.dragItems)if(d===((o=a[0])==null?void 0:o.object)||d===((l=(s=a[0])==null?void 0:s.object)==null?void 0:l.object)||Gr.is(d)&&d.isAncestorOf((u=a[0])==null?void 0:u.object.uuid)){switch(c=!0,h.data.cursor){case"hand":this.setCursor("grab");break;case"move":this.setCursor("move");break}break}if(c)break}c||this.setCursor("default");return}if(this.activeEvent&&this.activeEvent.activeDragItem){let c=this.activeEvent.activeDragItem;c.snapped=!1;let h;if(this.activeEvent.data.drop&&(h=a.filter(d=>c.obj!==d.object&&!c.obj.isAncestorOf(d.object.uuid)&&!(d.object instanceof T1)&&(this.activeEvent.data.dropOn==="all"||this.activeEvent.dropDestIds.some(f=>f===d.object.uuid||n.scene.find(f).isAncestorOf(d.object.uuid))))[0]),h){let d=hne.copy(h.face.normal).applyMatrix3(HD.getNormalMatrix(h.object.matrixWorld));if(this.activeEvent.data.snapTo==="center")c.fromPosition.setFromMatrixPosition(h.object.matrixWorld);else if(this.activeEvent.data.snapTo==="surface"){if(c.fromPosition.copy(h.point),this.activeEvent.data.snapSurfaceMode==="bbox"){hi.copy(d).applyMatrix3(HD.setFromMatrix4(c.obj.matrixWorld).transpose());let f=c.obj;hi.x>yg?Wn.x=-f.recursiveBBox.min.x:hi.x<-yg&&(Wn.x=-f.recursiveBBox.max.x),hi.y>yg?Wn.y=-f.recursiveBBox.min.y:hi.y<-yg&&(Wn.y=-f.recursiveBBox.max.y),hi.z>yg?Wn.z=-f.recursiveBBox.min.z:hi.z<-yg&&(Wn.z=-f.recursiveBBox.max.z),Wn.applyMatrix3(HD.invert())}else Wn.copy(d).multiplyScalar(this.activeEvent.data.snapSurfaceOffset);c.fromPosition.add(Wn)}this.activeEvent.data.autoOrient&&(hi.set(0,1,0).cross(d),hi.length()<1e-4&&hi.set(-1,0,0).cross(d),Wn.crossVectors(hne,hi),c.orientationMatrix.makeBasis(hi,Wn,d)),c.pointStart.copy(c.fromPosition),c.pointEnd.copy(c.pointStart),c.currentDampingFactor=this.activeEvent.snapDampingFactor,c.snapped=!0,this.lastDropDestination!==h.object&&(this.lastDropDestination=h.object,this.activeEvent.actionsDrop.Transition.forEach(f=>{f.play()}),this.activeEvent.actionsDrop.Animation.forEach(f=>{f.play()}),this.activeEvent.actionsDrop.Audio.forEach(f=>{f.dispatchGameControl("start")}),this.activeEvent.actionsDrop.Particles.forEach(f=>{f.dispatchGameControl("start")}),this.activeEvent.actionsDrop.Create.forEach(f=>{f.dispatchThrottled()}))}else c.orientationMatrix.makeRotationFromQuaternion(c.quat0),this.lastDropDestination=null,c.currentDampingFactor=this.activeEvent.data.dampingFactor,this.calcPlaneIntersectPos(c.obj,c.pointEnd,this.activeEvent.data.plane,this.activeEvent.data.referenceFrame),this.activeEvent.actionsDrop.Transition.forEach(d=>{d.stop(),d.object.currentState!==null&&d.object.changeSelectedState(null,{scene:this.eventContext.page.scene,shared:this.eventContext.sharedAssets})}),this.activeEvent.actionsDrop.Animation.forEach(d=>{d.stop()}),this.activeEvent.actionsDrop.Audio.forEach(d=>{d.dispatchGameControl("stop")}),this.activeEvent.actionsDrop.Particles.forEach(d=>{d.dispatchGameControl("stop")});this.activeEvent.actionsDrag.Create.forEach(d=>{d.dispatchThrottled()}),this.activeEvent.actionsDrag.SetVariable.forEach(d=>d.checkConditions()),this.activeEvent.actionsDrag.SetVariable.forEach(d=>d.dispatch()),this.activeEvent.actionsDrag.DynamicVariablePlay.forEach(d=>d.dispatch()),this.activeEvent.actionsDrag.ClearLocalStorage.forEach(d=>d.dispatch()),this.activeEvent.actionsDrag.UserAPI.forEach(d=>d.dispatch()),this.activeEvent.wasDragEventTriggered===!1&&(this.activeEvent.wasDragEventTriggered=!0,this.activeEvent.actionsDrag.Transition.forEach(d=>{d.play()}),this.activeEvent.actionsDrag.Animation.forEach(d=>{d.play()}),this.activeEvent.actionsDrag.Audio.forEach(d=>{d.dispatchGameControl("start")}),this.activeEvent.actionsDrag.Particles.forEach(d=>{d.dispatchGameControl("start")})),this.dragTimeout&&window.clearTimeout(this.dragTimeout),this.dragTimeout=window.setTimeout(()=>{!this.activeEvent||(this.activeEvent.wasDragEventTriggered=!1,this.activeEvent.actionsDrag.Audio.forEach(d=>{d.dispatchGameControl("stop")}),this.activeEvent.actionsDrag.Particles.forEach(d=>{d.dispatchGameControl("stop")}),this.activeEvent.actionsDrag.Transition.forEach(d=>{d.stop(),d.object.currentState!==null&&d.object.changeSelectedState(null,{scene:this.eventContext.page.scene,shared:this.eventContext.sharedAssets})}),this.activeEvent.actionsDrag.Animation.forEach(d=>{d.stop()}))},500),this.updateDragItem(c),c.obj.dispatchEvent({type:"requestRender"})}},this.onPointerUp=r=>{var i;if(this.activeEvent&&this.activeEvent.activeDragItem){this.activeEvent.data.cursor==="hand"&&this.setCursor("grab");let n=((i=this.activeEvent.activeDragItem.obj.data.physics)==null?void 0:i.rigidBody)==="dynamic";this.activeEvent.activeDragItem.snapped===!1&&this.activeEvent.data.drop&&this.activeEvent.data.resetOnSnapFail&&(this.eventManager.controlsManager.usePhysics===!1||!n)&&(this.activeEvent.activeDragItem.reset=this.activeEvent.data.resetOnSnapFail,this.activeEvent.activeDragItem.paused=!1,this.activeEvent.activeDragItem.currentDampingFactor=this.activeEvent.resetDampingFactor),this.eventManager.controlsManager.usePhysics&&n&&(this.eventManager.controlsManager.sharedGameControlGlobals.entitiesWithTransformAnim.pop(),this.activeEvent.activeDragItem.obj.rigidBody.setBodyType(0,!0),this.activeEvent.activeDragItem.paused=!0),this.activeEvent.wasDragEventTriggered===!0&&(this.activeEvent.wasDragEventTriggered=!1,this.activeEvent.actionsDrag.Transition.forEach(a=>{a.stop(),a.object.currentState!==null&&a.object.changeSelectedState(null,{scene:this.eventContext.page.scene,shared:this.eventContext.sharedAssets})}),this.activeEvent.actionsDrag.Animation.forEach(a=>{a.stop()}),this.activeEvent.actionsDrag.Audio.forEach(a=>{a.dispatchGameControl("stop")}),this.activeEvent.actionsDrag.Particles.forEach(a=>{a.dispatchGameControl("stop")}),this.activeEvent.actionsDrop.SetVariable.forEach(a=>a.checkConditions()),this.activeEvent.actionsDrop.SetVariable.forEach(a=>a.dispatch()),this.activeEvent.actionsDrop.DynamicVariablePlay.forEach(a=>a.dispatch()),this.activeEvent.actionsDrop.ClearLocalStorage.forEach(a=>a.dispatch()),this.activeEvent.actionsDrop.UserAPI.forEach(a=>a.dispatch())),this.eventManager.controlsManager.orbitControls&&(this.eventManager.controlsManager.orbitControls.enabled=!0)}}}connect(){let e={};if(this.eventContext.page.traverseEntity(r=>{r.component&&(e[r.component.uuid]?e[r.component.uuid].push(r.uuid):e[r.component.uuid]=[r.uuid])}),this.eventContext.page.traverseEntity(r=>{var i;(i=r.data)==null||i.events.filter(n=>n.data.type==="DragDrop"&&!n.data.disabled).forEach(n=>{this.events.push(new EEt(r,n.id,n.data,this.eventContext.page,this.eventContext.sharedAssets,this.eventManager,e))})}),!this.events.length)return;this.domEventsNeeded.clear(),this.domEventsNeeded.add("pointerdown");let t=this.eventContext.domElement;t.addEventListener("pointerdown",this.onPointerDown),t.addEventListener("pointermove",this.onPointerMove),t.addEventListener("pointerup",this.onPointerUp),this.domEventsNeeded.add("pointermove")}disconnect(){if(!this.events.length)return;this.domEventsNeeded.clear();let e=this.eventContext.domElement;e.removeEventListener("pointerdown",this.onPointerDown),e.removeEventListener("pointermove",this.onPointerMove),e.removeEventListener("pointerup",this.onPointerUp),this.events.forEach(t=>t.dispose())}setCursor(e){this.eventContext.domElement.style.cursor=e}onAnimationFrameDamping(){for(let e of this.events)for(let t of e.dragItems)t.paused||this.updateDragItem(t,!0)}calcPlaneIntersectPos(e,t,r,i){let{getCamera:n,raycaster:a}=this.eventContext;n().getWorldDirection(ff),ff.negate();let o=ov.identity();switch(i==="parent"?SEt.multiplyMatrices(e.parent.matrixWorld,e.hiddenMatrix).decompose(hi,o,Wn):i==="local"&&e.matrixWorld.decompose(hi,o,Wn),r){case"x":hi.set(1,0,0).applyQuaternion(o),gg.copy(ff).cross(hi),ac.copy(hi).cross(gg);break;case"y":hi.set(0,1,0).applyQuaternion(o),gg.copy(ff).cross(hi),ac.copy(hi).cross(gg);break;case"z":hi.set(0,0,1).applyQuaternion(o),gg.copy(ff).cross(hi),ac.copy(hi).cross(gg);break;case"xy":ac.set(0,0,1).applyQuaternion(o);break;case"yz":ac.set(1,0,0).applyQuaternion(o);break;case"xz":ac.set(0,1,0).applyQuaternion(o);break;case"adaptive":ff.angleTo(Wn.set(0,1,0))>Math.PI/6?(hi.crossVectors(Wn.set(0,1,0),ff),ac.crossVectors(hi,Wn)):ac.set(0,1,0);break;default:ac.copy(ff);break}v0.setFromMatrixPosition(e.matrixWorld);let s=e.userData.lockedPlane?e.userData.worldPosition0:v0;if(cne.setFromNormalAndCoplanarPoint(ac,s),!!a.ray.intersectPlane(cne,t)&&(r==="x"||r==="y"||r==="z")){let l=Wn.subVectors(t,s).dot(hi);t.copy(s).addScaledVector(hi,l)}}updateDragItem(e,t=!1){var r,i;v0.setFromMatrixPosition(e.obj.matrixWorld),e.reset==="current"?_x.subVectors(e.fromPosition,v0).divideScalar(e.currentDampingFactor):e.reset==="original"?(_x.subVectors(e.obj.userData.worldPosition0,v0).divideScalar(e.currentDampingFactor),e.fromPosition.copy(e.obj.userData.worldPosition0),e.pointStart.copy(e.fromPosition),e.pointEnd.copy(e.pointStart)):_x.subVectors(e.pointEnd,e.pointStart).add(e.fromPosition).sub(v0).divideScalar(e.currentDampingFactor),e.paused=e.currentDampingFactor>1?_x.length()<AEt:!0,(this.activeEvent&&this.activeEvent.data.dampingFactor===1||t)&&CEt(e,_x.add(v0),(r=this.activeEvent)!=null&&r.data.drop&&((i=this.activeEvent)!=null&&i.data.autoOrient)?e.orientationMatrix:null),e.obj.dispatchEvent({type:"beginEvent",eventName:"DragDrop"}),this.eventManager.requestRender()}},xg=new U,GD=new U,Mh=new U,Th=new U,dne=new hs,TEt=.01,PEt={type:"requestRender"},DEt=function(){let e=new U,t=new U;return(r,i,n)=>n>0?(e.subVectors(r,i),e.length()<=n?r:t.copy(i).add(e.normalize().multiplyScalar(n))):i}(),fne=function(){let e=new Ke;return(t,r)=>{t.position.copy(r),t.parent!==null&&(e.copy(t.parent.matrixWorld).invert(),t.position.applyMatrix4(e)),e.copy(t.hiddenMatrix).invert(),t.position.applyMatrix4(e),t.updateMatrix(),t.hasNonUniformScale&&(t.updateMatrixWorld(),t.updateMatrixWorldSVD()),t instanceof Jo&&nd(t.parent)&&t.invalidateDownstreamBooleanData(!0)}}(),IEt=class{constructor(e,t,r,i,n,a){this.data=e,this.id=t,this.object=r,this.paused=!1,this.currentDampingFactor=1,this.snapComplete=!1,this.isReset=!1,this.worldPosition0=new U,this.timeoutId=null,this.delayFinished=!0,this.wasOutside=!1,this.data={...RR.defaultData,...e,...e.resetOnPointerLeave===void 0&&{resetOnPointerLeave:!1}},e.target===void 0||e.target==="cursor"||(this.target=i.find(e.target)),this.data.dampingFactor&&(this.currentDampingFactor=this.data.dampingFactor),this.resetDampingFactor=80/this.data.resetSpeed+1,this.object.getWorldPosition(this.worldPosition0),this.actions=Hn(e,e.actions,i,n,a,r)}},LEt=class extends Co{constructor(e,t){super(e),this.eventManager=t,this.events=[],this.pairOfEventListeners=[],this.onMouseMove=r=>{if(!(jt.length>1)){this.eventContext.updateRaycaster(r);for(let i of this.events)i.target===void 0&&this.updateSingleEvent(i)}},this.onMouseEnter=r=>{for(let i of this.events)i.target===void 0&&(i.isReset=!1,i.currentDampingFactor=i.data.dampingFactor)},this.onMouseLeave=r=>{for(let i of this.events)i.target===void 0&&(i.data.resetOnPointerLeave&&(i.isReset=!0,i.currentDampingFactor=i.resetDampingFactor),this.updateSingleEvent(i))},this.onTargetChange=r=>()=>{this.updateSingleEvent(r)}}connect(){let{page:e}=this.eventContext;if(e.traverseEntity(i=>{var a,o;let n=(a=i.data)==null?void 0:a.events.find(s=>s.data.type==="Follow"&&!s.data.disabled);n&&(!e.data.globalPhysics.usePhysics||((o=i.dataPatched.physics)==null?void 0:o.rigidBody)!=="dynamic")&&this.events.push(new IEt(n.data,n.id,i,e,this.eventContext.sharedAssets,this.eventManager))}),!this.events.length)return;let{domElement:t,eventElement:r}=this.eventContext;this.domEventsNeeded.clear(),Us&&(this.domEventsNeeded.add("pointerdown"),t.addEventListener("pointerdown",this.onMouseMove)),this.domEventsNeeded.add("pointermove"),r.addEventListener("pointermove",this.onMouseMove),this.eventContext.useWindowEvents||(t.addEventListener("pointerenter",this.onMouseEnter),t.addEventListener("pointerleave",this.onMouseLeave));for(let i of this.events)if(i.target!==void 0){let n=i.target,a=this.onTargetChange(i);this.pairOfEventListeners.push([n,a]),n.addEventListener("requestRender",a)}}disconnect(){if(!this.events.length)return;let{domElement:e,eventElement:t}=this.eventContext;this.domEventsNeeded.clear(),Us&&e.removeEventListener("pointerdown",this.onMouseMove),t.removeEventListener("pointermove",this.onMouseMove),e.removeEventListener("pointerenter",this.onMouseEnter),e.removeEventListener("pointerleave",this.onMouseLeave);for(let[r,i]of this.pairOfEventListeners)r.removeEventListener("requestRender",i);for(let r of this.events)r.paused=!0,r.isReset=!1,_a(r.actions)}onAnimationFrameDamping(){for(let e of this.events)e.paused||this.updateSingleEvent(e,!0)}updateSingleEvent(e,t=!1){var o;this.events.forEach(s=>{s.actions.Create.forEach(l=>{l.dispatchThrottled()})});let{plane:r,limitDistance:i,limitDistanceEnabled:n}=e.data;if(e.object.getWorldPosition(Mh),e.isReset)Th.copy(e.worldPosition0);else if(e.target)e.target.getWorldPosition(Th);else{let{getCamera:s,raycaster:l}=this.eventContext;if(r==="custom"?(s().getWorldDirection(GD),GD.negate(),xg.copy(GD)):r==="xy"?xg.set(0,0,1):r==="xz"?xg.set(0,1,0):r==="yz"&&xg.set(1,0,0),dne.setFromNormalAndCoplanarPoint(xg,Mh),!l.ray.intersectPlane(dne,Th))return}if(!e.isReset){if(Th.distanceTo(e.worldPosition0)>i&&n&&e.target)if(e.snapComplete=!1,e.data.snapDelay&&(e.delayFinished=!1,typeof window<"u"&&e.timeoutId!==null&&(window.clearTimeout(e.timeoutId),e.timeoutId=null)),e.wasOutside=!0,e.data.resetAfterDistanceLimit)Th.copy(e.worldPosition0),e.currentDampingFactor=e.resetDampingFactor;else return;else if(e.wasOutside&&(e.data.snapDelay&&typeof window<"u"&&(e.timeoutId=window.setTimeout(()=>{e.delayFinished=!0,e.paused=!1,this.updateSingleEvent(e)},e.data.snapDelay*1e3)),e.currentDampingFactor=e.data.dampingFactor,e.wasOutside=!1),e.delayFinished===!1)return}e.data.enabledTranslation[0]===!1&&(Th.x=Mh.x),e.data.enabledTranslation[1]===!1&&(Th.y=Mh.y),e.data.enabledTranslation[2]===!1&&(Th.z=Mh.z);let a=DEt(Mh,Th,e.wasOutside?0:e.data.maxDelta);if(e.currentDampingFactor>1){let s=xg.subVectors(a,Mh).divideScalar(e.currentDampingFactor);Mh.add(s),t&&fne(e.object,Mh),e.paused=s.length()<TEt}else fne(e.object,a),e.paused=!0;(o=e.object)==null||o.dispatchEvent({type:"beginEvent",eventName:"Follow"}),e.object.dispatchEvent(PEt)}},Ax=new U,Z5=new U,Sx=new Ke,bg=new Jt,pf=new Jt,Cx=new U,Ex=new U,m0=new U,Ph=new U,jD=new hs,kEt=1e-6,REt={type:"requestRender"},OEt={type:"changeRotation"},pne=function(){let e=new Ke;return function(t,r){t.parent!==null?e.multiplyMatrices(t.parent.matrixWorld,t.hiddenMatrix):e.copy(t.hiddenMatrix),r.premultiply(A2e(e).invert()),t.rotation.setFromRotationMatrix(r),t.updateMatrix(),t instanceof Jo&&nd(t.parent)&&t.invalidateDownstreamBooleanData(!0)}}(),BEt=class{constructor(e,t,r,i){this.id=t,this.object=r,this.paused=!1,this.currentDampingFactor=1,this.isReset=!1,this.worldQuaternion0=new Jt,this.timeoutId=null,this.delayFinished=!0,this.wasOutside=!1,this.data={...OR.defaultData,...e,...e.resetOnPointerLeave===void 0&&{resetOnPointerLeave:!1}},e.target===void 0||e.target==="cursor"||(this.target=i.find(e.target)),this.data.dampingFactor&&(this.currentDampingFactor=this.data.dampingFactor),this.object.getWorldQuaternion(this.worldQuaternion0),this.resetDampingFactor=80/this.data.resetSpeed+1}},NEt=class extends Co{constructor(){super(...arguments),this.events=[],this.pairOfEventListeners=[],this.pairOfUserEventListeners=[],this.onMouseMove=e=>{if(!(jt.length>1)){this._lastMouseEvent=e,this.eventContext.updateRaycaster(e);for(let t of this.events)t.target===void 0&&this.updateSingleEvent(t)}},this.onMouseEnter=e=>{for(let t of this.events)t.target===void 0&&(t.isReset=!1,t.currentDampingFactor=t.data.dampingFactor)},this.onMouseLeave=e=>{for(let t of this.events)t.target===void 0&&(t.data.resetOnPointerLeave&&(t.isReset=!0,t.currentDampingFactor=t.resetDampingFactor),this.updateSingleEvent(t))},this.onScroll=e=>{if(this._lastMouseEvent){let t=new PointerEvent("pointermove",{clientX:this._lastMouseEvent.clientX,clientY:this._lastMouseEvent.clientY,bubbles:!0,cancelable:!0,view:window});this.eventContext.eventElement.dispatchEvent(t)}},this.onTargetChange=e=>()=>{this.updateSingleEvent(e)},this.createUserEventListener=e=>({eventName:t,target:r})=>{if(!t||!r)return;let i=e3(t);i&&i==="LookAt"&&this.updateSingleEvent(e)}}connect(){let{page:e}=this.eventContext;if(e.traverseEntity(i=>{var a,o;let n=(a=i.data)==null?void 0:a.events.find(s=>s.data.type==="LookAt"&&!s.data.disabled);n&&(!e.data.globalPhysics.usePhysics||((o=i.dataPatched.physics)==null?void 0:o.rigidBody)!=="dynamic")&&this.events.push(new BEt(n.data,n.id,i,e))}),!this.events.length)return;let{domElement:t,eventElement:r}=this.eventContext;this.domEventsNeeded.clear(),Us&&(this.domEventsNeeded.add("pointerdown"),t.addEventListener("pointerdown",this.onMouseMove)),this.domEventsNeeded.add("pointermove"),r.addEventListener("pointermove",this.onMouseMove),this.eventContext.useWindowEvents?r.addEventListener("scroll",this.onScroll):(t.addEventListener("pointerenter",this.onMouseEnter),t.addEventListener("pointerleave",this.onMouseLeave));for(let i of this.events){if(i.target!==void 0){let o=this.onTargetChange(i),s=i.target;this.pairOfEventListeners.push([s,o]),s.addEventListener("requestRender",o)}let n=this.createUserEventListener(i),a=i.object;this.pairOfUserEventListeners.push([a,n]),a.addEventListener("userEvent",n)}}disconnect(){if(!this.events.length)return;let{domElement:e,eventElement:t}=this.eventContext;this.domEventsNeeded.clear(),Us&&e.removeEventListener("pointerdown",this.onMouseMove),t.removeEventListener("pointermove",this.onMouseMove),e.removeEventListener("pointerenter",this.onMouseEnter),e.removeEventListener("pointerleave",this.onMouseLeave),t.removeEventListener("scroll",this.onScroll);for(let[r,i]of this.pairOfEventListeners)r.removeEventListener("requestRender",i);for(let[r,i]of this.pairOfUserEventListeners)r.removeEventListener("userEvent",i);for(let r of this.events)r.paused=!0,r.isReset=!1}onAnimationFrameDamping(){for(let e of this.events)e.paused||this.updateSingleEvent(e)}updateSingleEvent(e){var d;let{tilt:t,axis:r,distance:i,plane:n,limitDistance:a,enabledRotation:o,limitDistanceEnabled:s}=e.data,{getCamera:l,raycaster:u}=this.eventContext,{object:c,target:h}=e;if(c.getWorldPosition(Cx),!e.isReset)if(e.target)e.target.getWorldPosition(Ex);else{if(n==="custom"?(l().getWorldDirection(Z5),Z5.negate(),jD.setFromNormalAndCoplanarPoint(Z5,Cx)):(n==="xy"?Ax.set(0,0,1):n==="xz"?Ax.set(0,1,0):n==="yz"&&Ax.set(1,0,0),jD.setFromNormalAndCoplanarPoint(Ax,Cx)),!u.ray.intersectPlane(jD,Ex))return;i>0&&(n==="custom"||n===void 0)&&Ex.addScaledVector(Z5,i)}if(e.isReset||(h?t==="target"?m0.copy(h.up).applyMatrix4(Sx.extractRotation(h.matrixWorld)).normalize():o.some(f=>f===!1)?(r==="x"?(Ph.set(0,0,1),o[2]===!1&&Ph.set(0,1,0)):r==="y"?(Ph.set(1,0,0),o[0]===!1&&Ph.set(0,0,1)):(Ph.set(0,1,0),o[1]===!1&&Ph.set(1,0,0)),m0.copy(Ph).applyQuaternion(e.worldQuaternion0).normalize()):m0.set(0,1,0):n==="custom"?m0.set(0,1,0):m0.copy(Ax)),e.isReset)pf.copy(e.worldQuaternion0);else if(Cx.distanceTo(Ex)>a&&s&&h)if(e.data.snapDelay&&(e.delayFinished=!1,typeof window<"u"&&e.timeoutId!==null&&(window.clearTimeout(e.timeoutId),e.timeoutId=null)),e.wasOutside=!0,e.data.resetAfterDistanceLimit)pf.copy(e.worldQuaternion0),e.currentDampingFactor=e.resetDampingFactor;else return;else{if(e.wasOutside&&(e.data.snapDelay&&typeof window<"u"&&(e.timeoutId=window.setTimeout(()=>{e.delayFinished=!0,e.paused=!1,this.updateSingleEvent(e)},e.data.snapDelay*1e3)),e.currentDampingFactor=e.data.dampingFactor,e.wasOutside=!1),e.delayFinished===!1)return;VEt(Sx,Ex,Cx,m0,r,Ph),pf.setFromRotationMatrix(Sx),bg.setFromUnitVectors(Ph.applyQuaternion(pf),m0),o.some(f=>f===!1)&&t!=="target"&&pf.premultiply(bg).normalize()}e.currentDampingFactor>1?(c.updateWorldMatrix(!0,!1),bg.setFromRotationMatrix(A2e(c.matrixWorld)),bg.slerp(pf,1/e.currentDampingFactor),pne(c,Sx.makeRotationFromQuaternion(bg)),e.paused=8*(1-bg.dot(pf))<kEt):(pne(c,Sx.makeRotationFromQuaternion(pf)),e.paused=!0),(d=e.object)==null||d.dispatchEvent({type:"beginEvent",eventName:"LookAt"}),c.dispatchEvent(REt),c.dispatchEvent(OEt)}},ll=new U,jn=new U,yn=new U;function VEt(e,t,r,i,n,a){let o=e.elements;yn.subVectors(t,r),yn.lengthSq()===0&&(yn.z=1),yn.normalize(),jn.crossVectors(i,yn),jn.lengthSq()===0&&(Math.abs(i.z)===1?yn.x+=1e-4:yn.z+=1e-4,yn.normalize(),jn.crossVectors(i,yn)),jn.normalize(),ll.crossVectors(yn,jn),n==="x"?a.z===1?[jn,ll,yn]=[yn,jn,ll]:(jn.negate(),[jn,yn]=[yn,jn]):n==="y"?a.x===1?[jn,ll,yn]=[ll,yn,jn]:(jn.negate(),[ll,yn]=[yn,ll]):a.x===1&&(jn.negate(),[jn,ll]=[ll,jn]),o[0]=jn.x,o[4]=ll.x,o[8]=yn.x,o[1]=jn.y,o[5]=ll.y,o[9]=yn.y,o[2]=jn.z,o[6]=ll.z,o[10]=yn.z}var FEt=class{constructor(e,t,r,i,n,a){this.id=e,this.data=t,this.object=r,this.entered=!1,this.actions=Hn(t,t.actions,i,n,a,r)}disconnect(){_a(this.actions)}dispatchEnter(){this.actions.Transition.forEach(e=>{e.object.currentTransitionEvent!==this&&(e.object.currentTransitionEvent=this,e.init())}),this.entered||(this.entered=!0,this.actions.Transition.forEach(e=>e.playFromCurrent()),this.actions.Animation.forEach(e=>e.play()),this.actions.Create.forEach(e=>e.dispatchStart()),this.actions.Particles.forEach(e=>e.dispatchBasic()),this.actions.Destroy.forEach(e=>e.dispatch()),this.actions.SwitchCamera.forEach(e=>e.playFromCurrent()),this.actions.SceneTransition.forEach(e=>e.dispatch()),this.actions.SetVariable.forEach(e=>e.checkConditions()),this.actions.SetVariable.forEach(e=>e.dispatch()),this.actions.DynamicVariablePlay.forEach(e=>e.dispatch()),this.actions.ClearLocalStorage.forEach(e=>e.dispatch()),this.actions.UserAPI.forEach(e=>e.dispatch()))}dispatchLeave(){this.actions.Transition.forEach(e=>{e.object.currentTransitionEvent!==this&&(e.object.currentTransitionEvent=this,e.init())}),this.entered&&(this.entered=!1,this.actions.Create.forEach(e=>e.dispatchStop()),this.actions.Transition.forEach(e=>e.reverseFromCurrent()),this.actions.Particles.forEach(e=>e.reverseFromCurrent()),this.actions.SwitchCamera.forEach(e=>e.reverseFromCurrent()))}dispatchUserEvent(e){this.actions.Transition.forEach(t=>{t.object.currentTransitionEvent!==this&&(t.object.currentTransitionEvent=this,t.init())}),e?(this.actions.Transition.forEach(t=>t.reverseFromCurrent()),this.actions.Particles.forEach(t=>t.reverseFromCurrent()),this.actions.Animation.forEach(t=>t.reverseFromCurrent()),this.actions.SwitchCamera.forEach(t=>t.reverseFromCurrent())):(this.actions.Transition.forEach(t=>t.playFromCurrent()),this.actions.Animation.forEach(t=>t.playFromCurrent()),this.actions.Create.forEach(t=>t.dispatch()),this.actions.Particles.forEach(t=>t.dispatchBasic()),this.actions.Destroy.forEach(t=>t.dispatch()),this.actions.SwitchCamera.forEach(t=>t.playFromCurrent())),this.actions.SceneTransition.forEach(t=>t.dispatch()),this.actions.SetVariable.forEach(t=>t.checkConditions()),this.actions.SetVariable.forEach(t=>t.dispatch()),this.actions.DynamicVariablePlay.forEach(t=>t.dispatch()),this.actions.ClearLocalStorage.forEach(t=>t.dispatch()),this.actions.UserAPI.forEach(t=>t.dispatch())}},zEt=class extends Co{constructor(e,t){super(e),this.eventManager=t,this.eventsPerObjects={},this.objects=[],this.objects2D=[],this._prevObjects=[],this.onMouseDown=r=>{jt.length>1||(this.eventContext.updateRaycaster(r),this.handleMouseHoverEvent())},this.onMouseUp=r=>{jt.length>1||this.handleMouseHoverEvent(!0)},this.onMouseMove=r=>{jt.length>1||(this.eventContext.updateRaycaster(r),this.handleMouseHoverEvent())},this.onUserEvent=({eventName:r,target:i,reverse:n})=>{var o;if(!r||!i)return;let a=e3(r);a&&a==="MouseHover"&&(i.dispatchEvent({type:"beginEvent",eventName:"MouseHover"}),(o=this.eventsPerObjects[i.uuid])==null||o.forEach(s=>s.dispatchUserEvent(n)))}}connect(){let{page:e,sharedAssets:t}=this.eventContext,r=(n,a)=>{var o,s;if(!(!n.visible||!((o=n.data)!=null&&o.events.length))){for(let{id:l,data:u}of n.data.events)if(!u.disabled&&u.type==="MouseHover")try{let c=new FEt(l,u,n,e,t,this.eventManager);this.eventsPerObjects[n.uuid]?this.eventsPerObjects[n.uuid].push(c):this.eventsPerObjects[n.uuid]=[c]}catch{}(s=this.eventsPerObjects[n.uuid])!=null&&s.length&&this.objects.push(n instanceof Sa?a:n)}};if(e.traverseEntity(n=>{var a;(n instanceof mo||n instanceof va)&&((a=n.frame)==null||a.traverse(o=>{r(o,n)})),r(n)}),!this.objects.length)return;let{domElement:i}=this.eventContext;this.domEventsNeeded.clear(),Us&&(this.domEventsNeeded.add("pointerdown"),i.addEventListener("pointerdown",this.onMouseDown),this.domEventsNeeded.add("pointerup"),i.addEventListener("pointerup",this.onMouseUp)),this.domEventsNeeded.add("pointermove"),i.addEventListener("pointermove",this.onMouseMove),this.objects.forEach(n=>{n.addEventListener("userEvent",this.onUserEvent)})}disconnect(){if(!this.objects.length)return;let{domElement:e}=this.eventContext;this.domEventsNeeded.clear(),Us&&(e.removeEventListener("pointerdown",this.onMouseDown),e.removeEventListener("pointerup",this.onMouseUp)),e.removeEventListener("pointermove",this.onMouseMove),Object.values(this.eventsPerObjects).forEach(t=>{t.forEach(r=>{r.disconnect()})}),this.objects.forEach(t=>{t.removeEventListener("userEvent",this.onUserEvent)})}handleMouseHoverEvent(e=!1){let t=[];if(!e){let{stopRaycast:r,raycaster:i,page:n,pointerScreen:a}=this.eventContext,o=!1;if(n.uiCanvas&&(o=jh(n,[a.x,a.y],Object.keys(this.eventsPerObjects),s=>{t.push(s)})),r&&!o){let s=t8(i,n,this.objects);t=nB(s),s.forEach(l=>{var u,c;l.object instanceof mo&&jh(l.object,[((u=l==null?void 0:l.uv)==null?void 0:u.x)??0,((c=l==null?void 0:l.uv)==null?void 0:c.y)??0],Object.keys(this.eventsPerObjects),h=>{t.push(h)})})}else this.objects.forEach(s=>{var u,c;let l=N6(i,s);l&&(t.push(s),s instanceof mo&&jh(s,[((u=l==null?void 0:l.uv)==null?void 0:u.x)??0,((c=l==null?void 0:l.uv)==null?void 0:c.y)??0],Object.keys(this.eventsPerObjects),h=>{t.push(h)}))})}this._prevObjects.length&&this._prevObjects.forEach(r=>{var i;t.includes(r)||(r.dispatchEvent({type:"beginEvent",eventName:"MouseHover"}),(i=this.eventsPerObjects[r.uuid])==null||i.forEach(n=>n.dispatchLeave()))}),t.length&&t.forEach(r=>{var i;r.dispatchEvent({type:"beginEvent",eventName:"MouseHover"}),(i=this.eventsPerObjects[r.uuid])==null||i.forEach(n=>n.dispatchEnter())}),this._prevObjects=t}},HEt=class{constructor(e,t,r,i,n,a){this.id=e,this.data=t,this.object=r,this.scrollCounter=0,this.actions=Hn(t,t.actions,i,n,a,r)}connect(){this.scrollCounter=0}disconnect(){_a(this.actions)}dispatch(e){this.actions.Transition.forEach(i=>{i.object.currentTransitionEvent!==this&&(i.object.currentTransitionEvent=this,i.init())});let t=e>0?1:-1;this.scrollCounter+=t,this.scrollCounter=Math.min(Math.max(this.scrollCounter,0),this.data.steps);let r=this.scrollCounter/this.data.steps;this.actions.Transition.forEach(i=>i.seek(r)),this.actions.Animation.forEach(i=>i.seek(t)),this.actions.Create.forEach(i=>i.dispatchThrottled()),this.actions.SetVariable.forEach(i=>i.checkConditions()),this.actions.SetVariable.forEach(i=>i.dispatch()),this.actions.DynamicVariablePlay.forEach(i=>i.dispatch()),this.actions.ClearLocalStorage.forEach(i=>i.dispatch()),this.actions.UserAPI.forEach(i=>i.dispatch())}dispatchUserEvent(e){this.actions.Transition.forEach(t=>{t.object.currentTransitionEvent!==this&&(t.object.currentTransitionEvent=this,t.init())}),e?(this.actions.Transition.forEach(t=>t.reverseFromCurrent()),this.actions.Animation.forEach(t=>t.reverseFromCurrent())):(this.actions.Transition.forEach(t=>{t.playFromCurrent()}),this.actions.Animation.forEach(t=>{t.playFromCurrent()})),this.actions.Create.forEach(t=>t.dispatchThrottled()),this.actions.SetVariable.forEach(t=>t.checkConditions()),this.actions.SetVariable.forEach(t=>t.dispatch()),this.actions.DynamicVariablePlay.forEach(t=>t.dispatch()),this.actions.ClearLocalStorage.forEach(t=>t.dispatch()),this.actions.UserAPI.forEach(t=>t.dispatch())}},UEt=class{constructor(e,t,r,i,n,a,o){this.id=e,this.data=t,this.object=r,this.domElement=a,this.eventManager=o,this.scrollStart=0,this.scrollEnd=0,this.actions=Hn(t,t.actions,i,n,o,r)}getStickyParentElement(){let e=this.domElement;for(;e;){if(window.getComputedStyle(e).position==="sticky")return e;e=e.parentElement}return null}computeScrollBounds(){let e=this.getStickyParentElement(),t=e==null?void 0:e.parentElement,r=this.domElement.getBoundingClientRect(),i={top:r.top,bottom:r.bottom,left:r.left,right:r.right,width:r.width,height:r.height};if(t){let u=t.getBoundingClientRect(),c=window.getComputedStyle(e),h=parseFloat(c.marginTop)+parseFloat(c.marginBottom),d=parseFloat(c.top),f=parseFloat(c.bottom),p=u.height-h;if(!isNaN(d))r.top===d?(i.top+=u.top-d,i.bottom+=u.top-d):r.top<0&&(i.top-=p-r.height,i.bottom-=p-r.height);else if(!isNaN(f)){let v=document.body.clientHeight??window.innerHeight,m=window.innerWidth-(document.documentElement.clientWidth??window.innerWidth);r.bottom===v-f?(i.top+=u.top-r.height+f+m,i.bottom+=u.top-r.height+f+m):r.bottom<v-f&&(i.top-=p-r.height,i.bottom-=p-r.height)}}let n=document.body,a=document.documentElement,o=window.pageYOffset||a.scrollTop||n.scrollTop,s=a.clientTop||n.clientTop||0,l=Math.round(i.top+o-s);if(this.data.startFrom==="enter"){let u=window.innerHeight,c=i.height,h=this.data.enterAnchor,d=h==="top"?u:h==="bottom"?u-c:u-c*.5;this.scrollStart=l-d}else this.scrollStart=0;this.scrollStart+=this.data.startOffset??0,this.scrollEnd=this.scrollStart+(this.data.endAfter??400),this.box=i,this.computeScroll({x:window.scrollX,y:window.scrollY})}connect(){this.computeScrollBounds()}disconnect(){_a(this.actions)}handleResize(){this.computeScrollBounds()}get isInvalidBox(){return this.box===void 0||this.box.width===0&&this.box.height===0&&this.box.top===0&&this.box.bottom===0}computeScroll({x:e,y:t}){this.actions.Transition.forEach(n=>{n.object.currentTransitionEvent!==this&&(n.object.currentTransitionEvent=this,n.init())});let r=this.scrollEnd-this.scrollStart,i=Math.min(1,Math.max(0,(t-this.scrollStart)/r));this.actions.Transition.forEach(n=>n.seek(i)),this.actions.Animation.forEach(n=>n.seek(i)),this.actions.Create.forEach(n=>n.dispatchThrottled()),this.actions.SetVariable.forEach(n=>n.checkConditions()),this.actions.SetVariable.forEach(n=>n.dispatch()),this.actions.DynamicVariablePlay.forEach(n=>n.dispatch()),this.actions.ClearLocalStorage.forEach(n=>n.dispatch()),this.actions.UserAPI.forEach(n=>n.dispatch())}dispatch(e){this.isInvalidBox&&this.computeScrollBounds(),this.computeScroll(e)}dispatchUserEvent(e){this.actions.Transition.forEach(t=>{t.object.currentTransitionEvent!==this&&(t.object.currentTransitionEvent=this,t.init())}),e?(this.actions.Transition.forEach(t=>t.reverseFromCurrent()),this.actions.Animation.forEach(t=>t.reverseFromCurrent())):(this.actions.Transition.forEach(t=>{t.playFromCurrent()}),this.actions.Animation.forEach(t=>{t.playFromCurrent()})),this.actions.Create.forEach(t=>t.dispatchThrottled()),this.actions.SetVariable.forEach(t=>t.checkConditions()),this.actions.SetVariable.forEach(t=>t.dispatch()),this.actions.DynamicVariablePlay.forEach(t=>t.dispatch()),this.actions.ClearLocalStorage.forEach(t=>t.dispatch()),this.actions.UserAPI.forEach(t=>t.dispatch())}},GEt=class extends Co{constructor(e,t){super(e),this.managers=t,this.wheelEventsPerObject=new Map,this.scrollEventsPerObject=new Map,this.isInview=!0,this.handleResize=()=>{[...this.scrollEventsPerObject.entries()].forEach(([r,i])=>{i.forEach(n=>n.handleResize())})},this.onScroll=r=>{if(!this.isInview)return;let i={y:window.scrollY,x:window.scrollX};[...this.scrollEventsPerObject.entries()].forEach(([n,a])=>{n.dispatchEvent({type:"beginEvent",eventName:"Scroll",scroll:i}),a.forEach(o=>o.dispatch(i))})},this.onWheel=r=>{!this.isInview||r.ctrlKey||[...this.wheelEventsPerObject.entries()].forEach(([i,n])=>{i.dispatchEvent({type:"beginEvent",eventName:"Scroll",deltaY:r.deltaY}),n.forEach(a=>a.dispatch(r.deltaY))})},this.onUserEvent=({eventName:r,target:i,reverse:n})=>{var o;if(!r||!i)return;let a=e3(r);a&&a==="Scroll"&&(i.dispatchEvent({type:"beginEvent",eventName:"Scroll"}),(o=this.wheelEventsPerObject.get(i))==null||o.forEach(s=>{s.dispatchUserEvent(n)}))}}connect(){let{page:e,sharedAssets:t,domElement:r,isExport:i}=this.eventContext,n=a=>{var o,s,l;if((o=a.data)!=null&&o.events.length){for(let{id:u,data:c}of a.data.events)if(!c.disabled&&c.type==="Scroll")if(c.trigger==="load"||!i){let h=new HEt(u,c,a,e,t,this.managers);this.wheelEventsPerObject.has(a)?(s=this.wheelEventsPerObject.get(a))==null||s.push(h):this.wheelEventsPerObject.set(a,[h])}else{let h=new UEt(u,c,a,e,t,r,this.managers);this.scrollEventsPerObject.has(a)?(l=this.scrollEventsPerObject.get(a))==null||l.push(h):this.scrollEventsPerObject.set(a,[h])}}};e.traverseEntity(a=>{var o;(a instanceof mo||a instanceof va)&&((o=a.frame)==null||o.traverse(s=>{n(s)})),n(a)}),this.intersectionObserver=new IntersectionObserver(a=>{let o=a[0];o&&(this.isInview=o.isIntersecting)},{root:null}),this.intersectionObserver.observe(this.eventContext.domElement),[...this.wheelEventsPerObject.entries()].forEach(([a,o])=>{o.forEach(s=>s.connect()),a.addEventListener("userEvent",this.onUserEvent)}),[...this.scrollEventsPerObject.entries()].forEach(([a,o])=>{o.forEach(s=>s.connect()),a.addEventListener("userEvent",this.onUserEvent)}),[...this.wheelEventsPerObject.values()].some(a=>a.length)&&(this.domEventsNeeded.add("wheel"),window.addEventListener("wheel",this.onWheel)),[...this.scrollEventsPerObject.values()].some(a=>a.length)&&(this.domEventsNeeded.add("scroll"),window.addEventListener("scroll",this.onScroll),window.addEventListener("resize",this.handleResize))}disconnect(){window.removeEventListener("wheel",this.onWheel),window.removeEventListener("scroll",this.onScroll),window.removeEventListener("resize",this.handleResize),this.intersectionObserver.unobserve(this.eventContext.domElement),this.domEventsNeeded.clear(),[...this.wheelEventsPerObject.entries()].forEach(([e,t])=>{t.forEach(r=>r.disconnect()),e.removeEventListener("userEvent",this.onUserEvent)}),[...this.scrollEventsPerObject.entries()].forEach(([e,t])=>{t.forEach(r=>r.disconnect()),e.removeEventListener("userEvent",this.onUserEvent)})}},jEt=class{constructor(e,t,r,i,n,a){this.id=e,this.data=t,this.object=r,this.actions=Hn(t,t.actions,i,n,a,r)}disconnect(){_a(this.actions)}dispatch(){this.actions.Transition.forEach(e=>{e.play()}),this.actions.Animation.forEach(e=>{e.play()}),this.actions.SwitchCamera.forEach(e=>{e.play()}),this.actions.SceneTransition.forEach(e=>{e.dispatch()}),this.actions.Reset.forEach(e=>e.dispatch()),this.actions.SetVariable.forEach(e=>e.checkConditions()),this.actions.SetVariable.forEach(e=>e.dispatch()),this.actions.DynamicVariablePlay.forEach(e=>e.dispatch()),this.actions.ClearLocalStorage.forEach(e=>e.dispatch()),this.actions.UserAPI.forEach(e=>e.dispatch()),this.actions.Create.forEach(e=>{e.dispatchFromStart()}),this.actions.Destroy.forEach(e=>{e.dispatchFromStart()})}dispatchAfter(e){this.actions.Audio.forEach(t=>{(t.interaction.data.triggerAfter??"any")===e&&(t.interaction instanceof av?t.interaction.audioPlayer.play():t.interaction instanceof JO&&t.interaction.dispatch())}),this.actions.Video.forEach(t=>{let r=t.interaction.data.triggerAfter??"autoplay";r===e&&(t.interaction instanceof D1?t.interaction.play(r==="autoplay"):t.interaction instanceof rB&&t.interaction.dispatch())}),this.actions.Particles.forEach(t=>{(t.data.triggerAfter??"any")===e&&t.dispatchBasic()})}dispatchUserEvent(e){this.actions.Transition.forEach(t=>{t.object.currentTransitionEvent!==this&&(t.object.currentTransitionEvent=this,t.init())}),e?(this.actions.Transition.forEach(t=>t.reverseFromCurrent()),this.actions.Animation.forEach(t=>t.reverseFromCurrent()),this.actions.SwitchCamera.forEach(t=>t.reverseFromCurrent())):(this.actions.Transition.forEach(t=>t.playFromCurrent()),this.actions.Animation.forEach(t=>t.playFromCurrent()),this.actions.SwitchCamera.forEach(t=>t.playFromCurrent())),this.actions.SceneTransition.forEach(t=>t.dispatch()),this.actions.Reset.forEach(t=>t.dispatch()),this.actions.SetVariable.forEach(t=>t.checkConditions()),this.actions.SetVariable.forEach(t=>t.dispatch()),this.actions.DynamicVariablePlay.forEach(t=>t.dispatch()),this.actions.ClearLocalStorage.forEach(t=>t.dispatch()),this.actions.UserAPI.forEach(t=>t.dispatch()),this.actions.Create.forEach(t=>{t.dispatch()}),this.actions.Destroy.forEach(t=>{t.dispatch()}),this.actions.Audio.forEach(t=>{t.interaction instanceof av?t.interaction.audioPlayer.play():t.interaction instanceof JO&&t.interaction.dispatch()}),this.actions.Video.forEach(t=>{t.interaction instanceof D1?t.interaction.play():t.interaction instanceof rB&&t.interaction.dispatch()}),this.actions.Particles.forEach(t=>{t.dispatchBasic()})}},WEt=class extends Co{constructor(e,t){super(e),this.eventManager=t,this.eventsPerObject=new Map,this.eventsAfterPerObject=new Map,this.onMouseDown=()=>{[...this.eventsAfterPerObject.entries()].forEach(([r,i])=>{r.dispatchEvent({type:"beginEvent",eventName:"Start"}),i.forEach(n=>{n.dispatchAfter("mouseDown")})})},this.onKeyDown=()=>{[...this.eventsAfterPerObject.entries()].forEach(([r,i])=>{r.dispatchEvent({type:"beginEvent",eventName:"Start"}),i.forEach(n=>{n.dispatchAfter("keyDown")})})},this.onAny=()=>{let{domElement:r,isExport:i}=this.eventContext,n=i?document:r;n.removeEventListener("pointerdown",this.onAny),n.removeEventListener("mousedown",this.onAny),document.removeEventListener("keydown",this.onAny),[...this.eventsAfterPerObject.entries()].forEach(([a,o])=>{a.dispatchEvent({type:"beginEvent",eventName:"Start"}),o.forEach(s=>{s.dispatchAfter("any")})})},this.onSceneTransitionAudioVideoPlay=()=>{[...this.eventsAfterPerObject.entries()].forEach(([r,i])=>{r.dispatchEvent({type:"beginEvent",eventName:"Start"}),i.forEach(n=>{n.actions.Audio.forEach(a=>{a.interaction instanceof av&&a.interaction.audioPlayer.play()}),n.actions.Video.forEach(a=>{let o=a.interaction.data.triggerAfter??"autoplay";a.interaction instanceof D1&&a.interaction.play(o==="autoplay")}),n.actions.Particles.forEach(a=>{a.dispatchBasic()})})})},this.onPlay=()=>{[...this.eventsAfterPerObject.entries()].forEach(([r,i])=>{r.dispatchEvent({type:"beginEvent",eventName:"Start"}),i.forEach(n=>{n.dispatchAfter("autoplay")})})},this.onUserEvent=({eventName:r,target:i,reverse:n})=>{var o,s;if(!r||!i)return;let a=e3(r);a&&a==="Start"&&(i instanceof Sa||i.dispatchEvent({type:"beginEvent",eventName:"Start"}),(o=this.eventsPerObject.get(i))==null||o.forEach(l=>{l.dispatchUserEvent(n)}),(s=this.eventsAfterPerObject.get(i))==null||s.forEach(l=>{l.dispatchUserEvent(n)}))}}connect(){let{sharedAssets:e,page:t}=this.eventContext,r=i=>{var n,a,o,s,l;if((n=i.data)!=null&&n.events.length)for(let{id:u,data:c}of i.data.events){if(c.disabled||c.type!=="Start")continue;let h=new jEt(u,c,i,t,e,this.eventManager);(h.actions.Transition.length||h.actions.Animation.length||h.actions.SwitchCamera.length||h.actions.Create.length||h.actions.Destroy.length||h.actions.SceneTransition.length||h.actions.Reset.length||h.actions.SetVariable.length||h.actions.DynamicVariablePlay.length||h.actions.ClearLocalStorage.length||h.actions.UserAPI.length)&&(this.eventsPerObject.has(i)?(a=this.eventsPerObject.get(i))==null||a.push(h):this.eventsPerObject.set(i,[h])),h.actions.Audio.length&&(this.eventsAfterPerObject.has(i)?(o=this.eventsAfterPerObject.get(i))==null||o.push(h):this.eventsAfterPerObject.set(i,[h])),h.actions.Video.length&&(this.hasVideoAction=!0,this.eventsAfterPerObject.has(i)?(s=this.eventsAfterPerObject.get(i))==null||s.push(h):this.eventsAfterPerObject.set(i,[h])),h.actions.Particles.length&&(this.eventsAfterPerObject.has(i)?(l=this.eventsAfterPerObject.get(i))==null||l.push(h):this.eventsAfterPerObject.set(i,[h]))}};if(t.traverseEntity(i=>{var n;(i instanceof mo||i instanceof va)&&((n=i.frame)==null||n.traverse(a=>{r(a)})),r(i)}),[...this.eventsAfterPerObject.values()].some(i=>i.length)){if(this.eventManager.activateCount===0){let{domElement:i,isExport:n}=this.eventContext,a=n?document:i;a.addEventListener("pointerdown",this.onMouseDown,{once:!0}),a.addEventListener("mousedown",this.onMouseDown,{once:!0}),document.addEventListener("keydown",this.onKeyDown,{once:!0}),a.addEventListener("pointerdown",this.onAny),a.addEventListener("mousedown",this.onAny),document.addEventListener("keydown",this.onAny),[...this.eventsAfterPerObject.entries()].forEach(([o,s])=>{o.addEventListener("userEvent",this.onUserEvent)})}else this.onSceneTransitionAudioVideoPlay();this.onPlay()}[...this.eventsPerObject.entries()].forEach(([i,n])=>{i.dispatchEvent({type:"beginEvent",eventName:"Start"}),n.forEach(a=>a.dispatch()),i.addEventListener("userEvent",this.onUserEvent)})}disconnect(){if([...this.eventsAfterPerObject.values()].some(e=>e.length)){let{domElement:e,isExport:t}=this.eventContext,r=t?document:e;r.removeEventListener("pointerdown",this.onMouseDown),r.removeEventListener("mousedown",this.onMouseDown),document.removeEventListener("keydown",this.onKeyDown),r.removeEventListener("pointerdown",this.onAny),r.removeEventListener("mousedown",this.onAny),document.removeEventListener("keydown",this.onAny),[...this.eventsAfterPerObject.entries()].forEach(([i,n])=>{i.removeEventListener("userEvent",this.onUserEvent),n.forEach(a=>a.disconnect())})}[...this.eventsPerObject.entries()].forEach(([e,t])=>{e.removeEventListener("userEvent",this.onUserEvent),t.forEach(r=>r.disconnect())}),this.eventsPerObject.clear(),this.eventsAfterPerObject.clear()}},qEt=class{constructor(e,t,r,i,n,a){this.id=e,this.data=t,this.object=r,this.initialDisabled=!1,this.actions=Hn(t,t.actions,i,n,a,r),this.target=t.target}disconnect(){_a(this.actions)}dispatch(e){this.initialDisabled||(this.actions.Transition.forEach(t=>{t.object.currentTransitionEvent!==this&&(t.object.currentTransitionEvent=this,t.init())}),this.object.dispatchEvent({type:"beginEvent",eventName:"Collision"}),this.actions.Transition.forEach(t=>{t.data.runMode==="Toggle"?t.toggle():t.play()}),this.actions.Animation.forEach(t=>{t.data.runMode==="Toggle"?t.toggle():t.play()}),this.actions.Reset.forEach(t=>{t.dispatch()}),this.actions.Link.forEach(t=>{t.dispatch()}),this.actions.Reset.forEach(t=>{t.dispatch()}),this.actions.Create.forEach(t=>{t.dispatch()}),this.actions.Destroy.forEach(t=>{t.dispatch(e??!1)}),this.actions.SetVariable.forEach(t=>t.checkConditions()),this.actions.SetVariable.forEach(t=>t.dispatch()),this.actions.DynamicVariablePlay.forEach(t=>t.dispatch()),this.actions.Audio.forEach(t=>{t.dispatchBasic()}),this.actions.Particles.forEach(t=>{t.dispatchBasic()}),this.actions.Video.forEach(t=>{t.dispatchBasic()}),this.actions.ClearLocalStorage.forEach(t=>t.dispatch()),this.actions.UserAPI.forEach(t=>t.dispatch()))}},YEt=class extends Co{constructor(e,t,r,i,n){super(e),this.sharedVariables=t,this.eventManager=r,this.needsMouse=i,this.needsRaycast=n,this.dynamicVars=[],this.variablesToWatch=[],this.prevMouseProperty=null,this.prevRaycastProperty=null,this.pauseTime=0,this.isOutOfFocus=!1,this.events=[],this.onFrame=a=>{let o=this.eventContext.sharedAssets;if(this.rafId=window.requestAnimationFrame(this.onFrame),this.isOutOfFocus)return;let s=new Date,l=[],u=[];for(let d=0;d<this.propertiesToWatch.length;d++){let{objectId:f,property:p,prevValue:v}=this.propertiesToWatch[d],m=this.eventContext.scene.find(f),g=NR.propertyPaths[p];if(g[0]==="width"||g[0]==="height"||g[0]==="depth")m=m.geometry.userData.parameters[g[0]];else for(let y=0;y<g.length;y++)m=m[g[y]];v===null?this.propertiesToWatch[d].prevValue=m instanceof U?m.clone():m:(m instanceof U?!m.equals(v):v!==m)&&(u.push({objId:f,property:p}),m instanceof U?this.propertiesToWatch[d].prevValue.copy(m):this.propertiesToWatch[d].prevValue=m)}for(let d=0;d<this.variablesToWatch.length;d++){let{id:f,prevValue:p}=this.variablesToWatch[d],v=o.getVariable(f);v!==p&&(l.push(f),this.variablesToWatch[d].prevValue=v)}for(let d=0;d<this.dynamicVars.length;d++){let{id:f,expectedTime:p,last:v,data:m,timerSeconds:g,startValue:y}=this.dynamicVars[d],x=1e3;if((m.dynamicVariableType==="timer"||m.dynamicVariableType==="stopwatch")&&m.format==="number3decimal"?x=1:m.dynamicVariableType==="counter"?x=m.updateInterval:m.dynamicVariableType==="random"&&(x=m.isStatic?1/0:m.updateInterval),p===-1){this.dynamicVars[d].last=a,this.dynamicVars[d].expectedTime=a+x;continue}if(!((o.getDynamicVariablePlayState(f)==="Stopped"||o.getDynamicVariablePlayState(f)==="Restarted")&&(this.dynamicVars[d].last=a,this.dynamicVars[d].expectedTime=a+x,m.dynamicVariableType==="counter"&&o.getVariable(f)!==y&&(o.updateVariable(f,y),this.eventManager.requestRender()),(m.dynamicVariableType==="timer"||m.dynamicVariableType==="stopwatch")&&this.dynamicVars[d].timerSeconds!==y&&(this.dynamicVars[d].timerSeconds=y,o.updateVariable(f,bl.getFormattedTimerTime(y,m)),this.eventManager.requestRender()),o.getDynamicVariablePlayState(f)==="Restarted"&&o.setDynamicVariablePlayState(f,"Playing"),o.getDynamicVariablePlayState(f)==="Stopped"))){if(o.getDynamicVariablePlayState(f)==="Paused"){this.dynamicVars[d].deltaToExpectedTime===void 0&&(this.dynamicVars[d].deltaToExpectedTime=Math.max(this.dynamicVars[d].expectedTime-a,0)),this.dynamicVars[d].last=a-(x-this.dynamicVars[d].deltaToExpectedTime),this.dynamicVars[d].expectedTime=a+this.dynamicVars[d].deltaToExpectedTime;continue}else this.dynamicVars[d].deltaToExpectedTime=void 0;if(a>=p)if(this.dynamicVars[d].last=a,this.dynamicVars[d].expectedTime+=x,m.dynamicVariableType==="random"){let b=m.min+Math.random()*(m.max-m.min),_=m.decimals;b=Math.round(b*Math.pow(10,_))/Math.pow(10,_),o.updateVariable(f,b),l.push(f),this.eventManager.requestRender()}else if(m.dynamicVariableType==="counter"){let b=o.getVariable(f),_=o.getDynamicVariableToggleIsForward(f)??!0,w=o.getVariable(f)+m.increment*(_?1:-1);m.hasEnd&&(w=m.increment>0?vt.clamp(w,y,m.endValue):vt.clamp(w,m.endValue,y),w===y&&o.setDynamicVariableToggleIsForward(f,void 0),m.repeat?w===m.endValue&&(w=y):(w===y||w===m.endValue)&&o.setDynamicVariablePlayState(f,"Paused")),w!==b&&(l.push(f),o.updateVariable(f,w),this.eventManager.requestRender())}else if(m.dynamicVariableType==="time"){let b=o.getVariable(f),_=Ere(s,m);if(typeof b=="object"&&"textValue"in b&&typeof _=="object"&&"textValue"in _){if(Array.isArray(b.textValue)&&Array.isArray(_.textValue)){if(b.textValue.every((w,S)=>w===_.textValue[S]))continue}else if(b.textValue===_.textValue)continue}else if(b===_)continue;o.updateVariable(f,_),l.push(f),this.eventManager.requestRender()}else{let b=Ga.isTextValue(m.endValue)?vne(m.endValue.textValue):m.endValue,_=o.getDynamicVariableToggleIsForward(f)??!0,w=g+(a-v)/1e3*(m.dynamicVariableType==="timer"?-1:1)*(_?1:-1);w=Math.max(w,0),m.hasEnd&&(w=m.dynamicVariableType==="stopwatch"?vt.clamp(w,y,b):vt.clamp(w,b,y),w===y&&o.setDynamicVariableToggleIsForward(f,void 0),m.repeat?Math.abs(w-b)<(m.format==="number3decimal"?1e-4:.1)&&(w=y):(Math.abs(w-y)<(m.format==="number3decimal"?1e-4:.1)||Math.abs(w-b)<(m.format==="number3decimal"?1e-4:.1))&&o.setDynamicVariablePlayState(f,"Paused")),w!==g&&(l.push(f),this.dynamicVars[d].timerSeconds=w,o.updateVariable(f,bl.getFormattedTimerTime(w,m)),this.eventManager.requestRender())}}}let c=!1;o.mouseProperty!==this.prevMouseProperty&&(this.prevMouseProperty=o.mouseProperty,c=!0);let h=!1;o.raycastProperty!==this.prevRaycastProperty&&(this.prevRaycastProperty=o.raycastProperty,h=!0),this.events.forEach(d=>{(l.includes(d.data.variableId)||u.find(f=>f.objId===d.data.objectId&&f.property===d.data.property)||d.data.variableId==="mouseProperty"&&c||d.data.variableId==="raycastProperty"&&h)&&(d.dispatch(),this.eventManager.requestRender())})},this.onBlur=()=>{this.pause()},this.onFocus=()=>{this.resume()}}pause(){this.isOutOfFocus||(this.isOutOfFocus=!0,this.pauseTime=Date.now())}resume(){if(!this.isOutOfFocus)return;this.isOutOfFocus=!1;let e=Date.now()-this.pauseTime;for(let t=0;t<this.dynamicVars.length;t++)this.dynamicVars[t].last+=e,this.dynamicVars[t].expectedTime+=e}connect(){this.eventContext.page.traverseEntity(t=>{var r;(r=t.data)==null||r.events.filter(i=>i.data.type==="VariableChange"&&!i.data.disabled).forEach(i=>{this.events.push(new XEt(i.id,i.data,t,this.eventContext.page,this.eventContext.sharedAssets,this.eventManager))})}),this.propertiesToWatch=this.events.filter(t=>t.data.variableId==="objectProperty"&&t.data.objectId!==null).map(t=>({objectId:t.data.objectId,property:t.data.property,prevValue:null}));let e=this.eventContext.sharedAssets;this.sharedVariables.forEach(({id:t,data:r})=>{if(!("dynamicVariableType"in r)){this.events.find(n=>n.data.variableId===t)&&this.variablesToWatch.push({id:t,prevValue:e.getVariable(t)});return}let i;if(r.dynamicVariableType==="timer"||r.dynamicVariableType==="stopwatch"){let n;if(Ga.isTextValue(r.value)&&Array.isArray(r.value.textValue)){let a=r.value.textValue;a.length===3?n=a[2]+a[1]*60+a[0]*3600:n=a[1]+a[0]*60}else n=r.value;i=n,this.dynamicVars.push({id:t,last:-1,expectedTime:-1,data:r,timerSeconds:n,startValue:i})}else r.dynamicVariableType==="time"&&e.updateVariable(t,Ere(new Date,r)),r.dynamicVariableType==="counter"&&(i=Ga.isTextValue(r.value)?vne(r.value.textValue):r.value),this.dynamicVars.push({id:t,last:-1,expectedTime:-1,data:r,startValue:i})}),this.rafId=window.requestAnimationFrame(this.onFrame),window.addEventListener("blur",this.onBlur),window.addEventListener("focus",this.onFocus)}disconnect(){window.removeEventListener("blur",this.onBlur),window.removeEventListener("focus",this.onFocus),this.rafId&&(window.cancelAnimationFrame(this.rafId),this.rafId=void 0),this.events.forEach(e=>e.dispose())}},XEt=class{constructor(e,t,r,i,n,a){this.id=e,this.data=t,this.object=r,this.actions=Hn(t,t.actions,i,n,a,r)}dispatch(){let e=this.actions;e.Audio.forEach(t=>t.dispatchConditional()),e.Particles.forEach(t=>t.dispatchConditional()),e.Video.forEach(t=>t.dispatchConditional()),e.Create.forEach(t=>t.dispatch()),e.Destroy.forEach(t=>t.dispatch()),e.Reset.forEach(t=>t.dispatch()),e.Transition.forEach(t=>{t.object.currentTransitionEvent!==this&&(t.object.currentTransitionEvent=this),t.init()}),e.Transition.forEach(t=>t.play()),e.Animation.forEach(t=>t.play()),e.SwitchCamera.forEach(t=>t.play()),e.SceneTransition.forEach(t=>t.dispatch()),e.SetVariable.forEach(t=>t.checkConditions()),e.SetVariable.forEach(t=>t.dispatch()),e.DynamicVariablePlay.forEach(t=>t.dispatch()),e.ClearLocalStorage.forEach(t=>t.dispatch()),e.UserAPI.forEach(t=>t.dispatch())}dispose(){_a(this.actions)}};function vne(e){return e.length===3?e[2]+e[1]*60+e[0]*3600:e[1]+e[0]*60}var ZEt="https://unpkg.com/@splinetool/runtime@1.9.47/build/",QEt="https://unpkg.com/@splinetool/navmesh-wasm@1.9.47/build/",KEt=`
(async function() {
	const [wasmImport, wasmBinary] = await Promise.all([
		import('${ZEt}' + 'navmesh.js'),
		fetch('${QEt}' + 'navmesh.wasm').then((res) => res.arrayBuffer()),
	]);
	const wasmModule = wasmImport.default;
	self.module = await wasmModule({ wasmBinary });
	postMessage('ready');
})();
`,JEt=`
(async function() {
	const [wasmImport, wasmBinary] = await Promise.all([
		import(self.location.origin + '/_libraries/navmesh.js'),
		fetch(self.location.origin + '/_libraries/navmesh.wasm').then((res) => res.arrayBuffer()),
	]);
	const wasmModule = wasmImport.default;
	self.module = await wasmModule({ wasmBinary });
	postMessage('ready');
})();
`,$Et=`

onmessage = function(messageEvent) {
	const meshData = messageEvent.data;
	const positions = meshData[0];
	const offset = meshData[1];
	const indices = meshData[2];
	const indicesLength = meshData[3];
	const parameters = meshData[4];

	const module = self.module;
	const rc = new module.rcConfig();
	rc.cs = parameters.cs;
	rc.ch = parameters.ch;
	rc.borderSize = parameters.borderSize ? parameters.borderSize : 0;
	rc.tileSize = parameters.tileSize ? parameters.tileSize : 0;
	rc.walkableSlopeAngle = parameters.walkableSlopeAngle;
	rc.walkableHeight = parameters.walkableHeight;
	rc.walkableClimb = parameters.walkableClimb;
	rc.walkableRadius = parameters.walkableRadius;
	rc.maxEdgeLen = parameters.maxEdgeLen;
	rc.maxSimplificationError = parameters.maxSimplificationError;
	rc.minRegionArea = parameters.minRegionArea;
	rc.mergeRegionArea = parameters.mergeRegionArea;
	rc.maxVertsPerPoly = parameters.maxVertsPerPoly;
	rc.detailSampleDist = parameters.detailSampleDist;
	rc.detailSampleMaxError = parameters.detailSampleMaxError;

	if (!self.navMesh) {
		self.navMesh = new module.NavMesh();
	}
	self.navMesh.build(positions, offset, indices, indicesLength, rc);

	const navmeshData = navMesh.getNavmeshData();
	const arrView = new Uint8Array(module.HEAPU8.buffer, navmeshData.dataPointer, navmeshData.size);
	const ret = new Uint8Array(navmeshData.size);
	ret.set(arrView);
	navMesh.freeNavmeshData(navmeshData);

	postMessage(ret);
}
`,eMt=.001,tMt={cs:6,ch:2,walkableSlopeAngle:90,walkableHeight:20,walkableClimb:5,walkableRadius:0,maxEdgeLen:12,maxSimplificationError:1.3,minRegionArea:8,mergeRegionArea:20,maxVertsPerPoly:6,detailSampleDist:6,detailSampleMaxError:1},P2e,zr,ka;Xxt.then(e=>{P2e=e,zr=new e.Vec3,ka=new e.Vec3});var rMt=new U,iMt=class{constructor(e=!1,t=!1){this.usePhysics=e,this.isExport=t,this.onPointerDown=r=>{if(jt.length!==1)return;let{raycaster:i,page:n}=this.eventContext;this.eventContext.updateRaycaster(r);let a=n.raycastWithClones(i);if(a.length!==0){if(this.gameControl){let o=rMt.copy(this.gameControl.colliderWorldPosition);o.y-=this.gameControl.colliderHeight/2,this.gameControl.path=this.computePath(o,a[0].point)}this.eventContext.requestRender()}},this.traverseWithPhysics=(r,i)=>n=>{var d,f,p,v,m,g,y;let a;if(n instanceof yu)if(n.objectForSample){if(n.objectForSample.dataPatched.physics.fusedBody)return;a=n.object}else return n.object.dataPatched.physics.fusedBody===!0&&n.object.dataPatched.physics.rigidBody==="dynamic"?!0:void 0;else if(n instanceof yo)a=n.object;else if(a=n,((d=a.dataPatched.cloner)==null?void 0:d.disabled)===!1&&((f=a.dataPatched.cloner)==null?void 0:f.hideBase)&&((p=a.dataPatched.physics)==null?void 0:p.fusedBody)!==!0)return!0;if(i&&!a.userData.navmesh)return;let o=a.dataPatched;if(!o.visible&&((v=o.physics)==null?void 0:v.enabled)!==!0)return!0;n.updateMatrixWorldSVD();let s=V6(o),l=a.userData.hasDestroy,u=a.userData.hasDrag,c=!1,h=!1;for(let x of o.events)x.data.disabled!==!0&&(x.data.type==="GameControl"?c=!0:x.data.type==="Follow"&&(h=!0));if(c||s||h||l||u)return!0;if(this.usePhysics&&((m=o.physics)==null?void 0:m.rigidBody)==="dynamic"){if(this.usePhysics&&((g=o.physics)!=null&&g.fusedBody))return!0}else if("geometry"in n&&n.geometry&&r.push(Gh(n.geometry,n.matrixWorld)),this.usePhysics&&((y=o.physics)==null?void 0:y.fusedBody))return n.traverseObject((x,b)=>{var S,A;if(b===0)return;let _;if(x instanceof yu)if(x.objectForSample){if(x.objectForSample.dataPatched.physics.fusedBody)return;_=x.object}else return x.object.dataPatched.physics.fusedBody===!0&&x.object.dataPatched.physics.rigidBody==="dynamic"?!0:void 0;else if(x instanceof yo)_=x.object;else if(_=x,(S=x.dataPatched.cloner)==null?void 0:S.hideBase)return!0;let w=_.dataPatched;if(!w.visible&&((A=w.physics)==null?void 0:A.enabled)!==!0)return!0;"geometry"in x&&x.geometry&&r.push(Gh(x.geometry,x.matrixWorld))}),!0},this.traverseNoPhysics=(r,i)=>n=>{let a;if(n instanceof yu)return;n instanceof yo?a=n.object:a=n;let o=a.dataPatched;if(o.physics.enabled==="visibility"?!o.visible:!o.physics.enabled)return!0;if(i&&!a.userData.navmesh)return;let s=n.geometry,l=a.userData.hasDestroy===!0,u=a.userData.hasDrag===!0;if(V6(o)||l||u||a.dataPatched.events.some(c=>c.data.disabled!==!0&&c.data.type==="GameControl"))return!0;s&&r.push(Gh(s,n.matrixWorld))},this.navmeshWasm=P2e,this.navMesh=new this.navmeshWasm.NavMesh,this._workerURL=URL.createObjectURL(new Blob([(t?KEt:JEt)+$Et])),this._worker=new Worker(this._workerURL)}init(e,t,r){this.gameControl=t,this.eventContext=r,this.setDefaultQueryExtent(new U().setScalar(e.ch*e.walkableRadius*1.2)),this._worker.onmessage=()=>{this.createNavMesh(r.page,e,i=>{this.buildFromNavmeshData(i.data)})},this.eventContext.renderer.domElement.addEventListener("pointerdown",this.onPointerDown)}createNavMesh(e,t,r){t.objects.forEach(l=>{var c;let u=e.scene.find(l);u.traverseEntity(h=>{h.userData.navmesh=!0}),(c=u.cloner)==null||c.traverseObject(h=>{h.userData.navmesh=!0})});let i=[],n=(this.usePhysics?this.traverseWithPhysics:this.traverseNoPhysics)(i,t.zones==="custom");if(e.traverseChildren(n),t.objects.forEach(l=>{var c;let u=e.scene.find(l);u.traverseEntity(h=>{h.userData.navmesh=void 0}),(c=u.cloner)==null||c.traverseObject(h=>{h.userData.navmesh=void 0})}),i.length===0)return!1;let a=nv(i),{positions:o,triIndices:s}=V7(a.getAttribute("position"),a.getIndex());return this._worker.postMessage([o,o.length/3,s,s.length,{...tMt,...t}]),this._worker.onmessage=r,!0}createDebugNavGeometry(){let e,t,r=this.navMesh.getDebugNavMesh(),i=r.getTriangleCount(),n=new Uint32Array(i*3),a=new Float32Array(i*3*3);for(e=0;e<i*3;e++)n[e]=e;for(e=0;e<i;e++)for(t=0;t<3;t++){let s=r.getTriangle(e).getPoint(t);a[e*9+t*3+0]=s.x,a[e*9+t*3+1]=s.y,a[e*9+t*3+2]=s.z}let o=new It;return o.setIndex(new Zt(n,1)),o.setAttribute("position",new Zt(a,3)),o}getClosestPoint(e){return zr.x=e.x,zr.y=e.y,zr.z=e.z,this.navMesh.getClosestPoint(zr)}getClosestPointToRef(e,t){zr.x=e.x,zr.y=e.y,zr.z=e.z;let r=this.navMesh.getClosestPoint(zr);t.set(r.x,r.y,r.z)}getRandomPointAround(e,t){return zr.x=e.x,zr.y=e.y,zr.z=e.z,this.navMesh.getRandomPointAround(zr,t)}getRandomPointAroundToRef(e,t,r){zr.x=e.x,zr.y=e.y,zr.z=e.z;let i=this.navMesh.getRandomPointAround(zr,t);r.set(i.x,i.y,i.z)}moveAlong(e,t){return zr.x=e.x,zr.y=e.y,zr.z=e.z,ka.x=t.x,ka.y=t.y,ka.z=t.z,this.navMesh.moveAlong(zr,ka)}moveAlongToRef(e,t,r){return zr.x=e.x,zr.y=e.y,zr.z=e.z,ka.x=t.x,ka.y=t.y,ka.z=t.z,this.navMesh.moveAlong(zr,ka)}computePath(e,t){let r=this.getClosestPoint(t);if(ka.x=r.x,ka.y=r.y,ka.z=r.z,Math.sqrt(Math.pow(t.x-r.x,2)+Math.pow(t.y-r.y,2)+Math.pow(t.z-r.z,2))>this.getDefaultQueryExtent().y)return[];this.getClosestPoint(e);let i=this.navMesh.computePath(zr,ka),n=i.getPointCount(),a=[];for(let o=0;o<n;o++){let s=i.getPoint(o);a.push(new U(s.x,s.y,s.z))}return a}createCrowd(e,t){return new nMt(this,e,t)}setDefaultQueryExtent(e){zr.x=e.x,zr.y=e.y,zr.z=e.z,this.navMesh.setDefaultQueryExtent(zr)}getDefaultQueryExtent(){return this.navMesh.getDefaultQueryExtent()}buildFromNavmeshData(e){let t=e.length*e.BYTES_PER_ELEMENT,r=this.navmeshWasm._malloc(t),i=new Uint8Array(this.navmeshWasm.HEAPU8.buffer,r,t);i.set(e);let n=new this.navmeshWasm.NavmeshData;n.dataPointer=i.byteOffset,n.size=e.length,this.navMesh.buildFromNavmeshData(n),this.navmeshWasm._free(i.byteOffset)}getNavmeshData(){let e=this.navMesh.getNavmeshData(),t=new Uint8Array(this.navmeshWasm.HEAPU8.buffer,e.dataPointer,e.size),r=new Uint8Array(e.size);return r.set(t),this.navMesh.freeNavmeshData(e),r}getDefaultQueryExtentToRef(e){let t=this.navMesh.getDefaultQueryExtent();e.set(t.x,t.y,t.z)}dispose(){var e;this.navMesh.destroy(),this._worker.terminate(),URL.revokeObjectURL(this._workerURL),(e=this.eventContext)==null||e.renderer.domElement.removeEventListener("pointerdown",this.onPointerDown)}addCylinderObstacle(e,t,r){return zr.x=e.x,zr.y=e.y,zr.z=e.z,this.navMesh.addCylinderObstacle(zr,t,r)}addBoxObstacle(e,t,r){return zr.x=e.x,zr.y=e.y,zr.z=e.z,ka.x=t.x,ka.y=t.y,ka.z=t.z,this.navMesh.addBoxObstacle(zr,ka,r)}removeObstacle(e){this.navMesh.removeObstacle(e)}isSupported(){return this.navmeshWasm!==void 0}},nMt=class{constructor(e,t,r){this.navmeshWasmWrapper=e,this.transforms=[],this.agents=new Array,this.reachRadii=new Array,this._agentDestinationArmed=new Array,this._agentDestination=new Array,this.crowd=new this.navmeshWasmWrapper.navmeshWasm.Crowd(t,r,this.navmeshWasmWrapper.navMesh.getNavMesh())}onReachTarget(e,t){}addAgent(e,t,r){let i=new this.navmeshWasmWrapper.navmeshWasm.dtCrowdAgentParams;i.radius=t.radius,i.height=t.height,i.maxAcceleration=t.maxAcceleration,i.maxSpeed=t.maxSpeed,i.collisionQueryRange=t.collisionQueryRange,i.pathOptimizationRange=t.pathOptimizationRange,i.separationWeight=t.separationWeight,i.updateFlags=7,i.obstacleAvoidanceType=0,i.queryFilterType=0,i.userData=0;let n=this.crowd.addAgent(new this.navmeshWasmWrapper.navmeshWasm.Vec3(e.x,e.y,e.z),i);return this.transforms.push(r),this.agents.push(n),this.reachRadii.push(t.reachRadius?t.reachRadius:t.radius),this._agentDestinationArmed.push(!1),this._agentDestination.push(new U(0,0,0)),n}getAgentPosition(e){return this.crowd.getAgentPosition(e)}getAgentPositionToRef(e,t){let r=this.crowd.getAgentPosition(e);t.set(r.x,r.y,r.z)}getAgentVelocity(e){return this.crowd.getAgentVelocity(e)}getAgentVelocityToRef(e,t){let r=this.crowd.getAgentVelocity(e);t.set(r.x,r.y,r.z)}getAgentNextTargetPath(e){return this.crowd.getAgentNextTargetPath(e)}getAgentNextTargetPathToRef(e,t){let r=this.crowd.getAgentNextTargetPath(e);t.set(r.x,r.y,r.z)}getAgentState(e){return this.crowd.getAgentState(e)}overOffmeshConnection(e){return this.crowd.overOffmeshConnection(e)}agentGoto(e,t){this.crowd.agentGoto(e,new this.navmeshWasmWrapper.navmeshWasm.Vec3(t.x,t.y,t.z));let r=this.agents.indexOf(e);r>-1&&(this._agentDestinationArmed[r]=!0,this._agentDestination[r].set(t.x,t.y,t.z))}agentTeleport(e,t){this.crowd.agentTeleport(e,new this.navmeshWasmWrapper.navmeshWasm.Vec3(t.x,t.y,t.z))}updateAgentParameters(e,t){let r=this.crowd.getAgentParameters(e);t.radius!==void 0&&(r.radius=t.radius),t.height!==void 0&&(r.height=t.height),t.maxAcceleration!==void 0&&(r.maxAcceleration=t.maxAcceleration),t.maxSpeed!==void 0&&(r.maxSpeed=t.maxSpeed),t.collisionQueryRange!==void 0&&(r.collisionQueryRange=t.collisionQueryRange),t.pathOptimizationRange!==void 0&&(r.pathOptimizationRange=t.pathOptimizationRange),t.separationWeight!==void 0&&(r.separationWeight=t.separationWeight),this.crowd.setAgentParameters(e,r)}removeAgent(e){this.crowd.removeAgent(e);let t=this.agents.indexOf(e);t>-1&&(this.agents.splice(t,1),this.transforms.splice(t,1),this.reachRadii.splice(t,1),this._agentDestinationArmed.splice(t,1),this._agentDestination.splice(t,1))}getAgents(){return this.agents}update(e){if(this.navmeshWasmWrapper.navMesh.update(),e<=eMt)return;let t=1/60,r=10;{let i=Math.floor(e/t);i>r&&(i=r),i<1&&(i=1);let n=e/i;for(let a=0;a<i;a++)this.crowd.update(n)}for(let i=0;i<this.agents.length;i++){let n=this.agents[i],a=this.getAgentPosition(n);if(this.transforms[i].copy(a),this._agentDestinationArmed[i]){let o=a.x-this._agentDestination[i].x,s=a.z-this._agentDestination[i].z,l=this.reachRadii[i],u=this._agentDestination[i].y-this.reachRadii[i],c=this._agentDestination[i].y+this.reachRadii[i],h=o*o+s*s;a.y>u&&a.y<c&&h<l*l&&(this.onReachTarget(n,this._agentDestination[i]),this._agentDestinationArmed[i]=!1)}}}setDefaultQueryExtent(e){let t=new this.navmeshWasmWrapper.navmeshWasm.Vec3(e.x,e.y,e.z);this.crowd.setDefaultQueryExtent(t)}getDefaultQueryExtent(){return this.crowd.getDefaultQueryExtent()}getDefaultQueryExtentToRef(e){let t=this.crowd.getDefaultQueryExtent();e.set(t.x,t.y,t.z)}getCorners(e){let t,r=this.crowd.getCorners(e),i=r.getPointCount(),n=[];for(t=0;t<i;t++){let a=r.getPoint(t);n.push(new U(a.x,a.y,a.z))}return n}dispose(){this.crowd.destroy()}};function aMt(e){let t=!1;return e.scene.objects.forEach(r=>{r.data.type==="Page"&&!t&&r.data.publish.gameControlObject&&jw.traverseModuleInstances(e,r.id,(i,n,a)=>{for(let o of a)o.data.type==="GameControl"&&o.data.navmesh.enabled&&(t=!0)})}),t}var oMt={type:"change"},mne={type:"changeZoom"},sMt={type:"changePan"},g0={type:"start"},y0={type:"end",changed:!0},lMt={type:"end",changed:!1},WD=new Jt,gne=new me,uMt=2*Math.PI,cMt=1e-8,hMt=.01,qD=new U,Q5=new me,YD=new U,K5=new Jt,yne=new Ke,dMt={type:"requestRender"},D2e=class extends Ka{constructor(e,t,r={isPlayMode:!1,isExport:!1}){super(),this.object=e,this.domElement=t,this.options=r,this.enabled=!0,this.useKeyEvents=!0,this.enableDamping=!1,this.enableZoom=!0,this.enableRotate=!0,this.enablePan=!0,this.autoRotate=!1,this.rotationLimitsMode=0,this.panLimitsMode=0,this.rotationSoftLimit=2,this.panSoftLimit=2,this.hoverRotatePanMode=0,this.zoomLimitsEnabled=!1,this.mouseButtons=[0,5],this.mouseButtonsPlay=[3,4,5],this.touches=[null,il.DOLLY_ROTATE,il.PAN],this.offset=new U,this.eye=new U,this.lastPosition=new U,this.lastQuaternion=new Jt,this.current=new me,this.overShoot=new me,this.overRatio=new me,this.spherical=new G$,this.sphericalDelta=new G$,this.panOffset=new U,this.panLeftV=new U,this.panUpV=new U,this.panV=new U,this.rotateStart=new me,this.rotateEnd=new me,this.rotateDelta=new me,this.panStart=new me,this.panEnd=new me,this.panDelta=new me,this.dollyStart=new me,this.dollyEnd=new me,this.dollyDelta=new me,this.rotationRangeFactor=new me,this.panRangeFactor=new me,this.state=-1,this.zoomChanged=!1,this.isPointerDown=!1,this.isThetaFlipped=!1,this.prevScale=0,this.scale=1,this.gesture=!1,this.timer=-1,this.timerHover=-1,this.minDistance=0,this.maxDistance=1/0,this.minZoom=0,this.maxZoom=1/0,this.minPhi=0,this.maxPhi=Math.PI,this.minTheta=-1/0,this.maxTheta=1/0,this.minH=0,this.maxH=Math.PI,this.minV=-1/0,this.maxV=1/0,this.autoRotateClockwise=!0,this.isPanOverShoot=!1,this.isRotateOverShoot=!1,this.resetHoverEffectOnPointerLeave=!1,this.hasChange=!1,this.useWindowEvents=!1,this.isTouchZoom=!0,this.autoRotateSpeed=2,this.dampingFactor=.125,this.zoomSpeed=2,this.rotateSpeed=1,this.panSpeed=1,this.hoverRotatePanStrength=.1,this.hoverRotateDamping=this.dampingFactor,this.thetaIsFree=!1,this.phiIsFree=!1,this.needsUpdate=!0,this.onCameraChange=i=>{this.object.removeEventListener("beginState",this.onBeginState),this.object.removeEventListener("completeState",this.onCompleteState),this.object.removeEventListener("cameraChange",this.onCameraChange),this.object=i.camera,this.object.addEventListener("beginState",this.onBeginState),this.object.addEventListener("completeState",this.onCompleteState),this.object.addEventListener("cameraChange",this.onCameraChange)},this.update=()=>{this.object.updateWorldMatrix(!0,!1),this.object.matrixWorld.decompose(YD,K5,qD),this.offset.copy(YD).sub(this.target),this.spherical.setFromVector3(this.offset),this.object.isUpVectorFlipped&&(this.spherical.phi*=-1,this.spherical.theta-=Math.PI),this.autoRotate&&this.state===-1&&this.rotateLeft((this.autoRotateClockwise===!0?1:-1)*this.getAutoRotationAngle()),this.rotationLimitsMode!==0&&this.applyLimits(this.sphericalDelta,this.rotationLimitsMode,this.rotationSoftLimit,this.maxTheta,this.minTheta,this.maxPhi,this.minPhi,this.rotationRangeFactor),this.rotationLimitsMode!==2&&(this.spherical.phi+=this.sphericalDelta.phi),(this.rotationLimitsMode!==1||this.autoRotate===!0)&&(this.spherical.theta+=this.sphericalDelta.theta),this.spherical.radius*=this.scale,this.zoomLimitsEnabled&&this.object.isPerspectiveCamera&&(this.spherical.radius=Math.max(this.minDistance,Math.min(this.maxDistance,this.spherical.radius))),this.panLimitsMode!==0&&(this.target.applyQuaternion(WD.copy(K5).invert()),this.panOffset.applyQuaternion(WD),this.applyLimits(this.panOffset,this.panLimitsMode,this.panSoftLimit,this.maxH,this.minH,this.maxV,this.minV,this.panRangeFactor),this.target.applyQuaternion(K5),this.panOffset.applyQuaternion(K5)),this.panLimitsMode===2&&(this.panOffset.y=0),this.panLimitsMode===1&&(this.panOffset.x=0),this.state===-1&&!this.gesture?(this.panOffset.multiplyScalar(1-this.dampingFactor),this.target.add(this.panOffset)):(this.target.add(this.panOffset),this.panOffset.set(0,0,0)),this.offset.setFromSpherical(this.spherical),YD.copy(this.target).add(this.offset),this.object.position.copy(this.target).add(this.offset),this.object.parent&&(yne.copy(this.object.parent.matrixWorld).invert(),this.object.position.applyMatrix4(yne));let i=this.spherical.phi%uMt;if(this.eye.copy(this.offset).normalize(),this.object.up.copy(_i.DEFAULT_UP).applyAxisAngle(this.eye,this.object.angleOffsetFromUp),i>0&&i>Math.PI||i<0&&i>-Math.PI?(this.object.up.negate(),this.object.lookAt(this.target),this.object.isUpVectorFlipped=!0):(this.object.lookAt(this.target),this.object.isUpVectorFlipped=!1),this.state===-1||this.enableDamping===!0){let n=this.hoverRotatePanMode===1?this.hoverRotateDamping:this.dampingFactor;this.sphericalDelta.theta*=1-n,this.sphericalDelta.phi*=1-n}else this.sphericalDelta.set(0,0,0);return this.scale=1,this.zoomChanged||this.lastPosition.distanceToSquared(this.object.position)>hMt||8*(1-this.lastQuaternion.dot(this.object.quaternion))>cMt?(this.dispatchEvent(oMt),this.object.dispatchEvent(dMt),this.lastPosition.copy(this.object.position),this.lastQuaternion.copy(this.object.quaternion),this.zoomChanged=!1,!0):(this.isPanOverShoot=!1,this.isRotateOverShoot=!1,this.object.wasMovedBySwitchCameraAction=!1,this.sphericalDelta.set(0,0,0),this.panOffset.set(0,0,0),!1)},this.onPointerDown=i=>{this.enabled!==!1&&(i.pointerType==="touch"||i.pointerType==="pen"&&Us?this.onPointerDownTouch(i):this.onPointerDownMouse(i),this.state!==-1&&(this.isPointerDown=!0,this.dispatchEvent(g0),this.domElement.addEventListener("pointermove",this.onPointerMove),this.domElement.addEventListener("pointerup",this.onPointerUp),i.stopPropagation(),i.pointerType==="touch"||i.pointerType==="pen"&&Us||this.domElement.setPointerCapture(i.pointerId)))},this.onPointerLeave=i=>{this.resetHoverEffectOnPointerLeave&&!this.useWindowEvents?(this.hoverRotatePanMode===1?(this.sphericalDelta.theta=-this.spherical.theta,this.sphericalDelta.phi=-this.spherical.phi,qD.subVectors(this.position0,this.target0),this.spherical.setFromVector3(qD),this.sphericalDelta.theta+=this.spherical.theta,this.sphericalDelta.phi+=this.spherical.phi,this.sphericalDelta.theta/=8,this.sphericalDelta.phi/=8):this.hoverRotatePanMode===2&&this.panOffset.subVectors(this.target0,this.target).divideScalar(8),this.update()):this.pointerLeaveEvent=i},this.onPointerEnter=i=>{this.resetHoverEffectOnPointerLeave||this.pointerLeaveEvent===void 0?Q5.set(i.clientX-this.domElement.clientWidth/2,i.clientY-this.domElement.clientHeight/2):Q5.set(i.clientX-this.pointerLeaveEvent.clientX,i.clientY-this.pointerLeaveEvent.clientY),this.hoverRotatePanMode===1?(this.rotateDelta.copy(Q5).multiplyScalar(this.rotateSpeed*this.hoverRotatePanStrength).rotateAround(gne,-this.object.angleOffsetFromUp),this.rotateLeft(2*Math.PI*this.rotateDelta.x/this.domElement.clientHeight),this.rotateUp(2*Math.PI*this.rotateDelta.y/this.domElement.clientHeight),this.rotateStart.set(i.clientX,i.clientY)):this.hoverRotatePanMode===2&&(this.panDelta.copy(Q5).multiplyScalar(this.panSpeed*this.hoverRotatePanStrength),this.pan(this.panDelta.x,this.panDelta.y),this.panStart.set(i.clientX,i.clientY)),this.update()},this.onPointerMove=i=>{this.enabled!==!1&&(this.checkRaycastLock()||(i.pointerType==="touch"||i.pointerType==="pen"&&Us?this.onPointerMoveTouch(i):this.onPointerMoveMouse(i),i.stopPropagation()))},this.onPointerUp=i=>{this.isPointerDown=!1,jt.length===0&&(this.domElement.removeEventListener("pointermove",this.onPointerMove),this.domElement.removeEventListener("pointerup",this.onPointerUp)),jt.length>1&&i.preventDefault(),this.hasChange?this.dispatchEvent(y0):this.dispatchEvent(lMt),this.state=-1,i&&(i.stopPropagation(),i.pointerType==="touch"||i.pointerType==="pen"&&Us||this.domElement.releasePointerCapture(i.pointerId))},this.onPointerDownMouse=i=>{let n;switch(this.useKeyEvents?n=this.mouseButtons[i.button]:n=this.mouseButtonsPlay[i.button],n){case 0:if(i.altKey===!0&&!i.shiftKey&&!l5(i)){if(this.enableRotate===!1)return;this.handleMouseDownRotate(i),this.state=0}else if(this.key===" "){if(this.enablePan===!1)return;this.handleMouseDownPan(i),this.state=2}break;case 4:if(this.enablePan===!1)return;this.handleMouseDownPan(i),this.state=2;break;case 3:if(l5(i)||i.shiftKey){if(this.enablePan===!1)return;this.handleMouseDownPan(i),this.state=2}else{if(this.enableRotate===!1)return;this.handleMouseDownRotate(i),this.state=0}break;case 5:if(l5(i)||i.shiftKey){if(this.enableRotate===!1)return;this.handleMouseDownRotate(i),this.state=0}else{if(this.enablePan===!1)return;this.handleMouseDownPan(i),this.state=2}break;default:this.state=-1}},this.onPointerMoveMouse=i=>{switch(this.state){case 0:if(this.enableRotate===!1)return;this.handleMouseMoveRotate(i);break;case 1:if(this.enableZoom===!1)return;this.handleMouseMoveDolly(i);break;case 2:if(this.enablePan===!1)return;this.handleMouseMovePan(i);break}this.object.wasMovedByUser=!0},this.onPointerDownTouch=i=>{switch(jt.length>1&&i.preventDefault(),this.touches[jt.length-1]){case il.ROTATE:if(this.enableRotate===!1){this.state=-1;return}this.handleTouchStartRotate(),this.state=3;break;case il.PAN:if(this.enablePan===!1){this.state=-1;return}this.handleTouchStartPan(),this.state=4;break;case il.DOLLY_PAN:if(this.enableZoom===!1&&this.enablePan===!1)return;this.handleTouchStartDollyPan(),this.state=5;break;case il.DOLLY_ROTATE:if(this.enableZoom===!1&&this.enableRotate===!1)return;this.handleTouchStartDollyRotate(),this.state=6;break;default:this.state=-1}},this.onPointerMoveTouch=i=>{switch(jt.length>1&&i.preventDefault(),this.state){case 3:if(this.enableRotate===!1)return;this.handleTouchMoveRotate(i),this.update();break;case 4:if(this.enablePan===!1)return;this.handleTouchMovePan(i),this.update();break;case 5:if(this.enableZoom===!1&&this.enablePan===!1)return;this.handleTouchMoveDollyPan(i),this.update();break;case 6:if(this.enableZoom===!1&&this.enableRotate===!1)return;this.handleTouchMoveDollyRotate(i),this.update();break;default:this.state=-1}this.object.wasMovedByUser=!0},this.dispatchEndDebounced=Fw(()=>this.dispatchEvent(y0),33),this.onMouseWheel=i=>{this.enabled===!1||this.enableZoom===!1&&this.enablePan===!1||this.checkRaycastLock()||(!this.options.isExport&&this.domElement.clientHeight===document.body.clientHeight&&this.domElement.clientWidth===document.body.clientWidth&&i.preventDefault(),this.dispatchEvent(g0),this.handleMouseWheel(i),this.dispatchEndDebounced(),this.object.wasMovedByUser=!0)},this.onGesture=i=>{if(i.preventDefault(),this.enabled!==!1&&!this.checkRaycastLock()&&!q4)if(i.type==="gesturechange"){if(this.enableZoom===!1||this.isTouchZoom===!1)return;this.dispatchEvent(g0),i.scale>this.prevScale?this.dollyIn(this.getZoomScale()):i.scale<this.prevScale&&this.dollyOut(this.getZoomScale()),this.prevScale=i.scale,this.update(),this.object.wasMovedByUser=!0}else this.dispatchEvent(y0)},this.onContextMenu=i=>{i.preventDefault()},this.onTouchEnd=i=>{i.preventDefault()},this.onKeyDown=i=>{this.enabled!==!1&&(this.key=i.key,i.key===" "&&this.dispatchEvent(g0))},this.onKeyUp=i=>{this.enabled!==!1&&(this.key=void 0,this.state!==-1&&i.key==="Alt"&&this.onPointerUp(jt[0]),i.key===" "&&this.dispatchEvent(y0))},this.onPointerHover=i=>{i.pointerType!=="mouse"||this.enabled===!1||this.state!==-1||this.hoverRotatePanMode===2&&this.isPanOverShoot||this.hoverRotatePanMode===1&&this.isRotateOverShoot||(this.isPointerDown=!0,this.hoverRotatePanMode===2?this.handleMouseMovePan(i,this.hoverRotatePanStrength):this.hoverRotatePanMode===1&&this.handleMouseMoveRotate(i,this.hoverRotatePanStrength))},this.onBeginState=()=>{this.enabled=!1,this.needsUpdate=!1},this.onCompleteState=i=>{i.isfromEntity&&this.options.isPlayMode||(this.enabled=!0,this.needsUpdate=!0,this.object.updateUp(),this.object.getTarget(this.target))},this.target=this.object.getTarget(),this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this.quat0=this.object.quaternion.clone(),this.isUpVectorFlipped0=this.object.isUpVectorFlipped,this.offset.copy(this.object.position).sub(this.target),this.spherical.setFromVector3(this.offset),this.object.isUpVectorFlipped&&(this.spherical.phi*=-1,this.spherical.theta-=Math.PI),this.initialSphericalRadius=this.spherical.radius,this.addEventListenersToCamera()}dispatchEvent(e){e.type==="start"?this.hasChange=!1:this.hasChange=!0,super.dispatchEvent(e)}addEventListenersToCamera(){this.object.addEventListener("beginState",this.onBeginState),this.object.addEventListener("completeState",this.onCompleteState),this.object.addEventListener("cameraChange",this.onCameraChange)}removeEventListenersFromCamera(){this.object.removeEventListener("beginState",this.onBeginState),this.object.removeEventListener("completeState",this.onCompleteState),this.object.removeEventListener("cameraChange",this.onCameraChange)}updateUseWindowEvents(e){if(window.removeEventListener("pointermove",this.onPointerHover),this.domElement.removeEventListener("pointermove",this.onPointerHover),this.useWindowEvents=e,this.hoverRotatePanMode!==0&&(this.useWindowEvents?window.addEventListener("pointermove",this.onPointerHover):this.domElement.addEventListener("pointermove",this.onPointerHover)),this.domElement.removeEventListener("pointerleave",this.onPointerLeave),this.domElement.removeEventListener("pointerenter",this.onPointerEnter),window.removeEventListener("pointerleave",this.onPointerLeave),window.removeEventListener("pointerenter",this.onPointerEnter),this.hoverRotatePanMode!==0&&!this.useWindowEvents){let t=this.useWindowEvents?window:this.domElement;t.addEventListener("pointerleave",this.onPointerLeave),t.addEventListener("pointerenter",this.onPointerEnter)}}fromJSON(e,t){this.setEnableDampingSpeed(e.enableDamping),this.enablePan=e.enablePan,this.enableZoom=e.enableZoom,this.enableRotate=e.enableRotate,this.rotationLimitsMode=e.rotationLimitsMode,this.thetaIsFree=e.rotationHorizontalOffset.min===e.rotationHorizontalOffset.max&&e.rotationHorizontalOffset.min===Math.PI,this.phiIsFree=e.rotationVerticalOffset.min===e.rotationVerticalOffset.max&&e.rotationVerticalOffset.min===Math.PI,this.panLimitsMode=e.panLimitsMode,this.panSoftLimit=e.panSoftLimit,this.rotationSoftLimit=e.rotationSoftLimit,this.hoverRotatePanMode=e.hoverRotatePanMode,this.hoverRotateDamping=e.hoverRotateDamping??this.dampingFactor,this.useWindowEvents=t==="window",this.hoverRotatePanMode!==0&&(this.useWindowEvents?window.addEventListener("pointermove",this.onPointerHover):this.domElement.addEventListener("pointermove",this.onPointerHover));let r=e.hoverRotatePanStrength/100;this.hoverRotatePanStrength=r**2,this.zoomLimitsEnabled=e.zoomLimitsEnabled,this.minZoom=e.zoomLimits.min,this.maxZoom=Math.max(e.zoomLimits.min,e.zoomLimits.max),this.minDistance=1e3/e.zoomLimits.max,this.maxDistance=Math.max(this.minDistance,1e3/e.zoomLimits.min),this.autoRotate=e.autoRotate,this.autoRotateSpeed=e.autoRotateSpeed,this.autoRotateClockwise=e.autoRotateClockwise;let i=this.object.getTarget().applyQuaternion(WD.copy(this.object.quaternion).invert());this.minV=-e.panVerticalOffset.min+i.y,this.maxV=e.panVerticalOffset.max+i.y,this.minH=-e.panHorizontalOffset.min+i.x,this.maxH=e.panHorizontalOffset.max+i.x,this.panRangeFactor.set(this.maxH-this.minH,this.maxV-this.minV).divideScalar(2),this.rotationRangeFactor.setScalar(Math.PI).divideScalar(4),this.minPhi=oc(this.spherical.phi-e.rotationVerticalOffset.min),this.maxPhi=oc(this.spherical.phi+e.rotationVerticalOffset.max),this.minTheta=oc(oc(this.spherical.theta)-e.rotationHorizontalOffset.min),this.maxTheta=oc(oc(this.spherical.theta)+e.rotationHorizontalOffset.max),this.isThetaFlipped=this.minTheta>this.maxTheta,e.orbitTouches===1&&(this.touches[0]=il.ROTATE),e.panTouches===1&&(this.touches[0]=il.PAN),e.orbitTouches===2&&(this.touches[1]=il.DOLLY_ROTATE),e.panTouches===2&&(this.touches[1]=il.DOLLY_PAN),e.orbitTouches===3&&(this.touches[2]=il.ROTATE),e.panTouches===3&&(this.touches[2]=il.PAN),this.isTouchZoom=e.isTouchZoom,this.resetHoverEffectOnPointerLeave=e.resetHoverEffectOnPointerLeave??!1}connect(){if(this.domElement.addEventListener("contextmenu",this.onContextMenu),this.domElement.addEventListener("pointerdown",this.onPointerDown),this.domElement.addEventListener("wheel",this.onMouseWheel),window.addEventListener("keydown",this.onKeyDown,!1),window.addEventListener("keyup",this.onKeyUp,!1),this.domElement.addEventListener("gesturestart",this.onGesture),this.domElement.addEventListener("gesturechange",this.onGesture),this.domElement.addEventListener("gestureend",this.onGesture),this.domElement.addEventListener("touchend",this.onTouchEnd),this.hoverRotatePanMode!==0&&!this.useWindowEvents){let e=this.useWindowEvents?window:this.domElement;e.addEventListener("pointerleave",this.onPointerLeave),e.addEventListener("pointerenter",this.onPointerEnter)}this.pointerLeaveEvent=void 0}dispose(){this.removeEventListenersFromCamera(),this.domElement.removeEventListener("contextmenu",this.onContextMenu),this.domElement.removeEventListener("pointerdown",this.onPointerDown),this.domElement.removeEventListener("wheel",this.onMouseWheel),window.removeEventListener("keydown",this.onKeyDown,!1),window.removeEventListener("keyup",this.onKeyUp,!1),this.domElement.removeEventListener("pointermove",this.onPointerHover),window.removeEventListener("pointermove",this.onPointerHover),this.domElement.removeEventListener("gesturestart",this.onGesture),this.domElement.removeEventListener("gesturechange",this.onGesture),this.domElement.removeEventListener("gestureend",this.onGesture),this.domElement.removeEventListener("touchend",this.onTouchEnd),this.domElement.removeEventListener("pointerleave",this.onPointerLeave),this.domElement.removeEventListener("pointerenter",this.onPointerEnter),window.removeEventListener("pointerleave",this.onPointerLeave),window.removeEventListener("pointerenter",this.onPointerEnter),this.domElement.removeEventListener("pointermove",this.onPointerMove),this.domElement.removeEventListener("pointerup",this.onPointerUp)}applyLimits(e,t,r,i,n,a,o,s){this.overShoot.set(0,0);let l,u,c;e instanceof U?(l=e.x,u=e.y,this.current.set(this.target.x,this.target.y),c=!0):(l=e.theta,u=e.phi,this.current.set(oc(this.spherical.theta),oc(this.spherical.phi)),c=!1),r===0&&(this.current.x+=l,this.current.y+=u),(t===3||t===2)&&(!c&&this.isThetaFlipped?this.current.x>i&&this.current.x<0?this.overShoot.x=i-this.current.x:this.current.x<n&&this.current.x>0&&(this.overShoot.x=n-this.current.x):this.current.x>i?this.overShoot.x=i-this.current.x:this.current.x<n&&(this.overShoot.x=n-this.current.x)),(t===3||t===1)&&(this.current.y>a?this.overShoot.y=a-this.current.y:this.current.y<o&&(this.overShoot.y=o-this.current.y)),c||(this.overShoot.x=oc(this.overShoot.x),this.overShoot.y=oc(this.overShoot.y)),r!==0?(this.overRatio.copy(this.overShoot).divide(s),this.overRatio.x=Math.min(Math.abs(this.overRatio.x),1),this.overRatio.y=Math.min(Math.abs(this.overRatio.y),1),r===1&&(this.overRatio.x=xne(Math.abs(this.overRatio.x)),this.overRatio.y=xne(Math.abs(this.overRatio.y))),this.isPointerDown||r===1?r===2&&(this.overRatio.x>.9&&!this.thetaIsFree||this.overRatio.y>.9&&!this.phiIsFree)?this.isPointerDown=!1:(l*this.overShoot.x<0&&!this.thetaIsFree&&(l*=1-this.overRatio.x),u*this.overShoot.y<0&&!this.phiIsFree&&(u*=1-this.overRatio.y)):r===2&&(!c&&(this.overRatio.x>.002&&!this.thetaIsFree||this.overRatio.y>.002&&!this.phiIsFree)||c&&(Math.abs(this.overShoot.x)>2||Math.abs(this.overShoot.y)>2)?(this.thetaIsFree||(l=this.overShoot.x*.05),this.phiIsFree||(u=this.overShoot.y*.05),c?this.isPanOverShoot=!0:this.isRotateOverShoot=!0):c?this.isPanOverShoot=!1:this.isRotateOverShoot=!1)):(l+=this.overShoot.x,u+=this.overShoot.y),e instanceof U?(e.x=l,e.y=u):(this.thetaIsFree||(e.theta=l),this.phiIsFree||(e.phi=u))}setEnableDampingSpeed(e){this.enableDamping=e,this.rotateSpeed=e===!0?.2:1}stopDamping(){this.sphericalDelta.theta=0,this.sphericalDelta.phi=0}getAutoRotationAngle(){return 2*Math.PI/60/60*this.autoRotateSpeed}getZoomScale(){return Math.pow(.95,this.zoomSpeed)}rotateLeft(e){this.sphericalDelta.theta-=e}rotateUp(e){this.sphericalDelta.phi-=e}panLeft(e,t){this.panLeftV.setFromMatrixColumn(t,0),this.panLeftV.multiplyScalar(-e),this.panOffset.add(this.panLeftV)}panUp(e,t){this.panUpV.setFromMatrixColumn(t,1),this.panUpV.multiplyScalar(e),this.panOffset.add(this.panUpV)}pan(e,t){let r=this.domElement;if(r&&this.object.isPerspectiveCamera){let i=this.object.position;this.panV.copy(i).sub(this.target);let n=this.panV.length();n*=Math.tan(this.object.fov/2*Math.PI/180),this.panLeft(2*e*n/r.clientHeight,this.object.matrixWorld),this.panUp(2*t*n/r.clientHeight,this.object.matrixWorld)}else r&&this.object.isOrthographicCamera&&(this.panLeft(e*(this.object.right-this.object.left)/this.object.zoom/r.clientWidth,this.object.matrixWorld),this.panUp(t*(this.object.top-this.object.bottom)/this.object.zoom/r.clientHeight,this.object.matrixWorld));this.dispatchEvent(sMt)}dollyOut(e){this.object.isPerspectiveCamera?this.scale/=e:this.object.isOrthographicCamera&&(this.object.zoom*=e,this.zoomLimitsEnabled&&(this.object.zoom=Math.max(this.minZoom,Math.min(this.maxZoom,this.object.zoom))),this.object.updateProjectionMatrix(),this.zoomChanged=!0),this.dispatchEvent(mne)}dollyIn(e){this.object.isPerspectiveCamera?this.scale*=e:this.object.isOrthographicCamera&&(this.object.zoom/=e,this.zoomLimitsEnabled&&(this.object.zoom=Math.max(this.minZoom,Math.min(this.maxZoom,this.object.zoom))),this.object.updateProjectionMatrix(),this.zoomChanged=!0),this.dispatchEvent(mne)}zoomOut(e=this.getZoomScale()){this.dispatchEvent(g0),this.dollyOut(e),this.dispatchEvent(y0)}zoomIn(e=this.getZoomScale()){this.dispatchEvent(g0),this.dollyIn(e),this.dispatchEvent(y0)}setZoom(e){if(this.dispatchEvent(g0),this.object.isPerspectiveCamera){let t=this.initialSphericalRadius/e/this.spherical.radius;this.scale=t}else this.object.isOrthographicCamera&&(this.object.zoom=e,this.zoomLimitsEnabled&&(this.object.zoom=Math.max(this.minZoom,Math.min(this.maxZoom,this.object.zoom))),this.object.updateProjectionMatrix(),this.zoomChanged=!0);this.dispatchEvent(y0)}handleMouseDownRotate(e){this.rotateStart.set(e.clientX,e.clientY)}handleMouseDownDolly(e){this.dollyStart.set(e.clientX,e.clientY)}handleMouseDownPan(e){this.panStart.set(e.clientX,e.clientY)}handleMouseMoveRotate(e,t=1){e.movementX!==void 0?this.rotateDelta.set(e.movementX,e.movementY):(this.rotateEnd.set(e.clientX,e.clientY),this.rotateDelta.subVectors(this.rotateEnd,this.rotateStart),this.rotateStart.copy(this.rotateEnd)),this.rotateDelta.multiplyScalar(this.rotateSpeed*t).rotateAround(gne,-this.object.angleOffsetFromUp);let r=this.domElement,i=this.useWindowEvents?window.innerHeight:r.clientHeight,n=2*Math.PI*this.rotateDelta.x/i,a=2*Math.PI*this.rotateDelta.y/i;this.rotateLeft(n),this.rotateUp(a),this.update()}handleMouseMoveDolly(e){this.dollyEnd.set(e.clientX,e.clientY),this.dollyDelta.subVectors(this.dollyEnd,this.dollyStart),this.dollyDelta.y>0?this.dollyOut(this.getZoomScale()):this.dollyDelta.y<0&&this.dollyIn(this.getZoomScale()),this.dollyStart.copy(this.dollyEnd),this.update()}handleMouseMovePan(e,t=1){e.movementX!==void 0?this.panDelta.set(e.movementX,e.movementY):(this.panEnd.set(e.clientX,e.clientY),this.panDelta.subVectors(this.panEnd,this.panStart),this.panStart.copy(this.panEnd)),this.panDelta.multiplyScalar(this.panSpeed*t),this.pan(this.panDelta.x,this.panDelta.y),this.update()}handleMouseWheel(e){if(Uxt===!1&&l5(e)===!1&&jxt(e)===!0){if(this.enablePan===!1)return;this.gesture?(this.panDelta.set(-e.deltaX,-e.deltaY).multiplyScalar(this.panSpeed),this.panDelta.x=Math.min(Math.abs(this.panDelta.x),100)*(this.panDelta.x<0?-1:1),this.panDelta.y=Math.min(Math.abs(this.panDelta.y),100)*(this.panDelta.y<0?-1:1),e.altKey?this.pan(0,this.panDelta.y):e.shiftKey?this.pan(this.panDelta.x,0):this.pan(this.panDelta.x,this.panDelta.y),this.update()):(this.gesture=!0,this.isPointerDown=!0),window.clearTimeout(this.timer),this.timer=window.setTimeout(()=>{this.gesture=!1,this.isPointerDown=!1},30)}else{if(this.enableZoom===!1||this.gesture)return;e.deltaY===0?e.deltaX<0?this.dollyIn(this.getZoomScale()):e.deltaX>0&&this.dollyOut(this.getZoomScale()):e.deltaY<0?this.dollyIn(this.getZoomScale()):e.deltaY>0&&this.dollyOut(this.getZoomScale()),this.update(),this.gesture=!1,this.isPointerDown=!1}}handleTouchStartRotate(){if(jt.length===2){let e=.5*(jt[0].pageX+jt[1].pageX),t=.5*(jt[0].pageY+jt[1].pageY);this.rotateStart.set(e,t)}else this.rotateStart.set(jt[0].pageX,jt[0].pageY)}handleTouchStartPan(){if(jt.length===2){let e=.5*(jt[0].pageX+jt[1].pageX),t=.5*(jt[0].pageY+jt[1].pageY);this.panStart.set(e,t)}else this.panStart.set(jt[0].pageX,jt[0].pageY)}handleTouchStartDolly(){let e=jt[0].pageX-jt[1].pageX,t=jt[0].pageY-jt[1].pageY,r=Math.sqrt(e*e+t*t);this.dollyStart.set(0,r)}handleTouchStartDollyPan(){this.enableZoom&&this.isTouchZoom===!0&&this.handleTouchStartDolly(),this.enablePan&&this.handleTouchStartPan()}handleTouchStartDollyRotate(){this.enableZoom&&this.isTouchZoom===!0&&this.handleTouchStartDolly(),this.enableRotate&&this.handleTouchStartRotate()}handleTouchMoveRotate(e){if(jt.length===2){let r=BP(e),i=.5*(e.pageX+r.x),n=.5*(e.pageY+r.y);this.rotateEnd.set(i,n)}else{if(e.pointerId!==jt[0].pointerId)return;this.rotateEnd.set(e.pageX,e.pageY)}this.rotateDelta.subVectors(this.rotateEnd,this.rotateStart).multiplyScalar(this.rotateSpeed);let t=this.domElement;t&&(this.rotateLeft(2*Math.PI*this.rotateDelta.x/t.clientHeight),this.rotateUp(2*Math.PI*this.rotateDelta.y/t.clientHeight)),this.rotateStart.copy(this.rotateEnd)}handleTouchMovePan(e){if(jt.length===2){let t=BP(e),r=.5*(e.pageX+t.x),i=.5*(e.pageY+t.y);this.panEnd.set(r,i)}else{if(e.pointerId!==jt[0].pointerId)return;this.panEnd.set(e.pageX,e.pageY)}this.panDelta.subVectors(this.panEnd,this.panStart).multiplyScalar(this.panSpeed),this.pan(this.panDelta.x,this.panDelta.y),this.panStart.copy(this.panEnd)}handleTouchMoveDolly(e){let t=BP(e),r=e.pageX-t.x,i=e.pageY-t.y,n=Math.sqrt(r*r+i*i);this.dollyEnd.set(0,n),this.dollyDelta.set(0,Math.pow(this.dollyEnd.y/this.dollyStart.y,this.zoomSpeed)),this.dollyOut(this.dollyDelta.y),this.dollyStart.copy(this.dollyEnd)}handleTouchMoveDollyPan(e){this.enableZoom&&this.isTouchZoom===!0&&this.handleTouchMoveDolly(e),this.enablePan&&this.handleTouchMovePan(e)}handleTouchMoveDollyRotate(e){this.enableZoom&&this.isTouchZoom===!0&&this.handleTouchMoveDolly(e),this.enableRotate&&this.handleTouchMoveRotate(e)}checkRaycastLock(){var e;if(this.object.data.raycastLock){if(this.options.isPlayMode)return!1;{let t=(e=this.options)==null?void 0:e.showCameraLock;return t&&t(),!0}}else return!1}};function oc(e){let t=Math.PI*2;for(;e<=-Math.PI;)e+=t;for(;e>Math.PI;)e-=t;return e}function xne(e){return 1-Math.pow(1-e,4)}var bne=class{constructor(e,t,r,i,n,a){this.id=e,this.data=t,this.object=r,this.page=i,this.currentIntersectedObjects=[],this.actions=Hn(t,t.actions,i,n,a,r),this.target=t.target,this.triggeringObjects=[];for(let o of t.triggeringObjects){let s=i.scene.find(o);s&&this.triggeringObjects.push(s)}}isValidTriggeringObject(e){return this.target==="all"?!0:this.triggeringObjects.some(t=>t===e||t.isAncestorOf(e.uuid)||e.isAncestorOf(t.uuid))}disconnect(){_a(this.actions)}dispatch(){this.object.destroyedInAction||(this.actions.Transition.forEach(e=>{e.object.currentTransitionEvent!==this&&(e.object.currentTransitionEvent=this,e.init())}),this.object.dispatchEvent({type:"beginEvent",eventName:"Trigger"}),this.actions.Transition.forEach(e=>{e.data.runMode==="Toggle"?e.toggle():e.play()}),this.actions.SwitchCamera.forEach(e=>{e.data.runMode==="Toggle"?e.toggle():e.play()}),this.actions.Link.forEach(e=>{e.dispatch()}),this.actions.Reset.forEach(e=>{e.dispatch()}),this.actions.Create.forEach(e=>{e.dispatch()}),this.actions.Destroy.forEach(e=>{e.dispatch(!1)}),this.actions.Audio.forEach(e=>{e.dispatchBasic()}),this.actions.Particles.forEach(e=>{e.dispatchBasic()}),this.actions.Video.forEach(e=>{e.dispatchBasic()}),this.actions.SceneTransition.forEach(e=>{e.dispatch()}),this.actions.SetVariable.forEach(e=>e.checkConditions()),this.actions.SetVariable.forEach(e=>e.dispatch()),this.actions.DynamicVariablePlay.forEach(e=>e.dispatch()),this.actions.ClearLocalStorage.forEach(e=>e.dispatch()),this.actions.UserAPI.forEach(e=>e.dispatch()))}},Yr;Qxt.then(e=>Yr=e);var Pn=new U,ru=new Jt,vf=new U,XD=new Qn(0,0,0,"YXZ"),wne=new Qn(0,0,0,"XYZ"),iu=new U,ZD=new U,QD=new U(1,1,1),wg=new Jt,J5=new Ke,_ne=new Ke,fMt={type:"updateMatrix"},Ane=new Jt,KD=new Es,aB={type:"beginEvent",eventName:"Collision"},pMt={type:"beginEvent",eventName:"Trigger"};function vMt(e){if(jw.physicsEnabled(e.scene.objects))return!0;let t=!1;return e.scene.objects.traverse((r,i)=>{if(i.events){if(Array.isArray(i.events)){for(let n of i.events)if(n.data.disabled!==!0&&n.data.type==="GameControl"&&n.data.collisionEnabled){t=!0;break}}else for(let n of Object.values(i.events))if(n.disabled!==!0&&n.type==="GameControl"&&n.collisionEnabled){t=!0;break}}}),t}var V6=e=>e.states.some(t=>t.data.position!==void 0||t.data.rotation!==void 0||t.data.hiddenMatrix!==void 0||t.data.cloner!==void 0||t.data.pathSnapping!==void 0),mMt=class{constructor(e){this.eventContext=e,this.isEnabled=!1,this.gameControl=null,this.joysticks=[],this.joystickToGameControls=[],this.sharedGameControlGlobals={entitiesWithTransformAnim:[],entityToCollisionEvents:{},colliderToEntity:new Map,triggers:[],gamePads:[],createdObjects:[],nCreatedPerAction:{}},this.sensorToTriggerEvent={},this.eventManager=void 0,this.needsCollisionDetection=!1,this.initializationCounter=-1,this.rigidBodyToMesh=new Map,this.nActiveRigidBodies=0,this.collisionEvents=[],this.isExport=!1,this.processRigidBody=t=>{if(t.bodyType()!==Yr.RigidBodyType.Dynamic)return;t.isSleeping()||this.nActiveRigidBodies++;let[r,i,n]=this.rigidBodyToMesh.get(t.handle);if(Pn.copy(t.translation()).multiplyScalar(this.pixelsPerMeter),ru.copy(t.rotation()),r.matrixWorld.compose(Pn,ru,i),r.hasNonUniformScale&&r.matrixWorld.multiply(r.shearScale),r.dispatchEvent(fMt),n){let a=r.cloner;if(a&&a.objectForSample===void 0){a.matrixWorld.copy(r.matrixWorld);for(let o of a.children)o.updateMatrixWorld(!0)}for(let o of r.children)o.updateMatrixWorld(!0)}},this.accumulator=0,this.handleCollisionEvents=(t,r,i)=>{var o,s,l,u;if(i===!1)return;let n,a;if(this.sensorToTriggerEvent[t]?(n=this.sensorToTriggerEvent[t],a=this.sharedGameControlGlobals.colliderToEntity.get(r)):this.sensorToTriggerEvent[r]&&(n=this.sensorToTriggerEvent[r],a=this.sharedGameControlGlobals.colliderToEntity.get(t)),n&&a&&n.isValidTriggeringObject(a)){n.dispatch();return}for(let c=this.sharedGameControlGlobals.createdObjects.length-1;c>=0;c--){let h=this.sharedGameControlGlobals.createdObjects[c];if(h.userData.hasCollisionDestroy&&(((o=h.rigidBody)==null?void 0:o.collider(0).handle)===t||((s=h.rigidBody)==null?void 0:s.collider(0).handle)===r)){this.sharedGameControlGlobals.createdObjects.splice(c,1),h.removeFromParent(),requestAnimationFrame(()=>{var d;return(d=this.sharedGameControlGlobals.rapierWorld)==null?void 0:d.removeRigidBody(h.rigidBody)});break}}if(((l=this.gameControl)==null?void 0:l.object)!==void 0&&this.gameControl.object===this.sharedGameControlGlobals.colliderToEntity.get(t)){let c=this.sharedGameControlGlobals.colliderToEntity.get(r),h=this.sharedGameControlGlobals.entityToCollisionEvents[c.uuid];if(h===void 0)return;for(let d of h)d.data.target==="character"&&this.dispatchCollisionEvent(d,c,r)}else if(((u=this.gameControl)==null?void 0:u.object)!==void 0&&this.gameControl.object===this.sharedGameControlGlobals.colliderToEntity.get(r)){let c=this.sharedGameControlGlobals.colliderToEntity.get(t),h=this.sharedGameControlGlobals.entityToCollisionEvents[c.uuid];if(h===void 0)return;for(let d of h)d.data.target==="character"&&this.dispatchCollisionEvent(d,c,t)}else{let c=this.sharedGameControlGlobals.colliderToEntity.get(t),h=this.sharedGameControlGlobals.entityToCollisionEvents[c.uuid];if(h!==void 0)for(let p of h)p.data.target==="scene"&&this.dispatchCollisionEvent(p,c,t);let d=this.sharedGameControlGlobals.colliderToEntity.get(r),f=this.sharedGameControlGlobals.entityToCollisionEvents[d==null?void 0:d.uuid];if(f!==void 0)for(let p of f)p.data.target==="scene"&&this.dispatchCollisionEvent(p,d,r)}},this.isExport=e.isExport,this.sharedAssets=e.sharedAssets,this.renderer=e.renderer,this.requestRender=e.requestRender,this.domElement=this.renderer.domElement,this.pixelsPerMeter=w2e,this.gravity=this.page.data.globalPhysics.gravity}get page(){return this.eventContext.page}attachVRControllers(e){e.forEach(t=>{t.addEventListener("connected",r=>{"gamepad"in r.data&&"axes"in r.data.gamepad&&this.sharedGameControlGlobals.gamePads.push(r.data.gamepad)})})}markIsDestroyTarget(){this.page.traverseVisibleEntity(e=>{var r,i;let t=e.dataPatched;for(let n of t.events){if(n.data.disabled===!0)continue;let a=(i=(r=n.data.actions)==null?void 0:r.find(o=>o.data.type==="Destroy"))==null?void 0:i.data;if(a)for(let o of a.objects){let s=this.page.scene.find(o);s&&(s.userData.hasDestroy=!0)}}})}markIsDragObject(){this.page.traverseVisibleEntity(e=>{let t=e.dataPatched;for(let r of t.events)if(!(r.data.disabled===!0||r.data.type!=="DragDrop"))for(let i of r.data.objects){let n=this.page.scene.find(i);n&&(n.userData.hasDrag=!0)}})}initBVH(){let e=[];if(this.page.traverseChildren(t=>{var u,c;let r,i=t instanceof XA,n=t instanceof QA;if(t instanceof yu||i||n)return;t instanceof yo?r=t.object:r=t;let a=r.dataPatched;if(((u=a.physics)==null?void 0:u.enabled)==="visibility"?!a.visible:!((c=a.physics)!=null&&c.enabled))return!0;let o=t.geometry,s=r.userData.hasDestroy===!0,l=r.userData.hasDrag===!0;if(V6(a)||s||l||r.dataPatched.events.some(h=>h.data.disabled!==!0&&(h.data.type==="GameControl"||h.data.type==="Follow")))return t.updateMatrixWorldSVD(),this.addBoundsTree(t),!0;o&&e.push(Gh(o,t.matrixWorld))}),e.length>0){let t=nv(e,!1);this.sharedGameControlGlobals.staticMeshBVH=new Ib(t)}}addRigidBody(e,t,r){let i=[],n="geometry"in e?e.geometry:void 0,a=t.dataPatched;if((n==null?void 0:n.getAttribute("position"))!==void 0&&i.push(Gh(n,e.shearScale)),a.physics.fusedBody){let o=this.gatherChildrenGeom(e,i);e.traverseObject(o),e.children.forEach(l=>l.updateMatrixWorld(!0));let s=e.cloner;s&&s.objectForSample===void 0&&a.physics.rigidBody==="dynamic"&&(s.traverseObject(o),s.children.forEach(l=>l.updateMatrixWorld(!0)))}if(i.length>0){let o,s=!r.fromCreate&&a.physics.rigidBody==="dynamic"||r.fromCreate&&r.dynamic;s?(o=Yr.RigidBodyDesc.dynamic(),o.setLinearDamping(a.physics.damping).setAngularDamping(a.physics.damping).setAdditionalMass(1e-9).setGravityScale(a.physics.gravityScale).enabledRotations(...a.physics.enabledRotation).enabledTranslations(...a.physics.enabledTranslation)):(r.hasTransformAnim||r.hasFollow||r.hasDrag)&&!r.fromCreate?(o=Yr.RigidBodyDesc.kinematicPositionBased(),this.sharedGameControlGlobals.entitiesWithTransformAnim.push(e)):o=Yr.RigidBodyDesc.fixed();let l=nv(i);(e.hasNonUniformScale?e.matrixWorldRigid:e.matrixWorld).decompose(Pn,ru,vf),e.position0=Pn.clone().divideScalar(this.pixelsPerMeter),e.rotation0=ru.clone(),Pn.divideScalar(this.pixelsPerMeter),o.setTranslation(Pn.x,Pn.y,Pn.z).setRotation(ru),n?l==null||l.scale(1/this.pixelsPerMeter,1/this.pixelsPerMeter,1/this.pixelsPerMeter):l==null||l.scale(vf.x/this.pixelsPerMeter,vf.y/this.pixelsPerMeter,vf.z/this.pixelsPerMeter);let u=this.sharedGameControlGlobals.rapierWorld.createRigidBody(o);s&&this.rigidBodyToMesh.set(u.handle,[e,vf.clone(),a.physics.fusedBody]);let c=!(a.geometry===void 0||a.geometry.type==="SubdivGeometry"||a.geometry.type==="NonParametricGeometry"||a.geometry.type==="BooleanGeometry"||a.geometry.type==="VectorGeometry"||a.geometry.type==="StarGeometry"||a.geometry.type==="RectangleGeometry"||a.geometry.type==="EllipseGeometry"||a.geometry.type==="TriangleGeometry"||a.geometry.type==="TorusGeometry"||a.geometry.type==="HelixGeometry");try{this.addCollider(u,a.physics,l,t,c)}catch{try{this.addCollider(u,a.physics,l,t,!1)}catch(h){console.error(h)}}e.rigidBody=u}}addBoundsTree(e){var r,i;let t=[];if(((r=e.geometry)==null?void 0:r.getAttribute("position"))!==void 0&&((i=e.geometry)==null?void 0:i.getAttribute("position").count)>0&&t.push(Gh(e.geometry,e.shearScale)),e.traverseObject(this.gatherChildrenGeom(e,t)),e.children.forEach(n=>n.updateMatrixWorld(!0)),t.length>0){let n=nv(t,!1);e.bvhGeometry=n,n.getAttribute("position").count>0&&(e.bvhGeometry.boundsTree=new Ib(n),this.sharedGameControlGlobals.entitiesWithTransformAnim.push(e))}}addCollider(e,t,r,i,n=!0){var s,l;if((r==null?void 0:r.getAttribute("position").count)===0||((s=r==null?void 0:r.getIndex())==null?void 0:s.count)===0)return;let a;r&&(t.colliderType==="trimesh"?a=Yr.ColliderDesc.trimesh(r.getAttribute("position").array,r.getIndex().array):a=Yr.ColliderDesc.convexMesh(r.getAttribute("position").array,n?r.getIndex().array:void 0)),a.setFrictionCombineRule(Yr.CoefficientCombineRule.Average).setRestitutionCombineRule(Yr.CoefficientCombineRule.Average).setDensity(t.density).setFriction(t.friction).setRestitution(t.restitution);let o=this.sharedGameControlGlobals.rapierWorld.createCollider(a,e);this.sharedGameControlGlobals.colliderToEntity.set(o.handle,i),(l=this.sharedGameControlGlobals.entityToCollisionEvents[i.uuid])!=null&&l.some(u=>u.target==="scene")&&o.setActiveEvents(Yr.ActiveEvents.COLLISION_EVENTS)}gatherChildrenGeom(e,t){return(r,i)=>{var s;if(i===0)return;let n;if(r instanceof yu)if(r.objectForSample){if(r.objectForSample.dataPatched.physics.fusedBody)return;n=r.object}else return r.object.dataPatched.physics.fusedBody===!0&&r.object.dataPatched.physics.rigidBody==="dynamic"?!0:void 0;else if(r instanceof yo)n=r.object;else if(n=r,(s=n.dataPatched.cloner)==null?void 0:s.hideBase)return!0;let a=n.dataPatched;if(a.physics.enabled==="visibility"?!a.visible:!a.physics.enabled)return!0;i===1?e.hasNonUniformScale?r.matrixWorld.multiplyMatrices(e.shearScale,r.hiddenMatrix):r.matrixWorld.copy(r.hiddenMatrix):r.matrixWorld.multiplyMatrices(r.parent.matrixWorld,r.hiddenMatrix),r.matrixWorld.multiply(r.matrix);let o=r.geometry;(o==null?void 0:o.getAttribute("position"))!==void 0&&t.push(Gh(o,r.matrixWorld))}}activate(e){var d,f;if(this.isEnabled)return;this.isEnabled=!0,this.eventManager=e,this.usePhysics=this.page.data.globalPhysics.usePhysics;let t=this.page.playCamera,r=!1,i=5,n=8,a=9,o="drag",s=this.page.data.publish.gameControlObject,l=s!==null?this.page.find(s):null,u=null;if(l)for(let p of l.data.events){if(p.data.disabled||p.data.type!=="GameControl")continue;let v=l;for(;this.usePhysics&&((d=v=v.parent)==null?void 0:d.parent)!==null;)(f=v.data.physics)==null||f.fusedBody;p.data.collisionEnabled&&(this.needsCollisionDetection=!0),u===null&&(u=p.data)}if(this.page.traverseEntity(p=>{for(let v of p.dataPatched.events)if(v.data.disabled===!1&&v.data.type==="Trigger")return this.needsCollisionDetection=!0,!0}),l&&u&&(l.data.visible===!0||l.data.physics.enabled===!0)){r=r||u.camera===t.uuid||l.uuid===t.uuid;let p=new _2e(l,this.renderer.domElement,u,this.eventContext.page.data.globalPhysics,this,l.uuid!==t.uuid&&u.camera===t.uuid,t,this.page,this.sharedAssets);this.gameControl=p,i=u.joystickPosLoc,n=u.joystickRotLoc,a=u.jumpTouchButtonLoc,o=u.rotByTouch,Us&&u.touchControl&&(this.joystickToGameControls[i]="pos",u.moveMode==="walk"&&(this.joystickToGameControls[a]="jmp"),o==="joystick"&&(this.joystickToGameControls[n]="rot"))}if(this.gameControl&&this.gameControl.data.navmesh.enabled){let p=this.gameControl.data;if(!this.navigationMeshWrapper){this.navigationMeshWrapper=new iMt(this.usePhysics,this.isExport);let v;p.collider.type==="sphere"?v=p.collider.radius*2:v=p.collider.height,v=Math.floor(v/p.navmesh.ch-1),this.navigationMeshWrapper.init({...p.navmesh,walkableHeight:v},this.gameControl,this.eventContext)}}if(r===!1){let{enableRotate:p,enablePan:v,enableZoom:m,autoRotate:g,hoverRotatePanMode:y}=this.eventManager.publish.orbitControls;(p||v||m||g||y!==0)&&(this.orbitControls=new D2e(t,this.renderer.domElement,{isExport:this.isExport,isPlayMode:!0}),this.orbitControls.addEventListener("change",this.requestRender),this.orbitControls.addEventListener("end",this.requestRender),this.orbitControls.addEventListener("start",this.requestRender),this.orbitControls.fromJSON(this.eventManager.publish.orbitControls,this.eventManager.publish.mouseEventTarget),this.orbitControls.useKeyEvents=!1,this.orbitControls.addEventListenersToCamera(),this.orbitControls.connect(),this.orbitControls.update())}let c=this.renderer.domElement.width/this.renderer.getPixelRatio(),h=this.renderer.domElement.height/this.renderer.getPixelRatio();this.joystickToGameControls.forEach((p,v)=>{let m=document.body.appendChild(document.createElement("div")),[g,y,x]=this.eventManager.eventContext.publish.joystickSizeAndXYOffset[v],b=(c-5*g)/4+g,_={},w=p==="jmp",S=w?0:g;v<10?(v<5?_.top=S/2:_.bottom=S/2,_.left=S/2+v%5*b):v===10?(_.left=S/2,_.top=h/2):(_.right=S/2,_.top=h/2),_.top?_.top-=y[1]:_.bottom+=y[1],_.left?_.left+=y[0]:_.right-=y[0];for(let E in _)_[E]+="px";if(w){let E=m.appendChild(document.createElement("div"));Object.assign(E.style,_,{position:"absolute",width:g+"px",height:g+"px",backgroundColor:`rgba(255,255,255,${x==="show"?.4:0})`,zIndex:"9999",borderRadius:g+"px",border:x==="show"?"solid 2px rgba(0, 0, 0, .1)":"none",display:"flex",alignItems:"center",justifyContent:"center",touchAction:"none"});let T=g/16*16*.4;x==="show"&&(E.innerHTML=`
						<svg width="${T}" height="${g*.4}" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
							<path d="M2 10L8 4L14 10" stroke="black" stroke-opacity="40%" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
						</svg>
					`),E.addEventListener("pointerdown",()=>{this.gameControl.movementState.jump=1,this.requestRender()}),E.addEventListener("touchend",L=>L.preventDefault()),this.joysticks[v]=[void 0,m];return}let A={zone:m,mode:"static",position:_,size:g};x==="hide"&&(A.restOpacity=0);let M=ECt.create(A);M.on("move",(E,T)=>{let L=this.gameControl;p==="pos"?T.force<.2?L.moveForce=0:(L.movementState.movePosZ=Math.sin(-T.angle.radian),L.movementState.movePosX=Math.cos(-T.angle.radian),T.force>1.2?L.movementState.run=1:L.movementState.run=0,T.force<.3?L.moveForce=(T.force-.2)/.1:L.moveForce=1):p==="rot"&&(T.force<.2?L.rotForce=0:(L.movementState.rotPosX=T.vector.y,L.movementState.rotPosY=-T.vector.x,T.force<.3?L.rotForce=(T.force-.2)/.1:L.rotForce=1)),this.requestRender()}),M.on("end",(E,T)=>{let L=this.gameControl;p==="pos"?(L.movementState.movePosZ=0,L.movementState.movePosX=0,L.moveForce=1):p==="rot"&&(L.movementState.rotPosX=0,L.movementState.rotPosY=0,L.rotForce=1)}),this.joysticks[v]=[M,m]}),this.markIsDestroyTarget(),this.markIsDragObject(),this.rebuildBVH(),this.initializationCounter++,window.setTimeout(()=>{this.collisionEvents.forEach(p=>p.initialDisabled=!1)},80)}initPhysics(){var o;(o=this.sharedGameControlGlobals.rapierWorld)==null||o.free(),this.sharedGameControlGlobals.rapierWorld=new Yr.World(new Yr.Vector3(0,this.gravity,0)),this.events=new Yr.EventQueue(!0);let e=[],t=[];if(this.page.traverseChildren(s=>{var g,y,x,b;let l;if(s instanceof yu)if(s.objectForSample){if(s.objectForSample.dataPatched.physics.fusedBody)return;l=s.object}else return s.object.dataPatched.physics.fusedBody===!0&&s.object.dataPatched.physics.rigidBody==="dynamic"?!0:void 0;else if(s instanceof yo)l=s.object;else{if(s instanceof QA||s instanceof XA)return;if(l=s,((g=l.dataPatched.cloner)==null?void 0:g.disabled)===!1&&((y=l.dataPatched.cloner)==null?void 0:y.hideBase)&&((x=l.dataPatched.physics)==null?void 0:x.fusedBody)!==!0)return!0}let u=l.dataPatched,c;for(let _ of u.events)_.data.disabled!==!0&&_.data.type==="GameControl"&&(c=_.data);if(!u.physics||(u.physics.enabled==="visibility"?!u.visible:!u.physics.enabled))return!0;s.updateMatrixWorldSVD();let h=V6(u),d=!1,f=l.userData.hasDestroy,p=l.userData.hasDrag,v=!1;for(let _ of u.events)if(_.data.disabled!==!0){if(_.data.type==="Collision"){d=!0;let w=new qEt(_.id,_.data,l,this.page,this.sharedAssets,this.eventManager);w.initialDisabled=!0,this.collisionEvents.push(w),this.sharedGameControlGlobals.entityToCollisionEvents[l.uuid]&&this.sharedGameControlGlobals.entityToCollisionEvents[l.uuid].every(S=>S.id!==_.id)?this.sharedGameControlGlobals.entityToCollisionEvents[l.uuid].push(w):this.sharedGameControlGlobals.entityToCollisionEvents[l.uuid]=[w]}else if(_.data.type==="Follow"){v=!0;let w=_.data.target;s.traverseVisible(S=>{S.userData.isFollowingObj=w})}}u.physics.rigidBody==="dynamic"&&u.physics.fusedBody===!1&&(s.matrixWorldFusedFalse=s.matrixWorld.clone());let m=s.geometry;if(c!==void 0){let _=Yr.RigidBodyDesc.kinematicPositionBased();(s.hasNonUniformScale?s.matrixWorldRigid:s.matrixWorld).decompose(Pn,ru,vf),s.position0=Pn.clone().divideScalar(this.pixelsPerMeter),s.rotation0=ru.clone(),Pn.divideScalar(this.pixelsPerMeter),_.setTranslation(Pn.x,Pn.y,Pn.z).setRotation(ru);let w=this.sharedGameControlGlobals.rapierWorld.createRigidBody(_);s.rigidBody=w;let S;c.collider.type==="sphere"?S=Yr.ColliderDesc.ball(c.collider.radius/this.pixelsPerMeter):c.collider.type==="capsule"?S=Yr.ColliderDesc.capsule((c.collider.height/2-c.collider.radius)/this.pixelsPerMeter,c.collider.radius/this.pixelsPerMeter):S=Yr.ColliderDesc.cuboid(c.collider.width/this.pixelsPerMeter/2,c.collider.height/this.pixelsPerMeter/2,c.collider.depth/this.pixelsPerMeter/2),S.setFrictionCombineRule(Yr.CoefficientCombineRule.Average).setRestitutionCombineRule(Yr.CoefficientCombineRule.Average).setDensity(u.physics.density).setFriction(u.physics.friction).setRestitution(u.physics.restitution);let A=this.sharedGameControlGlobals.rapierWorld.createCollider(S,w);this.sharedGameControlGlobals.colliderToEntity.set(A.handle,l),Pn.fromArray(c.collider.position).multiply(vf.setFromMatrixScale(l.matrixWorld)).divideScalar(this.pixelsPerMeter),A.setTranslationWrtParent(Pn);let M=new Jt().setFromEuler(new Qn().setFromVector3(new U().fromArray(c.collider.rotation)));A.setRotationWrtParent(M),A.setActiveEvents(Yr.ActiveEvents.COLLISION_EVENTS),this.generateSensorColliderDescs(l,!0)}else u.physics.rigidBody==="dynamic"||h||v||f||p||d?(this.addRigidBody(s,l,{hasFollow:v,hasTransformAnim:h,hasDrag:p}),this.generateSensorColliderDescs(l,u.physics.fusedBody)):(m&&e.push(Gh(m,s.matrixWorld)),u.physics.fusedBody&&s.traverseObject((_,w)=>{var E;if(w===0)return;let S;if(_ instanceof yu)if(_.objectForSample){if(_.objectForSample.dataPatched.physics.fusedBody)return;S=_.object}else return _.object.dataPatched.physics.fusedBody===!0&&_.object.dataPatched.physics.rigidBody==="dynamic"?!0:void 0;else{if(_ instanceof QA||_ instanceof XA)return;if(_ instanceof yo)S=_.object;else if(S=_,(E=S.dataPatched.cloner)==null?void 0:E.hideBase)return!0}let A=S.dataPatched;if(A.physics.enabled==="visibility"?!A.visible:!A.physics.enabled)return!0;let M=_.geometry;(M==null?void 0:M.getAttribute("position"))!==void 0&&e.push(Gh(M,_.matrixWorld))}),this.generateSensorColliderDescs(l,u.physics.fusedBody,t));if(((b=u.physics)==null?void 0:b.fusedBody)===!0||c)return!0}),e.length===0)return;let r=nv(e);r.scale(1/this.pixelsPerMeter,1/this.pixelsPerMeter,1/this.pixelsPerMeter);let i=Yr.RigidBodyDesc.fixed(),n=this.sharedGameControlGlobals.rapierWorld.createRigidBody(i),a=Yr.ColliderDesc.trimesh(r.getAttribute("position").array,r.getIndex().array).setFrictionCombineRule(Yr.CoefficientCombineRule.Multiply).setRestitutionCombineRule(Yr.CoefficientCombineRule.Multiply).setFriction(1).setRestitution(1);this.sharedGameControlGlobals.rapierWorld.createCollider(a,n);for(let[s,l]of t){let u=this.sharedGameControlGlobals.rapierWorld.createCollider(s,n);this.sensorToTriggerEvent[u.handle]=l}}updatePositions(){return this.nActiveRigidBodies=0,this.sharedGameControlGlobals.rapierWorld.forEachRigidBody(this.processRigidBody),this.nActiveRigidBodies>0}rebuildBVH(){this.usePhysics?this.initPhysics():(this.page.traverseEntity(e=>{for(let t of e.dataPatched.events)if(t.data.type==="Trigger"&&t.data.disabled!==!0){let r=new bne(t.id,t.data,e,this.page,this.sharedAssets,this.eventManager),i=new Ke().compose(iu.fromArray(t.data.position),wg.setFromEuler(wne.fromArray(t.data.rotation)),QD);if(t.data.triggerZone==="box"){let n=new Cn;n.min.fromArray(t.data.size).multiplyScalar(-.5),n.max.fromArray(t.data.size).multiplyScalar(.5),this.sharedGameControlGlobals.triggers.push([n,i,e,r])}else this.sharedGameControlGlobals.triggers.push([t.data.radius,i,e,r])}}),this.needsCollisionDetection&&this.initBVH())}disconnectEvents(){this.collisionEvents.forEach(e=>e.disconnect()),this.sharedGameControlGlobals.triggers.forEach(e=>e[3].disconnect()),this.sharedGameControlGlobals.triggers.length=0}deactivate(){var e,t,r,i;if(this.isEnabled){this.isEnabled=!1,this.page.traverse(n=>{let a=n;a.matrixWorldFusedFalse&&(a.matrixWorldFusedFalse=void 0),a.rigidBody&&(a.rigidBody=void 0),a.position0&&(a.position0=void 0),a.rotation0&&(a.rotation0=void 0)}),(e=this.sharedGameControlGlobals.rapierWorld)==null||e.free(),this.sharedGameControlGlobals.rapierWorld=void 0,this.sharedGameControlGlobals.staticMeshBVH=void 0,this.accumulator=0,this.sharedGameControlGlobals.entitiesWithTransformAnim=[],this.disconnectEvents(),(t=this.gameControl)==null||t.reset(),(r=this.gameControl)==null||r.dispose(),this.gameControl=null,this.initializationCounter=-1,this.joysticks.forEach(([n,a])=>{n==null||n.destroy(),a.remove()}),this.joystickToGameControls=[],this.joysticks=[],this.orbitControls&&(this.orbitControls.dispose(),this.orbitControls=void 0),(i=this.navigationMeshWrapper)==null||i.dispose(),this.navigationMeshWrapper=void 0;for(let n of Object.values(this.sharedGameControlGlobals.entityToCollisionEvents))n.forEach(a=>a.disconnect());this.sharedGameControlGlobals.entityToCollisionEvents={},this.page.updateMatrixWorld(!0)}}update(e,t,r){if(!this.isEnabled)return!0;let i=!0;if(this.orbitControls!==void 0&&this.orbitControls.needsUpdate&&(i=!this.orbitControls.update()),this.initializationCounter>=0&&this.initializationCounter<2?(this.initializationCounter++,i=!1):this.initializationCounter===2&&this.gameControl&&(i=!this.gameControl.update(e,t,r)&&i),this.usePhysics===!1&&this.checkTrigger(),this.usePhysics){let n=.016666666666666666;if(e===0)i=this.stepPhysics()&&i;else{let a=e/1e3;a<n&&a>n*.55&&(a=n),this.accumulator+=a;let o=performance.now(),s=0,l=6;for(;this.accumulator>=n&&s<l&&(i=this.stepPhysics()&&i,this.accumulator-=n,s++,!(performance.now()-o>n*1e3)););this.accumulator=this.accumulator%n}}return i}stepPhysics(){var e;for(let t of this.sharedGameControlGlobals.entitiesWithTransformAnim){(t.hasNonUniformScale?t.matrixWorldRigid:t.matrixWorld).decompose(Pn,ru,vf),XD.setFromQuaternion(ru);let r=t;r.prevR===void 0?(r.prevR=XD.clone(),r.prevT=Pn.clone()):(r.prevR.copy(XD),r.prevT.copy(Pn)),t.rigidBody&&(t.rigidBody.setNextKinematicTranslation(Pn.divideScalar(this.pixelsPerMeter)),t.rigidBody.setNextKinematicRotation(ru))}return this.sharedGameControlGlobals.rapierWorld.step(this.events),(e=this.events)==null||e.drainCollisionEvents(this.handleCollisionEvents),!this.updatePositions()}dispatchCollisionEvent(e,t,r){var a;let i=((a=this.sharedGameControlGlobals.rapierWorld)==null?void 0:a.getCollider(r))._parent,n;if(t.cloner){for(let o of t.cloner.children)if(o.rigidBody===i){n=o;break}}e.dispatch(n),t.dispatchEvent(aB)}updateUseWindowEvents(e){var t;(t=this.orbitControls)==null||t.updateUseWindowEvents(e)}generateSensorColliderDescs(e,t,r){let i=_ne.copy(e.matrixWorld).invert();e.traverseEntity((n,a)=>{if(t===!1&&a===1)return!0;for(let o of n.dataPatched.events)if(o.data.type==="Trigger"&&o.data.disabled!==!0){let s=new bne(o.id,o.data,n,this.page,this.sharedAssets,this.eventManager),l;if(o.data.triggerZone==="box"?l=Yr.ColliderDesc.cuboid(...o.data.size.map(u=>u/(2*this.pixelsPerMeter))):l=Yr.ColliderDesc.ball(o.data.radius/this.pixelsPerMeter),l.setDensity(0).setSensor(!0).setActiveEvents(Yr.ActiveEvents.COLLISION_EVENTS),iu.fromArray(o.data.position),wg.setFromEuler(wne.fromArray(o.data.rotation)),J5.compose(iu,wg,QD).premultiply(n.matrixWorld),r?(J5.decompose(iu,wg,ZD),l.setActiveCollisionTypes(Yr.ActiveCollisionTypes.KINEMATIC_FIXED|Yr.ActiveCollisionTypes.DYNAMIC_FIXED)):(J5.premultiply(i).decompose(iu,wg,ZD),e.rigidBody.bodyType()===Yr.RigidBodyType.Dynamic||(e.rigidBody.bodyType()===Yr.RigidBodyType.Fixed?l.setActiveCollisionTypes(Yr.ActiveCollisionTypes.KINEMATIC_FIXED|Yr.ActiveCollisionTypes.DYNAMIC_FIXED):l.setActiveCollisionTypes(Yr.ActiveCollisionTypes.KINEMATIC_KINEMATIC|Yr.ActiveCollisionTypes.DYNAMIC_KINEMATIC))),iu.divideScalar(this.pixelsPerMeter),l.setTranslation(iu.x,iu.y,iu.z),l.setRotation(wg),r)r.push([l,s]);else{let u=this.sharedGameControlGlobals.rapierWorld.createCollider(l,e.rigidBody);this.sensorToTriggerEvent[u.handle]=s}}})}checkTrigger(){let e;for(let t=0;t<this.sharedGameControlGlobals.triggers.length;t++){let[r,i,n,a]=this.sharedGameControlGlobals.triggers[t];for(let o=0;o<this.sharedGameControlGlobals.entitiesWithTransformAnim.length;o++){let s=this.sharedGameControlGlobals.entitiesWithTransformAnim[o];if(n===s||a.isValidTriggeringObject(Gr.is(s)?s:s.object)===!1)continue;let l=_ne.copy(n.matrixWorld).decompose(iu,Ane,ZD).compose(iu,Ane,QD).multiply(i),u=J5.copy(s.matrixWorld).invert().multiply(l);r instanceof Cn?e=s.bvhGeometry.boundsTree.intersectsBox(r,u):(KD.radius=r,KD.center.setFromMatrixPosition(u),e=s.bvhGeometry.boundsTree.intersectsSphere(KD)),e?a.currentIntersectedObjects.indexOf(s)===-1&&(a.currentIntersectedObjects.push(s),a.dispatch(),n.dispatchEvent(pMt)):a.currentIntersectedObjects=a.currentIntersectedObjects.filter(c=>c!==s)}}}};function gMt(e){let t=this._clip.duration,r=this._clip.start??0,i=this.loop,n=this.time+e,a=this._loopCount,o=i===$F;if(e===0)return a===-1?n:o&&(a&1)===1?t-(n-r):n;if(i===Nve){a===-1&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(n>=t)n=t;else if(n<0)n=0;else{this.time=n;break e}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=n,this._mixer.dispatchEvent({type:"finished",action:this,direction:e<0?-1:1})}}else{if(a===-1&&(e>=0?(a=0,this._setEndings(!0,this.repetitions===0,o)):this._setEndings(this.repetitions===0,!0,o)),n>=t||n<r){let s=Math.floor((n-r)/(t-r));n-=(t-r)*s,a+=Math.abs(s);let l=this.repetitions-a;if(l<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,o||(n=e>0?t:r,this.repetitions===1&&(n=t)),this.time=n,this._mixer.dispatchEvent({type:"finished",action:this,direction:e>0?1:-1});else{if(l===1){let u=e<0;this._setEndings(u,!u,o)}else this._setEndings(!1,!1,o);this._loopCount=a,this.time=n,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:s})}}else this.time=n;if(o&&(a&1)===1)return t-(n-r)}return n}var Sne=!1,yMt=class{constructor(e,t,r,i){this.scene=e,this.requestRender=t,this.updateDisplayProgress=r,this.animationInspectorState=i,this.clipIdToAction={},this.activeClip=null,this.needsUpdate=!1,this.addClip=n=>{n.data.type==="Empty"&&n.data.animations&&n.data.animations.forEach((a,o)=>{let s=a[0]+"/";if(Array.isArray(n.identity)?s+=n.identity[0]:s+=n.uuid,this.clipIdToAction[s])return;let l=mR.parse(JSON.parse(a[2]));n.animations[o]=l;let u=this.mixer.clipAction(l,n);Sne===!1&&(Object.getPrototypeOf(u)._updateTime=gMt,Sne=!0),u.clampWhenFinished=!0,this.clipIdToAction[s]=u})},this.mixer=new spt(e),this.scene.traverseEntity(this.addClip)}deleteClip(e,t){let r=this.scene.find(t);if(!r)return;let i=r.animations.find(a=>a.uuid===e);if(!i)return;let n=this.clipIdToAction[e];!n||(n.stop(),this.mixer.uncacheClip(i),delete this.clipIdToAction[e],r.animations=r.animations.filter(a=>a.uuid!==e))}get isPlaying(){return Object.values(this.clipIdToAction).some(e=>e.isRunning())}playFromInspector(e){this.mixer.stopAllAction();let t=this.clipIdToAction[e];!t||(t.play(),this.activeClip=t.getClip(),this.requestRender())}onExitPlayMode(){Object.values(this.clipIdToAction).forEach(e=>{e.repetitions=1/0,e.loop=Vve}),this.mixer.stopAllAction(),this.requestRender()}play(e){let t=e.clipId+"/"+e.object,r=this.clipIdToAction[t];if(r)return e&&(e.repeat>=0&&(r.repetitions=e.repeat+1),e.direction==="pingpong"&&e.repeat!==0&&(r.loop=$F)),r.play(),r.paused=!1,this.requestRender(),r}resumeFromInspector(e){let t=this.clipIdToAction[e];!t||(t.play(),t.paused=!1,this.requestRender())}pauseFromInspector(e){let t=this.clipIdToAction[e];!t||(t.paused=!0)}stop(){this.mixer.stopAllAction(),this.requestRender()}update(e){var t;if(this.needsUpdate)this.needsUpdate=!1;else if(this.isPlaying===!1||(t=this.animationInspectorState)!=null&&t.isScrubbing)return;this.mixer.update(e/1e3),this.activeClip&&this.updateDisplayProgress(Math.round(this.mixer.time/this.activeClip.duration*(this.maxFrames-1)%(this.maxFrames-1))),this.requestRender()}get maxFrames(){return f2e(this.activeClip??void 0)}setProgressFromInspector(e,t){if(!this.clipIdToAction[t])return;this.activeClip!==this.clipIdToAction[t].getClip()&&this.playFromInspector(t);let r=this.clipIdToAction[t].paused;this.clipIdToAction[t].paused=!1,this.mixer.setTime(Math.min(e/(this.maxFrames-1),.9999)*this.activeClip.duration),this.requestRender(),r&&(this.clipIdToAction[t].paused=!0)}},JD=new WeakMap,xMt=class extends U4{constructor(e){super(e),this.decoderPath="",this.decoderConfig={},this.decoderBinary=null,this.decoderPending=null,this.workerLimit=4,this.workerPool=[],this.workerNextTaskID=1,this.workerSourceURL="",this.defaultAttributeIDs={position:"POSITION",normal:"NORMAL",color:"COLOR",uv:"TEX_COORD"},this.defaultAttributeTypes={position:"Float32Array",normal:"Float32Array",color:"Float32Array",uv:"Float32Array"}}setDecoderPath(e){return this.decoderPath=e,this}setDecoderConfig(e){return this.decoderConfig=e,this}setWorkerLimit(e){return this.workerLimit=e,this}load(e,t,r,i){let n=new gR(this.manager);n.setPath(this.path),n.setResponseType("arraybuffer"),n.setRequestHeader(this.requestHeader),n.setWithCredentials(this.withCredentials),n.load(e,a=>{this.decodeDracoFile(a,t).catch(i)},r,i)}decodeDracoFile(e,t,r,i){let n={attributeIDs:r||this.defaultAttributeIDs,attributeTypes:i||this.defaultAttributeTypes,useUniqueIDs:!!r};return this.decodeGeometry(e,n).then(t)}decodeGeometry(e,t){let r=JSON.stringify(t);if(JD.has(e)){let s=JD.get(e);if(s.key===r)return s.promise;if(e.byteLength===0)throw new Error("THREE.DRACOLoader: Unable to re-decode a buffer with different settings. Buffer has already been transferred.")}let i,n=this.workerNextTaskID++,a=e.byteLength,o=this._getWorker(n,a).then(s=>(i=s,new Promise((l,u)=>{i._callbacks[n]={resolve:l,reject:u},i.postMessage({type:"decode",id:n,taskConfig:t,buffer:e},[e])}))).then(s=>this._createGeometry(s.geometry));return o.catch(()=>!0).then(()=>{i&&n&&this._releaseTask(i,n)}),JD.set(e,{key:r,promise:o}),o}_createGeometry(e){let t=new It;e.index&&t.setIndex(new Zt(e.index.array,1));for(let r=0;r<e.attributes.length;r++){let i=e.attributes[r],n=i.name,a=i.array,o=i.itemSize;t.setAttribute(n,new Zt(a,o))}return t}_loadLibrary(e,t){let r=new gR(this.manager);return r.setPath(this.decoderPath),r.setResponseType(t),r.setWithCredentials(this.withCredentials),new Promise((i,n)=>{r.load(e,i,void 0,n)})}preload(){return this._initDecoder(),this}_initDecoder(){if(this.decoderPending)return this.decoderPending;let e=typeof WebAssembly!="object"||this.decoderConfig.type==="js",t=[];return e?t.push(this._loadLibrary("draco_decoder.js","text")):(t.push(this._loadLibrary("draco_wasm_wrapper.js","text")),t.push(this._loadLibrary("draco_decoder.wasm","arraybuffer"))),this.decoderPending=Promise.all(t).then(r=>{let i=r[0];e||(this.decoderConfig.wasmBinary=r[1]);let n=bMt.toString(),a=["/* draco decoder */",i,"","/* worker */",n.substring(n.indexOf("{")+1,n.lastIndexOf("}"))].join(`
`);this.workerSourceURL=URL.createObjectURL(new Blob([a]))}),this.decoderPending}_getWorker(e,t){return this._initDecoder().then(()=>{if(this.workerPool.length<this.workerLimit){let i=new Worker(this.workerSourceURL);i._callbacks={},i._taskCosts={},i._taskLoad=0,i.postMessage({type:"init",decoderConfig:this.decoderConfig}),i.onmessage=function(n){let a=n.data;switch(a.type){case"decode":i._callbacks[a.id].resolve(a);break;case"error":i._callbacks[a.id].reject(a);break;default:console.error('THREE.DRACOLoader: Unexpected message, "'+a.type+'"')}},this.workerPool.push(i)}else this.workerPool.sort(function(i,n){return i._taskLoad>n._taskLoad?-1:1});let r=this.workerPool[this.workerPool.length-1];return r._taskCosts[e]=t,r._taskLoad+=t,r})}_releaseTask(e,t){e._taskLoad-=e._taskCosts[t],delete e._callbacks[t],delete e._taskCosts[t]}debug(){console.log("Task load: ",this.workerPool.map(e=>e._taskLoad))}dispose(){for(let e=0;e<this.workerPool.length;++e)this.workerPool[e].terminate();return this.workerPool.length=0,this.workerSourceURL!==""&&URL.revokeObjectURL(this.workerSourceURL),this}};function bMt(){let e,t;onmessage=function(o){let s=o.data;switch(s.type){case"init":e=s.decoderConfig,t=new Promise(function(c){e.onModuleLoaded=function(h){c({draco:h})},DracoDecoderModule(e)});break;case"decode":let l=s.buffer,u=s.taskConfig;t.then(c=>{let h=c.draco,d=new h.Decoder,f=new h.DecoderBuffer;f.Init(new Int8Array(l),l.byteLength);try{let p=r(h,d,f,u),v=p.attributes.map(m=>m.array.buffer);p.index&&v.push(p.index.array.buffer),self.postMessage({type:"decode",id:s.id,geometry:p},v)}catch(p){console.error(p),self.postMessage({type:"error",id:s.id,error:p.message})}finally{h.destroy(f),h.destroy(d)}});break}};function r(o,s,l,u){let c=u.attributeIDs,h=u.attributeTypes,d,f,p=s.GetEncodedGeometryType(l);if(p===o.TRIANGULAR_MESH)d=new o.Mesh,f=s.DecodeBufferToMesh(l,d);else if(p===o.POINT_CLOUD)d=new o.PointCloud,f=s.DecodeBufferToPointCloud(l,d);else throw new Error("THREE.DRACOLoader: Unexpected geometry type.");if(!f.ok()||d.ptr===0)throw new Error("THREE.DRACOLoader: Decoding failed: "+f.error_msg());let v={index:null,attributes:[]};for(let m in c){let g=self[h[m]],y,x;if(u.useUniqueIDs)x=c[m],y=s.GetAttributeByUniqueId(d,x);else{if(x=s.GetAttributeId(d,o[c[m]]),x===-1)continue;y=s.GetAttribute(d,x)}v.attributes.push(n(o,s,d,m,g,y))}return p===o.TRIANGULAR_MESH&&(v.index=i(o,s,d)),o.destroy(d),v}function i(o,s,l){let u=l.num_faces()*3,c=u*4,h=o._malloc(c);s.GetTrianglesUInt32Array(l,c,h);let d=new Uint32Array(o.HEAPF32.buffer,h,u).slice();return o._free(h),{array:d,itemSize:1}}function n(o,s,l,u,c,h){let d=h.num_components(),f=l.num_points()*d,p=f*c.BYTES_PER_ELEMENT,v=a(o,c),m=o._malloc(p);s.GetAttributeDataArrayForAllPoints(l,h,v,p,m);let g=new c(o.HEAPF32.buffer,m,f).slice();return o._free(m),{name:u,array:g,itemSize:d}}function a(o,s){switch(s){case Float32Array:return o.DT_FLOAT32;case Int8Array:return o.DT_INT8;case Int16Array:return o.DT_INT16;case Int32Array:return o.DT_INT32;case Uint8Array:return o.DT_UINT8;case Uint16Array:return o.DT_UINT16;case Uint32Array:return o.DT_UINT32}}}var Kf;function wMt(){return Kf||(Kf=new xMt,Kf.setDecoderPath("https://www.gstatic.com/draco/versioned/decoders/1.5.2/").preload()),Kf.decoderPending}async function _Mt(e){if(Kf){let t={attributeIDs:Kf.defaultAttributeIDs,attributeTypes:Kf.defaultAttributeTypes,useUniqueIDs:!1},r;try{r=await Kf.decodeGeometry(new Int8Array(e).buffer,t)}catch(i){console.error(i)}if(r)return{index:r.index?{array:r.index.array}:void 0,attributes:Object.entries(r.attributes).map(([i,n])=>({name:i,itemSize:n.itemSize,array:n.array}))}}return null}async function AMt(e,t){let[r,i]=wge(LR.deserialize(new Uint8Array(e)));return qge(r),i.result().data}function SMt(e){let t=[];return e.scene.objects.traverse((r,i)=>{i.type==="Mesh"&&i.geometry.type==="NonParametricGeometry"&&i.geometry.data.draco!==void 0&&t.push(i)}),t}async function CMt(e){for(let t of e){let r=await _Mt(t.geometry.data.draco);if(r){let i=t.geometry.data;r.index&&(i.index={array:r.index.array,itemSize:1,normalized:!1,type:"Uint32Array"});let n={};r.attributes.forEach(({name:a,array:o,itemSize:s})=>{n[a]={array:o,itemSize:s,type:"Float32Array",normalized:!1}}),i.attributes=n,i.draco=void 0}}}var EMt=class{constructor(){this._clickCount=0,this._lastTime=0,this._lastPosition=[0,0],this._delay=500,this._distance=2,this._onMouseDown=e=>{let t=[e.clientX,e.clientY],r=new Date().getTime();if(this._clickCount>0){let i=t[0]-this._lastPosition[0],n=t[1]-this._lastPosition[1];Math.sqrt(i*i+n*n)>this._distance&&(this._clickCount=0)}this._lastPosition=t,this._clickCount=r-this._lastTime>this._delay?1:this._clickCount+1,this._lastTime=r},this._onMouseUp=e=>{}}start(e,t=500,r=2){this._target&&this.stop(),this.reset(),this._delay=t,this._distance=r,this._target=e,this._target.addEventListener("pointerdown",this._onMouseDown,!1),this._target.addEventListener("pointerup",this._onMouseUp,!1)}stop(){this._target&&(this._target.removeEventListener("pointerdown",this._onMouseDown,!1),this._target.removeEventListener("pointerup",this._onMouseUp,!1),this._target=void 0)}get clickCount(){return this._clickCount}reset(){this._clickCount=0,this._lastTime=0,this._lastPosition=[0,0]}},MMt=class{constructor(e,t,r,i,n,a,o,s){this.eventId=e,this.id=t,this.data=r,this.dataEvent=i,this.object=n,this.stage=!1,this.actions=Hn(i,r.actions,a,o,s,n)}disconnect(){_a(this.actions)}dispatchIn(){this.actions.Audio.forEach(e=>e.dispatchBasic()),this.actions.Particles.forEach(e=>e.dispatchBasic()),this.actions.Video.forEach(e=>e.dispatchBasic()),this.actions.Create.forEach(e=>e.dispatch()),this.actions.Destroy.forEach(e=>e.dispatch()),this.actions.Reset.forEach(e=>e.dispatch()),this.actions.Link.forEach(e=>e.dispatch()),this.actions.Transition.forEach(e=>{e.object.currentTransitionEvent!==this&&(e.object.currentTransitionEvent=this,e.init())}),this.actions.Transition.forEach(e=>e.toggle()),this.actions.Animation.forEach(e=>e.play()),this.actions.SwitchCamera.forEach(e=>e.play()),this.actions.SceneTransition.forEach(e=>e.dispatch()),this.actions.SetVariable.forEach(e=>e.checkConditions()),this.actions.SetVariable.forEach(e=>e.dispatch()),this.actions.DynamicVariablePlay.forEach(e=>e.dispatch()),this.actions.ClearLocalStorage.forEach(e=>e.dispatch()),this.actions.UserAPI.forEach(e=>e.dispatch())}dispatchOut(){this.actions.Transition.forEach(e=>{e.toggle()})}},TMt=class extends Co{constructor(e,t){super(e),this.eventManager=t,this.breakpoints=[],this.resize=(r,i)=>{this.breakpoints.forEach(n=>{let a=BR.deviceToSize(n.data.size),o=n.dataEvent.orientation==="horizontal"?r:i,s;switch(n.data.operator){case"<":s=o<a[0];break;case">":s=o>a[0];break;case"<>":s=o>a[0]&&o<a[1];break}n.stage!==s&&(n.stage=s,n.stage?n.dispatchIn():n.dispatchOut())})},this.onResizeObserver=new ResizeObserver(r=>{for(let i of r){let{width:n,height:a}=i.contentRect;this.resize(n,a)}})}connect(){let{page:e,sharedAssets:t,domElement:r}=this.eventContext;this.onResizeObserver.observe(r);let i=n=>{var a;if(!(!n.visible||!((a=n.data)!=null&&a.events.length)))for(let{data:o,id:s}of n.data.events)o.disabled||o.type==="Resize"&&o.breakpoints.forEach(({data:l,id:u})=>{try{let c=new MMt(s,u,l,o,n,e,t,this.eventManager);this.breakpoints.push(c)}catch{}})};e.traverseEntity(n=>{var a;(n instanceof mo||n instanceof va)&&((a=n.frame)==null||a.traverse(o=>{i(o)})),i(n)})}disconnect(){this.onResizeObserver.disconnect(),this.breakpoints.forEach(e=>{e.disconnect()}),this.breakpoints=[]}},PMt=class extends Co{constructor(e,t){super(e),this.eventManager=t,this.userAPIs={},this.events=[],this.onSuccess=({userAPIId:r})=>{this.events.forEach(i=>{i.data.userAPIId===r&&i.dispatchSuccess()})},this.onError=({userAPIId:r})=>{this.events.forEach(i=>{i.data.userAPIId===r&&i.dispatchError()})},this.userAPIs=e.sharedAssets.getUserAPIs()}connect(){this.eventContext.page.traverseEntity(e=>{var t;(t=e.data)==null||t.events.filter(r=>r.data.type==="API"&&!r.data.disabled).forEach(r=>{this.events.push(new DMt(r.id,r.data,e,this.eventContext.page,this.eventContext.sharedAssets,this.eventManager))})}),Object.entries(this.userAPIs).forEach(([e,t])=>{t.on("success",this.onSuccess),t.on("error",this.onError),t.autostart&&t.callUserAPI(this.eventContext.sharedAssets)})}disconnect(){Object.entries(this.userAPIs).forEach(([e,t])=>{t.off("success",this.onSuccess),t.off("error",this.onError)})}},DMt=class{constructor(e,t,r,i,n,a){this.id=e,this.data=t,this.object=r,this.successActions=Hn(t,t.successActions,i,n,a,r),this.errorActions=Hn(t,t.errorActions,i,n,a,r)}dispatchSuccess(){this.dispatchActions(this.successActions)}dispatchError(){this.dispatchActions(this.errorActions)}dispatchActions(e){e.Audio.forEach(t=>t.dispatchConditional()),e.Particles.forEach(t=>t.dispatchConditional()),e.Video.forEach(t=>t.dispatchConditional()),e.Create.forEach(t=>t.dispatch()),e.Destroy.forEach(t=>t.dispatch()),e.Reset.forEach(t=>t.dispatch()),e.Transition.forEach(t=>{t.object.currentTransitionEvent!==this&&(t.object.currentTransitionEvent=this),t.init()}),e.Transition.forEach(t=>t.play()),e.Animation.forEach(t=>t.play()),e.SwitchCamera.forEach(t=>t.play()),e.SceneTransition.forEach(t=>t.dispatch()),e.SetVariable.forEach(t=>t.checkConditions()),e.SetVariable.forEach(t=>t.dispatch()),e.DynamicVariablePlay.forEach(t=>t.dispatch()),e.ClearLocalStorage.forEach(t=>t.dispatch()),e.UserAPI.forEach(t=>t.dispatch())}},IMt=class extends Co{constructor(e,t){super(e),this.eventManager=t,this.userWebhooks={},this.events=[],this.onMessage=({userWebhookId:r})=>{this.events.forEach(i=>{i.data.userWebhookId===r&&i.dispatch()})},this.userWebhooks=e.sharedAssets.getUserWebhooks()}connect(){this.eventContext.page.traverseEntity(e=>{var t;(t=e.data)==null||t.events.filter(r=>r.data.type==="WEBHOOK"&&!r.data.disabled).forEach(r=>{this.events.push(new LMt(r.id,r.data,e,this.eventContext.page,this.eventContext.sharedAssets,this.eventManager))})}),Object.entries(this.userWebhooks).forEach(([e,t])=>{t.connect(),t.on("message",this.onMessage)})}disconnect(){Object.entries(this.userWebhooks).forEach(([e,t])=>{t.off("message",this.onMessage),t.disconnect()})}},LMt=class{constructor(e,t,r,i,n,a){this.id=e,this.data=t,this.object=r,this.actions=Hn(t,t.actions,i,n,a,r)}dispatch(){let e=this.actions;e.Audio.forEach(t=>t.dispatchConditional()),e.Particles.forEach(t=>t.dispatchConditional()),e.Video.forEach(t=>t.dispatchConditional()),e.Create.forEach(t=>t.dispatch()),e.Destroy.forEach(t=>t.dispatch()),e.Reset.forEach(t=>t.dispatch()),e.Transition.forEach(t=>{t.object.currentTransitionEvent!==this&&(t.object.currentTransitionEvent=this),t.init()}),e.Transition.forEach(t=>t.play()),e.Animation.forEach(t=>t.play()),e.SwitchCamera.forEach(t=>t.play()),e.SceneTransition.forEach(t=>t.dispatch()),e.SetVariable.forEach(t=>t.checkConditions()),e.SetVariable.forEach(t=>t.dispatch()),e.DynamicVariablePlay.forEach(t=>t.dispatch()),e.ClearLocalStorage.forEach(t=>t.dispatch()),e.UserAPI.forEach(t=>t.dispatch())}};function kMt(){let e=document.createElement("textarea");return e.style.position="fixed",e.style.top="200px",e.style.left="400px",e.style.zIndex="-1",e.style.border="1px solid rgba(255,0,0,0.5)",e.style.width="10px",e.style.height="500px",e.style.color="white",e.style.opacity="0.5",e.style.background="transparent",e.style.display="none",e.style.margin="0px",e.style.padding="0px",e.style.boxSizing="content-box",e.style.pointerEvents="none",e}var RMt=new U(0,0,1),Cne=new U,Ene=new U,Mne=new Bn,OMt=class{constructor(e,t,r,i,n){this.containerScene=e,this.raycaster=t,this.sharedAssets=r,this.requestRender=i,this.onExit=n,this.htmlInput=null,this.virtualInput=null,this.helper=new wye,this.doubleClickHandler=new EMt,this.isDragging=!1,this.plane=new hs,this.caretInterval=0,this.planeIntersection=new U,this.projected=new me,this._lastIndex=0,this._isFirstDragMove=!1,this.selectionOnDragStart=0,this.onTextMaterialChanged=()=>{var o;let a=(o=this.virtualInput)==null?void 0:o.data;if(this.virtualInput!==void 0&&a){let s=a.material,l=typeof s=="string"?this.sharedAssets.data.materials[s]:s,u=ZSt(l,this.sharedAssets);this.helper.setCaretColor(u)}},this.stopAnimateTextCursor=()=>{clearInterval(this.caretInterval),this.helper&&(this.helper.caretMesh.visible=!1)},this.startAnimateTextCursor=()=>{this.stopAnimateTextCursor(),this.helper&&(this.helper.caretMesh.visible=!0,this.caretInterval=setInterval(()=>{this.helper&&(this.helper.caretMesh.visible=!this.helper.caretMesh.visible),this.requestRender()},600))},this.handleCaretUpdate=a=>{if(!this.htmlInput||!this.virtualInput)return;let o=this.helper,s=(a==null?void 0:a.key)==="ArrowLeft"||(a==null?void 0:a.key)==="ArrowRight",l=(a==null?void 0:a.key)==="ArrowUp"||(a==null?void 0:a.key)==="ArrowDown";this.htmlInput.selectionStart===this.htmlInput.selectionEnd?(o.setCaretPosition(this.htmlInput.selectionStart,{horizontalKeyMove:s,verticalKeyMove:l}),this.startAnimateTextCursor()):o.setSelection(this.htmlInput.selectionStart,this.htmlInput.selectionEnd),this.requestRender()},this.containerScene.add(this.helper)}createInput(){return this.htmlInput=kMt(),this.htmlInput}connect(){}disconnect(){var e;this.stopAnimateTextCursor(),this.helper.hide(),(e=this.htmlInput)==null||e.remove(),this.doubleClickHandler.stop()}handleMouseDown(){var a,o;if(!this.htmlInput||!this.virtualInput)return!0;this.getPointOnPlane();let e=this.doubleClickHandler.clickCount,{index:t,lineIndex:r,characterIndex:i}=this.helper.getSelectionFromPosition(this.projected.x,this.projected.y,e>1?"inside":"previous")??{index:0,lineIndex:0,characterIndex:0};(o=(a=this.virtualInput)==null?void 0:a.wrappedText)!=null&&o.length&&this.virtualInput.wrappedText[r][Math.max(0,i-1)]===`
`&&(t--,i--),this._lastIndex=t,this._isFirstDragMove=!0;let n=this.checkClickedObject();if(e===1){if(n===null)return this.onExit(this.virtualInput),!0;this.selectionOnDragStart=t,this.isDragging=!0,this.setInputSelection(t)}else n===this.virtualInput&&(e===2?this.selectClosestWord(r,i):e>2&&(this.setInputSelection(0,this.htmlInput.value.length),this.doubleClickHandler.reset()))}handleMouseUp(){this.applyRangeToTextInput(),this.isDragging=!1,this._isFirstDragMove=!1}handleMouseMove(){!this.virtualInput||(this._isFirstDragMove&&this.doubleClickHandler.clickCount>1&&(this.selectionOnDragStart=this._lastIndex,this.isDragging=!0,this.setInputSelection(this._lastIndex)),this._isFirstDragMove=!1,this.getPointOnPlane(),this.applyRangeToTextInput())}focus(e){var t;if(this.virtualInput=e,this.updateTextInputStyles(),this.htmlInput)if(e){let r=(t=this.data)==null?void 0:t.geometry.text;this.htmlInput.value=typeof r=="string"?"":(r==null?void 0:r.textValue.toString())??""}else this.htmlInput.value=""}blur(){}get data(){let{virtualInput:e}=this;if(e)return e.dataPatched}applyRangeToTextInput(){var n;if(!this.isDragging||!this.virtualInput||!this.htmlInput)return;let e=this.selectionOnDragStart,{index:t,lineIndex:r,characterIndex:i}=this.helper.getSelectionFromPosition(this.projected.x,this.projected.y,this.doubleClickHandler.clickCount>2?"inside":"previous")??{index:0};r!==void 0&&i!==void 0&&((n=this.virtualInput)==null?void 0:n.wrappedText[r][i-1])===`
`&&t--,this.htmlInput.setSelectionRange(Math.min(e,t),Math.max(e,t))}checkClickedObject(){if(this.virtualInput){let e=this.raycaster.intersectObject(this.virtualInput,!1);if(e.length>0){let t=e[0];if(t.object instanceof gH)return t.object}}return null}selectClosestWord(e,t){if(!this.virtualInput)return;let r=this.virtualInput.wrappedText,i=r[e],n=t+1,a=t;i[t]!==" "&&(n=this.findNextCharOccurence(i,t,"forward"," "),a=this.findNextCharOccurence(i,t,"backward"," "),a>0&&a++,n>=i.length-1&&e===r.length-1&&n++);let o=this.helper,s=o.getGlobalIndexFromLineAndCharIndexes(r,e,a),l=o.getGlobalIndexFromLineAndCharIndexes(r,e,n);this.setInputSelection(s,l)}findNextCharOccurence(e,t,r,i=" "){let n=Math.max(0,e.length-1),a=r==="forward"?n:0,o=r==="forward"?1:-1,s=Math.max(Math.min(t,n),0);for(;s!==a;)if(s+=o,e.charAt(s)===i)return s;return a}getPointOnPlane(){var t;let e=(t=this.virtualInput)==null?void 0:t.data;if(!(!this.virtualInput||!e)&&this.raycaster.ray.intersectsPlane(this.plane)){this.planeIntersection===null&&(this.planeIntersection=new U);let r=this.raycaster.ray.intersectPlane(this.plane,this.planeIntersection);if(r){this.planeIntersection.copy(this.virtualInput.worldToLocal(r));let i=typeof e.geometry.width=="number"?e.geometry.width:1,n=typeof e.geometry.height=="number"?e.geometry.height:1;this.projected.set(r.x+i*.5,r.y-n*.5)}}}updatePlane(){var t;let e=(t=this.virtualInput)==null?void 0:t.data;this.virtualInput&&e&&(Mne.getNormalMatrix(this.virtualInput.matrixWorld),Cne.copy(RMt).applyMatrix3(Mne).normalize(),this.virtualInput.localToWorld(Ene.set(0,0,e.geometry.depth)),this.plane.setFromNormalAndCoplanarPoint(Cne,Ene))}setInputSelection(e,t=e){var r;(r=this.htmlInput)==null||r.setSelectionRange(e,t),setTimeout(()=>{var i;(i=this.htmlInput)==null||i.focus()})}updateTextInputStyles(){var t;let e=(t=this.virtualInput)==null?void 0:t.data;this.virtualInput&&e&&this.htmlInput&&(this.htmlInput.style.fontSize=e.geometry.fontSize+"px",this.htmlInput.style.letterSpacing=e.geometry.letterSpacing*e.geometry.fontSize+"px",this.htmlInput.style.lineHeight=e.geometry.fontSize*e.geometry.lineHeight+"px",this.htmlInput.style.width=e.geometry.width+"px",this.htmlInput.style.height=e.geometry.height+"px",this.htmlInput.style.textAlign=BMt(e.geometry.horizontalAlign))}};function BMt(e){return e===4?"justify":e===2?"right":e===3?"center":"left"}var I2e=(e,t)=>{if(typeof e=="string"){let r=t.data(e);if(r)return I2e(r.value,t)}return Ga.getDisplayedValue(e)};function Tne(e,t){let r=e.text,i="";if(typeof r=="string"){let n=t.variables.data(i);n&&(i=I2e(n.value,t.variables))}else i=r.textValue.toString();return i}var NMt=class extends Co{constructor(e,t){super(e),this.eventManager=t,this._textInputs=[],this.sceneHelpers=new jc,this.helper=new wye,this._onMouseDownFocusIn=r=>{if(jt.length>1)return;this.eventContext.updateRaycaster(r);let i=null;if(this.eventContext.raycaster){for(let n of this._textInputs)if(this.eventContext.raycaster.intersectObject(n,!0).length>0){i=n;break}}this.focusOnTextInput(i),this._onCaretUpdate(),this._onMouseUp(),this.textInputManager.doubleClickHandler.start(this.eventContext.domElement),this.textInputManager.doubleClickHandler._onMouseDown(r),this._onMouseDown(r)},this.onExit=()=>{let{virtualInput:r}=this.textInputManager;if(r===null)return;let i=this.textInputManager.htmlInput;this.helper.hide(),i==null||i.setSelectionRange(i.value.length,i.value.length),this.eventManager.controlsManager.orbitControls&&(this.eventManager.controlsManager.orbitControls.enabled=!0);let{domElement:n}=this.eventContext;n.removeEventListener("pointerdown",this._onMouseDown,!1),n.removeEventListener("pointerup",this._onMouseUp,!1),n.removeEventListener("pointermove",this._onMouseMove,!1),window.removeEventListener("keydown",this._onKeyPress),this.textInputManager.doubleClickHandler.reset(),n.addEventListener("pointerdown",this._onMouseDownFocusIn),this.eventContext.renderer.sceneHelpersOnTop=void 0,this.eventContext.renderer.pipeline.disableHelpers()},this._onMouseDown=r=>{this.eventContext.updateRaycaster(r),this.textInputManager.handleMouseDown(),this.textInputManager.virtualInput&&this.eventContext.raycaster.intersectObject(this.textInputManager.virtualInput,!0).length>0&&this.eventManager.controlsManager.orbitControls&&(this.eventManager.controlsManager.orbitControls.enabled=!1)},this._onMouseUp=()=>{this.textInputManager.handleMouseUp(),this.eventManager.controlsManager.orbitControls&&!this.eventManager.controlsManager.orbitControls.enabled&&(this.eventManager.controlsManager.orbitControls.enabled=!0)},this._onMouseMove=r=>{this.eventContext.updateRaycaster(r),this.textInputManager.handleMouseMove()},this._onTextEdit=r=>{let{htmlInput:i,virtualInput:n,helper:a}=this.textInputManager;if(!i||!n)return;let o=i.value;n.textGeometry.setText(o).then(()=>{this.eventContext.requestRender()});let s=n.data;a.update();let l=s.geometry.text;if(typeof l=="string"){let u=l;this.eventContext.sharedAssets.updateVariable(u,{textValue:o})}this.textInputManager.updateTextInputStyles(),this._onCaretUpdate()},this._onCaretUpdate=r=>{this.textInputManager.handleCaretUpdate(r)},this._onKeyPress=r=>{r.key==="Escape"&&this.onExit()},this.textInputManager=new OMt(this.sceneHelpers,e.raycaster,e.sharedAssets,e.requestRender,this.onExit)}connect(){let e=[];if(this.eventContext.scene.traverseEntity(i=>{i instanceof gH&&e.push(i)}),this._textInputs=e,e.length===0)return;let{domElement:t}=this.eventContext;t.addEventListener("pointerdown",this._onMouseDownFocusIn),this.textInputManager.connect();let r=this.textInputManager.createInput();document.body.appendChild(r),r.style.display="none",r.addEventListener("keyup",this._onCaretUpdate),r.addEventListener("keydown",this._onCaretUpdate),r.addEventListener("beforeinput",this._onCaretUpdate),r.addEventListener("paste",this._onCaretUpdate),r.addEventListener("cut",this._onCaretUpdate),r.addEventListener("select",this._onCaretUpdate),r.addEventListener("selectstart",this._onCaretUpdate)}disconnect(){let e=this.textInputManager.htmlInput,{domElement:t}=this.eventContext;t.removeEventListener("pointerdown",this._onMouseDownFocusIn),e==null||e.removeEventListener("keyup",this._onCaretUpdate),e==null||e.removeEventListener("keydown",this._onCaretUpdate),e==null||e.removeEventListener("beforeinput",this._onCaretUpdate),e==null||e.removeEventListener("paste",this._onCaretUpdate),e==null||e.removeEventListener("cut",this._onCaretUpdate),e==null||e.removeEventListener("select",this._onCaretUpdate),e==null||e.removeEventListener("selectstart",this._onCaretUpdate),this._textInputs.forEach(r=>{let i=Tne(r.data.geometry,this.eventContext.sharedAssets.data);r.textGeometry.setText(i)}),t.removeEventListener("pointerdown",this._onMouseDown,!1),t.removeEventListener("pointerup",this._onMouseUp,!1),t.removeEventListener("pointermove",this._onMouseMove,!1),window.addEventListener("keydown",this._onKeyPress),this.eventContext.renderer.sceneHelpersOnTop=void 0,this.eventContext.renderer.pipeline.disableHelpers(),this.textInputManager.disconnect()}focusOnTextInput(e){this.textInputManager.focus(e),this.textInputManager.onTextMaterialChanged();let t=this.textInputManager.htmlInput;if(!t||e===null)return;this.textInputManager.updateTextInputStyles(),this.eventContext.renderer.sceneHelpersOnTop=this.sceneHelpers,this.eventContext.renderer.pipeline.enableHelpers(),this.textInputManager.isDragging=!1;let r=Tne(e.textGeometry.userData.parameters,this.eventContext.sharedAssets.data);t.value=r,t.setSelectionRange(0,0),this.textInputManager.helper.show(e),t.style.display="block",t.addEventListener("input",this._onTextEdit),this.textInputManager.updatePlane();let{domElement:i}=this.eventContext;i.removeEventListener("pointerdown",this._onMouseDownFocusIn),i.addEventListener("pointerdown",this._onMouseDown,!1),i.addEventListener("pointerup",this._onMouseUp,!1),i.addEventListener("pointermove",this._onMouseMove,!1),window.addEventListener("keydown",this._onKeyPress)}},VMt=class extends Co{constructor(e,t){super(e),this.eventManager=t,this.events=[],this.onVoice=({value:r,frequencies:i})=>{this.events.forEach(n=>{n.dispatch()})}}connect(){this.openAIRealtime=this.eventContext.sharedAssets.openAIRealtime,this.openAIRealtime&&(this.eventContext.page.traverseEntity(e=>{var t;(t=e.data)==null||t.events.filter(r=>r.data.type==="AIAssistantListener"&&!r.data.disabled).forEach(r=>{this.events.push(new FMt(r.id,r.data,e,this.eventContext.page,this.eventContext.sharedAssets,this.eventManager))})}),this.openAIRealtime.on("voice",this.onVoice))}disconnect(){var e;(e=this.openAIRealtime)==null||e.off("voice",this.onVoice)}},FMt=class{constructor(e,t,r,i,n,a){this.id=e,this.data=t,this.object=r,this.actions=Hn(t,t.actions,i,n,a,r)}dispatch(){this.dispatchActions(this.actions)}dispatchActions(e){e.Audio.forEach(t=>t.dispatchConditional()),e.Particles.forEach(t=>t.dispatchConditional()),e.Video.forEach(t=>t.dispatchConditional()),e.Create.forEach(t=>t.dispatch()),e.Destroy.forEach(t=>t.dispatch()),e.Reset.forEach(t=>t.dispatch()),e.Transition.forEach(t=>{t.object.currentTransitionEvent!==this&&(t.object.currentTransitionEvent=this),t.init()}),e.Transition.forEach(t=>t.play()),e.Animation.forEach(t=>t.play()),e.SwitchCamera.forEach(t=>t.play()),e.SceneTransition.forEach(t=>t.dispatch()),e.SetVariable.forEach(t=>t.checkConditions()),e.SetVariable.forEach(t=>t.dispatch()),e.DynamicVariablePlay.forEach(t=>t.dispatch()),e.ClearLocalStorage.forEach(t=>t.dispatch()),e.UserAPI.forEach(t=>t.dispatch())}},zMt=class extends Co{constructor(e,t){super(e),this.eventManager=t,this.events=[],this.onTriggerEvent=({description:r,direction:i})=>{let n=this.events.find(a=>a.data.description===r);n&&(i==="backward"?n.dispatchReverse():n.dispatch())}}connect(){this.openAIRealtime=this.eventContext.sharedAssets.openAIRealtime,this.openAIRealtime&&(this.eventContext.page.traverseEntity(e=>{var t;(t=e.data)==null||t.events.filter(r=>r.data.type==="AIAssistantTrigger"&&!r.data.disabled).forEach(r=>{this.events.push(new HMt(r.id,r.data,e,this.eventContext.page,this.eventContext.sharedAssets,this.eventManager))})}),this.openAIRealtime.on("trigger_event",this.onTriggerEvent))}disconnect(){var e;(e=this.openAIRealtime)==null||e.off("trigger_event",this.onTriggerEvent)}},HMt=class{constructor(e,t,r,i,n,a){this.id=e,this.data=t,this.object=r,this.actions=Hn(t,t.actions,i,n,a,r)}dispatch(){let e=this.actions;e.Audio.forEach(t=>t.dispatchConditional()),e.Particles.forEach(t=>t.dispatchConditional()),e.Video.forEach(t=>t.dispatchConditional()),e.Create.forEach(t=>t.dispatch()),e.Destroy.forEach(t=>t.dispatch()),e.Reset.forEach(t=>t.dispatch()),e.Transition.forEach(t=>{t.object.currentTransitionEvent!==this&&(t.object.currentTransitionEvent=this),t.init()}),e.Transition.forEach(t=>t.play()),e.Animation.forEach(t=>t.play()),e.SwitchCamera.forEach(t=>t.play()),e.SceneTransition.forEach(t=>t.dispatch()),e.SetVariable.forEach(t=>t.checkConditions()),e.SetVariable.forEach(t=>t.dispatch()),e.DynamicVariablePlay.forEach(t=>t.dispatch()),e.ClearLocalStorage.forEach(t=>t.dispatch()),e.UserAPI.forEach(t=>t.dispatch())}dispatchReverse(){let e=this.actions;e.Transition.forEach(t=>t.reverseFromCurrent()),e.Particles.forEach(t=>t.reverseFromCurrent()),e.Animation.forEach(t=>t.reverseFromCurrent()),e.SwitchCamera.forEach(t=>t.reverseFromCurrent()),e.Create.forEach(t=>t.dispatchStop())}},UMt=class{constructor(e,t,r,i,n){this.publish=e,this.controlsManager=t,this.animationControls=r,this.eventContext=i,this.sharedVariables=n,this.isEnabled=!1,this.activateCount=0,this.needsMouse=!1,this.needsRaycast=!1,this.onTouchMovePreventScroll=a=>{let o=window.parent!==window,s=document.documentElement.scrollHeight>document.documentElement.clientHeight||document.documentElement.scrollWidth>document.documentElement.clientWidth;(a.touches.length>1||this.preventTouchScroll||o===!1&&s===!1)&&a.preventDefault()},this.onMouseWheelPreventScroll=a=>{this.preventScroll&&a.preventDefault()},this.onMouseMove=a=>{this.eventContext.sharedAssets.mouseProperty={...this.getMousePosition(a),pressed:a.buttons>0}},this.onMouseDown=a=>{this.eventContext.sharedAssets.mouseProperty={...this.getMousePosition(a),pressed:!0}},this.onMouseUp=a=>{this.eventContext.sharedAssets.mouseProperty={...this.getMousePosition(a),pressed:!1}},this.getMousePosition=a=>{var u;let{domRect:o}=this.eventContext,{pageX:s,pageY:l}=((u=a.touches)==null?void 0:u.length)>0?a.touches[0]:a;return{x:s-(o.left+window.scrollX),y:l-(o.top+window.scrollY)}},this.stopRaycast=e.stopRaycast,this.preventScroll=e.preventScroll,this.preventTouchScroll=e.preventTouchScroll,this.hideCursor=e.hideCursor,this.requestRender=i.requestRender}activate(e=!1){var i,n;if(this.isEnabled)return;this.isEnabled=!0,this.initializeActionsDependentStates(),this.needsMouse&&(this.eventContext.domElement.addEventListener("pointermove",this.onMouseMove),this.eventContext.domElement.addEventListener("pointerdown",this.onMouseDown)),this.handlers={Spline:new vEt(this.eventContext),VariableChange:new YEt(this.eventContext,this.sharedVariables,this,this.needsMouse,this.needsRaycast),API:new PMt(this.eventContext,this),WEBHOOK:new IMt(this.eventContext,this),AIAssistantListener:new VMt(this.eventContext,this),AIAssistantTrigger:new zMt(this.eventContext,this),Conditional:new _Et(this.eventContext,this),Start:new WEt(this.eventContext,this),Basic:new gEt(this.eventContext,this,this.needsRaycast),MouseHover:new zEt(this.eventContext,this),Scroll:new GEt(this.eventContext,this),Follow:new LEt(this.eventContext,this),DragDrop:new MEt(this.eventContext,this),LookAt:new NEt(this.eventContext),Resize:new TMt(this.eventContext,this),Textfields:new NMt(this.eventContext,this)};let{page:t,domElement:r}=this.eventContext;this.hideCursor&&(r.style.cursor="none"),t.traverseEntity(a=>{a.addEventListener("requestRender",this.requestRender)}),Object.values(this.handlers).forEach(a=>a.connect()),r.addEventListener("wheel",this.onMouseWheelPreventScroll),r.addEventListener("touchmove",this.onTouchMovePreventScroll),this.activateCount++,e||((i=this.eventContext.sharedAssets.openAIRealtime)==null||i.connect(),(n=this.eventContext.sharedAssets.openAIRealtime)==null||n.start())}deactivate(e=!1){var i;if(!this.isEnabled)return;this.isEnabled=!1,this.eventContext.domElement.removeEventListener("pointermove",this.onMouseMove),this.eventContext.domElement.removeEventListener("pointerdown",this.onMouseDown),this.eventContext.domElement.removeEventListener("pointerup",this.onMouseUp),this.eventContext.sharedAssets.mouseProperty=null,this.eventContext.sharedAssets.raycastProperty=null;let{page:t,domElement:r}=this.eventContext;if(r.style.cursor="",Object.values(this.handlers).forEach(n=>n.disconnect()),(i=this.controlsManager.gameControl)==null||i.disposeActions(),this.controlsManager.disconnectEvents(),t.traverseEntity(n=>{n.removeEventListener("requestRender",this.requestRender),n.destroyedInAction=!1}),r.removeEventListener("touchmove",this.onTouchMovePreventScroll),r.removeEventListener("wheel",this.onMouseWheelPreventScroll),this.animationControls.onExitPlayMode(),!e){let n=this.eventContext.sharedAssets.openAIRealtime;n==null||n.disconnect(),n==null||n.stop().then(()=>{n==null||n.disconnect()})}}get isPaused(){return this.isEnabled}pause(){this.deactivate()}resume(){this.activate()}reset(){this.deactivate(!0),this.activate(!0),this.controlsManager.deactivate(),this.controlsManager.activate(this),this.controlsManager.page.updateMatrixWorld(!0),this.controlsManager.rebuildBVH()}updateUseWindowEvents(e){let t=this.isEnabled;t&&this.deactivate(),this.eventContext.useWindowEvents=e,t&&this.activate()}initializeActionsDependentStates(){let e=this.eventContext.sharedAssets;e.resetDynamicVariablePlayState();let t=r=>{if(r.data.type==="Conditional"&&(r.data.ifActions.forEach(t),r.data.elseActions.forEach(t)),r.data.type==="Conditional"||r.data.type==="SetVariable")for(let i of r.data.type==="Conditional"?r.data.condition:r.data.expression)"id"in i&&Array.isArray(i.id)&&(i.id[0]==="mouse"&&(this.needsMouse=!0),i.id[0]==="raycast"&&(this.needsRaycast=!0));r.data.type==="DynamicVariablePlay"&&r.data.variableId!==""&&(r.data.mode==="Play"||r.data.mode==="PlayPause"||r.data.mode==="Toggle")&&e.setDynamicVariablePlayState(r.data.variableId,"Stopped")};this.eventContext.page.traverseEntity(r=>{var i;if((i=r.data)!=null&&i.events.length)for(let n of r.data.events)if(n.data.type==="VariableChange"&&(n.data.variableId==="mouseProperty"&&(this.needsMouse=!0),n.data.variableId==="raycastProperty"&&(this.needsRaycast=!0)),n.data.type==="Conditional")for(let a of["inActions","outActions"])n.data[a].forEach(t);else if(n.data.type==="DragDrop")for(let a of["drag","drop"])n.data.dragDropActions[a].forEach(t);else if(n.data.type==="GameControl")for(let a of["idle","move","jump","run"])n.data.gameActions[a].forEach(t);else if(n.data.type==="Resize")for(let a of n.data.breakpoints)a.data.actions.forEach(t);else n.data.type==="LookAt"||n.data.type==="API"||n.data.actions.forEach(t)})}},GMt=class{constructor(e,t,r,i,n){this._aspect=1,this.enableResponsive=!1,this._renderer=e,this._camera=t,this._frameSize=new me().copy(r),this._editorSize=new me().copy(i),this._aspect=t.aspect,this._fov=n??t.fov}set frameSize(e){this._frameSize.copy(e)}updateRenderer(){!this._renderer||this._renderer.setSize(this._frameSize.x,this._frameSize.y)}updateViewport(){if(!this._renderer||!this._camera||this._camera.cameraType!=="PerspectiveCamera")return;let e=this._frameSize.x,t=this._frameSize.y,r=this._editorSize.y;this._aspect=e/t,t<=r&&(this._camera.zoom*=r/t),this._renderer.setViewport(0,0,e,t)}updateCamera(e=!0){if(this._camera)if(this._camera.cameraType==="PerspectiveCamera"){let t=this._frameSize.y,r=this._editorSize.y,i=this._fov;if(e&&t>r){let n=jMt(t,1080,2160,1,15)/100;i*=t/r,i*=1-n}this._camera.aspect=this._aspect,this._camera.fov=i,this._camera.updateProjectionMatrix()}else this._camera.setViewplaneSize(this._frameSize.x,this._frameSize.y,this.enableResponsive)}setCamera(e){this._camera=e,this._aspect=e.aspect,this._fov=e.fov}revert(){let e=window.innerWidth,t=window.innerHeight;this._renderer&&(this._renderer.setViewport(0,0,e,t),this._renderer.setSize(e,t)),this._camera&&(this._camera.aspect=e/t,this._camera.fov=this._fov,this._camera.setViewplaneSize(e,t,this.enableResponsive),this._camera.updateProjectionMatrix())}};function jMt(e,t,r,i,n){return(e-t)/(r-t)*(n-i)+i}var WMt=class{get sharedAssets(){return this.shared}constructor(e,t={},r=!0){this.shared=new oH(e.shared,t,!0,r),this.scene=new bH(e.scene,this.sharedAssets),this.shared.setEntityOpContext({scene:this.scene,shared:this.shared})}reset(e,t){this.scene.clearScene(),this.sharedAssets.reset(e.shared),this.scene.resetAfterClear(e.scene,this.sharedAssets)}resetPersonalCameraFromDocumentData(){for(let e of this.scene.children)e instanceof va&&!e.uiScene&&e.personalCamera.updateState(e.data.camera,{scene:this.scene,shared:this.shared})}dispose(){this.scene.dispose(),this.shared.dispose()}gc(){this.shared.geometryCache.startGc(),this.shared.geometryCache2.startGc(),this.scene.traverseEntity(e=>{e instanceof xo&&e.markGeometryAsReachable(this.shared)}),this.shared.geometryCache.endGc(),this.shared.geometryCache2.endGc()}},qMt=class{constructor({x:e=10,y:t=10}){this._startTime=0;let r=document.getElementById("spe-perfs");r?this.element=r:(this.element=document.createElement("div"),document.body.appendChild(this.element),this.element.style.position="absolute",this.element.style.zIndex="10000",this.element.style.fontFamily="monospace",this.element.style.background="black",this.element.style.color="white",this.element.style.padding="10px",this.element.style.opacity="0.5",this.element.style.fontSize="11px",this.element.setAttribute("id","spe-perfs")),this.element.style.left=`${e}px`,this.element.style.top=`${t}px`}dispose(){var e;(e=this.element.parentElement)==null||e.removeChild(this.element)}start(){this._startTime=performance.now()}end(){let e=performance.now()-this._startTime;this.element.innerHTML=e.toFixed(3)+" ms"}};function YMt(e){let t;if(e.index)for(let r=0;r<e.index.array.length;r+=3)t=e.index.array[r],e.index.array[r]=e.index.array[r+2],e.index.array[r+2]=t}function Bb(e){return e instanceof Jw?"SubdivObject":e.geometry.type==="NonParametricGeometry"?"NonParametric":"Mesh"}function XMt(e,t){let r={};return e.traverseEntity(i=>{var l;if(!i.visible||!(i instanceof Jo)||i.type!=="Mesh"||Array.isArray(i.material)||i.states&&Object.keys(i.states).length)return;let n=i.parent;for(;n;){if(n instanceof Jo&&i.states&&Object.keys(i.states).length)return;n=n.parent}let a=i.material.uuid,o=t.shared.materials[a];if(o){if(!Ua.isMergable(o))return}else{let u=(l=t.scene.objects.get(i.uuid))==null?void 0:l.data;if(u&&"material"in u&&typeof u.material!="string"){if(!Ua.isMergable(u.material))return;a=Ua.getHash(u.material)}}r[a]||(r[a]={});let s=r[a][Bb(i)];if(s){if(s.push(i),i.cloner)for(let u of i.cloner.children)s.push(u)}else if(r[a][Bb(i)]=[i],i.cloner)for(let u of i.cloner.children)r[a][Bb(i)].push(u)}),r}function ZMt(e){let t=0;return Object.values(e).forEach(r=>{Object.values(r).forEach(i=>{let n=i.length;n>t&&(t=n)})}),t}function QMt(e,t){let r=XMt(t,e),i=ZMt(r),n=new Array(i),a=0,o=new Array(i),s=0,l=new Array(i),u=0,c=new Array(i),h=0;for(let[d,f]of Object.entries(r))for(let p of Object.values(f)){if(s=0,u=0,p.forEach(m=>{m instanceof Jo&&(o[s++]=m.geometry.clone(),l[u++]=m)}),u<2)continue;for(let m=0;m<u;m++)l[m].updateWorldMatrix(!0,!1),o[m].applyMatrix4(l[m].matrixWorld),l[m].matrixWorld.determinant()<0&&YMt(o[m]);let v=nv(o.slice(0,s),!1);if(v){let m;switch(d){case"SubdivObject":{console.warn("Turning subdiv object into mesh"),m=new nn(v,l[0].material);break}default:{m=new nn(v,l[0].material);break}}m.castShadow=l[0].castShadow,m.receiveShadow=l[0].receiveShadow,t.add(m);let g=y=>{h=0;for(let x of y)x.children&&g(x.children),x instanceof Jo&&(Array.isArray(x.material)||r[x.material.uuid]&&r[x.material.uuid][Bb(x)]&&r[x.material.uuid][Bb(x)].length>1||(c[h++]=x));for(let x=0;x<h;x++)t.attach(c[x])};for(let y=0;y<u;y++){let x=l[y];g(x.children),n[a++]=x}}}for(let d=0;d<a;d++)n[d].removeFromParent()}var KMt=Dp(Wot(),1),JMt=new me;function $Mt(e){let t="The Spline Runtime only accepts .splinecode files that are generated from Spline export panel.";e.endsWith(".spline")?console.warn(t+" The .spline files are only meant to be used by the Editor."):e.endsWith(".splinecode")||console.warn(t)}var L2e=class{constructor(e,{renderOnDemand:t,renderMode:r="auto"}={}){this._viewportMode=1,this._viewportWidth=window.innerWidth,this._viewportHeight=window.innerHeight,this._proxyObjectCache=new Map,this._variablesCache=new Map,this._isPaused=!1,this._renderRequested=!1,this._skipRender=!1,this.time=performance.now(),this.dt=0,this.currentTAAFrame=0,this.disposed=!1,this._requestRenderAutoMode=()=>{this._skipRender=!1},this.requestRender=()=>{this._renderRequested=!0},this.render=i=>{var n,a,o,s,l,u,c,h,d,f,p,v,m;if(this.time=i,this._lastTime&&(this.dt=this.time-this._lastTime),this._lastTime=this.time,(n=this._perfs)==null||n.start(),!this._renderer){(a=this._perfs)==null||a.end();return}if(!this._isPaused&&(this.renderMode==="manual"&&!this._renderRequested||this.renderMode==="auto"&&this._skipRender)){(o=this._perfs)==null||o.end();return}if(this._renderRequested=!1,this._skipRender=!0,this._controls&&(this._skipRender=this._controls.update(this.dt)),this._eventManager&&((s=this._eventManager.handlers)!=null&&s.Start.hasVideoAction||(l=this._eventManager.handlers)!=null&&l.Basic.hasVideoAction||(u=this._eventManager.handlers)!=null&&u.Conditional.hasVideoAction)&&(this._skipRender=!1),(c=this._animationControls)==null||c.update(this.dt),this._skipRender?(this.currentTAAFrame++,this.currentTAAFrame<32?this._skipRender=!1:this.currentTAAFrame=0):this.currentTAAFrame=0,(h=this._scene)==null||h.traverseVisibleEntity(g=>{g.type==="ParticleSystem"&&(g.update(this.dt),this._skipRender=!1)}),this._scene&&this._scene.activeCamera!==this._camera&&(this._camera=this._scene.activeCamera),(d=this._eventManager)!=null&&d.isEnabled&&(((f=this._eventManager.handlers)==null?void 0:f.Follow).onAnimationFrameDamping(),((p=this._eventManager.handlers)==null?void 0:p.LookAt).onAnimationFrameDamping(),((v=this._eventManager.handlers)==null?void 0:v.DragDrop).onAnimationFrameDamping()),this._scene&&this._camera){if(this._scene.pathConstraints.applyConstraints(this._scene),this._renderer.sceneTransitionTimeRemaining>0){this._renderer.sceneTransitionTimeRemaining-=this.dt;let g=1-this._renderer.sceneTransitionTimeRemaining/this._renderer.sceneTransitionDuration;this._renderer.pipeline.sceneTransitionPass.uniforms.mixRatio.value=g,this._skipRender=!1}else this._renderer.pipeline.sceneTransitionFromTexture=null;this._renderer.renderSplineScene(this._scene,this._camera)}this.canvas.dispatchEvent(this._renderedEvent),(m=this._perfs)==null||m.end()},this._resize=i=>{var n,a,o,s,l,u,c,h,d,f;if(this._renderer){if(this._viewportMode===1&&this._frameView&&(this._frameView.frameSize=JMt.set(this._viewportWidth,this._viewportHeight)),i){let p=this._viewportWidth,v=this._viewportHeight;this._renderer.setSize(p-1,v-1,!1),this._renderer.setSize(p,v,!1)}else this._renderer.setSize(this._viewportWidth,this._viewportHeight,!1);if(this._camera=(n=this._scene)==null?void 0:n.activeCamera,(c=this._scene)==null||c.updateViewPlaneSize(((o=(a=this._frameView)==null?void 0:a.frameSize)==null?void 0:o.x)??this._viewportWidth,((l=(s=this._frameView)==null?void 0:s.frameSize)==null?void 0:l.y)??this._viewportHeight,((u=this._frameView)==null?void 0:u.enableResponsive)??!1),this._camera){let p=Object.values(((h=this._data)==null?void 0:h.frames)??{})[0].preset??"fullscreen";(d=this._frameView)==null||d.setCamera(this._camera),(f=this._frameView)==null||f.updateCamera(p!=="fullscreen"),this._camera.cameraType==="PerspectiveCamera"&&(this._camera.aspect=this._viewportWidth/this._viewportHeight),this._camera.updateProjectionMatrix()}this.eventManager&&(this.eventManager.eventContext.domRect=this.canvas.getBoundingClientRect()),this._requestRenderAutoMode()}},this._debouncedResize=Fw(this._resize,10),this._onScroll=i=>{this.eventManager&&(this.eventManager.eventContext.domRect=this.canvas.getBoundingClientRect())},this.canvas=e,this.renderMode=t?"auto":r,this._renderedEvent=new CustomEvent("rendered",{bubbles:!0}),Object.defineProperty(this._renderedEvent,"target",{writable:!1,value:this}),window.location.search.includes("perfs")&&(this._perfs=new qMt({x:10,y:10})),qxt(e)}async load(e,t,r){$Mt(e),this.disposed=!1;let i=await(await fetch(e,r)).arrayBuffer();await this.start(i,{variables:t})}async start(e,{interactive:t=!0,variables:r}={}){var l,u,c,h;if(this.disposed)return;let i=await AMt(e);this._data=i;let n=SMt(i);i.version&&(0,KMt.default)(i.version,"1.9.47")>0&&console.warn("Your .splinecode file is more recent than the library. Please upgrade @splinetool/runtime to the latest version."),await Promise.all([n.length&&wMt(),Jre(i)&&Q3t(),cAt(i)&&q3t(),jw.physicsEnabled(i.scene.objects)&&Kxt(),Xre(i)&&I5t(),Tie(i)&&pCt(),P5t(i)&&T5t(),xie(i)&&s6t(),aMt(i)&&Zxt()].filter(Boolean)),n.length&&await CMt(n),(l=this._eventManager)==null||l.deactivate(),(u=this._controls)==null||u.deactivate(),(c=this._scene)==null||c.dispose();let a=new WMt(i);if(a.resetPersonalCameraFromDocumentData(),this._scene=a.scene,this._sharedAssetsManager=a.sharedAssets,this._camera=this._scene.activeCamera,window.location.search.includes("merge-geometries")){let d=performance.now();QMt(i,a.scene);let f=performance.now();console.log("Merged geometries in ",f-d," ms")}Jre(i)&&this._scene.traverse(d=>{nd(d)&&d.recomputeBoolean()}),this._sharedAssetsManager.setRequestRender(()=>{var d;this._requestRenderAutoMode(),(d=this._scene)==null||d.traverse(f=>{f instanceof yu&&f.pendingMediaLoad&&f.update()})}),(h=this._scene)==null||h.traverse(d=>{d.type==="ParticleSystem"&&(d.wakeUp(),d.data.autoPlay?d.start():d.stop())});let o=Object.keys(i.shared.fonts).map(d=>this._sharedAssetsManager.getFont(d).loadingPromise);if(Promise.all(o).then(()=>{a.scene.markNeedsUpdateRendererDirty(),this._requestRenderAutoMode()}),Xre(i)&&vMt(i)&&await Promise.all(o),xie(i)){let d=[];this._scene.traverseEntity(f=>{(f instanceof mo||f instanceof va)&&f.uiCanvas&&d.push(f.uiCanvas)}),await Promise.all(d.map(f=>f.promise))}if(this._scene.rewriteEventsBeforeGoToPlayMode(),kH(this._scene.activePage,this._sharedAssetsManager),!this._renderer&&(this._renderer=new YSt({canvas:this.canvas,antialias:!1,alpha:!0,stencil:!1,depth:!1,powerPreference:"high-performance"}),this._renderer.hdTransmission=i.scene.publish.hdTransmission===!0,this._renderer.setPixelRatio(window.devicePixelRatio),this._renderer.pipeline.enableUIOverlay(),this._renderer.pipeline.addEventListener("smaaloaded",this._requestRenderAutoMode),i.shared.images.SplineWatermark)){let d=this._sharedAssetsManager.getImage("SplineWatermark");await d.loadPromise;let f=d.getTexture(1001);this._renderer.pipeline.setWatermark(f)}Tie(i)&&this._scene.initializeSplatViewer(),i.scene.blueNoiseTextureData!==void 0&&this._renderer.pipeline.updateBlueNoiseTexture(i.scene.blueNoiseTextureData);let s=Object.values(i.frames)[0];if(this._frameView?this._frameView.setCamera(this._camera):(s.preset==="fullscreen"?(this._viewportMode=1,this.canvas.style.display="block",this.canvas.parentElement&&(this._viewportWidth=this.canvas.parentElement.clientWidth||300,this.canvas.style.width="100%"),this.canvas.parentElement&&(this._viewportHeight=this.canvas.parentElement.clientHeight||150,this.canvas.style.height="100%")):(this._viewportMode=2,this._viewportWidth=s.size[0],this._viewportHeight=s.size[1],this.canvas.style.width=`${this._viewportWidth}px`,this.canvas.style.height=`${this._viewportHeight}px`),this._renderer.setSize(this._viewportWidth,this._viewportHeight,!1),this._frameView=new GMt(this._renderer,this._camera,new me(this._viewportWidth,this._viewportHeight),new me(window.innerWidth,window.innerHeight)),this._frameView.enableResponsive=(s.allowResponsive??!1)&&s.preset==="fullscreen"),t){let d=new fEt(this._renderer,this.data.scene.publish,this._scene,()=>this._scene.activeCamera,this._sharedAssetsManager,this._requestRenderAutoMode,!0,s);this._scene.updateMatrixWorld(!0),this._controls=new mMt(d),this._animationControls=new yMt(this._scene,this._requestRenderAutoMode),this._eventManager=new UMt(i.scene.publish,this._controls,this._animationControls,d,i.shared.variables),this._eventManager.activate(),this._controls.activate(this._eventManager)}this._resize(),this._scene.activePage.data.postprocessing.depthOfField.enabled&&Promise.all(this._sharedAssetsManager.getImageLoadPromises()).then(()=>{this._resize(!0)}),r!==void 0&&this.setVariables(r),this.dt===0&&(this.render(performance.now()),setTimeout(()=>{var d;(d=this._renderer)==null||d.setAnimationLoop(this.render)},0)),this._resizeObserverTimeout=setTimeout(()=>{!this._resizeObserver&&this.canvas.parentElement&&(this._resizeObserver=new ResizeObserver(()=>{this._viewportWidth=this.canvas.clientWidth,this._viewportHeight=this.canvas.clientHeight,this._debouncedResize()}),this._resizeObserver.observe(this.canvas.parentElement))},300),document.addEventListener("scroll",this._onScroll)}setVariables(e){if(this._data!==void 0){let t=Object.entries(e);for(let[r,i]of t)this.setVariable(r,i)}}setVariable(e,t){var i;let r=this._getVariableByName(e);if(r&&!("dynamicVariableType"in r.data)){let n=t;typeof r.data.value=="number"?n=typeof t=="number"?t:typeof t=="boolean"?t===!0?1:0:parseFloat(t):typeof r.data.value=="boolean"?n=typeof t=="number"?!!t:typeof t=="boolean"?t:t.toLocaleLowerCase()==="false"?!1:!!t:typeof r.data.value!="string"&&r.data.value.textValue!==void 0&&(n=t.toString());let a=typeof n=="string"?{textValue:n}:n;(i=this._sharedAssetsManager)==null||i.updateVariable(r.id,a),this.requestRender(),this._requestRenderAutoMode()}else r===void 0?console.warn(`No variable named ${e} was found in your Spline file. Make sure to create it from Spline editor.`):"dynamicVariableType"in r.data&&console.warn(`Dynamic variables like ${e} cannot be updated from code.`)}getVariables(){let e={};return this._data&&this._data.shared.variables.forEach(t=>{e[t.data.name]===void 0&&(e[t.data.name]=this._getVariableValue(this._sharedAssetsManager.getVariable(t.id)))}),e}getVariable(e){let t=this._getVariableByName(e);if(t){let r=this._sharedAssetsManager.getVariable(t.id);return this._getVariableValue(r)}}_getVariableValue(e){return typeof e!="string"&&Ga.isTextValue(e)?Ga.getDisplayedValue(e):e}_getVariableByName(e){if(this._data){if(this._variablesCache.has(e))return this._variablesCache.get(e);let t=this._data.shared.variables.find(r=>r.data.name===e);return t&&this._variablesCache.set(e,t),t}}findObjectById(e){var r;let t=(r=this._scene)==null?void 0:r.getObjectByProperty("uuid",e);return this._createProxyObject(t)}findObjectByName(e){var r;let t=(r=this._scene)==null?void 0:r.getObjectByName(e);return this._createProxyObject(t)}getAllObjects(){var t;let e=[];return(t=this._scene)==null||t.traverseEntity(r=>{if(r.uuid!==i2&&!this._scene.isInvisibleObjects(r)&&!(r instanceof va)){let i=this._createProxyObject(r);i&&e.push(i)}}),e}getSplineEvents(){var e,t;return((t=(e=this._eventManager)==null?void 0:e.handlers)==null?void 0:t.Spline).splineEvents}emitEvent(e,t){var r;(r=this.findObjectById(t)||this.findObjectByName(t))==null||r.emitEvent(e)}emitEventReverse(e,t){var r;(r=this.findObjectById(t)||this.findObjectByName(t))==null||r.emitEventReverse(e)}addEventListener(e,t){this.canvas.addEventListener(e,t)}removeEventListener(e,t){this.canvas.removeEventListener(e,t)}setZoom(e){var t,r;((t=this._controls)==null?void 0:t.orbitControls)instanceof D2e&&((r=this._controls)==null||r.orbitControls.setZoom(e))}get eventManager(){return this._eventManager}get controls(){return this._controls}setSize(e,t){this._viewportWidth=e,this._viewportHeight=t,this._viewportMode=2,this._resize()}setBackgroundColor(e){var o;let{r:t,g:r,b:i,a:n}={r:0,g:0,b:0,a:1},a=new qa(t,r,i,n);try{a.setStyle(e)}catch{console.error("This is not a valid css color",e)}(o=this._scene)==null||o.activePage.setBackgroundColor(a),this._requestRenderAutoMode()}dispose(){var e,t,r,i,n,a,o;this.disposed=!0,(e=this._eventManager)==null||e.deactivate(),(t=this._scene)==null||t.dispose(),(r=this._sharedAssetsManager)==null||r.dispose(),this._proxyObjectCache.forEach(s=>{$$.unsubscribe(s)}),this._variablesCache.clear(),(i=this._renderer)==null||i.setAnimationLoop(null),(n=this._renderer)==null||n.dispose(),this._renderer=void 0,(a=this._sharedAssetsManager)==null||a.dispose(),this._resizeObserver&&(this._resizeObserver.disconnect(),this._resizeObserver=void 0),this._resizeObserverTimeout!==void 0&&clearTimeout(this._resizeObserverTimeout),this.canvas.style.width="",this.canvas.style.height="",this.canvas.removeAttribute("width"),this.canvas.removeAttribute("height"),this._frameView&&(this._frameView=void 0),(o=this._controls)==null||o.deactivate(),this.dt=0,Yxt(this.canvas),document.removeEventListener("scroll",this._onScroll)}get isStopped(){return this._isPaused}stop(){var e,t,r;this._isPaused||((e=this._renderer)==null||e.setAnimationLoop(null),this._isPaused=!0,(t=this._eventManager)==null||t.pause(),(r=this._controls)!=null&&r.orbitControls&&(this._controls.orbitControls.enabled=!1))}play(){var e,t,r;!this._isPaused||(this._isPaused=!1,(e=this._eventManager)==null||e.resume(),(t=this._controls)!=null&&t.orbitControls&&(this._controls.orbitControls.enabled=!0),(r=this._renderer)==null||r.setAnimationLoop(this.render))}setGlobalEvents(e){var t;(t=this._eventManager)==null||t.updateUseWindowEvents(e)}get data(){return this._data}_createProxyObject(e){var n;if(e==null)return;if(this._proxyObjectCache.has(e.uuid))return this._proxyObjectCache.get(e.uuid);let t;e.traverseAncestors(a=>{a instanceof va&&(t=a.name)});let r={name:e.name,uuid:e.uuid,visible:e.visible,intensity:e.intensity,position:e.position,rotation:e.rotation,scale:e.scale,type:e.data.type,page:t,parentUuid:e.parent instanceof va||e instanceof bH||(n=e.parent)==null?void 0:n.uuid,emitEvent(a){e.dispatchEvent({type:"userEvent",eventName:a})},emitEventReverse(a){e.dispatchEvent({type:"userEvent",eventName:a,reverse:!0})}},i=$$(r,(a,o)=>{var s;typeof e[a]!="object"&&((s=Object.getOwnPropertyDescriptor(e,a))!=null&&s.writable)&&(e[a]=o),this._requestRenderAutoMode(),e.updateMatrix()});return this._proxyObjectCache.set(e.uuid,i),i}setUIWasmUrl(e){$1e.skiaWasmUrl=e}};const k2e=[{key:"LLaMA",label:"LLaMA",value:-1,icon:"llama",disabled:!0},{key:"SD",label:"Stable diffusion",icon:"stable",value:-1,disabled:!0},{key:"Midjourney",label:"Midjourney",icon:"midjourney",value:-1,disabled:!0},{key:"Claude",label:"Claude",icon:"claude",value:-1,disabled:!0},{key:"Grok",label:"Grok",icon:"grok",value:-1,disabled:!0}],Nb=[{key:"GPT",label:"GPT",icon:"gpt.png",value:1},...k2e],oB=[{key:"GPT",label:"GPT",icon:"gpt.png",value:2},...k2e],Vb=[{key:"ReadON Loki",label:"ReadON Loki",icon:"read.png",value:{chainId:"0x2EEF",chainName:"ReadON Loki",rpcUrls:["https://pre-alpha-zkrollup-rpc.opside.network/readon-content-test-chain"],nativeCurrency:{name:"READ",symbol:"READ",decimals:18}}},{key:"Polygon",label:"Polygon",icon:"polygon.png",value:{chainId:"0x89",chainName:"Polygon Mainnet",rpcUrls:["https://polygon-rpc.com/"],nativeCurrency:{name:"MATIC",symbol:"MATIC",decimals:18}}},{key:"Sepolia",label:"Sepolia",icon:"sepolia",value:{chainId:"0xAA36A7",chainName:"Sepolia test network",rpcUrls:["https://rpc.sepolia.org"],nativeCurrency:{name:"SepoliaETH",symbol:"SepoliaETH",decimals:18}}}],e1=Vb.slice(1,2),R2e={"ReadON Loki":"0x0EEdCc3998527Bc35E62e59dDcB379B40cF268CD",Polygon:"0x861C9288C8dE190b6d7D690f7322b90dc3eFc221",Sepolia:"0x4165E17d6E555AB66d0572e68d30b6d7e2D07058"},eTt={"ReadON Loki":"https://readon-content-test-chain.zkevm.opside.info/address/0x0EEdCc3998527Bc35E62e59dDcB379B40cF268CD",Polygon:"https://polygonscan.com/address/0x861C9288C8dE190b6d7D690f7322b90dc3eFc221",Sepolia:"https://sepolia.etherscan.io/address/0x4165E17d6E555AB66d0572e68d30b6d7e2D07058"},tTt={"ReadON Loki":"https://readon-content-test-chain.zkevm.opside.info/tx/",Polygon:"https://polygonscan.com/tx/",Sepolia:"https://sepolia.etherscan.io/tx/"},rTt={class:"page-ai",id:"page-ai"},iTt={class:"fbv g12"},nTt={class:"fbh fbac fbjsb process g4"},aTt={class:"fbv fbac g4"},oTt={class:"fbv fbac g4"},sTt={class:"fbv fbac text"},lTt={key:0,class:"error failed"},uTt={class:"fbv fbac g4"},cTt={class:"fbv fbac text"},hTt={key:0,class:"error failed"},dTt={class:"fbh w100p"},fTt={class:"fb1 fbv"},pTt={class:"fb1 fbv fbjsb"},vTt={class:"fbv g16 select-container"},mTt={class:"fb1 fbv"},gTt={key:0,class:"fbh fbac g4 wallet-error"},yTt={class:"fbv g12 button-container",style:{height:"auto"}},xTt={class:"fbv fbje g20 display"},bTt={class:"fbv g4"},wTt={target:"_blank"},Pne="",_Tt=sr({__name:"ai",setup(e){const t=Fe(""),r=Fe(""),i=Fe("custom"),n=Fe(Nb[0]),a=Fe(e1[0]),o=Fe(!1),s=Fe(!1),l=Fe(!1),u=Fe(!1),c=_s(()=>R2e[a.value.key]);async function h(){alert("Please experience the full functionality on pc")}return(d,f)=>(We(),ii(ue(hc),{variant:"middle"},{default:Er(()=>[B("div",rTt,[f[10]||(f[10]=B("p",{class:"title"},"DPROMPT",-1)),B("div",iTt,[f[9]||(f[9]=B("p",{class:"description"}," REVOX DPrompt uses advanced on-chain AI models to generate time-sensitive answers in smart contracts. ",-1)),B("div",nTt,[B("div",aTt,[Ie(ue(Ir),{name:"users",size:100}),f[4]||(f[4]=B("p",{class:"name text"},"Users",-1))]),Ie(ue(pK),{variant:Pne||s.value?"static":"dynamic",class:"line"},null,8,["variant"]),B("div",oTt,[s.value?Kt("",!0):(We(),ii(ue(Ir),{key:0,name:"contract",size:100})),s.value?(We(),ii(ue(Ir),{key:1,name:"contract-error",size:100})):Kt("",!0),B("div",sTt,[B("p",{class:Tt(["name",{error:s.value}])},"AI Contract",2),s.value?(We(),tt("p",lTt,"（Failed）")):Kt("",!0)])]),Ie(ue(pK),{variant:r.value||l.value?"static":"dynamic",class:"line"},null,8,["variant"]),B("div",uTt,[l.value?Kt("",!0):(We(),ii(ue(Ir),{key:0,name:"provider",size:100})),l.value?(We(),ii(ue(Ir),{key:1,name:"provider-error",size:100})):Kt("",!0),B("div",cTt,[B("p",{class:Tt(["name",{error:l.value}])},"AI Provider",2),l.value?(We(),tt("p",hTt,"（Failed）")):Kt("",!0)])])]),B("div",dTt,[B("div",fTt,[Ie(ue(Mk),{variant:"ai",onOnActiveKeyChange:f[0]||(f[0]=p=>i.value=p),data:[{title:"Custom Prompt",key:"custom"},{title:"Hot Prompts",key:"hot"}]}),B("div",pTt,[B("div",vTt,[Ie(ue(gQ),{class:"w100p",label:"Model",selected:n.value,options:i.value==="custom"?ue(Nb):ue(oB),onOnSelectedChange:f[1]||(f[1]=p=>n.value=p)},null,8,["selected","options"]),Ie(ue(gQ),{class:"w100p",label:"Chain",selected:a.value,options:i.value==="custom"?ue(e1):ue(Vb),onOnSelectedChange:h},null,8,["selected","options"])]),B("div",mTt,[py(Ie(ue(xQe),{modelValue:t.value,"onUpdate:modelValue":f[2]||(f[2]=p=>t.value=p)},null,8,["modelValue"]),[[Q6,i.value==="custom"]]),i.value==="custom"&&u.value?(We(),tt("div",gTt,[Ie(ue(Ir),{variant:"icon",name:"wallet",size:14}),f[5]||(f[5]=B("p",null,"Insufficient wallet balance",-1))])):Kt("",!0),i.value==="hot"?(We(),ii(ue(rKe),{key:1,onOnPromptChange:f[3]||(f[3]=p=>i.value==="hot"&&(t.value=p))})):Kt("",!0),B("div",yTt,[B("div",{onClick:h,class:Tt(["button center hand g4",{loading:o.value}])},[f[6]||(f[6]=jo(" Generate ")),o.value?(We(),ii(ue(AWe),{key:0})):Kt("",!0)],2),B("p",null,Br(i.value==="custom"?"GAS + AI SERVICE FEE(0.01 $MATIC)":"GAS ONLY"),1)])]),B("div",xTt,[B("div",{class:"fbv g4"},[f[7]||(f[7]=B("p",{class:"title3"},"TX HASH",-1)),B("a",{target:"_blank"},Br(Pne))]),B("div",bTt,[f[8]||(f[8]=B("p",{class:"title3"},"CONTRACT ADDRESS",-1)),B("a",wTt,Br(c.value),1)])])])])])])])]),_:1}))}}),ATt=Ar(_Tt,[["__scopeId","data-v-774da2ef"]]),STt=["src"],CTt={class:"page-studio",id:"page-studio"},ETt={class:"content"},MTt=["src"],TTt={class:"subtitle"},PTt={class:"description"},DTt={class:"fbh fbjsb g16 progress"},ITt=["onClick"],LTt={class:"back oh"},kTt=sr({__name:"studio",setup(e){const t=[{key:"Agent Editor",title:"AGENT EDITOR",description:"A fully customizable agent builder with plugins, workflows, and external data to fulfill thousands of use cases.",image:"studio1"},{key:"Workflow",title:"WORKFLOW",description:"Complex workflow creator to arrange AI tasks with precise control.",image:"studio2"},{key:"Composable Plugins",title:"COMPOSABLE PLUGINS",description:"Plugins for external community, including data retrieval and transaction submission.",image:"studio3"},{key:"Open Plugin Marketplace",title:"OPEN PLUGIN MARKETPLACE",description:"Any developers can submit plugins to connect their service with each other through AI.",image:"studio4"}],r=Fe(),i=Fe(),n=Fe(),a=Fe(t[0]);let o;async function s(){await P4(100),o==null||o.pause(),o=Qi({targets:n.value,translateX:["0%","100%"],duration:5e3,easing:"linear",complete:()=>{const l=t.findIndex(({key:u})=>a.value.key===u);a.value=t[(l+1)%t.length],s()}})}return Zs(s),ja(a,async()=>r.value=await ppe(a.value.image,"jpeg"),{immediate:!0}),(l,u)=>(We(),tt(ri,null,[Ie(ue(CWe),{open:!!i.value},{default:Er(()=>[B("div",{class:"image-preview wh100v hand",onClick:u[0]||(u[0]=c=>i.value=void 0)},[B("img",{class:"wh100p",src:i.value},null,8,STt)])]),_:1},8,["open"]),Ie(ue(hc),{variant:"middle"},{default:Er(()=>[B("div",CTt,[u[4]||(u[4]=B("div",{class:"fbh g16"},[B("p",{class:"outlined-title"},"REVOX"),B("p",{class:"title"},"STUDIO")],-1)),B("div",ETt,[B("img",{src:r.value,class:"image hand",onClick:u[1]||(u[1]=c=>i.value=r.value)},null,8,MTt),B("p",TTt,Br(a.value.title),1),B("p",PTt,Br(a.value.description),1),Ie(ue(mQe),{width:452,height:80,class:"f32 pt56 center",onClick:u[2]||(u[2]=c=>ue(xs)("https://studio.revox.ai"))},{default:Er(()=>u[3]||(u[3]=[jo(" Visit ")])),_:1})]),B("div",DTt,[(We(),tt(ri,null,fd(t,c=>B("div",{class:"fb1 tab center hand pr",onClick:h=>(a.value=c,s())},[B("div",LTt,[a.value.key===c.key?(We(),tt("div",{key:0,ref_for:!0,ref_key:"progressRef",ref:n,class:"font"},null,512)):Kt("",!0)])],8,ITt)),64))])])]),_:1})],64))}}),RTt=Ar(kTt,[["__scopeId","data-v-dd629d99"]]),OTt={class:"container fbv ov"},BTt={class:"page0 pr r16"},NTt={class:"title-container center fbv"},VTt={class:"fbh fbac g12"},FTt={class:"page-position"},zTt={class:"fb1 fbh modal-container"},HTt={class:"fbv fbjsb fbae button-group"},UTt={class:"page-agent"},GTt={class:"card-container"},jTt={class:"fbh g18"},WTt={class:"page-experience"},qTt={class:"card-container fbv fbac g20"},YTt={class:"page-case"},XTt={class:"content-parent"},ZTt={class:"content"},QTt={class:"page-bottom fbv fbjsb"},KTt={class:"fbv g20"},JTt={class:"fbh fbac g32"},$Tt={target:"_blank",href:"https://twitter.com/ReadOnMe3"},e9t={target:"_blank",href:"https://discord.com/invite/readon/"},t9t={target:"_blank",href:"https://readonofficial.medium.com/"},r9t={target:"_blank",href:"https://www.youtube.com/channel/UCs6v7FKrTVIZlmyFt1qUckg"},i9t={target:"_blank",href:"https://link3.to/readon"},n9t={target:"_blank",href:"https://t.me/ReadONCommunity"},a9t=sr({__name:"index",setup(e){Zs(()=>{{try{const i=document.getElementById("canvas3d");new L2e(i).load("https://prod.spline.design/DqfCWrtGCm445wfe/scene.splinecode")}catch(i){console.error(i)}window.location.search.match("dprompt")&&t()}});function t(){var i;(i=document.querySelector("#page-ai"))==null||i.scrollIntoView()}const r=Fe();return(i,n)=>(We(),tt("div",OTt,[Ie(ue(ZQe),{onJumpToAiPage:t}),B("div",BTt,[n[16]||(n[16]=B("div",{class:"canvas pa"},[B("canvas",{id:"canvas3d"})],-1)),B("div",NTt,[n[14]||(n[14]=B("p",{class:"title"},"REVOX",-1)),n[15]||(n[15]=B("p",{class:"description"},"Agents in Smart Contracts",-1)),Ie(ue(Z0e),{"is-mobile":"",width:462,height:80,"keep-state":"active","active-fill":"#44DAC8","active-color":"#121212",onClick:n[0]||(n[0]=a=>ue(xs)("https://lense.revox.ai/wallet")),style:{"margin-top":"20px"}},{default:Er(()=>[B("div",VTt,[Ie(ue(Ir),{name:"wallet1",size:30}),n[13]||(n[13]=B("p",{class:"f30"},"Experience Smart Wallet",-1))])]),_:1})])]),Ie(ue(hc),{variant:"top"},{default:Er(()=>[B("div",FTt,[n[21]||(n[21]=B("div",{class:"fbv"},[B("div",{class:"fb1"},[B("p",{class:"outlined-title"},"OUR"),B("p",{class:"title"},"POSITION"),B("div",{class:"fbv content"},[B("p",{class:"title2"}," REVOX REDEFINES THE PARADIGM OF DAPP CREATION WITH AUTONOMOUS AGENTS. "),B("p",{class:"description"},"REVOX aims to be:"),B("ul",null,[B("li",null," To be the essential tool for building any dapp with AI usage "),B("li",null," To be the go-to platform to share third-party data and logic for open integration "),B("li",null,"To be the common interface to connect with Web3")])])])],-1)),B("div",zTt,[Ie(ue(wJe),{"active-layer":r.value,onOnActiveLayerChange:n[1]||(n[1]=a=>r.value=a)},null,8,["active-layer"]),B("div",HTt,[Ie(ue(A_),{layer:1,class:"layer hand",active:r.value===1,onMouseenter:n[2]||(n[2]=a=>r.value=1),onMouseleave:n[3]||(n[3]=a=>r.value=void 0)},null,8,["active"]),Ie(ue(A_),{layer:2,class:"layer hand",active:r.value===2,onMouseenter:n[4]||(n[4]=a=>r.value=2),onMouseleave:n[5]||(n[5]=a=>r.value=void 0)},null,8,["active"]),Ie(ue(A_),{layer:3,class:"layer hand",active:r.value===3,onMouseenter:n[6]||(n[6]=a=>r.value=3),onMouseleave:n[7]||(n[7]=a=>r.value=void 0)},null,8,["active"]),Ie(ue(A_),{layer:4,class:"layer hand",active:r.value===4,onMouseenter:n[8]||(n[8]=a=>r.value=4),onMouseleave:n[9]||(n[9]=a=>r.value=void 0)},null,8,["active"])])]),Ie(ue(Mk),{variant:"process",data:[{key:"1",title:"APPLICATION"},{key:"2",title:"AGENTS"},{key:"3",title:"COMPUTATION"},{key:"4",title:"MODEL"}]},{1:Er(()=>n[17]||(n[17]=[B("p",{class:"title2"},"BUILD DAPPS FROM AGENTS",-1),B("p",{class:"description"}," REVOX reimagines applications as agents, each built to satisfy distinct user needs: ",-1),B("ul",{class:"description"},[B("li",null,[B("span",null,"Customized for Users: "),jo("Every application, viewed as an independent agent, is designed to cater to specific user requirements, providing personalized solutions. ")]),B("li",null,[B("span",null,"Efficient Data Access: "),jo(" Through primitive agents powered by external data sources, CAN ensures effective information retrieval and usage. ")]),B("li",null,[B("span",null,"Adaptable Development: "),jo("Personal agents enable a flexible and personalized approach to developing applications, incorporating specific logic and functions as needed. ")])],-1),B("p",{class:"description"}," In REVOX's ecosystem, agents become the cornerstone for innovation, effectively meeting a wide range of user demands. ",-1)])),2:Er(()=>n[18]||(n[18]=[B("p",{class:"title2"},"PRIMITIVE AND COMPOUND AGENTS",-1),B("p",{class:"description"}," REVOX transforms essential Web3 components like wallet integration and smart contracts calls in the form of AI agents. These agents are not mere static entities; they are dynamic, intelligent actors within the blockchain, capable of executing complex tasks, making decisions, and interacting with other components of the ecosystem. ",-1),B("p",{class:"description"}," REVOX offers a flexible framework to connect different AI agents, which allows developers to orchestrate various agents, each with its own expertise, to collaborate on solving intricate problems. ",-1)])),3:Er(()=>n[19]||(n[19]=[B("p",{class:"title2"},"FLEXIBLE COMPUTATION RESOUCE",-1),B("p",{class:"description"}," REVOX ensures compatibility with an array of decentralized computation providers, laying a solid foundation for agent development. ",-1),B("p",{class:"description"}," With an incentive mechanism, REVOX acts as an interface for developers to connect with decentralized AI computation. ",-1)])),4:Er(()=>n[20]||(n[20]=[B("p",{class:"title2"},"STATE OF ART MODEL CHOICES",-1),B("p",{class:"description"}," REVOX is set to support an extensive array of Large Language Models (LLMs), embracing both proprietary models like GPT-3 and GPT-4, as well as leading open-source alternatives such as LLaMM and GROK. This comprehensive approach ensures that developers and users on the REVOX platform have access to a diverse toolkit, enabling the creation and implementation of cutting-edge AI applications across a variety of domains. ",-1)])),_:1})])]),_:1}),Ie(ue(hc),{variant:"middle"},{default:Er(()=>[B("div",UTt,[n[23]||(n[23]=B("p",{class:"outlined-title"},"FOUNDATION OF",-1)),n[24]||(n[24]=B("p",{class:"title"},"REVOX",-1)),B("div",GTt,[B("div",jTt,[Ie(ue(w_),{icon:"foun1",title:"ONCHAIN AI INFERNECE: DPROMPT",description:"At the heart of the REVOX ecosystem, DPrompt emerges as the pivotal component that enables on-chain AI inferences for all agents within the network. Designed to integrate effortlessly with smart contracts, DPrompt facilitates the convergence of AI capabilities with blockchain technology, offering a robust foundation for developing dApps."}),Ie(ue(w_),{icon:"foun2",title:"WEB3 INTEGRATION WITH AI AGENTS",description:"REVOX transforms essential Web3 components like wallet integration and smart contracts calls in the form of AI agents. These agents are dynamic, intelligent actors within the blockchain, capable of executing complex tasks, making decisions, and interacting with other components of the ecosystem. "}),Ie(ue(w_),{icon:"foun3",title:"LOW-CODE WORKFLOW FOR COMPLEX USE CASES",description:"REVOX offers a flexible framework to connect different AI agents with a low-code workflow for developers to solve complex challenges."}),Ie(ue(w_),{icon:"foun4",title:"INCENTIVE MECHANISM FOR DEVELOPERS AND AI PROVIDERS",description:"A carefully designed incentive mechanism that rewards both developers of AI agents and providers of computational resources will be released to ensure contributors to the network are fairly compensated."}),n[22]||(n[22]=B("div",null,null,-1))])])])]),_:1}),Ie(ue(hc),{variant:"middle"},{default:Er(()=>[B("div",WTt,[n[25]||(n[25]=B("p",{class:"title"},"EXPERIENCE REVOX",-1)),B("div",qTt,[Ie(ue(__),{icon:"prompt",title:"DPROMPT",description:"is the core component of REVOX onchain AI inference.",onClick:t}),Ie(ue(__),{icon:"hub",title:"CONTENT HUB",description:"is an innovative content curation portal developed in conjunction with Linea Network and ReadON Loki Testnet, transforming the community into a more democratic model and enabling all members to actively contribute to the content discovery process.",onClick:n[10]||(n[10]=a=>ue(xs)("https://content-hub.readon.me/"))}),Ie(ue(__),{icon:"revox",title:"REVOX LENSE",description:"emerges as the first application on top the REVOX , designed to integrate with users' wallets, automating the process of identifying assets and distilling the most insightful news, social media trends relevant to those assets. REVOX Lense crafts tailored reports and answers to every question regarding their portfolio.",onClick:n[11]||(n[11]=a=>ue(xs)("https://lense.revox.ai/"))}),Ie(ue(__),{icon:"studio",title:"REVOX STUDIO",description:"is a platform for crypto AI application developers, connecting AI to Web3 and enabling the customization of AI agents and workflows to create versatile applications. It supports plugins for external data access and direct blockchain interaction, streamlining the integration of advanced functionalities.",onClick:n[12]||(n[12]=a=>ue(xs)("https://studio.revox.ai"))})])])]),_:1}),Ie(RTt),Ie(ATt),Ie(ue(hc),{variant:"middle"},{default:Er(()=>[B("div",YTt,[n[35]||(n[35]=B("p",{class:"title"},"USE CASES",-1)),B("div",XTt,[B("div",ZTt,[Ie(ue(Mk),{variant:"process",class:"switch",data:[{title:"Use Case 1",key:"case1"},{title:"Use Case 2",key:"case2"}]},{case1:Er(()=>[n[26]||(n[26]=B("p",{class:"title2"}," SOCIAL DATA ANALYSIS OF REAL-TIME CRYPTOCURRENCY PRICE FLUCTUATIONS ",-1)),n[27]||(n[27]=B("p",{class:"description"}," Building an automated trading bot based on social data analysis involves combining financial market data with information extracted from social media platforms to make trading decisions. ",-1)),n[28]||(n[28]=B("p",{class:"description"}," REVOX is able to support building this bot with a few clicks. ",-1)),n[29]||(n[29]=B("p",{class:"title3"},"Primitive Agent:",-1)),n[30]||(n[30]=B("ul",{class:"fbv"},[B("li",null,"Ticker Price Agent for market price data"),B("li",null," Wallet Agent for connecting users' wallets with authorization to perform trading on behalf of users with predefined rules "),B("li",null," Twitter Agent/Facebook Agent and other social media agents related to information retrieval "),B("li",null," Sentimental Analysis Agent to perform analysis on social data "),B("li",null," Summarization LLM to perform final aggregation and analysis ")],-1)),Ie(ue(UKe),{class:"w100p"})]),case2:Er(()=>[n[31]||(n[31]=B("p",{class:"title2"}," AN INTENT-BASED CRYPTO TRADING BOT FROM USERS' NATURAL LANGUAGE PROMPT ",-1)),n[32]||(n[32]=B("p",{class:"description"}," Crypto trading can be as straightforward as clicking a button, but at times, it can become intricate with tasks such as chain selection, gas collection, and trading fee comparison. To alleviate these complexities, an intent-based crypto trading bot that efficiently handles all these intricacies with a simple prompt, will streamline the process for users. ",-1)),n[33]||(n[33]=B("p",{class:"title3"},"Primitive Agent:",-1)),n[34]||(n[34]=B("ul",{class:"fbv"},[B("li",null," Wallet Agent to connect users' wallets with authorization "),B("li",null," Dex Agent can be implemented to connect Uniswap or any dex pool "),B("li",null,"Onramp Agent to solve onramp request if needed")],-1)),Ie(ue(WKe),{class:"w100p",style:{height:"auto"}})]),_:1})])])])]),_:1}),Ie(ue(hc),{variant:"middle"},{default:Er(()=>n[36]||(n[36]=[B("div",{class:"page-cooperate"},[B("p",{class:"title"},"AWARDS"),B("div",{class:"group fbv g14"},[B("a",{target:"_blank",href:"https://twitter.com/solana/status/1514365006539804675?s=21"},[B("div",{class:"item fbv fbac g20"},[B("div",{class:Tt(["awa1"])}),B("p",null," “Winner of the Community Choice Award in Solana Riptide Hackathon” ")])]),B("a",{target:"_blank",href:"https://twitter.com/BNBCHAIN/status/1635576416124252161"},[B("div",{class:"item fbv fbac g20"},[B("div",{class:Tt(["awa2"])}),B("p",null,"“3rd Prize - Best Overall Social dApp”")])]),B("a",{target:"_blank",href:"https://dorahacks.io/hackathon/arweave2022/results"},[B("div",{class:"item fbv fbac g20"},[B("div",{class:Tt(["awa3"])}),B("p",null,' “The 1st prize of Web3Infra Hackathon Award Sponsored by Arweave" ')])])])],-1)])),_:1}),Ie(ue(hc),{variant:"middle"},{default:Er(()=>n[37]||(n[37]=[B("div",{class:"page-cooperate"},[B("p",{class:"title"},"AS FEATURED IN"),B("div",{class:"group group4"},[B("a",{target:"_blank",href:"https://news.bitcoin.com/readon-completes-2m-seed-round-to-build-a-decentralized-content-distribution-platform/"},[B("img",{src:LF})]),B("a",{target:"_blank",href:"https://jp.cointelegraph.com/press-releases/readon-completes-2m-seed-round-to-build-a-decentralized-content-distribution-platform"},[B("img",{src:kF})]),B("a",{target:"_blank",href:"https://coinpost.jp/?post_type=breaking&p=403462"},[B("img",{src:RF})]),B("a",{target:"_blank",href:"https://www.coinreaders.com/51049"},[B("img",{src:OF})]),B("a",{target:"_blank",href:"https://foresightnews.pro/news/detail/8503"},[B("img",{src:BF})])])],-1)])),_:1}),Ie(ue(hc),{variant:"middle"},{default:Er(()=>n[38]||(n[38]=[B("div",{class:"page-cooperate"},[B("p",{class:"title"},"BACKERS"),B("div",{class:"group group4"},[B("img",{src:NF}),B("img",{src:VF}),B("img",{src:FF}),B("img",{src:zF}),B("img",{src:HF}),B("img",{src:UF}),B("img",{src:GF}),B("img",{src:jF}),B("img",{src:WF}),B("img",{src:qF}),B("img",{src:YF}),B("img",{src:XF}),B("img",{src:ZF}),B("img",{src:QF}),B("img",{src:KF})])],-1)])),_:1}),Ie(ue(hc),{variant:"bottom"},{default:Er(()=>[B("div",QTt,[n[40]||(n[40]=B("div",{class:"fbv g20"},[B("img",{class:"logo2",src:Tw}),B("p",{class:"description"},"© 2024 REVOX Network. All rights reserved")],-1)),B("div",KTt,[n[39]||(n[39]=B("p",{class:"title2"},"GET INVOLVED",-1)),B("div",JTt,[B("a",$Tt,[Ie(ue(Ir),{name:"link1",size:64,variant:"icon"})]),B("a",e9t,[Ie(ue(Ir),{name:"link2",size:64,variant:"icon"})]),B("a",t9t,[Ie(ue(Ir),{name:"link3",size:64,variant:"icon"})]),B("a",r9t,[Ie(ue(Ir),{name:"link4",size:64,variant:"icon"})]),B("a",i9t,[Ie(ue(Ir),{name:"link5",size:64,variant:"icon"})]),B("a",n9t,[Ie(ue(Ir),{name:"link6",size:64,variant:"icon"})])])]),n[41]||(n[41]=B("div",{class:"fbv g14"},[B("p",{class:"title2"},"CONTACT US"),B("p",{class:"description"},"hello@revox.ai")],-1))])]),_:1})]))}}),o9t=Ar(a9t,[["__scopeId","data-v-b9cf9c31"]]),s9t={class:"page-ai",id:"page-ai"},l9t={class:"content"},u9t={class:"fbv section p32 g24"},c9t={class:"fbh fbac fbjsb process"},h9t={class:"fbv fbac g8"},d9t={class:"fbv fbac g8"},f9t={class:"fbv fbac text"},p9t={key:0,class:"error failed"},v9t={class:"fbv fbac g8"},m9t={class:"fbv fbac text"},g9t={key:0,class:"error failed"},y9t={class:"fbh w100p"},x9t={class:"fb1 fbv section"},b9t={class:"ai-tab"},w9t={class:"fb1 fbv fbjsb p32"},_9t={class:"fbh fbac fbjsb g20"},A9t={class:"fb1 fbv fbae"},S9t={key:0,class:"fbh fbac g4 wallet-error"},C9t={class:"fbh fbac g16 button-container",style:{height:"auto"}},E9t={class:"fbv fbje g40 display"},M9t={class:"fbv g8"},T9t=["href"],P9t={class:"fbv g8"},D9t=["href"],I9t={class:"fb1 section result"},L9t={key:0,class:"ai-loading fbv fbac fbjc"},k9t={class:"loading"},R9t={key:1},O9t=sr({__name:"ai",setup(e){const t=Fe(""),r=Fe(""),i=Fe(""),n=Fe(""),a=Fe("custom"),o=Fe(Nb[0]),s=Fe(e1[0]),l=Fe(!1),u=Fe(!1),c=Fe(!1),h=Fe(!1),d=_s(()=>R2e[s.value.key]),f=_s(()=>eTt[s.value.key]),p=_s(()=>tTt[s.value.key]+A.value),{data:v,refetch:m}=O5e({skip:!0});let g;function y(){clearTimeout(g),r.value="",i.value="",A.value="",h.value=!1,u.value=!1,c.value=!1,l.value=!1}function x(L){const P=M(),C=new URLSearchParams(window.location.search);C.set("dprompt","true"),C.set("request_id",L),C.set("chain_id",P.networkVersion),C.set("network",s.value.key),C.set("query",t.value),C.set("tab",a.value);const D=`${window.location.pathname}?${C.toString()}`;window.history.replaceState({},"",D),b()}function b(){const L=new URLSearchParams(window.location.search),P=L.get("request_id"),C=L.get("chain_id"),D=L.get("network"),I=L.get("query"),O=L.get("tab");t.value=I??"",n.value=C??"",i.value=P??"",a.value=O??"custom",s.value=Vb.find(({key:R})=>R===D)??e1[0],i.value&&n.value&&m({request_id:i.value,chain_id:n.value})}function _(L){const P=L==null?void 0:L.code,C=L==null?void 0:L.message;l.value=!1,u.value=!0,h.value=!0}function w(L){y(),a.value=L,L==="custom"?(t.value="",o.value=Nb[0],s.value=e1[0]):o.value=oB[0]}vae(()=>{b()});const{connect:S,transactionHash:A,getProvider:M}=hQe({setUrl:x,onError:_});async function E(){const L=M();if(L){if(y(),l.value=!0,L.networkVersion!==parseInt(s.value.value.chainId,16).toString()&&!await T(Vb.find(({key:P})=>P===s.value.key))){l.value=!1,alert("Network error");return}S(d.value,o.value.value,t.value).finally(()=>l.value=!1)}else{Ab.value=!0;const P=new URLSearchParams(window.location.search);P.set("dprompt","true"),P.set("query",t.value);const C=`${window.location.pathname}?${P.toString()}`;window.history.replaceState({},"",C)}}async function T(L){const P=M();return P?(await P.request({method:"wallet_switchEthereumChain",params:[{chainId:L.value.chainId}]}).catch(async()=>{await P.request({method:"wallet_addEthereumChain",params:[L.value]})}),new Promise(C=>{let D=0;const I=()=>{setTimeout(()=>{P.networkVersion===parseInt(L.value.chainId,16).toString()&&(s.value=L,C(!0)),D>3e3?C(!1):(D+=200,I())},100)};I()})):(Ab.value=!0,!1)}return ja(v,()=>{var C,D,I,O;const L=(C=v.value)==null?void 0:C.code,P=(I=(D=v.value)==null?void 0:D.data)==null?void 0:I.status;if(L===60601||P===1)g=setTimeout(()=>m({request_id:i.value,chain_id:n.value}),3e3);else if(L!==0||P===3)c.value=!0;else{const R=((O=v.value)==null?void 0:O.data.response)??"",H=()=>{r.value=R.slice(0,r.value.length+4),r.value.length!==R.length&&(g=setTimeout(H,40)),setTimeout(()=>{const j=document.getElementsByTagName("textarea")[0];j==null||j.scrollTo({top:1e4})})};r.value="",H()}}),(L,P)=>(We(),ii(ue(fc),{variant:"middle"},{default:Er(()=>[B("div",s9t,[P[11]||(P[11]=B("p",{class:"title"},"DPROMPT",-1)),B("div",l9t,[B("div",u9t,[P[4]||(P[4]=B("p",{class:"description"}," REVOX DPrompt uses advanced on-chain AI models to generate time-sensitive answers in smart contracts. ",-1)),B("div",c9t,[B("div",h9t,[Ie(ue(Or),{name:"users",size:72}),P[3]||(P[3]=B("p",{class:"name text"},"Users",-1))]),Ie(ue(wK),{variant:ue(A)||u.value||r.value?"static":"dynamic",class:"line"},null,8,["variant"]),B("div",d9t,[u.value?Kt("",!0):(We(),ii(ue(Or),{key:0,name:"contract",size:72})),u.value?(We(),ii(ue(Or),{key:1,name:"contract-error",size:72})):Kt("",!0),B("div",f9t,[B("p",{class:Tt(["name",{error:u.value}])},"AI Contract",2),u.value?(We(),tt("p",p9t,"（Failed）")):Kt("",!0)])]),Ie(ue(wK),{variant:r.value||c.value?"static":"dynamic",class:"line"},null,8,["variant"]),B("div",v9t,[c.value?Kt("",!0):(We(),ii(ue(Or),{key:0,name:"provider",size:72})),c.value?(We(),ii(ue(Or),{key:1,name:"provider-error",size:72})):Kt("",!0),B("div",m9t,[B("p",{class:Tt(["name",{error:c.value}])},"AI Provider",2),c.value?(We(),tt("p",g9t,"（Failed）")):Kt("",!0)])])])]),B("div",y9t,[B("div",x9t,[B("div",b9t,[Ie(ue(X0e),{variant:"ai","default-key":a.value,onOnActiveKeyChange:w,data:[{title:"Custom Prompt",key:"custom"},{title:"Hot Prompts",key:"hot"}]},null,8,["default-key"])]),B("div",w9t,[B("div",_9t,[Ie(ue(bK),{class:"fb1",label:"Model",selected:o.value,options:a.value==="custom"?ue(Nb):ue(oB),onOnSelectedChange:P[0]||(P[0]=C=>o.value=C)},null,8,["selected","options"]),Ie(ue(bK),{label:"Chain",class:"fb1",selected:s.value,options:a.value==="custom"?ue(e1):ue(Vb),onOnSelectedChange:T},null,8,["selected","options"])]),B("div",A9t,[py(Ie(ue(s$e),{modelValue:t.value,"onUpdate:modelValue":P[1]||(P[1]=C=>t.value=C)},null,8,["modelValue"]),[[Q6,a.value==="custom"]]),a.value==="custom"&&h.value?(We(),tt("div",S9t,[Ie(ue(Or),{variant:"icon",name:"wallet",size:14}),P[5]||(P[5]=B("p",null,"Insufficient wallet balance",-1))])):Kt("",!0),a.value==="hot"?(We(),ii(ue(K$e),{key:1,"initial-query":t.value,onOnPromptChange:P[2]||(P[2]=C=>a.value==="hot"&&(t.value=C))},null,8,["initial-query"])):Kt("",!0),B("div",C9t,[B("p",null,Br(a.value==="custom"?"GAS + AI SERVICE FEE(0.01 $MATIC)":"GAS ONLY"),1),B("div",{onClick:E,class:Tt(["button center hand g8",{loading:l.value}])},[P[6]||(P[6]=jo(" Generate ")),l.value?(We(),ii(ue(TJe),{key:0})):Kt("",!0)],2)])]),B("div",E9t,[B("div",M9t,[P[7]||(P[7]=B("p",{class:"title3"},"TX HASH",-1)),B("a",{target:"_blank",href:p.value},Br(ue(A)),9,T9t)]),B("div",P9t,[P[8]||(P[8]=B("p",{class:"title3"},"CONTRACT ADDRESS",-1)),B("a",{target:"_blank",href:f.value},Br(d.value),9,D9t)])])])]),B("div",I9t,[P[10]||(P[10]=B("p",{class:"title2"},"RESULT",-1)),i.value&&!r.value?(We(),tt("div",L9t,[B("div",k9t,[Ie(ue(IJe))]),P[9]||(P[9]=B("p",null,"Generating...",-1))])):(We(),tt("textarea",R9t,Br(r.value),1))])])])])]),_:1}))}}),B9t=Ar(O9t,[["__scopeId","data-v-31597154"]]),N9t=["src"],V9t={class:"page-studio",id:"page-studio"},F9t={class:"content"},z9t={class:"subtitle"},H9t={class:"description"},U9t=["src"],G9t={class:"fbh fbjsb g16"},j9t=["onClick"],W9t={class:"back oh"},q9t=sr({__name:"studio",setup(e){const t=[{key:"Agent Editor",title:"AGENT EDITOR",description:"A fully customizable agent builder with plugins, workflows, and external data to fulfill thousands of use cases.",image:"studio1"},{key:"Workflow",title:"WORKFLOW",description:"Complex workflow creator to arrange AI tasks with precise control.",image:"studio2"},{key:"Composable Plugins",title:"COMPOSABLE PLUGINS",description:"Plugins for external community, including data retrieval and transaction submission.",image:"studio3"},{key:"Open Plugin Marketplace",title:"OPEN PLUGIN MARKETPLACE",description:"Any developers can submit plugins to connect their service with each other through AI.",image:"studio4"}],r=Fe(),i=Fe(),n=Fe(),a=Fe(t[0]);let o;async function s(){await P4(100),o==null||o.pause(),o=Qi({targets:n.value,translateX:["0%","100%"],duration:5e3,easing:"linear",complete:()=>{const l=t.findIndex(({key:u})=>a.value.key===u);a.value=t[(l+1)%t.length],s()}})}return Zs(s),ja(a,async()=>r.value=await ppe(a.value.image,"jpeg"),{immediate:!0}),(l,u)=>(We(),tt(ri,null,[Ie(ue(kJe),{open:!!i.value},{default:Er(()=>[B("div",{class:"image-preview wh100v hand",onClick:u[0]||(u[0]=c=>i.value=void 0)},[B("img",{class:"wh100p",src:i.value},null,8,N9t)])]),_:1},8,["open"]),Ie(ue(fc),{variant:"middle"},{default:Er(()=>[B("div",V9t,[u[4]||(u[4]=B("div",{class:"fbh g16"},[B("p",{class:"outlined-title"},"REVOX"),B("p",{class:"title"},"STUDIO")],-1)),B("div",F9t,[B("div",null,[B("p",z9t,Br(a.value.title),1),B("p",H9t,Br(a.value.description),1),Ie(ue(n$e),{width:244,height:48,class:"f16 pt64",onClick:u[1]||(u[1]=c=>ue(xs)("https://studio.revox.ai"))},{default:Er(()=>u[3]||(u[3]=[jo(" Visit ")])),_:1})]),B("img",{src:r.value,class:"wh100p image hand",onClick:u[2]||(u[2]=c=>i.value=r.value)},null,8,U9t)]),B("div",G9t,[(We(),tt(ri,null,fd(t,c=>B("div",{class:"fb1 tab center hand pr",onClick:h=>(a.value=c,s())},[B("div",W9t,[a.value.key===c.key?(We(),tt("div",{key:0,ref_for:!0,ref_key:"progressRef",ref:n,class:"font"},null,512)):Kt("",!0)]),jo(" "+Br(c.key),1)],8,j9t)),64))])])]),_:1})],64))}}),Y9t=Ar(q9t,[["__scopeId","data-v-d4afe84c"]]),X9t={class:"container fbv ov"},Z9t={class:"fbh fbjsb"},Q9t={class:"links"},K9t={class:"page-position"},J9t={class:"fbh g64"},$9t={class:"fb1"},ePt={class:"fb1 fbh g40 modal-container"},tPt={class:"fbv fbjsb button-group"},rPt={class:"page-agent"},iPt={class:"card-container fbh"},nPt={class:"fbv fb3"},aPt={class:"page-experience"},oPt={class:"card-container fbh fbac g40"},sPt={class:"page-case"},lPt={class:"content-parent"},uPt={class:"content"},cPt={class:"page-cooperate"},hPt={class:"group group3"},dPt={target:"_blank",href:"https://twitter.com/solana/status/1514365006539804675?s=21"},fPt={target:"_blank",href:"https://twitter.com/BNBCHAIN/status/1635576416124252161"},pPt={target:"_blank",href:"https://dorahacks.io/hackathon/arweave2022/results"},vPt={class:"page-bottom"},mPt={class:"fbh fbjsb"},gPt={class:"fbv g28"},yPt={class:"fbh fbac g16"},xPt={target:"_blank",href:"https://twitter.com/ReadOnMe3"},bPt={target:"_blank",href:"https://discord.com/invite/readon/"},wPt={target:"_blank",href:"https://readonofficial.medium.com/"},_Pt={target:"_blank",href:"https://www.youtube.com/channel/UCs6v7FKrTVIZlmyFt1qUckg"},APt={target:"_blank",href:"https://link3.to/readon"},SPt={target:"_blank",href:"https://t.me/ReadONCommunity"},CPt=sr({__name:"index",setup(e){Zs(()=>{{try{const a=document.getElementById("canvas3d");new L2e(a).load("https://prod.spline.design/DqfCWrtGCm445wfe/scene.splinecode")}catch(a){console.error(a)}window.location.search.match("dprompt")&&t()}});function t(){var a;(a=document.querySelector("#page-ai"))==null||a.scrollIntoView()}const r=Fe(),i=Fe(),n=Fe();return(a,o)=>(We(),tt("div",X9t,[B("div",Z9t,[o[22]||(o[22]=B("img",{class:"logo",src:Tw},null,-1)),B("div",Q9t,[Ie(ue(V$e),{onJumpToAiPage:t}),Ie(ue(W$e))])]),o[52]||(o[52]=Mu('<div class="page0 pr r16" data-v-efb08a16><div class="canvas pa" data-v-efb08a16><canvas id="canvas3d" data-v-efb08a16></canvas></div><div class="title-container center fbv" data-v-efb08a16><p class="title" data-v-efb08a16>REVOX</p><p class="description" data-v-efb08a16>Agents in Smart Contracts</p></div></div>',1)),Ie(ue(fc),{variant:"top"},{default:Er(()=>[B("div",K9t,[B("div",J9t,[B("div",$9t,[o[28]||(o[28]=B("p",{class:"outlined-title"},"OUR",-1)),o[29]||(o[29]=B("p",{class:"title"},"POSITION",-1)),Ie(ue(ZJe),{"active-layer":i.value},{default:Er(()=>o[23]||(o[23]=[B("div",{class:"fbv content"},[B("p",{class:"title2"}," REVOX REDEFINES THE PARADIGM OF DAPP CREATION WITH AUTONOMOUS AGENTS. "),B("p",{class:"description"},"REVOX aims to be:"),B("ul",null,[B("li",null," To be the essential tool for building any dapp with AI usage "),B("li",null," To be the go-to platform to share third-party data and logic for open integration "),B("li",null,"To be the common interface to connect with Web3")])],-1)])),layer1:Er(()=>o[24]||(o[24]=[B("p",{class:"title2"},"BUILD DAPPS FROM AGENTS",-1),B("p",{class:"description"}," REVOX reimagines applications as agents, each built to satisfy distinct user needs: ",-1),B("ul",{class:"description"},[B("li",null,[B("span",null,"Customized for Users: "),jo("Every application, viewed as an independent agent, is designed to cater to specific user requirements, providing personalized solutions. ")]),B("li",null,[B("span",null,"Efficient Data Access: "),jo(" Through primitive agents powered by external data sources, CAN ensures effective information retrieval and usage. ")]),B("li",null,[B("span",null,"Adaptable Development: "),jo("Personal agents enable a flexible and personalized approach to developing applications, incorporating specific logic and functions as needed. ")])],-1),B("p",{class:"description"}," In REVOX's ecosystem, agents become the cornerstone for innovation, effectively meeting a wide range of user demands. ",-1)])),layer2:Er(()=>o[25]||(o[25]=[B("p",{class:"title2"},"PRIMITIVE AND COMPOUND AGENTS",-1),B("p",{class:"description"}," REVOX transforms essential Web3 components like wallet integration and smart contracts calls in the form of AI agents. These agents are not mere static entities; they are dynamic, intelligent actors within the blockchain, capable of executing complex tasks, making decisions, and interacting with other components of the ecosystem. ",-1),B("p",{class:"description"}," REVOX offers a flexible framework to connect different AI agents, which allows developers to orchestrate various agents, each with its own expertise, to collaborate on solving intricate problems. ",-1)])),layer3:Er(()=>o[26]||(o[26]=[B("p",{class:"title2"},"FLEXIBLE COMPUTATION RESOUCE",-1),B("p",{class:"description"}," REVOX ensures compatibility with an array of decentralized computation providers, laying a solid foundation for agent development. ",-1),B("p",{class:"description"}," With an incentive mechanism, REVOX acts as an interface for developers to connect with decentralized AI computation. ",-1)])),layer4:Er(()=>o[27]||(o[27]=[B("p",{class:"title2"},"STATE OF ART MODEL CHOICES",-1),B("p",{class:"description"}," REVOX is set to support an extensive array of Large Language Models (LLMs), embracing both proprietary models like GPT-3 and GPT-4, as well as leading open-source alternatives such as LLaMM and GROK. This comprehensive approach ensures that developers and users on the REVOX platform have access to a diverse toolkit, enabling the creation and implementation of cutting-edge AI applications across a variety of domains. ",-1)])),_:1},8,["active-layer"])]),B("div",ePt,[Ie(ue(Fet),{"active-layer":i.value,onOnActiveLayerChange:o[0]||(o[0]=s=>i.value=s)},null,8,["active-layer"]),B("div",tPt,[Ie(ue(E_),{layer:1,class:"layer hand",active:i.value===1,onMouseenter:o[1]||(o[1]=s=>i.value=1),onMouseleave:o[2]||(o[2]=s=>i.value=void 0)},null,8,["active"]),Ie(ue(E_),{layer:2,class:"layer hand",active:i.value===2,onMouseenter:o[3]||(o[3]=s=>i.value=2),onMouseleave:o[4]||(o[4]=s=>i.value=void 0)},null,8,["active"]),Ie(ue(E_),{layer:3,class:"layer hand",active:i.value===3,onMouseenter:o[5]||(o[5]=s=>i.value=3),onMouseleave:o[6]||(o[6]=s=>i.value=void 0)},null,8,["active"]),Ie(ue(E_),{layer:4,class:"layer hand",active:i.value===4,onMouseenter:o[7]||(o[7]=s=>i.value=4),onMouseleave:o[8]||(o[8]=s=>i.value=void 0)},null,8,["active"])])])])])]),_:1}),Ie(ue(fc),{variant:"middle"},{default:Er(()=>[B("div",rPt,[o[30]||(o[30]=B("p",{class:"outlined-title"},"FOUNDATION OF",-1)),o[31]||(o[31]=B("p",{class:"title"},"REVOX",-1)),B("div",iPt,[Ie(ue(S_),{icon:"foun1",title:"ONCHAIN AI INFERNECE: DPROMPT",description:"At the heart of the REVOX ecosystem, DPrompt emerges as the pivotal component that enables on-chain AI inferences for all agents within the network. Designed to integrate effortlessly with smart contracts, DPrompt facilitates the convergence of AI capabilities with blockchain technology, offering a robust foundation for developing dApps.","icon-size":"large",class:"large fb2"}),Ie(ue(S_),{icon:"foun2",title:"WEB3 INTEGRATION WITH AI AGENTS",description:"REVOX transforms essential Web3 components like wallet integration and smart contracts calls in the form of AI agents. These agents are dynamic, intelligent actors within the blockchain, capable of executing complex tasks, making decisions, and interacting with other components of the ecosystem. ","icon-size":"large",class:"large fb2"}),B("div",nPt,[Ie(ue(S_),{icon:"foun3",title:"LOW-CODE WORKFLOW FOR COMPLEX USE CASES",description:"REVOX offers a flexible framework to connect different AI agents with a low-code workflow for developers to solve complex challenges.","icon-size":"small",class:"small"}),Ie(ue(S_),{icon:"foun4",title:"INCENTIVE MECHANISM FOR DEVELOPERS AND AI PROVIDERS",description:"A carefully designed incentive mechanism that rewards both developers of AI agents and providers of computational resources will be released to ensure contributors to the network are fairly compensated.","icon-size":"small",class:"small"})])])])]),_:1}),Ie(ue(fc),{variant:"middle"},{default:Er(()=>[B("div",aPt,[o[32]||(o[32]=B("p",{class:"title"},"EXPERIENCE REVOX",-1)),B("div",oPt,[Ie(ue(C_),{variant:"box1",active:n.value,icon:["prompt","prompt1"],title:"DPROMPT",description:"is the core component of REVOX onchain AI inference.",onHover:o[9]||(o[9]=s=>n.value=s),onClick:t},null,8,["active"]),Ie(ue(C_),{variant:"box2",active:n.value,icon:["hub","hub1"],title:"CONTENT HUB",description:"is an innovative content curation portal developed in conjunction with Linea Network and ReadON Loki Testnet, transforming the community into a more democratic model and enabling all members to actively contribute to the content discovery process.",onClick:o[10]||(o[10]=s=>ue(xs)("https://content-hub.readon.me/")),onHover:o[11]||(o[11]=s=>n.value=s)},null,8,["active"]),Ie(ue(C_),{variant:"box3",active:n.value,icon:["revox","revox1"],title:"REVOX LENSE",description:"emerges as the first application on top the REVOX , designed to integrate with users' wallets, automating the process of identifying assets and distilling the most insightful news, social media trends relevant to those assets. REVOX Lense crafts tailored reports and answers to every question regarding their portfolio.",onClick:o[12]||(o[12]=s=>ue(xs)("https://lense.revox.ai/")),onHover:o[13]||(o[13]=s=>n.value=s)},null,8,["active"]),Ie(ue(C_),{variant:"box4",active:n.value,icon:["studio","studio1"],title:"REVOX STUDIO",description:"is a platform for crypto AI application developers, connecting AI to Web3 and enabling the customization of AI agents and workflows to create versatile applications. It supports plugins for external data access and direct blockchain interaction, streamlining the integration of advanced functionalities.",onHover:o[14]||(o[14]=s=>n.value=s),onClick:o[15]||(o[15]=s=>ue(xs)("https://studio.revox.ai"))},null,8,["active"])])])]),_:1}),Ie(Y9t),Ie(B9t),Ie(ue(fc),{variant:"middle"},{default:Er(()=>[B("div",sPt,[o[42]||(o[42]=B("p",{class:"title"},"USE CASES",-1)),B("div",lPt,[B("div",uPt,[Ie(ue(X0e),{variant:"process",class:"switch",data:[{title:"Use Case 1",key:"case1"},{title:"Use Case 2",key:"case2"}]},{case1:Er(()=>[o[33]||(o[33]=B("p",{class:"title2"}," SOCIAL DATA ANALYSIS OF REAL-TIME CRYPTOCURRENCY PRICE FLUCTUATIONS ",-1)),o[34]||(o[34]=B("p",{class:"description"}," Building an automated trading bot based on social data analysis involves combining financial market data with information extracted from social media platforms to make trading decisions. ",-1)),o[35]||(o[35]=B("p",{class:"description"}," REVOX is able to support building this bot with a few clicks. ",-1)),o[36]||(o[36]=B("p",{class:"title3"},"Primitive Agent:",-1)),o[37]||(o[37]=B("ul",{class:"fbv"},[B("li",null,"Ticker Price Agent for market price data"),B("li",null," Wallet Agent for connecting users' wallets with authorization to perform trading on behalf of users with predefined rules "),B("li",null," Twitter Agent/Facebook Agent and other social media agents related to information retrieval "),B("li",null," Sentimental Analysis Agent to perform analysis on social data "),B("li",null," Summarization LLM to perform final aggregation and analysis ")],-1)),Ie(ue(set),{class:"w100p"})]),case2:Er(()=>[o[38]||(o[38]=B("p",{class:"title2"}," AN INTENT-BASED CRYPTO TRADING BOT FROM USERS' NATURAL LANGUAGE PROMPT ",-1)),o[39]||(o[39]=B("p",{class:"description"}," Crypto trading can be as straightforward as clicking a button, but at times, it can become intricate with tasks such as chain selection, gas collection, and trading fee comparison. To alleviate these complexities, an intent-based crypto trading bot that efficiently handles all these intricacies with a simple prompt, will streamline the process for users. ",-1)),o[40]||(o[40]=B("p",{class:"title3"},"Primitive Agent:",-1)),o[41]||(o[41]=B("ul",{class:"fbv"},[B("li",null," Wallet Agent to connect users' wallets with authorization "),B("li",null," Dex Agent can be implemented to connect Uniswap or any dex pool "),B("li",null,"Onramp Agent to solve onramp request if needed")],-1)),Ie(ue(het),{class:"w100p"})]),_:1})])])])]),_:1}),Ie(ue(fc),{variant:"middle"},{default:Er(()=>[B("div",cPt,[o[46]||(o[46]=B("p",{class:"title"},"AWARDS",-1)),B("div",hPt,[B("a",dPt,[B("div",{class:"item fbv fbac g28",onMouseenter:o[16]||(o[16]=s=>r.value=1),onMouseleave:o[17]||(o[17]=s=>r.value=void 0)},[B("div",{class:Tt(["awa1",{hovered:r.value===1}])},null,2),o[43]||(o[43]=B("p",null," “Winner of the Community Choice Award in Solana Riptide Hackathon” ",-1))],32)]),B("a",fPt,[B("div",{class:"item fbv fbac g28",onMouseenter:o[18]||(o[18]=s=>r.value=2),onMouseleave:o[19]||(o[19]=s=>r.value=void 0)},[B("div",{class:Tt(["awa2",{hovered:r.value===2}])},null,2),o[44]||(o[44]=B("p",null,"“3rd Prize - Best Overall Social dApp”",-1))],32)]),B("a",pPt,[B("div",{class:"item fbv fbac g28",onMouseenter:o[20]||(o[20]=s=>r.value=3),onMouseleave:o[21]||(o[21]=s=>r.value=void 0)},[B("div",{class:Tt(["awa3",{hovered:r.value===3}])},null,2),o[45]||(o[45]=B("p",null,' “The 1st prize of Web3Infra Hackathon Award Sponsored by Arweave" ',-1))],32)])])])]),_:1}),Ie(ue(fc),{variant:"middle"},{default:Er(()=>o[47]||(o[47]=[B("div",{class:"page-cooperate"},[B("p",{class:"title"},"AS FEATURED IN"),B("div",{class:"group group4"},[B("a",{target:"_blank",href:"https://news.bitcoin.com/readon-completes-2m-seed-round-to-build-a-decentralized-content-distribution-platform/"},[B("img",{src:LF})]),B("a",{target:"_blank",href:"https://jp.cointelegraph.com/press-releases/readon-completes-2m-seed-round-to-build-a-decentralized-content-distribution-platform"},[B("img",{src:kF})]),B("a",{target:"_blank",href:"https://coinpost.jp/?post_type=breaking&p=403462"},[B("img",{src:RF})]),B("a",{target:"_blank",href:"https://www.coinreaders.com/51049"},[B("img",{src:OF})]),B("a",{target:"_blank",href:"https://foresightnews.pro/news/detail/8503"},[B("img",{src:BF})])])],-1)])),_:1}),Ie(ue(fc),{variant:"middle"},{default:Er(()=>o[48]||(o[48]=[B("div",{class:"page-cooperate"},[B("p",{class:"title"},"BACKERS"),B("div",{class:"group group4"},[B("img",{src:NF}),B("img",{src:VF}),B("img",{src:FF}),B("img",{src:zF}),B("img",{src:HF}),B("img",{src:UF}),B("img",{src:GF}),B("img",{src:jF}),B("img",{src:WF}),B("img",{src:qF}),B("img",{src:YF}),B("img",{src:XF}),B("img",{src:ZF}),B("img",{src:QF}),B("img",{src:KF})])],-1)])),_:1}),Ie(ue(fc),{variant:"bottom"},{default:Er(()=>[B("div",vPt,[B("div",mPt,[o[50]||(o[50]=B("div",{class:"fbv g28"},[B("img",{class:"logo",src:Tw}),B("p",{class:"description"}," © 2024 REVOX Network. All rights reserved ")],-1)),B("div",gPt,[o[49]||(o[49]=B("p",{class:"title2"},"GET INVOLVED",-1)),B("div",yPt,[B("a",xPt,[Ie(ue(Or),{name:"link1",size:40,variant:"icon"})]),B("a",bPt,[Ie(ue(Or),{name:"link2",size:40,variant:"icon"})]),B("a",wPt,[Ie(ue(Or),{name:"link3",size:40,variant:"icon"})]),B("a",_Pt,[Ie(ue(Or),{name:"link4",size:40,variant:"icon"})]),B("a",APt,[Ie(ue(Or),{name:"link5",size:40,variant:"icon"})]),B("a",SPt,[Ie(ue(Or),{name:"link6",size:40,variant:"icon"})])])]),o[51]||(o[51]=B("div",{class:"fbv g28"},[B("p",{class:"title2"},"CONTACT US"),B("p",{class:"description"},"hello@revox.ai")],-1))])])]),_:1})]))}}),EPt=Ar(CPt,[["__scopeId","data-v-efb08a16"]]),MPt={key:1},TPt={__name:"app",setup(e){const t=kB(),r=Ea(),i=t.fullPath.startsWith("/stats");return r.$isMobile?Te(()=>Promise.resolve({}),__vite__mapDeps([0]),import.meta.url):Te(()=>Promise.resolve({}),__vite__mapDeps([1]),import.meta.url),(n,a)=>{const o=P5e;return We(),tt(ri,null,[a[0]||(a[0]=B("div",{id:"modal"},null,-1)),ue(i)?(We(),ii(mWe,{key:0})):(We(),tt("div",MPt,[n.$isMobile?(We(),tt(ri,{key:0},[Ie(o9t),Ie(ue(zWe))],64)):(We(),tt(ri,{key:1},[Ie(EPt),Ie(ue(qJe))],64)),Ie(o,null,{default:Er(()=>[Ie(dot)]),_:1})]))],64)}}},PPt={__name:"nuxt-error-page",props:{error:Object},setup(e){const r=e.error;r.stack&&r.stack.split(`
`).splice(1).map(h=>({text:h.replace("webpack:/","").replace(".vue",".js").trim(),internal:h.includes("node_modules")&&!h.includes(".cache")||h.includes("internal")||h.includes("new Promise")})).map(h=>`<span class="stack${h.internal?" internal":""}">${h.text}</span>`).join(`
`);const i=Number(r.statusCode||500),n=i===404,a=r.statusMessage??(n?"Page Not Found":"Internal Server Error"),o=r.message||r.toString(),s=void 0,c=n?WH(()=>Te(()=>import("./BkApbOUb.js"),__vite__mapDeps([2,3,4]),import.meta.url)):WH(()=>Te(()=>import("./EsbXx8Wj.js"),__vite__mapDeps([5,3,6]),import.meta.url));return(h,d)=>(We(),ii(ue(c),W2e(Yae({statusCode:ue(i),statusMessage:ue(a),description:ue(o),stack:ue(s)})),null,16))}},DPt={key:0},Dne={__name:"nuxt-root",setup(e){const t=()=>null,r=Ea(),i=r.deferHydration();if(r.isHydrating){const l=r.hooks.hookOnce("app:error",i);Pv().beforeEach(l)}const n=!1;SB(woe,kB()),r.hooks.callHookWith(l=>l.map(u=>u()),"vue:setup");const a=RB(),o=!1;gae((l,u,c)=>{if(r.hooks.callHook("vue:error",l,u,c).catch(h=>console.error("[nuxt] Error in `vue:error` hook",h)),R4e(l)&&(l.fatal||l.unhandled))return r.runWithContext(()=>L4e(l)),!1});const s=!1;return(l,u)=>(We(),ii(xbe,{onResolve:ue(i)},{default:Er(()=>[ue(o)?(We(),tt("div",DPt)):ue(a)?(We(),ii(ue(PPt),{key:1,error:ue(a)},null,8,["error"])):ue(s)?(We(),ii(ue(t),{key:2,context:ue(s)},null,8,["context"])):ue(n)?(We(),ii(Wxe(ue(n)),{key:3})):(We(),ii(ue(TPt),{key:4}))]),_:1},8,["onResolve"]))}};let Ine;{let e;Ine=async function(){var o,s;if(e)return e;const i=!!(((o=window.__NUXT__)==null?void 0:o.serverRendered)??((s=document.getElementById("__NUXT_DATA__"))==null?void 0:s.dataset.ssr)==="true")?awe(Dne):nwe(Dne),n=p4e({vueApp:i});async function a(l){await n.callHook("app:error",l),n.payload.error=n.payload.error||OB(l)}i.config.errorHandler=a,n.hook("app:suspense:resolve",()=>{i.config.errorHandler===a&&(i.config.errorHandler=void 0)});try{await g4e(n,C5e)}catch(l){a(l)}try{await n.hooks.callHook("app:created",i),await n.hooks.callHook("app:beforeMount",i),i.mount(h4e),await n.hooks.callHook("app:mounted",i),await gB()}catch(l){a(l)}return i},e=Ine().catch(t=>{throw console.error("Error while mounting app:",t),t})}export{Er as A,jo as B,kPt as C,IPt as D,ja as E,Nxe as F,Bxe as G,SI as H,TB as I,_r as J,D4 as K,Ar as _,Ea as a,NB as b,LU as c,sr as d,zxe as e,RPt as f,jxe as g,Obe as h,_s as i,my as j,I4e as k,K6 as l,D4e as m,LPt as n,Zs as o,noe as p,O1 as q,Fe as r,IB as s,We as t,Pv as u,tt as v,mI as w,B as x,Br as y,Ie as z};
